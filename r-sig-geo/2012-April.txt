From agus.camacho at gmail.com  Sun Apr  1 00:17:58 2012
From: agus.camacho at gmail.com (agus)
Date: Sat, 31 Mar 2012 15:17:58 -0700 (PDT)
Subject: [R-sig-Geo] Problem accessing gshhs database of world coastlines
In-Reply-To: <Pine.LNX.4.44.0510161951280.12372-100000@reclus.nhh.no>
References: <99449F52-343F-431C-8D02-593B5A6B35E2@globetrotter.net>
	<Pine.LNX.4.44.0510161951280.12372-100000@reclus.nhh.no>
Message-ID: <1333232278866-7425816.post@n2.nabble.com>

Dear Denis and Roger,

I am trying to use this thread to import coastlines into R, however i am not
succeeding:

When I try(with latest version of maptools  and psbmapping just installed):

a) wcoastline <- read.shp("C:/Users/Agus/Desktop/Distributional range
size/GSHHS_shp/gshhs_land.shp")
I get
 Error: could not find function "read.shp"

b)  coastline=importGSHHS("C:/Users/Agus/Desktop/Distributional range
size/GSHHS_shp/gshhs_land.shp"
                      , xlim=c(envir at extent@xmin,envir at extent@xmax), 
                               ylim=c(envir at extent@ymin,envir at extent@ymax))

I get:

importGSHHS status:
--> Pass 1: complete: 0 bounding boxes within limits.
--> Pass 2: 
Error in importGSHHS("C:/Users/Agus/Desktop/Distributional range
size/GSHHS_shp/gshhs_land.shp",  : 
  call to gshhs failed.

Could you please give me any hint?

there it goes my session info
sessionInfo()
R version 2.14.1 (2011-12-22)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_Australia.1252  LC_CTYPE=English_Australia.1252   
LC_MONETARY=English_Australia.1252
[4] LC_NUMERIC=C                       LC_TIME=English_Australia.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] PBSmapping_2.62.34 plyr_1.7.1         geosphere_1.2-26   rgdal_0.7-8       
outliers_0.14      XML_3.9-4.1       
 [7] dismo_0.7-14       raster_1.9-58      maptools_0.8-14    lattice_0.20-0    
sp_0.9-93          foreign_0.8-48    

loaded via a namespace (and not attached):
[1] grid_2.14.1  tools_2.14.1

THANKS!!
Agus

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Accessing-gshhs-database-of-world-coastlines-tp2761898p7425816.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From eljhonjhon at hotmail.com  Sun Apr  1 16:12:40 2012
From: eljhonjhon at hotmail.com (John Ortiz)
Date: Sun, 1 Apr 2012 16:12:40 +0200
Subject: [R-sig-Geo] R-sig-Geo Digest, Vol 104, Issue 1
In-Reply-To: <mailman.13.1333274403.9468.r-sig-geo@r-project.org>
References: <mailman.13.1333274403.9468.r-sig-geo@r-project.org>
Message-ID: <SNT135-W209DA6172576E5DA2C6A0DC64F0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120401/87176b84/attachment.pl>

From Roger.Bivand at nhh.no  Sun Apr  1 16:48:48 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 1 Apr 2012 16:48:48 +0200 (CEST)
Subject: [R-sig-Geo] R-sig-Geo Digest, Vol 104, Issue 1
In-Reply-To: <SNT135-W209DA6172576E5DA2C6A0DC64F0@phx.gbl>
References: <mailman.13.1333274403.9468.r-sig-geo@r-project.org>
	<SNT135-W209DA6172576E5DA2C6A0DC64F0@phx.gbl>
Message-ID: <alpine.LRH.2.02.1204011622470.19894@reclus.nhh.no>

On Sun, 1 Apr 2012, John Ortiz wrote:

>
>> I am trying to use this thread to import coastlines into R, however i am not
>> succeeding:
>>
>> When I try(with latest version of maptools  and psbmapping just installed):
>>
>> a) wcoastline <- read.shp("C:/Users/Agus/Desktop/Distributional range
>> size/GSHHS_shp/gshhs_land.shp")
>> I get
>>  Error: could not find function "read.shp"
>
> To use the function   "read.shp"  you must to install the "shapefiles" packages
>
> http://rss.acs.unt.edu/Rdoc/library/shapefiles/html/shapefiles.html
>
> Otherwise, you can use the function "readShapeSpatial" from maptools packages to import
> your shapefile.

Yes, if you want to read the shapefile version of the shorelines, use 
readOGR() in rgdal. However, note that the shapefile may be very large 
indeed, and that your choice of shapefile to use by resolution should be 
guided by your needs.

>
> http://hosho.ees.hokudai.ac.jp/~kubo/Rdoc/library/maptools/html/readShapeSpatial.html
>
>>
>> b)  coastline=importGSHHS("C:/Users/Agus/Desktop/Distributional range
>> size/GSHHS_shp/gshhs_land.shp"
>>                       , xlim=c(envir at extent@xmin,envir at extent@xmax),
>>                                ylim=c(envir at extent@ymin,envir at extent@ymax))
>>
>> I get:
>>

Please always say which packages are involved. Here you omitted to say 
that this is PBSmapping. If you read the manual page, you will see that it 
is not for reading the shapefile version, but the GSHHS binary version, 
which is available in a selection of resolutions. This function reads into 
the PolySet object format. If you prefer the more general classes defined 
in the sp package, use Rgshhs() or the wrapper function getRgshhsMap() in 
maptools, also using binary GSHHS files. Choose your resolution and 
xlim/ylim with care to avoid importing data that is too detailed, and 
which is hard to use and visualise.

Roger

>> importGSHHS status:
>> --> Pass 1: complete: 0 bounding boxes within limits.
>> --> Pass 2:
>> Error in importGSHHS("C:/Users/Agus/Desktop/Distributional range
>> size/GSHHS_shp/gshhs_land.shp",  :
>>   call to gshhs failed.
>>
>> Could you please give me any hint?
>>
>
> John Ortiz
> Smithsonian Tropical Research Institute
> Panama
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From paulobrando at gmail.com  Sun Apr  1 17:15:50 2012
From: paulobrando at gmail.com (Paulo Brando)
Date: Sun, 1 Apr 2012 12:15:50 -0300
Subject: [R-sig-Geo] error writeRaster
In-Reply-To: <CANtt_hyFe=GT47GbPymyCCPLT7doWzovesZsUo-Y+f_TK_Fprw@mail.gmail.com>
References: <CAMkjBVXfaZiMDZ4vE4r8Bc02=5pSggGMX7bD=_j81hLDEG7zuQ@mail.gmail.com>
	<CANtt_hxCxrtAbYxCRCfw4msCHMkTGEY=EfjHA+Gnv6FZHFFNww@mail.gmail.com>
	<647FC90DB0B64DAC8556E475A5FC915C@gmail.com>
	<CANtt_hyFe=GT47GbPymyCCPLT7doWzovesZsUo-Y+f_TK_Fprw@mail.gmail.com>
Message-ID: <CAMkjBVWMruF=FZZQgt_MUby_q6V5Gs-fRP=j0AS_Je=SOphwHg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120401/7ab562f0/attachment.pl>

From zhyj830515 at 126.com  Mon Apr  2 14:55:49 2012
From: zhyj830515 at 126.com (Jessie Zhang)
Date: Mon, 2 Apr 2012 05:55:49 -0700 (PDT)
Subject: [R-sig-Geo] sample size requirement when do kriging interpolation
Message-ID: <1333371349595-7429253.post@n2.nabble.com>

Hi all,

I'm doing the kriging interpolation for the daily concentration of PM10. I
only have 27 monitoring sites every day. I want to know if it is appropriate
to do kriging interpolation. Do you have some good advices?

Many thanks

Jessie Zhang

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/sample-size-requirement-when-do-kriging-interpolation-tp7429253p7429253.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From fernandodelbon at yahoo.com.br  Mon Apr  2 22:06:52 2012
From: fernandodelbon at yahoo.com.br (fernando del bon)
Date: Mon, 2 Apr 2012 13:06:52 -0700 (PDT)
Subject: [R-sig-Geo] (no subject)
Message-ID: <1333397212.30530.YahooMailMobile@web113304.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120402/5e65c2d4/attachment.pl>

From nick at hamm.org  Mon Apr  2 23:39:05 2012
From: nick at hamm.org (Nick Hamm)
Date: Mon, 2 Apr 2012 23:39:05 +0200
Subject: [R-sig-Geo] sample size requirement when do kriging
	interpolation
In-Reply-To: <1333371349595-7429253.post@n2.nabble.com>
References: <1333371349595-7429253.post@n2.nabble.com>
Message-ID: <CALSqE8GDBfWPUOPu-Qr9m0n=18oXZe9Pu0=yofezQLe6gma6JA@mail.gmail.com>

Dear Jessie

You can do kriging on 27 points.  The difficulty comes from estimating
the variogram with only 27 sites.  Some studies have approached this
by using measurements at multiple points in time instead.  I give some
references below. I think Edzer (Pebesma) also used this approach, but
I can't remember the paper right now.

I hope this helps.

Nick


Y. Zhang, N.A.S. Hamm, N. Meratnia, A. Stein, M. van de Voort & P.J.M.
Havinga (2012): Statistics-based outlier detection for wireless sensor
networks, International Journal of Geographical Information Science,
DOI:10.1080/13658816.2012.654493 (in press, available online).

G. Sterk and A. Stein (1997) Mapping wind - blown mass transport by
modeling variability in space and time, Soil science society of
America journal, 61, pp. 232-239.



On 2 April 2012 14:55, Jessie Zhang <zhyj830515 at 126.com> wrote:
> Hi all,
>
> I'm doing the kriging interpolation for the daily concentration of PM10. I
> only have 27 monitoring sites every day. I want to know if it is appropriate
> to do kriging interpolation. Do you have some good advices?
>
> Many thanks
>
> Jessie Zhang
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/sample-size-requirement-when-do-kriging-interpolation-tp7429253p7429253.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From oliveira.nf at gmail.com  Tue Apr  3 01:18:51 2012
From: oliveira.nf at gmail.com (Nelson Oliveira)
Date: Mon, 2 Apr 2012 20:18:51 -0300
Subject: [R-sig-Geo] BYM model
Message-ID: <CALMRTGk5yEwzr8dU7b0hEgT6HRx-F4ay6Wqocz4dfARcDUtkkg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120402/9a12bae1/attachment.pl>

From lxm733 at 163.com  Tue Apr  3 03:37:33 2012
From: lxm733 at 163.com (=?GBK?B?wO7QocLt?=)
Date: Tue, 3 Apr 2012 09:37:33 +0800 (CST)
Subject: [R-sig-Geo] Help: plot part of the correlogram
Message-ID: <9c61b18.2144.13675d98cff.Coremail.lxm733@163.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120403/1c9f345f/attachment.pl>

From daisy.duursma at gmail.com  Tue Apr  3 07:56:27 2012
From: daisy.duursma at gmail.com (Daisy Englert Duursma)
Date: Tue, 3 Apr 2012 15:56:27 +1000
Subject: [R-sig-Geo] random selection of cells in raster based on distance
	from xy locations
Message-ID: <CAFf2dDGp58Qs25hNoTNz6O9qyaaJNQEWe7jqx5FMu2OZgpDQOg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120403/f1f6e05c/attachment.pl>

From mdsumner at gmail.com  Tue Apr  3 08:40:40 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 3 Apr 2012 16:40:40 +1000
Subject: [R-sig-Geo] random selection of cells in raster based on
 distance from xy locations
In-Reply-To: <CAFf2dDGp58Qs25hNoTNz6O9qyaaJNQEWe7jqx5FMu2OZgpDQOg@mail.gmail.com>
References: <CAFf2dDGp58Qs25hNoTNz6O9qyaaJNQEWe7jqx5FMu2OZgpDQOg@mail.gmail.com>
Message-ID: <CAAcGz9-wX3_MdP49rwQ2zV-ZMznf0rbxMRDBW613hWBzJ0C=fQ@mail.gmail.com>

What is the actual error when R "runs out of memory"?

This works with no problems for me (Windows 7, 64-bit R 2.15.0), it
runs in less than a minute, and watching the R process in Task Manager
it never takes up more than about 150Mb.

How much memory does your machine have? If it's 64-bit you ought to
have at least 4Gb, and if you have less that might be the problem.
Otherwise, perhaps you have other memory hungry programs running at
the same time?

Cheers, Mike.

On Tue, Apr 3, 2012 at 3:56 PM, Daisy Englert Duursma
<daisy.duursma at gmail.com> wrote:
> Hi,
>
> I am trying to create an xy table of the center of random cells in a raster
> mask. These cells must occur within a certain distance from xy locations. I
> have successfully found 2 ways of doing this, but both run out of memory (R
> 64-bit version 2.14.0) when using very large datasets. I think I have gone
> about this in a backwards manner and assume there is a simpler way to do
> this.
>
> The following example works, but when I use my actual datasets and create
> lots of overlapping buffers the code runs out of memory. when using the
> function extract.
>
> Thanks,
> Daisy
>
> rm(list = ls())
>
> #load libraries
>
> library(dismo)
> library(raster)
>
> ##example data
> #load map of land
> files<-list.files(path=paste(system.file(package="dismo"),"/ex",sep=""),pattern="grd",full.names=TRUE)
> mask <- raster(files[[9]])
> #make species data
> pts<-randomPoints(mask,2000)
> ?#extract the unique cell numbers within a 800km buffer of the points,
> remove NA cells
> #####momory problems#####
> z <- extract(mask, pts, buffer=800000,cellnumbers=T)
> z2<-as.data.frame(do.call(rbind,z))
> z3<-subset(z2, vals == 1, select = cells)
> #find the unique cells
> z4<-unique(z3[,1])
> #get 1000 random cells from the remaining data
> cells<-sample(z4, 1000, replace=FALSE)
> #find lat and long of center point of cells
> xy_locs<-xyFromCell(mask,cells)
>
>
> --
> Daisy Englert Duursma
> Department of Biological Sciences
> Room E8C156
> Macquarie University, North Ryde, NSW 2109
> Australia
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From al_sulamid at hotmail.com  Tue Apr  3 10:45:19 2012
From: al_sulamid at hotmail.com (dwl Al_Sulami)
Date: Tue, 3 Apr 2012 18:15:19 +0930
Subject: [R-sig-Geo] help in constructing spatial weight matrix
Message-ID: <BLU0-SMTP1663654F8220065AAC3B1A4F64D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120403/241d5327/attachment.pl>

From daisy.duursma at gmail.com  Tue Apr  3 13:06:35 2012
From: daisy.duursma at gmail.com (Daisy Englert Duursma)
Date: Tue, 3 Apr 2012 21:06:35 +1000
Subject: [R-sig-Geo] random selection of cells in raster based on
 distance from xy locations
In-Reply-To: <CAAcGz9-wX3_MdP49rwQ2zV-ZMznf0rbxMRDBW613hWBzJ0C=fQ@mail.gmail.com>
References: <CAFf2dDGp58Qs25hNoTNz6O9qyaaJNQEWe7jqx5FMu2OZgpDQOg@mail.gmail.com>
	<CAAcGz9-wX3_MdP49rwQ2zV-ZMznf0rbxMRDBW613hWBzJ0C=fQ@mail.gmail.com>
Message-ID: <CAFf2dDE+ZdhNjvYe1AVPGrk=VvHA_1yZKYsjAmJ_41XS_yeZUQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120403/f1301a5c/attachment.pl>

From Roger.Bivand at nhh.no  Tue Apr  3 17:11:55 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 3 Apr 2012 17:11:55 +0200 (CEST)
Subject: [R-sig-Geo] help in constructing spatial weight matrix
In-Reply-To: <BLU0-SMTP1663654F8220065AAC3B1A4F64D0@phx.gbl>
References: <BLU0-SMTP1663654F8220065AAC3B1A4F64D0@phx.gbl>
Message-ID: <alpine.LRH.2.02.1204031705370.27004@reclus.nhh.no>

On Tue, 3 Apr 2012, dwl Al_Sulami wrote:

> Dear there
> I am trying to construct spatial weight matrix using inverse distance, which means that high weight is given to near observations and ,vies versa, where  w_ij=w_ji and w_ii=0, Since, I am a new R user, I've tried many functions in sp,spdep packages and I find some functions to find weight matrix by using nearest neighbours and by distance-based neighbours, but I want to use all observations as neighbours and based on the inverse distance, I can construct the weights.
> Before I write the code I'll give some information about my data, I have the coordinates of   51 states (US states) , thus latitude and longitude of each states and based on the distance between each state I will give a weight for states where the weight is the the inverse of the distance. obviously , the weight matrix are symmetric.
> Then I've tried the following code
> data(location)# data.frame with 2 col and 51 row
> loc.sp = SpatialPoints(cbind(location$latitude,location$longitude))
> sy8<-knn2nb(knearneigh(loc.sp,k=50)) # for each state all other states are considered as neighbour
> dsts<-nbdists(sy8, loc.sp)
> idw<-lapply(dsts, function(x) 1/(x))
> sy<-nb2listw(sy8, glist=idw, style="B")
> col.mat <- listw2mat(sy)
> after running this code, I got symmetric matrix (51* 51), where w_ii=0 and w_ij=w_ji
> but I am not sure if this is true!!!

What do you mean by true - correct? There is at least one problem, that 
you are not ensuring that the distances are computed by Great Circle. More 
or less reproducing your code (data(locations) must be wrong):

library(maps)
sts <- map("state", fill=TRUE, plot=FALSE)
library(maptools)
IDs <- sapply(strsplit(sts$names, ":"), function(x) x[1])
SPl <- map2SpatialPolygons(sts, IDs=IDs,
  proj4string=CRS("+proj=longlat +datum=WGS84"))
crds <- SpatialPoints(coordinates(SPl),
  proj4string=CRS("+proj=longlat +datum=WGS84"))
is.projected(crds)
library(spdep)
nbs <- dnearneigh(crds, 0, 10000)
# either crds a SpatialPoints object !is.projected(), or use longlat=TRUE
nbs
dsts <- nbdists(nbs, crds)
# either crds a SpatialPoints object !is.projected(), or use longlat=TRUE
summary(unlist(dsts))
# in km
idw <- lapply(dsts, function(x) 1/(x))
sy <- nb2listw(nbs, glist=idw, style="B")
col.mat <- listw2mat(sy)
all.equal(col.mat, t(col.mat), check.attributes=FALSE)

I think that your "distances" were planar measures in geographical 
coordinates.

Hope this helps,

Roger

> any commands and helps are appreciated
> Regards,
> Alsulami
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Tue Apr  3 17:34:07 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 3 Apr 2012 17:34:07 +0200 (CEST)
Subject: [R-sig-Geo] Help: plot part of the correlogram
In-Reply-To: <9c61b18.2144.13675d98cff.Coremail.lxm733@163.com>
References: <9c61b18.2144.13675d98cff.Coremail.lxm733@163.com>
Message-ID: <alpine.LRH.2.02.1204031724570.27004@reclus.nhh.no>

On Tue, 3 Apr 2012, ??? wrote:

> Hi eveybody, I want to test the local sptial autocorrelation of my data 
> (present and absence). My study area is about 16410 km square. I used 
> correlog {ncf} to plot a correlogram. I want t set a lower increment. 
> for example 200 meters. And I got a correlogram with many bins, which is 
> not readable. So i hope i can just plot part of them, for example the 
> first 50 points. From the achieve, i found that it can be conducted by 
> "plot(XXX$correlation[1:50])". but it does not show the significance 
> test. Can anybody help me plot such a map? or can we receive the P value 
> of the first 50 points as we received the moran's I value? Thank you 
> very much! Sincerely Xiaoma Li

Please learn about str() to see the internal structure of objects:

library(ncf)
x <- expand.grid(1:20, 1:5)[,1]
y <- expand.grid(1:20, 1:5)[,2]
z <- rmvn.spa(x=x, y=y, p=2, method="exp"),
fit1 <- correlog(x=x, y=y, z=z[,1], increment=0.1, resamp=1000)
plot(fit1)
str(fit1)
# fit1 is a list of class "correlog", with vector components of equal
# length. One is p, so:
fit1$p
# are the apparent p-values (uncorrected for multiple comparisons I think,
# computed by permutation) IMO not to be trusted especially for narrow 
# increments
class(fit1) <- NULL
df1 <- as.data.frame(fit1)
fit2 <- as.list(df1[1:50,])
str(fit2)
class(fit2) <- "correlog"
# reconstruct object as class "correlog" after selecting rows from
# data.frame
plot(fit2)

Hope this helps,

Roger

>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From Roger.Bivand at nhh.no  Tue Apr  3 17:39:15 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 3 Apr 2012 17:39:15 +0200 (CEST)
Subject: [R-sig-Geo] BYM model
In-Reply-To: <CALMRTGk5yEwzr8dU7b0hEgT6HRx-F4ay6Wqocz4dfARcDUtkkg@mail.gmail.com>
References: <CALMRTGk5yEwzr8dU7b0hEgT6HRx-F4ay6Wqocz4dfARcDUtkkg@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1204031734590.27004@reclus.nhh.no>

On Tue, 3 Apr 2012, Nelson Oliveira wrote:

> Hi
> I am trying to reproduce the results in the Applied Spatial Data Analysis
> with R book.
> I would like to know how the ncoutput dataframe in the geweke.diag function
> (page 330)  was built.

Does the code at:

http://www.asdar-book.org/bundles/dismap_WB.zip

help? You need:

http://www.asdar-book.org/RC1/book/dismap_mod.R

first to set up the input data. In chunk 39, line 172, of dismap_WB.R, you 
see:

library(coda)
ncoutput<-read.coda("BYM/coda1.txt", "BYM/codaIndex.txt")

Hope this clarifies,

Roger


> Thank you very much
> Nelson
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From roosbeh.nowrouzian at gmail.com  Tue Apr  3 17:43:35 2012
From: roosbeh.nowrouzian at gmail.com (Roosbeh Nowrouzian)
Date: Tue, 3 Apr 2012 11:43:35 -0400
Subject: [R-sig-Geo] Defining neighbors base on same location
In-Reply-To: <4F73F499.3070100@tum.de>
References: <CAJw-hPbhrf3KaFbgSP-DjF9OQB7piZYsT9ceC5+gNF1RRtxfug@mail.gmail.com>
	<4F73F499.3070100@tum.de>
Message-ID: <CAJw-hPYYEpfnrzWrN_6=fvEPjNqxLa6whd7fWOe2iyCj+kvrSg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120403/46d14098/attachment.pl>

From hzambran.newsgroups at gmail.com  Tue Apr  3 20:37:29 2012
From: hzambran.newsgroups at gmail.com (Mauricio Zambrano-Bigiarini)
Date: Tue, 3 Apr 2012 20:37:29 +0200
Subject: [R-sig-Geo] spplot question in sp_0.9-98
Message-ID: <CAHYf9PmcbFWPAjCmsCSO6VUQ_B4q-WsXVgx1JQ-dUei-0=46SQ@mail.gmail.com>

Dear List,

I just notice an strange behaviour of the 'spplot' function, and I
would like your help to figure out if it is something related to my
system or is something related to the 'spplot' function.

Below goes a reproducible example taken from
http://r-spatial.sourceforge.net/gallery/ :


# fig06.R multi-panel plot, scales + north arrow only in last plot.

----------------------START-----------------------------------

library(sp)
library(lattice) # required for trellis.par.set():
trellis.par.set(sp.theme()) # sets color ramp to bpy.colors()

data(meuse)
coordinates(meuse)=~x+y
data(meuse.riv)
meuse.sr = SpatialPolygons(list(Polygons(list(Polygon(meuse.riv)),"meuse.riv")))
rv = list("sp.polygons", meuse.sr, fill = "lightblue")

## multi-panel plot, scales + north arrow only in last plot:
## using the "which" argument in a layout component
## (if which=4 was set as list component of sp.layout, the river
## would as well be drawn only in that (last) panel)
scale = list("SpatialPolygonsRescale", layout.scale.bar(),
offset = c(180500,329800), scale = 500, fill=c("transparent","black"),
which = 4)
text1 = list("sp.text", c(180500,329900), "0", cex = .5, which = 4)
text2 = list("sp.text", c(181000,329900), "500 m", cex = .5, which = 4)
arrow = list("SpatialPolygonsRescale", layout.north.arrow(),
offset = c(181300,329800),
scale = 400, which = 4)
cuts = c(.2,.5,1,2,5,10,20,50,100,200,500,1000,2000)
spplot(meuse, c("cadmium", "copper", "lead", "zinc"), do.log = TRUE,
key.space = "right", as.table = TRUE,
sp.layout=list(rv, scale, text1, text2, arrow),
main = "Heavy metals (top soil), ppm", cex = .7, cuts = cuts)

----------------------END-----------------------------------


After the last spplot command, I only get one point in the upper left
figure, which is very different from the Figure 6 shown in
http://r-spatial.sourceforge.net/gallery/

In addition, I get the following output after the spplot command:

[1] "#A714EBFF" "#6500FFFF" "#6500FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF"
  [7] "#2400FFFF" "#2400FFFF" "#2400FFFF" "#0000DAFF" "#0000DAFF" "#0000DAFF"
 [13] "#A714EBFF" "#2400FFFF" "#0000DAFF" "#6500FFFF" "#6500FFFF" "#6500FFFF"
 [19] "#6500FFFF" "#A714EBFF" "#6500FFFF" "#2400FFFF" "#2400FFFF" "#0000DAFF"
 [25] "#0000DAFF" "#0000DAFF" "#0000DAFF" "#0000DAFF" "#0000DAFF" "#0000DAFF"
 [31] "#0000DAFF" "#0000DAFF" "#2400FFFF" "#0000DAFF" "#0000DAFF" "#2400FFFF"
 [37] "#6500FFFF" "#6500FFFF" "#6500FFFF" "#A714EBFF" "#2400FFFF" "#0000DAFF"
 [43] "#0000DAFF" "#0000DAFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#0000DAFF"
 [49] "#0000DAFF" "#2400FFFF" "#0000DAFF" "#6500FFFF" "#A714EBFF" "#A714EBFF"
 [55] "#6500FFFF" "#6500FFFF" "#2400FFFF" "#2400FFFF" "#A714EBFF" "#6500FFFF"
 [61] "#6500FFFF" "#6500FFFF" "#6500FFFF" "#6500FFFF" "#6500FFFF" "#6500FFFF"
 [67] "#6500FFFF" "#000086FF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF"
 [73] "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF"
 [79] "#6500FFFF" "#6500FFFF" "#A714EBFF" "#A714EBFF" "#6500FFFF" "#2400FFFF"
 [85] "#0000DAFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#0000DAFF"
 [91] "#0000DAFF" "#2400FFFF" "#2400FFFF" "#000086FF" "#000086FF" "#000033FF"
 [97] "#000086FF" "#000033FF" "#000033FF" "#000033FF" "#000086FF" "#000033FF"
[103] "#000033FF" "#000033FF" "#000033FF" "#000033FF" "#000033FF" "#000033FF"
[109] "#000033FF" "#000033FF" "#000033FF" "#000033FF" "#000033FF" "#000033FF"
[115] "#000033FF" "#000033FF" "#000033FF" "#2400FFFF" "#000033FF" "#000033FF"
[121] "#000033FF" "#000033FF" "#0000DAFF" "#2400FFFF" "#000033FF" "#000033FF"
[127] "#000033FF" "#000033FF" "#000033FF" "#0000DAFF" "#000086FF" "#0000DAFF"
[133] "#000033FF" "#000033FF" "#000086FF" "#000086FF" "#000086FF" "#0000DAFF"
[139] "#0000DAFF" "#0000DAFF" "#0000DAFF" "#000086FF" "#000086FF" "#2400FFFF"
[145] "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#0000DAFF" "#0000DAFF"
[151] "#000086FF" "#2400FFFF" "#2400FFFF" "#000086FF" "#2400FFFF" "#FF6798FF"
[157] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#FF6798FF" "#E83EC1FF"
[163] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF"
[169] "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
[175] "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
[181] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
[187] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
[193] "#FF6798FF" "#FF6798FF" "#FF916EFF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
[199] "#E83EC1FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
[205] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FF916EFF" "#FF916EFF" "#FF916EFF"
[211] "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
[217] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
[223] "#E83EC1FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#E83EC1FF"
[229] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF"
[235] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF"
[241] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
[247] "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
[253] "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
[259] "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#A714EBFF" "#E83EC1FF" "#E83EC1FF"
[265] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
[271] "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
[277] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#A714EBFF"
[283] "#A714EBFF" "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#E83EC1FF" "#A714EBFF"
[289] "#A714EBFF" "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#E83EC1FF" "#E83EC1FF"
[295] "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#A714EBFF" "#E83EC1FF" "#E83EC1FF"
[301] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#A714EBFF"
[307] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FFBB44FF" "#FFBB44FF"
[313] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF"
[319] "#FF916EFF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FFBB44FF" "#FF916EFF"
[325] "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF"
[331] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
[337] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
[343] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF916EFF" "#FFBB44FF"
[349] "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#E83EC1FF" "#FF6798FF" "#FF6798FF"
[355] "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FF916EFF"
[361] "#FF6798FF" "#FF916EFF" "#FFBB44FF" "#FFE51AFF" "#FFBB44FF" "#FFBB44FF"
[367] "#FF916EFF" "#FFBB44FF" "#FFE51AFF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF"
[373] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#E83EC1FF"
[379] "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF"
[385] "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF"
[391] "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FF6798FF" "#FF916EFF"
[397] "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF"
[403] "#FFBB44FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
[409] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#FF6798FF" "#E83EC1FF"
[415] "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#FF6798FF"
[421] "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
[427] "#FF6798FF" "#FFBB44FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
[433] "#FFBB44FF" "#FFBB44FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF"
[439] "#FF916EFF" "#FF916EFF" "#E83EC1FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF"
[445] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#FF916EFF" "#FF6798FF"
[451] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF916EFF" "#FF916EFF" "#FF916EFF"
[457] "#FF916EFF" "#FFBB44FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#FF916EFF"
[463] "#FF916EFF" "#FF6798FF" "#FF916EFF" "#FFFF60FF" "#FFFF60FF" "#FFE51AFF"
[469] "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF"
[475] "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFFF60FF" "#FFE51AFF" "#FFBB44FF"
[481] "#FFFF60FF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFFF60FF" "#FFE51AFF"
[487] "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FFBB44FF"
[493] "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FFBB44FF"
[499] "#FF916EFF" "#FFBB44FF" "#FFBB44FF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF"
[505] "#FFFF60FF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFE51AFF"
[511] "#FFE51AFF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF"
[517] "#FFE51AFF" "#FFFF60FF" "#FFFF60FF" "#FFFF60FF" "#FFE51AFF" "#FFBB44FF"
[523] "#FFE51AFF" "#FFFF60FF" "#FFFF60FF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF"
[529] "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFFF60FF" "#FF916EFF" "#FFE51AFF"
[535] "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF"
[541] "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFFF60FF" "#FFFF60FF" "#FFFF60FF"
[547] "#FFFF60FF" "#FFE51AFF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFE51AFF"
[553] "#FFE51AFF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFE51AFF" "#FFE51AFF"
[559] "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FF916EFF"
[565] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FF916EFF"
[571] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF"
[577] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF"
[583] "#FFE51AFF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFE51AFF"
[589] "#FFE51AFF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF"
[595] "#FFBB44FF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#FF916EFF"
[601] "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF"
[607] "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF" "#FFE51AFF" "#FFE51AFF"
[613] "#FFE51AFF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF"
[619] "#FF916EFF" "#FFBB44FF"

-------------------

sessionInfo()
R version 2.14.1 (2011-12-22)
Platform: x86_64-redhat-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_GB.utf8       LC_NUMERIC=C
 [3] LC_TIME=en_GB.utf8        LC_COLLATE=en_GB.utf8
 [5] LC_MONETARY=en_GB.utf8    LC_MESSAGES=en_GB.utf8
 [7] LC_PAPER=C                LC_NAME=C
 [9] LC_ADDRESS=C              LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_GB.utf8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] lattice_0.20-6 sp_0.9-98

loaded via a namespace (and not attached):
[1] grid_2.14.1  tools_2.14.1

-----------


Thanks in advance for any help,


Mauricio Zambrano-Bigiarini

-- 
===========================================
Water Resources Unit
Institute for Environment and Sustainability
Joint Research Centre, European Commission
webinfo ? ?: http://floods.jrc.ec.europa.eu/
===========================================
DISCLAIMER:
"The views expressed are purely those of the writer
and may not in any circumstances be regarded as
stating an official position of the European Commission"
===========================================
Linux user #454569 -- Ubuntu user #17469
============================================
"There is only one pretty child in the world,
and every mother has it."
(Chinese Proverb)
============================================
http://c2.com/cgi/wiki?HowToAskQuestionsTheSmartWay


From godina at dal.ca  Tue Apr  3 20:38:05 2012
From: godina at dal.ca (Aurelie C.Godin)
Date: Tue, 3 Apr 2012 11:38:05 -0700 (PDT)
Subject: [R-sig-Geo] Transform decimal degrees units in km - ReadOGR &
	owin{spatstat}
Message-ID: <1333478285325-7434090.post@n2.nabble.com>

Dear list,

I am trying to figure out how I can transform my unit of length from decimal
degree to square km when I import the following simple ArcGIS polygon shape. 
Ultimately, I would like to have this information available when I assign
this spatial polygon to my window in spatstat [i.e., Window area = xx square
unit
Unit of length: xx km].

div0A <- readOGR(dsn="Archive", layer="Projections")
> summary(div0A)
Object of class SpatialPolygonsDataFrame
Coordinates:
     min       max
x -80.00 -57.63430
y  66.25  78.16666
Is projected: FALSE 
proj4string :
[+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0]
Data attributes:
       Id      NPAzimutha         UTM20            UTM19           AlberEA      
 Min.   :0   Min.   :348877   Min.   :349232   Min.   :349162   Min.  
:348656  
 1st Qu.:0   1st Qu.:348877   1st Qu.:349232   1st Qu.:349162   1st
Qu.:348656  
 Median :0   Median :348877   Median :349232   Median :349162   Median
:348656  
 Mean   :0   Mean   :348877   Mean   :349232   Mean   :349162   Mean  
:348656  
 3rd Qu.:0   3rd Qu.:348877   3rd Qu.:349232   3rd Qu.:349162   3rd
Qu.:348656  
 Max.   :0   Max.   :348877   Max.   :349232   Max.   :349162   Max.  
:348656 

library(spatstat)
newW2<-as(div0A,"owin")
> newW2
window: polygonal boundary
enclosing rectangle: [-80, -57.6343] x [66.25, 78.16666] units 

Thank you very much in advance,
Aurelie

-----
Aurelie Cosandey-Godin
Ph.D. Student, Department of Biology, Dalhousie University
Industrial Graduate Fellow, WWF-Canada
Email: godina at dal.ca | Web: wormlab.biology.dal.ca

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Transform-decimal-degrees-units-in-km-ReadOGR-owin-spatstat-tp7434090p7434090.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From jour4life at gmail.com  Tue Apr  3 20:44:17 2012
From: jour4life at gmail.com (Carlos Valenzuela)
Date: Tue, 3 Apr 2012 13:44:17 -0500
Subject: [R-sig-Geo] read shapefile into R larger than 2GB
Message-ID: <CAOFdM0gcP2G9ocg3iD9QDpv=FUHqsHe5=dn0gFvU2HXP9oXu+w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120403/ed06bbc2/attachment.pl>

From edzer.pebesma at uni-muenster.de  Tue Apr  3 21:58:07 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 03 Apr 2012 21:58:07 +0200
Subject: [R-sig-Geo] spplot question in sp_0.9-98
In-Reply-To: <CAHYf9PmcbFWPAjCmsCSO6VUQ_B4q-WsXVgx1JQ-dUei-0=46SQ@mail.gmail.com>
References: <CAHYf9PmcbFWPAjCmsCSO6VUQ_B4q-WsXVgx1JQ-dUei-0=46SQ@mail.gmail.com>
Message-ID: <4F7B564F.5040808@uni-muenster.de>

Thanks for notifying this. Removing the cex=.7 solves this, as does
replicating cex, as in

spplot(meuse, c("cadmium", "copper", "lead", "zinc"), do.log = TRUE,
key.space = "right", as.table = TRUE,
sp.layout=list(rv, scale, text1, text2, arrow),
main = "Heavy metals (top soil), ppm", cex=rep(.7,4*length(meuse)), cuts
= cuts)

This, and returning the color vector, are obviously bugs, and will be
addressed in the next version of sp.

On 04/03/2012 08:37 PM, Mauricio Zambrano-Bigiarini wrote:
> Dear List,
> 
> I just notice an strange behaviour of the 'spplot' function, and I
> would like your help to figure out if it is something related to my
> system or is something related to the 'spplot' function.
> 
> Below goes a reproducible example taken from
> http://r-spatial.sourceforge.net/gallery/ :
> 
> 
> # fig06.R multi-panel plot, scales + north arrow only in last plot.
> 
> ----------------------START-----------------------------------
> 
> library(sp)
> library(lattice) # required for trellis.par.set():
> trellis.par.set(sp.theme()) # sets color ramp to bpy.colors()
> 
> data(meuse)
> coordinates(meuse)=~x+y
> data(meuse.riv)
> meuse.sr = SpatialPolygons(list(Polygons(list(Polygon(meuse.riv)),"meuse.riv")))
> rv = list("sp.polygons", meuse.sr, fill = "lightblue")
> 
> ## multi-panel plot, scales + north arrow only in last plot:
> ## using the "which" argument in a layout component
> ## (if which=4 was set as list component of sp.layout, the river
> ## would as well be drawn only in that (last) panel)
> scale = list("SpatialPolygonsRescale", layout.scale.bar(),
> offset = c(180500,329800), scale = 500, fill=c("transparent","black"),
> which = 4)
> text1 = list("sp.text", c(180500,329900), "0", cex = .5, which = 4)
> text2 = list("sp.text", c(181000,329900), "500 m", cex = .5, which = 4)
> arrow = list("SpatialPolygonsRescale", layout.north.arrow(),
> offset = c(181300,329800),
> scale = 400, which = 4)
> cuts = c(.2,.5,1,2,5,10,20,50,100,200,500,1000,2000)
> spplot(meuse, c("cadmium", "copper", "lead", "zinc"), do.log = TRUE,
> key.space = "right", as.table = TRUE,
> sp.layout=list(rv, scale, text1, text2, arrow),
> main = "Heavy metals (top soil), ppm", cex = .7, cuts = cuts)
> 
> ----------------------END-----------------------------------
> 
> 
> After the last spplot command, I only get one point in the upper left
> figure, which is very different from the Figure 6 shown in
> http://r-spatial.sourceforge.net/gallery/
> 
> In addition, I get the following output after the spplot command:
> 
> [1] "#A714EBFF" "#6500FFFF" "#6500FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF"
>   [7] "#2400FFFF" "#2400FFFF" "#2400FFFF" "#0000DAFF" "#0000DAFF" "#0000DAFF"
>  [13] "#A714EBFF" "#2400FFFF" "#0000DAFF" "#6500FFFF" "#6500FFFF" "#6500FFFF"
>  [19] "#6500FFFF" "#A714EBFF" "#6500FFFF" "#2400FFFF" "#2400FFFF" "#0000DAFF"
>  [25] "#0000DAFF" "#0000DAFF" "#0000DAFF" "#0000DAFF" "#0000DAFF" "#0000DAFF"
>  [31] "#0000DAFF" "#0000DAFF" "#2400FFFF" "#0000DAFF" "#0000DAFF" "#2400FFFF"
>  [37] "#6500FFFF" "#6500FFFF" "#6500FFFF" "#A714EBFF" "#2400FFFF" "#0000DAFF"
>  [43] "#0000DAFF" "#0000DAFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#0000DAFF"
>  [49] "#0000DAFF" "#2400FFFF" "#0000DAFF" "#6500FFFF" "#A714EBFF" "#A714EBFF"
>  [55] "#6500FFFF" "#6500FFFF" "#2400FFFF" "#2400FFFF" "#A714EBFF" "#6500FFFF"
>  [61] "#6500FFFF" "#6500FFFF" "#6500FFFF" "#6500FFFF" "#6500FFFF" "#6500FFFF"
>  [67] "#6500FFFF" "#000086FF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF"
>  [73] "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF"
>  [79] "#6500FFFF" "#6500FFFF" "#A714EBFF" "#A714EBFF" "#6500FFFF" "#2400FFFF"
>  [85] "#0000DAFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#0000DAFF"
>  [91] "#0000DAFF" "#2400FFFF" "#2400FFFF" "#000086FF" "#000086FF" "#000033FF"
>  [97] "#000086FF" "#000033FF" "#000033FF" "#000033FF" "#000086FF" "#000033FF"
> [103] "#000033FF" "#000033FF" "#000033FF" "#000033FF" "#000033FF" "#000033FF"
> [109] "#000033FF" "#000033FF" "#000033FF" "#000033FF" "#000033FF" "#000033FF"
> [115] "#000033FF" "#000033FF" "#000033FF" "#2400FFFF" "#000033FF" "#000033FF"
> [121] "#000033FF" "#000033FF" "#0000DAFF" "#2400FFFF" "#000033FF" "#000033FF"
> [127] "#000033FF" "#000033FF" "#000033FF" "#0000DAFF" "#000086FF" "#0000DAFF"
> [133] "#000033FF" "#000033FF" "#000086FF" "#000086FF" "#000086FF" "#0000DAFF"
> [139] "#0000DAFF" "#0000DAFF" "#0000DAFF" "#000086FF" "#000086FF" "#2400FFFF"
> [145] "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#0000DAFF" "#0000DAFF"
> [151] "#000086FF" "#2400FFFF" "#2400FFFF" "#000086FF" "#2400FFFF" "#FF6798FF"
> [157] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#FF6798FF" "#E83EC1FF"
> [163] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF"
> [169] "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
> [175] "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
> [181] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
> [187] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
> [193] "#FF6798FF" "#FF6798FF" "#FF916EFF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
> [199] "#E83EC1FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
> [205] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FF916EFF" "#FF916EFF" "#FF916EFF"
> [211] "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
> [217] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
> [223] "#E83EC1FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#E83EC1FF"
> [229] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF"
> [235] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF"
> [241] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
> [247] "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
> [253] "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
> [259] "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#A714EBFF" "#E83EC1FF" "#E83EC1FF"
> [265] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
> [271] "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
> [277] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#A714EBFF"
> [283] "#A714EBFF" "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#E83EC1FF" "#A714EBFF"
> [289] "#A714EBFF" "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#E83EC1FF" "#E83EC1FF"
> [295] "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#A714EBFF" "#E83EC1FF" "#E83EC1FF"
> [301] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#A714EBFF"
> [307] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FFBB44FF" "#FFBB44FF"
> [313] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF"
> [319] "#FF916EFF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FFBB44FF" "#FF916EFF"
> [325] "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF"
> [331] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
> [337] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
> [343] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF916EFF" "#FFBB44FF"
> [349] "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#E83EC1FF" "#FF6798FF" "#FF6798FF"
> [355] "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FF916EFF"
> [361] "#FF6798FF" "#FF916EFF" "#FFBB44FF" "#FFE51AFF" "#FFBB44FF" "#FFBB44FF"
> [367] "#FF916EFF" "#FFBB44FF" "#FFE51AFF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF"
> [373] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#E83EC1FF"
> [379] "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF"
> [385] "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF"
> [391] "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FF6798FF" "#FF916EFF"
> [397] "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF"
> [403] "#FFBB44FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
> [409] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#FF6798FF" "#E83EC1FF"
> [415] "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#FF6798FF"
> [421] "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
> [427] "#FF6798FF" "#FFBB44FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
> [433] "#FFBB44FF" "#FFBB44FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF"
> [439] "#FF916EFF" "#FF916EFF" "#E83EC1FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF"
> [445] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#FF916EFF" "#FF6798FF"
> [451] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF916EFF" "#FF916EFF" "#FF916EFF"
> [457] "#FF916EFF" "#FFBB44FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#FF916EFF"
> [463] "#FF916EFF" "#FF6798FF" "#FF916EFF" "#FFFF60FF" "#FFFF60FF" "#FFE51AFF"
> [469] "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF"
> [475] "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFFF60FF" "#FFE51AFF" "#FFBB44FF"
> [481] "#FFFF60FF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFFF60FF" "#FFE51AFF"
> [487] "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FFBB44FF"
> [493] "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FFBB44FF"
> [499] "#FF916EFF" "#FFBB44FF" "#FFBB44FF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF"
> [505] "#FFFF60FF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFE51AFF"
> [511] "#FFE51AFF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF"
> [517] "#FFE51AFF" "#FFFF60FF" "#FFFF60FF" "#FFFF60FF" "#FFE51AFF" "#FFBB44FF"
> [523] "#FFE51AFF" "#FFFF60FF" "#FFFF60FF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF"
> [529] "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFFF60FF" "#FF916EFF" "#FFE51AFF"
> [535] "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF"
> [541] "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFFF60FF" "#FFFF60FF" "#FFFF60FF"
> [547] "#FFFF60FF" "#FFE51AFF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFE51AFF"
> [553] "#FFE51AFF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFE51AFF" "#FFE51AFF"
> [559] "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FF916EFF"
> [565] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FF916EFF"
> [571] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF"
> [577] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF"
> [583] "#FFE51AFF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFE51AFF"
> [589] "#FFE51AFF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF"
> [595] "#FFBB44FF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#FF916EFF"
> [601] "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF"
> [607] "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF" "#FFE51AFF" "#FFE51AFF"
> [613] "#FFE51AFF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF"
> [619] "#FF916EFF" "#FFBB44FF"
> 
> -------------------
> 
> sessionInfo()
> R version 2.14.1 (2011-12-22)
> Platform: x86_64-redhat-linux-gnu (64-bit)
> 
> locale:
>  [1] LC_CTYPE=en_GB.utf8       LC_NUMERIC=C
>  [3] LC_TIME=en_GB.utf8        LC_COLLATE=en_GB.utf8
>  [5] LC_MONETARY=en_GB.utf8    LC_MESSAGES=en_GB.utf8
>  [7] LC_PAPER=C                LC_NAME=C
>  [9] LC_ADDRESS=C              LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_GB.utf8 LC_IDENTIFICATION=C
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
> [1] lattice_0.20-6 sp_0.9-98
> 
> loaded via a namespace (and not attached):
> [1] grid_2.14.1  tools_2.14.1
> 
> -----------
> 
> 
> Thanks in advance for any help,
> 
> 
> Mauricio Zambrano-Bigiarini
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From mollymdavies at gmail.com  Tue Apr  3 22:40:47 2012
From: mollymdavies at gmail.com (Molly Davies)
Date: Tue, 3 Apr 2012 13:40:47 -0700
Subject: [R-sig-Geo] combining values taken at nearly identical locations
Message-ID: <50F404E9-8514-4ABB-8922-8001F11DB0A5@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120403/743e6a41/attachment.pl>

From roosbeh.nowrouzian at gmail.com  Wed Apr  4 00:35:04 2012
From: roosbeh.nowrouzian at gmail.com (Roosbeh Nowrouzian)
Date: Tue, 3 Apr 2012 18:35:04 -0400
Subject: [R-sig-Geo] Comparing Estimating Spatial Simultaneous
 Autoregressive Models Using "spautolm" and "lagsarlm" functions
Message-ID: <CAJw-hPbNR=Ww=o-LrptPQXiYsf_-jw=OEEfhUeRUCN1MUHtHeg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120403/c7d09581/attachment.pl>

From apcar at deakin.edu.au  Wed Apr  4 06:11:14 2012
From: apcar at deakin.edu.au (ADAM PETER CARDILINI)
Date: Wed, 4 Apr 2012 04:11:14 +0000
Subject: [R-sig-Geo] Conversion of points from AGD66 to WGS84?
Message-ID: <11DC569BD7493645998AD27DA1F01E273A877071@mbox-b-2.du.deakin.edu.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120404/13b805ce/attachment.pl>

From mdsumner at gmail.com  Wed Apr  4 07:30:25 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 4 Apr 2012 15:30:25 +1000
Subject: [R-sig-Geo] Conversion of points from AGD66 to WGS84?
In-Reply-To: <11DC569BD7493645998AD27DA1F01E273A877071@mbox-b-2.du.deakin.edu.au>
References: <11DC569BD7493645998AD27DA1F01E273A877071@mbox-b-2.du.deakin.edu.au>
Message-ID: <CAAcGz9_sfjo=EKtrChx2dvf7GPbcEaRX+QaSBVJw7gcRx_=hSQ@mail.gmail.com>

As far as I know, the EPSG 4202 init form is not sufficient, and you
need to specify the datum parameters explicitly.  Wherever in the
database "aust_SA" is defined it is not getting the actual parameters
for some reason - I don't know if that requires an install/build
configuration, but I've just done it manually in the past and stored
the values myself.

So,

pts <- matrix(c(145.1167, -37.83333), ncol = 2)

aust_SA <- SpatialPoints(pts, CRS("+init=epsg:4202"))

agd66 <- SpatialPoints(pts, CRS("+proj=longlat +towgs84=-127.8,-52.3,152.9"))

## no difference
spTransform(aust_SA, CRS("+proj=longlat +datum=WGS84 +ellps=WGS84
+towgs84=0,0,0"))

##SpatialPoints:
##    coords.x1 coords.x2
##[1,]  145.1167 -37.83333
##Coordinate Reference System (CRS) arguments: +proj=longlat
+datum=WGS84 +ellps=WGS84 +towgs84=0,0,0

## works now
spTransform(agd66, CRS("+proj=longlat +datum=WGS84 +ellps=WGS84
+towgs84=0,0,0"))

##SpatialPoints:
##     coords.x1 coords.x2
##[1,]   145.118 -37.83183
##Coordinate Reference System (CRS) arguments: +proj=longlat
+datum=WGS84 +ellps=WGS84 +towgs84=0,0,0

It doesn't seem to matter if I use the 3-parameter towgs84 argument
for AGD66 or the 7-param one listed here, but I don't know the details
of why:
http://www.osgeo.org/pipermail/gdal-dev/2006-February/008090.html

There's also this for what it's worth:
http://www.osgeo.org/pipermail/gdal-dev/2007-November/014762.html

I don't know apart from a matter of experience how to find out if the
EPSG presets are appropriate or not, so I'd just recommend doing some
reading on the topic to convince yourself.

(I checked that transformation above against the presets available in
Manifold GIS, which I happen to have verified for this quite some time
ago so I'm confident that it's right.)

There are several resources on the web for verifying this transformation, i.e.

http://www.ga.gov.au/earth-monitoring/geodesy/geodetic-datums/about.html

Cheers, Mike.

On Wed, Apr 4, 2012 at 2:11 PM, ADAM PETER CARDILINI
<apcar at deakin.edu.au> wrote:
> Dear All,
>
> I have a dataset of lon/lat coordinates with about two thirds in datum AGD66/84 and the other third in datum WGS84. From what I have read I think there is about a 200m different between these datum. I want to change all of the AGD66 coordinates to be correct in WGS84 to fix this difference.
>
> My data looks like:
> lon ? ? ? ? ? ? ? ? ? ? ? ? ?lat ? ? ? ? ? ? ? ? ? ? ? ? ? datum
> 145.1167 ? ? ? ? ? ? ?-37.83333 ? ? ? ? ? ? AGD66
> 144.9756 ? ? ? ? ? ? ?-38.36555 ? ? ? ? ? ? WGS84
>
> So far I have tried 1:
> # to choose the pts from the dataset
> pts66<-pts[which(pts$datum=='AGD66'),]
> # to assign the AGD66 datum
> pts66 = SpatialPoints(cbind(pts66$lon,pts66$lat), CRS("+init=epsg:4202"))
> # to transform this data to WGS I have tried two different methods
> pts66t = spTransform(pts66, CRS("+init=epsg:3033"))
> # and
> pts66t = spTransform(pts66, CRS("+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0"))
>
> The first of these transformations, using CRS("+init=epsg:3033"), transforms the results to the following:
> lon ? ? ? ? ? ? ? ? ? ? ? ? ?lat
> 11736428 ? ? ? ? ? ? 3368292
>
> While the second, does not result in any transformation:
> lon ? ? ? ? ? ? ? ? ? ? ? ? ?lat
> 145.1167 ? ? ? ? ? ? ?-37.83333
>
> Why are these two transformations different? I had thought they would do the same thing because I have used "+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0" to reproject raster files from one CRS to WGS84.
> How can I get the points to transform and stay in the same lon/lat format?
>
> I just want to get the points that were taken in AGD66 to be at the right spot on the map when I use them in conjunction with raster files in WGS84. I think there must be some fundamental concept I am misunderstanding when working with this data. Can anyone help me out and/or point me in the right direction. Thank you very much for your time and help in advance.
>
> Kind regards,
>
> Adam Cardilini,
> PhD Candidate,
> Deakin University,
> School of life and environmental sciences,
> 75 Pigdons Rd, Waurn Ponds,
> Victoria, 3126
> Mob: 0431 566 340
> adamcardilini.wordpress.com<http://adamcardilini.wordpress.com/>
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From tom.gottfried at tum.de  Wed Apr  4 07:53:20 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Wed, 04 Apr 2012 07:53:20 +0200
Subject: [R-sig-Geo] Defining neighbors base on same location
In-Reply-To: <CAJw-hPYYEpfnrzWrN_6=fvEPjNqxLa6whd7fWOe2iyCj+kvrSg@mail.gmail.com>
References: <CAJw-hPbhrf3KaFbgSP-DjF9OQB7piZYsT9ceC5+gNF1RRtxfug@mail.gmail.com>	<4F73F499.3070100@tum.de>
	<CAJw-hPYYEpfnrzWrN_6=fvEPjNqxLa6whd7fWOe2iyCj+kvrSg@mail.gmail.com>
Message-ID: <4F7BE1D0.1060004@tum.de>

Am 03.04.2012 17:43, schrieb Roosbeh Nowrouzian:
> Thanks for the hint. I tried the syntax but I am getting error:
> script:
> # reading data
> triplengthfile <- as.data.frame ( read.spss ( file =
> "triplengthfile.sav" ) )
> #Defining projection
> coordinates ( triplengthfile ) <- cbind ( triplengthfile $ longa,
> triplengthfile $ lata )
> coords <- cbind ( triplengthfile $ longa, triplengthfile $ lata )
> proj4string ( triplengthfile ) <- CRS ( "+proj=longlat +ellps=WGS84" )
>
> #projecting to Albers conical
> triplengthfile <- spTransform ( triplengthfile , CRS =
> CRS ( "+proj=aea +lat_1=24 +lat_2=31.5 +lat_0=24 +lon_0=-84 +x_0=400000
> +y_0=0 +ellps=GRS80 +units=m +no_defs" ) )
>
> #updating coords
> coords <- coordinates( triplengthfile )
> IDs <- rownames ( triplengthfile at data )
>
> #defining neighbors for Household members
> HHneighbor.knn <- mapply ( function (n,coord) knearneigh ( x=coord, k=n,
> longlat=FALSE, RANN=TRUE), HHNUM, lapply (1:nrow(coords),function(i)
> coords[i,] ))

HHneighbor.knn <- mapply ( function (n,coord) knearneigh ( x=coord, k=n, 
longlat=FALSE, RANN=TRUE), HHNUM, lapply(1:nrow(coords),function(i) 
coords[i,,drop=FALSE] ))

> which HHNUM is the number of HH members in matrix class (is defined for
> each observation(individual))
>
> But I am getting error:
> Error:
>
> Error in knearneigh(x = coord, k = n, longlat = FALSE, RANN = TRUE) :
> Data not in matrix form

The error message is quite unambiguous, but its cause might be 
confusing. "[" by default drops the dim-attribute, if a single row is 
selected from a matrix. See ?"[" and the above example how to overcome 
this (obviously it was, and still is untested).

Tom

> Appreciate you could help me solve this error.
> appreciate your help.
> Roosbeh Nowrouzian
> PhD student
> Department of Civil Engineering
> University of Florida
>
> On Wed, Mar 28, 2012 at 10:35 PM, Tom Gottfried <tom.gottfried at tum.de
> <mailto:tom.gottfried at tum.de>> wrote:
>
>     Hi,
>
>     Am 29.03.2012 01:08, schrieb Roosbeh Nowrouzian:
>
>         Hi list members:
>
>         Is there any way to define neighbors in R as any other observation
>         with distance to the corresponding point equal to 0.
>
>         I am trying to define neighbors base on the same location ( the same
>         Household members are linked to each other). I tried defining
>
>         weights base on fixed distance bounds:
>         neighbordistance.nb<- dnearneigh ( coords, d1=0, d2=0.00001,
>         row.names=IDs
>         )
>         But this function does not define other Household members
>         (distance=0) as
>         the neighbor.
>
>         When trying fixed number of neighbors:
>         neighbor3.knn<- knearneigh ( x=coords , k=3, longlat= FALSE,
>         RANN=TRUE )
>         This function defines other Household members(distance =0) as
>         neighbor but
>         the problem with this function is that each Household has different
>         Household number so different number of neighbors is required
>         for each
>         Household.
>
>
>     neighbor3.knn <-
>     mapply(function(n, coord) knearneigh(x=coord,
>     k=n, longlat=FALSE,RANN=TRUE),
>     ns, lapply(1:nrow(coords), function(i) coords[i,]))
>
>     Assuming you have a vector 'ns' with the number of household members
>     per household, this should give you a list with each element
>     defining the neighbours you desire. I hope I didn't misunderstand
>     your question.
>
>     HTH,
>     Tom
>
>         It would be kind of you letting me know if there is a way to define
>         neighbors base on zero distance with the corresponding point.
>         Appreciate it.
>
>         Roosbeh Nowrouzian
>         PhD student
>         Department of Civil Engineering
>         University of Florida
>
>         [[alternative HTML version deleted]]
>
>         _________________________________________________
>         R-sig-Geo mailing list
>         R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>         https://stat.ethz.ch/mailman/__listinfo/r-sig-geo
>         <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>
>
>     --
>     Technische Universit?t M?nchen
>     Department f?r Pflanzenwissenschaften
>     Lehrstuhl f?r Gr?nlandlehre
>     Alte Akademie 12
>     85350 Freising / Germany
>     Phone: ++49 (0)8161 715324 <tel:%2B%2B49%20%280%298161%20715324>
>     Fax: ++49 (0)8161 713243 <tel:%2B%2B49%20%280%298161%20713243>
>     email: tom.gottfried at wzw.tum.de <mailto:tom.gottfried at wzw.tum.de>
>     http://www.wzw.tum.de/__gruenland <http://www.wzw.tum.de/gruenland>
>
>     _________________________________________________
>     R-sig-Geo mailing list
>     R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>     https://stat.ethz.ch/mailman/__listinfo/r-sig-geo
>     <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>
>

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From tom.gottfried at tum.de  Wed Apr  4 07:58:02 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Wed, 04 Apr 2012 07:58:02 +0200
Subject: [R-sig-Geo] Transform decimal degrees units in km - ReadOGR &
 owin{spatstat}
In-Reply-To: <1333478285325-7434090.post@n2.nabble.com>
References: <1333478285325-7434090.post@n2.nabble.com>
Message-ID: <4F7BE2EA.5060906@tum.de>

?spTransform

HTH,
Tom

Am 03.04.2012 20:38, schrieb Aurelie C.Godin:
> Dear list,
>
> I am trying to figure out how I can transform my unit of length from decimal
> degree to square km when I import the following simple ArcGIS polygon shape.
> Ultimately, I would like to have this information available when I assign
> this spatial polygon to my window in spatstat [i.e., Window area = xx square
> unit
> Unit of length: xx km].
>
> div0A<- readOGR(dsn="Archive", layer="Projections")
>> summary(div0A)
> Object of class SpatialPolygonsDataFrame
> Coordinates:
>       min       max
> x -80.00 -57.63430
> y  66.25  78.16666
> Is projected: FALSE
> proj4string :
> [+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0]
> Data attributes:
>         Id      NPAzimutha         UTM20            UTM19           AlberEA
>   Min.   :0   Min.   :348877   Min.   :349232   Min.   :349162   Min.
> :348656
>   1st Qu.:0   1st Qu.:348877   1st Qu.:349232   1st Qu.:349162   1st
> Qu.:348656
>   Median :0   Median :348877   Median :349232   Median :349162   Median
> :348656
>   Mean   :0   Mean   :348877   Mean   :349232   Mean   :349162   Mean
> :348656
>   3rd Qu.:0   3rd Qu.:348877   3rd Qu.:349232   3rd Qu.:349162   3rd
> Qu.:348656
>   Max.   :0   Max.   :348877   Max.   :349232   Max.   :349162   Max.
> :348656
>
> library(spatstat)
> newW2<-as(div0A,"owin")
>> newW2
> window: polygonal boundary
> enclosing rectangle: [-80, -57.6343] x [66.25, 78.16666] units
>
> Thank you very much in advance,
> Aurelie
>
> -----
> Aurelie Cosandey-Godin
> Ph.D. Student, Department of Biology, Dalhousie University
> Industrial Graduate Fellow, WWF-Canada
> Email: godina at dal.ca | Web: wormlab.biology.dal.ca
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Transform-decimal-degrees-units-in-km-ReadOGR-owin-spatstat-tp7434090p7434090.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From tom.gottfried at tum.de  Wed Apr  4 08:03:48 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Wed, 04 Apr 2012 08:03:48 +0200
Subject: [R-sig-Geo] combining values taken at nearly identical locations
In-Reply-To: <50F404E9-8514-4ABB-8922-8001F11DB0A5@gmail.com>
References: <50F404E9-8514-4ABB-8922-8001F11DB0A5@gmail.com>
Message-ID: <4F7BE444.6010603@tum.de>

?zerodist

from sp. You can set zero > 0 within that.

?dnearneigh

from spdep helps you find neighbours within specified distance. Surely 
rgeos has something ...

HTH,
Tom

Am 03.04.2012 22:40, schrieb Molly Davies:
> Hello,
>
> I apologize if my question has already been answered and I failed to find it. There must be a formal word for what I'm trying to do and I just don't know it ...
>
> My data: PM2.5 measurements, taken from 144 different monitors over a period of 78 days. Some monitors have daily values, others report at regular intervals (once every m days, m in {3, 6, 15, etc}, varies by type of monitor).
>
> The wrinkle: A number of these monitors have one or more monitors right next to them (little clusters of identical locations) or very nearby (within 100 meters).
>
> My objective: I would like to combine the values of these clusters of closely spaced monitors. On days when more than one monitor within the cluster reports a PM2.5 measurement, I would like to take the average. On days when only one monitor reports a measurement within the cluster, I'd like to use that one measurement. I do NOT want to average the location of the monitors, though! Rather, I want to use a "majority rules" voting system: if I have a cluster of 4 closely spaced monitors and 2 of them have the same coordinates, I'd like to assign the combined vector of PM2.5 measurements to the coordinates those 2 points have in common. If there are no repeated locations in a cluster, I'd still like to be able to assign the vector of measurements to an existing set of locations in my original data and not an average location. (Note: I am aware that I can use ddply{plyr} to take care of exactly duplicated points, but I want to do more than that.)
>
> A toy example:
>
> Original data: Suppose x and y are location and d1, d2 and d3 are measurements taken on different days.
> x   y   d1  d2  d3
> 1   1   NA  12  3
> 1   1   14  NA  5
> 1.3 1.5 8   NA  NA
> 15  17  11  21  7
>
> I would like to average the rows that are within a radius of 1 from each other and use the coordinates associated with the majority in the combination.
> x   y   d1  d2  d3
> 1   1   11  12  4
> 15  17  11  21  7
>
> Does what I've described have a name? Are there any built-in functions in R that will do it? If not, I would very much appreciate suggestions about how best to implement such a task.
>
> Some toy data to set me straight with:
> Each row is a unique monitor.
> My neighborhood radius of interest is 0.1.
> ###### BEGIN SNIP ############
> toyDat<- data.frame(x=runif(90), y=runif(90)) # SETTING UP A DATA FRAME
> toyDat[91:100,]<- toyDat[sample(90, 10),] # CREATING SOME EXACTLY DUPLICATED LOCATIONS
> toyDat[101:105,]<- toyDat[96:100,] + 0.02 # NOW I'LL HAVE AT LEAST 5 TRIADS INCLUDING ONE DUPLICATED LOCATION.
> toyDat$d1<- rnorm(105) # GIVING ALL THE MONITORS DATA
> toyDat$d2<- rnorm(105)
> toyDat$d1[sample(105, 15)]<- NA # SPRINKLING IN MISSING VALUES TO KEEP IT REALISTIC
> toyDat$d2[sample(105, 17)]<- NA
> ###### END SNIP ############
>
> Thanks so much,
>
> Molly Davies
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From hzambran.newsgroups at gmail.com  Wed Apr  4 08:51:38 2012
From: hzambran.newsgroups at gmail.com (Mauricio Zambrano-Bigiarini)
Date: Wed, 4 Apr 2012 08:51:38 +0200
Subject: [R-sig-Geo] spplot question in sp_0.9-98
In-Reply-To: <4F7B564F.5040808@uni-muenster.de>
References: <CAHYf9PmcbFWPAjCmsCSO6VUQ_B4q-WsXVgx1JQ-dUei-0=46SQ@mail.gmail.com>
	<4F7B564F.5040808@uni-muenster.de>
Message-ID: <CAHYf9Pny_HSNDu3Z4zeuC2piY9Yr5Zy=ZFJVrwWJ42ZNfhjJ-w@mail.gmail.com>

2012/4/3 Edzer Pebesma <edzer.pebesma at uni-muenster.de>:
> Thanks for notifying this. Removing the cex=.7 solves this, as does
> replicating cex, as in
>
> spplot(meuse, c("cadmium", "copper", "lead", "zinc"), do.log = TRUE,
> key.space = "right", as.table = TRUE,
> sp.layout=list(rv, scale, text1, text2, arrow),
> main = "Heavy metals (top soil), ppm", cex=rep(.7,4*length(meuse)), cuts
> = cuts)
>
> This, and returning the color vector, are obviously bugs, and will be
> addressed in the next version of sp.


Thanks for your answer Edzer.

Yesterday I could confirm that this issue is not present in sp_0.9-97

All the best,

Mauricio Zambrano-Bigiarini

-- 
===========================================
Water Resources Unit
Institute for Environment and Sustainability
Joint Research Centre, European Commission
webinfo    : http://floods.jrc.ec.europa.eu/
===========================================
DISCLAIMER:
"The views expressed are purely those of the writer
and may not in any circumstances be regarded as
stating an official position of the European Commission"
===========================================
Linux user #454569 -- Ubuntu user #17469
============================================
"There is only one pretty child in the world,
and every mother has it."
(Chinese Proverb)
============================================
http://c2.com/cgi/wiki?HowToAskQuestionsTheSmartWay


>
> On 04/03/2012 08:37 PM, Mauricio Zambrano-Bigiarini wrote:
>> Dear List,
>>
>> I just notice an strange behaviour of the 'spplot' function, and I
>> would like your help to figure out if it is something related to my
>> system or is something related to the 'spplot' function.
>>
>> Below goes a reproducible example taken from
>> http://r-spatial.sourceforge.net/gallery/ :
>>
>>
>> # fig06.R multi-panel plot, scales + north arrow only in last plot.
>>
>> ----------------------START-----------------------------------
>>
>> library(sp)
>> library(lattice) # required for trellis.par.set():
>> trellis.par.set(sp.theme()) # sets color ramp to bpy.colors()
>>
>> data(meuse)
>> coordinates(meuse)=~x+y
>> data(meuse.riv)
>> meuse.sr = SpatialPolygons(list(Polygons(list(Polygon(meuse.riv)),"meuse.riv")))
>> rv = list("sp.polygons", meuse.sr, fill = "lightblue")
>>
>> ## multi-panel plot, scales + north arrow only in last plot:
>> ## using the "which" argument in a layout component
>> ## (if which=4 was set as list component of sp.layout, the river
>> ## would as well be drawn only in that (last) panel)
>> scale = list("SpatialPolygonsRescale", layout.scale.bar(),
>> offset = c(180500,329800), scale = 500, fill=c("transparent","black"),
>> which = 4)
>> text1 = list("sp.text", c(180500,329900), "0", cex = .5, which = 4)
>> text2 = list("sp.text", c(181000,329900), "500 m", cex = .5, which = 4)
>> arrow = list("SpatialPolygonsRescale", layout.north.arrow(),
>> offset = c(181300,329800),
>> scale = 400, which = 4)
>> cuts = c(.2,.5,1,2,5,10,20,50,100,200,500,1000,2000)
>> spplot(meuse, c("cadmium", "copper", "lead", "zinc"), do.log = TRUE,
>> key.space = "right", as.table = TRUE,
>> sp.layout=list(rv, scale, text1, text2, arrow),
>> main = "Heavy metals (top soil), ppm", cex = .7, cuts = cuts)
>>
>> ----------------------END-----------------------------------
>>
>>
>> After the last spplot command, I only get one point in the upper left
>> figure, which is very different from the Figure 6 shown in
>> http://r-spatial.sourceforge.net/gallery/
>>
>> In addition, I get the following output after the spplot command:
>>
>> [1] "#A714EBFF" "#6500FFFF" "#6500FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF"
>> ? [7] "#2400FFFF" "#2400FFFF" "#2400FFFF" "#0000DAFF" "#0000DAFF" "#0000DAFF"
>> ?[13] "#A714EBFF" "#2400FFFF" "#0000DAFF" "#6500FFFF" "#6500FFFF" "#6500FFFF"
>> ?[19] "#6500FFFF" "#A714EBFF" "#6500FFFF" "#2400FFFF" "#2400FFFF" "#0000DAFF"
>> ?[25] "#0000DAFF" "#0000DAFF" "#0000DAFF" "#0000DAFF" "#0000DAFF" "#0000DAFF"
>> ?[31] "#0000DAFF" "#0000DAFF" "#2400FFFF" "#0000DAFF" "#0000DAFF" "#2400FFFF"
>> ?[37] "#6500FFFF" "#6500FFFF" "#6500FFFF" "#A714EBFF" "#2400FFFF" "#0000DAFF"
>> ?[43] "#0000DAFF" "#0000DAFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#0000DAFF"
>> ?[49] "#0000DAFF" "#2400FFFF" "#0000DAFF" "#6500FFFF" "#A714EBFF" "#A714EBFF"
>> ?[55] "#6500FFFF" "#6500FFFF" "#2400FFFF" "#2400FFFF" "#A714EBFF" "#6500FFFF"
>> ?[61] "#6500FFFF" "#6500FFFF" "#6500FFFF" "#6500FFFF" "#6500FFFF" "#6500FFFF"
>> ?[67] "#6500FFFF" "#000086FF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF"
>> ?[73] "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF"
>> ?[79] "#6500FFFF" "#6500FFFF" "#A714EBFF" "#A714EBFF" "#6500FFFF" "#2400FFFF"
>> ?[85] "#0000DAFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#0000DAFF"
>> ?[91] "#0000DAFF" "#2400FFFF" "#2400FFFF" "#000086FF" "#000086FF" "#000033FF"
>> ?[97] "#000086FF" "#000033FF" "#000033FF" "#000033FF" "#000086FF" "#000033FF"
>> [103] "#000033FF" "#000033FF" "#000033FF" "#000033FF" "#000033FF" "#000033FF"
>> [109] "#000033FF" "#000033FF" "#000033FF" "#000033FF" "#000033FF" "#000033FF"
>> [115] "#000033FF" "#000033FF" "#000033FF" "#2400FFFF" "#000033FF" "#000033FF"
>> [121] "#000033FF" "#000033FF" "#0000DAFF" "#2400FFFF" "#000033FF" "#000033FF"
>> [127] "#000033FF" "#000033FF" "#000033FF" "#0000DAFF" "#000086FF" "#0000DAFF"
>> [133] "#000033FF" "#000033FF" "#000086FF" "#000086FF" "#000086FF" "#0000DAFF"
>> [139] "#0000DAFF" "#0000DAFF" "#0000DAFF" "#000086FF" "#000086FF" "#2400FFFF"
>> [145] "#2400FFFF" "#2400FFFF" "#2400FFFF" "#2400FFFF" "#0000DAFF" "#0000DAFF"
>> [151] "#000086FF" "#2400FFFF" "#2400FFFF" "#000086FF" "#2400FFFF" "#FF6798FF"
>> [157] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#FF6798FF" "#E83EC1FF"
>> [163] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF"
>> [169] "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
>> [175] "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
>> [181] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
>> [187] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
>> [193] "#FF6798FF" "#FF6798FF" "#FF916EFF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
>> [199] "#E83EC1FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
>> [205] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FF916EFF" "#FF916EFF" "#FF916EFF"
>> [211] "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
>> [217] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
>> [223] "#E83EC1FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#E83EC1FF"
>> [229] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF"
>> [235] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF"
>> [241] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
>> [247] "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
>> [253] "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
>> [259] "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#A714EBFF" "#E83EC1FF" "#E83EC1FF"
>> [265] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
>> [271] "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF"
>> [277] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#A714EBFF"
>> [283] "#A714EBFF" "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#E83EC1FF" "#A714EBFF"
>> [289] "#A714EBFF" "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#E83EC1FF" "#E83EC1FF"
>> [295] "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#A714EBFF" "#E83EC1FF" "#E83EC1FF"
>> [301] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#A714EBFF" "#A714EBFF"
>> [307] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FFBB44FF" "#FFBB44FF"
>> [313] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF"
>> [319] "#FF916EFF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FFBB44FF" "#FF916EFF"
>> [325] "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF"
>> [331] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
>> [337] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
>> [343] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF916EFF" "#FFBB44FF"
>> [349] "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#E83EC1FF" "#FF6798FF" "#FF6798FF"
>> [355] "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FF916EFF"
>> [361] "#FF6798FF" "#FF916EFF" "#FFBB44FF" "#FFE51AFF" "#FFBB44FF" "#FFBB44FF"
>> [367] "#FF916EFF" "#FFBB44FF" "#FFE51AFF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF"
>> [373] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#E83EC1FF"
>> [379] "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF"
>> [385] "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF"
>> [391] "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FF6798FF" "#FF916EFF"
>> [397] "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF"
>> [403] "#FFBB44FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
>> [409] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#FF6798FF" "#E83EC1FF"
>> [415] "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#FF6798FF"
>> [421] "#FF6798FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
>> [427] "#FF6798FF" "#FFBB44FF" "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF6798FF"
>> [433] "#FFBB44FF" "#FFBB44FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#E83EC1FF"
>> [439] "#FF916EFF" "#FF916EFF" "#E83EC1FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF"
>> [445] "#E83EC1FF" "#E83EC1FF" "#E83EC1FF" "#FF6798FF" "#FF916EFF" "#FF6798FF"
>> [451] "#FF6798FF" "#FF6798FF" "#FF6798FF" "#FF916EFF" "#FF916EFF" "#FF916EFF"
>> [457] "#FF916EFF" "#FFBB44FF" "#FF6798FF" "#FF6798FF" "#E83EC1FF" "#FF916EFF"
>> [463] "#FF916EFF" "#FF6798FF" "#FF916EFF" "#FFFF60FF" "#FFFF60FF" "#FFE51AFF"
>> [469] "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF"
>> [475] "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFFF60FF" "#FFE51AFF" "#FFBB44FF"
>> [481] "#FFFF60FF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFFF60FF" "#FFE51AFF"
>> [487] "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FFBB44FF"
>> [493] "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FFBB44FF"
>> [499] "#FF916EFF" "#FFBB44FF" "#FFBB44FF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF"
>> [505] "#FFFF60FF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFE51AFF"
>> [511] "#FFE51AFF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF"
>> [517] "#FFE51AFF" "#FFFF60FF" "#FFFF60FF" "#FFFF60FF" "#FFE51AFF" "#FFBB44FF"
>> [523] "#FFE51AFF" "#FFFF60FF" "#FFFF60FF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF"
>> [529] "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFFF60FF" "#FF916EFF" "#FFE51AFF"
>> [535] "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFE51AFF"
>> [541] "#FFE51AFF" "#FFE51AFF" "#FFE51AFF" "#FFFF60FF" "#FFFF60FF" "#FFFF60FF"
>> [547] "#FFFF60FF" "#FFE51AFF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFE51AFF"
>> [553] "#FFE51AFF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FFE51AFF" "#FFE51AFF"
>> [559] "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FF916EFF"
>> [565] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FF916EFF" "#FF916EFF"
>> [571] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF"
>> [577] "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF"
>> [583] "#FFE51AFF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFE51AFF"
>> [589] "#FFE51AFF" "#FFBB44FF" "#FF916EFF" "#FF916EFF" "#FF916EFF" "#FFBB44FF"
>> [595] "#FFBB44FF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#FF916EFF"
>> [601] "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF"
>> [607] "#FF916EFF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF" "#FFE51AFF" "#FFE51AFF"
>> [613] "#FFE51AFF" "#FFBB44FF" "#FFBB44FF" "#FF916EFF" "#FFBB44FF" "#FFBB44FF"
>> [619] "#FF916EFF" "#FFBB44FF"
>>
>> -------------------
>>
>> sessionInfo()
>> R version 2.14.1 (2011-12-22)
>> Platform: x86_64-redhat-linux-gnu (64-bit)
>>
>> locale:
>> ?[1] LC_CTYPE=en_GB.utf8 ? ? ? LC_NUMERIC=C
>> ?[3] LC_TIME=en_GB.utf8 ? ? ? ?LC_COLLATE=en_GB.utf8
>> ?[5] LC_MONETARY=en_GB.utf8 ? ?LC_MESSAGES=en_GB.utf8
>> ?[7] LC_PAPER=C ? ? ? ? ? ? ? ?LC_NAME=C
>> ?[9] LC_ADDRESS=C ? ? ? ? ? ? ?LC_TELEPHONE=C
>> [11] LC_MEASUREMENT=en_GB.utf8 LC_IDENTIFICATION=C
>>
>> attached base packages:
>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>
>> other attached packages:
>> [1] lattice_0.20-6 sp_0.9-98
>>
>> loaded via a namespace (and not attached):
>> [1] grid_2.14.1 ?tools_2.14.1
>>
>> -----------
>>
>>
>> Thanks in advance for any help,
>>
>>
>> Mauricio Zambrano-Bigiarini
>>
>
> --
> Edzer Pebesma
> Institute for Geoinformatics (ifgi), University of M?nster
> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
> http://www.52north.org/geostatistics ? ? ?e.pebesma at wwu.de
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Wed Apr  4 08:58:29 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 4 Apr 2012 08:58:29 +0200 (CEST)
Subject: [R-sig-Geo] Comparing Estimating Spatial Simultaneous
 Autoregressive Models Using "spautolm" and "lagsarlm" functions
In-Reply-To: <CAJw-hPbNR=Ww=o-LrptPQXiYsf_-jw=OEEfhUeRUCN1MUHtHeg@mail.gmail.com>
References: <CAJw-hPbNR=Ww=o-LrptPQXiYsf_-jw=OEEfhUeRUCN1MUHtHeg@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1204040856110.29584@reclus.nhh.no>

On Wed, 4 Apr 2012, Roosbeh Nowrouzian wrote:

> Hi dear List members:
>
> I estimated a Spatial Simultaneous Auto-regressive Model using "spautolm" [
> family="SAR"] and "lagsarlm" [type=lag].The estimated coefficients are
> approximately equal but the Lambda estimated are somehow different.

These do not fit the same model. spautolm(..., family="SAR") and 
errorsarlm() do, as the help page and examples make clear.

Roger

>
> In SAR using "spautolm":
>
> Lambda: 0.023787 *LR test value: 2.8569* *p-value: 0.090982*
>
>
> In SAR using "lagsarlm":
>
> Rho: 0.019479, *LR test value: 1.964*, *p-value: 0.16108*
> *
> *
> Setting significant level at 90% there would be significant Lambda for SAR
> using "spautolm"while insignificant if using "lagsarlm".
> I am wondering why it happens and which one is more accurate to report.
>
> Thanks for your help
> Roosbeh Nowrouzian
> PhD Student
> Department of Civil Engineering
> University of Florida
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From r.m.krug at gmail.com  Wed Apr  4 10:43:39 2012
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Wed, 04 Apr 2012 10:43:39 +0200
Subject: [R-sig-Geo] read shapefile into R larger than 2GB
In-Reply-To: <CAOFdM0gcP2G9ocg3iD9QDpv=FUHqsHe5=dn0gFvU2HXP9oXu+w@mail.gmail.com>
References: <CAOFdM0gcP2G9ocg3iD9QDpv=FUHqsHe5=dn0gFvU2HXP9oXu+w@mail.gmail.com>
Message-ID: <4F7C09BB.4060807@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 03/04/12 20:44, Carlos Valenzuela wrote:
> Hello all, I was hoping someone may be able to help me with this problem. I am trying to read a
> shapefile into R that is larger than 2GB. I?ve tried

In my opinion, a 2GB shape file is insane....

Is the attribute table (.dbf) file as big or is it the shp? If it is the .dbf, you have to look if
you need all attributes.
If it is the .shp, you could possibly split the shaope file in more then one actual layer?
Also, import into a SpatiaLite or even PostGIS database might help you - then you can easier
import a subset of features.

Cheers,

Rainer


> using readShapePoly() in spdep as well as the readOGR() in rgdal with no luck.,
> 
> Using the readShapePoly(), I get:, ?failed on DBF filefseek? on  a series of lines (over
> 284,000),
> 
> When using rgdal, I get this:
> 
> Warning message:, In readOGR(".", "nameoffiles") :, Deleted feature IDs: 284284, 284285,
> 284286, 284287, 284288, 284289, 284290, 284291, 284292, 284293, 284294, 284295, 284296, 284297,
> 284298, 284299, 284300, 284301, 284302, 284303, 284304, 284305, 284306, 284307, 284308, 284309,
> 284310, 284311, 284312, 284313, 284314, 284315, 284316, 284317, 284318, 284319, 284320, 284321,
> 284322, 284323, 284324, 284325, 284326, 284327, 284328, 284329, 284330, 284331, 284332, 284333,
> 284334, 284335, 284336, 284337, 284338, 284339, 284340, 284341, 284342, 284343, 284344, 284345,
> 284346, 284347, 284348, 284349, 284350, 284351, 284352, 284353, 284354, 284355, 284356, 284357,
> 284358, 284359, 284360, 284361, 284362, 284363, 284364, 284365, 284366, 284367, 284368, 284369,
> 284370, 284371, 284372, 284373, 284374, 284375, 284376, 284377, 284378, 284379, 284380, 284381,
> 284382, 284383, 284384, 284385, 284386, 284387, 284388, 284389, 284390, 284391, 284392, 284393,
> 284394, 284395, 284396, 284397, 284398, 284399, 284400, 284401, 284402, 284403, 284404, 284405,
> 284 [... truncated],
> 
> In other words, I only get half of the data imported into R and need to get all of it in.
> 
> Thank you,
> 
> Carlos
> 
> [[alternative HTML version deleted]]
> 
> 
> 
> 
> _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org 
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


- -- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys.
(Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk98CbsACgkQoYgNqgF2egq1jQCggSM/x65ppcpy8oT3FMptgCpP
dgkAn3Ls1yTRnyk5zxouGA216vU4iKKX
=eY6g
-----END PGP SIGNATURE-----


From Roger.Bivand at nhh.no  Wed Apr  4 13:48:19 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 4 Apr 2012 13:48:19 +0200 (CEST)
Subject: [R-sig-Geo] read shapefile into R larger than 2GB
In-Reply-To: <4F7C09BB.4060807@gmail.com>
References: <CAOFdM0gcP2G9ocg3iD9QDpv=FUHqsHe5=dn0gFvU2HXP9oXu+w@mail.gmail.com>
	<4F7C09BB.4060807@gmail.com>
Message-ID: <alpine.LRH.2.02.1204041342240.30247@reclus.nhh.no>

On Wed, 4 Apr 2012, Rainer M Krug wrote:

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> On 03/04/12 20:44, Carlos Valenzuela wrote:
>> Hello all, I was hoping someone may be able to help me with this 
>> problem. I am trying to read a shapefile into R that is larger than 
>> 2GB. I?ve tried
>
> In my opinion, a 2GB shape file is insane....

Yes, it doesn't seem well-considered. Is this LiDAR data? Are you 
intending to do statistics on the complete data set? What would you infer 
from the results?

You have not included the output of sessionInfo() - I suspect that you are 
using a 32-bit system, which would fail in any case.

Roger

>
> Is the attribute table (.dbf) file as big or is it the shp? If it is the 
> .dbf, you have to look if you need all attributes. If it is the .shp, 
> you could possibly split the shaope file in more then one actual layer? 
> Also, import into a SpatiaLite or even PostGIS database might help you - 
> then you can easier import a subset of features.
>
> Cheers,
>
> Rainer
>
>
>> using readShapePoly() in spdep as well as the readOGR() in rgdal with no luck.,
>>
>> Using the readShapePoly(), I get:, ?failed on DBF filefseek? on  a series of lines (over
>> 284,000),
>>
>> When using rgdal, I get this:
>>
>> Warning message:, In readOGR(".", "nameoffiles") :, Deleted feature IDs: 284284, 284285,
>> 284286, 284287, 284288, 284289, 284290, 284291, 284292, 284293, 284294, 284295, 284296, 284297,
>> 284298, 284299, 284300, 284301, 284302, 284303, 284304, 284305, 284306, 284307, 284308, 284309,
>> 284310, 284311, 284312, 284313, 284314, 284315, 284316, 284317, 284318, 284319, 284320, 284321,
>> 284322, 284323, 284324, 284325, 284326, 284327, 284328, 284329, 284330, 284331, 284332, 284333,
>> 284334, 284335, 284336, 284337, 284338, 284339, 284340, 284341, 284342, 284343, 284344, 284345,
>> 284346, 284347, 284348, 284349, 284350, 284351, 284352, 284353, 284354, 284355, 284356, 284357,
>> 284358, 284359, 284360, 284361, 284362, 284363, 284364, 284365, 284366, 284367, 284368, 284369,
>> 284370, 284371, 284372, 284373, 284374, 284375, 284376, 284377, 284378, 284379, 284380, 284381,
>> 284382, 284383, 284384, 284385, 284386, 284387, 284388, 284389, 284390, 284391, 284392, 284393,
>> 284394, 284395, 284396, 284397, 284398, 284399, 284400, 284401, 284402, 284403, 284404, 284405,
>> 284 [... truncated],
>>
>> In other words, I only get half of the data imported into R and need to get all of it in.
>>
>> Thank you,
>>
>> Carlos
>>
>> [[alternative HTML version deleted]]
>>
>>
>>
>>
>> _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> - --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys.
> (Germany)
>
> Centre of Excellence for Invasion Biology
> Stellenbosch University
> South Africa
>
> Tel :       +33 - (0)9 53 10 27 44
> Cell:       +33 - (0)6 85 62 59 98
> Fax :       +33 - (0)9 58 10 27 44
>
> Fax (D):    +49 - (0)3 21 21 25 22 44
>
> email:      Rainer at krugs.de
>
> Skype:      RMkrug
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.11 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
> iEYEARECAAYFAk98CbsACgkQoYgNqgF2egq1jQCggSM/x65ppcpy8oT3FMptgCpP
> dgkAn3Ls1yTRnyk5zxouGA216vU4iKKX
> =eY6g
> -----END PGP SIGNATURE-----
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From eric.momsen at ndsu.edu  Wed Apr  4 14:16:09 2012
From: eric.momsen at ndsu.edu (Eric Momsen)
Date: Wed, 4 Apr 2012 07:16:09 -0500
Subject: [R-sig-Geo] Image Classification - Wish List?
In-Reply-To: <mailman.6942.1333516299.4502.r-sig-geo@r-project.org>
References: <mailman.6942.1333516299.4502.r-sig-geo@r-project.org>
Message-ID: <CAO7hk-KUatLKDOWxhavVok7sQwfTRBQUfao0sTOZuKWOfyh2DA@mail.gmail.com>

Hello all,

I'm looking for some feedback and ideas regarding the need to improve
image classification abilities in GRASS GIS. ?My understanding is that
since the required classification techniques aren't available in
GRASS, the researchers doing that work are found elsewhere. ?Hopefully
this is a good place to find those experts?

For those that aren't already aware of it, Google Summer of Code
provides support for students to spend the summer programming for Open
Source software projects. ?The GRASS GIS idea list included the
following items that caught my eye:

4. Implement image segmentation algorithms and tools
5. Implement region-based classification
6. Implement hierarchical classification tools (e.g. being able to
create a large class "forest", with subclasses of different types of
forests)

The methods currently implemented in GRASS are at:
http://grass.osgeo.org/wiki/Image_classification

>From discussions on the grass-dev mail list, I understand that
some/many of the new algorithms to meet these needs are implemented in
R and other software.

I'm wondering:

What tools/workflow are used for this type of work?
Are the current methods OK, or would some integration in GRASS be better?
Are any algorithms not available in other software that couldshould be
implemented in GRASS?
Are any experts in image classification willing to mentor or provide
informal advice about the subject matter this summer? ?(There is one
volunteer to mentor from the software side, it would be nice to have
someone to answer questions about the classification techniques.)

Thanks for any and all input!
Eric


From r.m.krug at gmail.com  Wed Apr  4 14:27:22 2012
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Wed, 04 Apr 2012 14:27:22 +0200
Subject: [R-sig-Geo] Image Classification - Wish List?
In-Reply-To: <CAO7hk-KUatLKDOWxhavVok7sQwfTRBQUfao0sTOZuKWOfyh2DA@mail.gmail.com>
References: <mailman.6942.1333516299.4502.r-sig-geo@r-project.org>
	<CAO7hk-KUatLKDOWxhavVok7sQwfTRBQUfao0sTOZuKWOfyh2DA@mail.gmail.com>
Message-ID: <4F7C3E2A.9080103@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 04/04/12 14:16, Eric Momsen wrote:
> Hello all,
> 
> I'm looking for some feedback and ideas regarding the need to improve image classification 
> abilities in GRASS GIS.  My understanding is that since the required classification techniques 
> aren't available in GRASS, the researchers doing that work are found elsewhere.  Hopefully
> this is a good place to find those experts?
> 
> For those that aren't already aware of it, Google Summer of Code provides support for students 
> to spend the summer programming for Open Source software projects.  The GRASS GIS idea list 
> included the following items that caught my eye:
> 
> 4. Implement image segmentation algorithms and tools 5. Implement region-based classification 
> 6. Implement hierarchical classification tools (e.g. being able to create a large class 
> "forest", with subclasses of different types of forests)
> 
> The methods currently implemented in GRASS are at: 
> http://grass.osgeo.org/wiki/Image_classification
> 
>> From discussions on the grass-dev mail list, I understand that
> some/many of the new algorithms to meet these needs are implemented in R and other software.
> 
> I'm wondering:

I can not answer you directly (as I hav no idea about image classification) but I use GRASS from
R, trhe other way around, and it works very nice. I had the idea in the past, that the same should
be possible to be done easily from GRASS: use R to do map analysis in the background, so that the
"normal" GRASS user doesn't even need to be aware that a module e.g. named r.analyseThis calls R
to do the actual analysis.

An interface like this would help your work tremendously, as it would make the linking much
easier. Nevertheless, I have no idea how this could be achieved, maybe via python, from which one
can call R and some convenience functions?

Cheers,

Rainer


> 
> What tools/workflow are used for this type of work? Are the current methods OK, or would some 
> integration in GRASS be better? Are any algorithms not available in other software that 
> couldshould be implemented in GRASS? Are any experts in image classification willing to mentor 
> or provide informal advice about the subject matter this summer?  (There is one volunteer to 
> mentor from the software side, it would be nice to have someone to answer questions about the 
> classification techniques.)
> 
> Thanks for any and all input! Eric
> 
> _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org
>  https://stat.ethz.ch/mailman/listinfo/r-sig-geo


- -- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys.
(Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk98PioACgkQoYgNqgF2egrr3wCeP3ZIgvAhGvagA0TYy/0Fbjo+
3v4AoIPxaLQ93WYnediS2AG657Sd33g8
=Nr3u
-----END PGP SIGNATURE-----


From jour4life at gmail.com  Wed Apr  4 14:49:20 2012
From: jour4life at gmail.com (Carlos Valenzuela)
Date: Wed, 04 Apr 2012 07:49:20 -0500
Subject: [R-sig-Geo] read shapefile into R larger than 2GB
In-Reply-To: <alpine.LRH.2.02.1204041342240.30247@reclus.nhh.no>
Message-ID: <CBA1A809.32D3%jour4life@gmail.com>

Thank you all for your replies.

Rainer - In regards to the size of the .shp, it is due to the .dbf file.
There are over 500,000 cases (for the entire city). Now the kicker is that
we also want to include more data in the future. But, it seems like that
we would be even more difficult as all of you imply.

Roger - I am actually using a 64-bit Windows 7 machine with 12 GB RAM,
where I attempted to use both spdep() and readOGR(). I also tried this on
a 64-bit Linux server with 32 GB RAM, but only trying to use spdep().As I
explained to Rainer, there are 500,000 cases and we do want to make some
inferences on the results that would incorporate even more data...But we
will see if that is possible.

I am going reduce the number of attributes in the table, but I was hoping
that the number of observations is not the issue because it seems like R
was only importing half of the observations.

Best,

Carlos


On 4/4/12 6:48 AM, "Roger Bivand" <Roger.Bivand at nhh.no> wrote:

>On Wed, 4 Apr 2012, Rainer M Krug wrote:
>
>> -----BEGIN PGP SIGNED MESSAGE-----
>> Hash: SHA1
>>
>> On 03/04/12 20:44, Carlos Valenzuela wrote:
>>> Hello all, I was hoping someone may be able to help me with this
>>> problem. I am trying to read a shapefile into R that is larger than
>>> 2GB. I?ve tried
>>
>> In my opinion, a 2GB shape file is insane....
>
>Yes, it doesn't seem well-considered. Is this LiDAR data? Are you
>intending to do statistics on the complete data set? What would you infer
>from the results?
>
>You have not included the output of sessionInfo() - I suspect that you
>are 
>using a 32-bit system, which would fail in any case.
>
>Roger
>
>>
>> Is the attribute table (.dbf) file as big or is it the shp? If it is
>>the 
>> .dbf, you have to look if you need all attributes. If it is the .shp,
>> you could possibly split the shaope file in more then one actual layer?
>> Also, import into a SpatiaLite or even PostGIS database might help you
>>- 
>> then you can easier import a subset of features.
>>
>> Cheers,
>>
>> Rainer
>>
>>
>>> using readShapePoly() in spdep as well as the readOGR() in rgdal with
>>>no luck.,
>>>
>>> Using the readShapePoly(), I get:, ?failed on DBF filefseek? on  a
>>>series of lines (over
>>> 284,000),
>>>
>>> When using rgdal, I get this:
>>>
>>> Warning message:, In readOGR(".", "nameoffiles") :, Deleted feature
>>>IDs: 284284, 284285,
>>> 284286, 284287, 284288, 284289, 284290, 284291, 284292, 284293,
>>>284294, 284295, 284296, 284297,
>>> 284298, 284299, 284300, 284301, 284302, 284303, 284304, 284305,
>>>284306, 284307, 284308, 284309,
>>> 284310, 284311, 284312, 284313, 284314, 284315, 284316, 284317,
>>>284318, 284319, 284320, 284321,
>>> 284322, 284323, 284324, 284325, 284326, 284327, 284328, 284329,
>>>284330, 284331, 284332, 284333,
>>> 284334, 284335, 284336, 284337, 284338, 284339, 284340, 284341,
>>>284342, 284343, 284344, 284345,
>>> 284346, 284347, 284348, 284349, 284350, 284351, 284352, 284353,
>>>284354, 284355, 284356, 284357,
>>> 284358, 284359, 284360, 284361, 284362, 284363, 284364, 284365,
>>>284366, 284367, 284368, 284369,
>>> 284370, 284371, 284372, 284373, 284374, 284375, 284376, 284377,
>>>284378, 284379, 284380, 284381,
>>> 284382, 284383, 284384, 284385, 284386, 284387, 284388, 284389,
>>>284390, 284391, 284392, 284393,
>>> 284394, 284395, 284396, 284397, 284398, 284399, 284400, 284401,
>>>284402, 284403, 284404, 284405,
>>> 284 [... truncated],
>>>
>>> In other words, I only get half of the data imported into R and need
>>>to get all of it in.
>>>
>>> Thank you,
>>>
>>> Carlos
>>>
>>> [[alternative HTML version deleted]]
>>>
>>>
>>>
>>>
>>> _______________________________________________ R-sig-Geo mailing list
>>>R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>> - --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
>>Biology, UCT), Dipl. Phys.
>> (Germany)
>>
>> Centre of Excellence for Invasion Biology
>> Stellenbosch University
>> South Africa
>>
>> Tel :       +33 - (0)9 53 10 27 44
>> Cell:       +33 - (0)6 85 62 59 98
>> Fax :       +33 - (0)9 58 10 27 44
>>
>> Fax (D):    +49 - (0)3 21 21 25 22 44
>>
>> email:      Rainer at krugs.de
>>
>> Skype:      RMkrug
>> -----BEGIN PGP SIGNATURE-----
>> Version: GnuPG v1.4.11 (GNU/Linux)
>> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>>
>> iEYEARECAAYFAk98CbsACgkQoYgNqgF2egq1jQCggSM/x65ppcpy8oT3FMptgCpP
>> dgkAn3Ls1yTRnyk5zxouGA216vU4iKKX
>> =eY6g
>> -----END PGP SIGNATURE-----
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>-- 
>Roger Bivand
>Department of Economics, NHH Norwegian School of Economics,
>Helleveien 30, N-5045 Bergen, Norway.
>voice: +47 55 95 93 55; fax +47 55 95 95 43
>e-mail: Roger.Bivand at nhh.no
>


From r.m.krug at gmail.com  Wed Apr  4 14:54:31 2012
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Wed, 04 Apr 2012 14:54:31 +0200
Subject: [R-sig-Geo] read shapefile into R larger than 2GB
In-Reply-To: <CBA1A809.32D3%jour4life@gmail.com>
References: <CBA1A809.32D3%jour4life@gmail.com>
Message-ID: <4F7C4487.5070304@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 04/04/12 14:49, Carlos Valenzuela wrote:
> Thank you all for your replies.
> 
> Rainer - In regards to the size of the .shp, it is due to the .dbf file. There are over 500,000
> cases (for the entire city). Now the kicker is that we also want to include more data in the
> future. But, it seems like that we would be even more difficult as all of you imply.

In this case you should try to only import the geometry without attribute table, and then link the
attribute table (from a sqlite database) in and read the required columns when you do the analysis.

> 
> Roger - I am actually using a 64-bit Windows 7 machine with 12 GB RAM, where I attempted to use
> both spdep() and readOGR(). I also tried this on a 64-bit Linux server with 32 GB RAM, but only
> trying to use spdep().As I explained to Rainer, there are 500,000 cases and we do want to make
> some inferences on the results that would incorporate even more data...But we will see if that
> is possible.
> 
> I am going reduce the number of attributes in the table, but I was hoping that the number of
> observations is not the issue because it seems like R was only importing half of the
> observations.

Very likely memory issue - I don't expect a hard coded limit(?). So dynamically linking the
attribute table should solve the problem.

Cheers,

Rainer

> 
> Best,
> 
> Carlos
> 
> 
> On 4/4/12 6:48 AM, "Roger Bivand" <Roger.Bivand at nhh.no> wrote:
> 
>> On Wed, 4 Apr 2012, Rainer M Krug wrote:
>> 
> On 03/04/12 20:44, Carlos Valenzuela wrote:
>>>>> Hello all, I was hoping someone may be able to help me with this problem. I am trying
>>>>> to read a shapefile into R that is larger than 2GB. I?ve tried
> 
> In my opinion, a 2GB shape file is insane....
>>> 
>>> Yes, it doesn't seem well-considered. Is this LiDAR data? Are you intending to do
>>> statistics on the complete data set? What would you infer from the results?
>>> 
>>> You have not included the output of sessionInfo() - I suspect that you are using a 32-bit
>>> system, which would fail in any case.
>>> 
>>> Roger
>>> 
> 
> Is the attribute table (.dbf) file as big or is it the shp? If it is the .dbf, you have to look
> if you need all attributes. If it is the .shp, you could possibly split the shaope file in more
> then one actual layer? Also, import into a SpatiaLite or even PostGIS database might help you -
>  then you can easier import a subset of features.
> 
> Cheers,
> 
> Rainer
> 
> 
>>>>> using readShapePoly() in spdep as well as the readOGR() in rgdal with no luck.,
>>>>> 
>>>>> Using the readShapePoly(), I get:, ?failed on DBF filefseek? on  a series of lines
>>>>> (over 284,000),
>>>>> 
>>>>> When using rgdal, I get this:
>>>>> 
>>>>> Warning message:, In readOGR(".", "nameoffiles") :, Deleted feature IDs: 284284,
>>>>> 284285, 284286, 284287, 284288, 284289, 284290, 284291, 284292, 284293, 284294, 284295,
>>>>> 284296, 284297, 284298, 284299, 284300, 284301, 284302, 284303, 284304, 284305, 284306,
>>>>> 284307, 284308, 284309, 284310, 284311, 284312, 284313, 284314, 284315, 284316,
>>>>> 284317, 284318, 284319, 284320, 284321, 284322, 284323, 284324, 284325, 284326, 284327,
>>>>> 284328, 284329, 284330, 284331, 284332, 284333, 284334, 284335, 284336, 284337, 284338,
>>>>> 284339, 284340, 284341, 284342, 284343, 284344, 284345, 284346, 284347, 284348, 284349,
>>>>> 284350, 284351, 284352, 284353, 284354, 284355, 284356, 284357, 284358, 284359, 284360,
>>>>> 284361, 284362, 284363, 284364, 284365, 284366, 284367, 284368, 284369, 284370, 284371,
>>>>> 284372, 284373, 284374, 284375, 284376, 284377, 284378, 284379, 284380, 284381, 284382,
>>>>> 284383, 284384, 284385, 284386, 284387, 284388, 284389, 284390, 284391, 284392,
>>>>> 284393, 284394, 284395, 284396, 284397, 284398, 284399, 284400, 284401, 284402, 284403,
>>>>> 284404, 284405, 284 [... truncated],
>>>>> 
>>>>> In other words, I only get half of the data imported into R and need to get all of it
>>>>> in.
>>>>> 
>>>>> Thank you,
>>>>> 
>>>>> Carlos
>>>>> 
>>>>> [[alternative HTML version deleted]]
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> _______________________________________________ R-sig-Geo mailing list 
>>>>> R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> 
>>> 
>>> _______________________________________________ R-sig-Geo mailing list 
>>> R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>> 
>> 
>> -- Roger Bivand Department of Economics, NHH Norwegian School of Economics, Helleveien 30,
>> N-5045 Bergen, Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43 e-mail:
>> Roger.Bivand at nhh.no
>> 
> 
> 

- -- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys.
(Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk98RIcACgkQoYgNqgF2egp8eACfY6ETstwhvO4hFQqvdjKfGzWG
qZAAnRaqDEZXwF4UfgV0iCJJg0AbEdMl
=s+LE
-----END PGP SIGNATURE-----


From Roger.Bivand at nhh.no  Wed Apr  4 15:03:16 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 4 Apr 2012 15:03:16 +0200 (CEST)
Subject: [R-sig-Geo] read shapefile into R larger than 2GB
In-Reply-To: <CBA1A809.32D3%jour4life@gmail.com>
References: <CBA1A809.32D3%jour4life@gmail.com>
Message-ID: <alpine.LRH.2.02.1204041456170.30247@reclus.nhh.no>

On Wed, 4 Apr 2012, Carlos Valenzuela wrote:

> Thank you all for your replies.
>
> Rainer - In regards to the size of the .shp, it is due to the .dbf file.
> There are over 500,000 cases (for the entire city). Now the kicker is that
> we also want to include more data in the future. But, it seems like that
> we would be even more difficult as all of you imply.
>
> Roger - I am actually using a 64-bit Windows 7 machine with 12 GB RAM,
> where I attempted to use both spdep() and readOGR(). I also tried this on
> a 64-bit Linux server with 32 GB RAM, but only trying to use spdep().As I
> explained to Rainer, there are 500,000 cases and we do want to make some
> inferences on the results that would incorporate even more data...But we
> will see if that is possible.

But what is the support of the observations? Is it real estate at the 
building scale? Are they polygons or points? Does DBF support tables this 
long? Your workflow needs revisiting, I think? Please make your needs 
clearer, what is the input, and what inferences do you want to draw? Is 
the spatial process of interest? How heterogeneous are the data? With data 
of this size, standard analysis techniques will probably need to be 
modified, as simply doing lm() on 500K observations and some hundreds of 
variables will be very demanding even on a machine with plenty of memory. 
If you are thinking of spatial regression, you need to take account of 
possibly many copies of the data in memory with either ML or GM fitting.

Roger


>
> I am going reduce the number of attributes in the table, but I was hoping
> that the number of observations is not the issue because it seems like R
> was only importing half of the observations.
>
> Best,
>
> Carlos
>
>
> On 4/4/12 6:48 AM, "Roger Bivand" <Roger.Bivand at nhh.no> wrote:
>
>> On Wed, 4 Apr 2012, Rainer M Krug wrote:
>>
>>> -----BEGIN PGP SIGNED MESSAGE-----
>>> Hash: SHA1
>>>
>>> On 03/04/12 20:44, Carlos Valenzuela wrote:
>>>> Hello all, I was hoping someone may be able to help me with this
>>>> problem. I am trying to read a shapefile into R that is larger than
>>>> 2GB. I?ve tried
>>>
>>> In my opinion, a 2GB shape file is insane....
>>
>> Yes, it doesn't seem well-considered. Is this LiDAR data? Are you
>> intending to do statistics on the complete data set? What would you infer
>> from the results?
>>
>> You have not included the output of sessionInfo() - I suspect that you
>> are
>> using a 32-bit system, which would fail in any case.
>>
>> Roger
>>
>>>
>>> Is the attribute table (.dbf) file as big or is it the shp? If it is
>>> the
>>> .dbf, you have to look if you need all attributes. If it is the .shp,
>>> you could possibly split the shaope file in more then one actual layer?
>>> Also, import into a SpatiaLite or even PostGIS database might help you
>>> -
>>> then you can easier import a subset of features.
>>>
>>> Cheers,
>>>
>>> Rainer
>>>
>>>
>>>> using readShapePoly() in spdep as well as the readOGR() in rgdal with
>>>> no luck.,
>>>>
>>>> Using the readShapePoly(), I get:, ?failed on DBF filefseek? on  a
>>>> series of lines (over
>>>> 284,000),
>>>>
>>>> When using rgdal, I get this:
>>>>
>>>> Warning message:, In readOGR(".", "nameoffiles") :, Deleted feature
>>>> IDs: 284284, 284285,
>>>> 284286, 284287, 284288, 284289, 284290, 284291, 284292, 284293,
>>>> 284294, 284295, 284296, 284297,
>>>> 284298, 284299, 284300, 284301, 284302, 284303, 284304, 284305,
>>>> 284306, 284307, 284308, 284309,
>>>> 284310, 284311, 284312, 284313, 284314, 284315, 284316, 284317,
>>>> 284318, 284319, 284320, 284321,
>>>> 284322, 284323, 284324, 284325, 284326, 284327, 284328, 284329,
>>>> 284330, 284331, 284332, 284333,
>>>> 284334, 284335, 284336, 284337, 284338, 284339, 284340, 284341,
>>>> 284342, 284343, 284344, 284345,
>>>> 284346, 284347, 284348, 284349, 284350, 284351, 284352, 284353,
>>>> 284354, 284355, 284356, 284357,
>>>> 284358, 284359, 284360, 284361, 284362, 284363, 284364, 284365,
>>>> 284366, 284367, 284368, 284369,
>>>> 284370, 284371, 284372, 284373, 284374, 284375, 284376, 284377,
>>>> 284378, 284379, 284380, 284381,
>>>> 284382, 284383, 284384, 284385, 284386, 284387, 284388, 284389,
>>>> 284390, 284391, 284392, 284393,
>>>> 284394, 284395, 284396, 284397, 284398, 284399, 284400, 284401,
>>>> 284402, 284403, 284404, 284405,
>>>> 284 [... truncated],
>>>>
>>>> In other words, I only get half of the data imported into R and need
>>>> to get all of it in.
>>>>
>>>> Thank you,
>>>>
>>>> Carlos
>>>>
>>>> [[alternative HTML version deleted]]
>>>>
>>>>
>>>>
>>>>
>>>> _______________________________________________ R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>> - --
>>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
>>> Biology, UCT), Dipl. Phys.
>>> (Germany)
>>>
>>> Centre of Excellence for Invasion Biology
>>> Stellenbosch University
>>> South Africa
>>>
>>> Tel :       +33 - (0)9 53 10 27 44
>>> Cell:       +33 - (0)6 85 62 59 98
>>> Fax :       +33 - (0)9 58 10 27 44
>>>
>>> Fax (D):    +49 - (0)3 21 21 25 22 44
>>>
>>> email:      Rainer at krugs.de
>>>
>>> Skype:      RMkrug
>>> -----BEGIN PGP SIGNATURE-----
>>> Version: GnuPG v1.4.11 (GNU/Linux)
>>> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>>>
>>> iEYEARECAAYFAk98CbsACgkQoYgNqgF2egq1jQCggSM/x65ppcpy8oT3FMptgCpP
>>> dgkAn3Ls1yTRnyk5zxouGA216vU4iKKX
>>> =eY6g
>>> -----END PGP SIGNATURE-----
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, NHH Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From eric.momsen at ndsu.edu  Wed Apr  4 15:34:48 2012
From: eric.momsen at ndsu.edu (Eric Momsen)
Date: Wed, 4 Apr 2012 08:34:48 -0500
Subject: [R-sig-Geo] Image Classification - Wish List?
In-Reply-To: <CAO7hk-+C0VWae2DOR8jBCN-KOW=MqAG2j+utrR1D6+HfK+vBxw@mail.gmail.com>
References: <mailman.6942.1333516299.4502.r-sig-geo@r-project.org>
	<CAO7hk-KUatLKDOWxhavVok7sQwfTRBQUfao0sTOZuKWOfyh2DA@mail.gmail.com>
	<4F7C3E2A.9080103@gmail.com>
	<CAO7hk-+C0VWae2DOR8jBCN-KOW=MqAG2j+utrR1D6+HfK+vBxw@mail.gmail.com>
Message-ID: <CAO7hk-Jib6sKUJJvnKkdwSLJbR4e3PHUTDYypXT57vNzMQEK4Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120404/9364dfc5/attachment.pl>

From godina at dal.ca  Wed Apr  4 15:36:57 2012
From: godina at dal.ca (Aurelie C.Godin)
Date: Wed, 4 Apr 2012 06:36:57 -0700 (PDT)
Subject: [R-sig-Geo] Transform decimal degrees units in km - ReadOGR &
 owin{spatstat}
In-Reply-To: <4F7BE2EA.5060906@tum.de>
References: <1333478285325-7434090.post@n2.nabble.com>
	<4F7BE2EA.5060906@tum.de>
Message-ID: <1333546617532-7436500.post@n2.nabble.com>

Thanks for the hint Tom,

I did came across this post previously: 
http://r-sig-geo.2731867.n2.nabble.com/readOGR-default-unit-td7337370.html
http://r-sig-geo.2731867.n2.nabble.com/readOGR-default-unit-td7337370.html 

This is what I've done so far, but I don't understand why/if I need to do
so. Doesn't my div0A SpatialPolygonsDataFrame already has my CRS argument
defined? Why do I need to spTransform then?

proj4string(div0A) <- CRS("+proj=longlat +ellps=WGS84 +datum=WGS84
+no_defs")
xxlcc <- spTransform(div0A, CRS("+init=epsg:4326"))
res1 <- lapply(slot(xxlcc, "polygons"), function(x)
  sapply(slot(x, "Polygons"), slot, "area"))

> summary(unlist(res1))
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  89.72   89.72   89.72   89.72   89.72   89.72 

newW<-as(xxlcc, "owin")
> summary(newW)
Window: polygonal boundary
single connected closed polygon with 29 vertices
enclosing rectangle: [-80, -57.6343]x[66.25, 78.16666]units
Window area =  89.7204 square units 

Correct? How can I specify/know my unit of length in km?
Moreover, this window is ~Baffin Bay, west of Greenland and I am wondering
if I should be using a different datum? E.g. EPSG Projection 4747 - GR96?
Although, I will have to create ppp object, for which the coordinates have
been taken with GPS satellite navigation system.

I would appreciate if someone can walk me through this or suggest an online
example or further readings. I read chapter 4: Spatial Data Import and
Export in Applied Spatial Data Analysis with R (2008), but I'm obviously
very new to all of this.

Thank you very much in advance,
Aurelie


-----
Aurelie Cosandey-Godin
Ph.D. Student, Department of Biology, Dalhousie University
Industrial Graduate Fellow, WWF-Canada
Email: godina at dal.ca | Web: wormlab.biology.dal.ca

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Transform-decimal-degrees-units-in-km-ReadOGR-owin-spatstat-tp7434090p7436500.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From horning at amnh.org  Wed Apr  4 16:49:29 2012
From: horning at amnh.org (Ned Horning)
Date: Wed, 04 Apr 2012 10:49:29 -0400
Subject: [R-sig-Geo] Image Classification - Wish List?
In-Reply-To: <CAO7hk-KUatLKDOWxhavVok7sQwfTRBQUfao0sTOZuKWOfyh2DA@mail.gmail.com>
References: <mailman.6942.1333516299.4502.r-sig-geo@r-project.org>
	<CAO7hk-KUatLKDOWxhavVok7sQwfTRBQUfao0sTOZuKWOfyh2DA@mail.gmail.com>
Message-ID: <4F7C5F79.3000302@amnh.org>

Eric,

I strongly recommend "image segmentation algorithms and tools" even if 
it's not necessarily a classification algorithm. Image segmentation and 
tools to derive features from the segments are, for the most part, 
lacking in open source software. There are some segmentation tools out 
there (Spring, OTB/Monteverdi) but they have limitations that make them 
less than ideal. Access to more classification algorithms is less of an 
issue especially with the wealth of options available in R, a reasonable 
selection available in GRASS, and the minimal gain in classification 
performance realized when using "new and improved" classification 
algorithms.

I don't have much to offer on the programming side but am happy to help 
with development ideas and testing/feedback for segmentation or image 
classification algorithms.

Ned

On 04/04/2012 08:16 AM, Eric Momsen wrote:
> Hello all,
>
> I'm looking for some feedback and ideas regarding the need to improve
> image classification abilities in GRASS GIS.  My understanding is that
> since the required classification techniques aren't available in
> GRASS, the researchers doing that work are found elsewhere.  Hopefully
> this is a good place to find those experts?
>
> For those that aren't already aware of it, Google Summer of Code
> provides support for students to spend the summer programming for Open
> Source software projects.  The GRASS GIS idea list included the
> following items that caught my eye:
>
> 4. Implement image segmentation algorithms and tools
> 5. Implement region-based classification
> 6. Implement hierarchical classification tools (e.g. being able to
> create a large class "forest", with subclasses of different types of
> forests)
>
> The methods currently implemented in GRASS are at:
> http://grass.osgeo.org/wiki/Image_classification
>
> > From discussions on the grass-dev mail list, I understand that
> some/many of the new algorithms to meet these needs are implemented in
> R and other software.
>
> I'm wondering:
>
> What tools/workflow are used for this type of work?
> Are the current methods OK, or would some integration in GRASS be better?
> Are any algorithms not available in other software that couldshould be
> implemented in GRASS?
> Are any experts in image classification willing to mentor or provide
> informal advice about the subject matter this summer?  (There is one
> volunteer to mentor from the software side, it would be nice to have
> someone to answer questions about the classification techniques.)
>
> Thanks for any and all input!
> Eric
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From afischbach at usgs.gov  Wed Apr  4 17:10:09 2012
From: afischbach at usgs.gov (Anthony Fischbach)
Date: Wed, 4 Apr 2012 08:10:09 -0700 (PDT)
Subject: [R-sig-Geo] error calling gstat::idw.locations
Message-ID: <1333552209682-7436818.post@n2.nabble.com>

I receive the following error after issuing the function call below with the
following objects.
Please advise.

#### Objects ##
## NARR a SpatialPointsDataFrame containing values to be interpolated
          coordinates    value
1    (-170.312, 70.5) 1.141060
2    (-170.125, 70.5) 1.128586
3 (-170.312, 70.6875) 1.399495
4 (-170.125, 70.6875) 1.372585

## loc a SpatialPointsDataFrame with a point onto which I wish to
interpolate the NARR values
      coordinates value
1 (-170.27, 70.6)    NA

#### Function Call ##
loc.idw<-idw.locations(formula=value~1, locations=NARR,  newdata=loc, idp =
1.0, debug.level = 1)

#### Error text ##
Error: could not find function "idw.locations"

#### sessionInfo() ##
R version 2.15.0 (2012-03-30)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] gstat_1.0-10    spacetime_0.6-2 xts_0.8-6       zoo_1.7-7      
sp_0.9-98       RCurl_1.91-1.1  bitops_1.0-4.1 

loaded via a namespace (and not attached):
[1] grid_2.15.0    lattice_0.20-6 tools_2.15.0  

-----
Tony Fischbach, Wildlife Biologist
Walrus Research Program
Alaska Science Center
U.S. Geological Survey
4210 University Drive
Anchorage, AK 99508-4650

AFischbach at usgs.gov
http://alaska.usgs.gov/science/biology/walrus
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/error-calling-gstat-idw-locations-tp7436818p7436818.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From edzer.pebesma at uni-muenster.de  Wed Apr  4 18:26:21 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 04 Apr 2012 18:26:21 +0200
Subject: [R-sig-Geo] error calling gstat::idw.locations
In-Reply-To: <1333552209682-7436818.post@n2.nabble.com>
References: <1333552209682-7436818.post@n2.nabble.com>
Message-ID: <4F7C762D.4090202@uni-muenster.de>

That is probably because idw.locations is not exported in the package
NAMESPACE. I would try instead:

loc.idw <- idw(value~1, NARR, loc, idp = 1.0, debug.level = 1)

On 04/04/2012 05:10 PM, Anthony Fischbach wrote:
> I receive the following error after issuing the function call below with the
> following objects.
> Please advise.
> 
> #### Objects ##
> ## NARR a SpatialPointsDataFrame containing values to be interpolated
>           coordinates    value
> 1    (-170.312, 70.5) 1.141060
> 2    (-170.125, 70.5) 1.128586
> 3 (-170.312, 70.6875) 1.399495
> 4 (-170.125, 70.6875) 1.372585
> 
> ## loc a SpatialPointsDataFrame with a point onto which I wish to
> interpolate the NARR values
>       coordinates value
> 1 (-170.27, 70.6)    NA
> 
> #### Function Call ##
> loc.idw<-idw.locations(formula=value~1, locations=NARR,  newdata=loc, idp =
> 1.0, debug.level = 1)
> 
> #### Error text ##
> Error: could not find function "idw.locations"
> 
> #### sessionInfo() ##
> R version 2.15.0 (2012-03-30)
> Platform: x86_64-pc-mingw32/x64 (64-bit)
> 
> locale:
> [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
> States.1252   
> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
> [5] LC_TIME=English_United States.1252    
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base     
> 
> other attached packages:
> [1] gstat_1.0-10    spacetime_0.6-2 xts_0.8-6       zoo_1.7-7      
> sp_0.9-98       RCurl_1.91-1.1  bitops_1.0-4.1 
> 
> loaded via a namespace (and not attached):
> [1] grid_2.15.0    lattice_0.20-6 tools_2.15.0  
> 
> -----
> Tony Fischbach, Wildlife Biologist
> Walrus Research Program
> Alaska Science Center
> U.S. Geological Survey
> 4210 University Drive
> Anchorage, AK 99508-4650
> 
> AFischbach at usgs.gov
> http://alaska.usgs.gov/science/biology/walrus
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/error-calling-gstat-idw-locations-tp7436818p7436818.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From agus.camacho at gmail.com  Wed Apr  4 18:51:29 2012
From: agus.camacho at gmail.com (Agus Camacho)
Date: Wed, 4 Apr 2012 13:51:29 -0300
Subject: [R-sig-Geo] problem when cropping soil layers
Message-ID: <CALsJ7pRLAj=XCUYVLxkHFDG_zK01efC8cNq3JhXTeOduuaiF6Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120404/6c9519e4/attachment.pl>

From afischbach at usgs.gov  Wed Apr  4 19:23:29 2012
From: afischbach at usgs.gov (Anthony Fischbach)
Date: Wed, 4 Apr 2012 10:23:29 -0700 (PDT)
Subject: [R-sig-Geo] error calling gstat::idw.locations
In-Reply-To: <4F7C762D.4090202@uni-muenster.de>
References: <1333552209682-7436818.post@n2.nabble.com>
	<4F7C762D.4090202@uni-muenster.de>
Message-ID: <1333560209681-7437342.post@n2.nabble.com>

Thank you! That solved it.

> loc.idw <- idw(value~1, NARR, loc, idp = 1.0, debug.level = 1) 
[inverse distance weighted interpolation]
> 
> loc.idw
      coordinates var1.pred var1.var
1 (-170.27, 70.6)  1.268308       NA


-----
Tony Fischbach, Wildlife Biologist
Walrus Research Program
Alaska Science Center
U.S. Geological Survey
4210 University Drive
Anchorage, AK 99508-4650

AFischbach at usgs.gov
http://alaska.usgs.gov/science/biology/walrus
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/error-calling-gstat-idw-locations-tp7436818p7437342.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From sarah.goslee at gmail.com  Wed Apr  4 19:35:14 2012
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Wed, 4 Apr 2012 13:35:14 -0400
Subject: [R-sig-Geo] problem when cropping soil layers
In-Reply-To: <CALsJ7pRLAj=XCUYVLxkHFDG_zK01efC8cNq3JhXTeOduuaiF6Q@mail.gmail.com>
References: <CALsJ7pRLAj=XCUYVLxkHFDG_zK01efC8cNq3JhXTeOduuaiF6Q@mail.gmail.com>
Message-ID: <CAM_vjum9VCWwYgFrByC3s_yXOLLXhaTggYUnHpQqWyAJtKjpUw@mail.gmail.com>

I think that should be:

On Wed, Apr 4, 2012 at 12:51 PM, Agus Camacho <agus.camacho at gmail.com> wrote:
> Dear list,
>
> For first time after using it several times, I had warnings using the crop
> function with a raster stack from soil layers in format geotiiff derived
> from the HWSD.
> http://spatial-analyst.net/wiki/index.php?title=Global_datasets#Soil.2Fgeology_maps
>
> specifically, when:
>
> soil=crop(soil, extent(-180,180,-56,83.5))

soil <- crop(soil, extent(c(-180,180,-56,83.5)))

See ?extent
>> warnings()Warning messages:
> 1: In if (!datatype %in% c("LOG1S", "INT1S", "INT2S", "INT4S", ?... :
> ?the condition has length > 1 and only the first element will be used
> 2: In if (datatype == "LOGIC") { ... :
> ?the condition has length > 1 and only the first element will be used
> 3: In if (datatype == "BYTE") { ... :
> ?the condition has length > 1 and only the first element will be used
> 4: In if (datatype == "SMALL") { ... :
> ?the condition has length > 1 and only the first element will be used
> 5: In if (datatype == "INTEG") { ... :
>
>
> ?a so on for a number of ?datatypes.
>
> I am new to soil modeling and cant figure out any reason for this,
> specially because in other instances it did not appear such a messages.
> Anybody could tell me what happened and if the layers are still usable
> after these warnings?
>
> Thanks a lot! Think modelling would not be possible for a lot of people
> without this list..
>
>
> There it goes my session info.
>
>> sessionInfo()R version 2.14.1 (2011-12-22)
> Platform: x86_64-pc-mingw32/x64 (64-bit)
>
> locale:
> [1] LC_COLLATE=English_Australia.1252 ?LC_CTYPE=English_Australia.1252
> ? LC_MONETARY=English_Australia.1252
> [4] LC_NUMERIC=C ? ? ? ? ? ? ? ? ? ? ? LC_TIME=English_Australia.1252
>
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>
> other attached packages:
> ?[1] maptools_0.8-14 ? ?foreign_0.8-48 ? ? geosphere_1.2-26
> rgdal_0.7-8 ? ? ? ?outliers_0.14 ? ? ?XML_3.9-4.1
> ?[7] PBSmapping_2.62.34 dismo_0.7-14 ? ? ? raster_1.9-58
> sp_0.9-93 ? ? ? ? ?ggplot2_0.9.0 ? ? ?lattice_0.20-0
> [13] plyr_1.7.1
>
> loaded via a namespace (and not attached):
> ?[1] colorspace_1.1-1 ? dichromat_1.2-4 ? ?digest_0.5.2
> grid_2.14.1 ? ? ? ?MASS_7.3-16 ? ? ? ?memoise_0.1
> ?[7] munsell_0.3 ? ? ? ?proto_0.3-9.2 ? ? ?RColorBrewer_1.0-5
> reshape2_1.2.1 ? ? scales_0.2.0 ? ? ? stringr_0.6
> [13] tools_2.14.1
>
>
-- 
Sarah Goslee
http://www.functionaldiversity.org


From r.hijmans at gmail.com  Wed Apr  4 20:27:04 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 4 Apr 2012 11:27:04 -0700
Subject: [R-sig-Geo] problem when cropping soil layers
In-Reply-To: <CALsJ7pRLAj=XCUYVLxkHFDG_zK01efC8cNq3JhXTeOduuaiF6Q@mail.gmail.com>
References: <CALsJ7pRLAj=XCUYVLxkHFDG_zK01efC8cNq3JhXTeOduuaiF6Q@mail.gmail.com>
Message-ID: <CANtt_hxTGspzis3gpCeAfrem14gNFiLVoDn49XDWb8PZ==m9bQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120404/6d36e773/attachment.pl>

From agus.camacho at gmail.com  Wed Apr  4 20:57:27 2012
From: agus.camacho at gmail.com (Agus Camacho)
Date: Wed, 4 Apr 2012 15:57:27 -0300
Subject: [R-sig-Geo] problem when cropping soil layers
In-Reply-To: <CANtt_hxTGspzis3gpCeAfrem14gNFiLVoDn49XDWb8PZ==m9bQ@mail.gmail.com>
References: <CALsJ7pRLAj=XCUYVLxkHFDG_zK01efC8cNq3JhXTeOduuaiF6Q@mail.gmail.com>
	<CANtt_hxTGspzis3gpCeAfrem14gNFiLVoDn49XDWb8PZ==m9bQ@mail.gmail.com>
Message-ID: <CALsJ7pSVKm=vkqD4gJFiX34P8Bft00zs6xnCORdVcBohgyr9bw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120404/1e0df47a/attachment.pl>

From lapuma at wisc.edu  Wed Apr  4 22:17:33 2012
From: lapuma at wisc.edu (La Puma, Inga)
Date: Wed, 4 Apr 2012 15:17:33 -0500
Subject: [R-sig-Geo] Simple 2 layer feature space
Message-ID: <CANtZaM3b8uGAigFRhAUxL2Ja7kDxz6jb-NYZcvh+D5GYye1ksg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120404/4b2486fb/attachment.pl>

From fernandodelbon at yahoo.com.br  Wed Apr  4 23:31:22 2012
From: fernandodelbon at yahoo.com.br (fernando del bon)
Date: Wed, 4 Apr 2012 14:31:22 -0700 (PDT)
Subject: [R-sig-Geo] (no subject)
Message-ID: <1333575082.72429.YahooMailMobile@web113303.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120404/e47c5793/attachment.pl>

From fabriciovasselai at gmail.com  Thu Apr  5 04:21:12 2012
From: fabriciovasselai at gmail.com (Fabricio Vasselai)
Date: Wed, 4 Apr 2012 23:21:12 -0300
Subject: [R-sig-Geo] Error in Moran.test: In sqrt(VI) : NaNs
Message-ID: <CAEkXS9L+GKLh-8NZLxLiOSSycjJUiE2zgdNyK9TQZ5R0xBs2gA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120404/8e8b37e0/attachment.pl>

From abu7ala1 at aol.com  Thu Apr  5 10:02:19 2012
From: abu7ala1 at aol.com (abu7ala1 at aol.com)
Date: Thu, 5 Apr 2012 17:32:19 +0930
Subject: [R-sig-Geo] State database
Message-ID: <CA9DE9F0-24E4-4CCC-8F1A-669E251A1141@aol.com>

Dear list
Could please any one help in this point:
I used " state" database to convert boundaries of states into polygons using map function
map("state")
The only problem is I can't find Hawaii and Alaska because "state" use the mainland USA 
Any suggestions how to combine Alaska and Hawaii states into 
map("state")
Regards

Sent from my iPhone

From Roger.Bivand at nhh.no  Thu Apr  5 12:50:11 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 5 Apr 2012 12:50:11 +0200 (CEST)
Subject: [R-sig-Geo] Error in Moran.test: In sqrt(VI) : NaNs
In-Reply-To: <CAEkXS9L+GKLh-8NZLxLiOSSycjJUiE2zgdNyK9TQZ5R0xBs2gA@mail.gmail.com>
References: <CAEkXS9L+GKLh-8NZLxLiOSSycjJUiE2zgdNyK9TQZ5R0xBs2gA@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1204051215490.1225@reclus.nhh.no>

On Thu, 5 Apr 2012, Fabricio Vasselai wrote:

> Dear list,
>
> Maybe someone can shed some light on this error. I have a dataset with
> thousands of candidates with electoral support per city. I wrote a R script
> to calculate both Moran.test and Moran.MC (99999 iterations), and also
> Geary C test.
> The script run very fine, but at the end I have noticed that a few of my
> cases (candidates) didn't have a result to Moran.test's standard deviation
> and p-value. All estimates and values were normal for Moran.MC and Geary's
> C.
>
> The problem seems to be the following error:
>
> Moran's I test under randomisation

Under randomisation, the variance is formed in the usual way, but adjusted 
downward by a term multiplied by the kurtosis. It looks as though extreme 
values of kurtosis can generate this result (negative variance). If you 
try randomisation=FALSE, you assume normality, with randomisation=TRUE, 
the variance formula tries to adjust for departures from normality, but 
obviously here does not succeed. The kurtosis used is equivalent to:

library(e1071)
kurtosis(votoscandidato, type=1)+3

and it appears to tip when the kurtosis is greater than N. Next, the 
squared expectation is subtracted, which could push a marginally positive 
intermediate result negative. The conclusion is that your data have a 
distribution that is so non-normal (skew and kurtosis) that this 
analytical correction is being defeated.

A similar correction is made in geary.test(), but the term multipled by 
the kurtosis is itself smaller, so the test could also fail, but with even 
more severe kurtosis. The MC test is not failing because no analytical 
correction is used, not because of the number of iterations. However, I 
think that the test results in the presence of zero-inflation will be 
misleading, and that you may actually need to use the parametric bootstrap 
approach from DCluster, its accompanying article, and with reference to 
Waller & Gotway (2004).

Hope this clarifies,

Roger



>
> data:  votoscandidato
> weights: UF.listw.W
>
> Moran I statistic standard deviate = NaN, p-value = NA
> alternative hypothesis: two.sided
> sample estimates:
> Moran I statistic       Expectation          Variance
>     5.723951e-03     -2.409639e-03     -8.785771e-09
> Mensagens de aviso perdidas:1: In sqrt(VI) : NaNs produzidos2: In
> moran.test(x = votoscandidato, listw = UF.listw.W, zero.policy = TRUE,
> :
>  Out-of-range p-value: reconsider test arguments
>
>
>
>
>
> I checked the source data and those cases with such an error seem to
> be cases with a lot of zero votes in many of the cities. But the same
> problem does not affect Geary's C or Moran.MC (probably because of the
> high number of iterations).
>
>
>
> Maybe this is the problem? Any help or tips will very much appreciated.
>
>
>
> Best regards,
>
>
>
> FABRICIO
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From rrasterr at gmail.com  Thu Apr  5 18:44:42 2012
From: rrasterr at gmail.com (Ana)
Date: Thu, 5 Apr 2012 09:44:42 -0700 (PDT)
Subject: [R-sig-Geo] get raster field names
Message-ID: <1333644282668-7440601.post@n2.nabble.com>

Is there a way when importing a raster to R to get the field names and choose
if we have many, which should be used ?

I am using the package Raster to load the rasters to R

Many Thanks


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/get-raster-field-names-tp7440601p7440601.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From mike.sukmanowsky at gmail.com  Thu Apr  5 22:33:47 2012
From: mike.sukmanowsky at gmail.com (Mike Sukmanowsky)
Date: Thu, 5 Apr 2012 16:33:47 -0400
Subject: [R-sig-Geo] Graphing Canadian Cities via Forward Station Area
	(FSAs) Spatial Information
Message-ID: <CAOH6cu4U0OQBrfP-XsqMT1WRBH1Dp8uVBVZ8Nc7JZEkPNSZ4GA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120405/adfc0366/attachment.pl>

From fairyland118 at gmail.com  Fri Apr  6 03:49:32 2012
From: fairyland118 at gmail.com (Zz)
Date: Thu, 5 Apr 2012 21:49:32 -0400
Subject: [R-sig-Geo] (no subject)
Message-ID: <CANZYGDdQoPG4vRnyjbor5zJ404nGy_mVyET4abcqJr-CQPHK8A@mail.gmail.com>

Dear R users,

I would like to create a neighborhood list for all MSA or states in
USA.   Where to download shp file for United States?



Thanks


From fabriciovasselai at gmail.com  Fri Apr  6 04:09:37 2012
From: fabriciovasselai at gmail.com (Fabricio Vasselai)
Date: Thu, 5 Apr 2012 23:09:37 -0300
Subject: [R-sig-Geo] Error in Moran.test: In sqrt(VI) : NaNs
In-Reply-To: <alpine.LRH.2.02.1204051215490.1225@reclus.nhh.no>
References: <CAEkXS9L+GKLh-8NZLxLiOSSycjJUiE2zgdNyK9TQZ5R0xBs2gA@mail.gmail.com>
	<alpine.LRH.2.02.1204051215490.1225@reclus.nhh.no>
Message-ID: <CAEkXS9Ltx2+ojzJgAnhTfQKs0Mh==4tzT0UJCnYWFEbFCgqkNA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120405/488dc741/attachment.pl>

From fairyland118 at gmail.com  Fri Apr  6 05:47:43 2012
From: fairyland118 at gmail.com (Zz)
Date: Thu, 5 Apr 2012 23:47:43 -0400
Subject: [R-sig-Geo] (no subject)
In-Reply-To: <CANZYGDdQoPG4vRnyjbor5zJ404nGy_mVyET4abcqJr-CQPHK8A@mail.gmail.com>
References: <CANZYGDdQoPG4vRnyjbor5zJ404nGy_mVyET4abcqJr-CQPHK8A@mail.gmail.com>
Message-ID: <CANZYGDfdJh7W90C11yxfTG6QDWhfbX7SuSzO4Ssgwi8+QXrABg@mail.gmail.com>

I have found all shapefiles.

O(?_?)O~

On 4/5/12, Zz <fairyland118 at gmail.com> wrote:
> Dear R users,
>
> I would like to create a neighborhood list for all MSA or states in
> USA.   Where to download shp file for United States?
>
>
>
> Thanks
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From lars.dalby at gmail.com  Fri Apr  6 11:25:11 2012
From: lars.dalby at gmail.com (Lars Dalby)
Date: Fri, 6 Apr 2012 02:25:11 -0700 (PDT)
Subject: [R-sig-Geo] Subset polygon(s) from a country from wrld_simpl
Message-ID: <1333704311074-7442490.post@n2.nabble.com>

Dear list

I am trying to make a subset of wrld_simpl to use as mask for a raster
layer.
I have a list of countries and I can do the subset quite easily. However I
would like to have one (or several) of the polygons from Russia in the list
also - Kaliningrad on the coast of the Baltic. This is where I run into
trouble.
How do I cut these out and subsequently subset wrld_simpl accordingly?

require('sp');require('maptools')

cntr <- c('Denmark', 'Germany', 'Norway', 'Ireland', 'United Kingdom',
'France', 'Italy', 'Sweden', 'Finland', 'Spain', 'Portugal', 'Latvia',
'Estonia', 'Slovenia', 'Belgium', 'Netherlands', 'Austria', 'Poland',
'Switzerland', 'Morocco', 'Algeria', 'Tunisia', 'Slovakia', 'Lithuania',
'Croatia', 'Czech Republic')

data(wrld_simpl)
NW <- wrld_simpl[which(wrld_simpl at data$NAME %in% cntr),] 

#I tried to use the overlay function, but that didn't quite do the trick:

rus <- wrld_simpl[which(wrld_simpl at data$NAME == 'Russia'),]

x <- 21.335449; y <- 54.788017 
P <- data.frame('x' = x, 'y' = y)
coordinates(P) <- ~x+y
ov <- overlay(P, rus)
ov # 1

# Now if I move the point further east and repeat:

x <- 90.335449; y <- 54.788017 
P <- data.frame('x' = x, 'y' = y)
coordinates(P) <- ~x+y
ov <- overlay(P, rus)
ov # still 1- so I guess this refers to the single object in the polygons
slot of rus, which is not quite what I'm after.

#sessionInfo()
R version 2.14.1 (2011-12-22)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] dismo_0.7-17    maptools_0.8-14 lattice_0.20-6  foreign_0.8-49 
[5] raster_1.9-70   sp_0.9-97       ncdf_1.6.6     

loaded via a namespace (and not attached):
[1] grid_2.14.1  tools_2.14.1


Any suggestions on how to solve this would be highly appreciated.

Best regards and Happy Easter!

Lars

Lars Dalby
Msc. PhD student
Ecoinformatics & Biodiversity
Department of Bioscience, Aarhus University
Denmark

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Subset-polygon-s-from-a-country-from-wrld-simpl-tp7442490p7442490.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From calamita_giuseppe at yahoo.it  Fri Apr  6 13:18:41 2012
From: calamita_giuseppe at yahoo.it (Giuseppe Calamita)
Date: Fri, 6 Apr 2012 04:18:41 -0700 (PDT)
Subject: [R-sig-Geo] rsaga error
Message-ID: <1333711121316-7442753.post@n2.nabble.com>

Dear list,

I'm trying to use R+SAGA using the rsaga package and following the T.Hengl's
book.
When I try to load the library and set the environment I get error messages.

> library(RSAGA); rsaga.env()

Attaching package: ?shapefiles?

The following object(s) are masked from ?package:foreign?:

    read.dbf, write.dbf

Loading required package: plyr
12:02:56: Error: /usr/lib/saga/--version.so: cannot open shared object file:
No such file or directory

error: Library could not be loaded [--version]

error: module library not found [--version]

error: module library

error: Library does not contain executable modules [librecreations_games.so]
$workspace
[1] "."

$cmd
[1] "saga_cmd"

$path
[1] "/usr/bin"

$modules
[1] "/usr/lib/saga"

$version
[1] "2.0.7"

Following are info of the system I'm working with:
> sessionInfo()
R version 2.14.2 (2012-02-29)
Platform: i486-pc-linux-gnu (32-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
LC_TIME=en_US.UTF-8       
 [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8   
LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C              
[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8
LC_IDENTIFICATION=C       

attached base packages:
[1] grid      stats     graphics  grDevices utils     datasets  methods  
base     

other attached packages:
 [1] RSAGA_0.93-1     plyr_1.7.1       shapefiles_0.6   vcd_1.2-13      
colorspace_1.1-1
 [6] MASS_7.3-16      spatstat_1.25-3  deldir_0.0-16    mgcv_1.7-13     
gstat_1.0-10    
[11] spacetime_0.5-7  xts_0.8-2        zoo_1.7-7        rgdal_0.7-8     
maptools_0.8-14 
[16] lattice_0.20-6   sp_0.9-95        foreign_0.8-49  

loaded via a namespace (and not attached):
[1] Matrix_1.0-5 nlme_3.1-103 tools_2.14.2

I remember some older version of R and SAGA had problems in communication,
but I cannot remember which ones were the version working

Any suggestion, please.
Thank you and happy Easter

Giuseppe Calamita

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/rsaga-error-tp7442753p7442753.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Roger.Bivand at nhh.no  Fri Apr  6 13:54:27 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 6 Apr 2012 13:54:27 +0200 (CEST)
Subject: [R-sig-Geo] Subset polygon(s) from a country from wrld_simpl
In-Reply-To: <1333704311074-7442490.post@n2.nabble.com>
References: <1333704311074-7442490.post@n2.nabble.com>
Message-ID: <alpine.LRH.2.02.1204061327180.5012@reclus.nhh.no>

On Fri, 6 Apr 2012, Lars Dalby wrote:

> Dear list
>
> I am trying to make a subset of wrld_simpl to use as mask for a raster
> layer.
> I have a list of countries and I can do the subset quite easily. However I
> would like to have one (or several) of the polygons from Russia in the list
> also - Kaliningrad on the coast of the Baltic. This is where I run into
> trouble.
> How do I cut these out and subsequently subset wrld_simpl accordingly?
>
> require('sp');require('maptools')
>
> cntr <- c('Denmark', 'Germany', 'Norway', 'Ireland', 'United Kingdom',
> 'France', 'Italy', 'Sweden', 'Finland', 'Spain', 'Portugal', 'Latvia',
> 'Estonia', 'Slovenia', 'Belgium', 'Netherlands', 'Austria', 'Poland',
> 'Switzerland', 'Morocco', 'Algeria', 'Tunisia', 'Slovakia', 'Lithuania',
> 'Croatia', 'Czech Republic')
>
> data(wrld_simpl)
> NW <- wrld_simpl[which(wrld_simpl at data$NAME %in% cntr),]
>
> #I tried to use the overlay function, but that didn't quite do the trick:
>
> rus <- wrld_simpl[which(wrld_simpl at data$NAME == 'Russia'),]

length(slot(rus, "polygons"))

shows that each country is a single Polygons object (by the way, 
wrld_simpl at data$NAME should be wrld_simpl$NAME). If you need to get below 
that, you have to dismantle the Polygons object:

>
> x <- 21.335449; y <- 54.788017
> P <- data.frame('x' = x, 'y' = y)
> coordinates(P) <- ~x+y

proj4string(P) <- CRS(proj4string(rus))
over(rus, P)
lrus <- slot(slot(rus, "polygons")[[1]], "Polygons")
for (i in seq(along=lrus)) {
   lrus[[i]] <- Polygons(list(lrus[[i]]), as.character(i))
}
SPrus <- SpatialPolygons(lrus, proj4string=CRS(proj4string(rus)))
pip <- which(over(SPrus, P) == 1)
kaliningrad <- SPrus[pip,]
row.names(kaliningrad) <- "Kaliningrad"
NW1 <- spRbind(NW, kaliningrad)
plot(NW1)

Should Kaliningrad become an ISO country, it would be promoted at some 
stage. As of now, I think that South Sudan is not distinguished in 
maptools, but I'm not sure about rworldmap; it isn't in cshapes which 
covers changes 1946-2008. The data is intended to cover whole countries at 
a fairly coarse vector scale; maybe GADM has the administrative boundaries 
to let you zoom in.

Roger

> ov <- overlay(P, rus)
> ov # 1
>
> # Now if I move the point further east and repeat:
>
> x <- 90.335449; y <- 54.788017
> P <- data.frame('x' = x, 'y' = y)
> coordinates(P) <- ~x+y
> ov <- overlay(P, rus)
> ov # still 1- so I guess this refers to the single object in the polygons
> slot of rus, which is not quite what I'm after.
>
> #sessionInfo()
> R version 2.14.1 (2011-12-22)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>
> locale:
> [1] C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] dismo_0.7-17    maptools_0.8-14 lattice_0.20-6  foreign_0.8-49
> [5] raster_1.9-70   sp_0.9-97       ncdf_1.6.6
>
> loaded via a namespace (and not attached):
> [1] grid_2.14.1  tools_2.14.1
>
>
> Any suggestions on how to solve this would be highly appreciated.
>
> Best regards and Happy Easter!
>
> Lars
>
> Lars Dalby
> Msc. PhD student
> Ecoinformatics & Biodiversity
> Department of Bioscience, Aarhus University
> Denmark
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Subset-polygon-s-from-a-country-from-wrld-simpl-tp7442490p7442490.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From lars.dalby at gmail.com  Fri Apr  6 16:40:28 2012
From: lars.dalby at gmail.com (Lars Dalby)
Date: Fri, 6 Apr 2012 07:40:28 -0700 (PDT)
Subject: [R-sig-Geo] Subset polygon(s) from a country from wrld_simpl
In-Reply-To: <alpine.LRH.2.02.1204061327180.5012@reclus.nhh.no>
References: <1333704311074-7442490.post@n2.nabble.com>
	<alpine.LRH.2.02.1204061327180.5012@reclus.nhh.no>
Message-ID: <1333723228046-7443194.post@n2.nabble.com>

Thanks a lot, Roger!

Worked perfectly.

Best regards,
Lars

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Subset-polygon-s-from-a-country-from-wrld-simpl-tp7442490p7443194.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From alobolistas at gmail.com  Sun Apr  8 16:52:21 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Sun, 8 Apr 2012 16:52:21 +0200
Subject: [R-sig-Geo] rgeos::gArea() to all polygons within sp polygons DF
Message-ID: <CAG4NReJ3UHhokWBQJeq5krtjHOELO3KFZuZ18x5Ee9jWYnd4gQ@mail.gmail.com>

Hi!

How do I  apply gArea()) to all polygons within an spatial pol. DF?
I've tried
areas <- apply(BorneoLCg,gArea)
and
areas <- sapply(BorneoLCg,gArea)

but this is not correct.

I want to compare to
areas <- sapply(BorneoLCg at polygons, function(x) x at area)

Thanks

Agus


From rhurlin at gwdg.de  Sun Apr  8 17:03:34 2012
From: rhurlin at gwdg.de (Rainer Hurling)
Date: Sun, 08 Apr 2012 17:03:34 +0200
Subject: [R-sig-Geo] rsaga error
In-Reply-To: <1333711121316-7442753.post@n2.nabble.com>
References: <1333711121316-7442753.post@n2.nabble.com>
Message-ID: <4F81A8C6.90408@gwdg.de>

On 06.04.2012 13:18 (UTC+1), Giuseppe Calamita wrote:
> Dear list,
>
> I'm trying to use R+SAGA using the rsaga package and following the T.Hengl's
> book.
> When I try to load the library and set the environment I get error messages.
>
>> library(RSAGA); rsaga.env()

please do not use several commands in one line. This makes it difficult 
to decide which output belongs to which command.

> Attaching package: ?shapefiles?
>
> The following object(s) are masked from ?package:foreign?:
>
>      read.dbf, write.dbf
>
> Loading required package: plyr

Loading the library RSAGA and its dependencies seems to work.

> 12:02:56: Error: /usr/lib/saga/--version.so: cannot open shared object file:
> No such file or directory

Hmm, the problem could be, that RSAGA was build _before_ SAGA GIS 2.0.7 
was installed? In this case try to rebuild and reinstall RSAGA under R, 
please.

> error: Library could not be loaded [--version]
>
> error: module library not found [--version]
>
> error: module library
>
> error: Library does not contain executable modules [librecreations_games.so]
> $workspace
> [1] "."
>
> $cmd
> [1] "saga_cmd"
>
> $path
> [1] "/usr/bin"
>
> $modules
> [1] "/usr/lib/saga"
>
> $version
> [1] "2.0.7"
>
> Following are info of the system I'm working with:
>> sessionInfo()
> R version 2.14.2 (2012-02-29)
> Platform: i486-pc-linux-gnu (32-bit)
>
> locale:
>   [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> LC_TIME=en_US.UTF-8
>   [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8
> LC_MESSAGES=en_US.UTF-8
>   [7] LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C
> [10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8
> LC_IDENTIFICATION=C
>
> attached base packages:
> [1] grid      stats     graphics  grDevices utils     datasets  methods
> base
>
> other attached packages:
>   [1] RSAGA_0.93-1     plyr_1.7.1       shapefiles_0.6   vcd_1.2-13
> colorspace_1.1-1
>   [6] MASS_7.3-16      spatstat_1.25-3  deldir_0.0-16    mgcv_1.7-13
> gstat_1.0-10
> [11] spacetime_0.5-7  xts_0.8-2        zoo_1.7-7        rgdal_0.7-8
> maptools_0.8-14
> [16] lattice_0.20-6   sp_0.9-95        foreign_0.8-49
>
> loaded via a namespace (and not attached):
> [1] Matrix_1.0-5 nlme_3.1-103 tools_2.14.2
>
> I remember some older version of R and SAGA had problems in communication,
> but I cannot remember which ones were the version working

You also could try to work with SAGA GIS 2.0.8. If you decide to change 
to the newer version, please also reinstall RSAGA _after_ installing 
SAGA GIS.

Hope this helps,
Rainer


> Any suggestion, please.
> Thank you and happy Easter
>
> Giuseppe Calamita
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/rsaga-error-tp7442753p7442753.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.


From edzer.pebesma at uni-muenster.de  Sun Apr  8 17:26:21 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 08 Apr 2012 17:26:21 +0200
Subject: [R-sig-Geo] rgeos::gArea() to all polygons within sp polygons DF
In-Reply-To: <CAG4NReJ3UHhokWBQJeq5krtjHOELO3KFZuZ18x5Ee9jWYnd4gQ@mail.gmail.com>
References: <CAG4NReJ3UHhokWBQJeq5krtjHOELO3KFZuZ18x5Ee9jWYnd4gQ@mail.gmail.com>
Message-ID: <4F81AE1D.4090905@uni-muenster.de>

Agus, have you tried

gArea(BorneoLCg, byid = TRUE)

?

On 04/08/2012 04:52 PM, Agustin Lobo wrote:
> Hi!
> 
> How do I  apply gArea()) to all polygons within an spatial pol. DF?
> I've tried
> areas <- apply(BorneoLCg,gArea)
> and
> areas <- sapply(BorneoLCg,gArea)
> 
> but this is not correct.
> 
> I want to compare to
> areas <- sapply(BorneoLCg at polygons, function(x) x at area)
> 
> Thanks
> 
> Agus
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From fairyland118 at gmail.com  Sun Apr  8 23:15:40 2012
From: fairyland118 at gmail.com (Zz)
Date: Sun, 8 Apr 2012 17:15:40 -0400
Subject: [R-sig-Geo] =?utf-8?q?Error_in_print=28data=2Eframe=29_=26?=
	=?utf-8?b?44CAemVyby5wb2xpY3k=?=
Message-ID: <CANZYGDdtLBJP=Rh5y2+3hjaeFqaOW-N=1SPoMxBfqj6B3xy=dQ@mail.gmail.com>

Dear spdep users,



I tried to follow below command to create a neighborhood list.   The
data "Matrix.txt"
is enclosed


> mat0 <- read.table("Matrix.txt", header=FALSE, sep="\t", fill=TRUE)
> mat <- as.matrix(mat0)
> dim(mat)
[1] 46 46
> summary(c(mat))
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's
      1       1       1       1       1       1    1918
> mat[is.na(mat)] <- 0
> summary(c(mat))
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
0.00000 0.00000 0.00000 0.09357 0.00000 1.00000
> lw <- mat2listw(mat, style="B")
Warning message:
In nb2listw(res$neighbours, glist = res$weights, style = style,  :
  zero sum general weights
> summary(lw)
Characteristics of weights list object:
Neighbour list object:
Number of regions: 46
Number of nonzero links: 198
Percentage nonzero weights: 9.357278
Average number of links: 4.304348
2 regions with no links:
2 18
Link number distribution:

 0  2  3  4  5  6  7  8
 2  5  5 14  8  9  1  2
5 least connected regions:
7 8 9 36 41 with 2 links
2 most connected regions:
24 38 with 8 links

Weights style: B
Weights constants summary:
Error in print(data.frame(rbind(unlist(spweights.constants(object,
zero.policy = zero.policy))[c(1,  :
  error in evaluating the argument 'x' in selecting a method for function
'print': Error in spweights.constants(object, zero.policy = zero.policy) :
  regions with no neighbours found
> is.symmetric.nb(lw$neighbours)
[1] TRUE



The neighborhood list cannot be used in spatial regression.    The main
error seems to be "Error in
print(data.frame(rbind(unlist(spweights.constants(object, zero.policy =
zero.policy))[c(1,  :
  error in evaluating the argument 'x' in selecting a method for function
'print': Error in spweights.constants(object, zero.policy = zero.policy) :
  regions with no neighbours found"


Is there anyone know what wrong with the data?  Thanks




Happy Easter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120408/7c2fbc14/attachment.html>
-------------- next part --------------
								1	1													1															1								
																																													
				1																						1	1												1						
																1						1	1									1					1	1							
		1																								1							1												
														1											1		1					1							1						1
																			1									1																	
																		1																								1			
1									1																																				
1								1																					1						1		1								
																								1		1							1						1			1			1
												1	1		1					1			1																					1	
											1				1					1											1														
											1										1		1		1											1								1	
					1																		1		1							1													
											1	1											1								1						1				1		1		
			1																			1																1							
																																													
							1																											1							1		1		
						1																						1												1					
											1	1									1										1													1	
													1							1										1						1								1	
1			1													1																					1								
			1								1		1	1	1										1							1					1								
										1																				1						1									1
					1								1	1									1													1									1
		1		1						1																							1						1						
		1			1																											1						1							
						1													1															1						1					
									1																										1		1				1				
																					1			1												1									
												1			1					1														1									1		
			1		1									1									1				1											1							
				1						1																1																1			
																		1										1			1												1		
									1																				1																
													1								1			1	1					1															1
1			1						1						1							1	1						1												1				
			1													1											1					1													
		1			1					1																1																			1
																			1									1																	
															1			1											1								1						1		
							1			1																							1												
															1			1													1			1							1				
											1		1							1	1																								
					1					1														1	1											1			1						

From fairyland118 at gmail.com  Mon Apr  9 00:01:54 2012
From: fairyland118 at gmail.com (Zz)
Date: Sun, 8 Apr 2012 18:01:54 -0400
Subject: [R-sig-Geo] Error in print(data.frame) & zero.policy
In-Reply-To: <CANZYGDdtLBJP=Rh5y2+3hjaeFqaOW-N=1SPoMxBfqj6B3xy=dQ@mail.gmail.com>
References: <CANZYGDdtLBJP=Rh5y2+3hjaeFqaOW-N=1SPoMxBfqj6B3xy=dQ@mail.gmail.com>
Message-ID: <CANZYGDfSAhK1Hef+NB5EW_nFSnpWj5JWFhH2B2eSMXfJMnq8ew@mail.gmail.com>

Dear spdep users,



I tried to follow below command to create a neighborhood list.   The
data "Matrix.txt"
is enclosed


> mat0 <- read.table("Matrix.txt", header=FALSE, sep="\t", fill=TRUE)
> mat <- as.matrix(mat0)
> dim(mat)
[1] 46 46
> summary(c(mat))
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's
      1       1       1       1       1       1    1918
> mat[is.na(mat)] <- 0
> summary(c(mat))
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
0.00000 0.00000 0.00000 0.09357 0.00000 1.00000
> lw <- mat2listw(mat, style="B")
Warning message:
In nb2listw(res$neighbours, glist = res$weights, style = style,  :
  zero sum general weights
> summary(lw)
Characteristics of weights list object:
Neighbour list object:
Number of regions: 46
Number of nonzero links: 198
Percentage nonzero weights: 9.357278
Average number of links: 4.304348
2 regions with no links:
2 18
Link number distribution:

 0  2  3  4  5  6  7  8
 2  5  5 14  8  9  1  2
5 least connected regions:
7 8 9 36 41 with 2 links
2 most connected regions:
24 38 with 8 links

Weights style: B
Weights constants summary:
Error in print(data.frame(rbind(unlist(spweights.constants(object,
zero.policy = zero.policy))[c(1,  :
  error in evaluating the argument 'x' in selecting a method for function
'print': Error in spweights.constants(object, zero.policy = zero.policy) :
  regions with no neighbours found
> is.symmetric.nb(lw$neighbours)
[1] TRUE



The neighborhood list cannot be used in spatial regression.    The main
error seems to be "Error in
print(data.frame(rbind(unlist(spweights.constants(object, zero.policy =
zero.policy))[c(1,  :
  error in evaluating the argument 'x' in selecting a method for function
'print': Error in spweights.constants(object, zero.policy = zero.policy) :
  regions with no neighbours found"


Is there anyone know what wrong with the data?  I have tried to add
"zero.policy=true".  Thanks




Happy Easter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120408/2c4b5caa/attachment.html>
-------------- next part --------------
								1	1													1															1								
																																													
				1																						1	1												1						
																1						1	1									1					1	1							
		1																								1							1												
														1											1		1					1							1						1
																			1									1																	
																		1																								1			
1									1																																				
1								1																					1						1		1								
																								1		1							1						1			1			1
												1	1		1					1			1																					1	
											1				1					1											1														
											1										1		1		1											1								1	
					1																		1		1							1													
											1	1											1								1						1				1		1		
			1																			1																1							
																																													
							1																											1							1		1		
						1																						1												1					
											1	1									1										1													1	
													1							1										1						1								1	
1			1													1																					1								
			1								1		1	1	1										1							1					1								
										1																				1						1									1
					1								1	1									1													1									1
		1		1						1																							1						1						
		1			1																											1						1							
						1													1															1						1					
									1																										1		1				1				
																					1			1												1									
												1			1					1														1									1		
			1		1									1									1				1											1							
				1						1																1																1			
																		1										1			1												1		
									1																				1																
													1								1			1	1					1															1
1			1						1						1							1	1						1												1				
			1													1											1					1													
		1			1					1																1																			1
																			1									1																	
															1			1											1								1						1		
							1			1																							1												
															1			1													1			1							1				
											1		1							1	1																								
					1					1														1	1											1			1						

From alobolistas at gmail.com  Mon Apr  9 17:12:40 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Mon, 9 Apr 2012 17:12:40 +0200
Subject: [R-sig-Geo] rgeos::gArea() to all polygons within sp polygons DF
In-Reply-To: <4F81AE1D.4090905@uni-muenster.de>
References: <CAG4NReJ3UHhokWBQJeq5krtjHOELO3KFZuZ18x5Ee9jWYnd4gQ@mail.gmail.com>
	<4F81AE1D.4090905@uni-muenster.de>
Message-ID: <CAG4NReKd5vFoXYvLEOAg0YBLXDQgUj4SaEc4iSj-jvTN14v85g@mail.gmail.com>

Thanks Edzer,

b2 <- gArea(BorneoLCg, byid=T)

I get many warnings such as:
40: In RGEOSMiscFunc(spgeom, byid, "rgeos_area") :
  Polygons object missing comment attribute ignoring hole(s). See
function createSPComment.

is this normal?

The result is identical to
b <- sapply(BorneoLCg at polygons, function(x) x at area)

while it is different than the one provided by QGIS (known to be wrong for very
large polygons only because of a format problem) and postgis (assumed
to be correct). Please give a look to:
http://hub.qgis.org/issues/5332

Agus


El d?a 8 de abril de 2012 17:26, Edzer Pebesma
<edzer.pebesma at uni-muenster.de> escribi?:
> Agus, have you tried
>
> gArea(BorneoLCg, byid = TRUE)
>
> ?
>
> On 04/08/2012 04:52 PM, Agustin Lobo wrote:
>> Hi!
>>
>> How do I ?apply gArea()) to all polygons within an spatial pol. DF?
>> I've tried
>> areas <- apply(BorneoLCg,gArea)
>> and
>> areas <- sapply(BorneoLCg,gArea)
>>
>> but this is not correct.
>>
>> I want to compare to
>> areas <- sapply(BorneoLCg at polygons, function(x) x at area)
>>
>> Thanks
>>
>> Agus
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> --
> Edzer Pebesma
> Institute for Geoinformatics (ifgi), University of M?nster
> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
> http://www.52north.org/geostatistics ? ? ?e.pebesma at wwu.de
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Mon Apr  9 17:13:20 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 9 Apr 2012 17:13:20 +0200 (CEST)
Subject: [R-sig-Geo] Error in print(data.frame) & zero.policy
In-Reply-To: <CANZYGDfSAhK1Hef+NB5EW_nFSnpWj5JWFhH2B2eSMXfJMnq8ew@mail.gmail.com>
References: <CANZYGDdtLBJP=Rh5y2+3hjaeFqaOW-N=1SPoMxBfqj6B3xy=dQ@mail.gmail.com>
	<CANZYGDfSAhK1Hef+NB5EW_nFSnpWj5JWFhH2B2eSMXfJMnq8ew@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1204091706290.21435@reclus.nhh.no>

On Mon, 9 Apr 2012, Zz wrote:

> Dear spdep users,
>
>
>
> I tried to follow below command to create a neighborhood list.   The
> data "Matrix.txt"
> is enclosed
>
>
>> mat0 <- read.table("Matrix.txt", header=FALSE, sep="\t", fill=TRUE)
>> mat <- as.matrix(mat0)
>> dim(mat)
> [1] 46 46
>> summary(c(mat))
>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's
>      1       1       1       1       1       1    1918
>> mat[is.na(mat)] <- 0
>> summary(c(mat))
>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
> 0.00000 0.00000 0.00000 0.09357 0.00000 1.00000
>> lw <- mat2listw(mat, style="B")
> Warning message:
> In nb2listw(res$neighbours, glist = res$weights, style = style,  :
>  zero sum general weights
>> summary(lw)
> Characteristics of weights list object:
> Neighbour list object:
> Number of regions: 46
> Number of nonzero links: 198
> Percentage nonzero weights: 9.357278
> Average number of links: 4.304348
> 2 regions with no links:
> 2 18
> Link number distribution:
>
> 0  2  3  4  5  6  7  8
> 2  5  5 14  8  9  1  2
> 5 least connected regions:
> 7 8 9 36 41 with 2 links
> 2 most connected regions:
> 24 38 with 8 links
>
> Weights style: B
> Weights constants summary:
> Error in print(data.frame(rbind(unlist(spweights.constants(object,
> zero.policy = zero.policy))[c(1,  :
>  error in evaluating the argument 'x' in selecting a method for function
> 'print': Error in spweights.constants(object, zero.policy = zero.policy) :
>  regions with no neighbours found

The error message says: "regions with no neighbours found". If you permit 
no-neighbour observations by using:

summary(lw, zero.policy=TRUE)

or equivalently:

get.ZeroPolicyOption()
set.ZeroPolicyOption(TRUE)
summary(lw)
set.ZeroPolicyOption(FALSE)
get.ZeroPolicyOption()

you can proceed. The lagged value of a no-neighbour observation is not 
well defined, as setting 0 may be misleading, and setting NA will break 
the next operations, in this case calculating measures based on the 
weights. Setting zero.policy=TRUE sets 0.

Roger

>> is.symmetric.nb(lw$neighbours)
> [1] TRUE
>
>
>
> The neighborhood list cannot be used in spatial regression.    The main
> error seems to be "Error in
> print(data.frame(rbind(unlist(spweights.constants(object, zero.policy =
> zero.policy))[c(1,  :
>  error in evaluating the argument 'x' in selecting a method for function
> 'print': Error in spweights.constants(object, zero.policy = zero.policy) :
>  regions with no neighbours found"
>
>
> Is there anyone know what wrong with the data?  I have tried to add
> "zero.policy=true".  Thanks
>
>
>
>
> Happy Easter
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Mon Apr  9 17:36:00 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 9 Apr 2012 17:36:00 +0200 (CEST)
Subject: [R-sig-Geo] rgeos::gArea() to all polygons within sp polygons DF
In-Reply-To: <CAG4NReKd5vFoXYvLEOAg0YBLXDQgUj4SaEc4iSj-jvTN14v85g@mail.gmail.com>
References: <CAG4NReJ3UHhokWBQJeq5krtjHOELO3KFZuZ18x5Ee9jWYnd4gQ@mail.gmail.com>
	<4F81AE1D.4090905@uni-muenster.de>
	<CAG4NReKd5vFoXYvLEOAg0YBLXDQgUj4SaEc4iSj-jvTN14v85g@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1204091724480.21435@reclus.nhh.no>

On Mon, 9 Apr 2012, Agustin Lobo wrote:

> Thanks Edzer,
>
> b2 <- gArea(BorneoLCg, byid=T)
>
> I get many warnings such as:
> 40: In RGEOSMiscFunc(spgeom, byid, "rgeos_area") :
>  Polygons object missing comment attribute ignoring hole(s). See
> function createSPComment.
>
> is this normal?
>
> The result is identical to
> b <- sapply(BorneoLCg at polygons, function(x) x at area)
>
> while it is different than the one provided by QGIS (known to be wrong for very
> large polygons only because of a format problem) and postgis (assumed
> to be correct). Please give a look to:
> http://hub.qgis.org/issues/5332

Please always provide sessionInfo() output, and a copy of the rgeos 
startup messages (showing which version of GEOS is used). With rgeos 0.2-5 
and GEOS runtime version: 3.3.2-CAPI-1.7.2, I have:

bn <- readOGR(".", "BorneoLCv2google")
b2 <- gArea(bn, byid=TRUE)
> print(b2[25967], digits=16)
            25966
8550196769.93012
> print(b2[26570], digits=16)
             26569
173647473841.3217

so the hole warnings were the reason for the difference. SVN revision 327 
of 16 March enforced the use of createSPComment() in gArea() - the user 
was expected to denote holes properly themselves before this change. 
Update your rgeos and try again.

Please update the QGIS #5332 to state that from rgeos 0.2-5, the values 
are correct. The area slot in the Polygons object is a gross area used to 
order plotting (because until recently R polygons simply overplotted one 
another), so it is not guaranteed to be a planar area measure for 
polygons with holes.

Roger

>
> Agus
>
>
> El d?a 8 de abril de 2012 17:26, Edzer Pebesma
> <edzer.pebesma at uni-muenster.de> escribi?:
>> Agus, have you tried
>>
>> gArea(BorneoLCg, byid = TRUE)
>>
>> ?
>>
>> On 04/08/2012 04:52 PM, Agustin Lobo wrote:
>>> Hi!
>>>
>>> How do I ?apply gArea()) to all polygons within an spatial pol. DF?
>>> I've tried
>>> areas <- apply(BorneoLCg,gArea)
>>> and
>>> areas <- sapply(BorneoLCg,gArea)
>>>
>>> but this is not correct.
>>>
>>> I want to compare to
>>> areas <- sapply(BorneoLCg at polygons, function(x) x at area)
>>>
>>> Thanks
>>>
>>> Agus
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics (ifgi), University of M?nster
>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
>> http://www.52north.org/geostatistics ? ? ?e.pebesma at wwu.de
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From rundel at gmail.com  Mon Apr  9 17:40:10 2012
From: rundel at gmail.com (Colin Rundel)
Date: Mon, 9 Apr 2012 11:40:10 -0400
Subject: [R-sig-Geo] rgeos::gArea() to all polygons within sp polygons DF
In-Reply-To: <CAG4NReKd5vFoXYvLEOAg0YBLXDQgUj4SaEc4iSj-jvTN14v85g@mail.gmail.com>
References: <CAG4NReJ3UHhokWBQJeq5krtjHOELO3KFZuZ18x5Ee9jWYnd4gQ@mail.gmail.com>
	<4F81AE1D.4090905@uni-muenster.de>
	<CAG4NReKd5vFoXYvLEOAg0YBLXDQgUj4SaEc4iSj-jvTN14v85g@mail.gmail.com>
Message-ID: <163E87AC-4F25-4268-BF6E-EA54BBE56540@gmail.com>

When working with polygons with holes sp objects do not necessarily contain information on which holes belong to which polygons which is something that rgeos needs to know to properly calculate properties like area.

You can use the createSPComment function to use rgeos to assign holes to polygons which will create the comment attribute mentioned in the warning.

I believe the area slot of the Polygons object also ignores any holes and so it should match the result from gArea when ignoring orphaned holes as well, but this is the area of the containing polygon not the area of the containing polygon - area of any holes.

-Colin 


On Apr 9, 2012, at 11:12 AM, Agustin Lobo wrote:

> Thanks Edzer,
> 
> b2 <- gArea(BorneoLCg, byid=T)
> 
> I get many warnings such as:
> 40: In RGEOSMiscFunc(spgeom, byid, "rgeos_area") :
>  Polygons object missing comment attribute ignoring hole(s). See
> function createSPComment.
> 
> is this normal?
> 
> The result is identical to
> b <- sapply(BorneoLCg at polygons, function(x) x at area)
> 
> while it is different than the one provided by QGIS (known to be wrong for very
> large polygons only because of a format problem) and postgis (assumed
> to be correct). Please give a look to:
> http://hub.qgis.org/issues/5332
> 
> Agus
> 
> 
> El d?a 8 de abril de 2012 17:26, Edzer Pebesma
> <edzer.pebesma at uni-muenster.de> escribi?:
>> Agus, have you tried
>> 
>> gArea(BorneoLCg, byid = TRUE)
>> 
>> ?
>> 
>> On 04/08/2012 04:52 PM, Agustin Lobo wrote:
>>> Hi!
>>> 
>>> How do I  apply gArea()) to all polygons within an spatial pol. DF?
>>> I've tried
>>> areas <- apply(BorneoLCg,gArea)
>>> and
>>> areas <- sapply(BorneoLCg,gArea)
>>> 
>>> but this is not correct.
>>> 
>>> I want to compare to
>>> areas <- sapply(BorneoLCg at polygons, function(x) x at area)
>>> 
>>> Thanks
>>> 
>>> Agus
>>> 
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics (ifgi), University of M?nster
>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>> 8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
>> http://www.52north.org/geostatistics      e.pebesma at wwu.de
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From tghoward at gw.dec.state.ny.us  Mon Apr  9 19:02:01 2012
From: tghoward at gw.dec.state.ny.us (Tim Howard)
Date: Mon, 09 Apr 2012 13:02:01 -0400
Subject: [R-sig-Geo] extract netCDF layer then export
Message-ID: <4F82DDC9020000D50005853E@gwsmtp.dec.state.ny.us>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120409/7f06909a/attachment.pl>

From r.hijmans at gmail.com  Mon Apr  9 19:19:42 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Mon, 9 Apr 2012 10:19:42 -0700
Subject: [R-sig-Geo] extract netCDF layer then export
In-Reply-To: <4F82DDC9020000D50005853E@gwsmtp.dec.state.ny.us>
References: <4F82DDC9020000D50005853E@gwsmtp.dec.state.ny.us>
Message-ID: <CANtt_hzH-g7LBr29octAqn6GZzeuMh3v7089V7tp+FvYJDWE5g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120409/ace693f5/attachment.pl>

From tghoward at gw.dec.state.ny.us  Mon Apr  9 19:29:07 2012
From: tghoward at gw.dec.state.ny.us (Tim Howard)
Date: Mon, 09 Apr 2012 13:29:07 -0400
Subject: [R-sig-Geo] extract netCDF layer then export
In-Reply-To: <CANtt_hzH-g7LBr29octAqn6GZzeuMh3v7089V7tp+FvYJDWE5g@mail.gmail.com>
References: <4F82DDC9020000D50005853E@gwsmtp.dec.state.ny.us>
	<CANtt_hzH-g7LBr29octAqn6GZzeuMh3v7089V7tp+FvYJDWE5g@mail.gmail.com>
Message-ID: <4F82E423020000D50005854A@gwsmtp.dec.state.ny.us>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120409/d48d7be3/attachment.pl>

From tghoward at gw.dec.state.ny.us  Mon Apr  9 19:48:20 2012
From: tghoward at gw.dec.state.ny.us (Tim Howard)
Date: Mon, 09 Apr 2012 13:48:20 -0400
Subject: [R-sig-Geo] extract netCDF layer then export
References: <4F82DDC9020000D50005853E@gwsmtp.dec.state.ny.us>
	<CANtt_hzH-g7LBr29octAqn6GZzeuMh3v7089V7tp+FvYJDWE5g@mail.gmail.com> 
Message-ID: <4F82E8A4020000D500058555@gwsmtp.dec.state.ny.us>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120409/832ec3d2/attachment.pl>

From r.hijmans at gmail.com  Mon Apr  9 19:59:57 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Mon, 9 Apr 2012 10:59:57 -0700
Subject: [R-sig-Geo] extract netCDF layer then export
In-Reply-To: <4F82E8A4020000D500058555@gwsmtp.dec.state.ny.us>
References: <4F82DDC9020000D50005853E@gwsmtp.dec.state.ny.us>
	<CANtt_hzH-g7LBr29octAqn6GZzeuMh3v7089V7tp+FvYJDWE5g@mail.gmail.com>
	<4F82E8A4020000D500058555@gwsmtp.dec.state.ny.us>
Message-ID: <CANtt_hxLA6u1n7Jz=tN=AJJFftVgNNHYZCpHD8Z8KUmddMMDkQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120409/dcfb2531/attachment.pl>

From tghoward at gw.dec.state.ny.us  Mon Apr  9 20:28:28 2012
From: tghoward at gw.dec.state.ny.us (Tim Howard)
Date: Mon, 09 Apr 2012 14:28:28 -0400
Subject: [R-sig-Geo] extract netCDF layer then export
In-Reply-To: <CANtt_hxLA6u1n7Jz=tN=AJJFftVgNNHYZCpHD8Z8KUmddMMDkQ@mail.gmail.com>
References: <4F82DDC9020000D50005853E@gwsmtp.dec.state.ny.us>
	<CANtt_hzH-g7LBr29octAqn6GZzeuMh3v7089V7tp+FvYJDWE5g@mail.gmail.com>
	<4F82E8A4020000D500058555@gwsmtp.dec.state.ny.us>
	<CANtt_hxLA6u1n7Jz=tN=AJJFftVgNNHYZCpHD8Z8KUmddMMDkQ@mail.gmail.com>
Message-ID: <4F82F20C020000D50005855C@gwsmtp.dec.state.ny.us>

Robert,
Yes, raster thinks my time steps are 'levels' rather than 'bands' (600 time steps in these examples):
> s <- stack("Extraction_Tavg.nc", bands=pos)
Error in .local(x, ...) : no valid bands supplied
In addition: Warning message:
In .rasterObjectFromCDF(x, type = objecttype, band = band, ...) :
  "level" set to 1 (there are 600 levels)

> s <- stack("Extraction_Tavg.nc", levels=pos)
Error in .local(x, ...) : 
  Arguments should be Raster* objects or filenames
In addition: Warning messages:
1: In .rasterObjectFromCDF(x, type = objecttype, band = band, ...) :
  "level" set to 1 (there are 600 levels)
2: In .rasterObjectFromCDF(x, type = objecttype, band = band, ...) :
  "level" set to 1 (there are 600 levels)
 

It looks like a call to raster works, for a single time step:
 
> r <- raster("Extraction_Tavg.nc", level=535)
> r
class       : RasterLayer 
dimensions  : 49, 97, 4753  (nrow, ncol, ncell)
resolution  : 0.125, 0.125  (x, y)
extent      : -82.125, -70, 40, 46.125  (xmin, xmax, ymin, ymax)
coord. ref. : NA 
values      : C:\mypath\Extraction_Tavg.nc 
zvar        : Tavg 
level       : 535 
 
 
The only thing that's confusing to me, is that ncdf *does* seem to know that the levels are time steps:

> ncTemp <- open.ncdf("Extraction_Tavg.nc")
> ncTemp
[1] "file Extraction_Tavg.nc has 4 dimensions:"
[1] "time   Size: 600"
[1] "latitude   Size: 49"
[1] "longitude   Size: 97"
[1] "projection   Size: 1"
[1] "------------------------"
[1] "file Extraction_Tavg.nc has 1 variables:"
[1] "float Tavg[longitude,latitude,time,projection]  Longname:Tavg Missval:1.00000002004088e+20"
> 
 
At any rate, I can work with this (via multiple calls to raster in a loop). Your code and examples are VERY helpful and I'm very happy with what I've got now. 
Thank you so much for the quick help. 
Best, 
Tim
 

>>> "Robert J. Hijmans" <r.hijmans at gmail.com> 4/9/2012 1:59 PM >>>
Tim, 

Currently you can have only one level (the fourth dimension) in a single RasterBrick, so for each level you need to make a new object (whether RasterLayer, Brick, or Stack). But you can make a RasterStack for only a few time steps (the third dimension, "bands"). 

s <- stack("Extraction_Tavg.nc", bands=c(1, 13, 15)) #grab only time steps 1, 13, 15

You can change what you consider a 'level' vs 'time' and choose the level with the 'level' and 'lvar' arguments (which do not appear to be documented). The defaults are lvar=3, level=0. 

But if you are comfortable with directly using the ncdf functions, that may of course work as well or better. 

Robert

On Mon, Apr 9, 2012 at 10:48 AM, Tim Howard <tghoward at gw.dec.state.ny.us> wrote:


I'm actually doing more than just grabbing a single layer/band in R. I've got a script set up to extract specific layers from the time dimension, get the average, then write it out. Ideally there would be a structure similar to this (is this possible?): 
b <- brick("Extraction_Tavg.nc", band = c(1, 13, 15)) #grab only time steps 1, 13, 15
This was why I resorted to using "get.var.ncdf" 
Perhaps there's a way I can initialize a rasterbrick or stack using your suggestions and then return to get.var.ncdf to get the layers I want. 
Tim

>>> Tim Howard 4/9/2012 1:29 PM >>>
Robert,
Thank you. That does pull the extent and resolution information over, but perhaps the netCDF files I am using are structured funny as it throws an error for the levels:
> b <- brick("Extraction_Tavg.nc")
Warning message:
In .rasterObjectFromCDF(x, type = objecttype, band = band, ...) :
"level" set to 1 (there are 3 levels)
> projection(b) <- "+proj=longlat +datum=WGS84"
> r3 <- b[[3]]
Error in .local(x, ...) : not a valid subset
> r3 <- b[[2]]
Error in .local(x, ...) : not a valid subset
> b
class : RasterBrick 
dimensions : 2, 2, 4, 1 (nrow, ncol, ncell, nlayers)
resolution : 0.125, 0.125 (x, y)
extent : -74.25, -74, 42, 42.25 (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 
values : <<mypath>>Extraction_Tavg.nc 
zvar : Tavg 
level : 1 
Tim

>>> "Robert J. Hijmans" <r.hijmans at gmail.com> 4/9/2012 1:19 PM >>>
Tim,

You can do:

library(raster)
b <- brick("Extraction_Tavg.nc")
projection(b) <- '+proj=longlat +datum=WGS84'

# multilayer object
b <- writeRaster(b, 'boo.tif') 

# for single layer (time 3)
r3 <- b[[3]]
r3 <- writeRaster(r3, 'boo3.tif') 


# or
r2 <- raster("Extraction_Tavg.nc", band=2)
projection(r2) <- '+proj=longlat +datum=WGS84'
r2 <- writeRaster(r2, 'boo3.tif') 

Or something similar with writeRaster following you approach. 
Oh, and I thought that ArcGIS can now also open ncdf files

Robert



On Mon, Apr 9, 2012 at 10:02 AM, Tim Howard <tghoward at gw.dec.state.ny.us> wrote:


I've got most of the steps for manipulating netCDF files using packages ncdf and raster but I'm currently stuck getting the correct projection information (lat/long) over to the raster and then exporting it.

Here's a VERY simply netCDF raster (2 cells lat X 2 cells long X 3 time periods) and how I might grab one of those time periods (I tried using dput to actually provide the data, but couldn't get dget to re-load it, I'd be happy to supply data if someone can suggest how).

> library(ncdf)
> library(raster)
> ncTemp2 <- open.ncdf("Extraction_Tavg.nc")
> ncTemp2
[1] "file Extraction_Tavg.nc has 4 dimensions:"
[1] "time Size: 3"
[1] "latitude Size: 2"
[1] "longitude Size: 2"
[1] "projection Size: 1"
[1] "------------------------"
[1] "file Extraction_Tavg.nc has 1 variables:"
[1] "float Tavg[longitude,latitude,time,projection] Longname:Tavg Missval:1.00000002004088e+20"
> str(ncTemp2)

<<snip to save space>>>>

My Question: How do I now export the single raster, m, so that I can bring along all the relevant spatial information contained in the netCDF (which would be the lat long coordinates?). I'd like to export the raster into any format accessible by esri products (boo!).

Thanks in advance,
Tim




[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org 
https://stat.ethz.ch/mailman/listinfo/r-sig-geo 


From friendly at yorku.ca  Mon Apr  9 21:17:54 2012
From: friendly at yorku.ca (Michael Friendly)
Date: Mon, 09 Apr 2012 15:17:54 -0400
Subject: [R-sig-Geo] Graphing Canadian Cities via Forward Station Area
 (FSAs) Spatial Information
In-Reply-To: <CAOH6cu4U0OQBrfP-XsqMT1WRBH1Dp8uVBVZ8Nc7JZEkPNSZ4GA@mail.gmail.com>
References: <CAOH6cu4U0OQBrfP-XsqMT1WRBH1Dp8uVBVZ8Nc7JZEkPNSZ4GA@mail.gmail.com>
Message-ID: <4F8335E2.8080302@yorku.ca>

Look at ?subset.Spatial

Perhaps this will get you started, but you should probably buy & read
Applied Spatial Data Analysis with R by Bivand etal/

# examine  first letter of postal code for GTA
table(substr(canada.fsa.spatial$CENSUS_FSA,1,1))


inLM <- substr(canada.fsa.spatial$CENSUS_FSA,1,1) %in% c('L','M')
GTA <- subset(canada.fsa.spatial, inLM)

plot(GTA)




On 4/5/2012 4:33 PM, Mike Sukmanowsky wrote:
> Hi everyone,
>
> We're trying to overlay some internal information that we have regarding
> certain Canadian cities.  The data that we have is specified by Forward
> Station Area (FSA) which corresponds to the first three digits of a
> Canadian postal code.
>
> The Government of Canada provides a shapefile (.dbf, .shp, .prj, .shx) from
> the 2006 Census for all FSAs in Canada.
>
> The current question I have is how to use this shapefile to effectively
> "zoom in" to just a few Canadian cities / areas and then display a
> choropleth just of a certain area (the Greater Toronto Area for example
> which is roughly equivalent to all FSAs which start with the letter L or M).
>
> Here's the code I'm currently using as well as a link to the shapefile
> itself.  Can someone provide an example of how to "zoom in" to Toronto for
> example and display a choropleth with some randomized data as an example?
>   I'm just not positive how to use the maps, maptools, sp, etc libraries to
> limit the plot to a specific area and then add additional data to the data
> frame for the purpose of the choropleth.
>
> library(maps)
> library(maptools)
> library(sp)
>
> # Zip file available from
> https://s3.amazonaws.com/tgam.general/gfsa000a06a_e.zip
> # PDF explaining file available here
> https://s3.amazonaws.com/tgam.general/92-170-GIE2006001.pdf
> canada.fsa.spatial<-
> readShapePoly("~/Documents/Census/2006/gfsa000a06a_e/gfsa000a06a_e",
> IDvar="CENSUS_FSA",
> verbose=T)


-- 
Michael Friendly     Email: friendly AT yorku DOT ca
Professor, Psychology Dept.
York University      Voice: 416 736-5115 x66249 Fax: 416 736-5814
4700 Keele Street    Web:   http://www.datavis.ca
Toronto, ONT  M3J 1P3 CANADA


From alobolistas at gmail.com  Mon Apr  9 22:28:22 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Mon, 9 Apr 2012 22:28:22 +0200
Subject: [R-sig-Geo] rgeos::gArea() to all polygons within sp polygons DF
In-Reply-To: <alpine.LRH.2.02.1204091724480.21435@reclus.nhh.no>
References: <CAG4NReJ3UHhokWBQJeq5krtjHOELO3KFZuZ18x5Ee9jWYnd4gQ@mail.gmail.com>
	<4F81AE1D.4090905@uni-muenster.de>
	<CAG4NReKd5vFoXYvLEOAg0YBLXDQgUj4SaEc4iSj-jvTN14v85g@mail.gmail.com>
	<alpine.LRH.2.02.1204091724480.21435@reclus.nhh.no>
Message-ID: <CAG4NRe++dmJyghKHBBZ9nvaSdCATso8-SOdGEcG+Nu0qjnwDKg@mail.gmail.com>

Thanks Roger.
Apologies for the missing output of sessionInfo() .
Confirmed that the results are correct with rgeos 0.2-5, although it's
now very slow.
Ticket in QGIS updated (and closed).

Agus

El d?a 9 de abril de 2012 17:36, Roger Bivand <Roger.Bivand at nhh.no> escribi?:
> On Mon, 9 Apr 2012, Agustin Lobo wrote:
>
>> Thanks Edzer,
>>
>> b2 <- gArea(BorneoLCg, byid=T)
>>
>> I get many warnings such as:
>> 40: In RGEOSMiscFunc(spgeom, byid, "rgeos_area") :
>> ?Polygons object missing comment attribute ignoring hole(s). See
>> function createSPComment.
>>
>> is this normal?
>>
>> The result is identical to
>> b <- sapply(BorneoLCg at polygons, function(x) x at area)
>>
>> while it is different than the one provided by QGIS (known to be wrong for
>> very
>> large polygons only because of a format problem) and postgis (assumed
>> to be correct). Please give a look to:
>> http://hub.qgis.org/issues/5332
>
>
> Please always provide sessionInfo() output, and a copy of the rgeos startup
> messages (showing which version of GEOS is used). With rgeos 0.2-5 and GEOS
> runtime version: 3.3.2-CAPI-1.7.2, I have:
>
> bn <- readOGR(".", "BorneoLCv2google")
> b2 <- gArea(bn, byid=TRUE)
>>
>> print(b2[25967], digits=16)
>
> ? ? ? ? ? 25966
> 8550196769.93012
>>
>> print(b2[26570], digits=16)
>
> ? ? ? ? ? ?26569
> 173647473841.3217
>
> so the hole warnings were the reason for the difference. SVN revision 327 of
> 16 March enforced the use of createSPComment() in gArea() - the user was
> expected to denote holes properly themselves before this change. Update your
> rgeos and try again.
>
> Please update the QGIS #5332 to state that from rgeos 0.2-5, the values are
> correct. The area slot in the Polygons object is a gross area used to order
> plotting (because until recently R polygons simply overplotted one another),
> so it is not guaranteed to be a planar area measure for polygons with holes.
>
> Roger
>
>
>>
>> Agus
>>
>>
>> El d?a 8 de abril de 2012 17:26, Edzer Pebesma
>> <edzer.pebesma at uni-muenster.de> escribi?:
>>>
>>> Agus, have you tried
>>>
>>> gArea(BorneoLCg, byid = TRUE)
>>>
>>> ?
>>>
>>> On 04/08/2012 04:52 PM, Agustin Lobo wrote:
>>>>
>>>> Hi!
>>>>
>>>> How do I ?apply gArea()) to all polygons within an spatial pol. DF?
>>>> I've tried
>>>> areas <- apply(BorneoLCg,gArea)
>>>> and
>>>> areas <- sapply(BorneoLCg,gArea)
>>>>
>>>> but this is not correct.
>>>>
>>>> I want to compare to
>>>> areas <- sapply(BorneoLCg at polygons, function(x) x at area)
>>>>
>>>> Thanks
>>>>
>>>> Agus
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>> --
>>> Edzer Pebesma
>>> Institute for Geoinformatics (ifgi), University of M?nster
>>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>>> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
>>> http://www.52north.org/geostatistics ? ? ?e.pebesma at wwu.de
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From fairyland118 at gmail.com  Mon Apr  9 22:28:51 2012
From: fairyland118 at gmail.com (Zz)
Date: Mon, 9 Apr 2012 16:28:51 -0400
Subject: [R-sig-Geo] Error in print(data.frame) & zero.policy
In-Reply-To: <alpine.LRH.2.02.1204091706290.21435@reclus.nhh.no>
References: <CANZYGDdtLBJP=Rh5y2+3hjaeFqaOW-N=1SPoMxBfqj6B3xy=dQ@mail.gmail.com>
	<CANZYGDfSAhK1Hef+NB5EW_nFSnpWj5JWFhH2B2eSMXfJMnq8ew@mail.gmail.com>
	<alpine.LRH.2.02.1204091706290.21435@reclus.nhh.no>
Message-ID: <CANZYGDdCCk_jGSkCWeoHrFi7T_fmeJmQK=Av3B0pkv-hDbfGGQ@mail.gmail.com>

Dear Prof Bivand,



You are very helpful. Following your instruction,  I can create listw
and regress
now.



Meanwhile,  I would like to row-standardize a square matrix before changing
it into a listw file.



library(spdep)

mat0 <- read.csv(file="46states.csv", h=F)

mat0 [is.na(mat0)] <- 0

mat<- as.matrix(mat0, zero.policy=TRUE)

mat<- mat /apply(mat, 1, sum, zero.policy=TRUE)

summary(mat, zero.policy=TRUE)

lw <- mat2listw(mat)

*Error in mat2listw(mat) : x must be a square matrix*
summary(lw, zero.policy=TRUE)





*Attached is the data. * Usually the above commands work very well.  But
this time,  I have tried to add *zero.policy=TRUE*  in different places of
commands in vain.



Thank you so much for your time.






Best regard
Zz

On Mon, Apr 9, 2012 at 11:13 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:

> On Mon, 9 Apr 2012, Zz wrote:
>
>  Dear spdep users,
>>
>>
>>
>> I tried to follow below command to create a neighborhood list.   The
>> data "Matrix.txt"
>> is enclosed
>>
>>
>>  mat0 <- read.table("Matrix.txt", header=FALSE, sep="\t", fill=TRUE)
>>> mat <- as.matrix(mat0)
>>> dim(mat)
>>>
>> [1] 46 46
>>
>>> summary(c(mat))
>>>
>>  Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's
>>     1       1       1       1       1       1    1918
>>
>>> mat[is.na(mat)] <- 0
>>> summary(c(mat))
>>>
>>  Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
>> 0.00000 0.00000 0.00000 0.09357 0.00000 1.00000
>>
>>> lw <- mat2listw(mat, style="B")
>>>
>> Warning message:
>> In nb2listw(res$neighbours, glist = res$weights, style = style,  :
>>  zero sum general weights
>>
>>> summary(lw)
>>>
>> Characteristics of weights list object:
>> Neighbour list object:
>> Number of regions: 46
>> Number of nonzero links: 198
>> Percentage nonzero weights: 9.357278
>> Average number of links: 4.304348
>> 2 regions with no links:
>> 2 18
>> Link number distribution:
>>
>> 0  2  3  4  5  6  7  8
>> 2  5  5 14  8  9  1  2
>> 5 least connected regions:
>> 7 8 9 36 41 with 2 links
>> 2 most connected regions:
>> 24 38 with 8 links
>>
>> Weights style: B
>> Weights constants summary:
>> Error in print(data.frame(rbind(unlist(**spweights.constants(object,
>> zero.policy = zero.policy))[c(1,  :
>>  error in evaluating the argument 'x' in selecting a method for function
>> 'print': Error in spweights.constants(object, zero.policy = zero.policy) :
>>  regions with no neighbours found
>>
>
> The error message says: "regions with no neighbours found". If you permit
> no-neighbour observations by using:
>
> summary(lw, zero.policy=TRUE)
>
> or equivalently:
>
> get.ZeroPolicyOption()
> set.ZeroPolicyOption(TRUE)
> summary(lw)
> set.ZeroPolicyOption(FALSE)
> get.ZeroPolicyOption()
>
> you can proceed. The lagged value of a no-neighbour observation is not
> well defined, as setting 0 may be misleading, and setting NA will break the
> next operations, in this case calculating measures based on the weights.
> Setting zero.policy=TRUE sets 0.
>
> Roger
>
>
>  is.symmetric.nb(lw$neighbours)
>>>
>> [1] TRUE
>>
>>
>>
>> The neighborhood list cannot be used in spatial regression.    The main
>> error seems to be "Error in
>> print(data.frame(rbind(unlist(**spweights.constants(object, zero.policy =
>> zero.policy))[c(1,  :
>>  error in evaluating the argument 'x' in selecting a method for function
>> 'print': Error in spweights.constants(object, zero.policy = zero.policy) :
>>  regions with no neighbours found"
>>
>>
>> Is there anyone know what wrong with the data?  I have tried to add
>> "zero.policy=true".  Thanks
>>
>>
>>
>>
>> Happy Easter
>>
>>
> --
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120409/94f54450/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 46states.csv
Type: text/csv
Size: 2269 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120409/94f54450/attachment.bin>

From mike.sukmanowsky at gmail.com  Mon Apr  9 22:42:32 2012
From: mike.sukmanowsky at gmail.com (Mike Sukmanowsky)
Date: Mon, 9 Apr 2012 16:42:32 -0400
Subject: [R-sig-Geo] Graphing Canadian Cities via Forward Station Area
	(FSAs) Spatial Information
In-Reply-To: <4F8335E2.8080302@yorku.ca>
References: <CAOH6cu4U0OQBrfP-XsqMT1WRBH1Dp8uVBVZ8Nc7JZEkPNSZ4GA@mail.gmail.com>
	<4F8335E2.8080302@yorku.ca>
Message-ID: <CAOH6cu7oJMqEOuTwkSrdQPKneZNPT9MP2Oj=ogZVx=wtF-1Eig@mail.gmail.com>

Thanks so much Michael!

That worked perfectly and I'm definitely going to check out the book
that you mentioned below.

An R question for you though, I did something similar to what you
recommended but didn't yield the same result:

# Create a gta.spatial dataframe which only contains L and M FSAs.
gta.fsas                <- grep("[LM][0-9][A-Z]",
as.character(canada.fsa.spatial at data$CENSUS_FSA))
gta.spatial <- canada.fsa.spatial at data[gta.fsas,]


When I plotted my gta.spatial above it still showed all of canada.
Why does subset seem to properly remove the elements from the data
frame whereas my attempt to construct a new data frame didn't work?

Thank you once again.

On Mon, Apr 9, 2012 at 3:17 PM, Michael Friendly <friendly at yorku.ca> wrote:
> Look at ?subset.Spatial
>
> Perhaps this will get you started, but you should probably buy & read
> Applied Spatial Data Analysis with R by Bivand etal/
>
> # examine ?first letter of postal code for GTA
> table(substr(canada.fsa.spatial$CENSUS_FSA,1,1))
>
>
> inLM <- substr(canada.fsa.spatial$CENSUS_FSA,1,1) %in% c('L','M')
> GTA <- subset(canada.fsa.spatial, inLM)
>
> plot(GTA)
>
>
>
>
>
> On 4/5/2012 4:33 PM, Mike Sukmanowsky wrote:
>>
>> Hi everyone,
>>
>> We're trying to overlay some internal information that we have regarding
>> certain Canadian cities. ?The data that we have is specified by Forward
>> Station Area (FSA) which corresponds to the first three digits of a
>> Canadian postal code.
>>
>> The Government of Canada provides a shapefile (.dbf, .shp, .prj, .shx)
>> from
>> the 2006 Census for all FSAs in Canada.
>>
>> The current question I have is how to use this shapefile to effectively
>> "zoom in" to just a few Canadian cities / areas and then display a
>> choropleth just of a certain area (the Greater Toronto Area for example
>> which is roughly equivalent to all FSAs which start with the letter L or
>> M).
>>
>> Here's the code I'm currently using as well as a link to the shapefile
>> itself. ?Can someone provide an example of how to "zoom in" to Toronto for
>> example and display a choropleth with some randomized data as an example?
>> ?I'm just not positive how to use the maps, maptools, sp, etc libraries to
>> limit the plot to a specific area and then add additional data to the data
>> frame for the purpose of the choropleth.
>>
>> library(maps)
>> library(maptools)
>> library(sp)
>>
>> # Zip file available from
>> https://s3.amazonaws.com/tgam.general/gfsa000a06a_e.zip
>> # PDF explaining file available here
>> https://s3.amazonaws.com/tgam.general/92-170-GIE2006001.pdf
>> canada.fsa.spatial<-
>> readShapePoly("~/Documents/Census/2006/gfsa000a06a_e/gfsa000a06a_e",
>> IDvar="CENSUS_FSA",
>> verbose=T)
>
>
>
> --
> Michael Friendly ? ? Email: friendly AT yorku DOT ca
> Professor, Psychology Dept.
> York University ? ? ?Voice: 416 736-5115 x66249 Fax: 416 736-5814
> 4700 Keele Street ? ?Web: ? http://www.datavis.ca
> Toronto, ONT ?M3J 1P3 CANADA
>



-- 
Mike Sukmanowsky


From juantomas.sayago at gmail.com  Mon Apr  9 23:36:39 2012
From: juantomas.sayago at gmail.com (Juan Tomas Sayago)
Date: Mon, 9 Apr 2012 17:36:39 -0400
Subject: [R-sig-Geo] buffer between points and line shapefiles
Message-ID: <CAEOXpNCJVCiG=4r_WQxUZHpU-aWaBv+ytz1qKSRBzB8C44byrw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120409/7bd0a305/attachment.pl>

From mathieu.rajerison at gmail.com  Tue Apr 10 10:16:54 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Tue, 10 Apr 2012 10:16:54 +0200
Subject: [R-sig-Geo] buffer between points and line shapefiles
In-Reply-To: <CAEOXpNCJVCiG=4r_WQxUZHpU-aWaBv+ytz1qKSRBzB8C44byrw@mail.gmail.com>
References: <CAEOXpNCJVCiG=4r_WQxUZHpU-aWaBv+ytz1qKSRBzB8C44byrw@mail.gmail.com>
Message-ID: <CAGfc75=hFNvOvpfnh1CnnsWAONZjkc5ehmTwGtx3yzUW5CAxew@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120410/7618dc61/attachment.pl>

From Roger.Bivand at nhh.no  Tue Apr 10 10:48:27 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 10 Apr 2012 10:48:27 +0200 (CEST)
Subject: [R-sig-Geo] rgeos::gArea() to all polygons within sp polygons DF
In-Reply-To: <CAG4NRe++dmJyghKHBBZ9nvaSdCATso8-SOdGEcG+Nu0qjnwDKg@mail.gmail.com>
References: <CAG4NReJ3UHhokWBQJeq5krtjHOELO3KFZuZ18x5Ee9jWYnd4gQ@mail.gmail.com>
	<4F81AE1D.4090905@uni-muenster.de>
	<CAG4NReKd5vFoXYvLEOAg0YBLXDQgUj4SaEc4iSj-jvTN14v85g@mail.gmail.com>
	<alpine.LRH.2.02.1204091724480.21435@reclus.nhh.no>
	<CAG4NRe++dmJyghKHBBZ9nvaSdCATso8-SOdGEcG+Nu0qjnwDKg@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1204101001130.25120@reclus.nhh.no>

On Mon, 9 Apr 2012, Agustin Lobo wrote:

> Thanks Roger.
> Apologies for the missing output of sessionInfo() .
> Confirmed that the results are correct with rgeos 0.2-5, although it's
> now very slow.

You can say:

bn <- createSPComment(bn)

first, which takes some time as it recreates the object. If the comments 
assigning holes (interior rings) to exterior rings are present, they are 
not recreated. Shapefiles do not store this information, and it is 
flattened out in making Polygons objects, which were (perhaps 
unfortunately) conceived of as matching shapefiles.

Arguably, this comment creation, needed to map sp Polygons objects to OGC 
SFS Polygon or Multipolygon objects, should be done in sp - but the 
computational geometry functions neede to find our which hole is in which 
exterior ring are in GEOS, so this would involve a circularity in 
dependencies.

So the way to ensure that polygon objects work as expected in rgeos and 
when we believe the input hole status is:

library(rgdal)
pls <- readOGR(...)
library(rgeos)
pls <- createSPComment(pls)
# I'll look at making this faster in C
# subsequent operations (which still check that comments are present in 
# each Polygons object)

For your case, which has many very complex polygons and as such is a good 
test case, I have:

> system.time(bn <- readOGR(".", "BorneoLCv2google"))
OGR data source with driver: ESRI Shapefile
Source: ".", layer: "BorneoLCv2google"
with 32036 features and 6 fields
Feature type: wkbPolygon with 2 dimensions
    user  system elapsed
   9.928   0.178  10.388
> system.time(b2 <- gArea(bn, byid=TRUE))
    user  system elapsed
154.242  10.033 169.401
> system.time(bn <- createSPComment(bn))
    user  system elapsed
152.045   0.085 156.501
> set_do_poly_check(FALSE)
# without this, it redoes the comment checking
> system.time(b2 <- gArea(bn, byid=TRUE))
    user  system elapsed
   0.251   0.000   0.252

In this case, it is also possible to get the areas without using rgeos:

pls <- slot(bn, "polygons")
exter <- sapply(pls, function(x) {
   Pls <- slot(x, "Polygons")
   sum(sapply(Pls, function(xx)
     ifelse(!slot(xx, "hole"), slot(xx, "area"), 0)))
})
inter <- sapply(pls, function(x) {
   Pls <- slot(x, "Polygons")
   sum(sapply(Pls, function(xx)
     ifelse(slot(xx, "hole"), slot(xx, "area"), 0)))
})
area <- exter - inter

> print(area[25967], digits=16)
[1] 8550196769.930017

since the net area of each Polygons object is the gross area minus the 
holes; this is also fast.

Hope this clarifies,

Roger

> Ticket in QGIS updated (and closed).
>
> Agus
>
> El d?a 9 de abril de 2012 17:36, Roger Bivand <Roger.Bivand at nhh.no> escribi?:
>> On Mon, 9 Apr 2012, Agustin Lobo wrote:
>>
>>> Thanks Edzer,
>>>
>>> b2 <- gArea(BorneoLCg, byid=T)
>>>
>>> I get many warnings such as:
>>> 40: In RGEOSMiscFunc(spgeom, byid, "rgeos_area") :
>>> ?Polygons object missing comment attribute ignoring hole(s). See
>>> function createSPComment.
>>>
>>> is this normal?
>>>
>>> The result is identical to
>>> b <- sapply(BorneoLCg at polygons, function(x) x at area)
>>>
>>> while it is different than the one provided by QGIS (known to be wrong for
>>> very
>>> large polygons only because of a format problem) and postgis (assumed
>>> to be correct). Please give a look to:
>>> http://hub.qgis.org/issues/5332
>>
>>
>> Please always provide sessionInfo() output, and a copy of the rgeos startup
>> messages (showing which version of GEOS is used). With rgeos 0.2-5 and GEOS
>> runtime version: 3.3.2-CAPI-1.7.2, I have:
>>
>> bn <- readOGR(".", "BorneoLCv2google")
>> b2 <- gArea(bn, byid=TRUE)
>>>
>>> print(b2[25967], digits=16)
>>
>> ? ? ? ? ? 25966
>> 8550196769.93012
>>>
>>> print(b2[26570], digits=16)
>>
>> ? ? ? ? ? ?26569
>> 173647473841.3217
>>
>> so the hole warnings were the reason for the difference. SVN revision 327 of
>> 16 March enforced the use of createSPComment() in gArea() - the user was
>> expected to denote holes properly themselves before this change. Update your
>> rgeos and try again.
>>
>> Please update the QGIS #5332 to state that from rgeos 0.2-5, the values are
>> correct. The area slot in the Polygons object is a gross area used to order
>> plotting (because until recently R polygons simply overplotted one another),
>> so it is not guaranteed to be a planar area measure for polygons with holes.
>>
>> Roger
>>
>>
>>>
>>> Agus
>>>
>>>
>>> El d?a 8 de abril de 2012 17:26, Edzer Pebesma
>>> <edzer.pebesma at uni-muenster.de> escribi?:
>>>>
>>>> Agus, have you tried
>>>>
>>>> gArea(BorneoLCg, byid = TRUE)
>>>>
>>>> ?
>>>>
>>>> On 04/08/2012 04:52 PM, Agustin Lobo wrote:
>>>>>
>>>>> Hi!
>>>>>
>>>>> How do I ?apply gArea()) to all polygons within an spatial pol. DF?
>>>>> I've tried
>>>>> areas <- apply(BorneoLCg,gArea)
>>>>> and
>>>>> areas <- sapply(BorneoLCg,gArea)
>>>>>
>>>>> but this is not correct.
>>>>>
>>>>> I want to compare to
>>>>> areas <- sapply(BorneoLCg at polygons, function(x) x at area)
>>>>>
>>>>> Thanks
>>>>>
>>>>> Agus
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>
>>>> --
>>>> Edzer Pebesma
>>>> Institute for Geoinformatics (ifgi), University of M?nster
>>>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>>>> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
>>>> http://www.52north.org/geostatistics ? ? ?e.pebesma at wwu.de
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, NHH Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From grothered at gmail.com  Tue Apr 10 12:30:14 2012
From: grothered at gmail.com (Gareth Davies)
Date: Tue, 10 Apr 2012 20:30:14 +1000
Subject: [R-sig-Geo] buffer between points and line shapefiles
Message-ID: <4F840BB6.4060503@gmail.com>

Hi,
You can do something like the following:

# Make some points
tmp = matrix(runif(20),ncol=2)
pts=SpatialPoints(tmp) # These are the points

library(rgeos)
pts_buffer=gBuffer(pts,width=0.1,byid=T) # This is the points with a buffer


# Make a 'river'
tmp = matrix(c(0,1, 0,2) ,ncol=2)
tmp2 = Lines( list(Line(tmp)), ID="0")
lne = SpatialLines(list(tmp2)) # This is the river 'line'
lne_buffer=gBuffer(lne,width=0.02) # This is the buffered river

# Plot everything
plot(pts_buffer,col='green')
plot(lne_buffer,add=T,col='blue')
plot(lne,add=T,col='black')
plot(pts,add=T,col='red')

# Find overlaps -- TRUE denotes overlap
# There are various things you could do
point_buffer_intersect_river=over(pts_buffer,lne)
point_intersect_river_buffer=over(pts,lne_buffer)
point_buffer_intersect_river_buffer=over(pts_buffer,lne_buffer)

# Then to get the points that intersect, you can do e.g.
pts[!is.na(point_buffer_intersect_river_buffer)]
# assuming some points do actually intersect


From oliveirajc at ufv.br  Tue Apr 10 14:42:37 2012
From: oliveirajc at ufv.br (julio cesar oliveira)
Date: Tue, 10 Apr 2012 09:42:37 -0300
Subject: [R-sig-Geo] read MODIS image in HDF format
Message-ID: <CAG+u5grg4ztOoJJGpuDtuKg9wLptX_E-ezycA_Oo7BFYiZjHDQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120410/e2e0ab08/attachment.pl>

From babuawara at gmail.com  Tue Apr 10 15:03:23 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Tue, 10 Apr 2012 15:03:23 +0200
Subject: [R-sig-Geo] read MODIS image in HDF format
In-Reply-To: <CAG+u5grg4ztOoJJGpuDtuKg9wLptX_E-ezycA_Oo7BFYiZjHDQ@mail.gmail.com>
References: <CAG+u5grg4ztOoJJGpuDtuKg9wLptX_E-ezycA_Oo7BFYiZjHDQ@mail.gmail.com>
Message-ID: <4F842F9B.1070800@gmail.com>

Hi Julio,
Have you seen the similar discussion on the list. Here is the link
http://r-sig-geo.2731867.n2.nabble.com/Antw-Re-HDF-format-tt7226577.html#a7227038
Though, I found it is easier to do with NASA's Java based tool
http://eosweb.larc.nasa.gov/PRODOCS/misr/tools/geotiff_tool.html
But if you have ArcGIS. It can read directly and beautifully.
Also, You can use FWTools. with this link
http://fwtools.maptools.org/windows-main.html

Cheers,

Vikram.

On 4/10/2012 2:42 PM, julio cesar oliveira wrote:
> Is possible to read MODIS images in HDF format in R?
> Example : MOD13Q1.A2001065.h13v12.005.2007007110531.hdf
>
> Thansk
>
> Julio
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From kmcoulib at gmail.com  Tue Apr 10 15:11:44 2012
From: kmcoulib at gmail.com (kapo coulibaly)
Date: Tue, 10 Apr 2012 09:11:44 -0400
Subject: [R-sig-Geo] read MODIS image in HDF format
In-Reply-To: <CAG+u5grg4ztOoJJGpuDtuKg9wLptX_E-ezycA_Oo7BFYiZjHDQ@mail.gmail.com>
References: <CAG+u5grg4ztOoJJGpuDtuKg9wLptX_E-ezycA_Oo7BFYiZjHDQ@mail.gmail.com>
Message-ID: <CANcefXZtDncxy6feaqwJSYG1Ee4ExQ2rbMLSYfS8GDoOBrdpjg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120410/a829f06b/attachment.pl>

From calamita_giuseppe at yahoo.it  Tue Apr 10 17:03:44 2012
From: calamita_giuseppe at yahoo.it (Giuseppe Calamita)
Date: Tue, 10 Apr 2012 08:03:44 -0700 (PDT)
Subject: [R-sig-Geo] rsaga error
In-Reply-To: <4F81A8C6.90408@gwdg.de>
References: <1333711121316-7442753.post@n2.nabble.com> <4F81A8C6.90408@gwdg.de>
Message-ID: <1334070224224-7453153.post@n2.nabble.com>

Thank you very much Rainer,
the first option you suggested (unistall RSAGA  and instasll it again)
didn't seem to work.
I uninstalled the 2.07 and I installed the 2.08 (I had to compile it on
ubuntu 10.04)
and now it seems to work indeed launching I got this message :

> rsaga.env()
$workspace
[1] "."

$cmd
[1] "saga_cmd"

$path
[1] "/usr/local/bin"

$modules
[1] "/usr/local/lib/saga"

$version
[1] "2.0.8"

I'm going to go further with the Hengl's tutorial and I'll say to you if
everything is ok! 
Thankyou again

Giuseppe Calamita


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/rsaga-error-tp7442753p7453153.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From rhurlin at gwdg.de  Tue Apr 10 18:58:24 2012
From: rhurlin at gwdg.de (Rainer Hurling)
Date: Tue, 10 Apr 2012 18:58:24 +0200
Subject: [R-sig-Geo] rsaga error
In-Reply-To: <1334070224224-7453153.post@n2.nabble.com>
References: <1333711121316-7442753.post@n2.nabble.com> <4F81A8C6.90408@gwdg.de>
	<1334070224224-7453153.post@n2.nabble.com>
Message-ID: <4F8466B0.6010504@gwdg.de>

On 10.04.2012 17:03 (UTC+1), Giuseppe Calamita wrote:
> Thank you very much Rainer,
> the first option you suggested (unistall RSAGA  and instasll it again)
> didn't seem to work.
> I uninstalled the 2.07 and I installed the 2.08 (I had to compile it on
> ubuntu 10.04)
> and now it seems to work indeed launching I got this message :
>
>> rsaga.env()
> $workspace
> [1] "."
>
> $cmd
> [1] "saga_cmd"
>
> $path
> [1] "/usr/local/bin"
>
> $modules
> [1] "/usr/local/lib/saga"
>
> $version
> [1] "2.0.8"
>
> I'm going to go further with the Hengl's tutorial and I'll say to you if
> everything is ok!

Nice to hear that. Thanks for the feedback,
Rainer

> Thankyou again
>
> Giuseppe Calamita
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/rsaga-error-tp7442753p7453153.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.


From juantomas.sayago at gmail.com  Tue Apr 10 21:16:26 2012
From: juantomas.sayago at gmail.com (Juan Tomas Sayago)
Date: Tue, 10 Apr 2012 15:16:26 -0400
Subject: [R-sig-Geo] buffer between points and line shapefiles
In-Reply-To: <4F840BB6.4060503@gmail.com>
References: <4F840BB6.4060503@gmail.com>
Message-ID: <CAEOXpNDpPRKEvoahHFMdhW0QD67_kig0ef2HcyVFwBVHKCZbUA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120410/29311d94/attachment.pl>

From paul.hiemstra at knmi.nl  Wed Apr 11 09:57:28 2012
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Wed, 11 Apr 2012 07:57:28 +0000
Subject: [R-sig-Geo] read MODIS image in HDF format
In-Reply-To: <CAG+u5grg4ztOoJJGpuDtuKg9wLptX_E-ezycA_Oo7BFYiZjHDQ@mail.gmail.com>
References: <CAG+u5grg4ztOoJJGpuDtuKg9wLptX_E-ezycA_Oo7BFYiZjHDQ@mail.gmail.com>
Message-ID: <4F853968.2000601@knmi.nl>

On 04/10/2012 12:42 PM, julio cesar oliveira wrote:
> Is possible to read MODIS images in HDF format in R?
> Example : MOD13Q1.A2001065.h13v12.005.2007007110531.hdf
>
> Thansk
>
> Julio
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

You can use rgdal with the hdf5 driver installed.

good luck,
Paul

-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From babuawara at gmail.com  Wed Apr 11 10:03:07 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Wed, 11 Apr 2012 10:03:07 +0200
Subject: [R-sig-Geo] read MODIS image in HDF format
In-Reply-To: <4F853968.2000601@knmi.nl>
References: <CAG+u5grg4ztOoJJGpuDtuKg9wLptX_E-ezycA_Oo7BFYiZjHDQ@mail.gmail.com>
	<4F853968.2000601@knmi.nl>
Message-ID: <4F853ABB.3060306@gmail.com>

Hi Julio,
Have you seen the similar discussion on the list. Here is the link
http://r-sig-geo.2731867.n2.nabble.com/Antw-Re-HDF-format-tt7226577.html#a7227038 

Though, I found it is easier to do with NASA's Java based tool
http://eosweb.larc.nasa.gov/PRODOCS/misr/tools/geotiff_tool.html
But if you have ArcGIS. It can read directly and beautifully.
Also, You can use FWTools. with this link
http://fwtools.maptools.org/windows-main.html

Cheers,

Vikram.

On 4/11/2012 9:57 AM, Paul Hiemstra wrote:
> On 04/10/2012 12:42 PM, julio cesar oliveira wrote:
>> Is possible to read MODIS images in HDF format in R?
>> Example : MOD13Q1.A2001065.h13v12.005.2007007110531.hdf
>>
>> Thansk
>>
>> Julio
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> You can use rgdal with the hdf5 driver installed.
>
> good luck,
> Paul
>


From mathieu.rajerison at gmail.com  Wed Apr 11 10:21:03 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Wed, 11 Apr 2012 10:21:03 +0200
Subject: [R-sig-Geo] spdep::listw2lines - removing duplicated lines
Message-ID: <CAGfc75=QdpA8xNfQBN_1_UUZJzJOTKV1TGRn-GAnJTY2-YSbiQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120411/90e278fa/attachment.pl>

From Roger.Bivand at nhh.no  Wed Apr 11 10:57:42 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 11 Apr 2012 10:57:42 +0200 (CEST)
Subject: [R-sig-Geo] spdep::listw2lines - removing duplicated lines
In-Reply-To: <CAGfc75=QdpA8xNfQBN_1_UUZJzJOTKV1TGRn-GAnJTY2-YSbiQ@mail.gmail.com>
References: <CAGfc75=QdpA8xNfQBN_1_UUZJzJOTKV1TGRn-GAnJTY2-YSbiQ@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1204111029400.32752@reclus.nhh.no>

On Wed, 11 Apr 2012, Mathieu Rajerison wrote:

> Hi,
>
>
> I'm using spdep to generate neighbors, than listw2lines to create a
> SpatialLinesDataFrame.
>
> Considering two neighbors N1 and N2, the line will be duplicated: one
> N1->N2 and one N2->N1

Only if the neighbours are symmetric, and in graph-based or k-nearest 
neighbours, this is not the case.

>
> Would you have any idea on how to select only one line from the two, for
> example the first?

If the neighbours are symmetric, it would be possible to do for example:

library(spdep)
set.seed(1)
xy <- cbind(x=runif(50), y=runif(50))
nb <- dnearneigh(xy, 0, 0.2)
nb
is.symmetric.nb(nb)
nb1 <- vector(mode="list", length=length(nb))
for (i in seq(along=nb)) nb1[[i]] <- nb[[i]][nb[[i]] <= i]
class(nb1) <- "nb"
attr(nb1, "region.id") <- attr(nb, "region.id")
nb1

It could probably also be done with gEquals() in rgeos also for asymmetric 
neighbours to remove duplications where they occur.

Roger


> Actually, it would consist in removing duplicated lines with same geometry
> but different directions.
>
>
> Thanks in advance, any help would be greatly appreciated!
>
> Mathieu
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From mathieu.rajerison at gmail.com  Wed Apr 11 13:41:16 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Wed, 11 Apr 2012 13:41:16 +0200
Subject: [R-sig-Geo] spdep::listw2lines - removing duplicated lines
In-Reply-To: <alpine.LRH.2.02.1204111029400.32752@reclus.nhh.no>
References: <CAGfc75=QdpA8xNfQBN_1_UUZJzJOTKV1TGRn-GAnJTY2-YSbiQ@mail.gmail.com>
	<alpine.LRH.2.02.1204111029400.32752@reclus.nhh.no>
Message-ID: <CAGfc75kWcmRSh_KzJ+3gpQ2BDQ7Di4ZdwN4V_4BYh73=i=UWyg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120411/d4ef848d/attachment.pl>

From a.mosnier at gmail.com  Wed Apr 11 14:29:24 2012
From: a.mosnier at gmail.com (Arnaud Mosnier)
Date: Wed, 11 Apr 2012 08:29:24 -0400
Subject: [R-sig-Geo] read MODIS image in HDF format
Message-ID: <CANkFkEcrO8WPe6p+TK5o0M9xG9cRPuZB+FVjcY8vuNaz3TOdEw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120411/bf012543/attachment.pl>

From lars.dalby at gmail.com  Wed Apr 11 14:56:22 2012
From: lars.dalby at gmail.com (Lars Dalby)
Date: Wed, 11 Apr 2012 05:56:22 -0700 (PDT)
Subject: [R-sig-Geo] Problems with NA values and lm() in calc() in raster
	package
Message-ID: <1334148982486-7455990.post@n2.nabble.com>

Dear list

I am trying to do a linear regression of the values in a brick with time
using the calc function in the raster package.

In some of my raster layers in the brick I have NA values and this causes
problems.

Any hints on how to work around this?

require(raster)
# From help to calc function
# create data
r <- raster(nrow=10, ncol=10)
s1 <- s2<- list()
for (i in 1:12) {
	s1[i] <- setValues(r, rnorm(ncell(r), i, 3) )
	s2[i] <- setValues(r, rnorm(ncell(r), i, 3) )
}
s1 <- stack(s1)
s2 <- stack(s2)
s <- stack(s1, s2)
# regression of values in one brick (or stack) with 'time'
time <- 1:nlayers(s)
fun <- function(x) { lm(x ~ time)$coefficients[2] }
x2 <- calc(s, fun)
# This runs fine.

# Now if I introduce a cell with only NA values in the stack:
s[1] <- NA
x3 <- calc(s, fun) # returns an error: Error in .calcTest(x[1:5], fun,
na.rm, forcefun, forceapply) : cannot use this function

# Setting na.option = na.exclude in the function:
fun2 <- function(x) { lm(x ~ time, na.option = na.exclude)$coefficients[2] } 
x4 <- calc(s, fun2) # same error as above

s <- stack(s1, s2) # resetting the stack
r <- raster(nrow=10, ncol=10)
r <- setValues(r, rnorm(ncell(r), 1, 3) )
r[1] <- NA
s <- stack(s, r) # Now only one of the rasters has a NA value
time <- nlayers(s) 
x5 <- calc(s, fun) # Same error message
x6 <- calc(s, fun2) # Same error message

sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_GB.UTF-8/en_GB.UTF-8/en_GB.UTF-8/C/en_GB.UTF-8/en_GB.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] RColorBrewer_1.0-5 raster_1.9-82      sp_0.9-98         

loaded via a namespace (and not attached):
[1] grid_2.15.0    lattice_0.20-6 tools_2.15.0

Best regards
Lars

Lars Dalby
Msc. PhD student
Ecoinformatics & Biodiversity
Department of Bioscience, Aarhus University
Denmark

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Problems-with-NA-values-and-lm-in-calc-in-raster-package-tp7455990p7455990.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Jose.M.Pavia at uv.es  Wed Apr 11 15:25:34 2012
From: Jose.M.Pavia at uv.es (Jose.M.Pavia at uv.es)
Date: Wed, 11 Apr 2012 15:25:34 +0200 (CEST)
Subject: [R-sig-Geo] Same scale legend in two or more maps
Message-ID: <7452296974pavia@uv.es>

Dear list,
This is the issue.

The same country in three different moments of time.
The country is divided in polygons. 
The division in polygons is not the same in the three moments of time.

We have a variable observed in each polygon in the three moments and
we want to construct a map for each moment using the same scale in the
three moments. This does not seem to be a problem. 
We reach this by:
rrt <- c(v1,v2,v3) # variables to map
brks <- quantile(rrt, seq(0,1,1/100)) # breaks
cols <- grey((length(brks):2)/length(brks)) # color palette

And then we plot the maps in the same window:
par(mfrow=c(1,3), mar=c(0,0,0,0))
plot(map1, col=cols[findInterval(v1, brks, all.inside=TRUE)])
plot(map2, col=cols[findInterval(v2, brks, all.inside=TRUE)])
plot(mpa3, col=cols[findInterval(v3, brks, all.inside=TRUE)])

The problem is using a same (grey) scale legend for the three maps and
just one!

Any idea?
Thanks in advance

Jose M Pavia


From r.hijmans at gmail.com  Wed Apr 11 20:00:43 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 11 Apr 2012 11:00:43 -0700
Subject: [R-sig-Geo] Problems with NA values and lm() in calc() in
	raster package
In-Reply-To: <1334148982486-7455990.post@n2.nabble.com>
References: <1334148982486-7455990.post@n2.nabble.com>
Message-ID: <CANtt_hwUsBLFpfJEaC_7kMD9R_B2cqqF9gB+ZJDppTYpYcFHFQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120411/df771cdc/attachment.pl>

From kji2080 at gmail.com  Thu Apr 12 03:00:28 2012
From: kji2080 at gmail.com (Jooil Kim)
Date: Wed, 11 Apr 2012 18:00:28 -0700
Subject: [R-sig-Geo] Overlaying SpatialGridDataFrames over
	SpatialGridDataFrames?
Message-ID: <C2186FF85D0E468A98F981086BFF146D@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120411/ea758eda/attachment.pl>

From edzer.pebesma at uni-muenster.de  Thu Apr 12 09:25:30 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 12 Apr 2012 09:25:30 +0200
Subject: [R-sig-Geo] Overlaying SpatialGridDataFrames over
	SpatialGridDataFrames?
In-Reply-To: <C2186FF85D0E468A98F981086BFF146D@gmail.com>
References: <C2186FF85D0E468A98F981086BFF146D@gmail.com>
Message-ID: <4F86836A.7020802@uni-muenster.de>

does

sPDF_grid <- overlay(as(sGDF_in, "SpatialPointsDataFrame"), sGDF_ref)

work? Until a couple of months ago, this coercion would be automatic.

On 04/12/2012 03:00 AM, Jooil Kim wrote:
> Hello list,  
> 
> I've run into a baffling problem, and I hope someone can help.
> 
> The last few months I have been successfully overlaying a SpatialGridDataFrame object over a SpatialGridDataFrame object. Here's the code I have been using to do this:
> 
>         sPDF_grid <- overlay(sGDF_in, sGDF_ref)
> gridded(sPDF_grid) <- TRUE
> sGDF_grid <- as(sPDF_grid, "SpatialGridDataFrame")
> 
> 
> Today, trying to run this code again, I run into an error telling me that no method exists for overlaying an sGDF object over an sGDF object. This seems true, when I look at the documentation.
> 
> What I have been doing is converting "sGDF_in" to "sGDF_grid", with grid definitions matched to "sGDF_ref". All of the sGDF objects have the same grid sizes (1?? x 1??), but are different in the longitude range.
> 
> I'm not exactly sure what change prompted the "overlay" function to start acting differently, let alone why things worked before. I think the code originally came from some examples at a blog or a vignette, but I can't remember anymore.
> 
> I've just tried updating to the latest R version (2.15.0, 64bit) from 2.14.1(I think), and updated to the latest sp packages, but same problems. I'm on Mac (OSX Lion, 10.7.3, 2.26 GHz Intel C2D, 4GB ram).
> 
> Any ideas as to what might be going on?
> 
> Thanks,
> 
> Jooil
> 
> --  
> Jooil Kim
> Postdoc Fellow
> Scripps Institution of Oceanography, UC San Diego
> Mailing address:
> 9500 Gilman Drive # 0244
> La Jolla, CA 92093-0244, USA
> For FedEx/UPS:
> 8675 Discovery Way, Vaughan Hall Rm. 447
> La Jolla, CA 92037, USA
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From saldanha.plangeo at gmail.com  Thu Apr 12 16:06:06 2012
From: saldanha.plangeo at gmail.com (Raphael Saldanha)
Date: Thu, 12 Apr 2012 11:06:06 -0300
Subject: [R-sig-Geo] Points to raster
Message-ID: <CACSWb43N3_H0ZkVzOpzCsB-ELcTtNZcY1K3VBx3hVSKLRGa7UA@mail.gmail.com>

Hi!

Which is the best way to convert a list of points to a raster? Bellow
I have a excerpt from my 'elev' object.

           x       y    elev
239937.9 7658988 407.079
239937.9 7658968 411.561
239937.9 7658948 415.924
239937.9 7658928 415.480
239937.9 7658908 414.896
239937.9 7658888 408.602
239937.9 7658868 402.261
239937.9 7658848 393.956
239937.9 7658828 385.692
239937.9 7658808 379.095
239937.9 7658788 372.509


Thanks in advance,

Raphael Saldanha
saldanha.plangeo at gmail.com


From mdsumner at gmail.com  Thu Apr 12 16:37:20 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 13 Apr 2012 00:37:20 +1000
Subject: [R-sig-Geo] Points to raster
In-Reply-To: <CACSWb43N3_H0ZkVzOpzCsB-ELcTtNZcY1K3VBx3hVSKLRGa7UA@mail.gmail.com>
References: <CACSWb43N3_H0ZkVzOpzCsB-ELcTtNZcY1K3VBx3hVSKLRGa7UA@mail.gmail.com>
Message-ID: <CAAcGz99OvM0cFtYEhRYj0LWQhL7qSGLkB6=dEEEKPqfnr8hmPQ@mail.gmail.com>

The sp and raster packages both have pathways for this.

library(sp)
coordinates(elev) <- c("x", "y")
gridded(elev) <- TRUE

See vignette("sp")

Or, using raster package:

library(raster)
r.elev <- rasterFromXYZ(elev)

In either case, if your coordinates aren't quite regular you'll need
to explore other options, like the 'tolerance' argument to
?SpatialPixelsDataFrame or the 'digits' argument to ?rasterFromXYZ.

Cheers, Mike.

On Fri, Apr 13, 2012 at 12:06 AM, Raphael Saldanha
<saldanha.plangeo at gmail.com> wrote:
> Hi!
>
> Which is the best way to convert a list of points to a raster? Bellow
> I have a excerpt from my 'elev' object.
>
> ? ? ? ? ? x ? ? ? y ? ?elev
> 239937.9 7658988 407.079
> 239937.9 7658968 411.561
> 239937.9 7658948 415.924
> 239937.9 7658928 415.480
> 239937.9 7658908 414.896
> 239937.9 7658888 408.602
> 239937.9 7658868 402.261
> 239937.9 7658848 393.956
> 239937.9 7658828 385.692
> 239937.9 7658808 379.095
> 239937.9 7658788 372.509
>
>
> Thanks in advance,
>
> Raphael Saldanha
> saldanha.plangeo at gmail.com
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From saldanha.plangeo at gmail.com  Thu Apr 12 16:41:17 2012
From: saldanha.plangeo at gmail.com (Raphael Saldanha)
Date: Thu, 12 Apr 2012 11:41:17 -0300
Subject: [R-sig-Geo] Points to raster
In-Reply-To: <CAAcGz99OvM0cFtYEhRYj0LWQhL7qSGLkB6=dEEEKPqfnr8hmPQ@mail.gmail.com>
References: <CACSWb43N3_H0ZkVzOpzCsB-ELcTtNZcY1K3VBx3hVSKLRGa7UA@mail.gmail.com>
	<CAAcGz99OvM0cFtYEhRYj0LWQhL7qSGLkB6=dEEEKPqfnr8hmPQ@mail.gmail.com>
Message-ID: <CACSWb42de4hv3kKEuvvwMe2NFpNHY4-bUrshw30aa7uUG=4Maw@mail.gmail.com>

Thanks Michael! This is my first approach for dealing with rasters inside R.

On Thu, Apr 12, 2012 at 11:37 AM, Michael Sumner <mdsumner at gmail.com> wrote:
> The sp and raster packages both have pathways for this.
>
> library(sp)
> coordinates(elev) <- c("x", "y")
> gridded(elev) <- TRUE
>
> See vignette("sp")
>
> Or, using raster package:
>
> library(raster)
> r.elev <- rasterFromXYZ(elev)
>
> In either case, if your coordinates aren't quite regular you'll need
> to explore other options, like the 'tolerance' argument to
> ?SpatialPixelsDataFrame or the 'digits' argument to ?rasterFromXYZ.
>
> Cheers, Mike.
>
> On Fri, Apr 13, 2012 at 12:06 AM, Raphael Saldanha
> <saldanha.plangeo at gmail.com> wrote:
>> Hi!
>>
>> Which is the best way to convert a list of points to a raster? Bellow
>> I have a excerpt from my 'elev' object.
>>
>> ? ? ? ? ? x ? ? ? y ? ?elev
>> 239937.9 7658988 407.079
>> 239937.9 7658968 411.561
>> 239937.9 7658948 415.924
>> 239937.9 7658928 415.480
>> 239937.9 7658908 414.896
>> 239937.9 7658888 408.602
>> 239937.9 7658868 402.261
>> 239937.9 7658848 393.956
>> 239937.9 7658828 385.692
>> 239937.9 7658808 379.095
>> 239937.9 7658788 372.509
>>
>>
>> Thanks in advance,
>>
>> Raphael Saldanha
>> saldanha.plangeo at gmail.com
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
> --
> Michael Sumner
> Institute for Marine and Antarctic Studies, University of Tasmania
> Hobart, Australia
> e-mail: mdsumner at gmail.com



-- 
Atenciosamente,

Raphael Saldanha
saldanha.plangeo at gmail.com


From lars.dalby at gmail.com  Thu Apr 12 19:54:14 2012
From: lars.dalby at gmail.com (Lars Dalby)
Date: Thu, 12 Apr 2012 10:54:14 -0700 (PDT)
Subject: [R-sig-Geo] Problems with NA values and lm() in calc() in
	raster package
In-Reply-To: <CANtt_hwUsBLFpfJEaC_7kMD9R_B2cqqF9gB+ZJDppTYpYcFHFQ@mail.gmail.com>
References: <1334148982486-7455990.post@n2.nabble.com>
	<CANtt_hwUsBLFpfJEaC_7kMD9R_B2cqqF9gB+ZJDppTYpYcFHFQ@mail.gmail.com>
Message-ID: <1334253254193-7460272.post@n2.nabble.com>

Hi Robert

Thanks for your reply!
Your suggestion solved the problem, because in my case I do have cells where
there is NA in all layers.

But, I'm still a little puzzled about why it is not running in the case
where there is NA in a cell in only one of the layers. 
lm() normally works in a case like this, so I am not sure why it is
returning an error here?


require(raster) 
# From help to calc function 
# create data 
r <- raster(nrow=10, ncol=10) 
s1 <- s2<- list() 
for (i in 1:12) { s1[i] <- setValues(r, rnorm(ncell(r), i, 3) )
	s2[i] <- setValues(r, rnorm(ncell(r), i, 3) )} 
s1 <- stack(s1) 
s2 <- stack(s2) 
s <- stack(s1, s2) 
r <- setValues(r, rnorm(ncell(r), 1, 3) ) 
plot(r)
r[1] <- NA #Setting top left corner to NA
plot(r)
s <- stack(s, r) # Now only one of the rasters has a NA value 

# So this is equivalent to doing a lm with one NA value:
a <- rnorm(10, 5, 2)
b <- c(1:9, NA)
lm(a~b) # This seem to work ok. 

# But with the brick:

fun <- function(x) { lm(x ~ time)$coefficients[2] }

time <- nlayers(s) 
x5 <- calc(s, fun) # Error in model.frame.default(formula = x ~ time,
drop.unused.levels = TRUE) : variable lengths differ (found for 'time')

Best regards
Lars

Lars Dalby 
Msc. PhD student 
Ecoinformatics & Biodiversity 
Department of Bioscience, Aarhus University 
Denmark


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Problems-with-NA-values-and-lm-in-calc-in-raster-package-tp7455990p7460272.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From kji2080 at gmail.com  Thu Apr 12 20:06:09 2012
From: kji2080 at gmail.com (Jooil Kim)
Date: Thu, 12 Apr 2012 11:06:09 -0700
Subject: [R-sig-Geo] Overlaying SpatialGridDataFrames over
 SpatialGridDataFrames? (Edzer Pebesma)
In-Reply-To: <mailman.13.1334224805.2738.r-sig-geo@r-project.org>
References: <mailman.13.1334224805.2738.r-sig-geo@r-project.org>
Message-ID: <942D15DDF08A43D2956C767DADA18E51@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120412/9c232e9f/attachment.pl>

From p.vanbreugel at gmail.com  Fri Apr 13 00:07:23 2012
From: p.vanbreugel at gmail.com (Paulo van Breugel)
Date: Fri, 13 Apr 2012 00:07:23 +0200
Subject: [R-sig-Geo] spgrass6 with GRASS 7
Message-ID: <CAGrkfcKtKFYcxrxSDyxb+Vq6wLCaUjjii1G6AGLTKxGckTGuqA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120413/d6d14544/attachment.pl>

From Roger.Bivand at nhh.no  Fri Apr 13 00:23:14 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 13 Apr 2012 00:23:14 +0200 (CEST)
Subject: [R-sig-Geo] spgrass6 with GRASS 7
In-Reply-To: <CAGrkfcKtKFYcxrxSDyxb+Vq6wLCaUjjii1G6AGLTKxGckTGuqA@mail.gmail.com>
References: <CAGrkfcKtKFYcxrxSDyxb+Vq6wLCaUjjii1G6AGLTKxGckTGuqA@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1204130019150.6830@reclus.nhh.no>

On Fri, 13 Apr 2012, Paulo van Breugel wrote:

> Hi,
>
> I am working on Ubuntu amd64, R 2.15.0, GRASS 7.0
>
> I am trying to import a GRASS raster layer in R, but I am getting the
> following error message:

Which version of spgrass6? CRAN version 0.7-10 released March 18, 2012 
should have resolved this issue.

Roger

>
>> mydata <- readRAST6(vname=c("map1","map2"), useGDAL=F)Command: r.info
> Description: Outputs basic information about a raster map.
> Keywords: raster, metadata, history
> Parameters:
>  name: map, type: string, required: yes, multiple: no
>  keydesc: name, keydesc_count: 1
> [Name of raster map]
> Flags:
>  name: g [Print raster array information only] {FALSE}
>  name: r [Print range only] {FALSE}
>  name: e [Print extended metadata information only] {FALSE}
>  name: h [Print raster history instead of info] {FALSE}
>  name: verbose [Verbose module output] {FALSE}
>  name: quiet [Quiet module output] {FALSE}Error in doGRASS(cmd, flags
> = flags, ..., parameters = parameters, echoCmd = echoCmd) :
>  Invalid flag value: t
>
>
> Importing GRASS rasters works fine when running R within GRASS 6.4
>
> Rgds,
>
> Paulo
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From jgrn at illinois.edu  Fri Apr 13 00:24:15 2012
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Thu, 12 Apr 2012 17:24:15 -0500
Subject: [R-sig-Geo] gain/offset for stack?
Message-ID: <CABG0rfv9EM005Lg1ibuFRCLtNwuFpF82E0AzaVGaaPcgLVAOdQ@mail.gmail.com>

r-sig-geo'ers:

Does anyone know if I can set a per-layer gain and offset for a raster
brick or stack (vs. a raster)?

--j

-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
http://www.geog.illinois.edu/people/JonathanGreenberg.html


From Ahmed.Hafi at daff.gov.au  Fri Apr 13 03:13:24 2012
From: Ahmed.Hafi at daff.gov.au (Hafi, Ahmed)
Date: Fri, 13 Apr 2012 11:13:24 +1000
Subject: [R-sig-Geo] can't load rgdal on mac osx [SEC=UNCLASSIFIED]
Message-ID: <4F21D31A72ADA24583E934F68262EBCE0EEEDEB4@ACT001CL03EX02.agdaff.gov.au>

Dear list members,

 

I am running R on a macbook pro with mac osx lion and trying to do some
spatial modelling with R. I have run into a problem in loading rgdal. I
understand that the installation of rgdal in mac is different from other
packages and followed the instructions given in CRAN rgdal page updated
in last January. The rgdal downloaded successfully but didn't appear to
get installed successfully and failed to load.  I have copied the screen
print segment below. Is it because of the difference in mac osx version
I am using? I would appreciate if someone could interpret it and suggest
what should I do to get rgdal loaded.  I am desperate to use the
functions of this package.

 

setRepositories(ind=1:2)

>install.packages('rgdal')

trying URL
'http://www.stats.ox.ac.uk/pub/RWin/bin/macosx/leopard/contrib/2.15/rgda
l_0.7-8.tgz'

Content type 'application/x-gzip' length 13818239 bytes (13.2 Mb)

opened URL

==================================================

downloaded 13.2 Mb

 

 

The downloaded binary packages are in

 
/var/folders/17/452p64r17tj_p4y6gmpw5h4c0000gn/T//Rtmp3v4WEZ/downloaded_
packages

>library(rgdal)

Error in dyn.load(file, DLLpath = DLLpath, ...) : 

unable to load shared object
'/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rgdal/l
ibs/x86_64/rgdal.so':

dlopen(/Library/Frameworks/R.framework/Versions/2.15/Resources/library/r
gdal/libs/x86_64/rgdal.so, 6): Library not loaded:
/Library/Frameworks/R.framework/Versions/2.14/Resources/lib/libR.dylib

  Referenced from:
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rgdal/li
bs/x86_64/rgdal.so

  Reason: image not found

Error: package/namespace load failed for 'rgdal'

 

**********************************************************



thanks



Ahmed Hafi 

Senior Economist |   ABARES   |   Biosecurity and Farm Analysis



Phone +61 2 6272 2081    

Email ahmed.hafi at daff.gov.au <mailto:sally.thorpe at abare-brs.gov.au> 



Australian Bureau of Agricultural and Resource Economics and Sciences

Department of Agriculture, Fisheries and Forestry

18 Marcus Clarke Street, Canberra ACT 2601 Australia

GPO Box 1563 Canberra ACT 2601 Australia



daff.gov.au/abares



  <http://twitter.com/abares>  
<http://www.facebook.com/pages/Australian-Bureau-of-Agricultural-Resourc
e-Economics-Sciences-ABARES/157609254289602> 





------
------
IMPORTANT - This email and any attachments have been issued by the Australian Government Department of Agriculture, Fisheries and Forestry (DAFF). The material transmitted is for the use of the intended recipient only and may contain confidential, legally privileged, copyright or personal information. You should not copy, use or disclose it without authorisation from DAFF. It is your responsibility to check any attachments for viruses and defects before opening or forwarding them.

If you are not an intended recipient, please contact the sender of this email at once by return email and then delete both messages. Unintended recipients must not copy, use, disclose, rely on or publish this email or attachments. DAFF is not liable for any loss or damage resulting from unauthorised use or dissemination of, or any reliance on, this email or attachments. 

If you have received this e-mail as part of a valid mailing list and no longer want to receive a message such as this one, advise the sender by return e-mail accordingly.

This notice should not be deleted or altered.

------


------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120413/21733d55/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 3653 bytes
Desc: image001.jpg
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120413/21733d55/attachment.jpe>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 2995 bytes
Desc: image002.jpg
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120413/21733d55/attachment-0001.jpe>

From p.vanbreugel at gmail.com  Fri Apr 13 09:00:39 2012
From: p.vanbreugel at gmail.com (Paulo van Breugel)
Date: Fri, 13 Apr 2012 09:00:39 +0200
Subject: [R-sig-Geo] spgrass6 with GRASS 7
In-Reply-To: <alpine.LRH.2.02.1204130019150.6830@reclus.nhh.no>
References: <CAGrkfcKtKFYcxrxSDyxb+Vq6wLCaUjjii1G6AGLTKxGckTGuqA@mail.gmail.com>
	<alpine.LRH.2.02.1204130019150.6830@reclus.nhh.no>
Message-ID: <4F87CF17.2070509@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120413/3e1d9afd/attachment.pl>

From Roger.Bivand at nhh.no  Fri Apr 13 09:55:51 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 13 Apr 2012 09:55:51 +0200 (CEST)
Subject: [R-sig-Geo] can't load rgdal on mac osx [SEC=UNCLASSIFIED]
In-Reply-To: <4F21D31A72ADA24583E934F68262EBCE0EEEDEB4@ACT001CL03EX02.agdaff.gov.au>
References: <4F21D31A72ADA24583E934F68262EBCE0EEEDEB4@ACT001CL03EX02.agdaff.gov.au>
Message-ID: <alpine.LRH.2.02.1204130939150.8338@reclus.nhh.no>

The problem that you report is caused by a terminal hardware failure of 
the Leopard machine used to build the CRAN Extras OSX binaries, so that 
rgdal and rgeos binaries for OSX have not been built for R 2.15. If OSX 
users of the CRAN Extras rgdal and rgeos binaries upgrade to 2.15 and 
install the apparently correct 2.15 rgdal (or rgeos), it will fail to load 
because it was itself built against R 2.14 - the case reported in this 
posting.

Until a new build machine is in place, please revert to R 2.14, or delay 
upgrading to 2.15 if the CRAN extras binary packages are your prefered 
method of installation. More information will follow as soon as the 
situation is normalised.

R 2.15 users who install rgdal from source linking to the Kyngchaos GDAL 
frameworks will be able to use rgdal in 2.15.

We trust that this has nothing to do with the date - the older Leopard OSX 
machine failed about two weeks ago!

Roger

On Fri, 13 Apr 2012, Hafi, Ahmed wrote:

> Dear list members,
>
> I am running R on a macbook pro with mac osx lion and trying to do some
> spatial modelling with R. I have run into a problem in loading rgdal. I
> understand that the installation of rgdal in mac is different from other
> packages and followed the instructions given in CRAN rgdal page updated
> in last January. The rgdal downloaded successfully but didn't appear to
> get installed successfully and failed to load.  I have copied the screen
> print segment below. Is it because of the difference in mac osx version
> I am using? I would appreciate if someone could interpret it and suggest
> what should I do to get rgdal loaded.  I am desperate to use the
> functions of this package.
>
>
>
> setRepositories(ind=1:2)
>
>> install.packages('rgdal')
>
> trying URL
> 'http://www.stats.ox.ac.uk/pub/RWin/bin/macosx/leopard/contrib/2.15/rgda
> l_0.7-8.tgz'
>
> Content type 'application/x-gzip' length 13818239 bytes (13.2 Mb)
>
> opened URL
>
> ==================================================
>
> downloaded 13.2 Mb
>
>
>
>
>
> The downloaded binary packages are in
>
>
> /var/folders/17/452p64r17tj_p4y6gmpw5h4c0000gn/T//Rtmp3v4WEZ/downloaded_
> packages
>
>> library(rgdal)
>
> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>
> unable to load shared object
> '/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rgdal/l
> ibs/x86_64/rgdal.so':
>
> dlopen(/Library/Frameworks/R.framework/Versions/2.15/Resources/library/r
> gdal/libs/x86_64/rgdal.so, 6): Library not loaded:
> /Library/Frameworks/R.framework/Versions/2.14/Resources/lib/libR.dylib
>
>  Referenced from:
> /Library/Frameworks/R.framework/Versions/2.15/Resources/library/rgdal/li
> bs/x86_64/rgdal.so
>
>  Reason: image not found
>
> Error: package/namespace load failed for 'rgdal'
>
>
>
> **********************************************************
>
>
>
> thanks
>
>
>
> Ahmed Hafi
>
> Senior Economist |   ABARES   |   Biosecurity and Farm Analysis
>
>
>
> Phone +61 2 6272 2081
>
> Email ahmed.hafi at daff.gov.au <mailto:sally.thorpe at abare-brs.gov.au>
>
>
>
> Australian Bureau of Agricultural and Resource Economics and Sciences
>
> Department of Agriculture, Fisheries and Forestry
>
> 18 Marcus Clarke Street, Canberra ACT 2601 Australia
>
> GPO Box 1563 Canberra ACT 2601 Australia
>
>
>
> daff.gov.au/abares
>
>
>
>  <http://twitter.com/abares>
> <http://www.facebook.com/pages/Australian-Bureau-of-Agricultural-Resourc
> e-Economics-Sciences-ABARES/157609254289602>
>
>
>
>
>
> ------
> ------
> IMPORTANT - This email and any attachments have been issued by the Australian Government Department of Agriculture, Fisheries and Forestry (DAFF). The material transmitted is for the use of the intended recipient only and may contain confidential, legally privileged, copyright or personal information. You should not copy, use or disclose it without authorisation from DAFF. It is your responsibility to check any attachments for viruses and defects before opening or forwarding them.
>
> If you are not an intended recipient, please contact the sender of this email at once by return email and then delete both messages. Unintended recipients must not copy, use, disclose, rely on or publish this email or attachments. DAFF is not liable for any loss or damage resulting from unauthorised use or dissemination of, or any reliance on, this email or attachments.
>
> If you have received this e-mail as part of a valid mailing list and no longer want to receive a message such as this one, advise the sender by return e-mail accordingly.
>
> This notice should not be deleted or altered.
>
> ------
>
>
> ------
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From imranserver at yahoo.com  Fri Apr 13 15:42:44 2012
From: imranserver at yahoo.com (Muhammad Imran)
Date: Fri, 13 Apr 2012 06:42:44 -0700 (PDT)
Subject: [R-sig-Geo] How to find GWR prediction variance as a measure of
	uncertainty?
Message-ID: <1334324564.31164.YahooMailClassic@web161306.mail.bf1.yahoo.com>


Hello,

Can anybody confirm if the prediction variance of GWR calculated as sqrt(var(mod.gwr$SDF$pred.se)) is right?

Thanks and regards,
Muhammad Imran


From oliveirajc at ufv.br  Fri Apr 13 16:23:18 2012
From: oliveirajc at ufv.br (julio cesar oliveira)
Date: Fri, 13 Apr 2012 11:23:18 -0300
Subject: [R-sig-Geo] problem stack (RasterStack)
Message-ID: <CAG+u5gq-TqD=AwLY9SjiVaFoiT22vkDJsYck+RCiM1BbNrDCyw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120413/ac6e643e/attachment.pl>

From jacobvanetten at yahoo.com  Fri Apr 13 16:35:51 2012
From: jacobvanetten at yahoo.com (Jacob van Etten)
Date: Fri, 13 Apr 2012 15:35:51 +0100 (BST)
Subject: [R-sig-Geo] problem stack (RasterStack)
In-Reply-To: <CAG+u5gq-TqD=AwLY9SjiVaFoiT22vkDJsYck+RCiM1BbNrDCyw@mail.gmail.com>
References: <CAG+u5gq-TqD=AwLY9SjiVaFoiT22vkDJsYck+RCiM1BbNrDCyw@mail.gmail.com>
Message-ID: <1334327751.92106.YahooMailNeo@web29705.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120413/4b0660eb/attachment.pl>

From Jose.M.Pavia at uv.es  Fri Apr 13 16:42:07 2012
From: Jose.M.Pavia at uv.es (Jose.M.Pavia at uv.es)
Date: Fri, 13 Apr 2012 16:42:07 +0200 (CEST)
Subject: [R-sig-Geo] Same scale legend in two or more maps
Message-ID: <9299128453pavia@uv.es>

Dear list,

I have a problem drawing my data in a map.
Anybody can help me?

This is the issue.

The same country in three different moments of time.
The country is divided in polygons. 
The division in polygons is not the same in the three moments of time.

We have a variable observed in each polygon in the three moments and
we want to construct a map for each moment using the same scale in the
three moments. This does not seem to be a problem. 
We reach this by:
rrt <- c(v1,v2,v3) # variables to map
brks <- quantile(rrt, seq(0,1,1/100)) # breaks
cols <- grey((length(brks):2)/length(brks)) # color palette

And then we plot the maps in the same window:
par(mfrow=c(1,3), mar=c(0,0,0,0))
plot(map1, col=cols[findInterval(v1, brks, all.inside=TRUE)])
plot(map2, col=cols[findInterval(v2, brks, all.inside=TRUE)])
plot(map3, col=cols[findInterval(v3, brks, all.inside=TRUE)])

The problem is using a same (grey) scale legend for the three maps and
just one!

Any idea?
Thanks in advance

Jose M Pavia


From r.hijmans at gmail.com  Fri Apr 13 19:06:12 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 13 Apr 2012 10:06:12 -0700
Subject: [R-sig-Geo] Problems with NA values and lm() in calc() in
	raster package
In-Reply-To: <1334253254193-7460272.post@n2.nabble.com>
References: <1334148982486-7455990.post@n2.nabble.com>
	<CANtt_hwUsBLFpfJEaC_7kMD9R_B2cqqF9gB+ZJDppTYpYcFHFQ@mail.gmail.com>
	<1334253254193-7460272.post@n2.nabble.com>
Message-ID: <CANtt_hzGAbC8TeWcXWO8mmx=Y6RKmZS982t68uP=ePwvQ6A+5w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120413/a9d669d2/attachment.pl>

From mike.sukmanowsky at gmail.com  Sat Apr 14 06:01:52 2012
From: mike.sukmanowsky at gmail.com (Mike Sukmanowsky)
Date: Sat, 14 Apr 2012 00:01:52 -0400
Subject: [R-sig-Geo] Storing Multiple spplots in List
Message-ID: <CAOH6cu63SmL2qtWN=zEZSC8z9DgELer+Ozc8d-7QanbVaO+_9g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120414/3df4f4d1/attachment.pl>

From imranserver at yahoo.com  Sun Apr 15 01:10:14 2012
From: imranserver at yahoo.com (Muhammad Imran)
Date: Sat, 14 Apr 2012 16:10:14 -0700 (PDT)
Subject: [R-sig-Geo] How to find GWR prediction variance as a measure of
	uncertainty?
Message-ID: <1334445014.42519.YahooMailClassic@web161303.mail.bf1.yahoo.com>


Hi list fellows,

Do someone have any idea to calculate the standard deviation of GWR predictions (prediction variances), similary as we calculate with the sqrt of prediction variance provided by kriging?

Would be thankful for any help?

Best regards

Imran


From jefunes at gmail.com  Sun Apr 15 05:41:55 2012
From: jefunes at gmail.com (Jose Funes)
Date: Sat, 14 Apr 2012 23:41:55 -0400
Subject: [R-sig-Geo] Export images from list of pixel images
Message-ID: <CAG1eJiFw2mc6BcsbSySsQb4eKdFmfoDFKy+sQEnKnu+vF-C65Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120414/cc594a46/attachment.pl>

From mdsumner at gmail.com  Sun Apr 15 06:10:11 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Sun, 15 Apr 2012 14:10:11 +1000
Subject: [R-sig-Geo] Export images from list of pixel images
In-Reply-To: <CAG1eJiFw2mc6BcsbSySsQb4eKdFmfoDFKy+sQEnKnu+vF-C65Q@mail.gmail.com>
References: <CAG1eJiFw2mc6BcsbSySsQb4eKdFmfoDFKy+sQEnKnu+vF-C65Q@mail.gmail.com>
Message-ID: <CAAcGz9_dBQ3QL_agBAJySMMrMZGsHEQ+WTDwKy7JTV555e_bbg@mail.gmail.com>

Here's one way:

library(spatstat)

data(lansing)
rrisklan <- relrisk(lansing))

names(rrisklan)
[1] "blackoak" "hickory"  "maple"    "misc"     "redoak"   "whiteoak"

library(maptools)
## set up first grid, with first attribute "blackoak"
g <- as(rrisklan[[1]], "SpatialGridDataFrame")

names(g) <- "blackoak"

if (length(rrisklan) > 1) {  ## safety check
   for (i in 2:length(rrisklan)) {
     g[[names(rrisklan)[i]]] <- as(rrisklan[[i]], "SpatialGridDataFrame")[[1]]
  }
}

Compare:

plot(rrisklan)
spplot(g)

With the rgdal package you can now writeGDAL(g, "myfile.tif") but
whether your target can handle multi-attribute GeoTIFF is another
matter (the last few releases of ArcGIS use GDAL anyway so presumably
it would be fine).

Cheers, Mike.


On Sun, Apr 15, 2012 at 1:41 PM, Jose Funes <jefunes at gmail.com> wrote:
> Dear all,
> I have a list of pixel images that I would like to export to in a raster
> format, i.e. GRID, tif, etc, to be able to visualize them in ArcGIS/QGIS
> but I am not sure how to convert them to SpatialGridDataFrame to be able to
> export them as tif using writeGGAL. For example:
>
> #########
> data(lansing)
> rrisklan <- relrisk(lansing))
> #####################
>
> The last yield a list of pixel images (rrisklan) with spatially varying
> risk for each specie, how could I convert them to a appropriate format to
> be able to export them as TIF.
>
> Thanks,
> Jose Funes
> JHU
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From Roger.Bivand at nhh.no  Sun Apr 15 15:50:33 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 15 Apr 2012 15:50:33 +0200 (CEST)
Subject: [R-sig-Geo] can't load rgdal on mac osx [SEC=UNCLASSIFIED]
In-Reply-To: <alpine.LRH.2.02.1204130939150.8338@reclus.nhh.no>
References: <4F21D31A72ADA24583E934F68262EBCE0EEEDEB4@ACT001CL03EX02.agdaff.gov.au>
	<alpine.LRH.2.02.1204130939150.8338@reclus.nhh.no>
Message-ID: <alpine.LRH.2.02.1204151545090.19242@reclus.nhh.no>

CRAN Extras now has versions of rgdal and rgeos built with Lion for R 
2.15. It is fairly likely that these will work with [Snow] Leopard, but 
because Apple has dropped the Leopard SDK, this cannot be guaranteed, and 
the risk of difficulties for Leopard users will increase as GDAL and GEOS 
are remade under Lion.

Please report back (possibly off-list) if the 2.15 CRAN Extras binary 
packages work or do not work, with details of your OSX version.

Thanks again to Prof. Brian Ripley for his support!

Roger

On Fri, 13 Apr 2012, Roger Bivand wrote:

> The problem that you report is caused by a terminal hardware failure of the 
> Leopard machine used to build the CRAN Extras OSX binaries, so that rgdal and 
> rgeos binaries for OSX have not been built for R 2.15. If OSX users of the 
> CRAN Extras rgdal and rgeos binaries upgrade to 2.15 and install the 
> apparently correct 2.15 rgdal (or rgeos), it will fail to load because it was 
> itself built against R 2.14 - the case reported in this posting.
>
> Until a new build machine is in place, please revert to R 2.14, or delay 
> upgrading to 2.15 if the CRAN extras binary packages are your prefered method 
> of installation. More information will follow as soon as the situation is 
> normalised.
>
> R 2.15 users who install rgdal from source linking to the Kyngchaos GDAL 
> frameworks will be able to use rgdal in 2.15.
>
> We trust that this has nothing to do with the date - the older Leopard OSX 
> machine failed about two weeks ago!
>
> Roger
>
> On Fri, 13 Apr 2012, Hafi, Ahmed wrote:
>
>> Dear list members,
>> 
>> I am running R on a macbook pro with mac osx lion and trying to do some
>> spatial modelling with R. I have run into a problem in loading rgdal. I
>> understand that the installation of rgdal in mac is different from other
>> packages and followed the instructions given in CRAN rgdal page updated
>> in last January. The rgdal downloaded successfully but didn't appear to
>> get installed successfully and failed to load.  I have copied the screen
>> print segment below. Is it because of the difference in mac osx version
>> I am using? I would appreciate if someone could interpret it and suggest
>> what should I do to get rgdal loaded.  I am desperate to use the
>> functions of this package.
>> 
>> 
>> 
>> setRepositories(ind=1:2)
>> 
>>> install.packages('rgdal')
>> 
>> trying URL
>> 'http://www.stats.ox.ac.uk/pub/RWin/bin/macosx/leopard/contrib/2.15/rgda
>> l_0.7-8.tgz'
>> 
>> Content type 'application/x-gzip' length 13818239 bytes (13.2 Mb)
>> 
>> opened URL
>> 
>> ==================================================
>> 
>> downloaded 13.2 Mb
>> 
>> 
>> 
>> 
>> 
>> The downloaded binary packages are in
>> 
>> 
>> /var/folders/17/452p64r17tj_p4y6gmpw5h4c0000gn/T//Rtmp3v4WEZ/downloaded_
>> packages
>> 
>>> library(rgdal)
>> 
>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>> 
>> unable to load shared object
>> '/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rgdal/l
>> ibs/x86_64/rgdal.so':
>> 
>> dlopen(/Library/Frameworks/R.framework/Versions/2.15/Resources/library/r
>> gdal/libs/x86_64/rgdal.so, 6): Library not loaded:
>> /Library/Frameworks/R.framework/Versions/2.14/Resources/lib/libR.dylib
>>
>>  Referenced from:
>> /Library/Frameworks/R.framework/Versions/2.15/Resources/library/rgdal/li
>> bs/x86_64/rgdal.so
>>
>>  Reason: image not found
>> 
>> Error: package/namespace load failed for 'rgdal'
>> 
>> 
>> 
>> **********************************************************
>> 
>> 
>> 
>> thanks
>> 
>> 
>> 
>> Ahmed Hafi
>> 
>> Senior Economist |   ABARES   |   Biosecurity and Farm Analysis
>> 
>> 
>> 
>> Phone +61 2 6272 2081
>> 
>> Email ahmed.hafi at daff.gov.au <mailto:sally.thorpe at abare-brs.gov.au>
>> 
>> 
>> 
>> Australian Bureau of Agricultural and Resource Economics and Sciences
>> 
>> Department of Agriculture, Fisheries and Forestry
>> 
>> 18 Marcus Clarke Street, Canberra ACT 2601 Australia
>> 
>> GPO Box 1563 Canberra ACT 2601 Australia
>> 
>> 
>> 
>> daff.gov.au/abares
>> 
>> 
>>
>>  <http://twitter.com/abares>
>> <http://www.facebook.com/pages/Australian-Bureau-of-Agricultural-Resourc
>> e-Economics-Sciences-ABARES/157609254289602>
>> 
>> 
>> 
>> 
>> 
>> ------
>> ------
>> IMPORTANT - This email and any attachments have been issued by the 
>> Australian Government Department of Agriculture, Fisheries and Forestry 
>> (DAFF). The material transmitted is for the use of the intended recipient 
>> only and may contain confidential, legally privileged, copyright or 
>> personal information. You should not copy, use or disclose it without 
>> authorisation from DAFF. It is your responsibility to check any attachments 
>> for viruses and defects before opening or forwarding them.
>> 
>> If you are not an intended recipient, please contact the sender of this 
>> email at once by return email and then delete both messages. Unintended 
>> recipients must not copy, use, disclose, rely on or publish this email or 
>> attachments. DAFF is not liable for any loss or damage resulting from 
>> unauthorised use or dissemination of, or any reliance on, this email or 
>> attachments.
>> 
>> If you have received this e-mail as part of a valid mailing list and no 
>> longer want to receive a message such as this one, advise the sender by 
>> return e-mail accordingly.
>> 
>> This notice should not be deleted or altered.
>> 
>> ------
>> 
>> 
>> ------
>> 
>> 
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From lars.dalby at gmail.com  Sun Apr 15 22:47:58 2012
From: lars.dalby at gmail.com (Lars Dalby)
Date: Sun, 15 Apr 2012 13:47:58 -0700 (PDT)
Subject: [R-sig-Geo] Problems with NA values and lm() in calc() in
	raster package
In-Reply-To: <CANtt_hzGAbC8TeWcXWO8mmx=Y6RKmZS982t68uP=ePwvQ6A+5w@mail.gmail.com>
References: <1334148982486-7455990.post@n2.nabble.com>
	<CANtt_hwUsBLFpfJEaC_7kMD9R_B2cqqF9gB+ZJDppTYpYcFHFQ@mail.gmail.com>
	<1334253254193-7460272.post@n2.nabble.com>
	<CANtt_hzGAbC8TeWcXWO8mmx=Y6RKmZS982t68uP=ePwvQ6A+5w@mail.gmail.com>
Message-ID: <1334522878749-7468665.post@n2.nabble.com>

So true. I apologize for that one!

Thanks again for the help.

-Lars

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Problems-with-NA-values-and-lm-in-calc-in-raster-package-tp7455990p7468665.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Ahmed.Hafi at daff.gov.au  Mon Apr 16 01:27:58 2012
From: Ahmed.Hafi at daff.gov.au (Hafi, Ahmed)
Date: Mon, 16 Apr 2012 09:27:58 +1000
Subject: [R-sig-Geo] can't load rgdal on mac osx [SEC=UNCLASSIFIED]
In-Reply-To: <alpine.LRH.2.02.1204151545090.19242@reclus.nhh.no>
References: <4F21D31A72ADA24583E934F68262EBCE0EEEDEB4@ACT001CL03EX02.agdaff.gov.au>
	<alpine.LRH.2.02.1204130939150.8338@reclus.nhh.no>
	<alpine.LRH.2.02.1204151545090.19242@reclus.nhh.no>
Message-ID: <4F21D31A72ADA24583E934F68262EBCE0EF68683@ACT001CL03EX02.agdaff.gov.au>

Dear Roger,

Hope the two lines below still work.

seRepositories(ind=1:2)
install.package('rgdal')


I looked at the folder 'http://www.stats.ox.uk/pub/RWin' and still find
Rgdal.07-8.tar.gz dated 18 January. I am wondering whether its kept
somewhere else.
I will try installing rgdal and  report back to you later.

Thanks

ahmed

-----Original Message-----
From: Roger Bivand [mailto:Roger.Bivand at nhh.no] 
Sent: Sunday, 15 April 2012 11:51 PM
To: Hafi, Ahmed
Cc: Prof Brian Ripley; r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] can't load rgdal on mac osx [SEC=UNCLASSIFIED]

CRAN Extras now has versions of rgdal and rgeos built with Lion for R 
2.15. It is fairly likely that these will work with [Snow] Leopard, but 
because Apple has dropped the Leopard SDK, this cannot be guaranteed,
and 
the risk of difficulties for Leopard users will increase as GDAL and
GEOS 
are remade under Lion.

Please report back (possibly off-list) if the 2.15 CRAN Extras binary 
packages work or do not work, with details of your OSX version.

Thanks again to Prof. Brian Ripley for his support!

Roger

On Fri, 13 Apr 2012, Roger Bivand wrote:

> The problem that you report is caused by a terminal hardware failure
of the 
> Leopard machine used to build the CRAN Extras OSX binaries, so that
rgdal and 
> rgeos binaries for OSX have not been built for R 2.15. If OSX users of
the 
> CRAN Extras rgdal and rgeos binaries upgrade to 2.15 and install the 
> apparently correct 2.15 rgdal (or rgeos), it will fail to load because
it was 
> itself built against R 2.14 - the case reported in this posting.
>
> Until a new build machine is in place, please revert to R 2.14, or
delay 
> upgrading to 2.15 if the CRAN extras binary packages are your prefered
method 
> of installation. More information will follow as soon as the situation
is 
> normalised.
>
> R 2.15 users who install rgdal from source linking to the Kyngchaos
GDAL 
> frameworks will be able to use rgdal in 2.15.
>
> We trust that this has nothing to do with the date - the older Leopard
OSX 
> machine failed about two weeks ago!
>
> Roger
>
> On Fri, 13 Apr 2012, Hafi, Ahmed wrote:
>
>> Dear list members,
>> 
>> I am running R on a macbook pro with mac osx lion and trying to do
some
>> spatial modelling with R. I have run into a problem in loading rgdal.
I
>> understand that the installation of rgdal in mac is different from
other
>> packages and followed the instructions given in CRAN rgdal page
updated
>> in last January. The rgdal downloaded successfully but didn't appear
to
>> get installed successfully and failed to load.  I have copied the
screen
>> print segment below. Is it because of the difference in mac osx
version
>> I am using? I would appreciate if someone could interpret it and
suggest
>> what should I do to get rgdal loaded.  I am desperate to use the
>> functions of this package.
>> 
>> 
>> 
>> setRepositories(ind=1:2)
>> 
>>> install.packages('rgdal')
>> 
>> trying URL
>>
'http://www.stats.ox.ac.uk/pub/RWin/bin/macosx/leopard/contrib/2.15/rgda
>> l_0.7-8.tgz'
>> 
>> Content type 'application/x-gzip' length 13818239 bytes (13.2 Mb)
>> 
>> opened URL
>> 
>> ==================================================
>> 
>> downloaded 13.2 Mb
>> 
>> 
>> 
>> 
>> 
>> The downloaded binary packages are in
>> 
>> 
>>
/var/folders/17/452p64r17tj_p4y6gmpw5h4c0000gn/T//Rtmp3v4WEZ/downloaded_
>> packages
>> 
>>> library(rgdal)
>> 
>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>> 
>> unable to load shared object
>>
'/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rgdal/l
>> ibs/x86_64/rgdal.so':
>> 
>>
dlopen(/Library/Frameworks/R.framework/Versions/2.15/Resources/library/r
>> gdal/libs/x86_64/rgdal.so, 6): Library not loaded:
>>
/Library/Frameworks/R.framework/Versions/2.14/Resources/lib/libR.dylib
>>
>>  Referenced from:
>>
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rgdal/li
>> bs/x86_64/rgdal.so
>>
>>  Reason: image not found
>> 
>> Error: package/namespace load failed for 'rgdal'
>> 
>> 
>> 
>> **********************************************************
>> 
>> 
>> 
>> thanks
>> 
>> 
>> 
>> Ahmed Hafi
>> 
>> Senior Economist |   ABARES   |   Biosecurity and Farm Analysis
>> 
>> 
>> 
>> Phone +61 2 6272 2081
>> 
>> Email ahmed.hafi at daff.gov.au <mailto:sally.thorpe at abare-brs.gov.au>
>> 
>> 
>> 
>> Australian Bureau of Agricultural and Resource Economics and Sciences
>> 
>> Department of Agriculture, Fisheries and Forestry
>> 
>> 18 Marcus Clarke Street, Canberra ACT 2601 Australia
>> 
>> GPO Box 1563 Canberra ACT 2601 Australia
>> 
>> 
>> 
>> daff.gov.au/abares
>> 
>> 
>>
>>  <http://twitter.com/abares>
>>
<http://www.facebook.com/pages/Australian-Bureau-of-Agricultural-Resourc
>> e-Economics-Sciences-ABARES/157609254289602>
>> 
>> 
>> 
>> 
>> 
>> ------
>> ------
>> IMPORTANT - This email and any attachments have been issued by the 
>> Australian Government Department of Agriculture, Fisheries and
Forestry 
>> (DAFF). The material transmitted is for the use of the intended
recipient 
>> only and may contain confidential, legally privileged, copyright or 
>> personal information. You should not copy, use or disclose it without

>> authorisation from DAFF. It is your responsibility to check any
attachments 
>> for viruses and defects before opening or forwarding them.
>> 
>> If you are not an intended recipient, please contact the sender of
this 
>> email at once by return email and then delete both messages.
Unintended 
>> recipients must not copy, use, disclose, rely on or publish this
email or 
>> attachments. DAFF is not liable for any loss or damage resulting from

>> unauthorised use or dissemination of, or any reliance on, this email
or 
>> attachments.
>> 
>> If you have received this e-mail as part of a valid mailing list and
no 
>> longer want to receive a message such as this one, advise the sender
by 
>> return e-mail accordingly.
>> 
>> This notice should not be deleted or altered.
>> 
>> ------
>> 
>> 
>> ------
>> 
>> 
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



------
------
IMPORTANT - This email and any attachments have been issued by the Australian Government Department of Agriculture, Fisheries and Forestry (DAFF). The material transmitted is for the use of the intended recipient only and may contain confidential, legally privileged, copyright or personal information. You should not copy, use or disclose it without authorisation from DAFF. It is your responsibility to check any attachments for viruses and defects before opening or forwarding them.

If you are not an intended recipient, please contact the sender of this email at once by return email and then delete both messages. Unintended recipients must not copy, use, disclose, rely on or publish this email or attachments. DAFF is not liable for any loss or damage resulting from unauthorised use or dissemination of, or any reliance on, this email or attachments. 

If you have received this e-mail as part of a valid mailing list and no longer want to receive a message such as this one, advise the sender by return e-mail accordingly.

This notice should not be deleted or altered.

------


------


From Ahmed.Hafi at daff.gov.au  Mon Apr 16 08:15:20 2012
From: Ahmed.Hafi at daff.gov.au (Hafi, Ahmed)
Date: Mon, 16 Apr 2012 16:15:20 +1000
Subject: [R-sig-Geo] can't load rgdal on mac osx [SEC=UNCLASSIFIED]
In-Reply-To: <4F8BAB2F.40408@stats.ox.ac.uk>
References: <4F21D31A72ADA24583E934F68262EBCE0EEEDEB4@ACT001CL03EX02.agdaff.gov.au>
	<alpine.LRH.2.02.1204130939150.8338@reclus.nhh.no>
	<alpine.LRH.2.02.1204151545090.19242@reclus.nhh.no>
	<4F21D31A72ADA24583E934F68262EBCE0EF68683@ACT001CL03EX02.agdaff.gov.au>
	<4F8BAB2F.40408@stats.ox.ac.uk>
Message-ID: <4F21D31A72ADA24583E934F68262EBCE0EF68D09@ACT001CL03EX02.agdaff.gov.au>

Dear Prof Ripley,

Thanks for the detail. I will try to install it and let you know.

ahmed

-----Original Message-----
From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk] 
Sent: Monday, 16 April 2012 3:17 PM
To: Hafi, Ahmed
Cc: Roger.Bivand at nhh.no; r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] can't load rgdal on mac osx [SEC=UNCLASSIFIED]

On 16/04/2012 00:27, Hafi, Ahmed wrote:
> Dear Roger,
>
> Hope the two lines below still work.
>
> seRepositories(ind=1:2)
> install.package('rgdal')
>
>
> I looked at the folder 'http://www.stats.ox.uk/pub/RWin' and still
find
> Rgdal.07-8.tar.gz dated 18 January. I am wondering whether its kept
> somewhere else.

OS X binary packages are .tgz files, and the relevant ones for 2.15.0 
are in
http://www.stats.ox.ac.uk/pub/RWin/bin/macosx/leopard/contrib/2.15/

> I will try installing rgdal and  report back to you later.
>
> Thanks
>
> ahmed
>
> -----Original Message-----
> From: Roger Bivand [mailto:Roger.Bivand at nhh.no]
> Sent: Sunday, 15 April 2012 11:51 PM
> To: Hafi, Ahmed
> Cc: Prof Brian Ripley; r-sig-geo at r-project.org
> Subject: Re: [R-sig-Geo] can't load rgdal on mac osx
[SEC=UNCLASSIFIED]
>
> CRAN Extras now has versions of rgdal and rgeos built with Lion for R
> 2.15. It is fairly likely that these will work with [Snow] Leopard,
but
> because Apple has dropped the Leopard SDK, this cannot be guaranteed,
> and
> the risk of difficulties for Leopard users will increase as GDAL and
> GEOS
> are remade under Lion.
>
> Please report back (possibly off-list) if the 2.15 CRAN Extras binary
> packages work or do not work, with details of your OSX version.
>
> Thanks again to Prof. Brian Ripley for his support!
>
> Roger
>
> On Fri, 13 Apr 2012, Roger Bivand wrote:
>
>> The problem that you report is caused by a terminal hardware failure
> of the
>> Leopard machine used to build the CRAN Extras OSX binaries, so that
> rgdal and
>> rgeos binaries for OSX have not been built for R 2.15. If OSX users
of
> the
>> CRAN Extras rgdal and rgeos binaries upgrade to 2.15 and install the
>> apparently correct 2.15 rgdal (or rgeos), it will fail to load
because
> it was
>> itself built against R 2.14 - the case reported in this posting.
>>
>> Until a new build machine is in place, please revert to R 2.14, or
> delay
>> upgrading to 2.15 if the CRAN extras binary packages are your
prefered
> method
>> of installation. More information will follow as soon as the
situation
> is
>> normalised.
>>
>> R 2.15 users who install rgdal from source linking to the Kyngchaos
> GDAL
>> frameworks will be able to use rgdal in 2.15.
>>
>> We trust that this has nothing to do with the date - the older
Leopard
> OSX
>> machine failed about two weeks ago!
>>
>> Roger
>>
>> On Fri, 13 Apr 2012, Hafi, Ahmed wrote:
>>
>>> Dear list members,
>>>
>>> I am running R on a macbook pro with mac osx lion and trying to do
> some
>>> spatial modelling with R. I have run into a problem in loading
rgdal.
> I
>>> understand that the installation of rgdal in mac is different from
> other
>>> packages and followed the instructions given in CRAN rgdal page
> updated
>>> in last January. The rgdal downloaded successfully but didn't appear
> to
>>> get installed successfully and failed to load.  I have copied the
> screen
>>> print segment below. Is it because of the difference in mac osx
> version
>>> I am using? I would appreciate if someone could interpret it and
> suggest
>>> what should I do to get rgdal loaded.  I am desperate to use the
>>> functions of this package.
>>>
>>>
>>>
>>> setRepositories(ind=1:2)
>>>
>>>> install.packages('rgdal')
>>>
>>> trying URL
>>>
>
'http://www.stats.ox.ac.uk/pub/RWin/bin/macosx/leopard/contrib/2.15/rgda
>>> l_0.7-8.tgz'
>>>
>>> Content type 'application/x-gzip' length 13818239 bytes (13.2 Mb)
>>>
>>> opened URL
>>>
>>> ==================================================
>>>
>>> downloaded 13.2 Mb
>>>
>>>
>>>
>>>
>>>
>>> The downloaded binary packages are in
>>>
>>>
>>>
>
/var/folders/17/452p64r17tj_p4y6gmpw5h4c0000gn/T//Rtmp3v4WEZ/downloaded_
>>> packages
>>>
>>>> library(rgdal)
>>>
>>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>>>
>>> unable to load shared object
>>>
>
'/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rgdal/l
>>> ibs/x86_64/rgdal.so':
>>>
>>>
>
dlopen(/Library/Frameworks/R.framework/Versions/2.15/Resources/library/r
>>> gdal/libs/x86_64/rgdal.so, 6): Library not loaded:
>>>
> /Library/Frameworks/R.framework/Versions/2.14/Resources/lib/libR.dylib
>>>
>>>   Referenced from:
>>>
>
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rgdal/li
>>> bs/x86_64/rgdal.so
>>>
>>>   Reason: image not found
>>>
>>> Error: package/namespace load failed for 'rgdal'
>>>
>>>
>>>
>>> **********************************************************
>>>
>>>
>>>
>>> thanks
>>>
>>>
>>>
>>> Ahmed Hafi
>>>
>>> Senior Economist |   ABARES   |   Biosecurity and Farm Analysis
>>>
>>>
>>>
>>> Phone +61 2 6272 2081
>>>
>>> Email ahmed.hafi at daff.gov.au<mailto:sally.thorpe at abare-brs.gov.au>
>>>
>>>
>>>
>>> Australian Bureau of Agricultural and Resource Economics and
Sciences
>>>
>>> Department of Agriculture, Fisheries and Forestry
>>>
>>> 18 Marcus Clarke Street, Canberra ACT 2601 Australia
>>>
>>> GPO Box 1563 Canberra ACT 2601 Australia
>>>
>>>
>>>
>>> daff.gov.au/abares
>>>
>>>
>>>
>>>   <http://twitter.com/abares>
>>>
>
<http://www.facebook.com/pages/Australian-Bureau-of-Agricultural-Resourc
>>> e-Economics-Sciences-ABARES/157609254289602>
>>>
>>>
>>>
>>>
>>>
>>> ------
>>> ------
>>> IMPORTANT - This email and any attachments have been issued by the
>>> Australian Government Department of Agriculture, Fisheries and
> Forestry
>>> (DAFF). The material transmitted is for the use of the intended
> recipient
>>> only and may contain confidential, legally privileged, copyright or
>>> personal information. You should not copy, use or disclose it
without
>
>>> authorisation from DAFF. It is your responsibility to check any
> attachments
>>> for viruses and defects before opening or forwarding them.
>>>
>>> If you are not an intended recipient, please contact the sender of
> this
>>> email at once by return email and then delete both messages.
> Unintended
>>> recipients must not copy, use, disclose, rely on or publish this
> email or
>>> attachments. DAFF is not liable for any loss or damage resulting
from
>
>>> unauthorised use or dissemination of, or any reliance on, this email
> or
>>> attachments.
>>>
>>> If you have received this e-mail as part of a valid mailing list and
> no
>>> longer want to receive a message such as this one, advise the sender
> by
>>> return e-mail accordingly.
>>>
>>> This notice should not be deleted or altered.
>>>
>>> ------
>>>
>>>
>>> ------
>>>
>>>
>>
>>
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


------
------
IMPORTANT - This email and any attachments have been issued by the Australian Government Department of Agriculture, Fisheries and Forestry (DAFF). The material transmitted is for the use of the intended recipient only and may contain confidential, legally privileged, copyright or personal information. You should not copy, use or disclose it without authorisation from DAFF. It is your responsibility to check any attachments for viruses and defects before opening or forwarding them.

If you are not an intended recipient, please contact the sender of this email at once by return email and then delete both messages. Unintended recipients must not copy, use, disclose, rely on or publish this email or attachments. DAFF is not liable for any loss or damage resulting from unauthorised use or dissemination of, or any reliance on, this email or attachments. 

If you have received this e-mail as part of a valid mailing list and no longer want to receive a message such as this one, advise the sender by return e-mail accordingly.

This notice should not be deleted or altered.

------


------


From burtonshank at gmail.com  Mon Apr 16 16:49:33 2012
From: burtonshank at gmail.com (Burton Shank)
Date: Mon, 16 Apr 2012 10:49:33 -0400
Subject: [R-sig-Geo] pooled confidence interval on the total resource
	estimated by kriging
Message-ID: <CAE22u=qXVnUefpPB12cbMvsn7cg3tfrxceHu-f30fkndBSnTBw@mail.gmail.com>

I'm trying to calculate the confidence interval on the total resource
in a geographic area (i.e. get an estimate of the total quantity of
zinc in the region +/- a confidence interval).While this would seem
like a common product from kriging, this seems more complex than
expected from searching references.  Naturally, it is possible to
perform cross-validation to get  error estimates at sampled location
(i.e. using krige.cv in gstat).  However, I don't think this is useful
with highly aggregated sample sets with open spaces between sampled
areas.
For example, one can approximate sampling the meuse data along
buffered transects and examine the kriging predictions.

library(gstat); library(lattice);

data(meuse);
meuse=meuse[, c("x", "y", "zinc", "dist")]    ## trim dataset to useful columns
  meuse$logZinc=log(meuse$zinc)               ## log transform zinc

Transects=seq(from=330000, by=700, length=5); ## set positions for
sampling transects
Sampled=meuse[which(x=                        ## extract sample data
along transects
  (meuse$y>Transects[1]-100 & meuse$y< (Transects[1]+100) ) |
  (meuse$y>Transects[2]-100 & meuse$y< (Transects[2]+100) ) |
  (meuse$y>Transects[3]-100 & meuse$y< (Transects[3]+100) ) |
  (meuse$y>Transects[4]-100 & meuse$y< (Transects[4]+100) ) |
  (meuse$y>Transects[5]-100 & meuse$y< (Transects[5]+100) )
    ), ]

coordinates(meuse)=c("x", "y");
coordinates(Sampled)=c("x", "y");
plot(meuse)
points(Sampled, pch=20, cex=1.5)

W=W+10
Var=variogram(logZinc~sqrt(dist), Sampled, cutoff=1300, width=90);
plot(Var)## calculate variogram
Var.Fit=fit.variogram(Var, vgm(model="Sph", nugget=0.1, psill=0.3,
range=800)); ## fit variogram model
plot(Var, Var.Fit)

data(meuse.grid)  ## prepare prediction data set
coordinates(meuse.grid) <- c("x", "y")
meuse.grid <- as(meuse.grid, "SpatialPixelsDataFrame")

Pred=krige(logZinc~sqrt(dist), Sampled, meuse.grid, Var.Fit)#,
block=c(40,40)) ## predict by kriging
meuse.grid$Zinc.logPred=Pred$var1.pred; ## log-transformed predictions
meuse.grid$Zinc.Var=Pred$var1.var;  ## log-transformed variances
meuse.grid$Zinc.Pred.BT=exp(meuse.grid$Zinc.logPred+meuse.grid$Zinc.Var/2)
 ## bias-adjust and back-transform

trellis.par.set(sp.theme()) ## plot
spplot(meuse.grid["Zinc.logPred"], main="Kriging Prediction")
spplot(meuse.grid["Zinc.Var"], main="Kriging variance")

mean(meuse$zinc)
mean(meuse.grid$Zinc.Pred.BT)

The kriging variance shows a clear geographic pattern with respect to
the "transects". Thus, cross-validation is not useful for calculating
a confidence interval for the estimate for the entire geographic
region. Similarly, it is possible to get an estimate of the variance
of the mean from the likfit function in geoR, however, again, this can
not be applied to unsampled regions.
How would one calculate the pooled variance of the mean?

Any suggestions are appreciated.

thanks,
Burton


From Roger.Bivand at nhh.no  Mon Apr 16 16:52:40 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 16 Apr 2012 16:52:40 +0200 (CEST)
Subject: [R-sig-Geo] rgeos::gArea() to all polygons within sp polygons DF
In-Reply-To: <alpine.LRH.2.02.1204101001130.25120@reclus.nhh.no>
References: <CAG4NReJ3UHhokWBQJeq5krtjHOELO3KFZuZ18x5Ee9jWYnd4gQ@mail.gmail.com>
	<4F81AE1D.4090905@uni-muenster.de>
	<CAG4NReKd5vFoXYvLEOAg0YBLXDQgUj4SaEc4iSj-jvTN14v85g@mail.gmail.com>
	<alpine.LRH.2.02.1204091724480.21435@reclus.nhh.no>
	<CAG4NRe++dmJyghKHBBZ9nvaSdCATso8-SOdGEcG+Nu0qjnwDKg@mail.gmail.com>
	<alpine.LRH.2.02.1204101001130.25120@reclus.nhh.no>
Message-ID: <alpine.LRH.2.02.1204161530040.21979@reclus.nhh.no>

This is a request to try out development versions of sp, rgdal, and rgeos, 
related to Agus' question.

I've commited sp SVN rev. 1246 (in rspatial), rgdal SVN rev. 325, and 
rgeos SVN rev. 332 to R-Forge.

The objects defined in sp for polygon geometries do not follow OGC SFS 
specifications, but can be mapped to them by pointers assigning interior 
rings to their containing exterior rings, stored in comments assigned to 
Polygons objects. These comments may be created in maptools or rgeos. It 
also turns out that the required assignments can be extracted from input 
OGR data.

By adding a top-level comment to SpatialPolygons* objects set to TRUE if 
all member Polygons objects have comments set, we can avoid the very 
costly comment assignment loop. If in addition the SpatialPolygons* 
objects are read with readOGR() in rgdal, the comments can be set directly 
while reading, as OGR seems to expect the first ring in an OGC SFS Polygon 
object to be exterior, the rest interior.

This means that for Agus' example, there is no extra cost involved in 
setting the comments, and his gArea call is 0.25s rather than over 100s 
with comment setting in rgeos, and more with full containment analysis via 
maptools (shapelib in maptools does not support OGC SFS geometries).

So I would like to receive feedback on reading polygon data with readOGR() 
and on whether it seems reasonable to accept the assignment of interior 
rings and exterior rings for Polygons objects. If we can believe the 
Polygons coming from OGR, we can save a lot of time in preparing them for 
further handling in rgeos.

I do not want to release these revisions until they have been tried out 
thoroughly.

Roger


On Tue, 10 Apr 2012, Roger Bivand wrote:

> On Mon, 9 Apr 2012, Agustin Lobo wrote:
>
>> Thanks Roger.
>> Apologies for the missing output of sessionInfo() .
>> Confirmed that the results are correct with rgeos 0.2-5, although it's
>> now very slow.
>
> You can say:
>
> bn <- createSPComment(bn)
>
> first, which takes some time as it recreates the object. If the comments 
> assigning holes (interior rings) to exterior rings are present, they are not 
> recreated. Shapefiles do not store this information, and it is flattened out 
> in making Polygons objects, which were (perhaps unfortunately) conceived of 
> as matching shapefiles.
>
> Arguably, this comment creation, needed to map sp Polygons objects to OGC SFS 
> Polygon or Multipolygon objects, should be done in sp - but the computational 
> geometry functions neede to find our which hole is in which exterior ring are 
> in GEOS, so this would involve a circularity in dependencies.
>
> So the way to ensure that polygon objects work as expected in rgeos and when 
> we believe the input hole status is:
>
> library(rgdal)
> pls <- readOGR(...)
> library(rgeos)
> pls <- createSPComment(pls)
> # I'll look at making this faster in C
> # subsequent operations (which still check that comments are present in # 
> each Polygons object)
>
> For your case, which has many very complex polygons and as such is a good 
> test case, I have:
>
>> system.time(bn <- readOGR(".", "BorneoLCv2google"))
> OGR data source with driver: ESRI Shapefile
> Source: ".", layer: "BorneoLCv2google"
> with 32036 features and 6 fields
> Feature type: wkbPolygon with 2 dimensions
>   user  system elapsed
>  9.928   0.178  10.388
>> system.time(b2 <- gArea(bn, byid=TRUE))
>   user  system elapsed
> 154.242  10.033 169.401
>> system.time(bn <- createSPComment(bn))
>   user  system elapsed
> 152.045   0.085 156.501
>> set_do_poly_check(FALSE)
> # without this, it redoes the comment checking
>> system.time(b2 <- gArea(bn, byid=TRUE))
>   user  system elapsed
>  0.251   0.000   0.252
>
> In this case, it is also possible to get the areas without using rgeos:
>
> pls <- slot(bn, "polygons")
> exter <- sapply(pls, function(x) {
>  Pls <- slot(x, "Polygons")
>  sum(sapply(Pls, function(xx)
>    ifelse(!slot(xx, "hole"), slot(xx, "area"), 0)))
> })
> inter <- sapply(pls, function(x) {
>  Pls <- slot(x, "Polygons")
>  sum(sapply(Pls, function(xx)
>    ifelse(slot(xx, "hole"), slot(xx, "area"), 0)))
> })
> area <- exter - inter
>
>> print(area[25967], digits=16)
> [1] 8550196769.930017
>
> since the net area of each Polygons object is the gross area minus the holes; 
> this is also fast.
>
> Hope this clarifies,
>
> Roger
>
>> Ticket in QGIS updated (and closed).
>> 
>> Agus
>> 
>> El d?a 9 de abril de 2012 17:36, Roger Bivand <Roger.Bivand at nhh.no> 
>> escribi?:
>>> On Mon, 9 Apr 2012, Agustin Lobo wrote:
>>> 
>>>> Thanks Edzer,
>>>> 
>>>> b2 <- gArea(BorneoLCg, byid=T)
>>>> 
>>>> I get many warnings such as:
>>>> 40: In RGEOSMiscFunc(spgeom, byid, "rgeos_area") :
>>>> ?Polygons object missing comment attribute ignoring hole(s). See
>>>> function createSPComment.
>>>> 
>>>> is this normal?
>>>> 
>>>> The result is identical to
>>>> b <- sapply(BorneoLCg at polygons, function(x) x at area)
>>>> 
>>>> while it is different than the one provided by QGIS (known to be wrong 
>>>> for
>>>> very
>>>> large polygons only because of a format problem) and postgis (assumed
>>>> to be correct). Please give a look to:
>>>> http://hub.qgis.org/issues/5332
>>> 
>>> 
>>> Please always provide sessionInfo() output, and a copy of the rgeos 
>>> startup
>>> messages (showing which version of GEOS is used). With rgeos 0.2-5 and 
>>> GEOS
>>> runtime version: 3.3.2-CAPI-1.7.2, I have:
>>> 
>>> bn <- readOGR(".", "BorneoLCv2google")
>>> b2 <- gArea(bn, byid=TRUE)
>>>> 
>>>> print(b2[25967], digits=16)
>>> 
>>> ? ? ? ? ? 25966
>>> 8550196769.93012
>>>> 
>>>> print(b2[26570], digits=16)
>>> 
>>> ? ? ? ? ? ?26569
>>> 173647473841.3217
>>> 
>>> so the hole warnings were the reason for the difference. SVN revision 327 
>>> of
>>> 16 March enforced the use of createSPComment() in gArea() - the user was
>>> expected to denote holes properly themselves before this change. Update 
>>> your
>>> rgeos and try again.
>>> 
>>> Please update the QGIS #5332 to state that from rgeos 0.2-5, the values 
>>> are
>>> correct. The area slot in the Polygons object is a gross area used to 
>>> order
>>> plotting (because until recently R polygons simply overplotted one 
>>> another),
>>> so it is not guaranteed to be a planar area measure for polygons with 
>>> holes.
>>> 
>>> Roger
>>> 
>>> 
>>>> 
>>>> Agus
>>>> 
>>>> 
>>>> El d?a 8 de abril de 2012 17:26, Edzer Pebesma
>>>> <edzer.pebesma at uni-muenster.de> escribi?:
>>>>> 
>>>>> Agus, have you tried
>>>>> 
>>>>> gArea(BorneoLCg, byid = TRUE)
>>>>> 
>>>>> ?
>>>>> 
>>>>> On 04/08/2012 04:52 PM, Agustin Lobo wrote:
>>>>>> 
>>>>>> Hi!
>>>>>> 
>>>>>> How do I ?apply gArea()) to all polygons within an spatial pol. DF?
>>>>>> I've tried
>>>>>> areas <- apply(BorneoLCg,gArea)
>>>>>> and
>>>>>> areas <- sapply(BorneoLCg,gArea)
>>>>>> 
>>>>>> but this is not correct.
>>>>>> 
>>>>>> I want to compare to
>>>>>> areas <- sapply(BorneoLCg at polygons, function(x) x at area)
>>>>>> 
>>>>>> Thanks
>>>>>> 
>>>>>> Agus
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>> 
>>>>> 
>>>>> --
>>>>> Edzer Pebesma
>>>>> Institute for Geoinformatics (ifgi), University of M?nster
>>>>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>>>>> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
>>>>> http://www.52north.org/geostatistics ? ? ?e.pebesma at wwu.de
>>>>> 
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>> 
>>>> 
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>> 
>>> 
>>> --
>>> Roger Bivand
>>> Department of Economics, NHH Norwegian School of Economics,
>>> Helleveien 30, N-5045 Bergen, Norway.
>>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>>> e-mail: Roger.Bivand at nhh.no
>>> 
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>> 
>> 
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From dieter.mayr at boku.ac.at  Mon Apr 16 18:31:00 2012
From: dieter.mayr at boku.ac.at (Dieter Mayr)
Date: Mon, 16 Apr 2012 18:31:00 +0200
Subject: [R-sig-Geo] over spatialPoints with spatialPolygons
Message-ID: <4F8C6564020000A70002B13B@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120416/19a8519d/attachment.pl>

From edzer.pebesma at uni-muenster.de  Mon Apr 16 18:46:38 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 16 Apr 2012 18:46:38 +0200
Subject: [R-sig-Geo] pooled confidence interval on the total resource
 estimated by kriging
In-Reply-To: <CAE22u=qXVnUefpPB12cbMvsn7cg3tfrxceHu-f30fkndBSnTBw@mail.gmail.com>
References: <CAE22u=qXVnUefpPB12cbMvsn7cg3tfrxceHu-f30fkndBSnTBw@mail.gmail.com>
Message-ID: <4F8C4CEE.1090708@uni-muenster.de>

What is exactly wrong with the kriging variance of the block kriging
estimate, with as block the whole study area (besides that it gives the
mean, instead of the total resource)?

Of course you can never cross validate this in real world cases, but I'd
say you could with data simulated over a fine grid.

On 04/16/2012 04:49 PM, Burton Shank wrote:
> I'm trying to calculate the confidence interval on the total resource
> in a geographic area (i.e. get an estimate of the total quantity of
> zinc in the region +/- a confidence interval).While this would seem
> like a common product from kriging, this seems more complex than
> expected from searching references.  Naturally, it is possible to
> perform cross-validation to get  error estimates at sampled location
> (i.e. using krige.cv in gstat).  However, I don't think this is useful
> with highly aggregated sample sets with open spaces between sampled
> areas.
> For example, one can approximate sampling the meuse data along
> buffered transects and examine the kriging predictions.
> 
> library(gstat); library(lattice);
> 
> data(meuse);
> meuse=meuse[, c("x", "y", "zinc", "dist")]    ## trim dataset to useful columns
>   meuse$logZinc=log(meuse$zinc)               ## log transform zinc
> 
> Transects=seq(from=330000, by=700, length=5); ## set positions for
> sampling transects
> Sampled=meuse[which(x=                        ## extract sample data
> along transects
>   (meuse$y>Transects[1]-100 & meuse$y< (Transects[1]+100) ) |
>   (meuse$y>Transects[2]-100 & meuse$y< (Transects[2]+100) ) |
>   (meuse$y>Transects[3]-100 & meuse$y< (Transects[3]+100) ) |
>   (meuse$y>Transects[4]-100 & meuse$y< (Transects[4]+100) ) |
>   (meuse$y>Transects[5]-100 & meuse$y< (Transects[5]+100) )
>     ), ]
> 
> coordinates(meuse)=c("x", "y");
> coordinates(Sampled)=c("x", "y");
> plot(meuse)
> points(Sampled, pch=20, cex=1.5)
> 
> W=W+10
> Var=variogram(logZinc~sqrt(dist), Sampled, cutoff=1300, width=90);
> plot(Var)## calculate variogram
> Var.Fit=fit.variogram(Var, vgm(model="Sph", nugget=0.1, psill=0.3,
> range=800)); ## fit variogram model
> plot(Var, Var.Fit)
> 
> data(meuse.grid)  ## prepare prediction data set
> coordinates(meuse.grid) <- c("x", "y")
> meuse.grid <- as(meuse.grid, "SpatialPixelsDataFrame")
> 
> Pred=krige(logZinc~sqrt(dist), Sampled, meuse.grid, Var.Fit)#,
> block=c(40,40)) ## predict by kriging
> meuse.grid$Zinc.logPred=Pred$var1.pred; ## log-transformed predictions
> meuse.grid$Zinc.Var=Pred$var1.var;  ## log-transformed variances
> meuse.grid$Zinc.Pred.BT=exp(meuse.grid$Zinc.logPred+meuse.grid$Zinc.Var/2)
>  ## bias-adjust and back-transform
> 
> trellis.par.set(sp.theme()) ## plot
> spplot(meuse.grid["Zinc.logPred"], main="Kriging Prediction")
> spplot(meuse.grid["Zinc.Var"], main="Kriging variance")
> 
> mean(meuse$zinc)
> mean(meuse.grid$Zinc.Pred.BT)
> 
> The kriging variance shows a clear geographic pattern with respect to
> the "transects". Thus, cross-validation is not useful for calculating
> a confidence interval for the estimate for the entire geographic
> region. Similarly, it is possible to get an estimate of the variance
> of the mean from the likfit function in geoR, however, again, this can
> not be applied to unsampled regions.
> How would one calculate the pooled variance of the mean?
> 
> Any suggestions are appreciated.
> 
> thanks,
> Burton
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From alobolistas at gmail.com  Mon Apr 16 19:25:49 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Mon, 16 Apr 2012 19:25:49 +0200
Subject: [R-sig-Geo] rgeos::gArea() to all polygons within sp polygons DF
In-Reply-To: <alpine.LRH.2.02.1204161530040.21979@reclus.nhh.no>
References: <CAG4NReJ3UHhokWBQJeq5krtjHOELO3KFZuZ18x5Ee9jWYnd4gQ@mail.gmail.com>
	<4F81AE1D.4090905@uni-muenster.de>
	<CAG4NReKd5vFoXYvLEOAg0YBLXDQgUj4SaEc4iSj-jvTN14v85g@mail.gmail.com>
	<alpine.LRH.2.02.1204091724480.21435@reclus.nhh.no>
	<CAG4NRe++dmJyghKHBBZ9nvaSdCATso8-SOdGEcG+Nu0qjnwDKg@mail.gmail.com>
	<alpine.LRH.2.02.1204101001130.25120@reclus.nhh.no>
	<alpine.LRH.2.02.1204161530040.21979@reclus.nhh.no>
Message-ID: <CAG4NRe+5HMTE=fOTX0SHBhw139W8Z1pb_mv0Ro7Pj-fB7XN-9Q@mail.gmail.com>

Roger,

In order to help testing, should we just install
sp, rgdal and rgeos from r-forge.r-project.org?
or is there an special way to force that we install the SVN revs that
you mention?

I will not be able to do it until early in Wednesday, as I'm away of
the office with just a little macbook air.

Agus

El d?a 16 de abril de 2012 16:52, Roger Bivand <Roger.Bivand at nhh.no> escribi?:
> This is a request to try out development versions of sp, rgdal, and rgeos,
> related to Agus' question.
>
> I've commited sp SVN rev. 1246 (in rspatial), rgdal SVN rev. 325, and rgeos
> SVN rev. 332 to R-Forge.
>
> The objects defined in sp for polygon geometries do not follow OGC SFS
> specifications, but can be mapped to them by pointers assigning interior
> rings to their containing exterior rings, stored in comments assigned to
> Polygons objects. These comments may be created in maptools or rgeos. It
> also turns out that the required assignments can be extracted from input OGR
> data.
>
> By adding a top-level comment to SpatialPolygons* objects set to TRUE if all
> member Polygons objects have comments set, we can avoid the very costly
> comment assignment loop. If in addition the SpatialPolygons* objects are
> read with readOGR() in rgdal, the comments can be set directly while
> reading, as OGR seems to expect the first ring in an OGC SFS Polygon object
> to be exterior, the rest interior.
>
> This means that for Agus' example, there is no extra cost involved in
> setting the comments, and his gArea call is 0.25s rather than over 100s with
> comment setting in rgeos, and more with full containment analysis via
> maptools (shapelib in maptools does not support OGC SFS geometries).
>
> So I would like to receive feedback on reading polygon data with readOGR()
> and on whether it seems reasonable to accept the assignment of interior
> rings and exterior rings for Polygons objects. If we can believe the
> Polygons coming from OGR, we can save a lot of time in preparing them for
> further handling in rgeos.
>
> I do not want to release these revisions until they have been tried out
> thoroughly.
>
> Roger
>
>
>
> On Tue, 10 Apr 2012, Roger Bivand wrote:
>
>> On Mon, 9 Apr 2012, Agustin Lobo wrote:
>>
>>> Thanks Roger.
>>> Apologies for the missing output of sessionInfo() .
>>> Confirmed that the results are correct with rgeos 0.2-5, although it's
>>> now very slow.
>>
>>
>> You can say:
>>
>> bn <- createSPComment(bn)
>>
>> first, which takes some time as it recreates the object. If the comments
>> assigning holes (interior rings) to exterior rings are present, they are not
>> recreated. Shapefiles do not store this information, and it is flattened out
>> in making Polygons objects, which were (perhaps unfortunately) conceived of
>> as matching shapefiles.
>>
>> Arguably, this comment creation, needed to map sp Polygons objects to OGC
>> SFS Polygon or Multipolygon objects, should be done in sp - but the
>> computational geometry functions neede to find our which hole is in which
>> exterior ring are in GEOS, so this would involve a circularity in
>> dependencies.
>>
>> So the way to ensure that polygon objects work as expected in rgeos and
>> when we believe the input hole status is:
>>
>> library(rgdal)
>> pls <- readOGR(...)
>> library(rgeos)
>> pls <- createSPComment(pls)
>> # I'll look at making this faster in C
>> # subsequent operations (which still check that comments are present in #
>> each Polygons object)
>>
>> For your case, which has many very complex polygons and as such is a good
>> test case, I have:
>>
>>> system.time(bn <- readOGR(".", "BorneoLCv2google"))
>>
>> OGR data source with driver: ESRI Shapefile
>> Source: ".", layer: "BorneoLCv2google"
>> with 32036 features and 6 fields
>> Feature type: wkbPolygon with 2 dimensions
>> ?user ?system elapsed
>> ?9.928 ? 0.178 ?10.388
>>>
>>> system.time(b2 <- gArea(bn, byid=TRUE))
>>
>> ?user ?system elapsed
>> 154.242 ?10.033 169.401
>>>
>>> system.time(bn <- createSPComment(bn))
>>
>> ?user ?system elapsed
>> 152.045 ? 0.085 156.501
>>>
>>> set_do_poly_check(FALSE)
>>
>> # without this, it redoes the comment checking
>>>
>>> system.time(b2 <- gArea(bn, byid=TRUE))
>>
>> ?user ?system elapsed
>> ?0.251 ? 0.000 ? 0.252
>>
>> In this case, it is also possible to get the areas without using rgeos:
>>
>> pls <- slot(bn, "polygons")
>> exter <- sapply(pls, function(x) {
>> ?Pls <- slot(x, "Polygons")
>> ?sum(sapply(Pls, function(xx)
>> ? ifelse(!slot(xx, "hole"), slot(xx, "area"), 0)))
>> })
>> inter <- sapply(pls, function(x) {
>> ?Pls <- slot(x, "Polygons")
>> ?sum(sapply(Pls, function(xx)
>> ? ifelse(slot(xx, "hole"), slot(xx, "area"), 0)))
>> })
>> area <- exter - inter
>>
>>> print(area[25967], digits=16)
>>
>> [1] 8550196769.930017
>>
>> since the net area of each Polygons object is the gross area minus the
>> holes; this is also fast.
>>
>> Hope this clarifies,
>>
>> Roger
>>
>>> Ticket in QGIS updated (and closed).
>>>
>>> Agus
>>>
>>> El d?a 9 de abril de 2012 17:36, Roger Bivand <Roger.Bivand at nhh.no>
>>> escribi?:
>>>>
>>>> On Mon, 9 Apr 2012, Agustin Lobo wrote:
>>>>
>>>>> Thanks Edzer,
>>>>>
>>>>> b2 <- gArea(BorneoLCg, byid=T)
>>>>>
>>>>> I get many warnings such as:
>>>>> 40: In RGEOSMiscFunc(spgeom, byid, "rgeos_area") :
>>>>> ?Polygons object missing comment attribute ignoring hole(s). See
>>>>> function createSPComment.
>>>>>
>>>>> is this normal?
>>>>>
>>>>> The result is identical to
>>>>> b <- sapply(BorneoLCg at polygons, function(x) x at area)
>>>>>
>>>>> while it is different than the one provided by QGIS (known to be wrong
>>>>> for
>>>>> very
>>>>> large polygons only because of a format problem) and postgis (assumed
>>>>> to be correct). Please give a look to:
>>>>> http://hub.qgis.org/issues/5332
>>>>
>>>>
>>>>
>>>> Please always provide sessionInfo() output, and a copy of the rgeos
>>>> startup
>>>> messages (showing which version of GEOS is used). With rgeos 0.2-5 and
>>>> GEOS
>>>> runtime version: 3.3.2-CAPI-1.7.2, I have:
>>>>
>>>> bn <- readOGR(".", "BorneoLCv2google")
>>>> b2 <- gArea(bn, byid=TRUE)
>>>>>
>>>>>
>>>>> print(b2[25967], digits=16)
>>>>
>>>>
>>>> ? ? ? ? ? 25966
>>>> 8550196769.93012
>>>>>
>>>>>
>>>>> print(b2[26570], digits=16)
>>>>
>>>>
>>>> ? ? ? ? ? ?26569
>>>> 173647473841.3217
>>>>
>>>> so the hole warnings were the reason for the difference. SVN revision
>>>> 327 of
>>>> 16 March enforced the use of createSPComment() in gArea() - the user was
>>>> expected to denote holes properly themselves before this change. Update
>>>> your
>>>> rgeos and try again.
>>>>
>>>> Please update the QGIS #5332 to state that from rgeos 0.2-5, the values
>>>> are
>>>> correct. The area slot in the Polygons object is a gross area used to
>>>> order
>>>> plotting (because until recently R polygons simply overplotted one
>>>> another),
>>>> so it is not guaranteed to be a planar area measure for polygons with
>>>> holes.
>>>>
>>>> Roger
>>>>
>>>>
>>>>>
>>>>> Agus
>>>>>
>>>>>
>>>>> El d?a 8 de abril de 2012 17:26, Edzer Pebesma
>>>>> <edzer.pebesma at uni-muenster.de> escribi?:
>>>>>>
>>>>>>
>>>>>> Agus, have you tried
>>>>>>
>>>>>> gArea(BorneoLCg, byid = TRUE)
>>>>>>
>>>>>> ?
>>>>>>
>>>>>> On 04/08/2012 04:52 PM, Agustin Lobo wrote:
>>>>>>>
>>>>>>>
>>>>>>> Hi!
>>>>>>>
>>>>>>> How do I ?apply gArea()) to all polygons within an spatial pol. DF?
>>>>>>> I've tried
>>>>>>> areas <- apply(BorneoLCg,gArea)
>>>>>>> and
>>>>>>> areas <- sapply(BorneoLCg,gArea)
>>>>>>>
>>>>>>> but this is not correct.
>>>>>>>
>>>>>>> I want to compare to
>>>>>>> areas <- sapply(BorneoLCg at polygons, function(x) x at area)
>>>>>>>
>>>>>>> Thanks
>>>>>>>
>>>>>>> Agus
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> R-sig-Geo mailing list
>>>>>>> R-sig-Geo at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Edzer Pebesma
>>>>>> Institute for Geoinformatics (ifgi), University of M?nster
>>>>>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>>>>>> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
>>>>>> http://www.52north.org/geostatistics ? ? ?e.pebesma at wwu.de
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>
>>>> --
>>>> Roger Bivand
>>>> Department of Economics, NHH Norwegian School of Economics,
>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>>>> e-mail: Roger.Bivand at nhh.no
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>
>>
>>
>
> --
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From alobolistas at gmail.com  Mon Apr 16 19:40:06 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Mon, 16 Apr 2012 19:40:06 +0200
Subject: [R-sig-Geo] over spatialPoints with spatialPolygons
In-Reply-To: <4F8C6564020000A70002B13B@gwia2.boku.ac.at>
References: <4F8C6564020000A70002B13B@gwia2.boku.ac.at>
Message-ID: <CAG4NRe+kOmp=WEdHo-CSRimssUdAHAT8Kq59DcvnXTWTFrkP9w@mail.gmail.com>

Dieter,

You get what the manual says:
"returns a data.frame of the second argument with row entries
corresponding to the first argument"

If you want to join this information to the data frame of your points,
you can use merge() with the @data slot of Point1, or, as they are in
the same order,
I think that even cbind() would do it:

over_test2 <- cbind(Point1 at data,over_test)
If you need a SpPointsDF:
Point2 <- Point1
Point2 at data <- over_test2

but check that the order of the rows in over_test and Point1 at data is the same

Agus

El d?a 16 de abril de 2012 18:31, Dieter Mayr <dieter.mayr at boku.ac.at> escribi?:
> Hi everyone,
>
> i have a pretty simple question, but I just don't figure out how it
> works correctly. Maybe one could give me a hint.
>
> I have a SpatialPointsDataFrame 'Point1' (energy_id, energy_value) and
> a SpatialPolygonsdataframe 'Poly1' (house_id, district,...).
> By using the command "over", I want get a table consisting of the all
> points with the information of the Polygons:
>
> Point_id/energy_value/ House_id/ District
> 1 ? / ?10 ?/ ?1 ?/ ?A
> 2 ? / ?12 ?/ ?1 ?/ ?A
> 3 ? / ?13 ?/ ?2 ?/ ?B
> 4 ? / ? 9 ? / ?2 ?/ ?B
>
>
> if I use:
> over_test <- over (Point1, Poly1)
>
> I get a table, but it only consists of the information from the
> SpatialPolygonsDataFrame 'Poly1', but no informtion about the energy
> value...
> What can I do, that I get this information into my new over_test table
> ??
> Thanks very much for any help,
>
> Dieter Mayr
>
>
> ----------------------------------------------------------
> Mag. Dieter Mayr
> Institut f?r nachhaltige Wirtschaftsentwicklung
> Department Wirschafts- und Sozialwissenschaften
> Universit?t f?r Bodenkultur Wien
> A-1180 Wien | Feistmantelstrasse 4
> Tel ?+43 1 47654-3594
> eMail: dieter.mayr at boku.ac.at
> Web: www.wiso.boku.ac.at/454.html
>
> ----------------------------------------------------------
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From Roger.Bivand at nhh.no  Mon Apr 16 20:45:32 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 16 Apr 2012 20:45:32 +0200 (CEST)
Subject: [R-sig-Geo] rgeos::gArea() to all polygons within sp polygons DF
In-Reply-To: <CAG4NRe+5HMTE=fOTX0SHBhw139W8Z1pb_mv0Ro7Pj-fB7XN-9Q@mail.gmail.com>
References: <CAG4NReJ3UHhokWBQJeq5krtjHOELO3KFZuZ18x5Ee9jWYnd4gQ@mail.gmail.com>
	<4F81AE1D.4090905@uni-muenster.de>
	<CAG4NReKd5vFoXYvLEOAg0YBLXDQgUj4SaEc4iSj-jvTN14v85g@mail.gmail.com>
	<alpine.LRH.2.02.1204091724480.21435@reclus.nhh.no>
	<CAG4NRe++dmJyghKHBBZ9nvaSdCATso8-SOdGEcG+Nu0qjnwDKg@mail.gmail.com>
	<alpine.LRH.2.02.1204101001130.25120@reclus.nhh.no>
	<alpine.LRH.2.02.1204161530040.21979@reclus.nhh.no>
	<CAG4NRe+5HMTE=fOTX0SHBhw139W8Z1pb_mv0Ro7Pj-fB7XN-9Q@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1204162039510.21979@reclus.nhh.no>

On Mon, 16 Apr 2012, Agustin Lobo wrote:

> Roger,
>
> In order to help testing, should we just install
> sp, rgdal and rgeos from r-forge.r-project.org?
> or is there an special way to force that we install the SVN revs that
> you mention?

Yes, but from source, I'm afraid, only sp is in current build there, while 
rgdal and rgeos are not built.

Roger

>
> I will not be able to do it until early in Wednesday, as I'm away of
> the office with just a little macbook air.
>
> Agus
>
> El d?a 16 de abril de 2012 16:52, Roger Bivand <Roger.Bivand at nhh.no> escribi?:
>> This is a request to try out development versions of sp, rgdal, and rgeos,
>> related to Agus' question.
>>
>> I've commited sp SVN rev. 1246 (in rspatial), rgdal SVN rev. 325, and rgeos
>> SVN rev. 332 to R-Forge.
>>
>> The objects defined in sp for polygon geometries do not follow OGC SFS
>> specifications, but can be mapped to them by pointers assigning interior
>> rings to their containing exterior rings, stored in comments assigned to
>> Polygons objects. These comments may be created in maptools or rgeos. It
>> also turns out that the required assignments can be extracted from input OGR
>> data.
>>
>> By adding a top-level comment to SpatialPolygons* objects set to TRUE if all
>> member Polygons objects have comments set, we can avoid the very costly
>> comment assignment loop. If in addition the SpatialPolygons* objects are
>> read with readOGR() in rgdal, the comments can be set directly while
>> reading, as OGR seems to expect the first ring in an OGC SFS Polygon object
>> to be exterior, the rest interior.
>>
>> This means that for Agus' example, there is no extra cost involved in
>> setting the comments, and his gArea call is 0.25s rather than over 100s with
>> comment setting in rgeos, and more with full containment analysis via
>> maptools (shapelib in maptools does not support OGC SFS geometries).
>>
>> So I would like to receive feedback on reading polygon data with readOGR()
>> and on whether it seems reasonable to accept the assignment of interior
>> rings and exterior rings for Polygons objects. If we can believe the
>> Polygons coming from OGR, we can save a lot of time in preparing them for
>> further handling in rgeos.
>>
>> I do not want to release these revisions until they have been tried out
>> thoroughly.
>>
>> Roger
>>
>>
>>
>> On Tue, 10 Apr 2012, Roger Bivand wrote:
>>
>>> On Mon, 9 Apr 2012, Agustin Lobo wrote:
>>>
>>>> Thanks Roger.
>>>> Apologies for the missing output of sessionInfo() .
>>>> Confirmed that the results are correct with rgeos 0.2-5, although it's
>>>> now very slow.
>>>
>>>
>>> You can say:
>>>
>>> bn <- createSPComment(bn)
>>>
>>> first, which takes some time as it recreates the object. If the comments
>>> assigning holes (interior rings) to exterior rings are present, they are not
>>> recreated. Shapefiles do not store this information, and it is flattened out
>>> in making Polygons objects, which were (perhaps unfortunately) conceived of
>>> as matching shapefiles.
>>>
>>> Arguably, this comment creation, needed to map sp Polygons objects to OGC
>>> SFS Polygon or Multipolygon objects, should be done in sp - but the
>>> computational geometry functions neede to find our which hole is in which
>>> exterior ring are in GEOS, so this would involve a circularity in
>>> dependencies.
>>>
>>> So the way to ensure that polygon objects work as expected in rgeos and
>>> when we believe the input hole status is:
>>>
>>> library(rgdal)
>>> pls <- readOGR(...)
>>> library(rgeos)
>>> pls <- createSPComment(pls)
>>> # I'll look at making this faster in C
>>> # subsequent operations (which still check that comments are present in #
>>> each Polygons object)
>>>
>>> For your case, which has many very complex polygons and as such is a good
>>> test case, I have:
>>>
>>>> system.time(bn <- readOGR(".", "BorneoLCv2google"))
>>>
>>> OGR data source with driver: ESRI Shapefile
>>> Source: ".", layer: "BorneoLCv2google"
>>> with 32036 features and 6 fields
>>> Feature type: wkbPolygon with 2 dimensions
>>> ?user ?system elapsed
>>> ?9.928 ? 0.178 ?10.388
>>>>
>>>> system.time(b2 <- gArea(bn, byid=TRUE))
>>>
>>> ?user ?system elapsed
>>> 154.242 ?10.033 169.401
>>>>
>>>> system.time(bn <- createSPComment(bn))
>>>
>>> ?user ?system elapsed
>>> 152.045 ? 0.085 156.501
>>>>
>>>> set_do_poly_check(FALSE)
>>>
>>> # without this, it redoes the comment checking
>>>>
>>>> system.time(b2 <- gArea(bn, byid=TRUE))
>>>
>>> ?user ?system elapsed
>>> ?0.251 ? 0.000 ? 0.252
>>>
>>> In this case, it is also possible to get the areas without using rgeos:
>>>
>>> pls <- slot(bn, "polygons")
>>> exter <- sapply(pls, function(x) {
>>> ?Pls <- slot(x, "Polygons")
>>> ?sum(sapply(Pls, function(xx)
>>> ? ifelse(!slot(xx, "hole"), slot(xx, "area"), 0)))
>>> })
>>> inter <- sapply(pls, function(x) {
>>> ?Pls <- slot(x, "Polygons")
>>> ?sum(sapply(Pls, function(xx)
>>> ? ifelse(slot(xx, "hole"), slot(xx, "area"), 0)))
>>> })
>>> area <- exter - inter
>>>
>>>> print(area[25967], digits=16)
>>>
>>> [1] 8550196769.930017
>>>
>>> since the net area of each Polygons object is the gross area minus the
>>> holes; this is also fast.
>>>
>>> Hope this clarifies,
>>>
>>> Roger
>>>
>>>> Ticket in QGIS updated (and closed).
>>>>
>>>> Agus
>>>>
>>>> El d?a 9 de abril de 2012 17:36, Roger Bivand <Roger.Bivand at nhh.no>
>>>> escribi?:
>>>>>
>>>>> On Mon, 9 Apr 2012, Agustin Lobo wrote:
>>>>>
>>>>>> Thanks Edzer,
>>>>>>
>>>>>> b2 <- gArea(BorneoLCg, byid=T)
>>>>>>
>>>>>> I get many warnings such as:
>>>>>> 40: In RGEOSMiscFunc(spgeom, byid, "rgeos_area") :
>>>>>> ?Polygons object missing comment attribute ignoring hole(s). See
>>>>>> function createSPComment.
>>>>>>
>>>>>> is this normal?
>>>>>>
>>>>>> The result is identical to
>>>>>> b <- sapply(BorneoLCg at polygons, function(x) x at area)
>>>>>>
>>>>>> while it is different than the one provided by QGIS (known to be wrong
>>>>>> for
>>>>>> very
>>>>>> large polygons only because of a format problem) and postgis (assumed
>>>>>> to be correct). Please give a look to:
>>>>>> http://hub.qgis.org/issues/5332
>>>>>
>>>>>
>>>>>
>>>>> Please always provide sessionInfo() output, and a copy of the rgeos
>>>>> startup
>>>>> messages (showing which version of GEOS is used). With rgeos 0.2-5 and
>>>>> GEOS
>>>>> runtime version: 3.3.2-CAPI-1.7.2, I have:
>>>>>
>>>>> bn <- readOGR(".", "BorneoLCv2google")
>>>>> b2 <- gArea(bn, byid=TRUE)
>>>>>>
>>>>>>
>>>>>> print(b2[25967], digits=16)
>>>>>
>>>>>
>>>>> ? ? ? ? ? 25966
>>>>> 8550196769.93012
>>>>>>
>>>>>>
>>>>>> print(b2[26570], digits=16)
>>>>>
>>>>>
>>>>> ? ? ? ? ? ?26569
>>>>> 173647473841.3217
>>>>>
>>>>> so the hole warnings were the reason for the difference. SVN revision
>>>>> 327 of
>>>>> 16 March enforced the use of createSPComment() in gArea() - the user was
>>>>> expected to denote holes properly themselves before this change. Update
>>>>> your
>>>>> rgeos and try again.
>>>>>
>>>>> Please update the QGIS #5332 to state that from rgeos 0.2-5, the values
>>>>> are
>>>>> correct. The area slot in the Polygons object is a gross area used to
>>>>> order
>>>>> plotting (because until recently R polygons simply overplotted one
>>>>> another),
>>>>> so it is not guaranteed to be a planar area measure for polygons with
>>>>> holes.
>>>>>
>>>>> Roger
>>>>>
>>>>>
>>>>>>
>>>>>> Agus
>>>>>>
>>>>>>
>>>>>> El d?a 8 de abril de 2012 17:26, Edzer Pebesma
>>>>>> <edzer.pebesma at uni-muenster.de> escribi?:
>>>>>>>
>>>>>>>
>>>>>>> Agus, have you tried
>>>>>>>
>>>>>>> gArea(BorneoLCg, byid = TRUE)
>>>>>>>
>>>>>>> ?
>>>>>>>
>>>>>>> On 04/08/2012 04:52 PM, Agustin Lobo wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>> Hi!
>>>>>>>>
>>>>>>>> How do I ?apply gArea()) to all polygons within an spatial pol. DF?
>>>>>>>> I've tried
>>>>>>>> areas <- apply(BorneoLCg,gArea)
>>>>>>>> and
>>>>>>>> areas <- sapply(BorneoLCg,gArea)
>>>>>>>>
>>>>>>>> but this is not correct.
>>>>>>>>
>>>>>>>> I want to compare to
>>>>>>>> areas <- sapply(BorneoLCg at polygons, function(x) x at area)
>>>>>>>>
>>>>>>>> Thanks
>>>>>>>>
>>>>>>>> Agus
>>>>>>>>
>>>>>>>> _______________________________________________
>>>>>>>> R-sig-Geo mailing list
>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> --
>>>>>>> Edzer Pebesma
>>>>>>> Institute for Geoinformatics (ifgi), University of M?nster
>>>>>>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>>>>>>> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
>>>>>>> http://www.52north.org/geostatistics ? ? ?e.pebesma at wwu.de
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> R-sig-Geo mailing list
>>>>>>> R-sig-Geo at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>
>>>>>
>>>>> --
>>>>> Roger Bivand
>>>>> Department of Economics, NHH Norwegian School of Economics,
>>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>>>>> e-mail: Roger.Bivand at nhh.no
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>
>>>
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, NHH Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From macqueen1 at llnl.gov  Tue Apr 17 01:38:26 2012
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Mon, 16 Apr 2012 16:38:26 -0700
Subject: [R-sig-Geo] Storing Multiple spplots in List
In-Reply-To: <CAOH6cu63SmL2qtWN=zEZSC8z9DgELer+Ozc8d-7QanbVaO+_9g@mail.gmail.com>
Message-ID: <CBB1F9C2.93496%macqueen1@llnl.gov>

Please make a small reproducible example.
There is no way anyone can figure out the problem with what you have
supplied.

What is telling you they are blank?
Do your spplot() commands produce a plot when executed outside the
function?

This works for me:

tmp <- list()
length(tmp) <- 2

## I used the first example in ?spplot to do this:
tmp[[1]] <-  spplot(  ## args )
tmp[[2]] <-  spplot(  ## args )

## then I get plots from any of these:
lapply(tmp, print)

## or
print( tmp[[1]])

## or even,
print(tmp)


-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062





On 4/13/12 9:01 PM, "Mike Sukmanowsky" <mike.sukmanowsky at gmail.com> wrote:

>Hi all,
>
>I have the function below where I am attempting to create a list of
>spplots
>for later use.  The problem is that the list come back blank for all
>elements.  Why doesn't spplot return proper plots that could be used via
>print()?
>Please see the assignment to the plots list below - plots[[letter]] <-
>spplot()
>
>
>plotFSAs <- function(spatialData, field) {
>plots <- list()
>colours <- brewer.pal(8, "Greens")
> for(letter in LETTERS) {
>inLetter <- substr(spatialData at data$CENSUS_FSA, 1, 1) %in% letter
>fsa.spatial <- subset(spatialData, inLetter)
> classes <- classIntervals(fsa.spatial at data[,c(field)], length(colours),
>style="equal")
> plots[[letter]] <- spplot(fsa.spatial,
>field,
>col.regions=colours,
>at=classes$brks,
>col="black",
>lwd=0.8,
>main=paste("FSAs Beginning with ", letter),
>cex.main=0.3,
>colorkey=list(
>labels = list(
>at=classes$brks,
>labels=round(classes$brks, 2)
>)
>)
>)
>}
>return(plots)
>}
>
>
>-- 
>Mike Sukmanowsky
>
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From fairyland118 at gmail.com  Tue Apr 17 05:09:22 2012
From: fairyland118 at gmail.com (Joseph Duncan)
Date: Mon, 16 Apr 2012 23:09:22 -0400
Subject: [R-sig-Geo] =?windows-1252?q?=93stsls=94?=
Message-ID: <CANZYGDc6W0E7XY4qdUswa6VXTY7sqKhzsa_5gTt1Sh20DpFbcA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120416/35d11bd8/attachment.pl>

From roosbeh.nowrouzian at gmail.com  Tue Apr 17 06:40:41 2012
From: roosbeh.nowrouzian at gmail.com (Roosbeh Nowrouzian)
Date: Tue, 17 Apr 2012 00:40:41 -0400
Subject: [R-sig-Geo] testing prediction of estimated spatial models
Message-ID: <CAJw-hPbWnqXdFHrpsJ_Xh+zLa2KpScAK0TU2vZ+SrBtZO1f_xw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120417/f7228525/attachment.pl>

From Ahmed.Hafi at daff.gov.au  Tue Apr 17 09:12:22 2012
From: Ahmed.Hafi at daff.gov.au (Hafi, Ahmed)
Date: Tue, 17 Apr 2012 17:12:22 +1000
Subject: [R-sig-Geo] can't load rgdal on mac osx [SEC=UNCLASSIFIED]
In-Reply-To: <4F8BAB2F.40408@stats.ox.ac.uk>
References: <4F21D31A72ADA24583E934F68262EBCE0EEEDEB4@ACT001CL03EX02.agdaff.gov.au>
	<alpine.LRH.2.02.1204130939150.8338@reclus.nhh.no>
	<alpine.LRH.2.02.1204151545090.19242@reclus.nhh.no>
	<4F21D31A72ADA24583E934F68262EBCE0EF68683@ACT001CL03EX02.agdaff.gov.au>
	<4F8BAB2F.40408@stats.ox.ac.uk>
Message-ID: <4F21D31A72ADA24583E934F68262EBCE0EFD1D60@ACT001CL03EX02.agdaff.gov.au>

Dear Roger and Prof Ripley,

I successfully installed and loaded rgdal package for R 2.15.0 prepared
for Mac OSX Lion. I would like to thank you both for the effort and the
interest taken.

Thanks

Ahmed Hafi


-----Original Message-----
From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk] 
Sent: Monday, 16 April 2012 3:17 PM
To: Hafi, Ahmed
Cc: Roger.Bivand at nhh.no; r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] can't load rgdal on mac osx [SEC=UNCLASSIFIED]

On 16/04/2012 00:27, Hafi, Ahmed wrote:
> Dear Roger,
>
> Hope the two lines below still work.
>
> seRepositories(ind=1:2)
> install.package('rgdal')
>
>
> I looked at the folder 'http://www.stats.ox.uk/pub/RWin' and still
find
> Rgdal.07-8.tar.gz dated 18 January. I am wondering whether its kept
> somewhere else.

OS X binary packages are .tgz files, and the relevant ones for 2.15.0 
are in
http://www.stats.ox.ac.uk/pub/RWin/bin/macosx/leopard/contrib/2.15/

> I will try installing rgdal and  report back to you later.
>
> Thanks
>
> ahmed
>
> -----Original Message-----
> From: Roger Bivand [mailto:Roger.Bivand at nhh.no]
> Sent: Sunday, 15 April 2012 11:51 PM
> To: Hafi, Ahmed
> Cc: Prof Brian Ripley; r-sig-geo at r-project.org
> Subject: Re: [R-sig-Geo] can't load rgdal on mac osx
[SEC=UNCLASSIFIED]
>
> CRAN Extras now has versions of rgdal and rgeos built with Lion for R
> 2.15. It is fairly likely that these will work with [Snow] Leopard,
but
> because Apple has dropped the Leopard SDK, this cannot be guaranteed,
> and
> the risk of difficulties for Leopard users will increase as GDAL and
> GEOS
> are remade under Lion.
>
> Please report back (possibly off-list) if the 2.15 CRAN Extras binary
> packages work or do not work, with details of your OSX version.
>
> Thanks again to Prof. Brian Ripley for his support!
>
> Roger
>
> On Fri, 13 Apr 2012, Roger Bivand wrote:
>
>> The problem that you report is caused by a terminal hardware failure
> of the
>> Leopard machine used to build the CRAN Extras OSX binaries, so that
> rgdal and
>> rgeos binaries for OSX have not been built for R 2.15. If OSX users
of
> the
>> CRAN Extras rgdal and rgeos binaries upgrade to 2.15 and install the
>> apparently correct 2.15 rgdal (or rgeos), it will fail to load
because
> it was
>> itself built against R 2.14 - the case reported in this posting.
>>
>> Until a new build machine is in place, please revert to R 2.14, or
> delay
>> upgrading to 2.15 if the CRAN extras binary packages are your
prefered
> method
>> of installation. More information will follow as soon as the
situation
> is
>> normalised.
>>
>> R 2.15 users who install rgdal from source linking to the Kyngchaos
> GDAL
>> frameworks will be able to use rgdal in 2.15.
>>
>> We trust that this has nothing to do with the date - the older
Leopard
> OSX
>> machine failed about two weeks ago!
>>
>> Roger
>>
>> On Fri, 13 Apr 2012, Hafi, Ahmed wrote:
>>
>>> Dear list members,
>>>
>>> I am running R on a macbook pro with mac osx lion and trying to do
> some
>>> spatial modelling with R. I have run into a problem in loading
rgdal.
> I
>>> understand that the installation of rgdal in mac is different from
> other
>>> packages and followed the instructions given in CRAN rgdal page
> updated
>>> in last January. The rgdal downloaded successfully but didn't appear
> to
>>> get installed successfully and failed to load.  I have copied the
> screen
>>> print segment below. Is it because of the difference in mac osx
> version
>>> I am using? I would appreciate if someone could interpret it and
> suggest
>>> what should I do to get rgdal loaded.  I am desperate to use the
>>> functions of this package.
>>>
>>>
>>>
>>> setRepositories(ind=1:2)
>>>
>>>> install.packages('rgdal')
>>>
>>> trying URL
>>>
>
'http://www.stats.ox.ac.uk/pub/RWin/bin/macosx/leopard/contrib/2.15/rgda
>>> l_0.7-8.tgz'
>>>
>>> Content type 'application/x-gzip' length 13818239 bytes (13.2 Mb)
>>>
>>> opened URL
>>>
>>> ==================================================
>>>
>>> downloaded 13.2 Mb
>>>
>>>
>>>
>>>
>>>
>>> The downloaded binary packages are in
>>>
>>>
>>>
>
/var/folders/17/452p64r17tj_p4y6gmpw5h4c0000gn/T//Rtmp3v4WEZ/downloaded_
>>> packages
>>>
>>>> library(rgdal)
>>>
>>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>>>
>>> unable to load shared object
>>>
>
'/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rgdal/l
>>> ibs/x86_64/rgdal.so':
>>>
>>>
>
dlopen(/Library/Frameworks/R.framework/Versions/2.15/Resources/library/r
>>> gdal/libs/x86_64/rgdal.so, 6): Library not loaded:
>>>
> /Library/Frameworks/R.framework/Versions/2.14/Resources/lib/libR.dylib
>>>
>>>   Referenced from:
>>>
>
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rgdal/li
>>> bs/x86_64/rgdal.so
>>>
>>>   Reason: image not found
>>>
>>> Error: package/namespace load failed for 'rgdal'
>>>
>>>
>>>
>>> **********************************************************
>>>
>>>
>>>
>>> thanks
>>>
>>>
>>>
>>> Ahmed Hafi
>>>
>>> Senior Economist |   ABARES   |   Biosecurity and Farm Analysis
>>>
>>>
>>>
>>> Phone +61 2 6272 2081
>>>
>>> Email ahmed.hafi at daff.gov.au<mailto:sally.thorpe at abare-brs.gov.au>
>>>
>>>
>>>
>>> Australian Bureau of Agricultural and Resource Economics and
Sciences
>>>
>>> Department of Agriculture, Fisheries and Forestry
>>>
>>> 18 Marcus Clarke Street, Canberra ACT 2601 Australia
>>>
>>> GPO Box 1563 Canberra ACT 2601 Australia
>>>
>>>
>>>
>>> daff.gov.au/abares
>>>
>>>
>>>
>>>   <http://twitter.com/abares>
>>>
>
<http://www.facebook.com/pages/Australian-Bureau-of-Agricultural-Resourc
>>> e-Economics-Sciences-ABARES/157609254289602>
>>>
>>>
>>>
>>>
>>>
>>> ------
>>> ------
>>> IMPORTANT - This email and any attachments have been issued by the
>>> Australian Government Department of Agriculture, Fisheries and
> Forestry
>>> (DAFF). The material transmitted is for the use of the intended
> recipient
>>> only and may contain confidential, legally privileged, copyright or
>>> personal information. You should not copy, use or disclose it
without
>
>>> authorisation from DAFF. It is your responsibility to check any
> attachments
>>> for viruses and defects before opening or forwarding them.
>>>
>>> If you are not an intended recipient, please contact the sender of
> this
>>> email at once by return email and then delete both messages.
> Unintended
>>> recipients must not copy, use, disclose, rely on or publish this
> email or
>>> attachments. DAFF is not liable for any loss or damage resulting
from
>
>>> unauthorised use or dissemination of, or any reliance on, this email
> or
>>> attachments.
>>>
>>> If you have received this e-mail as part of a valid mailing list and
> no
>>> longer want to receive a message such as this one, advise the sender
> by
>>> return e-mail accordingly.
>>>
>>> This notice should not be deleted or altered.
>>>
>>> ------
>>>
>>>
>>> ------
>>>
>>>
>>
>>
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


------
------
IMPORTANT - This email and any attachments have been issued by the Australian Government Department of Agriculture, Fisheries and Forestry (DAFF). The material transmitted is for the use of the intended recipient only and may contain confidential, legally privileged, copyright or personal information. You should not copy, use or disclose it without authorisation from DAFF. It is your responsibility to check any attachments for viruses and defects before opening or forwarding them.

If you are not an intended recipient, please contact the sender of this email at once by return email and then delete both messages. Unintended recipients must not copy, use, disclose, rely on or publish this email or attachments. DAFF is not liable for any loss or damage resulting from unauthorised use or dissemination of, or any reliance on, this email or attachments. 

If you have received this e-mail as part of a valid mailing list and no longer want to receive a message such as this one, advise the sender by return e-mail accordingly.

This notice should not be deleted or altered.

------


------


From noerchen306 at gmail.com  Tue Apr 17 16:25:45 2012
From: noerchen306 at gmail.com (Nora Schmid)
Date: Tue, 17 Apr 2012 16:25:45 +0200
Subject: [R-sig-Geo] create a TS with multiple raster files
Message-ID: <CA+Y9+AHhz16RkT=eF1d+MnEuWqeVAogxvUStDEvW1uRUjvVdXw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120417/b054cb93/attachment.pl>

From jacobvanetten at yahoo.com  Tue Apr 17 16:37:10 2012
From: jacobvanetten at yahoo.com (Jacob van Etten)
Date: Tue, 17 Apr 2012 15:37:10 +0100 (BST)
Subject: [R-sig-Geo] create a TS with multiple raster files
In-Reply-To: <CA+Y9+AHhz16RkT=eF1d+MnEuWqeVAogxvUStDEvW1uRUjvVdXw@mail.gmail.com>
References: <CA+Y9+AHhz16RkT=eF1d+MnEuWqeVAogxvUStDEvW1uRUjvVdXw@mail.gmail.com>
Message-ID: <1334673430.50258.YahooMailNeo@web29702.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120417/78eccca4/attachment.pl>

From Roger.Bivand at nhh.no  Tue Apr 17 17:28:56 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 17 Apr 2012 17:28:56 +0200 (CEST)
Subject: [R-sig-Geo] =?utf-8?b?4oCcc3RzbHPigJ0=?=
In-Reply-To: <CANZYGDc6W0E7XY4qdUswa6VXTY7sqKhzsa_5gTt1Sh20DpFbcA@mail.gmail.com>
References: <CANZYGDc6W0E7XY4qdUswa6VXTY7sqKhzsa_5gTt1Sh20DpFbcA@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1204171720060.24118@reclus.nhh.no>

On Tue, 17 Apr 2012, Joseph Duncan wrote:

> Dear list
>
> I have read ?stsls? help file and Kelejian and Prucha (1998) for more 
> than one week, but still do not understand how to estimate "generalized 
> spatial two-stage least squares model" in sample data
>
> gp2a <- stsls(log(CMEDV) ~ CRIM + ZN + INDUS + CHAS + I(NOX^2) + I(RM^2) +
> AGE + log(DIS) + log(RAD) + TAX + PTRATIO + B + log(LSTAT), data=boston.c,
> nb2listw(boston.soi))
>
> Which are endogenous variables and which are exogenous variables? Which 
> variables are used to obtain 2SLS estimator?  What does the equations 
> looks like?  exactly the same as Kelejian and Prucha (1998) ?

As you can see from the help page (and the code which is the clearest 
description), the coefficient on Wy is fitted using the lagged X variables 
WX and WWX. What is endogenous or not is a matter of terminology, and may 
not actually match the variables you have. In stsls, you don't get to 
define anything, it is simply as given by Kelejian and Prucha, that is 
first step fit WY ~ [WX, WWX], then second step. You can choose only to 
use WX instead of [WX, WWX].

Hope this clarifies,

Roger


>
> Thanks
>
>
>
>
>
> Best regard
>
> 	[[alternative HTML version deleted]]
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Wed Apr 18 09:32:29 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 18 Apr 2012 09:32:29 +0200 (CEST)
Subject: [R-sig-Geo] How to find GWR prediction variance as a measure of
 uncertainty?
In-Reply-To: <1334445014.42519.YahooMailClassic@web161303.mail.bf1.yahoo.com>
References: <1334445014.42519.YahooMailClassic@web161303.mail.bf1.yahoo.com>
Message-ID: <alpine.LRH.2.02.1204180928300.26657@reclus.nhh.no>

On Sun, 15 Apr 2012, Muhammad Imran wrote:

>
> Hi list fellows,
>
> Do someone have any idea to calculate the standard deviation of GWR 
> predictions (prediction variances), similary as we calculate with the 
> sqrt of prediction variance provided by kriging?

As spgwr says when it loads:

"This package does not constitute approval of GWR as a method of spatial 
analysis"

The ability of GWR to fit local coefficients sensibly (given doubts about 
appropriate bandwidths) is not established. Consequently, making 
predictions is encumbered with more than just the uncertainty of fitting 
the local weighted regression. So it is not clear how you should proceed - 
using GWR is an exploratory technique at best until its properties have 
been checked.

Roger

>
> Would be thankful for any help?
>
> Best regards
>
> Imran
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Wed Apr 18 09:46:39 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 18 Apr 2012 09:46:39 +0200 (CEST)
Subject: [R-sig-Geo] testing prediction of estimated spatial models
In-Reply-To: <CAJw-hPbWnqXdFHrpsJ_Xh+zLa2KpScAK0TU2vZ+SrBtZO1f_xw@mail.gmail.com>
References: <CAJw-hPbWnqXdFHrpsJ_Xh+zLa2KpScAK0TU2vZ+SrBtZO1f_xw@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1204180933400.26657@reclus.nhh.no>

On Tue, 17 Apr 2012, Roosbeh Nowrouzian wrote:

> Dear lest members:
>
> After spatial model specification, estimation, and testing specification,
> the predictive ability of estimated model should be tested. prediction is
> of interest of practitioners. At this point I have estimated a
> Spatial Auto-regressive model.

Yes and no. Most spatial regressions are not intended to be used for 
prediction. In both econometrics and ecology, the analyst is most 
interested in the significance or not of the model coefficients, and in 
making inferences about them. Prediction is not central here.

If the spatial process is expressed by a weights matrix rather than by a 
variogram, it is less obvious how to predict onto an extended graph, 
rather than a continuous surface. If the prediction locations have point 
support, and the weights are defined as function of distance, then you may 
get close to the geostatistical predictive setting, but with a rather 
primitive model of the spatial process. If the prediction locations have 
other support and/or the weights are not defined in terms of distance, the 
relationship is less obvious (see Melanie Wall, 2004).

> My question is after dividing the data to
> training set and testing set, how can I apply estimated
> model(Using training data set ) to the testing data set which I have the
> location and all explanatory variables. So by comparing predicted value to
> observed, the predictive ability of model can be estimated. Or is there any
> tool to define Cross Validation of estimated model (I believe writing a
> loop to exclude a point and estimate the model and then predict the value
> for that point and compare to the observed value takes so much time and is
> not possible).

I had a speculative paper in Journal of Geographical Systems (2002) about 
this, but work is continuing on establishing the options for adequate 
prediction in spatial regession, that paper used ad-hoc approaches that 
are not necessarily sound.

The predict() method for sarlm objects in spdep does provide what you may 
need, using the training+test data set as newdata, with spatial weights 
for both training and test locations.

Hope this helps,

Roger

> I like to know your opinion about this issue and appreciate your help
> regarding this issue.
>
> Thanks
> Roosbeh Nowrouzian
> PhD student
> Department of Civil and Coastal Engineering
> University of Florida
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From oscar.perpinan at gmail.com  Wed Apr 18 11:55:53 2012
From: oscar.perpinan at gmail.com (Oscar =?utf-8?B?UGVycGnDscOhbg==?= Lamigueiro)
Date: Wed, 18 Apr 2012 11:55:53 +0200
Subject: [R-sig-Geo] create a TS with multiple raster files
In-Reply-To: <1334673430.50258.YahooMailNeo@web29702.mail.ird.yahoo.com>
	(Jacob van Etten's message of "Tue, 17 Apr 2012 15:37:10 +0100 (BST)")
References: <CA+Y9+AHhz16RkT=eF1d+MnEuWqeVAogxvUStDEvW1uRUjvVdXw@mail.gmail.com>
	<1334673430.50258.YahooMailNeo@web29702.mail.ird.yahoo.com>
Message-ID: <87hawhbbyu.fsf@gmail.com>

Jacob van Etten <jacobvanetten at yahoo.com> writes:

> Dear Nora,
>
> The best thing would be to read the vignette of the raster package first.
>
> A combination of raster layers is not a data frame, but a stack.
>
> This is how you make one, following your example:
>
>
> st <- get(list.files(pattern='*.rst')[1])
>
> for (f in list.files(pattern='*.rst')[-1]) {st <- stack(st, get(f))}
>
Another approach is to pass the result of list.files directly to stack
(if I am not wrong you do not want the first file to be included, that's
why I use [-1]):

library(raster)

rst <- list.files(pattern='*.rst')
s <- stack(rst[-1])

If this stack is a space-time data you can use the setZ function. If idx
is the time index of the data:

s <- setZ(s, idx)

Best,

Oscar.
>
>
> ________________________________
>  From: Nora Schmid <noerchen306 at gmail.com>
> To: r-sig-geo at r-project.org 
> Sent: Tuesday, 17 April 2012, 9:25
> Subject: [R-sig-Geo] create a TS with multiple raster files
>
> Hello,
>
> Im new in R and dont have lots of experiences with programming...
> Im trying to create a time series:
> I read my raster data with the following:
>
> for (f in list.files(pattern='*.rst')){assign(f, raster(f))}
>
> How can I create afterwards a time series with the files I loaded? How
> can I assign all files to one data frame? Whats the best way to create
> from multiple raster files on time series?
>
> Thanks a lot in advance,
>
> yours
>
> Nora
>
> ? [[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
-------------- next part --------------

-- 
Oscar Perpi??n Lamigueiro
Dpto. Ingenier?a El?ctrica
EUITI-UPM
URL: http://procomun.wordpress.com
Twitter: @oscarperpinan

From p.veneri at univpm.it  Wed Apr 18 12:27:07 2012
From: p.veneri at univpm.it (Paolo Veneri)
Date: Wed, 18 Apr 2012 12:27:07 +0200
Subject: [R-sig-Geo] Error in spdep: system is computationally singular
	(lagsarlm)
Message-ID: <1d4a30b358220bc23c04adb321ce8243.squirrel@mta01.univpm.it>


I am trying to estimate a SAR model with the lagsarlm function:

SAR3nn <- lagsarlm(formula=formula(mod1),listw=list3nn.listw,type="lag",
method="eigen", data=d)

but I saw this message:

Error in solve.default(inf, tol = tol.solve) :
  system is computationally singular: reciprocal condition number =
5.74163e-27

It happens with both a k-nearest-neighbors matrix and with a distance matrix.
If I opt for a spatial 2sls model, the result is the same. I must say that
in the formula I have a variable and its square, which are very highly
correlated (about 0.9). The IV model works if I drop the squared variable,
while the lagsarlm still tells me that the system is singular.

Does anybody can help me? Thank you so much!

Paolo


-- 
Paolo Veneri
Dipartimento di Scienze Economiche e Sociali (DiSES)
Universit? Politecnica delle Marche
Piazza Martelli, 8 - 60121 Ancona (Italy)
Tel. +39 3392672827


From Roger.Bivand at nhh.no  Wed Apr 18 13:01:26 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 18 Apr 2012 13:01:26 +0200 (CEST)
Subject: [R-sig-Geo] Error in spdep: system is computationally singular
 (lagsarlm)
In-Reply-To: <1d4a30b358220bc23c04adb321ce8243.squirrel@mta01.univpm.it>
References: <1d4a30b358220bc23c04adb321ce8243.squirrel@mta01.univpm.it>
Message-ID: <alpine.LRH.2.02.1204181253450.27687@reclus.nhh.no>

On Wed, 18 Apr 2012, Paolo Veneri wrote:

>
> I am trying to estimate a SAR model with the lagsarlm function:
>
> SAR3nn <- lagsarlm(formula=formula(mod1),listw=list3nn.listw,type="lag",
> method="eigen", data=d)
>
> but I saw this message:
>
> Error in solve.default(inf, tol = tol.solve) :
>  system is computationally singular: reciprocal condition number =
> 5.74163e-27
>
> It happens with both a k-nearest-neighbors matrix and with a distance matrix.
> If I opt for a spatial 2sls model, the result is the same. I must say that
> in the formula I have a variable and its square, which are very highly
> correlated (about 0.9). The IV model works if I drop the squared variable,
> while the lagsarlm still tells me that the system is singular.

Please see the details in ?lagsarlm, and also refer to the entry for 
argument tol.solve=. It isn't just the high correlation of your variables, 
but also their scaling with respect to the response and/or the spatial 
coefficient. Using a different method= (say "LU") and using a power trace 
vector trs= may get you there too, but re-scaling the variable will also 
re-scale its square. The same problem affects the STSLS - re-scale the 
variable. If these are say in Euro, use thousand, million or whatever Euro 
instead, for example.

Hope this helps,

Roger


>
> Does anybody can help me? Thank you so much!
>
> Paolo
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From m.hewson at uq.edu.au  Wed Apr 18 13:32:34 2012
From: m.hewson at uq.edu.au (Michael Hewson)
Date: Wed, 18 Apr 2012 11:32:34 +0000
Subject: [R-sig-Geo] ncf cross-correlogram
In-Reply-To: <4DFD7C68C50FE54A98C0D43A76E08E08011EAE@uqexmdb1.soe.uq.edu.au>
References: <4DFD7C68C50FE54A98C0D43A76E08E08011EAE@uqexmdb1.soe.uq.edu.au>
Message-ID: <4DFD7C68C50FE54A98C0D43A76E08E08011EF5@uqexmdb1.soe.uq.edu.au>

Dear list,

When using correlog from package ncf I specify the data points to be spatially described by lat/long (in my text file they are in decimal degrees ie 153.32, -27.43). The extent of this 1km resolution grid is about 40 km by 30 km.

When I plot the correlog result with plot.correlog I see my lag distances are from values from 0 to 50. Can I assume the lag distances are then in km? That would seem about right?

My thanks

________________________________________________________
Michael Hewson PhD candidate
Climate Research Group | Centre for Spatial Environmental Research
The University of Queensland | Brisbane Q 4072 | Australia
m.hewson at uq.edu.au | +61 (0)408 379 373







From jacobvanetten at yahoo.com  Wed Apr 18 13:53:00 2012
From: jacobvanetten at yahoo.com (Jacob van Etten)
Date: Wed, 18 Apr 2012 12:53:00 +0100 (BST)
Subject: [R-sig-Geo] create a TS with multiple raster files
In-Reply-To: <87hawhbbyu.fsf@gmail.com>
References: <CA+Y9+AHhz16RkT=eF1d+MnEuWqeVAogxvUStDEvW1uRUjvVdXw@mail.gmail.com>
	<1334673430.50258.YahooMailNeo@web29702.mail.ird.yahoo.com>
	<87hawhbbyu.fsf@gmail.com>
Message-ID: <1334749980.25524.YahooMailNeo@web29706.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120418/fac4f964/attachment.pl>

From oliveirajc at ufv.br  Wed Apr 18 14:01:14 2012
From: oliveirajc at ufv.br (julio cesar oliveira)
Date: Wed, 18 Apr 2012 09:01:14 -0300
Subject: [R-sig-Geo] package raster - very slow for reading
Message-ID: <CAG+u5grv=wBnwkJc=XvqumONFzmWOCWMUFkv68-F+OGj9xY8qA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120418/1693a6cc/attachment.pl>

From oliveirajc at ufv.br  Wed Apr 18 14:16:24 2012
From: oliveirajc at ufv.br (julio cesar oliveira)
Date: Wed, 18 Apr 2012 09:16:24 -0300
Subject: [R-sig-Geo] problem in tk_choose.files
Message-ID: <CAG+u5gqQQPMN1vuK2RXf3frcmFMq21CkExDbrzykD9Szo-MmXA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120418/2951a630/attachment.pl>

From roman.lustrik at gmail.com  Wed Apr 18 14:51:41 2012
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Wed, 18 Apr 2012 14:51:41 +0200
Subject: [R-sig-Geo] problem in tk_choose.files
In-Reply-To: <CAG+u5gqQQPMN1vuK2RXf3frcmFMq21CkExDbrzykD9Szo-MmXA@mail.gmail.com>
References: <CAG+u5gqQQPMN1vuK2RXf3frcmFMq21CkExDbrzykD9Szo-MmXA@mail.gmail.com>
Message-ID: <CAHT1vpjjsj64ADVuGxuvh-C+K_JvDAvkA-SSfeJ1DqJdyAWN2w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120418/d76b143f/attachment.pl>

From Bastien.Ferland-Raymond at mrnf.gouv.qc.ca  Wed Apr 18 15:34:49 2012
From: Bastien.Ferland-Raymond at mrnf.gouv.qc.ca (Bastien.Ferland-Raymond at mrnf.gouv.qc.ca)
Date: Wed, 18 Apr 2012 09:34:49 -0400
Subject: [R-sig-Geo] dist2Line with mtm projection
Message-ID: <161DC602615F6943A19BAEA3DBF2E4B9018846DA4E03@HARFANG.intranet.mrn.gouv>

Dear R people,

I have a code that was using the function dist2Line() from the geosphere package.  The function worked find and did exactly what I was looking for which is to find the distance between a point (from a SpatialPointDataFrame object) and a line (from a SpatialLinesDataFrame object) and give me the coordinates on the line where the distance is the shortest.  However, I've add to change my code to start using MTM coordinates system instead on lat/long and now, the dist2Line() function doesn't work anymore as it requires Lat/Long.

So, I've tried the function gDistance() in the rgeos package as it is using MTM.  This calculated the distance properly, but didn't give me the coordinates on the line that is the closest to my point (which is what I really need).

Do any of you know any function similar to dist2Line() but that works in MTM projection?  I don't really feel like reprojecting into lat/long as it will slow down my code too much.

Finally, here is a bonus question: Even better than the dist2Line() function would be a function that gives me the same result as dist2Line, but by calculating a costDistance like it is done by the gdistance package instead of the traditional Euclidean distance.  A function like : costDist2Line() which sadly I couldn't find anywhere.  I doubt this function exists and I'm expecting it to be very hard to program, so that is why it's only a bonus question...

Best regards,

Bastien Ferland-Raymond, M.Sc. Stat., M.Sc. Biol.
Division des orientations et projets sp?ciaux
Direction des inventaires forestiers
Minist?re des Ressources naturelles et de la Faune


From fairyland118 at gmail.com  Wed Apr 18 17:33:42 2012
From: fairyland118 at gmail.com (Joseph Duncan)
Date: Wed, 18 Apr 2012 11:33:42 -0400
Subject: [R-sig-Geo] =?windows-1252?q?=93stsls=94?=
In-Reply-To: <alpine.LRH.2.02.1204171720060.24118@reclus.nhh.no>
References: <CANZYGDc6W0E7XY4qdUswa6VXTY7sqKhzsa_5gTt1Sh20DpFbcA@mail.gmail.com>
	<alpine.LRH.2.02.1204171720060.24118@reclus.nhh.no>
Message-ID: <CANZYGDe965rP0TcLQhqbmTre0jWbg9whwR+6b0fPSi47zOXgKQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120418/8093edb6/attachment.pl>

From r.hijmans at gmail.com  Wed Apr 18 18:07:10 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 18 Apr 2012 09:07:10 -0700
Subject: [R-sig-Geo] package raster - very slow for reading
In-Reply-To: <CAG+u5grv=wBnwkJc=XvqumONFzmWOCWMUFkv68-F+OGj9xY8qA@mail.gmail.com>
References: <CAG+u5grv=wBnwkJc=XvqumONFzmWOCWMUFkv68-F+OGj9xY8qA@mail.gmail.com>
Message-ID: <CANtt_hxRu=ESKum8n28eb=iFd2C4h37wsvsP8OFkRTNdQ16sUw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120418/e7330506/attachment.pl>

From geotux_tuxman at linuxmail.org  Wed Apr 18 19:24:19 2012
From: geotux_tuxman at linuxmail.org (geotux_tuxman at linuxmail.org)
Date: Wed, 18 Apr 2012 13:24:19 -0400
Subject: [R-sig-Geo] dist2Line with mtm projection
Message-ID: <20120418172419.206170@gmx.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120418/70b10fb0/attachment.pl>

From Bastien.Ferland-Raymond at mrnf.gouv.qc.ca  Wed Apr 18 19:30:34 2012
From: Bastien.Ferland-Raymond at mrnf.gouv.qc.ca (Bastien.Ferland-Raymond at mrnf.gouv.qc.ca)
Date: Wed, 18 Apr 2012 13:30:34 -0400
Subject: [R-sig-Geo] RE :  dist2Line with mtm projection
In-Reply-To: <20120418172419.206170@gmx.com>
Message-ID: <161DC602615F6943A19BAEA3DBF2E4B9018846DA4E07@HARFANG.intranet.mrn.gouv>

Hello German,

The technique you propose is unorthodox, but it works perfectly!  Very fast and easy, it's exactly what I needed.

Thanks!

Bastien


-----Message d'origine-----
De : geotux_tuxman at linuxmail.org [mailto:geotux_tuxman at linuxmail.org]
Envoy? : 18 avril 2012 13:24
? : Ferland-Raymond, Bastien (DIF); r-sig-geo at r-project.org
Objet : Re: [R-sig-Geo] dist2Line with mtm projection

Hi Bastien,

unfortunately I won't go for the bonus :-/,  but regarding the distance calculation you can have a look at [1]. There is some code for snapping points to lines, from which you can reuse the functions you consider. They work with sp objects.

Regards,

Germ?n Carrillo

------------------------
[1] http://geotux.tuxfamily.org/index.php/en/geo-blogs/item/296-snapping-points-to-lines-in-r

----- Original Message -----
From: Bastien.Ferland-Raymond at mrnf.gouv.qc.ca
Sent: 04/18/12 03:34 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] dist2Line with mtm projection


Dear R people,

I have a code that was using the function dist2Line() from the geosphere package.  The function worked find and did exactly what I was looking for which is to find the distance between a point (from a SpatialPointDataFrame object) and a line (from a SpatialLinesDataFrame object) and give me the coordinates on the line where the distance is the shortest.  However, I've add to change my code to start using MTM coordinates system instead on lat/long and now, the dist2Line() function doesn't work anymore as it requires Lat/Long.

So, I've tried the function gDistance() in the rgeos package as it is using MTM.  This calculated the distance properly, but didn't give me the coordinates on the line that is the closest to my point (which is what I really need).

Do any of you know any function similar to dist2Line() but that works in MTM projection?  I don't really feel like reprojecting into lat/long as it will slow down my code too much.

Finally, here is a bonus question: Even better than the dist2Line() function would be a function that gives me the same result as dist2Line, but by calculating a costDistance like it is done by the gdistance package instead of the traditional Euclidean distance.  A function like : costDist2Line() which sadly I couldn't find anywhere.  I doubt this function exists and I'm expecting it to be very hard to program, so that is why it's only a bonus question...

Best regards,

Bastien Ferland-Raymond, M.Sc. Stat., M.Sc. Biol.
Division des orientations et projets sp?ciaux
Direction des inventaires forestiers
Minist?re des Ressources naturelles et de la Faune

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

 --
-----------
    \__
(:>__)(
    /

Soluciones Geoinform?ticas Libres


From cswingle at gmail.com  Wed Apr 18 19:32:41 2012
From: cswingle at gmail.com (Christopher Swingley)
Date: Wed, 18 Apr 2012 09:32:41 -0800
Subject: [R-sig-Geo] raster::polygonValues?
Message-ID: <CAHsw44858z6iCOzmJogK2O6SzD5XcSubA1ffsuZDTKLFTjtNiw@mail.gmail.com>

Greetings!

I'm re-running a script I used in 2009 that looked similar to the
following.  The idea is to intersect a series of watershed polygons
with rasters of climate data and calculate some basin statistics for
each basin x climate raster.

library(raster)
library(rgdal)
grids <- list.files('climatology', pattern = '*.tif$')
basins <- readOGR('basins', 'all_basins')
for (grid in grids) {
  r <- raster(grid)
  v <- polygonValues(basins, r)
  basin_means <- sapply(v, mean)
  basin_sd <- sapply(v, sd)
  basin_n <- sapply(v, length)
}

But now I get 'Error: could not find function "polygonValues"'.
Searches on the Internet lead me to believe 'polygonValues' is in the
raster package, and it's mentioned in four places in the raster
package changelog, but I can't find mention of it's removal.

Has polygonValues been replaced with something else?  Did this
morning's "install.packages('raster')" not build the whole thing
somehow?

Thanks,

Chris
-- 
Christopher Swingley
Fairbanks, Alaska
http://swingleydev.com/
cswingle at gmail.com


From b.rowlingson at lancaster.ac.uk  Wed Apr 18 20:55:14 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 18 Apr 2012 19:55:14 +0100
Subject: [R-sig-Geo] raster::polygonValues?
In-Reply-To: <CAHsw44858z6iCOzmJogK2O6SzD5XcSubA1ffsuZDTKLFTjtNiw@mail.gmail.com>
References: <CAHsw44858z6iCOzmJogK2O6SzD5XcSubA1ffsuZDTKLFTjtNiw@mail.gmail.com>
Message-ID: <CANVKczP5Deyk9NAB5V-evaQbxckw5OGYOqZt2+Kcd_hBpOGU5g@mail.gmail.com>

On Wed, Apr 18, 2012 at 6:32 PM, Christopher Swingley
<cswingle at gmail.com> wrote:
> Greetings!
>
> I'm re-running a script I used in 2009 that looked similar to the
> following. ?The idea is to intersect a series of watershed polygons
> with rasters of climate data and calculate some basin statistics for
> each basin x climate raster.
>
> library(raster)
> library(rgdal)
> grids <- list.files('climatology', pattern = '*.tif$')
> basins <- readOGR('basins', 'all_basins')
> for (grid in grids) {
> ?r <- raster(grid)
> ?v <- polygonValues(basins, r)
> ?basin_means <- sapply(v, mean)
> ?basin_sd <- sapply(v, sd)
> ?basin_n <- sapply(v, length)
> }
>
> But now I get 'Error: could not find function "polygonValues"'.
> Searches on the Internet lead me to believe 'polygonValues' is in the
> raster package, and it's mentioned in four places in the raster
> package changelog, but I can't find mention of it's removal.
>
> Has polygonValues been replaced with something else? ?Did this
> morning's "install.packages('raster')" not build the whole thing
> somehow?

 I think you probably want to use extract(raster,polys) - I answered a
very similar question on gis.stackexchange.com the other day:

http://gis.stackexchange.com/questions/23614/get-raster-values-from-a-polygon-overlay-in-opensource-gis-solutions/23628#23628

Barry


From r.turner at auckland.ac.nz  Wed Apr 18 22:31:37 2012
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 19 Apr 2012 08:31:37 +1200
Subject: [R-sig-Geo] raster::polygonValues?
In-Reply-To: <CAHsw44858z6iCOzmJogK2O6SzD5XcSubA1ffsuZDTKLFTjtNiw@mail.gmail.com>
References: <CAHsw44858z6iCOzmJogK2O6SzD5XcSubA1ffsuZDTKLFTjtNiw@mail.gmail.com>
Message-ID: <4F8F24A9.4050503@auckland.ac.nz>


If you read the ChangeLog carefully (!) you will see:

> --- 30-Oct-2010,  version 1.6-10
> <SNIP>
> New generic function 'extract', to replace xyValues, cellValues, 
> lineValues, polygonValues


I.e. look at ?extract.

     cheers,

         Rolf Turner

On 19/04/12 05:32, Christopher Swingley wrote:
> Greetings!
>
> I'm re-running a script I used in 2009 that looked similar to the
> following.  The idea is to intersect a series of watershed polygons
> with rasters of climate data and calculate some basin statistics for
> each basin x climate raster.
>
> library(raster)
> library(rgdal)
> grids<- list.files('climatology', pattern = '*.tif$')
> basins<- readOGR('basins', 'all_basins')
> for (grid in grids) {
>    r<- raster(grid)
>    v<- polygonValues(basins, r)
>    basin_means<- sapply(v, mean)
>    basin_sd<- sapply(v, sd)
>    basin_n<- sapply(v, length)
> }
>
> But now I get 'Error: could not find function "polygonValues"'.
> Searches on the Internet lead me to believe 'polygonValues' is in the
> raster package, and it's mentioned in four places in the raster
> package changelog, but I can't find mention of it's removal.
>
> Has polygonValues been replaced with something else?  Did this
> morning's "install.packages('raster')" not build the whole thing
> somehow?
>
> Thanks,
>
> Chris


From juantomas.sayago at gmail.com  Wed Apr 18 22:42:20 2012
From: juantomas.sayago at gmail.com (Juan Tomas Sayago)
Date: Wed, 18 Apr 2012 16:42:20 -0400
Subject: [R-sig-Geo] Questions on the function gBuffer
Message-ID: <CAEOXpNB1Xd4mde49myEXeP8WwOQF2ViPy3F20rNTBPWuDxEBwg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120418/9a26c7ed/attachment.pl>

From jaalonson at indra.es  Fri Apr 20 08:49:59 2012
From: jaalonson at indra.es (=?iso-8859-1?Q?Alonso_Nanclares=2C_Jes=FAs_Alberto?=)
Date: Fri, 20 Apr 2012 08:49:59 +0200
Subject: [R-sig-Geo] Interior of Polygons
Message-ID: <DA5EEE32BFD3494C9E333862FF7A38930325D8DE7E@MADARRMAILBOX07.indra.es>

Hi dear members of the list,

I have a KML file with the coordinates of some polygons and a set of bi-dimensional points, and I'm facing the problem of classifying the points in the respective polygons. Does anyone know how to define the interior of polygons, or of a different way to solve the problem? Any idea is well received.

Thank you so much,

Jes?s Alberto Alonso Nanclares
Consultor Junior
Business Intelligence

C/ Anabel Segura 7
28108 Alcobendas (Madrid)
Espa?a

T +34 914 807 877
jaalonson at indra.es
www.indracompany.com<http://www.indracompany.com>

[cid:image001.jpg at 01CD1ED2.9165DD70]


________________________________
Este correo electr?nico y, en su caso, cualquier fichero anexo al mismo, contiene informaci?n de car?cter confidencial exclusivamente dirigida a su destinatario o destinatarios. Si no es vd. el destinatario indicado, queda notificado que la lectura, utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida en virtud de la legislaci?n vigente. En el caso de haber recibido este correo electr?nico por error, se ruega notificar inmediatamente esta circunstancia mediante reenv?o a la direcci?n electr?nica del remitente.
Evite imprimir este mensaje si no es estrictamente necesario.

This email and any file attached to it (when applicable) contain(s) confidential information that is exclusively addressed to its recipient(s). If you are not the indicated recipient, you are informed that reading, using, disseminating and/or copying it without authorisation is forbidden in accordance with the legislation in effect. If you have received this email by mistake, please immediately notify the sender of the situation by resending it to their email address.
Avoid printing this message if it is not absolutely necessary.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120420/09fc568e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 1907 bytes
Desc: image001.jpg
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120420/09fc568e/attachment.jpg>

From M.U.Kemp at uva.nl  Fri Apr 20 09:26:13 2012
From: M.U.Kemp at uva.nl (Kemp, Michael)
Date: Fri, 20 Apr 2012 07:26:13 +0000
Subject: [R-sig-Geo] Interior of Polygons
In-Reply-To: <DA5EEE32BFD3494C9E333862FF7A38930325D8DE7E@MADARRMAILBOX07.indra.es>
References: <DA5EEE32BFD3494C9E333862FF7A38930325D8DE7E@MADARRMAILBOX07.indra.es>
Message-ID: <41DD650D5B3A4247AD9F423FDE9378FA2CC71AA0@snelders.uva.nl>

Hey Jes?s,
See getKMLcoordinates() in the maptools package to extract the coordinates of the polygons and the points from the kml file.  Then, point.in.polygon() in the sp package should be able to do what you want.
Regards,
Michael

From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Alonso Nanclares, Jes?s Alberto
Sent: Friday, April 20, 2012 8:50 AM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] Interior of Polygons

Hi dear members of the list,

I have a KML file with the coordinates of some polygons and a set of bi-dimensional points, and I'm facing the problem of classifying the points in the respective polygons. Does anyone know how to define the interior of polygons, or of a different way to solve the problem? Any idea is well received.

Thank you so much,

Jes?s Alberto Alonso Nanclares
Consultor Junior
Business Intelligence

C/ Anabel Segura 7
28108 Alcobendas (Madrid)
Espa?a

T +34 914 807 877
jaalonson at indra.es<mailto:jaalonson at indra.es>
www.indracompany.com<http://www.indracompany.com>

[indra]


________________________________
Este correo electr?nico y, en su caso, cualquier fichero anexo al mismo, contiene informaci?n de car?cter confidencial exclusivamente dirigida a su destinatario o destinatarios. Si no es vd. el destinatario indicado, queda notificado que la lectura, utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida en virtud de la legislaci?n vigente. En el caso de haber recibido este correo electr?nico por error, se ruega notificar inmediatamente esta circunstancia mediante reenv?o a la direcci?n electr?nica del remitente.
Evite imprimir este mensaje si no es estrictamente necesario.

This email and any file attached to it (when applicable) contain(s) confidential information that is exclusively addressed to its recipient(s). If you are not the indicated recipient, you are informed that reading, using, disseminating and/or copying it without authorisation is forbidden in accordance with the legislation in effect. If you have received this email by mistake, please immediately notify the sender of the situation by resending it to their email address.
Avoid printing this message if it is not absolutely necessary.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120420/5b321b8f/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 1907 bytes
Desc: image001.jpg
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120420/5b321b8f/attachment.jpg>

From david.marguerit at gmail.com  Fri Apr 20 15:49:25 2012
From: david.marguerit at gmail.com (David Marguerit)
Date: Fri, 20 Apr 2012 15:49:25 +0200
Subject: [R-sig-Geo] Comparison coefficients from OLS and Spatial lag model
Message-ID: <CA+WaK3HKgvCCNCfSLnu+yS23nhswxU-S762yRsqCbTxL07Z84w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120420/2c8dad6a/attachment.pl>

From celso at stephan.mus.br  Fri Apr 20 18:40:17 2012
From: celso at stephan.mus.br (celso at stephan.mus.br)
Date: Fri, 20 Apr 2012 13:40:17 -0300 (BRT)
Subject: [R-sig-Geo] Raster to points
Message-ID: <57959.200.136.108.1.1334940017.squirrel@001mail.001mail.com.br>

Hi!

I need to create a new attribute for points in a shapefile containing 
values from a raster (originally a kernel) on corresponding position. Does
anyone has a clue?

Thanks!!

Celso Stephan


From qianstv at gmail.com  Fri Apr 20 19:29:44 2012
From: qianstv at gmail.com (Qian Steven)
Date: Fri, 20 Apr 2012 13:29:44 -0400
Subject: [R-sig-Geo] Converting neighbor list to table
Message-ID: <CAETu9rEU39a55uMvm2fg+KS5aZ2Zvc=0kGx_9EiQeiPDor7Kmg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120420/a7bb0e36/attachment.pl>

From Roger.Bivand at nhh.no  Fri Apr 20 19:36:16 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 20 Apr 2012 19:36:16 +0200 (CEST)
Subject: [R-sig-Geo] Interior of Polygons
In-Reply-To: <41DD650D5B3A4247AD9F423FDE9378FA2CC71AA0@snelders.uva.nl>
References: <DA5EEE32BFD3494C9E333862FF7A38930325D8DE7E@MADARRMAILBOX07.indra.es>
	<41DD650D5B3A4247AD9F423FDE9378FA2CC71AA0@snelders.uva.nl>
Message-ID: <alpine.LRH.2.02.1204201933150.4979@reclus.nhh.no>

On Fri, 20 Apr 2012, Kemp, Michael wrote:

> Hey Jes?s,
> See getKMLcoordinates() in the maptools package to extract the 
> coordinates of the polygons and the points from the kml file.  Then, 
> point.in.polygon() in the sp package should be able to do what you want.

Or rather easier use readOGR() in rgdal to read the file, possibly 
preceded by ogrListLayers() if you do not know the layer name; OGR has a 
KML driver. Then use the over() methods in the sp package.

Hope this helps,

Roger


> Regards,
> Michael
>
> From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Alonso Nanclares, Jes?s Alberto
> Sent: Friday, April 20, 2012 8:50 AM
> To: r-sig-geo at r-project.org
> Subject: [R-sig-Geo] Interior of Polygons
>
> Hi dear members of the list,
>
> I have a KML file with the coordinates of some polygons and a set of bi-dimensional points, and I'm facing the problem of classifying the points in the respective polygons. Does anyone know how to define the interior of polygons, or of a different way to solve the problem? Any idea is well received.
>
> Thank you so much,
>
> Jes?s Alberto Alonso Nanclares
> Consultor Junior
> Business Intelligence
>
> C/ Anabel Segura 7
> 28108 Alcobendas (Madrid)
> Espa?a
>
> T +34 914 807 877
> jaalonson at indra.es<mailto:jaalonson at indra.es>
> www.indracompany.com<http://www.indracompany.com>
>
> [indra]
>
>
> ________________________________
> Este correo electr?nico y, en su caso, cualquier fichero anexo al mismo, contiene informaci?n de car?cter confidencial exclusivamente dirigida a su destinatario o destinatarios. Si no es vd. el destinatario indicado, queda notificado que la lectura, utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida en virtud de la legislaci?n vigente. En el caso de haber recibido este correo electr?nico por error, se ruega notificar inmediatamente esta circunstancia mediante reenv?o a la direcci?n electr?nica del remitente.
> Evite imprimir este mensaje si no es estrictamente necesario.
>
> This email and any file attached to it (when applicable) contain(s) confidential information that is exclusively addressed to its recipient(s). If you are not the indicated recipient, you are informed that reading, using, disseminating and/or copying it without authorisation is forbidden in accordance with the legislation in effect. If you have received this email by mistake, please immediately notify the sender of the situation by resending it to their email address.
> Avoid printing this message if it is not absolutely necessary.
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From Roger.Bivand at nhh.no  Fri Apr 20 19:46:50 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 20 Apr 2012 19:46:50 +0200 (CEST)
Subject: [R-sig-Geo] Comparison coefficients from OLS and Spatial lag
 model
In-Reply-To: <CA+WaK3HKgvCCNCfSLnu+yS23nhswxU-S762yRsqCbTxL07Z84w@mail.gmail.com>
References: <CA+WaK3HKgvCCNCfSLnu+yS23nhswxU-S762yRsqCbTxL07Z84w@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1204201937490.4979@reclus.nhh.no>

On Fri, 20 Apr 2012, David Marguerit wrote:

> Hi dear List members,
>
> I am trying to run a spatial lag regression incorporated in the spdep
> package R version 0.5-41. My computer has the follow configuration:
> Widows XP Service Pack 3
> Intel Pentium 4 CPU 2.80 Ghz
> 1.99 Go de Ram
>
> I have a geocoded (longitude and latitude) individual database with n=2696.
> On the left hand, I have the distance between each individual and the
> nearest polluting industries and on the right hand I have 7 explanatory
> variables.
> When I compare coefficients obtained from OLS and the Spatial Lag Model I
> can see huge differences. Is it normal?

Yes, but the models are different. You may compare spatial error 
coefficients with linear model coefficients, but not spatial lag mode 
coefficients (see LeSage & Pace 2009).

Your response is constructed in a really wierd way, you are trying to 
account for the distance between individuals and polluting industry. The 
autocorrelation is of course being created by you, when you define the 
response in this way. In addition, the distances are not going to change 
if you change the explanatory variables. I think that your model should be 
reconsidered completely, with distance to polluting industry as an 
explanatory variable, but I don't know what your response would be.

You simply cannot model in this way, look at what Waller & Gotway (2004) 
do, as for example in spdep in ?NY_data.

Hope this clarifies,

Roger

>
> The following lines resume my program:
>
> Firstly, I run a OLS regression:
>
>> tab<-read.dta("coord_modif.dta")> form.lin<-as.formula(log(entr)~log(rev_hab)+edu2+nonblanc+nonmaison+matr2+ocup2+ocup3+nonowner)> ols.lin<-lm(form.lin,data=tab)
>
>> summary (ols.lin)
> Call:
> lm(formula = form.lin, data = tab)
>
> Residuals:
>     Min       1Q   Median       3Q      Max
> -3.12600 -0.42976  0.06275  0.48021  1.87649
>
> Coefficients:
>             Estimate Std. Error t value Pr(>|t|)
> (Intercept)   0.71921    0.19842   3.625 0.000295 ***
> log(rev_hab)  0.06113    0.01813   3.372 0.000757 ***
> edu2         -0.13266    0.05570  -2.381 0.017315 *
> nonblanc     -0.22557    0.03892  -5.795 7.61e-09 ***
> nonmaison    -0.09585    0.03794  -2.526 0.011582 *
> matr2        -0.04329    0.02902  -1.492 0.135905
> ocup2         0.06978    0.08512   0.820 0.412425
> ocup3         0.09880    0.02901   3.406 0.000670 ***
> nonowner     -0.09370    0.04046  -2.316 0.020625 *
> ---
> Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1
>
> Residual standard error: 0.7101 on 2687 degrees of freedom
> Multiple R-squared: 0.0562,	Adjusted R-squared: 0.05339
> F-statistic:    20 on 8 and 2687 DF,  p-value: < 2.2e-16
>
>
> Then, I create a Weight Matrix in order to check for the presence of
> Spatial Autocorrelation. I use the methodology of Sphere of Influence
> describe in *Applied Spatial Data Analysis with R* (Bivand et al., 2008) :
>
>> coords<-cbind(tab$long_dav, tab$lat_dav)
>> nb.temp<-tri2nb(coords)
>> nb<-graph2nb(soi.graph(nb.temp, coords))
>> plot(coords, col="red")
>> plot(nb, coords,add=TRUE)
>> title(main="Sphere of Influence Graph")
>> nb_1<-list(SOI=nb)
>> sapply(nb_1,function(x) is.symmetric.nb(x, verbose=FALSE, force=TRUE))
>
> SOI
> TRUE
>
>> listw<-nb2listw(nb,style="W")> summary(listw)
>
> Characteristics of weights list object:
> Neighbour list object:
> Number of regions: 2696
> Number of nonzero links: 7186
> Percentage nonzero weights: 0.09886611
> Average number of links: 2.66543
> Link number distribution:
>
>  1   2   3   4   5   6   7   8   9
> 452 889 759 382 150  50  12   1   1
> 452 least connected regions:
> 2 8 16 22 23 33 35 39 66 68 70 78 80 83 84 95 101 106 110 112 120 124
> 126 137 140 141 146 162 163 168 177 180 190 196 197 201 206 207 213
> 218 220 225 235 241 254 255 260 261 268 279 282 285 286 290 298 305
> 314 319 327 332 335 339 344 366 373 382 383 394 395 401 402 403 404
> 405 406 409 411 415 417 421 422 424 430 431 440 471 474 482 483 484
> 486 492 498 499 502 507 513 515 526 539 540 541 545 546 547 552 554
> 556 578 585 600 602 604 607 613 616 625 629 658 668 669 676 683 686
> 696 698 701 704 718 723 729 739 751 757 759 760 766 768 773 776 779
> 787 792 793 798 799 802 806 807 809 811 829 835 840 851 855 860 863
> 868 881 888 893 895 896 903 910 913 922 938 946 947 959 970 977 990
> 992 995 1000 1008 1018 1022 1023 1026 1027 1028 1031 1038 1039 1046
> 1048 1051 1080 1097 1104 1110 1111 1120 1145 1147 1165 1171 1178 1182
> 1188 1194 1196 1201 1202 1220 1222 1227 1230 1242 1246 1267 1269 1271
> 1275 1280 1289 1290 1299 1302 1303 1304 1305 1318 1327 1328 1348 1386
> 1391 1394 1395 1396 1406 1425 1432 1440 1441 1442 1451 1461 1474 1479
> 1487 1490 1495 1503 1506 1513 1518 1528 1539 1546 1551 1552 1559 1560
> 1571 1583 1585 1588 1593 1594 1604 1605 1606 1608 1611 1615 1617 1620
> 1631 1640 1644 1646 1649 1650 1655 1662 1676 1678 1683 1684 1693 1709
> 1713 1720 1725 1732 1740 1751 1770 1779 1781 1790 1794 1815 1831 1833
> 1835 1836 1837 1841 1848 1850 1855 1857 1860 1865 1871 1893 1911 1913
> 1920 1926 1933 1934 1936 1947 1949 1951 1953 1960 1962 1963 1964 1965
> 1972 1981 1991 2000 2004 2014 2017 2021 2032 2033 2046 2056 2058 2060
> 2061 2065 2066 2076 2077 2090 2091 2099 2102 2107 2108 2118 2122 2131
> 2133 2135 2136 2148 2151 2181 2182 2186 2190 2196 2207 2209 2214 2218
> 2224 2226 2230 2233 2235 2238 2242 2243 2248 2250 2258 2262 2268 2290
> 2292 2295 2296 2300 2329 2332 2346 2352 2355 2370 2383 2390 2393 2394
> 2398 2404 2413 2416 2418 2422 2440 2441 2442 2444 2450 2454 2460 2464
> 2465 2492 2498 2508 2510 2512 2523 2529 2531 2543 2547 2551 2552 2554
> 2556 2580 2582 2598 2603 2615 2618 2624 2627 2631 2634 2635 2637 2644
> 2645 2648 2653 2654 2655 2668 2673 2681 2688 2689 2692 with 1 link
> 1 most connected region:
> 2045 with 9 links
>
> Weights style: W
> Weights constants summary:
>     n      nn   S0       S1       S2
> W 2696 7268416 2696 2445.314 11176.87
>
>
> Lastly, I run the Moran's I test, the LM test and the spatial lag
> regression:
>
>> moran.ols<-lm.morantest(ols.lin,listw)> summary(moran.ols)            Length Class  Mode
> statistic   1      -none- numeric
> p.value     1      -none- numeric
> estimate    3      -none- numeric
> method      1      -none- character
> alternative 1      -none- characterdata.name   1      -none-
> character> print(moran.ols)
> 	Global Moran's I for regression residuals
>
> data:
> model: lm(formula = form.lin, data = tab)
> weights: listw
>
> Moran I statistic standard deviate = 50.1449, p-value <
> 2.2e-16
> alternative hypothesis: greater
> sample estimates:
> Observed Moran's I        Expectation           Variance
>      0.9184522908      -0.0006379116       0.0003359414
>
>> test.lm<-lm.LMtests(ols.lin,listw,test=c("LMerr","RLMerr","LMlag","RLMlag","SARMA"))> print(test.lm)
> 	Lagrange multiplier diagnostics for spatial dependence
>
> data:
> model: lm(formula = form.lin, data = tab)
> weights: listw
>
> LMerr = 2507.369, df = 1, p-value < 2.2e-16
>
>
> 	Lagrange multiplier diagnostics for spatial dependence
>
> data:
> model: lm(formula = form.lin, data = tab)
> weights: listw
>
> RLMerr = 7.4774, df = 1, p-value = 0.006248
>
>
> 	Lagrange multiplier diagnostics for spatial dependence
>
> data:
> model: lm(formula = form.lin, data = tab)
> weights: listw
>
> LMlag = 2646.837, df = 1, p-value < 2.2e-16
>
>
> 	Lagrange multiplier diagnostics for spatial dependence
>
> data:
> model: lm(formula = form.lin, data = tab)
> weights: listw
>
> RLMlag = 146.945, df = 1, p-value < 2.2e-16
>
>
> 	Lagrange multiplier diagnostics for spatial dependence
>
> data:
> model: lm(formula = form.lin, data = tab)
> weights: listw
>
> SARMA = 2654.314, df = 2, p-value < 2.2e-16
>
>> reg.slm<-lagsarlm(form.lin, data=tab,listw=listw)> summary(reg.slm)
> Call:lagsarlm(formula = form.lin, data = tab, listw = listw)
>
> Residuals:
>      Min        1Q    Median        3Q       Max
> -1.558639 -0.042609  0.019559  0.071850  1.367678
>
> Type: lag
> Coefficients: (asymptotic standard errors)
>                Estimate  Std. Error z value Pr(>|z|)
> (Intercept)   0.01565469  0.04231648  0.3699  0.71142
> log(rev_hab)  0.00990161  0.00385757  2.5668  0.01026
> edu2         -0.01153030  0.01184878 -0.9731  0.33049
> nonblanc     -0.01971576  0.00828432 -2.3799  0.01732
> nonmaison    -0.01407983  0.00807180 -1.7443  0.08110
> matr2        -0.00027776  0.00617216 -0.0450  0.96411
> ocup2         0.04241982  0.01810448  2.3431  0.01913
> ocup3         0.00732140  0.00617091  1.1864  0.23545
> nonowner     -0.01439652  0.00860479 -1.6731  0.09431
>
> Rho: 0.91255, LR test value: 6394.9, p-value: < 2.22e-16
> Asymptotic standard error: 0.0033595
>    z-value: 271.63, p-value: < 2.22e-16
> Wald statistic: 73784, p-value: < 2.22e-16
>
> Log likelihood: 299.2953 for lag model
> ML residual variance (sigma squared): 0.022811, (sigma: 0.15103)
> Number of observations: 2696
> Number of parameters estimated: 11
> AIC: -576.59, (AIC for lm: 5816.3)
> LM test for residual autocorrelation
> test value: 0.00077273, p-value: 0.97782
>
>
> I have a huge differences in the coefficients between the OLS and Spatial
> Lag Model (e.g. nonblanc: -0.225 VS -0.019). Does anyone know whether is it
> normal?
>
> Thank you very much for your help
> Marguerit David
> Phd student
> University Paris Dauphine
>
> 	[[alternative HTML version deleted]]
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From r.hijmans at gmail.com  Sat Apr 21 01:21:30 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 20 Apr 2012 16:21:30 -0700
Subject: [R-sig-Geo] Converting neighbor list to table
In-Reply-To: <CAETu9rEU39a55uMvm2fg+KS5aZ2Zvc=0kGx_9EiQeiPDor7Kmg@mail.gmail.com>
References: <CAETu9rEU39a55uMvm2fg+KS5aZ2Zvc=0kGx_9EiQeiPDor7Kmg@mail.gmail.com>
Message-ID: <CANtt_hzud5gCzLG4ncCK3x=+0+HWMX9jWip3OPhq_SFdqRD8hA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120420/1ca18640/attachment.pl>

From raphael.fuhrer at gmail.com  Sat Apr 21 14:38:53 2012
From: raphael.fuhrer at gmail.com (Raphael Fuhrer)
Date: Sat, 21 Apr 2012 14:38:53 +0200
Subject: [R-sig-Geo] Visibility Analysis in R
Message-ID: <36404A35-C3BE-4B52-A244-56164058D259@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120421/a9cfb4f2/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Sat Apr 21 14:54:23 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sat, 21 Apr 2012 13:54:23 +0100
Subject: [R-sig-Geo] Visibility Analysis in R
In-Reply-To: <36404A35-C3BE-4B52-A244-56164058D259@gmail.com>
References: <36404A35-C3BE-4B52-A244-56164058D259@gmail.com>
Message-ID: <CANVKczMA6goJ4f+o-11edGVZaZhNZ5EkxLdoT5DD6+yOs7Hx1w@mail.gmail.com>

On Sat, Apr 21, 2012 at 1:38 PM, Raphael Fuhrer
<raphael.fuhrer at gmail.com> wrote:
> Dear all
>
> Does anybody know if it is possible to conduct a visibility analysis in R?
> I have
> - a large set of points = observer points
> - a digital surface model as an ascii grid
> - a set of points and polygons defining an amount of grid cells of interest
> For every individual observer point, the task is to check how many cells of interest are visible.
>
> Since the number of observer points is limited to 8 in ArcGIS and calculation time is far too long, I decided to use R. Unfortunately, I could not find any helpful packages or information on the internet.

 I suspect your best option is to use GRASS-GIS, and there is a
package for R-GRASS integration but I don't know much about it:

http://cran.r-project.org/web/packages/spgrass6/index.html

The relevant GRASS module is r.viewshed (r here stands for raster, not R):

http://grass.osgeo.org/manuals/html70_user/r.viewshed.html

Free and open source, of course it is!

Barry


From sotkouklistes at gmail.com  Sat Apr 21 15:22:01 2012
From: sotkouklistes at gmail.com (S. Koukoulas (lists))
Date: Sat, 21 Apr 2012 16:22:01 +0300
Subject: [R-sig-Geo] Raster to points
In-Reply-To: <57959.200.136.108.1.1334940017.squirrel@001mail.001mail.com.br>
References: <57959.200.136.108.1.1334940017.squirrel@001mail.001mail.com.br>
Message-ID: <4F92B479.5040407@gmail.com>

I am not aware of a function in R but you could use Grass (either as
stand alone or perhaps through the spgrass6 library in R - you need to
have your data in a GRASS location/mapset first) :

v.what.rast  in GRASS (http://www.osgeo.org/grass - open source)

or try the <point sampling tool>  in QGIS which is a plugin from
contributed repository and you need to install it first from <fetch
plugins>. In the second tab tick box <add 3rd party plugins> (qgis.org -
open source)

sotiris

On 20/04/12 19:40, celso at stephan.mus.br wrote:
> Hi!
>
> I need to create a new attribute for points in a shapefile containing 
> values from a raster (originally a kernel) on corresponding position. Does
> anyone has a clue?
>
> Thanks!!
>
> Celso Stephan
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From tim.appelhans at gmail.com  Sat Apr 21 16:21:58 2012
From: tim.appelhans at gmail.com (Tim Appelhans)
Date: Sat, 21 Apr 2012 16:21:58 +0200
Subject: [R-sig-Geo] Raster to points
In-Reply-To: <4F92B479.5040407@gmail.com>
References: <57959.200.136.108.1.1334940017.squirrel@001mail.001mail.com.br>
	<4F92B479.5040407@gmail.com>
Message-ID: <4F92C286.8080807@gmail.com>

The 'over' function in the sp package should do what you are after.
Cheers
Tim

On 21/4/2012 15:22, S. Koukoulas (lists) wrote:
> I am not aware of a function in R but you could use Grass (either as
> stand alone or perhaps through the spgrass6 library in R - you need to
> have your data in a GRASS location/mapset first) :
>
> v.what.rast  in GRASS (http://www.osgeo.org/grass - open source)
>
> or try the<point sampling tool>   in QGIS which is a plugin from
> contributed repository and you need to install it first from<fetch
> plugins>. In the second tab tick box<add 3rd party plugins>  (qgis.org -
> open source)
>
> sotiris
>
> On 20/04/12 19:40, celso at stephan.mus.br wrote:
>> Hi!
>>
>> I need to create a new attribute for points in a shapefile containing
>> values from a raster (originally a kernel) on corresponding position. Does
>> anyone has a clue?
>>
>> Thanks!!
>>
>> Celso Stephan
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
#####################################
Tim Appelhans
Department of Geography
Environmental Computer Sciences
Philipps Universit?t Marburg
Deutschhausstra?e 12
35032 Marburg (Paketpost: 35037 Marburg)
Germany

Tel +49 (0) 6421 28-25957


From colinr23 at gmail.com  Sat Apr 21 17:39:33 2012
From: colinr23 at gmail.com (Colin Robertson)
Date: Sat, 21 Apr 2012 11:39:33 -0400
Subject: [R-sig-Geo] unpacking polygon geometry with holes
Message-ID: <CAH=sV0jf_OO2OMrW4-M8DuR2RKJoy-eQG5TWhMV=857ysgs4MA@mail.gmail.com>

Dear List,

I am trying to manipulate polygons that are the component pieces that
result from the gDifference function.

> spdf1 = readShapePoly(paste(pathToDropbox, "spatiallab/hschange/hs99.shp", sep="")) #rgdal wouldnt insstall
> spdf2 = readShapePoly(paste(pathToDropbox, "spatiallab/hschange/hs00.shp", sep=""))
> p1 = polygons(spdf1)
> p2 = polygons(spdf2)

The above data is in a workspace here:
http://dl.dropbox.com/u/8776628/polys.rdata

If I use byid=T in gDifference I get an error:

p_diff = gDifference(p1, p2, byid=T)

Error in RGEOSBinTopoFunc(spgeom1, spgeom2, byid, id, "rgeos_difference") :
  Geometry collections may not contain other geometry collections

Even though both are SpatialPolygons:
class(p1)
[1] "SpatialPolygons"
attr(,"package")
[1] "sp"
class(p2)
[1] "SpatialPolygons"
attr(,"package")
[1] "sp"

So I am trying to work with the result of byid=F and unpacking it using:

#unpack the polygons to make them useful (find better way to do this)
x <- (slot(p_diff, 'polygons')[[1]])
xx <- slot(x, "Polygons")
for(i in 1:length(xx)) {
	xx[[i]] <- Polygons(x at Polygons[i], i)
}

pList <- as.SpatialPolygons.PolygonsList(xx)
p_diff2 <- pList
length(p_diff2)
[1] 39

Which works except for interior rings are not preserved (there are two)

which(unlist(lapply(slot(slot(p_diff, 'polygons')[[1]], 'Polygons'),
function(P) P at hole)) == TRUE)
[1] 14 29

Attempting to use checkPolygonsHoles has not worked because each of
the polygons are an individual Polygons object at this point, but I
cant figure out how to keep interior rings associated with their
parent polygons.

polysList <- as.SpatialPolygons.PolygonsList(xx)
chkList <- lapply(polysList at polygons, checkPolygonsHoles)
polysList <- as.SpatialPolygons.PolygonsList(chkList)

plot(polysList,col="red", pbg="white") #interior polys are red not white


Any assistance much appreciated -

Best,

Colin


From b.rowlingson at lancaster.ac.uk  Sat Apr 21 21:51:20 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sat, 21 Apr 2012 20:51:20 +0100
Subject: [R-sig-Geo] Raster to points
In-Reply-To: <4F92C286.8080807@gmail.com>
References: <57959.200.136.108.1.1334940017.squirrel@001mail.001mail.com.br>
	<4F92B479.5040407@gmail.com> <4F92C286.8080807@gmail.com>
Message-ID: <CANVKczNW7Kf+PY76cqX=KfGB4nTW7DMkntLcGoPJUWbBNA=96Q@mail.gmail.com>

On Sat, Apr 21, 2012 at 3:21 PM, Tim Appelhans <tim.appelhans at gmail.com> wrote:
> The 'over' function in the sp package should do what you are after.

 Except the function doesn't apply to rasters, by which I mean objects
from the raster package.

If you have:

dem = raster("dem.tif")
pts = readShapeSpatial("pts.shp")

then extract(dem,pts) will return the values of the dem raster at the
locations of  the points in pts.

No need to use GRASS or QGIS for this.

Barry


From rundel at gmail.com  Sun Apr 22 00:13:32 2012
From: rundel at gmail.com (Colin Rundel)
Date: Sat, 21 Apr 2012 18:13:32 -0400
Subject: [R-sig-Geo] unpacking polygon geometry with holes
In-Reply-To: <CAH=sV0jf_OO2OMrW4-M8DuR2RKJoy-eQG5TWhMV=857ysgs4MA@mail.gmail.com>
References: <CAH=sV0jf_OO2OMrW4-M8DuR2RKJoy-eQG5TWhMV=857ysgs4MA@mail.gmail.com>
Message-ID: <A28C390F-F804-404E-B59C-E54CCD17B086@gmail.com>

Hi Colin,

You can try the following code to separate the resulting polygons and their holes from the other polygons. Basically you can find the parent / hole relationship by checking the comment attribute of the Polygon object. Currently it is a kludgy hack since sp objects were not originally aware of this relationship, but hopefully it is something that will be improved on in future versions of sp and related packages (see Roger's recent work on readOGR for reading in polygons).


p_diff = gDifference(p1, p2, byid=F)

x = (slot(p_diff, 'polygons')[[1]])

comm = as.numeric(strsplit(comment(x)," ")[[1]])

parents = which(comm == 0)
holes = which(comm != 0)

for(i in 1:length(parents)) {
    p = parents[i]
    polys = c(p, which(comm == p))
    xx[[i]] = Polygons(x at Polygons[polys], i)
}

pList = as.SpatialPolygons.PolygonsList(xx)

-Colin


On Apr 21, 2012, at 11:39 AM, Colin Robertson wrote:

> Dear List,
> 
> I am trying to manipulate polygons that are the component pieces that
> result from the gDifference function.
> 
>> spdf1 = readShapePoly(paste(pathToDropbox, "spatiallab/hschange/hs99.shp", sep="")) #rgdal wouldnt insstall
>> spdf2 = readShapePoly(paste(pathToDropbox, "spatiallab/hschange/hs00.shp", sep=""))
>> p1 = polygons(spdf1)
>> p2 = polygons(spdf2)
> 
> The above data is in a workspace here:
> http://dl.dropbox.com/u/8776628/polys.rdata
> 
> If I use byid=T in gDifference I get an error:
> 
> p_diff = gDifference(p1, p2, byid=T)
> 
> Error in RGEOSBinTopoFunc(spgeom1, spgeom2, byid, id, "rgeos_difference") :
>  Geometry collections may not contain other geometry collections
> 
> Even though both are SpatialPolygons:
> class(p1)
> [1] "SpatialPolygons"
> attr(,"package")
> [1] "sp"
> class(p2)
> [1] "SpatialPolygons"
> attr(,"package")
> [1] "sp"
> 
> So I am trying to work with the result of byid=F and unpacking it using:
> 
> #unpack the polygons to make them useful (find better way to do this)
> x <- (slot(p_diff, 'polygons')[[1]])
> xx <- slot(x, "Polygons")
> for(i in 1:length(xx)) {
> 	xx[[i]] <- Polygons(x at Polygons[i], i)
> }
> 
> pList <- as.SpatialPolygons.PolygonsList(xx)
> p_diff2 <- pList
> length(p_diff2)
> [1] 39
> 
> Which works except for interior rings are not preserved (there are two)
> 
> which(unlist(lapply(slot(slot(p_diff, 'polygons')[[1]], 'Polygons'),
> function(P) P at hole)) == TRUE)
> [1] 14 29
> 
> Attempting to use checkPolygonsHoles has not worked because each of
> the polygons are an individual Polygons object at this point, but I
> cant figure out how to keep interior rings associated with their
> parent polygons.
> 
> polysList <- as.SpatialPolygons.PolygonsList(xx)
> chkList <- lapply(polysList at polygons, checkPolygonsHoles)
> polysList <- as.SpatialPolygons.PolygonsList(chkList)
> 
> plot(polysList,col="red", pbg="white") #interior polys are red not white
> 
> 
> Any assistance much appreciated -
> 
> Best,
> 
> Colin
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From roosbeh.nowrouzian at gmail.com  Sun Apr 22 02:43:37 2012
From: roosbeh.nowrouzian at gmail.com (Roosbeh Nowrouzian)
Date: Sat, 21 Apr 2012 20:43:37 -0400
Subject: [R-sig-Geo] spatial models for Multinomial limited dependent
	variable
Message-ID: <CAJw-hPa1G=unFbKv2fV57s8nJ9ut=Xh4UzShm6KyjiUrrT-+YA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120421/775b350d/attachment.pl>

From finleya at msu.edu  Sun Apr 22 04:26:38 2012
From: finleya at msu.edu (Andrew Finley)
Date: Sat, 21 Apr 2012 22:26:38 -0400
Subject: [R-sig-Geo] spatial models for Multinomial limited dependent
	variable
In-Reply-To: <CAJw-hPa1G=unFbKv2fV57s8nJ9ut=Xh4UzShm6KyjiUrrT-+YA@mail.gmail.com>
References: <CAJw-hPa1G=unFbKv2fV57s8nJ9ut=Xh4UzShm6KyjiUrrT-+YA@mail.gmail.com>
Message-ID: <5D8D502A-B780-4AEE-8B5B-86616B00DFF8@msu.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120421/c551f793/attachment.pl>

From roberto.patuelli at unibo.it  Sun Apr 22 12:28:50 2012
From: roberto.patuelli at unibo.it (Roberto Patuelli)
Date: Sun, 22 Apr 2012 12:28:50 +0200
Subject: [R-sig-Geo] spatial models for Multinomial limited dependent
In-Reply-To: <5D8D502A-B780-4AEE-8B5B-86616B00DFF8@msu.edu>
Message-ID: <37E82319CF814F2BB0707B7EACF356E6@Cirone>

Dear Roosbeh,

Alternatively you might want to use spatial filtering, which should pretty 
much accommodate any type of regression model. In spdep there's already a 
function for that, running on glm, but I doubt that covers multinomial 
logit. But if a stepwise (step command) works on the multinomial model (see 
package mlogit) (i.e., if the command has a likelihood method), then you can 
use it.
For the logistic regression, see the paper by Griffith: Griffith D A, 2004, 
"A spatial filtering specification for the autologistic model" Environment 
and Planning A 36(10) 1791 ? 1811
For R code on implementing the spatial filtering approach, see some examples 
on my webpage: www2.dse.unibo.it/patuelli/ (look for R code).

Cheers
Roberto

********************
Roberto Patuelli, Ph.D.
Dipartimento di Scienze Economiche (Department of Economics)
Facolt? di Economia sede di Rimini (Faculty of Economics-Rimini)
Alma Mater Studiorium Universit? di Bologna (University of Bologna)
via Angher? 22
47921 Rimini
Italy
Phone: +39-0541-434276
Fax: +39-02-700419665
Email: roberto.patuelli at unibo.it
Homepage: http://www2.dse.unibo.it/patuelli/
********************

New article published in the Journal of Regional Science:
Patuelli, R., N. Schanne, D.A. Griffith and P. Nijkamp (2012). Persistence 
of Regional Unemployment: Application of a Spatial Filtering Approach to 
Local Labor Markets in Germany. Journal of Regional Science 52 (2): 300?23


From Roger.Bivand at nhh.no  Sun Apr 22 16:36:31 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 22 Apr 2012 16:36:31 +0200
Subject: [R-sig-Geo] unpacking polygon geometry with holes
In-Reply-To: <A28C390F-F804-404E-B59C-E54CCD17B086@gmail.com>
References: <CAH=sV0jf_OO2OMrW4-M8DuR2RKJoy-eQG5TWhMV=857ysgs4MA@mail.gmail.com>
	<A28C390F-F804-404E-B59C-E54CCD17B086@gmail.com>
Message-ID: <alpine.LRH.2.02.1204221603560.24937@reclus.nhh.no>

On Sun, 22 Apr 2012, Colin Rundel wrote:

> Hi Colin,
>
> You can try the following code to separate the resulting polygons and 
> their holes from the other polygons. Basically you can find the parent / 
> hole relationship by checking the comment attribute of the Polygon 
> object. Currently it is a kludgy hack since sp objects were not 
> originally aware of this relationship, but hopefully it is something 
> that will be improved on in future versions of sp and related packages 
> (see Roger's recent work on readOGR for reading in polygons).

Hi Colins,

I'm afraid the recent work is unlikely to help here. The underlying 
problem is that the data are returning nested geometry collections, which 
isn't predictable ahead of time. I tend then to look for a logical matrix 
to iterate over by row to disambiguate, and then stick the output together 
again afterwards - the row.names could be improved:

load(url("http://dl.dropbox.com/u/8776628/polys.rdata"))
library(rgeos)
oo <- gOverlaps(p1, p2, byid=TRUE)
res <- vector(mode="list", length=nrow(oo))
for (i in seq(along=res)) {
   if(any(oo[i,])) {
     res[[i]] <- gDifference(p1[oo[i,]], p2)
     row.names(res[[i]]) <- paste(i, row.names(res[[i]]), sep="_")
   }
}
res1 <- res[!sapply(res, is.null)]
out <- do.call("rbind", res1)
plot(p1, col="grey")
plot(p2, border="red", add=TRUE, angle=45, density=10, col="red")
plot(out, border="green", add=TRUE, angle=135, density=10, col="green")

Your reconstruction:

plot(pList, add=TRUE, border="blue", angle=215, density=15, col="blue")

isn't quite the same, because p1 geometries that don't overlap with p2 
geometries are included, and I'm not sure what the actual one-sided 
difference should be. I'm also uncertain whether this was intended to be a 
one-sided difference, or a symmetric difference. I'm wondering whether 
there is a way to disambiguate the nested geometry collections internally.

res <- vector(mode="list", length=length(slot(p1, "polygons")))
for (i in seq(along=res)) {
   res[[i]] <- gDifference(p1[i], p2)
   if (!is.null(res[[i]]))
     row.names(res[[i]]) <- paste(i, row.names(res[[i]]), sep="_")
}
res1 <- res[!sapply(res, is.null)]
out <- do.call("rbind", res1)

is the same as pList in total area, so may do the same. I can see two 
cases in which p1/p2 intersections are in the output object.

Roger


>
>
> p_diff = gDifference(p1, p2, byid=F)
>
> x = (slot(p_diff, 'polygons')[[1]])
>
> comm = as.numeric(strsplit(comment(x)," ")[[1]])
>
> parents = which(comm == 0)
> holes = which(comm != 0)
>
> for(i in 1:length(parents)) {
>    p = parents[i]
>    polys = c(p, which(comm == p))
>    xx[[i]] = Polygons(x at Polygons[polys], i)
> }
>
> pList = as.SpatialPolygons.PolygonsList(xx)
>
> -Colin
>
>
> On Apr 21, 2012, at 11:39 AM, Colin Robertson wrote:
>
>> Dear List,
>>
>> I am trying to manipulate polygons that are the component pieces that
>> result from the gDifference function.
>>
>>> spdf1 = readShapePoly(paste(pathToDropbox, "spatiallab/hschange/hs99.shp", sep="")) #rgdal wouldnt insstall
>>> spdf2 = readShapePoly(paste(pathToDropbox, "spatiallab/hschange/hs00.shp", sep=""))
>>> p1 = polygons(spdf1)
>>> p2 = polygons(spdf2)
>>
>> The above data is in a workspace here:
>> http://dl.dropbox.com/u/8776628/polys.rdata
>>
>> If I use byid=T in gDifference I get an error:
>>
>> p_diff = gDifference(p1, p2, byid=T)
>>
>> Error in RGEOSBinTopoFunc(spgeom1, spgeom2, byid, id, "rgeos_difference") :
>>  Geometry collections may not contain other geometry collections
>>
>> Even though both are SpatialPolygons:
>> class(p1)
>> [1] "SpatialPolygons"
>> attr(,"package")
>> [1] "sp"
>> class(p2)
>> [1] "SpatialPolygons"
>> attr(,"package")
>> [1] "sp"
>>
>> So I am trying to work with the result of byid=F and unpacking it using:
>>
>> #unpack the polygons to make them useful (find better way to do this)
>> x <- (slot(p_diff, 'polygons')[[1]])
>> xx <- slot(x, "Polygons")
>> for(i in 1:length(xx)) {
>> 	xx[[i]] <- Polygons(x at Polygons[i], i)
>> }
>>
>> pList <- as.SpatialPolygons.PolygonsList(xx)
>> p_diff2 <- pList
>> length(p_diff2)
>> [1] 39
>>
>> Which works except for interior rings are not preserved (there are two)
>>
>> which(unlist(lapply(slot(slot(p_diff, 'polygons')[[1]], 'Polygons'),
>> function(P) P at hole)) == TRUE)
>> [1] 14 29
>>
>> Attempting to use checkPolygonsHoles has not worked because each of
>> the polygons are an individual Polygons object at this point, but I
>> cant figure out how to keep interior rings associated with their
>> parent polygons.
>>
>> polysList <- as.SpatialPolygons.PolygonsList(xx)
>> chkList <- lapply(polysList at polygons, checkPolygonsHoles)
>> polysList <- as.SpatialPolygons.PolygonsList(chkList)
>>
>> plot(polysList,col="red", pbg="white") #interior polys are red not white
>>
>>
>> Any assistance much appreciated -
>>
>> Best,
>>
>> Colin
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From colinr23 at gmail.com  Mon Apr 23 04:41:26 2012
From: colinr23 at gmail.com (Colin Robertson)
Date: Sun, 22 Apr 2012 22:41:26 -0400
Subject: [R-sig-Geo] unpacking polygon geometry with holes
In-Reply-To: <alpine.LRH.2.02.1204221603560.24937@reclus.nhh.no>
References: <CAH=sV0jf_OO2OMrW4-M8DuR2RKJoy-eQG5TWhMV=857ysgs4MA@mail.gmail.com>
	<A28C390F-F804-404E-B59C-E54CCD17B086@gmail.com>
	<alpine.LRH.2.02.1204221603560.24937@reclus.nhh.no>
Message-ID: <CAH=sV0g6rt37iAgDOwZd1TMYkKUMu+fBgXNtTqQg3FQn-id91w@mail.gmail.com>

Roger and Colin,

Thanks very much for this.

Roger you second method seems to get me just about there, although I
did notice one instance of one 'multi-part' polygon in the output.
Where two parts of one input polygon were the 'difference'. I am think
a little more about whether single-parts are really needed.

In response to your question, I actually am after the symmetric
difference, but I found that using gSymmdifference would dissolve
boundaries between coincident polygons in the output, and I need them
as separate geometries. So instead I am running gDifference twice and
combining difference1, difference2, and the intersection to give me
all component geometries of a union of p1 and p2 with boundaries in
tact, and each geometry 'single part' with its own id.

Thanks again -

Colin


On Sun, Apr 22, 2012 at 10:36 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> On Sun, 22 Apr 2012, Colin Rundel wrote:
>
>> Hi Colin,
>>
>> You can try the following code to separate the resulting polygons and
>> their holes from the other polygons. Basically you can find the parent /
>> hole relationship by checking the comment attribute of the Polygon object.
>> Currently it is a kludgy hack since sp objects were not originally aware of
>> this relationship, but hopefully it is something that will be improved on in
>> future versions of sp and related packages (see Roger's recent work on
>> readOGR for reading in polygons).
>
>
> Hi Colins,
>
> I'm afraid the recent work is unlikely to help here. The underlying problem
> is that the data are returning nested geometry collections, which isn't
> predictable ahead of time. I tend then to look for a logical matrix to
> iterate over by row to disambiguate, and then stick the output together
> again afterwards - the row.names could be improved:
>
> load(url("http://dl.dropbox.com/u/8776628/polys.rdata"))
> library(rgeos)
> oo <- gOverlaps(p1, p2, byid=TRUE)
> res <- vector(mode="list", length=nrow(oo))
> for (i in seq(along=res)) {
> ?if(any(oo[i,])) {
> ? ?res[[i]] <- gDifference(p1[oo[i,]], p2)
> ? ?row.names(res[[i]]) <- paste(i, row.names(res[[i]]), sep="_")
> ?}
> }
> res1 <- res[!sapply(res, is.null)]
> out <- do.call("rbind", res1)
> plot(p1, col="grey")
> plot(p2, border="red", add=TRUE, angle=45, density=10, col="red")
> plot(out, border="green", add=TRUE, angle=135, density=10, col="green")
>
> Your reconstruction:
>
> plot(pList, add=TRUE, border="blue", angle=215, density=15, col="blue")
>
> isn't quite the same, because p1 geometries that don't overlap with p2
> geometries are included, and I'm not sure what the actual one-sided
> difference should be. I'm also uncertain whether this was intended to be a
> one-sided difference, or a symmetric difference. I'm wondering whether there
> is a way to disambiguate the nested geometry collections internally.
>
> res <- vector(mode="list", length=length(slot(p1, "polygons")))
> for (i in seq(along=res)) {
> ?res[[i]] <- gDifference(p1[i], p2)
> ?if (!is.null(res[[i]]))
> ? ?row.names(res[[i]]) <- paste(i, row.names(res[[i]]), sep="_")
> }
> res1 <- res[!sapply(res, is.null)]
> out <- do.call("rbind", res1)
>
> is the same as pList in total area, so may do the same. I can see two cases
> in which p1/p2 intersections are in the output object.
>
> Roger
>
>
>
>>
>>
>> p_diff = gDifference(p1, p2, byid=F)
>>
>> x = (slot(p_diff, 'polygons')[[1]])
>>
>> comm = as.numeric(strsplit(comment(x)," ")[[1]])
>>
>> parents = which(comm == 0)
>> holes = which(comm != 0)
>>
>> for(i in 1:length(parents)) {
>> ? p = parents[i]
>> ? polys = c(p, which(comm == p))
>> ? xx[[i]] = Polygons(x at Polygons[polys], i)
>> }
>>
>> pList = as.SpatialPolygons.PolygonsList(xx)
>>
>> -Colin
>>
>>
>> On Apr 21, 2012, at 11:39 AM, Colin Robertson wrote:
>>
>>> Dear List,
>>>
>>> I am trying to manipulate polygons that are the component pieces that
>>> result from the gDifference function.
>>>
>>>> spdf1 = readShapePoly(paste(pathToDropbox,
>>>> "spatiallab/hschange/hs99.shp", sep="")) #rgdal wouldnt insstall
>>>> spdf2 = readShapePoly(paste(pathToDropbox,
>>>> "spatiallab/hschange/hs00.shp", sep=""))
>>>> p1 = polygons(spdf1)
>>>> p2 = polygons(spdf2)
>>>
>>>
>>> The above data is in a workspace here:
>>> http://dl.dropbox.com/u/8776628/polys.rdata
>>>
>>> If I use byid=T in gDifference I get an error:
>>>
>>> p_diff = gDifference(p1, p2, byid=T)
>>>
>>> Error in RGEOSBinTopoFunc(spgeom1, spgeom2, byid, id, "rgeos_difference")
>>> :
>>> ?Geometry collections may not contain other geometry collections
>>>
>>> Even though both are SpatialPolygons:
>>> class(p1)
>>> [1] "SpatialPolygons"
>>> attr(,"package")
>>> [1] "sp"
>>> class(p2)
>>> [1] "SpatialPolygons"
>>> attr(,"package")
>>> [1] "sp"
>>>
>>> So I am trying to work with the result of byid=F and unpacking it using:
>>>
>>> #unpack the polygons to make them useful (find better way to do this)
>>> x <- (slot(p_diff, 'polygons')[[1]])
>>> xx <- slot(x, "Polygons")
>>> for(i in 1:length(xx)) {
>>> ? ? ? ?xx[[i]] <- Polygons(x at Polygons[i], i)
>>> }
>>>
>>> pList <- as.SpatialPolygons.PolygonsList(xx)
>>> p_diff2 <- pList
>>> length(p_diff2)
>>> [1] 39
>>>
>>> Which works except for interior rings are not preserved (there are two)
>>>
>>> which(unlist(lapply(slot(slot(p_diff, 'polygons')[[1]], 'Polygons'),
>>> function(P) P at hole)) == TRUE)
>>> [1] 14 29
>>>
>>> Attempting to use checkPolygonsHoles has not worked because each of
>>> the polygons are an individual Polygons object at this point, but I
>>> cant figure out how to keep interior rings associated with their
>>> parent polygons.
>>>
>>> polysList <- as.SpatialPolygons.PolygonsList(xx)
>>> chkList <- lapply(polysList at polygons, checkPolygonsHoles)
>>> polysList <- as.SpatialPolygons.PolygonsList(chkList)
>>>
>>> plot(polysList,col="red", pbg="white") #interior polys are red not white
>>>
>>>
>>> Any assistance much appreciated -
>>>
>>> Best,
>>>
>>> Colin
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>


From les_ecol at yahoo.com  Mon Apr 23 04:52:53 2012
From: les_ecol at yahoo.com (Laura S)
Date: Sun, 22 Apr 2012 19:52:53 -0700 (PDT)
Subject: [R-sig-Geo] GRASS with R interface issues - running R within GRASS
	6.4.2
Message-ID: <1335149573.34246.YahooMailNeo@web140312.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120422/6db48ca2/attachment.pl>

From gab.cozzi at gmail.com  Mon Apr 23 10:16:53 2012
From: gab.cozzi at gmail.com (Gabriele Cozzi)
Date: Mon, 23 Apr 2012 10:16:53 +0200
Subject: [R-sig-Geo] near neighbor using decimal degree or projected coord
	system
Message-ID: <4F950FF5.4070602@gmail.com>

Dear all,
I am using knearneigh dnearneigh {spdep} to set neighbor distances for a 
SAR analysis. I tried to used projected coord systems (UTM 34S, units: 
meters) and geographic coordinate systems (in decimal degrees) for what 
I thought should give the same result but I am somehow getting different 
results which confuses me a bit. I guess sometimes double checking is 
not a good idea ;-)

I set:
coord<- as.matrix(cbind(X,Y))      # where X and Y is respectively in 
the projected and in the geographic format.

k_nb<-knn2nb(knearneigh(coord, k=1, longlat= LOGIC, RANN=TRUE))     # 
where LOGIC=FALSE when X and Y are in the projected format and
                                                                                                                                          LOGIC=TRUE when X and Y are in the decimal degrees format

distance<-unlist(nbdists(k_nb, coords))
summary(distance)            # to get the minimal distance to ensure all 
locations have at least one neighbor.

the summary output is as follow:
     Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
   14.87  257.30  398.10  415.30  550.10 1429.00    # where I use the 
projected coord system

    Min.             1st Qu.         Median      Mean           3rd Qu. 
           Max.
0.0001414 0.0023600 0.0036880 0.0038520  0.0051070  0.0135300   # where 
I use the decimal degree coord system

I have to slight problems with these results and I would appreciate if 
someone could help

1) I thought that setting longlat=TRUE using decimal degrees would give 
distances between neighbors in kilometers. However here I am two orders 
of magnitude wrong. I know I could simply using longlat=FALSE that seems 
to give the correct distances but I was nonetheless keen to understand 
why there are differences.

2)  I see there are some slight differences in the distances. e.g. max = 
1429 vs. max = 1353 (*10e-5). What type of transformation is used to 
pass from decimal degrees to euclidean distances?

Any comment would be appreciated.

Best,
Gabriele




-- 

============================================================

Gabriele Cozzi

Institute of Evolutionary Biology and Environmental Studies
Zurich University
Winterthurerstr. 190
8057 Zurich - Switzerland
E-mail: gabriele.cozzi at uzh.ch
Phone: ++41(0)44 6356116
Fax: ++41(0)44 6355711
http://www.ieu.uzh.ch
http://african-carnivores.com

Botswana Predator Conservation Trust
Private Bag 13
Maun - Botswana
E-mail: gab.cozzi at gmail.com
Mobile: +26774259312
http://www.bpctrust.org


From Roger.Bivand at nhh.no  Mon Apr 23 10:53:23 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 23 Apr 2012 10:53:23 +0200 (CEST)
Subject: [R-sig-Geo] near neighbor using decimal degree or projected
 coord	system
In-Reply-To: <4F950FF5.4070602@gmail.com>
References: <4F950FF5.4070602@gmail.com>
Message-ID: <alpine.LRH.2.02.1204231048200.28174@reclus.nhh.no>

On Mon, 23 Apr 2012, Gabriele Cozzi wrote:

> Dear all,
> I am using knearneigh dnearneigh {spdep} to set neighbor distances for a SAR 
> analysis. I tried to used projected coord systems (UTM 34S, units: meters) 
> and geographic coordinate systems (in decimal degrees) for what I thought 
> should give the same result but I am somehow getting different results which 
> confuses me a bit. I guess sometimes double checking is not a good idea ;-)
>
> I set:
> coord<- as.matrix(cbind(X,Y))      # where X and Y is respectively in the 
> projected and in the geographic format.
>
> k_nb<-knn2nb(knearneigh(coord, k=1, longlat= LOGIC, RANN=TRUE))     # where 
> LOGIC=FALSE when X and Y are in the projected format and
>                                                                                                                                         LOGIC=TRUE 
> when X and Y are in the decimal degrees format

If longlat=TRUE, RANN is ignored, as it cannot handle non-planar 
coordinates.

>
> distance<-unlist(nbdists(k_nb, coords))

nbdists() also takes a longlat= argument - which you haven't used here. If 
you do, you'll get the distances you want. You can forget the argument if 
you make coord into a SpatialPoints object with a CRS:

library(spdep)
set.seed(1)
xy <- cbind(x=runif(50, 0, 10), y=runif(50, 0, 10))
k1 <- knn2nb(knearneigh(xy, k=1, longlat=TRUE, RANN=TRUE))
summary(unlist(nbdists(k1, xy)))
summary(unlist(nbdists(k1, xy, longlat=TRUE)))
SP <- SpatialPoints(xy, proj4string=CRS("+proj=longlat"))
k1 <- knn2nb(knearneigh(SP, k=1))
summary(unlist(nbdists(k1, SP)))

Hope this helps,

Roger

> summary(distance)            # to get the minimal distance to ensure all 
> locations have at least one neighbor.
>
> the summary output is as follow:
>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
>  14.87  257.30  398.10  415.30  550.10 1429.00    # where I use the 
> projected coord system
>
>   Min.             1st Qu.         Median      Mean           3rd Qu. 
> Max.
> 0.0001414 0.0023600 0.0036880 0.0038520  0.0051070  0.0135300   # where I use 
> the decimal degree coord system
>
> I have to slight problems with these results and I would appreciate if 
> someone could help
>
> 1) I thought that setting longlat=TRUE using decimal degrees would give 
> distances between neighbors in kilometers. However here I am two orders of 
> magnitude wrong. I know I could simply using longlat=FALSE that seems to give 
> the correct distances but I was nonetheless keen to understand why there are 
> differences.
>
> 2)  I see there are some slight differences in the distances. e.g. max = 1429 
> vs. max = 1353 (*10e-5). What type of transformation is used to pass from 
> decimal degrees to euclidean distances?
>
> Any comment would be appreciated.
>
> Best,
> Gabriele
>
>
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Mon Apr 23 11:21:16 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 23 Apr 2012 11:21:16 +0200 (CEST)
Subject: [R-sig-Geo] GRASS with R interface issues - running R within
 GRASS	6.4.2
In-Reply-To: <1335149573.34246.YahooMailNeo@web140312.mail.bf1.yahoo.com>
References: <1335149573.34246.YahooMailNeo@web140312.mail.bf1.yahoo.com>
Message-ID: <alpine.LRH.2.02.1204231059220.28174@reclus.nhh.no>

On Mon, 23 Apr 2012, Laura S wrote:

> Dear all:
>
>
> Should I reinstall GRASS and set up some sort of path, so that R is 
> recognized? Would anyone be able to send me key words to find more 
> basic, newbie, information on "PATH" and "R_LIBS"? I would like to find 
> the paths, and set the proper variables, but I am unsure where to start. 
> I have fiddled in GRASS now without R, but I would like to use R within 
> GRASS.?
>

Please do try to search more effectively. The standard way of running R 
inside GRASS on Windows is to start GRASS first in the location you are 
using, then enter the complete path to R at the MSYS prompt. The complete 
path is the same as the string shown as Target: under Properties if you 
right-click on the R icon on your Windows desktop. For example:

"C:/Program Files/R/R-2.15.0/bin/i386/Rgui.exe"

or the equivalent for your installation. You may also need to set the 
environment variable R_LIBS if R cannot "find" the correct library 
containing the packages you need.

If you are not using a GRASS location, you may use the initGRASS() 
function in spgrass6 to start a temporary GRASS session, often in a 
throw-away location, because you only need to move objects from R to 
GRASS, use GRASS on them, and move the output objects back to R. Then you 
need the complete path to the GRASS install directory, for example:

"C:/Program Files/GRASS 6.4.2"

or the equivalent for your installation.

It is also possible to use initGRASS() with existing locations in a 
scripting context, but this is not your case.

The grass-stats mailing list is often used for questions like this.

Hope this clarifies,

Roger


> Which location should I do all this
> in? There are more than option for GRASS, e.g., command line, GUI (with
> MSYS, without, etc.), MSYS UNIX console; I am not sure which one to use
> for loading R within GRASS.
>
>
> Any suggestions are much appreciated.
>
> Thank you,
> Laura
>
>
>> Dear all:
>>
>> I am trying to get
> R to run with grass, but I am running into trouble.
>>
>>
>> This is what I have done so far:
>>
>> Installed GRASS 6.4.2 for Windows XP
>> Installed spgrass6 with dependencies.
>>
>> When I do:
>> library(spgrass6)
>> gmeta6()
>>
>> I get the following:
>> Error in system(cmd0,intern=TRUE); "g.region.exe' not found
>> Error in parseGRASS(cmd) : g.region not found.
>>
>>
> Any suggestions are much appreciated. I am new to using GRASS with R,
> but I am looking forward to using them together to analyze data.
>>
>>
> I am unsure which terminal to run R in GRASS because I keep getting
> errors in the command console in GRASS: I type into either "Command
> console in GRASS GIS Layer Manager" OR "GRASS Command Line":
>>
>> R
>> ...Then I get
>>
>> 'R' is not recognized as an internal or external command, operable program or batch file.
>
> This
> suggests that you need to give the complete path to R from within your
> GRASS session. It may be "C:/Program Files/R/R-2.14.1/bin/Rgui.exe" or
> something like that, depending on where you installed it. You may also
> need to add R_LIBS="<whatever>" to this, to show where any local
> libraries may be.
>
> Alternatively, you may try to add R's binary
> location to your PATH environment variable, and declare R_LIBS globally;
> these used to be under advanced system properties.
>
> Finally, as
> Rainer suggests, you may start GRASS from within R, using the same logic
> in reverse, giving the full path to the GRASS install location to the
> initGRASS() function. The key in both cases is to find out where in your
> file system the software components live, and note changes when you
> upgrade.
>
> Hope this helps,
>
> Roger
> 	[[alternative HTML version deleted]]
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From les_ecol at yahoo.com  Mon Apr 23 21:16:27 2012
From: les_ecol at yahoo.com (Laura S)
Date: Mon, 23 Apr 2012 12:16:27 -0700 (PDT)
Subject: [R-sig-Geo] GRASS with R interface issues - running R within
	GRASS 6.4.2
In-Reply-To: <alpine.LRH.2.02.1204231059220.28174@reclus.nhh.no>
References: <1335149573.34246.YahooMailNeo@web140312.mail.bf1.yahoo.com>
	<alpine.LRH.2.02.1204231059220.28174@reclus.nhh.no>
Message-ID: <1335208587.53547.YahooMailNeo@web140306.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120423/ed213a1b/attachment.pl>

From Roger.Bivand at nhh.no  Mon Apr 23 22:19:58 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 23 Apr 2012 22:19:58 +0200 (CEST)
Subject: [R-sig-Geo] GRASS with R interface issues - running R within
 GRASS 6.4.2
In-Reply-To: <1335208587.53547.YahooMailNeo@web140306.mail.bf1.yahoo.com>
References: <1335149573.34246.YahooMailNeo@web140312.mail.bf1.yahoo.com>
	<alpine.LRH.2.02.1204231059220.28174@reclus.nhh.no>
	<1335208587.53547.YahooMailNeo@web140306.mail.bf1.yahoo.com>
Message-ID: <alpine.LRH.2.02.1204232214530.29939@reclus.nhh.no>

On Mon, 23 Apr 2012, Laura S wrote:

> Dear Roger and others:
>
> My apologies if I am not piecing everything together. I think I am 
> almost there; I appreciate your patience.
>
>
> This is my current point of confusion, and what I am able to do so far:
>
> I. My main point of confusion is that when I type the path into GRASS 
> MSYS, the R console window pops up, and I am unable to type more into 
> the GRASS console. I cannot type GRASS commands in R, so I am unsure 
> where I type the GRASS commands if GRASS console does not let me type 
> more, and the R console does not recognize R commands.

Why should it? Simply minimise the R GUI to work in GRASS directly, using 
the GRASS GUI or from the prompt in MSYS. I doubt very much whether saying 
d.ask makes sense anyway, as the GRASS display GUI covers that.

It is possible to write GRASS commands using execGRASS() from the R 
console, but since you have had to ask, you will find it easier simply to 
minimise R and use GRASS directly. Because R is within GRASS, it "sees" 
the current status of the location.

Hope this clarifies - please change to one of the GRASS lists for further 
help.

Roger

>
>
> II. What I can do so far in more detail:
> 1. Within the GRASS 6.4.2RC2 with 
> MSYS, I typed using tab autocompletion: "C:/Program 
> Files/R/R-2.14/bin/i386/Rgui.exe" which causes the RGui to pop up as a 
> second R window. Thus, I am not in GRASS directly anymore I assume, but 
> rather in the RGui. In this GUI, it says the following when I type 
> library(spgrass6): 
> "GRASS GIS Interface loaded with GRASS version GRASS 6.4.2RC2exported (2011) and location: demolocation" 
> gmeta6() 
> gisdbase C:/Documents etc.?
>
> If I try a GRASS command such as "d.ask" in the RGUI after loading spgrass:
>
> d.ask
> Error: object 'd.ask' not found
>
>
> 2. I can also get this to work in R directly: 
> loc <- initGRASS("C:/Program Files/Grass 6.4",home=tempdir()) 
> gmeta6() 
> **prints gisdbase, etc.**?
>
> d.ask
> Error: object 'd.ask' not found
>
>
> Thank you for your help,
> Laura 
>
>
>
>
> ________________________________
> From: Roger Bivand <Roger.Bivand at nhh.no>
> To: Laura S <les_ecol at yahoo.com> 
> Cc: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org> 
> Sent: Monday, April 23, 2012 2:21:16 AM
> Subject: Re: [R-sig-Geo] GRASS with R interface issues - running R within GRASS 6.4.2
> 
> On Mon, 23 Apr 2012, Laura S wrote:
>
>> Dear all:
>>
>>
>> Should I reinstall GRASS and set up some sort of path, so that R is 
>> recognized? Would anyone be able to send me key words to find more 
>> basic, newbie, information on "PATH" and "R_LIBS"? I would like to find 
>> the paths, and set the proper variables, but I am unsure where to start. 
>> I have fiddled in GRASS now without R, but I would like to use R within 
>> GRASS.?
>>
>
> Please do try to search more effectively. The standard way of running R 
> inside GRASS on Windows is to start GRASS first in the location you are 
> using, then enter the complete path to R at the MSYS prompt. The complete 
> path is the same as the string shown as Target: under Properties if you 
> right-click on the R icon on your Windows desktop. For example:
>
> "C:/Program Files/R/R-2.15.0/bin/i386/Rgui.exe"
>
> or the equivalent for your installation. You may also need to set the 
> environment variable R_LIBS if R cannot "find" the correct library 
> containing the packages you need.
>
> If you are not using a GRASS location, you may use the initGRASS() 
> function in spgrass6 to start a temporary GRASS session, often in a 
> throw-away location, because you only need to move objects from R to 
> GRASS, use GRASS on them, and move the output objects back to R. Then you 
> need the complete path to the GRASS install directory, for example:
>
> "C:/Program Files/GRASS 6.4.2"
>
> or the equivalent for your installation.
>
> It is also possible to use initGRASS() with existing locations in a 
> scripting context, but this is not your case.
>
> The grass-stats mailing list is often used for questions like this.
>
> Hope this clarifies,
>
> Roger
>
>
>> Which location should I do all this
>> in? There are more than option for GRASS, e.g., command line, GUI (with
>> MSYS, without, etc.), MSYS UNIX console; I am not sure which one to use
>> for loading R within GRASS.
>>
>>
>> Any suggestions are much appreciated.
>>
>> Thank you,
>> Laura
>>
>>
>>> Dear all:
>>>
>>> I am trying to get
>> R to run with grass, but I am running into trouble.
>>>
>>>
>>> This is what I have done so far:
>>>
>>> Installed GRASS 6.4.2 for Windows XP
>>> Installed spgrass6 with dependencies.
>>>
>>> When I do:
>>> library(spgrass6)
>>> gmeta6()
>>>
>>> I get the following:
>>> Error in system(cmd0,intern=TRUE); "g.region.exe' not found
>>> Error in parseGRASS(cmd) : g.region not found.
>>>
>>>
>> Any suggestions are much appreciated. I am new to using GRASS with R,
>> but I am looking forward to using them together to analyze data.
>>>
>>>
>> I am unsure which terminal to run R in GRASS because I keep getting
>> errors in the command console in GRASS: I type into either "Command
>> console in GRASS GIS Layer Manager" OR "GRASS Command Line":
>>>
>>> R
>>> ...Then I get
>>>
>>> 'R' is not recognized as an internal or external command, operable program or batch file.
>>
>> This
>> suggests that you need to give the complete path to R from within your
>> GRASS session. It may be "C:/Program Files/R/R-2.14.1/bin/Rgui.exe" or
>> something like that, depending on where you installed it. You may also
>> need to add R_LIBS="<whatever>" to this, to show where any local
>> libraries may be.
>>
>> Alternatively, you may try to add R's binary
>> location to your PATH environment variable, and declare R_LIBS globally;
>> these used to be under advanced system properties.
>>
>> Finally, as
>> Rainer suggests, you may start GRASS from within R, using the same logic
>> in reverse, giving the full path to the GRASS install location to the
>> initGRASS() function. The key in both cases is to find out where in your
>> file system the software components live, and note changes when you
>> upgrade.
>>
>> Hope this helps,
>>
>> Roger
>> ??? [[alternative HTML version deleted]]
>>
>>
>
> -- 
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From jgrn at illinois.edu  Mon Apr 23 23:21:56 2012
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Mon, 23 Apr 2012 16:21:56 -0500
Subject: [R-sig-Geo] Matrix multiplication of a RasterBrick
Message-ID: <CABG0rftwrWWgqKy3=Ngd=V4-eutqydSRwA4ZaaZP=qjuNL=4gQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120423/b2410c7f/attachment.pl>

From jgrn at illinois.edu  Mon Apr 23 23:30:28 2012
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Mon, 23 Apr 2012 16:30:28 -0500
Subject: [R-sig-Geo] Matrix multiplication of a RasterBrick
In-Reply-To: <CABG0rftwrWWgqKy3=Ngd=V4-eutqydSRwA4ZaaZP=qjuNL=4gQ@mail.gmail.com>
References: <CABG0rftwrWWgqKy3=Ngd=V4-eutqydSRwA4ZaaZP=qjuNL=4gQ@mail.gmail.com>
Message-ID: <CABG0rfs2GBo9BbbFkPZA6WFburntydzjGxAw4Jtk5e9DdjTjYg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120423/afad3515/attachment.pl>

From apcar at deakin.edu.au  Tue Apr 24 03:38:22 2012
From: apcar at deakin.edu.au (ADAM PETER CARDILINI)
Date: Tue, 24 Apr 2012 01:38:22 +0000
Subject: [R-sig-Geo] working with lots of data?
Message-ID: <11DC569BD7493645998AD27DA1F01E273A8A48DF@mbox-b-2.du.deakin.edu.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120424/b52314a8/attachment.pl>

From aortizbobea at arec.umd.edu  Tue Apr 24 05:13:09 2012
From: aortizbobea at arec.umd.edu (Ariel Ortiz-Bobea)
Date: Mon, 23 Apr 2012 20:13:09 -0700 (PDT)
Subject: [R-sig-Geo] raster extract function not working in latest package?
Message-ID: <1335237189179-7493919.post@n2.nabble.com>

Hello,

In the past I've managed to extract weights using the raster package on
SpatialPolygons. Now when try to extract the weights I get an empty list on
my platform... 

I'm simply trying to reproduce this example by Robert J. Hijmans:

    /  library(raster)

      r <- raster(ncol=36, nrow=18) 
      r[] <- 1:ncell(r) 
      cds1 <- rbind(c(-180,-20), c(-160,5), c(-60, 0), c(-160,-60),
c(-180,-20)) 
      cds2 <- rbind(c(80,0), c(100,60), c(120,0), c(120,-55), c(80,0)) 
      polys <- SpatialPolygons(list(Polygons(list(Polygon(cds1)), 1), 
                                    Polygons(list(Polygon(cds2)), 2))) 
      
      # visualize
      plot(r)
      plot(polys, add=T)
      
      # extract the cellnumbers and weights 
      v <- extract(r, polys, weights=TRUE, cellnumbers=TRUE) 
      v/

This is what I get for v:

/[[1]]
NULL

[[2]]
NULL/

I'm using the latest raster version (1.9-82 (5-April-2012)) and R 2.15.0 I
downgraded to 2.14.2 on a MacOS and still doesn't work (on two different
computers). I went to another machine running on Windows and raster package
v. 1.8-12 (11-April-2011) on R 2.11.1 and it DID work.

So I guess it's about the version of the package? I don't understand what is
going on. Any suggestion would be appreciated!

Thanks.

Ariel


-----
Ariel Ortiz-Bobea
PhD Candidate in Agricultural & Resource Economics
University of Maryland - College Park
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/raster-extract-function-not-working-in-latest-package-tp7493919p7493919.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From samanmonfared1 at gmail.com  Tue Apr 24 08:00:51 2012
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Tue, 24 Apr 2012 10:30:51 +0430
Subject: [R-sig-Geo] spatio-temporal
Message-ID: <CAOytA4ZA-V0b74igWPvahTP5zZrEbaNoA_hyYMFtJeXz_1t89g@mail.gmail.com>

Dear all.
I am trying to calculate and 3d plot of empirical spatio-temporal
variogram using RandomFields
and CompRandFld packages. The below program is an example in
CompRandFld package:


library(CompRandFld)
library(RandomFields)
library(scatterplot3d)
set.seed(31231)
# Define the spatial-coordinates of the points:
x <- runif(20, 0, 1)
y <- runif(20, 0, 1)
# Define the temporal sequence:
time <- seq(0, 50, 1)
# Simulation of the spatio-temporal Gaussian random field:
data <- RFsim(x, y, time, corrmodel="exp_exp",param=list(mean=mean,
nugget=nugget,scale_s=0.5,scale_t=1,sill=sill))$data

the error is :

Error: could not find function "RFsim"

please guide me about this.
Thanks.
-- 

Saman Monfared
Msc Student,
Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167


From r.hijmans at gmail.com  Tue Apr 24 08:21:29 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Mon, 23 Apr 2012 23:21:29 -0700
Subject: [R-sig-Geo] raster extract function not working in latest
	package?
In-Reply-To: <1335237189179-7493919.post@n2.nabble.com>
References: <1335237189179-7493919.post@n2.nabble.com>
Message-ID: <CANtt_hwgn80i-6+k4gdsw9VNdtUVuGkX9=s=831Om7gi75w6Pg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120423/d70aad3d/attachment.pl>

From tom.gottfried at tum.de  Tue Apr 24 08:45:31 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Tue, 24 Apr 2012 08:45:31 +0200
Subject: [R-sig-Geo] spatio-temporal
In-Reply-To: <CAOytA4ZA-V0b74igWPvahTP5zZrEbaNoA_hyYMFtJeXz_1t89g@mail.gmail.com>
References: <CAOytA4ZA-V0b74igWPvahTP5zZrEbaNoA_hyYMFtJeXz_1t89g@mail.gmail.com>
Message-ID: <4F964C0B.4000404@tum.de>

Am 24.04.2012 08:00, schrieb Saman Monfared:
> Dear all.
> I am trying to calculate and 3d plot of empirical spatio-temporal
> variogram using RandomFields
> and CompRandFld packages. The below program is an example in
> CompRandFld package:
>
>
> library(CompRandFld)
> library(RandomFields)
> library(scatterplot3d)
> set.seed(31231)
> # Define the spatial-coordinates of the points:
> x<- runif(20, 0, 1)
> y<- runif(20, 0, 1)
> # Define the temporal sequence:
> time<- seq(0, 50, 1)
> # Simulation of the spatio-temporal Gaussian random field:
> data<- RFsim(x, y, time, corrmodel="exp_exp",param=list(mean=mean,
> nugget=nugget,scale_s=0.5,scale_t=1,sill=sill))$data
>
> the error is :
>
> Error: could not find function "RFsim"

The function either does not exist (e.g. because "RFsim" is a misspelled 
name of an existing function. Beware that R is case sensitive) or exists 
in a package that you did not (successfully) load.

Tom

> please guide me about this.
> Thanks.

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From mlt at gmx.us  Tue Apr 24 20:30:49 2012
From: mlt at gmx.us (Mikhail Titov)
Date: Tue, 24 Apr 2012 13:30:49 -0500
Subject: [R-sig-Geo] [RGoogleMaps] PlotOnStaticMap does not show Google's
	map though GetMap.bbox fetches PNG ok.
Message-ID: <000f01cd2248$6068c100$213a4300$@us>

Hello!

I wonder if someone else have noticed that. I saw a post on stackoverflow [1], which is kind of the same issue as I?m having. GetMap saves good looking PNG. However it doesn?t appear underneath lines that are plotted with PlotOnStaticMap. I had R 2.14.2 when I?ve noticed that, and, even after upgrading to 2.15.0, I still don?t see original map underneath my lines. The code used to work before. I wonder if something has changed. I?m running the code on _Windows XP_. Examples from package behave in a similar way :(

[1] http://stackoverflow.com/questions/8323800/rgooglemaps-not-plotting-data-over-the-map

Mikhail


From benweinstein2010 at gmail.com  Tue Apr 24 23:14:13 2012
From: benweinstein2010 at gmail.com (Ben Weinstein)
Date: Tue, 24 Apr 2012 17:14:13 -0400
Subject: [R-sig-Geo] dismo predict and glm binomial error
In-Reply-To: <CAC28k7QJXoGJnR7WaeRN96vpATOSUg0=WkPEYqJxqzppqEDA3A@mail.gmail.com>
References: <CAC28k7QJXoGJnR7WaeRN96vpATOSUg0=WkPEYqJxqzppqEDA3A@mail.gmail.com>
Message-ID: <CAC28k7TNCryoq4LxHSrT686UQ44XS9amT+9L1GpBQphLVk=9EQ@mail.gmail.com>

Hello all,

I'm developing ecological niche models and i'd like to use a
simple glm framework, following the vignette published for the package
"dismo".

Everything works fine, except the predict function creates cell values
that vary from -5 to 1, which is impossible for a binomial variable.
Should the predict function not be used for binomial glm?

> #Extract values of the bioclimatic variables to my point localities, loc
> presvals <- extract(predictors,loc)
> backgr <- randomPoints(predictors, 800)
> absvals <- extract(predictors, backgr)
> pb <- c(rep(1, nrow(presvals)), rep(0, nrow(absvals)))
#Create the presence absence matrix.
> sdmdata <- data.frame(cbind(pb, rbind(presvals, absvals)))
> head(sdmdata)
?pb bio1 bio10 bio11 bio12 bio13 bio14 bio15 bio16 bio17 bio18 bio19 bio2
1 ?1 ?237 ? 240 ? 232 ?1774 ? 250 ? ?80 ? ?34 ? 603 ? 270 ? 418 ? 529 ? 89
2 ?1 ?237 ? 240 ? 232 ?1774 ? 250 ? ?80 ? ?34 ? 603 ? 270 ? 418 ? 529 ? 89
3 ?1 ?229 ? 231 ? 227 ?1433 ? 288 ? ? 7 ? ?90 ? 806 ? ?34 ? ?96 ? 137 ?114
4 ?1 ?195 ? 196 ? 193 ?1351 ? 301 ? ? 3 ? ?98 ? 817 ? ?16 ? ?40 ? 799 ?122
5 ?1 ?222 ? 226 ? 217 ?1325 ? 311 ? ? 3 ? 103 ? 838 ? ?17 ? 838 ? ?43 ?123
6 ?1 ?213 ? 213 ? 210 ?1286 ? 237 ? ? 7 ? ?86 ? 704 ? ?37 ? ?37 ? 704 ?110

>#Fit generalized linear model
> m1 = glm(pb ~ bio1 + bio2 + bio12 + bio15 , data=sdmdata,family="binomial")

#Check fitted values - they should be from 0-1
> range(m1$fitted)
[1] 0.009706557 0.553194264

#Use the predict function to fit the bbox of the predictor variables.

> p <- predict(predictors,m1)

#Error! bizarre range of data.
> cellStats(p,range)
? ? ? ? ? [,1]
[1,] -5.0485812
[2,] ?0.5138158


I suspect the error has to do with that although the presence/absence
datamatrix contains all bioclimatic variables, i only choose ?4
predictors to use.

I tried to follow this idea by fitting just one bioclimatic variable,
and using only that rasterlayer in the predict function as shown
below.

m1 = glm(pb ~ bio1 , data=sdmdata,family=binomial(link="logit"))
range(m1$fitted)
p <- predict(predictors[[1]],m1)
cellStats(p,range)

however i recieve the error
Error in eval(expr, envir, enclos) : object 'bio1' not found

I appreciate all help,

Best,

Ben Weinstein




Thanks for your help

Ben Weinstein

--
Ben Weinstein
Graduate Student
Ecology and Evolution
Stony Brook University

http://life.bio.sunysb.edu/~bweinste/index.html


-- 
Ben Weinstein
Graduate Student
Ecology and Evolution
Stony Brook University

http://life.bio.sunysb.edu/~bweinste/index.html


From r.hijmans at gmail.com  Wed Apr 25 00:23:41 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 24 Apr 2012 15:23:41 -0700
Subject: [R-sig-Geo] dismo predict and glm binomial error
In-Reply-To: <CAC28k7TNCryoq4LxHSrT686UQ44XS9amT+9L1GpBQphLVk=9EQ@mail.gmail.com>
References: <CAC28k7QJXoGJnR7WaeRN96vpATOSUg0=WkPEYqJxqzppqEDA3A@mail.gmail.com>
	<CAC28k7TNCryoq4LxHSrT686UQ44XS9amT+9L1GpBQphLVk=9EQ@mail.gmail.com>
Message-ID: <CANtt_hxK1XGHQxQU1GiGnBp9whE0iToQCHfFhs=+XcS-V1KtOA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120424/234c3c12/attachment.pl>

From juta.kawalerowicz at stx.ox.ac.uk  Wed Apr 25 12:13:39 2012
From: juta.kawalerowicz at stx.ox.ac.uk (Juta Kawalerowicz)
Date: Wed, 25 Apr 2012 10:13:39 +0000
Subject: [R-sig-Geo] semi-transparent mapping - overlapping areas
Message-ID: <F9AEA1375C89934BABA47ECE0801EAFA13B32DB6@MBX02.ad.oak.ox.ac.uk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120425/a171afc5/attachment.pl>

From roman.lustrik at gmail.com  Wed Apr 25 12:24:04 2012
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Wed, 25 Apr 2012 12:24:04 +0200
Subject: [R-sig-Geo] semi-transparent mapping - overlapping areas
In-Reply-To: <F9AEA1375C89934BABA47ECE0801EAFA13B32DB6@MBX02.ad.oak.ox.ac.uk>
References: <F9AEA1375C89934BABA47ECE0801EAFA13B32DB6@MBX02.ad.oak.ox.ac.uk>
Message-ID: <CAHT1vpgNEmpsAofKh9R2Fxf4+nQHrcWeJ5tmzc1hNBR4yv10UQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120425/c60e1932/attachment.pl>

From carson.farmer at gmail.com  Wed Apr 25 12:26:56 2012
From: carson.farmer at gmail.com (Carson Farmer)
Date: Wed, 25 Apr 2012 11:26:56 +0100
Subject: [R-sig-Geo] extracting non-NA values from RasterLayer
Message-ID: <CADB6tZtm1YumpsB7Jo69_ecUcvopaCN3HoKZ3scgOqzT06HzsA@mail.gmail.com>

Dear list, I am currently dealing with extremely large raster datasets
(100s of millions of cells), and am masking out large regions which
are of no particular interest for our current project. This produces
RasterLayers with a large number of NAs (but still millions of non-NA
cells as well). What I'd like to do is extract all non-NA values into
a vector for use in various statistical analyses, but I am having
trouble finding the most efficient means of doing so. Any pointers? I
have tried "sampleRandom", which is supposed to only take non-NA
cells, but there must be a better/faster way to extract *all* non-NA
values that I've just missed.

Cheers,

Carson

-- 
Dr. Carson J. Q. Farmer
Centre for GeoInformatics (CGI)
School of Geography and Geosciences
Irvine Building, University of St Andrews
St Andrews, Fife, KY16 9AL
Scotland, UK


From Roger.Bivand at nhh.no  Wed Apr 25 12:34:12 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 25 Apr 2012 12:34:12 +0200 (CEST)
Subject: [R-sig-Geo] semi-transparent mapping - overlapping areas
In-Reply-To: <CAHT1vpgNEmpsAofKh9R2Fxf4+nQHrcWeJ5tmzc1hNBR4yv10UQ@mail.gmail.com>
References: <F9AEA1375C89934BABA47ECE0801EAFA13B32DB6@MBX02.ad.oak.ox.ac.uk>
	<CAHT1vpgNEmpsAofKh9R2Fxf4+nQHrcWeJ5tmzc1hNBR4yv10UQ@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1204251230010.25969@reclus.nhh.no>

On Wed, 25 Apr 2012, Roman Lu?trik wrote:

> You could use the alpha argument to set transparency to each color. The
> overlaying colors should have a mixture of both. For example, see the
> bottom two images (http://had.co.nz/ggplot2/geom_histogram.html) of how
> alpha mixing works. Lattice graphics also have an alpha argument.
>

Right. In base graphics:

library(maptools)
set.seed(1)
xx <- readShapeSpatial(system.file("shapes/sids.shp",
  package="maptools")[1], proj4string=CRS("+proj=longlat"))
xx$reds <- 1
is.na(xx$reds) <- sample(1:100, 50)
xx$blues <- 1
is.na(xx$blues) <- sample(1:100, 50)
plot(xx, col="grey80", border="transparent")
plot(xx, col=ifelse(is.na(xx$reds), "transparent", "red"),
  border="transparent", add=TRUE)
plot(xx, col=ifelse(is.na(xx$blues), "transparent",
  rgb(red=0, green=0, blue=1, alpha=0.5)), border="transparent",
  add=TRUE)

with rather too brutal red/blue colours.

Roger

>
> Cheers,
> Roman
>
>
> On Wed, Apr 25, 2012 at 12:13 PM, Juta Kawalerowicz <
> juta.kawalerowicz at stx.ox.ac.uk> wrote:
>
>> Hi,
>>
>>
>>
>> Does anyone know how to create mapping of attribute A and attribute B so
>> that the overlapping areas are not colour A or B but the mixture of the two
>> (the semi-transparent effect). In case that does not sound clear, I am
>> looking for this kind of effect
>>
>>
>>
>> http://tinyurl.com/cko7c4b created by Divid McCandless (probably not
>> using R?)
>>
>>
>>
>> If anyone knows a function/package which could allows to do something like
>> this, I would be very gretful for suggestions.
>>
>>
>>
>> Cheers,
>>
>> Juta
>>
>>        [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From rafael.wueest at wsl.ch  Wed Apr 25 12:45:35 2012
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Wed, 25 Apr 2012 12:45:35 +0200
Subject: [R-sig-Geo] extracting non-NA values from RasterLayer
In-Reply-To: <CADB6tZtm1YumpsB7Jo69_ecUcvopaCN3HoKZ3scgOqzT06HzsA@mail.gmail.com>
References: <CADB6tZtm1YumpsB7Jo69_ecUcvopaCN3HoKZ3scgOqzT06HzsA@mail.gmail.com>
Message-ID: <340A1E3E-4FD1-4F05-9EC2-1D851BF9B6FD@wsl.ch>

Hi Carson,

check ?rasterToPoints from raster package. That should do it!

Rafi

On 25.04.2012, at 12:26, Carson Farmer wrote:

> Dear list, I am currently dealing with extremely large raster datasets
> (100s of millions of cells), and am masking out large regions which
> are of no particular interest for our current project. This produces
> RasterLayers with a large number of NAs (but still millions of non-NA
> cells as well). What I'd like to do is extract all non-NA values into
> a vector for use in various statistical analyses, but I am having
> trouble finding the most efficient means of doing so. Any pointers? I
> have tried "sampleRandom", which is supposed to only take non-NA
> cells, but there must be a better/faster way to extract *all* non-NA
> values that I've just missed.
> 
> Cheers,
> 
> Carson
> 
> -- 
> Dr. Carson J. Q. Farmer
> Centre for GeoInformatics (CGI)
> School of Geography and Geosciences
> Irvine Building, University of St Andrews
> St Andrews, Fife, KY16 9AL
> Scotland, UK
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest


From m.shapiera22 at gmail.com  Wed Apr 25 15:06:42 2012
From: m.shapiera22 at gmail.com (Melanie Shapiera)
Date: Wed, 25 Apr 2012 10:36:42 -0230
Subject: [R-sig-Geo] averaging home range contours
Message-ID: <CAK5WTcG18LrQVm0HaLGTn3_3dwgqx_8Mdd_1AKths8an27feoA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120425/30f56857/attachment.pl>

From mas.cyrille2 at wanadoo.fr  Wed Apr 25 16:05:50 2012
From: mas.cyrille2 at wanadoo.fr (mas.cyrille2)
Date: Wed, 25 Apr 2012 16:05:50 +0200 (CEST)
Subject: [R-sig-Geo] Overlaying maps
Message-ID: <533533959.44737.1335362750839.JavaMail.www@wwinf1d31>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120425/529ee82c/attachment.pl>

From saldanha.plangeo at gmail.com  Wed Apr 25 16:26:45 2012
From: saldanha.plangeo at gmail.com (Raphael Saldanha)
Date: Wed, 25 Apr 2012 11:26:45 -0300
Subject: [R-sig-Geo] Overlaying maps
In-Reply-To: <533533959.44737.1335362750839.JavaMail.www@wwinf1d31>
References: <533533959.44737.1335362750839.JavaMail.www@wwinf1d31>
Message-ID: <CACSWb41wcq=gTO94sqc61jDh-F3cC73eCzkAnpBKeiF_TZusFA@mail.gmail.com>

Hi Cyrille,

This can be something linked to the projection of your files. All
geographical data have a projection, and, for a correct overlaying,
the projection should be informed to the software (ArcView, ArcGIS, R,
etc), and will be better if all the data have the same projection. Can
you inform us the projection of your files?

On Wed, Apr 25, 2012 at 11:05 AM, mas.cyrille2 <mas.cyrille2 at wanadoo.fr> wrote:
>
>
> Dear all,
>
>
>
> I am a botanist and I need some assistance for overlaying maps under R. I have an altimetric file for Madagascar in .gri. This file come from http://www.diva-gis.org/gdata (and the original data seem to have been edited by CGIAR STRM). I realize a plot of this file and I?m overlaying an Arview file (bioclimate 5) in .shp (polygon) but I don?t know his specific features. Finally I?m overlaying my sheet herbarium geographical localities points. My final map don?t have any problems in a global points of view (figure 1). Problems come when 1) I would a more detailed part of this final map or 2) I wish to modify the size of the final plot (figure 2). For the detailed plot : the files are not correctly superposed and numerous pixels of the .gri file are outside of the limits of the polygons of the .shp file. For the modified size of the final plot : the .gri file not change his conformation but the .shp file and the distance between my sheet herbarium geographical localities points are proportionally modified with the draw of the plot. Is it a problem with the geographical projections ? Who know how to do have a good overlaying between .gri file and .shp file for the removal of my problems ?
>
>
>
> As an advance, thank you for your responses,
>
>
>
> Cyrille MAS
>
>
>
>
>
>
>
> My code is :
>
>
>
> # display the bioclimate 5 file
>
> library(maptools)
>
> SHP="E:/Bioclimate 5/bc5.shp"
>
> bc5
>
> plot(bc5,xlim=c(44,50),ylim=c(-26,-12),cex.axis=0.6,cex.names=0.6,axis.lty=0,xlab="Longitude",
>
> ylab="Latitude",axes=TRUE,border="black",col="white")
>
>
>
> # display the altimetric file
>
> require(raster)
>
> alt
>
> str(alt)
>
> plot(alt,cex.axis=0.6,cex.names=0.6,axis.lty=0,xlab="Longitude (en ?E)",ylab="Latitude (en ?S)",axes=TRUE)
>
>
>
> # overlaying the bioclimate 5 file upon the altimetric file
>
> plot(bc5,add=TRUE)
>
>
>
> # apply of my sheet herbarium geographical localities data
>
> library(dismo)
>
> data
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



--
Atenciosamente,

Raphael Saldanha
saldanha.plangeo at gmail.com


From carson.farmer at gmail.com  Wed Apr 25 17:39:32 2012
From: carson.farmer at gmail.com (Carson Farmer)
Date: Wed, 25 Apr 2012 16:39:32 +0100
Subject: [R-sig-Geo] extracting non-NA values from RasterLayer
In-Reply-To: <340A1E3E-4FD1-4F05-9EC2-1D851BF9B6FD@wsl.ch>
References: <CADB6tZtm1YumpsB7Jo69_ecUcvopaCN3HoKZ3scgOqzT06HzsA@mail.gmail.com>
	<340A1E3E-4FD1-4F05-9EC2-1D851BF9B6FD@wsl.ch>
Message-ID: <CADB6tZs97Bx7qND6FRobEHh5vdts+XMFwcnavsZKTRQiq+0Twg@mail.gmail.com>

Thanks Rafi,

Looks like that will do the trick, though now I just have to be
careful about memory management!

Carson

On Wed, Apr 25, 2012 at 11:45 AM, Rafael W?est <rafael.wueest at wsl.ch> wrote:
> Hi Carson,
>
> check ?rasterToPoints from raster package. That should do it!
>
> Rafi
>
> On 25.04.2012, at 12:26, Carson Farmer wrote:
>
>> Dear list, I am currently dealing with extremely large raster datasets
>> (100s of millions of cells), and am masking out large regions which
>> are of no particular interest for our current project. This produces
>> RasterLayers with a large number of NAs (but still millions of non-NA
>> cells as well). What I'd like to do is extract all non-NA values into
>> a vector for use in various statistical analyses, but I am having
>> trouble finding the most efficient means of doing so. Any pointers? I
>> have tried "sampleRandom", which is supposed to only take non-NA
>> cells, but there must be a better/faster way to extract *all* non-NA
>> values that I've just missed.
>>
>> Cheers,
>>
>> Carson
>>
>> --
>> Dr. Carson J. Q. Farmer
>> Centre for GeoInformatics (CGI)
>> School of Geography and Geosciences
>> Irvine Building, University of St Andrews
>> St Andrews, Fife, KY16 9AL
>> Scotland, UK
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
> --
> Rafael W?est
> Swiss Federal Research Institute WSL
> Z?rcherstrasse 111
> 8903 Birmensdorf
> Switzerland
>
> +41 44 7392126
> rafael.wueest at wsl.ch
> http://www.wsl.ch/info/mitarbeitende/wueest
>
>
>



-- 
Dr. Carson J. Q. Farmer
Centre for GeoInformatics (CGI)
School of Geography and Geosciences
Irvine Building, University of St Andrews
St Andrews, Fife, KY16 9AL
Scotland, UK


From J.Brooke at umcutrecht.nl  Wed Apr 25 19:19:39 2012
From: J.Brooke at umcutrecht.nl (Brooke, J.)
Date: Wed, 25 Apr 2012 17:19:39 +0000
Subject: [R-sig-Geo] earth Package question for running a loop
Message-ID: <6F5E250BD43928468FD7E273E79995B7231E122D@EXMB1501.ds.umcutrecht.nl>


------------------------------------------------------------------------------

De informatie opgenomen in dit bericht kan vertrouwelijk zijn en is
uitsluitend bestemd voor de geadresseerde. Indien u dit bericht onterecht
ontvangt, wordt u verzocht de inhoud niet te gebruiken en de afzender direct
te informeren door het bericht te retourneren. Het Universitair Medisch
Centrum Utrecht is een publiekrechtelijke rechtspersoon in de zin van de W.H.W.
(Wet Hoger Onderwijs en Wetenschappelijk Onderzoek) en staat geregistreerd bij
de Kamer van Koophandel voor Midden-Nederland onder nr. 30244197.

Denk s.v.p aan het milieu voor u deze e-mail afdrukt.

------------------------------------------------------------------------------

This message may contain confidential information and is...{{dropped:12}}


From juta.kawalerowicz at stx.ox.ac.uk  Thu Apr 26 00:54:52 2012
From: juta.kawalerowicz at stx.ox.ac.uk (Juta Kawalerowicz)
Date: Wed, 25 Apr 2012 22:54:52 +0000
Subject: [R-sig-Geo] semi-transparent mapping - overlapping areas
In-Reply-To: <alpine.LRH.2.02.1204251230010.25969@reclus.nhh.no>
References: <F9AEA1375C89934BABA47ECE0801EAFA13B32DB6@MBX02.ad.oak.ox.ac.uk>
	<CAHT1vpgNEmpsAofKh9R2Fxf4+nQHrcWeJ5tmzc1hNBR4yv10UQ@mail.gmail.com>,
	<alpine.LRH.2.02.1204251230010.25969@reclus.nhh.no>
Message-ID: <F9AEA1375C89934BABA47ECE0801EAFA13B32F67@MBX02.ad.oak.ox.ac.uk>

Dear Roger and Roman, 

Thanks for answering, with your kind help  I compiled the maps I wanted.

Best wishes, 
Juta
________________________________________
From: Roger Bivand [Roger.Bivand at nhh.no]
Sent: 25 April 2012 11:34
To: Roman Lu?trik
Cc: Juta Kawalerowicz; r-sig-geo ?[r-sig-geo at r-project.org]?
Subject: Re: [R-sig-Geo] semi-transparent mapping - overlapping areas

On Wed, 25 Apr 2012, Roman Lu?trik wrote:

> You could use the alpha argument to set transparency to each color. The
> overlaying colors should have a mixture of both. For example, see the
> bottom two images (http://had.co.nz/ggplot2/geom_histogram.html) of how
> alpha mixing works. Lattice graphics also have an alpha argument.
>

Right. In base graphics:

library(maptools)
set.seed(1)
xx <- readShapeSpatial(system.file("shapes/sids.shp",
  package="maptools")[1], proj4string=CRS("+proj=longlat"))
xx$reds <- 1
is.na(xx$reds) <- sample(1:100, 50)
xx$blues <- 1
is.na(xx$blues) <- sample(1:100, 50)
plot(xx, col="grey80", border="transparent")
plot(xx, col=ifelse(is.na(xx$reds), "transparent", "red"),
  border="transparent", add=TRUE)
plot(xx, col=ifelse(is.na(xx$blues), "transparent",
  rgb(red=0, green=0, blue=1, alpha=0.5)), border="transparent",
  add=TRUE)

with rather too brutal red/blue colours.

Roger

>
> Cheers,
> Roman
>
>
> On Wed, Apr 25, 2012 at 12:13 PM, Juta Kawalerowicz <
> juta.kawalerowicz at stx.ox.ac.uk> wrote:
>
>> Hi,
>>
>>
>>
>> Does anyone know how to create mapping of attribute A and attribute B so
>> that the overlapping areas are not colour A or B but the mixture of the two
>> (the semi-transparent effect). In case that does not sound clear, I am
>> looking for this kind of effect
>>
>>
>>
>> http://tinyurl.com/cko7c4b created by Divid McCandless (probably not
>> using R?)
>>
>>
>>
>> If anyone knows a function/package which could allows to do something like
>> this, I would be very gretful for suggestions.
>>
>>
>>
>> Cheers,
>>
>> Juta
>>
>>        [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>
>
>

--
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From afischbach at usgs.gov  Thu Apr 26 21:08:04 2012
From: afischbach at usgs.gov (Anthony Fischbach)
Date: Thu, 26 Apr 2012 12:08:04 -0700 (PDT)
Subject: [R-sig-Geo] averaging home range contours
In-Reply-To: <CAK5WTcG18LrQVm0HaLGTn3_3dwgqx_8Mdd_1AKths8an27feoA@mail.gmail.com>
References: <CAK5WTcG18LrQVm0HaLGTn3_3dwgqx_8Mdd_1AKths8an27feoA@mail.gmail.com>
Message-ID: <1335467284564-7503972.post@n2.nabble.com>

You may first sum the ud values over all iterations,
normalize the volume back to 1, 
then calcuate the volumetric contour from the summary ud volume.

## Something like this:
##First cast the estUD to a spatial pixel data frame
kud_spdf<-estUD2spixdf(kud)
## Convert to fullgrid (i.e. SpatialGridDataFrame)
fullgrid(kud_spdf) <- TRUE
## handle the pixel level volume data
vd<-kud_spdf at data
## from here you can summarize the volume data across your iterations
vd_all ## use loop to sum across pixel values
## normalize to a volume of 1
## cast back into a spatial pixel data frame
kudspdf_all at data <- vd_all
## and cast back into an estUD object
kud_all <- new("estUD", kudspdf_all) 
kud_all at h <- list(h=0, meth="specified") # fake value 
kud_all at vol <- FALSE
## then get your volumetric contour

-HTH , -Tony

-----
Tony Fischbach, Wildlife Biologist
Walrus Research Program
Alaska Science Center
U.S. Geological Survey
4210 University Drive
Anchorage, AK 99508-4650

AFischbach at usgs.gov
http://alaska.usgs.gov/science/biology/walrus
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/averaging-home-range-contours-tp7499301p7503972.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From karl at huftis.org  Thu Apr 26 23:06:31 2012
From: karl at huftis.org (Karl Ove Hufthammer)
Date: Thu, 26 Apr 2012 23:06:31 +0200
Subject: [R-sig-Geo] Converting SpatialPolygons to non-overlapping
	SpatialLines
Message-ID: <1335474391.2428.2.camel@adrian.site>

Dear list members,

Consider a SpatialPolygons object, consisting of polygons that share
some boundaries (e.g., the states of the USA). It?s easy to convert this
into SpatialLines, but how can I create *non-overlapping* SpatialLines
where each line has a unique polygon membership, i.e., the entirety of
the line belong to the same polygon(s).

Example:

??????????
?        ?
?   A    ?????????
?        ?       ?
??????????  B    ?
      ?          ?
      ????????????

This should be split into three SpatialLines:

??????????
?        ?
?        
?        
??????

and

         ?
         ?
      ????

and

         ?????????
                 ?
                 ?
      ?          ?
      ????????????

Note that if the first two parts were merged, we would be left with
non-overlapping lines (touching at single nodes is OK), i.e., satisfying
the first condition,

??????????
?        ?
?        ?
?        ?
??????????


         ?????????
                 ?
                 ?
      ?          ?
      ????????????

but the second condition is not satisfied, as part of the first line is
a member of only A, and part of it is a member of both A and B.

In theory, this splitting is simple to accomplish: Find all points where
two or more polygons touche at a single node (not a boundary), then
split all SpatialLines (that touch this point) at this point, and remove
duplicate lines. But how to do this in practice? Note that it?s not
necessary to keep the membership information for the lines (I?m creating
a SpatialLines, not a SpatialLinesDataFrame).

I?d be grateful for any help.

-- 
Karl Ove Hufthammer


From ross.dwyer at uq.edu.au  Fri Apr 27 01:30:58 2012
From: ross.dwyer at uq.edu.au (Ross Dwyer)
Date: Thu, 26 Apr 2012 23:30:58 +0000
Subject: [R-sig-Geo] averaging home range contours
In-Reply-To: <CAK5WTcG18LrQVm0HaLGTn3_3dwgqx_8Mdd_1AKths8an27feoA@mail.gmail.com>
References: <CAK5WTcG18LrQVm0HaLGTn3_3dwgqx_8Mdd_1AKths8an27feoA@mail.gmail.com>
Message-ID: <84B4751733167E41A8156E63A69C1C3A01E063@uqexmdb3.soe.uq.edu.au>

Hi Melanie,

I think you're going about this the wrong way. My advice is to...
1. Get the data into the correct format for a spatial points data frame (X, Y, ID)
	Where ID = replicate number
2. Run kernelUD to generate UDs for the 100 replicates
3. Use ver95 <- getverticeshr(kud, lev = 95) and ver50 <- getverticeshr(kud, lev = 50) to extract your vertices for each replicate. These can then be easily saved as a .shp.
4. Run the following to extract your areas
Area95 <- sapply(slot(ver95, "polygons"), function(i) slot(i, "area"))) 
Area50 <- sapply(slot(ver50, "polygons"), function(i) slot(i, "area"))) 
5. Then you can simply run mean(Area95) etc to extract the mean of all replicates for each contour.

Best to avoid the loop as I don't think it's really needed here.

Cheers, Ross


-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Melanie Shapiera
Sent: Wednesday, 25 April 2012 11:07 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] averaging home range contours

Hello all

I am trying to run some Monte Carlo simulations on single individuals in R.

So far, I have sampled 100 X and Y coordinates from known positions of an individual, 100 times. This results in a list of 200. I then convert this list into a dataframe that is more condusive to eventual functions I want to run for each sample (kernel.area,kernelUD).
So I had a data frame with 200 columns, and I wanted to perform the kernel.area function (adehabitatHR), using each successive pair of columns (which represent a resampling). I ended up writing a loop that allows me to calculate the kernel.area for each of the simulations, as well as the 95% volume contour, which is saved as a Spatial Polygon.

I now want to take the average of these 95% volume contours, to get an average 95% volume contour that I can view in Arc. However, I am unsure how to do this. Any advice would be greatly appreciated!
I can't replicate my data very well here, so I'll give an example of what the structure is:

# generate dataframe representing X and Y positions df <- data.frame(x=seq(1:200),y=seq(1:200))
# 100 replications of sampling 100 "positions"
resamp <- replicate(100,df[sample(nrow(df),100),])
# convert to data frame (kernel.area needs an xy dataframe) dfnew <- do.call("rbind", resamp[1:2,]) # xy positions need to be in columns for kernel.area
df2 <- t(dfnew)

Ok, here is the for loop I've been using for my actual positions:

#calculate the 50,95% kernel area for each simulation, as well as the 95% volume contour

for (j in seq(1,ncol(df2)-1,2)) {
kud <-kernelUD(SpatialPoints(df2[,j:(j+1)]),kern="bivnorm")
kernAr<-kernel.area(kud,percent=c(50,95),unin=c("m"),unout=c("km2"))
print(kernAr)
name[[j]]<-getverticeshr(kud, lev = 95)
}
Again, the next step I wish to take is to average the hundred 95% contours I have created (ie name[[1]],name[[3]]...). Any suggestions?
Melanie
--
Melanie Shapiera
MSc candidate
Memorial University of Newfoundland

	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Gema.FAviles at uclm.es  Fri Apr 27 12:13:45 2012
From: Gema.FAviles at uclm.es (GEMA FERNANDEZ-AVILES CALDERON)
Date: Fri, 27 Apr 2012 12:13:45 +0200
Subject: [R-sig-Geo] geoR -- bins in experimental semivariogram
Message-ID: <BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6A7@EVSAB01.uclm.es>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120427/c738de5f/attachment.pl>

From tom.gottfried at tum.de  Fri Apr 27 12:28:35 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Fri, 27 Apr 2012 12:28:35 +0200
Subject: [R-sig-Geo] geoR -- bins in experimental semivariogram
In-Reply-To: <BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6A7@EVSAB01.uclm.es>
References: <BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6A7@EVSAB01.uclm.es>
Message-ID: <4F9A74D3.3080901@tum.de>

Please express in R what you have done
(see http://www.r-project.org/posting-guide.html)

Am 27.04.2012 12:13, schrieb GEMA FERNANDEZ-AVILES CALDERON:
>
> Dear list:
>
> I have a 5x5 regular grid 100x100. When constructing the experimental semivariogram using gerR() I expected to have 14 different distances.
> However, I obtained 10 semivariogram points corresponding to 10 bins.
>
> - Which is exactly a bin?

the lag class (an interval on the real line of distances over which the 
semivariances are averaged).

> - Which is the bin correspondence wiht the 14 initial distances.

that depends on what you refer to with "14 initial distances".

> - Why don't the first bin is not exactly 25?

I suspect because you did not specify it that way (i.e. first lag class 
corresponding to [0,25)).

Tom

> - The dataset is the following.
>
> Thanks in advance,
> Gema
>
> #########################################3
> x	y	dat
> 0	0	19.64253569
> 25	0	20.67413804
> 50	0	11.39907369
> 75	0	8.721311665
> 100	0	14.19476285
> 0	25	9.755908087
> 25	25	18.9788189
> 50	25	14.05059221
> 75	25	11.76423327
> 100	25	10.42562093
> 0	50	6.559737009
> 25	50	4.882232635
> 50	50	10.7619423
> 75	50	9.096456345
> 100	50	10.6894209
> 0	75	14.87976528
> 25	75	5.372505287
> 50	75	5.712214162
> 75	75	4.431458459
> 100	75	15.69477576
> 0	100	12.77014999
> 25	100	1.366809445
> 50	100	4.359141225
> 75	100	6.607783644
> 100	100	10.25674201
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> Gema Fern?ndez-Avil?s
>
> Department of Statistics
> Faculty of Law and Social Sciences
> University of Castilla-La Mancha at Toledo
>
> http://www.uclm.es/profesorado/gemafaviles/
>
> 	[[alternative HTML version deleted]]
>
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From Gema.FAviles at uclm.es  Sat Apr 28 13:28:15 2012
From: Gema.FAviles at uclm.es (GEMA FERNANDEZ-AVILES CALDERON)
Date: Sat, 28 Apr 2012 13:28:15 +0200
Subject: [R-sig-Geo] geoR -- bins in experimental semivariogram
References: <BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6A7@EVSAB01.uclm.es>
	<4F9A74D3.3080901@tum.de>
Message-ID: <BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6AD@EVSAB01.uclm.es>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120428/f7c0465e/attachment.pl>

From tom.gottfried at tum.de  Sat Apr 28 16:23:32 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Sat, 28 Apr 2012 16:23:32 +0200
Subject: [R-sig-Geo] geoR -- bins in experimental semivariogram
In-Reply-To: <BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6AD@EVSAB01.uclm.es>
References: <BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6A7@EVSAB01.uclm.es>
	<4F9A74D3.3080901@tum.de>
	<BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6AD@EVSAB01.uclm.es>
Message-ID: <4F9BFD64.6040409@tum.de>

Have you done

?variog

and read it? It says how to specify the bins.

Tom

Am 28.04.2012 13:28, schrieb GEMA FERNANDEZ-AVILES CALDERON:
> Dear Tom:
>
> I'm sorry if I have not formulate correctly the question.
>
> I am running this:
>
> #---------------------------------------------------
> library(geoR)
> x=read.table("Example.txt", header=TRUE)
> class(x)
>
> x<-as.geodata(obj=x,coords.col = 1:2, data.col = 3)
> plot(x)
> points(x,col=grey(seq(1,0,l=14)), main = "Regular Grid")
> cloud1 <- variog(x, option = "cloud")
> bin1 <- variog(x, option = "bin" , tolerance = 0)
>
> # graphic
>
> plot(cloud1, main = "classical estimator" )
> lines(bin1, type="p", lwd="4")
> plot(bin1, lwd=2, main = "Classical estimator", xlim=c(0,150))
> #---------------------------------------------------
>
> But, "bin1" has not contain 14 bins.
> How can specify it in geoR? Could you help me?
>
> Thanks,
> Gema
>
>
>
>
>
>
>
>
>
> Gema Fern?ndez-Avil?s
>
> Department of Statistics
> Faculty of Law and Social Sciences
> University of Castilla-La Mancha at Toledo
>
> http://www.uclm.es/profesorado/gemafaviles/
>
>
>
> -----Mensaje original-----
> De: r-sig-geo-bounces at r-project.org en nombre de Tom Gottfried
> Enviado el: vie 27/04/2012 12:28
> Para: r-sig-geo at r-project.org
> Asunto: Re: [R-sig-Geo] geoR -- bins in experimental semivariogram
>
> Please express in R what you have done
> (see http://www.r-project.org/posting-guide.html)
>
> Am 27.04.2012 12:13, schrieb GEMA FERNANDEZ-AVILES CALDERON:
>  >
>  > Dear list:
>  >
>  > I have a 5x5 regular grid 100x100. When constructing the experimental
> semivariogram using gerR() I expected to have 14 different distances.
>  > However, I obtained 10 semivariogram points corresponding to 10 bins.
>  >
>  > - Which is exactly a bin?
>
> the lag class (an interval on the real line of distances over which the
> semivariances are averaged).
>
>  > - Which is the bin correspondence wiht the 14 initial distances.
>
> that depends on what you refer to with "14 initial distances".
>
>  > - Why don't the first bin is not exactly 25?
>
> I suspect because you did not specify it that way (i.e. first lag class
> corresponding to [0,25)).
>
> Tom
>
>  > - The dataset is the following.
>  >
>  > Thanks in advance,
>  > Gema
>  >
>  > #########################################3
>  > x y dat
>  > 0 0 19.64253569
>  > 25 0 20.67413804
>  > 50 0 11.39907369
>  > 75 0 8.721311665
>  > 100 0 14.19476285
>  > 0 25 9.755908087
>  > 25 25 18.9788189
>  > 50 25 14.05059221
>  > 75 25 11.76423327
>  > 100 25 10.42562093
>  > 0 50 6.559737009
>  > 25 50 4.882232635
>  > 50 50 10.7619423
>  > 75 50 9.096456345
>  > 100 50 10.6894209
>  > 0 75 14.87976528
>  > 25 75 5.372505287
>  > 50 75 5.712214162
>  > 75 75 4.431458459
>  > 100 75 15.69477576
>  > 0 100 12.77014999
>  > 25 100 1.366809445
>  > 50 100 4.359141225
>  > 75 100 6.607783644
>  > 100 100 10.25674201
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  > Gema Fern?ndez-Avil?s
>  >
>  > Department of Statistics
>  > Faculty of Law and Social Sciences
>  > University of Castilla-La Mancha at Toledo
>  >
>  > http://www.uclm.es/profesorado/gemafaviles/
>  >
>  > [[alternative HTML version deleted]]
>  >
>  >
>  >
>  >
>  > _______________________________________________
>  > R-sig-Geo mailing list
>  > R-sig-Geo at r-project.org
>  > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> --
> Technische Universit?t M?nchen
> Department f?r Pflanzenwissenschaften
> Lehrstuhl f?r Gr?nlandlehre
> Alte Akademie 12
> 85350 Freising / Germany
> Phone: ++49 (0)8161 715324
> Fax: ++49 (0)8161 713243
> email: tom.gottfried at wzw.tum.de
> http://www.wzw.tum.de/gruenland
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From paulojus at c3sl.ufpr.br  Sat Apr 28 17:01:29 2012
From: paulojus at c3sl.ufpr.br (Paulo Justiniano Ribeiro Jr)
Date: Sat, 28 Apr 2012 12:01:29 -0300 (BRT)
Subject: [R-sig-Geo] geoR -- bins in experimental semivariogram
In-Reply-To: <BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6AD@EVSAB01.uclm.es>
References: <BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6A7@EVSAB01.uclm.es>
	<4F9A74D3.3080901@tum.de>
	<BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6AD@EVSAB01.uclm.es>
Message-ID: <alpine.DEB.2.00.1204281156450.15123@macalan.c3sl.ufpr.br>

Gema

the varigram distances are gruped in classes (simular to what is done with 
an histogram) and for each class the average semiveriance is computed

geoR like many other software/packages have a default option
(13 variogram points in geoR - probabily because this was written of 
friday.... ;)  )
You can however change this to other specification which may be
more appropriate for your data.

The argument "max.dist" sets a maximum distance (geoR takes all distances 
by 
default)
the argument "uvec" allows you to specify a vector with the wanted 
distance classes
(similarly to breaks in histogram)

?variog has more detais otherwise let me know


Paulo Justiniano Ribeiro Jr
LEG (Laboratorio de Estatistica e Geoinformacao)
Universidade Federal do Parana
Caixa Postal 19.081
CEP 81.531-990
Curitiba, PR  -  Brasil
Tel: (+55) 41 3361 3573
VOIP: (+55) (41) (3361 3600) 1053 1066
Fax: (+55) 41 3361 3141
e-mail: paulojus AT  ufpr  br
http://www.leg.ufpr.br/~paulojus

On Sat, 28 Apr 2012, GEMA FERNANDEZ-AVILES CALDERON wrote:

> Dear Tom:
>
> I'm sorry if I have not formulate correctly the question.
>
> I am running this:
>
> #---------------------------------------------------
> library(geoR)
> x=read.table("Example.txt", header=TRUE)
> class(x)
>
> x<-as.geodata(obj=x,coords.col = 1:2, data.col = 3)
> plot(x)
> points(x,col=grey(seq(1,0,l=14)), main = "Regular Grid")
> cloud1 <- variog(x, option = "cloud")
> bin1 <- variog(x, option = "bin" , tolerance = 0)
>
> # graphic
>
> plot(cloud1, main = "classical estimator" )
> lines(bin1, type="p", lwd="4")
> plot(bin1, lwd=2, main = "Classical estimator", xlim=c(0,150))
> #---------------------------------------------------
>
> But, "bin1" has not contain 14 bins.
> How can specify it in geoR? Could you help me?
>
> Thanks,
> Gema
>
>
>
>
>
>
>
>
>
> Gema Fern?ndez-Avil?s
>
> Department of Statistics
> Faculty of Law and Social Sciences
> University of Castilla-La Mancha at Toledo
>
> http://www.uclm.es/profesorado/gemafaviles/
>
>
>
> -----Mensaje original-----
> De: r-sig-geo-bounces at r-project.org en nombre de Tom Gottfried
> Enviado el: vie 27/04/2012 12:28
> Para: r-sig-geo at r-project.org
> Asunto: Re: [R-sig-Geo] geoR -- bins in experimental semivariogram
>
> Please express in R what you have done
> (see http://www.r-project.org/posting-guide.html)
>
> Am 27.04.2012 12:13, schrieb GEMA FERNANDEZ-AVILES CALDERON:
>>
>> Dear list:
>>
>> I have a 5x5 regular grid 100x100. When constructing the experimental semivariogram using gerR() I expected to have 14 different distances.
>> However, I obtained 10 semivariogram points corresponding to 10 bins.
>>
>> - Which is exactly a bin?
>
> the lag class (an interval on the real line of distances over which the
> semivariances are averaged).
>
>> - Which is the bin correspondence wiht the 14 initial distances.
>
> that depends on what you refer to with "14 initial distances".
>
>> - Why don't the first bin is not exactly 25?
>
> I suspect because you did not specify it that way (i.e. first lag class
> corresponding to [0,25)).
>
> Tom
>
>> - The dataset is the following.
>>
>> Thanks in advance,
>> Gema
>>
>> #########################################3
>> x	y	dat
>> 0	0	19.64253569
>> 25	0	20.67413804
>> 50	0	11.39907369
>> 75	0	8.721311665
>> 100	0	14.19476285
>> 0	25	9.755908087
>> 25	25	18.9788189
>> 50	25	14.05059221
>> 75	25	11.76423327
>> 100	25	10.42562093
>> 0	50	6.559737009
>> 25	50	4.882232635
>> 50	50	10.7619423
>> 75	50	9.096456345
>> 100	50	10.6894209
>> 0	75	14.87976528
>> 25	75	5.372505287
>> 50	75	5.712214162
>> 75	75	4.431458459
>> 100	75	15.69477576
>> 0	100	12.77014999
>> 25	100	1.366809445
>> 50	100	4.359141225
>> 75	100	6.607783644
>> 100	100	10.25674201
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> Gema Fern?ndez-Avil?s
>>
>> Department of Statistics
>> Faculty of Law and Social Sciences
>> University of Castilla-La Mancha at Toledo
>>
>> http://www.uclm.es/profesorado/gemafaviles/
>>
>> 	[[alternative HTML version deleted]]
>>
>>
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> -- 
> Technische Universit?t M?nchen
> Department f?r Pflanzenwissenschaften
> Lehrstuhl f?r Gr?nlandlehre
> Alte Akademie 12
> 85350 Freising / Germany
> Phone: ++49 (0)8161 715324
> Fax:   ++49 (0)8161 713243
> email: tom.gottfried at wzw.tum.de
> http://www.wzw.tum.de/gruenland
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> 	[[alternative HTML version deleted]]
>
>


From zimste at aegean.gr  Sat Apr 28 18:50:51 2012
From: zimste at aegean.gr (szimeras)
Date: Sat, 28 Apr 2012 09:50:51 -0700 (PDT)
Subject: [R-sig-Geo] Special Session: Spatial Epidemiology: theory and
	applications
Message-ID: <1335631851773-7509241.post@n2.nabble.com>

Dear All

I would like to adress your attention to the special Session of the journal 
International Journal of Systems Biology and Biomedical Technologies
that I prepare with title: Spatial Epidemiology: theory and applications
Deadlines for papers: 28 MAY 2012

Many thanks for your support

S. Zimeras
Assist. Prof.
Dept. of Statistics and Actuarial-Financial Mathematics
University of the Aegean

Greece 
http://r-sig-geo.2731867.n2.nabble.com/file/n7509241/SPATIAL_EPIDEMIOLOGY_-_IJSBBT.pdf
SPATIAL_EPIDEMIOLOGY_-_IJSBBT.pdf 

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Special-Session-Spatial-Epidemiology-theory-and-applications-tp7509241.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From zimste at aegean.gr  Sat Apr 28 18:56:21 2012
From: zimste at aegean.gr (Zimeras Stelios)
Date: Sat, 28 Apr 2012 19:56:21 +0300
Subject: [R-sig-Geo] Spatial Epidemiology:theory and applications
Message-ID: <70DDD3D435DA584C8909DBC00B1ADFEC02D1963175CE@hermes.aegean.gr>

Dear All
I would like to adress your attention to the special Session of the journal
International Journal of Systems Biology and Biomedical Technologies
that I prepare with title: Spatial Epidemiology: theory and applications
Deadlines for papers: 28 MAY 2012
Many thanks for your support
S. Zimeras
Assist. Prof.
Dept. of Statistics and Actuarial-Financial Mathematics
University of the Aegean
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120428/0cf43679/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SPATIAL EPIDEMIOLOGY - IJSBBT.pdf
Type: application/pdf
Size: 20881 bytes
Desc: SPATIAL EPIDEMIOLOGY - IJSBBT.pdf
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120428/0cf43679/attachment.pdf>

From amsantac at hotmail.com  Sat Apr 28 19:34:47 2012
From: amsantac at hotmail.com (=?iso-8859-1?B?QWztIFNhbnRhY3J1eg==?=)
Date: Sat, 28 Apr 2012 12:34:47 -0500
Subject: [R-sig-Geo] New R package for geostatistics: geospt version 0.5-0
Message-ID: <SNT136-W2683B66B7F43F5683A0589C92A0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120428/1b9846e7/attachment.pl>

From Gema.FAviles at uclm.es  Sun Apr 29 11:50:47 2012
From: Gema.FAviles at uclm.es (GEMA FERNANDEZ-AVILES CALDERON)
Date: Sun, 29 Apr 2012 11:50:47 +0200
Subject: [R-sig-Geo] geoR -- bins in experimental semivariogram
References: <BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6A7@EVSAB01.uclm.es>
	<4F9A74D3.3080901@tum.de>
	<BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6AD@EVSAB01.uclm.es>
	<alpine.DEB.2.00.1204281156450.15123@macalan.c3sl.ufpr.br>
Message-ID: <BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6B1@EVSAB01.uclm.es>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120429/9b787aac/attachment.pl>

From darribas at unizar.es  Mon Apr 30 03:49:18 2012
From: darribas at unizar.es (Daniel Arribas-Bel)
Date: Sun, 29 Apr 2012 18:49:18 -0700
Subject: [R-sig-Geo] plotKML problem
Message-ID: <CAKrCUaXV-hRpeLO5cvpQJ3BSjv9G=SR+_dsPKTVz+NgwY6de-A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120429/f7876100/attachment.pl>

From darribas at unizar.es  Mon Apr 30 03:49:18 2012
From: darribas at unizar.es (Daniel Arribas-Bel)
Date: Sun, 29 Apr 2012 18:49:18 -0700
Subject: [R-sig-Geo] plotKML problem
Message-ID: <CAKrCUaXV-hRpeLO5cvpQJ3BSjv9G=SR+_dsPKTVz+NgwY6de-A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120429/f7876100/attachment-0001.pl>

From tom.gottfried at tum.de  Mon Apr 30 07:47:36 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Mon, 30 Apr 2012 07:47:36 +0200
Subject: [R-sig-Geo] geoR -- bins in experimental semivariogram
In-Reply-To: <BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6B1@EVSAB01.uclm.es>
References: <BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6A7@EVSAB01.uclm.es>
	<4F9A74D3.3080901@tum.de>
	<BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6AD@EVSAB01.uclm.es>
	<alpine.DEB.2.00.1204281156450.15123@macalan.c3sl.ufpr.br>
	<BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6B1@EVSAB01.uclm.es>
Message-ID: <4F9E2778.8050202@tum.de>

Gema,

Am 29.04.2012 11:50, schrieb GEMA FERNANDEZ-AVILES CALDERON:
> Paulo, thank you very much for your reply.
>
> I think that it not possible to make an experimental semivariogram with
> distances, true?
> I would like to compute it because when we defined experimental
> semivariogram in a regular grid,
> we use "distances" and I would like to illustrate it.

The purpose of the semivariogram is to give semivariance as a function 
of distance. Probably in most practical cases this is Euclidean distance 
in two-dimensional space. So you might say that it is not possible to 
make an experimental semivariogram WITHOUT distances.

> I tried the following sentence, but, as you said, it computes the mean
> value...
> Then, it is not possible to compute an experimental semivariogram with
> distances, like in
> the "cloud" case?

It seems you want to express something else than merely "distance" here. 
I speculate you want to estimate semivariance at the discrete distances 
occurring on your regular grid. The documentation says :"If an vector is 
passed to the argument breaks its elements are taken as the limits of 
the bins". Semivariance is calculated BETWEEN these limits. So you will 
have to set the values in "breaks" BETWEEN the distances occurring in 
your grid plus one smaller respectively greater than the distances 
occurring in your grid. E.g.

breaks = c(0, 26, 40, 52, ...)

Beware that for the highest distances you only have few point pairs in 
your bins (only two spanning the diagonals over your grid for the 
extreme). Usually you can not expect a reliable semivariance estimate 
from such few point pairs.

Tom

> Thanks in advance,
> Gema
>
> ##########################################################################
> bin2 <- variog(x, option = "bin" ,
> breaks = c(25, 35.35, 50, 55.90, 70.71, 75, 79.05, 90.13, 100,
> 103.07, 106.06, 111.80, 125, 141.42) , tolerance = 0)
>
> plot(bin2, lwd=2, main = "Classical estimator", xlim=c(0,150))
>
> ##########################################################################
>
>
>
>
>
> Gema Fern?ndez-Avil?s
>
> Department of Statistics
> Faculty of Law and Social Sciences
> University of Castilla-La Mancha at Toledo
>
> http://www.uclm.es/profesorado/gemafaviles/
>
>
>
> -----Mensaje original-----
> De: Paulo Justiniano Ribeiro Jr [mailto:paulojus at c3sl.ufpr.br]
> Enviado el: s?b 28/04/2012 17:01
> Para: GEMA FERNANDEZ-AVILES CALDERON
> CC: Tom Gottfried; r-sig-geo at r-project.org
> Asunto: Re: [R-sig-Geo] geoR -- bins in experimental semivariogram
>
> Gema
>
> the varigram distances are gruped in classes (simular to what is done with
> an histogram) and for each class the average semiveriance is computed
>
> geoR like many other software/packages have a default option
> (13 variogram points in geoR - probabily because this was written of
> friday.... ;) )
> You can however change this to other specification which may be
> more appropriate for your data.
>
> The argument "max.dist" sets a maximum distance (geoR takes all distances
> by
> default)
> the argument "uvec" allows you to specify a vector with the wanted
> distance classes
> (similarly to breaks in histogram)
>
> ?variog has more detais otherwise let me know
>
>
> Paulo Justiniano Ribeiro Jr
> LEG (Laboratorio de Estatistica e Geoinformacao)
> Universidade Federal do Parana
> Caixa Postal 19.081
> CEP 81.531-990
> Curitiba, PR - Brasil
> Tel: (+55) 41 3361 3573
> VOIP: (+55) (41) (3361 3600) 1053 1066
> Fax: (+55) 41 3361 3141
> e-mail: paulojus AT ufpr br
> http://www.leg.ufpr.br/~paulojus
>
> On Sat, 28 Apr 2012, GEMA FERNANDEZ-AVILES CALDERON wrote:
>
>  > Dear Tom:
>  >
>  > I'm sorry if I have not formulate correctly the question.
>  >
>  > I am running this:
>  >
>  > #---------------------------------------------------
>  > library(geoR)
>  > x=read.table("Example.txt", header=TRUE)
>  > class(x)
>  >
>  > x<-as.geodata(obj=x,coords.col = 1:2, data.col = 3)
>  > plot(x)
>  > points(x,col=grey(seq(1,0,l=14)), main = "Regular Grid")
>  > cloud1 <- variog(x, option = "cloud")
>  > bin1 <- variog(x, option = "bin" , tolerance = 0)
>  >
>  > # graphic
>  >
>  > plot(cloud1, main = "classical estimator" )
>  > lines(bin1, type="p", lwd="4")
>  > plot(bin1, lwd=2, main = "Classical estimator", xlim=c(0,150))
>  > #---------------------------------------------------
>  >
>  > But, "bin1" has not contain 14 bins.
>  > How can specify it in geoR? Could you help me?
>  >
>  > Thanks,
>  > Gema
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  > Gema Fern?ndez-Avil?s
>  >
>  > Department of Statistics
>  > Faculty of Law and Social Sciences
>  > University of Castilla-La Mancha at Toledo
>  >
>  > http://www.uclm.es/profesorado/gemafaviles/
>  >
>  >
>  >
>  > -----Mensaje original-----
>  > De: r-sig-geo-bounces at r-project.org en nombre de Tom Gottfried
>  > Enviado el: vie 27/04/2012 12:28
>  > Para: r-sig-geo at r-project.org
>  > Asunto: Re: [R-sig-Geo] geoR -- bins in experimental semivariogram
>  >
>  > Please express in R what you have done
>  > (see http://www.r-project.org/posting-guide.html)
>  >
>  > Am 27.04.2012 12:13, schrieb GEMA FERNANDEZ-AVILES CALDERON:
>  >>
>  >> Dear list:
>  >>
>  >> I have a 5x5 regular grid 100x100. When constructing the
> experimental semivariogram using gerR() I expected to have 14 different
> distances.
>  >> However, I obtained 10 semivariogram points corresponding to 10 bins.
>  >>
>  >> - Which is exactly a bin?
>  >
>  > the lag class (an interval on the real line of distances over which the
>  > semivariances are averaged).
>  >
>  >> - Which is the bin correspondence wiht the 14 initial distances.
>  >
>  > that depends on what you refer to with "14 initial distances".
>  >
>  >> - Why don't the first bin is not exactly 25?
>  >
>  > I suspect because you did not specify it that way (i.e. first lag class
>  > corresponding to [0,25)).
>  >
>  > Tom
>  >
>  >> - The dataset is the following.
>  >>
>  >> Thanks in advance,
>  >> Gema
>  >>
>  >> #########################################3
>  >> x y dat
>  >> 0 0 19.64253569
>  >> 25 0 20.67413804
>  >> 50 0 11.39907369
>  >> 75 0 8.721311665
>  >> 100 0 14.19476285
>  >> 0 25 9.755908087
>  >> 25 25 18.9788189
>  >> 50 25 14.05059221
>  >> 75 25 11.76423327
>  >> 100 25 10.42562093
>  >> 0 50 6.559737009
>  >> 25 50 4.882232635
>  >> 50 50 10.7619423
>  >> 75 50 9.096456345
>  >> 100 50 10.6894209
>  >> 0 75 14.87976528
>  >> 25 75 5.372505287
>  >> 50 75 5.712214162
>  >> 75 75 4.431458459
>  >> 100 75 15.69477576
>  >> 0 100 12.77014999
>  >> 25 100 1.366809445
>  >> 50 100 4.359141225
>  >> 75 100 6.607783644
>  >> 100 100 10.25674201
>  >>
>  >>
>  >>
>  >>
>  >>
>  >>
>  >>
>  >>
>  >>
>  >>
>  >>
>  >>
>  >>
>  >>
>  >>
>  >>
>  >>
>  >>
>  >> Gema Fern?ndez-Avil?s
>  >>
>  >> Department of Statistics
>  >> Faculty of Law and Social Sciences
>  >> University of Castilla-La Mancha at Toledo
>  >>
>  >> http://www.uclm.es/profesorado/gemafaviles/
>  >>
>  >> [[alternative HTML version deleted]]
>  >>
>  >>
>  >>
>  >>
>  >> _______________________________________________
>  >> R-sig-Geo mailing list
>  >> R-sig-Geo at r-project.org
>  >> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>  >
>  > --
>  > Technische Universit?t M?nchen
>  > Department f?r Pflanzenwissenschaften
>  > Lehrstuhl f?r Gr?nlandlehre
>  > Alte Akademie 12
>  > 85350 Freising / Germany
>  > Phone: ++49 (0)8161 715324
>  > Fax: ++49 (0)8161 713243
>  > email: tom.gottfried at wzw.tum.de
>  > http://www.wzw.tum.de/gruenland
>  >
>  > _______________________________________________
>  > R-sig-Geo mailing list
>  > R-sig-Geo at r-project.org
>  > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>  >
>  > [[alternative HTML version deleted]]
>  >
>  >
>

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From ross.dwyer at uq.edu.au  Mon Apr 30 08:53:48 2012
From: ross.dwyer at uq.edu.au (Ross Dwyer)
Date: Mon, 30 Apr 2012 06:53:48 +0000
Subject: [R-sig-Geo] averaging home range contours
In-Reply-To: <CAK5WTcGoufEeDcaJ7E8-Hy8K8Um6We+1c8k21PnBZ3e4Jacp5Q@mail.gmail.com>
References: <CAK5WTcG18LrQVm0HaLGTn3_3dwgqx_8Mdd_1AKths8an27feoA@mail.gmail.com>
	<84B4751733167E41A8156E63A69C1C3A01E063@uqexmdb3.soe.uq.edu.au>
	<CAK5WTcGoufEeDcaJ7E8-Hy8K8Um6We+1c8k21PnBZ3e4Jacp5Q@mail.gmail.com>
Message-ID: <84B4751733167E41A8156E63A69C1C3A01ED26@uqexmdb3.soe.uq.edu.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120430/ab6507e1/attachment.pl>

From Gema.FAviles at uclm.es  Mon Apr 30 11:45:45 2012
From: Gema.FAviles at uclm.es (GEMA FERNANDEZ-AVILES CALDERON)
Date: Mon, 30 Apr 2012 11:45:45 +0200
Subject: [R-sig-Geo] geoR -- bins in experimental semivariogram
References: <BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6A7@EVSAB01.uclm.es><4F9A74D3.3080901@tum.de><BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6AD@EVSAB01.uclm.es><alpine.DEB.2.00.1204281156450.15123@macalan.c3sl.ufpr.br><BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6B1@EVSAB01.uclm.es>
	<4F9E2778.8050202@tum.de>
Message-ID: <BFE1525242E7DA4B9CBBDE2CF4DDBBFB0103A6B4@EVSAB01.uclm.es>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120430/774ebc44/attachment.pl>

From freddy.gamma at gmail.com  Mon Apr 30 11:57:59 2012
From: freddy.gamma at gmail.com (Freddy Gamma)
Date: Mon, 30 Apr 2012 11:57:59 +0200
Subject: [R-sig-Geo] trouble installing rgdal
Message-ID: <CAJzXPMKhmGFwFVCutJOLU48g1Cimmvntjia_PAGJpqUAU8XhhQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120430/77d5560a/attachment.pl>

From c.sonderblohm at gmail.com  Mon Apr 30 17:24:44 2012
From: c.sonderblohm at gmail.com (carlos pombo sonderblohm)
Date: Mon, 30 Apr 2012 16:24:44 +0100
Subject: [R-sig-Geo] Welcome to the "R-sig-Geo" mailing list (Digest
	mode)
In-Reply-To: <mailman.0.1335798846.25347.r-sig-geo@r-project.org>
References: <mailman.0.1335798846.25347.r-sig-geo@r-project.org>
Message-ID: <CAAvcZ+tAwtYaQM8-K=5woFEb6+=QrDAd65wU5y2Wm3AxK88csw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120430/3867aa08/attachment.pl>

From janverbesselt at gmail.com  Mon Apr 30 17:44:05 2012
From: janverbesselt at gmail.com (Jan Verbesselt)
Date: Mon, 30 Apr 2012 17:44:05 +0200
Subject: [R-sig-Geo] Welcome to the "R-sig-Geo" mailing list (Digest
	mode)
In-Reply-To: <CAAvcZ+tAwtYaQM8-K=5woFEb6+=QrDAd65wU5y2Wm3AxK88csw@mail.gmail.com>
References: <mailman.0.1335798846.25347.r-sig-geo@r-project.org>
	<CAAvcZ+tAwtYaQM8-K=5woFEb6+=QrDAd65wU5y2Wm3AxK88csw@mail.gmail.com>
Message-ID: <8D43BC70-93D5-45EE-AA67-74DD16E629A9@gmail.com>

Hi Carlos,

Have a look at the 'modis' package to download MODIS data. A compiled version for linux is available.
https://r-forge.r-project.org/R/?group_id=1252

for windows package please contact Matteo.

Best,
Jan


On 30/04/2012, at 5:24 PM, carlos pombo sonderblohm wrote:

> hello everybody,
> Im trying to do the replica of the exercise:   Download and resampling of
> MODIS images
> (
> http://spatial-analyst.net/wiki/index.php?title=Download_and_resampling_of_MODIS_images
> )
> 
> in the first step, when im trying to get the list of directories
> 
>> items <- strsplit(getURL(MOD13A3), "\n")[[1]]
> 
> Error in curlPerform(curl = curl, .opts = opts, .encoding = .encoding) :
>  Got a 500 ftp-server response when 220 was expected
> 
> 
> some help on this error?
> 
> I got more than 220 ftp? what does means that?
> 
> thank you very much
> 
> Carlos
> 
> 
> 
> 
> 
> 
> 
> 2012/4/30 <r-sig-geo-request at r-project.org>
> 
>> Welcome to the R-sig-Geo at r-project.org mailing list!
>> 
>> To post to this list, send your message to:
>> 
>> r-sig-geo at r-project.org
>> 
>> General information about the mailing list is at:
>> 
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
>> If you ever want to unsubscribe or change your options (eg, switch to
>> or from digest mode, change your password, etc.), visit your
>> subscription page at:
>> 
>> https://stat.ethz.ch/mailman/options/r-sig-geo/c.sonderblohm%40gmail.com
>> 
>> 
>> You can also make such adjustments via email by sending a message to:
>> 
>> R-sig-Geo-request at r-project.org
>> 
>> with the word `help' in the subject or body (don't include the
>> quotes), and you will get back a message with instructions.
>> 
>> You must know your password to change your options (including changing
>> the password, itself) or to unsubscribe without confirmation.  It is:
>> 
>> 07760776
>> 
>> Normally, Mailman will remind you of your r-project.org mailing list
>> passwords once every month, although you can disable this if you
>> prefer.  This reminder will also include instructions on how to
>> unsubscribe or change your account options.  There is also a button on
>> your options page that will email your current password to you.
>> 
> 
> 
> 
> -- 
> Carlos A. Pombo Sonderblohm
> PhD Student on Marine Science (Fisheries)
> Faculdade de Ci?ncias e Tecnolog?a
> Universidade do Algarve,
> Campus de Gambelas
> 8005-139 Faro
> Portugal
> Tef. 289 800 905 ext. 7605
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From renaud.lancelot at cirad.fr  Mon Apr 30 18:05:41 2012
From: renaud.lancelot at cirad.fr (lancelot)
Date: Mon, 30 Apr 2012 18:05:41 +0200
Subject: [R-sig-Geo] Welcome to the "R-sig-Geo" mailing list (Digest
	mode)
In-Reply-To: <8D43BC70-93D5-45EE-AA67-74DD16E629A9@gmail.com>
References: <mailman.0.1335798846.25347.r-sig-geo@r-project.org>
	<CAAvcZ+tAwtYaQM8-K=5woFEb6+=QrDAd65wU5y2Wm3AxK88csw@mail.gmail.com>
	<8D43BC70-93D5-45EE-AA67-74DD16E629A9@gmail.com>
Message-ID: <4F9EB855.5090309@cirad.fr>

Unfortunately it does not seem to be available at the moment, either for 
Linux or Windows.

Renaud

Le 30/04/2012 17:44, Jan Verbesselt a ?crit :
> Hi Carlos,
>
> Have a look at the 'modis' package to download MODIS data. A compiled version for linux is available.
> https://r-forge.r-project.org/R/?group_id=1252
>
> for windows package please contact Matteo.
>
> Best,
> Jan
>
>
> On 30/04/2012, at 5:24 PM, carlos pombo sonderblohm wrote:
>
>> hello everybody,
>> Im trying to do the replica of the exercise:   Download and resampling of
>> MODIS images
>> (
>> http://spatial-analyst.net/wiki/index.php?title=Download_and_resampling_of_MODIS_images
>> )
>>
>> in the first step, when im trying to get the list of directories
>>
>>> items<- strsplit(getURL(MOD13A3), "\n")[[1]]
>>
>> Error in curlPerform(curl = curl, .opts = opts, .encoding = .encoding) :
>>   Got a 500 ftp-server response when 220 was expected
>>
>>
>> some help on this error?
>>
>> I got more than 220 ftp? what does means that?
>>
>> thank you very much
>>
>> Carlos
>>
>>
>>
>>
>>
>>
>>
>> 2012/4/30<r-sig-geo-request at r-project.org>
>>
>>> Welcome to the R-sig-Geo at r-project.org mailing list!
>>>
>>> To post to this list, send your message to:
>>>
>>> r-sig-geo at r-project.org
>>>
>>> General information about the mailing list is at:
>>>
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>> If you ever want to unsubscribe or change your options (eg, switch to
>>> or from digest mode, change your password, etc.), visit your
>>> subscription page at:
>>>
>>> https://stat.ethz.ch/mailman/options/r-sig-geo/c.sonderblohm%40gmail.com
>>>
>>>
>>> You can also make such adjustments via email by sending a message to:
>>>
>>> R-sig-Geo-request at r-project.org
>>>
>>> with the word `help' in the subject or body (don't include the
>>> quotes), and you will get back a message with instructions.
>>>
>>> You must know your password to change your options (including changing
>>> the password, itself) or to unsubscribe without confirmation.  It is:
>>>
>>> 07760776
>>>
>>> Normally, Mailman will remind you of your r-project.org mailing list
>>> passwords once every month, although you can disable this if you
>>> prefer.  This reminder will also include instructions on how to
>>> unsubscribe or change your account options.  There is also a button on
>>> your options page that will email your current password to you.
>>>
>>
>>
>>
>> --
>> Carlos A. Pombo Sonderblohm
>> PhD Student on Marine Science (Fisheries)
>> Faculdade de Ci?ncias e Tecnolog?a
>> Universidade do Algarve,
>> Campus de Gambelas
>> 8005-139 Faro
>> Portugal
>> Tef. 289 800 905 ext. 7605
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Renaud Lancelot
EDENext Project, coordinator: http://www.edenext.eu/

CIRAD, UMR15, Campus International de Baillarguet TA A-DIR / B
F34398 Montpellier

Tel.  +33 4 67 59 37 17  -  Fax  +33 4 67 59 37 98
Secr. +33 4 67 59 37 37  - Cell. +33 6 77 52 08 69


From edzer.pebesma at uni-muenster.de  Mon Apr 30 18:46:43 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 30 Apr 2012 18:46:43 +0200
Subject: [R-sig-Geo] MODIS imagery (was: Re: Welcome to the "R-sig-Geo"
 mailing list (Digest mode))
In-Reply-To: <4F9EB855.5090309@cirad.fr>
References: <mailman.0.1335798846.25347.r-sig-geo@r-project.org>
	<CAAvcZ+tAwtYaQM8-K=5woFEb6+=QrDAd65wU5y2Wm3AxK88csw@mail.gmail.com>
	<8D43BC70-93D5-45EE-AA67-74DD16E629A9@gmail.com>
	<4F9EB855.5090309@cirad.fr>
Message-ID: <4F9EC1F3.3030302@uni-muenster.de>

Please use an informative subject line.

The linux version builds well from source:

svn checkout svn://scm.r-forge.r-project.org/svnroot/modis/
R CMD build pkg/MODIS
R CMD INSTALL MODIS_0.3-11.tar.gz

On 04/30/2012 06:05 PM, lancelot wrote:
> Unfortunately it does not seem to be available at the moment, either for
> Linux or Windows.
> 
> Renaud
> 
> Le 30/04/2012 17:44, Jan Verbesselt a ?crit :
>> Hi Carlos,
>>
>> Have a look at the 'modis' package to download MODIS data. A compiled
>> version for linux is available.
>> https://r-forge.r-project.org/R/?group_id=1252
>>
>> for windows package please contact Matteo.
>>
>> Best,
>> Jan
>>
>>
>> On 30/04/2012, at 5:24 PM, carlos pombo sonderblohm wrote:
>>
>>> hello everybody,
>>> Im trying to do the replica of the exercise:   Download and
>>> resampling of
>>> MODIS images
>>> (
>>> http://spatial-analyst.net/wiki/index.php?title=Download_and_resampling_of_MODIS_images
>>>
>>> )
>>>
>>> in the first step, when im trying to get the list of directories
>>>
>>>> items<- strsplit(getURL(MOD13A3), "\n")[[1]]
>>>
>>> Error in curlPerform(curl = curl, .opts = opts, .encoding = .encoding) :
>>>   Got a 500 ftp-server response when 220 was expected
>>>
>>>
>>> some help on this error?
>>>
>>> I got more than 220 ftp? what does means that?
>>>
>>> thank you very much
>>>
>>> Carlos
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> 2012/4/30<r-sig-geo-request at r-project.org>
>>>
>>>> Welcome to the R-sig-Geo at r-project.org mailing list!
>>>>
>>>> To post to this list, send your message to:
>>>>
>>>> r-sig-geo at r-project.org
>>>>
>>>> General information about the mailing list is at:
>>>>
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>> If you ever want to unsubscribe or change your options (eg, switch to
>>>> or from digest mode, change your password, etc.), visit your
>>>> subscription page at:
>>>>
>>>> https://stat.ethz.ch/mailman/options/r-sig-geo/c.sonderblohm%40gmail.com
>>>>
>>>>
>>>>
>>>> You can also make such adjustments via email by sending a message to:
>>>>
>>>> R-sig-Geo-request at r-project.org
>>>>
>>>> with the word `help' in the subject or body (don't include the
>>>> quotes), and you will get back a message with instructions.
>>>>
>>>> You must know your password to change your options (including changing
>>>> the password, itself) or to unsubscribe without confirmation.  It is:
>>>>
>>>> 07760776
>>>>
>>>> Normally, Mailman will remind you of your r-project.org mailing list
>>>> passwords once every month, although you can disable this if you
>>>> prefer.  This reminder will also include instructions on how to
>>>> unsubscribe or change your account options.  There is also a button on
>>>> your options page that will email your current password to you.
>>>>
>>>
>>>
>>>
>>> -- 
>>> Carlos A. Pombo Sonderblohm
>>> PhD Student on Marine Science (Fisheries)
>>> Faculdade de Ci?ncias e Tecnolog?a
>>> Universidade do Algarve,
>>> Campus de Gambelas
>>> 8005-139 Faro
>>> Portugal
>>> Tef. 289 800 905 ext. 7605
>>>
>>>     [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From hengl at spatial-analyst.net  Mon Apr 30 21:06:27 2012
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Mon, 30 Apr 2012 21:06:27 +0200
Subject: [R-sig-Geo] Fwd: Fwd: Re: plotKML on linux
In-Reply-To: <4F9EE282.4030806@wur.nl>
References: <4F9EE282.4030806@wur.nl>
Message-ID: <4F9EE2B3.5090307@spatial-analyst.net>


On 30/04/2012 03:45, Daniel Arribas-Bel wrote:
> Dear R-sig-geo list,
>
> I have succesfully installed 'plotKML' 0.1-6 under Ubuntu 11.10-32bit
> running R 2.15. I run into an error when I try to replicate one of the
> examples in the documentation, particularly that of kml-methods
> (http://plotkml.r-forge.r-project.org/kml-method.html). The first one
> runs fine but when I try to plot a SpatialPixelsDataFrame:
>
>     ## End(Not run)
>     # Plotting a SpatialPixelsDataFrame or a Raster* object
>     data(eberg_grid)
>     coordinates(eberg_grid)<- ~x+y
>     gridded(eberg_grid)<- TRUE
>     proj4string(eberg_grid)<- CRS("+init=epsg:31467")
>     ## Not run:
>     kml(eberg_grid, colour = DEM, file ="eberg_grid-0.kml")
>
>
>
> I run into the following error:
>
>     Error in paths(show.paths = TRUE) :
>     could not find function "shortPathName"
>
>
> In fact, simply typing 'paths()' returns the same error. A bit of
> googling seems to reveal the method 'shortPathName' appears to only
> exist in the Win version of R, but not for linux/Mac.
>
> Is plotKML supposed to work only under Windows? If not, am I mising
> something? Is there any workaround?

plotKML is suppose to work on all operating systems. I do not have any
linux system at the moment at my disposal but only a Windows OS. Our
second developer (Pierre) only works on the Linux, so he should be able
to help you with this problem.

I discovered that the PNG file needs to be fixed for transparency
because there is a bug in Google Earth that does not allow transparency
of PNGs:
http://groups.google.com/group/earth-free/browse_thread/thread/1cd6bc29a2b6eb76/62724be63547fab7
The best I could figure out is to add transparency using ImageMagick.
See the source code at:

https://r-forge.r-project.org/scm/viewvc.php/pkg/R/layer.Raster.R?view=markup&root=plotkml

I think if your installation of the animation package is correct (if it
detects ImageMagick correctly) then your plotKML should not need to run
the 'paths' function.

I will try to test the scripts on Linux as soon as I come back to my
office next week.

thanks for your feedback!

T. Hengl
http://www.vcard.wur.nl/Views/Profile/View.aspx?id=37263

>
> Any comment/suggestion is mostly welcome. Thanks very much in advance,
>
> ]d[
>
>
> --
> ============================================================
> Daniel Arribas-Bel, PhD.
> Url: darribas.org <http://darribas.org/>
> Mail: darribas at asu.edu <mailto:darribas at asu.edu>
>
> GeoDa Center for Geospatial Analysis and Computation
> (geodacenter.asu.edu <http://geodacenter.asu.edu/>)
> Arizona State University (USA)
> ============================================================
>


