From rob00x @end|ng |rom gm@||@com  Mon Sep  6 19:13:16 2021
From: rob00x @end|ng |rom gm@||@com (Robin Lovelace)
Date: Mon, 6 Sep 2021 18:13:16 +0100
Subject: [R-sig-Geo] Feedback on priorities for a 2nd edition of
 Geocomputation with R
Message-ID: <CAF16KkVzAN8CpXhX5yCj27qwJhSZfNvaT2xS1UAf_KubPw7seA@mail.gmail.com>

Dear R-SIG-GEO members,

Myself, Jakub Nowosad and Jannes Muenchow have plans to update the open
source book Geocomputation with R to keep up-to-date with the evolution of
R packages for working with geographic data (notably sf 1.0.0+ and terra).

To help guide our work on this over the next few months (we are hoping to
publish the book in CRC Press at some point in 2022) we would appreciate
feedback from anyone who has used the book. What are aspects we should
improve? What should we cover in more detail?

If you would like to shape the direction of the book into the future,
please provide feedback on this form, that should only take around 5
minutes to complete: https://forms.gle/nq9RmbxJyZXQgc948

There is a longer discussion of ideas for future topics and priorities here
where we welcome further comments, suggestions and ideas:
https://github.com/Robinlovelace/geocompr/issues/12#issuecomment-609026237

Many thanks,

Robin

	[[alternative HTML version deleted]]


From j|n||68 @end|ng |rom gm@||@com  Tue Sep  7 01:46:34 2021
From: j|n||68 @end|ng |rom gm@||@com (Jin Li)
Date: Tue, 7 Sep 2021 09:46:34 +1000
Subject: [R-sig-Geo] spm package is available on CRAN again
Message-ID: <CAGu_3ZKf=6txLZ5VQNCJzKPTuJw7Fev1XDVuG9pbyVx0p3UMpA@mail.gmail.com>

Dear spm users and all,

I am glad to inform you that the spm package is available on CRAN again. It
is an updated version with a few bugs fixed. Please note that some
functions in the package are not only for spatial predictive modelling but
also for general predictive modeling.

Please feel free to contact me if you have any questions regarding the spm
package.

Best regards,
-- 
Jin
------------------------------------------
Jin Li, PhD
Founder, Data2action, Australia
https://www.researchgate.net/profile/Jin_Li32
https://scholar.google.com/citations?user=Jeot53EAAAAJ&hl=en

	[[alternative HTML version deleted]]


From j|n||68 @end|ng |rom gm@||@com  Wed Sep  8 00:58:17 2021
From: j|n||68 @end|ng |rom gm@||@com (Jin Li)
Date: Wed, 8 Sep 2021 08:58:17 +1000
Subject: [R-sig-Geo] spm package is available on CRAN again
Message-ID: <CAGu_3ZKcmbK0+qczL-TNXwuZ9v3vmO9S6Z7bMgLzPdifNd6ynQ@mail.gmail.com>

Dear spm users and all,

I am glad to inform you that the spm package is available on CRAN again. It
is an updated version with a few bugs fixed.

Please feel free to contact me if you have any questions regarding the spm
package.

Best regards,

-- 
Jin
------------------------------------------
Jin Li, PhD
Founder, Data2action, Australia
https://www.researchgate.net/profile/Jin_Li32
https://scholar.google.com/citations?user=Jeot53EAAAAJ&hl=en

	[[alternative HTML version deleted]]


From j|n||68 @end|ng |rom gm@||@com  Wed Sep  8 06:46:58 2021
From: j|n||68 @end|ng |rom gm@||@com (Jin Li)
Date: Wed, 8 Sep 2021 14:46:58 +1000
Subject: [R-sig-Geo] Spm package is updated and available on CRAN again
Message-ID: <CAGu_3ZK4v3=NZBhfErJUecoB_Nx11NjtkQ58TN_giJ7U0DWC=Q@mail.gmail.com>

Dear spm users and all,

I am glad to inform you that the spm package is available on CRAN again. It
is an updated version with a few bugs fixed. Please note that some
functions in the package are not only for spatial predictive modelling but
also for predictive modeling in general.

Please feel free to contact me if you have any questions regarding the spm
package.

Best regards,

-- 
Jin

	[[alternative HTML version deleted]]


From Roger@B|v@nd @end|ng |rom nhh@no  Wed Sep  8 09:06:04 2021
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Wed, 8 Sep 2021 09:06:04 +0200 (CEST)
Subject: [R-sig-Geo] Retirement of rgdal, rgeos and maptools
Message-ID: <4015c23-a7c7-9187-cfd2-d34f7615a20@reclus2.nhh.no>

New versions of rgdal, rgeos and maptools have just been published on 
CRAN. Their startup messages on attachment now repeat Edzer Pebesma's 
announcement in his useR! 2021 keynote that their planned retirement will 
occur at the latest at the end of 2023. See 
https://www.youtube.com/watch?v=cK08bxUJn5A&list=PL4IzsxWztPdmHoJwIVa4um44w2GMjctmP&index=6, 
about 23 minutes in.

I maintain these packages, in addition to a number of others, but now much 
of their functionality is available in sf, terra and vapour (among 
others), which link directly to one or more of the external libraries 
GDAL, PROJ and GEOS. As can be seen from my signature, I am myself 
retired, but will continue to contribute to implementing transitions.

The sp package will receive the coercion methods for spatstat now in 
maptools, and possibly other functions. sp will be modified to use sf 
rather than rgdal for coordinate reference systems, and coercion between 
sf and sp vector objects is reliable. Work will continue on instantiating 
sp raster objects from stars and terra (and other) rasters.

The maintainers of packages using rgdal, rgeos and maptools should heed 
the gentle suggestion in their startup messages. Deprecation will follow 
during 2022. Securing reproducibility will be harder as the APIs of PROJ, 
GDAL or GEOS shift, making it impossible to install rgdal or rgeos against 
future versions of these libraries. However, they are all open source, so 
reproduction will involve installing legacy external libraries from 
source, followed by R packages from source.

I hope that this doesn't spoil your day, but planning transition is at 
least less painful than an unmanaged break of service.

Roger

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From eg@mp@du @end|ng |rom gm@||@com  Thu Sep  9 18:51:45 2021
From: eg@mp@du @end|ng |rom gm@||@com (Enoch Gyamfi Ampadu)
Date: Thu, 9 Sep 2021 16:51:45 +0000
Subject: [R-sig-Geo] Binding columns of pixel values
Message-ID: <CAC4+n+y7dYAvSWgOojeSHz5izcUvrS-CW=O1FJGA_uYSNv39Fw@mail.gmail.com>

Dear List,

I hope you are all well. Please I did an extraction of pixel values for 6
land cover classes using *extract()*. Now I want to bind them into a
single *data
frame* but it is not working due to different lengths of columns. I have
tried some *cbind* and at some point *rbind* but have still not been
successful. I will be glad if anyone could assist me with an approach to
use to bind the columns.

Best regards,

Enoch.

-- 
*Enoch Gyamfi - Ampadu, PhD*

*FIDEP Foundation*

*Spiritan University, *

*S05, Ejisu, AR, Ghana*

*Phone: +233 264308887 / +233 593630608*

*email: egampadu at gmail.com <egampadu at gmail.com>*


*skype: enoch.ampadu*
*The highest evidence of nobility is self-control*.

*A simple act of kindness creates an endless ripple*.

	[[alternative HTML version deleted]]


From btupper @end|ng |rom b|ge|ow@org  Thu Sep  9 19:57:19 2021
From: btupper @end|ng |rom b|ge|ow@org (Ben Tupper)
Date: Thu, 9 Sep 2021 13:57:19 -0400
Subject: [R-sig-Geo] Binding columns of pixel values
In-Reply-To: <CAC4+n+y7dYAvSWgOojeSHz5izcUvrS-CW=O1FJGA_uYSNv39Fw@mail.gmail.com>
References: <CAC4+n+y7dYAvSWgOojeSHz5izcUvrS-CW=O1FJGA_uYSNv39Fw@mail.gmail.com>
Message-ID: <CALrbzg3D5Oyi77+O9FBvEBRhenw9cddzpFSOxDcbSTnbcoRtEw@mail.gmail.com>

Hi,

In general you won't be happy with column (or row) binding if you are
starting out with vectors of varying lengths.  That's cbind and rbind
are what I call rectangle-centric.  They want to produce rectangular
data, like matrices and data.frames.  How do they make a rectangle
from 6 vectors of varying lengths?

You don't say but I suspect that you are using either the raster or
terra packages.  Are you extracting different points from each of the
six layers?  If that is the case you could make a single long table of
the extracted values...

eA <- data.frame(name = "A", value = extract(rasterA, xyA)
eB <- data.frame(name = "B", value = extract(rasterB, xyB)
 ...

r <- do.call(rbind, list(eA, eB, ...))


I'm not sure if this is valuable to you or not, but below is an
example of a multilayer SpatRaster.  It won't work if your 6 raster
layers have different sizes and extents.  A set of 3 points are
extracted (one row per point) from the three layers.

f <- system.file("ex/meuse.tif", package="terra")
r <- rast(f)
r <- c(r, r*10, r*100)
names(r) <- LETTERS[1:3]

xy <- cbind(179000, 330000)
xy <- rbind(xy-100, xy, xy+1000)
extract(r, xy)
#    A    B     C
#1 378 3780 37800
#2 251 2510 25100
#3 208 2080 20800

Ben


On Thu, Sep 9, 2021 at 12:52 PM Enoch Gyamfi Ampadu <egampadu at gmail.com> wrote:
>
> Dear List,
>
> I hope you are all well. Please I did an extraction of pixel values for 6
> land cover classes using *extract()*. Now I want to bind them into a
> single *data
> frame* but it is not working due to different lengths of columns. I have
> tried some *cbind* and at some point *rbind* but have still not been
> successful. I will be glad if anyone could assist me with an approach to
> use to bind the columns.
>
> Best regards,
>
> Enoch.
>
> --
> *Enoch Gyamfi - Ampadu, PhD*
>
> *FIDEP Foundation*
>
> *Spiritan University, *
>
> *S05, Ejisu, AR, Ghana*
>
> *Phone: +233 264308887 / +233 593630608*
>
> *email: egampadu at gmail.com <egampadu at gmail.com>*
>
>
> *skype: enoch.ampadu*
> *The highest evidence of nobility is self-control*.
>
> *A simple act of kindness creates an endless ripple*.
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Ben Tupper (he/him)
Bigelow Laboratory for Ocean Science
East Boothbay, Maine
http://www.bigelow.org/
https://eco.bigelow.org


From mucuqu| @end|ng |rom gm@||@com  Fri Sep 10 12:20:13 2021
From: mucuqu| @end|ng |rom gm@||@com (Anna Mujal Colilles)
Date: Fri, 10 Sep 2021 11:20:13 +0100
Subject: [R-sig-Geo] Fwd: GDAL Error 1: PROJ: proj_create_from_database:
 cannot build geodeticCRS 4326
In-Reply-To: <CAMP20RoLDfX7rhZg0YRaBgv=YY1wfNYDkBOKwDjeAKxChXVg9w@mail.gmail.com>
References: <CAMP20RoLDfX7rhZg0YRaBgv=YY1wfNYDkBOKwDjeAKxChXVg9w@mail.gmail.com>
Message-ID: <CAMP20RoMCn2ojTFkgzx_nO1x3VgwxR6G1=fsg0msyVvCuFVOvA@mail.gmail.com>

Hi,

I am a new R user trying to transform lat-lon data to utm. I've been doing
so in two different ways and both give me the same error. My machine is a
Linux Ubuntu 18.04 system.

The first way I wanted to transform them was:
sp <-
SpatialPoints(df[,c("longitude","latitude")],proj4string=CRS("+init=epsg:4326
+proj=longlat
+ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0 "))
sp2<-spTransform(sp, CRS("+proj=utm +zone=33 +datum=WGS84 +units=m +no_defs
+ellps=WGS84 +towgs84=0,0,0"))

the second option was
sf_sample <- sf::st_as_sf(coord_sample, coords = c("longitude",
"latitude"), crs = 4326)

However, I keep having the same problem over and over again related to the
crs init 4326

Warning message:
In CPL_crs_from_input(x) :
  GDAL Error 1: PROJ: proj_create_from_database: cannot build geodeticCRS
4326: SQLite error on SELECT name, ellipsoid_auth_name, ellipsoid_code,
prime_meridian_auth_name, prime_meridian_code, area_of_use_auth_name,
area_of_use_code, publication_date, deprecated FROM geodetic_datum WHERE
auth_name = ? AND code = ?: no such column: publication_date

can anyone help me please?

Thank you,

Anna

	[[alternative HTML version deleted]]


From m@d|@z| @end|ng |rom gm@||@com  Fri Sep 10 12:56:12 2021
From: m@d|@z| @end|ng |rom gm@||@com (Andres Diaz Loaiza)
Date: Fri, 10 Sep 2021 12:56:12 +0200
Subject: [R-sig-Geo] Fwd: GDAL Error 1: PROJ: proj_create_from_database:
 cannot build geodeticCRS 4326
In-Reply-To: <CAMP20RoMCn2ojTFkgzx_nO1x3VgwxR6G1=fsg0msyVvCuFVOvA@mail.gmail.com>
References: <CAMP20RoLDfX7rhZg0YRaBgv=YY1wfNYDkBOKwDjeAKxChXVg9w@mail.gmail.com>
 <CAMP20RoMCn2ojTFkgzx_nO1x3VgwxR6G1=fsg0msyVvCuFVOvA@mail.gmail.com>
Message-ID: <CAMXOh=1iK8Gep-j+J1Sha4sCcCOLB2erw0KtgLyfMD==HwqU_g@mail.gmail.com>

Hi Anna,

Indeed, I bet it is a problem with the CRS definition. Have you tried to
follow this example:
https://www.rdocumentation.org/packages/rgdal/versions/1.5-23/topics/spTransform-methods
.

If you post a replicable example perhaps (the data) I can have a look.

Cheers,

Andres

El vie, 10 sept 2021 a las 12:20, Anna Mujal Colilles (<mucuqui at gmail.com>)
escribi?:

> Hi,
>
> I am a new R user trying to transform lat-lon data to utm. I've been doing
> so in two different ways and both give me the same error. My machine is a
> Linux Ubuntu 18.04 system.
>
> The first way I wanted to transform them was:
> sp <-
>
> SpatialPoints(df[,c("longitude","latitude")],proj4string=CRS("+init=epsg:4326
> +proj=longlat
> +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0 "))
> sp2<-spTransform(sp, CRS("+proj=utm +zone=33 +datum=WGS84 +units=m +no_defs
> +ellps=WGS84 +towgs84=0,0,0"))
>
> the second option was
> sf_sample <- sf::st_as_sf(coord_sample, coords = c("longitude",
> "latitude"), crs = 4326)
>
> However, I keep having the same problem over and over again related to the
> crs init 4326
>
> Warning message:
> In CPL_crs_from_input(x) :
>   GDAL Error 1: PROJ: proj_create_from_database: cannot build geodeticCRS
> 4326: SQLite error on SELECT name, ellipsoid_auth_name, ellipsoid_code,
> prime_meridian_auth_name, prime_meridian_code, area_of_use_auth_name,
> area_of_use_code, publication_date, deprecated FROM geodetic_datum WHERE
> auth_name = ? AND code = ?: no such column: publication_date
>
> can anyone help me please?
>
> Thank you,
>
> Anna
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


-- 
Andr?s D.

	[[alternative HTML version deleted]]


From edzer@pebe@m@ @end|ng |rom un|-muen@ter@de  Fri Sep 10 13:24:33 2021
From: edzer@pebe@m@ @end|ng |rom un|-muen@ter@de (Edzer Pebesma)
Date: Fri, 10 Sep 2021 13:24:33 +0200
Subject: [R-sig-Geo] Fwd: GDAL Error 1: PROJ: proj_create_from_database:
 cannot build geodeticCRS 4326
In-Reply-To: <CAMP20RoMCn2ojTFkgzx_nO1x3VgwxR6G1=fsg0msyVvCuFVOvA@mail.gmail.com>
References: <CAMP20RoLDfX7rhZg0YRaBgv=YY1wfNYDkBOKwDjeAKxChXVg9w@mail.gmail.com>
 <CAMP20RoMCn2ojTFkgzx_nO1x3VgwxR6G1=fsg0msyVvCuFVOvA@mail.gmail.com>
Message-ID: <12735c7a-801d-19c2-2b46-b3d83ddc0c24@uni-muenster.de>

I would say this indicates a broken installation of PROJ on your system, 
or you have more than one instance (and different versions) of PROJ 
installed.

On 10/09/2021 12:20, Anna Mujal Colilles wrote:
> Hi,
> 
> I am a new R user trying to transform lat-lon data to utm. I've been doing
> so in two different ways and both give me the same error. My machine is a
> Linux Ubuntu 18.04 system.
> 
> The first way I wanted to transform them was:
> sp <-
> SpatialPoints(df[,c("longitude","latitude")],proj4string=CRS("+init=epsg:4326
> +proj=longlat
> +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0 "))
> sp2<-spTransform(sp, CRS("+proj=utm +zone=33 +datum=WGS84 +units=m +no_defs
> +ellps=WGS84 +towgs84=0,0,0"))
> 
> the second option was
> sf_sample <- sf::st_as_sf(coord_sample, coords = c("longitude",
> "latitude"), crs = 4326)
> 
> However, I keep having the same problem over and over again related to the
> crs init 4326
> 
> Warning message:
> In CPL_crs_from_input(x) :
>    GDAL Error 1: PROJ: proj_create_from_database: cannot build geodeticCRS
> 4326: SQLite error on SELECT name, ellipsoid_auth_name, ellipsoid_code,
> prime_meridian_auth_name, prime_meridian_code, area_of_use_auth_name,
> area_of_use_code, publication_date, deprecated FROM geodetic_datum WHERE
> auth_name = ? AND code = ?: no such column: publication_date
> 
> can anyone help me please?
> 
> Thank you,
> 
> Anna
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From Roger@B|v@nd @end|ng |rom nhh@no  Fri Sep 10 15:35:26 2021
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Fri, 10 Sep 2021 15:35:26 +0200 (CEST)
Subject: [R-sig-Geo] Fwd: GDAL Error 1: PROJ: proj_create_from_database:
 cannot build geodeticCRS 4326
In-Reply-To: <12735c7a-801d-19c2-2b46-b3d83ddc0c24@uni-muenster.de>
References: <CAMP20RoLDfX7rhZg0YRaBgv=YY1wfNYDkBOKwDjeAKxChXVg9w@mail.gmail.com>
 <CAMP20RoMCn2ojTFkgzx_nO1x3VgwxR6G1=fsg0msyVvCuFVOvA@mail.gmail.com>
 <12735c7a-801d-19c2-2b46-b3d83ddc0c24@uni-muenster.de>
Message-ID: <6f60ecc-2481-068-5344-a5289caf3d3b@reclus2.nhh.no>

On Fri, 10 Sep 2021, Edzer Pebesma wrote:

> I would say this indicates a broken installation of PROJ on your system, or 
> you have more than one instance (and different versions) of PROJ installed.

I agree. The PROJ version used to install rgdal is not the same as the 
version with which proj.db was shipped, leading to the SQL error. Refer to 
https://github.com/r-spatial/sf/#multiple-gdal-geos-andor-proj-versions-on-your-system 
for ideas on disambiguating.

Roger

>
> On 10/09/2021 12:20, Anna Mujal Colilles wrote:
>>  Hi,
>>
>>  I am a new R user trying to transform lat-lon data to utm. I've been doing
>>  so in two different ways and both give me the same error. My machine is a
>>  Linux Ubuntu 18.04 system.
>>
>>  The first way I wanted to transform them was:
>>  sp <-
>>  SpatialPoints(df[,c("longitude","latitude")],proj4string=CRS("+init=epsg:4326
>>  +proj=longlat
>>  +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0 "))
>>  sp2<-spTransform(sp, CRS("+proj=utm +zone=33 +datum=WGS84 +units=m
>>  +no_defs
>>  +ellps=WGS84 +towgs84=0,0,0"))
>>
>>  the second option was
>>  sf_sample <- sf::st_as_sf(coord_sample, coords = c("longitude",
>>  "latitude"), crs = 4326)
>>
>>  However, I keep having the same problem over and over again related to the
>>  crs init 4326
>>
>>  Warning message:
>>  In CPL_crs_from_input(x) :
>>     GDAL Error 1: PROJ: proj_create_from_database: cannot build geodeticCRS
>>  4326: SQLite error on SELECT name, ellipsoid_auth_name, ellipsoid_code,
>>  prime_meridian_auth_name, prime_meridian_code, area_of_use_auth_name,
>>  area_of_use_code, publication_date, deprecated FROM geodetic_datum WHERE
>>  auth_name = ? AND code = ?: no such column: publication_date
>>
>>  can anyone help me please?
>>
>>  Thank you,
>>
>>  Anna
>>
>>   [[alternative HTML version deleted]]
>>
>>  _______________________________________________
>>  R-sig-Geo mailing list
>>  R-sig-Geo at r-project.org
>>  https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
>
>

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From Roger@B|v@nd @end|ng |rom nhh@no  Tue Sep 14 14:30:45 2021
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Tue, 14 Sep 2021 14:30:45 +0200 (CEST)
Subject: [R-sig-Geo] PhD course ECS530, Bergen, 15-20 November
Message-ID: <df447788-2f47-b987-442f-25ee46c17e7a@reclus2.nhh.no>

A PhD-level course in spatial data analysis (ECS530, Auditorium C) will be
held 3-8 December 2018 in Bergen, Norway (hybrid format):

https://www.nhh.no/en/courses/analysing-spatial-data/

External participants should apply using this form:

https://www.nhh.no/en/study-programmes/phd-programme-at-nhh/phd-courses/become-a-visiting-student-at-a-phd-course-at-nhh/

For further details see the course page; participants must cover their own 
travel and living costs; no support is offered, I'm afraid, apart from 
free tuition.

Roger

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From Roger@B|v@nd @end|ng |rom nhh@no  Tue Sep 14 14:54:33 2021
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Tue, 14 Sep 2021 14:54:33 +0200 (CEST)
Subject: [R-sig-Geo] PhD course ECS530, Bergen, 15-20 November
In-Reply-To: <df447788-2f47-b987-442f-25ee46c17e7a@reclus2.nhh.no>
References: <df447788-2f47-b987-442f-25ee46c17e7a@reclus2.nhh.no>
Message-ID: <6b56779f-cdb3-c28a-b062-c29f24d2bdef@reclus2.nhh.no>

  ... and meanwhile the dates are 15-20 November 2021 ...

On Tue, 14 Sep 2021, Roger Bivand wrote:

> A PhD-level course in spatial data analysis (ECS530, Auditorium C) will be
> held 3-8 December 2018 in Bergen, Norway (hybrid format):
>
> https://www.nhh.no/en/courses/analysing-spatial-data/
>
> External participants should apply using this form:
>
> https://www.nhh.no/en/study-programmes/phd-programme-at-nhh/phd-courses/become-a-visiting-student-at-a-phd-course-at-nhh/
>
> For further details see the course page; participants must cover their own 
> travel and living costs; no support is offered, I'm afraid, apart from free 
> tuition.
>
> Roger
>
>

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From |v@|ery @end|ng |rom out|ook@|r  Tue Sep 14 14:55:02 2021
From: |v@|ery @end|ng |rom out|ook@|r (=?iso-8859-1?Q?Lo=EFc_Val=E9ry?=)
Date: Tue, 14 Sep 2021 12:55:02 +0000
Subject: [R-sig-Geo] Problem to retrieve/plot selected bands in a stars
 proxy object
Message-ID: <PR3PR06MB6985CCB52E51EF46E9C32820D0DA9@PR3PR06MB6985.eurprd06.prod.outlook.com>

Dear list members,

I hope this message finds you well.
I submit to you a problem with which I have been struggling for several days without finding the beginning of a solution.

I would like to select some bands of a 'stars proxy' object that I have previously created by merging two images with the function read_stars(c(image1, image2), proxy = true, along = "band") in order to plot them.

My problem is that R returns the following error message when trying to plot the selected bands:
Error in x[[i]][, , 10:12, , drop = FALSE] : subscript out of bounds

Here is a short REPREX:
library(stars)
tif_1 <- system.file("tif/L7_ETMs.tif", package = "stars")
tif_2 <- system.file("tif/L7_ETMs.tif", package = "stars")

tif_merge <- read_stars(c(tif_1,tif_2), proxy = TRUE, along = "band")

plot(tif_merge[,,,10:12], rgb = 1:3)
#> Error in x[[i]][, , 10:12, , drop = FALSE]: indice hors limites



I guess the problem is that the "tif_merge" object has different dimensions before and after the promise evaluation:

dim(tif_merge)
#>    x    y band 
#>  349  352   12

dim(st_as_stars(tif_merge))
#>       x       y    band new_dim 
#>     349     352       6       2

However, this did not help me to find any solution!

Thank you in advance for your help.
Cheers,
Lo?c


From edzer@pebe@m@ @end|ng |rom un|-muen@ter@de  Tue Sep 14 17:45:09 2021
From: edzer@pebe@m@ @end|ng |rom un|-muen@ter@de (Edzer Pebesma)
Date: Tue, 14 Sep 2021 17:45:09 +0200
Subject: [R-sig-Geo] Problem to retrieve/plot selected bands in a stars
 proxy object
In-Reply-To: <PR3PR06MB6985CCB52E51EF46E9C32820D0DA9@PR3PR06MB6985.eurprd06.prod.outlook.com>
References: <PR3PR06MB6985CCB52E51EF46E9C32820D0DA9@PR3PR06MB6985.eurprd06.prod.outlook.com>
Message-ID: <7d6926e9-c218-5056-943f-ba6e3ec3bd7d@uni-muenster.de>

Thanks for the clear report, Lo?c; this should now be fixed in the 
version on github.

On 14/09/2021 14:55, Lo?c Val?ry wrote:
> Dear list members,
> 
> I hope this message finds you well.
> I submit to you a problem with which I have been struggling for several days without finding the beginning of a solution.
> 
> I would like to select some bands of a 'stars proxy' object that I have previously created by merging two images with the function read_stars(c(image1, image2), proxy = true, along = "band") in order to plot them.
> 
> My problem is that R returns the following error message when trying to plot the selected bands:
> Error in x[[i]][, , 10:12, , drop = FALSE] : subscript out of bounds
> 
> Here is a short REPREX:
> library(stars)
> tif_1 <- system.file("tif/L7_ETMs.tif", package = "stars")
> tif_2 <- system.file("tif/L7_ETMs.tif", package = "stars")
> 
> tif_merge <- read_stars(c(tif_1,tif_2), proxy = TRUE, along = "band")
> 
> plot(tif_merge[,,,10:12], rgb = 1:3)
> #> Error in x[[i]][, , 10:12, , drop = FALSE]: indice hors limites
> 
> 
> 
> I guess the problem is that the "tif_merge" object has different dimensions before and after the promise evaluation:
> 
> dim(tif_merge)
> #>    x    y band
> #>  349  352   12
> 
> dim(st_as_stars(tif_merge))
> #>       x       y    band new_dim
> #>     349     352       6       2
> 
> However, this did not help me to find any solution!
> 
> Thank you in advance for your help.
> Cheers,
> Lo?c
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From |v@|ery @end|ng |rom out|ook@|r  Tue Sep 14 18:58:42 2021
From: |v@|ery @end|ng |rom out|ook@|r (=?iso-8859-1?Q?Lo=EFc_Val=E9ry?=)
Date: Tue, 14 Sep 2021 16:58:42 +0000
Subject: [R-sig-Geo] Problem to retrieve/plot selected bands in a stars
 proxy object
In-Reply-To: <7d6926e9-c218-5056-943f-ba6e3ec3bd7d@uni-muenster.de>
References: <PR3PR06MB6985CCB52E51EF46E9C32820D0DA9@PR3PR06MB6985.eurprd06.prod.outlook.com>
 <7d6926e9-c218-5056-943f-ba6e3ec3bd7d@uni-muenster.de>
Message-ID: <PR3PR06MB6985F60EACAAA3280F318927D0DA9@PR3PR06MB6985.eurprd06.prod.outlook.com>

Thank you so much Edzer for fixing this so quickly. Everything is working fine now.
Cheers,
Lo?c

________________________________
De : R-sig-Geo <r-sig-geo-bounces at r-project.org> de la part de Edzer Pebesma <edzer.pebesma at uni-muenster.de>
Envoy? : mardi 14 septembre 2021 17:45
? : r-sig-geo at r-project.org <r-sig-geo at r-project.org>
Objet : Re: [R-sig-Geo] Problem to retrieve/plot selected bands in a stars proxy object

Thanks for the clear report, Lo?c; this should now be fixed in the
version on github.

On 14/09/2021 14:55, Lo?c Val?ry wrote:
> Dear list members,
>
> I hope this message finds you well.
> I submit to you a problem with which I have been struggling for several days without finding the beginning of a solution.
>
> I would like to select some bands of a 'stars proxy' object that I have previously created by merging two images with the function read_stars(c(image1, image2), proxy = true, along = "band") in order to plot them.
>
> My problem is that R returns the following error message when trying to plot the selected bands:
> Error in x[[i]][, , 10:12, , drop = FALSE] : subscript out of bounds
>
> Here is a short REPREX:
> library(stars)
> tif_1 <- system.file("tif/L7_ETMs.tif", package = "stars")
> tif_2 <- system.file("tif/L7_ETMs.tif", package = "stars")
>
> tif_merge <- read_stars(c(tif_1,tif_2), proxy = TRUE, along = "band")
>
> plot(tif_merge[,,,10:12], rgb = 1:3)
> #> Error in x[[i]][, , 10:12, , drop = FALSE]: indice hors limites
>
>
>
> I guess the problem is that the "tif_merge" object has different dimensions before and after the promise evaluation:
>
> dim(tif_merge)
> #>    x    y band
> #>  349  352   12
>
> dim(st_as_stars(tif_merge))
> #>       x       y    band new_dim
> #>     349     352       6       2
>
> However, this did not help me to find any solution!
>
> Thank you in advance for your help.
> Cheers,
> Lo?c
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

--
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

	[[alternative HTML version deleted]]


From |v@|ery @end|ng |rom out|ook@|r  Tue Sep 14 19:22:26 2021
From: |v@|ery @end|ng |rom out|ook@|r (=?iso-8859-1?Q?Lo=EFc_Val=E9ry?=)
Date: Tue, 14 Sep 2021 17:22:26 +0000
Subject: [R-sig-Geo] Problem to retrieve/plot selected bands in a stars
 proxy object
In-Reply-To: <7d6926e9-c218-5056-943f-ba6e3ec3bd7d@uni-muenster.de>
References: <PR3PR06MB6985CCB52E51EF46E9C32820D0DA9@PR3PR06MB6985.eurprd06.prod.outlook.com>
 <7d6926e9-c218-5056-943f-ba6e3ec3bd7d@uni-muenster.de>
Message-ID: <PR3PR06MB698584690715EF0BA676A765D0DA9@PR3PR06MB6985.eurprd06.prod.outlook.com>

Thank you so much Edzer for fixing this so quickly. Everything is working fine now.
Cheers,
Lo?c


De : R-sig-Geo <r-sig-geo-bounces at r-project.org> de la part de Edzer Pebesma <edzer.pebesma at uni-muenster.de>
Envoy? : mardi 14 septembre 2021 17:45
? : r-sig-geo at r-project.org <r-sig-geo at r-project.org>
Objet : Re: [R-sig-Geo] Problem to retrieve/plot selected bands in a stars proxy object 
?
Thanks for the clear report, Lo?c; this should now be fixed in the 
version on github.

On 14/09/2021 14:55, Lo?c Val?ry wrote:
> Dear list members,
> 
> I hope this message finds you well.
> I submit to you a problem with which I have been struggling for several days without finding the beginning of a solution.
> 
> I would like to select some bands of a 'stars proxy' object that I have previously created by merging two images with the function read_stars(c(image1, image2), proxy = true, along = "band") in order to plot them.
> 
> My problem is that R returns the following error message when trying to plot the selected bands:
> Error in x[[i]][, , 10:12, , drop = FALSE] : subscript out of bounds
> 
> Here is a short REPREX:
> library(stars)
> tif_1 <- system.file("tif/L7_ETMs.tif", package = "stars")
> tif_2 <- system.file("tif/L7_ETMs.tif", package = "stars")
> 
> tif_merge <- read_stars(c(tif_1,tif_2), proxy = TRUE, along = "band")
> 
> plot(tif_merge[,,,10:12], rgb = 1:3)
> #> Error in x[[i]][, , 10:12, , drop = FALSE]: indice hors limites
> 
> 
> 
> I guess the problem is that the "tif_merge" object has different dimensions before and after the promise evaluation:
> 
> dim(tif_merge)
> #>??? x??? y band
> #>? 349? 352?? 12
> 
> dim(st_as_stars(tif_merge))
> #>?????? x?????? y??? band new_dim
> #>???? 349???? 352?????? 6?????? 2
> 
> However, this did not help me to find any solution!
> 
> Thank you in advance for your help.
> Cheers,
> Lo?c
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

From je@n-|uc@dupouey @end|ng |rom |nr@e@|r  Sun Sep 19 01:34:46 2021
From: je@n-|uc@dupouey @end|ng |rom |nr@e@|r (Jean-Luc Dupouey)
Date: Sun, 19 Sep 2021 01:34:46 +0200
Subject: [R-sig-Geo] rgdal retirement
Message-ID: <7e19d6d8-8b5e-b24b-2dc9-5715820e08b8@inrae.fr>

Dear Roger Bivand,

I read your message about the rgdal retirement. It was a nice package 
and an important step in the development of R-spatial.

I looked for alternatives for the functions I was using, but I didn't 
find them all. Those I am missing:

. ogrInfo
. ogrFIDs
. make_EPSG

Do you know of any (more or less) equivalent functions in the packages 
you mentioned that have taken over from rgdal?

Thanks in advance,

Jean-Luc Dupouey

-- 
INRAE
UMR Silva
F-54280 Champenoux
France


From md@umner @end|ng |rom gm@||@com  Sun Sep 19 08:57:03 2021
From: md@umner @end|ng |rom gm@||@com (Michael Sumner)
Date: Sun, 19 Sep 2021 16:57:03 +1000
Subject: [R-sig-Geo] rgdal retirement
In-Reply-To: <7e19d6d8-8b5e-b24b-2dc9-5715820e08b8@inrae.fr>
References: <7e19d6d8-8b5e-b24b-2dc9-5715820e08b8@inrae.fr>
Message-ID: <CAAcGz99KwWAKDuyBLHQ-kbMGga3=+hHohuH9xbWon1AEc7=9zA@mail.gmail.com>

Hi Jean-Luc, if the packages mentioned don't yet cover it, you can get
ogrInfo and ogrFIDs with a combination of vapour's vapour_read_names() (for
FID), vapour_geom_summary()  (for FID and type) and vapour_layer_info().

For make_EPSG() it's probably time to hit the proj.db more directly and I'd
be happy to have a look at that.

Cheers, Mike

On Sun, Sep 19, 2021 at 9:35 AM Jean-Luc Dupouey <jean-luc.dupouey at inrae.fr>
wrote:

> Dear Roger Bivand,
>
> I read your message about the rgdal retirement. It was a nice package
> and an important step in the development of R-spatial.
>
> I looked for alternatives for the functions I was using, but I didn't
> find them all. Those I am missing:
>
> . ogrInfo
> . ogrFIDs
> . make_EPSG
>
> Do you know of any (more or less) equivalent functions in the packages
> you mentioned that have taken over from rgdal?
>
> Thanks in advance,
>
> Jean-Luc Dupouey
>
> --
> INRAE
> UMR Silva
> F-54280 Champenoux
> France
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com

	[[alternative HTML version deleted]]


From p@tr|ck@g|r@udoux @end|ng |rom un|v-|comte@|r  Sun Sep 19 13:09:31 2021
From: p@tr|ck@g|r@udoux @end|ng |rom un|v-|comte@|r (Patrick Giraudoux)
Date: Sun, 19 Sep 2021 13:09:31 +0200
Subject: [R-sig-Geo] rgdal, regeos, maptools retirement: a world vanishing
Message-ID: <e1daff04-31c1-146e-ccfd-976cd423aa06@univ-fcomte.fr>

Dear Roger,

I had missed your message about rgdal, rgeos, maptools and your 
retirement...? As being retired since 2 years, and emeritus as yourself, 
I can tell you how free an "emeritus" can be when rid of all forms of 
bureaucracies, competition for grants and institutional top-down 
injunctions. To tell you the truth I never had before a so deep feeling 
of being free to do the job for which I was paid for than since I am 
retired/emeritus.

I want to warmly thank you for all the work done since decades (speaking 
in the name of many in our lab). I remember our correspondence when I 
was back from field work in China, in the early 2000, when I was asking 
you how graphics could help and handle shapes and mapping... and I still 
have the first edition of Applied Spatial Data Analysis with R with your 
signing mentioning those early times. Of course thenafter, rgal, rgeos 
and maptools have been instrumental for most of my papers in ecology and 
epidemiology.

For sure, we will be a bit lost (and a bit scared not to find equivalent 
facilities) in rewriting a large number of scripts with other 
libraries... ?

Anyway, I wish you all the best for your new life, and hope our paths 
will anyway cross from time to time...

Cheers,

Patrick


------------------------------------------------------------------------
*Patrick GIRAUDOUX*
Professor emeritus of ecology
Honorary member of the /Institut universitaire de France/
Distinguished professor of the Yunnan University
of Finance and Economics, China
------------------------------------------------------------------------
*Chrono-environnement*
UMR UFC/CNRS 6249 usc INRA
Universit? de Franche-Comt?
La Bouloie
25030 Besan?on Cedex, France
Web sites:

Perso 
<https://chrono-environnement.univ-fcomte.fr/personnes/annuaire/article/giraudoux-patrick?lang=en>
Lab <http://chrono-environnement.univ-fcomte.fr/>
IRN EHEDE <http://gdri-ehede.univ-fcomte.fr/>
Zone atelier (LTSER site) Arc jurassien 
<https://zaaj.univ-fcomte.fr/spip.php?article29>
Metadata portal 
dat at osu<http://dataosu.obs-besancon.fr/search.php?s=giraudoux>

------------------------------------------------------------------------

	[[alternative HTML version deleted]]


From Roger@B|v@nd @end|ng |rom nhh@no  Tue Sep 21 12:04:56 2021
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Tue, 21 Sep 2021 12:04:56 +0200 (CEST)
Subject: [R-sig-Geo] rgdal retirement
In-Reply-To: <CAAcGz99KwWAKDuyBLHQ-kbMGga3=+hHohuH9xbWon1AEc7=9zA@mail.gmail.com>
References: <7e19d6d8-8b5e-b24b-2dc9-5715820e08b8@inrae.fr>
 <CAAcGz99KwWAKDuyBLHQ-kbMGga3=+hHohuH9xbWon1AEc7=9zA@mail.gmail.com>
Message-ID: <884c7f51-2a0-3657-11ba-5a82859c35f@reclus2.nhh.no>

On Sun, 19 Sep 2021, Michael Sumner wrote:

> Hi Jean-Luc, if the packages mentioned don't yet cover it, you can get 
> ogrInfo and ogrFIDs with a combination of vapour's vapour_read_names() 
> (for FID), vapour_geom_summary()  (for FID and type) and 
> vapour_layer_info().

In sf you can use the fid_column_name= argument to st_read() to retreive 
the FIDs with the geometries, but I think not the FIDs alone. orgInfo grew 
over time and became unwieldy, are there specific components that you use? 
Might sf::st_read() be modified to report these (and return FIDs) without 
reading the data and geometries? Using vapour is of course a good way to 
proceed, and very useful for cross-checking (Do rgdal and vapour return 
the same values, I hope so, vapour is much cleaner).

>
> For make_EPSG() it's probably time to hit the proj.db more directly and I'd
> be happy to have a look at that.

Right, RSQLite can handle this quite well, but sometimes the names of 
tables and fields in tables change.

Roger

>
> Cheers, Mike
>
> On Sun, Sep 19, 2021 at 9:35 AM Jean-Luc Dupouey <jean-luc.dupouey at inrae.fr>
> wrote:
>
>> Dear Roger Bivand,
>>
>> I read your message about the rgdal retirement. It was a nice package
>> and an important step in the development of R-spatial.
>>
>> I looked for alternatives for the functions I was using, but I didn't
>> find them all. Those I am missing:
>>
>> . ogrInfo
>> . ogrFIDs
>> . make_EPSG
>>
>> Do you know of any (more or less) equivalent functions in the packages
>> you mentioned that have taken over from rgdal?
>>
>> Thanks in advance,
>>
>> Jean-Luc Dupouey
>>
>> --
>> INRAE
>> UMR Silva
>> F-54280 Champenoux
>> France
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>
>

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From Roger@B|v@nd @end|ng |rom nhh@no  Tue Sep 21 12:38:15 2021
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Tue, 21 Sep 2021 12:38:15 +0200 (CEST)
Subject: [R-sig-Geo] 
 rgdal, regeos, maptools retirement: a world vanishing
In-Reply-To: <e1daff04-31c1-146e-ccfd-976cd423aa06@univ-fcomte.fr>
References: <e1daff04-31c1-146e-ccfd-976cd423aa06@univ-fcomte.fr>
Message-ID: <a5b1addd-bf35-2a3e-8654-3ebdac50776@reclus2.nhh.no>

Dear Patrick,

On Sun, 19 Sep 2021, Patrick Giraudoux wrote:

> Dear Roger,
>
> I had missed your message about rgdal, rgeos, maptools and your 
> retirement...  As being retired since 2 years, and emeritus as yourself, 
> I can tell you how free an "emeritus" can be when rid of all forms of 
> bureaucracies, competition for grants and institutional top-down 
> injunctions. To tell you the truth I never had before a so deep feeling 
> of being free to do the job for which I was paid for than since I am 
> retired/emeritus.

Indeed, this is unexpected freedom ...

>
> I want to warmly thank you for all the work done since decades (speaking 
> in the name of many in our lab). I remember our correspondence when I 
> was back from field work in China, in the early 2000, when I was asking 
> you how graphics could help and handle shapes and mapping... and I still 
> have the first edition of Applied Spatial Data Analysis with R with your 
> signing mentioning those early times. Of course thenafter, rgal, rgeos 
> and maptools have been instrumental for most of my papers in ecology and 
> epidemiology.

As you know, your postcard from China was a great encouragement!

>
> For sure, we will be a bit lost (and a bit scared not to find equivalent 
> facilities) in rewriting a large number of scripts with other 
> libraries... ?

Hopefully, sp will continue, and some functionality for vector data may be 
placed in sp. We can also extend or edit

https://github.com/r-spatial/sf/wiki/Migrating

when more becomes clearer for raster data.

>
> Anyway, I wish you all the best for your new life, and hope our paths 
> will anyway cross from time to time...
>

That would be excellent!

Best wishes,

Roger

> Cheers,
>
> Patrick
>
>
> ------------------------------------------------------------------------
> *Patrick GIRAUDOUX*
> Professor emeritus of ecology
> Honorary member of the /Institut universitaire de France/
> Distinguished professor of the Yunnan University
> of Finance and Economics, China
> ------------------------------------------------------------------------
> *Chrono-environnement*
> UMR UFC/CNRS 6249 usc INRA
> Universit? de Franche-Comt?
> La Bouloie
> 25030 Besan?on Cedex, France
> Web sites:
>
> Perso 
> <https://chrono-environnement.univ-fcomte.fr/personnes/annuaire/article/giraudoux-patrick?lang=en>
> Lab <http://chrono-environnement.univ-fcomte.fr/>
> IRN EHEDE <http://gdri-ehede.univ-fcomte.fr/>
> Zone atelier (LTSER site) Arc jurassien 
> <https://zaaj.univ-fcomte.fr/spip.php?article29>
> Metadata portal 
> dat at osu<http://dataosu.obs-besancon.fr/search.php?s=giraudoux>
>
> ------------------------------------------------------------------------
>

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From md@umner @end|ng |rom gm@||@com  Tue Sep 21 13:14:48 2021
From: md@umner @end|ng |rom gm@||@com (Michael Sumner)
Date: Tue, 21 Sep 2021 21:14:48 +1000
Subject: [R-sig-Geo] rgdal retirement
In-Reply-To: <884c7f51-2a0-3657-11ba-5a82859c35f@reclus2.nhh.no>
References: <7e19d6d8-8b5e-b24b-2dc9-5715820e08b8@inrae.fr>
 <CAAcGz99KwWAKDuyBLHQ-kbMGga3=+hHohuH9xbWon1AEc7=9zA@mail.gmail.com>
 <884c7f51-2a0-3657-11ba-5a82859c35f@reclus2.nhh.no>
Message-ID: <CAAcGz99ajJm_XPJhqiHDiJz_O9BNp=3iv5tX-fjiD_VemAzNyQ@mail.gmail.com>

On Tue, Sep 21, 2021 at 8:04 PM Roger Bivand <Roger.Bivand at nhh.no> wrote:

> On Sun, 19 Sep 2021, Michael Sumner wrote:
>
> > Hi Jean-Luc, if the packages mentioned don't yet cover it, you can get
> > ogrInfo and ogrFIDs with a combination of vapour's vapour_read_names()
> > (for FID), vapour_geom_summary()  (for FID and type) and
> > vapour_layer_info().
>
> In sf you can use the fid_column_name= argument to st_read() to retreive
> the FIDs with the geometries, but I think not the FIDs alone. orgInfo grew
> over time and became unwieldy, are there specific components that you use?
> Might sf::st_read() be modified to report these (and return FIDs) without
> reading the data and geometries? Using vapour is of course a good way to
> proceed, and very useful for cross-checking (Do rgdal and vapour return
> the same values, I hope so, vapour is much cleaner).
>
>
They do where I've checked!  I've put some notes here running the code
below: https://gist.github.com/mdsumner/6e756ded5f73c19bfb5935b12e4cec16


file <- "list_locality_postcode_meander_valley.tab"

## MapInfo file is 1-based FID
mvfile <- system.file(file.path("extdata/tab", file), package="vapour")
range(vapour::vapour_read_names(mvfile))
range(rgdal::ogrFIDs(mvfile, "list_locality_postcode_meander_valley"))

## shapefile is 0-based FID
pfile <- system.file("extdata/point.shp", package="vapour")
range(vapour::vapour_read_names(pfile))
range(rgdal::ogrFIDs(pfile, "point"))

## geopackage is 1-based
gfile <- system.file("gpkg/nc.gpkg", package = "sf")
range(vapour::vapour_read_names(gfile))
range(rgdal::ogrFIDs(gfile, "nc.gpkg"))  ## quirky layer name, it's not
always predictable

## real DB used not to have FIDS accessible by SQL (so I thought ... but
now it seems to work
vapour::vapour_read_attributes(mvfile, sql = "SELECT FID FROM
list_locality_postcode_meander_valley")
sf::read_sf(mvfile, query = "SELECT FID FROM
list_locality_postcode_meander_valley")

## some formats are arbitrary FIDS (not sequential by-1 or starting from
0/1)
osmfile <- system.file("extdata/osm/osm-ways.osm", package = "vapour")
vapour::vapour_read_names(osmfile)
rgdal::ogrFIDs(osmfile, "points")

My major concern with the vapour version is it won't handle 64-bit FIDs, I
tried and failed to get that to work but I've also never needed it, I don't
use databases much. I'm not sure if there's a broader variety of FIDS/names
to be concerned with.



> >
> > For make_EPSG() it's probably time to hit the proj.db more directly and
> I'd
> > be happy to have a look at that.
>
> Right, RSQLite can handle this quite well, but sometimes the names of
> tables and fields in tables change.
>
>

Indeed, note that you can read it with gdal itself i.e.

## on my linux (I don't know how to generalize this proj.db find step)
f <- "/usr/share/proj/proj.db"
## or CRAN built windows/macos
#f <- system.file("proj/proj.db", package = "sf", mustWork  = TRUE)

## table of authority codes, but I don't generally know my way around this
projected_crs  <- sf::read_sf(f, "projected_crs")

Cheers, Mike

Roger
>
> >
> > Cheers, Mike
> >
> > On Sun, Sep 19, 2021 at 9:35 AM Jean-Luc Dupouey <
> jean-luc.dupouey at inrae.fr>
> > wrote:
> >
> >> Dear Roger Bivand,
> >>
> >> I read your message about the rgdal retirement. It was a nice package
> >> and an important step in the development of R-spatial.
> >>
> >> I looked for alternatives for the functions I was using, but I didn't
> >> find them all. Those I am missing:
> >>
> >> . ogrInfo
> >> . ogrFIDs
> >> . make_EPSG
> >>
> >> Do you know of any (more or less) equivalent functions in the packages
> >> you mentioned that have taken over from rgdal?
> >>
> >> Thanks in advance,
> >>
> >> Jean-Luc Dupouey
> >>
> >> --
> >> INRAE
> >> UMR Silva
> >> F-54280 Champenoux
> >> France
> >>
> >> _______________________________________________
> >> R-sig-Geo mailing list
> >> R-sig-Geo at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>
> >
> >
> >
>
> --
> Roger Bivand
> Emeritus Professor
> Department of Economics, Norwegian School of Economics,
> Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
> e-mail: Roger.Bivand at nhh.no
> https://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>


-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com

	[[alternative HTML version deleted]]


From g||berto@c@m@r@@|npe @end|ng |rom gm@||@com  Tue Sep 21 17:29:49 2021
From: g||berto@c@m@r@@|npe @end|ng |rom gm@||@com (GilbertoCamara)
Date: Tue, 21 Sep 2021 12:29:49 -0300
Subject: [R-sig-Geo] rgdal retirement
In-Reply-To: <CAAcGz99ajJm_XPJhqiHDiJz_O9BNp=3iv5tX-fjiD_VemAzNyQ@mail.gmail.com>
References: <7e19d6d8-8b5e-b24b-2dc9-5715820e08b8@inrae.fr>
 <CAAcGz99KwWAKDuyBLHQ-kbMGga3=+hHohuH9xbWon1AEc7=9zA@mail.gmail.com>
 <884c7f51-2a0-3657-11ba-5a82859c35f@reclus2.nhh.no>
 <CAAcGz99ajJm_XPJhqiHDiJz_O9BNp=3iv5tX-fjiD_VemAzNyQ@mail.gmail.com>
Message-ID: <12F5BAB8-F812-4969-B791-BD402F10EDDF@inpe.br>

Dear Roger 

I would like to offer you a strong praise and recognition from our team at INPE, Brasil, for your strong contributions to the R-spatial community. Rgdal is perhaps the most tangible direct outcome from your efforts, but your influence goes much beyond the support for developing R packages.

You have made a decisive contribution to the whole R-spatial community, by your strong community for building bridges between us. I remember vividly your visit to Brazil in 2002, where you showed us the benefits of joining the R community. It took some time, but now we are firmly on board. 

Your example and your leadership are encouraging proofs that there?s hope to build a better and more cooperative planet.

All the best
Gilberto
===========================
Prof Dr Gilberto Camara
Senior Researcher
National Institute for Space Research (INPE), Brazil
https://gilbertocamara.org/
======================


>>> On Sun, Sep 19, 2021 at 9:35 AM Jean-Luc Dupouey <
>> jean-luc.dupouey at inrae.fr>
>>> wrote:
>>> 
>>>> Dear Roger Bivand,
>>>> 
>>>> I read your message about the rgdal retirement. It was a nice package
>>>> and an important step in the development of R-spatial.
>>>> 
>>>> I looked for alternatives for the functions I was using, but I didn't
>>>> find them all. Those I am missing:
>>>> 
>>>> . ogrInfo
>>>> . ogrFIDs
>>>> . make_EPSG
>>>> 
>>>> Do you know of any (more or less) equivalent functions in the packages
>>>> you mentioned that have taken over from rgdal?
>>>> 
>>>> Thanks in advance,
>>>> 
>>>> Jean-Luc Dupouey
>>>> 
>>>> --
>>>> INRAE
>>>> UMR Silva
>>>> F-54280 Champenoux
>>>> France
>>>> 
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>> 
>>> 
>>> 
>>> 
>> 
>> --
>> Roger Bivand
>> Emeritus Professor
>> Department of Economics, Norwegian School of Economics,
>> Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
>> e-mail: Roger.Bivand at nhh.no
>> https://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>> 
> 
> 
> -- 
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger@B|v@nd @end|ng |rom nhh@no  Wed Sep 22 11:56:25 2021
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Wed, 22 Sep 2021 11:56:25 +0200 (CEST)
Subject: [R-sig-Geo] PhD course ECS530, Bergen, 15-20 November
In-Reply-To: <6b56779f-cdb3-c28a-b062-c29f24d2bdef@reclus2.nhh.no>
References: <df447788-2f47-b987-442f-25ee46c17e7a@reclus2.nhh.no>
 <6b56779f-cdb3-c28a-b062-c29f24d2bdef@reclus2.nhh.no>
Message-ID: <88e1c841-617c-5999-9d3-51af29d9885c@reclus2.nhh.no>

On Tue, 14 Sep 2021, Roger Bivand wrote:

>  ... and meanwhile the dates are 15-20 November 2021 ...


and the application app is now open for submissions with a deadline of 1 
November at 
https://www.nhh.no/en/study-programmes/phd-programme-at-nhh/phd-courses/become-a-visiting-student-at-a-phd-course-at-nhh/

Roger

>
> On Tue, 14 Sep 2021, Roger Bivand wrote:
>
>>  A PhD-level course in spatial data analysis (ECS530, Auditorium C) will be
>>  held 3-8 December 2018 in Bergen, Norway (hybrid format):
>>
>>  https://www.nhh.no/en/courses/analysing-spatial-data/
>>
>>  External participants should apply using this form:
>>
>>  https://www.nhh.no/en/study-programmes/phd-programme-at-nhh/phd-courses/become-a-visiting-student-at-a-phd-course-at-nhh/
>>
>>  For further details see the course page; participants must cover their own
>>  travel and living costs; no support is offered, I'm afraid, apart from
>>  free tuition.
>>
>>  Roger
>> 
>> 
>
>

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From r|k|erre|r@@|ve@ @end|ng |rom gm@||@com  Mon Sep 27 17:17:04 2021
From: r|k|erre|r@@|ve@ @end|ng |rom gm@||@com (Rik Ferreira)
Date: Mon, 27 Sep 2021 12:17:04 -0300
Subject: [R-sig-Geo] Difference between area calculations by QGIS and sf
 package
Message-ID: <CAKnqGuS19QemJ9JnuzudmdASF2NXpHUq1fD6YufRFCuK6dUM8A@mail.gmail.com>

Dear list members,

Why does sf::st_area returns a different area than the output of QGIS $area
for the same geometry?

A reproducible example (state of Minas Gerais, Brazil):

library(sf)
> mg <- geobr::read_state(31)
> st_area(mg)
>

sf::st_area: 588358849314 [m^2]
QGIS $area: 586521037474,860 m?

The layer used in QGIS was exported with st_write() in GeoJSON format.

The error is: 1837811840 m?.

Thank you for the attention.

Att.

-- 
Rik Ferreira Alves
Graduando em Geografia - Unimontes
https://rikferreira.netlify.app/

	[[alternative HTML version deleted]]


From Roger@B|v@nd @end|ng |rom nhh@no  Mon Sep 27 17:32:32 2021
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Mon, 27 Sep 2021 17:32:32 +0200 (CEST)
Subject: [R-sig-Geo] Difference between area calculations by QGIS and sf
 package
In-Reply-To: <CAKnqGuS19QemJ9JnuzudmdASF2NXpHUq1fD6YufRFCuK6dUM8A@mail.gmail.com>
References: <CAKnqGuS19QemJ9JnuzudmdASF2NXpHUq1fD6YufRFCuK6dUM8A@mail.gmail.com>
Message-ID: <73ac7942-5763-43a-f183-677a4bb64d2d@reclus2.nhh.no>

On Mon, 27 Sep 2021, Rik Ferreira wrote:

> Dear list members,
>
> Why does sf::st_area returns a different area than the output of QGIS $area
> for the same geometry?
>
> A reproducible example (state of Minas Gerais, Brazil):
>
> library(sf)
>> mg <- geobr::read_state(31)
>> st_area(mg)
>>
>
> sf::st_area: 588358849314 [m^2]
> QGIS $area: 586521037474,860 m?
>
> The layer used in QGIS was exported with st_write() in GeoJSON format.
>
> The error is: 1837811840 m?.

> st_is_longlat(mg)
[1] TRUE
> sf_use_s2()
[1] TRUE
> sf_use_s2(FALSE)
Spherical geometry (s2) switched off
> (o <- st_area(mg))
586520883040 [m^2]
> sf_use_s2(TRUE)
Spherical geometry (s2) switched on
> (p <- st_area(mg))
588358849314 [m^2]
> p - o
1837966275 [m^2]

See https://r-spatial.org/r/2020/06/17/s2.html

When sf_use_s2() is FALSE, see ?st_area ("ellipsoidal distances are 
computed using st_geod_distance which uses function 'geod_inverse' from 
GeographicLib (part of PROJ)"). You'd have to establish what code QGIS 
uses to know why it and GeographicLib differ.

Hope this clarifies

Roger


>
> Thank you for the attention.
>
> Att.
>
>

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From r|k|erre|r@@|ve@ @end|ng |rom gm@||@com  Mon Sep 27 18:18:38 2021
From: r|k|erre|r@@|ve@ @end|ng |rom gm@||@com (Rik Ferreira)
Date: Mon, 27 Sep 2021 13:18:38 -0300
Subject: [R-sig-Geo] Difference between area calculations by QGIS and sf
 package
In-Reply-To: <73ac7942-5763-43a-f183-677a4bb64d2d@reclus2.nhh.no>
References: <CAKnqGuS19QemJ9JnuzudmdASF2NXpHUq1fD6YufRFCuK6dUM8A@mail.gmail.com>
 <73ac7942-5763-43a-f183-677a4bb64d2d@reclus2.nhh.no>
Message-ID: <CAKnqGuRqqwmK9dEk4MFN=3c6ffQLkUxTOo889iX-KNwUYAHN5g@mail.gmail.com>

Dear Roger, thanks for the explanation.

The error between QGIS and sf drops a lot with sf_use_s2(FALSE) but it's
still bigger than 0. I believe it is due to different parameters passed
because GEOS and PROJ are QGIS dependencies.

I will run more tests to find out what may be causing this issue but the
problem is solved for now.

Thank you!

Em seg., 27 de set. de 2021 ?s 12:32, Roger Bivand <Roger.Bivand at nhh.no>
escreveu:

> On Mon, 27 Sep 2021, Rik Ferreira wrote:
>
> > Dear list members,
> >
> > Why does sf::st_area returns a different area than the output of QGIS
> $area
> > for the same geometry?
> >
> > A reproducible example (state of Minas Gerais, Brazil):
> >
> > library(sf)
> >> mg <- geobr::read_state(31)
> >> st_area(mg)
> >>
> >
> > sf::st_area: 588358849314 [m^2]
> > QGIS $area: 586521037474,860 m?
> >
> > The layer used in QGIS was exported with st_write() in GeoJSON format.
> >
> > The error is: 1837811840 m?.
>
> > st_is_longlat(mg)
> [1] TRUE
> > sf_use_s2()
> [1] TRUE
> > sf_use_s2(FALSE)
> Spherical geometry (s2) switched off
> > (o <- st_area(mg))
> 586520883040 [m^2]
> > sf_use_s2(TRUE)
> Spherical geometry (s2) switched on
> > (p <- st_area(mg))
> 588358849314 [m^2]
> > p - o
> 1837966275 [m^2]
>
> See https://r-spatial.org/r/2020/06/17/s2.html
>
> When sf_use_s2() is FALSE, see ?st_area ("ellipsoidal distances are
> computed using st_geod_distance which uses function 'geod_inverse' from
> GeographicLib (part of PROJ)"). You'd have to establish what code QGIS
> uses to know why it and GeographicLib differ.
>
> Hope this clarifies
>
> Roger
>
>
> >
> > Thank you for the attention.
> >
> > Att.
> >
> >
>
> --
> Roger Bivand
> Emeritus Professor
> Department of Economics, Norwegian School of Economics,
> Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
> e-mail: Roger.Bivand at nhh.no
> https://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en



-- 
Rik Ferreira Alves
Graduando em Geografia - Unimontes
https://rikferreira.netlify.app/

	[[alternative HTML version deleted]]


From Roger@B|v@nd @end|ng |rom nhh@no  Mon Sep 27 18:43:14 2021
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Mon, 27 Sep 2021 18:43:14 +0200 (CEST)
Subject: [R-sig-Geo] Difference between area calculations by QGIS and sf
 package
In-Reply-To: <CAKnqGuRqqwmK9dEk4MFN=3c6ffQLkUxTOo889iX-KNwUYAHN5g@mail.gmail.com>
References: <CAKnqGuS19QemJ9JnuzudmdASF2NXpHUq1fD6YufRFCuK6dUM8A@mail.gmail.com>
 <73ac7942-5763-43a-f183-677a4bb64d2d@reclus2.nhh.no>
 <CAKnqGuRqqwmK9dEk4MFN=3c6ffQLkUxTOo889iX-KNwUYAHN5g@mail.gmail.com>
Message-ID: <f5d3d82c-e55e-fd79-2542-51c1c7f2fb39@reclus2.nhh.no>

On Mon, 27 Sep 2021, Rik Ferreira wrote:

> Dear Roger, thanks for the explanation.
>
> The error between QGIS and sf drops a lot with sf_use_s2(FALSE) but it's
> still bigger than 0. I believe it is due to different parameters passed
> because GEOS and PROJ are QGIS dependencies.

No, the differences have nothing to do with GEOS, which only handles 
planar geometries, or PROJ, which expresses the coordinate reference 
system (here "EPSG:4674", a GEOGCRS in decimal degrees). The differences 
are coming from difference ways of estimating area on the sphere (s2) or a 
chosen ellipsoid (lwgeom, QGIS) all using different approaches. Try 
projecting to UTM zone 23; then GEOS would be in play, because the 
geometry is planar.

Hope this clarifies,

Roger


>
> I will run more tests to find out what may be causing this issue but the
> problem is solved for now.
>
> Thank you!
>
> Em seg., 27 de set. de 2021 ?s 12:32, Roger Bivand <Roger.Bivand at nhh.no>
> escreveu:
>
>> On Mon, 27 Sep 2021, Rik Ferreira wrote:
>>
>>> Dear list members,
>>>
>>> Why does sf::st_area returns a different area than the output of QGIS
>> $area
>>> for the same geometry?
>>>
>>> A reproducible example (state of Minas Gerais, Brazil):
>>>
>>> library(sf)
>>>> mg <- geobr::read_state(31)
>>>> st_area(mg)
>>>>
>>>
>>> sf::st_area: 588358849314 [m^2]
>>> QGIS $area: 586521037474,860 m?
>>>
>>> The layer used in QGIS was exported with st_write() in GeoJSON format.
>>>
>>> The error is: 1837811840 m?.
>>
>>> st_is_longlat(mg)
>> [1] TRUE
>>> sf_use_s2()
>> [1] TRUE
>>> sf_use_s2(FALSE)
>> Spherical geometry (s2) switched off
>>> (o <- st_area(mg))
>> 586520883040 [m^2]
>>> sf_use_s2(TRUE)
>> Spherical geometry (s2) switched on
>>> (p <- st_area(mg))
>> 588358849314 [m^2]
>>> p - o
>> 1837966275 [m^2]
>>
>> See https://r-spatial.org/r/2020/06/17/s2.html
>>
>> When sf_use_s2() is FALSE, see ?st_area ("ellipsoidal distances are
>> computed using st_geod_distance which uses function 'geod_inverse' from
>> GeographicLib (part of PROJ)"). You'd have to establish what code QGIS
>> uses to know why it and GeographicLib differ.
>>
>> Hope this clarifies
>>
>> Roger
>>
>>
>>>
>>> Thank you for the attention.
>>>
>>> Att.
>>>
>>>
>>
>> --
>> Roger Bivand
>> Emeritus Professor
>> Department of Economics, Norwegian School of Economics,
>> Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
>> e-mail: Roger.Bivand at nhh.no
>> https://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>
>
>
>

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

