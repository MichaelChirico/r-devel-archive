From @own@|ch@nd|m@ @end|ng |rom gm@||@com  Fri Sep  2 11:34:57 2022
From: @own@|ch@nd|m@ @end|ng |rom gm@||@com (sownal chand)
Date: Fri, 2 Sep 2022 21:34:57 +1200
Subject: [R-sig-Geo] Fwd: TRMM data Analysis
In-Reply-To: <CAH5tCz10OSznJbFnpsGTWXykWW_1vpFf6tjrFwPa_bUmhNkHLA@mail.gmail.com>
References: <CAH5tCz10OSznJbFnpsGTWXykWW_1vpFf6tjrFwPa_bUmhNkHLA@mail.gmail.com>
Message-ID: <CAH5tCz01y2274apH9PwYfttRCz1godjiE15V4un1_7A1-EqG9A@mail.gmail.com>

https://drive.google.com/file/d/1krtBKQUIhupvYKEG1gBV8bgQaQxx96pb/view?usp=drivesdk


Attached is the link for the data


---------- Forwarded message ---------
From: sownal chand <sownalchandfms at gmail.com>
Date: Fri, Sep 2, 2022, 10:10
Subject: TRMM data Analysis
To: <r-sig-geo at r-project.org>


Dear sir/madam

I have a data set in NCDF file and was visualizing the data precipitation
data set but ran into some small errors.
The code is below:
*******************************************************
library(ncdf4)

ncin <- nc_open("c:/Users/Downloads/PreNCDF.nc")

#get longitutes and latitudes

lon <<- ncvar_get(ncin,"lon")

nlon <- dim(lon)

lat <<- ncvar_get(ncin,"lat", verbose=F)

nlat <- dim(lat)

print(ncin)
#get the time variable and attributes

tori <<- ncvar_get(ncin,"TRMM_3B42RT_7_precipitation") #for time original

tunits <<- ncatt_get(ncin,"TRMM_3B42RT_7_precipitation","units")

nt <- dim(tori)


View(nt)
#get the variable and its attributes

TRMM.array <<- ncvar_get(ncin,"TRMM_3B42RT_7_precipitation") #dimensions
(lon,lat,time)
print(TRMM.array)

dim(TRMM.array)

#m is the time slice you want to plot

tmp.slice <- TRMM.array[, , 1]

image(lon, lat, tmp.slice, col = rev(brewer.pal(10, "RdBu")))

#betterway to plot

TRMM.Precip <- tmp.array [, , m]  #note this is the same as above

mapCDFtemp <- function(lat,lon,precip) #model and perc should be a string

{

  titletext <- "title"

  expand.grid(lon, lat) %>%

    rename(lon = Var1, lat = Var2) %>%

    mutate(lon = ifelse(lon > 180, -(360 - lon), lon),

           precip = as.vector(precip)) %>%

    #mutate(tas = convert_precip(, "k", "c")) %>%



    ggplot() +

    geom_point(aes(x = lon, y = lat, color = precip),

               size = 0.8) +

    borders("world", colour="black", fill=NA) +

    scale_color_viridis(na.value="white",name = "precip") +

    theme(legend.direction="vertical", legend.position="right",
legend.key.width=unit(0.4,"cm"), legend.key.heigh=unit(2,"cm")) +

    coord_quickmap() +

    ggtitle(titletext)

}


*******************************************
Would really appreciate if it could be corrected and really appreciate your
assistance

thanking you in advance
sownalc

	[[alternative HTML version deleted]]


From hyok|ee @end|ng |rom hd|group@org  Fri Sep  2 17:19:55 2022
From: hyok|ee @end|ng |rom hd|group@org (H. Joe Lee)
Date: Fri, 2 Sep 2022 10:19:55 -0500
Subject: [R-sig-Geo] Fwd: TRMM data Analysis
In-Reply-To: <CAH5tCz01y2274apH9PwYfttRCz1godjiE15V4un1_7A1-EqG9A@mail.gmail.com>
References: <CAH5tCz10OSznJbFnpsGTWXykWW_1vpFf6tjrFwPa_bUmhNkHLA@mail.gmail.com>
 <CAH5tCz01y2274apH9PwYfttRCz1godjiE15V4un1_7A1-EqG9A@mail.gmail.com>
Message-ID: <CADeM3-wgKhJ4XDhq4UKG8bCMc6Jh_T1tKp6DF0gf69iOworKJw@mail.gmail.com>

Hi,

  I wanted to look at the data but could not access it.
  I made a request.
  Please allow me to access the data to try your script on it.


- Joe
---
Build the Metaverse w/ HDF.



On Fri, Sep 2, 2022 at 4:34 AM sownal chand <sownalchandfms at gmail.com>
wrote:

>
> https://drive.google.com/file/d/1krtBKQUIhupvYKEG1gBV8bgQaQxx96pb/view?usp=drivesdk
>
>
> Attached is the link for the data
>
>
> ---------- Forwarded message ---------
> From: sownal chand <sownalchandfms at gmail.com>
> Date: Fri, Sep 2, 2022, 10:10
> Subject: TRMM data Analysis
> To: <r-sig-geo at r-project.org>
>
>
> Dear sir/madam
>
> I have a data set in NCDF file and was visualizing the data precipitation
> data set but ran into some small errors.
> The code is below:
> *******************************************************
> library(ncdf4)
>
> ncin <- nc_open("c:/Users/Downloads/PreNCDF.nc")
>
> #get longitutes and latitudes
>
> lon <<- ncvar_get(ncin,"lon")
>
> nlon <- dim(lon)
>
> lat <<- ncvar_get(ncin,"lat", verbose=F)
>
> nlat <- dim(lat)
>
> print(ncin)
> #get the time variable and attributes
>
> tori <<- ncvar_get(ncin,"TRMM_3B42RT_7_precipitation") #for time original
>
> tunits <<- ncatt_get(ncin,"TRMM_3B42RT_7_precipitation","units")
>
> nt <- dim(tori)
>
>
> View(nt)
> #get the variable and its attributes
>
> TRMM.array <<- ncvar_get(ncin,"TRMM_3B42RT_7_precipitation") #dimensions
> (lon,lat,time)
> print(TRMM.array)
>
> dim(TRMM.array)
>
> #m is the time slice you want to plot
>
> tmp.slice <- TRMM.array[, , 1]
>
> image(lon, lat, tmp.slice, col = rev(brewer.pal(10, "RdBu")))
>
> #betterway to plot
>
> TRMM.Precip <- tmp.array [, , m]  #note this is the same as above
>
> mapCDFtemp <- function(lat,lon,precip) #model and perc should be a string
>
> {
>
>   titletext <- "title"
>
>   expand.grid(lon, lat) %>%
>
>     rename(lon = Var1, lat = Var2) %>%
>
>     mutate(lon = ifelse(lon > 180, -(360 - lon), lon),
>
>            precip = as.vector(precip)) %>%
>
>     #mutate(tas = convert_precip(, "k", "c")) %>%
>
>
>
>     ggplot() +
>
>     geom_point(aes(x = lon, y = lat, color = precip),
>
>                size = 0.8) +
>
>     borders("world", colour="black", fill=NA) +
>
>     scale_color_viridis(na.value="white",name = "precip") +
>
>     theme(legend.direction="vertical", legend.position="right",
> legend.key.width=unit(0.4,"cm"), legend.key.heigh=unit(2,"cm")) +
>
>     coord_quickmap() +
>
>     ggtitle(titletext)
>
> }
>
>
> *******************************************
> Would really appreciate if it could be corrected and really appreciate your
> assistance
>
> thanking you in advance
> sownalc
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From @own@|ch@nd|m@ @end|ng |rom gm@||@com  Fri Sep  2 19:21:25 2022
From: @own@|ch@nd|m@ @end|ng |rom gm@||@com (sownal chand)
Date: Sat, 3 Sep 2022 05:21:25 +1200
Subject: [R-sig-Geo] Fwd: TRMM data Analysis
In-Reply-To: <CADeM3-wgKhJ4XDhq4UKG8bCMc6Jh_T1tKp6DF0gf69iOworKJw@mail.gmail.com>
References: <CAH5tCz10OSznJbFnpsGTWXykWW_1vpFf6tjrFwPa_bUmhNkHLA@mail.gmail.com>
 <CAH5tCz01y2274apH9PwYfttRCz1godjiE15V4un1_7A1-EqG9A@mail.gmail.com>
 <CADeM3-wgKhJ4XDhq4UKG8bCMc6Jh_T1tKp6DF0gf69iOworKJw@mail.gmail.com>
Message-ID: <CAH5tCz09aaMCJy9mw5EFRphQZbCBuodNqt9G8nKDzFEEk-G8Dw@mail.gmail.com>

Sure sir

On Sat, Sep 3, 2022, 03:20 H. Joe Lee <hyoklee at hdfgroup.org> wrote:

> Hi,
>
>   I wanted to look at the data but could not access it.
>   I made a request.
>   Please allow me to access the data to try your script on it.
>
>
> - Joe
> ---
> Build the Metaverse w/ HDF.
>
>
>
> On Fri, Sep 2, 2022 at 4:34 AM sownal chand <sownalchandfms at gmail.com>
> wrote:
>
>>
>> https://drive.google.com/file/d/1krtBKQUIhupvYKEG1gBV8bgQaQxx96pb/view?usp=drivesdk
>>
>>
>> Attached is the link for the data
>>
>>
>> ---------- Forwarded message ---------
>> From: sownal chand <sownalchandfms at gmail.com>
>> Date: Fri, Sep 2, 2022, 10:10
>> Subject: TRMM data Analysis
>> To: <r-sig-geo at r-project.org>
>>
>>
>> Dear sir/madam
>>
>> I have a data set in NCDF file and was visualizing the data precipitation
>> data set but ran into some small errors.
>> The code is below:
>> *******************************************************
>> library(ncdf4)
>>
>> ncin <- nc_open("c:/Users/Downloads/PreNCDF.nc")
>>
>> #get longitutes and latitudes
>>
>> lon <<- ncvar_get(ncin,"lon")
>>
>> nlon <- dim(lon)
>>
>> lat <<- ncvar_get(ncin,"lat", verbose=F)
>>
>> nlat <- dim(lat)
>>
>> print(ncin)
>> #get the time variable and attributes
>>
>> tori <<- ncvar_get(ncin,"TRMM_3B42RT_7_precipitation") #for time original
>>
>> tunits <<- ncatt_get(ncin,"TRMM_3B42RT_7_precipitation","units")
>>
>> nt <- dim(tori)
>>
>>
>> View(nt)
>> #get the variable and its attributes
>>
>> TRMM.array <<- ncvar_get(ncin,"TRMM_3B42RT_7_precipitation") #dimensions
>> (lon,lat,time)
>> print(TRMM.array)
>>
>> dim(TRMM.array)
>>
>> #m is the time slice you want to plot
>>
>> tmp.slice <- TRMM.array[, , 1]
>>
>> image(lon, lat, tmp.slice, col = rev(brewer.pal(10, "RdBu")))
>>
>> #betterway to plot
>>
>> TRMM.Precip <- tmp.array [, , m]  #note this is the same as above
>>
>> mapCDFtemp <- function(lat,lon,precip) #model and perc should be a string
>>
>> {
>>
>>   titletext <- "title"
>>
>>   expand.grid(lon, lat) %>%
>>
>>     rename(lon = Var1, lat = Var2) %>%
>>
>>     mutate(lon = ifelse(lon > 180, -(360 - lon), lon),
>>
>>            precip = as.vector(precip)) %>%
>>
>>     #mutate(tas = convert_precip(, "k", "c")) %>%
>>
>>
>>
>>     ggplot() +
>>
>>     geom_point(aes(x = lon, y = lat, color = precip),
>>
>>                size = 0.8) +
>>
>>     borders("world", colour="black", fill=NA) +
>>
>>     scale_color_viridis(na.value="white",name = "precip") +
>>
>>     theme(legend.direction="vertical", legend.position="right",
>> legend.key.width=unit(0.4,"cm"), legend.key.heigh=unit(2,"cm")) +
>>
>>     coord_quickmap() +
>>
>>     ggtitle(titletext)
>>
>> }
>>
>>
>> *******************************************
>> Would really appreciate if it could be corrected and really appreciate
>> your
>> assistance
>>
>> thanking you in advance
>> sownalc
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>

	[[alternative HTML version deleted]]


From roy@mende|@@ohn @end|ng |rom no@@@gov  Fri Sep  2 19:05:26 2022
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Fri, 2 Sep 2022 10:05:26 -0700
Subject: [R-sig-Geo] TRMM data Analysis
In-Reply-To: <CAH5tCz01y2274apH9PwYfttRCz1godjiE15V4un1_7A1-EqG9A@mail.gmail.com>
References: <CAH5tCz10OSznJbFnpsGTWXykWW_1vpFf6tjrFwPa_bUmhNkHLA@mail.gmail.com>
 <CAH5tCz01y2274apH9PwYfttRCz1godjiE15V4un1_7A1-EqG9A@mail.gmail.com>
Message-ID: <AFBDC230-1D1E-452D-B580-E60FF5BCFD76@noaa.gov>

I think you might get more responses if you also post the error message(s),  and/or what came out incorrectly.

HTH,

-Roy


> On Sep 2, 2022, at 2:34 AM, sownal chand <sownalchandfms at gmail.com> wrote:
> 
> https://drive.google.com/file/d/1krtBKQUIhupvYKEG1gBV8bgQaQxx96pb/view?usp=drivesdk
> 
> 
> Attached is the link for the data
> 
> 
> ---------- Forwarded message ---------
> From: sownal chand <sownalchandfms at gmail.com>
> Date: Fri, Sep 2, 2022, 10:10
> Subject: TRMM data Analysis
> To: <r-sig-geo at r-project.org>
> 
> 
> Dear sir/madam
> 
> I have a data set in NCDF file and was visualizing the data precipitation
> data set but ran into some small errors.
> The code is below:
> *******************************************************
> library(ncdf4)
> 
> ncin <- nc_open("c:/Users/Downloads/PreNCDF.nc")
> 
> #get longitutes and latitudes
> 
> lon <<- ncvar_get(ncin,"lon")
> 
> nlon <- dim(lon)
> 
> lat <<- ncvar_get(ncin,"lat", verbose=F)
> 
> nlat <- dim(lat)
> 
> print(ncin)
> #get the time variable and attributes
> 
> tori <<- ncvar_get(ncin,"TRMM_3B42RT_7_precipitation") #for time original
> 
> tunits <<- ncatt_get(ncin,"TRMM_3B42RT_7_precipitation","units")
> 
> nt <- dim(tori)
> 
> 
> View(nt)
> #get the variable and its attributes
> 
> TRMM.array <<- ncvar_get(ncin,"TRMM_3B42RT_7_precipitation") #dimensions
> (lon,lat,time)
> print(TRMM.array)
> 
> dim(TRMM.array)
> 
> #m is the time slice you want to plot
> 
> tmp.slice <- TRMM.array[, , 1]
> 
> image(lon, lat, tmp.slice, col = rev(brewer.pal(10, "RdBu")))
> 
> #betterway to plot
> 
> TRMM.Precip <- tmp.array [, , m]  #note this is the same as above
> 
> mapCDFtemp <- function(lat,lon,precip) #model and perc should be a string
> 
> {
> 
>  titletext <- "title"
> 
>  expand.grid(lon, lat) %>%
> 
>    rename(lon = Var1, lat = Var2) %>%
> 
>    mutate(lon = ifelse(lon > 180, -(360 - lon), lon),
> 
>           precip = as.vector(precip)) %>%
> 
>    #mutate(tas = convert_precip(, "k", "c")) %>%
> 
> 
> 
>    ggplot() +
> 
>    geom_point(aes(x = lon, y = lat, color = precip),
> 
>               size = 0.8) +
> 
>    borders("world", colour="black", fill=NA) +
> 
>    scale_color_viridis(na.value="white",name = "precip") +
> 
>    theme(legend.direction="vertical", legend.position="right",
> legend.key.width=unit(0.4,"cm"), legend.key.heigh=unit(2,"cm")) +
> 
>    coord_quickmap() +
> 
>    ggtitle(titletext)
> 
> }
> 
> 
> *******************************************
> Would really appreciate if it could be corrected and really appreciate your
> assistance
> 
> thanking you in advance
> sownalc
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From bh@@k@r@ko|k@t@ @end|ng |rom gm@||@com  Mon Sep  5 19:10:17 2022
From: bh@@k@r@ko|k@t@ @end|ng |rom gm@||@com (Bhaskar Mitra)
Date: Mon, 5 Sep 2022 10:10:17 -0700
Subject: [R-sig-Geo] Shapefile clipping operation help request
Message-ID: <CAEGXkYUL0hxE=vsgw20zfwVysp=77Ejyudi+LTQe1jDKVCK9ow@mail.gmail.com>

Hello All,



 I am new to geospatial analysis and would really appreciate some help in
shapefile clipping operation in R. I want to use a clipping function (or
something equivalent), whereby, if the majority of  shapefile 2 (e.x:
greater than 50 % area of shapefile 2) is within shapefile 1, I can
incorporate

shapefile 2 within shapefile 1 and generate shapefile 3.


However, if less than 50% area of shapefile 2 is within shapefile 1, then
it will be discarded.



I would really appreciate some help in this regard.



Sincerely,

	[[alternative HTML version deleted]]


From t@v|b@r @end|ng |rom gm@||@com  Mon Sep  5 21:21:13 2022
From: t@v|b@r @end|ng |rom gm@||@com (Micha Silver)
Date: Mon, 5 Sep 2022 22:21:13 +0300
Subject: [R-sig-Geo] Shapefile clipping operation help request
In-Reply-To: <CAEGXkYUL0hxE=vsgw20zfwVysp=77Ejyudi+LTQe1jDKVCK9ow@mail.gmail.com>
References: <CAEGXkYUL0hxE=vsgw20zfwVysp=77Ejyudi+LTQe1jDKVCK9ow@mail.gmail.com>
Message-ID: <039b2f71-51aa-d426-7646-e15b8f2a2758@gmail.com>


On 05/09/2022 20:10, Bhaskar Mitra wrote:
> Hello All,
>
>
>
>   I am new to geospatial analysis and would really appreciate some help in
> shapefile clipping operation in R. I want to use a clipping function (or
> something equivalent), whereby, if the majority of  shapefile 2 (e.x:
> greater than 50 % area of shapefile 2) is within shapefile 1, I can
> incorporate
>
> shapefile 2 within shapefile 1 and generate shapefile 3.
>
>
> However, if less than 50% area of shapefile 2 is within shapefile 1, then
> it will be discarded.
>

>From your question, I assume that the two shapefiles contain polygon 
features. ("Shapefile" can also be points or lines). What you want is 
the intersection between two polygon shapefiles if that intersection is 
larger in area than half the area of the second shapefile.

Shapefiles are read into R with the sf package. So this might help:


library(sf)


PartialOverlap <- function(p1, p2, overlap_portion = 0.5) {

 ??? area2 <- st_area(p2)

 ??? intersection <- st_intersection(p1, p2)

 ??? area_overlap = st_area(intersection)

 ??? if (area_overlap/area2 >= overlap_portion) {

 ??? ??? return(intersection)

 ??? }

 ??? else {

 ??? ??? return(NULL)

 ??? }

}


p1 <- st_read("your_first.shp")

p2 <- st_read("your_second.shp")

p3 <- PartialOverlap(p1, p2)


However, I would point out that polygon shapefiles can contain several 
polygon features, and also multi-polygons. You probably want to consider 
how you want to handle these cases. For example, your shapefile2 might 
contain many polygons outside of shapefile1, and only a few that 
overlap. Those individual overlaps might each be larger than half of the 
individual polygon areas but smaller than the total area of all polygons 
in shapefile2. How do you want to treat this case?

 ?Refer to Chapter 2 of: 
https://geocompr.robinlovelace.net/spatial-class.html? or any other 
basic introduction to GIS vector features for a better explanation.



>
> I would really appreciate some help in this regard.
>
>
>
> Sincerely,
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Micha Silver
Ben Gurion Univ.
Sde Boker, Remote Sensing Lab
cell: +972-523-665918


From bh@@k@r@ko|k@t@ @end|ng |rom gm@||@com  Tue Sep  6 01:07:15 2022
From: bh@@k@r@ko|k@t@ @end|ng |rom gm@||@com (Bhaskar Mitra)
Date: Mon, 5 Sep 2022 16:07:15 -0700
Subject: [R-sig-Geo] Shapefile clipping operation help request
In-Reply-To: <039b2f71-51aa-d426-7646-e15b8f2a2758@gmail.com>
References: <CAEGXkYUL0hxE=vsgw20zfwVysp=77Ejyudi+LTQe1jDKVCK9ow@mail.gmail.com>
 <039b2f71-51aa-d426-7646-e15b8f2a2758@gmail.com>
Message-ID: <CAEGXkYUWQhv7fiD_42w87EXncfw7o1+XNMp4oQSmzpuSdpYmtA@mail.gmail.com>

Thanks for your help. This is really helpful.

With regard to your comments about shapefile 2 having multiple
polygons, maybe run a loop over every polygon in shapefile 2 and run the
PartialOverlap function?




On Mon, Sep 5, 2022 at 12:21 PM Micha Silver <tsvibar at gmail.com> wrote:

>
> On 05/09/2022 20:10, Bhaskar Mitra wrote:
> > Hello All,
> >
> >
> >
> >   I am new to geospatial analysis and would really appreciate some help
> in
> > shapefile clipping operation in R. I want to use a clipping function (or
> > something equivalent), whereby, if the majority of  shapefile 2 (e.x:
> > greater than 50 % area of shapefile 2) is within shapefile 1, I can
> > incorporate
> >
> > shapefile 2 within shapefile 1 and generate shapefile 3.
> >
> >
> > However, if less than 50% area of shapefile 2 is within shapefile 1, then
> > it will be discarded.
> >
>
> From your question, I assume that the two shapefiles contain polygon
> features. ("Shapefile" can also be points or lines). What you want is
> the intersection between two polygon shapefiles if that intersection is
> larger in area than half the area of the second shapefile.
>
> Shapefiles are read into R with the sf package. So this might help:
>
>
> library(sf)
>
>
> PartialOverlap <- function(p1, p2, overlap_portion = 0.5) {
>
>      area2 <- st_area(p2)
>
>      intersection <- st_intersection(p1, p2)
>
>      area_overlap = st_area(intersection)
>
>      if (area_overlap/area2 >= overlap_portion) {
>
>          return(intersection)
>
>      }
>
>      else {
>
>          return(NULL)
>
>      }
>
> }
>
>
> p1 <- st_read("your_first.shp")
>
> p2 <- st_read("your_second.shp")
>
> p3 <- PartialOverlap(p1, p2)
>
>
> However, I would point out that polygon shapefiles can contain several
> polygon features, and also multi-polygons. You probably want to consider
> how you want to handle these cases. For example, your shapefile2 might
> contain many polygons outside of shapefile1, and only a few that
> overlap. Those individual overlaps might each be larger than half of the
> individual polygon areas but smaller than the total area of all polygons
> in shapefile2. How do you want to treat this case?
>
>   Refer to Chapter 2 of:
> https://geocompr.robinlovelace.net/spatial-class.html  or any other
> basic introduction to GIS vector features for a better explanation.
>
>
>
> >
> > I would really appreciate some help in this regard.
> >
> >
> >
> > Sincerely,
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> --
> Micha Silver
> Ben Gurion Univ.
> Sde Boker, Remote Sensing Lab
> cell: +972-523-665918
>
>

	[[alternative HTML version deleted]]


From @@ndeept@pu @end|ng |rom gm@||@com  Tue Sep  6 06:21:48 2022
From: @@ndeept@pu @end|ng |rom gm@||@com (sandeep thakur)
Date: Tue, 6 Sep 2022 09:51:48 +0530
Subject: [R-sig-Geo] performing hydrological analysis in R.reg
Message-ID: <CAOtZwhAOWjaWyOUDGUcqqe0KkjdT7LiqpPFEy9JTfCz5Zujbhw@mail.gmail.com>

Hello all,
I am new to geospatial analysis and would really appreciate some help in
performing hydrological analysis using SRTM for a river basin. I want to
estimate Morphometric indices and Geomorphic indices such as Stream Length
gradient Index, Transverse topographic index, Hypsometric integral, Basin
shape and valley to width ratio. I have been using ARC GIS and have done
some processing but am in need of some guidance.

I would really appreciate some help in this regard.



Sincerely,
Sandeep Thakur

	[[alternative HTML version deleted]]


From th|erry@onke||nx @end|ng |rom |nbo@be  Tue Sep  6 17:06:30 2022
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Tue, 6 Sep 2022 17:06:30 +0200
Subject: [R-sig-Geo] problem installing sf
Message-ID: <CAJuCY5wc5AYjZ=fqkn+kBy8SX3v+jxZO3Bkb0oa_ZC+t3RzQVg@mail.gmail.com>

Dear all,

I'm having problems installing sf on my ubuntu machine (session info
below). Here is the screen output of the installation. I removed the "g++"
output from the log.

The problem might be due to the installation of PROJ 9.0.1 from source. Any
clues on how to remove this?

Best regards,

Thierry

> install.packages("sf")
Installing package into ?/home/thierry/R/x86_64-pc-linux-gnu-library/4.0?
(as ?lib? is unspecified)
trying URL 'https://cloud.r-project.org/src/contrib/sf_1.0-8.tar.gz'
Content type 'application/x-gzip' length 3472914 bytes (3.3 MB)
==================================================
downloaded 3.3 MB

* installing *source* package ?sf? ...
** package ?sf? successfully unpacked and MD5 sums checked
** using staged installation
configure: CC: gcc
configure: CXX: g++ -std=gnu++11
checking for gdal-config... /usr/bin/gdal-config
checking gdal-config usability... yes
configure: GDAL: 3.4.3
checking GDAL version >= 2.0.1... yes
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking gdal.h usability... yes
checking gdal.h presence... yes
checking for gdal.h... yes
checking GDAL: linking with --libs only... yes
checking GDAL: /usr/share/gdal/pcs.csv readable... no
checking GDAL: checking whether PROJ is available for linking:... yes
checking GDAL: checking whether PROJ is available fur running:... yes
configure: GDAL: 3.4.3
configure: pkg-config proj exists, will use it
configure: using proj.h.
configure: PROJ: 9.0.1
checking PROJ: checking whether PROJ and sqlite3 are available for
linking:... yes
checking for geos-config... /usr/bin/geos-config
checking geos-config usability... yes
configure: GEOS: 3.10.2
checking GEOS version >= 3.4.0... yes
checking geos_c.h usability... yes
checking geos_c.h presence... yes
checking for geos_c.h... yes
checking geos: linking with -L/usr/lib/x86_64-linux-gnu -lgeos_c... yes
configure: Package CPP flags:  -I/usr/local/include
-I/usr/include/x86_64-linux-gnu -DHAVE_PROJ_H -I/usr/include/gdal
-I/usr/include
configure: Package LIBS: -L/usr/local/lib -lproj   -L/usr/lib -lgdal
-L/usr/lib/x86_64-linux-gnu -lgeos_c
configure: creating ./config.status
config.status: creating src/Makevars
** libs
installing to
/home/thierry/R/x86_64-pc-linux-gnu-library/4.0/00LOCK-sf/00new/sf/libs
** R
** demo
** inst
** byte-compile and prepare package for lazy loading
in method for ?dbWriteTable? with signature
?"PostgreSQLConnection","character","sf"?: no definition for class
?PostgreSQLConnection?
in method for ?dbDataType? with signature ?"PostgreSQLConnection","sf"?: no
definition for class ?PostgreSQLConnection?
in method for ?coerce? with signature ?"Spatial","sf"?: no definition for
class ?Spatial?
in method for ?coerce? with signature ?"Spatial","sfc"?: no definition for
class ?Spatial?
in method for ?coerce? with signature ?"sf","Spatial"?: no definition for
class ?Spatial?
in method for ?coerce? with signature ?"sfc","Spatial"?: no definition for
class ?Spatial?
in method for ?coerce? with signature ?"XY","Spatial"?: no definition for
class ?Spatial?
in method for ?coerce? with signature ?"crs","CRS"?: no definition for
class ?CRS?
in method for ?coerce? with signature ?"sgbp","sparseMatrix"?: no
definition for class ?sparseMatrix?
** help
*** installing help indices
*** copying figures
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
double free or corruption (out)
Aborted (core dumped)
ERROR: loading failed
* removing ?/home/thierry/R/x86_64-pc-linux-gnu-library/4.0/sf?

The downloaded source packages are in
?/tmp/RtmpUVf9he/downloaded_packages?
Warning message:
In install.packages("sf") :
  installation of package ?sf? had non-zero exit status

sessioninfo::session_info()
? Session info
??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
 setting  value
 version  R version 4.2.1 (2022-06-23)
 os       Ubuntu 20.04.5 LTS
 system   x86_64, linux-gnu
 ui       X11
 language nl_BE:nl
 collate  nl_BE.UTF-8
 ctype    nl_BE.UTF-8
 tz       Europe/Brussels
 date     2022-09-06
 pandoc   2.14.0.3 @ /usr/bin/pandoc

? Packages
??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
 package     * version date (UTC) lib source
 cli           3.3.0   2022-04-25 [1] CRAN (R 4.2.0)
 fortunes      1.5-4   2016-12-29 [1] CRAN (R 4.2.0)
 sessioninfo   1.2.2   2021-12-06 [1] CRAN (R 4.2.0)

 [1] /home/thierry/R/x86_64-pc-linux-gnu-library/4.0
 [2] /usr/local/lib/R/site-library
 [3] /usr/lib/R/site-library
 [4] /usr/lib/R/library


ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>

	[[alternative HTML version deleted]]


From edzer@pebe@m@ @end|ng |rom un|-muen@ter@de  Tue Sep  6 17:53:55 2022
From: edzer@pebe@m@ @end|ng |rom un|-muen@ter@de (Edzer Pebesma)
Date: Tue, 6 Sep 2022 17:53:55 +0200
Subject: [R-sig-Geo] problem installing sf
In-Reply-To: <CAJuCY5wc5AYjZ=fqkn+kBy8SX3v+jxZO3Bkb0oa_ZC+t3RzQVg@mail.gmail.com>
References: <CAJuCY5wc5AYjZ=fqkn+kBy8SX3v+jxZO3Bkb0oa_ZC+t3RzQVg@mail.gmail.com>
Message-ID: <5cda0ec9-c81e-e11d-6a51-53b4277c25fa@uni-muenster.de>

Remove any other installations of PROJ from your machine, and recompile 
anything that linked to it to the new PROJ install.

On 06/09/2022 17:06, Thierry Onkelinx via R-sig-Geo wrote:
> Dear all,
> 
> I'm having problems installing sf on my ubuntu machine (session info
> below). Here is the screen output of the installation. I removed the "g++"
> output from the log.
> 
> The problem might be due to the installation of PROJ 9.0.1 from source. Any
> clues on how to remove this?
> 
> Best regards,
> 
> Thierry
> 
>> install.packages("sf")
> Installing package into ?/home/thierry/R/x86_64-pc-linux-gnu-library/4.0?
> (as ?lib? is unspecified)
> trying URL 'https://cloud.r-project.org/src/contrib/sf_1.0-8.tar.gz'
> Content type 'application/x-gzip' length 3472914 bytes (3.3 MB)
> ==================================================
> downloaded 3.3 MB
> 
> * installing *source* package ?sf? ...
> ** package ?sf? successfully unpacked and MD5 sums checked
> ** using staged installation
> configure: CC: gcc
> configure: CXX: g++ -std=gnu++11
> checking for gdal-config... /usr/bin/gdal-config
> checking gdal-config usability... yes
> configure: GDAL: 3.4.3
> checking GDAL version >= 2.0.1... yes
> checking for gcc... gcc
> checking whether the C compiler works... yes
> checking for C compiler default output file name... a.out
> checking for suffix of executables...
> checking whether we are cross compiling... no
> checking for suffix of object files... o
> checking whether we are using the GNU C compiler... yes
> checking whether gcc accepts -g... yes
> checking for gcc option to accept ISO C89... none needed
> checking how to run the C preprocessor... gcc -E
> checking for grep that handles long lines and -e... /bin/grep
> checking for egrep... /bin/grep -E
> checking for ANSI C header files... yes
> checking for sys/types.h... yes
> checking for sys/stat.h... yes
> checking for stdlib.h... yes
> checking for string.h... yes
> checking for memory.h... yes
> checking for strings.h... yes
> checking for inttypes.h... yes
> checking for stdint.h... yes
> checking for unistd.h... yes
> checking gdal.h usability... yes
> checking gdal.h presence... yes
> checking for gdal.h... yes
> checking GDAL: linking with --libs only... yes
> checking GDAL: /usr/share/gdal/pcs.csv readable... no
> checking GDAL: checking whether PROJ is available for linking:... yes
> checking GDAL: checking whether PROJ is available fur running:... yes
> configure: GDAL: 3.4.3
> configure: pkg-config proj exists, will use it
> configure: using proj.h.
> configure: PROJ: 9.0.1
> checking PROJ: checking whether PROJ and sqlite3 are available for
> linking:... yes
> checking for geos-config... /usr/bin/geos-config
> checking geos-config usability... yes
> configure: GEOS: 3.10.2
> checking GEOS version >= 3.4.0... yes
> checking geos_c.h usability... yes
> checking geos_c.h presence... yes
> checking for geos_c.h... yes
> checking geos: linking with -L/usr/lib/x86_64-linux-gnu -lgeos_c... yes
> configure: Package CPP flags:  -I/usr/local/include
> -I/usr/include/x86_64-linux-gnu -DHAVE_PROJ_H -I/usr/include/gdal
> -I/usr/include
> configure: Package LIBS: -L/usr/local/lib -lproj   -L/usr/lib -lgdal
> -L/usr/lib/x86_64-linux-gnu -lgeos_c
> configure: creating ./config.status
> config.status: creating src/Makevars
> ** libs
> installing to
> /home/thierry/R/x86_64-pc-linux-gnu-library/4.0/00LOCK-sf/00new/sf/libs
> ** R
> ** demo
> ** inst
> ** byte-compile and prepare package for lazy loading
> in method for ?dbWriteTable? with signature
> ?"PostgreSQLConnection","character","sf"?: no definition for class
> ?PostgreSQLConnection?
> in method for ?dbDataType? with signature ?"PostgreSQLConnection","sf"?: no
> definition for class ?PostgreSQLConnection?
> in method for ?coerce? with signature ?"Spatial","sf"?: no definition for
> class ?Spatial?
> in method for ?coerce? with signature ?"Spatial","sfc"?: no definition for
> class ?Spatial?
> in method for ?coerce? with signature ?"sf","Spatial"?: no definition for
> class ?Spatial?
> in method for ?coerce? with signature ?"sfc","Spatial"?: no definition for
> class ?Spatial?
> in method for ?coerce? with signature ?"XY","Spatial"?: no definition for
> class ?Spatial?
> in method for ?coerce? with signature ?"crs","CRS"?: no definition for
> class ?CRS?
> in method for ?coerce? with signature ?"sgbp","sparseMatrix"?: no
> definition for class ?sparseMatrix?
> ** help
> *** installing help indices
> *** copying figures
> ** building package indices
> ** installing vignettes
> ** testing if installed package can be loaded from temporary location
> double free or corruption (out)
> Aborted (core dumped)
> ERROR: loading failed
> * removing ?/home/thierry/R/x86_64-pc-linux-gnu-library/4.0/sf?
> 
> The downloaded source packages are in
> ?/tmp/RtmpUVf9he/downloaded_packages?
> Warning message:
> In install.packages("sf") :
>    installation of package ?sf? had non-zero exit status
> 
> sessioninfo::session_info()
> ? Session info
> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>   setting  value
>   version  R version 4.2.1 (2022-06-23)
>   os       Ubuntu 20.04.5 LTS
>   system   x86_64, linux-gnu
>   ui       X11
>   language nl_BE:nl
>   collate  nl_BE.UTF-8
>   ctype    nl_BE.UTF-8
>   tz       Europe/Brussels
>   date     2022-09-06
>   pandoc   2.14.0.3 @ /usr/bin/pandoc
> 
> ? Packages
> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>   package     * version date (UTC) lib source
>   cli           3.3.0   2022-04-25 [1] CRAN (R 4.2.0)
>   fortunes      1.5-4   2016-12-29 [1] CRAN (R 4.2.0)
>   sessioninfo   1.2.2   2021-12-06 [1] CRAN (R 4.2.0)
> 
>   [1] /home/thierry/R/x86_64-pc-linux-gnu-library/4.0
>   [2] /usr/local/lib/R/site-library
>   [3] /usr/lib/R/site-library
>   [4] /usr/lib/R/library
> 
> 
> ir. Thierry Onkelinx
> Statisticus / Statistician
> 
> Vlaamse Overheid / Government of Flanders
> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
> FOREST
> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
> thierry.onkelinx at inbo.be
> Havenlaan 88 bus 73, 1000 Brussel
> www.inbo.be
> 
> ///////////////////////////////////////////////////////////////////////////////////////////
> To call in the statistician after the experiment is done may be no more
> than asking him to perform a post-mortem examination: he may be able to say
> what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does not
> ensure that a reasonable answer can be extracted from a given body of data.
> ~ John Tukey
> ///////////////////////////////////////////////////////////////////////////////////////////
> 
> <https://www.inbo.be>
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From n|ko@@tz|ok@@ @end|ng |rom gm@||@com  Tue Sep  6 18:45:56 2022
From: n|ko@@tz|ok@@ @end|ng |rom gm@||@com (Nikolaos Tziokas)
Date: Tue, 6 Sep 2022 17:45:56 +0100
Subject: [R-sig-Geo] How to upscale (reduce the spatial resolution) an image
 using a Gaussian filter in R?
Message-ID: <CAGg5H0b5JOs2oA8SHzmvw7Jx41fGEH6Gor=9cDo9tYxKcSV6nQ@mail.gmail.com>

Hi,

I want to resample a raster from 15m to 460m (pixel size) using a Gaussian
filter.

*The goal*

I am having a coarse image which I want to downscale. I also have a fine
resolution band to assist the downscaling. The downscaling method I am
using is called geographically weighted area-to-point regression Kriging
(GWATPRK). The method consists of two steps:

   1. GWR
   2. area-to-point Kriging on the GWR's residuals

In order to perform GWR using raster data, those needs to have the same
pixel size. This means that, my fine resolution image needs to be upscaled
to match the spatial resolution of the coarse band. This upscaling of the
fine band needs to be done using a Gaussian kernel with ?=0.5(i.e., the
PSF).

How can I upscale (reduce the spatial resolution) a satellite image using a
Gaussian kernel (i.e., point spread function)?

For reference, I am following the paper The effect of point spread function
on downscaling continua
<https://www.sciencedirect.com/science/article/pii/S092427162030229X> where
the authors at p.253 in Eq (9) mention:

*the coarse image produced by upscaling the corresponding fine band k using
a PSF.*

I googled how I can achieve that but unfortunately I couldn't find any
solution. So to do this, how can I use this Gaussian filter to change the
resolution (pixel size) of my image?

Here is the image
<https://drive.google.com/drive/folders/18_1Kshb8WbT04gwOw4d_xhfQenULDXdB?usp=sharing>
I
am trying to convolve.


Many thanks


-- 
Tziokas Nikolaos
Cartographer

Tel:(+44)07561120302
LinkedIn <http://linkedin.com/in/nikolaos-tziokas-896081130>

	[[alternative HTML version deleted]]


From md@umner @end|ng |rom gm@||@com  Wed Sep  7 01:41:19 2022
From: md@umner @end|ng |rom gm@||@com (Michael Sumner)
Date: Wed, 7 Sep 2022 09:41:19 +1000
Subject: [R-sig-Geo] 
 How to upscale (reduce the spatial resolution) an image
 using a Gaussian filter in R?
In-Reply-To: <CAGg5H0b5JOs2oA8SHzmvw7Jx41fGEH6Gor=9cDo9tYxKcSV6nQ@mail.gmail.com>
References: <CAGg5H0b5JOs2oA8SHzmvw7Jx41fGEH6Gor=9cDo9tYxKcSV6nQ@mail.gmail.com>
Message-ID: <CAAcGz9_RqnSUmtLneoM18Kaun5HYHUC2DfEnq5VoOf7Xz4OKhA@mail.gmail.com>

Hi,  I would construct the kernel and push it through terra::focal.

It should be easy enough to find the right kernel matrix but (below, as a
kind of strange alt -  to give you something to compare with) -  you might
invoke gauss resampling with overviews:

Make a dummy copy with GDAL

gdal_translate pan15.tif dummy.tif -outsize 200% 200%

then add overviews with gauss resampling, then your 2nd level will have the
same resolution as your input tif

gdaladdo dummy.tif -r gauss

then extract that level (you can't do this with gdal_translate until GDAL
3.6 but it can be arranged in R, and if you gdal_translate to the exact
outsize of the 2nd level you probably will get it exactly):

You otherwise can't control the parameters  with the app, but you possibly
could with a computed band in VRT.

Cheers, Mike

On Wed, Sep 7, 2022 at 2:46 AM Nikolaos Tziokas <nikos.tziokas at gmail.com>
wrote:

> Hi,
>
> I want to resample a raster from 15m to 460m (pixel size) using a Gaussian
> filter.
>
> *The goal*
>
> I am having a coarse image which I want to downscale. I also have a fine
> resolution band to assist the downscaling. The downscaling method I am
> using is called geographically weighted area-to-point regression Kriging
> (GWATPRK). The method consists of two steps:
>
>    1. GWR
>    2. area-to-point Kriging on the GWR's residuals
>
> In order to perform GWR using raster data, those needs to have the same
> pixel size. This means that, my fine resolution image needs to be upscaled
> to match the spatial resolution of the coarse band. This upscaling of the
> fine band needs to be done using a Gaussian kernel with ?=0.5(i.e., the
> PSF).
>
> How can I upscale (reduce the spatial resolution) a satellite image using a
> Gaussian kernel (i.e., point spread function)?
>
> For reference, I am following the paper The effect of point spread function
> on downscaling continua
> <https://www.sciencedirect.com/science/article/pii/S092427162030229X>
> where
> the authors at p.253 in Eq (9) mention:
>
> *the coarse image produced by upscaling the corresponding fine band k using
> a PSF.*
>
> I googled how I can achieve that but unfortunately I couldn't find any
> solution. So to do this, how can I use this Gaussian filter to change the
> resolution (pixel size) of my image?
>
> Here is the image
> <
> https://drive.google.com/drive/folders/18_1Kshb8WbT04gwOw4d_xhfQenULDXdB?usp=sharing
> >
> I
> am trying to convolve.
>
>
> Many thanks
>
>
> --
> Tziokas Nikolaos
> Cartographer
>
> Tel:(+44)07561120302
> LinkedIn <http://linkedin.com/in/nikolaos-tziokas-896081130>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com

	[[alternative HTML version deleted]]


From 538280 @end|ng |rom gm@||@com  Wed Sep  7 16:46:37 2022
From: 538280 @end|ng |rom gm@||@com (Greg Snow)
Date: Wed, 7 Sep 2022 08:46:37 -0600
Subject: [R-sig-Geo] 
 How to upscale (reduce the spatial resolution) an image
 using a Gaussian filter in R?
In-Reply-To: <CAGg5H0b5JOs2oA8SHzmvw7Jx41fGEH6Gor=9cDo9tYxKcSV6nQ@mail.gmail.com>
References: <CAGg5H0b5JOs2oA8SHzmvw7Jx41fGEH6Gor=9cDo9tYxKcSV6nQ@mail.gmail.com>
Message-ID: <CAFEqCdzvEDrhs4n0JRzn1LPTGCPdgc816DHS54bjk91szCaRfQ@mail.gmail.com>

The `image_resize` function in the `magick` package may be a simple
option.  A gaussian filter is one of the options.  This uses the
ImageMagick program behind the scenes, but is a quick and easy
interface within R for images (raster data).

On Tue, Sep 6, 2022 at 10:46 AM Nikolaos Tziokas
<nikos.tziokas at gmail.com> wrote:
>
> Hi,
>
> I want to resample a raster from 15m to 460m (pixel size) using a Gaussian
> filter.
>
> *The goal*
>
> I am having a coarse image which I want to downscale. I also have a fine
> resolution band to assist the downscaling. The downscaling method I am
> using is called geographically weighted area-to-point regression Kriging
> (GWATPRK). The method consists of two steps:
>
>    1. GWR
>    2. area-to-point Kriging on the GWR's residuals
>
> In order to perform GWR using raster data, those needs to have the same
> pixel size. This means that, my fine resolution image needs to be upscaled
> to match the spatial resolution of the coarse band. This upscaling of the
> fine band needs to be done using a Gaussian kernel with ?=0.5(i.e., the
> PSF).
>
> How can I upscale (reduce the spatial resolution) a satellite image using a
> Gaussian kernel (i.e., point spread function)?
>
> For reference, I am following the paper The effect of point spread function
> on downscaling continua
> <https://www.sciencedirect.com/science/article/pii/S092427162030229X> where
> the authors at p.253 in Eq (9) mention:
>
> *the coarse image produced by upscaling the corresponding fine band k using
> a PSF.*
>
> I googled how I can achieve that but unfortunately I couldn't find any
> solution. So to do this, how can I use this Gaussian filter to change the
> resolution (pixel size) of my image?
>
> Here is the image
> <https://drive.google.com/drive/folders/18_1Kshb8WbT04gwOw4d_xhfQenULDXdB?usp=sharing>
> I
> am trying to convolve.
>
>
> Many thanks
>
>
> --
> Tziokas Nikolaos
> Cartographer
>
> Tel:(+44)07561120302
> LinkedIn <http://linkedin.com/in/nikolaos-tziokas-896081130>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From ren@n_@eren|n| @end|ng |rom hotm@||@com  Thu Sep  8 01:00:51 2022
From: ren@n_@eren|n| @end|ng |rom hotm@||@com (Renan Serenini Bernardes)
Date: Wed, 7 Sep 2022 23:00:51 +0000
Subject: [R-sig-Geo] Estimate Spatial Autoregressive model using weighted
 least squares
Message-ID: <BYAPR06MB519249406E363F2E4B9394EDE7419@BYAPR06MB5192.namprd06.prod.outlook.com>

I have a regression estimated via OLS and WLS and would like to test for spatial effects (estimate SAR) in both models, but I didn't find how to use WLS in SAR model. The package spatialreg offers the option to include weights just for the Spatial Error Model (function errorsarlm). By reading the manual I thought the function spautolm with the argument SAR should do it, but the results seem to be exactly the same of SEM.
Replication:
library(spatialreg)
data(oldcol, package="spdep")
listw <- spdep::nb2listw(COL.nb, style="W")
COL.OLD$POP <- rnorm(49, 1000, 400)

model1 <- errorsarlm(CRIME ~ INC + HOVAL, data=COL.OLD,
                 weights=POP,listw=listw)
model2 <- spautolm(CRIME ~ INC + HOVAL, data=COL.OLD,family = "SAR",
               weights=POP,listw=listw)
summary(model1)
summary(model2)
How can I estimate the SAR model?
Respectfully,
Renan

	[[alternative HTML version deleted]]


From me| @end|ng |rom mb@cou@com  Thu Sep  8 02:49:42 2022
From: me| @end|ng |rom mb@cou@com (Melanie Bacou)
Date: Thu, 8 Sep 2022 01:49:42 +0100
Subject: [R-sig-Geo] performing hydrological analysis in R.reg
In-Reply-To: <CAOtZwhAOWjaWyOUDGUcqqe0KkjdT7LiqpPFEy9JTfCz5Zujbhw@mail.gmail.com>
References: <CAOtZwhAOWjaWyOUDGUcqqe0KkjdT7LiqpPFEy9JTfCz5Zujbhw@mail.gmail.com>
Message-ID: <00f28e9a-53c5-ba9d-f76b-2c0925afa392@mbacou.com>

Sandeep,

You can take a look at the Hydrological R taskview (under section 
Hydrograph Analysis) https://cran.r-project.org/web/views/Hydrology.html 
for a list of relevant packages and functions, in particular the 
vignette for package *HydroTSM*.

--Mel.

On 9/6/22 5:21 AM, sandeep thakur wrote:
> Hello all,
> I am new to geospatial analysis and would really appreciate some help in
> performing hydrological analysis using SRTM for a river basin. I want to
> estimate Morphometric indices and Geomorphic indices such as Stream Length
> gradient Index, Transverse topographic index, Hypsometric integral, Basin
> shape and valley to width ratio. I have been using ARC GIS and have done
> some processing but am in need of some guidance.
>
> I would really appreciate some help in this regard.
>
>
>
> Sincerely,
> Sandeep Thakur
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

	[[alternative HTML version deleted]]


From Roger@B|v@nd @end|ng |rom nhh@no  Thu Sep  8 10:29:03 2022
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Thu, 8 Sep 2022 10:29:03 +0200 (CEST)
Subject: [R-sig-Geo] 
 Estimate Spatial Autoregressive model using weighted least squares
In-Reply-To: <BYAPR06MB519249406E363F2E4B9394EDE7419@BYAPR06MB5192.namprd06.prod.outlook.com>
References: <BYAPR06MB519249406E363F2E4B9394EDE7419@BYAPR06MB5192.namprd06.prod.outlook.com>
Message-ID: <7e63d573-286-36b0-9259-3c0591d2c33@reclus2.nhh.no>

On Wed, 7 Sep 2022, Renan Serenini Bernardes wrote:

> I have a regression estimated via OLS and WLS and would like to test for 
> spatial effects (estimate SAR) in both models, but I didn't find how to 
> use WLS in SAR model. The package spatialreg offers the option to 
> include weights just for the Spatial Error Model (function errorsarlm). 
> By reading the manual I thought the function spautolm with the argument 
> SAR should do it, but the results seem to be exactly the same of SEM.

No, SAR in spautolm() means "simultaneous autoregressive" contrasting with 
CAR "conditional autoregressive", both SAR and CAR model autocorrelation 
in the error, so spautolm() and errorsarlm() should give the same results.

If by SAR you mean "spatial autoregressive", you actually mean SLM 
"spatial lag model", contrasting with SEM "spatial error model".

The theory for including case weights in models except those with the 
spatially lagged response (SLM, SDM, GNM) is known, for models with the 
spatially lagged response it is not known (it might be possible to 
estimate the models, but the variance-covariance matrix of the 
coefficients is not at present known as far as I understand).

Do you have a robust reason for not using SEM, SDEM or SLX rather than 
SLM or SDM? See perhaps https://doi.org/10.18335/region.v4i1.107 and the 
reference there to Solon et al. (2015) on case weights in econometric 
models.

Hope this helps,

Roger

> Replication:
> library(spatialreg)
> data(oldcol, package="spdep")
> listw <- spdep::nb2listw(COL.nb, style="W")
> COL.OLD$POP <- rnorm(49, 1000, 400)
>
> model1 <- errorsarlm(CRIME ~ INC + HOVAL, data=COL.OLD,
>                 weights=POP,listw=listw)
> model2 <- spautolm(CRIME ~ INC + HOVAL, data=COL.OLD,family = "SAR",
>               weights=POP,listw=listw)
> summary(model1)
> summary(model2)
> How can I estimate the SAR model?
> Respectfully,
> Renan
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7CRoger.Bivand%40nhh.no%7Cd7ef94c7458e48bfd80c08da9124e210%7C33a15b2f849941998d56f20b5aa91af2%7C0%7C0%7C637981884997172815%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=sMFvdS9V4ndEij35aycL2QQ4T8cqziN79DOADM41TEY%3D&amp;reserved=0
>

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From @own@|ch@nd|m@ @end|ng |rom gm@||@com  Sun Sep 11 05:22:19 2022
From: @own@|ch@nd|m@ @end|ng |rom gm@||@com (sownal chand)
Date: Sun, 11 Sep 2022 15:22:19 +1200
Subject: [R-sig-Geo] Extract Lightning Flash Time series data
Message-ID: <CAH5tCz3xkwzxHEr_0eP-wURHr2dvgJmn=uN8uzj617tHRpZqWQ@mail.gmail.com>

Hello Sir/Madam,

I have downloaded a TRMM_LIS.nc File with lightning time series data and
was trying to extract it into a CSV file but I am not sure on how to do it.

I am also attaching the TRMM_LIS file via this link:
https://drive.google.com/drive/u/0/folders/19nJNwPKlJaPlkHn_NGzmjMHMaoUevH04

Request if someone can guide me and thanking you in advance
sownalc

	[[alternative HTML version deleted]]


From md@umner @end|ng |rom gm@||@com  Sun Sep 11 06:50:58 2022
From: md@umner @end|ng |rom gm@||@com (Michael Sumner)
Date: Sun, 11 Sep 2022 14:50:58 +1000
Subject: [R-sig-Geo] Extract Lightning Flash Time series data
In-Reply-To: <CAH5tCz3xkwzxHEr_0eP-wURHr2dvgJmn=uN8uzj617tHRpZqWQ@mail.gmail.com>
References: <CAH5tCz3xkwzxHEr_0eP-wURHr2dvgJmn=uN8uzj617tHRpZqWQ@mail.gmail.com>
Message-ID: <CAAcGz9-paRfVchNWG2HC73AVXnXBEuELExDbKfz1d=Q8qZAUdQ@mail.gmail.com>

I don't understand this file structure yet, but you might try tidync:

library(tidync)
## open the file and get a summary of all vars and the dimensions they use
(nc <- tidync::tidync("TRMM_LIS.nc"))

See how viewtime_lat, viewtime_lon (and others) exist on the grid
identified by "D0" (other grids include multiple dims and so have
identifiers like "D1,D2" - this concept doesn't exist in NetCDF itself but
tidync wanted to group variables by the dims they use).

The grid "D0" is not active by default, so you can do

nc |> activate("D0")

(everything is lazy up to this point, no data has been read)

Convert to dataframe with

nc |> activate("D0") |> hyper_tibble()

You can use hyper_array() to get in native array format with some informal
metadata on the output.

HTH, otherwise package stars has another approach and some similar
facilities.  I often use tidync just to understand what's there, but I
might craft a solution with a different tool after I've explored. RNetCDF
will give you direct low level access to this format, for example.

Cheers, Mike




On Sun, Sep 11, 2022 at 1:22 PM sownal chand <sownalchandfms at gmail.com>
wrote:

> Hello Sir/Madam,
>
> I have downloaded a TRMM_LIS.nc File with lightning time series data and
> was trying to extract it into a CSV file but I am not sure on how to do it.
>
> I am also attaching the TRMM_LIS file via this link:
>
> https://drive.google.com/drive/u/0/folders/19nJNwPKlJaPlkHn_NGzmjMHMaoUevH04
>
> Request if someone can guide me and thanking you in advance
> sownalc
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com

	[[alternative HTML version deleted]]


From @own@|ch@nd|m@ @end|ng |rom gm@||@com  Sun Sep 11 07:16:19 2022
From: @own@|ch@nd|m@ @end|ng |rom gm@||@com (sownal chand)
Date: Sun, 11 Sep 2022 17:16:19 +1200
Subject: [R-sig-Geo] Extract Lightning Flash Time series data
In-Reply-To: <CAAcGz9-paRfVchNWG2HC73AVXnXBEuELExDbKfz1d=Q8qZAUdQ@mail.gmail.com>
References: <CAH5tCz3xkwzxHEr_0eP-wURHr2dvgJmn=uN8uzj617tHRpZqWQ@mail.gmail.com>
 <CAAcGz9-paRfVchNWG2HC73AVXnXBEuELExDbKfz1d=Q8qZAUdQ@mail.gmail.com>
Message-ID: <CAH5tCz2YCu2G4xKoFALBwqGvhUju6ahq9mnDaPA0c_LMJ7AhVA@mail.gmail.com>

Thanks Michael


But i will try out your approach and let see how it goes.

Kind regards
Sownalc

On Sun, Sep 11, 2022, 16:51 Michael Sumner <mdsumner at gmail.com> wrote:

> I don't understand this file structure yet, but you might try tidync:
>
> library(tidync)
> ## open the file and get a summary of all vars and the dimensions they use
> (nc <- tidync::tidync("TRMM_LIS.nc"))
>
> See how viewtime_lat, viewtime_lon (and others) exist on the grid
> identified by "D0" (other grids include multiple dims and so have
> identifiers like "D1,D2" - this concept doesn't exist in NetCDF itself but
> tidync wanted to group variables by the dims they use).
>
> The grid "D0" is not active by default, so you can do
>
> nc |> activate("D0")
>
> (everything is lazy up to this point, no data has been read)
>
> Convert to dataframe with
>
> nc |> activate("D0") |> hyper_tibble()
>
> You can use hyper_array() to get in native array format with some informal
> metadata on the output.
>
> HTH, otherwise package stars has another approach and some similar
> facilities.  I often use tidync just to understand what's there, but I
> might craft a solution with a different tool after I've explored. RNetCDF
> will give you direct low level access to this format, for example.
>
> Cheers, Mike
>
>
>
>
> On Sun, Sep 11, 2022 at 1:22 PM sownal chand <sownalchandfms at gmail.com>
> wrote:
>
>> Hello Sir/Madam,
>>
>> I have downloaded a TRMM_LIS.nc File with lightning time series data and
>> was trying to extract it into a CSV file but I am not sure on how to do
>> it.
>>
>> I am also attaching the TRMM_LIS file via this link:
>>
>> https://drive.google.com/drive/u/0/folders/19nJNwPKlJaPlkHn_NGzmjMHMaoUevH04
>>
>> Request if someone can guide me and thanking you in advance
>> sownalc
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>
> --
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>

	[[alternative HTML version deleted]]


From edzer@pebe@m@ @end|ng |rom un|-muen@ter@de  Mon Sep 12 11:42:14 2022
From: edzer@pebe@m@ @end|ng |rom un|-muen@ter@de (Edzer Pebesma)
Date: Mon, 12 Sep 2022 11:42:14 +0200
Subject: [R-sig-Geo] Extract Lightning Flash Time series data
In-Reply-To: <CAH5tCz2YCu2G4xKoFALBwqGvhUju6ahq9mnDaPA0c_LMJ7AhVA@mail.gmail.com>
References: <CAH5tCz3xkwzxHEr_0eP-wURHr2dvgJmn=uN8uzj617tHRpZqWQ@mail.gmail.com>
 <CAAcGz9-paRfVchNWG2HC73AVXnXBEuELExDbKfz1d=Q8qZAUdQ@mail.gmail.com>
 <CAH5tCz2YCu2G4xKoFALBwqGvhUju6ahq9mnDaPA0c_LMJ7AhVA@mail.gmail.com>
Message-ID: <6fa68ce4-a473-dcac-b597-cdb7393e0a47@uni-muenster.de>

Someone tried to pack a lot of different things in that netcdf file! Is 
there one particular variable that is of main interest to you? AFAICT 
the primary observations seem like (long,lat,time,something_measured)
sets, as if along a trajectory. Finding the variables that depend on 
dimension viewtime_dim give you 2097 records of them.

Package stars is not so well equiped for one-dimensional arrays - sf 
would be more suitable in terms of data structure but GDAL doesn't seem 
to understand the file to contain vector (POINT) geometries.

I think I would go for using packages like RNetCDF or ncdf4 and 
extracting the one-dimensional variables of interest, then cbind-ing them.

On 11/09/2022 07:16, sownal chand wrote:
> Thanks Michael
> 
> 
> But i will try out your approach and let see how it goes.
> 
> Kind regards
> Sownalc
> 
> On Sun, Sep 11, 2022, 16:51 Michael Sumner <mdsumner at gmail.com> wrote:
> 
>> I don't understand this file structure yet, but you might try tidync:
>>
>> library(tidync)
>> ## open the file and get a summary of all vars and the dimensions they use
>> (nc <- tidync::tidync("TRMM_LIS.nc"))
>>
>> See how viewtime_lat, viewtime_lon (and others) exist on the grid
>> identified by "D0" (other grids include multiple dims and so have
>> identifiers like "D1,D2" - this concept doesn't exist in NetCDF itself but
>> tidync wanted to group variables by the dims they use).
>>
>> The grid "D0" is not active by default, so you can do
>>
>> nc |> activate("D0")
>>
>> (everything is lazy up to this point, no data has been read)
>>
>> Convert to dataframe with
>>
>> nc |> activate("D0") |> hyper_tibble()
>>
>> You can use hyper_array() to get in native array format with some informal
>> metadata on the output.
>>
>> HTH, otherwise package stars has another approach and some similar
>> facilities.  I often use tidync just to understand what's there, but I
>> might craft a solution with a different tool after I've explored. RNetCDF
>> will give you direct low level access to this format, for example.
>>
>> Cheers, Mike
>>
>>
>>
>>
>> On Sun, Sep 11, 2022 at 1:22 PM sownal chand <sownalchandfms at gmail.com>
>> wrote:
>>
>>> Hello Sir/Madam,
>>>
>>> I have downloaded a TRMM_LIS.nc File with lightning time series data and
>>> was trying to extract it into a CSV file but I am not sure on how to do
>>> it.
>>>
>>> I am also attaching the TRMM_LIS file via this link:
>>>
>>> https://drive.google.com/drive/u/0/folders/19nJNwPKlJaPlkHn_NGzmjMHMaoUevH04
>>>
>>> Request if someone can guide me and thanking you in advance
>>> sownalc
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>>
>> --
>> Michael Sumner
>> Software and Database Engineer
>> Australian Antarctic Division
>> Hobart, Australia
>> e-mail: mdsumner at gmail.com
>>
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From rp@o|o1967 @end|ng |rom gm@||@com  Mon Sep 12 12:17:41 2022
From: rp@o|o1967 @end|ng |rom gm@||@com (rpaolo1967 RP)
Date: Mon, 12 Sep 2022 07:17:41 -0300
Subject: [R-sig-Geo] On simultaneous autoregressive spatial models
Message-ID: <CANvsoOuEw6N5c8OAfix5hqscASmZsywpayY99BbLdA_By7K5-g@mail.gmail.com>

Hi everyone,
Perhaps a dummy question. Can anybody please tell me whether is it
possible to fit a simultaneous autoregressive spatial model with both
quantitative and qualitative variables?

Paolo Ramoni

	[[alternative HTML version deleted]]


From Roger@B|v@nd @end|ng |rom nhh@no  Tue Sep 13 17:28:48 2022
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Tue, 13 Sep 2022 17:28:48 +0200 (CEST)
Subject: [R-sig-Geo] On simultaneous autoregressive spatial models
In-Reply-To: <CANvsoOuEw6N5c8OAfix5hqscASmZsywpayY99BbLdA_By7K5-g@mail.gmail.com>
References: <CANvsoOuEw6N5c8OAfix5hqscASmZsywpayY99BbLdA_By7K5-g@mail.gmail.com>
Message-ID: <348a24ca-fc4b-baca-e572-d7ac6f6dd72c@reclus2.nhh.no>

On Mon, 12 Sep 2022, rpaolo1967 RP wrote:

> Hi everyone,
> Perhaps a dummy question. Can anybody please tell me whether is it
> possible to fit a simultaneous autoregressive spatial model with both
> quantitative and qualitative variables?

On the RHS, yes, LHS would be limited dependent variables for qualitative, 
so not so easy - spatial probit etc. are available, but it isn't clear 
what your needs are.

Hope this helps,

Roger

>
> Paolo Ramoni
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7CRoger.Bivand%40nhh.no%7C4f147d649a654598498908da94a82056%7C33a15b2f849941998d56f20b5aa91af2%7C0%7C0%7C637985747221500971%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=CDAxvMFToVha7hEoyhn2wQqGyMxpNGbxbiujwbDGm7g%3D&amp;reserved=0
>

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From rp@o|o1967 @end|ng |rom gm@||@com  Tue Sep 13 18:34:55 2022
From: rp@o|o1967 @end|ng |rom gm@||@com (rpaolo1967 RP)
Date: Tue, 13 Sep 2022 13:34:55 -0300
Subject: [R-sig-Geo] On simultaneous autoregressive spatial models
In-Reply-To: <348a24ca-fc4b-baca-e572-d7ac6f6dd72c@reclus2.nhh.no>
References: <CANvsoOuEw6N5c8OAfix5hqscASmZsywpayY99BbLdA_By7K5-g@mail.gmail.com>
 <348a24ca-fc4b-baca-e572-d7ac6f6dd72c@reclus2.nhh.no>
Message-ID: <CANvsoOvGO-HOFgkMuF3hHL6fzqLVr75yUtX1PTVcr6hLXDQ4Fw@mail.gmail.com>

Thank you, Dr. Bivand. I'm modeling species distributions and need to
"thin" my data to reduce the effect of spatial autocorrelation. I'm using
both continuous (climate, etc.) and categorical (soil, etc.) variables. The
idea would be to fit simultaneous autoregressive models to the occurrence
data, use the resulting autoregressive coefficients to estimate the degrees
of freedom in the dataset, and consider them as the number of spatially
independent occurrences.

Again, thank you!

Paolo

El mar, 13 sept 2022 a las 12:28, Roger Bivand (<Roger.Bivand at nhh.no>)
escribi?:

> On Mon, 12 Sep 2022, rpaolo1967 RP wrote:
>
> > Hi everyone,
> > Perhaps a dummy question. Can anybody please tell me whether is it
> > possible to fit a simultaneous autoregressive spatial model with both
> > quantitative and qualitative variables?
>
> On the RHS, yes, LHS would be limited dependent variables for qualitative,
> so not so easy - spatial probit etc. are available, but it isn't clear
> what your needs are.
>
> Hope this helps,
>
> Roger
>
> >
> > Paolo Ramoni
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> >
> https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7CRoger.Bivand%40nhh.no%7C4f147d649a654598498908da94a82056%7C33a15b2f849941998d56f20b5aa91af2%7C0%7C0%7C637985747221500971%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=CDAxvMFToVha7hEoyhn2wQqGyMxpNGbxbiujwbDGm7g%3D&amp;reserved=0
> >
>
> --
> Roger Bivand
> Emeritus Professor
> Department of Economics, Norwegian School of Economics,
> Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
> e-mail: Roger.Bivand at nhh.no
> https://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>

	[[alternative HTML version deleted]]


From r@m@n@m|@hr@10 @end|ng |rom gm@||@com  Sat Sep 24 20:07:15 2022
From: r@m@n@m|@hr@10 @end|ng |rom gm@||@com (Raman Mishra)
Date: Sat, 24 Sep 2022 23:37:15 +0530
Subject: [R-sig-Geo] tmap_dots issue
Message-ID: <CAGmiv2KLeMSeU5ThSZdwCgwfc8NBJ4ipB+soDW1Zd6i7Gs5E_g@mail.gmail.com>

Dear Members,
I am using tm_dots with a factor variable (to identify regions with
symbols), I need to identify only one category (regions with symbols) I do
not want to plot the second category. I tried a lot but couldn't find a
solution. Further, instead of the title, the variable name appears.
Please find the code below and provide a solution.

tm_shape(myshape1) +
  tm_polygons(col = "open4", palette="Oranges" , border.col = "red",
border.alpha = 0.5, legend.hist = FALSE, title="Prevalence open",
style="cont", colorNA="white")  +
  tm_legend(legend.outside = TRUE) + tm_scale_bar() +
  tm_layout( frame=F, legend.title.size = 1, legend.text.size = .65) +
  tm_dots("T_AD_707_1", size=0.06 ,col="black",  title = "Districts Type")


Thanks & regards,
Raman Mishra

	[[alternative HTML version deleted]]


From n|ko@@tz|ok@@ @end|ng |rom gm@||@com  Sat Sep 24 20:13:56 2022
From: n|ko@@tz|ok@@ @end|ng |rom gm@||@com (Nikolaos Tziokas)
Date: Sat, 24 Sep 2022 19:13:56 +0100
Subject: [R-sig-Geo] 
 How to upscale (reduce the spatial resolution) an image
 using a Gaussian filter in R?
In-Reply-To: <CAFEqCdzvEDrhs4n0JRzn1LPTGCPdgc816DHS54bjk91szCaRfQ@mail.gmail.com>
References: <CAGg5H0b5JOs2oA8SHzmvw7Jx41fGEH6Gor=9cDo9tYxKcSV6nQ@mail.gmail.com>
 <CAFEqCdzvEDrhs4n0JRzn1LPTGCPdgc816DHS54bjk91szCaRfQ@mail.gmail.com>
Message-ID: <CAGg5H0b0PaQMEm=vyZuq6G_O4HHwgwk3e5K9RsJzU4Hz3ghzOg@mail.gmail.com>

I managed to solve the issue using the OpenImageR package and the function
down_sample_image.

library(raster)
library(OpenImageR)

r = raster("path/tirs.tif")

m = as.matrix(r)

psf = down_sample_image(m,
                        factor = 4.6, # zoom factor
                        gaussian_blur = T,
                        gauss_sigma = 0.5 * 100) # sigma * pixel size

e <- extent(r)

m2r <- raster(psf)
extent(m2r) <- e
raster::crs(m2r) <- "EPSG:7767"
res(m2r)

writeRaster(m2r, "path/tirs460.tif")

The function seems to do exactly what the creator of the area-to-point
regression Kriging, Qunming Wang, did with in his Matlab code (
https://github.com/qunmingwang/Code-for-S2-fusion/blob/master/PSF_template.m).
That is, he multiplied the width of the PSF with scale factor.


???? ???, 7 ??? 2022, 15:46 ? ??????? Greg Snow <538280 at gmail.com> ??????:

> The `image_resize` function in the `magick` package may be a simple
> option.  A gaussian filter is one of the options.  This uses the
> ImageMagick program behind the scenes, but is a quick and easy
> interface within R for images (raster data).
>
> On Tue, Sep 6, 2022 at 10:46 AM Nikolaos Tziokas
> <nikos.tziokas at gmail.com> wrote:
> >
> > Hi,
> >
> > I want to resample a raster from 15m to 460m (pixel size) using a
> Gaussian
> > filter.
> >
> > *The goal*
> >
> > I am having a coarse image which I want to downscale. I also have a fine
> > resolution band to assist the downscaling. The downscaling method I am
> > using is called geographically weighted area-to-point regression Kriging
> > (GWATPRK). The method consists of two steps:
> >
> >    1. GWR
> >    2. area-to-point Kriging on the GWR's residuals
> >
> > In order to perform GWR using raster data, those needs to have the same
> > pixel size. This means that, my fine resolution image needs to be
> upscaled
> > to match the spatial resolution of the coarse band. This upscaling of the
> > fine band needs to be done using a Gaussian kernel with ?=0.5(i.e., the
> > PSF).
> >
> > How can I upscale (reduce the spatial resolution) a satellite image
> using a
> > Gaussian kernel (i.e., point spread function)?
> >
> > For reference, I am following the paper The effect of point spread
> function
> > on downscaling continua
> > <https://www.sciencedirect.com/science/article/pii/S092427162030229X>
> where
> > the authors at p.253 in Eq (9) mention:
> >
> > *the coarse image produced by upscaling the corresponding fine band k
> using
> > a PSF.*
> >
> > I googled how I can achieve that but unfortunately I couldn't find any
> > solution. So to do this, how can I use this Gaussian filter to change the
> > resolution (pixel size) of my image?
> >
> > Here is the image
> > <
> https://drive.google.com/drive/folders/18_1Kshb8WbT04gwOw4d_xhfQenULDXdB?usp=sharing
> >
> > I
> > am trying to convolve.
> >
> >
> > Many thanks
> >
> >
> > --
> > Tziokas Nikolaos
> > Cartographer
> >
> > Tel:(+44)07561120302
> > LinkedIn <http://linkedin.com/in/nikolaos-tziokas-896081130>
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
> --
> Gregory (Greg) L. Snow Ph.D.
> 538280 at gmail.com
>

	[[alternative HTML version deleted]]


From n|ko@@tz|ok@@ @end|ng |rom gm@||@com  Mon Sep 26 19:59:13 2022
From: n|ko@@tz|ok@@ @end|ng |rom gm@||@com (Nikolaos Tziokas)
Date: Mon, 26 Sep 2022 18:59:13 +0100
Subject: [R-sig-Geo] How to check which model of an ensemble algorithm has
 been selected to perform regression?
Message-ID: <CAGg5H0Y42TdYcoy2i=A7mHvcVwvdYWay2+PE-eBMP4R48kM+HQ@mail.gmail.com>

I am using the R package machisplin
<https://github.com/jasonleebrown/machisplin> (it's not on CRAN) to
downscale a satellite image. According to the description of the package:

*The machisplin.mltps function simultaneously evaluates different
combinations of the six algorithms to predict the input data. During model
tuning, each algorithm is systematically weighted from 0-1 and the fit of
the ensembled model is evaluated. The best performing model is determined
through k-fold cross validation (k=10) and the model that has the lowest
residual sum of squares of test data is chosen. After determining the best
model algorithms and weights, a final model is created using the full
training dataset.*

My question is how can I check which model out of the 6 has been selected
for the downscaling? To put it differently, when I export the downscaled
image, I would like to know which algorithm (out of the 6) has been used to
perform the downscaling.

Here is the code:

library(MACHISPLIN)
library(raster)
library(gbm)

evi = raster("path/evi.tif") # covariate
ntl = raster("path/ntl_1600.tif") # raster to be downscaled
##convert one of the rasters to a point dataframe to sample.  Use any
raster input.
ntl.points<-rasterToPoints(ntl,
fun = NULL,
spatial = FALSE)
##subset only the x and y data
ntl.points<- ntl.points[,1:2]
##Extract values to points from rasters
RAST_VAL<-data.frame(extract(ntl, ntl.points))
##merge sampled data to input
InInterp<-cbind(ntl.points, RAST_VAL)
#run an ensemble machine learning thin plate spline
interp.rast<-machisplin.mltps(int.values = InInterp,
                              covar.ras = evi,
                              smooth.outputs.only = T,
                              tps = T,
                              n.cores = 4)
#set negative values to 0
interp.rast[[1]]$final[interp.rast[[1]]$final <= 0] <- 0

writeRaster(interp.rast[[1]]$final,
            filename = "path/ntl_splines.tif")

I vied all the output parameters (please refer to *Example 2* in the
package description) but I couldn't find anything relevant to my question.

I have posted a question
<https://github.com/jasonleebrown/machisplin/issues/10> on GitHub as well.
>From here
<https://drive.google.com/drive/folders/17SnegdgZ0192nqtP-95O55ZNPLngNMQH?usp=sharing>
you
can download my images.

-- 
Tziokas Nikolaos
Cartographer

Tel:(+44)07561120302
LinkedIn <http://linkedin.com/in/nikolaos-tziokas-896081130>

	[[alternative HTML version deleted]]


From jth@yn @end|ng |rom ||@tu@edu  Thu Sep 29 05:27:16 2022
From: jth@yn @end|ng |rom ||@tu@edu (Thayn, Jonathan)
Date: Thu, 29 Sep 2022 03:27:16 +0000
Subject: [R-sig-Geo] terra::app
Message-ID: <CD717392-6081-44D5-A8A0-8B5A7C34E40F@ilstu.edu>

I keep getting the following message when using terra:app ?? Error: [app] the number of values returned by 'fun' is not appropriate. I can?t figure out what I?m doing wrong. A sample code is below:




library(terra)
the.raster <- rast(ncol=4,nrow=4)
the.raster[] <- sample(0:65535,16)

get.snow <- function(j){
k <- as.numeric(intToBits(j)[10:11])
m <- k%*%1:2
return(m)
}

new.raster <- app(the.raster,get.snow)


	[[alternative HTML version deleted]]


From b|@|ev||@t @end|ng |rom gm@||@com  Thu Sep 29 14:18:53 2022
From: b|@|ev||@t @end|ng |rom gm@||@com (=?UTF-8?Q?Bede-Fazekas_=c3=81kos?=)
Date: Thu, 29 Sep 2022 14:18:53 +0200
Subject: [R-sig-Geo] terra::app
In-Reply-To: <CD717392-6081-44D5-A8A0-8B5A7C34E40F@ilstu.edu>
References: <CD717392-6081-44D5-A8A0-8B5A7C34E40F@ilstu.edu>
Message-ID: <fd89428b-f776-0c0a-ce41-0bf0f8bf16db@gmail.com>

Dear Jonathan,

Function get.snow() is not vectorized, i.e. it does not return a vector 
of the same length as its input. According to the help of app(), "The 
function should return a vector or matrix that is divisible by ncell(x).".

HTH,
?kos Bede-Fazekas
Centre for Ecological Research
Hungary

2022.09.29. 5:27 keltez?ssel, Thayn, Jonathan ?rta:
> I keep getting the following message when using terra:app ?? Error: [app] the number of values returned by 'fun' is not appropriate. I can?t figure out what I?m doing wrong. A sample code is below:
>
>
>
>
> library(terra)
> the.raster <- rast(ncol=4,nrow=4)
> the.raster[] <- sample(0:65535,16)
>
> get.snow <- function(j){
> k <- as.numeric(intToBits(j)[10:11])
> m <- k%*%1:2
> return(m)
> }
>
> new.raster <- app(the.raster,get.snow)
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From tom@heng| @end|ng |rom gm@||@com  Thu Sep 29 15:11:12 2022
From: tom@heng| @end|ng |rom gm@||@com (Tomislav Hengl)
Date: Thu, 29 Sep 2022 15:11:12 +0200
Subject: [R-sig-Geo] 2 post-doctoral data scientists + 1 geovisualization
 expert at OpenGeoHub
Message-ID: <2152114e-2499-ec74-214b-b1baf207b4e1@gmail.com>


We are hiring 3 new researchers to help with our EU Horizon + Int 
projects aiming at building Data Cubes, mapping dynamic soil properties 
& building data science dashboards: 1 Post-doctoral data scientist: 
Global Earth Observation data sets, 2 Post-doctoral data scientist: 
dynamic soil-landscape modeler, 3 Data scientist: Geovisualization and 
dashboard building expert: https://opengeohub.org/category/jobs/

Our special interest is R / Python / OSGeo enthusiast eager to help 
develop open source solutions and establish and strengthen open 
development communities.

Application deadline: 1st of November 2022

Come and work with us on using data science to solve global & EU 
environmental problems!

"Post-doctoral data scientist: Global Earth Observation data sets"
Application Deadline: 1st of November 2022
Possible start date: 1st of January 2023
Duration: 3+ years,
Job location: Agro Business Park 10, Wageningen
Bruto monthly salary: starting at ?4,078 gross per month depending on 
experience
Job type: post-doctoral researcher
Fields: geocomputation, environmental sciences, Earth Observation, big 
data, data science, HPC, Digital Twin Earth, 
https://opengeohub.org/jobs/post-doctoral-data-scientist-global-earth-observation-data-sets/

"Post-doctoral data scientist: dynamic soil-landscape modeler"
Application Deadline: 1st of November 2022
Possible start date: 1st of January 2023
Duration: 3+ years,
Job location: Agro Business Park 10, Wageningen
Bruto monthly salary: starting at ?3.807 gross per month depending on 
experience
Job type: post-doctoral researcher
Fields: Fields: pedometrics, geocomputation, global datasets, 
environmental sciences, Earth observation, data science, HPC
https://opengeohub.org/jobs/post-doctoral-data-scientist-dynamic-soil-landscape-modeler/

"Data scientist: Geovisualization and dashboard building"
Possible start date: 1st of January 2023
Duration: 2+ years,
Job location: Agro Business Park 10, Wageningen
Bruto monthly salary: ?2.836 gross per month (with possible bonuses)
Job type: research assistant
Fields: geovisualization, econometrics, geocomputation, environmental 
sciences, Earth observation, data science, environmental-economic accounting
https://opengeohub.org/jobs/data-scientist-geovisualization-and-dashboard-building/

-- 
T. (Tom) Hengl
Technical director / Vice Chair
The OpenGeoHub Foundation
Visiting address: Agro Business Park 10, 6708PW Wageningen, NL
Tel: +31 (0)317 427537
Url: https://opengeohub.org/about
Twitter: https://twitter.com/opengeohub
Medium: https://opengeohub.medium.com/
TIB: https://av.tib.eu/publisher/OpenGeoHub_Foundation
https://www.youtube.com/c/OpenGeoHubFoundation
skype:tom.hengl?chat
Publications: http://scholar.google.com/citations?user=2oYU7S8AAAAJ


From m@p|no|@10 @end|ng |rom gm@||@com  Fri Sep 30 17:08:09 2022
From: m@p|no|@10 @end|ng |rom gm@||@com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Fri, 30 Sep 2022 09:08:09 -0600
Subject: [R-sig-Geo] How to use st_rasterize (stars) for a categorical field
 like terra does?
Message-ID: <CABkCotSjmKgEafW5STMdJr368KYdzLoKHSnKiZh821eniR4O8A@mail.gmail.com>

Dear list members,

When using the terra package:

f <- system.file("ex/lux.shp", package="terra")
v <- vect(f)
r <- rast(v, ncols=75, nrows=100)
z <- rasterize(v, r, "NAME_2")
plot(z)
lines(v)

How can I obtain the same result using st_rasterize from stars?

Manuel

-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Institutional website: ICOMVIS
<http://www.icomvis.una.ac.cr/index.php/manuel>
Blog sobre Ciencia de Datos: https://mspinola-ciencia-de-datos.netlify.app

	[[alternative HTML version deleted]]


