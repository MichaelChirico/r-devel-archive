From milujisb at gmail.com  Mon Aug  1 12:22:50 2016
From: milujisb at gmail.com (Miluji Sb)
Date: Mon, 1 Aug 2016 12:22:50 +0200
Subject: [R-sig-Geo] Climate data in R
Message-ID: <CAMLwc7PhLGwN8XxB2dxX_HrSeQCtmLpQSHBtXmXg9Nz=fGwSmA@mail.gmail.com>

Dear all,

I have a set of coordinates. Is it possible to extract climate data
(temperature and precipitation) by coordinates using the R packages such as
rnoaa?

For example;

out <- ncdc(datasetid='ANNUAL', stationid='GHCND:USW00014895',
datatypeid='TEMP')

But instead of stationid can I pass a list of coordinates through it?
Thanks a lot!

Sincerely,

Milu

	[[alternative HTML version deleted]]


From isa_may_kennes at hotmail.com  Mon Aug  1 20:23:55 2016
From: isa_may_kennes at hotmail.com (Isa-May Kennes)
Date: Mon, 1 Aug 2016 18:23:55 +0000
Subject: [R-sig-Geo]  precision matrix
In-Reply-To: <CAFfx76_LTnDhZ3TBZ5_s5PLGnAPqi8Zhs0SCCFNU7+qX0W27Pg@mail.gmail.com>
References: <CAFfx76-ty8G6GhUGps3hnC2tY56WyPVrhxnePD0CmV4Nvh4S6A@mail.gmail.com>,
	<CAFfx76_LTnDhZ3TBZ5_s5PLGnAPqi8Zhs0SCCFNU7+qX0W27Pg@mail.gmail.com>
Message-ID: <DB5PR06MB125685F887B707A47F66A98BD9020@DB5PR06MB1256.eurprd06.prod.outlook.com>

Hi


I have a dataset containing insurance data of about 300 000 policies. One attribute is CODPOSS containing postal codes of the policies. 
I also have a shapefile "Belgium" containing spatial information on the Belgian districts. One of the attributes is again CODPOSS giving the postal codes. There are about 600 districts. For 6 of those we have no insurance policy information. 

Now I want to fit a respons (e.g. claims frequency) by a spatial smoother, more precisely a Markov Random Field. 


My code so far:

library("gamlss.spatial")
library("spdep")
library("rgdal")

# the neigbors and polygons of the shapefile Belgium
BE.nb=poly2nb(Belgium)
BE.polys=Belgium at polygons
# transformation in order to apply the functions of gamlss.spatial
new.polys <- polys2polys(BE.polys,BE.nb)
new.nb <- nb2nb(BE.nb)


# the precision matrix
prec=nb2prec(new.nb, x=as.factor(row.names(BE.df)))
 

This last line gives an error message:
    "Error in nb2prec(new.nb, x =  as.factor(Belgium at data$CODPOSS)) :"
    " mismatch between neighbour/polys supplied area names and data area names"

Furthermore, I would like to use the functions mrf or gamlss.gmrf to fit the model. But the respons variable has length about 300 000 while there are only about 600 districts, some of which do not occur in the dataset. 


Is someone of you familiar with this MRF smoothing?

Thanks in advance!
Isa-May Kennes 




    

From znmeb at znmeb.net  Mon Aug  1 21:43:16 2016
From: znmeb at znmeb.net (M. Edward (Ed) Borasky)
Date: Mon, 01 Aug 2016 19:43:16 +0000
Subject: [R-sig-Geo] Climate data in R
In-Reply-To: <CAMLwc7PhLGwN8XxB2dxX_HrSeQCtmLpQSHBtXmXg9Nz=fGwSmA@mail.gmail.com>
References: <CAMLwc7PhLGwN8XxB2dxX_HrSeQCtmLpQSHBtXmXg9Nz=fGwSmA@mail.gmail.com>
Message-ID: <CAHkRx6Gz3LmbUjjtnebkpSkmHf4fSTvnWRRF7CdQqQczTufNmA@mail.gmail.com>

I have a similar question. Assume I've downloaded the climate data for all
the stations in the US state of Oregon, including their latitude, longitude
and elevation, using rnoaa. How do I *interpolate* climate values for an
arbitrary latitude / longitude / elevation inside a triangle defined by the
nearest stations?

On Mon, Aug 1, 2016 at 3:24 AM Miluji Sb <milujisb at gmail.com> wrote:

> Dear all,
>
> I have a set of coordinates. Is it possible to extract climate data
> (temperature and precipitation) by coordinates using the R packages such as
> rnoaa?
>
> For example;
>
> out <- ncdc(datasetid='ANNUAL', stationid='GHCND:USW00014895',
> datatypeid='TEMP')
>
> But instead of stationid can I pass a list of coordinates through it?
> Thanks a lot!
>
> Sincerely,
>
> Milu
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
How many people can stand on the shoulders of a giant before the giant
collapses?

	[[alternative HTML version deleted]]


From kmb56 at berkeley.edu  Mon Aug  1 21:47:35 2016
From: kmb56 at berkeley.edu (Kenny Bell)
Date: Mon, 1 Aug 2016 12:47:35 -0700
Subject: [R-sig-Geo] Climate data in R
In-Reply-To: <CAHkRx6Gz3LmbUjjtnebkpSkmHf4fSTvnWRRF7CdQqQczTufNmA@mail.gmail.com>
References: <CAMLwc7PhLGwN8XxB2dxX_HrSeQCtmLpQSHBtXmXg9Nz=fGwSmA@mail.gmail.com>
	<CAHkRx6Gz3LmbUjjtnebkpSkmHf4fSTvnWRRF7CdQqQczTufNmA@mail.gmail.com>
Message-ID: <CALOjXYQeW+SyayzsPHL0Lcv_A+G=mFECbYrD=0g-HjxXXeS=Nw@mail.gmail.com>

See https://cran.r-project.org/web/packages/prism/index.html for
interpolated US weather data

On Mon, Aug 1, 2016 at 12:43 PM, M. Edward (Ed) Borasky <znmeb at znmeb.net>
wrote:

> I have a similar question. Assume I've downloaded the climate data for all
> the stations in the US state of Oregon, including their latitude, longitude
> and elevation, using rnoaa. How do I *interpolate* climate values for an
> arbitrary latitude / longitude / elevation inside a triangle defined by the
> nearest stations?
>
> On Mon, Aug 1, 2016 at 3:24 AM Miluji Sb <milujisb at gmail.com> wrote:
>
> > Dear all,
> >
> > I have a set of coordinates. Is it possible to extract climate data
> > (temperature and precipitation) by coordinates using the R packages such
> as
> > rnoaa?
> >
> > For example;
> >
> > out <- ncdc(datasetid='ANNUAL', stationid='GHCND:USW00014895',
> > datatypeid='TEMP')
> >
> > But instead of stationid can I pass a list of coordinates through it?
> > Thanks a lot!
> >
> > Sincerely,
> >
> > Milu
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> --
> How many people can stand on the shoulders of a giant before the giant
> collapses?
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Kendon Bell
Email: kmb56 at berkeley.edu
Phone: (510) 612-3375

Ph.D. Candidate
Department of Agricultural & Resource Economics
University of California, Berkeley

	[[alternative HTML version deleted]]


From isaquedanielre at hotmail.com  Mon Aug  1 21:49:55 2016
From: isaquedanielre at hotmail.com (Isaque Daniel)
Date: Mon, 1 Aug 2016 19:49:55 +0000
Subject: [R-sig-Geo] Climate data in R
In-Reply-To: <CALOjXYQeW+SyayzsPHL0Lcv_A+G=mFECbYrD=0g-HjxXXeS=Nw@mail.gmail.com>
References: <CAMLwc7PhLGwN8XxB2dxX_HrSeQCtmLpQSHBtXmXg9Nz=fGwSmA@mail.gmail.com>
	<CAHkRx6Gz3LmbUjjtnebkpSkmHf4fSTvnWRRF7CdQqQczTufNmA@mail.gmail.com>,
	<CALOjXYQeW+SyayzsPHL0Lcv_A+G=mFECbYrD=0g-HjxXXeS=Nw@mail.gmail.com>
Message-ID: <SN2PR20MB07846FA07A3CC52949450FF4C9040@SN2PR20MB0784.namprd20.prod.outlook.com>

Hi,

You can follow the example in: http://stackoverflow.com/questions/34619218/extract-raster-values-from-stack-to-points-in-for-loop


Is really simple, using coordinates and extract functions of raster package.


Best

Isaque


------------------------------------------------------------------------------------------------------------------
Eng. Agr. Isaque Daniel Rocha Eberhardt
Mestre em Sensoriamento Remoto - Instituto Nacional de Pesquisas Espaciais (INPE)
Doutorando em Transportes - Universidade de Bras??lia (UNB)
Mobile: +55 (061) 99015658
------------------------------------------------------------------------------------------------------------------
Agronomist engineer
Master in Remote Sensing - National  Institute for Space Research (INPE) - Brazil
PHD Student in Transport - Bras??lia University (UNB)


________________________________
De: R-sig-Geo <r-sig-geo-bounces at r-project.org> em nome de Kenny Bell <kmb56 at berkeley.edu>
Enviado: segunda-feira, 1 de agosto de 2016 19:47
Para: M. Edward (Ed) Borasky
Cc: R-sig-geo mailing list
Assunto: Re: [R-sig-Geo] Climate data in R

See https://cran.r-project.org/web/packages/prism/index.html for
CRAN - Package prism<https://cran.r-project.org/web/packages/prism/index.html>
cran.r-project.org
prism: Access Data from the Oregon State Prism Climate Project. Allows users to access the Oregon State Prism climate data. Using the web service API data can easily ...


interpolated US weather data

On Mon, Aug 1, 2016 at 12:43 PM, M. Edward (Ed) Borasky <znmeb at znmeb.net>
wrote:

> I have a similar question. Assume I've downloaded the climate data for all
> the stations in the US state of Oregon, including their latitude, longitude
> and elevation, using rnoaa. How do I *interpolate* climate values for an
> arbitrary latitude / longitude / elevation inside a triangle defined by the
> nearest stations?
>
> On Mon, Aug 1, 2016 at 3:24 AM Miluji Sb <milujisb at gmail.com> wrote:
>
> > Dear all,
> >
> > I have a set of coordinates. Is it possible to extract climate data
> > (temperature and precipitation) by coordinates using the R packages such
> as
> > rnoaa?
> >
> > For example;
> >
> > out <- ncdc(datasetid='ANNUAL', stationid='GHCND:USW00014895',
> > datatypeid='TEMP')
> >
> > But instead of stationid can I pass a list of coordinates through it?
> > Thanks a lot!
> >
> > Sincerely,
> >
> > Milu
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> --
> How many people can stand on the shoulders of a giant before the giant
> collapses?
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



--
Kendon Bell
Email: kmb56 at berkeley.edu
Phone: (510) 612-3375

Ph.D. Candidate
Department of Agricultural & Resource Economics
University of California, Berkeley

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

	[[alternative HTML version deleted]]


From tephilippi at gmail.com  Tue Aug  2 23:34:50 2016
From: tephilippi at gmail.com (Tom Philippi)
Date: Tue, 2 Aug 2016 14:34:50 -0700
Subject: [R-sig-Geo] Climate data in R
In-Reply-To: <SN2PR20MB07846FA07A3CC52949450FF4C9040@SN2PR20MB0784.namprd20.prod.outlook.com>
References: <CAMLwc7PhLGwN8XxB2dxX_HrSeQCtmLpQSHBtXmXg9Nz=fGwSmA@mail.gmail.com>
	<CAHkRx6Gz3LmbUjjtnebkpSkmHf4fSTvnWRRF7CdQqQczTufNmA@mail.gmail.com>
	<CALOjXYQeW+SyayzsPHL0Lcv_A+G=mFECbYrD=0g-HjxXXeS=Nw@mail.gmail.com>
	<SN2PR20MB07846FA07A3CC52949450FF4C9040@SN2PR20MB0784.namprd20.prod.outlook.com>
Message-ID: <CALyPt8xD_oEGTFAk2MB9s+JMcsNTWffsTLwsXxgBOUteFjTRzA@mail.gmail.com>

Without knowing what part of the globe you need climate data for, nor what
data you need (30 year "normals", bioclim parameters, monthly values,
daily, extremes?), I can't give a useful specific answer.

What follows is an initial draft of a web page on climate data in R.  It's
somewhat US and North America centric.

The number of APIs providing climate data is growing rapidly.  The downside
is that most data providers are region/continent specific.  NOAA NDCD,
ACIS, Mesowest, PRISM, SNOTEL, SNODAS, and others are North America or
CONUS, there are different APIs and packages for EU, UK, NZ, and Canadian
climate.  The few worldwide services tend to have lower station densities
than region-specific services, especially for older dates.

Some APIs and overviews:
ACIS (NOAA):  http://www.rcc-acis.org/docs_webservices.html
NOAA Co-ops: http://tidesandcurrents.noaa.gov/api/
PRISM http://www.prism.oregonstate.edu/index.phtml
MesoWest: http://www.rcc-acis.org/docs_webservices.html
http://synopticlabs.org/api/
http://www.esrl.noaa.gov/psd/data/gridded/
https://climatedataguide.ucar.edu/climate-data/global-temperature-data-sets-overview-comparison-table
http://www.cgiar-csi.org/data/uea-cru-ts-v3-10-01-historic-climate-database

All of those APIs can be hit from R; some have R packages available to make
it easier.  [And, more importantly for my use cases, those packages isolate
my code that hits the package functions from changes in the underlying
API.  Instead of each of us having to keep up with changing APIs and fixing
our broken code every 6-12 months, package maintainers put out new versions
that work with the new APIs but use the same parameters and return the same
objects.  If my code from last year fails to fetch data this year, I
usually can simply update the package.  Thanks, maintainers!]

For R packages, start with https://github.com/ropensci/opendata#climate and
http://ropensci.org/packages/

Most non-raster APIs have 2 steps: a station finder that you query by name
or location, then a data fetcher pulling data from the found stations.

Raster datasets tend to be huge, and tend to be organized as 1 file per
date.  There's a PRISM API that lets you select locations and retrieve data
for a range of dates for requested rectangular AOAs.


My 2 lessons learned as an ecologist using climate data (not a real
climatologist) are:

1: Spatial interpolation is non-trivial.  PRISM uses not just distances
from stations of record, but also topography: elevation for temperatures
and precipitation and side of the mountain (very important for
precipitation).  Don't just use the nearest station or inverse-distance
krige unless you are in a broad flat plain or steppe.  [Sorry, Ed!]  There
are a couple of raster products for daily data (not just the monthly
PRISM), but they tend to be available a few weeks after the fact.

2: Station records are instrumentation values, not actual temperatures &
precipitation amounts.  Almost all climate data providers QA and filter the
values, because sensors drift and fail.  However, the appropriate amount of
filtering is dependent on your use.  Some blips in the raw data are
instrumentation errors, some are short extreme events; some are of a
magnitude & duration where it can't be determined which of those they are.
The appropriate or optimal amount of filtering for uses such as crop
production models is much greater than the appropriate amount for some
ecological applications where short intense events can be important.  Even
within larger agencies like NOAA, different regional climatologists filter
the data to different extents.  To do valid science, if extreme events
matter for your use, you need to know the preprocessing on your datastream,
lest you get fooled into thinking that region-specific filtering is
climatological signal.

If anyone has comments, additions, or corrections to the above, please send
them to me!

If the OP has a specific data type in a specific region, I might have a
specific suggestion.

Tom 2

Tom Philippi
Quantitative Ecologist & Data Therapist
Inventory and Monitoring Program
US National Park Service


On Mon, Aug 1, 2016 at 12:49 PM, Isaque Daniel <isaquedanielre at hotmail.com>
wrote:

> Hi,
>
> You can follow the example in:
> http://stackoverflow.com/questions/34619218/extract-raster-values-from-stack-to-points-in-for-loop
>
>
> Is really simple, using coordinates and extract functions of raster
> package.
>
>
> Best
>
> Isaque
>
>
>
> ------------------------------------------------------------------------------------------------------------------
> Eng. Agr. Isaque Daniel Rocha Eberhardt
> Mestre em Sensoriamento Remoto - Instituto Nacional de Pesquisas Espaciais
> (INPE)
> Doutorando em Transportes - Universidade de Bras??lia (UNB)
> Mobile: +55 (061) 99015658
>
> ------------------------------------------------------------------------------------------------------------------
> Agronomist engineer
> Master in Remote Sensing - National  Institute for Space Research (INPE) -
> Brazil
> PHD Student in Transport - Bras??lia University (UNB)
>
>
> ________________________________
> De: R-sig-Geo <r-sig-geo-bounces at r-project.org> em nome de Kenny Bell <
> kmb56 at berkeley.edu>
> Enviado: segunda-feira, 1 de agosto de 2016 19:47
> Para: M. Edward (Ed) Borasky
> Cc: R-sig-geo mailing list
> Assunto: Re: [R-sig-Geo] Climate data in R
>
> See https://cran.r-project.org/web/packages/prism/index.html for
> CRAN - Package prism<
> https://cran.r-project.org/web/packages/prism/index.html>
> cran.r-project.org
> prism: Access Data from the Oregon State Prism Climate Project. Allows
> users to access the Oregon State Prism climate data. Using the web service
> API data can easily ...
>
>
> interpolated US weather data
>
> On Mon, Aug 1, 2016 at 12:43 PM, M. Edward (Ed) Borasky <znmeb at znmeb.net>
> wrote:
>
> > I have a similar question. Assume I've downloaded the climate data for
> all
> > the stations in the US state of Oregon, including their latitude,
> longitude
> > and elevation, using rnoaa. How do I *interpolate* climate values for an
> > arbitrary latitude / longitude / elevation inside a triangle defined by
> the
> > nearest stations?
> >
> > On Mon, Aug 1, 2016 at 3:24 AM Miluji Sb <milujisb at gmail.com> wrote:
> >
> > > Dear all,
> > >
> > > I have a set of coordinates. Is it possible to extract climate data
> > > (temperature and precipitation) by coordinates using the R packages
> such
> > as
> > > rnoaa?
> > >
> > > For example;
> > >
> > > out <- ncdc(datasetid='ANNUAL', stationid='GHCND:USW00014895',
> > > datatypeid='TEMP')
> > >
> > > But instead of stationid can I pass a list of coordinates through it?
> > > Thanks a lot!
> > >
> > > Sincerely,
> > >
> > > Milu
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > _______________________________________________
> > > R-sig-Geo mailing list
> > > R-sig-Geo at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> > >
> > --
> > How many people can stand on the shoulders of a giant before the giant
> > collapses?
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
>
>
> --
> Kendon Bell
> Email: kmb56 at berkeley.edu
> Phone: (510) 612-3375
>
> Ph.D. Candidate
> Department of Agricultural & Resource Economics
> University of California, Berkeley
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From mel at mbacou.com  Wed Aug  3 00:52:07 2016
From: mel at mbacou.com (Bacou, Melanie)
Date: Tue, 2 Aug 2016 18:52:07 -0400
Subject: [R-sig-Geo] Climate data in R
In-Reply-To: <CALyPt8xD_oEGTFAk2MB9s+JMcsNTWffsTLwsXxgBOUteFjTRzA@mail.gmail.com>
References: <CAMLwc7PhLGwN8XxB2dxX_HrSeQCtmLpQSHBtXmXg9Nz=fGwSmA@mail.gmail.com>
	<CAHkRx6Gz3LmbUjjtnebkpSkmHf4fSTvnWRRF7CdQqQczTufNmA@mail.gmail.com>
	<CALOjXYQeW+SyayzsPHL0Lcv_A+G=mFECbYrD=0g-HjxXXeS=Nw@mail.gmail.com>
	<SN2PR20MB07846FA07A3CC52949450FF4C9040@SN2PR20MB0784.namprd20.prod.outlook.com>
	<CALyPt8xD_oEGTFAk2MB9s+JMcsNTWffsTLwsXxgBOUteFjTRzA@mail.gmail.com>
Message-ID: <789648fe-4917-b763-4742-26b089253adb@mbacou.com>

I also recommended browsing through NOAA PSD curated catalog. I believe 
it's up-to-date and provide useful metadata and links to original sources:

http://www.esrl.noaa.gov/psd/data/

--Mel.


On 8/2/2016 5:34 PM, Tom Philippi wrote:
> Without knowing what part of the globe you need climate data for, nor what
> data you need (30 year "normals", bioclim parameters, monthly values,
> daily, extremes?), I can't give a useful specific answer.
>
> What follows is an initial draft of a web page on climate data in R.  It's
> somewhat US and North America centric.
>
> The number of APIs providing climate data is growing rapidly.  The downside
> is that most data providers are region/continent specific.  NOAA NDCD,
> ACIS, Mesowest, PRISM, SNOTEL, SNODAS, and others are North America or
> CONUS, there are different APIs and packages for EU, UK, NZ, and Canadian
> climate.  The few worldwide services tend to have lower station densities
> than region-specific services, especially for older dates.
>
> Some APIs and overviews:
> ACIS (NOAA):  http://www.rcc-acis.org/docs_webservices.html
> NOAA Co-ops: http://tidesandcurrents.noaa.gov/api/
> PRISM http://www.prism.oregonstate.edu/index.phtml
> MesoWest: http://www.rcc-acis.org/docs_webservices.html
> http://synopticlabs.org/api/
> http://www.esrl.noaa.gov/psd/data/gridded/
> https://climatedataguide.ucar.edu/climate-data/global-temperature-data-sets-overview-comparison-table
> http://www.cgiar-csi.org/data/uea-cru-ts-v3-10-01-historic-climate-database
>
> All of those APIs can be hit from R; some have R packages available to make
> it easier.  [And, more importantly for my use cases, those packages isolate
> my code that hits the package functions from changes in the underlying
> API.  Instead of each of us having to keep up with changing APIs and fixing
> our broken code every 6-12 months, package maintainers put out new versions
> that work with the new APIs but use the same parameters and return the same
> objects.  If my code from last year fails to fetch data this year, I
> usually can simply update the package.  Thanks, maintainers!]
>
> For R packages, start with https://github.com/ropensci/opendata#climate and
> http://ropensci.org/packages/
>
> Most non-raster APIs have 2 steps: a station finder that you query by name
> or location, then a data fetcher pulling data from the found stations.
>
> Raster datasets tend to be huge, and tend to be organized as 1 file per
> date.  There's a PRISM API that lets you select locations and retrieve data
> for a range of dates for requested rectangular AOAs.
>
>
> My 2 lessons learned as an ecologist using climate data (not a real
> climatologist) are:
>
> 1: Spatial interpolation is non-trivial.  PRISM uses not just distances
> from stations of record, but also topography: elevation for temperatures
> and precipitation and side of the mountain (very important for
> precipitation).  Don't just use the nearest station or inverse-distance
> krige unless you are in a broad flat plain or steppe.  [Sorry, Ed!]  There
> are a couple of raster products for daily data (not just the monthly
> PRISM), but they tend to be available a few weeks after the fact.
>
> 2: Station records are instrumentation values, not actual temperatures &
> precipitation amounts.  Almost all climate data providers QA and filter the
> values, because sensors drift and fail.  However, the appropriate amount of
> filtering is dependent on your use.  Some blips in the raw data are
> instrumentation errors, some are short extreme events; some are of a
> magnitude & duration where it can't be determined which of those they are.
> The appropriate or optimal amount of filtering for uses such as crop
> production models is much greater than the appropriate amount for some
> ecological applications where short intense events can be important.  Even
> within larger agencies like NOAA, different regional climatologists filter
> the data to different extents.  To do valid science, if extreme events
> matter for your use, you need to know the preprocessing on your datastream,
> lest you get fooled into thinking that region-specific filtering is
> climatological signal.
>
> If anyone has comments, additions, or corrections to the above, please send
> them to me!
>
> If the OP has a specific data type in a specific region, I might have a
> specific suggestion.
>
> Tom 2
>
> Tom Philippi
> Quantitative Ecologist & Data Therapist
> Inventory and Monitoring Program
> US National Park Service
>
>
> On Mon, Aug 1, 2016 at 12:49 PM, Isaque Daniel <isaquedanielre at hotmail.com>
> wrote:
>
>> Hi,
>>
>> You can follow the example in:
>> http://stackoverflow.com/questions/34619218/extract-raster-values-from-stack-to-points-in-for-loop
>>
>>
>> Is really simple, using coordinates and extract functions of raster
>> package.
>>
>>
>> Best
>>
>> Isaque
>>
>>
>>
>> ------------------------------------------------------------------------------------------------------------------
>> Eng. Agr. Isaque Daniel Rocha Eberhardt
>> Mestre em Sensoriamento Remoto - Instituto Nacional de Pesquisas Espaciais
>> (INPE)
>> Doutorando em Transportes - Universidade de Bras??lia (UNB)
>> Mobile: +55 (061) 99015658
>>
>> ------------------------------------------------------------------------------------------------------------------
>> Agronomist engineer
>> Master in Remote Sensing - National  Institute for Space Research (INPE) -
>> Brazil
>> PHD Student in Transport - Bras??lia University (UNB)
>>
>>
>> ________________________________
>> De: R-sig-Geo <r-sig-geo-bounces at r-project.org> em nome de Kenny Bell <
>> kmb56 at berkeley.edu>
>> Enviado: segunda-feira, 1 de agosto de 2016 19:47
>> Para: M. Edward (Ed) Borasky
>> Cc: R-sig-geo mailing list
>> Assunto: Re: [R-sig-Geo] Climate data in R
>>
>> See https://cran.r-project.org/web/packages/prism/index.html for
>> CRAN - Package prism<
>> https://cran.r-project.org/web/packages/prism/index.html>
>> cran.r-project.org
>> prism: Access Data from the Oregon State Prism Climate Project. Allows
>> users to access the Oregon State Prism climate data. Using the web service
>> API data can easily ...
>>
>>
>> interpolated US weather data
>>
>> On Mon, Aug 1, 2016 at 12:43 PM, M. Edward (Ed) Borasky <znmeb at znmeb.net>
>> wrote:
>>
>>> I have a similar question. Assume I've downloaded the climate data for
>> all
>>> the stations in the US state of Oregon, including their latitude,
>> longitude
>>> and elevation, using rnoaa. How do I *interpolate* climate values for an
>>> arbitrary latitude / longitude / elevation inside a triangle defined by
>> the
>>> nearest stations?
>>>
>>> On Mon, Aug 1, 2016 at 3:24 AM Miluji Sb <milujisb at gmail.com> wrote:
>>>
>>>> Dear all,
>>>>
>>>> I have a set of coordinates. Is it possible to extract climate data
>>>> (temperature and precipitation) by coordinates using the R packages
>> such
>>> as
>>>> rnoaa?
>>>>
>>>> For example;
>>>>
>>>> out <- ncdc(datasetid='ANNUAL', stationid='GHCND:USW00014895',
>>>> datatypeid='TEMP')
>>>>
>>>> But instead of stationid can I pass a list of coordinates through it?
>>>> Thanks a lot!
>>>>
>>>> Sincerely,
>>>>
>>>> Milu
>>>>
>>>>          [[alternative HTML version deleted]]
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>> --
>>> How many people can stand on the shoulders of a giant before the giant
>>> collapses?
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>>
>> --
>> Kendon Bell
>> Email: kmb56 at berkeley.edu
>> Phone: (510) 612-3375
>>
>> Ph.D. Candidate
>> Department of Agricultural & Resource Economics
>> University of California, Berkeley
>>
>>          [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>          [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From isaquedanielre at hotmail.com  Wed Aug  3 01:02:49 2016
From: isaquedanielre at hotmail.com (Isaque Daniel)
Date: Tue, 2 Aug 2016 23:02:49 +0000
Subject: [R-sig-Geo] Climate data in R
In-Reply-To: <CALyPt8xD_oEGTFAk2MB9s+JMcsNTWffsTLwsXxgBOUteFjTRzA@mail.gmail.com>
References: <CAMLwc7PhLGwN8XxB2dxX_HrSeQCtmLpQSHBtXmXg9Nz=fGwSmA@mail.gmail.com>
	<CAHkRx6Gz3LmbUjjtnebkpSkmHf4fSTvnWRRF7CdQqQczTufNmA@mail.gmail.com>
	<CALOjXYQeW+SyayzsPHL0Lcv_A+G=mFECbYrD=0g-HjxXXeS=Nw@mail.gmail.com>
	<SN2PR20MB07846FA07A3CC52949450FF4C9040@SN2PR20MB0784.namprd20.prod.outlook.com>,
	<CALyPt8xD_oEGTFAk2MB9s+JMcsNTWffsTLwsXxgBOUteFjTRzA@mail.gmail.com>
Message-ID: <SN2PR20MB0784E78C78C4F7E8B73EAC12C9050@SN2PR20MB0784.namprd20.prod.outlook.com>

Incredible dataset sources Tom!
Best

Isaque


------------------------------------------------------------------------------------------------------------------
Eng. Agr. Isaque Daniel Rocha Eberhardt
Mestre em Sensoriamento Remoto - Instituto Nacional de Pesquisas Espaciais (INPE)
Doutorando em Transportes - Universidade de Bras??lia (UNB)
Mobile: +55 (061) 99015658
------------------------------------------------------------------------------------------------------------------
Agronomist engineer
Master in Remote Sensing - National  Institute for Space Research (INPE) - Brazil
PHD Student in Transport - Bras??lia University (UNB)


________________________________
De: Tom Philippi <tephilippi at gmail.com>
Enviado: ter?a-feira, 2 de agosto de 2016 21:34
Para: Isaque Daniel
Cc: Kenny Bell; M. Edward (Ed) Borasky; R-sig-geo mailing list
Assunto: Re: [R-sig-Geo] Climate data in R

Without knowing what part of the globe you need climate data for, nor what data you need (30 year "normals", bioclim parameters, monthly values, daily, extremes?), I can't give a useful specific answer.

What follows is an initial draft of a web page on climate data in R.  It's somewhat US and North America centric.

The number of APIs providing climate data is growing rapidly.  The downside is that most data providers are region/continent specific.  NOAA NDCD, ACIS, Mesowest, PRISM, SNOTEL, SNODAS, and others are North America or CONUS, there are different APIs and packages for EU, UK, NZ, and Canadian climate.  The few worldwide services tend to have lower station densities than region-specific services, especially for older dates.

Some APIs and overviews:
ACIS (NOAA):  http://www.rcc-acis.org/docs_webservices.html
Web Services - RCC-ACIS<http://www.rcc-acis.org/docs_webservices.html>
www.rcc-acis.org
Introduction. The Applied Climate Information System (ACIS) Web Services consists of five types of calls - StnMeta, StnData, MultiStnData, GridData and General.


NOAA Co-ops: http://tidesandcurrents.noaa.gov/api/
PRISM http://www.prism.oregonstate.edu/index.phtml
MesoWest: http://www.rcc-acis.org/docs_webservices.html   http://synopticlabs.org/api/
http://www.esrl.noaa.gov/psd/data/gridded/
https://climatedataguide.ucar.edu/climate-data/global-temperature-data-sets-overview-comparison-table
http://www.cgiar-csi.org/data/uea-cru-ts-v3-10-01-historic-climate-database

All of those APIs can be hit from R; some have R packages available to make it easier.  [And, more importantly for my use cases, those packages isolate my code that hits the package functions from changes in the underlying API.  Instead of each of us having to keep up with changing APIs and fixing our broken code every 6-12 months, package maintainers put out new versions that work with the new APIs but use the same parameters and return the same objects.  If my code from last year fails to fetch data this year, I usually can simply update the package.  Thanks, maintainers!]

For R packages, start with https://github.com/ropensci/opendata#climate and http://ropensci.org/packages/

Most non-raster APIs have 2 steps: a station finder that you query by name or location, then a data fetcher pulling data from the found stations.

Raster datasets tend to be huge, and tend to be organized as 1 file per date.  There's a PRISM API that lets you select locations and retrieve data for a range of dates for requested rectangular AOAs.


My 2 lessons learned as an ecologist using climate data (not a real climatologist) are:

1: Spatial interpolation is non-trivial.  PRISM uses not just distances from stations of record, but also topography: elevation for temperatures and precipitation and side of the mountain (very important for precipitation).  Don't just use the nearest station or inverse-distance krige unless you are in a broad flat plain or steppe.  [Sorry, Ed!]  There are a couple of raster products for daily data (not just the monthly PRISM), but they tend to be available a few weeks after the fact.

2: Station records are instrumentation values, not actual temperatures & precipitation amounts.  Almost all climate data providers QA and filter the values, because sensors drift and fail.  However, the appropriate amount of filtering is dependent on your use.  Some blips in the raw data are instrumentation errors, some are short extreme events; some are of a magnitude & duration where it can't be determined which of those they are.  The appropriate or optimal amount of filtering for uses such as crop production models is much greater than the appropriate amount for some ecological applications where short intense events can be important.  Even within larger agencies like NOAA, different regional climatologists filter the data to different extents.  To do valid science, if extreme events matter for your use, you need to know the preprocessing on your datastream, lest you get fooled into thinking that region-specific filtering is climatological signal.

If anyone has comments, additions, or corrections to the above, please send them to me!

If the OP has a specific data type in a specific region, I might have a specific suggestion.

Tom 2

Tom Philippi
Quantitative Ecologist & Data Therapist
Inventory and Monitoring Program
US National Park Service


On Mon, Aug 1, 2016 at 12:49 PM, Isaque Daniel <isaquedanielre at hotmail.com<mailto:isaquedanielre at hotmail.com>> wrote:
Hi,

You can follow the example in: http://stackoverflow.com/questions/34619218/extract-raster-values-from-stack-to-points-in-for-loop


Is really simple, using coordinates and extract functions of raster package.


Best

Isaque


------------------------------------------------------------------------------------------------------------------
Eng. Agr. Isaque Daniel Rocha Eberhardt
Mestre em Sensoriamento Remoto - Instituto Nacional de Pesquisas Espaciais (INPE)
Doutorando em Transportes - Universidade de Bras??lia (UNB)
Mobile: +55 (061) 99015658<tel:%2B55%20%28061%29%2099015658>
------------------------------------------------------------------------------------------------------------------
Agronomist engineer
Master in Remote Sensing - National  Institute for Space Research (INPE) - Brazil
PHD Student in Transport - Bras??lia University (UNB)


________________________________
De: R-sig-Geo <r-sig-geo-bounces at r-project.org<mailto:r-sig-geo-bounces at r-project.org>> em nome de Kenny Bell <kmb56 at berkeley.edu<mailto:kmb56 at berkeley.edu>>
Enviado: segunda-feira, 1 de agosto de 2016 19:47
Para: M. Edward (Ed) Borasky
Cc: R-sig-geo mailing list
Assunto: Re: [R-sig-Geo] Climate data in R

See https://cran.r-project.org/web/packages/prism/index.html for
CRAN - Package prism<https://cran.r-project.org/web/packages/prism/index.html>
cran.r-project.org<http://cran.r-project.org>
prism: Access Data from the Oregon State Prism Climate Project. Allows users to access the Oregon State Prism climate data. Using the web service API data can easily ...


interpolated US weather data

On Mon, Aug 1, 2016 at 12:43 PM, M. Edward (Ed) Borasky <znmeb at znmeb.net<mailto:znmeb at znmeb.net>>
wrote:

> I have a similar question. Assume I've downloaded the climate data for all
> the stations in the US state of Oregon, including their latitude, longitude
> and elevation, using rnoaa. How do I *interpolate* climate values for an
> arbitrary latitude / longitude / elevation inside a triangle defined by the
> nearest stations?
>
> On Mon, Aug 1, 2016 at 3:24 AM Miluji Sb <milujisb at gmail.com<mailto:milujisb at gmail.com>> wrote:
>
> > Dear all,
> >
> > I have a set of coordinates. Is it possible to extract climate data
> > (temperature and precipitation) by coordinates using the R packages such
> as
> > rnoaa?
> >
> > For example;
> >
> > out <- ncdc(datasetid='ANNUAL', stationid='GHCND:USW00014895',
> > datatypeid='TEMP')
> >
> > But instead of stationid can I pass a list of coordinates through it?
> > Thanks a lot!
> >
> > Sincerely,
> >
> > Milu
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> --
> How many people can stand on the shoulders of a giant before the giant
> collapses?
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



--
Kendon Bell
Email: kmb56 at berkeley.edu<mailto:kmb56 at berkeley.edu>
Phone: (510) 612-3375<tel:%28510%29%20612-3375>

Ph.D. Candidate
Department of Agricultural & Resource Economics
University of California, Berkeley

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From znmeb at znmeb.net  Wed Aug  3 01:02:56 2016
From: znmeb at znmeb.net (M. Edward (Ed) Borasky)
Date: Tue, 02 Aug 2016 23:02:56 +0000
Subject: [R-sig-Geo] Climate data in R
In-Reply-To: <CALyPt8xD_oEGTFAk2MB9s+JMcsNTWffsTLwsXxgBOUteFjTRzA@mail.gmail.com>
References: <CAMLwc7PhLGwN8XxB2dxX_HrSeQCtmLpQSHBtXmXg9Nz=fGwSmA@mail.gmail.com>
	<CAHkRx6Gz3LmbUjjtnebkpSkmHf4fSTvnWRRF7CdQqQczTufNmA@mail.gmail.com>
	<CALOjXYQeW+SyayzsPHL0Lcv_A+G=mFECbYrD=0g-HjxXXeS=Nw@mail.gmail.com>
	<SN2PR20MB07846FA07A3CC52949450FF4C9040@SN2PR20MB0784.namprd20.prod.outlook.com>
	<CALyPt8xD_oEGTFAk2MB9s+JMcsNTWffsTLwsXxgBOUteFjTRzA@mail.gmail.com>
Message-ID: <CAHkRx6H9pt3cPe3SBG1RDXYAnyGs6+6qV6kwPmmZMooafJ2sFQ@mail.gmail.com>

On Tue, Aug 2, 2016 at 2:34 PM Tom Philippi <tephilippi at gmail.com> wrote:


> 1: Spatial interpolation is non-trivial.  PRISM uses not just distances
> from stations of record, but also topography: elevation for temperatures
> and precipitation and side of the mountain (very important for
> precipitation).  Don't just use the nearest station or inverse-distance
> krige unless you are in a broad flat plain or steppe.  [Sorry, Ed!]  There
> are a couple of raster products for daily data (not just the monthly
> PRISM), but they tend to be available a few weeks after the fact.
>

We'll probably use PRISM since they've done all the hard work, are
connected with the USDA and are in Oregon (the app is about Oregon
agriculture). I didn't know about PRISM when we started doing the data
collection for the app but I do now! ;-)
-- 
How many people can stand on the shoulders of a giant before the giant
collapses?

	[[alternative HTML version deleted]]


From kmb56 at berkeley.edu  Wed Aug  3 01:07:33 2016
From: kmb56 at berkeley.edu (Kenny Bell)
Date: Tue, 2 Aug 2016 16:07:33 -0700
Subject: [R-sig-Geo] Climate data in R
In-Reply-To: <789648fe-4917-b763-4742-26b089253adb@mbacou.com>
References: <CAMLwc7PhLGwN8XxB2dxX_HrSeQCtmLpQSHBtXmXg9Nz=fGwSmA@mail.gmail.com>
	<CAHkRx6Gz3LmbUjjtnebkpSkmHf4fSTvnWRRF7CdQqQczTufNmA@mail.gmail.com>
	<CALOjXYQeW+SyayzsPHL0Lcv_A+G=mFECbYrD=0g-HjxXXeS=Nw@mail.gmail.com>
	<SN2PR20MB07846FA07A3CC52949450FF4C9040@SN2PR20MB0784.namprd20.prod.outlook.com>
	<CALyPt8xD_oEGTFAk2MB9s+JMcsNTWffsTLwsXxgBOUteFjTRzA@mail.gmail.com>
	<789648fe-4917-b763-4742-26b089253adb@mbacou.com>
Message-ID: <CALOjXYRUov4rCm_2xHd131Yo7EHtj6YQzrouC9WVqCjFTCqUag@mail.gmail.com>

Another for the list:

Daily tmax/tmin/tavg going back a very long way for the globe at 1degx1deg:
http://berkeleyearth.org/data/.

On Aug 2, 2016 3:52 PM, "Bacou, Melanie" <mel at mbacou.com> wrote:

> I also recommended browsing through NOAA PSD curated catalog. I believe
> it's up-to-date and provide useful metadata and links to original sources:
>
> http://www.esrl.noaa.gov/psd/data/
>
> --Mel.
>
>
> On 8/2/2016 5:34 PM, Tom Philippi wrote:
>
>> Without knowing what part of the globe you need climate data for, nor what
>> data you need (30 year "normals", bioclim parameters, monthly values,
>> daily, extremes?), I can't give a useful specific answer.
>>
>> What follows is an initial draft of a web page on climate data in R.  It's
>> somewhat US and North America centric.
>>
>> The number of APIs providing climate data is growing rapidly.  The
>> downside
>> is that most data providers are region/continent specific.  NOAA NDCD,
>> ACIS, Mesowest, PRISM, SNOTEL, SNODAS, and others are North America or
>> CONUS, there are different APIs and packages for EU, UK, NZ, and Canadian
>> climate.  The few worldwide services tend to have lower station densities
>> than region-specific services, especially for older dates.
>>
>> Some APIs and overviews:
>> ACIS (NOAA):  http://www.rcc-acis.org/docs_webservices.html
>> NOAA Co-ops: http://tidesandcurrents.noaa.gov/api/
>> PRISM http://www.prism.oregonstate.edu/index.phtml
>> MesoWest: http://www.rcc-acis.org/docs_webservices.html
>> http://synopticlabs.org/api/
>> http://www.esrl.noaa.gov/psd/data/gridded/
>>
>> https://climatedataguide.ucar.edu/climate-data/global-temperature-data-sets-overview-comparison-table
>>
>> http://www.cgiar-csi.org/data/uea-cru-ts-v3-10-01-historic-climate-database
>>
>> All of those APIs can be hit from R; some have R packages available to
>> make
>> it easier.  [And, more importantly for my use cases, those packages
>> isolate
>> my code that hits the package functions from changes in the underlying
>> API.  Instead of each of us having to keep up with changing APIs and
>> fixing
>> our broken code every 6-12 months, package maintainers put out new
>> versions
>> that work with the new APIs but use the same parameters and return the
>> same
>> objects.  If my code from last year fails to fetch data this year, I
>> usually can simply update the package.  Thanks, maintainers!]
>>
>> For R packages, start with https://github.com/ropensci/opendata#climate
>> and
>> http://ropensci.org/packages/
>>
>> Most non-raster APIs have 2 steps: a station finder that you query by name
>> or location, then a data fetcher pulling data from the found stations.
>>
>> Raster datasets tend to be huge, and tend to be organized as 1 file per
>> date.  There's a PRISM API that lets you select locations and retrieve
>> data
>> for a range of dates for requested rectangular AOAs.
>>
>>
>> My 2 lessons learned as an ecologist using climate data (not a real
>> climatologist) are:
>>
>> 1: Spatial interpolation is non-trivial.  PRISM uses not just distances
>> from stations of record, but also topography: elevation for temperatures
>> and precipitation and side of the mountain (very important for
>> precipitation).  Don't just use the nearest station or inverse-distance
>> krige unless you are in a broad flat plain or steppe.  [Sorry, Ed!]  There
>> are a couple of raster products for daily data (not just the monthly
>> PRISM), but they tend to be available a few weeks after the fact.
>>
>> 2: Station records are instrumentation values, not actual temperatures &
>> precipitation amounts.  Almost all climate data providers QA and filter
>> the
>> values, because sensors drift and fail.  However, the appropriate amount
>> of
>> filtering is dependent on your use.  Some blips in the raw data are
>> instrumentation errors, some are short extreme events; some are of a
>> magnitude & duration where it can't be determined which of those they are.
>> The appropriate or optimal amount of filtering for uses such as crop
>> production models is much greater than the appropriate amount for some
>> ecological applications where short intense events can be important.  Even
>> within larger agencies like NOAA, different regional climatologists filter
>> the data to different extents.  To do valid science, if extreme events
>> matter for your use, you need to know the preprocessing on your
>> datastream,
>> lest you get fooled into thinking that region-specific filtering is
>> climatological signal.
>>
>> If anyone has comments, additions, or corrections to the above, please
>> send
>> them to me!
>>
>> If the OP has a specific data type in a specific region, I might have a
>> specific suggestion.
>>
>> Tom 2
>>
>> Tom Philippi
>> Quantitative Ecologist & Data Therapist
>> Inventory and Monitoring Program
>> US National Park Service
>>
>>
>> On Mon, Aug 1, 2016 at 12:49 PM, Isaque Daniel <
>> isaquedanielre at hotmail.com>
>> wrote:
>>
>> Hi,
>>>
>>> You can follow the example in:
>>>
>>> http://stackoverflow.com/questions/34619218/extract-raster-values-from-stack-to-points-in-for-loop
>>>
>>>
>>> Is really simple, using coordinates and extract functions of raster
>>> package.
>>>
>>>
>>> Best
>>>
>>> Isaque
>>>
>>>
>>>
>>>
>>> ------------------------------------------------------------------------------------------------------------------
>>> Eng. Agr. Isaque Daniel Rocha Eberhardt
>>> Mestre em Sensoriamento Remoto - Instituto Nacional de Pesquisas
>>> Espaciais
>>> (INPE)
>>> Doutorando em Transportes - Universidade de Bras??lia (UNB)
>>> Mobile: +55 (061) 99015658
>>>
>>>
>>> ------------------------------------------------------------------------------------------------------------------
>>> Agronomist engineer
>>> Master in Remote Sensing - National  Institute for Space Research (INPE)
>>> -
>>> Brazil
>>> PHD Student in Transport - Bras??lia University (UNB)
>>>
>>>
>>> ________________________________
>>> De: R-sig-Geo <r-sig-geo-bounces at r-project.org> em nome de Kenny Bell <
>>> kmb56 at berkeley.edu>
>>> Enviado: segunda-feira, 1 de agosto de 2016 19:47
>>> Para: M. Edward (Ed) Borasky
>>> Cc: R-sig-geo mailing list
>>> Assunto: Re: [R-sig-Geo] Climate data in R
>>>
>>> See https://cran.r-project.org/web/packages/prism/index.html for
>>> CRAN - Package prism<
>>> https://cran.r-project.org/web/packages/prism/index.html>
>>> cran.r-project.org
>>> prism: Access Data from the Oregon State Prism Climate Project. Allows
>>> users to access the Oregon State Prism climate data. Using the web
>>> service
>>> API data can easily ...
>>>
>>>
>>> interpolated US weather data
>>>
>>> On Mon, Aug 1, 2016 at 12:43 PM, M. Edward (Ed) Borasky <znmeb at znmeb.net
>>> >
>>> wrote:
>>>
>>> I have a similar question. Assume I've downloaded the climate data for
>>>>
>>> all
>>>
>>>> the stations in the US state of Oregon, including their latitude,
>>>>
>>> longitude
>>>
>>>> and elevation, using rnoaa. How do I *interpolate* climate values for an
>>>> arbitrary latitude / longitude / elevation inside a triangle defined by
>>>>
>>> the
>>>
>>>> nearest stations?
>>>>
>>>> On Mon, Aug 1, 2016 at 3:24 AM Miluji Sb <milujisb at gmail.com> wrote:
>>>>
>>>> Dear all,
>>>>>
>>>>> I have a set of coordinates. Is it possible to extract climate data
>>>>> (temperature and precipitation) by coordinates using the R packages
>>>>>
>>>> such
>>>
>>>> as
>>>>
>>>>> rnoaa?
>>>>>
>>>>> For example;
>>>>>
>>>>> out <- ncdc(datasetid='ANNUAL', stationid='GHCND:USW00014895',
>>>>> datatypeid='TEMP')
>>>>>
>>>>> But instead of stationid can I pass a list of coordinates through it?
>>>>> Thanks a lot!
>>>>>
>>>>> Sincerely,
>>>>>
>>>>> Milu
>>>>>
>>>>>          [[alternative HTML version deleted]]
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>> --
>>>> How many people can stand on the shoulders of a giant before the giant
>>>> collapses?
>>>>
>>>>          [[alternative HTML version deleted]]
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>
>>>
>>> --
>>> Kendon Bell
>>> Email: kmb56 at berkeley.edu
>>> Phone: (510) 612-3375
>>>
>>> Ph.D. Candidate
>>> Department of Agricultural & Resource Economics
>>> University of California, Berkeley
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From mathieu.rajerison at gmail.com  Wed Aug  3 11:26:53 2016
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Wed, 3 Aug 2016 11:26:53 +0200
Subject: [R-sig-Geo] Minimum bounding circle from cluster of points
In-Reply-To: <CAFfx76_LTnDhZ3TBZ5_s5PLGnAPqi8Zhs0SCCFNU7+qX0W27Pg@mail.gmail.com>
References: <CAFfx76-ty8G6GhUGps3hnC2tY56WyPVrhxnePD0CmV4Nvh4S6A@mail.gmail.com>
	<CAFfx76_LTnDhZ3TBZ5_s5PLGnAPqi8Zhs0SCCFNU7+qX0W27Pg@mail.gmail.com>
Message-ID: <CAGfc75nPEE+66gaCLQ2dWof3eHNeCsETfQR992SMc_OkRnV=Jw@mail.gmail.com>

There was the answer in R here :
http://www.psychologie.uni-kiel.de/de#draw-the-minimum-bounding-box

But the page doesn't seem to exist anymore..
?

2016-07-11 17:26 GMT+02:00 Tina Cormier <TinaACormier at gmail.com>:

> Wow! I'm humbled that you all took the time to help me out! You had great
> suggestions and sent along some very handy functions. I have the idea now
> of what I need to do - find the longest distance between two points in the
> cluster, the midpoint of that line is the center of the circle, and there
> are numerous ways to create the circle, but once you have the radius, you
> can just buffer the center point. Fantastically simple. Someone also
> suggested using PostGIS (ST_MinimumBoundingCircle), which I will definitely
> try. I have a postgreSQL db that I use for some simple stuff, and I'm not a
> guru by any means, but this will help me gain a little more experience.
>
> Thank you again, and I can't wait to pay if forward the next time someone
> asks about a topic I know well!
>
> Cheers,
> Tina
> ***********************************************************************
> In SUMMARY, functions that solve this problem are listed below:
>
> 1. Using a *3-liner* from Robert Hijmans, using optimization:
> library(raster)
> library(rgeos)
>
> set.seed(7)
> n <- 4
> xy <- cbind(runif(n), runif(n))
>
>
>
>
> *f <- function(p) { max(pointDistance(rbind(p), xy, lonlat=FALSE)) }p <-
> optim(colMeans(xy), f)cc <- buffer(SpatialPoints(rbind(p$par)),
> width=p$value, quadsegs=45)*
> plot(cc)
> points(xy, pch=20, cex=1.5)
> points(rbind(p$par), pch='*', col='red', cex=3)
> lines(rbind(p$par, c(p$par[1]+p$value, p$par[2])), col='blue', lwd=2,
> lty=2)
> text(p$par[1]+0.5*p$value, p$par[2], paste("radius =", round(p$value,
> 2)), pos=3, cex=.85)
> text(p$par[1], p$par[2], labels=paste0("(",paste(round(p$par, 2),
> collapse=", "), ")"), pos=1, cex=.75)
> ***********************************************************************
>
> 2. A function from Adrian Baddeley using spatstat
> library(spatstat)
>
> circumcircle <- function(x, ...) {   UseMethod("circumcircle") }
>
> circumcircle.owin <- function(x, ...) {
>   d2 <- fardist(x, ..., squared=TRUE)
>   z <- where.min(d2)
>   r <- sqrt(min(d2))
>   w <- disc(centre=z, radius=r)
>   return(w)
> }
>
> circumcircle.ppp <- function(x, ...) {
>   circumcircle(convexhull(x))
> }
> ***********************************************************************
>
> 3. A handy link that walks through the process in a bit longer way around,
> but still works:
> http://www.uni-kiel.de/psychologie/rexrepos/posts/diagBounding.html
>
>
> On Fri, Jul 8, 2016 at 10:31 AM, Tina Cormier <TinaACormier at gmail.com>
> wrote:
>
> > Hi all,
> >
> > Looking for help aggregating some field data subplots to the plot level
> > (data currently in shapefile format). I have clusters of 4 points (4
> > subplots = 1 plot). I'd like to create a circle around each cluster that
> is
> > the smallest circle that would encompass all 4 points. Sort of like a
> > convex hull, but a circle (convex hull, in this case, would give me a
> > triangle because of the layout of the subplots). I am familiar with (and
> > use frequently) the typical geo packages in R - with rgdal, sp, raster,
> and
> > maptools being my most frequent flyers. Is there a function I'm missing
> in
> > these (or some other) packages that might be able to help me out? In the
> > attribute table, I have a unique ID for each plot/cluster. So for each
> plot
> > ID (in this case, consisting of 4 subplots), I'd like to build a circle
> > around all of the subplots.
> >
> > > str(pts)
> > Formal class 'SpatialPointsDataFrame' [package "sp"] with 5 slots
> >   ..@ data       :'data.frame': 160 obs. of  12 variables:
> >   .. ..$ Plot      : num [1:160] 1 1 1 1 2 2 2 2 3 3 ...
> >   .. ..$ Subplot   : num [1:160] 1 2 3 4 1 2 3 4 1 2 ...
> >
> > I should also mention that it's not always 4 points (subplots), and they
> > aren't always covering the same size area on the ground, so buffering by
> a
> > constant distance isn't the answer. I have subset out 3 plots (so 12
> > subplots) into a test file here:
> > https://dl.dropboxusercontent.com/u/72421241/test_subplotsToPlots.zip
> >
> > I have R version 3.3.0. I know it's customary to include code for what
> > I've tried, buuuut, that would be a blank canvas at this point. Googling
> > hasn't really been fruitful for this issue, so I thought you folks might
> > have some good ideas!
> >
> > Thanks,
> > Tina
> >
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From dw2116 at outlook.com  Wed Aug  3 17:46:12 2016
From: dw2116 at outlook.com (David Wang)
Date: Wed, 3 Aug 2016 15:46:12 +0000
Subject: [R-sig-Geo] Set up raster data in WRF Mercator projection
Message-ID: <DM5PR11MB1593AF7EDDFC6F171E11A9EDCB060@DM5PR11MB1593.namprd11.prod.outlook.com>

Hello,


I'd like to load a WRF (Weather Research and Forecasting) output file in NetCDF as rasters and set up correct projection and coordinates. Using land mask as an example,


landmask <- raster("geo_em_d01.nc", varname = "LANDMASK")


The projection of this particular WRF simulation is Mercator. After extensive googling, I came up with this projection string:


projection(landmask) <- CRS("+proj=merc +lat_ts=30 +lon_0=-67 +a=6370000.0 +b=6370000.0 +units=km +no_defs")


That is based on the grid information from ncdump -h geo_em_d01.nc:


                :GRIDTYPE = "C" ;
                :DX = 27000.f ;
                :DY = 27000.f ;
                :DYN_OPT = 2 ;
                :CEN_LAT = 32.f ;
                :CEN_LON = -67.f ;
                :TRUELAT1 = 30.f ;
                :TRUELAT2 = 45.f ;
                :MOAD_CEN_LAT = 32.f ;
                :STAND_LON = 290.f ;
                :POLE_LAT = 90.f ;
                :POLE_LON = 0.f ;
                :corner_lats = 6.033165f, 52.29568f, 52.29568f, 6.033165f, 6.033165f, 52.29568f, 52.29568f, 6.033165f, 5.893715f, 52.38135f, 52.38135f, 5.893715f, 5.893715f, 52.38135f, 52.38135f, 5.893715f ;
                :corner_lons = -129.8151f, -129.8151f, -4.184856f, -4.184856f, -129.9554f, -129.9554f, -4.044647f, -4.044647f, -129.8151f, -129.8151f, -4.184856f, -4.184856f, -129.9554f, -129.9554f, -4.044647f, -4.044647f ;
                :MAP_PROJ = 3 ;

However, I'm not entirely sure this projection is correct. Furthermore, I have no clue how to set extent(landmask) in km. Can anyone familiar with WRF give me a pointer or two?


Thanks,

David

	[[alternative HTML version deleted]]


From dosc3612 at colorado.edu  Wed Aug  3 18:52:20 2016
From: dosc3612 at colorado.edu (Dominik Schneider)
Date: Wed, 3 Aug 2016 10:52:20 -0600
Subject: [R-sig-Geo] Set up raster data in WRF Mercator projection
In-Reply-To: <DM5PR11MB1593AF7EDDFC6F171E11A9EDCB060@DM5PR11MB1593.namprd11.prod.outlook.com>
References: <DM5PR11MB1593AF7EDDFC6F171E11A9EDCB060@DM5PR11MB1593.namprd11.prod.outlook.com>
Message-ID: <CAF1jk_n=wUADBH4A+UwHAwynbgLEX2Fs0y_ZA-jwDVGV6=MvPg@mail.gmail.com>

did you see this thread? might help:
http://r-sig-geo.2731867.n2.nabble.com/adapting-spatial-points-and-wrld-smpl-to-a-reference-system-implicit-in-a-nc-file-tt7589570.html

>From my notes, the mercator WRF projection would look like this:
Projection_String = ('PROJCS["Sphere_Mercator",'
                             'GEOGCS["GCS_Sphere",'
                             'DATUM["D_Sphere",'
                             'SPHEROID["Sphere",6370000.0,0.0]],'
                             'PRIMEM["Greenwich",0.0],'
                             'UNIT["Degree",0.0174532925199433]],'
                             'PROJECTION["Mercator"],'
                             'PARAMETER["False_Easting",0.0],'
                             'PARAMETER["False_Northing",0.0],'
                             'PARAMETER["Central_Meridian",' +
str(central_meridian) + '],'
                             'PARAMETER["Standard_Parallel_1",' +
str(standard_parallel_1) + '],'
                             'UNIT["Meter",1.0]]')


where central_meridian = STAND_LON and standard_parallel_1=TRUELAT1

so to start I think you want (changes in *bold*):
"+proj=merc +lat_ts=30 +lon_0=*290* +a=6370000.0 +b=6370000.0 +units=*m*
 +no_defs")

if you post the data, someone might be able to help create a proper raster
for you.


On Wed, Aug 3, 2016 at 9:46 AM, David Wang <dw2116 at outlook.com> wrote:

> Hello,
>
>
> I'd like to load a WRF (Weather Research and Forecasting) output file in
> NetCDF as rasters and set up correct projection and coordinates. Using land
> mask as an example,
>
>
> landmask <- raster("geo_em_d01.nc", varname = "LANDMASK")
>
>
> The projection of this particular WRF simulation is Mercator. After
> extensive googling, I came up with this projection string:
>
>
> projection(landmask) <- CRS("+proj=merc +lat_ts=30 +lon_0=-67 +a=6370000.0
> +b=6370000.0 +units=km +no_defs")
>
>
> That is based on the grid information from ncdump -h geo_em_d01.nc:
>
>
>                 :GRIDTYPE = "C" ;
>                 :DX = 27000.f ;
>                 :DY = 27000.f ;
>                 :DYN_OPT = 2 ;
>                 :CEN_LAT = 32.f ;
>                 :CEN_LON = -67.f ;
>                 :TRUELAT1 = 30.f ;
>                 :TRUELAT2 = 45.f ;
>                 :MOAD_CEN_LAT = 32.f ;
>                 :STAND_LON = 290.f ;
>                 :POLE_LAT = 90.f ;
>                 :POLE_LON = 0.f ;
>                 :corner_lats = 6.033165f, 52.29568f, 52.29568f, 6.033165f,
> 6.033165f, 52.29568f, 52.29568f, 6.033165f, 5.893715f, 52.38135f,
> 52.38135f, 5.893715f, 5.893715f, 52.38135f, 52.38135f, 5.893715f ;
>                 :corner_lons = -129.8151f, -129.8151f, -4.184856f,
> -4.184856f, -129.9554f, -129.9554f, -4.044647f, -4.044647f, -129.8151f,
> -129.8151f, -4.184856f, -4.184856f, -129.9554f, -129.9554f, -4.044647f,
> -4.044647f ;
>                 :MAP_PROJ = 3 ;
>
> However, I'm not entirely sure this projection is correct. Furthermore, I
> have no clue how to set extent(landmask) in km. Can anyone familiar with
> WRF give me a pointer or two?
>
>
> Thanks,
>
> David
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From dw2116 at outlook.com  Wed Aug  3 19:51:01 2016
From: dw2116 at outlook.com (David Wang)
Date: Wed, 3 Aug 2016 17:51:01 +0000
Subject: [R-sig-Geo] Set up raster data in WRF Mercator projection
In-Reply-To: <CAF1jk_n=wUADBH4A+UwHAwynbgLEX2Fs0y_ZA-jwDVGV6=MvPg@mail.gmail.com>
References: <DM5PR11MB1593AF7EDDFC6F171E11A9EDCB060@DM5PR11MB1593.namprd11.prod.outlook.com>,
	<CAF1jk_n=wUADBH4A+UwHAwynbgLEX2Fs0y_ZA-jwDVGV6=MvPg@mail.gmail.com>
Message-ID: <DM5PR11MB159347CF8F3194CA92AC062ACB060@DM5PR11MB1593.namprd11.prod.outlook.com>

Hello Dominik,


Thanks for your comment. Yes, I have read the thread that you pointed to prior to posting the question. It's Lambert conformal conic projection though. I'm not sure the way to compute the domain extent is the same.


I have uploaded a copy of the grid file at https://www.dropbox.com/s/ffrxqkxr4vai8hf/geo_em.d01.nc?dl=0 if anyone happens to be able to take a look.

Thanks,
David

________________________________
From: Dominik Schneider <dosc3612 at colorado.edu>
Sent: Wednesday, August 3, 2016 12:52 PM
To: David Wang
Cc: r-sig-geo
Subject: Re: [R-sig-Geo] Set up raster data in WRF Mercator projection

did you see this thread? might help: http://r-sig-geo.2731867.n2.nabble.com/adapting-spatial-points-and-wrld-smpl-to-a-reference-system-implicit-in-a-nc-file-tt7589570.html

>From my notes, the mercator WRF projection would look like this:
Projection_String = ('PROJCS["Sphere_Mercator",'
                             'GEOGCS["GCS_Sphere",'
                             'DATUM["D_Sphere",'
                             'SPHEROID["Sphere",6370000.0,0.0]],'
                             'PRIMEM["Greenwich",0.0],'
                             'UNIT["Degree",0.0174532925199433]],'
                             'PROJECTION["Mercator"],'
                             'PARAMETER["False_Easting",0.0],'
                             'PARAMETER["False_Northing",0.0],'
                             'PARAMETER["Central_Meridian",' + str(central_meridian) + '],'
                             'PARAMETER["Standard_Parallel_1",' + str(standard_parallel_1) + '],'
                             'UNIT["Meter",1.0]]')


where central_meridian = STAND_LON and standard_parallel_1=TRUELAT1

so to start I think you want (changes in bold):
"+proj=merc +lat_ts=30 +lon_0=290 +a=6370000.0 +b=6370000.0 +units=m +no_defs")

if you post the data, someone might be able to help create a proper raster for you.


On Wed, Aug 3, 2016 at 9:46 AM, David Wang <dw2116 at outlook.com<mailto:dw2116 at outlook.com>> wrote:
Hello,


I'd like to load a WRF (Weather Research and Forecasting) output file in NetCDF as rasters and set up correct projection and coordinates. Using land mask as an example,


landmask <- raster("geo_em_d01.nc<http://geo_em_d01.nc>", varname = "LANDMASK")


The projection of this particular WRF simulation is Mercator. After extensive googling, I came up with this projection string:


projection(landmask) <- CRS("+proj=merc +lat_ts=30 +lon_0=-67 +a=6370000.0 +b=6370000.0 +units=km +no_defs")


That is based on the grid information from ncdump -h geo_em_d01.nc<http://geo_em_d01.nc>:


                :GRIDTYPE = "C" ;
                :DX = 27000.f ;
                :DY = 27000.f ;
                :DYN_OPT = 2 ;
                :CEN_LAT = 32.f ;
                :CEN_LON = -67.f ;
                :TRUELAT1 = 30.f ;
                :TRUELAT2 = 45.f ;
                :MOAD_CEN_LAT = 32.f ;
                :STAND_LON = 290.f ;
                :POLE_LAT = 90.f ;
                :POLE_LON = 0.f ;
                :corner_lats = 6.033165f, 52.29568f, 52.29568f, 6.033165f, 6.033165f, 52.29568f, 52.29568f, 6.033165f, 5.893715f, 52.38135f, 52.38135f, 5.893715f, 5.893715f, 52.38135f, 52.38135f, 5.893715f ;
                :corner_lons = -129.8151f, -129.8151f, -4.184856f, -4.184856f, -129.9554f, -129.9554f, -4.044647f, -4.044647f, -129.8151f, -129.8151f, -4.184856f, -4.184856f, -129.9554f, -129.9554f, -4.044647f, -4.044647f ;
                :MAP_PROJ = 3 ;

However, I'm not entirely sure this projection is correct. Furthermore, I have no clue how to set extent(landmask) in km. Can anyone familiar with WRF give me a pointer or two?


Thanks,

David

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From tom.hengl at gmail.com  Wed Aug  3 22:44:26 2016
From: tom.hengl at gmail.com (Tomislav Hengl)
Date: Wed, 3 Aug 2016 22:44:26 +0200
Subject: [R-sig-Geo] Problems with installing rgdal on Ubuntu "checking
 gdal: linking with --libs only... no"
Message-ID: <12b6bd49-5332-e272-00ef-fdc324a67c97@gmail.com>


Hi Roger,

I am sorry to bother you with this. I have reinstalled R on my server 
(actually MRO) and I have been stuck now trying to install rgdal 
(constantly getting "configure: Install failure: compilation and/or 
linkage problems. configure: error: GDALAllRegister not found in 
libgdal."). I've looked at numerous posts 
(http://stackoverflow.com/questions/34442010/r-cannot-install-rgdal-package-on-ubuntu-14-04) 
but I do not see where the problem comes from.

Thank you!

Here is my existing GDAL installation:

$ gdal-config --version
2.1.0
$ proj
Rel. 4.9.2, 08 September 2015
usage: proj [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]

$ ldd /usr/lib64/MRO-3.3.0/R-3.3.0/lib/R/bin/exec/R
         linux-vdso.so.1 =>  (0x00007ffd9098e000)
         libR.so => not found
         libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 
(0x00007f8cebcb3000)
         libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f8ceb8e9000)
         /lib64/ld-linux-x86-64.so.2 (0x000055aff5b57000)


 > install.packages("rgdal")
Installing package into ?/home/tom/R/x86_64-pc-linux-gnu-library/3.3?
(as ?lib? is unspecified)
trying URL 
'https://mran.microsoft.com/snapshot/2016-06-01/src/contrib/rgdal_1.1-10.tar.gz' 

Content type 'application/octet-stream' length 1653393 bytes (1.6 MB)
==================================================
downloaded 1.6 MB

* installing *source* package ?rgdal? ...
** package ?rgdal? successfully unpacked and MD5 sums checked
configure: CC: gcc -std=gnu99
configure: CXX: g++
configure: rgdal: 1.1-10
checking for /usr/bin/svnversion... yes
configure: svn revision: 622
checking for gdal-config... /usr/local/bin/gdal-config
checking gdal-config usability... yes
configure: GDAL: 2.1.0
checking GDAL version >= 1.6.3... yes
configure: experimental conditional use of GDAL2
checking for gcc... gcc -std=gnu99
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc -std=gnu99 accepts -g... yes
checking for gcc -std=gnu99 option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -std=gnu99 -E
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking gdal.h usability... yes
checking gdal.h presence... yes
checking for gdal.h... yes
checking gdal: linking with --libs only... no
checking gdal: linking with --libs and --dep-libs... no
/usr/local/lib/libgdal.so: undefined reference to 
`kmlengine::Href::Parse(std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&)'
/usr/local/lib/libgdal.so: undefined reference to 
`kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> >*, 
std::__cxx11::basic_string<char, std::char_traits<char>, 
std::allocator<char> >*) const'
/usr/local/lib/libgdal.so: undefined reference to 
`kmlengine::KmzFile::OpenFromString(std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&)'
/usr/local/lib/libgdal.so: undefined reference to 
`kmldom::SerializePretty[abi:cxx11](boost::intrusive_ptr<kmldom::Element> 
const&)'
/usr/local/lib/libgdal.so: undefined reference to 
`kmldom::Parse(std::__cxx11::basic_string<char, std::char_traits<char>, 
std::allocator<char> > const&, std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> >*)'
/usr/local/lib/libgdal.so: undefined reference to 
`kmlengine::KmzFile::ReadFile(char const*, 
std::__cxx11::basic_string<char, std::char_traits<char>, 
std::allocator<char> >*) const'
collect2: error: ld returned 1 exit status
/usr/bin/ld: warning: libproj.so.10, needed by 
/usr/local/lib/libgdal.so, may conflict with libproj.so.9
/usr/local/lib/libgdal.so: undefined reference to 
`kmlengine::Href::Parse(std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&)'
/usr/local/lib/libgdal.so: undefined reference to 
`kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> >*, 
std::__cxx11::basic_string<char, std::char_traits<char>, 
std::allocator<char> >*) const'
/usr/local/lib/libgdal.so: undefined reference to 
`kmlengine::KmzFile::OpenFromString(std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&)'
/usr/local/lib/libgdal.so: undefined reference to 
`kmldom::SerializePretty[abi:cxx11](boost::intrusive_ptr<kmldom::Element> 
const&)'
/usr/local/lib/libgdal.so: undefined reference to 
`kmldom::Parse(std::__cxx11::basic_string<char, std::char_traits<char>, 
std::allocator<char> > const&, std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> >*)'
/usr/local/lib/libgdal.so: undefined reference to 
`kmlengine::KmzFile::ReadFile(char const*, 
std::__cxx11::basic_string<char, std::char_traits<char>, 
std::allocator<char> >*) const'
collect2: error: ld returned 1 exit status
configure: Install failure: compilation and/or linkage problems.
configure: error: GDALAllRegister not found in libgdal.
ERROR: configuration failed for package ?rgdal?
* removing ?/home/tom/R/x86_64-pc-linux-gnu-library/3.3/rgdal?


From dosc3612 at colorado.edu  Wed Aug  3 22:54:35 2016
From: dosc3612 at colorado.edu (Dominik Schneider)
Date: Wed, 3 Aug 2016 14:54:35 -0600
Subject: [R-sig-Geo] Set up raster data in WRF Mercator projection
In-Reply-To: <DM5PR11MB159347CF8F3194CA92AC062ACB060@DM5PR11MB1593.namprd11.prod.outlook.com>
References: <DM5PR11MB1593AF7EDDFC6F171E11A9EDCB060@DM5PR11MB1593.namprd11.prod.outlook.com>
	<CAF1jk_n=wUADBH4A+UwHAwynbgLEX2Fs0y_ZA-jwDVGV6=MvPg@mail.gmail.com>
	<DM5PR11MB159347CF8F3194CA92AC062ACB060@DM5PR11MB1593.namprd11.prod.outlook.com>
Message-ID: <CAF1jk_mB7J9bQ9J4cyY+Nuu4L29mMbLx8CGqRTUMvC0ZRNTDJQ@mail.gmail.com>

Same process, just different projection.

with this folder structure:
project_dir
- data
- scripts

the following script in 'scripts', nc file in 'data'


library(ncdf4)
library(raster)

# open the nc file for reading
ncid=nc_open('../data/geo_em.d01.nc')

#check which grid the variable of interest is on
ncatt_get(ncid,'LANDMASK')#stagger=M

# domain corner grids. see
http://www2.mmm.ucar.edu/wrf/users/docs/user_guide_V3/users_guide_chap3.htm
cornerlat=ncatt_get(ncid,0)$corner_lats
cornerlong=ncatt_get(ncid,0)$corner_lons

# projected grid resolution
dx=ncatt_get(ncid,0)$DX
dy=ncatt_get(ncid,0)$DY

# the coordinates are on a sphere in longlat
proj1=CRS('+proj=longlat +towgs84=0,0,0 +a=6370000 +b=6370000 +units=m
+no_defs')

# But the data is in projected space. for a more general script, you would
build this programmatically from the attributes in geo file
wrfproj=CRS("+proj=merc +lat_ts=30 +lon_0=290 +a=6370000.0 +b=6370000.0
+units=m +no_defs")

# create spatial points
# using the extreme corners of the data since raster uses extreme
coordinates. page 3,
https://cran.r-project.org/web/packages/raster/vignettes/Raster.pdf
# there are 16 corner coordinates. 1:4 are cell centers. 13:16 are cell
extremes (see wrf user_guide linked above)
# these coordinates are in longlat so assign geographic system from above
spext <-
SpatialPoints(
list( x=cornerlong[13:16],
y=cornerlat[13:16]),
proj4string = proj1)

# convert to projected space
spext.wrf <- spTransform(spext,wrfproj)

# read the variable wanted
r=raster('../data/geo_em.d01.nc',varname='LANDMASK')
# assign projection detailed in the geo file (defined above as wrfproj)
projection(r)=wrfproj
# change extent to that of the projected spatialpoints
extent(r) <- extent(spext.wrf)
# check the raster.
r
# seem to be missing a couple meters in extent. might be a floating point
issue? you can force the resolution since you know it, but this will change
the bottom right corner of the extent
res(r)=c(dx,dy)
r

On Wed, Aug 3, 2016 at 11:51 AM, David Wang <dw2116 at outlook.com> wrote:

> Hello Dominik,
>
>
> Thanks for your comment. Yes, I have read the thread that you pointed to
> prior to posting the question. It's Lambert conformal conic projection
> though. I'm not sure the way to compute the domain extent is the same.
>
>
> I have uploaded a copy of the grid file at
> https://www.dropbox.com/s/ffrxqkxr4vai8hf/geo_em.d01.nc?dl=0 if anyone
> happens to be able to take a look.
>
> Thanks,
> David
>
> ------------------------------
> *From:* Dominik Schneider <dosc3612 at colorado.edu>
> *Sent:* Wednesday, August 3, 2016 12:52 PM
> *To:* David Wang
> *Cc:* r-sig-geo
> *Subject:* Re: [R-sig-Geo] Set up raster data in WRF Mercator projection
>
> did you see this thread? might help:
> http://r-sig-geo.2731867.n2.nabble.com/adapting-spatial-points-and-wrld-smpl-to-a-reference-system-implicit-in-a-nc-file-tt7589570.html
>
> From my notes, the mercator WRF projection would look like this:
> Projection_String = ('PROJCS["Sphere_Mercator",'
>                              'GEOGCS["GCS_Sphere",'
>                              'DATUM["D_Sphere",'
>                              'SPHEROID["Sphere",6370000.0,0.0]],'
>                              'PRIMEM["Greenwich",0.0],'
>                              'UNIT["Degree",0.0174532925199433]],'
>                              'PROJECTION["Mercator"],'
>                              'PARAMETER["False_Easting",0.0],'
>                              'PARAMETER["False_Northing",0.0],'
>                              'PARAMETER["Central_Meridian",' +
> str(central_meridian) + '],'
>                              'PARAMETER["Standard_Parallel_1",' +
> str(standard_parallel_1) + '],'
>                              'UNIT["Meter",1.0]]')
>
>
> where central_meridian = STAND_LON and standard_parallel_1=TRUELAT1
>
> so to start I think you want (changes in *bold*):
> "+proj=merc +lat_ts=30 +lon_0=*290* +a=6370000.0 +b=6370000.0 +units=*m*
>  +no_defs")
>
> if you post the data, someone might be able to help create a proper raster
> for you.
>
>
> On Wed, Aug 3, 2016 at 9:46 AM, David Wang <dw2116 at outlook.com> wrote:
>
>> Hello,
>>
>>
>> I'd like to load a WRF (Weather Research and Forecasting) output file in
>> NetCDF as rasters and set up correct projection and coordinates. Using land
>> mask as an example,
>>
>>
>> landmask <- raster("geo_em_d01.nc", varname = "LANDMASK")
>>
>>
>> The projection of this particular WRF simulation is Mercator. After
>> extensive googling, I came up with this projection string:
>>
>>
>> projection(landmask) <- CRS("+proj=merc +lat_ts=30 +lon_0=-67
>> +a=6370000.0 +b=6370000.0 +units=km +no_defs")
>>
>>
>> That is based on the grid information from ncdump -h geo_em_d01.nc:
>>
>>
>>                 :GRIDTYPE = "C" ;
>>                 :DX = 27000.f ;
>>                 :DY = 27000.f ;
>>                 :DYN_OPT = 2 ;
>>                 :CEN_LAT = 32.f ;
>>                 :CEN_LON = -67.f ;
>>                 :TRUELAT1 = 30.f ;
>>                 :TRUELAT2 = 45.f ;
>>                 :MOAD_CEN_LAT = 32.f ;
>>                 :STAND_LON = 290.f ;
>>                 :POLE_LAT = 90.f ;
>>                 :POLE_LON = 0.f ;
>>                 :corner_lats = 6.033165f, 52.29568f, 52.29568f,
>> 6.033165f, 6.033165f, 52.29568f, 52.29568f, 6.033165f, 5.893715f,
>> 52.38135f, 52.38135f, 5.893715f, 5.893715f, 52.38135f, 52.38135f, 5.893715f
>> ;
>>                 :corner_lons = -129.8151f, -129.8151f, -4.184856f,
>> -4.184856f, -129.9554f, -129.9554f, -4.044647f, -4.044647f, -129.8151f,
>> -129.8151f, -4.184856f, -4.184856f, -129.9554f, -129.9554f, -4.044647f,
>> -4.044647f ;
>>                 :MAP_PROJ = 3 ;
>>
>> However, I'm not entirely sure this projection is correct. Furthermore, I
>> have no clue how to set extent(landmask) in km. Can anyone familiar with
>> WRF give me a pointer or two?
>>
>>
>> Thanks,
>>
>> David
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>

	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Wed Aug  3 23:00:04 2016
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 3 Aug 2016 23:00:04 +0200
Subject: [R-sig-Geo] Problems with installing rgdal on Ubuntu "checking
 gdal: linking with --libs only... no"
In-Reply-To: <12b6bd49-5332-e272-00ef-fdc324a67c97@gmail.com>
References: <12b6bd49-5332-e272-00ef-fdc324a67c97@gmail.com>
Message-ID: <alpine.LFD.2.20.1608032249050.11166@reclus.nhh.no>

Hi Tom,

As you can see from the configure output, your GDAL install is broken:

...
checking gdal.h usability... yes
checking gdal.h presence... yes
checking for gdal.h... yes
checking gdal: linking with --libs only... no
checking gdal: linking with --libs and --dep-libs... no
/usr/local/lib/libgdal.so: undefined reference to
`kmlengine::Href::Parse(std::__cxx11::basic_string<char,
std:: char_traits<char>, std::allocator<char> > const&)'
/usr/local/lib/libgdal.so: undefined reference to
`kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char,
std:: char_traits<char>, std::allocator<char> >*,
std: :__cxx11::basic_string<char, std::char_traits<char>,
std:: allocator<char> >*) const'
...

My guess is either multiple installed GDAL versions, or a GDAL built with 
libkml but without access to the libkml shared object. With correctly 
installed GDAL, you would see:

checking gdal.h usability... yes
checking gdal.h presence... yes
checking for gdal.h... yes
checking gdal: linking with --libs only... yes

It could also be a C++ version problem between GDAL and its dependencies, 
but I suspect a broken GDAL.

Hope this helps,

Roger

On Wed, 3 Aug 2016, Tomislav Hengl wrote:

>
> Hi Roger,
>
> I am sorry to bother you with this. I have reinstalled R on my server 
> (actually MRO) and I have been stuck now trying to install rgdal (constantly 
> getting "configure: Install failure: compilation and/or linkage problems. 
> configure: error: GDALAllRegister not found in libgdal."). I've looked at 
> numerous posts 
> (http://stackoverflow.com/questions/34442010/r-cannot-install-rgdal-package-on-ubuntu-14-04) 
> but I do not see where the problem comes from.
>
> Thank you!
>
> Here is my existing GDAL installation:
>
> $ gdal-config --version
> 2.1.0
> $ proj
> Rel. 4.9.2, 08 September 2015
> usage: proj [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
>
> $ ldd /usr/lib64/MRO-3.3.0/R-3.3.0/lib/R/bin/exec/R
>         linux-vdso.so.1 =>  (0x00007ffd9098e000)
>         libR.so => not found
>         libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 
> (0x00007f8cebcb3000)
>         libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f8ceb8e9000)
>         /lib64/ld-linux-x86-64.so.2 (0x000055aff5b57000)
>
>
>>  install.packages("rgdal")
> Installing package into ?/home/tom/R/x86_64-pc-linux-gnu-library/3.3?
> (as ?lib? is unspecified)
> trying URL 
> 'https://mran.microsoft.com/snapshot/2016-06-01/src/contrib/rgdal_1.1-10.tar.gz' 
> Content type 'application/octet-stream' length 1653393 bytes (1.6 MB)
> ==================================================
> downloaded 1.6 MB
>
> * installing *source* package ?rgdal? ...
> ** package ?rgdal? successfully unpacked and MD5 sums checked
> configure:  CC: gcc -std=gnu99
> configure:  CXX: g++
> configure:  rgdal: 1.1-10
> checking for /usr/bin/svnversion... yes
> configure:  svn revision: 622
> checking for gdal-config... /usr/local/bin/gdal-config
> checking gdal-config usability... yes
> configure:  GDAL: 2.1.0
> checking GDAL version >= 1.6.3... yes
> configure:  experimental conditional use of GDAL2
> checking for gcc... gcc -std=gnu99
> checking whether the C compiler works... yes
> checking for C compiler default output file name... a.out
> checking for suffix of executables...
> checking whether we are cross compiling... no
> checking for suffix of object files... o
> checking whether we are using the GNU C compiler... yes
> checking whether gcc -std=gnu99 accepts -g... yes
> checking for gcc -std=gnu99 option to accept ISO C89... none needed
> checking how to run the C preprocessor... gcc -std=gnu99 -E
> checking for grep that handles long lines and -e... /bin/grep
> checking for egrep... /bin/grep -E
> checking for ANSI C header files... yes
> checking for sys/types.h... yes
> checking for sys/stat.h... yes
> checking for stdlib.h... yes
> checking for string.h... yes
> checking for memory.h... yes
> checking for strings.h... yes
> checking for inttypes.h... yes
> checking for stdint.h... yes
> checking for unistd.h... yes
> checking gdal.h usability... yes
> checking gdal.h presence... yes
> checking for gdal.h... yes
> checking gdal: linking with --libs only... no
> checking gdal: linking with --libs and --dep-libs... no
> /usr/local/lib/libgdal.so: undefined reference to 
> `kmlengine::Href::Parse(std::__cxx11::basic_string<char, 
> std:: char_traits<char>, std::allocator<char> > const&)'
> /usr/local/lib/libgdal.so: undefined reference to 
> `kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char, 
> std:: char_traits<char>, std::allocator<char> >*, 
> std: :__cxx11::basic_string<char, std::char_traits<char>, 
> std:: allocator<char> >*) const'
> /usr/local/lib/libgdal.so: undefined reference to 
> `kmlengine::KmzFile::OpenFromString(std::__cxx11::basic_string<char, 
> std:: char_traits<char>, std::allocator<char> > const&)'
> /usr/local/lib/libgdal.so: undefined reference to 
> `kmldom::SerializePretty[abi:cxx11](boost::intrusive_ptr<kmldom::Element> 
> const&)'
> /usr/local/lib/libgdal.so: undefined reference to 
> `kmldom::Parse(std::__cxx11::basic_string<char, std::char_traits<char>, 
> std:: allocator<char> > const&, std::__cxx11::basic_string<char, 
> std:: char_traits<char>, std::allocator<char> >*)'
> /usr/local/lib/libgdal.so: undefined reference to 
> `kmlengine::KmzFile::ReadFile(char const*, 
> std: :__cxx11::basic_string<char, std::char_traits<char>, 
> std:: allocator<char> >*) const'
> collect2: error: ld returned 1 exit status
> /usr/bin/ld: warning: libproj.so.10, needed by /usr/local/lib/libgdal.so, may 
> conflict with libproj.so.9
> /usr/local/lib/libgdal.so: undefined reference to 
> `kmlengine::Href::Parse(std::__cxx11::basic_string<char, 
> std:: char_traits<char>, std::allocator<char> > const&)'
> /usr/local/lib/libgdal.so: undefined reference to 
> `kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char, 
> std:: char_traits<char>, std::allocator<char> >*, 
> std: :__cxx11::basic_string<char, std::char_traits<char>, 
> std:: allocator<char> >*) const'
> /usr/local/lib/libgdal.so: undefined reference to 
> `kmlengine::KmzFile::OpenFromString(std::__cxx11::basic_string<char, 
> std:: char_traits<char>, std::allocator<char> > const&)'
> /usr/local/lib/libgdal.so: undefined reference to 
> `kmldom::SerializePretty[abi:cxx11](boost::intrusive_ptr<kmldom::Element> 
> const&)'
> /usr/local/lib/libgdal.so: undefined reference to 
> `kmldom::Parse(std::__cxx11::basic_string<char, std::char_traits<char>, 
> std:: allocator<char> > const&, std::__cxx11::basic_string<char, 
> std:: char_traits<char>, std::allocator<char> >*)'
> /usr/local/lib/libgdal.so: undefined reference to 
> `kmlengine::KmzFile::ReadFile(char const*, 
> std: :__cxx11::basic_string<char, std::char_traits<char>, 
> std:: allocator<char> >*) const'
> collect2: error: ld returned 1 exit status
> configure:  Install failure: compilation and/or linkage problems.
> configure:  error: GDALAllRegister not found in libgdal.
> ERROR:  configuration failed for package ?rgdal?
> * removing ?/home/tom/R/x86_64-pc-linux-gnu-library/3.3/rgdal?
>
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
http://depsy.org/person/434412

From oscar.perpinan at upm.es  Thu Aug  4 10:19:06 2016
From: oscar.perpinan at upm.es (Oscar =?utf-8?B?UGVycGnDscOhbg==?= Lamigueiro)
Date: Thu, 04 Aug 2016 10:19:06 +0200
Subject: [R-sig-Geo] Incorrect month order in zApply function
In-Reply-To: <1683319255.6505118.1469820024122.JavaMail.yahoo@mail.yahoo.com>
	(Thiago V. dos Santos via's message of "Fri, 29 Jul 2016 19:20:24
	+0000 (UTC)")
References: <920141574.6225732.1469760750592.JavaMail.yahoo.ref@mail.yahoo.com>
	<920141574.6225732.1469760750592.JavaMail.yahoo@mail.yahoo.com>
	<9d686d72-6834-8a66-7422-c8700b2f7ee0@rsmas.miami.edu>
	<1683319255.6505118.1469820024122.JavaMail.yahoo@mail.yahoo.com>
Message-ID: <877fbxgd51.fsf@upm.es>

Hello,

With the current code of zApply, you should use a function that returns an ordered vector. For example:

Month <- function(x)
{
    idx <- as.numeric(format(x, '%m'))
    factor(month.name[idx],
           levels = month.name,
           ordered = TRUE)
}


x2 <- zApply(s, by = Month, mean)

Best,

Oscar.
-- 
Oscar Perpi??n Lamigueiro
Dpto. Ing. El?ctrica, Electr?nica, Autom?tica y F?sica Aplicada
Escuela T?cnica Superior de Ingenier?a y Dise?o Industrial
URL: http://oscarperpinan.github.io


From carlaoliveir at gmail.com  Thu Aug  4 10:29:20 2016
From: carlaoliveir at gmail.com (Carla Oliveira)
Date: Thu, 4 Aug 2016 09:29:20 +0100
Subject: [R-sig-Geo] =?utf-8?q?GEOMED_2017_=E2=80=93_=E2=80=9CDeeper_insig?=
	=?utf-8?q?ht_from_big_data_and_small_areas=E2=80=9D?=
Message-ID: <CAOoNHqiwPv-QqCMgm+t1iRzEGw3B1S8_kOoTc3cdkauWbS1EQQ@mail.gmail.com>

Dear List,


The *Institute for Research and Innovation in Health (Instituto de
Investiga??o e Inova??o em Sa?de) *(i3S), is pleased to announce GEOMED
2017 ? ?Deeper insight from big data and small areas?. GEOMED 2017 is the X
international interdisciplinary conference on spatial statistics,
geographical epidemiology and geographical aspects of public health. This
conference will be held in Porto, Portugal, from 7 to 9 September 2017 and
aims to bring together statisticians, geographers, epidemiologists,
computer scientists and public health professionals to discuss spatial
and spatio-temporal methods in health studies.

The interdisciplinary mix of the invited speakers is designed to ensure
that the conference will be of interest to participants with a wide range
of different backgrounds.


We invite you to submit an abstract in any one of the topic areas  planned
for GEOMED 2017 which include: GIS in Public Health; Spatial Health
Surveillance; Spatial survival and registry data analysis; Clustering of
temporal trends in space-time disease mapping; Agent-based modeling;
Modifiable areal unit issues and methods; Social networks and spatial
epidemiology: tools, opportunities and challenges; Modelling
climate-sensitive disease; Places and health: implications for
understanding health in cities; Modelling and inference in infectious
disease epidemiology; The use of linked data in spatial epidemiology;
Joint Modelling with Spatial Variation; Health Applications of the Google
Earth Engine; Challenges and Advances in Spatio-Temporal Disease Modelling.


Important deadlines are:
April 15, 2017 - Deadline for submission of abstracts

May 25, 2017 - Notification of acceptance of contributed talk and poster

June 15, 2017 -Deadline for early registration


For more details, please visit the conference website at:
http://www.i3s.up.pt/geomed17/index.html


On behalf of the organizing committee, I very much look forward to
welcoming you to GEOMED 2017.




-- 

*Carla Oliveira*



*Researcher*

i3S - Instituto de Investiga??o e Inova??o em Sa?de, UP

INEB ? Instituto de Engenharia Biom?dica, UP

*coliveir at ineb.up.pt <coliveir at ineb.up.pt>* / *www.i3s.up.pt
<http://www.i3s.up.pt/>* / *www.ineb.up.pt <http://www.ineb.up.pt/>*



*Invited Assistant Professor *

ESTSP ? Escola Superior Tecnol?gica da Sa?de do Porto, IPP

Departamento de Biomatem?tica, Bioestat?stica e Bioinform?tica

*cto at estsp.ipp.pt <cto at estsp.ipp.pt>* / *www.estsp.ipp.pt
<http://www.estsp.ipp.pt/>*

	[[alternative HTML version deleted]]


From tom.hengl at gmail.com  Thu Aug  4 17:42:23 2016
From: tom.hengl at gmail.com (Tomislav Hengl)
Date: Thu, 4 Aug 2016 17:42:23 +0200
Subject: [R-sig-Geo] Problems with installing rgdal on Ubuntu "checking
 gdal: linking with --libs only... no"
In-Reply-To: <alpine.LFD.2.20.1608032249050.11166@reclus.nhh.no>
References: <12b6bd49-5332-e272-00ef-fdc324a67c97@gmail.com>
	<alpine.LFD.2.20.1608032249050.11166@reclus.nhh.no>
Message-ID: <2fcb0cf9-41df-bcf0-7ab9-4d86dd83d44d@gmail.com>


Hi Roger,

Thanks for this. I was looking at this post by Robin 
(https://www.r-bloggers.com/installing-rgdal-in-ubuntu-13-04/) and I 
followed all steps but I still get the same results. Should I remove all 
packages connected with GDAL and then start with installing from 
scratch? How do I find double installations / broken links? I've tested 
gdal utils from command line and everything works fine BTW.

Here is what I get when I check when I look for gdal on my server:

$ sudo apt-cache pkgnames|grep -i gdal
libgdal1i
libgdal-java
libgdal1-1.11.3-grass
libgdal1-dev
libgdal-dev
libgdal-doc
libgdal-perl
gdal-bin
python3-gdal
python-gdal
dans-gdal-scripts

Thank you


On 03/08/16 23:00, Roger Bivand wrote:
> Hi Tom,
>
> As you can see from the configure output, your GDAL install is broken:
>
> ...
> checking gdal.h usability... yes
> checking gdal.h presence... yes
> checking for gdal.h... yes
> checking gdal: linking with --libs only... no
> checking gdal: linking with --libs and --dep-libs... no
> /usr/local/lib/libgdal.so: undefined reference to
> `kmlengine::Href::Parse(std::__cxx11::basic_string<char,
> std:: char_traits<char>, std::allocator<char> > const&)'
> /usr/local/lib/libgdal.so: undefined reference to
> `kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char,
> std:: char_traits<char>, std::allocator<char> >*,
> std: :__cxx11::basic_string<char, std::char_traits<char>,
> std:: allocator<char> >*) const'
> ...
>
> My guess is either multiple installed GDAL versions, or a GDAL built 
> with libkml but without access to the libkml shared object. With 
> correctly installed GDAL, you would see:
>
> checking gdal.h usability... yes
> checking gdal.h presence... yes
> checking for gdal.h... yes
> checking gdal: linking with --libs only... yes
>
> It could also be a C++ version problem between GDAL and its 
> dependencies, but I suspect a broken GDAL.
>
> Hope this helps,
>
> Roger
>
> On Wed, 3 Aug 2016, Tomislav Hengl wrote:
>
>>
>> Hi Roger,
>>
>> I am sorry to bother you with this. I have reinstalled R on my server 
>> (actually MRO) and I have been stuck now trying to install rgdal 
>> (constantly getting "configure: Install failure: compilation and/or 
>> linkage problems. configure: error: GDALAllRegister not found in 
>> libgdal."). I've looked at numerous posts 
>> (http://stackoverflow.com/questions/34442010/r-cannot-install-rgdal-package-on-ubuntu-14-04) 
>> but I do not see where the problem comes from.
>>
>> Thank you!
>>
>> Here is my existing GDAL installation:
>>
>> $ gdal-config --version
>> 2.1.0
>> $ proj
>> Rel. 4.9.2, 08 September 2015
>> usage: proj [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
>>
>> $ ldd /usr/lib64/MRO-3.3.0/R-3.3.0/lib/R/bin/exec/R
>>         linux-vdso.so.1 =>  (0x00007ffd9098e000)
>>         libR.so => not found
>>         libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 
>> (0x00007f8cebcb3000)
>>         libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 
>> (0x00007f8ceb8e9000)
>>         /lib64/ld-linux-x86-64.so.2 (0x000055aff5b57000)
>>
>>
>>>  install.packages("rgdal")
>> Installing package into ?/home/tom/R/x86_64-pc-linux-gnu-library/3.3?
>> (as ?lib? is unspecified)
>> trying URL 
>> 'https://mran.microsoft.com/snapshot/2016-06-01/src/contrib/rgdal_1.1-10.tar.gz' 
>> Content type 'application/octet-stream' length 1653393 bytes (1.6 MB)
>> ==================================================
>> downloaded 1.6 MB
>>
>> * installing *source* package ?rgdal? ...
>> ** package ?rgdal? successfully unpacked and MD5 sums checked
>> configure:  CC: gcc -std=gnu99
>> configure:  CXX: g++
>> configure:  rgdal: 1.1-10
>> checking for /usr/bin/svnversion... yes
>> configure:  svn revision: 622
>> checking for gdal-config... /usr/local/bin/gdal-config
>> checking gdal-config usability... yes
>> configure:  GDAL: 2.1.0
>> checking GDAL version >= 1.6.3... yes
>> configure:  experimental conditional use of GDAL2
>> checking for gcc... gcc -std=gnu99
>> checking whether the C compiler works... yes
>> checking for C compiler default output file name... a.out
>> checking for suffix of executables...
>> checking whether we are cross compiling... no
>> checking for suffix of object files... o
>> checking whether we are using the GNU C compiler... yes
>> checking whether gcc -std=gnu99 accepts -g... yes
>> checking for gcc -std=gnu99 option to accept ISO C89... none needed
>> checking how to run the C preprocessor... gcc -std=gnu99 -E
>> checking for grep that handles long lines and -e... /bin/grep
>> checking for egrep... /bin/grep -E
>> checking for ANSI C header files... yes
>> checking for sys/types.h... yes
>> checking for sys/stat.h... yes
>> checking for stdlib.h... yes
>> checking for string.h... yes
>> checking for memory.h... yes
>> checking for strings.h... yes
>> checking for inttypes.h... yes
>> checking for stdint.h... yes
>> checking for unistd.h... yes
>> checking gdal.h usability... yes
>> checking gdal.h presence... yes
>> checking for gdal.h... yes
>> checking gdal: linking with --libs only... no
>> checking gdal: linking with --libs and --dep-libs... no
>> /usr/local/lib/libgdal.so: undefined reference to 
>> `kmlengine::Href::Parse(std::__cxx11::basic_string<char, std:: 
>> char_traits<char>, std::allocator<char> > const&)'
>> /usr/local/lib/libgdal.so: undefined reference to 
>> `kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char, 
>> std:: char_traits<char>, std::allocator<char> >*, std: 
>> :__cxx11::basic_string<char, std::char_traits<char>, std:: 
>> allocator<char> >*) const'
>> /usr/local/lib/libgdal.so: undefined reference to 
>> `kmlengine::KmzFile::OpenFromString(std::__cxx11::basic_string<char, 
>> std:: char_traits<char>, std::allocator<char> > const&)'
>> /usr/local/lib/libgdal.so: undefined reference to 
>> `kmldom::SerializePretty[abi:cxx11](boost::intrusive_ptr<kmldom::Element> 
>> const&)'
>> /usr/local/lib/libgdal.so: undefined reference to 
>> `kmldom::Parse(std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std:: allocator<char> > const&, 
>> std::__cxx11::basic_string<char, std:: char_traits<char>, 
>> std::allocator<char> >*)'
>> /usr/local/lib/libgdal.so: undefined reference to 
>> `kmlengine::KmzFile::ReadFile(char const*, std: 
>> :__cxx11::basic_string<char, std::char_traits<char>, std:: 
>> allocator<char> >*) const'
>> collect2: error: ld returned 1 exit status
>> /usr/bin/ld: warning: libproj.so.10, needed by 
>> /usr/local/lib/libgdal.so, may conflict with libproj.so.9
>> /usr/local/lib/libgdal.so: undefined reference to 
>> `kmlengine::Href::Parse(std::__cxx11::basic_string<char, std:: 
>> char_traits<char>, std::allocator<char> > const&)'
>> /usr/local/lib/libgdal.so: undefined reference to 
>> `kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char, 
>> std:: char_traits<char>, std::allocator<char> >*, std: 
>> :__cxx11::basic_string<char, std::char_traits<char>, std:: 
>> allocator<char> >*) const'
>> /usr/local/lib/libgdal.so: undefined reference to 
>> `kmlengine::KmzFile::OpenFromString(std::__cxx11::basic_string<char, 
>> std:: char_traits<char>, std::allocator<char> > const&)'
>> /usr/local/lib/libgdal.so: undefined reference to 
>> `kmldom::SerializePretty[abi:cxx11](boost::intrusive_ptr<kmldom::Element> 
>> const&)'
>> /usr/local/lib/libgdal.so: undefined reference to 
>> `kmldom::Parse(std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std:: allocator<char> > const&, 
>> std::__cxx11::basic_string<char, std:: char_traits<char>, 
>> std::allocator<char> >*)'
>> /usr/local/lib/libgdal.so: undefined reference to 
>> `kmlengine::KmzFile::ReadFile(char const*, std: 
>> :__cxx11::basic_string<char, std::char_traits<char>, std:: 
>> allocator<char> >*) const'
>> collect2: error: ld returned 1 exit status
>> configure:  Install failure: compilation and/or linkage problems.
>> configure:  error: GDALAllRegister not found in libgdal.
>> ERROR:  configuration failed for package ?rgdal?
>> * removing ?/home/tom/R/x86_64-pc-linux-gnu-library/3.3/rgdal?
>>
>>
>>
>


From rodrigo.plei at gmail.com  Thu Aug  4 18:01:18 2016
From: rodrigo.plei at gmail.com (Rodrigo Plei)
Date: Thu, 4 Aug 2016 13:01:18 -0300
Subject: [R-sig-Geo] plotting bathymetric data?
Message-ID: <CACs_BFMcZOp9Y9crSAoE5udGHb=Phq227jehcH5h6QWEsOgT4Q@mail.gmail.com>

Dear people,

I have a shapefile with the contour of the coast line and bathymetric data
from 100 to 500 m.

I would like to use maptools package to plot the coastline as continuous
contour and the bathymetries as dashed lines.

I tried to subset only the bathymetries from the original shapefile and
convert them in new shapefile using the function "writeSpatialShape"
without success.

Does anyone known how I can do that?

Any help will be deeply appreciated.

Cheers,

Rodrigo

-- 
=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->

Prof. Dr. Rodrigo Silvestre Martins

Universidade Federal de S?o Paulo
Instituto do Mar
Campus Baixada Santista
Rua Dr. Carvalho de Mendon?a, 144
Encruzilhada, 11070100, Santos, SP - Brasil
Tel: + 55  13 3229-0365

http://www.unifesp.br/campus/san7/
<http://www.unifesp.br/campus/san7/graduacao/cursos/bacharelado-interdisciplinar-em-ciencia-e-tecnologia-do-mar>

Email: rodrigo.plei at gmail.com ; ocersm at lycos.com; rsmartins at usp.br;
rsmartins at unifesp.br
CV Lattes: http://lattes.cnpq.br/5350064124902777
Google Scholar:
http://scholar.google.com.br/citations?user=zX_EezEAAAAJ&hl=pt-BR
Orcid: http://orcid.org/0000-0002-9884-1515
Research Gate: https://www.researchgate.net/profile/Rodrigo_Martins6/
<https://www.researchgate.net/profile/Rodrigo_Martins6/?ev=hdr_xprf>

	[[alternative HTML version deleted]]


From thi_veloso at yahoo.com.br  Thu Aug  4 19:07:00 2016
From: thi_veloso at yahoo.com.br (Thiago V. dos Santos)
Date: Thu, 4 Aug 2016 17:07:00 +0000 (UTC)
Subject: [R-sig-Geo] Incorrect month order in zApply function
In-Reply-To: <877fbxgd51.fsf@upm.es>
References: <920141574.6225732.1469760750592.JavaMail.yahoo.ref@mail.yahoo.com>
	<920141574.6225732.1469760750592.JavaMail.yahoo@mail.yahoo.com>
	<9d686d72-6834-8a66-7422-c8700b2f7ee0@rsmas.miami.edu>
	<1683319255.6505118.1469820024122.JavaMail.yahoo@mail.yahoo.com>
	<877fbxgd51.fsf@upm.es>
Message-ID: <768465559.9334447.1470330420974.JavaMail.yahoo@mail.yahoo.com>

Thanks for the information, Oscar. Perhaps it would be a good idea to include it in the zApply description within the raster manual??
Best,?Thiago.?

Sent from Yahoo Mail on Android 
 
  On Thu, Aug 4, 2016 at 3:19 AM, Oscar Perpi??n Lamigueiro<oscar.perpinan at upm.es> wrote:   Hello,

With the current code of zApply, you should use a function that returns an ordered vector. For example:

Month <- function(x)
{
? ? idx <- as.numeric(format(x, '%m'))
? ? factor(month.name[idx],
? ? ? ? ? levels = month.name,
? ? ? ? ? ordered = TRUE)
}


x2 <- zApply(s, by = Month, mean)

Best,

Oscar.
-- 
Oscar Perpi??n Lamigueiro
Dpto. Ing. El?ctrica, Electr?nica, Autom?tica y F?sica Aplicada
Escuela T?cnica Superior de Ingenier?a y Dise?o Industrial
URL: http://oscarperpinan.github.io  

	[[alternative HTML version deleted]]


From edzer.pebesma at uni-muenster.de  Thu Aug  4 19:13:36 2016
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 4 Aug 2016 18:13:36 +0100
Subject: [R-sig-Geo] Problems with installing rgdal on Ubuntu "checking
 gdal: linking with --libs only... no"
In-Reply-To: <2fcb0cf9-41df-bcf0-7ab9-4d86dd83d44d@gmail.com>
References: <12b6bd49-5332-e272-00ef-fdc324a67c97@gmail.com>
	<alpine.LFD.2.20.1608032249050.11166@reclus.nhh.no>
	<2fcb0cf9-41df-bcf0-7ab9-4d86dd83d44d@gmail.com>
Message-ID: <cedd0583-5fd4-1a1e-f64b-40e14b5db3d1@uni-muenster.de>

What is your output of gdal-config --libs ? On 14.04 I see:

$ gdal-config --libs
-L/usr/local/lib -lgdal
$ which gdal-config
/usr/local/bin/gdal-config
$ gdal-config --version
2.1.0

which indicates a manual install (from source). Your error message below
indicates a version in /usr/local/ that is broken. Manually installed
libs in /usr/local override the ones installed by apt* (which are in
/usr/lib etc -- Robin's post assumes no installs in /usr/local), so now
you must either:

1. fix the installed version in /usr/local , or
2. remove the ones installed in /usr/local so that the ones in /usr/lib
are found.

On 04/08/16 16:42, Tomislav Hengl wrote:
> 
> Hi Roger,
> 
> Thanks for this. I was looking at this post by Robin
> (https://www.r-bloggers.com/installing-rgdal-in-ubuntu-13-04/) and I
> followed all steps but I still get the same results. Should I remove all
> packages connected with GDAL and then start with installing from
> scratch? How do I find double installations / broken links? I've tested
> gdal utils from command line and everything works fine BTW.
> 
> Here is what I get when I check when I look for gdal on my server:
> 
> $ sudo apt-cache pkgnames|grep -i gdal
> libgdal1i
> libgdal-java
> libgdal1-1.11.3-grass
> libgdal1-dev
> libgdal-dev
> libgdal-doc
> libgdal-perl
> gdal-bin
> python3-gdal
> python-gdal
> dans-gdal-scripts
> 
> Thank you
> 
> 
> On 03/08/16 23:00, Roger Bivand wrote:
>> Hi Tom,
>>
>> As you can see from the configure output, your GDAL install is broken:
>>
>> ...
>> checking gdal.h usability... yes
>> checking gdal.h presence... yes
>> checking for gdal.h... yes
>> checking gdal: linking with --libs only... no
>> checking gdal: linking with --libs and --dep-libs... no
>> /usr/local/lib/libgdal.so: undefined reference to
>> `kmlengine::Href::Parse(std::__cxx11::basic_string<char,
>> std:: char_traits<char>, std::allocator<char> > const&)'
>> /usr/local/lib/libgdal.so: undefined reference to
>> `kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char,
>> std:: char_traits<char>, std::allocator<char> >*,
>> std: :__cxx11::basic_string<char, std::char_traits<char>,
>> std:: allocator<char> >*) const'
>> ...
>>
>> My guess is either multiple installed GDAL versions, or a GDAL built
>> with libkml but without access to the libkml shared object. With
>> correctly installed GDAL, you would see:
>>
>> checking gdal.h usability... yes
>> checking gdal.h presence... yes
>> checking for gdal.h... yes
>> checking gdal: linking with --libs only... yes
>>
>> It could also be a C++ version problem between GDAL and its
>> dependencies, but I suspect a broken GDAL.
>>
>> Hope this helps,
>>
>> Roger
>>
>> On Wed, 3 Aug 2016, Tomislav Hengl wrote:
>>
>>>
>>> Hi Roger,
>>>
>>> I am sorry to bother you with this. I have reinstalled R on my server
>>> (actually MRO) and I have been stuck now trying to install rgdal
>>> (constantly getting "configure: Install failure: compilation and/or
>>> linkage problems. configure: error: GDALAllRegister not found in
>>> libgdal."). I've looked at numerous posts
>>> (http://stackoverflow.com/questions/34442010/r-cannot-install-rgdal-package-on-ubuntu-14-04)
>>> but I do not see where the problem comes from.
>>>
>>> Thank you!
>>>
>>> Here is my existing GDAL installation:
>>>
>>> $ gdal-config --version
>>> 2.1.0
>>> $ proj
>>> Rel. 4.9.2, 08 September 2015
>>> usage: proj [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
>>>
>>> $ ldd /usr/lib64/MRO-3.3.0/R-3.3.0/lib/R/bin/exec/R
>>>         linux-vdso.so.1 =>  (0x00007ffd9098e000)
>>>         libR.so => not found
>>>         libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0
>>> (0x00007f8cebcb3000)
>>>         libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6
>>> (0x00007f8ceb8e9000)
>>>         /lib64/ld-linux-x86-64.so.2 (0x000055aff5b57000)
>>>
>>>
>>>>  install.packages("rgdal")
>>> Installing package into ?/home/tom/R/x86_64-pc-linux-gnu-library/3.3?
>>> (as ?lib? is unspecified)
>>> trying URL
>>> 'https://mran.microsoft.com/snapshot/2016-06-01/src/contrib/rgdal_1.1-10.tar.gz'
>>> Content type 'application/octet-stream' length 1653393 bytes (1.6 MB)
>>> ==================================================
>>> downloaded 1.6 MB
>>>
>>> * installing *source* package ?rgdal? ...
>>> ** package ?rgdal? successfully unpacked and MD5 sums checked
>>> configure:  CC: gcc -std=gnu99
>>> configure:  CXX: g++
>>> configure:  rgdal: 1.1-10
>>> checking for /usr/bin/svnversion... yes
>>> configure:  svn revision: 622
>>> checking for gdal-config... /usr/local/bin/gdal-config
>>> checking gdal-config usability... yes
>>> configure:  GDAL: 2.1.0
>>> checking GDAL version >= 1.6.3... yes
>>> configure:  experimental conditional use of GDAL2
>>> checking for gcc... gcc -std=gnu99
>>> checking whether the C compiler works... yes
>>> checking for C compiler default output file name... a.out
>>> checking for suffix of executables...
>>> checking whether we are cross compiling... no
>>> checking for suffix of object files... o
>>> checking whether we are using the GNU C compiler... yes
>>> checking whether gcc -std=gnu99 accepts -g... yes
>>> checking for gcc -std=gnu99 option to accept ISO C89... none needed
>>> checking how to run the C preprocessor... gcc -std=gnu99 -E
>>> checking for grep that handles long lines and -e... /bin/grep
>>> checking for egrep... /bin/grep -E
>>> checking for ANSI C header files... yes
>>> checking for sys/types.h... yes
>>> checking for sys/stat.h... yes
>>> checking for stdlib.h... yes
>>> checking for string.h... yes
>>> checking for memory.h... yes
>>> checking for strings.h... yes
>>> checking for inttypes.h... yes
>>> checking for stdint.h... yes
>>> checking for unistd.h... yes
>>> checking gdal.h usability... yes
>>> checking gdal.h presence... yes
>>> checking for gdal.h... yes
>>> checking gdal: linking with --libs only... no
>>> checking gdal: linking with --libs and --dep-libs... no
>>> /usr/local/lib/libgdal.so: undefined reference to
>>> `kmlengine::Href::Parse(std::__cxx11::basic_string<char, std::
>>> char_traits<char>, std::allocator<char> > const&)'
>>> /usr/local/lib/libgdal.so: undefined reference to
>>> `kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char,
>>> std:: char_traits<char>, std::allocator<char> >*, std:
>>> :__cxx11::basic_string<char, std::char_traits<char>, std::
>>> allocator<char> >*) const'
>>> /usr/local/lib/libgdal.so: undefined reference to
>>> `kmlengine::KmzFile::OpenFromString(std::__cxx11::basic_string<char,
>>> std:: char_traits<char>, std::allocator<char> > const&)'
>>> /usr/local/lib/libgdal.so: undefined reference to
>>> `kmldom::SerializePretty[abi:cxx11](boost::intrusive_ptr<kmldom::Element>
>>> const&)'
>>> /usr/local/lib/libgdal.so: undefined reference to
>>> `kmldom::Parse(std::__cxx11::basic_string<char,
>>> std::char_traits<char>, std:: allocator<char> > const&,
>>> std::__cxx11::basic_string<char, std:: char_traits<char>,
>>> std::allocator<char> >*)'
>>> /usr/local/lib/libgdal.so: undefined reference to
>>> `kmlengine::KmzFile::ReadFile(char const*, std:
>>> :__cxx11::basic_string<char, std::char_traits<char>, std::
>>> allocator<char> >*) const'
>>> collect2: error: ld returned 1 exit status
>>> /usr/bin/ld: warning: libproj.so.10, needed by
>>> /usr/local/lib/libgdal.so, may conflict with libproj.so.9
>>> /usr/local/lib/libgdal.so: undefined reference to
>>> `kmlengine::Href::Parse(std::__cxx11::basic_string<char, std::
>>> char_traits<char>, std::allocator<char> > const&)'
>>> /usr/local/lib/libgdal.so: undefined reference to
>>> `kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char,
>>> std:: char_traits<char>, std::allocator<char> >*, std:
>>> :__cxx11::basic_string<char, std::char_traits<char>, std::
>>> allocator<char> >*) const'
>>> /usr/local/lib/libgdal.so: undefined reference to
>>> `kmlengine::KmzFile::OpenFromString(std::__cxx11::basic_string<char,
>>> std:: char_traits<char>, std::allocator<char> > const&)'
>>> /usr/local/lib/libgdal.so: undefined reference to
>>> `kmldom::SerializePretty[abi:cxx11](boost::intrusive_ptr<kmldom::Element>
>>> const&)'
>>> /usr/local/lib/libgdal.so: undefined reference to
>>> `kmldom::Parse(std::__cxx11::basic_string<char,
>>> std::char_traits<char>, std:: allocator<char> > const&,
>>> std::__cxx11::basic_string<char, std:: char_traits<char>,
>>> std::allocator<char> >*)'
>>> /usr/local/lib/libgdal.so: undefined reference to
>>> `kmlengine::KmzFile::ReadFile(char const*, std:
>>> :__cxx11::basic_string<char, std::char_traits<char>, std::
>>> allocator<char> >*) const'
>>> collect2: error: ld returned 1 exit status
>>> configure:  Install failure: compilation and/or linkage problems.
>>> configure:  error: GDALAllRegister not found in libgdal.
>>> ERROR:  configuration failed for package ?rgdal?
>>> * removing ?/home/tom/R/x86_64-pc-linux-gnu-library/3.3/rgdal?
>>>
>>>
>>>
>>
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/
Spatial Statistics Society http://www.spatialstatistics.info

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 490 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20160804/a69e02ed/attachment.bin>

From tom.hengl at gmail.com  Thu Aug  4 21:49:16 2016
From: tom.hengl at gmail.com (Tomislav Hengl)
Date: Thu, 4 Aug 2016 21:49:16 +0200
Subject: [R-sig-Geo] Problems with installing rgdal on Ubuntu "checking
 gdal: linking with --libs only... no"
In-Reply-To: <cedd0583-5fd4-1a1e-f64b-40e14b5db3d1@uni-muenster.de>
References: <12b6bd49-5332-e272-00ef-fdc324a67c97@gmail.com>
	<alpine.LFD.2.20.1608032249050.11166@reclus.nhh.no>
	<2fcb0cf9-41df-bcf0-7ab9-4d86dd83d44d@gmail.com>
	<cedd0583-5fd4-1a1e-f64b-40e14b5db3d1@uni-muenster.de>
Message-ID: <35c8cab3-bf22-3276-fb88-495f013d1ed0@gmail.com>

You were right - I had two gdals, a manual installation and an 
installation from apt* and this confused my system.

So this is what I did:

1. Removed packages 'gdal-bin', 'libgdal-dev' etc using:

sudo apt-get purge --auto-remove gdal-bin
sudo apt-get purge --auto-remove libgdal
sudo apt-get purge --auto-remove libkml-dev

2. Manually removed files from '/usr/local' e.g.:

sudo find /usr/local/bin/ -name 'gdal*' -delete
sudo find /usr/local/lib/ -name 'libgdal*' -delete

After that rgdal installs without a problem.

I am surprised that I had to manually delete files from the disk (I 
guess manual install means manual deletion?), but yes this does solve 
the problem.

Many thanks Edzer and Roger!



On 04/08/16 19:13, Edzer Pebesma wrote:
> What is your output of gdal-config --libs ? On 14.04 I see:
>
> $ gdal-config --libs
> -L/usr/local/lib -lgdal
> $ which gdal-config
> /usr/local/bin/gdal-config
> $ gdal-config --version
> 2.1.0
>
> which indicates a manual install (from source). Your error message below
> indicates a version in /usr/local/ that is broken. Manually installed
> libs in /usr/local override the ones installed by apt* (which are in
> /usr/lib etc -- Robin's post assumes no installs in /usr/local), so now
> you must either:
>
> 1. fix the installed version in /usr/local , or
> 2. remove the ones installed in /usr/local so that the ones in /usr/lib
> are found.
>
> On 04/08/16 16:42, Tomislav Hengl wrote:
>> Hi Roger,
>>
>> Thanks for this. I was looking at this post by Robin
>> (https://www.r-bloggers.com/installing-rgdal-in-ubuntu-13-04/) and I
>> followed all steps but I still get the same results. Should I remove all
>> packages connected with GDAL and then start with installing from
>> scratch? How do I find double installations / broken links? I've tested
>> gdal utils from command line and everything works fine BTW.
>>
>> Here is what I get when I check when I look for gdal on my server:
>>
>> $ sudo apt-cache pkgnames|grep -i gdal
>> libgdal1i
>> libgdal-java
>> libgdal1-1.11.3-grass
>> libgdal1-dev
>> libgdal-dev
>> libgdal-doc
>> libgdal-perl
>> gdal-bin
>> python3-gdal
>> python-gdal
>> dans-gdal-scripts
>>
>> Thank you
>>
>>
>> On 03/08/16 23:00, Roger Bivand wrote:
>>> Hi Tom,
>>>
>>> As you can see from the configure output, your GDAL install is broken:
>>>
>>> ...
>>> checking gdal.h usability... yes
>>> checking gdal.h presence... yes
>>> checking for gdal.h... yes
>>> checking gdal: linking with --libs only... no
>>> checking gdal: linking with --libs and --dep-libs... no
>>> /usr/local/lib/libgdal.so: undefined reference to
>>> `kmlengine::Href::Parse(std::__cxx11::basic_string<char,
>>> std:: char_traits<char>, std::allocator<char> > const&)'
>>> /usr/local/lib/libgdal.so: undefined reference to
>>> `kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char,
>>> std:: char_traits<char>, std::allocator<char> >*,
>>> std: :__cxx11::basic_string<char, std::char_traits<char>,
>>> std:: allocator<char> >*) const'
>>> ...
>>>
>>> My guess is either multiple installed GDAL versions, or a GDAL built
>>> with libkml but without access to the libkml shared object. With
>>> correctly installed GDAL, you would see:
>>>
>>> checking gdal.h usability... yes
>>> checking gdal.h presence... yes
>>> checking for gdal.h... yes
>>> checking gdal: linking with --libs only... yes
>>>
>>> It could also be a C++ version problem between GDAL and its
>>> dependencies, but I suspect a broken GDAL.
>>>
>>> Hope this helps,
>>>
>>> Roger
>>>
>>> On Wed, 3 Aug 2016, Tomislav Hengl wrote:
>>>
>>>> Hi Roger,
>>>>
>>>> I am sorry to bother you with this. I have reinstalled R on my server
>>>> (actually MRO) and I have been stuck now trying to install rgdal
>>>> (constantly getting "configure: Install failure: compilation and/or
>>>> linkage problems. configure: error: GDALAllRegister not found in
>>>> libgdal."). I've looked at numerous posts
>>>> (http://stackoverflow.com/questions/34442010/r-cannot-install-rgdal-package-on-ubuntu-14-04)
>>>> but I do not see where the problem comes from.
>>>>
>>>> Thank you!
>>>>
>>>> Here is my existing GDAL installation:
>>>>
>>>> $ gdal-config --version
>>>> 2.1.0
>>>> $ proj
>>>> Rel. 4.9.2, 08 September 2015
>>>> usage: proj [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
>>>>
>>>> $ ldd /usr/lib64/MRO-3.3.0/R-3.3.0/lib/R/bin/exec/R
>>>>          linux-vdso.so.1 =>  (0x00007ffd9098e000)
>>>>          libR.so => not found
>>>>          libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0
>>>> (0x00007f8cebcb3000)
>>>>          libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6
>>>> (0x00007f8ceb8e9000)
>>>>          /lib64/ld-linux-x86-64.so.2 (0x000055aff5b57000)
>>>>
>>>>
>>>>>   install.packages("rgdal")
>>>> Installing package into ?/home/tom/R/x86_64-pc-linux-gnu-library/3.3?
>>>> (as ?lib? is unspecified)
>>>> trying URL
>>>> 'https://mran.microsoft.com/snapshot/2016-06-01/src/contrib/rgdal_1.1-10.tar.gz'
>>>> Content type 'application/octet-stream' length 1653393 bytes (1.6 MB)
>>>> ==================================================
>>>> downloaded 1.6 MB
>>>>
>>>> * installing *source* package ?rgdal? ...
>>>> ** package ?rgdal? successfully unpacked and MD5 sums checked
>>>> configure:  CC: gcc -std=gnu99
>>>> configure:  CXX: g++
>>>> configure:  rgdal: 1.1-10
>>>> checking for /usr/bin/svnversion... yes
>>>> configure:  svn revision: 622
>>>> checking for gdal-config... /usr/local/bin/gdal-config
>>>> checking gdal-config usability... yes
>>>> configure:  GDAL: 2.1.0
>>>> checking GDAL version >= 1.6.3... yes
>>>> configure:  experimental conditional use of GDAL2
>>>> checking for gcc... gcc -std=gnu99
>>>> checking whether the C compiler works... yes
>>>> checking for C compiler default output file name... a.out
>>>> checking for suffix of executables...
>>>> checking whether we are cross compiling... no
>>>> checking for suffix of object files... o
>>>> checking whether we are using the GNU C compiler... yes
>>>> checking whether gcc -std=gnu99 accepts -g... yes
>>>> checking for gcc -std=gnu99 option to accept ISO C89... none needed
>>>> checking how to run the C preprocessor... gcc -std=gnu99 -E
>>>> checking for grep that handles long lines and -e... /bin/grep
>>>> checking for egrep... /bin/grep -E
>>>> checking for ANSI C header files... yes
>>>> checking for sys/types.h... yes
>>>> checking for sys/stat.h... yes
>>>> checking for stdlib.h... yes
>>>> checking for string.h... yes
>>>> checking for memory.h... yes
>>>> checking for strings.h... yes
>>>> checking for inttypes.h... yes
>>>> checking for stdint.h... yes
>>>> checking for unistd.h... yes
>>>> checking gdal.h usability... yes
>>>> checking gdal.h presence... yes
>>>> checking for gdal.h... yes
>>>> checking gdal: linking with --libs only... no
>>>> checking gdal: linking with --libs and --dep-libs... no
>>>> /usr/local/lib/libgdal.so: undefined reference to
>>>> `kmlengine::Href::Parse(std::__cxx11::basic_string<char, std::
>>>> char_traits<char>, std::allocator<char> > const&)'
>>>> /usr/local/lib/libgdal.so: undefined reference to
>>>> `kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char,
>>>> std:: char_traits<char>, std::allocator<char> >*, std:
>>>> :__cxx11::basic_string<char, std::char_traits<char>, std::
>>>> allocator<char> >*) const'
>>>> /usr/local/lib/libgdal.so: undefined reference to
>>>> `kmlengine::KmzFile::OpenFromString(std::__cxx11::basic_string<char,
>>>> std:: char_traits<char>, std::allocator<char> > const&)'
>>>> /usr/local/lib/libgdal.so: undefined reference to
>>>> `kmldom::SerializePretty[abi:cxx11](boost::intrusive_ptr<kmldom::Element>
>>>> const&)'
>>>> /usr/local/lib/libgdal.so: undefined reference to
>>>> `kmldom::Parse(std::__cxx11::basic_string<char,
>>>> std::char_traits<char>, std:: allocator<char> > const&,
>>>> std::__cxx11::basic_string<char, std:: char_traits<char>,
>>>> std::allocator<char> >*)'
>>>> /usr/local/lib/libgdal.so: undefined reference to
>>>> `kmlengine::KmzFile::ReadFile(char const*, std:
>>>> :__cxx11::basic_string<char, std::char_traits<char>, std::
>>>> allocator<char> >*) const'
>>>> collect2: error: ld returned 1 exit status
>>>> /usr/bin/ld: warning: libproj.so.10, needed by
>>>> /usr/local/lib/libgdal.so, may conflict with libproj.so.9
>>>> /usr/local/lib/libgdal.so: undefined reference to
>>>> `kmlengine::Href::Parse(std::__cxx11::basic_string<char, std::
>>>> char_traits<char>, std::allocator<char> > const&)'
>>>> /usr/local/lib/libgdal.so: undefined reference to
>>>> `kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char,
>>>> std:: char_traits<char>, std::allocator<char> >*, std:
>>>> :__cxx11::basic_string<char, std::char_traits<char>, std::
>>>> allocator<char> >*) const'
>>>> /usr/local/lib/libgdal.so: undefined reference to
>>>> `kmlengine::KmzFile::OpenFromString(std::__cxx11::basic_string<char,
>>>> std:: char_traits<char>, std::allocator<char> > const&)'
>>>> /usr/local/lib/libgdal.so: undefined reference to
>>>> `kmldom::SerializePretty[abi:cxx11](boost::intrusive_ptr<kmldom::Element>
>>>> const&)'
>>>> /usr/local/lib/libgdal.so: undefined reference to
>>>> `kmldom::Parse(std::__cxx11::basic_string<char,
>>>> std::char_traits<char>, std:: allocator<char> > const&,
>>>> std::__cxx11::basic_string<char, std:: char_traits<char>,
>>>> std::allocator<char> >*)'
>>>> /usr/local/lib/libgdal.so: undefined reference to
>>>> `kmlengine::KmzFile::ReadFile(char const*, std:
>>>> :__cxx11::basic_string<char, std::char_traits<char>, std::
>>>> allocator<char> >*) const'
>>>> collect2: error: ld returned 1 exit status
>>>> configure:  Install failure: compilation and/or linkage problems.
>>>> configure:  error: GDALAllRegister not found in libgdal.
>>>> ERROR:  configuration failed for package ?rgdal?
>>>> * removing ?/home/tom/R/x86_64-pc-linux-gnu-library/3.3/rgdal?
>>>>
>>>>
>>>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From edzer.pebesma at uni-muenster.de  Thu Aug  4 22:02:34 2016
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 4 Aug 2016 21:02:34 +0100
Subject: [R-sig-Geo] Problems with installing rgdal on Ubuntu "checking
 gdal: linking with --libs only... no"
In-Reply-To: <35c8cab3-bf22-3276-fb88-495f013d1ed0@gmail.com>
References: <12b6bd49-5332-e272-00ef-fdc324a67c97@gmail.com>
	<alpine.LFD.2.20.1608032249050.11166@reclus.nhh.no>
	<2fcb0cf9-41df-bcf0-7ab9-4d86dd83d44d@gmail.com>
	<cedd0583-5fd4-1a1e-f64b-40e14b5db3d1@uni-muenster.de>
	<35c8cab3-bf22-3276-fb88-495f013d1ed0@gmail.com>
Message-ID: <20aa9c23-1994-ae2d-276f-c20dfc7eb516@uni-muenster.de>



On 04/08/16 20:49, Tomislav Hengl wrote:
> I am surprised that I had to manually delete files from the disk (I 
> guess manual install means manual deletion?), but yes this does solve 
> the problem.

You didn't have to: from the gdal source directory where you installed
manually by

./configure
make
sudo make install

you can also do a

sudo make clean

which should remove everything (including e.g. the header files now
still in /usr/local/include)
-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/
Spatial Statistics Society http://www.spatialstatistics.info

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 490 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20160804/df871658/attachment.bin>

From SWalbridge at esri.com  Thu Aug  4 22:14:18 2016
From: SWalbridge at esri.com (Shaun Walbridge)
Date: Thu, 4 Aug 2016 20:14:18 +0000
Subject: [R-sig-Geo] Problems with installing rgdal on Ubuntu "checking
 gdal: linking with --libs only... no"
In-Reply-To: <20aa9c23-1994-ae2d-276f-c20dfc7eb516@uni-muenster.de>
References: <12b6bd49-5332-e272-00ef-fdc324a67c97@gmail.com>
	<alpine.LFD.2.20.1608032249050.11166@reclus.nhh.no>
	<2fcb0cf9-41df-bcf0-7ab9-4d86dd83d44d@gmail.com>
	<cedd0583-5fd4-1a1e-f64b-40e14b5db3d1@uni-muenster.de>
	<35c8cab3-bf22-3276-fb88-495f013d1ed0@gmail.com>
	<20aa9c23-1994-ae2d-276f-c20dfc7eb516@uni-muenster.de>
Message-ID: <8f7279b063f94f859001c32ef5d66a99@RED-INF-MXMB-P3.esri.com>

I've had good luck using checkinstall [1] to manage custom compiled packages as well, if you do want to have custom compiled packages which are registered with the system package management system. I've found this to be invaluable when working with dependency heavy packages like GDAL. 

1. https://urldefense.proofpoint.com/v2/url?u=https-3A__wiki.debian.org_CheckInstall&d=CwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=fCPRb7QX-vd5bnO9gIJHCiX852SVUtyYX--xtCKtpfk&m=kBjV7CmsaZkV_yYVagS4Dh9xfKYByScSx0FKqzophaU&s=XYGc6Fga7Uuvnnd12W13ICsU77PsATlWdZiduFg0F38&e= 

-----Original Message-----
From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Edzer Pebesma
Sent: Thursday, August 04, 2016 4:03 PM
To: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] Problems with installing rgdal on Ubuntu "checking gdal: linking with --libs only... no"



On 04/08/16 20:49, Tomislav Hengl wrote:
> I am surprised that I had to manually delete files from the disk (I 
> guess manual install means manual deletion?), but yes this does solve 
> the problem.

You didn't have to: from the gdal source directory where you installed manually by

./configure
make
sudo make install

you can also do a

sudo make clean

which should remove everything (including e.g. the header files now still in /usr/local/include)
--
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   https://urldefense.proofpoint.com/v2/url?u=http-3A__www.jstatsoft.org_&d=CwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=fCPRb7QX-vd5bnO9gIJHCiX852SVUtyYX--xtCKtpfk&m=kBjV7CmsaZkV_yYVagS4Dh9xfKYByScSx0FKqzophaU&s=Tn8rAf4VePukV8IRevsto81lt1_ioQ7VnrWEkPQgpEc&e= 
Computers & Geosciences:   https://urldefense.proofpoint.com/v2/url?u=http-3A__elsevier.com_locate_cageo_&d=CwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=fCPRb7QX-vd5bnO9gIJHCiX852SVUtyYX--xtCKtpfk&m=kBjV7CmsaZkV_yYVagS4Dh9xfKYByScSx0FKqzophaU&s=Nvr9ibFCzDW0D4YfZslXSJMizH7qlXJJ1or2vQ2SUfo&e= 
Spatial Statistics Society https://urldefense.proofpoint.com/v2/url?u=http-3A__www.spatialstatistics.info&d=CwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=fCPRb7QX-vd5bnO9gIJHCiX852SVUtyYX--xtCKtpfk&m=kBjV7CmsaZkV_yYVagS4Dh9xfKYByScSx0FKqzophaU&s=YJtd04wGq0BOfmJVMv95EK1HXYuq9HXnVs0Z9mrE704&e= 



From naimi.b at gmail.com  Fri Aug  5 06:38:45 2016
From: naimi.b at gmail.com (Babak Naimi)
Date: Fri, 05 Aug 2016 04:38:45 +0000
Subject: [R-sig-Geo] I need a raster with negative spatial autocorrelation
Message-ID: <CAGL-CGBgFG=AkyqfB10_TBON9Y7FsdaDJuJNhfcj=rRApBYf8A@mail.gmail.com>

Dear list,

I need a dataset (preferably a raster) that has a negative spatial
autocorrelation. I just used an arbitrary procedure to simulate a simple
one, but I think it is not realistic at all. The procedure I used:
I generated two separate rasters using unconditional simulation given two
different variogram models with different mean, and variance. I then
combined the values from different parts of these two rasters into a single
new raster in a way that each cell is surrounded by dissimilar values. I am
wondering if anyone is aware of a more formal procedure or simply can
introduce a dataset.

Following is the code I used. Thanks for your help.
Best regards,
Babak
(web: r-gis.net)

# a function to generate an unconditional simulation as a raster using grf
function in package geoR:

library(geoR)
genrf <-
function(side,model='exponential',sill=10,phi,nugget=0,mean=50,nsim=1,method='cholesky')
{

sim0<-grf(side*side,grid='reg',xlims=c(0.5,side-0.5),ylims=c(0.5,side-0.5),cov.pars=c(sill,phi),cov.model=model,mean=mean,nugget=nugget,nsim=nsim,method=method)
  if (nsim == 1) {
    r<-as.data.frame(cbind(sim0$coords,sim0$data))
    coordinates(r)<-~x+y
    gridded(r) <- TRUE
    r <- as(r, "SpatialGridDataFrame")
    names(r at data)<-c('sim1')
    r <- raster(r)
  } else {
    r <- as.data.frame(cbind(sim0$coords,sim0$data[,1]))
    coordinates(r)<-~x+y
    gridded(r) <- TRUE
    r <- as(r, "SpatialGridDataFrame")
    names(r at data)<-c('sim1')
    r <- stack(raster(r))
    for (i in 2:nsim) {
      rr <- as.data.frame(cbind(sim0$coords,sim0$data[,i]))
      coordinates(rr)<-~x+y
      gridded(rr) <- TRUE
      rr <- as(rr, "SpatialGridDataFrame")
      names(rr at data)<-c(paste('sim',i,sep=''))
      rr <- raster(rr)
      r <- addLayer(r,rr)
    }

  }
  r
}
#------------
###########
# --- the procedure to generate the surface with negative spatial
autocorrelation:

f1 <- genrf(20,phi=20, model='exponential',nugget=0,nsim=1,sill=20,mean =
100)
f2 <- genrf(20,phi=20, model='spherical',nugget=0,nsim=1,sill=30,mean = 200)
f <- raster(f1) # an empty raster to have the output
# loops to take values from different parts of the two simulated rasters
put together just to make sure each cell is serronded by dissimilar values
for (i in seq(19,1,-2)) f[i,] <- f1[,i]
for (i in seq(2,20,2)) f[i-1,] <- f2[i,]
for (i in seq(19,1,-2)) f[,i] <- f2[i+1,]
for (i in seq(2,20,2)) f[,i-1] <- f1[,i]

plot(f)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20160805/b779bc98/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pasted1
Type: image/png
Size: 6914 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20160805/b779bc98/attachment.png>

From pep.bioalerts at gmail.com  Fri Aug  5 19:21:23 2016
From: pep.bioalerts at gmail.com (Pep SD)
Date: Fri, 5 Aug 2016 13:21:23 -0400
Subject: [R-sig-Geo] difficulties on applying a function trough calc on a
	rasterstack
Message-ID: <CAF8H1deXcGEKV4+gVMMCSXgGEyJn34sw05mhZdiom6g9HbzPJA@mail.gmail.com>

Hello everyone,

I feel this may be R-raster 101 but I can't really find the solution to
this.

I want to apply a function over a rasterstack, so that it outputs a raster
layer in which the function has been applied to each cell of the
rasterstack.


#function to pass

mfri.test <- function (a){
  a2 <- a[a>0]
  a2 <- unique (a2)
  a2 <- a2[order(a2)]
  if (length (a2)==0){b<-0}else{
    if (length (a2)==1){b<-c(a2)}
    if (length (a2)>1) {

      b <- lapply (1:(length(a2)-1), function (m){
        a2[m+1]-a2[m]
      })
      b<- unlist (b)

    }
    if (a2[length(a2)]!=85){m <- c(85-a2[length(a2)]); b <- c(b,m) }}
  return (mean(b))
}


#now let's try it on a vector -- ideally mm represents a single cell values
on a rasterStack

mm <-c(0,3,4,65,89)
mfri.test(a=mm)
[1] 20.5


#now let's try it with a small raster

r <- raster (matrix(ncol=1,data = 1,nrow = 1))
r2 <- raster (matrix(ncol=1,data = 21,nrow = 1))
r3 <- raster (matrix(ncol=1,data = 72,nrow = 1))
rst <- stack(r,r2,r3)
calc (rst,function (x) { mfri.test(x)},na.rm=T )

Error in .calcTest(x[1:5], fun, na.rm, forcefun, forceapply) :
  cannot use this function. Perhaps add '...' or 'na.rm' to the function
arguments?

# Is it because the function is poorly written? what am I doing wrong?

Thank you for your help,
Pep

P.S. SessionInfo below



> sessionInfo()
R version 3.3.0 (2016-05-03)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows Server 2008 R2 x64 (build 7601) Service Pack 1

locale:
  [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252
[3] LC_MONETARY=English_United States.1252
LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
  [1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
  [1] raster_2.3-40 sp_1.1-1

loaded via a namespace (and not attached):
  [1] tools_3.3.0     grid_3.3.0      lattice_0.20-33

	[[alternative HTML version deleted]]


From tom.hengl at gmail.com  Sat Aug  6 15:04:13 2016
From: tom.hengl at gmail.com (Tomislav Hengl)
Date: Sat, 6 Aug 2016 15:04:13 +0200
Subject: [R-sig-Geo] Problems with installing rgdal on Ubuntu "checking
 gdal: linking with --libs only... no"
In-Reply-To: <8f7279b063f94f859001c32ef5d66a99@RED-INF-MXMB-P3.esri.com>
References: <12b6bd49-5332-e272-00ef-fdc324a67c97@gmail.com>
	<alpine.LFD.2.20.1608032249050.11166@reclus.nhh.no>
	<2fcb0cf9-41df-bcf0-7ab9-4d86dd83d44d@gmail.com>
	<cedd0583-5fd4-1a1e-f64b-40e14b5db3d1@uni-muenster.de>
	<35c8cab3-bf22-3276-fb88-495f013d1ed0@gmail.com>
	<20aa9c23-1994-ae2d-276f-c20dfc7eb516@uni-muenster.de>
	<8f7279b063f94f859001c32ef5d66a99@RED-INF-MXMB-P3.esri.com>
Message-ID: <65757cb2-d2b7-5cf2-4e92-46008984f7a1@gmail.com>


Thanks again everyone (I need to catchup on Ubuntu)! I have now figured 
out how to install and remove most recent versions of GDAL, GRASS GIS 
and SAGA GIS. For all these I have used installation from source 
(because apt-get gdal-bin from ppa:ubuntugis/ppa will only get version 
1.11) and then followed the instruction by Shaun (with 'checkinstall'). 
Unfortunately, I could not figure out how to remove manually installed 
libkml that has been causing problems (double installation), so I have 
also just done:

sudo find /usr/local/lib/ -name 'libkml*' -delete

This is what I get as output:

------------

directory: /home/tom/gdal-2.1.1

You probably don't want them to be included in the package,
especially if they are inside your home directory.
Do you want me to list them?  [n]: n
Should I exclude them from the package? (Saying yes is a good idea)  [y]: y

Copying files to the temporary directory...OK

Stripping ELF binaries and libraries...OK

Compressing man pages...OK

Building file list...OK

Building Debian package...OK

Installing Debian package...OK

Erasing temporary files...OK

Writing backup package...OK
OK

Deleting temp dir...OK


**********************************************************************

  Done. The new package has been installed and saved to

  /home/tom/gdal-2.1.1/gdal_2.1.1-1_amd64.deb

  You can remove it from your system anytime using:

       dpkg -r gdal

**********************************************************************
------------


On 04/08/16 22:14, Shaun Walbridge wrote:
> I've had good luck using checkinstall [1] to manage custom compiled packages as well, if you do want to have custom compiled packages which are registered with the system package management system. I've found this to be invaluable when working with dependency heavy packages like GDAL.
>
> 1. https://urldefense.proofpoint.com/v2/url?u=https-3A__wiki.debian.org_CheckInstall&d=CwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=fCPRb7QX-vd5bnO9gIJHCiX852SVUtyYX--xtCKtpfk&m=kBjV7CmsaZkV_yYVagS4Dh9xfKYByScSx0FKqzophaU&s=XYGc6Fga7Uuvnnd12W13ICsU77PsATlWdZiduFg0F38&e=
>
> -----Original Message-----
> From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Edzer Pebesma
> Sent: Thursday, August 04, 2016 4:03 PM
> To: r-sig-geo at r-project.org
> Subject: Re: [R-sig-Geo] Problems with installing rgdal on Ubuntu "checking gdal: linking with --libs only... no"
>
>
>
> On 04/08/16 20:49, Tomislav Hengl wrote:
>> I am surprised that I had to manually delete files from the disk (I
>> guess manual install means manual deletion?), but yes this does solve
>> the problem.
> You didn't have to: from the gdal source directory where you installed manually by
>
> ./configure
> make
> sudo make install
>
> you can also do a
>
> sudo make clean
>
> which should remove everything (including e.g. the header files now still in /usr/local/include)
> --
> Edzer Pebesma
> Institute for Geoinformatics  (ifgi),  University of M?nster Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
> Journal of Statistical Software:   https://urldefense.proofpoint.com/v2/url?u=http-3A__www.jstatsoft.org_&d=CwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=fCPRb7QX-vd5bnO9gIJHCiX852SVUtyYX--xtCKtpfk&m=kBjV7CmsaZkV_yYVagS4Dh9xfKYByScSx0FKqzophaU&s=Tn8rAf4VePukV8IRevsto81lt1_ioQ7VnrWEkPQgpEc&e=
> Computers & Geosciences:   https://urldefense.proofpoint.com/v2/url?u=http-3A__elsevier.com_locate_cageo_&d=CwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=fCPRb7QX-vd5bnO9gIJHCiX852SVUtyYX--xtCKtpfk&m=kBjV7CmsaZkV_yYVagS4Dh9xfKYByScSx0FKqzophaU&s=Nvr9ibFCzDW0D4YfZslXSJMizH7qlXJJ1or2vQ2SUfo&e=
> Spatial Statistics Society https://urldefense.proofpoint.com/v2/url?u=http-3A__www.spatialstatistics.info&d=CwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=fCPRb7QX-vd5bnO9gIJHCiX852SVUtyYX--xtCKtpfk&m=kBjV7CmsaZkV_yYVagS4Dh9xfKYByScSx0FKqzophaU&s=YJtd04wGq0BOfmJVMv95EK1HXYuq9HXnVs0Z9mrE704&e=
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From sanctavega at gmail.com  Sat Aug  6 19:39:48 2016
From: sanctavega at gmail.com (Sancta Vega)
Date: Sat, 6 Aug 2016 19:39:48 +0200
Subject: [R-sig-Geo] transform hourly data matrix to daily array
Message-ID: <57A620E4.8090309@gmail.com>


	
>
> I read a ncdf file but I can't get the correct time info and I don't 
> know where is my error. Any help please. This is my code.
>
> |# rm(list=ls())library(ncdf)nc=open.ncdf("tmp.1979-2014.nc")nc 
> [1]"file tmp.1979-2014.nc has 3 dimensions:"[1]"lon Size: 55"[1]"lat 
> Size: 41"[1]"time Size: 52596"[1]"------------------------"[1]"file 
> tmp.1979-2014.nc has 1 variables:"[1]"float tmp[lon,lat,time] 
> Longname: Temperature Missval:1e+30"lon=nc$dim$lon$vals 
> lat=nc$dim$lat$vals lev=nc$dim$level$vals time=nc$dim$time$vals 
> units=nc$dim$time$units start=as.POSIXct('1979-01-01 
> 00:00',tz='UTC')end=as.POSIXct('2014-12-31 
> 18:00',tz='UTC')times=as.POSIXct(ncin$dim$time$vals*60*60,origin='1957-01-0100:00:00',tz='UTC')t1=which(times 
> ==start)t2=which(times ==end)t1 [1]369t2 [1]51504|
>
> t1 and t2 must be respectively 1 and 52596 according to my file.
>
>  1. What is wrong in my code?
>  2. How can I calculate daily mean of my hourly file?
>


	[[alternative HTML version deleted]]


From haelia at hotmail.com  Mon Aug  8 14:34:37 2016
From: haelia at hotmail.com (=?iso-8859-1?Q?Juliane_H=E4nsch?=)
Date: Mon, 8 Aug 2016 12:34:37 +0000
Subject: [R-sig-Geo] Spatial probit
Message-ID: <AM2PR05MB0721365696DF65F70770F338C71B0@AM2PR05MB0721.eurprd05.prod.outlook.com>

Hi,


I need to run a spatial probit model on a spatial point dataset (n=930).


I looked at several packages and finally managed to run spatial probit with the package "spatialprobit", though I encountered some memory problems due to the size of the spatial weight matrix.

Prior to running the model I would like to test for spatial autocorrelation for several matrix sizes, either by distances or k neighbors. Which package lets me test for spatial autocorrelation in a spatial probit model?


Thanks,

Carol


	[[alternative HTML version deleted]]


From r.hijmans at gmail.com  Mon Aug  8 21:29:24 2016
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Mon, 8 Aug 2016 12:29:24 -0700
Subject: [R-sig-Geo] difficulties on applying a function trough calc on
	a rasterstack
In-Reply-To: <CAF8H1deXcGEKV4+gVMMCSXgGEyJn34sw05mhZdiom6g9HbzPJA@mail.gmail.com>
References: <CAF8H1deXcGEKV4+gVMMCSXgGEyJn34sw05mhZdiom6g9HbzPJA@mail.gmail.com>
Message-ID: <CANtt_hwko-yBwwKxqFPmj4_9uSPZ3uSmgzjKK-uWwmwONBP98g@mail.gmail.com>

Works for me like this

library(raster)
r1 <- raster (matrix(ncol=3, data = 1,nrow = 3))
r2 <- raster (matrix(ncol=3, data = 21,nrow = 3))
r3 <- raster (matrix(ncol=3, data = 72,nrow = 3))
rst <- stack(r1, r2, r3)

calc (rst, mfri.test)


Here is an improved version (I think) of mfri.test


mfri.test2 <- function (a){
  a2 <- sort(unique(a[a>0]))
  n <- length(a2)
  if (n==0) {
      b <-0
  } else if (n==1){
      b <- a2
  } else {
      b <- diff(a2)
  }
  if (a2[n] != 85){
      b <- c(b, 85 - a2[n])
  }
  return (mean(b))
}


On Fri, Aug 5, 2016 at 10:21 AM, Pep SD <pep.bioalerts at gmail.com> wrote:
> Hello everyone,
>
> I feel this may be R-raster 101 but I can't really find the solution to
> this.
>
> I want to apply a function over a rasterstack, so that it outputs a raster
> layer in which the function has been applied to each cell of the
> rasterstack.
>
>
> #function to pass
>
> mfri.test <- function (a){
>   a2 <- a[a>0]
>   a2 <- unique (a2)
>   a2 <- a2[order(a2)]
>   if (length (a2)==0){b<-0}else{
>     if (length (a2)==1){b<-c(a2)}
>     if (length (a2)>1) {
>
>       b <- lapply (1:(length(a2)-1), function (m){
>         a2[m+1]-a2[m]
>       })
>       b<- unlist (b)
>
>     }
>     if (a2[length(a2)]!=85){m <- c(85-a2[length(a2)]); b <- c(b,m) }}
>   return (mean(b))
> }
>
>
> #now let's try it on a vector -- ideally mm represents a single cell values
> on a rasterStack
>
> mm <-c(0,3,4,65,89)
> mfri.test(a=mm)
> [1] 20.5
>
>
> #now let's try it with a small raster
>
> r <- raster (matrix(ncol=1,data = 1,nrow = 1))
> r2 <- raster (matrix(ncol=1,data = 21,nrow = 1))
> r3 <- raster (matrix(ncol=1,data = 72,nrow = 1))
> rst <- stack(r,r2,r3)
> calc (rst,function (x) { mfri.test(x)},na.rm=T )
>
> Error in .calcTest(x[1:5], fun, na.rm, forcefun, forceapply) :
>   cannot use this function. Perhaps add '...' or 'na.rm' to the function
> arguments?
>
> # Is it because the function is poorly written? what am I doing wrong?
>
> Thank you for your help,
> Pep
>
> P.S. SessionInfo below
>
>
>
>> sessionInfo()
> R version 3.3.0 (2016-05-03)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows Server 2008 R2 x64 (build 7601) Service Pack 1
>
> locale:
>   [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
> States.1252
> [3] LC_MONETARY=English_United States.1252
> LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
>
> attached base packages:
>   [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
>   [1] raster_2.3-40 sp_1.1-1
>
> loaded via a namespace (and not attached):
>   [1] tools_3.3.0     grid_3.3.0      lattice_0.20-33
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Giacomo_May94 at gmx.de  Tue Aug  9 15:54:52 2016
From: Giacomo_May94 at gmx.de (Giacomo May)
Date: Tue, 9 Aug 2016 15:54:52 +0200
Subject: [R-sig-Geo] Error message when trying to compute the least cost
 path in gdistance in R
Message-ID: <trinity-e99bb325-b8fd-4168-8369-0b02561659c2-1470750892270@3capp-gmx-bs68>

Dear R users, 
I am trying to compute the least cost path between two points (A and B ) based on a transition matrix in R using the gdistance package. I have a resistance grid (resistance) with high cell values representing high resistance. My code so far is the following:

trCost <- transition(1/resistance,mean,directions = 8)
trCost <- geoCorrection(trCost)
sP <- shortestPath(trCost,A,B, output="SpatialLines")

However, shortly after I give the above commands, R displays the following error message:

Error in if (is.numeric(v) && any(v < 0)) { : missing value where TRUE/FALSE needed

Has anyone ever dealt with this issue before ? Any help will be greatly appreciated !


From proleet at web.de  Wed Aug 10 23:10:50 2016
From: proleet at web.de (proleet at web.de)
Date: Wed, 10 Aug 2016 23:10:50 +0200
Subject: [R-sig-Geo] adehabitatHR use different bandwidth for kernelUD
Message-ID: <trinity-4fc109b5-afd2-4fd3-8e8e-54db47b6cfdf-1470863450635@3capp-webde-bs20>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20160810/549b4eb8/attachment.html>

From M.Huck at derby.ac.uk  Thu Aug 11 10:29:26 2016
From: M.Huck at derby.ac.uk (Maren Huck)
Date: Thu, 11 Aug 2016 08:29:26 +0000
Subject: [R-sig-Geo] adehabitatHR use different bandwidth for kernelUD
In-Reply-To: <trinity-4fc109b5-afd2-4fd3-8e8e-54db47b6cfdf-1470863450635@3capp-webde-bs20>
References: <trinity-4fc109b5-afd2-4fd3-8e8e-54db47b6cfdf-1470863450635@3capp-webde-bs20>
Message-ID: <DB6PR0101MB2518BCEBED09CC53AE6A54D1D81E0@DB6PR0101MB2518.eurprd01.prod.exchangelabs.com>

Dear Hagen,

It is possible. I copy some code that I have used myself, so you would have to adapt it.

First, you have to make sure that the kernel is calculated based on the same underlying grid. If you use slightly different h-values, these are normally slightly different.

minX<-min(my_data$X_POS)     # calculate minimum and maximum values of the locations
maxX<-max(my_data$X_POS)
minY<-min(my_data$Y_POS)
maxY<-max(my_data$Y_POS)
a <- seq(minX-0.002*minX,maxX+0.002*minX,by=11.4)    # where resolution is the pixel size you desire, you might have to play around with these values. Perhaps have a look at the typical values first

b <- seq(minY-0.0001*minY,maxY+0.0001*minY,by=11.4)
ab <- expand.grid(x=a,y=b)
coordinates(ab) <- ~x+y
gridded(ab) <- TRUE
class(ab)

udhref_all<- kernelUD(my_data[,1], h="href", grid=ab)


KernelFloater<- kernelUD(Floatersp, h=86, grid=ab)
KernelB68<- kernelUD(B68sp, h=26, grid=ab)

listuds<-list(Solitary = KernelFloater, B68 = KernelB68)  # the list can be as long as you want. The name before the = is just the name you will see in your output
class(listuds)<-"estUDm"
kerneloverlaphr(listuds, method = "HR", percent =95, grid=ab)*100   # to get the overlap in percent overlap
kerneloverlaphr(listuds, method = "UDOI", percent =95, grid=ab)   # to get the Utilization distribution overlap index

The bit about the grid I found somewhere online when googling. Maybe try to google for
"ab <- expand.grid(x=a,y=b)"
because I think that is one of the original codelines there. You might get further explanations theree.


Hope that helps,

Maren

(P.S. If you have further questions, you can also e-mail me directly and in German)


Maren Huck
Dep. of Natural Sciences
University of Derby
Kedleston Road
Derby DE22 1GB
U.K.
Tel: +44-1332-592354
m.huck at derby.ac.uk
________________________________
From: R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of proleet at web.de <proleet at web.de>
Sent: 10 August 2016 22:10:50
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] adehabitatHR use different bandwidth for kernelUD

Hello everyone,
this is my first question so I hope I do everything right. I am working with adehabitatHR and I am new to R. I want to calculate the home range overlap with the function "kerneloverlaphr". In order to do so I have to produce KDE for every animal with the function "kernelUD". My input data contains only the animal-id and the xy-coordinates. I wonder if it is possible to assign a different bandwith (h) each animal because i calculated it with a procedure not implemented in adehabitatHR. "kernelUD" applies the same bandwidth to all animals. The code for "kernelUD" is:

kernelUD(xy, h = "href", grid = 60, same4all = FALSE, hlim = c(0.1, 1.5), kern = c("bivnorm", "epa"),  extent = 1,boundary = NULL)


Thanks in advance and best regards
Hagen


The University of Derby has a published policy regarding email and reserves the right to monitor email traffic.
If you believe this was sent to you in error, please reply to the sender and let them know.

Key University contacts: http://www.derby.ac.uk/its/contacts/

	[[alternative HTML version deleted]]


From Reid.Plumb at wildlife.ca.gov  Thu Aug 11 22:56:31 2016
From: Reid.Plumb at wildlife.ca.gov (Plumb, Reid@Wildlife)
Date: Thu, 11 Aug 2016 20:56:31 +0000
Subject: [R-sig-Geo] error using the kerneloverlaphr
Message-ID: <46F4A38CECCEAE4DA7198531A76D2000B78816@057-SN2MPN1-003.057d.mgd.msft.net>

Hi All,

I have been trying to use the kerneloverlaphr function in adehabitatHR to estimate home range overlap between 3 animals.  I used the recently developed dynamic Brownian Bridge Movement model (dBBMM) by Kranstauber et al. 2012 to estimate weekly home ranges.  Once created, I used the directions from  http://r-sig-geo.2731867.n2.nabble.com/adehabitatHR-combining-estUD-for-kerneloverlaphr-td7580675.html to merge the externally created UDs into a estUDm for HR overlap estimation.  All of the UDs created in the dBBMM model are the same size and are imported as ESRI raster files.  After stacking the UDs, I tried running the kerneloverlaphr() function on the estUDm but received the error:  

Error in if (slot(x[[1]], "vol")) stop("x should not be a volume under UD") :  argument is of length zero

When I try calling the estUDm, I receive the error:

Error in if (!x[[1]]@vol) { : argument is of length zero

I believe the problem has something to do with transforming the ESRI raster into a SpatialPixelsDataFrame and creating the estUDm, but I am not really sure how to remedy this issue.  I would appreciate any help you can give me.  Below is my code.  I tried attaching sample ESRI grids to reproduce the error but they are too large for this list serve.  If you can help and would like me to send you them, e-mail me directly and I will send a zip folder.  Many thanks.

library(rgdal)
library(adehabitatHR)
library(raster)

ras1 <- raster("rr1_12")
SPDX_ras1 <- as(ras1, "SpatialPixelsDataFrame")
rr1.ud <- new("estUD", SPDX_ras1)

ras2 <- raster("rr2_12")
SPDX_ras2 <- as(ras2, "SpatialPixelsDataFrame")
rr2.ud <- new("estUD", SPDX_ras2)

ras3 <- raster("rr3_12")
SPDX_ras3 <- as(ras3, "SpatialPixelsDataFrame")
rr3.ud <- new("estUD", SPDX_ras3)

rrUDm <- list(rr1.ud = rr1.ud, rr2.ud = rr2.ud, rr3.ud = rr3.ud )
class(rrUDm) <- "estUDm"
ovrlap <- kerneloverlaphr(rrUDm, method = "HR", percent = 95, conditional = FALSE)
summary(rrUDm)

Reid Plumb, M.S.
Environmental Scientist - CDFW
1724 Ball Mountain Rd.
Montague, CA 96064
E-mail: reid.plumb at wildlife.ca.gov
Cell: 419-349-2040


From Wade.A.Wall at erdc.dren.mil  Fri Aug 12 15:19:54 2016
From: Wade.A.Wall at erdc.dren.mil (Wall, Wade A ERDC-RDE-CERL-IL CIV)
Date: Fri, 12 Aug 2016 13:19:54 +0000
Subject: [R-sig-Geo] no proj_defs.dat file in PROJ.4 files message when
	using rgdal
Message-ID: <C1524BE4BF45454293B8DF38FB9B5ECA7A5756C7@MS-EX1VKS.erdc.dren.mil>

Hi all,

I am using R on a high performance Linux cluster and had to build gdal, proj4 (version 4.9.2), and rgdal from source. I had to install proj.4 in a non-standard location (/p/bin/proj4) and this appears to be causing some problems.

I modified my $PATH variable to include /p/bin/proj4; /p/bin/proj4/lib;/p/bin/proj4/share/proj

I installed rgdal using the following command

Install.packages("rgdal",configure.args = c("--with-project-include=/p/bin/proj4/include","--with-proj-lib=/p/bin/proj4/lib","--with-proj-share=/p/bin/proj4/share/proj"))

When I load rgdal, the path to gdal is displayed, but the path to proj4 says "(autodetected)". 

However, I receive the message "rgdal::checkCRSArgs:: no proj_defs.dat in PROJ.4 shared files" when I try to use the raster() function from the raster package.

I have verified that proj_def.dat is in /p/bin/proj4/share/proj. I have also tried placing it in other locations.

Any suggestions on how  I can get rgdal to find the proj_def.dat file(s)?  

Wade 


From Roger.Bivand at nhh.no  Fri Aug 12 16:14:53 2016
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 12 Aug 2016 16:14:53 +0200
Subject: [R-sig-Geo] no proj_defs.dat file in PROJ.4 files message when
 using rgdal
In-Reply-To: <C1524BE4BF45454293B8DF38FB9B5ECA7A5756C7@MS-EX1VKS.erdc.dren.mil>
References: <C1524BE4BF45454293B8DF38FB9B5ECA7A5756C7@MS-EX1VKS.erdc.dren.mil>
Message-ID: <alpine.LFD.2.20.1608121610380.25000@reclus.nhh.no>

On Fri, 12 Aug 2016, Wall, Wade A ERDC-RDE-CERL-IL CIV wrote:

> Hi all,
>
> I am using R on a high performance Linux cluster and had to build gdal, 
> proj4 (version 4.9.2), and rgdal from source. I had to install proj.4 in 
> a non-standard location (/p/bin/proj4) and this appears to be causing 
> some problems.
>
> I modified my $PATH variable to include /p/bin/proj4; 
> /p/bin/proj4/lib;/p/bin/proj4/share/proj

No, not $PATH for anything other than executables. You may need a 
different path for the shared objects. For the PROJ shared files, set 
PROJ_LIB, which should be respected.

Roger

>
> I installed rgdal using the following command
>
> Install.packages("rgdal",configure.args = 
> c("--with-project-include=/p/bin/proj4/include","--with-proj-lib=/p/bin/proj4/lib","--with-proj-share=/p/bin/proj4/share/proj"))
>
> When I load rgdal, the path to gdal is displayed, but the path to proj4 
> says "(autodetected)".
>
> However, I receive the message "rgdal::checkCRSArgs:: no proj_defs.dat 
> in PROJ.4 shared files" when I try to use the raster() function from the 
> raster package.
>
> I have verified that proj_def.dat is in /p/bin/proj4/share/proj. I have 
> also tried placing it in other locations.
>
> Any suggestions on how  I can get rgdal to find the proj_def.dat file(s)?
>
> Wade
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
http://depsy.org/person/434412


From Wade.A.Wall at erdc.dren.mil  Fri Aug 12 17:02:52 2016
From: Wade.A.Wall at erdc.dren.mil (Wall, Wade A ERDC-RDE-CERL-IL CIV)
Date: Fri, 12 Aug 2016 15:02:52 +0000
Subject: [R-sig-Geo] no proj_defs.dat file in PROJ.4 files message when
 using rgdal
In-Reply-To: <alpine.LFD.2.20.1608121610380.25000@reclus.nhh.no>
References: <C1524BE4BF45454293B8DF38FB9B5ECA7A5756C7@MS-EX1VKS.erdc.dren.mil>
	<alpine.LFD.2.20.1608121610380.25000@reclus.nhh.no>
Message-ID: <C1524BE4BF45454293B8DF38FB9B5ECA7A575FE5@MS-EX1VKS.erdc.dren.mil>

Thanks. PROJ_LIB now provides the link and when I load rgdal, the path to the PROJ.4 shared files is recognized. However, I still receive the warning: No proj_defs.dat in PROJ.4 shared files.

I edited my .bashrc  with PROJ_LIB=/p/bin/proj4/share/proj. This folder contains proj_defs.dat, as well as a duplicate file called proj_def.dat because I have seen the file named both ways.

I also changed PROJ_LIB to /p/bin/proj4/share and copied proj_defs.dat to that location. Still not sure how to get rgdal to recognize the prof_defs.dat file

-----Original Message-----
From: Roger Bivand [mailto:Roger.Bivand at nhh.no] 
Sent: Friday, August 12, 2016 9:15 AM
To: Wall, Wade A ERDC-RDE-CERL-IL CIV <Wade.A.Wall at erdc.dren.mil>
Cc: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] no proj_defs.dat file in PROJ.4 files message when using rgdal

On Fri, 12 Aug 2016, Wall, Wade A ERDC-RDE-CERL-IL CIV wrote:

> Hi all,
>
> I am using R on a high performance Linux cluster and had to build 
> gdal,
> proj4 (version 4.9.2), and rgdal from source. I had to install proj.4 
> in a non-standard location (/p/bin/proj4) and this appears to be 
> causing some problems.
>
> I modified my $PATH variable to include /p/bin/proj4; 
> /p/bin/proj4/lib;/p/bin/proj4/share/proj

No, not $PATH for anything other than executables. You may need a different path for the shared objects. For the PROJ shared files, set PROJ_LIB, which should be respected.

Roger

>
> I installed rgdal using the following command
>
> Install.packages("rgdal",configure.args =
> c("--with-project-include=/p/bin/proj4/include","--with-proj-lib=/p/bi
> n/proj4/lib","--with-proj-share=/p/bin/proj4/share/proj"))
>
> When I load rgdal, the path to gdal is displayed, but the path to 
> proj4 says "(autodetected)".
>
> However, I receive the message "rgdal::checkCRSArgs:: no proj_defs.dat 
> in PROJ.4 shared files" when I try to use the raster() function from 
> the raster package.
>
> I have verified that proj_def.dat is in /p/bin/proj4/share/proj. I 
> have also tried placing it in other locations.
>
> Any suggestions on how  I can get rgdal to find the proj_def.dat file(s)?
>
> Wade
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> Blockedhttps://stat.ethz.ch/mailman/listinfo/r-sig-geoBlocked
>

--
Roger Bivand
Department of Economics, Norwegian School of Economics, Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no
Blockedhttp://orcid.org/0000-0003-2392-6140Blocked
Blockedhttps://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=enBlocked
Blockedhttp://depsy.org/person/434412Blocked


From Roger.Bivand at nhh.no  Fri Aug 12 18:30:48 2016
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 12 Aug 2016 18:30:48 +0200
Subject: [R-sig-Geo] no proj_defs.dat file in PROJ.4 files message when
 using rgdal
In-Reply-To: <C1524BE4BF45454293B8DF38FB9B5ECA7A575FE5@MS-EX1VKS.erdc.dren.mil>
References: <C1524BE4BF45454293B8DF38FB9B5ECA7A5756C7@MS-EX1VKS.erdc.dren.mil>
	<alpine.LFD.2.20.1608121610380.25000@reclus.nhh.no>
	<C1524BE4BF45454293B8DF38FB9B5ECA7A575FE5@MS-EX1VKS.erdc.dren.mil>
Message-ID: <alpine.LFD.2.20.1608121828450.28991@reclus.nhh.no>

On Fri, 12 Aug 2016, Wall, Wade A ERDC-RDE-CERL-IL CIV wrote:

> Thanks. PROJ_LIB now provides the link and when I load rgdal, the path 
> to the PROJ.4 shared files is recognized. However, I still receive the 
> warning: No proj_defs.dat in PROJ.4 shared files.
>
> I edited my .bashrc with PROJ_LIB=/p/bin/proj4/share/proj. This folder 
> contains proj_defs.dat, as well as a duplicate file called proj_def.dat 
> because I have seen the file named both ways.

Are you exporting the local PROJ_LIB definition to other nodes in your 
cluster? Can all R instances see the definition:

Sys.getenv("PROJ_LIB")

across your systems?

Roger

>
> I also changed PROJ_LIB to /p/bin/proj4/share and copied proj_defs.dat 
> to that location. Still not sure how to get rgdal to recognize the 
> prof_defs.dat file
>
> -----Original Message-----
> From: Roger Bivand [mailto:Roger.Bivand at nhh.no]
> Sent: Friday, August 12, 2016 9:15 AM
> To: Wall, Wade A ERDC-RDE-CERL-IL CIV <Wade.A.Wall at erdc.dren.mil>
> Cc: r-sig-geo at r-project.org
> Subject: Re: [R-sig-Geo] no proj_defs.dat file in PROJ.4 files message when using rgdal
>
> On Fri, 12 Aug 2016, Wall, Wade A ERDC-RDE-CERL-IL CIV wrote:
>
>> Hi all,
>>
>> I am using R on a high performance Linux cluster and had to build
>> gdal,
>> proj4 (version 4.9.2), and rgdal from source. I had to install proj.4
>> in a non-standard location (/p/bin/proj4) and this appears to be
>> causing some problems.
>>
>> I modified my $PATH variable to include /p/bin/proj4;
>> /p/bin/proj4/lib;/p/bin/proj4/share/proj
>
> No, not $PATH for anything other than executables. You may need a different path for the shared objects. For the PROJ shared files, set PROJ_LIB, which should be respected.
>
> Roger
>
>>
>> I installed rgdal using the following command
>>
>> Install.packages("rgdal",configure.args =
>> c("--with-project-include=/p/bin/proj4/include","--with-proj-lib=/p/bi
>> n/proj4/lib","--with-proj-share=/p/bin/proj4/share/proj"))
>>
>> When I load rgdal, the path to gdal is displayed, but the path to
>> proj4 says "(autodetected)".
>>
>> However, I receive the message "rgdal::checkCRSArgs:: no proj_defs.dat
>> in PROJ.4 shared files" when I try to use the raster() function from
>> the raster package.
>>
>> I have verified that proj_def.dat is in /p/bin/proj4/share/proj. I
>> have also tried placing it in other locations.
>>
>> Any suggestions on how  I can get rgdal to find the proj_def.dat file(s)?
>>
>> Wade
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> Blockedhttps://stat.ethz.ch/mailman/listinfo/r-sig-geoBlocked
>>
>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics, Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 91 00
> e-mail: Roger.Bivand at nhh.no
> Blockedhttp://orcid.org/0000-0003-2392-6140Blocked
> Blockedhttps://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=enBlocked
> Blockedhttp://depsy.org/person/434412Blocked
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
http://depsy.org/person/434412


From Wade.A.Wall at erdc.dren.mil  Fri Aug 12 18:42:20 2016
From: Wade.A.Wall at erdc.dren.mil (Wall, Wade A ERDC-RDE-CERL-IL CIV)
Date: Fri, 12 Aug 2016 16:42:20 +0000
Subject: [R-sig-Geo] no proj_defs.dat file in PROJ.4 files message when
 using rgdal
In-Reply-To: <alpine.LFD.2.20.1608121828450.28991@reclus.nhh.no>
References: <C1524BE4BF45454293B8DF38FB9B5ECA7A5756C7@MS-EX1VKS.erdc.dren.mil>
	<alpine.LFD.2.20.1608121610380.25000@reclus.nhh.no>
	<C1524BE4BF45454293B8DF38FB9B5ECA7A575FE5@MS-EX1VKS.erdc.dren.mil>
	<alpine.LFD.2.20.1608121828450.28991@reclus.nhh.no>
Message-ID: <C1524BE4BF45454293B8DF38FB9B5ECA7A577930@MS-EX1VKS.erdc.dren.mil>

Currenty, I am only running the script at the login node.

When I type Sys.getenv("PROJ_LIB"), it returns the path to the shared directory. I made a mistake and had two paths in $PROJ_LIB, one to /share and the other to /share/proj. Both directories had the proj_defs.dat file. I removed /share from $PROJ_LIB and everything seems to be working now.

Thanks again for your help. 

Wade 


-----Original Message-----
From: Roger Bivand [mailto:Roger.Bivand at nhh.no] 
Sent: Friday, August 12, 2016 11:31 AM
To: Wall, Wade A ERDC-RDE-CERL-IL CIV
Cc: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] no proj_defs.dat file in PROJ.4 files message when using rgdal

On Fri, 12 Aug 2016, Wall, Wade A ERDC-RDE-CERL-IL CIV wrote:

> Thanks. PROJ_LIB now provides the link and when I load rgdal, the path 
> to the PROJ.4 shared files is recognized. However, I still receive the
> warning: No proj_defs.dat in PROJ.4 shared files.
>
> I edited my .bashrc with PROJ_LIB=/p/bin/proj4/share/proj. This folder 
> contains proj_defs.dat, as well as a duplicate file called 
> proj_def.dat because I have seen the file named both ways.

Are you exporting the local PROJ_LIB definition to other nodes in your cluster? Can all R instances see the definition:

Sys.getenv("PROJ_LIB")

across your systems?

Roger

>
> I also changed PROJ_LIB to /p/bin/proj4/share and copied proj_defs.dat 
> to that location. Still not sure how to get rgdal to recognize the 
> prof_defs.dat file
>
> -----Original Message-----
> From: Roger Bivand [mailto:Roger.Bivand at nhh.no]
> Sent: Friday, August 12, 2016 9:15 AM
> To: Wall, Wade A ERDC-RDE-CERL-IL CIV <Wade.A.Wall at erdc.dren.mil>
> Cc: r-sig-geo at r-project.org
> Subject: Re: [R-sig-Geo] no proj_defs.dat file in PROJ.4 files message 
> when using rgdal
>
> On Fri, 12 Aug 2016, Wall, Wade A ERDC-RDE-CERL-IL CIV wrote:
>
>> Hi all,
>>
>> I am using R on a high performance Linux cluster and had to build 
>> gdal,
>> proj4 (version 4.9.2), and rgdal from source. I had to install proj.4 
>> in a non-standard location (/p/bin/proj4) and this appears to be 
>> causing some problems.
>>
>> I modified my $PATH variable to include /p/bin/proj4; 
>> /p/bin/proj4/lib;/p/bin/proj4/share/proj
>
> No, not $PATH for anything other than executables. You may need a different path for the shared objects. For the PROJ shared files, set PROJ_LIB, which should be respected.
>
> Roger
>
>>
>> I installed rgdal using the following command
>>
>> Install.packages("rgdal",configure.args = 
>> c("--with-project-include=/p/bin/proj4/include","--with-proj-lib=/p/b
>> i
>> n/proj4/lib","--with-proj-share=/p/bin/proj4/share/proj"))
>>
>> When I load rgdal, the path to gdal is displayed, but the path to
>> proj4 says "(autodetected)".
>>
>> However, I receive the message "rgdal::checkCRSArgs:: no 
>> proj_defs.dat in PROJ.4 shared files" when I try to use the raster() 
>> function from the raster package.
>>
>> I have verified that proj_def.dat is in /p/bin/proj4/share/proj. I 
>> have also tried placing it in other locations.
>>
>> Any suggestions on how  I can get rgdal to find the proj_def.dat file(s)?
>>
>> Wade
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> BlockedBlockedhttps://stat.ethz.ch/mailman/listinfo/r-sig-geoBlockedB
>> locked
>>
>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics, Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 91 00
> e-mail: Roger.Bivand at nhh.no
> BlockedBlockedhttp://orcid.org/0000-0003-2392-6140BlockedBlocked
> BlockedBlockedhttps://scholar.google.no/citations?user=AWeghB0AAAAJ&hl
> =enBlockedBlocked 
> BlockedBlockedhttp://depsy.org/person/434412BlockedBlocked
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> Blockedhttps://stat.ethz.ch/mailman/listinfo/r-sig-geoBlocked
>

--
Roger Bivand
Department of Economics, Norwegian School of Economics, Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no
Blockedhttp://orcid.org/0000-0003-2392-6140Blocked
Blockedhttps://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=enBlocked
Blockedhttp://depsy.org/person/434412Blocked


From proleet at web.de  Mon Aug 15 16:17:59 2016
From: proleet at web.de (proleet at web.de)
Date: Mon, 15 Aug 2016 16:17:59 +0200
Subject: [R-sig-Geo] Subsetting Spatial Data for kernelUD
Message-ID: <trinity-ac6ac981-f19e-44b9-a839-e396bb75b6ca-1471270679388@3capp-webde-bap27>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20160815/533b41dd/attachment.html>

From mspinola10 at gmail.com  Mon Aug 15 17:07:34 2016
From: mspinola10 at gmail.com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Mon, 15 Aug 2016 09:07:34 -0600
Subject: [R-sig-Geo] Estimation of utilization distribution and home range
	within a polygon
Message-ID: <CABkCotTtJG=f_bNSU9JWF20LOoxNEDXkVuqtZa=cBhB8VY+MDA@mail.gmail.com>

Dear list members,

Is there a way to estimate utilization distribution and home range area
within a polygon.  I am working with spatial location on a fish in a
wetland but the utilization distribution and the home range cannot go
outside the water boundary.

I tried using a spatial polygon as spatial line and specify this in the
boundary argument of the kernelUD function of the adehabitatHR package but
I got an error:

> ud = kernelUD(dfs_in[,2], h="href", grid = 100, boundary = riol)

Error in .boundaryk(SpatialPoints(x, proj4string =
CRS(as.character(pfs1))),  :
  non convenient boundary: turning angles > pi/2

"riol" is the spatial polygon coerced to spatial line

Thank you very much in advance

Manuel

-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From mdsumner at gmail.com  Mon Aug 15 17:38:58 2016
From: mdsumner at gmail.com (Michael Sumner)
Date: Mon, 15 Aug 2016 15:38:58 +0000
Subject: [R-sig-Geo] Estimation of utilization distribution and home
 range within a polygon
In-Reply-To: <CABkCotTtJG=f_bNSU9JWF20LOoxNEDXkVuqtZa=cBhB8VY+MDA@mail.gmail.com>
References: <CABkCotTtJG=f_bNSU9JWF20LOoxNEDXkVuqtZa=cBhB8VY+MDA@mail.gmail.com>
Message-ID: <CAAcGz9_1Dwtk349W+7BtDDM6pZWDtKa6pWC3Q+B_8VyNEOB7Pw@mail.gmail.com>

It sounds like maybe your input constraint is not in a form that kernelUD
likes, perhaps there is room to read about the error message and explore
the details?

You otherwise will need more specialist methods to model within a complex
boundary.

The soapfilm tools in mgcv is one example:
http://www.fromthebottomoftheheap.net/2016/03/27/soap-film-smoothers/

Some of the trajectory/ tracking packages probably have stuff, review the
packages in the list here:

https://cloud.r-project.org/web/views/SpatioTemporal.html

There are few other related packages on CRAN from recent times not on that
list, and many there have had some significant development so worth
exploring.

You can just clip after the fact, but as you surely know that defeats the
purpose if the boundary has meaning to the intensity of behaviour.

(tripEstimation does facilitate this generally,  but I'd say that's much
too specialist and buried too deep to be helpful).

Cheers, Mike.

On Tue, 16 Aug 2016 at 01:08 Manuel Sp?nola <mspinola10 at gmail.com> wrote:

> Dear list members,
>
> Is there a way to estimate utilization distribution and home range area
> within a polygon.  I am working with spatial location on a fish in a
> wetland but the utilization distribution and the home range cannot go
> outside the water boundary.
>
> I tried using a spatial polygon as spatial line and specify this in the
> boundary argument of the kernelUD function of the adehabitatHR package but
> I got an error:
>
> > ud = kernelUD(dfs_in[,2], h="href", grid = 100, boundary = riol)
>
> Error in .boundaryk(SpatialPoints(x, proj4string =
> CRS(as.character(pfs1))),  :
>   non convenient boundary: turning angles > pi/2
>
> "riol" is the spatial polygon coerced to spatial line
>
> Thank you very much in advance
>
> Manuel
>
> --
> *Manuel Sp?nola, Ph.D.*
> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
> Universidad Nacional
> Apartado 1350-3000
> Heredia
> COSTA RICA
> mspinola at una.cr <mspinola at una.ac.cr>
> mspinola10 at gmail.com
> Tel?fono: (506) 8706 - 4662
> Personal website: Lobito de r?o <
> https://sites.google.com/site/lobitoderio/>
> Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From malNamalJa at gmx.de  Mon Aug 15 23:59:46 2016
From: malNamalJa at gmx.de (=?UTF-8?Q?=22Jannes_M=C3=BCnchow=22?=)
Date: Mon, 15 Aug 2016 23:59:46 +0200
Subject: [R-sig-Geo] RQGIS 0.1.0 release
Message-ID: <trinity-4bd84ae9-60e1-44f5-b29f-991a3225eac0-1471298386881@3capp-gmx-bs41>

Dear R-GIS community,

We proudly announce the release of RQGIS! RQGIS establishes an interface between R and QGIS, i.e. it allows the user to access the more than 1000 QGIS geoalgorithms from within R. To install it, run:

install.packages("RQGIS")

To find out more about RQGIS and how to use it, please visit:

https://jannesm.wordpress.com/2016/08/15/rqgis-0-1-0-release/

and/or

https://github.com/jannes-m/RQGIS

All the best,

Jannes


From tim.appelhans at gmail.com  Tue Aug 16 00:06:51 2016
From: tim.appelhans at gmail.com (Tim Appelhans)
Date: Tue, 16 Aug 2016 00:06:51 +0200
Subject: [R-sig-Geo] RQGIS 0.1.0 release
In-Reply-To: <trinity-4bd84ae9-60e1-44f5-b29f-991a3225eac0-1471298386881@3capp-gmx-bs41>
References: <trinity-4bd84ae9-60e1-44f5-b29f-991a3225eac0-1471298386881@3capp-gmx-bs41>
Message-ID: <57B23CFB.8@gmail.com>

Thanks Jannes! This is great news!

Tim

On 15.08.2016 23:59, "Jannes M?nchow" wrote:
> Dear R-GIS community,
>
> We proudly announce the release of RQGIS! RQGIS establishes an interface between R and QGIS, i.e. it allows the user to access the more than 1000 QGIS geoalgorithms from within R. To install it, run:
>
> install.packages("RQGIS")
>
> To find out more about RQGIS and how to use it, please visit:
>
> https://jannesm.wordpress.com/2016/08/15/rqgis-0-1-0-release/
>
> and/or
>
> https://github.com/jannes-m/RQGIS
>
> All the best,
>
> Jannes
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
#####################################
Tim Appelhans
Department of Geography
Environmental Informatics
Philipps Universit?t Marburg
Deutschhausstra?e 12
Raum 00A08
35032 Marburg (Paketpost: 35037 Marburg)
Germany

Tel +49 (0) 6421 28-25957

http://environmentalinformatics-marburg.de/


From tephilippi at gmail.com  Tue Aug 16 01:18:03 2016
From: tephilippi at gmail.com (Tom Philippi)
Date: Mon, 15 Aug 2016 16:18:03 -0700
Subject: [R-sig-Geo] Estimation of utilization distribution and home
 range within a polygon
In-Reply-To: <CAAcGz9_1Dwtk349W+7BtDDM6pZWDtKa6pWC3Q+B_8VyNEOB7Pw@mail.gmail.com>
References: <CABkCotTtJG=f_bNSU9JWF20LOoxNEDXkVuqtZa=cBhB8VY+MDA@mail.gmail.com>
	<CAAcGz9_1Dwtk349W+7BtDDM6pZWDtKa6pWC3Q+B_8VyNEOB7Pw@mail.gmail.com>
Message-ID: <CALyPt8wt6bOjtVj7=9FxB34C1+Jzx9Qc45Je_hd4vYZBJb4UqA@mail.gmail.com>

Manuel--
I don't think that there is one single "right" method for estimating
homeranges or spatial utilization contours with spatial boundaries.

Before deciding on the computations, I would encourage you to carefully
think about and define how movement & spatial utilization react to the
polygon boundaries.  Are the boundaries the equivalent of a sheer wall,
where individuals use space normally right up to the boundary, or is there
a gradient of repulsion extending some (short) distance from the boundary
(e.g., too shallow water) so use drops off a bit before the boundary, or is
the boundary attractive or reflecting, where potential movements across the
boundary become repeated head-banging against the boundary (e.g., desert
tortoises and other herps hitting drift fences)?

At the micro-scale, your pdf from each fish position is something like a
2-d Epanechnikov or normal bump of volume 1/N.  If that bump spans (or even
gets near to) your boundary, you probably want the volume to remain 1/N.
The options may be to clip at the boundary & renormalize by a scalar to
retain 1/N, or shift to an anisotropic kernel elongated along the
boundary.  Just doing the full  kernelling and then clipping the homerange
reduces the weight given to that observation near the boundary relative to
the other observations, biasing your estimated utilization away from the
edges.  For places like the Everglades where water depth, nutrients, and
vegetation are very different near the edges of wetland compartments, that
bias would be seriously misleading.

 Perhaps none of this matters for the spatial scales of your fish, boundary
effects in your wetlands, and the frequency of position locations of
individual fish (with 1000 observations per fish, fractionally
downweighting a couple of observations has little effect).

My suggestion can be thought of as an expansion of Mike's: "You can just
clip after the fact, but as you surely know that defeats the
purpose if the boundary has meaning to the intensity of behaviour" above to
cases beyond just clipping.  Mike is both more succinct and faster at
responding than I am.

Tom 2

On Mon, Aug 15, 2016 at 8:38 AM, Michael Sumner <mdsumner at gmail.com> wrote:

> It sounds like maybe your input constraint is not in a form that kernelUD
> likes, perhaps there is room to read about the error message and explore
> the details?
>
> You otherwise will need more specialist methods to model within a complex
> boundary.
>
> The soapfilm tools in mgcv is one example:
> http://www.fromthebottomoftheheap.net/2016/03/27/soap-film-smoothers/
>
> Some of the trajectory/ tracking packages probably have stuff, review the
> packages in the list here:
>
> https://cloud.r-project.org/web/views/SpatioTemporal.html
>
> There are few other related packages on CRAN from recent times not on that
> list, and many there have had some significant development so worth
> exploring.
>
> You can just clip after the fact, but as you surely know that defeats the
> purpose if the boundary has meaning to the intensity of behaviour.
>
> (tripEstimation does facilitate this generally,  but I'd say that's much
> too specialist and buried too deep to be helpful).
>
> Cheers, Mike.
>
> On Tue, 16 Aug 2016 at 01:08 Manuel Sp?nola <mspinola10 at gmail.com> wrote:
>
> > Dear list members,
> >
> > Is there a way to estimate utilization distribution and home range area
> > within a polygon.  I am working with spatial location on a fish in a
> > wetland but the utilization distribution and the home range cannot go
> > outside the water boundary.
> >
> > I tried using a spatial polygon as spatial line and specify this in the
> > boundary argument of the kernelUD function of the adehabitatHR package
> but
> > I got an error:
> >
> > > ud = kernelUD(dfs_in[,2], h="href", grid = 100, boundary = riol)
> >
> > Error in .boundaryk(SpatialPoints(x, proj4string =
> > CRS(as.character(pfs1))),  :
> >   non convenient boundary: turning angles > pi/2
> >
> > "riol" is the spatial polygon coerced to spatial line
> >
> > Thank you very much in advance
> >
> > Manuel
> >
> > --
> > *Manuel Sp?nola, Ph.D.*
> > Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
> > Universidad Nacional
> > Apartado 1350-3000
> > Heredia
> > COSTA RICA
> > mspinola at una.cr <mspinola at una.ac.cr>
> > mspinola10 at gmail.com
> > Tel?fono: (506) 8706 - 4662
> > Personal website: Lobito de r?o <
> > https://sites.google.com/site/lobitoderio/>
> > Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> --
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> Kingston Tasmania 7050 Australia
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From mspinola10 at gmail.com  Tue Aug 16 15:29:58 2016
From: mspinola10 at gmail.com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Tue, 16 Aug 2016 07:29:58 -0600
Subject: [R-sig-Geo] RQGIS 0.1.0 release
In-Reply-To: <trinity-4bd84ae9-60e1-44f5-b29f-991a3225eac0-1471298386881@3capp-gmx-bs41>
References: <trinity-4bd84ae9-60e1-44f5-b29f-991a3225eac0-1471298386881@3capp-gmx-bs41>
Message-ID: <CABkCotQVxBNLV_br18t5=O=hE_qp+ZDYsU2QSjGOqA1dUvmPpw@mail.gmail.com>

Thank you very much Jannes.

I tried to install RQGIS but I got this warning message:

> install.packages("RQGIS")
Installing package into ?C:/Users/mspin/Documents/R/win-library/3.3?
(as ?lib? is unspecified)
Warning in install.packages :
  package ?RQGIS? is not available (for R version 3.3.1)

Best,

Manuel

2016-08-15 15:59 GMT-06:00 "Jannes M?nchow" <malNamalJa at gmx.de>:

> Dear R-GIS community,
>
> We proudly announce the release of RQGIS! RQGIS establishes an interface
> between R and QGIS, i.e. it allows the user to access the more than 1000
> QGIS geoalgorithms from within R. To install it, run:
>
> install.packages("RQGIS")
>
> To find out more about RQGIS and how to use it, please visit:
>
> https://jannesm.wordpress.com/2016/08/15/rqgis-0-1-0-release/
>
> and/or
>
> https://github.com/jannes-m/RQGIS
>
> All the best,
>
> Jannes
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From proleet at web.de  Tue Aug 16 15:47:14 2016
From: proleet at web.de (proleet at web.de)
Date: Tue, 16 Aug 2016 15:47:14 +0200
Subject: [R-sig-Geo] adehabitatHR Problem with kerneloverlap and estUDm
Message-ID: <trinity-06591e2d-80b0-4602-825f-c0ea5edb5654-1471355234845@3capp-webde-bap26>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20160816/6650d797/attachment.html>

From malNamalJa at gmx.de  Tue Aug 16 17:17:08 2016
From: malNamalJa at gmx.de (=?UTF-8?Q?=22Jannes_M=C3=BCnchow=22?=)
Date: Tue, 16 Aug 2016 17:17:08 +0200
Subject: [R-sig-Geo] RQGIS 0.1.0 release
In-Reply-To: <CABkCotQVxBNLV_br18t5=O=hE_qp+ZDYsU2QSjGOqA1dUvmPpw@mail.gmail.com>
References: <trinity-4bd84ae9-60e1-44f5-b29f-991a3225eac0-1471298386881@3capp-gmx-bs41>,
	<CABkCotQVxBNLV_br18t5=O=hE_qp+ZDYsU2QSjGOqA1dUvmPpw@mail.gmail.com>
Message-ID: <trinity-c8be262a-5622-4c3f-b350-0f3074bfe5f0-1471360628809@3capp-gmx-bs62>

Hi Manuel,
?
that is strange, since I installed RQGIS under R 3.3.1. Maybe it is a server-related problem...? In the meantime, try to install the developer version:
?
devtools::install_github("jannes-m/RQGIS", build_vignettes = TRUE)

All the best,

Jannes

?

Gesendet:?Dienstag, 16. August 2016 um 15:29 Uhr
Von:?"Manuel Sp?nola" <mspinola10 at gmail.com>
An:?"Jannes M?nchow" <malNamalJa at gmx.de>
Cc:?"r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
Betreff:?Re: [R-sig-Geo] RQGIS 0.1.0 release

Thank you very much Jannes.
?
I tried to install RQGIS but I got this warning message:
?

> install.packages("RQGIS")
Installing package into ?C:/Users/mspin/Documents/R/win-library/3.3?
(as ?lib? is unspecified)
Warning in install.packages :
? package ?RQGIS? is not available (for R version 3.3.1)
?
Best,
?
Manuel
?
2016-08-15 15:59 GMT-06:00 "Jannes M?nchow" <malNamalJa at gmx.de>:Dear R-GIS community,

We proudly announce the release of RQGIS! RQGIS establishes an interface between R and QGIS, i.e. it allows the user to access the more than 1000 QGIS geoalgorithms from within R. To install it, run:

install.packages("RQGIS")

To find out more about RQGIS and how to use it, please visit:

https://jannesm.wordpress.com/2016/08/15/rqgis-0-1-0-release/[https://jannesm.wordpress.com/2016/08/15/rqgis-0-1-0-release/]

and/or

https://github.com/jannes-m/RQGIS[https://github.com/jannes-m/RQGIS]

All the best,

Jannes

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org[R-sig-Geo at r-project.org]
https://stat.ethz.ch/mailman/listinfo/r-sig-geo?
?--

Manuel Sp?nola, Ph.D.
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr[mspinola at una.ac.cr]
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o[https://sites.google.com/site/lobitoderio/]
Institutional website: ICOMVIS[http://www.icomvis.una.ac.cr/]


From tcorms at gmail.com  Tue Aug 16 17:23:56 2016
From: tcorms at gmail.com (Tina Cormier)
Date: Tue, 16 Aug 2016 11:23:56 -0400
Subject: [R-sig-Geo] RQGIS 0.1.0 release
In-Reply-To: <trinity-c8be262a-5622-4c3f-b350-0f3074bfe5f0-1471360628809@3capp-gmx-bs62>
References: <trinity-4bd84ae9-60e1-44f5-b29f-991a3225eac0-1471298386881@3capp-gmx-bs41>
	<CABkCotQVxBNLV_br18t5=O=hE_qp+ZDYsU2QSjGOqA1dUvmPpw@mail.gmail.com>
	<trinity-c8be262a-5622-4c3f-b350-0f3074bfe5f0-1471360628809@3capp-gmx-bs62>
Message-ID: <CAFfx76-nyuV_ebkYg9bxKaHqpzjC26h4HkToU21V_aZ_yyO8yw@mail.gmail.com>

Thank you to everyone who developed this package! I cannot wait to try it -
installed and waiting for me :)

Cheers,
Tina


On Tue, Aug 16, 2016 at 11:17 AM, "Jannes M?nchow" <malNamalJa at gmx.de>
wrote:

> Hi Manuel,
>
> that is strange, since I installed RQGIS under R 3.3.1. Maybe it is a
> server-related problem...  In the meantime, try to install the developer
> version:
>
> devtools::install_github("jannes-m/RQGIS", build_vignettes = TRUE)
>
> All the best,
>
> Jannes
>
>
>
> Gesendet: Dienstag, 16. August 2016 um 15:29 Uhr
> Von: "Manuel Sp?nola" <mspinola10 at gmail.com>
> An: "Jannes M?nchow" <malNamalJa at gmx.de>
> Cc: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
> Betreff: Re: [R-sig-Geo] RQGIS 0.1.0 release
>
> Thank you very much Jannes.
>
> I tried to install RQGIS but I got this warning message:
>
>
> > install.packages("RQGIS")
> Installing package into ?C:/Users/mspin/Documents/R/win-library/3.3?
> (as ?lib? is unspecified)
> Warning in install.packages :
>   package ?RQGIS? is not available (for R version 3.3.1)
>
> Best,
>
> Manuel
>
> 2016-08-15 15:59 GMT-06:00 "Jannes M?nchow" <malNamalJa at gmx.de>:Dear
> R-GIS community,
>
> We proudly announce the release of RQGIS! RQGIS establishes an interface
> between R and QGIS, i.e. it allows the user to access the more than 1000
> QGIS geoalgorithms from within R. To install it, run:
>
> install.packages("RQGIS")
>
> To find out more about RQGIS and how to use it, please visit:
>
> https://jannesm.wordpress.com/2016/08/15/rqgis-0-1-0-
> release/[https://jannesm.wordpress.com/2016/08/15/rqgis-0-1-0-release/]
>
> and/or
>
> https://github.com/jannes-m/RQGIS[https://github.com/jannes-m/RQGIS]
>
> All the best,
>
> Jannes
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org[R-sig-Geo at r-project.org]
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>  --
>
> Manuel Sp?nola, Ph.D.
> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
> Universidad Nacional
> Apartado 1350-3000
> Heredia
> COSTA RICA
> mspinola at una.cr[mspinola at una.ac.cr]
> mspinola10 at gmail.com
> Tel?fono: (506) 8706 - 4662
> Personal website: Lobito de r?o[https://sites.google.com/site/lobitoderio/
> ]
> Institutional website: ICOMVIS[http://www.icomvis.una.ac.cr/]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From mspinola10 at gmail.com  Tue Aug 16 23:25:41 2016
From: mspinola10 at gmail.com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Tue, 16 Aug 2016 15:25:41 -0600
Subject: [R-sig-Geo] Estimation of utilization distribution and home
 range within a polygon
In-Reply-To: <CALyPt8wt6bOjtVj7=9FxB34C1+Jzx9Qc45Je_hd4vYZBJb4UqA@mail.gmail.com>
References: <CABkCotTtJG=f_bNSU9JWF20LOoxNEDXkVuqtZa=cBhB8VY+MDA@mail.gmail.com>
	<CAAcGz9_1Dwtk349W+7BtDDM6pZWDtKa6pWC3Q+B_8VyNEOB7Pw@mail.gmail.com>
	<CALyPt8wt6bOjtVj7=9FxB34C1+Jzx9Qc45Je_hd4vYZBJb4UqA@mail.gmail.com>
Message-ID: <CABkCotSwvPRg4S4pv3j1YDSd5RzAzZyCgA5Sv6iYXr0MkrqL1A@mail.gmail.com>

Thank you very much Michael and Tom.

Best,

Manuel

2016-08-15 17:18 GMT-06:00 Tom Philippi <tephilippi at gmail.com>:

> Manuel--
> I don't think that there is one single "right" method for estimating
> homeranges or spatial utilization contours with spatial boundaries.
>
> Before deciding on the computations, I would encourage you to carefully
> think about and define how movement & spatial utilization react to the
> polygon boundaries.  Are the boundaries the equivalent of a sheer wall,
> where individuals use space normally right up to the boundary, or is there
> a gradient of repulsion extending some (short) distance from the boundary
> (e.g., too shallow water) so use drops off a bit before the boundary, or is
> the boundary attractive or reflecting, where potential movements across the
> boundary become repeated head-banging against the boundary (e.g., desert
> tortoises and other herps hitting drift fences)?
>
> At the micro-scale, your pdf from each fish position is something like a
> 2-d Epanechnikov or normal bump of volume 1/N.  If that bump spans (or even
> gets near to) your boundary, you probably want the volume to remain 1/N.
> The options may be to clip at the boundary & renormalize by a scalar to
> retain 1/N, or shift to an anisotropic kernel elongated along the
> boundary.  Just doing the full  kernelling and then clipping the homerange
> reduces the weight given to that observation near the boundary relative to
> the other observations, biasing your estimated utilization away from the
> edges.  For places like the Everglades where water depth, nutrients, and
> vegetation are very different near the edges of wetland compartments, that
> bias would be seriously misleading.
>
>  Perhaps none of this matters for the spatial scales of your fish,
> boundary effects in your wetlands, and the frequency of position locations
> of individual fish (with 1000 observations per fish, fractionally
> downweighting a couple of observations has little effect).
>
> My suggestion can be thought of as an expansion of Mike's: "You can just
> clip after the fact, but as you surely know that defeats the
> purpose if the boundary has meaning to the intensity of behaviour" above
> to cases beyond just clipping.  Mike is both more succinct and faster at
> responding than I am.
>
> Tom 2
>
> On Mon, Aug 15, 2016 at 8:38 AM, Michael Sumner <mdsumner at gmail.com>
> wrote:
>
>> It sounds like maybe your input constraint is not in a form that kernelUD
>> likes, perhaps there is room to read about the error message and explore
>> the details?
>>
>> You otherwise will need more specialist methods to model within a complex
>> boundary.
>>
>> The soapfilm tools in mgcv is one example:
>> http://www.fromthebottomoftheheap.net/2016/03/27/soap-film-smoothers/
>>
>> Some of the trajectory/ tracking packages probably have stuff, review the
>> packages in the list here:
>>
>> https://cloud.r-project.org/web/views/SpatioTemporal.html
>>
>> There are few other related packages on CRAN from recent times not on that
>> list, and many there have had some significant development so worth
>> exploring.
>>
>> You can just clip after the fact, but as you surely know that defeats the
>> purpose if the boundary has meaning to the intensity of behaviour.
>>
>> (tripEstimation does facilitate this generally,  but I'd say that's much
>> too specialist and buried too deep to be helpful).
>>
>> Cheers, Mike.
>>
>> On Tue, 16 Aug 2016 at 01:08 Manuel Sp?nola <mspinola10 at gmail.com> wrote:
>>
>> > Dear list members,
>> >
>> > Is there a way to estimate utilization distribution and home range area
>> > within a polygon.  I am working with spatial location on a fish in a
>> > wetland but the utilization distribution and the home range cannot go
>> > outside the water boundary.
>> >
>> > I tried using a spatial polygon as spatial line and specify this in the
>> > boundary argument of the kernelUD function of the adehabitatHR package
>> but
>> > I got an error:
>> >
>> > > ud = kernelUD(dfs_in[,2], h="href", grid = 100, boundary = riol)
>> >
>> > Error in .boundaryk(SpatialPoints(x, proj4string =
>> > CRS(as.character(pfs1))),  :
>> >   non convenient boundary: turning angles > pi/2
>> >
>> > "riol" is the spatial polygon coerced to spatial line
>> >
>> > Thank you very much in advance
>> >
>> > Manuel
>> >
>> > --
>> > *Manuel Sp?nola, Ph.D.*
>> > Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
>> > Universidad Nacional
>> > Apartado 1350-3000
>> > Heredia
>> > COSTA RICA
>> > mspinola at una.cr <mspinola at una.ac.cr>
>> > mspinola10 at gmail.com
>> > Tel?fono: (506) 8706 - 4662
>> > Personal website: Lobito de r?o <
>> > https://sites.google.com/site/lobitoderio/>
>> > Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-sig-Geo mailing list
>> > R-sig-Geo at r-project.org
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> --
>> Dr. Michael Sumner
>> Software and Database Engineer
>> Australian Antarctic Division
>> 203 Channel Highway
>> Kingston Tasmania 7050 Australia
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>


-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From thi_veloso at yahoo.com.br  Wed Aug 17 02:38:50 2016
From: thi_veloso at yahoo.com.br (Thiago V. dos Santos)
Date: Wed, 17 Aug 2016 00:38:50 +0000 (UTC)
Subject: [R-sig-Geo] How to calculate seasonal means in raster time series?
References: <1515164795.16084286.1471394330847.JavaMail.yahoo.ref@mail.yahoo.com>
Message-ID: <1515164795.16084286.1471394330847.JavaMail.yahoo@mail.yahoo.com>

Dear all,

I am using the raster package to calculate seasonal averages of climatic variables. I usually use zApply to perform temporal calculations on gridded time series.

However, this time I need to calculate seasonal averages according to the meteorological nomenclature, with DJF (=winter in the southern hemisphere: December, January, February), MAM, JJA, and SON. It is similar to zoo's yearqtr, but with a offset of -1 month on each quarter.

That means that December values comes from the previous year.
This is a typical raster I work with:

library(raster)

# Create date sequence
idx <- seq(as.Date("2001/1/1"), as.Date("2010/12/31"), by = "day")

# Create raster stack and assign dates
r <- raster(ncol=5, nrow=5)
s <- stack(lapply(1:length(idx), function(x) setValues(r, runif(ncell(r)))))
s <- setZ(s, idx)


On a raster stack like this, what would be the best strategy to calculate "meteorological" seasonal means?
 Thanks in advance,
 -- Thiago V. dos Santos

PhD student
Land and Atmospheric Science
University of Minnesota


From mel at mbacou.com  Wed Aug 17 02:51:19 2016
From: mel at mbacou.com (Bacou, Melanie)
Date: Tue, 16 Aug 2016 20:51:19 -0400
Subject: [R-sig-Geo] How to calculate seasonal means in raster time
 series?
In-Reply-To: <1515164795.16084286.1471394330847.JavaMail.yahoo@mail.yahoo.com>
References: <1515164795.16084286.1471394330847.JavaMail.yahoo.ref@mail.yahoo.com>
	<1515164795.16084286.1471394330847.JavaMail.yahoo@mail.yahoo.com>
Message-ID: <59f40cfe-3bcc-7408-d0c9-aeb76b421d2a@mbacou.com>

Maybe create a function that takes a date as input and returns a 
meteorological season, and pass this function to `zapply(by=fun)`.
--Mel.

On 8/16/2016 8:38 PM, Thiago V. dos Santos via R-sig-Geo wrote:
> Dear all,
>
> I am using the raster package to calculate seasonal averages of climatic variables. I usually use zApply to perform temporal calculations on gridded time series.
>
> However, this time I need to calculate seasonal averages according to the meteorological nomenclature, with DJF (=winter in the southern hemisphere: December, January, February), MAM, JJA, and SON. It is similar to zoo's yearqtr, but with a offset of -1 month on each quarter.
>
> That means that December values comes from the previous year.
> This is a typical raster I work with:
>
> library(raster)
>
> # Create date sequence
> idx <- seq(as.Date("2001/1/1"), as.Date("2010/12/31"), by = "day")
>
> # Create raster stack and assign dates
> r <- raster(ncol=5, nrow=5)
> s <- stack(lapply(1:length(idx), function(x) setValues(r, runif(ncell(r)))))
> s <- setZ(s, idx)
>
>
> On a raster stack like this, what would be the best strategy to calculate "meteorological" seasonal means?
>   Thanks in advance,
>   -- Thiago V. dos Santos
>
> PhD student
> Land and Atmospheric Science
> University of Minnesota
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From b.rowlingson at lancaster.ac.uk  Wed Aug 17 09:40:26 2016
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 17 Aug 2016 08:40:26 +0100
Subject: [R-sig-Geo] A Qgis Map Graphics Device for R
Message-ID: <CANVKczMK-+wQ4CyQ5E19nVXz2mr_3acu0d+X38uHSskHKFmRWw@mail.gmail.com>

Time to announce my little summer side project...

`pqgisr` is a *highly* experimental package to provide an easy way for
R programmers to use the cartographic features of Qgis without the
hassle of exporting objects, loading them into Qgis, and then having
to style them.

The package provides functions for adding map data from SP-class
objects, OGR, and GDAL data sources as well as basemap tile layers to
a Qgis map canvas window. Note that a full Qgis application is not
running - just a map canvas launched from R via python code. The
canvas is embedded in a small application with a little functionality
for layer styling, ordering, zooming etc.  This gives you an
interactive map for exploring spatial data.

In this way I also hope to have a solution for reproducible map
graphics from R using the Qgis graphics engine. An R script, possibly
running in a knitr document, can add map data to the canvas, style it
either via simple R calls or using Qgis XML styling files created
elsewhere, then save as an image and include in a reproducible
document. Yes you could do all this via R graphics commands but the
Qgis map canvas has some features that are not available on R graphics
devices.

I started this project when I noticed the RQGIS project could have
been implemented using `rPython`, which embeds a python interpreter
instance in the R process, instead of launching separate python
processes every time. As I considered reimplementing RQGIS using
rPython I realised my time would be better spent doing something that
couldn't be easily done using the process approach, and worked on
embedding a Qgis application in R via rPython. This also fit well with
my usual workflow which is to do all my GIS analysis in R (using rgeos
etc) but then exporting to Qgis for mapping. That export/import step
really jarred.

I appreciate the work the RQGIS developers are doing and see `pqgisr`
as complementary to their approach. Running Qgis `processing`
algorithms is not on my TODO list for now, I'm concentrating on the
interactive graphics aspects.

The problem with my dependence on rPython is that there seems to be no
Windows version at the moment. Oh well.

The code is on gitlab:

https://gitlab.com/b-rowlingson/pqgisr

You'll need some dev skills to get it running, and I'd be interested
to hear success stories (failure stories less so, I *expect* it to
fail at this stage!). Documentation is almost non-existent, the README
is a bit out of date (there's more implemented functionality now), and
it will crash R if you try initialising Qgis twice. I'm also
considering changing the API, and a lot of the internals which might
simplify things and clear out some of the cruft from the earliest
versions which were mostly hacking at it to make something work.

Suggestions welcome via the project gitlab tracker please!

   https://gitlab.com/b-rowlingson/pqgisr/issues


Barry


From rbarnes at umn.edu  Wed Aug 17 16:54:00 2016
From: rbarnes at umn.edu (Richard Barnes)
Date: Wed, 17 Aug 2016 08:54:00 -0600
Subject: [R-sig-Geo] Discrete Global Grids
Message-ID: <4beff44f-8c49-26c1-6e8f-74db12661fe0@umn.edu>

I've recently released a package, dggridR, which interfaces with dggrid, 
and divides the entire surface of the Earth into equally-sized hexagonal 
bins without the need for intermediate projections.

This is useful for doing spatial statistics such as prevalence, 
presence-absence binning, and so on.

The package also contains utilities to aid in plotting the results.

Install with `install.packages('dggridR')` or find it on Github at 
https://github.com/r-barnes/dggridR/

Cheers,
Richard


From tkeitt at utexas.edu  Wed Aug 17 16:54:42 2016
From: tkeitt at utexas.edu (Tim Keitt)
Date: Wed, 17 Aug 2016 09:54:42 -0500
Subject: [R-sig-Geo] A Qgis Map Graphics Device for R
In-Reply-To: <CANVKczMK-+wQ4CyQ5E19nVXz2mr_3acu0d+X38uHSskHKFmRWw@mail.gmail.com>
References: <CANVKczMK-+wQ4CyQ5E19nVXz2mr_3acu0d+X38uHSskHKFmRWw@mail.gmail.com>
Message-ID: <CANnL8goNn3ZErHP-_4Xtf1_hiHc6xSbHmCCN1OKHuMB6UG6mow@mail.gmail.com>

We think alike -- I'd been thinking of stealing the QGIS widget for R
mapping as well. I look forward to trying out.

THK

http://www.keittlab.org/

On Wed, Aug 17, 2016 at 2:40 AM, Barry Rowlingson <
b.rowlingson at lancaster.ac.uk> wrote:

> Time to announce my little summer side project...
>
> `pqgisr` is a *highly* experimental package to provide an easy way for
> R programmers to use the cartographic features of Qgis without the
> hassle of exporting objects, loading them into Qgis, and then having
> to style them.
>
> The package provides functions for adding map data from SP-class
> objects, OGR, and GDAL data sources as well as basemap tile layers to
> a Qgis map canvas window. Note that a full Qgis application is not
> running - just a map canvas launched from R via python code. The
> canvas is embedded in a small application with a little functionality
> for layer styling, ordering, zooming etc.  This gives you an
> interactive map for exploring spatial data.
>
> In this way I also hope to have a solution for reproducible map
> graphics from R using the Qgis graphics engine. An R script, possibly
> running in a knitr document, can add map data to the canvas, style it
> either via simple R calls or using Qgis XML styling files created
> elsewhere, then save as an image and include in a reproducible
> document. Yes you could do all this via R graphics commands but the
> Qgis map canvas has some features that are not available on R graphics
> devices.
>
> I started this project when I noticed the RQGIS project could have
> been implemented using `rPython`, which embeds a python interpreter
> instance in the R process, instead of launching separate python
> processes every time. As I considered reimplementing RQGIS using
> rPython I realised my time would be better spent doing something that
> couldn't be easily done using the process approach, and worked on
> embedding a Qgis application in R via rPython. This also fit well with
> my usual workflow which is to do all my GIS analysis in R (using rgeos
> etc) but then exporting to Qgis for mapping. That export/import step
> really jarred.
>
> I appreciate the work the RQGIS developers are doing and see `pqgisr`
> as complementary to their approach. Running Qgis `processing`
> algorithms is not on my TODO list for now, I'm concentrating on the
> interactive graphics aspects.
>
> The problem with my dependence on rPython is that there seems to be no
> Windows version at the moment. Oh well.
>
> The code is on gitlab:
>
> https://gitlab.com/b-rowlingson/pqgisr
>
> You'll need some dev skills to get it running, and I'd be interested
> to hear success stories (failure stories less so, I *expect* it to
> fail at this stage!). Documentation is almost non-existent, the README
> is a bit out of date (there's more implemented functionality now), and
> it will crash R if you try initialising Qgis twice. I'm also
> considering changing the API, and a lot of the internals which might
> simplify things and clear out some of the cruft from the earliest
> versions which were mostly hacking at it to make something work.
>
> Suggestions welcome via the project gitlab tracker please!
>
>    https://gitlab.com/b-rowlingson/pqgisr/issues
>
>
> Barry
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From loic.dutrieux at wur.nl  Wed Aug 17 17:22:18 2016
From: loic.dutrieux at wur.nl (=?UTF-8?Q?Lo=c3=afc_Dutrieux?=)
Date: Wed, 17 Aug 2016 17:22:18 +0200
Subject: [R-sig-Geo] How to calculate seasonal means in raster time
 series?
In-Reply-To: <59f40cfe-3bcc-7408-d0c9-aeb76b421d2a@mbacou.com>
References: <1515164795.16084286.1471394330847.JavaMail.yahoo.ref@mail.yahoo.com>
	<1515164795.16084286.1471394330847.JavaMail.yahoo@mail.yahoo.com>
	<59f40cfe-3bcc-7408-d0c9-aeb76b421d2a@mbacou.com>
Message-ID: <65daa73c-e4e8-831d-b1df-2238ad22e5de@wur.nl>



On 17/08/2016 02:51, Bacou, Melanie wrote:
> Maybe create a function that takes a date as input and returns a
> meteorological season, and pass this function to `zapply(by=fun)`.
> --Mel.
>
> On 8/16/2016 8:38 PM, Thiago V. dos Santos via R-sig-Geo wrote:
>> Dear all,
>>
>> I am using the raster package to calculate seasonal averages of
>> climatic variables. I usually use zApply to perform temporal
>> calculations on gridded time series.
>>
>> However, this time I need to calculate seasonal averages according to
>> the meteorological nomenclature, with DJF (=winter in the southern
>> hemisphere: December, January, February), MAM, JJA, and SON. It is
>> similar to zoo's yearqtr, but with a offset of -1 month on each quarter.
>>
>> That means that December values comes from the previous year.
>> This is a typical raster I work with:
>>
>> library(raster)
>>
>> # Create date sequence
>> idx <- seq(as.Date("2001/1/1"), as.Date("2010/12/31"), by = "day")
>>
>> # Create raster stack and assign dates
>> r <- raster(ncol=5, nrow=5)
>> s <- stack(lapply(1:length(idx), function(x) setValues(r,
>> runif(ncell(r)))))
>> s <- setZ(s, idx)

Hi Thiago,

You can try to shift the aggregation indices.

library(zoo)
zApply(s, by = as.yearqtr(as.yearmon(idx) + 1/12), fun = mean)

Kind regards,
Lo?c

>>
>>
>> On a raster stack like this, what would be the best strategy to
>> calculate "meteorological" seasonal means?
>>   Thanks in advance,
>>   -- Thiago V. dos Santos
>>
>> PhD student
>> Land and Atmospheric Science
>> University of Minnesota
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From azm at uow.edu.au  Wed Aug 17 19:22:40 2016
From: azm at uow.edu.au (Andrew Zammit Mangion)
Date: Wed, 17 Aug 2016 17:22:40 +0000
Subject: [R-sig-Geo] Discrete Global Grids
In-Reply-To: <4beff44f-8c49-26c1-6e8f-74db12661fe0@umn.edu>
References: <4beff44f-8c49-26c1-6e8f-74db12661fe0@umn.edu>
Message-ID: <1471368142288.33533@uow.edu.au>

Thank you Richard that will be very useful. For those who want some dggrids which "ready to use" I put the first 10 isea3h resolutions provided by dggrid on the globe in long data frame format here.

https://github.com/andrewzm/dggrids

library(dggrids)
data(isea3h)

Best,
Andrew

-----------------------------------------------------------------------------
Andrew Zammit Mangion, Statistical Computing Scientist, 
Centre for Environmental Informatics, National Institute for Applied Statistics Research Australia (NIASRA), School of Mathematics and Applied Statistics, 
University of Wollongong NSW 2522, 
Australia Office telephone:
Within Australia... (02) 4221 5112 
International... +61 2 4221 5112
E-mail: azm at uow.edu.au
------------------------------------------------------------------------------
________________________________________
From: R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of Richard Barnes <rbarnes at umn.edu>
Sent: 18 August 2016 00:54
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] Discrete Global Grids

I've recently released a package, dggridR, which interfaces with dggrid,
and divides the entire surface of the Earth into equally-sized hexagonal
bins without the need for intermediate projections.

This is useful for doing spatial statistics such as prevalence,
presence-absence binning, and so on.

The package also contains utilities to aid in plotting the results.

Install with `install.packages('dggridR')` or find it on Github at
https://github.com/r-barnes/dggridR/

Cheers,
Richard

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Wade.A.Wall at erdc.dren.mil  Wed Aug 17 20:02:40 2016
From: Wade.A.Wall at erdc.dren.mil (Wall, Wade A ERDC-RDE-CERL-IL CIV)
Date: Wed, 17 Aug 2016 18:02:40 +0000
Subject: [R-sig-Geo] Unable to set temporary directory when using raster in R
Message-ID: <C1524BE4BF45454293B8DF38FB9B5ECA7A583E33@MS-EX1VKS.erdc.dren.mil>

Hi all,

I am trying to use parallel processing with raster::predict, but am running into some issues because of the size of the raster files. I have tried to set the temporary directory, but it seems to be ignored. The drive I am trying to write to is an external hard drive and I am using Windows 7

Here is the code I have been using:

ncores = 4
cl = parallel::makeCluster(ncores)
doParallel::registerDoParallel(cl,ncores)
rows=1:nrow(env)
split=sort(rows%%ncores)+1
outname="envOut"
prediction = foreach(i=unique(split), .packages = c("raster"), .combine=c) %dopar% {
    raster.options(tmpdir="I:/GIS/tmpdir") ## my attempt to set the temporary directory
    rows_sub=rows[split==i]
    sub = raster::crop(env,raster::extent(env,min(rows_sub),max(rows_sub),1,ncol(env)))
    raster::predict(object=env, model = model1,
    filename=paste("I:/GIS/Projects/LISU/",outname,i,".tif",sep=""))
    gc()
}
stopCluster(cl)

When I run the script, R continues to write to C:/Users/Wade/AppData/Local/Temp/...

Any hints as to why this is happening?

Wade


From thi_veloso at yahoo.com.br  Wed Aug 17 20:34:47 2016
From: thi_veloso at yahoo.com.br (Thiago V. dos Santos)
Date: Wed, 17 Aug 2016 18:34:47 +0000 (UTC)
Subject: [R-sig-Geo] How to calculate seasonal means in raster time
 series?
In-Reply-To: <65daa73c-e4e8-831d-b1df-2238ad22e5de@wur.nl>
References: <1515164795.16084286.1471394330847.JavaMail.yahoo.ref@mail.yahoo.com>
	<1515164795.16084286.1471394330847.JavaMail.yahoo@mail.yahoo.com>
	<59f40cfe-3bcc-7408-d0c9-aeb76b421d2a@mbacou.com>
	<65daa73c-e4e8-831d-b1df-2238ad22e5de@wur.nl>
Message-ID: <500310949.16303364.1471458887931.JavaMail.yahoo@mail.yahoo.com>

Thanks Lo?c,

I was almost there, but I was definitely missing "as.yearmon".
 
It works now.
 Greetings,
 -- Thiago V. dos Santos

PhD student
Land and Atmospheric Science
University of Minnesota



On Wednesday, August 17, 2016 10:37 AM, Lo?c Dutrieux <loic.dutrieux at wur.nl> wrote:


On 17/08/2016 02:51, Bacou, Melanie wrote:
> Maybe create a function that takes a date as input and returns a
> meteorological season, and pass this function to `zapply(by=fun)`.
> --Mel.
>
> On 8/16/2016 8:38 PM, Thiago V. dos Santos via R-sig-Geo wrote:
>> Dear all,
>>
>> I am using the raster package to calculate seasonal averages of
>> climatic variables. I usually use zApply to perform temporal
>> calculations on gridded time series.
>>
>> However, this time I need to calculate seasonal averages according to
>> the meteorological nomenclature, with DJF (=winter in the southern
>> hemisphere: December, January, February), MAM, JJA, and SON. It is
>> similar to zoo's yearqtr, but with a offset of -1 month on each quarter.
>>
>> That means that December values comes from the previous year.
>> This is a typical raster I work with:
>>
>> library(raster)
>>
>> # Create date sequence
>> idx <- seq(as.Date("2001/1/1"), as.Date("2010/12/31"), by = "day")
>>
>> # Create raster stack and assign dates
>> r <- raster(ncol=5, nrow=5)
>> s <- stack(lapply(1:length(idx), function(x) setValues(r,
>> runif(ncell(r)))))
>> s <- setZ(s, idx)

Hi Thiago,

You can try to shift the aggregation indices.

library(zoo)
zApply(s, by = as.yearqtr(as.yearmon(idx) + 1/12), fun = mean)

Kind regards,
Lo?c

>>
>>
>> On a raster stack like this, what would be the best strategy to
>> calculate "meteorological" seasonal means?
>>   Thanks in advance,
>>   -- Thiago V. dos Santos
>>
>> PhD student
>> Land and Atmospheric Science
>> University of Minnesota
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From dw2116 at outlook.com  Thu Aug 18 00:00:11 2016
From: dw2116 at outlook.com (David Wang)
Date: Wed, 17 Aug 2016 22:00:11 +0000
Subject: [R-sig-Geo] Parallel processing a list of SpatialPoints
Message-ID: <DM5PR11MB15939E5AE9DB2B75CC3488AFCB140@DM5PR11MB1593.namprd11.prod.outlook.com>

Hello,


I have a list of SpatialPointsDataFrame objects that represent feature centers along the time axis. For example, let's say the list is centers. centers[[1]] are the points at t = 1, centers[[2]] are the points at t = 2, and so on. Now for every point at t, I need to link it to, if any, the nearest point within a search radius at the next time step t + 1. The procedure is applied to all time steps, and the result are tracks that connect selected feature centers in time. I have implemented a solution using igraph package, with every center represented by a vertex and every link by an edge. This way, tracks are simply connected components of the graph. Now because the number of centers and links are quite large, the algorithm takes a while to run. But since finding the nearest neighbors between t and t + 1 and between t + 1 and t + 2 are independent, I think parallel processing should be possible, although I haven't figured out how. Does anyone here happen to have a pointer or two? I work on a multicore PC. Here is my code snippet:


g <- graph.empty(directed = TRUE)
for (k in seq_along(centers)) {
  pts <- centers[[k]]
  g <- add_vertices(g, nv = length(pts), id = k, attr = as.data.frame(pts))
  if (length(V(g)[id == (k - 1)]) > 0 & length(V(g)[id == k]) > 0) {
    v1 <- V(g)[id == (k - 1)]
    v2 <- V(g)[id == k]
    rd <- rdist(cbind(v1$x, v1$y), cbind(v2$x, v2$y))
    for (i in 1:nrow(rd)) {
      if (min(rd[i, ]) < maxDist) {
        e <- c(V(g)[id == (k - 1)][i], V(g)[id == k][which.min(rd[i, ])])
        g <- add_edges(g, e)
      }
    }
  }
}
tracks <- groups(components(g)) # vertex ids along each track


Thanks,

David

	[[alternative HTML version deleted]]


From HodgessE at uhd.edu  Thu Aug 18 00:11:31 2016
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Wed, 17 Aug 2016 22:11:31 +0000
Subject: [R-sig-Geo] Parallel processing a list of SpatialPoints
In-Reply-To: <DM5PR11MB15939E5AE9DB2B75CC3488AFCB140@DM5PR11MB1593.namprd11.prod.outlook.com>
References: <DM5PR11MB15939E5AE9DB2B75CC3488AFCB140@DM5PR11MB1593.namprd11.prod.outlook.com>
Message-ID: <FF9DB805FC41CC4E95825A50F6806302B4A98852@challenger.uhd.campus>

Do you know Mpi, by any chance,  please?  What kind of machine/operating system are you using,  please? 

Thanks,  
Erin 

Erin M. Hodgess
Associate Professor
Department of Mathematics and Statistics
University of Houston - Downtown
mailto: hodgesse at uhd.edu

________________________________________
From: R-sig-Geo [r-sig-geo-bounces at r-project.org] on behalf of David Wang [dw2116 at outlook.com]
Sent: Wednesday, August 17, 2016 5:00 PM
To: r-sig-geo
Subject: [R-sig-Geo] Parallel processing a list of SpatialPoints

Hello,


I have a list of SpatialPointsDataFrame objects that represent feature centers along the time axis. For example, let's say the list is centers. centers[[1]] are the points at t = 1, centers[[2]] are the points at t = 2, and so on. Now for every point at t, I need to link it to, if any, the nearest point within a search radius at the next time step t + 1. The procedure is applied to all time steps, and the result are tracks that connect selected feature centers in time. I have implemented a solution using igraph package, with every center represented by a vertex and every link by an edge. This way, tracks are simply connected components of the graph. Now because the number of centers and links are quite large, the algorithm takes a while to run. But since finding the nearest neighbors between t and t + 1 and between t + 1 and t + 2 are independent, I think parallel processing should be possible, although I haven't figured out how. Does anyone here happen to have a pointer or !
 two? I work on a multicore PC. Here is my code snippet:


g <- graph.empty(directed = TRUE)
for (k in seq_along(centers)) {
  pts <- centers[[k]]
  g <- add_vertices(g, nv = length(pts), id = k, attr = as.data.frame(pts))
  if (length(V(g)[id == (k - 1)]) > 0 & length(V(g)[id == k]) > 0) {
    v1 <- V(g)[id == (k - 1)]
    v2 <- V(g)[id == k]
    rd <- rdist(cbind(v1$x, v1$y), cbind(v2$x, v2$y))
    for (i in 1:nrow(rd)) {
      if (min(rd[i, ]) < maxDist) {
        e <- c(V(g)[id == (k - 1)][i], V(g)[id == k][which.min(rd[i, ])])
        g <- add_edges(g, e)
      }
    }
  }
}
tracks <- groups(components(g)) # vertex ids along each track


Thanks,

David

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From dw2116 at outlook.com  Thu Aug 18 00:19:27 2016
From: dw2116 at outlook.com (David Wang)
Date: Wed, 17 Aug 2016 22:19:27 +0000
Subject: [R-sig-Geo] Parallel processing a list of SpatialPoints
In-Reply-To: <FF9DB805FC41CC4E95825A50F6806302B4A98852@challenger.uhd.campus>
References: <DM5PR11MB15939E5AE9DB2B75CC3488AFCB140@DM5PR11MB1593.namprd11.prod.outlook.com>,
	<FF9DB805FC41CC4E95825A50F6806302B4A98852@challenger.uhd.campus>
Message-ID: <DM5PR11MB1593B624B59594159B4A99EBCB140@DM5PR11MB1593.namprd11.prod.outlook.com>

Hi Erin et al.,


Thanks for the questions. I use Windows 7 on a 8-core PC. I also have access to a Linux cluster. But in most cases, I have found using multiple cores with doParallel and foreach on the PC gives me sufficient speed-up. I'd not bother with mpi in this case either.


D

________________________________
From: Hodgess, Erin <HodgessE at uhd.edu>
Sent: Wednesday, August 17, 2016 6:11:31 PM
To: David Wang; r-sig-geo
Subject: RE: Parallel processing a list of SpatialPoints

Do you know Mpi, by any chance,  please?  What kind of machine/operating system are you using,  please?

Thanks,
Erin

Erin M. Hodgess
Associate Professor
Department of Mathematics and Statistics
University of Houston - Downtown
mailto: hodgesse at uhd.edu

________________________________________
From: R-sig-Geo [r-sig-geo-bounces at r-project.org] on behalf of David Wang [dw2116 at outlook.com]
Sent: Wednesday, August 17, 2016 5:00 PM
To: r-sig-geo
Subject: [R-sig-Geo] Parallel processing a list of SpatialPoints

Hello,


I have a list of SpatialPointsDataFrame objects that represent feature centers along the time axis. For example, let's say the list is centers. centers[[1]] are the points at t = 1, centers[[2]] are the points at t = 2, and so on. Now for every point at t, I need to link it to, if any, the nearest point within a search radius at the next time step t + 1. The procedure is applied to all time steps, and the result are tracks that connect selected feature centers in time. I have implemented a solution using igraph package, with every center represented by a vertex and every link by an edge. This way, tracks are simply connected components of the graph. Now because the number of centers and links are quite large, the algorithm takes a while to run. But since finding the nearest neighbors between t and t + 1 and between t + 1 and t + 2 are independent, I think parallel processing should be possible, although I haven't figured out how. Does anyone here happen to have a pointer or !
 two? I work on a multicore PC. Here is my code snippet:


g <- graph.empty(directed = TRUE)
for (k in seq_along(centers)) {
  pts <- centers[[k]]
  g <- add_vertices(g, nv = length(pts), id = k, attr = as.data.frame(pts))
  if (length(V(g)[id == (k - 1)]) > 0 & length(V(g)[id == k]) > 0) {
    v1 <- V(g)[id == (k - 1)]
    v2 <- V(g)[id == k]
    rd <- rdist(cbind(v1$x, v1$y), cbind(v2$x, v2$y))
    for (i in 1:nrow(rd)) {
      if (min(rd[i, ]) < maxDist) {
        e <- c(V(g)[id == (k - 1)][i], V(g)[id == k][which.min(rd[i, ])])
        g <- add_edges(g, e)
      }
    }
  }
}
tracks <- groups(components(g)) # vertex ids along each track


Thanks,

David

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Thu Aug 18 07:55:18 2016
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 18 Aug 2016 05:55:18 +0000
Subject: [R-sig-Geo] Parallel processing a list of SpatialPoints
In-Reply-To: <DM5PR11MB1593B624B59594159B4A99EBCB140@DM5PR11MB1593.namprd11.prod.outlook.com>
References: <DM5PR11MB15939E5AE9DB2B75CC3488AFCB140@DM5PR11MB1593.namprd11.prod.outlook.com>,
	<FF9DB805FC41CC4E95825A50F6806302B4A98852@challenger.uhd.campus>,
	<DM5PR11MB1593B624B59594159B4A99EBCB140@DM5PR11MB1593.namprd11.prod.outlook.com>
Message-ID: <4F58C8D16A2DF6F4.87de3c48-c2f1-4e6c-9f1e-42a22fc4b298@mail.outlook.com>

Consider using the RANN package if your points are represented by projected (planar) coordinates.

Hope this helps,

Roger Bivand
Norwegian School of Economics
Bergen, Norway

Fra: David Wang
Sendt: torsdag 18. august, 00.20
Emne: Re: [R-sig-Geo] Parallel processing a list of SpatialPoints
Til: Hodgess, Erin, r-sig-geo

Hi Erin et al., Thanks for the questions. I use Windows 7 on a 8-core PC. I also have access to a Linux cluster. But in most cases, I have found using multiple cores with doParallel and foreach on the PC gives me sufficient speed-up. I'd not bother with mpi in this case either. D ________________________________ From: Hodgess, Erin Sent: Wednesday, August 17, 2016 6:11:31 PM To: David Wang; r-sig-geo Subject: RE: Parallel processing a list of SpatialPoints Do you know Mpi, by any chance, please? What kind of machine/operating system are you using, please? Thanks, Erin Erin M. Hodgess Associate Professor Department of Mathematics and Statistics University of Houston - Downtown mailto: hodgesse at uhd.edu ________________________________________ From: R-sig-Geo [r-sig-geo-bounces at r-project.org] on behalf of David Wang [dw2116 at outlook.com] Sent: Wednesday, August 17, 2016 5:00 PM To: r-sig-geo Subject: [R-sig-Geo] Parallel processing a list of SpatialPoints Hello, I have a list of SpatialPointsDataFrame objects that represent feature centers along the time axis. For example, let's say the list is centers. centers[[1]] are the points at t = 1, centers[[2]] are the points at t = 2, and so on. Now for every point at t, I need to link it to, if any, the nearest point within a search radius at the next time step t + 1. The procedure is applied to all time steps, and the result are tracks that connect selected feature centers in time. I have implemented a solution using igraph package, with every center represented by a vertex and every link by an edge. This way, tracks are simply connected components of the graph. Now because the number of centers and links are quite large, the algorithm takes a while to run. But since finding the nearest neighbors between t and t + 1 and between t + 1 and t + 2 are independent, I think parallel processing should be possible, although I haven't figured out how. Does anyone here happen to have a pointer or ! two? I work on a multicore PC. Here is my code snippet: g 0 & length(V(g)[id == k]) > 0) { v1

	[[alternative HTML version deleted]]


From mel at mbacou.com  Thu Aug 18 08:58:56 2016
From: mel at mbacou.com (Bacou, Melanie)
Date: Thu, 18 Aug 2016 02:58:56 -0400
Subject: [R-sig-Geo] A Qgis Map Graphics Device for R
In-Reply-To: <CANnL8goNn3ZErHP-_4Xtf1_hiHc6xSbHmCCN1OKHuMB6UG6mow@mail.gmail.com>
References: <CANVKczMK-+wQ4CyQ5E19nVXz2mr_3acu0d+X38uHSskHKFmRWw@mail.gmail.com>
	<CANnL8goNn3ZErHP-_4Xtf1_hiHc6xSbHmCCN1OKHuMB6UG6mow@mail.gmail.com>
Message-ID: <75d1bc20-f788-a109-af3b-d16f4b448925@mbacou.com>

Barry,
This looks great. Til now I've been using `tmap` (with leaflet) to 
explore spatial data interactively and to print maps within R, but a 
QGIS widget offers interesting options for creating and re-using styles.

What about editing features within the widget as well (e.g. 
merging/splitting/fixing bad geometries)? That's one of my typical 
use-case for switching between QGIS and R. Another use-case is to 
visually select and edit multiple features at once (easier in QGIS than 
in R typically).

Just curious as to how others would want to use a QGIS map canvas...

--Mel.


On 8/17/2016 10:54 AM, Tim Keitt wrote:
> We think alike -- I'd been thinking of stealing the QGIS widget for R
> mapping as well. I look forward to trying out.
>
> THK
>
> http://www.keittlab.org/
>
> On Wed, Aug 17, 2016 at 2:40 AM, Barry Rowlingson <
> b.rowlingson at lancaster.ac.uk> wrote:
>
>> Time to announce my little summer side project...
>>
>> `pqgisr` is a *highly* experimental package to provide an easy way for
>> R programmers to use the cartographic features of Qgis without the
>> hassle of exporting objects, loading them into Qgis, and then having
>> to style them.
>>
>> The package provides functions for adding map data from SP-class
>> objects, OGR, and GDAL data sources as well as basemap tile layers to
>> a Qgis map canvas window. Note that a full Qgis application is not
>> running - just a map canvas launched from R via python code. The
>> canvas is embedded in a small application with a little functionality
>> for layer styling, ordering, zooming etc.  This gives you an
>> interactive map for exploring spatial data.
>>
>> In this way I also hope to have a solution for reproducible map
>> graphics from R using the Qgis graphics engine. An R script, possibly
>> running in a knitr document, can add map data to the canvas, style it
>> either via simple R calls or using Qgis XML styling files created
>> elsewhere, then save as an image and include in a reproducible
>> document. Yes you could do all this via R graphics commands but the
>> Qgis map canvas has some features that are not available on R graphics
>> devices.
>>
>> I started this project when I noticed the RQGIS project could have
>> been implemented using `rPython`, which embeds a python interpreter
>> instance in the R process, instead of launching separate python
>> processes every time. As I considered reimplementing RQGIS using
>> rPython I realised my time would be better spent doing something that
>> couldn't be easily done using the process approach, and worked on
>> embedding a Qgis application in R via rPython. This also fit well with
>> my usual workflow which is to do all my GIS analysis in R (using rgeos
>> etc) but then exporting to Qgis for mapping. That export/import step
>> really jarred.
>>
>> I appreciate the work the RQGIS developers are doing and see `pqgisr`
>> as complementary to their approach. Running Qgis `processing`
>> algorithms is not on my TODO list for now, I'm concentrating on the
>> interactive graphics aspects.
>>
>> The problem with my dependence on rPython is that there seems to be no
>> Windows version at the moment. Oh well.
>>
>> The code is on gitlab:
>>
>> https://gitlab.com/b-rowlingson/pqgisr
>>
>> You'll need some dev skills to get it running, and I'd be interested
>> to hear success stories (failure stories less so, I *expect* it to
>> fail at this stage!). Documentation is almost non-existent, the README
>> is a bit out of date (there's more implemented functionality now), and
>> it will crash R if you try initialising Qgis twice. I'm also
>> considering changing the API, and a lot of the internals which might
>> simplify things and clear out some of the cruft from the earliest
>> versions which were mostly hacking at it to make something work.
>>
>> Suggestions welcome via the project gitlab tracker please!
>>
>>     https://gitlab.com/b-rowlingson/pqgisr/issues
>>
>>
>> Barry
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From mspinola10 at gmail.com  Thu Aug 18 14:17:11 2016
From: mspinola10 at gmail.com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Thu, 18 Aug 2016 06:17:11 -0600
Subject: [R-sig-Geo] A Qgis Map Graphics Device for R
In-Reply-To: <CANVKczMK-+wQ4CyQ5E19nVXz2mr_3acu0d+X38uHSskHKFmRWw@mail.gmail.com>
References: <CANVKczMK-+wQ4CyQ5E19nVXz2mr_3acu0d+X38uHSskHKFmRWw@mail.gmail.com>
Message-ID: <CABkCotTr5QX8=z1jvfeJup7N1wbChj=3PUEcpx=xy6x9mc=jbg@mail.gmail.com>

Dear Barry,

How I install the package?

Manuel

2016-08-17 1:40 GMT-06:00 Barry Rowlingson <b.rowlingson at lancaster.ac.uk>:

> Time to announce my little summer side project...
>
> `pqgisr` is a *highly* experimental package to provide an easy way for
> R programmers to use the cartographic features of Qgis without the
> hassle of exporting objects, loading them into Qgis, and then having
> to style them.
>
> The package provides functions for adding map data from SP-class
> objects, OGR, and GDAL data sources as well as basemap tile layers to
> a Qgis map canvas window. Note that a full Qgis application is not
> running - just a map canvas launched from R via python code. The
> canvas is embedded in a small application with a little functionality
> for layer styling, ordering, zooming etc.  This gives you an
> interactive map for exploring spatial data.
>
> In this way I also hope to have a solution for reproducible map
> graphics from R using the Qgis graphics engine. An R script, possibly
> running in a knitr document, can add map data to the canvas, style it
> either via simple R calls or using Qgis XML styling files created
> elsewhere, then save as an image and include in a reproducible
> document. Yes you could do all this via R graphics commands but the
> Qgis map canvas has some features that are not available on R graphics
> devices.
>
> I started this project when I noticed the RQGIS project could have
> been implemented using `rPython`, which embeds a python interpreter
> instance in the R process, instead of launching separate python
> processes every time. As I considered reimplementing RQGIS using
> rPython I realised my time would be better spent doing something that
> couldn't be easily done using the process approach, and worked on
> embedding a Qgis application in R via rPython. This also fit well with
> my usual workflow which is to do all my GIS analysis in R (using rgeos
> etc) but then exporting to Qgis for mapping. That export/import step
> really jarred.
>
> I appreciate the work the RQGIS developers are doing and see `pqgisr`
> as complementary to their approach. Running Qgis `processing`
> algorithms is not on my TODO list for now, I'm concentrating on the
> interactive graphics aspects.
>
> The problem with my dependence on rPython is that there seems to be no
> Windows version at the moment. Oh well.
>
> The code is on gitlab:
>
> https://gitlab.com/b-rowlingson/pqgisr
>
> You'll need some dev skills to get it running, and I'd be interested
> to hear success stories (failure stories less so, I *expect* it to
> fail at this stage!). Documentation is almost non-existent, the README
> is a bit out of date (there's more implemented functionality now), and
> it will crash R if you try initialising Qgis twice. I'm also
> considering changing the API, and a lot of the internals which might
> simplify things and clear out some of the cruft from the earliest
> versions which were mostly hacking at it to make something work.
>
> Suggestions welcome via the project gitlab tracker please!
>
>    https://gitlab.com/b-rowlingson/pqgisr/issues
>
>
> Barry
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From b.rowlingson at lancaster.ac.uk  Thu Aug 18 15:09:19 2016
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Thu, 18 Aug 2016 14:09:19 +0100
Subject: [R-sig-Geo] A Qgis Map Graphics Device for R
In-Reply-To: <11dc9e9f92dd441ba067408d0fefc891@EX-1-HT0.lancs.local>
References: <CANVKczMK-+wQ4CyQ5E19nVXz2mr_3acu0d+X38uHSskHKFmRWw@mail.gmail.com>
	<11dc9e9f92dd441ba067408d0fefc891@EX-1-HT0.lancs.local>
Message-ID: <CANVKczNXW1F10jXnUcM59UDz-a-23sQ0wrXPi_rG8grg+=sCJQ@mail.gmail.com>

On Thu, Aug 18, 2016 at 1:17 PM, Manuel Sp?nola <mspinola10 at gmail.com> wrote:
> Dear Barry,
>
> How I install the package?

 With difficulty...

 First you probably need to be running Linux and have Qgis 2.14 or
higher installed.

 Install the rPython package into R - install.packages("rPython") may
work, or may need you to install some system packages for your
operating system.

 Install the devtools package into R.

 Clone the gitlab repository.You might even want to fork it since I'm
working on the master branch and I break stuff all the time. I'll try
and work in a development branch and try and keep the master branch
fairly clean now:

 git clone git at gitlab.com:b-rowlingson/pqgisr.git
or
 git clone https://gitlab.com/b-rowlingson/pqgisr.git

  It doesn't work as an installed package yet (because I don't like
writing docs for code I'm only 10% certain is going to survive very
long), so use devtools to load it:

  devtools::load_all("./pqgisr")  # or wherever you cloned it to.

  then (if you have the rgdal package)

  init_qgis()
  add_ogr_layer(system.file("vectors/scot_BNG.shp",package="rgdal"))
  qgis

might pop up a map canvas with some scottish regions. Or crash R, or
give a warning about things not being found on your system...

 Successes and failure reports (with error messages, system
configuration, current phase of the moon etc) to the gitlab issue
tracker please!


From edzer.pebesma at uni-muenster.de  Thu Aug 18 15:43:44 2016
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 18 Aug 2016 15:43:44 +0200
Subject: [R-sig-Geo] A Qgis Map Graphics Device for R
In-Reply-To: <CANVKczNXW1F10jXnUcM59UDz-a-23sQ0wrXPi_rG8grg+=sCJQ@mail.gmail.com>
References: <CANVKczMK-+wQ4CyQ5E19nVXz2mr_3acu0d+X38uHSskHKFmRWw@mail.gmail.com>
	<11dc9e9f92dd441ba067408d0fefc891@EX-1-HT0.lancs.local>
	<CANVKczNXW1F10jXnUcM59UDz-a-23sQ0wrXPi_rG8grg+=sCJQ@mail.gmail.com>
Message-ID: <5ea1a253-fa19-c5d2-9aec-6b74cce2516c@uni-muenster.de>

After installing the "pathological" R package, it worked for me!

On 18/08/16 15:09, Barry Rowlingson wrote:
> On Thu, Aug 18, 2016 at 1:17 PM, Manuel Sp?nola <mspinola10 at gmail.com> wrote:
>> Dear Barry,
>>
>> How I install the package?
> 
>  With difficulty...
> 
>  First you probably need to be running Linux and have Qgis 2.14 or
> higher installed.
> 
>  Install the rPython package into R - install.packages("rPython") may
> work, or may need you to install some system packages for your
> operating system.
> 
>  Install the devtools package into R.
> 
>  Clone the gitlab repository.You might even want to fork it since I'm
> working on the master branch and I break stuff all the time. I'll try
> and work in a development branch and try and keep the master branch
> fairly clean now:
> 
>  git clone git at gitlab.com:b-rowlingson/pqgisr.git
> or
>  git clone https://gitlab.com/b-rowlingson/pqgisr.git
> 
>   It doesn't work as an installed package yet (because I don't like
> writing docs for code I'm only 10% certain is going to survive very
> long), so use devtools to load it:
> 
>   devtools::load_all("./pqgisr")  # or wherever you cloned it to.
> 
>   then (if you have the rgdal package)
> 
>   init_qgis()
>   add_ogr_layer(system.file("vectors/scot_BNG.shp",package="rgdal"))
>   qgis
> 
> might pop up a map canvas with some scottish regions. Or crash R, or
> give a warning about things not being found on your system...
> 
>  Successes and failure reports (with error messages, system
> configuration, current phase of the moon etc) to the gitlab issue
> tracker please!
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/
Spatial Statistics Society http://www.spatialstatistics.info

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 490 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20160818/c7ee0743/attachment.bin>

From ludwig-mayerhofer at soziologie.uni-siegen.de  Thu Aug 18 15:47:37 2016
From: ludwig-mayerhofer at soziologie.uni-siegen.de (Ludwig-Mayerhofer, Wolfgang, Prof. Dr.)
Date: Thu, 18 Aug 2016 13:47:37 +0000
Subject: [R-sig-Geo] "Islands" in spatial (area) analysis
Message-ID: <F7873DBFAC2FE548BCDDE1C81F22E80AA3129F0A@mail2.ad.uni-siegen.de>

Dear all,

I'm new to this list, and regrettably I have to  introduce myself with a question which is not necessarily related to R, even though any R-related answer will also help (as I do my spatial analyses mostly with R).

My question is simply: Does anybody know a good (possibly systematic/comprehensive/dedicated/exhaustive) text about the role/problem of "islands", i.e. areas without neighbors, in (area data) spatial analysis? I know that some procedures don't run in the presence of islands, but others do (with the appropriate zero policies), but I'm not always sure whether this means that the results are really meaningful.

I can only occasionally find reference to the "island" problem in the literature (many texts, among which are VERY good texts like those by Bivand et al or Banerjee et al, seem to ignore it entirely), and what little I have found is very superficial (aside remarks etc.). Regrettably, a search on the Internet (such as "islands spatial analysis") is futile, as all you will get are tons of references to the Caribbean, Canary, tropic, Auckland ... you name it... islands.

So any suggestion as to where a more than casual treatment of the topic can be found would be very welcome.

Kind regards

Wolfgang Ludwig-Mayerhofer

----
Prof. Dr. Wolfgang Ludwig-Mayerhofer
Universit?t Siegen/University of Siegen
Philosophische Fakult?t/Faculty of Arts
Adolf-Reichwein-Str. 2
57068 Siegen
Germany

Wolfgang Ludwig-Mayerhofer (2015): Arbeitsmarktpolitik  aus sozialwissenschaft?licher Sicht: Zur Spannung zwischen "Dekommodifizierung" und "Rekommodifizierung". In: Masuch, Peter et al.  (Hrsg.): Grundlagen und Herausforderungen des Sozialstaats (Band2): Bundessozialgericht und Sozialstaatsforschung. Richterliche Wissensgewinnung und Wissenschaft, Berlin, S. 377-393.

Wolfgang Ludwig-Mayerhofer, Olaf Behrend (2015): Enforcing Mobility: Spatial Mobility Under the Regime of Activation, in: Mobilities, 10 (2), S. 326-343. DOI: 10.1080/17450101.2014.898930

Wolfgang Ludwig-Mayerhofer (2014): Bildung zwischen Individualisierung und Exklusion. In: Schnei?der, W. und Kraus, W. (Hrsg.): Indivi?du?alisierung und die Legitimation sozialer Ungleich?heit in der reflexiven Moderne. Opladen: Barbara Budrich, S. 167-192

Wolfgang Ludwig-Mayerhofer, Uta Liebeskind, Ferdinand Gei?ler  (2014): Statistik. Eine Einf?hrung f?r Sozialwissenschaftler, Weinheim: Beltz Juventa, 2014. http://www.beltz.de/produkt_produktdetails/8819-statistik.html


	[[alternative HTML version deleted]]


From dw2116 at outlook.com  Thu Aug 18 15:58:30 2016
From: dw2116 at outlook.com (David Wang)
Date: Thu, 18 Aug 2016 13:58:30 +0000
Subject: [R-sig-Geo] Parallel processing a list of SpatialPoints
In-Reply-To: <4F58C8D16A2DF6F4.87de3c48-c2f1-4e6c-9f1e-42a22fc4b298@mail.outlook.com>
References: <DM5PR11MB15939E5AE9DB2B75CC3488AFCB140@DM5PR11MB1593.namprd11.prod.outlook.com>,
	<FF9DB805FC41CC4E95825A50F6806302B4A98852@challenger.uhd.campus>,
	<DM5PR11MB1593B624B59594159B4A99EBCB140@DM5PR11MB1593.namprd11.prod.outlook.com>,
	<4F58C8D16A2DF6F4.87de3c48-c2f1-4e6c-9f1e-42a22fc4b298@mail.outlook.com>
Message-ID: <DM5PR11MB159353E1DD3F3EE3EA034533CB150@DM5PR11MB1593.namprd11.prod.outlook.com>

Hello Roger,


Thanks for pointing to the excellent RANN package. It considerably speeds up the search for nearest neighbors. Now I'm able to reduce the run time by several folds.


D

________________________________
From: Roger Bivand <Roger.Bivand at nhh.no>
Sent: Thursday, August 18, 2016 1:55:18 AM
To: David Wang; Hodgess, Erin; r-sig-geo
Subject: Re: [R-sig-Geo] Parallel processing a list of SpatialPoints


Consider using the RANN package if your points are represented by projected (planar) coordinates.

Hope this helps,

Roger Bivand
Norwegian School of Economics
Bergen, Norway

Fra: David Wang
Sendt: torsdag 18. august, 00.20
Emne: Re: [R-sig-Geo] Parallel processing a list of SpatialPoints
Til: Hodgess, Erin, r-sig-geo

Hi Erin et al., Thanks for the questions. I use Windows 7 on a 8-core PC. I also have access to a Linux cluster. But in most cases, I have found using multiple cores with doParallel and foreach on the PC gives me sufficient speed-up. I'd not bother with mpi in this case either. D ________________________________ From: Hodgess, Erin Sent: Wednesday, August 17, 2016 6:11:31 PM To: David Wang; r-sig-geo Subject: RE: Parallel processing a list of SpatialPoints Do you know Mpi, by any chance, please? What kind of machine/operating system are you using, please? Thanks, Erin Erin M. Hodgess Associate Professor Department of Mathematics and Statistics University of Houston - Downtown mailto: hodgesse at uhd.edu ________________________________________ From: R-sig-Geo [r-sig-geo-bounces at r-project.org] on behalf of David Wang [dw2116 at outlook.com] Sent: Wednesday, August 17, 2016 5:00 PM To: r-sig-geo Subject: [R-sig-Geo] Parallel processing a list of SpatialPoints Hello, I have a list of SpatialPointsDataFrame objects that represent feature centers along the time axis. For example, let's say the list is centers. centers[[1]] are the points at t = 1, centers[[2]] are the points at t = 2, and so on. Now for every point at t, I need to link it to, if any, the nearest point within a search radius at the next time step t + 1. The procedure is applied to all time steps, and the result are tracks that connect selected feature centers in time. I have implemented a solution using igraph package, with every center represented by a vertex and every link by an edge. This way, tracks are simply connected components of the graph. Now because the number of centers and links are quite large, the algorithm takes a while to run. But since finding the nearest neighbors between t and t + 1 and between t + 1 and t + 2 are independent, I think parallel processing should be possible, although I haven't figured out how. Does anyone here happen to have a pointer or ! two? I work on a multicore PC. Here is my code snippet: g 0 & length(V(g)[id == k]) > 0) { v1

	[[alternative HTML version deleted]]


From malNamalJa at gmx.de  Thu Aug 18 16:12:18 2016
From: malNamalJa at gmx.de (=?UTF-8?Q?=22Jannes_M=C3=BCnchow=22?=)
Date: Thu, 18 Aug 2016 16:12:18 +0200
Subject: [R-sig-Geo] A Qgis Map Graphics Device for R
Message-ID: <trinity-5a984db7-98c8-4797-8823-812814893aa2-1471529538293@3capp-gmx-bs51>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20160818/e9eebae5/attachment.html>

From englishchristophera at gmail.com  Mon Aug 22 06:42:28 2016
From: englishchristophera at gmail.com (chris english)
Date: Mon, 22 Aug 2016 07:42:28 +0300
Subject: [R-sig-Geo] "Islands" in spatial (area) analysis
In-Reply-To: <F7873DBFAC2FE548BCDDE1C81F22E80AA3129F0A@mail2.ad.uni-siegen.de>
References: <F7873DBFAC2FE548BCDDE1C81F22E80AA3129F0A@mail2.ad.uni-siegen.de>
Message-ID: <CAASFQpQNoK1DGLe4fuwOwdcVpkLsUOrE8hjc=M-4PjMZ+dKADQ@mail.gmail.com>

Wolfgang,

The lake on the island in the bigger lake is a topological construct, and I
believe was covered by Bivand et al (1st ed.) A search of 'topology island
hole' or 'topology island hole GIS analysis' will get you out of the
Caribbean and into some serious papars. 'Gdal island hole' will direct
toward how things are generally handled in R.

Cheers,

Chris

On Thu, Aug 18, 2016 at 4:47 PM, Ludwig-Mayerhofer, Wolfgang, Prof. Dr. <
ludwig-mayerhofer at soziologie.uni-siegen.de> wrote:

> Dear all,
>
> I'm new to this list, and regrettably I have to  introduce myself with a
> question which is not necessarily related to R, even though any R-related
> answer will also help (as I do my spatial analyses mostly with R).
>
> My question is simply: Does anybody know a good (possibly
> systematic/comprehensive/dedicated/exhaustive) text about the
> role/problem of "islands", i.e. areas without neighbors, in (area data)
> spatial analysis? I know that some procedures don't run in the presence of
> islands, but others do (with the appropriate zero policies), but I'm not
> always sure whether this means that the results are really meaningful.
>
> I can only occasionally find reference to the "island" problem in the
> literature (many texts, among which are VERY good texts like those by
> Bivand et al or Banerjee et al, seem to ignore it entirely), and what
> little I have found is very superficial (aside remarks etc.). Regrettably,
> a search on the Internet (such as "islands spatial analysis") is futile, as
> all you will get are tons of references to the Caribbean, Canary, tropic,
> Auckland ... you name it... islands.
>
> So any suggestion as to where a more than casual treatment of the topic
> can be found would be very welcome.
>
> Kind regards
>
> Wolfgang Ludwig-Mayerhofer
>
> ----
> Prof. Dr. Wolfgang Ludwig-Mayerhofer
> Universit?t Siegen/University of Siegen
> Philosophische Fakult?t/Faculty of Arts
> Adolf-Reichwein-Str. 2
> 57068 Siegen
> Germany
>
> Wolfgang Ludwig-Mayerhofer (2015): Arbeitsmarktpolitik  aus
> sozialwissenschaft?licher Sicht: Zur Spannung zwischen "Dekommodifizierung"
> und "Rekommodifizierung". In: Masuch, Peter et al.  (Hrsg.): Grundlagen und
> Herausforderungen des Sozialstaats (Band2): Bundessozialgericht und
> Sozialstaatsforschung. Richterliche Wissensgewinnung und Wissenschaft,
> Berlin, S. 377-393.
>
> Wolfgang Ludwig-Mayerhofer, Olaf Behrend (2015): Enforcing Mobility:
> Spatial Mobility Under the Regime of Activation, in: Mobilities, 10 (2), S.
> 326-343. DOI: 10.1080/17450101.2014.898930
>
> Wolfgang Ludwig-Mayerhofer (2014): Bildung zwischen Individualisierung und
> Exklusion. In: Schnei?der, W. und Kraus, W. (Hrsg.): Indivi?du?alisierung
> und die Legitimation sozialer Ungleich?heit in der reflexiven Moderne.
> Opladen: Barbara Budrich, S. 167-192
>
> Wolfgang Ludwig-Mayerhofer, Uta Liebeskind, Ferdinand Gei?ler  (2014):
> Statistik. Eine Einf?hrung f?r Sozialwissenschaftler, Weinheim: Beltz
> Juventa, 2014. http://www.beltz.de/produkt_produktdetails/8819-statistik.
> html
>
>
>         [[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Mon Aug 22 08:20:05 2016
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 22 Aug 2016 08:20:05 +0200
Subject: [R-sig-Geo] "Islands" in spatial (area) analysis
In-Reply-To: <CAASFQpQNoK1DGLe4fuwOwdcVpkLsUOrE8hjc=M-4PjMZ+dKADQ@mail.gmail.com>
References: <F7873DBFAC2FE548BCDDE1C81F22E80AA3129F0A@mail2.ad.uni-siegen.de>
	<CAASFQpQNoK1DGLe4fuwOwdcVpkLsUOrE8hjc=M-4PjMZ+dKADQ@mail.gmail.com>
Message-ID: <alpine.LFD.2.20.1608220810020.4426@reclus.nhh.no>

Wolfgang,

I think that you were more interested in the consequences of missing 
neighbours for the analysis of areal data. I did look at this 15 years 
ago with Boris Portnov, in the context of ESDA:

@incollection{bivand+portnov:04,
   author = {R. S. Bivand and B. A. Portnov},
   editor = {L. Anselin and R. J. G. M. Florax and S. J. Rey},
   title = {Exploring spatial data analysis techniques using {\RR}: the 
case of observations with no neighbours},
   booktitle = {Advances in Spatial Econometrics: Methodology, Tools, 
Applications},
   year = {2004},
   publisher = {Springer},
   address = {Berlin},
   pages = {121--142}
}

There are oddities in the Moran scatterplot, and also in mapping the 
graph-based neighbour representation into matrix form, say with the 
spatial lag of a no-neighbour observation's value being zero (for 
zero.policy=TRUE). That paper was the basis for the zero.policy= 
framework. There are other consequences that you've found with respect to 
the number of subgraphs, which may or may not break formal assumptions of 
analysis methods. In addition, we don't know how far the broken 
assumptions actually matter. This would probably be a good candidate for 
proper study including simulation.

Best wishes,

Roger

On Mon, 22 Aug 2016, chris english wrote:

> Wolfgang,
>
> The lake on the island in the bigger lake is a topological construct, and I
> believe was covered by Bivand et al (1st ed.) A search of 'topology island
> hole' or 'topology island hole GIS analysis' will get you out of the
> Caribbean and into some serious papars. 'Gdal island hole' will direct
> toward how things are generally handled in R.
>
> Cheers,
>
> Chris
>
> On Thu, Aug 18, 2016 at 4:47 PM, Ludwig-Mayerhofer, Wolfgang, Prof. Dr. <
> ludwig-mayerhofer at soziologie.uni-siegen.de> wrote:
>
>> Dear all,
>>
>> I'm new to this list, and regrettably I have to  introduce myself with a
>> question which is not necessarily related to R, even though any R-related
>> answer will also help (as I do my spatial analyses mostly with R).
>>
>> My question is simply: Does anybody know a good (possibly
>> systematic/comprehensive/dedicated/exhaustive) text about the
>> role/problem of "islands", i.e. areas without neighbors, in (area data)
>> spatial analysis? I know that some procedures don't run in the presence of
>> islands, but others do (with the appropriate zero policies), but I'm not
>> always sure whether this means that the results are really meaningful.
>>
>> I can only occasionally find reference to the "island" problem in the
>> literature (many texts, among which are VERY good texts like those by
>> Bivand et al or Banerjee et al, seem to ignore it entirely), and what
>> little I have found is very superficial (aside remarks etc.). Regrettably,
>> a search on the Internet (such as "islands spatial analysis") is futile, as
>> all you will get are tons of references to the Caribbean, Canary, tropic,
>> Auckland ... you name it... islands.
>>
>> So any suggestion as to where a more than casual treatment of the topic
>> can be found would be very welcome.
>>
>> Kind regards
>>
>> Wolfgang Ludwig-Mayerhofer
>>
>> ----
>> Prof. Dr. Wolfgang Ludwig-Mayerhofer
>> Universit?t Siegen/University of Siegen
>> Philosophische Fakult?t/Faculty of Arts
>> Adolf-Reichwein-Str. 2
>> 57068 Siegen
>> Germany
>>
>> Wolfgang Ludwig-Mayerhofer (2015): Arbeitsmarktpolitik  aus
>> sozialwissenschaft?licher Sicht: Zur Spannung zwischen "Dekommodifizierung"
>> und "Rekommodifizierung". In: Masuch, Peter et al.  (Hrsg.): Grundlagen und
>> Herausforderungen des Sozialstaats (Band2): Bundessozialgericht und
>> Sozialstaatsforschung. Richterliche Wissensgewinnung und Wissenschaft,
>> Berlin, S. 377-393.
>>
>> Wolfgang Ludwig-Mayerhofer, Olaf Behrend (2015): Enforcing Mobility:
>> Spatial Mobility Under the Regime of Activation, in: Mobilities, 10 (2), S.
>> 326-343. DOI: 10.1080/17450101.2014.898930
>>
>> Wolfgang Ludwig-Mayerhofer (2014): Bildung zwischen Individualisierung und
>> Exklusion. In: Schnei?der, W. und Kraus, W. (Hrsg.): Indivi?du?alisierung
>> und die Legitimation sozialer Ungleich?heit in der reflexiven Moderne.
>> Opladen: Barbara Budrich, S. 167-192
>>
>> Wolfgang Ludwig-Mayerhofer, Uta Liebeskind, Ferdinand Gei?ler  (2014):
>> Statistik. Eine Einf?hrung f?r Sozialwissenschaftler, Weinheim: Beltz
>> Juventa, 2014. http://www.beltz.de/produkt_produktdetails/8819-statistik.
>> html
>>
>>
>>         [[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
http://depsy.org/person/434412

From anita.morales at gmail.com  Mon Aug 22 17:13:11 2016
From: anita.morales at gmail.com (Anita Morales)
Date: Mon, 22 Aug 2016 16:13:11 +0100
Subject: [R-sig-Geo] lm.morantest
Message-ID: <CA+8Y_mbSTQbGqYs+6AtWtyBvQek63HxuN19P=+9BRK3UWBP7Dg@mail.gmail.com>

Dear all,

I'm relative new to the list, being this my first question. I have a
problem when trying to estimate a Moran test for residuals in the second
level when there are missing areas. My dataset contains information on
individual nested in cities, the shapefile contains information of the 342
cities, while my dataset contains individuals that belong to 288 cities.

I've used multilevel models to estimate area level variation and now I want
to test the autocorrelation for the residuals in the second level (cities).
I'm using "lm.morantest"; however, I'm getting an error about "areas with
no neighbours" (I already checked that and I'm quite sure that all my areas
are connected). I think the problem may be caused by the missing data
(residuals) for some areas. Since the listw object created, based on the
shape file, contains neighbourhood weights for 342 cities, while from the
estimated multilevel model, I've got residuals data for only 288 cities.

Could you please advise me as to how to test for autocorrelation in the
residuals when there are missing data?
--
Ana

	[[alternative HTML version deleted]]


From dexter.locke at gmail.com  Mon Aug 22 17:35:33 2016
From: dexter.locke at gmail.com (Dexter Locke)
Date: Mon, 22 Aug 2016 11:35:33 -0400
Subject: [R-sig-Geo] lm.morantest
In-Reply-To: <CA+8Y_mbSTQbGqYs+6AtWtyBvQek63HxuN19P=+9BRK3UWBP7Dg@mail.gmail.com>
References: <CA+8Y_mbSTQbGqYs+6AtWtyBvQek63HxuN19P=+9BRK3UWBP7Dg@mail.gmail.com>
Message-ID: <CAA=SVwECEiPzSCge93p0bQ6D-Y5neoQ0pgZ0n7KVEAe7a+Fpag@mail.gmail.com>

Hi Ana,

Maybe you need to use the zero.policy = T option when creating your weights
matrix? Alternatively, consider a different style of weights that will
surely create connections.

Since your data are multi-level, consider also the ICC (Intraclass
Correlation Coefficient).

The Moran's I test of the residuals and ICC will help determine the degree
of spatial autocorrelation, and hierarchical correlation, respectively.

HTH,
Dexter



On Mon, Aug 22, 2016 at 11:13 AM, Anita Morales <anita.morales at gmail.com>
wrote:

> Dear all,
>
> I'm relative new to the list, being this my first question. I have a
> problem when trying to estimate a Moran test for residuals in the second
> level when there are missing areas. My dataset contains information on
> individual nested in cities, the shapefile contains information of the 342
> cities, while my dataset contains individuals that belong to 288 cities.
>
> I've used multilevel models to estimate area level variation and now I want
> to test the autocorrelation for the residuals in the second level (cities).
> I'm using "lm.morantest"; however, I'm getting an error about "areas with
> no neighbours" (I already checked that and I'm quite sure that all my areas
> are connected). I think the problem may be caused by the missing data
> (residuals) for some areas. Since the listw object created, based on the
> shape file, contains neighbourhood weights for 342 cities, while from the
> estimated multilevel model, I've got residuals data for only 288 cities.
>
> Could you please advise me as to how to test for autocorrelation in the
> residuals when there are missing data?
> --
> Ana
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From mspinola10 at gmail.com  Thu Aug 25 14:01:37 2016
From: mspinola10 at gmail.com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Thu, 25 Aug 2016 06:01:37 -0600
Subject: [R-sig-Geo] How to do square buffers around spatial points
Message-ID: <CABkCotTaq7p8o9kzfih5rX57dEnJzvOWgHCnt6jCYc_+M1xrUw@mail.gmail.com>

Dear list members,

Ho can I do square buffers around spatial points?

Best,

Manuel

-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From b.rowlingson at lancaster.ac.uk  Thu Aug 25 15:11:58 2016
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Thu, 25 Aug 2016 14:11:58 +0100
Subject: [R-sig-Geo] How to do square buffers around spatial points
In-Reply-To: <CABkCotTaq7p8o9kzfih5rX57dEnJzvOWgHCnt6jCYc_+M1xrUw@mail.gmail.com>
References: <CABkCotTaq7p8o9kzfih5rX57dEnJzvOWgHCnt6jCYc_+M1xrUw@mail.gmail.com>
Message-ID: <CANVKczNtFtZztLLPU-UB1Y7Gn-XpGK8fYJzXak=6DnqK7AFMOw@mail.gmail.com>

2016-08-25 13:01 GMT+01:00 Manuel Sp?nola <mspinola10 at gmail.com>:
> Dear list members,
>
> Ho can I do square buffers around spatial points?

Break it down:

1. For each point compute the coordinates of the four corners of the
square by adding half the width of your square.
2. Construct a Polygon from those four points for each of your source points.
3. Build a SpatialPolygons object from all your Polygons.

How far can you get with it now?

Barry


From villers.alexandre at gmail.com  Thu Aug 25 15:17:06 2016
From: villers.alexandre at gmail.com (Alexandre Villers)
Date: Thu, 25 Aug 2016 15:17:06 +0200
Subject: [R-sig-Geo] How to do square buffers around spatial points
In-Reply-To: <CANVKczNtFtZztLLPU-UB1Y7Gn-XpGK8fYJzXak=6DnqK7AFMOw@mail.gmail.com>
References: <CABkCotTaq7p8o9kzfih5rX57dEnJzvOWgHCnt6jCYc_+M1xrUw@mail.gmail.com>
	<CANVKczNtFtZztLLPU-UB1Y7Gn-XpGK8fYJzXak=6DnqK7AFMOw@mail.gmail.com>
Message-ID: <CAFrtd2OxK8ddyZi2XSUD3mzz1h3yEAY-XranMCmSuNNkUi_HWg@mail.gmail.com>

You can try the rgeos::gBuffer() with capStyle='SQUARE'
p<-SpatialPoints(matrix(c(1,1), ncol=2))
plot(p)
plot(gBuffer(p, capStyle="SQUARE",width=0.1), add=T)

Would that fit you ?

regards

Alex

	[[alternative HTML version deleted]]


From b.rowlingson at lancaster.ac.uk  Thu Aug 25 15:36:08 2016
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Thu, 25 Aug 2016 14:36:08 +0100
Subject: [R-sig-Geo] How to do square buffers around spatial points
In-Reply-To: <CANVKczNtFtZztLLPU-UB1Y7Gn-XpGK8fYJzXak=6DnqK7AFMOw@mail.gmail.com>
References: <CABkCotTaq7p8o9kzfih5rX57dEnJzvOWgHCnt6jCYc_+M1xrUw@mail.gmail.com>
	<CANVKczNtFtZztLLPU-UB1Y7Gn-XpGK8fYJzXak=6DnqK7AFMOw@mail.gmail.com>
Message-ID: <CANVKczOpLuOcBceguW2RUFbwY72Mmcc1GP0Ft+-UDO0O0SwmMg@mail.gmail.com>

Here's a one-liner:

# for some SpatialPointsDataFrame `d`, and some half-width `w`, this
produces a set of square SpatialPolygons
# with square height and width equal to 2*w:

polys = SpatialPolygons(apply(apply(coordinates(d),1,function(r){cbind(r+c(w,w),r+c(w,-w),r+c(-w,-w),r+c(-w,w),r+c(w,w))}),2,function(v){Polygons(list(Polygon(matrix(v,ncol=2,byrow=TRUE))),ID=runif(1))}))

 > plot(polys)
 > plot(d,add=TRUE)

Barry



On Thu, Aug 25, 2016 at 2:11 PM, Barry Rowlingson
<b.rowlingson at lancaster.ac.uk> wrote:
> 2016-08-25 13:01 GMT+01:00 Manuel Sp?nola <mspinola10 at gmail.com>:
>> Dear list members,
>>
>> Ho can I do square buffers around spatial points?
>
> Break it down:
>
> 1. For each point compute the coordinates of the four corners of the
> square by adding half the width of your square.
> 2. Construct a Polygon from those four points for each of your source points.
> 3. Build a SpatialPolygons object from all your Polygons.
>
> How far can you get with it now?
>
> Barry


From mspinola10 at gmail.com  Thu Aug 25 15:38:35 2016
From: mspinola10 at gmail.com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Thu, 25 Aug 2016 07:38:35 -0600
Subject: [R-sig-Geo] How to do square buffers around spatial points
In-Reply-To: <CANVKczOpLuOcBceguW2RUFbwY72Mmcc1GP0Ft+-UDO0O0SwmMg@mail.gmail.com>
References: <CABkCotTaq7p8o9kzfih5rX57dEnJzvOWgHCnt6jCYc_+M1xrUw@mail.gmail.com>
	<CANVKczNtFtZztLLPU-UB1Y7Gn-XpGK8fYJzXak=6DnqK7AFMOw@mail.gmail.com>
	<CANVKczOpLuOcBceguW2RUFbwY72Mmcc1GP0Ft+-UDO0O0SwmMg@mail.gmail.com>
Message-ID: <CABkCotQipAmQO57=0Nqd9XFzEYJuD9RuYtkE8XcdWdw7WAOaOg@mail.gmail.com>

Thank you very much for both answers.

Manuel

2016-08-25 7:36 GMT-06:00 Barry Rowlingson <b.rowlingson at lancaster.ac.uk>:

> Here's a one-liner:
>
> # for some SpatialPointsDataFrame `d`, and some half-width `w`, this
> produces a set of square SpatialPolygons
> # with square height and width equal to 2*w:
>
> polys = SpatialPolygons(apply(apply(coordinates(d),1,function(r){
> cbind(r+c(w,w),r+c(w,-w),r+c(-w,-w),r+c(-w,w),r+c(w,w))}),2,
> function(v){Polygons(list(Polygon(matrix(v,ncol=2,byrow=
> TRUE))),ID=runif(1))}))
>
>  > plot(polys)
>  > plot(d,add=TRUE)
>
> Barry
>
>
>
> On Thu, Aug 25, 2016 at 2:11 PM, Barry Rowlingson
> <b.rowlingson at lancaster.ac.uk> wrote:
> > 2016-08-25 13:01 GMT+01:00 Manuel Sp?nola <mspinola10 at gmail.com>:
> >> Dear list members,
> >>
> >> Ho can I do square buffers around spatial points?
> >
> > Break it down:
> >
> > 1. For each point compute the coordinates of the four corners of the
> > square by adding half the width of your square.
> > 2. Construct a Polygon from those four points for each of your source
> points.
> > 3. Build a SpatialPolygons object from all your Polygons.
> >
> > How far can you get with it now?
> >
> > Barry
>



-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From tim.howard at dec.ny.gov  Thu Aug 25 22:44:02 2016
From: tim.howard at dec.ny.gov (Howard, Tim G (DEC))
Date: Thu, 25 Aug 2016 20:44:02 +0000
Subject: [R-sig-Geo] raster:::stack(), missing value where TRUE/FALSE needed
Message-ID: <SN1PR09MB1071ED446CD060D0272BD11FA8ED0@SN1PR09MB1071.namprd09.prod.outlook.com>

All,
I'm stymied by this, I expect there is a simple solution. I am trying to stack/brick some very large rasters (26 GB in native R [.gri] format!). But the error does not imply there's a problem with the raster size.  AND, my stack calls work with a crop() of the rasters, as follows :

### first try, has always worked in the past

> library(raster)
> pathToRas <- "G:/test/nativeR"
> pathToBrick <- "G:/test/brick"
> raslist <- list.files(path = pathToRas, pattern = ".grd$")
> gridlist<-as.list(paste(pathToRas,raslist,sep = "/"))
> nm <- substr(raslist,1,nchar(raslist) - 4)
> names(gridlist)<-nm
> gridlist
$canopy_1cell
[1] "G:/test/nativeR/canopy_1cell.grd"

$shrubscrub_10
[1] "G:/test/nativeR/shrubscrub_10.grd"

> envBrick <- brick(stack(gridlist),filename = paste(pathToBrick,"/brick.grd",sep = ""))
Error in if (common.len == 1L) unlist(x, recursive = FALSE) else if (common.len >  : 
  missing value where TRUE/FALSE needed


##### second attempt, load as rasters first

> r1 <- raster(gridlist[[1]])
> r2 <- raster(gridlist[[2]])
> s <- stack(r1, r2)
Error in if (common.len == 1L) unlist(x, recursive = FALSE) else if (common.len >  : 
  missing value where TRUE/FALSE needed


#### third attempt, crop them, write them, then use exactly the same call to create the brick. Works!

> cropExtent <- extent(1950000, 2200000, 2815000, 3050000)
> r1crop <- crop(r1, cropExtent)
> r2crop <- crop(r2, cropExtent)
> writeRaster(r1crop, filename = paste(pathToBrick,"/r1crop", sep=""), format = "raster")
> writeRaster(r2crop, filename = paste(pathToBrick,"/r2crop", sep=""), format = "raster")
> cropgridlist <- as.list(c(paste(pathToBrick,"r1crop", sep="/"), paste(pathToBrick,"r2crop", sep="/")))
> names(cropgridlist) <- c("r1crop","r2crop")
> envBrick <- brick(stack(cropgridlist),filename = paste(pathToBrick,"cropBrick.grd",sep = "/"))
>
> envBrick
class       : RasterBrick 
dimensions  : 6766, 8333, 56381078, 2  (nrow, ncol, ncell, nlayers)
resolution  : 30, 30  (x, y)
extent      : 1950015, 2200005, 2815005, 3017985  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs +ellps=GRS80 +towgs84=0,0,0 
data source : G:\test \brick\cropBrick.grd 
names       :   r1crop,   r2crop 
min values  :        0,        0 
max values  : 92.55556,  1.00000 

>
#### here's the traceback() if that is useful
10: simplify2array(answer, higher = (simplify == "array"))
9: sapply(1:nl, function(i) {
       r <- x at layers[[i]]
       r at data@names <- value[i]
       r
   })
8: `names<-`(`*tmp*`, value = c("Canopy_1cell", "Shrubscrub_10"))
7: `names<-`(`*tmp*`, value = c("Canopy_1cell", "Shrubscrub_10"))
6: .local(x, ...)
5: stack(.makeRasterList(rlist))
4: stack(.makeRasterList(rlist))
3: .local(x, ...)
2: stack(r1, r2)
1: stack(r1, r2)


> sessionInfo()
R version 3.3.1 (2016-06-21)
Platform: i386-w64-mingw32/i386 (32-bit)
Running under: Windows 7 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] raster_2.5-8 sp_1.2-1    

loaded via a namespace (and not attached):
[1] rgdal_1.1-3     parallel_3.3.1  tools_3.3.1     Rcpp_0.12.3     grid_3.3.1      lattice_0.20-33

Thanks in advance for any pointers. 
Tim


From mspinola10 at gmail.com  Thu Aug 25 23:17:32 2016
From: mspinola10 at gmail.com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Thu, 25 Aug 2016 15:17:32 -0600
Subject: [R-sig-Geo] How to read .gpkg (Geopackage) files in R
Message-ID: <CABkCotQ08ZCJpFwEugzJWPKxXRi=QONvOX=Q0KKrVOYWG3Jhaw@mail.gmail.com>

Dear list members,

How can I read a .gpkg (Geopackage) file in R?

The name of my file is: parcelas.gpkg

Best,

-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From mdsumner at gmail.com  Fri Aug 26 00:40:36 2016
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 25 Aug 2016 22:40:36 +0000
Subject: [R-sig-Geo] How to read .gpkg (Geopackage) files in R
In-Reply-To: <CABkCotQ08ZCJpFwEugzJWPKxXRi=QONvOX=Q0KKrVOYWG3Jhaw@mail.gmail.com>
References: <CABkCotQ08ZCJpFwEugzJWPKxXRi=QONvOX=Q0KKrVOYWG3Jhaw@mail.gmail.com>
Message-ID: <CAAcGz9-Swcr=t3fj2VVhmL1tmDE+k=NJC6u8Qjx8dUy1B-gqFQ@mail.gmail.com>

On Fri, 26 Aug 2016 at 07:18 Manuel Sp?nola <mspinola10 at gmail.com> wrote:

> Dear list members,
>
> How can I read a .gpkg (Geopackage) file in R?
>
>
You're in luck because it's extremely easy.

library(rgdal)
layers <- ogrListLayers("parcelas.gpkg")

## you may have more than one layer
x <- readOGR("parcelas.gpkg", layers[1])

## some kind of *DataFrame
print(class(x))
plot(x)

Cheers, Mike.

Read on only  if you're interested in more details about GeoPackage.

Geopackage is also extremely extensible since it's built right on top of
SQLite.  If you are keen, you can investigate the contents with
dplyr/RSQLite - though there's no need if sp/rgdal does what you want:

library(dplyr)
library(RSQLite)
db <- src_sql("parcelas.gpkg")

print(db)  ## what tabes are in there?

tbl_df(db, "some_table_name")

The geometry is in one of the tables in WKB form, so it's not "tables all
the way down" but still pretty useful.



> The name of my file is: parcelas.gpkg
>
> Best,
>
> --
> *Manuel Sp?nola, Ph.D.*
> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
> Universidad Nacional
> Apartado 1350-3000
> Heredia
> COSTA RICA
> mspinola at una.cr <mspinola at una.ac.cr>
> mspinola10 at gmail.com
> Tel?fono: (506) 8706 - 4662
> Personal website: Lobito de r?o <
> https://sites.google.com/site/lobitoderio/>
> Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From mspinola10 at gmail.com  Fri Aug 26 02:01:06 2016
From: mspinola10 at gmail.com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Thu, 25 Aug 2016 18:01:06 -0600
Subject: [R-sig-Geo] How to read .gpkg (Geopackage) files in R
In-Reply-To: <CAAcGz9-Swcr=t3fj2VVhmL1tmDE+k=NJC6u8Qjx8dUy1B-gqFQ@mail.gmail.com>
References: <CABkCotQ08ZCJpFwEugzJWPKxXRi=QONvOX=Q0KKrVOYWG3Jhaw@mail.gmail.com>
	<CAAcGz9-Swcr=t3fj2VVhmL1tmDE+k=NJC6u8Qjx8dUy1B-gqFQ@mail.gmail.com>
Message-ID: <CABkCotQ7LgJGYtwTEwaU5T_iZydasD2LkbdHppidhcj5x9Yzhw@mail.gmail.com>

Thank you very much Michael.

Manuel

2016-08-25 16:40 GMT-06:00 Michael Sumner <mdsumner at gmail.com>:

>
>
> On Fri, 26 Aug 2016 at 07:18 Manuel Sp?nola <mspinola10 at gmail.com> wrote:
>
>> Dear list members,
>>
>> How can I read a .gpkg (Geopackage) file in R?
>>
>>
> You're in luck because it's extremely easy.
>
> library(rgdal)
> layers <- ogrListLayers("parcelas.gpkg")
>
> ## you may have more than one layer
> x <- readOGR("parcelas.gpkg", layers[1])
>
> ## some kind of *DataFrame
> print(class(x))
> plot(x)
>
> Cheers, Mike.
>
> Read on only  if you're interested in more details about GeoPackage.
>
> Geopackage is also extremely extensible since it's built right on top of
> SQLite.  If you are keen, you can investigate the contents with
> dplyr/RSQLite - though there's no need if sp/rgdal does what you want:
>
> library(dplyr)
> library(RSQLite)
> db <- src_sql("parcelas.gpkg")
>
> print(db)  ## what tabes are in there?
>
> tbl_df(db, "some_table_name")
>
> The geometry is in one of the tables in WKB form, so it's not "tables all
> the way down" but still pretty useful.
>
>
>
>> The name of my file is: parcelas.gpkg
>>
>> Best,
>>
>> --
>> *Manuel Sp?nola, Ph.D.*
>> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
>> Universidad Nacional
>> Apartado 1350-3000
>> Heredia
>> COSTA RICA
>> mspinola at una.cr <mspinola at una.ac.cr>
>> mspinola10 at gmail.com
>> Tel?fono: (506) 8706 - 4662
>> Personal website: Lobito de r?o <https://sites.google.com/
>> site/lobitoderio/>
>> Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> --
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> Kingston Tasmania 7050 Australia
>
>


-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From lukaslehnert at googlemail.com  Fri Aug 26 12:23:57 2016
From: lukaslehnert at googlemail.com (Lukas Lehnert)
Date: Fri, 26 Aug 2016 12:23:57 +0200
Subject: [R-sig-Geo] Error when combining raster and foreach packages
Message-ID: <4399023.vQI23rZgax@pc19329>

Dear list members,

I tried to process a large GeoTIFF file in a blockwise manner (following the 
vignette "Writing functions for large raster files").

I then combined the approach with a "foreeach"-loop to parallelize the 
calculation on the raster data:

library(raster)
library(doMC)
library(foreach)
registerDoMC(3)

ra <- raster("dem.tif")
tr <- blockSize(ra)
outfile <- "test_2.tif" 
res <- writeStart(raster(ra), outfile, overwrite = TRUE)
for (i in 1:tr$n) 
{
  v <- getValuesBlock(ra, row=tr$row[i], nrows=tr$nrows[i])

  v2 <- foreach(i=1:length(v), .combine = 'c') %dopar% {
     i*(-1)
  }
  res <- writeValues(res, v2, tr$row[i])
  cat(round(i/tr$n*100, 2), "%\n")
}
res <- writeStop(res)

However, I get errors and warnings like the following ones:
ERROR 1: /tmp/Rtmpz6qEOE/xortest_2.tif:Failed to allocate memory for to read 
TIFF directory (0 elements of 12 bytes each)            
ERROR 1: TIFFReadDirectory:Failed to read directory at offset 4639232 
Warning 1: TIFFFetchNormalTag:ASCII value for tag "GeoASCIIParams" contains 
null byte in value; value incorrectly truncated during reading due to 
implementation limitations 

The errors are different each time I restart the process. If I do not use 
foreach but a common for-loop, the errors do not occur. I tried several raster 
files (large ones and small ones) and two different computers, but the problem 
remains.

Does somebody has any idea, how to solve this problem?

Thank you in advance

Lukas


From loic.dutrieux at wur.nl  Fri Aug 26 13:02:33 2016
From: loic.dutrieux at wur.nl (=?UTF-8?Q?Lo=c3=afc_Dutrieux?=)
Date: Fri, 26 Aug 2016 13:02:33 +0200
Subject: [R-sig-Geo] Error when combining raster and foreach packages
In-Reply-To: <4399023.vQI23rZgax@pc19329>
References: <4399023.vQI23rZgax@pc19329>
Message-ID: <dce24498-01b5-ff68-800f-703028def847@wur.nl>

Hi Lukas,

What does your function do? Can you use the built-in parallel 
functionalities of the raster package instead? See ?beginCluster

Cheers,
Lo?c

On 26/08/2016 12:23, Lukas Lehnert via R-sig-Geo wrote:
> Dear list members,
>
> I tried to process a large GeoTIFF file in a blockwise manner (following the
> vignette "Writing functions for large raster files").
>
> I then combined the approach with a "foreeach"-loop to parallelize the
> calculation on the raster data:
>
> library(raster)
> library(doMC)
> library(foreach)
> registerDoMC(3)
>
> ra <- raster("dem.tif")
> tr <- blockSize(ra)
> outfile <- "test_2.tif"
> res <- writeStart(raster(ra), outfile, overwrite = TRUE)
> for (i in 1:tr$n)
> {
>   v <- getValuesBlock(ra, row=tr$row[i], nrows=tr$nrows[i])
>
>   v2 <- foreach(i=1:length(v), .combine = 'c') %dopar% {
>      i*(-1)
>   }
>   res <- writeValues(res, v2, tr$row[i])
>   cat(round(i/tr$n*100, 2), "%\n")
> }
> res <- writeStop(res)
>
> However, I get errors and warnings like the following ones:
> ERROR 1: /tmp/Rtmpz6qEOE/xortest_2.tif:Failed to allocate memory for to read
> TIFF directory (0 elements of 12 bytes each)
> ERROR 1: TIFFReadDirectory:Failed to read directory at offset 4639232
> Warning 1: TIFFFetchNormalTag:ASCII value for tag "GeoASCIIParams" contains
> null byte in value; value incorrectly truncated during reading due to
> implementation limitations
>
> The errors are different each time I restart the process. If I do not use
> foreach but a common for-loop, the errors do not occur. I tried several raster
> files (large ones and small ones) and two different computers, but the problem
> remains.
>
> Does somebody has any idea, how to solve this problem?
>
> Thank you in advance
>
> Lukas
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From lukaslehnert at googlemail.com  Fri Aug 26 13:39:51 2016
From: lukaslehnert at googlemail.com (Lukas Lehnert)
Date: Fri, 26 Aug 2016 13:39:51 +0200
Subject: [R-sig-Geo] Error when combining raster and foreach packages
In-Reply-To: <dce24498-01b5-ff68-800f-703028def847@wur.nl>
References: <4399023.vQI23rZgax@pc19329>
	<dce24498-01b5-ff68-800f-703028def847@wur.nl>
Message-ID: <1552442.e4CPz7PVSM@pc19329>

Hi Lo?c,

thank you for your reply and the suggestion. Unfortunately, using the  cluster 
functions in raster is not an option, because I am developing a package which 
may run with raster data but not necessarily. Therefore, I wanted to 
parallelize the stuff in the function of the package and not the loop over the 
raster image.

Cheers

Lukas


Am Freitag, 26. August 2016, 13:02:33 schrieb Lo?c Dutrieux:
> Hi Lukas,
> 
> What does your function do? Can you use the built-in parallel
> functionalities of the raster package instead? See ?beginCluster
> 
> Cheers,
> Lo?c
> 
> On 26/08/2016 12:23, Lukas Lehnert via R-sig-Geo wrote:
> > Dear list members,
> > 
> > I tried to process a large GeoTIFF file in a blockwise manner (following
> > the vignette "Writing functions for large raster files").
> > 
> > I then combined the approach with a "foreeach"-loop to parallelize the
> > calculation on the raster data:
> > 
> > library(raster)
> > library(doMC)
> > library(foreach)
> > registerDoMC(3)
> > 
> > ra <- raster("dem.tif")
> > tr <- blockSize(ra)
> > outfile <- "test_2.tif"
> > res <- writeStart(raster(ra), outfile, overwrite = TRUE)
> > for (i in 1:tr$n)
> > {
> > 
> >   v <- getValuesBlock(ra, row=tr$row[i], nrows=tr$nrows[i])
> >   
> >   v2 <- foreach(i=1:length(v), .combine = 'c') %dopar% {
> >   
> >      i*(-1)
> >   
> >   }
> >   res <- writeValues(res, v2, tr$row[i])
> >   cat(round(i/tr$n*100, 2), "%\n")
> > 
> > }
> > res <- writeStop(res)
> > 
> > However, I get errors and warnings like the following ones:
> > ERROR 1: /tmp/Rtmpz6qEOE/xortest_2.tif:Failed to allocate memory for to
> > read TIFF directory (0 elements of 12 bytes each)
> > ERROR 1: TIFFReadDirectory:Failed to read directory at offset 4639232
> > Warning 1: TIFFFetchNormalTag:ASCII value for tag "GeoASCIIParams"
> > contains
> > null byte in value; value incorrectly truncated during reading due to
> > implementation limitations
> > 
> > The errors are different each time I restart the process. If I do not use
> > foreach but a common for-loop, the errors do not occur. I tried several
> > raster files (large ones and small ones) and two different computers, but
> > the problem remains.
> > 
> > Does somebody has any idea, how to solve this problem?
> > 
> > Thank you in advance
> > 
> > Lukas
> > 
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From dfamaral at usp.br  Fri Aug 26 16:28:35 2016
From: dfamaral at usp.br (dfamaral at usp.br)
Date: Fri, 26 Aug 2016 11:28:35 -0300 (BRT)
Subject: [R-sig-Geo] Spatial weight matrix - inverse distance
Message-ID: <685852605.18447435.1472221715500.JavaMail.root@usp.br>

Dear colleagues, 


I am trying to build an spatial weight matrix type "inverse distance". Searching for some tips in Internet and books, I got this code below and I would like to receive comments from you if it is on the right path: 








AL <- readOGR(dsn=".", "MT_PA_RO_muni") 

names(AL) 

plot(AL) 

coords <- coordinates(AL) 




contnb <- poly2nb(AL, queen = TRUE) 

str(contnb) 




dist <- dnearneigh(coords, d1 = 0, d2 = 380000) 

dlist <- nbdists(dist, coords) 

idlist <- lapply(dlist, function(x) 1/x) 

W <- nb2listw(dist, glist=idlist, style="W") 

W 

attributes(W) 

W$weights 



<blockquote>



</blockquote>

Thank you very much. 


Daniel. 
	[[alternative HTML version deleted]]


From tim.howard at dec.ny.gov  Fri Aug 26 19:19:13 2016
From: tim.howard at dec.ny.gov (Howard, Tim G (DEC))
Date: Fri, 26 Aug 2016 17:19:13 +0000
Subject: [R-sig-Geo] raster:::stack(),
	missing value where TRUE/FALSE needed
Message-ID: <SN1PR09MB1071BDAC679D69E7F8A288FDA8EC0@SN1PR09MB1071.namprd09.prod.outlook.com>

I'm kind of at a loss as to why 

"Error in if (common.len == 1L) unlist(x, recursive = FALSE) else if (common.len :
missing value where TRUE/FALSE needed"

means "your system can't handle such big files" but switching to a computer with Windows 64-bit and 32GB RAM seems to solve the problem. 

I'm all set now. 
Tim

> Date: Thu, 25 Aug 2016 20:44:02 +0000
> From: "Howard, Tim G (DEC)" <tim.howard at dec.ny.gov>
> To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
> Subject: [R-sig-Geo] raster:::stack(), missing value where TRUE/FALSE
>         needed
> Message-ID:
> 
> <SN1PR09MB1071ED446CD060D0272BD11FA8ED0 at SN1PR09MB1071.namprd
> 09.prod.outlook.com>
> 
> Content-Type: text/plain; charset="us-ascii"
> 
> All,
> I'm stymied by this, I expect there is a simple solution. I am trying to
> stack/brick some very large rasters (26 GB in native R [.gri] format!). But the
> error does not imply there's a problem with the raster size.  AND, my stack
> calls work with a crop() of the rasters, as follows :
> 
> ### first try, has always worked in the past
> 
> > library(raster)
> > pathToRas <- "G:/test/nativeR"
> > pathToBrick <- "G:/test/brick"
> > raslist <- list.files(path = pathToRas, pattern = ".grd$")
> > gridlist<-as.list(paste(pathToRas,raslist,sep = "/")) nm <-
> > substr(raslist,1,nchar(raslist) - 4) names(gridlist)<-nm gridlist
> $canopy_1cell
> [1] "G:/test/nativeR/canopy_1cell.grd"
> 
> $shrubscrub_10
> [1] "G:/test/nativeR/shrubscrub_10.grd"
> 
> > envBrick <- brick(stack(gridlist),filename =
> > paste(pathToBrick,"/brick.grd",sep = ""))
> Error in if (common.len == 1L) unlist(x, recursive = FALSE) else if (common.len
> >  :
>   missing value where TRUE/FALSE needed
> 
> 
> ##### second attempt, load as rasters first
> 
> > r1 <- raster(gridlist[[1]])
> > r2 <- raster(gridlist[[2]])
> > s <- stack(r1, r2)
> Error in if (common.len == 1L) unlist(x, recursive = FALSE) else if (common.len
> >  :
>   missing value where TRUE/FALSE needed
> 
> 
> #### third attempt, crop them, write them, then use exactly the same call to
> create the brick. Works!
> 
> > cropExtent <- extent(1950000, 2200000, 2815000, 3050000) r1crop <-
> > crop(r1, cropExtent) r2crop <- crop(r2, cropExtent)
> > writeRaster(r1crop, filename = paste(pathToBrick,"/r1crop", sep=""),
> > format = "raster") writeRaster(r2crop, filename =
> > paste(pathToBrick,"/r2crop", sep=""), format = "raster") cropgridlist
> > <- as.list(c(paste(pathToBrick,"r1crop", sep="/"),
> > paste(pathToBrick,"r2crop", sep="/")))
> > names(cropgridlist) <- c("r1crop","r2crop") envBrick <-
> > brick(stack(cropgridlist),filename =
> > paste(pathToBrick,"cropBrick.grd",sep = "/"))
> >
> > envBrick
> class       : RasterBrick
> dimensions  : 6766, 8333, 56381078, 2  (nrow, ncol, ncell, nlayers) resolution  :
> 30, 30  (x, y)
> extent      : 1950015, 2200005, 2815005, 3017985  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0
> +y_0=0 +datum=NAD83 +units=m +no_defs +ellps=GRS80 +towgs84=0,0,0
> data source : G:\test \brick\cropBrick.grd
> names       :   r1crop,   r2crop
> min values  :        0,        0
> max values  : 92.55556,  1.00000
> 
> >
> #### here's the traceback() if that is useful
> 10: simplify2array(answer, higher = (simplify == "array"))
> 9: sapply(1:nl, function(i) {
>        r <- x at layers[[i]]
>        r at data@names <- value[i]
>        r
>    })
> 8: `names<-`(`*tmp*`, value = c("Canopy_1cell", "Shrubscrub_10"))
> 7: `names<-`(`*tmp*`, value = c("Canopy_1cell", "Shrubscrub_10"))
> 6: .local(x, ...)
> 5: stack(.makeRasterList(rlist))
> 4: stack(.makeRasterList(rlist))
> 3: .local(x, ...)
> 2: stack(r1, r2)
> 1: stack(r1, r2)
> 
> 
> > sessionInfo()
> R version 3.3.1 (2016-06-21)
> Platform: i386-w64-mingw32/i386 (32-bit) Running under: Windows 7 (build
> 7601) Service Pack 1
> 
> locale:
> [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
> States.1252 [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
> [1] raster_2.5-8 sp_1.2-1
> 
> loaded via a namespace (and not attached):
> [1] rgdal_1.1-3     parallel_3.3.1  tools_3.3.1     Rcpp_0.12.3     grid_3.3.1
> lattice_0.20-33
> 
> Thanks in advance for any pointers.
> Tim
> 


From isaquedanielre at hotmail.com  Sat Aug 27 04:07:13 2016
From: isaquedanielre at hotmail.com (Isaque Daniel)
Date: Sat, 27 Aug 2016 02:07:13 +0000
Subject: [R-sig-Geo] How to resample a map using the statistical mode of
 class to fill the new pixel
Message-ID: <SN2PR20MB078477C85AF18FCAB0A1FCD1C9EF0@SN2PR20MB0784.namprd20.prod.outlook.com>

Hi dear all,


I need to resample a tree cover map create by Landsat imagery to the MODIS 250 meters.

If I use the resample function of raster package, it will compute the value based on bilinear or ngb, in this condition the new class map will not answer my expectations.


I loking for a way of resample using the statistical mode to define the value of the pixel of the new map.


Some tip about this?

Thanks
Isaque



------------------------------------------------------------------------------------------------------------------
Agronomist engineer
Master in Remote Sensing - National  Institute for Space Research (INPE) - Brazil
PHD Student in Transport - Bras?lia University (UNB)

	[[alternative HTML version deleted]]


From mel at mbacou.com  Sat Aug 27 04:28:28 2016
From: mel at mbacou.com (Bacou, Melanie)
Date: Fri, 26 Aug 2016 22:28:28 -0400
Subject: [R-sig-Geo] How to resample a map using the statistical mode of
 class to fill the new pixel
In-Reply-To: <SN2PR20MB078477C85AF18FCAB0A1FCD1C9EF0@SN2PR20MB0784.namprd20.prod.outlook.com>
References: <SN2PR20MB078477C85AF18FCAB0A1FCD1C9EF0@SN2PR20MB0784.namprd20.prod.outlook.com>
Message-ID: <4087c432-99a7-f85f-356b-28ee3bb1c8ab@mbacou.com>

Isaque, check this thread on StackExchange:
http://gis.stackexchange.com/questions/177423/r-aggregate-raster-with-mode-function-how-does-it-work

--Mel.


On 8/26/2016 10:07 PM, Isaque Daniel wrote:
> Hi dear all,
>
>
> I need to resample a tree cover map create by Landsat imagery to the MODIS 250 meters.
>
> If I use the resample function of raster package, it will compute the value based on bilinear or ngb, in this condition the new class map will not answer my expectations.
>
>
> I loking for a way of resample using the statistical mode to define the value of the pixel of the new map.
>
>
> Some tip about this?
>
> Thanks
> Isaque
>
>
>
> ------------------------------------------------------------------------------------------------------------------
> Agronomist engineer
> Master in Remote Sensing - National  Institute for Space Research (INPE) - Brazil
> PHD Student in Transport - Bras?lia University (UNB)
>
> 	[[alternative HTML version deleted]]
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From tephilippi at gmail.com  Sat Aug 27 04:43:33 2016
From: tephilippi at gmail.com (Tom Philippi)
Date: Fri, 26 Aug 2016 19:43:33 -0700
Subject: [R-sig-Geo] How to resample a map using the statistical mode of
 class to fill the new pixel
In-Reply-To: <4087c432-99a7-f85f-356b-28ee3bb1c8ab@mbacou.com>
References: <SN2PR20MB078477C85AF18FCAB0A1FCD1C9EF0@SN2PR20MB0784.namprd20.prod.outlook.com>
	<4087c432-99a7-f85f-356b-28ee3bb1c8ab@mbacou.com>
Message-ID: <CALyPt8xiYTYU0AU5OEPACLO+py1fX83nrbFh=U_EEiniawxKUw@mail.gmail.com>

Mel's answer is complete if you are aggregating to an integer multiple of
grid cells: if your tree cover was 5, 10, 25, 50, 125, etc., m pixels.  If
you are unlucky enough to have your tree cover in 15 or 30m pixels, you may
need to disaggregate to greatest common factor (5 or 10m) cells first, then
aggregate up to 250m MODIS.  With mode on categorical data, that should
still give you your expected results; with continuous raster values and
other functions, it might not be appropriate.

Tom 2


On Fri, Aug 26, 2016 at 7:28 PM, Bacou, Melanie <mel at mbacou.com> wrote:

> Isaque, check this thread on StackExchange:
> http://gis.stackexchange.com/questions/177423/r-aggregate-
> raster-with-mode-function-how-does-it-work
>
> --Mel.
>
>
> On 8/26/2016 10:07 PM, Isaque Daniel wrote:
> > Hi dear all,
> >
> >
> > I need to resample a tree cover map create by Landsat imagery to the
> MODIS 250 meters.
> >
> > If I use the resample function of raster package, it will compute the
> value based on bilinear or ngb, in this condition the new class map will
> not answer my expectations.
> >
> >
> > I loking for a way of resample using the statistical mode to define the
> value of the pixel of the new map.
> >
> >
> > Some tip about this?
> >
> > Thanks
> > Isaque
> >
> >
> >
> > ------------------------------------------------------------
> ------------------------------------------------------
> > Agronomist engineer
> > Master in Remote Sensing - National  Institute for Space Research (INPE)
> - Brazil
> > PHD Student in Transport - Bras?lia University (UNB)
> >
> >       [[alternative HTML version deleted]]
> >
> >
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

	[[alternative HTML version deleted]]


From isaquedanielre at hotmail.com  Sat Aug 27 04:44:30 2016
From: isaquedanielre at hotmail.com (Isaque Daniel)
Date: Sat, 27 Aug 2016 02:44:30 +0000
Subject: [R-sig-Geo] How to resample a map using the statistical mode of
 class to fill the new pixel
In-Reply-To: <4087c432-99a7-f85f-356b-28ee3bb1c8ab@mbacou.com>
References: <SN2PR20MB078477C85AF18FCAB0A1FCD1C9EF0@SN2PR20MB0784.namprd20.prod.outlook.com>,
	<4087c432-99a7-f85f-356b-28ee3bb1c8ab@mbacou.com>
Message-ID: <SN2PR20MB0784030E6603AD271E1B65C3C9EF0@SN2PR20MB0784.namprd20.prod.outlook.com>

Hi Mel!!
Thanks for the contribution, but my problem is to do that using the reference grid a MODIS image to compute value of new image using the Modal function.

The perfectly solution would be a resample raster function with the mode or modal of values can be used.

Best
Isaque


------------------------------------------------------------------------------------------------------------------
Eng. Agr. Isaque Daniel Rocha Eberhardt
Mestre em Sensoriamento Remoto - Instituto Nacional de Pesquisas Espaciais (INPE)
Doutorando em Transportes - Universidade de Bras??lia (UNB)
Mobile: +55 (061) 99015658
------------------------------------------------------------------------------------------------------------------
Agronomist engineer
Master in Remote Sensing - National  Institute for Space Research (INPE) - Brazil
PHD Student in Transport - Bras??lia University (UNB)


________________________________
De: Bacou, Melanie <mel at mbacou.com>
Enviado: s?bado, 27 de agosto de 2016 02:28
Para: Isaque Daniel; r-sig-geo
Assunto: Re: [R-sig-Geo] How to resample a map using the statistical mode of class to fill the new pixel


Isaque, check this thread on StackExchange:
http://gis.stackexchange.com/questions/177423/r-aggregate-raster-with-mode-function-how-does-it-work

[http://cdn.sstatic.net/Sites/gis/img/apple-touch-icon at 2.png?v=54e3ab1edcf3&a]<http://gis.stackexchange.com/questions/177423/r-aggregate-raster-with-mode-function-how-does-it-work>

R: aggregate raster with 'mode' function - how does it ...<http://gis.stackexchange.com/questions/177423/r-aggregate-raster-with-mode-function-how-does-it-work>
gis.stackexchange.com
I want to aggregate a very fine resolution raster at various coarser resolutions (that represents many 1000s of categorical polygons). The aggregate{raster} function ...



--Mel.

On 8/26/2016 10:07 PM, Isaque Daniel wrote:

Hi dear all,


I need to resample a tree cover map create by Landsat imagery to the MODIS 250 meters.

If I use the resample function of raster package, it will compute the value based on bilinear or ngb, in this condition the new class map will not answer my expectations.


I loking for a way of resample using the statistical mode to define the value of the pixel of the new map.


Some tip about this?

Thanks
Isaque



------------------------------------------------------------------------------------------------------------------
Agronomist engineer
Master in Remote Sensing - National  Institute for Space Research (INPE) - Brazil
PHD Student in Transport - Bras?lia University (UNB)

        [[alternative HTML version deleted]]





_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From isaquedanielre at hotmail.com  Sat Aug 27 04:47:39 2016
From: isaquedanielre at hotmail.com (Isaque Daniel)
Date: Sat, 27 Aug 2016 02:47:39 +0000
Subject: [R-sig-Geo] How to resample a map using the statistical mode of
 class to fill the new pixel
In-Reply-To: <CALyPt8xiYTYU0AU5OEPACLO+py1fX83nrbFh=U_EEiniawxKUw@mail.gmail.com>
References: <SN2PR20MB078477C85AF18FCAB0A1FCD1C9EF0@SN2PR20MB0784.namprd20.prod.outlook.com>
	<4087c432-99a7-f85f-356b-28ee3bb1c8ab@mbacou.com>,
	<CALyPt8xiYTYU0AU5OEPACLO+py1fX83nrbFh=U_EEiniawxKUw@mail.gmail.com>
Message-ID: <SN2PR20MB0784202C0271FDEA52E00A65C9EF0@SN2PR20MB0784.namprd20.prod.outlook.com>

Exactly Tom 2!!

I'll try your sugestion, but I need to fit the new tree cover map (in 250 meters) with the Modis raster positions.

Best
Isaque


------------------------------------------------------------------------------------------------------------------
Eng. Agr. Isaque Daniel Rocha Eberhardt
Mestre em Sensoriamento Remoto - Instituto Nacional de Pesquisas Espaciais (INPE)
Doutorando em Transportes - Universidade de Bras??lia (UNB)
Mobile: +55 (061) 99015658
------------------------------------------------------------------------------------------------------------------
Agronomist engineer
Master in Remote Sensing - National  Institute for Space Research (INPE) - Brazil
PHD Student in Transport - Bras??lia University (UNB)


________________________________
De: Tom Philippi <tephilippi at gmail.com>
Enviado: s?bado, 27 de agosto de 2016 02:43
Para: Bacou, Melanie
Cc: Isaque Daniel; r-sig-geo
Assunto: Re: [R-sig-Geo] How to resample a map using the statistical mode of class to fill the new pixel

Mel's answer is complete if you are aggregating to an integer multiple of grid cells: if your tree cover was 5, 10, 25, 50, 125, etc., m pixels.  If you are unlucky enough to have your tree cover in 15 or 30m pixels, you may need to disaggregate to greatest common factor (5 or 10m) cells first, then aggregate up to 250m MODIS.  With mode on categorical data, that should still give you your expected results; with continuous raster values and other functions, it might not be appropriate.

Tom 2


On Fri, Aug 26, 2016 at 7:28 PM, Bacou, Melanie <mel at mbacou.com<mailto:mel at mbacou.com>> wrote:
Isaque, check this thread on StackExchange:
http://gis.stackexchange.com/questions/177423/r-aggregate-raster-with-mode-function-how-does-it-work

--Mel.


On 8/26/2016 10:07 PM, Isaque Daniel wrote:
> Hi dear all,
>
>
> I need to resample a tree cover map create by Landsat imagery to the MODIS 250 meters.
>
> If I use the resample function of raster package, it will compute the value based on bilinear or ngb, in this condition the new class map will not answer my expectations.
>
>
> I loking for a way of resample using the statistical mode to define the value of the pixel of the new map.
>
>
> Some tip about this?
>
> Thanks
> Isaque
>
>
>
> ------------------------------------------------------------------------------------------------------------------
> Agronomist engineer
> Master in Remote Sensing - National  Institute for Space Research (INPE) - Brazil
> PHD Student in Transport - Bras?lia University (UNB)
>
>       [[alternative HTML version deleted]]
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From mel at mbacou.com  Sun Aug 28 08:37:13 2016
From: mel at mbacou.com (Bacou, Melanie)
Date: Sun, 28 Aug 2016 02:37:13 -0400
Subject: [R-sig-Geo] How to resample a map using the statistical mode of
 class to fill the new pixel
In-Reply-To: <CALyPt8xiYTYU0AU5OEPACLO+py1fX83nrbFh=U_EEiniawxKUw@mail.gmail.com>
References: <SN2PR20MB078477C85AF18FCAB0A1FCD1C9EF0@SN2PR20MB0784.namprd20.prod.outlook.com>
	<4087c432-99a7-f85f-356b-28ee3bb1c8ab@mbacou.com>
	<CALyPt8xiYTYU0AU5OEPACLO+py1fX83nrbFh=U_EEiniawxKUw@mail.gmail.com>
Message-ID: <b53a3bc7-fce2-4743-7933-ac7c6f6d284f@mbacou.com>

Isaque,
If your LandScan raster is at 30m resolution, then best might be to 
`aggregate()` to as close as 250m (e.g. using `fact=8` or `fact=9` and 
`fun=modal`), and then use `projectRaster()`:

projectRaster(from, to, method="bilinear")

Others might have better ideas.
--Mel.


On 8/26/2016 10:43 PM, Tom Philippi wrote:
> Mel's answer is complete if you are aggregating to an integer multiple 
> of grid cells: if your tree cover was 5, 10, 25, 50, 125, etc., m 
> pixels.  If you are unlucky enough to have your tree cover in 15 or 
> 30m pixels, you may need to disaggregate to greatest common factor (5 
> or 10m) cells first, then aggregate up to 250m MODIS.  With mode on 
> categorical data, that should still give you your expected results; 
> with continuous raster values and other functions, it might not be 
> appropriate.
>
> Tom 2
>
>
> On Fri, Aug 26, 2016 at 7:28 PM, Bacou, Melanie <mel at mbacou.com 
> <mailto:mel at mbacou.com>> wrote:
>
>     Isaque, check this thread on StackExchange:
>     http://gis.stackexchange.com/questions/177423/r-aggregate-raster-with-mode-function-how-does-it-work
>     <http://gis.stackexchange.com/questions/177423/r-aggregate-raster-with-mode-function-how-does-it-work>
>
>     --Mel.
>
>
>     On 8/26/2016 10:07 PM, Isaque Daniel wrote:
>     > Hi dear all,
>     >
>     >
>     > I need to resample a tree cover map create by Landsat imagery to
>     the MODIS 250 meters.
>     >
>     > If I use the resample function of raster package, it will
>     compute the value based on bilinear or ngb, in this condition the
>     new class map will not answer my expectations.
>     >
>     >
>     > I loking for a way of resample using the statistical mode to
>     define the value of the pixel of the new map.
>     >
>     >
>     > Some tip about this?
>     >
>     > Thanks
>     > Isaque
>     >
>     >
>     >
>     >
>     ------------------------------------------------------------------------------------------------------------------
>     > Agronomist engineer
>     > Master in Remote Sensing - National  Institute for Space
>     Research (INPE) - Brazil
>     > PHD Student in Transport - Bras?lia University (UNB)
>     >
>     >       [[alternative HTML version deleted]]
>     >
>     >
>     >
>     > _______________________________________________
>     > R-sig-Geo mailing list
>     > R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>     > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>     <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>
>
>             [[alternative HTML version deleted]]
>
>     _______________________________________________
>     R-sig-Geo mailing list
>     R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>     https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>     <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>
>


	[[alternative HTML version deleted]]


From mel at mbacou.com  Sun Aug 28 08:44:53 2016
From: mel at mbacou.com (Bacou, Melanie)
Date: Sun, 28 Aug 2016 02:44:53 -0400
Subject: [R-sig-Geo] How to resample a map using the statistical mode of
 class to fill the new pixel
In-Reply-To: <b53a3bc7-fce2-4743-7933-ac7c6f6d284f@mbacou.com>
References: <SN2PR20MB078477C85AF18FCAB0A1FCD1C9EF0@SN2PR20MB0784.namprd20.prod.outlook.com>
	<4087c432-99a7-f85f-356b-28ee3bb1c8ab@mbacou.com>
	<CALyPt8xiYTYU0AU5OEPACLO+py1fX83nrbFh=U_EEiniawxKUw@mail.gmail.com>
	<b53a3bc7-fce2-4743-7933-ac7c6f6d284f@mbacou.com>
Message-ID: <d8cb3c39-b49a-8e31-b5c7-df20c5542a90@mbacou.com>

Sorry I meant reproject using nearest neighbor:

projectRaster(from, to, method="ngb")

On 8/28/2016 2:37 AM, Bacou, Melanie wrote:
> Isaque,
> If your LandScan raster is at 30m resolution, then best might be to
> `aggregate()` to as close as 250m (e.g. using `fact=8` or `fact=9` and
> `fun=modal`), and then use `projectRaster()`:
>
> projectRaster(from, to, method="bilinear")
>
> Others might have better ideas.
> --Mel.
>
>
> On 8/26/2016 10:43 PM, Tom Philippi wrote:
>> Mel's answer is complete if you are aggregating to an integer multiple
>> of grid cells: if your tree cover was 5, 10, 25, 50, 125, etc., m
>> pixels.  If you are unlucky enough to have your tree cover in 15 or
>> 30m pixels, you may need to disaggregate to greatest common factor (5
>> or 10m) cells first, then aggregate up to 250m MODIS.  With mode on
>> categorical data, that should still give you your expected results;
>> with continuous raster values and other functions, it might not be
>> appropriate.
>>
>> Tom 2
>>
>>
>> On Fri, Aug 26, 2016 at 7:28 PM, Bacou, Melanie <mel at mbacou.com
>> <mailto:mel at mbacou.com>> wrote:
>>
>>      Isaque, check this thread on StackExchange:
>>      http://gis.stackexchange.com/questions/177423/r-aggregate-raster-with-mode-function-how-does-it-work
>>      <http://gis.stackexchange.com/questions/177423/r-aggregate-raster-with-mode-function-how-does-it-work>
>>
>>      --Mel.
>>
>>
>>      On 8/26/2016 10:07 PM, Isaque Daniel wrote:
>>      > Hi dear all,
>>      >
>>      >
>>      > I need to resample a tree cover map create by Landsat imagery to
>>      the MODIS 250 meters.
>>      >
>>      > If I use the resample function of raster package, it will
>>      compute the value based on bilinear or ngb, in this condition the
>>      new class map will not answer my expectations.
>>      >
>>      >
>>      > I loking for a way of resample using the statistical mode to
>>      define the value of the pixel of the new map.
>>      >
>>      >
>>      > Some tip about this?
>>      >
>>      > Thanks
>>      > Isaque
>>      >
>>      >
>>      >
>>      >
>>      ------------------------------------------------------------------------------------------------------------------
>>      > Agronomist engineer
>>      > Master in Remote Sensing - National  Institute for Space
>>      Research (INPE) - Brazil
>>      > PHD Student in Transport - Bras?lia University (UNB)
>>      >
>>      >       [[alternative HTML version deleted]]
>>      >
>>      >
>>      >
>>      > _______________________________________________
>>      > R-sig-Geo mailing list
>>      > R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>>      > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>      <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>>
>>
>>              [[alternative HTML version deleted]]
>>
>>      _______________________________________________
>>      R-sig-Geo mailing list
>>      R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>>      https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>      <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>>
>>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From dfamaral at usp.br  Sun Aug 28 21:04:05 2016
From: dfamaral at usp.br (dfamaral at usp.br)
Date: Sun, 28 Aug 2016 16:04:05 -0300 (BRT)
Subject: [R-sig-Geo] SLX model for splm package in R
In-Reply-To: <1426259736.18858819.1472410016564.JavaMail.root@usp.br>
Message-ID: <1051991092.18860603.1472411045894.JavaMail.root@usp.br>

Dear colleagues, 

Does anyone know how to implement Spatial Lag of X (SLX) model for panel data using splm package? I tried the following to create a WX matrix and then apply Fixed and Random Effects: 

tb <- read.csv2("panel.csv", header = TRUE, sep = ";", dec = ".") 
time <- length(unique(tb$year)) 
X <- as.matrix(tb[ ,3:20]) 
WX <- slag(X, listw, maxlag = 1) 

I see that slag is applicable for vectors of pseries, but this command led to the error message: "Error in UseMethod("slag"): no applicable method for 'slag' applied to an object of class "c('matrix', 'double', 'numeric')" 

Is there any way to implement this SLX model for panel series? 

Regards, 

Daniel. 

	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Sun Aug 28 23:42:29 2016
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 28 Aug 2016 23:42:29 +0200
Subject: [R-sig-Geo] SLX model for splm package in R
In-Reply-To: <1051991092.18860603.1472411045894.JavaMail.root@usp.br>
References: <1051991092.18860603.1472411045894.JavaMail.root@usp.br>
Message-ID: <alpine.LFD.2.20.1608282339120.23594@reclus.nhh.no>

On Sun, 28 Aug 2016, dfamaral at usp.br wrote:

> Dear colleagues,
>
> Does anyone know how to implement Spatial Lag of X (SLX) model for panel 
> data using splm package? I tried the following to create a WX matrix and 
> then apply Fixed and Random Effects:
>
> tb <- read.csv2("panel.csv", header = TRUE, sep = ";", dec = ".")
> time <- length(unique(tb$year))
> X <- as.matrix(tb[ ,3:20])

class(X) is not "pseries", is it?

> WX <- slag(X, listw, maxlag = 1)
>
> I see that slag is applicable for vectors of pseries, but this command 
> led to the error message: "Error in UseMethod("slag"): no applicable 
> method for 'slag' applied to an object of class "c('matrix', 'double', 
> 'numeric')"

slag.default() takes a vector, slag.pseries() a "pseries" object.

>
> Is there any way to implement this SLX model for panel series?

Did you look at spdep::create_WX?

>
> Regards,
>
> Daniel.
>
> 	[[alternative HTML version deleted]]
>

Please do not post HTML - like insects, HTML carries infectious payloads 
and wastes bandwidth and server processing capacity.

> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
http://depsy.org/person/434412


From dfamaral at usp.br  Mon Aug 29 00:48:18 2016
From: dfamaral at usp.br (dfamaral at usp.br)
Date: Sun, 28 Aug 2016 19:48:18 -0300 (BRT)
Subject: [R-sig-Geo] SLX model for splm package in R
In-Reply-To: <alpine.LFD.2.20.1608282339120.23594@reclus.nhh.no>
Message-ID: <509873833.18899450.1472424498120.JavaMail.root@usp.br>

Dear Professor and colleagues,

Thank you for the response. X is a matrix and tb is a data.frame:

> class(X)
[1] "matrix"

> class(tb)
[1] "data.frame"

I do not know how to apply slag to tb or X.

I also looked at spdep::create_WX and I understand its purpose is for "spatial simultaneous autoregressive error models", but in my case I just want a model such as:

y = beta1*X + beta2*WX + e

So, if anyone can give any help, I thank you again.

Daniel.

----- Mensagem original ----- 

> De: "Roger Bivand" <Roger.Bivand at nhh.no>
> Para: dfamaral at usp.br
> Cc: r-sig-geo at r-project.org
> Enviadas: Domingo, 28 de Agosto de 2016 18:42:29
> Assunto: Re: [R-sig-Geo] SLX model for splm package in R

> On Sun, 28 Aug 2016, dfamaral at usp.br wrote:

> > Dear colleagues,
> >
> > Does anyone know how to implement Spatial Lag of X (SLX) model for
> > panel
> > data using splm package? I tried the following to create a WX
> > matrix and
> > then apply Fixed and Random Effects:
> >
> > tb <- read.csv2("panel.csv", header = TRUE, sep = ";", dec = ".")
> > time <- length(unique(tb$year))
> > X <- as.matrix(tb[ ,3:20])

> class(X) is not "pseries", is it?

> > WX <- slag(X, listw, maxlag = 1)
> >
> > I see that slag is applicable for vectors of pseries, but this
> > command
> > led to the error message: "Error in UseMethod("slag"): no
> > applicable
> > method for 'slag' applied to an object of class "c('matrix',
> > 'double',
> > 'numeric')"

> slag.default() takes a vector, slag.pseries() a "pseries" object.

> >
> > Is there any way to implement this SLX model for panel series?

> Did you look at spdep::create_WX?

> >
> > Regards,
> >
> > Daniel.
> >
> > [[alternative HTML version deleted]]
> >

> Please do not post HTML - like insects, HTML carries infectious
> payloads
> and wastes bandwidth and server processing capacity.

> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >

> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 91 00
> e-mail: Roger.Bivand at nhh.no
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
> http://depsy.org/person/434412


From bozuduru at gmail.com  Mon Aug 29 01:32:49 2016
From: bozuduru at gmail.com (Burcu Ozuduru)
Date: Mon, 29 Aug 2016 02:32:49 +0300
Subject: [R-sig-Geo] SLX model for splm package in R
In-Reply-To: <alpine.LFD.2.20.1608282339120.23594@reclus.nhh.no>
References: <1051991092.18860603.1472411045894.JavaMail.root@usp.br>
	<alpine.LFD.2.20.1608282339120.23594@reclus.nhh.no>
Message-ID: <CAG7HBHTwm2pZNSxbZ6Rr_cpbGssof2vjhnixYfMpjU2E6rUZFw@mail.gmail.com>

Hi,

This is a great question because I faced the same problem a while back.
What I did is to obtain the spatial weight matrix as (have spdep
installed).

S47matrix<-W1%*%S47

and then put it in my data frame and equation. Btw, above W1 is a spatial
weights matrix I obtained from a neighbor list
(W1=as.matrix(as_dgRMatrix_listw(ccListw))) and S47 is the dependent
variable.

m2<-data.frame(S41,S46,S47,S65,S68,S47matrix,MAD10000,NQPDA10000,TPBtA10000,DivA10000,Lnk10000)
summary(m2<-zeroinfl(S47~MAD10000+NQPDA10000+S47matrix, dist="negbin"))

I also wanted to ask whether I was on the right track. Professor Bivand, if
this is a common problem could you direct us to a relevant page -if
available and if at all possible- please? Your advice would be sincerely
appreciated.

Kind Regards-

Thanks-

Burcu

---

Burcu H. Ozuduru,
Gazi University, Faculty of Architecture,
Department of City and Regional Planning
Maltepe-Ankara Turkey
t: +90-312-5823701
e: bozuduru at gazi.edu.tr
http://websitem.gazi.edu.tr/bozuduru


On Mon, Aug 29, 2016 at 12:42 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:

> On Sun, 28 Aug 2016, dfamaral at usp.br wrote:
>
> Dear colleagues,
>>
>> Does anyone know how to implement Spatial Lag of X (SLX) model for panel
>> data using splm package? I tried the following to create a WX matrix and
>> then apply Fixed and Random Effects:
>>
>> tb <- read.csv2("panel.csv", header = TRUE, sep = ";", dec = ".")
>> time <- length(unique(tb$year))
>> X <- as.matrix(tb[ ,3:20])
>>
>
> class(X) is not "pseries", is it?
>
> WX <- slag(X, listw, maxlag = 1)
>>
>> I see that slag is applicable for vectors of pseries, but this command
>> led to the error message: "Error in UseMethod("slag"): no applicable method
>> for 'slag' applied to an object of class "c('matrix', 'double', 'numeric')"
>>
>
> slag.default() takes a vector, slag.pseries() a "pseries" object.
>
>
>> Is there any way to implement this SLX model for panel series?
>>
>
> Did you look at spdep::create_WX?
>
>
>> Regards,
>>
>> Daniel.
>>
>>         [[alternative HTML version deleted]]
>>
>>
> Please do not post HTML - like insects, HTML carries infectious payloads
> and wastes bandwidth and server processing capacity.
>
> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 91 00
> e-mail: Roger.Bivand at nhh.no
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
> http://depsy.org/person/434412
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Mon Aug 29 09:13:26 2016
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 29 Aug 2016 09:13:26 +0200
Subject: [R-sig-Geo] SLX model for splm package in R
In-Reply-To: <CAG7HBHTwm2pZNSxbZ6Rr_cpbGssof2vjhnixYfMpjU2E6rUZFw@mail.gmail.com>
References: <1051991092.18860603.1472411045894.JavaMail.root@usp.br>
	<alpine.LFD.2.20.1608282339120.23594@reclus.nhh.no>
	<CAG7HBHTwm2pZNSxbZ6Rr_cpbGssof2vjhnixYfMpjU2E6rUZFw@mail.gmail.com>
Message-ID: <alpine.LFD.2.20.1608290850020.2778@reclus.nhh.no>

This is far too ad-hoc a discussion. For Spatial panel SLX, please read 
carefully:

http://dx.doi.org/10.1016/j.spasta.2014.02.002
DOI 10.1007/s10109-015-0217-3
DOI: 10.1111/jors.12188

for a view of the state of play. One question - should you demean the X 
variables before taking spatial lags? This does not apply to cross-section 
models for which spdep::create_WX() was written, for obvious reasons. A 
second question - how do you handle the calculation of total impacts in 
this setting? In cross-section models, this is reasonably easy, by linear 
combination. But in spatial panel SLX models, is it easy? What does the 
literature suggest?

On Mon, 29 Aug 2016, Burcu Ozuduru wrote:

> Hi,
>
> This is a great question because I faced the same problem a while back.
> What I did is to obtain the spatial weight matrix as (have spdep
> installed).
>
> S47matrix<-W1%*%S47
>
> and then put it in my data frame and equation. Btw, above W1 is a spatial
> weights matrix I obtained from a neighbor list
> (W1=as.matrix(as_dgRMatrix_listw(ccListw))) and S47 is the dependent
> variable.
>
> m2<-data.frame(S41,S46,S47,S65,S68,S47matrix,MAD10000,NQPDA10000,TPBtA10000,DivA10000,Lnk10000)
> summary(m2<-zeroinfl(S47~MAD10000+NQPDA10000+S47matrix, dist="negbin"))
>
> I also wanted to ask whether I was on the right track. Professor Bivand, if
> this is a common problem could you direct us to a relevant page -if
> available and if at all possible- please? Your advice would be sincerely
> appreciated.

This is an inappropriate question for this thread (SLX spatial panel 
models). You must refer to the literature, and understand what you are 
doing:

zeroinfl(S47~MAD10000+NQPDA10000+S47matrix, dist="negbin")

is completely wrong, as S47matrix is Wy, the spatial lag of the dependent 
variable, and this spatial lag model of response S47 cannot be estimated 
using pscl::zeroinfl (do say which package provides the functions you 
mention). Your only recourse is to write your own Bayesian model. It is 
even extremely likely that this model doesn't make any substantive sense, 
unless you have a good understanding about why S47 at i (for all i) should 
be simultaneously caused by the full set of values of S47. A model in the 
error might make sense (a zero inflated negbin model with an additive mrf 
random effect (maybe R2BayesX 10.18637/jss.v014.i11).

An SLX zero inflated negbin model could maybe apply, in which case 
pscl::zeroinfl might be applicable, but then you'd be including the lags 
of MAD10000 and NQPDA10000, not the response, and inference on total 
impacts of these variables could be challenging rather than obvious (MCMC 
summaries of the summed samples of the coefficients would work, but here 
no MCMC I think - R2BayesX might help).

Most of these issues are far more complex than students or their 
supervisors understand, do ask an experienced applied statistician (I'm 
not an applied statistician, don't rely on my suggestions, you yourself 
are responsible for your results).

Hope this clarifies,

Roger

>
> Kind Regards-
>
> Thanks-
>
> Burcu
>
> ---
>
> Burcu H. Ozuduru,
> Gazi University, Faculty of Architecture,
> Department of City and Regional Planning
> Maltepe-Ankara Turkey
> t: +90-312-5823701
> e: bozuduru at gazi.edu.tr
> http://websitem.gazi.edu.tr/bozuduru
>
>
> On Mon, Aug 29, 2016 at 12:42 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
>> On Sun, 28 Aug 2016, dfamaral at usp.br wrote:
>>
>> Dear colleagues,
>>>
>>> Does anyone know how to implement Spatial Lag of X (SLX) model for panel
>>> data using splm package? I tried the following to create a WX matrix and
>>> then apply Fixed and Random Effects:
>>>
>>> tb <- read.csv2("panel.csv", header = TRUE, sep = ";", dec = ".")
>>> time <- length(unique(tb$year))
>>> X <- as.matrix(tb[ ,3:20])
>>>
>>
>> class(X) is not "pseries", is it?
>>
>> WX <- slag(X, listw, maxlag = 1)
>>>
>>> I see that slag is applicable for vectors of pseries, but this command
>>> led to the error message: "Error in UseMethod("slag"): no applicable method
>>> for 'slag' applied to an object of class "c('matrix', 'double', 'numeric')"
>>>
>>
>> slag.default() takes a vector, slag.pseries() a "pseries" object.
>>
>>
>>> Is there any way to implement this SLX model for panel series?
>>>
>>
>> Did you look at spdep::create_WX?
>>
>>
>>> Regards,
>>>
>>> Daniel.
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>>
>> Please do not post HTML - like insects, HTML carries infectious payloads
>> and wastes bandwidth and server processing capacity.
>>
>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 91 00
>> e-mail: Roger.Bivand at nhh.no
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>> http://depsy.org/person/434412
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
http://depsy.org/person/434412


From david.bucklin at gmail.com  Mon Aug 29 16:48:26 2016
From: david.bucklin at gmail.com (David Bucklin)
Date: Mon, 29 Aug 2016 10:48:26 -0400
Subject: [R-sig-Geo] rpostgis announcement
Message-ID: <CAECT9fmGWZzDq-LzNM6zog-xk-upXB8eLbtdiZqzxUjSd7mXBw@mail.gmail.com>

Dear r-sig-geo list members,

We'd like to announce the initial CRAN release of 'rpostgis' (v1.0.0),
which facilitates transfer between PostGIS "Geometry" objects (stored in
PostgreSQL databases) and R spatial objects. The package also contains a
variety of convenience functions which are supplemental to the excellent
'RPostgreSQL' package for interfacing with a PostgreSQL/PostGIS database.

To install the package:

install.packages("rpostgis")

The package main development area can be found on GitHub; any bugs, issues,
or feature requests can be submitted through the "issues" page there:

https://github.com/mablab/rpostgis

David

	[[alternative HTML version deleted]]


From lukaslehnert at googlemail.com  Mon Aug 29 17:46:03 2016
From: lukaslehnert at googlemail.com (Lukas Lehnert)
Date: Mon, 29 Aug 2016 17:46:03 +0200
Subject: [R-sig-Geo] Error when combining raster and foreach packages
In-Reply-To: <1552442.e4CPz7PVSM@pc19329>
References: <4399023.vQI23rZgax@pc19329>
	<dce24498-01b5-ff68-800f-703028def847@wur.nl>
	<1552442.e4CPz7PVSM@pc19329>
Message-ID: <1988857.xM6hpbIO1V@pc19329>

Dear all,

I managed to get it working after simply updating R from 3.0.2 to 3.3.1 and 
the raster, rgdal and sp packages.  

Thanks again for your help

Lukas


Am Freitag, 26. August 2016, 13:39:51 schrieben Sie:
> Hi Lo?c,
> 
> thank you for your reply and the suggestion. Unfortunately, using the 
> cluster functions in raster is not an option, because I am developing a
> package which may run with raster data but not necessarily. Therefore, I
> wanted to parallelize the stuff in the function of the package and not the
> loop over the raster image.
> 
> Cheers
> 
> Lukas
> 
> Am Freitag, 26. August 2016, 13:02:33 schrieb Lo?c Dutrieux:
> > Hi Lukas,
> > 
> > What does your function do? Can you use the built-in parallel
> > functionalities of the raster package instead? See ?beginCluster
> > 
> > Cheers,
> > Lo?c
> > 
> > On 26/08/2016 12:23, Lukas Lehnert via R-sig-Geo wrote:
> > > Dear list members,
> > > 
> > > I tried to process a large GeoTIFF file in a blockwise manner (following
> > > the vignette "Writing functions for large raster files").
> > > 
> > > I then combined the approach with a "foreeach"-loop to parallelize the
> > > calculation on the raster data:
> > > 
> > > library(raster)
> > > library(doMC)
> > > library(foreach)
> > > registerDoMC(3)
> > > 
> > > ra <- raster("dem.tif")
> > > tr <- blockSize(ra)
> > > outfile <- "test_2.tif"
> > > res <- writeStart(raster(ra), outfile, overwrite = TRUE)
> > > for (i in 1:tr$n)
> > > {
> > > 
> > >   v <- getValuesBlock(ra, row=tr$row[i], nrows=tr$nrows[i])
> > >   
> > >   v2 <- foreach(i=1:length(v), .combine = 'c') %dopar% {
> > >   
> > >      i*(-1)
> > >   
> > >   }
> > >   res <- writeValues(res, v2, tr$row[i])
> > >   cat(round(i/tr$n*100, 2), "%\n")
> > > 
> > > }
> > > res <- writeStop(res)
> > > 
> > > However, I get errors and warnings like the following ones:
> > > ERROR 1: /tmp/Rtmpz6qEOE/xortest_2.tif:Failed to allocate memory for to
> > > read TIFF directory (0 elements of 12 bytes each)
> > > ERROR 1: TIFFReadDirectory:Failed to read directory at offset 4639232
> > > Warning 1: TIFFFetchNormalTag:ASCII value for tag "GeoASCIIParams"
> > > contains
> > > null byte in value; value incorrectly truncated during reading due to
> > > implementation limitations
> > > 
> > > The errors are different each time I restart the process. If I do not
> > > use
> > > foreach but a common for-loop, the errors do not occur. I tried several
> > > raster files (large ones and small ones) and two different computers,
> > > but
> > > the problem remains.
> > > 
> > > Does somebody has any idea, how to solve this problem?
> > > 
> > > Thank you in advance
> > > 
> > > Lukas
> > > 
> > > _______________________________________________
> > > R-sig-Geo mailing list
> > > R-sig-Geo at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> > 
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From edzer.pebesma at uni-muenster.de  Mon Aug 29 22:19:43 2016
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 29 Aug 2016 22:19:43 +0200
Subject: [R-sig-Geo] rpostgis announcement
In-Reply-To: <CAECT9fmGWZzDq-LzNM6zog-xk-upXB8eLbtdiZqzxUjSd7mXBw@mail.gmail.com>
References: <CAECT9fmGWZzDq-LzNM6zog-xk-upXB8eLbtdiZqzxUjSd7mXBw@mail.gmail.com>
Message-ID: <ca4592a6-d603-66b3-0ec8-3f6c149b59d2@uni-muenster.de>

Nice development!

In the simple features for R project, https://github.com/edzer/sfr , I
have been writing direct (E)WKB <--> R conversions, and support reading
tables with geometry from PostGIS, using sf::st_read_pg(db, table). I
was thinking about how to do the writing when your package came!

The advantage of the sf package, over sp, is that it supports (will
support) all 17 geometry types for 4 dimensions (XY, XYZ, XYM, XYZM).

In order to try to gain momentum for this, could you provide a few
arguments and/or use cases for which this approach is more useful than
readOGR/writeOGR in rgdal?

Best regards,

On 29/08/16 16:48, David Bucklin wrote:
> Dear r-sig-geo list members,
> 
> We'd like to announce the initial CRAN release of 'rpostgis' (v1.0.0),
> which facilitates transfer between PostGIS "Geometry" objects (stored in
> PostgreSQL databases) and R spatial objects. The package also contains a
> variety of convenience functions which are supplemental to the excellent
> 'RPostgreSQL' package for interfacing with a PostgreSQL/PostGIS database.
> 
> To install the package:
> 
> install.packages("rpostgis")
> 
> The package main development area can be found on GitHub; any bugs, issues,
> or feature requests can be submitted through the "issues" page there:
> 
> https://github.com/mablab/rpostgis

I did!

> 
> David
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/
Spatial Statistics Society http://www.spatialstatistics.info

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 490 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20160829/79bd792e/attachment.bin>

From rbarnes at umn.edu  Mon Aug 29 22:58:14 2016
From: rbarnes at umn.edu (Richard Barnes)
Date: Mon, 29 Aug 2016 13:58:14 -0700
Subject: [R-sig-Geo] ArcGIS File Geodatabase Format
Message-ID: <d54b1ac5-9472-116d-c46b-3bd64a609f5b@umn.edu>

I've just released C++ source code at 
https://github.com/r-barnes/ArcRasterRescue for extracting raster data 
from the ArcGIS File Geodatabase (gdb) format.

Additional work, as outlined in the README.md file, needs to be done to 
extend the kinds of compression the code handles, deal with issues of 
endianness (the code has only been tested on a little endian system), 
and better extract geotransforms and CRSs, but the program is serviceable.

I've got what I need out of this, so I don't anticipate putting too much 
more active development into the program myself, but wanted to make the 
community aware of it in case there are others who can benefit from it.

Best regards,
Richard


From jayaakrish at gmail.com  Tue Aug 30 01:51:30 2016
From: jayaakrish at gmail.com (Jaya Krishnan)
Date: Mon, 29 Aug 2016 16:51:30 -0700
Subject: [R-sig-Geo] Leaflet and R - web map
Message-ID: <CAJmi+1DqkxYXzUPa5V6UjbHT9WW5HHVJ94Qc1tAhkb0ttTEwcA@mail.gmail.com>

HI,

I've been trying to make an interactive web map using leaflet package in R.
Just have a couple of issues.
1. Is it possible to get a popup on hover (mouseover) instead of the
default click?
2. Is it possible to remove the zoom button?
3. If not in R, is it possible to do the above in the output html?

Thanks!

Jaya

?

	[[alternative HTML version deleted]]


From dfamaral at usp.br  Tue Aug 30 04:09:05 2016
From: dfamaral at usp.br (dfamaral at usp.br)
Date: Mon, 29 Aug 2016 23:09:05 -0300 (BRT)
Subject: [R-sig-Geo] SLX model for splm package in R
In-Reply-To: <alpine.LFD.2.20.1608290850020.2778@reclus.nhh.no>
Message-ID: <1715852819.19230883.1472522945889.JavaMail.root@usp.br>

Dear all, 

Impacts in SLX model are calculated directly by parameters estimation: 

http://onlinelibrary.wiley.com/doi/10.1111/jors.12188/abstract 

Beta1 gives direct impact and Beta 2 the indirect: 

y = beta1*X + beta2*WX + e

I understand W must multiply T times the X matrix (T is the lenght of time series for a panel data). And variables are demeaned after WX is calculated.

Daniel.

----- Mensagem original -----


De: "Roger Bivand" <Roger.Bivand at nhh.no> 
Para: "Burcu Ozuduru" <bozuduru at gmail.com> 
Cc: dfamaral at usp.br, r-sig-geo at r-project.org 
Enviadas: Segunda-feira, 29 de Agosto de 2016 4:13:26 
Assunto: Re: [R-sig-Geo] SLX model for splm package in R 

This is far too ad-hoc a discussion. For Spatial panel SLX, please read 
carefully: 

http://dx.doi.org/10.1016/j.spasta.2014.02.002 
DOI 10.1007/s10109-015-0217-3 
DOI: 10.1111/jors.12188 

for a view of the state of play. One question - should you demean the X 
variables before taking spatial lags? This does not apply to cross-section 
models for which spdep::create_WX() was written, for obvious reasons. A 
second question - how do you handle the calculation of total impacts in 
this setting? In cross-section models, this is reasonably easy, by linear 
combination. But in spatial panel SLX models, is it easy? What does the 
literature suggest? 

On Mon, 29 Aug 2016, Burcu Ozuduru wrote: 

> Hi, 
> 
> This is a great question because I faced the same problem a while back. 
> What I did is to obtain the spatial weight matrix as (have spdep 
> installed). 
> 
> S47matrix<-W1%*%S47 
> 
> and then put it in my data frame and equation. Btw, above W1 is a spatial 
> weights matrix I obtained from a neighbor list 
> (W1=as.matrix(as_dgRMatrix_listw(ccListw))) and S47 is the dependent 
> variable. 
> 
> m2<-data.frame(S41,S46,S47,S65,S68,S47matrix,MAD10000,NQPDA10000,TPBtA10000,DivA10000,Lnk10000) 
> summary(m2<-zeroinfl(S47~MAD10000+NQPDA10000+S47matrix, dist="negbin")) 
> 
> I also wanted to ask whether I was on the right track. Professor Bivand, if 
> this is a common problem could you direct us to a relevant page -if 
> available and if at all possible- please? Your advice would be sincerely 
> appreciated. 

This is an inappropriate question for this thread (SLX spatial panel 
models). You must refer to the literature, and understand what you are 
doing: 

zeroinfl(S47~MAD10000+NQPDA10000+S47matrix, dist="negbin") 

is completely wrong, as S47matrix is Wy, the spatial lag of the dependent 
variable, and this spatial lag model of response S47 cannot be estimated 
using pscl::zeroinfl (do say which package provides the functions you 
mention). Your only recourse is to write your own Bayesian model. It is 
even extremely likely that this model doesn't make any substantive sense, 
unless you have a good understanding about why S47 at i (for all i) should 
be simultaneously caused by the full set of values of S47. A model in the 
error might make sense (a zero inflated negbin model with an additive mrf 
random effect (maybe R2BayesX 10.18637/jss.v014.i11). 

An SLX zero inflated negbin model could maybe apply, in which case 
pscl::zeroinfl might be applicable, but then you'd be including the lags 
of MAD10000 and NQPDA10000, not the response, and inference on total 
impacts of these variables could be challenging rather than obvious (MCMC 
summaries of the summed samples of the coefficients would work, but here 
no MCMC I think - R2BayesX might help). 

Most of these issues are far more complex than students or their 
supervisors understand, do ask an experienced applied statistician (I'm 
not an applied statistician, don't rely on my suggestions, you yourself 
are responsible for your results). 

Hope this clarifies, 

Roger 

> 
> Kind Regards- 
> 
> Thanks- 
> 
> Burcu 
> 
> --- 
> 
> Burcu H. Ozuduru, 
> Gazi University, Faculty of Architecture, 
> Department of City and Regional Planning 
> Maltepe-Ankara Turkey 
> t: +90-312-5823701 
> e: bozuduru at gazi.edu.tr 
> http://websitem.gazi.edu.tr/bozuduru 
> 
> 
> On Mon, Aug 29, 2016 at 12:42 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote: 
> 
>> On Sun, 28 Aug 2016, dfamaral at usp.br wrote: 
>> 
>> Dear colleagues, 
>>> 
>>> Does anyone know how to implement Spatial Lag of X (SLX) model for panel 
>>> data using splm package? I tried the following to create a WX matrix and 
>>> then apply Fixed and Random Effects: 
>>> 
>>> tb <- read.csv2("panel.csv", header = TRUE, sep = ";", dec = ".") 
>>> time <- length(unique(tb$year)) 
>>> X <- as.matrix(tb[ ,3:20]) 
>>> 
>> 
>> class(X) is not "pseries", is it? 
>> 
>> WX <- slag(X, listw, maxlag = 1) 
>>> 
>>> I see that slag is applicable for vectors of pseries, but this command 
>>> led to the error message: "Error in UseMethod("slag"): no applicable method 
>>> for 'slag' applied to an object of class "c('matrix', 'double', 'numeric')" 
>>> 
>> 
>> slag.default() takes a vector, slag.pseries() a "pseries" object. 
>> 
>> 
>>> Is there any way to implement this SLX model for panel series? 
>>> 
>> 
>> Did you look at spdep::create_WX? 
>> 
>> 
>>> Regards, 
>>> 
>>> Daniel. 
>>> 
>>> [[alternative HTML version deleted]] 
>>> 
>>> 
>> Please do not post HTML - like insects, HTML carries infectious payloads 
>> and wastes bandwidth and server processing capacity. 
>> 
>> _______________________________________________ 
>>> R-sig-Geo mailing list 
>>> R-sig-Geo at r-project.org 
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo 
>>> 
>>> 
>> -- 
>> Roger Bivand 
>> Department of Economics, Norwegian School of Economics, 
>> Helleveien 30, N-5045 Bergen, Norway. 
>> voice: +47 55 95 93 55; fax +47 55 95 91 00 
>> e-mail: Roger.Bivand at nhh.no 
>> http://orcid.org/0000-0003-2392-6140 
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en 
>> http://depsy.org/person/434412 
>> 
>> _______________________________________________ 
>> R-sig-Geo mailing list 
>> R-sig-Geo at r-project.org 
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo 
>> 
> 

-- 
Roger Bivand 
Department of Economics, Norwegian School of Economics, 
Helleveien 30, N-5045 Bergen, Norway. 
voice: +47 55 95 93 55; fax +47 55 95 91 00 
e-mail: Roger.Bivand at nhh.no 
http://orcid.org/0000-0003-2392-6140 
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en 
http://depsy.org/person/434412


From mel at mbacou.com  Tue Aug 30 04:22:06 2016
From: mel at mbacou.com (Bacou, Melanie)
Date: Mon, 29 Aug 2016 22:22:06 -0400
Subject: [R-sig-Geo] Leaflet and R - web map
In-Reply-To: <CAJmi+1DqkxYXzUPa5V6UjbHT9WW5HHVJ94Qc1tAhkb0ttTEwcA@mail.gmail.com>
References: <CAJmi+1DqkxYXzUPa5V6UjbHT9WW5HHVJ94Qc1tAhkb0ttTEwcA@mail.gmail.com>
Message-ID: <6e3348aa-57e7-2aa0-9511-7e214375ad42@mbacou.com>

Jaya,
Have a look through the `leaflet` and `tmap` package documentation. 
There are examples there.
--Mel.


On 8/29/2016 7:51 PM, Jaya Krishnan wrote:
> HI,
>
> I've been trying to make an interactive web map using leaflet package in R.
> Just have a couple of issues.
> 1. Is it possible to get a popup on hover (mouseover) instead of the
> default click?
> 2. Is it possible to remove the zoom button?
> 3. If not in R, is it possible to do the above in the output html?
>
> Thanks!
>
> Jaya
>
> ?
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From tim.appelhans at gmail.com  Tue Aug 30 08:40:06 2016
From: tim.appelhans at gmail.com (Tim Appelhans)
Date: Tue, 30 Aug 2016 08:40:06 +0200
Subject: [R-sig-Geo] Leaflet and R - web map
In-Reply-To: <CAJmi+1DqkxYXzUPa5V6UjbHT9WW5HHVJ94Qc1tAhkb0ttTEwcA@mail.gmail.com>
References: <CAJmi+1DqkxYXzUPa5V6UjbHT9WW5HHVJ94Qc1tAhkb0ttTEwcA@mail.gmail.com>
Message-ID: <57C52A46.9040001@gmail.com>



On 30.08.2016 01:51, Jaya Krishnan wrote:
> HI,
>
> I've been trying to make an interactive web map using leaflet package in R.
> Just have a couple of issues.
> 1. Is it possible to get a popup on hover (mouseover) instead of the
> default click?
Nope, not with the current implementation of leaflet. The only thing you 
can get on hover are labels (which are just a character vector, so if 
your desired popup is only a word or two this could be an option)
> 2. Is it possible to remove the zoom button?
Nope, not with the current implementation of leaflet
> 3. If not in R, is it possible to do the above in the output html?
I am not sure about the html output file, but I am sure there are ways 
to achieve what you want with some additional JavaScript. The best place 
to ask such a question would be StackOverflow. Many more htmlwidgets 
people lurk around there than they do on this mailing list.

HTH
Tim
>
> Thanks!
>
> Jaya
>
> ?
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
#####################################
Tim Appelhans
Department of Geography
Environmental Informatics
Philipps Universit?t Marburg
Deutschhausstra?e 12
Raum 00A08
35032 Marburg (Paketpost: 35037 Marburg)
Germany

Tel +49 (0) 6421 28-25957

http://environmentalinformatics-marburg.de/


From Roger.Bivand at nhh.no  Tue Aug 30 08:43:47 2016
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 30 Aug 2016 08:43:47 +0200
Subject: [R-sig-Geo] SLX model for splm package in R
In-Reply-To: <1715852819.19230883.1472522945889.JavaMail.root@usp.br>
References: <1715852819.19230883.1472522945889.JavaMail.root@usp.br>
Message-ID: <alpine.LFD.2.20.1608300834480.4345@reclus.nhh.no>

On Tue, 30 Aug 2016, dfamaral at usp.br wrote:

> Dear all,
>
> Impacts in SLX model are calculated directly by parameters estimation:
>
> http://onlinelibrary.wiley.com/doi/10.1111/jors.12188/abstract
>
> Beta1 gives direct impact and Beta 2 the indirect:
>
> y = beta1*X + beta2*WX + e
>

Yes, but you need the total impact beta1+beta2, but more work to infer 
from that sum, which is what you need to assess the impact of X.

> I understand W must multiply T times the X matrix (T is the lenght of 
> time series for a panel data). And variables are demeaned after WX is 
> calculated.

Kronecker product of sparse matrices. Please contribute a patch for 
create_WX if desirable.

Please motivate the demean-after-lag concusion. Will this not affect the 
direct link between X and WX?

Roger

>
> Daniel.
>
> ----- Mensagem original -----
>
>
> De: "Roger Bivand" <Roger.Bivand at nhh.no>
> Para: "Burcu Ozuduru" <bozuduru at gmail.com>
> Cc: dfamaral at usp.br, r-sig-geo at r-project.org
> Enviadas: Segunda-feira, 29 de Agosto de 2016 4:13:26
> Assunto: Re: [R-sig-Geo] SLX model for splm package in R
>
> This is far too ad-hoc a discussion. For Spatial panel SLX, please read
> carefully:
>
> http://dx.doi.org/10.1016/j.spasta.2014.02.002
> DOI 10.1007/s10109-015-0217-3
> DOI: 10.1111/jors.12188
>
> for a view of the state of play. One question - should you demean the X
> variables before taking spatial lags? This does not apply to cross-section
> models for which spdep::create_WX() was written, for obvious reasons. A
> second question - how do you handle the calculation of total impacts in
> this setting? In cross-section models, this is reasonably easy, by linear
> combination. But in spatial panel SLX models, is it easy? What does the
> literature suggest?
>
> On Mon, 29 Aug 2016, Burcu Ozuduru wrote:
>
>> Hi,
>>
>> This is a great question because I faced the same problem a while back.
>> What I did is to obtain the spatial weight matrix as (have spdep
>> installed).
>>
>> S47matrix<-W1%*%S47
>>
>> and then put it in my data frame and equation. Btw, above W1 is a spatial
>> weights matrix I obtained from a neighbor list
>> (W1=as.matrix(as_dgRMatrix_listw(ccListw))) and S47 is the dependent
>> variable.
>>
>> m2<-data.frame(S41,S46,S47,S65,S68,S47matrix,MAD10000,NQPDA10000,TPBtA10000,DivA10000,Lnk10000)
>> summary(m2<-zeroinfl(S47~MAD10000+NQPDA10000+S47matrix, dist="negbin"))
>>
>> I also wanted to ask whether I was on the right track. Professor Bivand, if
>> this is a common problem could you direct us to a relevant page -if
>> available and if at all possible- please? Your advice would be sincerely
>> appreciated.
>
> This is an inappropriate question for this thread (SLX spatial panel
> models). You must refer to the literature, and understand what you are
> doing:
>
> zeroinfl(S47~MAD10000+NQPDA10000+S47matrix, dist="negbin")
>
> is completely wrong, as S47matrix is Wy, the spatial lag of the dependent
> variable, and this spatial lag model of response S47 cannot be estimated
> using pscl::zeroinfl (do say which package provides the functions you
> mention). Your only recourse is to write your own Bayesian model. It is
> even extremely likely that this model doesn't make any substantive sense,
> unless you have a good understanding about why S47 at i (for all i) should
> be simultaneously caused by the full set of values of S47. A model in the
> error might make sense (a zero inflated negbin model with an additive mrf
> random effect (maybe R2BayesX 10.18637/jss.v014.i11).
>
> An SLX zero inflated negbin model could maybe apply, in which case
> pscl::zeroinfl might be applicable, but then you'd be including the lags
> of MAD10000 and NQPDA10000, not the response, and inference on total
> impacts of these variables could be challenging rather than obvious (MCMC
> summaries of the summed samples of the coefficients would work, but here
> no MCMC I think - R2BayesX might help).
>
> Most of these issues are far more complex than students or their
> supervisors understand, do ask an experienced applied statistician (I'm
> not an applied statistician, don't rely on my suggestions, you yourself
> are responsible for your results).
>
> Hope this clarifies,
>
> Roger
>
>>
>> Kind Regards-
>>
>> Thanks-
>>
>> Burcu
>>
>> ---
>>
>> Burcu H. Ozuduru,
>> Gazi University, Faculty of Architecture,
>> Department of City and Regional Planning
>> Maltepe-Ankara Turkey
>> t: +90-312-5823701
>> e: bozuduru at gazi.edu.tr
>> http://websitem.gazi.edu.tr/bozuduru
>>
>>
>> On Mon, Aug 29, 2016 at 12:42 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>
>>> On Sun, 28 Aug 2016, dfamaral at usp.br wrote:
>>>
>>> Dear colleagues,
>>>>
>>>> Does anyone know how to implement Spatial Lag of X (SLX) model for panel
>>>> data using splm package? I tried the following to create a WX matrix and
>>>> then apply Fixed and Random Effects:
>>>>
>>>> tb <- read.csv2("panel.csv", header = TRUE, sep = ";", dec = ".")
>>>> time <- length(unique(tb$year))
>>>> X <- as.matrix(tb[ ,3:20])
>>>>
>>>
>>> class(X) is not "pseries", is it?
>>>
>>> WX <- slag(X, listw, maxlag = 1)
>>>>
>>>> I see that slag is applicable for vectors of pseries, but this command
>>>> led to the error message: "Error in UseMethod("slag"): no applicable method
>>>> for 'slag' applied to an object of class "c('matrix', 'double', 'numeric')"
>>>>
>>>
>>> slag.default() takes a vector, slag.pseries() a "pseries" object.
>>>
>>>
>>>> Is there any way to implement this SLX model for panel series?
>>>>
>>>
>>> Did you look at spdep::create_WX?
>>>
>>>
>>>> Regards,
>>>>
>>>> Daniel.
>>>>
>>>> [[alternative HTML version deleted]]
>>>>
>>>>
>>> Please do not post HTML - like insects, HTML carries infectious payloads
>>> and wastes bandwidth and server processing capacity.
>>>
>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>
>>> --
>>> Roger Bivand
>>> Department of Economics, Norwegian School of Economics,
>>> Helleveien 30, N-5045 Bergen, Norway.
>>> voice: +47 55 95 93 55; fax +47 55 95 91 00
>>> e-mail: Roger.Bivand at nhh.no
>>> http://orcid.org/0000-0003-2392-6140
>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>> http://depsy.org/person/434412
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
http://depsy.org/person/434412


From ptitle at umich.edu  Tue Aug 30 05:23:58 2016
From: ptitle at umich.edu (Pascal Title)
Date: Mon, 29 Aug 2016 23:23:58 -0400
Subject: [R-sig-Geo] importing raster with embedded colors
Message-ID: <CAPSA=ydMuq0gMReBLibbnU2HLxGVEhokSsusVi=nOsUf=0ftcQ@mail.gmail.com>

Hi all,

I've downloaded a shaded relief map from www.naturalearthdata.com (link to
specific raster:
http://www.naturalearthdata.com/downloads/50m-cross-blend-hypso/50m-cross-blended-hypso-with-shaded-relief-and-water/
).
This website provides rasters with built-in color schemes that look really
good. But I don't see how to import these colors into R with the raster. If
I read in the raster and plot, I get the default terrain color scheme.
If I load this .tif in QGIS, the color scheme is automatically loaded along
with it.

Is it possible to use the color scheme in R?

thanks!
-Pascal

-- 
Pascal Title
PhD candidate | Rabosky Lab <http://www.raboskylab.org/>
Dept of Ecology and Evolutionary Biology
University of Michigan
ptitle at umich.edu

pascaltitle.weebly.com

	[[alternative HTML version deleted]]


From benjamin.leutner at uni-wuerzburg.de  Tue Aug 30 10:54:38 2016
From: benjamin.leutner at uni-wuerzburg.de (Benjamin Leutner)
Date: Tue, 30 Aug 2016 10:54:38 +0200
Subject: [R-sig-Geo] importing raster with embedded colors
In-Reply-To: <CAPSA=ydMuq0gMReBLibbnU2HLxGVEhokSsusVi=nOsUf=0ftcQ@mail.gmail.com>
References: <CAPSA=ydMuq0gMReBLibbnU2HLxGVEhokSsusVi=nOsUf=0ftcQ@mail.gmail.com>
Message-ID: <a9870e70-8545-6a61-6e0c-3e7fdcdcc075@uni-wuerzburg.de>

If you import it as RasterBrick or RasterStack it should give you three 
RGB layers
These can then be plotted as an RGB composite:

b <- brick("your.tif")

## with raster
raster::plotRGB(b)

## or, if you prefer working with ggplot
RStoolbox::ggRGB(b, r = 1, g = 2, b = 3)

Cheers,
Benjamin

On 30.08.2016 05:23, Pascal Title wrote:
> Hi all,
>
> I've downloaded a shaded relief map from www.naturalearthdata.com (link to
> specific raster:
> http://www.naturalearthdata.com/downloads/50m-cross-blend-hypso/50m-cross-blended-hypso-with-shaded-relief-and-water/
> ).
> This website provides rasters with built-in color schemes that look really
> good. But I don't see how to import these colors into R with the raster. If
> I read in the raster and plot, I get the default terrain color scheme.
> If I load this .tif in QGIS, the color scheme is automatically loaded along
> with it.
>
> Is it possible to use the color scheme in R?
>
> thanks!
> -Pascal
>


-- 
Benjamin Leutner M.Sc.
PhD candidate

Department of Remote Sensing
University of Wuerzburg
Campus Hubland Nord 86
97074 Wuerzburg, Germany

Tel: +49-(0)931-31 89594
Email: benjamin.leutner at uni-wuerzburg.de
Web: http://www.fernerkundung.uni-wuerzburg.de


From mdsumner at gmail.com  Tue Aug 30 10:09:10 2016
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 30 Aug 2016 08:09:10 +0000
Subject: [R-sig-Geo] importing raster with embedded colors
In-Reply-To: <CAPSA=ydMuq0gMReBLibbnU2HLxGVEhokSsusVi=nOsUf=0ftcQ@mail.gmail.com>
References: <CAPSA=ydMuq0gMReBLibbnU2HLxGVEhokSsusVi=nOsUf=0ftcQ@mail.gmail.com>
Message-ID: <CAAcGz98DsYrrkUBGjo5j1NVy+DFcSOkU6_5M3u+mHnO8O7cXhA@mail.gmail.com>

Use brick() in place of raster() and plotRGB().

Cheers, Mike

On Tue, Aug 30, 2016, 17:30 Pascal Title <ptitle at umich.edu> wrote:

> Hi all,
>
> I've downloaded a shaded relief map from www.naturalearthdata.com (link to
> specific raster:
>
> http://www.naturalearthdata.com/downloads/50m-cross-blend-hypso/50m-cross-blended-hypso-with-shaded-relief-and-water/
> ).
> This website provides rasters with built-in color schemes that look really
> good. But I don't see how to import these colors into R with the raster. If
> I read in the raster and plot, I get the default terrain color scheme.
> If I load this .tif in QGIS, the color scheme is automatically loaded along
> with it.
>
> Is it possible to use the color scheme in R?
>
> thanks!
> -Pascal
>
> --
> Pascal Title
> PhD candidate | Rabosky Lab <http://www.raboskylab.org/>
> Dept of Ecology and Evolutionary Biology
> University of Michigan
> ptitle at umich.edu
>
> pascaltitle.weebly.com
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From a.brown at ieee.org  Tue Aug 30 11:31:02 2016
From: a.brown at ieee.org (Alexander Brown)
Date: Tue, 30 Aug 2016 05:31:02 -0400
Subject: [R-sig-Geo] importing raster with embedded colors
In-Reply-To: <CAPSA=ydMuq0gMReBLibbnU2HLxGVEhokSsusVi=nOsUf=0ftcQ@mail.gmail.com>
References: <CAPSA=ydMuq0gMReBLibbnU2HLxGVEhokSsusVi=nOsUf=0ftcQ@mail.gmail.com>
Message-ID: <CAAp_v86bUh0MrH0CQw8tokU6Gf8efRcyiFdkB+0Z8thTL=-51w@mail.gmail.com>

??
GDAL's R API is complete, and does provide access to image metadata
including color table mapping of pixel values in TIFF format rasters.  The
pixel value is used to index the color mapping table. See
http://gdal.org/gdal_datamodel.html and search for "color table" -- it's at
the far end of the page.  You may still have to find more info on use of
this color table by the map's designer.

Alex Brown (a.brown at ieee.org)

On Mon, Aug 29, 2016 at 11:23 PM, Pascal Title <ptitle at umich.edu> wrote:

> Hi all,
>
> I've downloaded a shaded relief map from www.naturalearthdata.com (link to
> specific raster:
> http://www.naturalearthdata.com/downloads/50m-cross-blend-
> hypso/50m-cross-blended-hypso-with-shaded-relief-and-water/
> ).
> This website provides rasters with built-in color schemes that look really
> good. But I don't see how to import these colors into R with the raster. If
> I read in the raster and plot, I get the default terrain color scheme.
> If I load this .tif in QGIS, the color scheme is automatically loaded along
> with it.
>
> Is it possible to use the color scheme in R?
>
> thanks!
> -Pascal
>
> --
> Pascal Title
> PhD candidate | Rabosky Lab <http://www.raboskylab.org/>
> Dept of Ecology and Evolutionary Biology
> University of Michigan
> ptitle at umich.edu
>
> pascaltitle.weebly.com
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From basille.web at ase-research.org  Tue Aug 30 17:25:20 2016
From: basille.web at ase-research.org (Mathieu Basille)
Date: Tue, 30 Aug 2016 11:25:20 -0400
Subject: [R-sig-Geo] rpostgis announcement
In-Reply-To: <ca4592a6-d603-66b3-0ec8-3f6c149b59d2@uni-muenster.de>
References: <CAECT9fmGWZzDq-LzNM6zog-xk-upXB8eLbtdiZqzxUjSd7mXBw@mail.gmail.com>
	<ca4592a6-d603-66b3-0ec8-3f6c149b59d2@uni-muenster.de>
Message-ID: <57C5A560.9040900@ase-research.org>

Thank you Edzer for the feedback!

We have been watching sfr, and I really look forward to its completion!

Now to answer your question, the choice of using WKT (and WKB from package
'wkb' when possible on write, for better performance) was initially driven
by the fact that Windows binaries for rgdal are not compiled with
PostgreSQL/PostGIS support, which is a huge problem. Having to deal with a
class of students (mostly using Windows) trying to make it work was just a
big mess! :)

In addition, on read, it also allows to subquery the data with any clause
(WHERE, ORDER BY, LIMIT, etc.), which was still not possible with rgdal
last time I checked (admittedly a few months ago).

All in all, rgeos::read/writeWKT (and additionally wkb::read/writeWKB)
gives us the flexibility that we were looking for. Note that we didn't
check how efficient it was in comparison with rgdal (in terms of performance).

As a side note, having EWKB/EWKT standardized and usable in R (for instance
through sfr) would be a real plus! In our case, dealing with projection
information (SRID) was really not straightforward...

Best,
Mathieu.


Le 29/08/2016 16:19, Edzer Pebesma a ?crit :
> Nice development!
> 
> In the simple features for R project, https://github.com/edzer/sfr , I
> have been writing direct (E)WKB <--> R conversions, and support reading
> tables with geometry from PostGIS, using sf::st_read_pg(db, table). I
> was thinking about how to do the writing when your package came!
> 
> The advantage of the sf package, over sp, is that it supports (will
> support) all 17 geometry types for 4 dimensions (XY, XYZ, XYM, XYZM).
> 
> In order to try to gain momentum for this, could you provide a few
> arguments and/or use cases for which this approach is more useful than
> readOGR/writeOGR in rgdal?
> 
> Best regards,
> 
> On 29/08/16 16:48, David Bucklin wrote:
>> Dear r-sig-geo list members,
>>
>> We'd like to announce the initial CRAN release of 'rpostgis' (v1.0.0),
>> which facilitates transfer between PostGIS "Geometry" objects (stored in
>> PostgreSQL databases) and R spatial objects. The package also contains a
>> variety of convenience functions which are supplemental to the excellent
>> 'RPostgreSQL' package for interfacing with a PostgreSQL/PostGIS database.
>>
>> To install the package:
>>
>> install.packages("rpostgis")
>>
>> The package main development area can be found on GitHub; any bugs, issues,
>> or feature requests can be submitted through the "issues" page there:
>>
>> https://github.com/mablab/rpostgis
> 
> I did!
> 
>>
>> David
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 

Mathieu Basille

basille at ufl.edu | http://ase-research.org/basille
+1 954-577-6314 | University of Florida FLREC

  ? Le tout est de tout dire, et je manque de mots
  Et je manque de temps, et je manque d'audace. ?
  ? Paul ?luard

This message is signed to guarantee its authenticity.
For a true private correspondence, use my public key
to encrypt your messages:

  http://mathieu.basille.net/pub.asc

Learn more: http://mzl.la/1BsOGiZ

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 819 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20160830/5ebd5f6d/attachment.bin>

From 380872441 at qq.com  Wed Aug 31 09:37:30 2016
From: 380872441 at qq.com (=?gb18030?B?TWVuZ2ppZSBaaG91?=)
Date: Wed, 31 Aug 2016 15:37:30 +0800
Subject: [R-sig-Geo] R-help:spgwr
Message-ID: <tencent_2935322322FE7D6B229F2115@qq.com>

Hi,

Sorry for the interruption.
 
I have a few problems about geographically weighted regression when using the gwr function (in the"spgwr" package). Could you help me to solve these problems or give some references? Thank you very much for your time!

The function will return a list of class "gwr".


In the "SDF", what are the meaning of these attributes list below?

"sum.w"


"pred"


Thank you again for your time??


Best wishes??
	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Wed Aug 31 10:25:26 2016
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 31 Aug 2016 10:25:26 +0200
Subject: [R-sig-Geo] R-help:spgwr
In-Reply-To: <tencent_2935322322FE7D6B229F2115@qq.com>
References: <tencent_2935322322FE7D6B229F2115@qq.com>
Message-ID: <alpine.LFD.2.20.1608311009040.20985@reclus.nhh.no>

On Wed, 31 Aug 2016, Mengjie Zhou wrote:

> Hi,
>
> Sorry for the interruption.
>
> I have a few problems about geographically weighted regression when 
> using the gwr function (in the"spgwr" package). Could you help me to 
> solve these problems or give some references? Thank you very much for 
> your time!
>
> The function will return a list of class "gwr".
>
>
> In the "SDF", what are the meaning of these attributes list below?

As in everything else, the only authoritative guide is to read the source 
code of the function. There, in .GWR_int() in R/gwr.R you see:

line 494		sum.w[i] <- sum(w.i)

(sum of weights for the i'th fit point)

lines 500-502
                 if (GWR_args$predictions) {
                     pred[i] <- sum(predx[i,] * betas[i,])
                 }

(the value of "predictions" depends on combinations of your input 
arguments, so pred are predictions at fit points, but why they are 
returned depends on the complete command you entered).

Always include a working, reproducible example from a built-in data set.

Hope this clarifies,

Roger


>
> "sum.w"
>
>
> "pred"
>
>
> Thank you again for your time??????
>
>
> Best wishes??????
> 	[[alternative HTML version deleted]]

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
http://depsy.org/person/434412


