From basille.web at ase-research.org  Fri Jun  2 05:53:59 2017
From: basille.web at ase-research.org (Mathieu Basille)
Date: Thu, 1 Jun 2017 23:53:59 -0400
Subject: [R-sig-Geo] Problem in ENFA: infinite or missing values
In-Reply-To: <7B16C76E8F4ABD4B8F0D70668E32D2CB96CFC3@ex-mbx-pro-01>
References: <7B16C76E8F4ABD4B8F0D70668E32D2CB96CFC3@ex-mbx-pro-01>
Message-ID: <11f8c5b6-c859-3356-7ea6-2090488ad237@ase-research.org>

Hey Perry,

It is not clear to me where the problem lies without more
details/explanations. As Mike said, can you come up with a reproducible
example? If you can't make it minimal, see if you can send me the data
privately, I'll try to investigate on my side.

Cheers,
Mathieu.


On 05/19/2017 02:51 AM, Perry Beasley-hall wrote:
> Hello everyone,
> I'm trying to do an ENFA using the package adehabitatHS. I'm following the example code and am creating the 'pr' file using:
> 
> pr <- slot(count.points(species, map), "data")[,1]
> 
> Where 'species' is a .csv file with two columns of latitude and longitude, and 'map' is a SpatialGridDataFrame file of 23 .asc inputs. For reference, I'm importing my .asc files using readGDAL and then using the cbind command to put them into the 'map' file.
> 
> I encounter the following warning message when trying to create 'pr':
> 
> 1: In points2grid(points, tolerance, round) :
>   grid has empty column/rows in dimension 1
> 2: In points2grid(points, tolerance, round) :
>   grid has empty column/rows in dimension 2
> 
> I assumed this would be alright, but I'm getting the subsequent error when I attempt the enfa command:
> 
> enfa1 <- enfa(pc, pr, scannf = FALSE)
> 
> Error in eigen(Se) : infinite or missing values in 'x'
> 
> Some searching online has told me that this might mean not all of my rows in the 'species' .csv correspond to variables in the 'map' file, but I don't think this is the case for my dataset.
> 
> Can anyone help me with this issue? Many thanks in advance.
> ____
> 
> Perry Beasley-Hall
> PhD Candidate
> School of Life and Environmental Sciences
> 
> THE UNIVERSITY OF SYDNEY
> Room 329, Edgeworth David Building A11
> Sydney NSW 2006, Australia
> E-mail: perry.beasley-hall at sydney.edu.au
> Phone: +61 420 494 584
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 

Mathieu Basille

basille at ufl.edu | http://ase-research.org/basille
+1 954-577-6314 | University of Florida FLREC

  ? Le tout est de tout dire, et je manque de mots
  Et je manque de temps, et je manque d'audace. ?
  ? Paul ?luard

This message is signed to guarantee its authenticity.
For a true private correspondence, use my public key
to encrypt your messages:

  http://mathieu.basille.net/pub.asc

Learn more: http://mzl.la/1BsOGiZ


From razz2526 at yahoo.com  Sat Jun  3 15:44:23 2017
From: razz2526 at yahoo.com (Rachel)
Date: Sat, 3 Jun 2017 13:44:23 +0000 (UTC)
Subject: [R-sig-Geo] Post Question
References: <2007205613.1324427.1496497463253.ref@mail.yahoo.com>
Message-ID: <2007205613.1324427.1496497463253@mail.yahoo.com>

I would like to post this question:
I am trying to figure out how to reassign small polygons to its nearest neighbor in R (similar to gdal_sieve.py function).
I created a spatial polygon file from a classified gridded dataset using the grid2polygons function in R. I would now like to take that polygon file and merge any polygons containing less than 6 pixels with its nearest largest neighbor. In the image link (https://i.stack.imgur.com/6BLvP.jpg), you can see an example of small polygons circled in blue. I would like those merged with the larger surround polygon. Alternatively, if there is a way to create a minimum threshold of 6 clumped pixels prior to the conversion to polygon stage, any suggestions for that method would be great as well.
There is a function in Gdal: gdal_sieve.py that can do exactly this (http://www.gdal.org/gdal_sieve.html) if you would like to get an idea of exactly what I would like to do. Does anyone know of a way to do this in R?
	[[alternative HTML version deleted]]


From fernandadebastiani at gmail.com  Tue Jun  6 23:57:49 2017
From: fernandadebastiani at gmail.com (Fernanda De Bastiani)
Date: Tue, 6 Jun 2017 17:57:49 -0400
Subject: [R-sig-Geo] spatstat - kppm function
Message-ID: <CAEFQeytN4GbX8Dn3z_H=ZB4UYD-5fCTvCqFtip0gCVYAKsOH5w@mail.gmail.com>

Dear Sir/Madam,

I am trying to use function kppm() of spatstat package with anisotropic
covariance option as the following:
#-------------------------------------------
  kppm(redwood, ~x, "LGCP", statistic="pcf",  covmodel=list(model="matern",
nu=0.3, Aniso = matrix(nc=2, c(1.5, 3, -3, 4))))
#-------------------------------------------
but it gives me an error message:

Error in rfInit(model = p, x = x, y = y, z = z, T = T, grid = grid,
distances = distances,  :
  'RFcov' :  'Aniso' : not of the required size: (2, 2) instead of
(undetermined, 1)

Please, could anyone help me to understand in which conditions nc=2 will
work?

Many thanks,
Fernanda

	[[alternative HTML version deleted]]


From adrian.baddeley at curtin.edu.au  Wed Jun  7 01:43:38 2017
From: adrian.baddeley at curtin.edu.au (Adrian Baddeley)
Date: Tue, 6 Jun 2017 23:43:38 +0000
Subject: [R-sig-Geo] spatstat - kppm function
Message-ID: <D55D5D6D.64BA%Adrian.Baddeley@curtin.edu.au>

On 07/06/17 09:57, Fernanda De Bastiani wrote:

>Dear Sir/Madam,
>I am trying to use function kppm() of spatstat package with anisotropic
>covariance option as the following:
>#-------------------------------------------
>    kppm(redwood, ~x, "LGCP", statistic="pcf",
>covmodel=list(model="matern",
>nu=0.3, Aniso = matrix(nc=2, c(1.5, 3, -3, 4))))
>#-------------------------------------------
>but it gives me an error message:
>Error in rfInit(model = p, x = x, y = y, z = z, T = T, grid = grid,
>distances = distances,  :
>    'RFcov' :  'Aniso' : not of the required size: (2, 2) instead of
>(undetermined, 1)
>Please, could anyone help me to understand in which conditions nc=2 will
>work?

The kppm() function is designed for models whose pair correlation function
is isotropic.
It cannot be used to fit an anisotropic model.

(Extending this to anisotropic models is conceivable but it would require
new theory as well as completely new software).

I?m sorry about the opaque error message. I?ll try to find a way to detect
anisotropic models and give a more meaningful message from the spatstat
code.

Adrian Baddeley


From flaxman at gmail.com  Wed Jun  7 12:22:39 2017
From: flaxman at gmail.com (Seth Flaxman)
Date: Wed, 7 Jun 2017 11:22:39 +0100
Subject: [R-sig-Geo] spatstat residuals.ppm with an intensity given as an
	image?
Message-ID: <CAPGk9pdpTB3-156NObH_-aPNXeF-W55hmP3UHM4AvOyXQspMiw@mail.gmail.com>

I've got the intensity of an inhomogeneous Poisson process (fit using
some new methods I'm working on, so not created by spatstat) as an
image object, the observed point pattern as a ppp object, and I'd like
to call residuals.ppm to compute residuals. Is there a simple way to
create a fitted point process model (ppm) from an image and points so
I can pass this directly to residuals.ppm?

Thanks,
Seth


From fernandadebastiani at gmail.com  Wed Jun  7 16:09:03 2017
From: fernandadebastiani at gmail.com (Fernanda De Bastiani)
Date: Wed, 7 Jun 2017 10:09:03 -0400
Subject: [R-sig-Geo] spatstat - kppm function
In-Reply-To: <D55D5D6D.64BA%Adrian.Baddeley@curtin.edu.au>
References: <D55D5D6D.64BA%Adrian.Baddeley@curtin.edu.au>
Message-ID: <CAEFQeyvaNxMZY9+XxiDd8hUzfN0A_OgoC83Q1YJMcp1VvkYaNw@mail.gmail.com>

Thank you very much for the information!

On 6 June 2017 at 19:43, Adrian Baddeley <adrian.baddeley at curtin.edu.au>
wrote:

> On 07/06/17 09:57, Fernanda De Bastiani wrote:
>
> >Dear Sir/Madam,
> >I am trying to use function kppm() of spatstat package with anisotropic
> >covariance option as the following:
> >#-------------------------------------------
> >    kppm(redwood, ~x, "LGCP", statistic="pcf",
> >covmodel=list(model="matern",
> >nu=0.3, Aniso = matrix(nc=2, c(1.5, 3, -3, 4))))
> >#-------------------------------------------
> >but it gives me an error message:
> >Error in rfInit(model = p, x = x, y = y, z = z, T = T, grid = grid,
> >distances = distances,  :
> >    'RFcov' :  'Aniso' : not of the required size: (2, 2) instead of
> >(undetermined, 1)
> >Please, could anyone help me to understand in which conditions nc=2 will
> >work?
>
> The kppm() function is designed for models whose pair correlation function
> is isotropic.
> It cannot be used to fit an anisotropic model.
>
> (Extending this to anisotropic models is conceivable but it would require
> new theory as well as completely new software).
>
> I?m sorry about the opaque error message. I?ll try to find a way to detect
> anisotropic models and give a more meaningful message from the spatstat
> code.
>
> Adrian Baddeley
>
>
>
>
>
>

	[[alternative HTML version deleted]]


From William.Capehart at sdsmt.edu  Tue Jun 13 19:53:44 2017
From: William.Capehart at sdsmt.edu (Capehart, William J)
Date: Tue, 13 Jun 2017 17:53:44 +0000
Subject: [R-sig-Geo] NetCDF OPeNDAP , R and Windows
Message-ID: <91999525-D457-45DD-A816-A9C3B99E35E3@sdsmt.edu>

Hello All:

I have undergrad students working with the R package with tablet PCs running Windows that are issued by the university via RStudio since that is what they will be trained on when they take their stats coursework.  I am trying to set things up so they can access data from our OPeNDAP server.

However, when windows runs it they are hit with the following error (which I also get on my windows build).

Specifically we are working with the ncdf4 package.

Error in R_nc4_open: NetCDF: Unknown file format
Error in nc_open(filename = URL_85) :
  Error in nc_open trying to open file http://kyrill.ias.sdsmt.edu:8080/thredds/dodsC/testAll/TSA_RCP85_CONUS_1920-2100.nc4

This happens with other OPeNDAP-strored files as well.

All is well when working in the unix environment.  Windows, not so much.

I have JFGI?ed for solutions that don?t involve Cygwin and am not finding much of a solution.

Is the problem with the developer of the R package or is the Windows libraries not OPeNDAP-compatible by virtue of existing on the Windows side of the game.

Otherwise is there a solution that does not require downloading everything for Windows users?

(And yes, I?ve pounded the table bringing in Macs as an official species of laptop.  They keep saying no.)

Cheers and Thanks Much
------------------------------------------------
Bill Capehart <William.Capehart at sdsmt.edu<mailto:William.Capehart at sdsmt.edu>>
Atmospheric and Environmental Sciences Program Coordinator
Civil and Environmental Engineering
201 Mineral Industries Building
South Dakota School of Mines and Technology
501 East St Joseph Street
Rapid City, SD 57701-3995
Ph: +1-605-394-1994   Mobile: +1-605-484-4692


	[[alternative HTML version deleted]]


From sarosama at feps.edu.eg  Tue Jun 13 20:26:07 2017
From: sarosama at feps.edu.eg (sara osama)
Date: Tue, 13 Jun 2017 21:26:07 +0300
Subject: [R-sig-Geo] Increasing resolution of stkrige maps
In-Reply-To: <CAJsLiQQAuafN13A=C8etbxa+XhbOkNn5cCq-r+3hW4cwDRAT5Q@mail.gmail.com>
References: <CAJsLiQTcivQyFSm9=kvULUFeX+_n0iRWhNseaXzcK+j01caW5g@mail.gmail.com>
 <CAJsLiQSxH4CnkF4EUPuPORt6Wo8eEnuC9Z8AXonsx8VZZiHBUQ@mail.gmail.com>
 <CAJsLiQQAuafN13A=C8etbxa+XhbOkNn5cCq-r+3hW4cwDRAT5Q@mail.gmail.com>
Message-ID: <CAJsLiQQVJbOwDY2McwHBvBnGCV2LRNua-Hp8ppNMxTyne6Yhqw@mail.gmail.com>

Dear all
I have created interpolated maps using stkrige in gstat but when copying it
and paste in word file the resolution  is not good enough is there any way
to increase the resolution of the created maps in R

Thanks in advance
Sara

	[[alternative HTML version deleted]]


From dcarlson at tamu.edu  Tue Jun 13 22:00:41 2017
From: dcarlson at tamu.edu (David L Carlson)
Date: Tue, 13 Jun 2017 20:00:41 +0000
Subject: [R-sig-Geo] Increasing resolution of stkrige maps
In-Reply-To: <CAJsLiQQVJbOwDY2McwHBvBnGCV2LRNua-Hp8ppNMxTyne6Yhqw@mail.gmail.com>
References: <CAJsLiQTcivQyFSm9=kvULUFeX+_n0iRWhNseaXzcK+j01caW5g@mail.gmail.com>
 <CAJsLiQSxH4CnkF4EUPuPORt6Wo8eEnuC9Z8AXonsx8VZZiHBUQ@mail.gmail.com>
 <CAJsLiQQAuafN13A=C8etbxa+XhbOkNn5cCq-r+3hW4cwDRAT5Q@mail.gmail.com>
 <CAJsLiQQVJbOwDY2McwHBvBnGCV2LRNua-Hp8ppNMxTyne6Yhqw@mail.gmail.com>
Message-ID: <7ad91873b1eb47a7bd001cc89b798c30@exch-2p-mbx-t2.ads.tamu.edu>

There is no stkrige() function in package gstat. Do you mean krigeST()?

You have many options in R for producing plots and charts in various formats and resolutions depending on your operating system:

> ?Devices

will give you more details for your specific operating system. For example,

pdf("MyFigure.pdf")
plot(. . .)
dev.off()

will produce a .pdf file in your current directory. You have control over the size and resolution of the plot and whether it should be vector or raster.

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

-----Original Message-----
From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of sara osama
Sent: Tuesday, June 13, 2017 1:26 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] Increasing resolution of stkrige maps

Dear all
I have created interpolated maps using stkrige in gstat but when copying it
and paste in word file the resolution  is not good enough is there any way
to increase the resolution of the created maps in R

Thanks in advance
Sara

	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From sarosama at feps.edu.eg  Tue Jun 13 22:18:41 2017
From: sarosama at feps.edu.eg (sara osama)
Date: Tue, 13 Jun 2017 23:18:41 +0300
Subject: [R-sig-Geo] Increasing resolution of stkrige maps
In-Reply-To: <7ad91873b1eb47a7bd001cc89b798c30@exch-2p-mbx-t2.ads.tamu.edu>
References: <CAJsLiQTcivQyFSm9=kvULUFeX+_n0iRWhNseaXzcK+j01caW5g@mail.gmail.com>
 <CAJsLiQSxH4CnkF4EUPuPORt6Wo8eEnuC9Z8AXonsx8VZZiHBUQ@mail.gmail.com>
 <CAJsLiQQAuafN13A=C8etbxa+XhbOkNn5cCq-r+3hW4cwDRAT5Q@mail.gmail.com>
 <CAJsLiQQVJbOwDY2McwHBvBnGCV2LRNua-Hp8ppNMxTyne6Yhqw@mail.gmail.com>
 <7ad91873b1eb47a7bd001cc89b798c30@exch-2p-mbx-t2.ads.tamu.edu>
Message-ID: <CAJsLiQShoEu70gVsO8ySpihJxXGM60kBWAb7_m4jkirw2aCqew@mail.gmail.com>

Thank you so much dr. Carlson I will try this I think it might help

On 13 Jun 2017 22:00, "David L Carlson" <dcarlson at tamu.edu> wrote:

> There is no stkrige() function in package gstat. Do you mean krigeST()?
>
> You have many options in R for producing plots and charts in various
> formats and resolutions depending on your operating system:
>
> > ?Devices
>
> will give you more details for your specific operating system. For example,
>
> pdf("MyFigure.pdf")
> plot(. . .)
> dev.off()
>
> will produce a .pdf file in your current directory. You have control over
> the size and resolution of the plot and whether it should be vector or
> raster.
>
> -------------------------------------
> David L Carlson
> Department of Anthropology
> Texas A&M University
> College Station, TX 77840-4352
>
> -----Original Message-----
> From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of
> sara osama
> Sent: Tuesday, June 13, 2017 1:26 PM
> To: r-sig-geo at r-project.org
> Subject: [R-sig-Geo] Increasing resolution of stkrige maps
>
> Dear all
> I have created interpolated maps using stkrige in gstat but when copying it
> and paste in word file the resolution  is not good enough is there any way
> to increase the resolution of the created maps in R
>
> Thanks in advance
> Sara
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From josephlewis1992 at gmail.com  Wed Jun 14 12:17:49 2017
From: josephlewis1992 at gmail.com (Joe Lewis)
Date: Wed, 14 Jun 2017 11:17:49 +0100
Subject: [R-sig-Geo] Using multiple transition layers in gdistance (least
	cost analysis)
Message-ID: <CAM0xMQ_zEVzTtqyvic-EdO=eQUtdFQAPnQqUm4y3gu+GJg8YDw@mail.gmail.com>

Dear all,

I have created shortest paths using slope with Tobler's (and others) cost
functions, but I'm wondering if anyone has used multiple transition layers
to create a more 'realistic' model?

I currently have a raster of rivers, with the rivers having a value of 1000
and the land as a value of 1. I would like to integrate this within the
model so as to block the travel through rivers.

I have found that I can do the following, which will define areas where
paths can go:


*rfac = asFactor(rivers == 0)rfactr <-  transition(rfac, "areas", 8)*

However, I'm not sure whether there needs to be a geocorrection after each
transition calculation, then multiplying the slope-transition layer and the
river-transition layer, or whether a single geocorrection should be done
after the two layers are multiplied together.

Any help, or links to where this has been done before would be appreciated.

Kind regards,
Joe

<http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
Virus-free.
www.avg.com
<http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
<#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>

	[[alternative HTML version deleted]]


From gestauffer at gmail.com  Wed Jun 14 15:35:20 2017
From: gestauffer at gmail.com (Glenn Stauffer)
Date: Wed, 14 Jun 2017 08:35:20 -0500
Subject: [R-sig-Geo] proj4string read by readOGR doesn't seem to precisely
	specify source shapefile projection
Message-ID: <007201d2e513$11d0ed90$3572c8b0$@gmail.com>

I have a shapefile that I imported into R using readOGR from the rgdal
package. I do a little bit of work with it, like adding attribute
information, etc, then export it as an ESRI shapefile again, with a new
name. However, when I bring both the original and new shapefile into ArcGIS,
it tells me that the CRS do not match. 

So, noting that all the projection parameters remain the same, but the
projection and coordinate system names are different, and the datum name is
dropped, my questions are:

1.	Is the second CRS the same as the first?
2.	If so, why did the names change, and why does ArcGIS no longer
recognize it as the same?
3.	If not, how did it get changed?
4.	Can the proj4string be modified to be more specific, and if so, why
did readOGR not already do this to preserve all the information?

I can use the new shapefiles just fine and readOGR interprets them as
identical, but it is a bit vexing that ArcGIS does not. And, I could of
course define it again in ArcGIS, but part of the motivation to work in R is
to obviate the need to point and click for many files.

I appreciate any insights or enlightenment. 

Thanks, 

Glenn

Here is the original projection information from ArcGIS:

Projected Coordinate System:    NAD_1983_HARN_Transverse_Mercator

Projection: Transverse_Mercator

False_Easting:  520000.00000000

False_Northing: -4480000.00000000

Central_Meridian:   -90.00000000

Scale_Factor:   0.99960000

Latitude_Of_Origin: 0.00000000

Linear Unit:    Meter

 

Geographic Coordinate System:   GCS_North_American_1983_HARN

Datum:  D_North_American_1983_HARN

Prime Meridian:     Greenwich

Angular Unit:   Degree

Here is the proj4string from R, which also agrees with the proj4string given
for this projection at www.spatialreference.org for epsg:3071 and also for
SR-ORG:7396.

+proj=tmerc +lat_0=0 +lon_0=-90 +k=0.9996 +x_0=520000 +y_0=-4480000
+ellps=GRS80 +units=m +no_defs

When I use writeOGR to export the SpatialPolygonsDataFrame with the above
proj4string, then bring it back into ArcGIS, the projection information is
given as the following, and is no longer recognized as identical to the
original.

Projected Coordinate System:    Transverse_Mercator

Projection: Transverse_Mercator

false_easting:  520000.00000000

false_northing: -4480000.00000000

central_meridian:   -90.00000000

scale_factor:   0.99960000

latitude_of_origin: 0.00000000

Linear Unit:    Meter

 

Geographic Coordinate System:   GCS_GRS 1980(IUGG, 1980)

Datum:  D_unknown

Prime Meridian:     Greenwich

Angular Unit:   Degree

 

 


	[[alternative HTML version deleted]]


From SWalbridge at esri.com  Wed Jun 14 17:14:16 2017
From: SWalbridge at esri.com (Shaun Walbridge)
Date: Wed, 14 Jun 2017 15:14:16 +0000
Subject: [R-sig-Geo] proj4string read by readOGR doesn't seem to
 precisely specify source shapefile projection
In-Reply-To: <007201d2e513$11d0ed90$3572c8b0$@gmail.com>
References: <007201d2e513$11d0ed90$3572c8b0$@gmail.com>
Message-ID: <D820C7B4-CDAA-4040-8DA1-780FE17A5C7F@esri.com>

Glen,

Round-tripping projection information can be tricky, in part because the
normalization routines vary between different stacks, and what counts
as the same form is also implementation dependent. In this case
(round-tripping with ArcGIS), you may be better off using the
arcgisbinding package [1], which can do the conversion to and from
ArcGIS native data types (including some that aren't available via
OGR/GDAL). It's easy enough to install [2], and also lets you build
Geoprocessing tools which speak directly to R. I imagine there's also a
pure R solution to the normalization, but it would likely have side
effects for existing packages, and may not be easily solved.

If you know that your data is fine and want a simple solution, you could
also just overwrite the new shapefile?s .prj file with a copy of the
original.

Cheers,
Shaun

1. https://urldefense.proofpoint.com/v2/url?u=https-3A__r-2Darcgis.github.io_assets_arcgisbinding.pdf&d=DwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=fCPRb7QX-vd5bnO9gIJHCiX852SVUtyYX--xtCKtpfk&m=9su2o7yjMBqHmqZT3kZAlTRZwPC_W0Tm65yvo7NmjLw&s=pIBxR3icnDLcn639TzBc0mkXy6Tv7G9Ip7xcWSAMweU&e= 
2. https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_R-2DArcGIS_r-2Dbridge-2Dinstall&d=DwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=fCPRb7QX-vd5bnO9gIJHCiX852SVUtyYX--xtCKtpfk&m=9su2o7yjMBqHmqZT3kZAlTRZwPC_W0Tm65yvo7NmjLw&s=JADt055JJUuCG1eltd7N9o5f_fu_geqGlnzO62SGtGM&e= 

On 6/14/17, 9:35 AM, "R-sig-Geo on behalf of Glenn Stauffer" <r-sig-geo-bounces at r-project.org on behalf of gestauffer at gmail.com> wrote:

    I have a shapefile that I imported into R using readOGR from the rgdal
    package. I do a little bit of work with it, like adding attribute
    information, etc, then export it as an ESRI shapefile again, with a new
    name. However, when I bring both the original and new shapefile into ArcGIS,
    it tells me that the CRS do not match. 
    
    So, noting that all the projection parameters remain the same, but the
    projection and coordinate system names are different, and the datum name is
    dropped, my questions are:
    
    1.	Is the second CRS the same as the first?
    2.	If so, why did the names change, and why does ArcGIS no longer
    recognize it as the same?
    3.	If not, how did it get changed?
    4.	Can the proj4string be modified to be more specific, and if so, why
    did readOGR not already do this to preserve all the information?
    
    I can use the new shapefiles just fine and readOGR interprets them as
    identical, but it is a bit vexing that ArcGIS does not. And, I could of
    course define it again in ArcGIS, but part of the motivation to work in R is
    to obviate the need to point and click for many files.
    
    I appreciate any insights or enlightenment. 
    
    Thanks, 
    
    Glenn
    
    Here is the original projection information from ArcGIS:
    
    Projected Coordinate System:    NAD_1983_HARN_Transverse_Mercator
    
    Projection: Transverse_Mercator
    
    False_Easting:  520000.00000000
    
    False_Northing: -4480000.00000000
    
    Central_Meridian:   -90.00000000
    
    Scale_Factor:   0.99960000
    
    Latitude_Of_Origin: 0.00000000
    
    Linear Unit:    Meter
    
     
    
    Geographic Coordinate System:   GCS_North_American_1983_HARN
    
    Datum:  D_North_American_1983_HARN
    
    Prime Meridian:     Greenwich
    
    Angular Unit:   Degree
    
    Here is the proj4string from R, which also agrees with the proj4string given
    for this projection at www.spatialreference.org for epsg:3071 and also for
    SR-ORG:7396.
    
    +proj=tmerc +lat_0=0 +lon_0=-90 +k=0.9996 +x_0=520000 +y_0=-4480000
    +ellps=GRS80 +units=m +no_defs
    
    When I use writeOGR to export the SpatialPolygonsDataFrame with the above
    proj4string, then bring it back into ArcGIS, the projection information is
    given as the following, and is no longer recognized as identical to the
    original.
    
    Projected Coordinate System:    Transverse_Mercator
    
    Projection: Transverse_Mercator
    
    false_easting:  520000.00000000
    
    false_northing: -4480000.00000000
    
    central_meridian:   -90.00000000
    
    scale_factor:   0.99960000
    
    latitude_of_origin: 0.00000000
    
    Linear Unit:    Meter
    
     
    
    Geographic Coordinate System:   GCS_GRS 1980(IUGG, 1980)
    
    Datum:  D_unknown
    
    Prime Meridian:     Greenwich
    
    Angular Unit:   Degree
    
     
    
     
    
    
    	[[alternative HTML version deleted]]
    
    _______________________________________________
    R-sig-Geo mailing list
    R-sig-Geo at r-project.org
    https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dgeo&d=DwICAg&c=n6-cguzQvX_tUIrZOS_4Og&r=YFaRLkcUCdDkLrpTbNOUV9J1CwYBCTMwgm5tdQkRSm4&m=Ws5QzgjxjD1HGvdDia-3XoimuEiDzcY4Wh-CLS905w0&s=gBdaQAI6IxVnnl8qdt_GTEeiM7f2_5dd15qzQOsQ_64&e= 
    



From edzer.pebesma at uni-muenster.de  Wed Jun 14 18:11:55 2017
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 14 Jun 2017 18:11:55 +0200
Subject: [R-sig-Geo] proj4string read by readOGR doesn't seem to
 precisely specify source shapefile projection
In-Reply-To: <D820C7B4-CDAA-4040-8DA1-780FE17A5C7F@esri.com>
References: <007201d2e513$11d0ed90$3572c8b0$@gmail.com>
 <D820C7B4-CDAA-4040-8DA1-780FE17A5C7F@esri.com>
Message-ID: <1bed0fce-423e-8a78-871c-bcb4493972ae@uni-muenster.de>

Also relevant to this question is this discussion/issue:

https://github.com/edzer/sfr/issues/380

On 14/06/17 17:14, Shaun Walbridge wrote:
> Glen,
> 
> Round-tripping projection information can be tricky, in part because the
> normalization routines vary between different stacks, and what counts
> as the same form is also implementation dependent. In this case
> (round-tripping with ArcGIS), you may be better off using the
> arcgisbinding package [1], which can do the conversion to and from
> ArcGIS native data types (including some that aren't available via
> OGR/GDAL). It's easy enough to install [2], and also lets you build
> Geoprocessing tools which speak directly to R. I imagine there's also a
> pure R solution to the normalization, but it would likely have side
> effects for existing packages, and may not be easily solved.
> 
> If you know that your data is fine and want a simple solution, you could
> also just overwrite the new shapefile?s .prj file with a copy of the
> original.
> 
> Cheers,
> Shaun
> 
> 1. https://urldefense.proofpoint.com/v2/url?u=https-3A__r-2Darcgis.github.io_assets_arcgisbinding.pdf&d=DwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=fCPRb7QX-vd5bnO9gIJHCiX852SVUtyYX--xtCKtpfk&m=9su2o7yjMBqHmqZT3kZAlTRZwPC_W0Tm65yvo7NmjLw&s=pIBxR3icnDLcn639TzBc0mkXy6Tv7G9Ip7xcWSAMweU&e= 
> 2. https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_R-2DArcGIS_r-2Dbridge-2Dinstall&d=DwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=fCPRb7QX-vd5bnO9gIJHCiX852SVUtyYX--xtCKtpfk&m=9su2o7yjMBqHmqZT3kZAlTRZwPC_W0Tm65yvo7NmjLw&s=JADt055JJUuCG1eltd7N9o5f_fu_geqGlnzO62SGtGM&e= 
> 
> On 6/14/17, 9:35 AM, "R-sig-Geo on behalf of Glenn Stauffer" <r-sig-geo-bounces at r-project.org on behalf of gestauffer at gmail.com> wrote:
> 
>     I have a shapefile that I imported into R using readOGR from the rgdal
>     package. I do a little bit of work with it, like adding attribute
>     information, etc, then export it as an ESRI shapefile again, with a new
>     name. However, when I bring both the original and new shapefile into ArcGIS,
>     it tells me that the CRS do not match. 
>     
>     So, noting that all the projection parameters remain the same, but the
>     projection and coordinate system names are different, and the datum name is
>     dropped, my questions are:
>     
>     1.	Is the second CRS the same as the first?
>     2.	If so, why did the names change, and why does ArcGIS no longer
>     recognize it as the same?
>     3.	If not, how did it get changed?
>     4.	Can the proj4string be modified to be more specific, and if so, why
>     did readOGR not already do this to preserve all the information?
>     
>     I can use the new shapefiles just fine and readOGR interprets them as
>     identical, but it is a bit vexing that ArcGIS does not. And, I could of
>     course define it again in ArcGIS, but part of the motivation to work in R is
>     to obviate the need to point and click for many files.
>     
>     I appreciate any insights or enlightenment. 
>     
>     Thanks, 
>     
>     Glenn
>     
>     Here is the original projection information from ArcGIS:
>     
>     Projected Coordinate System:    NAD_1983_HARN_Transverse_Mercator
>     
>     Projection: Transverse_Mercator
>     
>     False_Easting:  520000.00000000
>     
>     False_Northing: -4480000.00000000
>     
>     Central_Meridian:   -90.00000000
>     
>     Scale_Factor:   0.99960000
>     
>     Latitude_Of_Origin: 0.00000000
>     
>     Linear Unit:    Meter
>     
>      
>     
>     Geographic Coordinate System:   GCS_North_American_1983_HARN
>     
>     Datum:  D_North_American_1983_HARN
>     
>     Prime Meridian:     Greenwich
>     
>     Angular Unit:   Degree
>     
>     Here is the proj4string from R, which also agrees with the proj4string given
>     for this projection at www.spatialreference.org for epsg:3071 and also for
>     SR-ORG:7396.
>     
>     +proj=tmerc +lat_0=0 +lon_0=-90 +k=0.9996 +x_0=520000 +y_0=-4480000
>     +ellps=GRS80 +units=m +no_defs
>     
>     When I use writeOGR to export the SpatialPolygonsDataFrame with the above
>     proj4string, then bring it back into ArcGIS, the projection information is
>     given as the following, and is no longer recognized as identical to the
>     original.
>     
>     Projected Coordinate System:    Transverse_Mercator
>     
>     Projection: Transverse_Mercator
>     
>     false_easting:  520000.00000000
>     
>     false_northing: -4480000.00000000
>     
>     central_meridian:   -90.00000000
>     
>     scale_factor:   0.99960000
>     
>     latitude_of_origin: 0.00000000
>     
>     Linear Unit:    Meter
>     
>      
>     
>     Geographic Coordinate System:   GCS_GRS 1980(IUGG, 1980)
>     
>     Datum:  D_unknown
>     
>     Prime Meridian:     Greenwich
>     
>     Angular Unit:   Degree
>     
>      
>     
>      
>     
>     
>     	[[alternative HTML version deleted]]
>     
>     _______________________________________________
>     R-sig-Geo mailing list
>     R-sig-Geo at r-project.org
>     https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dgeo&d=DwICAg&c=n6-cguzQvX_tUIrZOS_4Og&r=YFaRLkcUCdDkLrpTbNOUV9J1CwYBCTMwgm5tdQkRSm4&m=Ws5QzgjxjD1HGvdDia-3XoimuEiDzcY4Wh-CLS905w0&s=gBdaQAI6IxVnnl8qdt_GTEeiM7f2_5dd15qzQOsQ_64&e= 
>     
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 473 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170614/d420fdc6/attachment.sig>

From gestauffer at gmail.com  Wed Jun 14 19:23:43 2017
From: gestauffer at gmail.com (Glenn Stauffer)
Date: Wed, 14 Jun 2017 12:23:43 -0500
Subject: [R-sig-Geo] proj4string read by readOGR doesn't seem to
	precisely specify source shapefile projection
In-Reply-To: <D820C7B4-CDAA-4040-8DA1-780FE17A5C7F@esri.com>
References: <007201d2e513$11d0ed90$3572c8b0$@gmail.com>
 <D820C7B4-CDAA-4040-8DA1-780FE17A5C7F@esri.com>
Message-ID: <00a701d2e532$f9d29a20$ed77ce60$@gmail.com>

Thanks Shaun, 
I have not gotten the arcgisbinding package to work yet, and will play around with it some more later. For now, overwriting the .prj file works just fine and does what I want, but it seems like a less-than-satisfactory general solution.

Glenn 

-----Original Message-----
From: Shaun Walbridge [mailto:SWalbridge at esri.com] 
Sent: Wednesday, June 14, 2017 10:14 AM
To: Glenn Stauffer; r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] proj4string read by readOGR doesn't seem to precisely specify source shapefile projection

Glen,



Round-tripping projection information can be tricky, in part because the

normalization routines vary between different stacks, and what counts

as the same form is also implementation dependent. In this case

(round-tripping with ArcGIS), you may be better off using the

arcgisbinding package [1], which can do the conversion to and from

ArcGIS native data types (including some that aren't available via

OGR/GDAL). It's easy enough to install [2], and also lets you build

Geoprocessing tools which speak directly to R. I imagine there's also a

pure R solution to the normalization, but it would likely have side

effects for existing packages, and may not be easily solved.



If you know that your data is fine and want a simple solution, you could

also just overwrite the new shapefile?s .prj file with a copy of the

original.



Cheers,

Shaun



1. https://urldefense.proofpoint.com/v2/url?u=https-3A__r-2Darcgis.github.io_assets_arcgisbinding.pdf&d=DwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=5UpQjHXPqFUScg58BUIFe0V27sq0j0SU7iU72HpYMRE&m=_FSAFRAGaC_k8hnGwM32OZirmWVi4Y5JSgcMf6lcemc&s=_ZSX1hSgmnuhYzWoUo1N-3o_6nKHXkyG4VwSmOB276M&e= 

2. https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_R-2DArcGIS_r-2Dbridge-2Dinstall&d=DwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=5UpQjHXPqFUScg58BUIFe0V27sq0j0SU7iU72HpYMRE&m=_FSAFRAGaC_k8hnGwM32OZirmWVi4Y5JSgcMf6lcemc&s=xV9M4ZmMdIeeGjFZaKaEt-SQA4CAvcB0_UWCjm-qUX0&e= 



On 6/14/17, 9:35 AM, "R-sig-Geo on behalf of Glenn Stauffer" <r-sig-geo-bounces at r-project.org on behalf of gestauffer at gmail.com> wrote:



    I have a shapefile that I imported into R using readOGR from the rgdal

    package. I do a little bit of work with it, like adding attribute

    information, etc, then export it as an ESRI shapefile again, with a new

    name. However, when I bring both the original and new shapefile into ArcGIS,

    it tells me that the CRS do not match. 

    

    So, noting that all the projection parameters remain the same, but the

    projection and coordinate system names are different, and the datum name is

    dropped, my questions are:

    

    1.	Is the second CRS the same as the first?

    2.	If so, why did the names change, and why does ArcGIS no longer

    recognize it as the same?

    3.	If not, how did it get changed?

    4.	Can the proj4string be modified to be more specific, and if so, why

    did readOGR not already do this to preserve all the information?

    

    I can use the new shapefiles just fine and readOGR interprets them as

    identical, but it is a bit vexing that ArcGIS does not. And, I could of

    course define it again in ArcGIS, but part of the motivation to work in R is

    to obviate the need to point and click for many files.

    

    I appreciate any insights or enlightenment. 

    

    Thanks, 

    

    Glenn

    

    Here is the original projection information from ArcGIS:

    

    Projected Coordinate System:    NAD_1983_HARN_Transverse_Mercator

    

    Projection: Transverse_Mercator

    

    False_Easting:  520000.00000000

    

    False_Northing: -4480000.00000000

    

    Central_Meridian:   -90.00000000

    

    Scale_Factor:   0.99960000

    

    Latitude_Of_Origin: 0.00000000

    

    Linear Unit:    Meter

    

     

    

    Geographic Coordinate System:   GCS_North_American_1983_HARN

    

    Datum:  D_North_American_1983_HARN

    

    Prime Meridian:     Greenwich

    

    Angular Unit:   Degree

    

    Here is the proj4string from R, which also agrees with the proj4string given

    for this projection at www.spatialreference.org for epsg:3071 and also for

    SR-ORG:7396.

    

    +proj=tmerc +lat_0=0 +lon_0=-90 +k=0.9996 +x_0=520000 +y_0=-4480000

    +ellps=GRS80 +units=m +no_defs

    

    When I use writeOGR to export the SpatialPolygonsDataFrame with the above

    proj4string, then bring it back into ArcGIS, the projection information is

    given as the following, and is no longer recognized as identical to the

    original.

    

    Projected Coordinate System:    Transverse_Mercator

    

    Projection: Transverse_Mercator

    

    false_easting:  520000.00000000

    

    false_northing: -4480000.00000000

    

    central_meridian:   -90.00000000

    

    scale_factor:   0.99960000

    

    latitude_of_origin: 0.00000000

    

    Linear Unit:    Meter

    

     

    

    Geographic Coordinate System:   GCS_GRS 1980(IUGG, 1980)

    

    Datum:  D_unknown

    

    Prime Meridian:     Greenwich

    

    Angular Unit:   Degree

    

     

    

     

    

    

    	[[alternative HTML version deleted]]

    

    _______________________________________________

    R-sig-Geo mailing list

    R-sig-Geo at r-project.org

    https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dgeo&d=DwICAg&c=n6-cguzQvX_tUIrZOS_4Og&r=YFaRLkcUCdDkLrpTbNOUV9J1CwYBCTMwgm5tdQkRSm4&m=Ws5QzgjxjD1HGvdDia-3XoimuEiDzcY4Wh-CLS905w0&s=gBdaQAI6IxVnnl8qdt_GTEeiM7f2_5dd15qzQOsQ_64&e= 

    


From gestauffer at gmail.com  Wed Jun 14 19:48:33 2017
From: gestauffer at gmail.com (Glenn Stauffer)
Date: Wed, 14 Jun 2017 12:48:33 -0500
Subject: [R-sig-Geo] proj4string read by readOGR doesn't seem to
	precisely specify source shapefile projection
In-Reply-To: <1bed0fce-423e-8a78-871c-bcb4493972ae@uni-muenster.de>
References: <007201d2e513$11d0ed90$3572c8b0$@gmail.com>
 <D820C7B4-CDAA-4040-8DA1-780FE17A5C7F@esri.com>
 <1bed0fce-423e-8a78-871c-bcb4493972ae@uni-muenster.de>
Message-ID: <00ac01d2e536$71e8c2c0$55ba4840$@gmail.com>

Thanks for the link. That does shed some light, but I'm not sure I entirely understand. The .prj file does not store the EPSG ID, but it looks like the shapefile properties does include that information. Furthermore, when I overwrite the .prj file as Shaun suggested, the properties of the associated shapefile now does show " WKID: 3071 Authority: EPSG " whereas it did not previously. But aside from that, I'm  not sure why readOGR didn't identify the datum information in the first place. When I add "+datum=NAD83" to the proj4string, ArcGIS seems to accept it as the same CRS, even though the original datum was NAD83 HARN (which I don't know how to specify in R). But I am pretty new to this.... For now, overwriting the .prj with the desired one seems to work for me (and it is easy to do in a script).
Glenn

-----Original Message-----
From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Edzer Pebesma
Sent: Wednesday, June 14, 2017 11:12 AM
To: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] proj4string read by readOGR doesn't seem to precisely specify source shapefile projection

Also relevant to this question is this discussion/issue:

https://github.com/edzer/sfr/issues/380

On 14/06/17 17:14, Shaun Walbridge wrote:
> Glen,
> 
> Round-tripping projection information can be tricky, in part because 
> the normalization routines vary between different stacks, and what 
> counts as the same form is also implementation dependent. In this case 
> (round-tripping with ArcGIS), you may be better off using the 
> arcgisbinding package [1], which can do the conversion to and from 
> ArcGIS native data types (including some that aren't available via 
> OGR/GDAL). It's easy enough to install [2], and also lets you build 
> Geoprocessing tools which speak directly to R. I imagine there's also 
> a pure R solution to the normalization, but it would likely have side 
> effects for existing packages, and may not be easily solved.
> 
> If you know that your data is fine and want a simple solution, you 
> could also just overwrite the new shapefile?s .prj file with a copy of 
> the original.
> 
> Cheers,
> Shaun
> 
> 1. 
> https://urldefense.proofpoint.com/v2/url?u=https-3A__r-2Darcgis.github
> .io_assets_arcgisbinding.pdf&d=DwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=fCPRb
> 7QX-vd5bnO9gIJHCiX852SVUtyYX--xtCKtpfk&m=9su2o7yjMBqHmqZT3kZAlTRZwPC_W
> 0Tm65yvo7NmjLw&s=pIBxR3icnDLcn639TzBc0mkXy6Tv7G9Ip7xcWSAMweU&e=
> 2. 
> https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_R-2DAr
> cGIS_r-2Dbridge-2Dinstall&d=DwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=fCPRb7QX
> -vd5bnO9gIJHCiX852SVUtyYX--xtCKtpfk&m=9su2o7yjMBqHmqZT3kZAlTRZwPC_W0Tm
> 65yvo7NmjLw&s=JADt055JJUuCG1eltd7N9o5f_fu_geqGlnzO62SGtGM&e=
> 
> On 6/14/17, 9:35 AM, "R-sig-Geo on behalf of Glenn Stauffer" <r-sig-geo-bounces at r-project.org on behalf of gestauffer at gmail.com> wrote:
> 
>     I have a shapefile that I imported into R using readOGR from the rgdal
>     package. I do a little bit of work with it, like adding attribute
>     information, etc, then export it as an ESRI shapefile again, with a new
>     name. However, when I bring both the original and new shapefile into ArcGIS,
>     it tells me that the CRS do not match. 
>     
>     So, noting that all the projection parameters remain the same, but the
>     projection and coordinate system names are different, and the datum name is
>     dropped, my questions are:
>     
>     1.	Is the second CRS the same as the first?
>     2.	If so, why did the names change, and why does ArcGIS no longer
>     recognize it as the same?
>     3.	If not, how did it get changed?
>     4.	Can the proj4string be modified to be more specific, and if so, why
>     did readOGR not already do this to preserve all the information?
>     
>     I can use the new shapefiles just fine and readOGR interprets them as
>     identical, but it is a bit vexing that ArcGIS does not. And, I could of
>     course define it again in ArcGIS, but part of the motivation to work in R is
>     to obviate the need to point and click for many files.
>     
>     I appreciate any insights or enlightenment. 
>     
>     Thanks,
>     
>     Glenn
>     
>     Here is the original projection information from ArcGIS:
>     
>     Projected Coordinate System:    NAD_1983_HARN_Transverse_Mercator
>     
>     Projection: Transverse_Mercator
>     
>     False_Easting:  520000.00000000
>     
>     False_Northing: -4480000.00000000
>     
>     Central_Meridian:   -90.00000000
>     
>     Scale_Factor:   0.99960000
>     
>     Latitude_Of_Origin: 0.00000000
>     
>     Linear Unit:    Meter
>     
>      
>     
>     Geographic Coordinate System:   GCS_North_American_1983_HARN
>     
>     Datum:  D_North_American_1983_HARN
>     
>     Prime Meridian:     Greenwich
>     
>     Angular Unit:   Degree
>     
>     Here is the proj4string from R, which also agrees with the proj4string given
>     for this projection at www.spatialreference.org for epsg:3071 and also for
>     SR-ORG:7396.
>     
>     +proj=tmerc +lat_0=0 +lon_0=-90 +k=0.9996 +x_0=520000 +y_0=-4480000
>     +ellps=GRS80 +units=m +no_defs
>     
>     When I use writeOGR to export the SpatialPolygonsDataFrame with the above
>     proj4string, then bring it back into ArcGIS, the projection information is
>     given as the following, and is no longer recognized as identical to the
>     original.
>     
>     Projected Coordinate System:    Transverse_Mercator
>     
>     Projection: Transverse_Mercator
>     
>     false_easting:  520000.00000000
>     
>     false_northing: -4480000.00000000
>     
>     central_meridian:   -90.00000000
>     
>     scale_factor:   0.99960000
>     
>     latitude_of_origin: 0.00000000
>     
>     Linear Unit:    Meter
>     
>      
>     
>     Geographic Coordinate System:   GCS_GRS 1980(IUGG, 1980)
>     
>     Datum:  D_unknown
>     
>     Prime Meridian:     Greenwich
>     
>     Angular Unit:   Degree
>     
>      
>     
>      
>     
>     
>     	[[alternative HTML version deleted]]
>     
>     _______________________________________________
>     R-sig-Geo mailing list
>     R-sig-Geo at r-project.org
>     
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mail
> man_listinfo_r-2Dsig-2Dgeo&d=DwICAg&c=n6-cguzQvX_tUIrZOS_4Og&r=YFaRLkc
> UCdDkLrpTbNOUV9J1CwYBCTMwgm5tdQkRSm4&m=Ws5QzgjxjD1HGvdDia-3XoimuEiDzcY
> 4Wh-CLS905w0&s=gBdaQAI6IxVnnl8qdt_GTEeiM7f2_5dd15qzQOsQ_64&e=
>     
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

--
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/


From Roger.Bivand at nhh.no  Wed Jun 14 22:52:41 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 14 Jun 2017 22:52:41 +0200
Subject: [R-sig-Geo] proj4string read by readOGR doesn't seem to
 precisely specify source shapefile projection
In-Reply-To: <D820C7B4-CDAA-4040-8DA1-780FE17A5C7F@esri.com>
References: <007201d2e513$11d0ed90$3572c8b0$@gmail.com>
 <D820C7B4-CDAA-4040-8DA1-780FE17A5C7F@esri.com>
Message-ID: <alpine.LFD.2.20.1706142245340.25684@reclus.nhh.no>

Hi Shaun,

Yes, this would be an option, as would be avoiding shapefiles. Could you 
(or Glenn) check that the same problem exists with a GPKG written by 
ArcGIS and read into R using rgdal::readOGR() and sf::st_read(), and then 
written out again using rgdal::writeOGR() and sf::st_write? A recent issue 
on github at edzer/sfr showed that GPKG can be more effective at handing 
this kind of issue than ESRI Shapefile formats. OGC GPKG should be 
advanced strongly as the preferred modern format eradicating Shapefiles as 
soon as possible (for numerous reasons, including encoding, field name 
lengths, etc.). I don't have a current ESRI license, or I'd try the GPKG 
roundtrip myself. I'd much rather spend time fixing things for GPKG (or 
SQLite) than shapefiles.

Best wishes,

Roger

On Wed, 14 Jun 2017, Shaun Walbridge wrote:

> Glen,
>
> Round-tripping projection information can be tricky, in part because the
> normalization routines vary between different stacks, and what counts
> as the same form is also implementation dependent. In this case
> (round-tripping with ArcGIS), you may be better off using the
> arcgisbinding package [1], which can do the conversion to and from
> ArcGIS native data types (including some that aren't available via
> OGR/GDAL). It's easy enough to install [2], and also lets you build
> Geoprocessing tools which speak directly to R. I imagine there's also a
> pure R solution to the normalization, but it would likely have side
> effects for existing packages, and may not be easily solved.
>
> If you know that your data is fine and want a simple solution, you could
> also just overwrite the new shapefile?s .prj file with a copy of the
> original.
>
> Cheers,
> Shaun
>
> 1. https://urldefense.proofpoint.com/v2/url?u=https-3A__r-2Darcgis.github.io_assets_arcgisbinding.pdf&d=DwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=fCPRb7QX-vd5bnO9gIJHCiX852SVUtyYX--xtCKtpfk&m=9su2o7yjMBqHmqZT3kZAlTRZwPC_W0Tm65yvo7NmjLw&s=pIBxR3icnDLcn639TzBc0mkXy6Tv7G9Ip7xcWSAMweU&e=
> 2. https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_R-2DArcGIS_r-2Dbridge-2Dinstall&d=DwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=fCPRb7QX-vd5bnO9gIJHCiX852SVUtyYX--xtCKtpfk&m=9su2o7yjMBqHmqZT3kZAlTRZwPC_W0Tm65yvo7NmjLw&s=JADt055JJUuCG1eltd7N9o5f_fu_geqGlnzO62SGtGM&e=
>
> On 6/14/17, 9:35 AM, "R-sig-Geo on behalf of Glenn Stauffer" <r-sig-geo-bounces at r-project.org on behalf of gestauffer at gmail.com> wrote:
>
>    I have a shapefile that I imported into R using readOGR from the rgdal
>    package. I do a little bit of work with it, like adding attribute
>    information, etc, then export it as an ESRI shapefile again, with a new
>    name. However, when I bring both the original and new shapefile into ArcGIS,
>    it tells me that the CRS do not match.
>
>    So, noting that all the projection parameters remain the same, but the
>    projection and coordinate system names are different, and the datum name is
>    dropped, my questions are:
>
>    1.	Is the second CRS the same as the first?
>    2.	If so, why did the names change, and why does ArcGIS no longer
>    recognize it as the same?
>    3.	If not, how did it get changed?
>    4.	Can the proj4string be modified to be more specific, and if so, why
>    did readOGR not already do this to preserve all the information?
>
>    I can use the new shapefiles just fine and readOGR interprets them as
>    identical, but it is a bit vexing that ArcGIS does not. And, I could of
>    course define it again in ArcGIS, but part of the motivation to work in R is
>    to obviate the need to point and click for many files.
>
>    I appreciate any insights or enlightenment.
>
>    Thanks,
>
>    Glenn
>
>    Here is the original projection information from ArcGIS:
>
>    Projected Coordinate System:    NAD_1983_HARN_Transverse_Mercator
>
>    Projection: Transverse_Mercator
>
>    False_Easting:  520000.00000000
>
>    False_Northing: -4480000.00000000
>
>    Central_Meridian:   -90.00000000
>
>    Scale_Factor:   0.99960000
>
>    Latitude_Of_Origin: 0.00000000
>
>    Linear Unit:    Meter
>
>
>
>    Geographic Coordinate System:   GCS_North_American_1983_HARN
>
>    Datum:  D_North_American_1983_HARN
>
>    Prime Meridian:     Greenwich
>
>    Angular Unit:   Degree
>
>    Here is the proj4string from R, which also agrees with the proj4string given
>    for this projection at www.spatialreference.org for epsg:3071 and also for
>    SR-ORG:7396.
>
>    +proj=tmerc +lat_0=0 +lon_0=-90 +k=0.9996 +x_0=520000 +y_0=-4480000
>    +ellps=GRS80 +units=m +no_defs
>
>    When I use writeOGR to export the SpatialPolygonsDataFrame with the above
>    proj4string, then bring it back into ArcGIS, the projection information is
>    given as the following, and is no longer recognized as identical to the
>    original.
>
>    Projected Coordinate System:    Transverse_Mercator
>
>    Projection: Transverse_Mercator
>
>    false_easting:  520000.00000000
>
>    false_northing: -4480000.00000000
>
>    central_meridian:   -90.00000000
>
>    scale_factor:   0.99960000
>
>    latitude_of_origin: 0.00000000
>
>    Linear Unit:    Meter
>
>
>
>    Geographic Coordinate System:   GCS_GRS 1980(IUGG, 1980)
>
>    Datum:  D_unknown
>
>    Prime Meridian:     Greenwich
>
>    Angular Unit:   Degree
>
>
>
>
>
>
>    	[[alternative HTML version deleted]]
>
>    _______________________________________________
>    R-sig-Geo mailing list
>    R-sig-Geo at r-project.org
>    https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dgeo&d=DwICAg&c=n6-cguzQvX_tUIrZOS_4Og&r=YFaRLkcUCdDkLrpTbNOUV9J1CwYBCTMwgm5tdQkRSm4&m=Ws5QzgjxjD1HGvdDia-3XoimuEiDzcY4Wh-CLS905w0&s=gBdaQAI6IxVnnl8qdt_GTEeiM7f2_5dd15qzQOsQ_64&e=
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From adel.heenan at gmail.com  Wed Jun 14 23:26:32 2017
From: adel.heenan at gmail.com (Adel Heenan)
Date: Wed, 14 Jun 2017 11:26:32 -1000
Subject: [R-sig-Geo] rgdal PROJ.4 and a Mac
Message-ID: <CAD46aT8sZVxp_aAL4=o07xbsdhbb2tABxAZqPB_-wptHCZcJ2g@mail.gmail.com>

Hi all,

I am new to using R for spatial analysis and have encountered what seems to
be a common, known issue. When I use the functions readOGR or ssplot
or proj4string() I get the following error message:

NOTE: rgdal::checkCRSArgs: no proj_defs.dat in PROJ.4 shared files

Here is my sessionInfo()

R version 3.2.4 (2016-03-10)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.10.3 (Yosemite)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] rgdal_1.2-5        GISTools_0.7-4     rgeos_0.3-23       MASS_7.3-45
     RColorBrewer_1.1-2
[6] maptools_0.9-2     sp_1.2-4

I tried the fix suggested here:

*https://stat.ethz.ch/pipermail/r-sig-geo/2017-January/025350.html
<https://stat.ethz.ch/pipermail/r-sig-geo/2017-January/025350.html>*

Specifically, I downloaded the windows binaries (the r-devel one - not sure
if it matters) from here:

https://cran.r-project.org/web/packages/rgdal/index.html

And placed the proj and gdal folders in the rdgal folder -

list.files(system.file("", package="rgdal"))
 [1] "ChangeLog"      "data"           "DESCRIPTION"    "doc"
 "etc"            "gdal"
 [7] "help"           "html"           "INDEX"          "libs"
"LICENSE.TXT"    "Meta"
[13] "NAMESPACE"      "OSGeo4W_test"   "pictures"       "proj"
"R"              "README"
[19] "README.windows" "SVN_VERSION"    "vectors"

But the same error comes up.

Is there a different way in which I can try and fix this? I am unfamiliar
with how to compile things from source.

Many thanks,

Adel
[1] tools_3.2.4     foreign_0.8-66  grid_3.2.4      lattice_0.20-33

	[[alternative HTML version deleted]]


From patrick.schratz at gmail.com  Wed Jun 14 23:43:17 2017
From: patrick.schratz at gmail.com (Patrick Schratz)
Date: Wed, 14 Jun 2017 23:43:17 +0200
Subject: [R-sig-Geo] rgdal PROJ.4 and a Mac
In-Reply-To: <CAD46aT8sZVxp_aAL4=o07xbsdhbb2tABxAZqPB_-wptHCZcJ2g@mail.gmail.com>
References: <CAD46aT8sZVxp_aAL4=o07xbsdhbb2tABxAZqPB_-wptHCZcJ2g@mail.gmail.com>
Message-ID: <638a3711-0fc7-447c-80ed-38e1d31e4128@Spark>

As a start I would suggest to
1) update R
2) update all packages
3 install latest proj4 version (currently 4.9.3)
5) use sf::st_read instead of rgdal::readOGR
4) update OSX


On 14. Jun 2017, 23:26 +0200, Adel Heenan <adel.heenan at gmail.com>, wrote:
> Hi all,
>
> I am new to using R for spatial analysis and have encountered what seems to
> be a common, known issue. When I use the functions readOGR or ssplot
> or proj4string() I get the following error message:
>
> NOTE: rgdal::checkCRSArgs: no proj_defs.dat in PROJ.4 shared files
>
> Here is my sessionInfo()
>
> R version 3.2.4 (2016-03-10)
> Platform: x86_64-apple-darwin13.4.0 (64-bit)
> Running under: OS X 10.10.3 (Yosemite)
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats graphics grDevices utils datasets methods base
>
> other attached packages:
> [1] rgdal_1.2-5 GISTools_0.7-4 rgeos_0.3-23 MASS_7.3-45
> RColorBrewer_1.1-2
> [6] maptools_0.9-2 sp_1.2-4
>
> I tried the fix suggested here:
>
> *https://stat.ethz.ch/pipermail/r-sig-geo/2017-January/025350.html
> <https://stat.ethz.ch/pipermail/r-sig-geo/2017-January/025350.html>*
>
> Specifically, I downloaded the windows binaries (the r-devel one - not sure
> if it matters) from here:
>
> https://cran.r-project.org/web/packages/rgdal/index.html
>
> And placed the proj and gdal folders in the rdgal folder -
>
> list.files(system.file("", package="rgdal"))
> [1] "ChangeLog" "data" "DESCRIPTION" "doc"
> "etc" "gdal"
> [7] "help" "html" "INDEX" "libs"
> "LICENSE.TXT" "Meta"
> [13] "NAMESPACE" "OSGeo4W_test" "pictures" "proj"
> "R" "README"
> [19] "README.windows" "SVN_VERSION" "vectors"
>
> But the same error comes up.
>
> Is there a different way in which I can try and fix this? I am unfamiliar
> with how to compile things from source.
>
> Many thanks,
>
> Adel
> [1] tools_3.2.4 foreign_0.8-66 grid_3.2.4 lattice_0.20-33
>
> [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

	[[alternative HTML version deleted]]


From r.turner at auckland.ac.nz  Thu Jun 15 02:39:09 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 15 Jun 2017 12:39:09 +1200
Subject: [R-sig-Geo] [FORGED] spatstat residuals.ppm with an intensity
 given as an image?
In-Reply-To: <CAPGk9pdpTB3-156NObH_-aPNXeF-W55hmP3UHM4AvOyXQspMiw@mail.gmail.com>
References: <CAPGk9pdpTB3-156NObH_-aPNXeF-W55hmP3UHM4AvOyXQspMiw@mail.gmail.com>
Message-ID: <6f0c7774-4c9b-7d31-2682-8f4cd25eade1@auckland.ac.nz>


On 07/06/17 22:22, Seth Flaxman wrote:

> I've got the intensity of an inhomogeneous Poisson process (fit using
> some new methods I'm working on, so not created by spatstat) as an
> image object, the observed point pattern as a ppp object, and I'd like
> to call residuals.ppm to compute residuals. Is there a simple way to
> create a fitted point process model (ppm) from an image and points so
> I can pass this directly to residuals.ppm?

Sorry for the long delay in responding.

There are two ways to do this:

[1] Fit a model using the putative intensity as an offset:

              fit1 <- ppm(X ~ offset(log(lam)))

where 'lam' is the pixel image of intensity, and 'X' is the point pattern.

Then do:

            res <- residuals(fit1)

[2] Fit some other model (e.g. just a constant intensity model) and use 
the argument 'fittedvalues' of residuals.ppm to specify the fitted 
intensity values.

            fit2 <- ppm(X ~ 1, forcefit=TRUE)

            res  <- residuals(fit2, fittedvalues=lam[quad.ppm(fit2)])

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From edzer.pebesma at uni-muenster.de  Mon Jun 19 11:30:37 2017
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 19 Jun 2017 11:30:37 +0200
Subject: [R-sig-Geo] r-spatial meetup @ dinner on Jul 5, Brussels
Message-ID: <77d7040f-6d3b-9973-714a-365458ecf75c@uni-muenster.de>

I'm planning an r-spatial meetup on the evening of Jul 5, during UseR!
in Brussels. If you want to take part & join, please let me know and
I'll include you in the reservation. Not limited to developers.

As of now, no sponsors are available meaning that the costs would be on
your own; offers to sponsor this event are also highly welcome.

The venue I have in mind is http://www.auxarmesdebruxelles.com/en/ -
they can handle larger groups well, and have a great kitchen, and the
last times I've been there they had a good price/quality ratio.

So far (twitter), we're 10:
https://docs.google.com/spreadsheets/d/10YikeTkQzo708yyrNWDxwBPS56kEksPe94obSAeFxIY/edit?usp=sharing

Many regards,
-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 473 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170619/4666b78d/attachment.sig>

From rdbrunquist at gmail.com  Mon Jun 19 16:33:50 2017
From: rdbrunquist at gmail.com (Ryan Runquist)
Date: Mon, 19 Jun 2017 09:33:50 -0500
Subject: [R-sig-Geo] Problem with Proj when loading 'rgdal' on Super
	Computer Facility
Message-ID: <CAP7EohZ+Z-eRKuTFGP2cKu9LOytEJc_3BKD-9P4O3JCBJ0Sj-w@mail.gmail.com>

Hello,

I am working on manipulating some spatial data and performing SDMs on
invasive species. I have been using R and the package 'rgdal' to do some of
these analyses.

On my own computer, Mac OSX 10.12.2 running R 3.3.3, I have had not
problems installing 'rgdal', loading the library, and using the functions.

However, we are starting to work on the UMN MSI facility and we are having
problems installing 'rgdal' on their Linux supercomputing cluster.

In order to install this package, we have to load the GDAL library and the
PROJ4 library in Linux. We have not had any problems loading their GDAL
module and accessing the libraries. They work fine for 'rgeos'. However, we
are having problems with the PROJ module.

When we run 'install.packages('rgdal')', the installation process begins,
but it stalls when it checks for "'pj_init_plus' in -lproj", and then
fails.

We have been working with someone at MSI to remedy this problem. They are
able to see that the file does in fact exist and don't know why 'rgdal' is
having problems locating it.

So far, we have tried different versions of PROJ (Proj 4.4.9, Proj 4.9.2,
Proj 4.9.3_gcc4.8.2 - meaning it was compiled with gcc 4.8.2) and they have
complied PROJ with GCC 4.8.2 instead of their default complier. They also
tried to compile it with  GCC 6.3, but that failed with a complier error.

I have copied the full error message below.

Sincerely,

Ryan



> install.packages("rgdal")
Installing package into ???/panfs/roc/groups/7/moeller/rbriscoe/R/x86_64-pc-
linux-gnu-library/3.3???
(as ???lib??? is unspecified)
--- Please select a CRAN mirror for use in this session ---
trying URL 'https://mirror.las.iastate.edu/CRAN/src/contrib/rgdal_1.
2-7.tar.gz'
Content type 'application/x-gzip' length 1653897 bytes (1.6 MB)
==================================================
downloaded 1.6 MB

* installing *source* package ???rgdal??? ...
** package ???rgdal??? successfully unpacked and MD5 sums checked
configure: CC: /panfs/roc/msisoft/gcc/6.1.0/bin/gcc
configure: CXX: /panfs/roc/msisoft/gcc/6.1.0/bin/g++
configure: rgdal: 1.2-7
checking for /usr/bin/svnversion... yes
configure: svn revision: 660
checking for gdal-config... /panfs/roc/msisoft/gdal/2.0.1/bin/gdal-config
checking gdal-config usability... yes
configure: GDAL: 2.0.1
checking GDAL version >= 1.6.3... yes
checking for gcc... /panfs/roc/msisoft/gcc/6.1.0/bin/gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether /panfs/roc/msisoft/gcc/6.1.0/bin/gcc accepts -g... yes
checking for /panfs/roc/msisoft/gcc/6.1.0/bin/gcc option to accept ISO
C89... none needed
checking how to run the C preprocessor... /panfs/roc/msisoft/gcc/6.1.0/b
in/gcc
-E
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking gdal.h usability... yes
checking gdal.h presence... yes
checking for gdal.h... yes
checking gdal: linking with --libs only... yes
checking GDAL: /soft/gdal/2.0.1/share/gdal/pcs.csv readable... yes
checking proj_api.h usability... yes
checking proj_api.h presence... yes
checking for proj_api.h... yes
checking for pj_init_plus in -lproj... no
configure: error: libproj not found in standard or given locations.
ERROR: configuration failed for package ???rgdal???
* removing ???/panfs/roc/groups/7/moeller/rbriscoe/R/x86_64-pc-
linux-gnu-library/3.3/rgdal???

The downloaded source packages are in
???/tmp/RtmpBVhI5E/downloaded_packages???
Warning message:
In install.packages("rgdal") :
  installation of package ???rgdal??? had non-zero exit status

	[[alternative HTML version deleted]]


From SWalbridge at esri.com  Mon Jun 19 17:13:04 2017
From: SWalbridge at esri.com (Shaun Walbridge)
Date: Mon, 19 Jun 2017 15:13:04 +0000
Subject: [R-sig-Geo] Problem with Proj when loading 'rgdal' on Super
 Computer Facility
In-Reply-To: <CAP7EohZ+Z-eRKuTFGP2cKu9LOytEJc_3BKD-9P4O3JCBJ0Sj-w@mail.gmail.com>
References: <CAP7EohZ+Z-eRKuTFGP2cKu9LOytEJc_3BKD-9P4O3JCBJ0Sj-w@mail.gmail.com>
Message-ID: <328E726A-9241-40DC-99B9-C1D0913CAB1C@esri.com>

Try passing the configure arguments to the command directly to rproj:

install.packages('rgdal', configure.args = '--with-proj-include=/correct/proj4/include --with-proj-lib=/correct/proj4/lib --with-proj-share=/correct/proj4/share')

On 6/19/17, 10:33 AM, "R-sig-Geo on behalf of Ryan Runquist" <r-sig-geo-bounces at r-project.org on behalf of rdbrunquist at gmail.com> wrote:

    Hello,
    
    I am working on manipulating some spatial data and performing SDMs on
    invasive species. I have been using R and the package 'rgdal' to do some of
    these analyses.
    
    On my own computer, Mac OSX 10.12.2 running R 3.3.3, I have had not
    problems installing 'rgdal', loading the library, and using the functions.
    
    However, we are starting to work on the UMN MSI facility and we are having
    problems installing 'rgdal' on their Linux supercomputing cluster.
    
    In order to install this package, we have to load the GDAL library and the
    PROJ4 library in Linux. We have not had any problems loading their GDAL
    module and accessing the libraries. They work fine for 'rgeos'. However, we
    are having problems with the PROJ module.
    
    When we run 'install.packages('rgdal')', the installation process begins,
    but it stalls when it checks for "'pj_init_plus' in -lproj", and then
    fails.
    
    We have been working with someone at MSI to remedy this problem. They are
    able to see that the file does in fact exist and don't know why 'rgdal' is
    having problems locating it.
    
    So far, we have tried different versions of PROJ (Proj 4.4.9, Proj 4.9.2,
    Proj 4.9.3_gcc4.8.2 - meaning it was compiled with gcc 4.8.2) and they have
    complied PROJ with GCC 4.8.2 instead of their default complier. They also
    tried to compile it with  GCC 6.3, but that failed with a complier error.
    
    I have copied the full error message below.
    
    Sincerely,
    
    Ryan
    
    
    
    > install.packages("rgdal")
    Installing package into ???/panfs/roc/groups/7/moeller/rbriscoe/R/x86_64-pc-
    linux-gnu-library/3.3???
    (as ???lib??? is unspecified)
    --- Please select a CRAN mirror for use in this session ---
    trying URL 'https://urldefense.proofpoint.com/v2/url?u=https-3A__mirror.las.iastate.edu_CRAN_src_contrib_rgdal-5F1&d=DwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=YFaRLkcUCdDkLrpTbNOUV9J1CwYBCTMwgm5tdQkRSm4&m=SJ8UGKdbyg0VNXfUCOOVJNKZJSQbEZ1KRCyHR_oEtC8&s=sqbCt8BPZes79H33y7aSpNnE5tALDJOhMfpOybZ4e7c&e= .
    2-7.tar.gz'
    Content type 'application/x-gzip' length 1653897 bytes (1.6 MB)
    ==================================================
    downloaded 1.6 MB
    
    * installing *source* package ???rgdal??? ...
    ** package ???rgdal??? successfully unpacked and MD5 sums checked
    configure: CC: /panfs/roc/msisoft/gcc/6.1.0/bin/gcc
    configure: CXX: /panfs/roc/msisoft/gcc/6.1.0/bin/g++
    configure: rgdal: 1.2-7
    checking for /usr/bin/svnversion... yes
    configure: svn revision: 660
    checking for gdal-config... /panfs/roc/msisoft/gdal/2.0.1/bin/gdal-config
    checking gdal-config usability... yes
    configure: GDAL: 2.0.1
    checking GDAL version >= 1.6.3... yes
    checking for gcc... /panfs/roc/msisoft/gcc/6.1.0/bin/gcc
    checking whether the C compiler works... yes
    checking for C compiler default output file name... a.out
    checking for suffix of executables...
    checking whether we are cross compiling... no
    checking for suffix of object files... o
    checking whether we are using the GNU C compiler... yes
    checking whether /panfs/roc/msisoft/gcc/6.1.0/bin/gcc accepts -g... yes
    checking for /panfs/roc/msisoft/gcc/6.1.0/bin/gcc option to accept ISO
    C89... none needed
    checking how to run the C preprocessor... /panfs/roc/msisoft/gcc/6.1.0/b
    in/gcc
    -E
    checking for grep that handles long lines and -e... /bin/grep
    checking for egrep... /bin/grep -E
    checking for ANSI C header files... yes
    checking for sys/types.h... yes
    checking for sys/stat.h... yes
    checking for stdlib.h... yes
    checking for string.h... yes
    checking for memory.h... yes
    checking for strings.h... yes
    checking for inttypes.h... yes
    checking for stdint.h... yes
    checking for unistd.h... yes
    checking gdal.h usability... yes
    checking gdal.h presence... yes
    checking for gdal.h... yes
    checking gdal: linking with --libs only... yes
    checking GDAL: /soft/gdal/2.0.1/share/gdal/pcs.csv readable... yes
    checking proj_api.h usability... yes
    checking proj_api.h presence... yes
    checking for proj_api.h... yes
    checking for pj_init_plus in -lproj... no
    configure: error: libproj not found in standard or given locations.
    ERROR: configuration failed for package ???rgdal???
    * removing ???/panfs/roc/groups/7/moeller/rbriscoe/R/x86_64-pc-
    linux-gnu-library/3.3/rgdal???
    
    The downloaded source packages are in
    ???/tmp/RtmpBVhI5E/downloaded_packages???
    Warning message:
    In install.packages("rgdal") :
      installation of package ???rgdal??? had non-zero exit status
    
    	[[alternative HTML version deleted]]
    
    _______________________________________________
    R-sig-Geo mailing list
    R-sig-Geo at r-project.org
    https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dgeo&d=DwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=YFaRLkcUCdDkLrpTbNOUV9J1CwYBCTMwgm5tdQkRSm4&m=SJ8UGKdbyg0VNXfUCOOVJNKZJSQbEZ1KRCyHR_oEtC8&s=K2N5LvwRn4RSLJNVBjbxQyBFejL-jaD1fky4cOX6WwU&e= 


From thierry.onkelinx at inbo.be  Mon Jun 19 17:16:44 2017
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Mon, 19 Jun 2017 17:16:44 +0200
Subject: [R-sig-Geo] Problem with Proj when loading 'rgdal' on Super
 Computer Facility
In-Reply-To: <CAP7EohZ+Z-eRKuTFGP2cKu9LOytEJc_3BKD-9P4O3JCBJ0Sj-w@mail.gmail.com>
References: <CAP7EohZ+Z-eRKuTFGP2cKu9LOytEJc_3BKD-9P4O3JCBJ0Sj-w@mail.gmail.com>
Message-ID: <CAJuCY5yu0M87Qkts-H7rn6vBgkvweNMQSpFVVWtJ1KnGJ650gw@mail.gmail.com>

Dear Ryan,

You **first** need to install the dependencies of rgdal.

sudo apt-get update && sudo apt-get install libgdal-dev libproj-dev

Then you should be able to install rgdal.

For more details google "rgdal install linux"

Best regards,


ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and
Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium

To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey

2017-06-19 16:33 GMT+02:00 Ryan Runquist <rdbrunquist at gmail.com>:

> Hello,
>
> I am working on manipulating some spatial data and performing SDMs on
> invasive species. I have been using R and the package 'rgdal' to do some of
> these analyses.
>
> On my own computer, Mac OSX 10.12.2 running R 3.3.3, I have had not
> problems installing 'rgdal', loading the library, and using the functions.
>
> However, we are starting to work on the UMN MSI facility and we are having
> problems installing 'rgdal' on their Linux supercomputing cluster.
>
> In order to install this package, we have to load the GDAL library and the
> PROJ4 library in Linux. We have not had any problems loading their GDAL
> module and accessing the libraries. They work fine for 'rgeos'. However, we
> are having problems with the PROJ module.
>
> When we run 'install.packages('rgdal')', the installation process begins,
> but it stalls when it checks for "'pj_init_plus' in -lproj", and then
> fails.
>
> We have been working with someone at MSI to remedy this problem. They are
> able to see that the file does in fact exist and don't know why 'rgdal' is
> having problems locating it.
>
> So far, we have tried different versions of PROJ (Proj 4.4.9, Proj 4.9.2,
> Proj 4.9.3_gcc4.8.2 - meaning it was compiled with gcc 4.8.2) and they have
> complied PROJ with GCC 4.8.2 instead of their default complier. They also
> tried to compile it with  GCC 6.3, but that failed with a complier error.
>
> I have copied the full error message below.
>
> Sincerely,
>
> Ryan
>
>
>
> > install.packages("rgdal")
> Installing package into ???/panfs/roc/groups/7/
> moeller/rbriscoe/R/x86_64-pc-
> linux-gnu-library/3.3???
> (as ???lib??? is unspecified)
> --- Please select a CRAN mirror for use in this session ---
> trying URL 'https://mirror.las.iastate.edu/CRAN/src/contrib/rgdal_1.
> 2-7.tar.gz'
> Content type 'application/x-gzip' length 1653897 bytes (1.6 MB)
> ==================================================
> downloaded 1.6 MB
>
> * installing *source* package ???rgdal??? ...
> ** package ???rgdal??? successfully unpacked and MD5 sums checked
> configure: CC: /panfs/roc/msisoft/gcc/6.1.0/bin/gcc
> configure: CXX: /panfs/roc/msisoft/gcc/6.1.0/bin/g++
> configure: rgdal: 1.2-7
> checking for /usr/bin/svnversion... yes
> configure: svn revision: 660
> checking for gdal-config... /panfs/roc/msisoft/gdal/2.0.1/bin/gdal-config
> checking gdal-config usability... yes
> configure: GDAL: 2.0.1
> checking GDAL version >= 1.6.3... yes
> checking for gcc... /panfs/roc/msisoft/gcc/6.1.0/bin/gcc
> checking whether the C compiler works... yes
> checking for C compiler default output file name... a.out
> checking for suffix of executables...
> checking whether we are cross compiling... no
> checking for suffix of object files... o
> checking whether we are using the GNU C compiler... yes
> checking whether /panfs/roc/msisoft/gcc/6.1.0/bin/gcc accepts -g... yes
> checking for /panfs/roc/msisoft/gcc/6.1.0/bin/gcc option to accept ISO
> C89... none needed
> checking how to run the C preprocessor... /panfs/roc/msisoft/gcc/6.1.0/b
> in/gcc
> -E
> checking for grep that handles long lines and -e... /bin/grep
> checking for egrep... /bin/grep -E
> checking for ANSI C header files... yes
> checking for sys/types.h... yes
> checking for sys/stat.h... yes
> checking for stdlib.h... yes
> checking for string.h... yes
> checking for memory.h... yes
> checking for strings.h... yes
> checking for inttypes.h... yes
> checking for stdint.h... yes
> checking for unistd.h... yes
> checking gdal.h usability... yes
> checking gdal.h presence... yes
> checking for gdal.h... yes
> checking gdal: linking with --libs only... yes
> checking GDAL: /soft/gdal/2.0.1/share/gdal/pcs.csv readable... yes
> checking proj_api.h usability... yes
> checking proj_api.h presence... yes
> checking for proj_api.h... yes
> checking for pj_init_plus in -lproj... no
> configure: error: libproj not found in standard or given locations.
> ERROR: configuration failed for package ???rgdal???
> * removing ???/panfs/roc/groups/7/moeller/rbriscoe/R/x86_64-pc-
> linux-gnu-library/3.3/rgdal???
>
> The downloaded source packages are in
> ???/tmp/RtmpBVhI5E/downloaded_packages???
> Warning message:
> In install.packages("rgdal") :
>   installation of package ???rgdal??? had non-zero exit status
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

	[[alternative HTML version deleted]]


From Wade.A.Wall at erdc.dren.mil  Mon Jun 19 17:40:56 2017
From: Wade.A.Wall at erdc.dren.mil (Wall, Wade A ERDC-RDE-CERL-IL CIV)
Date: Mon, 19 Jun 2017 15:40:56 +0000
Subject: [R-sig-Geo] Problem with Proj when loading 'rgdal' on
	Super	Computer Facility
In-Reply-To: <CAP7EohZ+Z-eRKuTFGP2cKu9LOytEJc_3BKD-9P4O3JCBJ0Sj-w@mail.gmail.com>
References: <CAP7EohZ+Z-eRKuTFGP2cKu9LOytEJc_3BKD-9P4O3JCBJ0Sj-w@mail.gmail.com>
Message-ID: <C1524BE4BF45454293B8DF38FB9B5ECAD6AAE250@MS-EX1VKS.erdc.dren.mil>

I had trouble installing gdal and proj4 as well, but not trouble installing rgdal. 

Is the path to proj4 and the proj4 library in your path? I put it in my .bashrc and it worked okay.

export LD_LIBRARY_PATH=/pathTobin/bin/proj4/lib:$LD_LIBRARY_PATH
export PATH==/pathTobin/bin/proj4/bin:$PATH

HTH,
Wade

-----Original Message-----
From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Ryan Runquist
Sent: Monday, June 19, 2017 9:34 AM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] Problem with Proj when loading 'rgdal' on Super Computer Facility

Hello,

I am working on manipulating some spatial data and performing SDMs on invasive species. I have been using R and the package 'rgdal' to do some of these analyses.

On my own computer, Mac OSX 10.12.2 running R 3.3.3, I have had not problems installing 'rgdal', loading the library, and using the functions.

However, we are starting to work on the UMN MSI facility and we are having problems installing 'rgdal' on their Linux supercomputing cluster.

In order to install this package, we have to load the GDAL library and the
PROJ4 library in Linux. We have not had any problems loading their GDAL module and accessing the libraries. They work fine for 'rgeos'. However, we are having problems with the PROJ module.

When we run 'install.packages('rgdal')', the installation process begins, but it stalls when it checks for "'pj_init_plus' in -lproj", and then fails.

We have been working with someone at MSI to remedy this problem. They are able to see that the file does in fact exist and don't know why 'rgdal' is having problems locating it.

So far, we have tried different versions of PROJ (Proj 4.4.9, Proj 4.9.2, Proj 4.9.3_gcc4.8.2 - meaning it was compiled with gcc 4.8.2) and they have complied PROJ with GCC 4.8.2 instead of their default complier. They also tried to compile it with  GCC 6.3, but that failed with a complier error.

I have copied the full error message below.

Sincerely,

Ryan



> install.packages("rgdal")
Installing package into ???/panfs/roc/groups/7/moeller/rbriscoe/R/x86_64-pc-
linux-gnu-library/3.3???
(as ???lib??? is unspecified)
--- Please select a CRAN mirror for use in this session --- trying URL 'Blockedhttps://mirror.las.iastate.edu/CRAN/src/contrib/rgdal_1Blocked.
2-7.tar.gz'
Content type 'application/x-gzip' length 1653897 bytes (1.6 MB) ==================================================
downloaded 1.6 MB

* installing *source* package ???rgdal??? ...
** package ???rgdal??? successfully unpacked and MD5 sums checked
configure: CC: /panfs/roc/msisoft/gcc/6.1.0/bin/gcc
configure: CXX: /panfs/roc/msisoft/gcc/6.1.0/bin/g++
configure: rgdal: 1.2-7
checking for /usr/bin/svnversion... yes
configure: svn revision: 660
checking for gdal-config... /panfs/roc/msisoft/gdal/2.0.1/bin/gdal-config
checking gdal-config usability... yes
configure: GDAL: 2.0.1
checking GDAL version >= 1.6.3... yes
checking for gcc... /panfs/roc/msisoft/gcc/6.1.0/bin/gcc
checking whether the C compiler works... yes checking for C compiler default output file name... a.out checking for suffix of executables...
checking whether we are cross compiling... no checking for suffix of object files... o checking whether we are using the GNU C compiler... yes checking whether /panfs/roc/msisoft/gcc/6.1.0/bin/gcc accepts -g... yes checking for /panfs/roc/msisoft/gcc/6.1.0/bin/gcc option to accept ISO C89... none needed checking how to run the C preprocessor... /panfs/roc/msisoft/gcc/6.1.0/b in/gcc -E checking for grep that handles long lines and -e... /bin/grep checking for egrep... /bin/grep -E checking for ANSI C header files... yes checking for sys/types.h... yes checking for sys/stat.h... yes checking for stdlib.h... yes checking for string.h... yes checking for memory.h... yes checking for strings.h... yes checking for inttypes.h... yes checking for stdint.h... yes checking for unistd.h... yes checking gdal.h usability... yes checking gdal.h presence... yes checking for gdal.h... yes checking gdal: linking with --libs only... yes checking GDAL: /soft/gdal/2.0.1/share/gdal/pcs.csv readable... yes checking proj_api.h usability... yes checking proj_api.h presence... yes checking for proj_api.h... yes checking for pj_init_plus in -lproj... no
configure: error: libproj not found in standard or given locations.
ERROR: configuration failed for package ???rgdal???
* removing ???/panfs/roc/groups/7/moeller/rbriscoe/R/x86_64-pc-
linux-gnu-library/3.3/rgdal???

The downloaded source packages are in
???/tmp/RtmpBVhI5E/downloaded_packages???
Warning message:
In install.packages("rgdal") :
  installation of package ???rgdal??? had non-zero exit status

	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
Blockedhttps://stat.ethz.ch/mailman/listinfo/r-sig-geoBlocked

From Roger.Bivand at nhh.no  Mon Jun 19 20:16:33 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 19 Jun 2017 20:16:33 +0200
Subject: [R-sig-Geo] Problem with Proj when loading 'rgdal' on Super
 Computer Facility
In-Reply-To: <328E726A-9241-40DC-99B9-C1D0913CAB1C@esri.com>
References: <CAP7EohZ+Z-eRKuTFGP2cKu9LOytEJc_3BKD-9P4O3JCBJ0Sj-w@mail.gmail.com>
 <328E726A-9241-40DC-99B9-C1D0913CAB1C@esri.com>
Message-ID: <alpine.LFD.2.20.1706191954100.20507@reclus.nhh.no>

On Mon, 19 Jun 2017, Shaun Walbridge wrote:

> Try passing the configure arguments to the command directly to rproj:
>
> install.packages('rgdal', configure.args = 
> '--with-proj-include=/correct/proj4/include 
> --with-proj-lib=/correct/proj4/lib 
> --with-proj-share=/correct/proj4/share')

Thanks, Shaun! My reply when approached off-list initially, was:

"Did you consider reading the help file of install.packages? Did you 
consider unpacking the source tarball of rgdal and running ./configure 
--help and reading the README file, also at:

https://r-forge.r-project.org/scm/viewvc.php/pkg/inst/README?view=markup&roo
t=rgdal

or

library(rgdal)
file.show(system.file("README", package="rgdal"))

which details configure arguments, which tell the install system where to
find external dependencies.

You also typically need each core to have access to the same external
dependencies, so you may wish to build GDAL, etc. static, so that the
rgdal.so in the package that you build from source is self-contained, that
is your choice."

Installing on clusters can be a problem, so choosing the static route is 
actually more predictable, but is quite a lot of work the first time 
round. The build scripts for the Windows sf and rgdal binary package 
external dependencies at for example:

https://github.com/rwinlib/gdal2/blob/master/build64.sh

give a flavour - you will probably only need a subset of drivers. If you 
build such a static binary package, it will protect you from missing 
dependencies on the nodes, at the cost of few drivers and a big shared 
object. If the nodes are the homogeneous, this route should be robust. 
Does anyone have recent experience of a static install under Linux (build 
GDAL and its dependencies, and PROJ4, static only)?

Roger


>
> On 6/19/17, 10:33 AM, "R-sig-Geo on behalf of Ryan Runquist" <r-sig-geo-bounces at r-project.org on behalf of rdbrunquist at gmail.com> wrote:
>
>    Hello,
>
>    I am working on manipulating some spatial data and performing SDMs on
>    invasive species. I have been using R and the package 'rgdal' to do some of
>    these analyses.
>
>    On my own computer, Mac OSX 10.12.2 running R 3.3.3, I have had not
>    problems installing 'rgdal', loading the library, and using the functions.
>
>    However, we are starting to work on the UMN MSI facility and we are having
>    problems installing 'rgdal' on their Linux supercomputing cluster.
>
>    In order to install this package, we have to load the GDAL library and the
>    PROJ4 library in Linux. We have not had any problems loading their GDAL
>    module and accessing the libraries. They work fine for 'rgeos'. However, we
>    are having problems with the PROJ module.
>
>    When we run 'install.packages('rgdal')', the installation process begins,
>    but it stalls when it checks for "'pj_init_plus' in -lproj", and then
>    fails.
>
>    We have been working with someone at MSI to remedy this problem. They are
>    able to see that the file does in fact exist and don't know why 'rgdal' is
>    having problems locating it.
>
>    So far, we have tried different versions of PROJ (Proj 4.4.9, Proj 4.9.2,
>    Proj 4.9.3_gcc4.8.2 - meaning it was compiled with gcc 4.8.2) and they have
>    complied PROJ with GCC 4.8.2 instead of their default complier. They also
>    tried to compile it with  GCC 6.3, but that failed with a complier error.
>
>    I have copied the full error message below.
>
>    Sincerely,
>
>    Ryan
>
>
>
>    > install.packages("rgdal")
>    Installing package into ???/panfs/roc/groups/7/moeller/rbriscoe/R/x86_64-pc-
>    linux-gnu-library/3.3???
>    (as ???lib??? is unspecified)
>    --- Please select a CRAN mirror for use in this session ---
>    trying URL 'https://urldefense.proofpoint.com/v2/url?u=https-3A__mirror.las.iastate.edu_CRAN_src_contrib_rgdal-5F1&d=DwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=YFaRLkcUCdDkLrpTbNOUV9J1CwYBCTMwgm5tdQkRSm4&m=SJ8UGKdbyg0VNXfUCOOVJNKZJSQbEZ1KRCyHR_oEtC8&s=sqbCt8BPZes79H33y7aSpNnE5tALDJOhMfpOybZ4e7c&e= .
>    2-7.tar.gz'
>    Content type 'application/x-gzip' length 1653897 bytes (1.6 MB)
>    ==================================================
>    downloaded 1.6 MB
>
>    * installing *source* package ???rgdal??? ...
>    ** package ???rgdal??? successfully unpacked and MD5 sums checked
>    configure: CC: /panfs/roc/msisoft/gcc/6.1.0/bin/gcc
>    configure: CXX: /panfs/roc/msisoft/gcc/6.1.0/bin/g++
>    configure: rgdal: 1.2-7
>    checking for /usr/bin/svnversion... yes
>    configure: svn revision: 660
>    checking for gdal-config... /panfs/roc/msisoft/gdal/2.0.1/bin/gdal-config
>    checking gdal-config usability... yes
>    configure: GDAL: 2.0.1
>    checking GDAL version >= 1.6.3... yes
>    checking for gcc... /panfs/roc/msisoft/gcc/6.1.0/bin/gcc
>    checking whether the C compiler works... yes
>    checking for C compiler default output file name... a.out
>    checking for suffix of executables...
>    checking whether we are cross compiling... no
>    checking for suffix of object files... o
>    checking whether we are using the GNU C compiler... yes
>    checking whether /panfs/roc/msisoft/gcc/6.1.0/bin/gcc accepts -g... yes
>    checking for /panfs/roc/msisoft/gcc/6.1.0/bin/gcc option to accept ISO
>    C89... none needed
>    checking how to run the C preprocessor... /panfs/roc/msisoft/gcc/6.1.0/b
>    in/gcc
>    -E
>    checking for grep that handles long lines and -e... /bin/grep
>    checking for egrep... /bin/grep -E
>    checking for ANSI C header files... yes
>    checking for sys/types.h... yes
>    checking for sys/stat.h... yes
>    checking for stdlib.h... yes
>    checking for string.h... yes
>    checking for memory.h... yes
>    checking for strings.h... yes
>    checking for inttypes.h... yes
>    checking for stdint.h... yes
>    checking for unistd.h... yes
>    checking gdal.h usability... yes
>    checking gdal.h presence... yes
>    checking for gdal.h... yes
>    checking gdal: linking with --libs only... yes
>    checking GDAL: /soft/gdal/2.0.1/share/gdal/pcs.csv readable... yes
>    checking proj_api.h usability... yes
>    checking proj_api.h presence... yes
>    checking for proj_api.h... yes
>    checking for pj_init_plus in -lproj... no
>    configure: error: libproj not found in standard or given locations.
>    ERROR: configuration failed for package ???rgdal???
>    * removing ???/panfs/roc/groups/7/moeller/rbriscoe/R/x86_64-pc-
>    linux-gnu-library/3.3/rgdal???
>
>    The downloaded source packages are in
>    ???/tmp/RtmpBVhI5E/downloaded_packages???
>    Warning message:
>    In install.packages("rgdal") :
>      installation of package ???rgdal??? had non-zero exit status
>
>    	[[alternative HTML version deleted]]
>
>    _______________________________________________
>    R-sig-Geo mailing list
>    R-sig-Geo at r-project.org
>    https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dgeo&d=DwIGaQ&c=n6-cguzQvX_tUIrZOS_4Og&r=YFaRLkcUCdDkLrpTbNOUV9J1CwYBCTMwgm5tdQkRSm4&m=SJ8UGKdbyg0VNXfUCOOVJNKZJSQbEZ1KRCyHR_oEtC8&s=K2N5LvwRn4RSLJNVBjbxQyBFejL-jaD1fky4cOX6WwU&e=
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From themattsimpson at gmail.com  Tue Jun 20 00:26:33 2017
From: themattsimpson at gmail.com (Matthew Simpson)
Date: Mon, 19 Jun 2017 17:26:33 -0500
Subject: [R-sig-Geo] Issues installing rgeos on linux server
Message-ID: <CA+x+Of64Cz=mN5ETWwhxTTfgXqjftaf7md_h+eB_euqA8ypDLw@mail.gmail.com>

I'm installing some spatial packages on a linux server and due to
university constraints, cannot install anything using a package manager.
I've managed to get rgdal installed successfully, but rgeos is causing
problems.

I've installed the geos library already, but when I attempt to install
rgeos within R, it complains that that it cannot run C compiled programs.

I've also tried downloading the tarball myself and running R CMD check, and
it gives me the same complaint.

I've successfully reinstalled Rcpp from source, but that seemed to do
nothing.

Below is: 1) the console input from the attempted installation, 2) shell
output from running R CMD check, and 3) my sessionInfo()

Any help would be appreciated.

Matt

1) Here is the result of attempted installation: (note: removing type =
"source" changes nothing):

> install.packages("rgeos", type = "source",
+         configure.args =
"--with-geos-config=/group/stsn/shared_libs/geos/bin/geos-config",
+         repos = "https://cloud.r-project.org")
Installing package into ?/home/msimpson/R/x86_64-pc-linux-gnu-library/3.3?
(as ?lib? is unspecified)
trying URL 'https://cloud.r-project.org/src/contrib/rgeos_0.3-23.tar.gz'
Content type 'application/x-gzip' length 257486 bytes (251 KB)
==================================================
downloaded 251 KB

* installing *source* package ?rgeos? ...
** package ?rgeos? successfully unpacked and MD5 sums checked
configure: CC: /usr/bin/gcc -std=gnu99
configure: CXX: /usr/bin/g++
configure: rgeos: 0.3-23
checking for /usr/bin/svnversion... no
configure: svn revision: 546
configure: geos-config set to /group/stsn/shared_libs/geos/bin/geos-config
checking geos-config exists... yes
checking geos-config executable... yes
checking geos-config usability... yes
configure: GEOS version: 3.7.0dev
checking geos version at least 3.2.0... yes
checking geos-config clibs... yes
checking for gcc... /usr/bin/gcc -std=gnu99
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... configure: error: in
`/tmp/RtmppP5J2b/R.INSTALL236bb22fea27c/rgeos':
configure: error: cannot run C compiled programs.
If you meant to cross compile, use `--host'.
See `config.log' for more details
ERROR: configuration failed for package ?rgeos?
* removing ?/home/msimpson/R/x86_64-pc-linux-gnu-library/3.3/rgeos?

The downloaded source packages are in
        ?/tmp/RtmpwkU04N/downloaded_packages?
Warning message:
In install.packages("rgeos", type = "source", configure.args =
"--with-geos-config=/group/stsn/shared_libs/geos/bin/geos-config",  :
  installation of package ?rgeos? had non-zero exit status

2) Here's the result from running R CMD check:

R CMD check
--install-args='--configure-args=--with-geos-config=/group/stsn/shared_libs/geos/bin/geos-config'
rgeos_0.3-23.tar.gz
* using log directory ?/group/stsn/src/test/rgeos.Rcheck?
* using R version 3.3.1 (2016-06-21)
* using platform: x86_64-pc-linux-gnu (64-bit)
* using session charset: UTF-8
* checking for file ?rgeos/DESCRIPTION? ... OK
* this is package ?rgeos? version ?0.3-23?
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking whether package ?rgeos? can be installed ... ERROR
Installation failed.
See ?/group/stsn/src/test/rgeos.Rcheck/00install.out? for details.
* DONE

Status: 1 ERROR
See
  ?/group/stsn/src/test/rgeos.Rcheck/00check.log?
for details.

cat /group/stsn/src/test/rgeos.Rcheck/00install.out
* installing *source* package ?rgeos? ...
** package ?rgeos? successfully unpacked and MD5 sums checked
configure: CC: /usr/bin/gcc -std=gnu99
configure: CXX: /usr/bin/g++
configure: rgeos: 0.3-23
checking for /usr/bin/svnversion... no
configure: svn revision: 546
configure: geos-config set to /group/stsn/shared_libs/geos/bin/geos-config
checking geos-config exists... yes
checking geos-config executable... yes
checking geos-config usability... yes
configure: GEOS version: 3.7.0dev
checking geos version at least 3.2.0... yes
checking geos-config clibs... yes
checking for gcc... /usr/bin/gcc -std=gnu99
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... configure: error: in
`/group/stsn/src/test/rgeos.Rcheck/00_pkg_src/rgeos':
configure: error: cannot run C compiled programs.
If you meant to cross compile, use `--host'.
See `config.log' for more details
ERROR: configuration failed for package ?rgeos?
* removing ?/group/stsn/src/test/rgeos.Rcheck/rgeos?

3) And here's my session info:

 sessionInfo()
R version 3.3.1 (2016-06-21)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: CentOS Linux 7 (Core)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Tue Jun 20 11:26:35 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 20 Jun 2017 11:26:35 +0200
Subject: [R-sig-Geo] Issues installing rgeos on linux server
In-Reply-To: <CA+x+Of64Cz=mN5ETWwhxTTfgXqjftaf7md_h+eB_euqA8ypDLw@mail.gmail.com>
References: <CA+x+Of64Cz=mN5ETWwhxTTfgXqjftaf7md_h+eB_euqA8ypDLw@mail.gmail.com>
Message-ID: <alpine.LFD.2.20.1706201113210.20255@reclus.nhh.no>

On Tue, 20 Jun 2017, Matthew Simpson wrote:

> I'm installing some spatial packages on a linux server and due to
> university constraints, cannot install anything using a package manager.
> I've managed to get rgdal installed successfully, but rgeos is causing
> problems.
>
> I've installed the geos library already, but when I attempt to install
> rgeos within R, it complains that that it cannot run C compiled programs.

Could you please say how you installed GEOS? Could you try out geos-config 
with each of the settings? Do you need 3.7.0dev (I haven't tried this as a 
source of difficulty as it seems implausible, but neither rgeos nor sf 
need bleeding edge functionality from GEOS)? Could you try to install sf 
from source (it also uses GEOS)? Is this the GEOS geos-config -m library 
bug (probably not)? Unpacking rgeos, running ./configure in the package 
root, I see (Fedora 25, R 3.4.0):

$ ./configure
configure: CC: gcc
configure: CXX: g++
configure: rgeos: 0.3-23
checking for /usr/bin/svnversion... yes
configure: svn revision: 547
checking for geos-config... /usr/local/bin/geos-config
checking geos-config usability... yes
configure: GEOS version: 3.6.1
checking geos version at least 3.2.0... yes
checking geos-config clibs... yes
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking geos_c.h usability... yes
checking geos_c.h presence... yes
checking for geos_c.h... yes
checking geos: linking with libgeos_c... yes
configure: PKG_CPPFLAGS:  -I/usr/local/include
configure: PKG_LIBS:  -L/usr/local/lib -lgeos -L/usr/local/lib -lgeos_c
configure: creating ./config.status
config.status: creating src/Makevars

but you fail about half-way down at the standard croos-compilation test. 
For rgdal/configure - you said your rgdal install on the same system 
succeeded, I see:

...
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
...

What do you see (just running ./configure in the package root)?

Roger

>
> I've also tried downloading the tarball myself and running R CMD check, and
> it gives me the same complaint.
>
> I've successfully reinstalled Rcpp from source, but that seemed to do
> nothing.
>
> Below is: 1) the console input from the attempted installation, 2) shell
> output from running R CMD check, and 3) my sessionInfo()
>
> Any help would be appreciated.
>
> Matt
>
> 1) Here is the result of attempted installation: (note: removing type =
> "source" changes nothing):
>
>> install.packages("rgeos", type = "source",
> +         configure.args =
> "--with-geos-config=/group/stsn/shared_libs/geos/bin/geos-config",
> +         repos = "https://cloud.r-project.org")
> Installing package into ?/home/msimpson/R/x86_64-pc-linux-gnu-library/3.3?
> (as ?lib? is unspecified)
> trying URL 'https://cloud.r-project.org/src/contrib/rgeos_0.3-23.tar.gz'
> Content type 'application/x-gzip' length 257486 bytes (251 KB)
> ==================================================
> downloaded 251 KB
>
> * installing *source* package ?rgeos? ...
> ** package ?rgeos? successfully unpacked and MD5 sums checked
> configure: CC: /usr/bin/gcc -std=gnu99
> configure: CXX: /usr/bin/g++
> configure: rgeos: 0.3-23
> checking for /usr/bin/svnversion... no
> configure: svn revision: 546
> configure: geos-config set to /group/stsn/shared_libs/geos/bin/geos-config
> checking geos-config exists... yes
> checking geos-config executable... yes
> checking geos-config usability... yes
> configure: GEOS version: 3.7.0dev
> checking geos version at least 3.2.0... yes
> checking geos-config clibs... yes
> checking for gcc... /usr/bin/gcc -std=gnu99
> checking whether the C compiler works... yes
> checking for C compiler default output file name... a.out
> checking for suffix of executables...
> checking whether we are cross compiling... configure: error: in
> `/tmp/RtmppP5J2b/R.INSTALL236bb22fea27c/rgeos':
> configure: error: cannot run C compiled programs.
> If you meant to cross compile, use `--host'.
> See `config.log' for more details
> ERROR: configuration failed for package ?rgeos?
> * removing ?/home/msimpson/R/x86_64-pc-linux-gnu-library/3.3/rgeos?
>
> The downloaded source packages are in
>        ?/tmp/RtmpwkU04N/downloaded_packages?
> Warning message:
> In install.packages("rgeos", type = "source", configure.args =
> "--with-geos-config=/group/stsn/shared_libs/geos/bin/geos-config",  :
>  installation of package ?rgeos? had non-zero exit status
>
> 2) Here's the result from running R CMD check:
>
> R CMD check
> --install-args='--configure-args=--with-geos-config=/group/stsn/shared_libs/geos/bin/geos-config'
> rgeos_0.3-23.tar.gz
> * using log directory ?/group/stsn/src/test/rgeos.Rcheck?
> * using R version 3.3.1 (2016-06-21)
> * using platform: x86_64-pc-linux-gnu (64-bit)
> * using session charset: UTF-8
> * checking for file ?rgeos/DESCRIPTION? ... OK
> * this is package ?rgeos? version ?0.3-23?
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking whether package ?rgeos? can be installed ... ERROR
> Installation failed.
> See ?/group/stsn/src/test/rgeos.Rcheck/00install.out? for details.
> * DONE
>
> Status: 1 ERROR
> See
>  ?/group/stsn/src/test/rgeos.Rcheck/00check.log?
> for details.
>
> cat /group/stsn/src/test/rgeos.Rcheck/00install.out
> * installing *source* package ?rgeos? ...
> ** package ?rgeos? successfully unpacked and MD5 sums checked
> configure: CC: /usr/bin/gcc -std=gnu99
> configure: CXX: /usr/bin/g++
> configure: rgeos: 0.3-23
> checking for /usr/bin/svnversion... no
> configure: svn revision: 546
> configure: geos-config set to /group/stsn/shared_libs/geos/bin/geos-config
> checking geos-config exists... yes
> checking geos-config executable... yes
> checking geos-config usability... yes
> configure: GEOS version: 3.7.0dev
> checking geos version at least 3.2.0... yes
> checking geos-config clibs... yes
> checking for gcc... /usr/bin/gcc -std=gnu99
> checking whether the C compiler works... yes
> checking for C compiler default output file name... a.out
> checking for suffix of executables...
> checking whether we are cross compiling... configure: error: in
> `/group/stsn/src/test/rgeos.Rcheck/00_pkg_src/rgeos':
> configure: error: cannot run C compiled programs.
> If you meant to cross compile, use `--host'.
> See `config.log' for more details
> ERROR: configuration failed for package ?rgeos?
> * removing ?/group/stsn/src/test/rgeos.Rcheck/rgeos?
>
> 3) And here's my session info:
>
> sessionInfo()
> R version 3.3.1 (2016-06-21)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: CentOS Linux 7 (Core)
>
> locale:
> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
> [9] LC_ADDRESS=C               LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From themattsimpson at gmail.com  Tue Jun 20 22:35:35 2017
From: themattsimpson at gmail.com (Matthew Simpson)
Date: Tue, 20 Jun 2017 15:35:35 -0500
Subject: [R-sig-Geo] Issues installing rgeos on linux server
In-Reply-To: <alpine.LFD.2.20.1706201113210.20255@reclus.nhh.no>
References: <CA+x+Of64Cz=mN5ETWwhxTTfgXqjftaf7md_h+eB_euqA8ypDLw@mail.gmail.com>
 <alpine.LFD.2.20.1706201113210.20255@reclus.nhh.no>
Message-ID: <CA+x+Of60febZjtYVdGQty4fwVYmmgPzMkND7uns6OYncgue0RQ@mail.gmail.com>

Thank you, this was very helpful. It turned out the issue was that I was
using the development version - I had cloned the github repository and
installed from there. Downloading the tarball for the latest stable release
solved the problem. I went ahead and did the same thing for GDAL and proj.4
and reinstalled rgdal just to be safe. And sure enough, before reinstalling
rgdal was complaining about missing proj_defs.dat, even though it existed
in the proj.4/share folder. But now it's working just fine.

For posterity, my full commands to get GEOS, GDAL, proj.4, rgdal, and rgeos
installed from source on a linux server (CentOS 7.3.1611) are below.

cd /path/to/src/geos/
wget http://download.osgeo.org/geos/geos-3.6.1.tar.bz2
tar -vxjf geos-3.6.1.tar.bz2
cd geos-3.6.1
./configure --prefix=/path/to/install/geos
make
make check
make install

cd /path/to/src/gdal
wget http://download.osgeo.org/gdal/2.2.0/gdal-2.2.0.tar.gz
tar -xvzf gdal-2.2.0.tar.gz
cd gdal-2.2.0
./autogen.sh
./configure --prefix=/path/to/install/gdal
make
## there is no make check
make install

cd /path/to/src/proj.4/
wget http://download.osgeo.org/proj/proj-4.9.3.tar.gz
tar -xvzf proj-4.9.3.tar.gz
cd proj-4.9.3
./configure --prefix=/path/to/install/proj.4
make
make check
make install

echo 'export
PATH=/path/to/install/gdal/bin:/path/to/install/proj.4/bin:/path/to/install/geos/bin:$PATH'
>> ~/.bash_profile
echo 'export
LD_LIBRARY_PATH=/path/to/install/gdal/lib:/path/to/install/proj.4/lib:/path/to/install/geos/lib:$LD_LIBRARY_PATH'
>> ~/.bash_profile
. ~/.bash_profile

## in R run:
## need this installed from source to prevent some compiler issues that
would cause R to segfault if rgdal was loaded and you tried to install
certain packages
install.packages("Rcpp", type = "source", repos = "
https://cloud.r-project.org")

install.packages("rgdal", type = "source", repos = "
https://cloud.r-project.org",
configure.args = "--with-proj-include=/path/to/install/proj.4/include
--with-proj-lib=/path/to/install/proj.4/lib
--with-proj-share=/path/to/install/proj.4/share/proj
--with-gdal-config=/path/to/install/gdal/bin/gdal-config")

install.packages("rgeos", type = "source", repos = "
https://cloud.r-project.org",
         configure.args =
"--with-geos-config=/path/to/install/geos/bin/geos-config")


Note that --with-proj-share=/path/to/install/proj.4/share did NOT work.


On Tue, Jun 20, 2017 at 4:26 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:

> On Tue, 20 Jun 2017, Matthew Simpson wrote:
>
> I'm installing some spatial packages on a linux server and due to
>> university constraints, cannot install anything using a package manager.
>> I've managed to get rgdal installed successfully, but rgeos is causing
>> problems.
>>
>> I've installed the geos library already, but when I attempt to install
>> rgeos within R, it complains that that it cannot run C compiled programs.
>>
>
> Could you please say how you installed GEOS? Could you try out geos-config
> with each of the settings? Do you need 3.7.0dev (I haven't tried this as a
> source of difficulty as it seems implausible, but neither rgeos nor sf need
> bleeding edge functionality from GEOS)? Could you try to install sf from
> source (it also uses GEOS)? Is this the GEOS geos-config -m library bug
> (probably not)? Unpacking rgeos, running ./configure in the package root, I
> see (Fedora 25, R 3.4.0):
>
> $ ./configure
> configure: CC: gcc
> configure: CXX: g++
> configure: rgeos: 0.3-23
> checking for /usr/bin/svnversion... yes
> configure: svn revision: 547
> checking for geos-config... /usr/local/bin/geos-config
> checking geos-config usability... yes
> configure: GEOS version: 3.6.1
> checking geos version at least 3.2.0... yes
> checking geos-config clibs... yes
> checking for gcc... gcc
> checking whether the C compiler works... yes
> checking for C compiler default output file name... a.out
> checking for suffix of executables...
> checking whether we are cross compiling... no
> checking for suffix of object files... o
> checking whether we are using the GNU C compiler... yes
> checking whether gcc accepts -g... yes
> checking for gcc option to accept ISO C89... none needed
> checking how to run the C preprocessor... gcc -E
> checking for grep that handles long lines and -e... /usr/bin/grep
> checking for egrep... /usr/bin/grep -E
> checking for ANSI C header files... yes
> checking for sys/types.h... yes
> checking for sys/stat.h... yes
> checking for stdlib.h... yes
> checking for string.h... yes
> checking for memory.h... yes
> checking for strings.h... yes
> checking for inttypes.h... yes
> checking for stdint.h... yes
> checking for unistd.h... yes
> checking geos_c.h usability... yes
> checking geos_c.h presence... yes
> checking for geos_c.h... yes
> checking geos: linking with libgeos_c... yes
> configure: PKG_CPPFLAGS:  -I/usr/local/include
> configure: PKG_LIBS:  -L/usr/local/lib -lgeos -L/usr/local/lib -lgeos_c
> configure: creating ./config.status
> config.status: creating src/Makevars
>
> but you fail about half-way down at the standard croos-compilation test.
> For rgdal/configure - you said your rgdal install on the same system
> succeeded, I see:
>
> ...
> checking for gcc... gcc
> checking whether the C compiler works... yes
> checking for C compiler default output file name... a.out
> checking for suffix of executables...
> checking whether we are cross compiling... no
> checking for suffix of object files... o
> checking whether we are using the GNU C compiler... yes
> checking whether gcc accepts -g... yes
> checking for gcc option to accept ISO C89... none needed
> checking how to run the C preprocessor... gcc -E
> ...
>
> What do you see (just running ./configure in the package root)?
>
> Roger
>
>
>> I've also tried downloading the tarball myself and running R CMD check,
>> and
>> it gives me the same complaint.
>>
>> I've successfully reinstalled Rcpp from source, but that seemed to do
>> nothing.
>>
>> Below is: 1) the console input from the attempted installation, 2) shell
>> output from running R CMD check, and 3) my sessionInfo()
>>
>> Any help would be appreciated.
>>
>> Matt
>>
>> 1) Here is the result of attempted installation: (note: removing type =
>> "source" changes nothing):
>>
>> install.packages("rgeos", type = "source",
>>>
>> +         configure.args =
>> "--with-geos-config=/group/stsn/shared_libs/geos/bin/geos-config",
>> +         repos = "https://cloud.r-project.org")
>> Installing package into ?/home/msimpson/R/x86_64-pc-li
>> nux-gnu-library/3.3?
>> (as ?lib? is unspecified)
>> trying URL 'https://cloud.r-project.org/src/contrib/rgeos_0.3-23.tar.gz'
>> Content type 'application/x-gzip' length 257486 bytes (251 KB)
>> ==================================================
>> downloaded 251 KB
>>
>> * installing *source* package ?rgeos? ...
>> ** package ?rgeos? successfully unpacked and MD5 sums checked
>> configure: CC: /usr/bin/gcc -std=gnu99
>> configure: CXX: /usr/bin/g++
>> configure: rgeos: 0.3-23
>> checking for /usr/bin/svnversion... no
>> configure: svn revision: 546
>> configure: geos-config set to /group/stsn/shared_libs/geos/b
>> in/geos-config
>> checking geos-config exists... yes
>> checking geos-config executable... yes
>> checking geos-config usability... yes
>> configure: GEOS version: 3.7.0dev
>> checking geos version at least 3.2.0... yes
>> checking geos-config clibs... yes
>> checking for gcc... /usr/bin/gcc -std=gnu99
>> checking whether the C compiler works... yes
>> checking for C compiler default output file name... a.out
>> checking for suffix of executables...
>> checking whether we are cross compiling... configure: error: in
>> `/tmp/RtmppP5J2b/R.INSTALL236bb22fea27c/rgeos':
>> configure: error: cannot run C compiled programs.
>> If you meant to cross compile, use `--host'.
>> See `config.log' for more details
>> ERROR: configuration failed for package ?rgeos?
>> * removing ?/home/msimpson/R/x86_64-pc-linux-gnu-library/3.3/rgeos?
>>
>> The downloaded source packages are in
>>        ?/tmp/RtmpwkU04N/downloaded_packages?
>> Warning message:
>> In install.packages("rgeos", type = "source", configure.args =
>> "--with-geos-config=/group/stsn/shared_libs/geos/bin/geos-config",  :
>>  installation of package ?rgeos? had non-zero exit status
>>
>> 2) Here's the result from running R CMD check:
>>
>> R CMD check
>> --install-args='--configure-args=--with-geos-config=/group/
>> stsn/shared_libs/geos/bin/geos-config'
>> rgeos_0.3-23.tar.gz
>> * using log directory ?/group/stsn/src/test/rgeos.Rcheck?
>> * using R version 3.3.1 (2016-06-21)
>> * using platform: x86_64-pc-linux-gnu (64-bit)
>> * using session charset: UTF-8
>> * checking for file ?rgeos/DESCRIPTION? ... OK
>> * this is package ?rgeos? version ?0.3-23?
>> * checking package namespace information ... OK
>> * checking package dependencies ... OK
>> * checking if this is a source package ... OK
>> * checking if there is a namespace ... OK
>> * checking for executable files ... OK
>> * checking for hidden files and directories ... OK
>> * checking for portable file names ... OK
>> * checking for sufficient/correct file permissions ... OK
>> * checking whether package ?rgeos? can be installed ... ERROR
>> Installation failed.
>> See ?/group/stsn/src/test/rgeos.Rcheck/00install.out? for details.
>> * DONE
>>
>> Status: 1 ERROR
>> See
>>  ?/group/stsn/src/test/rgeos.Rcheck/00check.log?
>> for details.
>>
>> cat /group/stsn/src/test/rgeos.Rcheck/00install.out
>> * installing *source* package ?rgeos? ...
>> ** package ?rgeos? successfully unpacked and MD5 sums checked
>> configure: CC: /usr/bin/gcc -std=gnu99
>> configure: CXX: /usr/bin/g++
>> configure: rgeos: 0.3-23
>> checking for /usr/bin/svnversion... no
>> configure: svn revision: 546
>> configure: geos-config set to /group/stsn/shared_libs/geos/b
>> in/geos-config
>> checking geos-config exists... yes
>> checking geos-config executable... yes
>> checking geos-config usability... yes
>> configure: GEOS version: 3.7.0dev
>> checking geos version at least 3.2.0... yes
>> checking geos-config clibs... yes
>> checking for gcc... /usr/bin/gcc -std=gnu99
>> checking whether the C compiler works... yes
>> checking for C compiler default output file name... a.out
>> checking for suffix of executables...
>> checking whether we are cross compiling... configure: error: in
>> `/group/stsn/src/test/rgeos.Rcheck/00_pkg_src/rgeos':
>> configure: error: cannot run C compiled programs.
>> If you meant to cross compile, use `--host'.
>> See `config.log' for more details
>> ERROR: configuration failed for package ?rgeos?
>> * removing ?/group/stsn/src/test/rgeos.Rcheck/rgeos?
>>
>> 3) And here's my session info:
>>
>> sessionInfo()
>> R version 3.3.1 (2016-06-21)
>> Platform: x86_64-pc-linux-gnu (64-bit)
>> Running under: CentOS Linux 7 (Core)
>>
>> locale:
>> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>> [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>> [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>> [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>> [9] LC_ADDRESS=C               LC_TELEPHONE=C
>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

	[[alternative HTML version deleted]]


From Wade.A.Wall at erdc.dren.mil  Tue Jun 20 23:30:37 2017
From: Wade.A.Wall at erdc.dren.mil (Wall, Wade A ERDC-RDE-CERL-IL CIV)
Date: Tue, 20 Jun 2017 21:30:37 +0000
Subject: [R-sig-Geo] Problems with using dismo package on HPC
Message-ID: <C1524BE4BF45454293B8DF38FB9B5ECAD6AAE69B@MS-EX1VKS.erdc.dren.mil>

Hi all,

I am trying to use the dismo package on an HPC and am running into some problems. The code that I used worked fine until a few days ago, then I started getting the error message

Error in rgdal::getRasterData(con, offset = offs, region.dim = c(1, nc),  :
Failure during raster IO

Not sure how to proceed on this. The code works on my desktop computer, and like I said, worked until a few days ago on the HPC. I have read/write privileges to the outfolder location,  all the environmental layers are the same extent and resolution, and the spatial points are in the same coordinate system.

Any help would be greatly appreciated.
Wade


From c.cavalieri at me.com  Wed Jun 21 10:16:26 2017
From: c.cavalieri at me.com (Carlo Cavalieri)
Date: Wed, 21 Jun 2017 10:16:26 +0200
Subject: [R-sig-Geo] Kriging prediction variances on gstat
Message-ID: <2D3F73DE-95E1-4E68-9913-0433B34D8E3A@me.com>

Hi all,

I would like to know how the kriging variance is computed by gstat, because on my analysis I need to use a cell-specific covariate depended scale parameter rather than a unique one.
If the overall scale of the origins variance is fixed by the sill of the theoretical variogram model used to make the interpolation I can divide the estimated kriging variance by it and then multiply by the cell specific value, but I wanted to make sure that the sill value (partial sill + nugget) is used.

Thank you
Carlo
	[[alternative HTML version deleted]]


From edzer.pebesma at uni-muenster.de  Wed Jun 21 10:31:56 2017
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 21 Jun 2017 10:31:56 +0200
Subject: [R-sig-Geo] Issues installing rgeos on linux server
In-Reply-To: <CA+x+Of60febZjtYVdGQty4fwVYmmgPzMkND7uns6OYncgue0RQ@mail.gmail.com>
References: <CA+x+Of64Cz=mN5ETWwhxTTfgXqjftaf7md_h+eB_euqA8ypDLw@mail.gmail.com>
 <alpine.LFD.2.20.1706201113210.20255@reclus.nhh.no>
 <CA+x+Of60febZjtYVdGQty4fwVYmmgPzMkND7uns6OYncgue0RQ@mail.gmail.com>
Message-ID: <629b112f-e0df-948b-d2b6-2d78eda4b8fe@uni-muenster.de>

Would it be helpful if we kept a docker file somewhere, that shows how
to install rgeos/rgdal with custom installed libraries? For sf, I
maintain one here:

https://github.com/edzer/sfr/tree/master/inst/docker/custom

On 20/06/17 22:35, Matthew Simpson wrote:
> Thank you, this was very helpful. It turned out the issue was that I was
> using the development version - I had cloned the github repository and
> installed from there. Downloading the tarball for the latest stable release
> solved the problem. I went ahead and did the same thing for GDAL and proj.4
> and reinstalled rgdal just to be safe. And sure enough, before reinstalling
> rgdal was complaining about missing proj_defs.dat, even though it existed
> in the proj.4/share folder. But now it's working just fine.
> 
> For posterity, my full commands to get GEOS, GDAL, proj.4, rgdal, and rgeos
> installed from source on a linux server (CentOS 7.3.1611) are below.
> 
> cd /path/to/src/geos/
> wget http://download.osgeo.org/geos/geos-3.6.1.tar.bz2
> tar -vxjf geos-3.6.1.tar.bz2
> cd geos-3.6.1
> ./configure --prefix=/path/to/install/geos
> make
> make check
> make install
> 
> cd /path/to/src/gdal
> wget http://download.osgeo.org/gdal/2.2.0/gdal-2.2.0.tar.gz
> tar -xvzf gdal-2.2.0.tar.gz
> cd gdal-2.2.0
> ./autogen.sh
> ./configure --prefix=/path/to/install/gdal
> make
> ## there is no make check
> make install
> 
> cd /path/to/src/proj.4/
> wget http://download.osgeo.org/proj/proj-4.9.3.tar.gz
> tar -xvzf proj-4.9.3.tar.gz
> cd proj-4.9.3
> ./configure --prefix=/path/to/install/proj.4
> make
> make check
> make install
> 
> echo 'export
> PATH=/path/to/install/gdal/bin:/path/to/install/proj.4/bin:/path/to/install/geos/bin:$PATH'
>>> ~/.bash_profile
> echo 'export
> LD_LIBRARY_PATH=/path/to/install/gdal/lib:/path/to/install/proj.4/lib:/path/to/install/geos/lib:$LD_LIBRARY_PATH'
>>> ~/.bash_profile
> . ~/.bash_profile
> 
> ## in R run:
> ## need this installed from source to prevent some compiler issues that
> would cause R to segfault if rgdal was loaded and you tried to install
> certain packages
> install.packages("Rcpp", type = "source", repos = "
> https://cloud.r-project.org")
> 
> install.packages("rgdal", type = "source", repos = "
> https://cloud.r-project.org",
> configure.args = "--with-proj-include=/path/to/install/proj.4/include
> --with-proj-lib=/path/to/install/proj.4/lib
> --with-proj-share=/path/to/install/proj.4/share/proj
> --with-gdal-config=/path/to/install/gdal/bin/gdal-config")
> 
> install.packages("rgeos", type = "source", repos = "
> https://cloud.r-project.org",
>          configure.args =
> "--with-geos-config=/path/to/install/geos/bin/geos-config")
> 
> 
> Note that --with-proj-share=/path/to/install/proj.4/share did NOT work.
> 
> 
> On Tue, Jun 20, 2017 at 4:26 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> 
>> On Tue, 20 Jun 2017, Matthew Simpson wrote:
>>
>> I'm installing some spatial packages on a linux server and due to
>>> university constraints, cannot install anything using a package manager.
>>> I've managed to get rgdal installed successfully, but rgeos is causing
>>> problems.
>>>
>>> I've installed the geos library already, but when I attempt to install
>>> rgeos within R, it complains that that it cannot run C compiled programs.
>>>
>>
>> Could you please say how you installed GEOS? Could you try out geos-config
>> with each of the settings? Do you need 3.7.0dev (I haven't tried this as a
>> source of difficulty as it seems implausible, but neither rgeos nor sf need
>> bleeding edge functionality from GEOS)? Could you try to install sf from
>> source (it also uses GEOS)? Is this the GEOS geos-config -m library bug
>> (probably not)? Unpacking rgeos, running ./configure in the package root, I
>> see (Fedora 25, R 3.4.0):
>>
>> $ ./configure
>> configure: CC: gcc
>> configure: CXX: g++
>> configure: rgeos: 0.3-23
>> checking for /usr/bin/svnversion... yes
>> configure: svn revision: 547
>> checking for geos-config... /usr/local/bin/geos-config
>> checking geos-config usability... yes
>> configure: GEOS version: 3.6.1
>> checking geos version at least 3.2.0... yes
>> checking geos-config clibs... yes
>> checking for gcc... gcc
>> checking whether the C compiler works... yes
>> checking for C compiler default output file name... a.out
>> checking for suffix of executables...
>> checking whether we are cross compiling... no
>> checking for suffix of object files... o
>> checking whether we are using the GNU C compiler... yes
>> checking whether gcc accepts -g... yes
>> checking for gcc option to accept ISO C89... none needed
>> checking how to run the C preprocessor... gcc -E
>> checking for grep that handles long lines and -e... /usr/bin/grep
>> checking for egrep... /usr/bin/grep -E
>> checking for ANSI C header files... yes
>> checking for sys/types.h... yes
>> checking for sys/stat.h... yes
>> checking for stdlib.h... yes
>> checking for string.h... yes
>> checking for memory.h... yes
>> checking for strings.h... yes
>> checking for inttypes.h... yes
>> checking for stdint.h... yes
>> checking for unistd.h... yes
>> checking geos_c.h usability... yes
>> checking geos_c.h presence... yes
>> checking for geos_c.h... yes
>> checking geos: linking with libgeos_c... yes
>> configure: PKG_CPPFLAGS:  -I/usr/local/include
>> configure: PKG_LIBS:  -L/usr/local/lib -lgeos -L/usr/local/lib -lgeos_c
>> configure: creating ./config.status
>> config.status: creating src/Makevars
>>
>> but you fail about half-way down at the standard croos-compilation test.
>> For rgdal/configure - you said your rgdal install on the same system
>> succeeded, I see:
>>
>> ...
>> checking for gcc... gcc
>> checking whether the C compiler works... yes
>> checking for C compiler default output file name... a.out
>> checking for suffix of executables...
>> checking whether we are cross compiling... no
>> checking for suffix of object files... o
>> checking whether we are using the GNU C compiler... yes
>> checking whether gcc accepts -g... yes
>> checking for gcc option to accept ISO C89... none needed
>> checking how to run the C preprocessor... gcc -E
>> ...
>>
>> What do you see (just running ./configure in the package root)?
>>
>> Roger
>>
>>
>>> I've also tried downloading the tarball myself and running R CMD check,
>>> and
>>> it gives me the same complaint.
>>>
>>> I've successfully reinstalled Rcpp from source, but that seemed to do
>>> nothing.
>>>
>>> Below is: 1) the console input from the attempted installation, 2) shell
>>> output from running R CMD check, and 3) my sessionInfo()
>>>
>>> Any help would be appreciated.
>>>
>>> Matt
>>>
>>> 1) Here is the result of attempted installation: (note: removing type =
>>> "source" changes nothing):
>>>
>>> install.packages("rgeos", type = "source",
>>>>
>>> +         configure.args =
>>> "--with-geos-config=/group/stsn/shared_libs/geos/bin/geos-config",
>>> +         repos = "https://cloud.r-project.org")
>>> Installing package into ?/home/msimpson/R/x86_64-pc-li
>>> nux-gnu-library/3.3?
>>> (as ?lib? is unspecified)
>>> trying URL 'https://cloud.r-project.org/src/contrib/rgeos_0.3-23.tar.gz'
>>> Content type 'application/x-gzip' length 257486 bytes (251 KB)
>>> ==================================================
>>> downloaded 251 KB
>>>
>>> * installing *source* package ?rgeos? ...
>>> ** package ?rgeos? successfully unpacked and MD5 sums checked
>>> configure: CC: /usr/bin/gcc -std=gnu99
>>> configure: CXX: /usr/bin/g++
>>> configure: rgeos: 0.3-23
>>> checking for /usr/bin/svnversion... no
>>> configure: svn revision: 546
>>> configure: geos-config set to /group/stsn/shared_libs/geos/b
>>> in/geos-config
>>> checking geos-config exists... yes
>>> checking geos-config executable... yes
>>> checking geos-config usability... yes
>>> configure: GEOS version: 3.7.0dev
>>> checking geos version at least 3.2.0... yes
>>> checking geos-config clibs... yes
>>> checking for gcc... /usr/bin/gcc -std=gnu99
>>> checking whether the C compiler works... yes
>>> checking for C compiler default output file name... a.out
>>> checking for suffix of executables...
>>> checking whether we are cross compiling... configure: error: in
>>> `/tmp/RtmppP5J2b/R.INSTALL236bb22fea27c/rgeos':
>>> configure: error: cannot run C compiled programs.
>>> If you meant to cross compile, use `--host'.
>>> See `config.log' for more details
>>> ERROR: configuration failed for package ?rgeos?
>>> * removing ?/home/msimpson/R/x86_64-pc-linux-gnu-library/3.3/rgeos?
>>>
>>> The downloaded source packages are in
>>>        ?/tmp/RtmpwkU04N/downloaded_packages?
>>> Warning message:
>>> In install.packages("rgeos", type = "source", configure.args =
>>> "--with-geos-config=/group/stsn/shared_libs/geos/bin/geos-config",  :
>>>  installation of package ?rgeos? had non-zero exit status
>>>
>>> 2) Here's the result from running R CMD check:
>>>
>>> R CMD check
>>> --install-args='--configure-args=--with-geos-config=/group/
>>> stsn/shared_libs/geos/bin/geos-config'
>>> rgeos_0.3-23.tar.gz
>>> * using log directory ?/group/stsn/src/test/rgeos.Rcheck?
>>> * using R version 3.3.1 (2016-06-21)
>>> * using platform: x86_64-pc-linux-gnu (64-bit)
>>> * using session charset: UTF-8
>>> * checking for file ?rgeos/DESCRIPTION? ... OK
>>> * this is package ?rgeos? version ?0.3-23?
>>> * checking package namespace information ... OK
>>> * checking package dependencies ... OK
>>> * checking if this is a source package ... OK
>>> * checking if there is a namespace ... OK
>>> * checking for executable files ... OK
>>> * checking for hidden files and directories ... OK
>>> * checking for portable file names ... OK
>>> * checking for sufficient/correct file permissions ... OK
>>> * checking whether package ?rgeos? can be installed ... ERROR
>>> Installation failed.
>>> See ?/group/stsn/src/test/rgeos.Rcheck/00install.out? for details.
>>> * DONE
>>>
>>> Status: 1 ERROR
>>> See
>>>  ?/group/stsn/src/test/rgeos.Rcheck/00check.log?
>>> for details.
>>>
>>> cat /group/stsn/src/test/rgeos.Rcheck/00install.out
>>> * installing *source* package ?rgeos? ...
>>> ** package ?rgeos? successfully unpacked and MD5 sums checked
>>> configure: CC: /usr/bin/gcc -std=gnu99
>>> configure: CXX: /usr/bin/g++
>>> configure: rgeos: 0.3-23
>>> checking for /usr/bin/svnversion... no
>>> configure: svn revision: 546
>>> configure: geos-config set to /group/stsn/shared_libs/geos/b
>>> in/geos-config
>>> checking geos-config exists... yes
>>> checking geos-config executable... yes
>>> checking geos-config usability... yes
>>> configure: GEOS version: 3.7.0dev
>>> checking geos version at least 3.2.0... yes
>>> checking geos-config clibs... yes
>>> checking for gcc... /usr/bin/gcc -std=gnu99
>>> checking whether the C compiler works... yes
>>> checking for C compiler default output file name... a.out
>>> checking for suffix of executables...
>>> checking whether we are cross compiling... configure: error: in
>>> `/group/stsn/src/test/rgeos.Rcheck/00_pkg_src/rgeos':
>>> configure: error: cannot run C compiled programs.
>>> If you meant to cross compile, use `--host'.
>>> See `config.log' for more details
>>> ERROR: configuration failed for package ?rgeos?
>>> * removing ?/group/stsn/src/test/rgeos.Rcheck/rgeos?
>>>
>>> 3) And here's my session info:
>>>
>>> sessionInfo()
>>> R version 3.3.1 (2016-06-21)
>>> Platform: x86_64-pc-linux-gnu (64-bit)
>>> Running under: CentOS Linux 7 (Core)
>>>
>>> locale:
>>> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>> [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>> [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>> [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>>> [9] LC_ADDRESS=C               LC_TELEPHONE=C
>>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 473 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170621/42521e3c/attachment.sig>

From edzer.pebesma at uni-muenster.de  Wed Jun 21 10:52:20 2017
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 21 Jun 2017 10:52:20 +0200
Subject: [R-sig-Geo] Kriging prediction variances on gstat
In-Reply-To: <2D3F73DE-95E1-4E68-9913-0433B34D8E3A@me.com>
References: <2D3F73DE-95E1-4E68-9913-0433B34D8E3A@me.com>
Message-ID: <2b05ed5b-ce93-d5a1-b8e2-56b183454177@uni-muenster.de>

citation("gstat")

points you to the literature.

On 21/06/17 10:16, Carlo Cavalieri wrote:
> Hi all,
> 
> I would like to know how the kriging variance is computed by gstat, because on my analysis I need to use a cell-specific covariate depended scale parameter rather than a unique one.
> If the overall scale of the origins variance is fixed by the sill of the theoretical variogram model used to make the interpolation I can divide the estimated kriging variance by it and then multiply by the cell specific value, but I wanted to make sure that the sill value (partial sill + nugget) is used.
> 
> Thank you
> Carlo
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 473 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170621/a3f0b5b6/attachment.sig>

From c.cavalieri at me.com  Wed Jun 21 13:20:06 2017
From: c.cavalieri at me.com (Carlo Cavalieri)
Date: Wed, 21 Jun 2017 13:20:06 +0200
Subject: [R-sig-Geo] Kriging prediction variances on gstat
In-Reply-To: <2b05ed5b-ce93-d5a1-b8e2-56b183454177@uni-muenster.de>
References: <2D3F73DE-95E1-4E68-9913-0433B34D8E3A@me.com>
 <2b05ed5b-ce93-d5a1-b8e2-56b183454177@uni-muenster.de>
Message-ID: <19CC63C3-3E28-4ABD-9144-8AF785EFF083@me.com>

Thanks!


> Il giorno 21 giu 2017, alle ore 10:52, Edzer Pebesma <edzer.pebesma at uni-muenster.de> ha scritto:
> 
> citation("gstat")
> 
> points you to the literature.
> 
>> On 21/06/17 10:16, Carlo Cavalieri wrote:
>> Hi all,
>> 
>> I would like to know how the kriging variance is computed by gstat, because on my analysis I need to use a cell-specific covariate depended scale parameter rather than a unique one.
>> If the overall scale of the origins variance is fixed by the sill of the theoretical variogram model used to make the interpolation I can divide the estimated kriging variance by it and then multiply by the cell specific value, but I wanted to make sure that the sill value (partial sill + nugget) is used.
>> 
>> Thank you
>> Carlo
>>    [[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
> 
> -- 
> Edzer Pebesma
> Institute for Geoinformatics  (ifgi),  University of M?nster
> Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
> Journal of Statistical Software:   http://www.jstatsoft.org/
> Computers & Geosciences:   http://elsevier.com/locate/cageo/
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From johnwasige at gmail.com  Thu Jun 22 10:04:49 2017
From: johnwasige at gmail.com (John Wasige)
Date: Thu, 22 Jun 2017 10:04:49 +0200
Subject: [R-sig-Geo] Thresholds & reclassify raster
Message-ID: <CAJgdCD6JUJp5Ktx-RE=2Md3yG==VBhypLEJDyFiGA1DF+gYmBg@mail.gmail.com>

?Dear all?
,
I am requesting for your help to reclassify the gpp.tif (attached) raster
in R. Not sure my script here is doing the right thing.

?#Data structure?

class       : RasterBrick
dimensions  : 1243, 1409, 1751387, 1  (nrow, ncol, ncell, nlayers)
resolution  : 0.00225804, 0.00225804  (x, y)
extent      : -25.53282, -22.35125, 14.54232, 17.34906  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0
data source : L:\NDVI_WGS84\gpp.tif
names       :        gpp
min values  : -0.2176632
max values  :   2.989293


?###?

?I want to ?
use the statistical distribution of gpp.tif values set threshold for change
assignment. The thresholds should be set by the following two
? ?
options:

(Option1) => use  mean and StD and assign all pixel values  < mean - StD as
negative change (class 1) and all values  > mean + StD as positive
change (class
3); all values in between would be assigned 'neutral' for the final
tabulation (class2).

(option2) => what may come to almost the same result is to do the
cumulative histogram of the calculated GPPproxy pixels and assign all
pixels below the 15 percentile to negative change (class1) and all pixel
above the 85 percentile to positive change (class3) and again the range in
between (15 to 85 percentile) would be assigned neutral (class2).

#R script

# classification
#Option1_mean_sd
gpp <- brick('L:/NDVI_WGS84/gpp.tif')
hist(as.matrix(GPP))
plot(GPPproxy)
m <- cellStats(gpp, 'mean')
sd <- cellStats(gpp, 'sd')
v <- m-sd
gppnew <- gpp-v
plot(gppnew)
gppnew[gppnew>0] <- 3
gppnew[gppnew<0] <- 1
gppnew[gppnew==0] <- 2
plot(gppnew)
writeRaster(gppnew, filename=paste("L:/NDVI_WGS84/gppnew_mean_sd",sep=''),
format="GTiff", overwrite=TRUE)

#Option2_percentile
max<- cellStats(gpp, 'max')
gppnew2 <-(gpp/max)*100
min <- cellStats(gpp, 'min')
m <- matrix(c(min, 15, 1,
              15, 85, 2,
              85, Inf, 3), ncol=3, byrow=TRUE)
gppnew_percentile <- reclassify(gppnew2, m)

hist(as.matrix(gppnew_percentile))
writeRaster(gppnew_percentile,
filename=paste("L:/NDVI_WGS84/gppnew_percentile",sep=''),
format="GTiff", overwrite=TRUE)
plot(gppnew_percentile)

?Thanks for your help

	[[alternative HTML version deleted]]


From btupper at bigelow.org  Wed Jun 21 17:41:59 2017
From: btupper at bigelow.org (Ben Tupper)
Date: Wed, 21 Jun 2017 11:41:59 -0400
Subject: [R-sig-Geo] raster - unrotate?
Message-ID: <6BD652E0-73C1-46CD-BC60-E5FFFCDBF1DB@bigelow.org>

Hello,

We have rasters that span [-180, 180] from NASA's Ocean Color (https://oceancolor.gsfc.nasa.gov/)  datasets.  We are trying to extract a region that spans 100E to 90W, that is 100 to -90.  The region 'wraps' across the edges as shown by the plot at the address below.

https://dl.dropboxusercontent.com/u/8433654/sst.png


library(raster)
uri <- 'https://oceandata.sci.gsfc.nasa.gov:443/opendap/MODISA/L3SMI/2016/001/A20160012016032.L3m_R32_SST_sst_9km.nc'
R <- raster::raster(uri, varname = 'sst')

R 
#class       : RasterLayer 
#dimensions  : 180, 360, 64800  (nrow, ncol, ncell)
#resolution  : 1, 1  (x, y)
#extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
#coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0 
#data source : in memory
#names       : layer 
#values      : 1.482572e-05, 0.9999928  (min, max)

plot(R)
lines(c(180, 100, 100, 180), c(80,80,0,0))
lines(c(-180,-90,-90,-180), c(80,80,0,0))

I see that there is the nice raster::rotate() function to rotate raster coordinates from [0,360] to [-180,180]. That would make extracting the region super easy if the inverse were available.  Is there an equivalent way to implement the inverse or raster::rotate()?  I could dig into the source of raster::rotate() to see how to code one up, but I hate like heck to reinvent the wheel.

Thanks!
Ben


Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org


From mdsumner at gmail.com  Thu Jun 22 10:46:41 2017
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 22 Jun 2017 08:46:41 +0000
Subject: [R-sig-Geo] raster - unrotate?
In-Reply-To: <6BD652E0-73C1-46CD-BC60-E5FFFCDBF1DB@bigelow.org>
References: <6BD652E0-73C1-46CD-BC60-E5FFFCDBF1DB@bigelow.org>
Message-ID: <CAAcGz9-sWzxyO6DDvdgA3XWz0eEEGVpRHH7vVn3pUWxW4jGhfg@mail.gmail.com>

It used to do the inverse, and I preserved a copy of the old behaviour
here:

https://github.com/AustralianAntarcticDivision/raadtools/blob/master/R/utils.R#L9

You're probably best to learn from how it approaches it rather than just
use it, since it's not a general capability, just works for those very
specific cases.

I just tested it and it still seems to work fine, I used

oceandata.sci.gsfc.nasa.gov/MODISA/Mapped/Monthly/9km/chlor/A20021822002212.L3m_MO_CHL_chlor_a_9km.nc


obtainable with

https://oceandata.sci.gsfc.nasa.gov/cgi/getfile/A20021822002212.L3m_MO_CHL_chlor_a_9km.nc


If you're extracting points you might as well just convert them into the
"Atlantic" range, but it's painful to get that right for polygons or lines
(and very hard to generalize once you get it working anyway).

For simple regions like the one you show I'd probably split it into two
extents() and use those - but depends on your workflow, all these options
are useful here and there.

Cheers, Mike.


On Thu, 22 Jun 2017 at 18:30 Ben Tupper <btupper at bigelow.org> wrote:

> Hello,
>
> We have rasters that span [-180, 180] from NASA's Ocean Color (
> https://oceancolor.gsfc.nasa.gov/)  datasets.  We are trying to extract a
> region that spans 100E to 90W, that is 100 to -90.  The region 'wraps'
> across the edges as shown by the plot at the address below.
>
> https://dl.dropboxusercontent.com/u/8433654/sst.png
>
>
> library(raster)
> uri <- '
> https://oceandata.sci.gsfc.nasa.gov:443/opendap/MODISA/L3SMI/2016/001/A20160012016032.L3m_R32_SST_sst_9km.nc
> '
> R <- raster::raster(uri, varname = 'sst')
>
> R
> #class       : RasterLayer
> #dimensions  : 180, 360, 64800  (nrow, ncol, ncell)
> #resolution  : 1, 1  (x, y)
> #extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
> #coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
> #data source : in memory
> #names       : layer
> #values      : 1.482572e-05, 0.9999928  (min, max)
>
> plot(R)
> lines(c(180, 100, 100, 180), c(80,80,0,0))
> lines(c(-180,-90,-90,-180), c(80,80,0,0))
>
> I see that there is the nice raster::rotate() function to rotate raster
> coordinates from [0,360] to [-180,180]. That would make extracting the
> region super easy if the inverse were available.  Is there an equivalent
> way to implement the inverse or raster::rotate()?  I could dig into the
> source of raster::rotate() to see how to code one up, but I hate like heck
> to reinvent the wheel.
>
> Thanks!
> Ben
>
>
> Ben Tupper
> Bigelow Laboratory for Ocean Sciences
> 60 Bigelow Drive, P.O. Box 380
> East Boothbay, Maine 04544
> http://www.bigelow.org
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From kent3737 at gmail.com  Thu Jun 22 12:54:08 2017
From: kent3737 at gmail.com (Kent Johnson)
Date: Thu, 22 Jun 2017 06:54:08 -0400
Subject: [R-sig-Geo] sf 0.5-0 binary for macOS SIerra?
Message-ID: <CAPP0wyghYLs9hFJEnAdfj3Jg8ALdSs_PpuQBhYt2vwFYJQMdsw@mail.gmail.com>

Is there a simple features 0.5-0 binary for macOS Sierra (10.12)? I am
having trouble installing it from source. CRAN shows
OS X El Capitan binaries:r-release: sf_0.4-3.tgz
OS X Mavericks binaries:r-oldrel: sf_0.5-0.tgz

Can I use the Mavericks binary?

Thanks,
Kent

	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Thu Jun 22 13:02:06 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 22 Jun 2017 13:02:06 +0200
Subject: [R-sig-Geo] sf 0.5-0 binary for macOS SIerra?
In-Reply-To: <CAPP0wyghYLs9hFJEnAdfj3Jg8ALdSs_PpuQBhYt2vwFYJQMdsw@mail.gmail.com>
References: <CAPP0wyghYLs9hFJEnAdfj3Jg8ALdSs_PpuQBhYt2vwFYJQMdsw@mail.gmail.com>
Message-ID: <alpine.LFD.2.20.1706221256360.14070@reclus.nhh.no>

Please also follow:

https://github.com/edzer/sfr/issues/393

and consider trying:

http://www.kyngchaos.com/software/frameworks

for a source sf install until things stabilise.

Roger

On Thu, 22 Jun 2017, Kent Johnson wrote:

> Is there a simple features 0.5-0 binary for macOS Sierra (10.12)? I am
> having trouble installing it from source. CRAN shows
> OS X El Capitan binaries:r-release: sf_0.4-3.tgz
> OS X Mavericks binaries:r-oldrel: sf_0.5-0.tgz
>
> Can I use the Mavericks binary?
>
> Thanks,
> Kent
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From btupper at bigelow.org  Thu Jun 22 13:28:10 2017
From: btupper at bigelow.org (Ben Tupper)
Date: Thu, 22 Jun 2017 07:28:10 -0400
Subject: [R-sig-Geo] raster - unrotate?
In-Reply-To: <CAAcGz9-sWzxyO6DDvdgA3XWz0eEEGVpRHH7vVn3pUWxW4jGhfg@mail.gmail.com>
References: <6BD652E0-73C1-46CD-BC60-E5FFFCDBF1DB@bigelow.org>
 <CAAcGz9-sWzxyO6DDvdgA3XWz0eEEGVpRHH7vVn3pUWxW4jGhfg@mail.gmail.com>
Message-ID: <A62EB8E3-74B9-4F2D-879E-8D5B87813372@bigelow.org>

Hi,

Wow!  A treasure from the past!

Hmmm.   I see what you mean; it might be best to snip-clip-and-smush from the native presentation.  We are testing out the performance of the dineof function in the sinkr package (https://github.com/marchtaylor/sinkr/blob/master/R/dineof.R) to interpolate patchy chlorophyl data.  

Thanks for the tip!

Cheers,
Ben

> On Jun 22, 2017, at 4:46 AM, Michael Sumner <mdsumner at gmail.com> wrote:
> 
> 
> It used to do the inverse, and I preserved a copy of the old behaviour here: 
> 
> https://github.com/AustralianAntarcticDivision/raadtools/blob/master/R/utils.R#L9 <https://github.com/AustralianAntarcticDivision/raadtools/blob/master/R/utils.R#L9>
> 
> You're probably best to learn from how it approaches it rather than just use it, since it's not a general capability, just works for those very specific cases. 
> 
> I just tested it and it still seems to work fine, I used 
> 
> oceandata.sci.gsfc.nasa.gov/MODISA/Mapped/Monthly/9km/chlor/A20021822002212.L3m_MO_CHL_chlor_a_9km.nc <http://oceandata.sci.gsfc.nasa.gov/MODISA/Mapped/Monthly/9km/chlor/A20021822002212.L3m_MO_CHL_chlor_a_9km.nc> 
> 
> obtainable with 
> 
> https://oceandata.sci.gsfc.nasa.gov/cgi/getfile/A20021822002212.L3m_MO_CHL_chlor_a_9km.nc <https://oceandata.sci.gsfc.nasa.gov/cgi/getfile/A20021822002212.L3m_MO_CHL_chlor_a_9km.nc> 
> 
> If you're extracting points you might as well just convert them into the "Atlantic" range, but it's painful to get that right for polygons or lines (and very hard to generalize once you get it working anyway). 
> 
> For simple regions like the one you show I'd probably split it into two extents() and use those - but depends on your workflow, all these options are useful here and there. 
> 
> Cheers, Mike. 
> 
> 
> On Thu, 22 Jun 2017 at 18:30 Ben Tupper <btupper at bigelow.org <mailto:btupper at bigelow.org>> wrote:
> Hello,
> 
> We have rasters that span [-180, 180] from NASA's Ocean Color (https://oceancolor.gsfc.nasa.gov/ <https://oceancolor.gsfc.nasa.gov/>)  datasets.  We are trying to extract a region that spans 100E to 90W, that is 100 to -90.  The region 'wraps' across the edges as shown by the plot at the address below.
> 
> https://dl.dropboxusercontent.com/u/8433654/sst.png <https://dl.dropboxusercontent.com/u/8433654/sst.png>
> 
> 
> library(raster)
> uri <- 'https://oceandata.sci.gsfc.nasa.gov:443/opendap/MODISA/L3SMI/2016/001/A20160012016032.L3m_R32_SST_sst_9km.nc <https://oceandata.sci.gsfc.nasa.gov/opendap/MODISA/L3SMI/2016/001/A20160012016032.L3m_R32_SST_sst_9km.nc>'
> R <- raster::raster(uri, varname = 'sst')
> 
> R
> #class       : RasterLayer
> #dimensions  : 180, 360, 64800  (nrow, ncol, ncell)
> #resolution  : 1, 1  (x, y)
> #extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
> #coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
> #data source : in memory
> #names       : layer
> #values      : 1.482572e-05, 0.9999928  (min, max)
> 
> plot(R)
> lines(c(180, 100, 100, 180), c(80,80,0,0))
> lines(c(-180,-90,-90,-180), c(80,80,0,0))
> 
> I see that there is the nice raster::rotate() function to rotate raster coordinates from [0,360] to [-180,180]. That would make extracting the region super easy if the inverse were available.  Is there an equivalent way to implement the inverse or raster::rotate()?  I could dig into the source of raster::rotate() to see how to code one up, but I hate like heck to reinvent the wheel.
> 
> Thanks!
> Ben
> 
> 
> Ben Tupper
> Bigelow Laboratory for Ocean Sciences
> 60 Bigelow Drive, P.O. Box 380
> East Boothbay, Maine 04544
> http://www.bigelow.org <http://www.bigelow.org/>
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
> -- 
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> Kingston Tasmania 7050 Australia
> 

Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org




	[[alternative HTML version deleted]]


From btupper at bigelow.org  Thu Jun 22 13:47:33 2017
From: btupper at bigelow.org (Ben Tupper)
Date: Thu, 22 Jun 2017 07:47:33 -0400
Subject: [R-sig-Geo] Thresholds & reclassify raster
In-Reply-To: <CAJgdCD6JUJp5Ktx-RE=2Md3yG==VBhypLEJDyFiGA1DF+gYmBg@mail.gmail.com>
References: <CAJgdCD6JUJp5Ktx-RE=2Md3yG==VBhypLEJDyFiGA1DF+gYmBg@mail.gmail.com>
Message-ID: <AE953E8C-8394-4EED-A0E3-0838889A2837@bigelow.org>

Hi,

Your attachment didn't make it through.

I'm not sure about your first option, but your second can use a combination of quantile() and findInterval() to create a classified raster.  Perhaps like this...


library(raster)
r <- raster()
r <- setValues(r, runif(ncell(r), 40, 90))

pp <- quantile(r, c(0, 0.15, 0.85))
# pp
#       0%      15%      85% 
# 40.00199 47.64569 82.50751 

ix <- findInterval(getValues(r), pp)

classified_r <- setValues(r, ix)

# > r
# class       : RasterLayer 
# dimensions  : 180, 360, 64800  (nrow, ncol, ncell)
# resolution  : 1, 1  (x, y)
# extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
# coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0 
# data source : in memory
# names       : layer 
# values      : 40.00199, 89.99892  (min, max)

# > classified_r
# class       : RasterLayer 
# dimensions  : 180, 360, 64800  (nrow, ncol, ncell)
# resolution  : 1, 1  (x, y)
# extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
# coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0 
# data source : in memory
# names       : layer 
# values      : 1, 3  (min, max)


Cheers,
Ben
> On Jun 22, 2017, at 4:04 AM, John Wasige <johnwasige at gmail.com> wrote:
> 
> ?Dear all?
> ,
> I am requesting for your help to reclassify the gpp.tif (attached) raster
> in R. Not sure my script here is doing the right thing.
> 
> ?#Data structure?
> 
> class       : RasterBrick
> dimensions  : 1243, 1409, 1751387, 1  (nrow, ncol, ncell, nlayers)
> resolution  : 0.00225804, 0.00225804  (x, y)
> extent      : -25.53282, -22.35125, 14.54232, 17.34906  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0
> data source : L:\NDVI_WGS84\gpp.tif
> names       :        gpp
> min values  : -0.2176632
> max values  :   2.989293
> 
> 
> ?###?
> 
> ?I want to ?
> use the statistical distribution of gpp.tif values set threshold for change
> assignment. The thresholds should be set by the following two
> ? ?
> options:
> 
> (Option1) => use  mean and StD and assign all pixel values  < mean - StD as
> negative change (class 1) and all values  > mean + StD as positive
> change (class
> 3); all values in between would be assigned 'neutral' for the final
> tabulation (class2).
> 
> (option2) => what may come to almost the same result is to do the
> cumulative histogram of the calculated GPPproxy pixels and assign all
> pixels below the 15 percentile to negative change (class1) and all pixel
> above the 85 percentile to positive change (class3) and again the range in
> between (15 to 85 percentile) would be assigned neutral (class2).
> 
> #R script
> 
> # classification
> #Option1_mean_sd
> gpp <- brick('L:/NDVI_WGS84/gpp.tif')
> hist(as.matrix(GPP))
> plot(GPPproxy)
> m <- cellStats(gpp, 'mean')
> sd <- cellStats(gpp, 'sd')
> v <- m-sd
> gppnew <- gpp-v
> plot(gppnew)
> gppnew[gppnew>0] <- 3
> gppnew[gppnew<0] <- 1
> gppnew[gppnew==0] <- 2
> plot(gppnew)
> writeRaster(gppnew, filename=paste("L:/NDVI_WGS84/gppnew_mean_sd",sep=''),
> format="GTiff", overwrite=TRUE)
> 
> #Option2_percentile
> max<- cellStats(gpp, 'max')
> gppnew2 <-(gpp/max)*100
> min <- cellStats(gpp, 'min')
> m <- matrix(c(min, 15, 1,
>              15, 85, 2,
>              85, Inf, 3), ncol=3, byrow=TRUE)
> gppnew_percentile <- reclassify(gppnew2, m)
> 
> hist(as.matrix(gppnew_percentile))
> writeRaster(gppnew_percentile,
> filename=paste("L:/NDVI_WGS84/gppnew_percentile",sep=''),
> format="GTiff", overwrite=TRUE)
> plot(gppnew_percentile)
> 
> ?Thanks for your help
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org


From mdsumner at gmail.com  Thu Jun 22 14:08:41 2017
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 22 Jun 2017 12:08:41 +0000
Subject: [R-sig-Geo] Problems with using dismo package on HPC
In-Reply-To: <C1524BE4BF45454293B8DF38FB9B5ECAD6AAE69B@MS-EX1VKS.erdc.dren.mil>
References: <C1524BE4BF45454293B8DF38FB9B5ECAD6AAE69B@MS-EX1VKS.erdc.dren.mil>
Message-ID: <CAAcGz9-O3edKPhe6JP58+xfNf4qQzHwg5L1ObsoTr=VpnyCqag@mail.gmail.com>

It might be because the file is absent.
You need to trace through from the top, what file path is passed to raster,
then try reading that directly with raster() and ensure the file exists.
It's possibly a raster object with a link to a file that no longer exists.
Raster is a complex polymorphic beast, and can be a thin brittle shell held
together by a file name, with no safety net.

If you don't have the original code it's harder, but also hard to help
without access to your system.

Cheers, Mike

On Wed, 21 Jun 2017, 07:30 Wall, Wade A ERDC-RDE-CERL-IL CIV, <
Wade.A.Wall at erdc.dren.mil> wrote:

> Hi all,
>
> I am trying to use the dismo package on an HPC and am running into some
> problems. The code that I used worked fine until a few days ago, then I
> started getting the error message
>
> Error in rgdal::getRasterData(con, offset = offs, region.dim = c(1, nc),  :
> Failure during raster IO
>
> Not sure how to proceed on this. The code works on my desktop computer,
> and like I said, worked until a few days ago on the HPC. I have read/write
> privileges to the outfolder location,  all the environmental layers are the
> same extent and resolution, and the spatial points are in the same
> coordinate system.
>
> Any help would be greatly appreciated.
> Wade
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Thu Jun 22 14:58:52 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 22 Jun 2017 14:58:52 +0200
Subject: [R-sig-Geo] sf 0.5-0 binary for macOS SIerra?
In-Reply-To: <alpine.LFD.2.20.1706221256360.14070@reclus.nhh.no>
References: <CAPP0wyghYLs9hFJEnAdfj3Jg8ALdSs_PpuQBhYt2vwFYJQMdsw@mail.gmail.com>
 <alpine.LFD.2.20.1706221256360.14070@reclus.nhh.no>
Message-ID: <alpine.LFD.2.20.1706221456350.14070@reclus.nhh.no>

On Thu, 22 Jun 2017, Roger Bivand wrote:

> Please also follow:
>
> https: //github.com/edzer/sfr/issues/393
>
> and consider trying:
>
> http://www.kyngchaos.com/software/frameworks

See this thread (not only Roy's brain that kicks in more slowly ... ):

https://stat.ethz.ch/pipermail/r-sig-mac/2017-June/012429.html

Roger

>
> for a source sf install until things stabilise.
>
> Roger
>
> On Thu, 22 Jun 2017, Kent Johnson wrote:
>
>>  Is there a simple features 0.5-0 binary for macOS Sierra (10.12)? I am
>>  having trouble installing it from source. CRAN shows
>>  OS X El Capitan binaries:r-release: sf_0.4-3.tgz
>>  OS X Mavericks binaries:r-oldrel: sf_0.5-0.tgz
>>
>>  Can I use the Mavericks binary?
>>
>>  Thanks,
>>  Kent
>>
>>   [[alternative HTML version deleted]]
>>
>>  _______________________________________________
>>  R-sig-Geo mailing list
>>  R-sig-Geo at r-project.org
>> https: //stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From johnwasige at gmail.com  Thu Jun 22 14:59:09 2017
From: johnwasige at gmail.com (John Wasige)
Date: Thu, 22 Jun 2017 14:59:09 +0200
Subject: [R-sig-Geo] Thresholds & reclassify raster
In-Reply-To: <AE953E8C-8394-4EED-A0E3-0838889A2837@bigelow.org>
References: <CAJgdCD6JUJp5Ktx-RE=2Md3yG==VBhypLEJDyFiGA1DF+gYmBg@mail.gmail.com>
 <AE953E8C-8394-4EED-A0E3-0838889A2837@bigelow.org>
Message-ID: <CAJgdCD7uT+uP0qvnL_o8Q=_5r8Qb4zc+NORJC__1KxweMtZzEw@mail.gmail.com>

Many thanks Ben Tupper!
Best Rgds John

On Thu, Jun 22, 2017 at 1:47 PM, Ben Tupper <btupper at bigelow.org> wrote:

> Hi,
>
> Your attachment didn't make it through.
>
> I'm not sure about your first option, but your second can use a
> combination of quantile() and findInterval() to create a classified
> raster.  Perhaps like this...
>
>
> library(raster)
> r <- raster()
> r <- setValues(r, runif(ncell(r), 40, 90))
>
> pp <- quantile(r, c(0, 0.15, 0.85))
> # pp
> #       0%      15%      85%
> # 40.00199 47.64569 82.50751
>
> ix <- findInterval(getValues(r), pp)
>
> classified_r <- setValues(r, ix)
>
> # > r
> # class       : RasterLayer
> # dimensions  : 180, 360, 64800  (nrow, ncol, ncell)
> # resolution  : 1, 1  (x, y)
> # extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
> # coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
> # data source : in memory
> # names       : layer
> # values      : 40.00199, 89.99892  (min, max)
>
> # > classified_r
> # class       : RasterLayer
> # dimensions  : 180, 360, 64800  (nrow, ncol, ncell)
> # resolution  : 1, 1  (x, y)
> # extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
> # coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
> # data source : in memory
> # names       : layer
> # values      : 1, 3  (min, max)
>
>
> Cheers,
> Ben
> > On Jun 22, 2017, at 4:04 AM, John Wasige <johnwasige at gmail.com> wrote:
> >
> > ?Dear all?
> > ,
> > I am requesting for your help to reclassify the gpp.tif (attached) raster
> > in R. Not sure my script here is doing the right thing.
> >
> > ?#Data structure?
> >
> > class       : RasterBrick
> > dimensions  : 1243, 1409, 1751387, 1  (nrow, ncol, ncell, nlayers)
> > resolution  : 0.00225804, 0.00225804  (x, y)
> > extent      : -25.53282, -22.35125, 14.54232, 17.34906  (xmin, xmax,
> ymin, ymax)
> > coord. ref. : +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84
> +towgs84=0,0,0
> > data source : L:\NDVI_WGS84\gpp.tif
> > names       :        gpp
> > min values  : -0.2176632
> > max values  :   2.989293
> >
> >
> > ?###?
> >
> > ?I want to ?
> > use the statistical distribution of gpp.tif values set threshold for
> change
> > assignment. The thresholds should be set by the following two
> > ? ?
> > options:
> >
> > (Option1) => use  mean and StD and assign all pixel values  < mean - StD
> as
> > negative change (class 1) and all values  > mean + StD as positive
> > change (class
> > 3); all values in between would be assigned 'neutral' for the final
> > tabulation (class2).
> >
> > (option2) => what may come to almost the same result is to do the
> > cumulative histogram of the calculated GPPproxy pixels and assign all
> > pixels below the 15 percentile to negative change (class1) and all pixel
> > above the 85 percentile to positive change (class3) and again the range
> in
> > between (15 to 85 percentile) would be assigned neutral (class2).
> >
> > #R script
> >
> > # classification
> > #Option1_mean_sd
> > gpp <- brick('L:/NDVI_WGS84/gpp.tif')
> > hist(as.matrix(GPP))
> > plot(GPPproxy)
> > m <- cellStats(gpp, 'mean')
> > sd <- cellStats(gpp, 'sd')
> > v <- m-sd
> > gppnew <- gpp-v
> > plot(gppnew)
> > gppnew[gppnew>0] <- 3
> > gppnew[gppnew<0] <- 1
> > gppnew[gppnew==0] <- 2
> > plot(gppnew)
> > writeRaster(gppnew, filename=paste("L:/NDVI_WGS84/
> gppnew_mean_sd",sep=''),
> > format="GTiff", overwrite=TRUE)
> >
> > #Option2_percentile
> > max<- cellStats(gpp, 'max')
> > gppnew2 <-(gpp/max)*100
> > min <- cellStats(gpp, 'min')
> > m <- matrix(c(min, 15, 1,
> >              15, 85, 2,
> >              85, Inf, 3), ncol=3, byrow=TRUE)
> > gppnew_percentile <- reclassify(gppnew2, m)
> >
> > hist(as.matrix(gppnew_percentile))
> > writeRaster(gppnew_percentile,
> > filename=paste("L:/NDVI_WGS84/gppnew_percentile",sep=''),
> > format="GTiff", overwrite=TRUE)
> > plot(gppnew_percentile)
> >
> > ?Thanks for your help
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> Ben Tupper
> Bigelow Laboratory for Ocean Sciences
> 60 Bigelow Drive, P.O. Box 380
> East Boothbay, Maine 04544
> http://www.bigelow.org
>
>
>
>


-- 
John Wasige
"There are no REGRATES in LIFE, just lessons (Jennifer Aniston)?

	[[alternative HTML version deleted]]


From kent3737 at gmail.com  Thu Jun 22 15:11:14 2017
From: kent3737 at gmail.com (Kent Johnson)
Date: Thu, 22 Jun 2017 09:11:14 -0400
Subject: [R-sig-Geo] sf 0.5-0 binary for macOS SIerra?
In-Reply-To: <alpine.LFD.2.20.1706221456350.14070@reclus.nhh.no>
References: <CAPP0wyghYLs9hFJEnAdfj3Jg8ALdSs_PpuQBhYt2vwFYJQMdsw@mail.gmail.com>
 <alpine.LFD.2.20.1706221256360.14070@reclus.nhh.no>
 <alpine.LFD.2.20.1706221456350.14070@reclus.nhh.no>
Message-ID: <CAPP0wygOe_qJEDHjoUQxdZoXnsgynjuwz6d0OC4vnn+L0x-7Ow@mail.gmail.com>

On Thu, Jun 22, 2017 at 8:58 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:

> On Thu, 22 Jun 2017, Roger Bivand wrote:
>
> See this thread (not only Roy's brain that kicks in more slowly ... ):
>
> https://stat.ethz.ch/pipermail/r-sig-mac/2017-June/012429.html


Thank you, I will try that and report back.

Kent

	[[alternative HTML version deleted]]


From Stefan.Blumentrath at gmx.de  Fri Jun 23 11:46:20 2017
From: Stefan.Blumentrath at gmx.de (Stefan Blumentrath)
Date: Fri, 23 Jun 2017 11:46:20 +0200
Subject: [R-sig-Geo] Handling Spatial Autocorrelation and Multicolinearity
 when modelling altitude of forestline
Message-ID: <trinity-eafb5c08-5595-4b99-b314-5908d83c8917-1498211179720@3capp-gmx-bs05>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170623/3092b933/attachment.html>

From tirico85 at gmail.com  Fri Jun 23 12:44:31 2017
From: tirico85 at gmail.com (=?UTF-8?Q?Andr=C3=A9s_Peralta?=)
Date: Fri, 23 Jun 2017 12:44:31 +0200
Subject: [R-sig-Geo] Problems With Cartography 2 - Help
In-Reply-To: <CAASFQpQHSKU+8VeY78-xRvyZzKFti=fi67__8MRvzSE8Gvyfhw@mail.gmail.com>
References: <CAK_Cwd_Jwr4Uv6zoJ1qLgc9WpO3-ocnYXm5TVTgkgt11q5=WAg@mail.gmail.com>
 <CAASFQpQHSKU+8VeY78-xRvyZzKFti=fi67__8MRvzSE8Gvyfhw@mail.gmail.com>
Message-ID: <CAK_Cwd8yPJkbfopuDvmm=K2+8KoA2UnCb8Evp5UEaQ-aMoi3dg@mail.gmail.com>

Thank you Chris,

I found a way to connect the three islands in a previous R-sig-Geo answer
from Roger Bivand (
https://stat.ethz.ch/pipermail/r-sig-geo/2013-July/018868.html). I followed
the code given in this answer and it seems to work fine (I plotted it and
it looks ok).

x.nb <- poly2nb(carto2012u2)
summary(x.nb)

### 1) fIND AREAS WITH NO NEIGHBORS
no_neighs <- which(card(x.nb) == 0) # returns set cardinality.

### To check that you get the same result using counts of graph components:

nc <- n.comp.nb(x.nb)
table(nc$comp.id)
no_neighs_comps <- which(unname(table(nc$comp.id)==1))
match(no_neighs_comps, nc$comp.id)

### 2) For each island find nearest neighbour

k1nb <- knn2nb(knearneigh(coordinates(carto2012u2), k=1,
                          longlat=!is.projected(carto2012u2)))

### 3) Assign a neighbour relationship between the island and its nearest
neighbour

is.symmetric.nb(x.nb, force=TRUE)
nb1 <- x.nb

res <- k1nb[no_neighs]
nb1[no_neighs] <- res
attr(nb1, "sym") <- is.symmetric.nb(nb1, force=TRUE)

# re-assign the now incorrect symmetry attribute

nb1

nb2 <- make.sym.nb(nb1)
is.symmetric.nb(nb2, force=TRUE)
nb2

table(n.comp.nb(nb2)$comp.id)

###

veins_inla <- nb2INLA("carto2012_nb.inla", nb2)

plot (carto2012u2, axes=F)
coords <- coordinates(carto2012u2)
plot(nb2, coords, add=T, col="red")

Hope this would be helpful for others with the same issue.


Andr?s


On Thu, May 11, 2017 at 3:25 PM, chris english <
englishchristophera at gmail.com> wrote:

> Andres,
>
> I'm thinking you want to 'unsimplify' the topology prior to your poly2nb
> by a slight negative gBuffer on the Galapagos polygons,
> reduce the Galapagos polygons by the buffer and un-share the boundaries.
> I'm trying some code, but looking at a mix of these as
> guidance:
>
> https://www.rdocumentation.org/packages/rgeos/versions/0.
> 3-22/topics/gBuffer
> https://gist.github.com/mstrimas/1b4a4b93a9d4a158bce4
> https://gis.stackexchange.com/questions/93096/how-to-
> perform-a-true-gis-clip-of-polygons-layer-using-a-polygon-layer-in-r
>
> Saludos,
> Chris
>
> On Wed, May 10, 2017 at 4:27 AM, Andr?s Peralta <tirico85 at gmail.com>
> wrote:
>
>> Hi to everyone,
>>
>> I`m working with the second administrative level cartography from Ecuador
>> (available in: http://www.ecuadorencifras.gob.ec//documentos/web-inec/
>> Cartografia/2015/Clasificador_Geografico/2012/SHP.zip
>> <http://www.ecuadorencifras.gob.ec//documentos/web-inec/Cartografia/2015/Clasificador_Geografico/2012/SHP.zip>).
>> The shape file is
>> called nxcantones.shp. I`ve been having a lot of problems opening and
>> working with this cartography in R; but i can open it in Q-GIS and ARCGIS
>> without any problem (I have opened it in both programs and saved it
>> again).
>> As the cartography has various objects with the same ID - aparently the
>> same areas but repeated; we had to run the following sintax in order to
>> have one ID in each area:
>>
>> *carto2012 <- readOGR("CANTONES2012/2012CLEAN.shp", "2012CLEAN",
>> stringsAsFactors=F) *
>> *proj4string(carto2012) <- CRS("+proj=utm +zone=17 +south +datum=WGS84
>> +units=m +no_defs")*
>>
>> *carto2012x <- unionSpatialPolygons(carto2012, IDs=carto2012$DPA_CANTON)*
>> *proj4string(carto2012x) <- CRS("+proj=utm +zone=17 +south +datum=WGS84
>> +units=m +no_defs")*
>>
>>
>> *datos <- data.frame(ID=row.names(carto2012x), stringsAsFactors = F)*
>> *row.names(datos) <- row.names(carto2012x)*
>> *carto2012x2 <- SpatialPolygonsDataFrame(carto2012x, data=datos)*
>>
>> *carto2012 <- carto2012x2 *
>>
>> For our work, we had to make a neighborhood matrix of the cartography.
>>
>> *x.nb <- poly2nb(carto2012u2) # U2 is the cartography after the recode of
>> some areas that had to be joined.*
>>
>> *summary(x.nb)*
>>
>> This seems to work fine. The problem is we need to connect the three
>> island
>> areas (the Galapagos) but when we try to do so, it connects many areas
>> along all the cartography. I've tried to do it manually using *edit.nb*
>> but
>> it does not work. I?ve also tried the following sintaxes:
>>
>> x.nb1 <- x.nb
>> which(card(x.nb1)==0) #to discover the id of these areas without
>> connections
>> id <- function(x){which(carto2012u2$ID==x)}
>>
>> x.nb1[[id(2001)]] = unique(as.integer(sort(c(x.nb1[[id(2001)]],
>> id(2002)))))
>> x.nb1[[id(2002)]] = unique(as.integer(sort(c(x.nb1[[id(2002)]],
>> id(2001)))))
>>
>> x.nb1[[id(2001)]] = unique(as.integer(sort(c(x.nb1[[id(2001)]],
>> id(2003)))))
>> x.nb1[[id(2003)]] = unique(as.integer(sort(c(x.nb1[[id(2003)]],
>> id(2001)))))
>>
>> x.nb1[[id(2002)]] = unique(as.integer(sort(c(x.nb1[[id(2002)]],
>> id(2003)))))
>> x.nb1[[id(2003)]] = unique(as.integer(sort(c(x.nb1[[id(2003)]],
>> id(2002)))))
>>
>> ####
>> x.nb1[[id("2001")]] = unique(as.integer(sort(c(x.nb1[[id("2001")]],
>> id("2002")))))
>> x.nb1[[id("2002")]] = unique(as.integer(sort( id("2001"))))
>>
>> x.nb1[[id("2001")]] = unique(as.integer(sort(c(x.nb1[[id("2001")]],
>> id("2003")))))
>> x.nb1[[id("2003")]] = unique(as.integer(sort( id("2001"))))
>>
>> x.nb1[[id("2002")]] = unique(as.integer(sort(c(x.nb1[[id("2002")]],
>> id("2003")))))
>> x.nb1[[id("2003")]] = unique(as.integer(sort( id("2002"))))
>>
>> Any ideas or suggestions? Your help will really be appreciated.
>>
>>
>> --
>>
>> *             Andr?s Peralta*
>>         Pre-doctoral Researcher
>>      GREDS/EMCONET / ASPB
>> <https://www.upf.edu/greds-emconet/en/>   <http://aspb.cat/>
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>


-- 

*             Andr?s Peralta*
        Pre-doctoral Researcher
     GREDS/EMCONET / ASPB
<https://www.upf.edu/greds-emconet/en/>   <http://aspb.cat/>

	[[alternative HTML version deleted]]


From mdsumner at gmail.com  Fri Jun 23 01:26:57 2017
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 22 Jun 2017 23:26:57 +0000
Subject: [R-sig-Geo] raster - unrotate?
In-Reply-To: <A62EB8E3-74B9-4F2D-879E-8D5B87813372@bigelow.org>
References: <6BD652E0-73C1-46CD-BC60-E5FFFCDBF1DB@bigelow.org>
 <CAAcGz9-sWzxyO6DDvdgA3XWz0eEEGVpRHH7vVn3pUWxW4jGhfg@mail.gmail.com>
 <A62EB8E3-74B9-4F2D-879E-8D5B87813372@bigelow.org>
Message-ID: <CAAcGz9_kW5TdaFZHBL=dVdRz4e=diCO0TSfbB-wLh1JVE6PS2g@mail.gmail.com>

On Thu, 22 Jun 2017 at 21:28 Ben Tupper <btupper at bigelow.org> wrote:

> Hi,
>
> Wow!  A treasure from the past!
>
> Hmmm.   I see what you mean; it might be best to snip-clip-and-smush from
> the native presentation.  We are testing out the performance of the dineof
> function in the sinkr package (
> https://github.com/marchtaylor/sinkr/blob/master/R/dineof.R) to
> interpolate patchy chlorophyl data.
>
> Thanks for the tip!
>
>

For what it's worth, I'm happy to help, there's no one size fits all here.
The dateline is one of those "easy problems" that does not have a general
fix and will bite in many different contexts. :)

The best distillation of my tricks is in this project, but it does depend
on your workflow and the actual data in use.

https://github.com/hypertidy/tabularaster

If you have performance issues raster's cell abstraction  will help, but
they are a bit old-school when it comes to multi-part geometries. (It's
identical to standard database indexing concepts as are all "spatial"
optimization tricks)

(I see a desperate need for a general API for this kind of problem so that
we can build tools from a general framework, which I'm working on - that's
some kind of excuse for why this and related projects are quite raw and
unfinished.)

Cheers, Mike.

Cheers,
> Ben
>
> On Jun 22, 2017, at 4:46 AM, Michael Sumner <mdsumner at gmail.com> wrote:
>
>
> It used to do the inverse, and I preserved a copy of the old behaviour
> here:
>
>
> https://github.com/AustralianAntarcticDivision/raadtools/blob/master/R/utils.R#L9
>
> You're probably best to learn from how it approaches it rather than just
> use it, since it's not a general capability, just works for those very
> specific cases.
>
> I just tested it and it still seems to work fine, I used
>
>
> oceandata.sci.gsfc.nasa.gov/MODISA/Mapped/Monthly/9km/chlor/A20021822002212.L3m_MO_CHL_chlor_a_9km.nc
>
>
> obtainable with
>
>
> https://oceandata.sci.gsfc.nasa.gov/cgi/getfile/A20021822002212.L3m_MO_CHL_chlor_a_9km.nc
>
>
> If you're extracting points you might as well just convert them into the
> "Atlantic" range, but it's painful to get that right for polygons or lines
> (and very hard to generalize once you get it working anyway).
>
> For simple regions like the one you show I'd probably split it into two
> extents() and use those - but depends on your workflow, all these options
> are useful here and there.
>
> Cheers, Mike.
>
>
> On Thu, 22 Jun 2017 at 18:30 Ben Tupper <btupper at bigelow.org> wrote:
>
>> Hello,
>>
>> We have rasters that span [-180, 180] from NASA's Ocean Color (
>> https://oceancolor.gsfc.nasa.gov/)  datasets.  We are trying to extract
>> a region that spans 100E to 90W, that is 100 to -90.  The region 'wraps'
>> across the edges as shown by the plot at the address below.
>>
>> https://dl.dropboxusercontent.com/u/8433654/sst.png
>>
>>
>> library(raster)
>> uri <- '
>> https://oceandata.sci.gsfc.nasa.gov:443/opendap/MODISA/L3SMI/2016/001/A20160012016032.L3m_R32_SST_sst_9km.nc
>> <https://oceandata.sci.gsfc.nasa.gov/opendap/MODISA/L3SMI/2016/001/A20160012016032.L3m_R32_SST_sst_9km.nc>
>> '
>> R <- raster::raster(uri, varname = 'sst')
>>
>> R
>> #class       : RasterLayer
>> #dimensions  : 180, 360, 64800  (nrow, ncol, ncell)
>> #resolution  : 1, 1  (x, y)
>> #extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
>> #coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
>> #data source : in memory
>> #names       : layer
>> #values      : 1.482572e-05, 0.9999928  (min, max)
>>
>> plot(R)
>> lines(c(180, 100, 100, 180), c(80,80,0,0))
>> lines(c(-180,-90,-90,-180), c(80,80,0,0))
>>
>> I see that there is the nice raster::rotate() function to rotate raster
>> coordinates from [0,360] to [-180,180]. That would make extracting the
>> region super easy if the inverse were available.  Is there an equivalent
>> way to implement the inverse or raster::rotate()?  I could dig into the
>> source of raster::rotate() to see how to code one up, but I hate like heck
>> to reinvent the wheel.
>>
>> Thanks!
>> Ben
>>
>>
>> Ben Tupper
>> Bigelow Laboratory for Ocean Sciences
>> 60 Bigelow Drive, P.O. Box 380
>> East Boothbay, Maine 04544
>> http://www.bigelow.org
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> --
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> Kingston Tasmania 7050 Australia
>
>
> Ben Tupper
> Bigelow Laboratory for Ocean Sciences
> 60 Bigelow Drive, P.O. Box 380
> East Boothbay, Maine 04544
> http://www.bigelow.org
>
>
>
> --
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From dorapearce3 at gmail.com  Sat Jun 24 03:07:29 2017
From: dorapearce3 at gmail.com (Dora Pearce)
Date: Sat, 24 Jun 2017 11:07:29 +1000
Subject: [R-sig-Geo] Paired (before-after comparison) t-test with spatial
	locations
Message-ID: <CAEAx9BuJ2o2=_0gVNsB6CCwppyeDmnWG1MkcF1NPBOvpZtA3hw@mail.gmail.com>

Hello R-sig-geo list,

We have soil chemistry data before and after fire at specific spatial
locations.

Is there a "paired t-test" equivalent that can incorporate geospatial
coordinates and hence adjust for spatial dependence in the data?

Apologies in advance if I have missed the obvious in *spdep* and *spatstat*,
but I am new to *R* and would appreciate your advice.

Dora Pearce
Honorary: Faculty of Science and Technology
Federation University Australia
University Dr, Mount Helen VIC 3350
https://federation.edu.au/faculties-and-schools/faculty-of-science-and-technology

	[[alternative HTML version deleted]]


From b.rowlingson at lancaster.ac.uk  Sat Jun 24 10:11:01 2017
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sat, 24 Jun 2017 09:11:01 +0100
Subject: [R-sig-Geo] Paired (before-after comparison) t-test with
	spatial locations
In-Reply-To: <CAEAx9BuJ2o2=_0gVNsB6CCwppyeDmnWG1MkcF1NPBOvpZtA3hw@mail.gmail.com>
References: <CAEAx9BuJ2o2=_0gVNsB6CCwppyeDmnWG1MkcF1NPBOvpZtA3hw@mail.gmail.com>
Message-ID: <CANVKczOMBmG7-PqXLSBbj6ggKbvcBPJQcjMyx-QuA8X9kXyUqg@mail.gmail.com>

The classic t-test is something like "are boys taller than girls?".
Throw the boy's heights and the girl's heights into `t.test` and out
comes an answer (and a p-value). Now suppose you want to add a
covariate? Are these boys taller than these girls, accounting for any
difference in their parent's social class, say (to look at stunted
development due to malnutrition or something). Hmm I don't see a way
of doing that with `t.test`....

What you would then do is fit a linear model, like lm(height ~ gender
+ status, data=kids), and then look at the coefficient of gender.

What you want for your data is a similar formula, but you want a
spatially varying covariate, something like lm(measurement =
beforeafter + S(x)), where S(x) is a smooth surface. I think if you
run a kriging model with beforeafter as a covariate you can get a
parameter estimate for the "beforeafter" parameter. I can never
remember if kriging with covariates is universal kriging, ordinary
kriging, or which of the other 57 kriging varieties. Use the `gstat`
package and put it in your model. You might also be able to use BayesX
via the R2BayesX package to do this if your data isn't nicely
Gaussian...

Alternatively, since you seem to have colocated before and after
measurements, compute the difference at each location and do a kriging
fit on that. Then you can compute the fitted difference and standard
error maps, and plot maps where the difference is significantly large.
I'm not sure how you'd do a single, global test of "is 'after'
different to 'before'" though, but you'd get maps of where the change
is.

Alternatively alternatively, you might be able to do space-time
kriging with two time points, but I'm not sure if two time points are
enough - you can't fit much of a temporal model with two time points,
especially if they are all the same time-distance apart.

Or I might be completely wrong...

Barry






On Sat, Jun 24, 2017 at 2:07 AM, Dora Pearce <dorapearce3 at gmail.com> wrote:
> Hello R-sig-geo list,
>
> We have soil chemistry data before and after fire at specific spatial
> locations.
>
> Is there a "paired t-test" equivalent that can incorporate geospatial
> coordinates and hence adjust for spatial dependence in the data?
>
> Apologies in advance if I have missed the obvious in *spdep* and *spatstat*,
> but I am new to *R* and would appreciate your advice.
>
> Dora Pearce
> Honorary: Faculty of Science and Technology
> Federation University Australia
> University Dr, Mount Helen VIC 3350
> https://federation.edu.au/faculties-and-schools/faculty-of-science-and-technology
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From kent3737 at gmail.com  Sat Jun 24 21:59:21 2017
From: kent3737 at gmail.com (Kent Johnson)
Date: Sat, 24 Jun 2017 15:59:21 -0400
Subject: [R-sig-Geo] sf 0.5-0 binary for macOS SIerra?
In-Reply-To: <CAPP0wygOe_qJEDHjoUQxdZoXnsgynjuwz6d0OC4vnn+L0x-7Ow@mail.gmail.com>
References: <CAPP0wyghYLs9hFJEnAdfj3Jg8ALdSs_PpuQBhYt2vwFYJQMdsw@mail.gmail.com>
 <alpine.LFD.2.20.1706221256360.14070@reclus.nhh.no>
 <alpine.LFD.2.20.1706221456350.14070@reclus.nhh.no>
 <CAPP0wygOe_qJEDHjoUQxdZoXnsgynjuwz6d0OC4vnn+L0x-7Ow@mail.gmail.com>
Message-ID: <CAPP0wyg4CXVpHrwyM3uqJURXiCz5BXtW1v==Mc_Ep9o-TqtskA@mail.gmail.com>

I have installed the KyngChaos GDAL 2.1 complete package. AFAICT there is
no sf installer there, just the prerequisites. I tried the r-sig-mac recipe
but I have a different error. Details posted on at issue #393.

Kent

On Thu, Jun 22, 2017 at 9:11 AM, Kent Johnson <kent3737 at gmail.com> wrote:

> On Thu, Jun 22, 2017 at 8:58 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
>> On Thu, 22 Jun 2017, Roger Bivand wrote:
>>
>> See this thread (not only Roy's brain that kicks in more slowly ... ):
>>
>> https://stat.ethz.ch/pipermail/r-sig-mac/2017-June/012429.html
>
>
> Thank you, I will try that and report back.
>
> Kent
>

	[[alternative HTML version deleted]]


From dorapearce3 at gmail.com  Sun Jun 25 00:31:16 2017
From: dorapearce3 at gmail.com (Dora Pearce)
Date: Sun, 25 Jun 2017 08:31:16 +1000
Subject: [R-sig-Geo] Paired (before-after comparison) t-test with
 spatial locations (Dora Pearce)
Message-ID: <CAEAx9Bv4JCsb9yUQTfKdM5pPgnk9aS7Fha6=VP3z3hzi_sgKiQ@mail.gmail.com>

Thank you, Barry, so much for your suggested solutions to my query.
I will try kriging (and mapping) the difference in values (perhaps % change
at each location)  as this in itself would be interesting.

Thank you also, Nathan, for your information about the "modified t-test",
for which I have found the necessary "SpatialPack" documentation and will
try to implement it.

Thank you so much for your advice,
Dora Pearce

	[[alternative HTML version deleted]]


From mestre.frederico at gmail.com  Mon Jun 26 12:56:12 2017
From: mestre.frederico at gmail.com (Frederico Mestre)
Date: Mon, 26 Jun 2017 11:56:12 +0100
Subject: [R-sig-Geo] Using gIntersection to split polygons with lines
Message-ID: <CAPfBvqzGfUt9YmgODFT21Owr6dSaADpn3art8AQw-fCB+s-Xtw@mail.gmail.com>

Hello,

I'm trying to use gIntersection() to cut a polygon ("SpatialPolygons") with
a line ("SpatialLinesDataFrame").

I wanted to obtain a "SpatialPolygons" object with the polygons defined by
the lines. This is what I did:

polygons1 <- gIntersection(spgeom1=mypolygon, spgeom2=mylines)

However I get an "SpatialLines" object as an output instead of a
"SpatialPolygons".

Am I doing something wrong? Is there any alternative?

I provide this sample code:

#Creating the polygons
coords <- rbind(c(1,2),c(2,2),c(2,1),c(1,1))
pol1 <- Polygon(coords)
pol2 <- Polygons(srl=list(pol1), ID=1)
pol3 <- SpatialPolygons(Srl=list(pol2))

#Creating the line
l1 <- Line(rbind(c(0.5,1.5),c(2.5,1.5)))
l2 <- Lines(list(l1),ID=1)
l3 <- SpatialLines(list(l2))
line1 <- SpatialLinesDataFrame(l3,data=as.data.frame(matrix(ncol=2,nrow=1)))

#Ploting both
plot(pol3)
plot(line1, add=TRUE)

#Intersection
inters1 <- gIntersection(spgeom1=pol3, spgeom2=line1)
inters1 <- gIntersection(spgeom1=line1, spgeom2=pol3)
plot(inters1)
class(inters1)

It only shows the lines (the object is of class "SpatialLines").

Thanks,
Frederico
?

	[[alternative HTML version deleted]]


From edzer.pebesma at uni-muenster.de  Mon Jun 26 13:11:32 2017
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 26 Jun 2017 13:11:32 +0200
Subject: [R-sig-Geo] Using gIntersection to split polygons with lines
In-Reply-To: <CAPfBvqzGfUt9YmgODFT21Owr6dSaADpn3art8AQw-fCB+s-Xtw@mail.gmail.com>
References: <CAPfBvqzGfUt9YmgODFT21Owr6dSaADpn3art8AQw-fCB+s-Xtw@mail.gmail.com>
Message-ID: <b7a10a49-da40-8c75-da0c-75d4b130bc38@uni-muenster.de>



On 26/06/17 12:56, Frederico Mestre wrote:
> Hello,
> 
> I'm trying to use gIntersection() to cut a polygon ("SpatialPolygons") with
> a line ("SpatialLinesDataFrame").
> 
> I wanted to obtain a "SpatialPolygons" object with the polygons defined by
> the lines. This is what I did:
> 
> polygons1 <- gIntersection(spgeom1=mypolygon, spgeom2=mylines)
> 
> However I get an "SpatialLines" object as an output instead of a
> "SpatialPolygons".
> 
> Am I doing something wrong? Is there any alternative?

Package sf has a function st_split() that cuts a polygon with a line,
similar to postgis' function st_split.

To use it, you'd need to build sf from source after having liblwgeom
installed; the CRAN binary builds do not have support for liblwgeom.

See https://github.com/edzer/sfr/ for instructions, and
https://github.com/edzer/sfr/issues/360 for an example.

> 
> I provide this sample code:
> 
> #Creating the polygons
> coords <- rbind(c(1,2),c(2,2),c(2,1),c(1,1))
> pol1 <- Polygon(coords)
> pol2 <- Polygons(srl=list(pol1), ID=1)
> pol3 <- SpatialPolygons(Srl=list(pol2))
> 
> #Creating the line
> l1 <- Line(rbind(c(0.5,1.5),c(2.5,1.5)))
> l2 <- Lines(list(l1),ID=1)
> l3 <- SpatialLines(list(l2))
> line1 <- SpatialLinesDataFrame(l3,data=as.data.frame(matrix(ncol=2,nrow=1)))
> 
> #Ploting both
> plot(pol3)
> plot(line1, add=TRUE)
> 
> #Intersection
> inters1 <- gIntersection(spgeom1=pol3, spgeom2=line1)
> inters1 <- gIntersection(spgeom1=line1, spgeom2=pol3)
> plot(inters1)
> class(inters1)
> 
> It only shows the lines (the object is of class "SpatialLines").
> 
> Thanks,
> Frederico
> ?
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 473 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170626/1747f992/attachment.sig>

From btupper at bigelow.org  Mon Jun 26 14:17:45 2017
From: btupper at bigelow.org (Ben Tupper)
Date: Mon, 26 Jun 2017 08:17:45 -0400
Subject: [R-sig-Geo] raster - unrotate?
In-Reply-To: <CAAcGz9_kW5TdaFZHBL=dVdRz4e=diCO0TSfbB-wLh1JVE6PS2g@mail.gmail.com>
References: <6BD652E0-73C1-46CD-BC60-E5FFFCDBF1DB@bigelow.org>
 <CAAcGz9-sWzxyO6DDvdgA3XWz0eEEGVpRHH7vVn3pUWxW4jGhfg@mail.gmail.com>
 <A62EB8E3-74B9-4F2D-879E-8D5B87813372@bigelow.org>
 <CAAcGz9_kW5TdaFZHBL=dVdRz4e=diCO0TSfbB-wLh1JVE6PS2g@mail.gmail.com>
Message-ID: <AB9C1956-1DF9-4027-AE02-E8E6A3E49881@bigelow.org>

Hi,

Thanks for the offer to help.  I have been redirected for the time being to other tasks, but I expect I'll be back to this in a few weeks.  I think I will try your archived rotate() as I'm starting with whole-earth coverage - nothing tricky.

You have been going really deep with tabularaster.  I have been folding tidyverse into my 'stuff' over the last few months, but I am on a relatively short leash resource-wise so the effort feels feeble.  Most of my work uses rasters and dismo https://cran.r-project.org/web/packages/dismo/index.html with only minor use of non-raster spatial data.  That might be my lame excuse for not diving into sf yet; that and I haven't seen examples I can ape for getting sf and raster to play together (well, until tabularaster). 

Thanks!
Ben

> On Jun 22, 2017, at 7:26 PM, Michael Sumner <mdsumner at gmail.com> wrote:
> 
> 
> 
> 
> On Thu, 22 Jun 2017 at 21:28 Ben Tupper <btupper at bigelow.org <mailto:btupper at bigelow.org>> wrote:
> Hi,
> 
> Wow!  A treasure from the past!
> 
> Hmmm.   I see what you mean; it might be best to snip-clip-and-smush from the native presentation.  We are testing out the performance of the dineof function in the sinkr package (https://github.com/marchtaylor/sinkr/blob/master/R/dineof.R <https://github.com/marchtaylor/sinkr/blob/master/R/dineof.R>) to interpolate patchy chlorophyl data.  
> 
> Thanks for the tip!
> 
> 
> 
> For what it's worth, I'm happy to help, there's no one size fits all here. The dateline is one of those "easy problems" that does not have a general fix and will bite in many different contexts. :)
> 
> The best distillation of my tricks is in this project, but it does depend on your workflow and the actual data in use. 
> 
> https://github.com/hypertidy/tabularaster <https://github.com/hypertidy/tabularaster>
> 
> If you have performance issues raster's cell abstraction  will help, but they are a bit old-school when it comes to multi-part geometries. (It's identical to standard database indexing concepts as are all "spatial" optimization tricks)
> 
> (I see a desperate need for a general API for this kind of problem so that we can build tools from a general framework, which I'm working on - that's some kind of excuse for why this and related projects are quite raw and unfinished.)
> 
> Cheers, Mike.  
> 
> Cheers,
> Ben
> 
>> On Jun 22, 2017, at 4:46 AM, Michael Sumner <mdsumner at gmail.com <mailto:mdsumner at gmail.com>> wrote:
>> 
>> 
>> It used to do the inverse, and I preserved a copy of the old behaviour here: 
>> 
>> https://github.com/AustralianAntarcticDivision/raadtools/blob/master/R/utils.R#L9 <https://github.com/AustralianAntarcticDivision/raadtools/blob/master/R/utils.R#L9>
>> 
>> You're probably best to learn from how it approaches it rather than just use it, since it's not a general capability, just works for those very specific cases. 
>> 
>> I just tested it and it still seems to work fine, I used 
>> 
>> oceandata.sci.gsfc.nasa.gov/MODISA/Mapped/Monthly/9km/chlor/A20021822002212.L3m_MO_CHL_chlor_a_9km.nc <http://oceandata.sci.gsfc.nasa.gov/MODISA/Mapped/Monthly/9km/chlor/A20021822002212.L3m_MO_CHL_chlor_a_9km.nc> 
>> 
>> obtainable with 
>> 
>> https://oceandata.sci.gsfc.nasa.gov/cgi/getfile/A20021822002212.L3m_MO_CHL_chlor_a_9km.nc <https://oceandata.sci.gsfc.nasa.gov/cgi/getfile/A20021822002212.L3m_MO_CHL_chlor_a_9km.nc> 
>> 
>> If you're extracting points you might as well just convert them into the "Atlantic" range, but it's painful to get that right for polygons or lines (and very hard to generalize once you get it working anyway). 
>> 
>> For simple regions like the one you show I'd probably split it into two extents() and use those - but depends on your workflow, all these options are useful here and there. 
>> 
>> Cheers, Mike. 
>> 
>> 
>> On Thu, 22 Jun 2017 at 18:30 Ben Tupper <btupper at bigelow.org <mailto:btupper at bigelow.org>> wrote:
>> Hello,
>> 
>> We have rasters that span [-180, 180] from NASA's Ocean Color (https://oceancolor.gsfc.nasa.gov/ <https://oceancolor.gsfc.nasa.gov/>)  datasets.  We are trying to extract a region that spans 100E to 90W, that is 100 to -90.  The region 'wraps' across the edges as shown by the plot at the address below.
>> 
>> https://dl.dropboxusercontent.com/u/8433654/sst.png <https://dl.dropboxusercontent.com/u/8433654/sst.png>
>> 
>> 
>> library(raster)
>> uri <- 'https://oceandata.sci.gsfc.nasa.gov:443/opendap/MODISA/L3SMI/2016/001/A20160012016032.L3m_R32_SST_sst_9km.nc <https://oceandata.sci.gsfc.nasa.gov/opendap/MODISA/L3SMI/2016/001/A20160012016032.L3m_R32_SST_sst_9km.nc>'
>> R <- raster::raster(uri, varname = 'sst')
>> 
>> R
>> #class       : RasterLayer
>> #dimensions  : 180, 360, 64800  (nrow, ncol, ncell)
>> #resolution  : 1, 1  (x, y)
>> #extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
>> #coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
>> #data source : in memory
>> #names       : layer
>> #values      : 1.482572e-05, 0.9999928  (min, max)
>> 
>> plot(R)
>> lines(c(180, 100, 100, 180), c(80,80,0,0))
>> lines(c(-180,-90,-90,-180), c(80,80,0,0))
>> 
>> I see that there is the nice raster::rotate() function to rotate raster coordinates from [0,360] to [-180,180]. That would make extracting the region super easy if the inverse were available.  Is there an equivalent way to implement the inverse or raster::rotate()?  I could dig into the source of raster::rotate() to see how to code one up, but I hate like heck to reinvent the wheel.
>> 
>> Thanks!
>> Ben
>> 
>> 
>> Ben Tupper
>> Bigelow Laboratory for Ocean Sciences
>> 60 Bigelow Drive, P.O. Box 380
>> East Boothbay, Maine 04544
>> http://www.bigelow.org <http://www.bigelow.org/>
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>> -- 
>> Dr. Michael Sumner
>> Software and Database Engineer
>> Australian Antarctic Division
>> 203 Channel Highway
>> Kingston Tasmania 7050 Australia
>> 
> 
> Ben Tupper
> Bigelow Laboratory for Ocean Sciences
> 60 Bigelow Drive, P.O. Box 380
> East Boothbay, Maine 04544
> http://www.bigelow.org <http://www.bigelow.org/>
> 
> 
> 
> -- 
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> Kingston Tasmania 7050 Australia

Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org




	[[alternative HTML version deleted]]


