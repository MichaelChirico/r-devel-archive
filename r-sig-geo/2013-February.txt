From r.hijmans at gmail.com  Fri Feb  1 02:30:15 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 31 Jan 2013 17:30:15 -0800
Subject: [R-sig-Geo] Failure during raster IO
In-Reply-To: <1359672082466-7582447.post@n2.nabble.com>
References: <CAPD=AxpFNas=+yxg_cUK9-+GXT6s4ED6GBaswKtah-WiRmRmhQ@mail.gmail.com>
	<CANtt_hxEcK7FPxrjDUQXTO4vFQHsKsDW6JfDmkD+jjOVs_VfrA@mail.gmail.com>
	<1359672082466-7582447.post@n2.nabble.com>
Message-ID: <CANtt_hzt3Lt_p9nsF6ro=u8L-Uf5BMkOT2Cj9ufAsMSuZV51mA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130131/71c55b58/attachment.pl>

From r.hijmans at gmail.com  Fri Feb  1 02:33:10 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 31 Jan 2013 17:33:10 -0800
Subject: [R-sig-Geo] Rasterbrick to netCDF
In-Reply-To: <C3A65516E00A294DA9B1DBF9474A0EA63FBB23F1@CH1PRD0310MB356.namprd03.prod.outlook.com>
References: <1359064489341-7582376.post@n2.nabble.com>
	<1359081476.24921.YahooMailNeo@web121903.mail.ne1.yahoo.com>
	<CANtt_hyHM0wwGMeJxWHO6DptUvFTsm4tpe4GHDDqdiJxgLzipQ@mail.gmail.com>
	<C3A65516E00A294DA9B1DBF9474A0EA63FBB2342@CH1PRD0310MB356.namprd03.prod.outlook.com>
	<CANtt_hxyWfwpn2gxCazmUigE7gzECTJz2itz29nEzCowBZQfjg@mail.gmail.com>
	<C3A65516E00A294DA9B1DBF9474A0EA63FBB23F1@CH1PRD0310MB356.namprd03.prod.outlook.com>
Message-ID: <CANtt_hzLTvh0UXodAhspM2UdR8CsWA9Lyono14O-BK5zz8tosQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130131/0636063d/attachment.pl>

From r.hijmans at gmail.com  Fri Feb  1 02:36:30 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 31 Jan 2013 17:36:30 -0800
Subject: [R-sig-Geo] Spatial Statistics for NetCDF files in R
In-Reply-To: <CAK8gSG9gzpWr4E1_L=U6CEaGu79gQ1BBiOajfPu0Y7poJVm6QQ@mail.gmail.com>
References: <CAK8gSG9gzpWr4E1_L=U6CEaGu79gQ1BBiOajfPu0Y7poJVm6QQ@mail.gmail.com>
Message-ID: <CANtt_hz2ThbbndRrouidLuV64bJqjjPrPP-VspHOmUQc3PWmqw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130131/41964e3e/attachment.pl>

From r.hijmans at gmail.com  Fri Feb  1 02:40:19 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 31 Jan 2013 17:40:19 -0800
Subject: [R-sig-Geo] loading all levels and time in netCDF using
	brick/stack
In-Reply-To: <1357663331318-7582269.post@n2.nabble.com>
References: <1357663331318-7582269.post@n2.nabble.com>
Message-ID: <CANtt_hwGAq-jeBWUXuJsjYFujK4Oap_pq7G-AEC1+0bK3qVBrQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130131/a76a00a9/attachment.pl>

From s6lihert at uni-bonn.de  Fri Feb  1 13:32:04 2013
From: s6lihert at uni-bonn.de (Lionel Hertzog)
Date: Fri, 01 Feb 2013 13:32:04 +0100
Subject: [R-sig-Geo] Turning SpatialPointsDataFrame to Raster using rasterize
Message-ID: <510BB5C4.6080707@uni-bonn.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130201/98ae67f6/attachment.pl>

From jon.skoien at jrc.ec.europa.eu  Fri Feb  1 15:46:06 2013
From: jon.skoien at jrc.ec.europa.eu (Jon Olav Skoien)
Date: Fri, 01 Feb 2013 15:46:06 +0100
Subject: [R-sig-Geo] Turning SpatialPointsDataFrame to Raster using
 rasterize
In-Reply-To: <510BB5C4.6080707@uni-bonn.de>
References: <510BB5C4.6080707@uni-bonn.de>
Message-ID: <510BD52E.4020701@jrc.ec.europa.eu>

Lionel,

You are not providing a reproducible example (y70 is not given), and you 
are not telling the versions of R and the packages you are using, so I 
am not sure if my comments here will solve your case.

1. The issue with the lines is difficult to answer without knowing more, 
but it could be a version issue. At least one of the older R-versions (I 
think it was one of the 2.14-versions) tended to add white lines to many 
gridded plots. Try with a more current version if this could be your case.

2. For the disappearing points, you might end up with more than 
observation location in some of the raster cells. rasterize will compute 
the cell value from the fun argument, and rasterToPoints will only 
return one point back. In the example below, 10 rows of meuse have been 
duplicated before the second call to rasterize and rasterToPoints. You 
can see that it returns only the original 155 points in this case. If 
meuse.grid had been coarser, also mnew would have fewer point than the 
original meuse-object. You can check how many points you have within the 
distance of a grid cell with zerodist().

loadMeuse()
r = raster(meuse.grid)
ras = rasterize(meuse, r)
mnew = rasterToPoints(ras, spatial = TRUE)
summary(meuse)

meuse = rbind(meuse, meuse[1:10,])
ras = rasterize(meuse, r)
mnew2 = rasterToPoints(ras, spatial = TRUE)
summary(meuse)
summary(mnew)
summary(mnew2)

Cheers,
Jon


On 01-Feb-13 13:32, Lionel Hertzog wrote:
> Dear List,
>
> I am having troubles trying to turn a spatialpointsdataframe into a
> raster, when I use the rasterize function from the raster packages I get
> strange white lines in certain area of the map and when turning values
> back to spatialpointsdataframe some of them disappeared. Below is a code
> example
>
> #create a list of points from coordinates of grid points in europe at a
> 10 arc-minute resolution
> test_point<-data.frame(Long=y70$Long,Lat=y70$Lat,Values=rnorm(length(y70[,1])))
> coordinates(test_point)<-~Long+Lat
> proj4string(test_point)<-CRS("+proj=longlat +datum=WGS84")
> summary(test_point)
> Object of class SpatialPointsDataFrame
> Coordinates:
>     min      max
> Long -10.41667 31.91668
> Lat   34.25000 71.25001
> Is projected: FALSE
> proj4string : [+proj=longlat +datum=WGS84]
> Number of points: 31143
> Data attributes:
>     Min.   1st Qu.    Median      Mean   3rd Qu.      Max.
> -4.278000 -0.672700 -0.003040 -0.000353  0.668600  3.915000
> #create a raster from the points extent and resolution (since 60
> arc-minutes make a degree, we have a resolution of #10/60)
> r<-raster(nrows=(bbox(test_point)[2,2]-bbox(test_point)[2,1])/0.1666667,ncols=(bbox(test_point)[1,2]-bbox(test_point)[1,1])/0.1666667,xmn=bbox(test_point)[1,1],xmx=bbox(test_point)[1,2],ymn=bbox(test_point)[2,1],ymx=bbox(test_point)[2,2],crs=CRS("+proj=longlat
> +datum=WGS84"))
> #then rasterize the points
> ras<-rasterize(x=test_point,y=r)
> #then when ploting white lines appears
> plot(ras)
> #and if we retrieve the non-NA values from this raster
> new_points<-rasterToPoints(ras,spatial=TRUE)
> summary(new_points)
> Object of class SpatialPointsDataFrame
> Coordinates:
>     min      max
> x -10.33333 31.83334
> y  34.33333 71.16667
> Is projected: FALSE
> proj4string : [+proj=longlat +datum=WGS84]
> Number of points: 29373
> Data attributes:
>     Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
> 1    7515   15420   15410   23220   31140
>
> the number of points went from 31143 to 29373, what is the problem?
> Thank you,


-- 
Jon Olav Sk?ien
Joint Research Centre - European Commission
Institute for Environment and Sustainability (IES)
Land Resource Management Unit

Disclaimer: Views expressed in this email are those of the individual and do not necessarily represent official views of the European Commission.


From pharriso at uwaterloo.ca  Fri Feb  1 16:36:20 2013
From: pharriso at uwaterloo.ca (Phil H)
Date: Fri, 1 Feb 2013 07:36:20 -0800 (PST)
Subject: [R-sig-Geo] placing spdf back into adehabiatHR estUDm
In-Reply-To: <1315606612768-6777535.post@n2.nabble.com>
References: <1308601895714-6497315.post@n2.nabble.com>
	<4E0AD902.30108@oncfs.gouv.fr>
	<1312913036614-6669114.post@n2.nabble.com>
	<1315511622963-6773497.post@n2.nabble.com>
	<4E69CFD8.9040405@oncfs.gouv.fr>
	<1315606612768-6777535.post@n2.nabble.com>
Message-ID: <1359732980610-7582454.post@n2.nabble.com>

Hi,

This looks to be exactly the solution i am looking for- I am analysing some
telemetry data in a reservoir which is too complex to meet the boundary
rules.
 However I am having a little trouble with the example code....its probably
something I have done but.....


library(adehabitatHR)
data(puechabonsp)
loc <- puechabonsp$relocs
elev <- puechabonsp$map
fullgrid(elev) <- TRUE
hab <- elev
hab[[1]] <- as.numeric(!is.na(hab[[1]]))

#everything works good up till here
ud <- kernelUD(loc[,1], grid=hab)

#when i get to this point I get the following error message

error in .kernelUDs(SpatialPoints(x, proj4string = CRS(as.character(pfs1))), 
: 
  grid should be a number or an object inheriting the class SpatialPixels

#i notice that when I run 

> class(hab)
[1] "SpatialGridDataFrame"
attr(,"package")
[1] "sp"


#it appears to be a class SpatialGridDataFrame. and the grid function needs
to be of the class SpatialPixels

#so I tried

hab<-SpatialPixels(hab)

however this doesnt seem to work i get the error

> hab2<-SpatialPixels(hab)
Error in SpatialPixels(hab) : 
  points should be of class or extending SpatialPoints

I am a bit of a beginner using sp and adehabitathr packages so i expect it
is something silly
however I just cant seem to recetify this

Thanks for your time
Phil H





--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Walruses-and-adehabitatHR-class-estUDm-exclusion-of-non-habitat-pixels-and-summary-over-all-animals-tp6497315p7582454.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From macqueen1 at llnl.gov  Fri Feb  1 16:55:22 2013
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Fri, 1 Feb 2013 15:55:22 +0000
Subject: [R-sig-Geo] converting latitude and longitude to UTM
In-Reply-To: <0F5A69EADAE27F44B09561937B83C3A45954AC641F@MDMBX.PIRE.org>
Message-ID: <5E1B812FAC2C4A49B3D99593B5A5219125F663@PRDEXMBX-08.the-lab.llnl.gov>

To get started, try the following:

require(sp)

bbox(NYC2)
bbox(NYBorough)
range(myfile$X)
range(myfile$Y)

and see if the ranges of X,Y are even close to the coordinate ranges of
your shapefiles.

Then try

coordinates(myfile) <- c('X','Y')
bbox(myfile)
plot(myfile)

If the problem is what you suspect, i.e., lat/long vs. UTM (which seems
likely), then you will have to start learning about how to specify
coordinate systems in R. It's a much bigger topic than I can go into here.
See the help for
  ?proj4string
  ?spTransform   (as suggested by Mike Sumner in another response)


You will need the rgdal package for spTransform.

For what it's worth, I use Quantum GIS (QGIS) when I need to find out
information about a particular projection.

-Don

-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062





On 1/31/13 5:03 AM, "Abby Rudolph" <arudolph at PIRE.org> wrote:

>Hello,
>
>I am using the following code to create ppp files from csv data and map
>shape files, but I am getting some errors which I have been unable to fix
>by searching them online:
>
>library(spatstat)
>library(maps)
>library(maptools)
>
>NYC2<-readShapePoly("nybb.shp") # this is a map of the NYC boroughs
>without waterways and no census tract divisions (but it does include
>lines separating the 5 boroughs)
>plot(NYC2)
>
>NYBorough<-readShapePoly("NYBoroughsShapeMerge.shp") # this is a map of
>the NYC boroughs with census tract divisions
>plot(NYBorough)
>
>myfile<-read.csv("myfile.csv")
># my csv file contains 4 columns (ID, variable_type, X, Y)
># my goal is to determine whether individuals of variable_type=1 are
>spatially distributed more than what would be expected due to chance, if
>individuals of variable_type=0 are spatially distributed more than what
>would be expected due to chance, and finally if the spatial distribution
>of variable_type=1 differs from that of variable_type=0.
>
>x<-NYBorough at polygons[[1]]@Polygons
># ppp(x.coordinates, y.coordinates, x.range, y.range)
>coords<-slot(x[[1]],"coords")
>coords
>coords<-coords[19:1,]
>coords<-coords[-1,]
>coords
>
>u<-myfile$type==0
>
>Type_0<-ppp(myfile$X[u],myfile$Y[u],
>                window=owin(poly=list(x=coords[,1],y=coords[,2])))
>Type_1<-ppp(myfile$X[!u],myfile$Y[!u],
>                window=owin(poly=list(x=coords[,1],y=coords[,2])))
>
>ERROR Message:
>Warning message:
>In ppp(myfile$X[u], myfile$Y[u], window = owin(poly = list(x = coords[,  :
>  217 points were rejected as lying outside the specified window
>Warning message:
>In ppp(myfile$X[!u], myfile$Y[!u], window = owin(poly = list(x = coords[,
> :
>  435 points were rejected as lying outside the specified window
>
># I only have 652 points, so all of my points are rejected as lying
>outside the specified window
>
>
>Below is the sample code I was using as a template:
>
>x<-BaltCity2 at polygons[[1]]@Polygons
>coords<-slot(x[[1]],"coords")
>coords<-coords[167:1,]
>coords<-coords[-1,]
>coords.mi<-coords*0.000621371192
># convert meters to miles
>
>play2<-ppp(play$X_m*0.000621371192,play$Y_m*0.000621371192,
>           window=owin(poly=list(x=coords.mi[,1],y=coords.mi[,2])))
>
>There are two things I can think of that might be different between my
>data set and the data that is used for this template code - and might
>cause the warning:
>1) My shapefile is for NYC and includes 5 different boroughs, whereas the
>shapefile for Baltimore looks more like a regular polygon (like a
>rectangle).
>2) My data has only lat/lon coordinates and the data corresponding with
>the template code I am working off of is using what I think is UTM (X_m
>and Y_m).
>
>Is there another way I can run the code above that will utilize the
>latitude and longitude coordinates and will not return a warning?
>
>Thanks,
>Abby
>________________________________________
>From: Abby Rudolph
>Sent: Wednesday, January 30, 2013 2:54 PM
>To: r-sig-geo at r-project.org
>Subject: converting latitude and longitude to UTM
>
>Hello,
>Is there a formula to convert x-/y-coordinates (latitude /longitude) into
>UTM.  My data is in the form of latitude and longitude, but the code I
>wish to use relies on x_m and y_m which I believe are UTM measurements (x
>in meters and y in meters).
>Thanks
>Abby
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From jh.hornych at gmail.com  Fri Feb  1 17:02:08 2013
From: jh.hornych at gmail.com (Jan Hornych)
Date: Fri, 1 Feb 2013 17:02:08 +0100
Subject: [R-sig-Geo] SpatialPolygon with the max value gets no color
 assigned in spplot function when using "at" parameter
In-Reply-To: <alpine.LRH.2.03.1301301808460.16242@reclus.nhh.no>
References: <CAEFfJxgWSX=QyKT6GCyDL-bya2euNuSQsojWQ6hvvU4nPpTOBQ@mail.gmail.com>
	<alpine.LRH.2.03.1301301808460.16242@reclus.nhh.no>
Message-ID: <CAEFfJxgk3xDoXC=UZmCDafEZLrmPBLO6gSCCF128TYH9qxA6fQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130201/321fb5d6/attachment.pl>

From s6lihert at uni-bonn.de  Fri Feb  1 17:30:19 2013
From: s6lihert at uni-bonn.de (Lionel)
Date: Fri, 01 Feb 2013 17:30:19 +0100
Subject: [R-sig-Geo] Turning SpatialPointsDataFrame to Raster using
	rasterize
In-Reply-To: <510BD52E.4020701@jrc.ec.europa.eu>
References: <510BB5C4.6080707@uni-bonn.de> <510BD52E.4020701@jrc.ec.europa.eu>
Message-ID: <510BED9B.5050609@uni-bonn.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130201/da3a5d48/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Fri Feb  1 17:38:04 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 1 Feb 2013 16:38:04 +0000
Subject: [R-sig-Geo] converting latitude and longitude to UTM
In-Reply-To: <9238458181454197a51c2a14fb4a0379@EX-1-HT0.lancs.local>
References: <0F5A69EADAE27F44B09561937B83C3A45954AC641F@MDMBX.PIRE.org>
	<9238458181454197a51c2a14fb4a0379@EX-1-HT0.lancs.local>
Message-ID: <CANVKczMWVvjDr43JHR78VwJCpf6+j3gVZs0WXod3Ud4NrCUZ+g@mail.gmail.com>

Note to Abby:

 >>NYC2<-readShapePoly("nybb.shp") # this is a map of the NYC boroughs

if your shapefile has a nybb.prj file that will contain the
information about the coordinate system. However, readShapePoly DOES
NOT read it (unless there's been some updates...)

 You should use readOGR from rgdal to read shapefiles:

 > uk=readShapePoly("ukos.shp")
 > ukOGR=readOGR(".","ukos")
OGR data source with driver: ESRI Shapefile
Source: ".", layer: "ukos"
with 1 features and 14 fields
Feature type: wkbMultiPolygon with 2 dimensions
Warning message:
In readOGR(".", "ukos") : Deleted feature IDs: 1, 2, 3

 > proj4string(uk)
[1] NA

 - the object created with readShapePoly has no projection info, but:

 > proj4string(ukOGR)
[1] "+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000
+y_0=-100000 +ellps=airy +units=m +no_defs"

 - the one read via readOGR has a full projection string.

 This makes it easier to transform to another system.

Barry


From Roger.Bivand at nhh.no  Fri Feb  1 17:44:57 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 1 Feb 2013 17:44:57 +0100
Subject: [R-sig-Geo] SpatialPolygon with the max value gets no color
 assigned in spplot function when using "at" parameter
In-Reply-To: <CAEFfJxgk3xDoXC=UZmCDafEZLrmPBLO6gSCCF128TYH9qxA6fQ@mail.gmail.com>
References: <CAEFfJxgWSX=QyKT6GCyDL-bya2euNuSQsojWQ6hvvU4nPpTOBQ@mail.gmail.com>
	<alpine.LRH.2.03.1301301808460.16242@reclus.nhh.no>
	<CAEFfJxgk3xDoXC=UZmCDafEZLrmPBLO6gSCCF128TYH9qxA6fQ@mail.gmail.com>
Message-ID: <alpine.LRH.2.03.1302011737530.23740@reclus.nhh.no>

On Fri, 1 Feb 2013, Jan Hornych wrote:

> Roger,
>
> this is a nice trick, however it works only for small numbers. A large
> double plus a tiny double is the same large double
>
> max(50)==max(50)+.Machine$double.eps
> [1] TRUE
>
> thinking about it now, my question should be. What is the smallest possible
> number that when added to double will make it a different number?

That depends on the size of the number?

> identical(50, (50+(.Machine$double.eps^(1/1))))
[1] TRUE
> identical(50, (50+(.Machine$double.eps^(1/2))))
[1] FALSE
> identical(50, (50+(.Machine$double.eps^(2/3))))
[1] FALSE
> identical(50000, (50000+(.Machine$double.eps^(2/3))))
[1] FALSE
> x <- seq(-50, 50, length.out=100)
> idx <- 1/abs(diff(range(x)))
> min(x)==(min(x) - idx)
[1] FALSE
> max(x)==(max(x) + idx)
[1] FALSE

So some slackening of .Machine$double.eps may help?

Should I add a helper function to classInt and an argument to 
classIntervals() to force [a,b]?

Roger

>
> Thank you
> Jan
>
> On Wed, Jan 30, 2013 at 8:04 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
>> On Wed, 30 Jan 2013, Jan Hornych wrote:
>>
>>  Hi,
>>> I would like to do coloring of map regions based on the region values
>>> "weight". The approach I am taking is first to break regions into equal
>>> intervals,
>>> classIntervals(spdf$weight,4)$**brks #4 intervals in this case
>>> and than coloring all regions within the interval with the same color
>>> col = brewer.pal(4,"RdYlGn"))
>>> The max "weight" is as well the boundary of the interval The problem is
>>> that the last region is not included into the last interval nad has thus
>>> no
>>> color. I do belive I am missing something, because any other solution to
>>> manually manipulate the intervals, is overcomplicating the simplicity of
>>> classIntervals function.
>>> any idea how to get all rectangles colored?
>>> Thank you
>>> Jan
>>> here is the example, see the rectangle in the right upper corner, it
>>> remains white.
>>> library(sp)
>>> library(classInt)
>>> library(RColorBrewer)
>>> p1=cbind(c(0,0,1,1,0),c(0,1,1,**0,0));colnames(p1)=c("x","y")
>>> p2=cbind(c(0,0,1,1,0),c(1,2,2,**1,1));colnames(p2)=c("x","y")
>>> p3=cbind(c(1,1,2,2,1),c(0,1,1,**0,0));colnames(p3)=c("x","y")
>>> p4=cbind(c(1,1,2,2,1),c(1,2,2,**1,1));colnames(p4)=c("x","y")
>>> p5=cbind(c(2,2,3,3,2),c(0,1,1,**0,0));colnames(p5)=c("x","y")
>>> p6=cbind(c(2,2,3,3,2),c(1,2,2,**1,1));colnames(p6)=c("x","y")
>>> ps1=Polygons(list(Polygon(p1))**, ID="ps1")
>>> ps2=Polygons(list(Polygon(p2))**, ID="ps2")
>>> ps3=Polygons(list(Polygon(p3))**, ID="ps3")
>>> ps4=Polygons(list(Polygon(p4))**, ID="ps4")
>>> ps5=Polygons(list(Polygon(p5))**, ID="ps5")
>>> ps6=Polygons(list(Polygon(p6))**, ID="ps6")
>>> sps = SpatialPolygons(list(ps1,ps2,**ps3, ps4, ps5, ps6))
>>> spdf=
>>> SpatialPolygonsDataFrame(sps,**data.frame(weight=c(0.1,0.1,0.**
>>> 3,0.4,0.45,0.6),row.names=c("**ps1","ps2","ps3","ps4",
>>> "ps5","ps6")))
>>> sp.theme(set = TRUE, regions = list(col = brewer.pal(4,"RdYlGn")))
>>> spplot(spdf, "weight", at=classIntervals(spdf$weight,**4)$brks)
>>>
>>
>> I'm fairly sure I replied to this question very recently, but can't find
>> the link. The at= argument in lattice graphics by default breaks [a, b),
>> see:
>>
>> http://en.wikipedia.org/wiki/**Interval_(mathematics)#**
>> Excluding_the_endpoints<http://en.wikipedia.org/wiki/Interval_(mathematics)#Excluding_the_endpoints>
>>
>> so the upper limit should be eased out beyond the maximum, here doing both
>> for symmetry:
>>
>> ats <- classIntervals(spdf$weight,4)$**brks
>> ats[1] <- ats[1] - .Machine$double.eps
>> ats[length(ats)] <- ats[length(ats)] + .Machine$double.eps
>> spplot(spdf, "weight", at=ats)
>>
>> This is described on the levelplot help page, linked from the spplot help
>> page:
>>
>>       at: A numeric vector giving breakpoints along the range of ?z?.
>>           ...  However, this also means that when supplying ?at?
>>           explicitly, one has to be careful to include values outside
>>           the range of ?z? to ensure that all the data are shown.
>>
>> Hope this clarifies,
>>
>> Roger
>>
>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________**_________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/**listinfo/r-sig-geo<https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>>>
>>>
>> --
>> Roger Bivand
>> Department of Economics, NHH Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>
> 	[[alternative HTML version deleted]]
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From ehartel at hboi.fau.edu  Fri Feb  1 20:41:41 2013
From: ehartel at hboi.fau.edu (Elizabeth Hartel)
Date: Fri, 1 Feb 2013 11:41:41 -0800 (PST)
Subject: [R-sig-Geo] placing spdf back into adehabiatHR estUDm
In-Reply-To: <1359732980610-7582454.post@n2.nabble.com>
References: <1308601895714-6497315.post@n2.nabble.com>
	<4E0AD902.30108@oncfs.gouv.fr>
	<1312913036614-6669114.post@n2.nabble.com>
	<1315511622963-6773497.post@n2.nabble.com>
	<4E69CFD8.9040405@oncfs.gouv.fr>
	<1315606612768-6777535.post@n2.nabble.com>
	<1359732980610-7582454.post@n2.nabble.com>
Message-ID: <1359747701600-7582460.post@n2.nabble.com>

Hi Phil,

You should be able to use the following to covert it into a
SpatialPixelsDataFrame:

> hab <- as(hab, "SpatialPixelsDataFrame")

Good luck!
Liz



Phil H wrote
> Hi,
> 
> This looks to be exactly the solution i am looking for- I am analysing
> some telemetry data in a reservoir which is too complex to meet the
> boundary rules.
>  However I am having a little trouble with the example code....its
> probably something I have done but.....
> 
> 
> library(adehabitatHR)
> data(puechabonsp)
> loc <- puechabonsp$relocs
> elev <- puechabonsp$map
> fullgrid(elev) <- TRUE
> hab <- elev
> hab[[1]] <- as.numeric(!is.na(hab[[1]]))
> 
> #everything works good up till here
> ud <- kernelUD(loc[,1], grid=hab)
> 
> #when i get to this point I get the following error message
> 
> error in .kernelUDs(SpatialPoints(x, proj4string =
> CRS(as.character(pfs1))),  : 
>   grid should be a number or an object inheriting the class SpatialPixels
> 
> #i notice that when I run 
> 
>> class(hab)
> [1] "SpatialGridDataFrame"
> attr(,"package")
> [1] "sp"
> 
> 
> #it appears to be a class SpatialGridDataFrame. and the grid function
> needs to be of the class SpatialPixels
> 
> #so I tried
> 
> hab<-SpatialPixels(hab)
> 
> however this doesnt seem to work i get the error
> 
>> hab2<-SpatialPixels(hab)
> Error in SpatialPixels(hab) : 
>   points should be of class or extending SpatialPoints
> 
> I am a bit of a beginner using sp and adehabitathr packages so i expect it
> is something silly
> however I just cant seem to recetify this
> 
> Thanks for your time
> Phil H





--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Walruses-and-adehabitatHR-class-estUDm-exclusion-of-non-habitat-pixels-and-summary-over-all-animals-tp6497315p7582460.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From r.hijmans at gmail.com  Sat Feb  2 05:30:17 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 1 Feb 2013 20:30:17 -0800
Subject: [R-sig-Geo] Turning SpatialPointsDataFrame to Raster using
	rasterize
In-Reply-To: <510BED9B.5050609@uni-bonn.de>
References: <510BB5C4.6080707@uni-bonn.de> <510BD52E.4020701@jrc.ec.europa.eu>
	<510BED9B.5050609@uni-bonn.de>
Message-ID: <CANtt_hxatW7x0_TEei+AWp3f73atMiBqAtiTvhvwHGG4iS=Gkg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130201/768baf1e/attachment.pl>

From d.g.rossiter at utwente.nl  Sat Feb  2 16:51:15 2013
From: d.g.rossiter at utwente.nl (d.g.rossiter at utwente.nl)
Date: Sat, 2 Feb 2013 15:51:15 +0000
Subject: [R-sig-Geo] spplot specifying printing character (pch) broken?
Message-ID: <2BB4CAA243815F4BA16E205054AA61D11667BF40@EXMBX22.ad.utwente.nl>

I believe some recent change to spplot has removed the possibility of specifying a printing character other than the default 16 (fill=T) or 1.

The following code produces a plot of an attribute of a SpatialPointsDataFrame:

require(gstat)
data(jura)
coordinates(jura.pred) <- ~Xloc + Yloc
spplot(jura.pred, zcol="Co", col.regions=bpy.colors(64))

In the past (as of 09-Feb-2012 if not later) the it was possible to specify a different printing character:

spplot(jura.pred, zcol="Co", col.regions=bpy.colors(64), pch=2)

and this is promised in the documentation of spplot:

 pch
     integer; plotting character to use; defaults to 16 if fill is TRUE, else 1

However now with sp 1.0-5, lattice 0.20-13, running under R 2.15.2, the last-shown command prints only some of the points, all in black; the legend shows no characters.

David Rossiter
University of Twente (NL) / Faculty ITC

From d.g.rossiter at utwente.nl  Sat Feb  2 16:52:36 2013
From: d.g.rossiter at utwente.nl (d.g.rossiter at utwente.nl)
Date: Sat, 2 Feb 2013 15:52:36 +0000
Subject: [R-sig-Geo] spplot specifying printing character (pch) broken?
Message-ID: <2BB4CAA243815F4BA16E205054AA61D11667BF53@EXMBX22.ad.utwente.nl>

I believe some recent change to spplot has removed the possibility of specifying a printing character other than the default 16 (fill=T) or 1.

The following code produces a plot of an attribute of a SpatialPointsDataFrame:

require(gstat)
data(jura)
coordinates(jura.pred) <- ~Xloc + Yloc
spplot(jura.pred, zcol="Co", col.regions=bpy.colors(64))

In the past (as of 09-Feb-2012 if not later) the it was possible to specify a different printing character:

spplot(jura.pred, zcol="Co", col.regions=bpy.colors(64), pch=2)

and this is promised in the documentation of spplot:

 pch
     integer; plotting character to use; defaults to 16 if fill is TRUE, else 1

However now with sp 1.0-5, lattice 0.20-13, running under R 2.15.2, the last-shown command prints only some of the points, all in black; the legend shows no characters.

David Rossiter
University of Twente (NL) / Faculty ITC


From milansharma2012 at yahoo.com  Sun Feb  3 09:06:47 2013
From: milansharma2012 at yahoo.com (Milan Sharma)
Date: Sun, 3 Feb 2013 00:06:47 -0800 (PST)
Subject: [R-sig-Geo] Correlogram
Message-ID: <1359878807.10797.YahooMailNeo@web162101.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130203/92a5c7e7/attachment.pl>

From hammnick at gmail.com  Sun Feb  3 13:40:43 2013
From: hammnick at gmail.com (Nick Hamm)
Date: Sun, 3 Feb 2013 13:40:43 +0100
Subject: [R-sig-Geo] How does variogramST handle NAs?
Message-ID: <CALSqE8ErLTj0X6D6Ea9xi96vXCCsXtgxPMpnxdzu5brn7=TVAw@mail.gmail.com>

Dear list

We have been working with an STFDF object.  The dataset contains
several NAs, that is to say that there are some locations where the
time-series record is incomplete.  When we computed space-time
variograms for this dataset we found some unexpected results.

To explore this further, we took a second dataset of measurements from
the same location.  This dataset is complete (i.e., there are no NAs).
 We computed the space-time variogram.  We then inserted NAs at the
location that they occur for the first dataset and get quite different
variograms!

My question is:  How does variogramST handle NAs?

Demo code is below.  You can download the data from here:

https://dl.dropbox.com/u/15122401/demoData.zip

Nick


sessionInfo()

> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United
Kingdom.1252
[3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C
[5] LC_TIME=English_United Kingdom.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] gstat_1.0-15    spacetime_1.0-3 sp_1.0-5

loaded via a namespace (and not attached):
[1] grid_2.15.2      intervals_0.13.3 lattice_0.20-10  tools_2.15.2
[5] xts_0.9-3        zoo_1.7-9
>


# Load required libraries
require(gstat)
require(spacetime)

# Load the demo data
rm(list=ls())
load("demoData.RData")

# jan.na has some NAs in time
summary(jan.na$value)
# LE is at the same location but has no NAs
summary(LE$value)

# ST variogram for LE - full dataset
v.all <- variogramST(value~1, LE, width=20000, cutoff=500000,tlags=0:6)
plot(v.all, ylab="time lag (days)", xlab="distance (km)")
plot(v.all, map=FALSE, ylab="time lag (days)", xlab="distance (km)")


# Now insert NA's into the full dataset. The NA's correspond to  those
in the "jan.na" dataset
loc.na <- which(jan.na$value > 0)
LE.na  <- LE
LE.na$value[-loc.na] <- NA

# ST variogram - dataset with NA's inserted
v.na <- variogramST(value~1, LE.na, width=20000, cutoff=500000,tlags=0:6)
plot(v.na, ylab="time lag (days)", xlab="distance (km)")
plot(v.na, map=FALSE, ylab="time lag (days)", xlab="distance (km)")



# Remove all locations where there are any NAs in the jan.na time series
any.na <- which(apply(as(jan.na, "xts"), 2, function(x) all(!is.na(x))))
LE.no=LE[any.na,]

# ST variogram - remove all locations where there is an NA
v.any <- variogramST(value~1, LE.no, width=20000, cutoff=500000,tlags=0:6)
plot(v.any, ylab="time lag (days)", xlab="distance (km)")
plot(v.any, map=FALSE, ylab="time lag (days)", xlab="distance (km)")


From Nicopollex at yahoo.de  Sun Feb  3 16:59:10 2013
From: Nicopollex at yahoo.de (NicoP)
Date: Sun, 3 Feb 2013 07:59:10 -0800 (PST)
Subject: [R-sig-Geo] =?utf-8?q?Moran=C2=B4s_I?=
Message-ID: <1359907150240-7582466.post@n2.nabble.com>

Hello,

ich have 

 Miete <- read.table(..., header = TRUE, sep = ";", dec=",")
> 
> 
> head (Miete, n=10)
   Respondent Miete      lat       lon
1         584   550 49.87128  8.650939
2         418   620 48.12676 11.555891
3         829   550 53.09142  8.805106
4        1381   512 54.09108 12.106584
5         939   290 53.55610  8.579847
6         727   345 54.33311 10.123090
7          26   460 53.62416 10.023311
8         679   180 52.56844 13.502090
9         324   450 48.09125 11.521790
10        207   880 48.15264 11.579110
> 
> Miete.dists <- as.matrix(dist(cbind(Miete$lon, Miete$lat)))
> 
> Miete.dists.inv <- 1/Miete.dists
> diag(Miete.dists.inv) <- 0
> Miete.dists.inv[1:10, 1:10]
           1          2         3         4         5         6         7        
8          9         10
1  0.0000000  0.2951138 0.3101904 0.1833454 0.2713336 0.2128375 0.2502544
0.1801631  0.2960409  0.2945268
2  0.2951138  0.0000000 0.1761868 0.1669538 0.1615121 0.1569960 0.1752226
0.2062133 20.3113455 28.7617086
3  0.3101904  0.1761868 0.0000000 0.2898969 1.9364969 0.5522520 0.7521068
0.2115950  0.1757308  0.1765379
4  0.1833454  0.1669538 0.2898969 0.0000000 0.2803412 0.5004488 0.4683936
0.4841688  0.1658854  0.1677342
5  0.2713336  0.1615121 1.9364969 0.2803412 0.0000000 0.5787651 0.6920094
0.1991892  0.1611237  0.1618113
6  0.2128375  0.1569960 0.5522520 0.5004488 0.5787651 0.0000000 1.3967632
0.2623262  0.1563318  0.1574887
7  0.2502544  0.1752226 0.7521068 0.4683936 0.6920094 1.3967632 0.0000000
0.2750697  0.1744521  0.1757961
8  0.1801631  0.2062133 0.2115950 0.4841688 0.1991892 0.2623262 0.2750697
0.0000000  0.2042655  0.2076266
9  0.2960409 20.3113455 0.1757308 0.1658854 0.1611237 0.1563318 0.1744521
0.2042655  0.0000000 11.9061332
10 0.2945268 28.7617086 0.1765379 0.1677342 0.1618113 0.1574887 0.1757961
0.2076266 11.9061332  0.0000000
> require(ape)
> Moran.I(Miete$Miete, Miete.dists.inv)
Error in if (obs <= ei) 2 * pv else 2 * (1 - pv) : 
  missing value where TRUE/FALSE needed


I dont understand the error. I can?t calculate Morans? I Coefficient.


Can anyone help me ??

Many thanks !!




--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Moran-s-I-tp7582466.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From edzer.pebesma at uni-muenster.de  Sun Feb  3 17:17:39 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 03 Feb 2013 17:17:39 +0100
Subject: [R-sig-Geo] How does variogramST handle NAs?
In-Reply-To: <CALSqE8ErLTj0X6D6Ea9xi96vXCCsXtgxPMpnxdzu5brn7=TVAw@mail.gmail.com>
References: <CALSqE8ErLTj0X6D6Ea9xi96vXCCsXtgxPMpnxdzu5brn7=TVAw@mail.gmail.com>
Message-ID: <510E8DA3.1050502@uni-muenster.de>

Dear Nick, did you use the r-forge binaries? This was suggested in

https://stat.ethz.ch/pipermail/r-sig-geo/2013-January/017234.html

Please let me know if your unexpected results persist, and also tell us 
what was unexpected.



On 02/03/2013 01:40 PM, Nick Hamm wrote:
> Dear list
>
> We have been working with an STFDF object.  The dataset contains
> several NAs, that is to say that there are some locations where the
> time-series record is incomplete.  When we computed space-time
> variograms for this dataset we found some unexpected results.
>
> To explore this further, we took a second dataset of measurements from
> the same location.  This dataset is complete (i.e., there are no NAs).
>   We computed the space-time variogram.  We then inserted NAs at the
> location that they occur for the first dataset and get quite different
> variograms!
>
> My question is:  How does variogramST handle NAs?
>
> Demo code is below.  You can download the data from here:
>
> https://dl.dropbox.com/u/15122401/demoData.zip
>
> Nick
>
>
> sessionInfo()
>
>> sessionInfo()
> R version 2.15.2 (2012-10-26)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
>
> locale:
> [1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United
> Kingdom.1252
> [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United Kingdom.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] gstat_1.0-15    spacetime_1.0-3 sp_1.0-5
>
> loaded via a namespace (and not attached):
> [1] grid_2.15.2      intervals_0.13.3 lattice_0.20-10  tools_2.15.2
> [5] xts_0.9-3        zoo_1.7-9
>>
>
>
> # Load required libraries
> require(gstat)
> require(spacetime)
>
> # Load the demo data
> rm(list=ls())
> load("demoData.RData")
>
> # jan.na has some NAs in time
> summary(jan.na$value)
> # LE is at the same location but has no NAs
> summary(LE$value)
>
> # ST variogram for LE - full dataset
> v.all <- variogramST(value~1, LE, width=20000, cutoff=500000,tlags=0:6)
> plot(v.all, ylab="time lag (days)", xlab="distance (km)")
> plot(v.all, map=FALSE, ylab="time lag (days)", xlab="distance (km)")
>
>
> # Now insert NA's into the full dataset. The NA's correspond to  those
> in the "jan.na" dataset
> loc.na <- which(jan.na$value > 0)
> LE.na  <- LE
> LE.na$value[-loc.na] <- NA
>
> # ST variogram - dataset with NA's inserted
> v.na <- variogramST(value~1, LE.na, width=20000, cutoff=500000,tlags=0:6)
> plot(v.na, ylab="time lag (days)", xlab="distance (km)")
> plot(v.na, map=FALSE, ylab="time lag (days)", xlab="distance (km)")
>
>
>
> # Remove all locations where there are any NAs in the jan.na time series
> any.na <- which(apply(as(jan.na, "xts"), 2, function(x) all(!is.na(x))))
> LE.no=LE[any.na,]
>
> # ST variogram - remove all locations where there is an NA
> v.any <- variogramST(value~1, LE.no, width=20000, cutoff=500000,tlags=0:6)
> plot(v.any, ylab="time lag (days)", xlab="distance (km)")
> plot(v.any, map=FALSE, ylab="time lag (days)", xlab="distance (km)")
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From hammnick at gmail.com  Sun Feb  3 20:04:49 2013
From: hammnick at gmail.com (Nick Hamm)
Date: Sun, 3 Feb 2013 20:04:49 +0100
Subject: [R-sig-Geo] How does variogramST handle NAs?
In-Reply-To: <510E8DA3.1050502@uni-muenster.de>
References: <CALSqE8ErLTj0X6D6Ea9xi96vXCCsXtgxPMpnxdzu5brn7=TVAw@mail.gmail.com>
	<510E8DA3.1050502@uni-muenster.de>
Message-ID: <CALSqE8EeqTWvf-dbvK7719Y_epeQzkhn5E=K4Ue7qU7as2wr4Q@mail.gmail.com>

Dear Edzer

I was using the CRAN binaries (gstat version 1.0-15). The unexpected
result was that the variograms were totally different depending on
whether the NAs were included or not (the variogram decreased with
increasing temporal lag when NAs were excluded but increased when they
were included).

I installed gstat from R-forge (version 1.0-16).  I now get consistent
variograms.  I will look further at this next week.


Nick



On 3 February 2013 17:17, Edzer Pebesma <edzer.pebesma at uni-muenster.de> wrote:
> Dear Nick, did you use the r-forge binaries? This was suggested in
>
> https://stat.ethz.ch/pipermail/r-sig-geo/2013-January/017234.html
>
> Please let me know if your unexpected results persist, and also tell us what
> was unexpected.
>
>
>
>
> On 02/03/2013 01:40 PM, Nick Hamm wrote:
>>
>> Dear list
>>
>> We have been working with an STFDF object.  The dataset contains
>> several NAs, that is to say that there are some locations where the
>> time-series record is incomplete.  When we computed space-time
>> variograms for this dataset we found some unexpected results.
>>
>> To explore this further, we took a second dataset of measurements from
>> the same location.  This dataset is complete (i.e., there are no NAs).
>>   We computed the space-time variogram.  We then inserted NAs at the
>> location that they occur for the first dataset and get quite different
>> variograms!
>>
>> My question is:  How does variogramST handle NAs?
>>
>> Demo code is below.  You can download the data from here:
>>
>> https://dl.dropbox.com/u/15122401/demoData.zip
>>
>> Nick
>>
>>
>> sessionInfo()
>>
>>> sessionInfo()
>>
>> R version 2.15.2 (2012-10-26)
>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>>
>> locale:
>> [1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United
>> Kingdom.1252
>> [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C
>> [5] LC_TIME=English_United Kingdom.1252
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> other attached packages:
>> [1] gstat_1.0-15    spacetime_1.0-3 sp_1.0-5
>>
>> loaded via a namespace (and not attached):
>> [1] grid_2.15.2      intervals_0.13.3 lattice_0.20-10  tools_2.15.2
>> [5] xts_0.9-3        zoo_1.7-9
>>>
>>>
>>
>>
>> # Load required libraries
>> require(gstat)
>> require(spacetime)
>>
>> # Load the demo data
>> rm(list=ls())
>> load("demoData.RData")
>>
>> # jan.na has some NAs in time
>> summary(jan.na$value)
>> # LE is at the same location but has no NAs
>> summary(LE$value)
>>
>> # ST variogram for LE - full dataset
>> v.all <- variogramST(value~1, LE, width=20000, cutoff=500000,tlags=0:6)
>> plot(v.all, ylab="time lag (days)", xlab="distance (km)")
>> plot(v.all, map=FALSE, ylab="time lag (days)", xlab="distance (km)")
>>
>>
>> # Now insert NA's into the full dataset. The NA's correspond to  those
>> in the "jan.na" dataset
>> loc.na <- which(jan.na$value > 0)
>> LE.na  <- LE
>> LE.na$value[-loc.na] <- NA
>>
>> # ST variogram - dataset with NA's inserted
>> v.na <- variogramST(value~1, LE.na, width=20000, cutoff=500000,tlags=0:6)
>> plot(v.na, ylab="time lag (days)", xlab="distance (km)")
>> plot(v.na, map=FALSE, ylab="time lag (days)", xlab="distance (km)")
>>
>>
>>
>> # Remove all locations where there are any NAs in the jan.na time series
>> any.na <- which(apply(as(jan.na, "xts"), 2, function(x) all(!is.na(x))))
>> LE.no=LE[any.na,]
>>
>> # ST variogram - remove all locations where there is an NA
>> v.any <- variogramST(value~1, LE.no, width=20000, cutoff=500000,tlags=0:6)
>> plot(v.any, ylab="time lag (days)", xlab="distance (km)")
>> plot(v.any, map=FALSE, ylab="time lag (days)", xlab="distance (km)")
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From s6lihert at uni-bonn.de  Mon Feb  4 11:17:33 2013
From: s6lihert at uni-bonn.de (Lionel Hertzog)
Date: Mon, 04 Feb 2013 11:17:33 +0100
Subject: [R-sig-Geo] Turning SpatialPointsDataFrame to Raster using
	rasterize
In-Reply-To: <CANtt_hxatW7x0_TEei+AWp3f73atMiBqAtiTvhvwHGG4iS=Gkg@mail.gmail.com>
References: <510BB5C4.6080707@uni-bonn.de> <510BD52E.4020701@jrc.ec.europa.eu>
	<510BED9B.5050609@uni-bonn.de>
	<CANtt_hxatW7x0_TEei+AWp3f73atMiBqAtiTvhvwHGG4iS=Gkg@mail.gmail.com>
Message-ID: <510F8ABD.4030600@uni-bonn.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130204/840fd106/attachment.pl>

From mareliandaaldianty at gmail.com  Mon Feb  4 12:10:29 2013
From: mareliandaaldianty at gmail.com (Rely Al Dianty)
Date: Mon, 4 Feb 2013 19:10:29 +0800
Subject: [R-sig-Geo] Error in make spatial polygon object from grid topology
	object
Message-ID: <CAOcWEWO9aA3odUR1J8N6dX_-BaUwLmzmcP1yz82qCnccENWsXA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130204/4fd990be/attachment.pl>

From mareliandaaldianty at gmail.com  Mon Feb  4 12:19:35 2013
From: mareliandaaldianty at gmail.com (Rely Al Dianty)
Date: Mon, 4 Feb 2013 03:19:35 -0800 (PST)
Subject: [R-sig-Geo] Error in sample package SP
Message-ID: <1359976775626-7582471.post@n2.nabble.com>

Dear R users,


I'm begginer in  R and using Package "SP" for my project to tried sample
make SpatialPolygons object from gridTopology object , I follow the example
of the script but got error.

# Example
 >library(lattice)
 >grd <- GridTopology(cellcentre.offset=c(-175,55), cellsize=c(10,10),
 >cells.dim=c(4,4))
 >SpP_grd <- as.SpatialPolygons.GridTopology(grd)
 >plot(SpP_grd)
 >text(coordinates(SpP_grd), sapply(slot(SpP_grd, "polygons"),
function(i) slot(i, "ID")), cex=0.5)
>trdata <- data.frame(A=rep(c(1,2,3,4), each=4), B=rep(c(1,2,3,4),
each=4), row.names=sapply(slot(SpP_grd, "polygons") *
*SpPDF <- SpatialPolygonsDataFrame(SpP_grd, trdata) *
*>spplot(SpPDF)*


Result error in below

 > trdata <- data.frame(A=rep(c(1,2,3,4), each=4), B=rep(c(1,2,3,4),
each=4), row.names=sapply(slot(SpP_grd, "polygons")
+ SpPDF <- SpatialPolygonsDataFrame(SpP_grd, trdata)
Error: unexpected symbol in:
"trdata <- data.frame(A=rep(c(1,2,3,4), each=4), B=rep(c(1,2,3,4),
each=4), row.names=sapply(slot(SpP_grd, "polygons")
SpPDF"
 > spplot(SpPDF)
Error in spplot(SpPDF) :
   error in evaluating the argument 'obj' in selecting a method for
function 'spplot': Error: object 'SpPDF' not found


Please, any one can help me. Thank u very much


Best Regards,


Rely



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Error-in-sample-package-SP-tp7582471.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From villers.alexandre at gmail.com  Mon Feb  4 13:06:18 2013
From: villers.alexandre at gmail.com (Alexandre Villers)
Date: Mon, 04 Feb 2013 14:06:18 +0200
Subject: [R-sig-Geo] Error in sample package SP
In-Reply-To: <1359976775626-7582471.post@n2.nabble.com>
References: <1359976775626-7582471.post@n2.nabble.com>
Message-ID: <510FA43A.6060505@gmail.com>

Good afternoon,

You should be more specific when reporting an error if you want people 
to help you. Check this link first 
http://www.r-project.org/posting-guide.html
- Stating "Result error in below" is not really the best sentence to 
attract one's attention. What is the problem exactly?
- You could also try to provide us with a reproducible example that can 
be sent straightforwardly to R (withtout needing to, e.g., remove the 
'>' at the beginning of each line)
- State where exactly you got the example from
  -Report the sessionInfo()
etc...

HTH

Alex


On 04/02/2013 13:19, Rely Al Dianty wrote:
> Dear R users,
>
>
> I'm begginer in  R and using Package "SP" for my project to tried sample
> make SpatialPolygons object from gridTopology object , I follow the example
> of the script but got error.
>
> # Example
>   >library(lattice)
>   >grd <- GridTopology(cellcentre.offset=c(-175,55), cellsize=c(10,10),
>   >cells.dim=c(4,4))
>   >SpP_grd <- as.SpatialPolygons.GridTopology(grd)
>   >plot(SpP_grd)
>   >text(coordinates(SpP_grd), sapply(slot(SpP_grd, "polygons"),
> function(i) slot(i, "ID")), cex=0.5)
>> trdata <- data.frame(A=rep(c(1,2,3,4), each=4), B=rep(c(1,2,3,4),
> each=4), row.names=sapply(slot(SpP_grd, "polygons") *
> *SpPDF <- SpatialPolygonsDataFrame(SpP_grd, trdata) *
> *>spplot(SpPDF)*
>
>
> Result error in below
>
>   > trdata <- data.frame(A=rep(c(1,2,3,4), each=4), B=rep(c(1,2,3,4),
> each=4), row.names=sapply(slot(SpP_grd, "polygons")
> + SpPDF <- SpatialPolygonsDataFrame(SpP_grd, trdata)
> Error: unexpected symbol in:
> "trdata <- data.frame(A=rep(c(1,2,3,4), each=4), B=rep(c(1,2,3,4),
> each=4), row.names=sapply(slot(SpP_grd, "polygons")
> SpPDF"
>   > spplot(SpPDF)
> Error in spplot(SpPDF) :
>     error in evaluating the argument 'obj' in selecting a method for
> function 'spplot': Error: object 'SpPDF' not found
>
>
> Please, any one can help me. Thank u very much
>
>
> Best Regards,
>
>
> Rely
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Error-in-sample-package-SP-tp7582471.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>


From rob.robinson at bto.org  Mon Feb  4 13:30:52 2013
From: rob.robinson at bto.org (Rob Robinson)
Date: Mon, 4 Feb 2013 12:30:52 +0000
Subject: [R-sig-Geo] Error in sample package SP
In-Reply-To: <510FA43A.6060505@gmail.com>
References: <1359976775626-7582471.post@n2.nabble.com>
	<510FA43A.6060505@gmail.com>
Message-ID: <CAGcXcEZsnmrW548FpO6kdm5uHfbfEwW4zBtvZ9TEzuFF84kdng@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130204/c0aa78d9/attachment.pl>

From John_gross at nps.gov  Mon Feb  4 22:54:23 2013
From: John_gross at nps.gov (JohnG)
Date: Mon, 4 Feb 2013 13:54:23 -0800 (PST)
Subject: [R-sig-Geo] 64-bit ncdf4 for Windows??
Message-ID: <1360014863756-7582474.post@n2.nabble.com>

I need to work with some very large (>> 2 GB) files in ncdf4 format.  We
unsuccessfully attempted to build the 64-bit library, following Dave
Pierce's notes.  I'm wondering if anyone has cracked that nut, or has other
suggestions.  Installing Linux isn't an option.

John Gross
john_gross at nps.gov





--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/64-bit-ncdf4-for-Windows-tp7582474.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From mudrak at iastate.edu  Tue Feb  5 05:45:29 2013
From: mudrak at iastate.edu (Mudrak, Erika [EEOBS])
Date: Tue, 5 Feb 2013 04:45:29 +0000
Subject: [R-sig-Geo] pcf envelopes in spatstat
Message-ID: <2704_1360039531_1360039531_04D70FE9EA5A934D8BCEF4EDD504961316511876@ITSDAG3D.its.iastate.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130205/93e9c306/attachment.pl>

From mdsumner at gmail.com  Tue Feb  5 07:27:29 2013
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 5 Feb 2013 17:27:29 +1100
Subject: [R-sig-Geo] [R-sig-eco] Ltraj object without date.end
In-Reply-To: <AC7BD64EAE53564C9966754B36D39D487F16C8F6@mbox-f-3.du.deakin.edu.au>
References: <AC7BD64EAE53564C9966754B36D39D487F169091@mbox-f-3.du.deakin.edu.au>
	<AC7BD64EAE53564C9966754B36D39D487F16C0C4@mbox-f-3.du.deakin.edu.au>
	<CAAcGz9_dwttX+=U6df6x6x7jgZ1ZfQtr+9XtzW46-f5=6v7zMw@mail.gmail.com>
	<AC7BD64EAE53564C9966754B36D39D487F16C8F6@mbox-f-3.du.deakin.edu.au>
Message-ID: <CAAcGz9_+t6YBLOhZ_8HTjsU-tjUWpdm3T4XMuGY6zWJe27Rtig@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130205/be4dc438/attachment.pl>

From javielio at qyc.upm.es  Tue Feb  5 11:30:57 2013
From: javielio at qyc.upm.es (Javier Elio)
Date: Tue, 5 Feb 2013 11:30:57 +0100
Subject: [R-sig-Geo] Log-normal block krige
Message-ID: <E5D0109D-D6B5-4480-8981-B396834C8FA7@gmail.com>

Dear all,

I am trying to calculate the average value in a study area. I carried out the sampling according to a grid, and the data are lognormal. I would like to do with block krige (ordinary krige), I do the block krige with logarithms but I don't know how to back-transforming. 

I read Cressie 2006, but I don't know how to do in gstat (or other package, I aslo try constrainedKriging). I use krigeTg to back-transforming the predictions and for gaussian simulations, but as I know it can't be used for block krige. 

Please, can anyone help me? 

Best regards,

Javier de El?o Medina
Universidad Polit?cnica de Madrid
Escuela de Ingenieros de Minas


From alexandresantosbr at yahoo.com.br  Tue Feb  5 12:32:17 2013
From: alexandresantosbr at yahoo.com.br (ASANTOS)
Date: Tue, 05 Feb 2013 08:32:17 -0300
Subject: [R-sig-Geo] Contour plot for point process
In-Reply-To: <510FD63D.3020008@yahoo.com.br>
References: <510FD63D.3020008@yahoo.com.br>
Message-ID: <5110EDC1.6020507@yahoo.com.br>

Dear list members,
  
	I'm trying to create a contour plot in gray scale and convert in pixel format for represent a interpolation of
     point process, my short script:
     require(spatstat)
     A<-316## Size of square area
     # Create points
     xypois=rMatClust(0.005,7,8,owin(c(0,A),c(0,A)))
     xd=xypois$x
     yd=xypois$y
     plot(xd,yd,xlim=c(0,A),ylim=c(0,A),pch=19,cex=0.5)#Draw
     #
              I ask, if there are any function for make this?
     Thanks
     --
     Alexandre dos Santos
     Forest entomology
     IFMT - Instituto Federal de Educa??o, Ci?ncia e Tecnologia de Mato Grosso


From edzer.pebesma at uni-muenster.de  Tue Feb  5 12:35:03 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 05 Feb 2013 12:35:03 +0100
Subject: [R-sig-Geo] Log-normal block krige
In-Reply-To: <E5D0109D-D6B5-4480-8981-B396834C8FA7@gmail.com>
References: <E5D0109D-D6B5-4480-8981-B396834C8FA7@gmail.com>
Message-ID: <5110EE67.6050700@uni-muenster.de>

Javier,

simulation is relatively easy: simulate point support fields on a fine 
grid, take the exponent of everything, compute the block mean of each 
simulation (e.g. using sp::aggregate), and take the statistics of the 
block means for each block. (There is just not yet a simple function 
doing this for you. Or does geoR have this?)

if you want to avoid simulation, you might want to take a look at the 
constrainedKriging package:

http://cran.r-project.org/web/packages/constrainedKriging/index.html


On 02/05/2013 11:30 AM, Javier Elio wrote:
> Dear all,
>
> I am trying to calculate the average value in a study area. I carried out the sampling according to a grid, and the data are lognormal. I would like to do with block krige (ordinary krige), I do the block krige with logarithms but I don't know how to back-transforming.
>
> I read Cressie 2006, but I don't know how to do in gstat (or other package, I aslo try constrainedKriging). I use krigeTg to back-transforming the predictions and for gaussian simulations, but as I know it can't be used for block krige.
>
> Please, can anyone help me?
>
> Best regards,
>
> Javier de El?o Medina
> Universidad Polit?cnica de Madrid
> Escuela de Ingenieros de Minas
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From paulojus at c3sl.ufpr.br  Tue Feb  5 12:41:57 2013
From: paulojus at c3sl.ufpr.br (Paulo Justiniano Ribeiro Jr)
Date: Tue, 5 Feb 2013 09:41:57 -0200 (BRST)
Subject: [R-sig-Geo] Log-normal block krige
In-Reply-To: <5110EE67.6050700@uni-muenster.de>
References: <E5D0109D-D6B5-4480-8981-B396834C8FA7@gmail.com>
	<5110EE67.6050700@uni-muenster.de>
Message-ID: <alpine.DEB.2.00.1302050938280.18726@macalan.c3sl.ufpr.br>

Indeed geoR does not have it in an automated way.
(conditional) simulations can be obtained but then this
computations on blocks would be a sort of post-processing
along the lines Edzer describes.
I'm a bit unsure of the worth of implementing this step
for a sufficient flexiblke set of definitions of blocks and
shapes of the areas...

On Tue, 5 Feb 2013, Edzer Pebesma wrote:

> Javier,
>
> simulation is relatively easy: simulate point support fields on a fine 
> grid, take the exponent of everything, compute the block mean of each 
> simulation (e.g. using sp::aggregate), and take the statistics of the 
> block means for each block. (There is just not yet a simple function 
> doing this for you. Or does geoR have this?)
>
> if you want to avoid simulation, you might want to take a look at the 
> constrainedKriging package:
>
> http://cran.r-project.org/web/packages/constrainedKriging/index.html
>
>
> On 02/05/2013 11:30 AM, Javier Elio wrote:
>> Dear all,
>>
>> I am trying to calculate the average value in a study area. I carried out 
> the sampling according to a grid, and the data are lognormal. I would like to 
> do with block krige (ordinary krige), I do the block krige with logarithms 
> but I don't know how to back-transforming.
>>
>> I read Cressie 2006, but I don't know how to do in gstat (or other package, 
> I aslo try constrainedKriging). I use krigeTg to back-transforming the 
> predictions and for gaussian simulations, but as I know it can't be used for 
> block krige.
>>
>> Please, can anyone help me?
>>
>> Best regards,
>>
>> Javier de El?o Medina
>> Universidad Polit?cnica de Madrid
>> Escuela de Ingenieros de Minas
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> -- 
> Edzer Pebesma
> Institute for Geoinformatics (ifgi), University of M?nster
> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
> 8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
> http://www.52north.org/geostatistics      e.pebesma at wwu.de
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

Paulo Justiniano Ribeiro Jr
LEG (Laboratorio de Estatistica e Geoinformacao)
Universidade Federal do Parana
Caixa Postal 19.081
CEP 81.531-990
Curitiba, PR  -  Brasil
Tel: (+55) 41 3361 3573
VOIP: (+55) (41) (3361 3600) 1053 1066
Fax: (+55) 41 3361 3141
e-mail: paulojus AT  ufpr  br
http://www.leg.ufpr.br/~paulojus


From marcelino.delacruz at upm.es  Tue Feb  5 13:46:54 2013
From: marcelino.delacruz at upm.es (MARCELINO DE LA CRUZ ROT)
Date: Tue, 05 Feb 2013 13:46:54 +0100
Subject: [R-sig-Geo] Contour plot for point process
In-Reply-To: <5110EDC1.6020507@yahoo.com.br>
References: <510FD63D.3020008@yahoo.com.br> <5110EDC1.6020507@yahoo.com.br>
Message-ID: <bebd69a739fe4ecd6a2534ed10e046fb@upm.es>

I don't know if I uuderstand you but maybe  this is what you are asking 
for:

xypois.d <- density(xypois)
plot(xypois.d, col=grey((0:100)/100))
contour(xypois.d, add=T)
  points(xypois, pch=19, cex=0.7)


See the help page of density.ppp to customize the "interpolation"
HTH,
MArcelino


El 2013-02-05 12:32, ASANTOS escribi?:
> Dear list members,
>  I'm trying to create a contour plot in gray scale and convert in
> pixel format for represent a interpolation of
>     point process, my short script:
>     require(spatstat)
>     A<-316## Size of square area
>     # Create points
>     xypois=rMatClust(0.005,7,8,owin(c(0,A),c(0,A)))
>     xd=xypois$x
>     yd=xypois$y
>     plot(xd,yd,xlim=c(0,A),ylim=c(0,A),pch=19,cex=0.5)#Draw
>     #
>              I ask, if there are any function for make this?
>     Thanks
>     --
>     Alexandre dos Santos
>     Forest entomology
>     IFMT - Instituto Federal de Educa??o, Ci?ncia e Tecnologia de 
> Mato Grosso
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
MARCELINO DE LA CRUZ ROT
Universidad Politecnica de Madrid


From edzer.pebesma at uni-muenster.de  Tue Feb  5 13:51:47 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 05 Feb 2013 13:51:47 +0100
Subject: [R-sig-Geo] Log-normal block krige
In-Reply-To: <alpine.DEB.2.00.1302050938280.18726@macalan.c3sl.ufpr.br>
References: <E5D0109D-D6B5-4480-8981-B396834C8FA7@gmail.com>
	<5110EE67.6050700@uni-muenster.de>
	<alpine.DEB.2.00.1302050938280.18726@macalan.c3sl.ufpr.br>
Message-ID: <51110063.7030603@uni-muenster.de>

Below is an example for the meuse data in sp, using gstat. I've added 
this as a demo script, "lnsim.R", to gstat development tree:

https://r-forge.r-project.org/scm/viewvc.php/pkg/demo/lnsim.R?view=markup&root=gstat



On 02/05/2013 12:41 PM, Paulo Justiniano Ribeiro Jr wrote:
> Indeed geoR does not have it in an automated way.
> (conditional) simulations can be obtained but then this
> computations on blocks would be a sort of post-processing
> along the lines Edzer describes.
> I'm a bit unsure of the worth of implementing this step
> for a sufficient flexiblke set of definitions of blocks and
> shapes of the areas...
>
> On Tue, 5 Feb 2013, Edzer Pebesma wrote:
>
>> Javier,
>>
>> simulation is relatively easy: simulate point support fields on a fine
>> grid, take the exponent of everything, compute the block mean of each
>> simulation (e.g. using sp::aggregate), and take the statistics of the
>> block means for each block. (There is just not yet a simple function
>> doing this for you. Or does geoR have this?)
>>
>> if you want to avoid simulation, you might want to take a look at the
>> constrainedKriging package:
>>
>> http://cran.r-project.org/web/packages/constrainedKriging/index.html
>>
>>
>> On 02/05/2013 11:30 AM, Javier Elio wrote:
>>> Dear all,
>>>
>>> I am trying to calculate the average value in a study area. I carried
>>> out
>> the sampling according to a grid, and the data are lognormal. I would
>> like to do with block krige (ordinary krige), I do the block krige
>> with logarithms but I don't know how to back-transforming.
>>>
>>> I read Cressie 2006, but I don't know how to do in gstat (or other
>>> package,
>> I aslo try constrainedKriging). I use krigeTg to back-transforming the
>> predictions and for gaussian simulations, but as I know it can't be
>> used for block krige.
>>>
>>> Please, can anyone help me?
>>>
>>> Best regards,
>>>
>>> Javier de El?o Medina
>>> Universidad Polit?cnica de Madrid
>>> Escuela de Ingenieros de Minas
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics (ifgi), University of M?nster
>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>> 8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
>> http://www.52north.org/geostatistics      e.pebesma at wwu.de
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> Paulo Justiniano Ribeiro Jr
> LEG (Laboratorio de Estatistica e Geoinformacao)
> Universidade Federal do Parana
> Caixa Postal 19.081
> CEP 81.531-990
> Curitiba, PR  -  Brasil
> Tel: (+55) 41 3361 3573
> VOIP: (+55) (41) (3361 3600) 1053 1066
> Fax: (+55) 41 3361 3141
> e-mail: paulojus AT  ufpr  br
> http://www.leg.ufpr.br/~paulojus
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From milansharma2012 at yahoo.com  Tue Feb  5 15:17:39 2013
From: milansharma2012 at yahoo.com (Milan Sharma)
Date: Tue, 5 Feb 2013 06:17:39 -0800 (PST)
Subject: [R-sig-Geo] Spatio temporal modeling
In-Reply-To: <51110063.7030603@uni-muenster.de>
References: <E5D0109D-D6B5-4480-8981-B396834C8FA7@gmail.com>
	<5110EE67.6050700@uni-muenster.de>
	<alpine.DEB.2.00.1302050938280.18726@macalan.c3sl.ufpr.br>
	<51110063.7030603@uni-muenster.de>
Message-ID: <1360073859.128.YahooMailNeo@web162102.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130205/0508315a/attachment.pl>

From jwesroberts at gmail.com  Tue Feb  5 16:15:30 2013
From: jwesroberts at gmail.com (Wesley Roberts)
Date: Tue, 5 Feb 2013 17:15:30 +0200
Subject: [R-sig-Geo] converting 0 to NAN in SpatialGridDataFrame
Message-ID: <CAFik=FfegasQvwYUKFeggbRm9iR4h7tvb1hujk1q-HJqQ6ULhg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130205/40f928ec/attachment.pl>

From s6lihert at uni-bonn.de  Tue Feb  5 16:24:24 2013
From: s6lihert at uni-bonn.de (Lionel Hertzog)
Date: Tue, 05 Feb 2013 16:24:24 +0100
Subject: [R-sig-Geo] converting 0 to NAN in SpatialGridDataFrame
In-Reply-To: <CAFik=FfegasQvwYUKFeggbRm9iR4h7tvb1hujk1q-HJqQ6ULhg@mail.gmail.com>
References: <CAFik=FfegasQvwYUKFeggbRm9iR4h7tvb1hujk1q-HJqQ6ULhg@mail.gmail.com>
Message-ID: <51112428.3080008@uni-bonn.de>

Dear Wesley,

You can access the data components of a SpatialGridDataFrame using 
@data, and then classic data frame operation can be done , in your 
example this would be:

TC1.dte1 at data[TC1.dte1 at data==0]<-NA

Hope this help,
Lionel

Le 05/02/2013 16:15, Wesley Roberts a ?crit :
> Dear R-sig-geo
>
> I have been searching for a way to convert 0s to NAN in R but have not had
> any luck. I have tried the following with no luck
>
> is.na(TC1.dte1)<-TC1.dte1<=0
>
> TC1.dte1[is.na(TC1.dte1)]<=0
>
> TC1.dte1[TC1.dte1==0]<-NA
>
>
> What I would like to do is to remove all 0s from TC1.dte1 and replace them
> with NA or NANs. The 0s are a mask which I dont want to alter in subsequent
> work.
>
> My data is in a SpatialGridDataFrame and was imported into R using rgdal.
>
> Many thanks for your help and inputs,
> Wesley
>


From etiennebr at gmail.com  Tue Feb  5 16:36:50 2013
From: etiennebr at gmail.com (Etienne B. Racine)
Date: Tue, 5 Feb 2013 10:36:50 -0500
Subject: [R-sig-Geo] converting 0 to NAN in SpatialGridDataFrame
In-Reply-To: <CAFik=FfegasQvwYUKFeggbRm9iR4h7tvb1hujk1q-HJqQ6ULhg@mail.gmail.com>
References: <CAFik=FfegasQvwYUKFeggbRm9iR4h7tvb1hujk1q-HJqQ6ULhg@mail.gmail.com>
Message-ID: <CALjAYt4BBrXxKoQ8t0n+Dm7ruy72w+h2YKqzK7D+k6LL0Kd9xA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130205/c3d05a56/attachment.pl>

From jwesroberts at gmail.com  Tue Feb  5 16:42:50 2013
From: jwesroberts at gmail.com (Wesley Roberts)
Date: Tue, 5 Feb 2013 17:42:50 +0200
Subject: [R-sig-Geo] converting 0 to NAN in SpatialGridDataFrame
In-Reply-To: <CALjAYt4BBrXxKoQ8t0n+Dm7ruy72w+h2YKqzK7D+k6LL0Kd9xA@mail.gmail.com>
References: <CAFik=FfegasQvwYUKFeggbRm9iR4h7tvb1hujk1q-HJqQ6ULhg@mail.gmail.com>
	<CALjAYt4BBrXxKoQ8t0n+Dm7ruy72w+h2YKqzK7D+k6LL0Kd9xA@mail.gmail.com>
Message-ID: <CAFik=FeR+G5ddg_jcTfcubm0J7wKWKufpLsSO9kHe7u5tjg=hQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130205/a25b7759/attachment.pl>

From etiennebr at gmail.com  Tue Feb  5 16:53:05 2013
From: etiennebr at gmail.com (Etienne B. Racine)
Date: Tue, 5 Feb 2013 10:53:05 -0500
Subject: [R-sig-Geo] converting 0 to NAN in SpatialGridDataFrame
In-Reply-To: <CAFik=FeR+G5ddg_jcTfcubm0J7wKWKufpLsSO9kHe7u5tjg=hQ@mail.gmail.com>
References: <CAFik=FfegasQvwYUKFeggbRm9iR4h7tvb1hujk1q-HJqQ6ULhg@mail.gmail.com>
	<CALjAYt4BBrXxKoQ8t0n+Dm7ruy72w+h2YKqzK7D+k6LL0Kd9xA@mail.gmail.com>
	<CAFik=FeR+G5ddg_jcTfcubm0J7wKWKufpLsSO9kHe7u5tjg=hQ@mail.gmail.com>
Message-ID: <CALjAYt50KAEZjrDTpX5iL7Uk2K+1+Vmp8WRsz0T3ed3dM1u2iQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130205/75889367/attachment.pl>

From jwesroberts at gmail.com  Tue Feb  5 16:57:58 2013
From: jwesroberts at gmail.com (Wesley Roberts)
Date: Tue, 5 Feb 2013 17:57:58 +0200
Subject: [R-sig-Geo] converting 0 to NAN in SpatialGridDataFrame
In-Reply-To: <CALjAYt50KAEZjrDTpX5iL7Uk2K+1+Vmp8WRsz0T3ed3dM1u2iQ@mail.gmail.com>
References: <CAFik=FfegasQvwYUKFeggbRm9iR4h7tvb1hujk1q-HJqQ6ULhg@mail.gmail.com>
	<CALjAYt4BBrXxKoQ8t0n+Dm7ruy72w+h2YKqzK7D+k6LL0Kd9xA@mail.gmail.com>
	<CAFik=FeR+G5ddg_jcTfcubm0J7wKWKufpLsSO9kHe7u5tjg=hQ@mail.gmail.com>
	<CALjAYt50KAEZjrDTpX5iL7Uk2K+1+Vmp8WRsz0T3ed3dM1u2iQ@mail.gmail.com>
Message-ID: <CAFik=Fe2RaA=be_738Bq72Gf2uYxp8L9UoXzEpOuouJJaYu7yQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130205/71a801fb/attachment.pl>

From jgrn at illinois.edu  Tue Feb  5 21:28:20 2013
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Tue, 5 Feb 2013 14:28:20 -0600
Subject: [R-sig-Geo] Reprojecting a categorical raster using something
	besides nearest neighbor
Message-ID: <CABG0rfvS=UzxLYb64Ycvkm3rYKKHLNm3R3_25bxVL0iYu5RFVQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130205/ff17d145/attachment.pl>

From edzer.pebesma at uni-muenster.de  Tue Feb  5 21:52:50 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 05 Feb 2013 21:52:50 +0100
Subject: [R-sig-Geo] Reprojecting a categorical raster using something
 besides nearest neighbor
In-Reply-To: <CABG0rfvS=UzxLYb64Ycvkm3rYKKHLNm3R3_25bxVL0iYu5RFVQ@mail.gmail.com>
References: <CABG0rfvS=UzxLYb64Ycvkm3rYKKHLNm3R3_25bxVL0iYu5RFVQ@mail.gmail.com>
Message-ID: <51117122.9080605@uni-muenster.de>

Jonathan, perhaps use

function(x) which.max(table(x))

as the aggregate function?

On 02/05/2013 09:28 PM, Jonathan Greenberg wrote:
> R-sig-geo'ers:
>
> I'm trying to figure out an efficient way to upsample (from higher rez to
> lower rez) a *categorical* raster using a function where the output pixel
> value is the ID of the class that would have had the highest cover within
> the output, given the resampling.  This is NOT the same as a nearest
> neighbor function. Right now, the best I can think of is:
> 1) Generate a set of binary masks, one per class, of the input image, where
> for class X, the image X will be 0 if class X is not present, and 1 if it
> is.
> 2) Run aggregate() with a function mean() on these images.
> 3) Pick the max value across the aggregated, lower rez images, which should
> be the class with the highest cover.
>
> Is there any easier way to do this?
>
> --j
>
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From r.hijmans at gmail.com  Wed Feb  6 01:28:14 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 5 Feb 2013 16:28:14 -0800
Subject: [R-sig-Geo] Reprojecting a categorical raster using something
 besides nearest neighbor
In-Reply-To: <51117122.9080605@uni-muenster.de>
References: <CABG0rfvS=UzxLYb64Ycvkm3rYKKHLNm3R3_25bxVL0iYu5RFVQ@mail.gmail.com>
	<51117122.9080605@uni-muenster.de>
Message-ID: <CANtt_hwkerNHg5iZ4GeQfmySzcCcycg358_WV5L+G=Fz8jN1fA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130205/d1014340/attachment.pl>

From jgrn at illinois.edu  Wed Feb  6 01:31:40 2013
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Tue, 5 Feb 2013 18:31:40 -0600
Subject: [R-sig-Geo] Reprojecting a categorical raster using something
 besides nearest neighbor
In-Reply-To: <51117122.9080605@uni-muenster.de>
References: <CABG0rfvS=UzxLYb64Ycvkm3rYKKHLNm3R3_25bxVL0iYu5RFVQ@mail.gmail.com>
	<51117122.9080605@uni-muenster.de>
Message-ID: <CABG0rfu+uBs0NhKELAuxZ60a413MO8aBAVyGLn9xLWF_H3P8EA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130205/f9bc0129/attachment.pl>

From r.hijmans at gmail.com  Wed Feb  6 04:18:48 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 5 Feb 2013 19:18:48 -0800
Subject: [R-sig-Geo] Reprojecting a categorical raster using something
 besides nearest neighbor
In-Reply-To: <CABG0rfu+uBs0NhKELAuxZ60a413MO8aBAVyGLn9xLWF_H3P8EA@mail.gmail.com>
References: <CABG0rfvS=UzxLYb64Ycvkm3rYKKHLNm3R3_25bxVL0iYu5RFVQ@mail.gmail.com>
	<51117122.9080605@uni-muenster.de>
	<CABG0rfu+uBs0NhKELAuxZ60a413MO8aBAVyGLn9xLWF_H3P8EA@mail.gmail.com>
Message-ID: <CANtt_hzv9_xC8rLAwvhLV+p1ZKC8KzA0wXz10ifvtcx-TEKqdQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130205/e23b6d36/attachment.pl>

From milansharma2012 at yahoo.com  Wed Feb  6 06:41:46 2013
From: milansharma2012 at yahoo.com (Milan Sharma)
Date: Tue, 5 Feb 2013 21:41:46 -0800 (PST)
Subject: [R-sig-Geo] GWR
Message-ID: <1360129306.2886.YahooMailNeo@web162101.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130205/68e80a16/attachment.pl>

From Roger.Bivand at nhh.no  Wed Feb  6 10:33:04 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 6 Feb 2013 10:33:04 +0100
Subject: [R-sig-Geo] GWR
In-Reply-To: <1360129306.2886.YahooMailNeo@web162101.mail.bf1.yahoo.com>
References: <1360129306.2886.YahooMailNeo@web162101.mail.bf1.yahoo.com>
Message-ID: <alpine.LRH.2.03.1302061028250.26728@reclus.nhh.no>

DO NOT POST HTML!!! All R lists have a plain text only policy, because 
plain text uses much less bandwidth than HTML, limiting the carbon 
footprint of our list. Servers currently pollute more than most bad 
industries! In addition, plain text is much less insecure, because it is 
not interpreted on the receiving client.

This is a repeat of:

https://stat.ethz.ch/pipermail/r-sig-geo/2013-January/017267.html

Please always consult the archives before posting.

Roger

On Wed, 6 Feb 2013, Milan Sharma wrote:

> Dear list,
> what command in R gives all the local parameter estimates of a GWR?
> I just got minimum, max,....of the coefficients.
> Any help would be appreciated.
> Milan
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From fsantos at ujaen.es  Wed Feb  6 10:45:02 2013
From: fsantos at ujaen.es (fsantos at ujaen.es)
Date: Wed, 6 Feb 2013 10:45:02 +0100 (CET)
Subject: [R-sig-Geo] Error using SpatialPixelsDataFrame function
Message-ID: <04ccc310e6372537a55504db6c65b9e9.squirrel@webmail.ujaen.es>

Dear R-Geo users,

I am trying to create a SP objects using SpatialPixelsDataFrame. Next I
can see the code:

> proj <- '+proj=lcc +ellps=WGS84 +lat_0=0 +lat_1=30 +lat_2=60 +lon_0=-4.75'
> coords <- read.table("coords.txt")
> dat    <- read.table("dem.txt")
> test <- SpatialPixelsDataFrame(points=coords, data=dat, proj4string=proj)

Error in if (max(object at grid.index) > .NumberOfCells(object at grid))
stop("grid.index max value too large") :
  missing value where TRUE/FALSE needed
In addition: Warning messages:
1: In points2grid(points, tolerance, round) :
  grid has empty column/rows in dimension 1
2: In points2grid(points, tolerance, round) :
  grid topology may be corrupt in dimension 1
3: In points2grid(points, tolerance, round) :
  grid has empty column/rows in dimension 2
4: In points2grid(points, tolerance, round) :
  grid topology may be corrupt in dimension 2
5: In getGridIndex(coordinates(points), grid) : NAs introduced by coercion

What's the problem?

PD: I can not attach data for this because the size exceeds the maximum
allowable.

Thanks in advance.


From edzer.pebesma at uni-muenster.de  Wed Feb  6 10:59:49 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 06 Feb 2013 10:59:49 +0100
Subject: [R-sig-Geo] Error using SpatialPixelsDataFrame function
In-Reply-To: <04ccc310e6372537a55504db6c65b9e9.squirrel@webmail.ujaen.es>
References: <04ccc310e6372537a55504db6c65b9e9.squirrel@webmail.ujaen.es>
Message-ID: <51122995.5060405@uni-muenster.de>

SpatialPixelsDataFrame() tries to figure out how the points you feed it 
with are layed out on a grid structure. Small errors, possibly from 
rounding (you're reading from ascii) may cause it to go slightly wrong, 
and not give you the grid you'd like.

As you probably know the grid at which "coords.txt" is layed out, you 
can create it the right way and pass it to SpatialPixelsDataFrame(). Use 
function GridTopology() for this.

On 02/06/2013 10:45 AM, fsantos at ujaen.es wrote:
> Dear R-Geo users,
>
> I am trying to create a SP objects using SpatialPixelsDataFrame. Next I
> can see the code:
>
>> proj <- '+proj=lcc +ellps=WGS84 +lat_0=0 +lat_1=30 +lat_2=60 +lon_0=-4.75'
>> coords <- read.table("coords.txt")
>> dat    <- read.table("dem.txt")
>> test <- SpatialPixelsDataFrame(points=coords, data=dat, proj4string=proj)
>
> Error in if (max(object at grid.index) > .NumberOfCells(object at grid))
> stop("grid.index max value too large") :
>    missing value where TRUE/FALSE needed
> In addition: Warning messages:
> 1: In points2grid(points, tolerance, round) :
>    grid has empty column/rows in dimension 1
> 2: In points2grid(points, tolerance, round) :
>    grid topology may be corrupt in dimension 1
> 3: In points2grid(points, tolerance, round) :
>    grid has empty column/rows in dimension 2
> 4: In points2grid(points, tolerance, round) :
>    grid topology may be corrupt in dimension 2
> 5: In getGridIndex(coordinates(points), grid) : NAs introduced by coercion
>
> What's the problem?
>
> PD: I can not attach data for this because the size exceeds the maximum
> allowable.
>
> Thanks in advance.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From villers.alexandre at gmail.com  Wed Feb  6 11:07:25 2013
From: villers.alexandre at gmail.com (Alexandre Villers)
Date: Wed, 6 Feb 2013 12:07:25 +0200
Subject: [R-sig-Geo] Error using SpatialPixelsDataFrame function
In-Reply-To: <04ccc310e6372537a55504db6c65b9e9.squirrel@webmail.ujaen.es>
References: <04ccc310e6372537a55504db6c65b9e9.squirrel@webmail.ujaen.es>
Message-ID: <CAFrtd2OL00UPQ6Ame18ZLOsRxr5__K0asWnW+isg6yoOy8Ne=Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130206/d56b4f41/attachment.pl>

From rsbhalla at gmail.com  Wed Feb  6 12:18:57 2013
From: rsbhalla at gmail.com (R.S. Bhalla)
Date: Wed, 06 Feb 2013 16:48:57 +0530
Subject: [R-sig-Geo] spGRASS6 issue
Message-ID: <51123C21.60408@gmail.com>

Dear List,
I have run into trouble with the execGRASS command copied below and 
can't figure out what I'm doing wrong.
It runs fine without the size=11 argument (takes the default value of 
3). Can someone please help.
Thanks in advance,
Ravi

Command:
execGRASS("r.neighbors", parameters=list(input=patmap, output=n11map, 
method="median", size=11), flags=c("overwrite", "c"))

Error:
Error in doGRASS(cmd, flags = flags, ..., parameters = parameters, 
echoCmd = echoCmd) :
   Parameter <size> does not have integer value

-- 
R.S. Bhalla, Ph.D.
Sr.Research Fellow
Foundation for Ecological Research, Advocacy and Learning (FERAL)
Ph. +91 413 2671566
Fax. +91 413  2671567
Web: http://www.feralindia.org


From edzer.pebesma at uni-muenster.de  Wed Feb  6 12:20:52 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 06 Feb 2013 12:20:52 +0100
Subject: [R-sig-Geo] spplot specifying printing character (pch) broken?
In-Reply-To: <2BB4CAA243815F4BA16E205054AA61D11667BF53@EXMBX22.ad.utwente.nl>
References: <2BB4CAA243815F4BA16E205054AA61D11667BF53@EXMBX22.ad.utwente.nl>
Message-ID: <51123C94.7050401@uni-muenster.de>

David, this is a bug that has now been corrected on r-forge.

Thanks for reporting,

On 02/02/2013 04:52 PM, d.g.rossiter at utwente.nl wrote:
> I believe some recent change to spplot has removed the possibility of specifying a printing character other than the default 16 (fill=T) or 1.
>
> The following code produces a plot of an attribute of a SpatialPointsDataFrame:
>
> require(gstat)
> data(jura)
> coordinates(jura.pred) <- ~Xloc + Yloc
> spplot(jura.pred, zcol="Co", col.regions=bpy.colors(64))
>
> In the past (as of 09-Feb-2012 if not later) the it was possible to specify a different printing character:
>
> spplot(jura.pred, zcol="Co", col.regions=bpy.colors(64), pch=2)
>
> and this is promised in the documentation of spplot:
>
>   pch
>       integer; plotting character to use; defaults to 16 if fill is TRUE, else 1
>
> However now with sp 1.0-5, lattice 0.20-13, running under R 2.15.2, the last-shown command prints only some of the points, all in black; the legend shows no characters.
>
> David Rossiter
> University of Twente (NL) / Faculty ITC
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From tanja.zinsser at googlemail.com  Wed Feb  6 12:53:25 2013
From: tanja.zinsser at googlemail.com (=?ISO-8859-1?Q?Tanja_Zin=DFer?=)
Date: Wed, 6 Feb 2013 12:53:25 +0100
Subject: [R-sig-Geo] spatial regression for binary/dichotomous depend
	variable
Message-ID: <CALDS4yCey_Ebn6YwVHVBRubdzT_gLxx_rDWSF1ksdTDz0YEsiw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130206/8e98da29/attachment.pl>

From Roger.Bivand at nhh.no  Wed Feb  6 12:55:04 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 6 Feb 2013 12:55:04 +0100
Subject: [R-sig-Geo] spGRASS6 issue
In-Reply-To: <51123C21.60408@gmail.com>
References: <51123C21.60408@gmail.com>
Message-ID: <alpine.LRH.2.03.1302061253330.26728@reclus.nhh.no>

On Wed, 6 Feb 2013, R.S. Bhalla wrote:

> Dear List,
> I have run into trouble with the execGRASS command copied below and can't 
> figure out what I'm doing wrong.
> It runs fine without the size=11 argument (takes the default value of 3). Can

> storage.mode(11)
[1] "double"
> is.integer(11)
[1] FALSE
> is.integer(11L)
[1] TRUE

Just because it looks like an integer, it doesn't mean it is.

Roger

> someone please help.
> Thanks in advance,
> Ravi
>
> Command:
> execGRASS("r.neighbors", parameters=list(input=patmap, output=n11map, 
> method="median", size=11), flags=c("overwrite", "c"))
>
> Error:
> Error in doGRASS(cmd, flags = flags, ..., parameters = parameters, echoCmd = 
> echoCmd) :
>  Parameter <size> does not have integer value
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From r.m.krug at gmail.com  Wed Feb  6 13:22:04 2013
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Wed, 06 Feb 2013 13:22:04 +0100
Subject: [R-sig-Geo] spGRASS6 issue
In-Reply-To: <alpine.LRH.2.03.1302061253330.26728@reclus.nhh.no>
References: <51123C21.60408@gmail.com>
	<alpine.LRH.2.03.1302061253330.26728@reclus.nhh.no>
Message-ID: <51124AEC.8050307@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 06/02/13 12:55, Roger Bivand wrote:
> On Wed, 6 Feb 2013, R.S. Bhalla wrote:
> 
>> Dear List, I have run into trouble with the execGRASS command copied below and can't figure
>> out what I'm doing wrong. It runs fine without the size=11 argument (takes the default value
>> of 3). Can
> 
>> storage.mode(11)
> [1] "double"
>> is.integer(11)
> [1] FALSE
>> is.integer(11L)
> [1] TRUE
> 
> Just because it looks like an integer, it doesn't mean it is.

Hi Roger

this has bittan many users, including myself, as it is a little aux contraire to R, as here 11 is
acepted as integer in most circumstances.

Would it be possible to use a different check for integer e.g.

if(as.integer(x) == x) then {x <- as.integer(x)} else {ERROR}

I have the feeling that would be more in line with the treating in R of different numerical
storage modes.

Cheers,

Rainer



> 
> Roger
> 
>> someone please help. Thanks in advance, Ravi
>> 
>> Command: execGRASS("r.neighbors", parameters=list(input=patmap, output=n11map,
>> method="median", size=11), flags=c("overwrite", "c"))
>> 
>> Error: Error in doGRASS(cmd, flags = flags, ..., parameters = parameters, echoCmd = echoCmd)
>> : Parameter <size> does not have integer value
>> 
>> 
> 

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/

iQEcBAEBAgAGBQJREkrsAAoJENvXNx4PUvmC4YYIAPJnH4dmYQZTCJewHCGwW3zD
szbWSeWB7Yye2DxP/7ADMQUL6buR7ZAAQWpQDjps1u6o82inoRUQ0JiUHeXGB/oW
MHMiYFlcvK6+WU6/ZIhL8uKsyUeDscyDUfuLOeyuNpsLe1Y8RvinQWtmrwefhLVZ
4sjDrtSXJs0YBKRdHyhtmIkCUzXfra7VvbuOA5ehb76t0Re66Dvmzha1VvgBSa1Y
oOP/zlzj+AqK/RrJX2Jlt2YrdU97wsb80MeHlkIX7h33qKriaqf9okcURPyMkIib
pR+qED66Fjz916qnyn8RWiI8lRSg64uYyWbgGyx2OlsyRNxfvD7dvG45ZnuqrLQ=
=X7qL
-----END PGP SIGNATURE-----


From gianni.lavaredo at gmail.com  Wed Feb  6 13:41:01 2013
From: gianni.lavaredo at gmail.com (gianni lavaredo)
Date: Wed, 6 Feb 2013 13:41:01 +0100
Subject: [R-sig-Geo] Compare two raster using Raster Library in code saving
	style
Message-ID: <CAJ6JbR9CAf4bvCzsUwMR1DQmb3zZm2FKtMDN3v2roBn2m24Abg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130206/ff764db1/attachment.pl>

From wilfried.thuiller at ujf-grenoble.fr  Wed Feb  6 13:55:30 2013
From: wilfried.thuiller at ujf-grenoble.fr (Wilfried Thuiller)
Date: Wed, 6 Feb 2013 13:55:30 +0100
Subject: [R-sig-Geo] Compare two raster using Raster Library in code
	saving style
In-Reply-To: <CAJ6JbR9CAf4bvCzsUwMR1DQmb3zZm2FKtMDN3v2roBn2m24Abg@mail.gmail.com>
References: <CAJ6JbR9CAf4bvCzsUwMR1DQmb3zZm2FKtMDN3v2roBn2m24Abg@mail.gmail.com>
Message-ID: <B23A3B07-BAAA-4B90-8D65-927D92703DC4@ujf-grenoble.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130206/b6b32cac/attachment.pl>

From rlist at zeidlers.de  Wed Feb  6 14:02:52 2013
From: rlist at zeidlers.de (Julian Zeidler)
Date: Wed, 06 Feb 2013 14:02:52 +0100
Subject: [R-sig-Geo] Compare two raster using Raster Library in code
 saving style
In-Reply-To: <B23A3B07-BAAA-4B90-8D65-927D92703DC4@ujf-grenoble.fr>
References: <CAJ6JbR9CAf4bvCzsUwMR1DQmb3zZm2FKtMDN3v2roBn2m24Abg@mail.gmail.com>
	<B23A3B07-BAAA-4B90-8D65-927D92703DC4@ujf-grenoble.fr>
Message-ID: <5112547C.1080104@zeidlers.de>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130206/80782aaa/attachment.html>

From milansharma2012 at yahoo.com  Wed Feb  6 16:09:46 2013
From: milansharma2012 at yahoo.com (Milan Sharma)
Date: Wed, 6 Feb 2013 07:09:46 -0800 (PST)
Subject: [R-sig-Geo] spatial regression for binary/dichotomous depend
	variable
In-Reply-To: <CALDS4yCey_Ebn6YwVHVBRubdzT_gLxx_rDWSF1ksdTDz0YEsiw@mail.gmail.com>
References: <CALDS4yCey_Ebn6YwVHVBRubdzT_gLxx_rDWSF1ksdTDz0YEsiw@mail.gmail.com>
Message-ID: <1360163386.32156.YahooMailNeo@web162102.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130206/0ecf324e/attachment.pl>

From jon.skoien at jrc.ec.europa.eu  Wed Feb  6 16:59:41 2013
From: jon.skoien at jrc.ec.europa.eu (Jon Olav Skoien)
Date: Wed, 06 Feb 2013 16:59:41 +0100
Subject: [R-sig-Geo] Log-normal block krige
In-Reply-To: <51110063.7030603@uni-muenster.de>
References: <E5D0109D-D6B5-4480-8981-B396834C8FA7@gmail.com>
	<5110EE67.6050700@uni-muenster.de>
	<alpine.DEB.2.00.1302050938280.18726@macalan.c3sl.ufpr.br>
	<51110063.7030603@uni-muenster.de>
Message-ID: <51127DED.5000905@jrc.ec.europa.eu>

Another possibility is the blockPredict function in the intamap-package 
(also based on gstat), which can do transGaussian kriging.
Fixing lambda = 0 is equal to lognormal kriging.
A new version with a couple of inconsistencies removed and a better 
example for lognormal kriging (1.3-18) has just been uploaded to CRAN, 
should be available within tomorrow.

Best wishes,
Jon


On 05-Feb-13 13:51, Edzer Pebesma wrote:
> Below is an example for the meuse data in sp, using gstat. I've added 
> this as a demo script, "lnsim.R", to gstat development tree:
>
> https://r-forge.r-project.org/scm/viewvc.php/pkg/demo/lnsim.R?view=markup&root=gstat 
>
>
>
>
> On 02/05/2013 12:41 PM, Paulo Justiniano Ribeiro Jr wrote:
>> Indeed geoR does not have it in an automated way.
>> (conditional) simulations can be obtained but then this
>> computations on blocks would be a sort of post-processing
>> along the lines Edzer describes.
>> I'm a bit unsure of the worth of implementing this step
>> for a sufficient flexiblke set of definitions of blocks and
>> shapes of the areas...
>>
>> On Tue, 5 Feb 2013, Edzer Pebesma wrote:
>>
>>> Javier,
>>>
>>> simulation is relatively easy: simulate point support fields on a fine
>>> grid, take the exponent of everything, compute the block mean of each
>>> simulation (e.g. using sp::aggregate), and take the statistics of the
>>> block means for each block. (There is just not yet a simple function
>>> doing this for you. Or does geoR have this?)
>>>
>>> if you want to avoid simulation, you might want to take a look at the
>>> constrainedKriging package:
>>>
>>> http://cran.r-project.org/web/packages/constrainedKriging/index.html
>>>
>>>
>>> On 02/05/2013 11:30 AM, Javier Elio wrote:
>>>> Dear all,
>>>>
>>>> I am trying to calculate the average value in a study area. I carried
>>>> out
>>> the sampling according to a grid, and the data are lognormal. I would
>>> like to do with block krige (ordinary krige), I do the block krige
>>> with logarithms but I don't know how to back-transforming.
>>>>
>>>> I read Cressie 2006, but I don't know how to do in gstat (or other
>>>> package,
>>> I aslo try constrainedKriging). I use krigeTg to back-transforming the
>>> predictions and for gaussian simulations, but as I know it can't be
>>> used for block krige.
>>>>
>>>> Please, can anyone help me?
>>>>
>>>> Best regards,
>>>>
>>>> Javier de El?o Medina
>>>> Universidad Polit?cnica de Madrid
>>>> Escuela de Ingenieros de Minas
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>
>>> -- 
>>> Edzer Pebesma
>>> Institute for Geoinformatics (ifgi), University of M?nster
>>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>>> 8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
>>> http://www.52north.org/geostatistics      e.pebesma at wwu.de
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> Paulo Justiniano Ribeiro Jr
>> LEG (Laboratorio de Estatistica e Geoinformacao)
>> Universidade Federal do Parana
>> Caixa Postal 19.081
>> CEP 81.531-990
>> Curitiba, PR  -  Brasil
>> Tel: (+55) 41 3361 3573
>> VOIP: (+55) (41) (3361 3600) 1053 1066
>> Fax: (+55) 41 3361 3141
>> e-mail: paulojus AT  ufpr  br
>> http://www.leg.ufpr.br/~paulojus
>>
>


-- 
Jon Olav Sk?ien
Joint Research Centre - European Commission
Institute for Environment and Sustainability (IES)
Land Resource Management Unit

Via Fermi 2749, TP 440,  I-21027 Ispra (VA), ITALY

Disclaimer: Views expressed in this email are those of the individual and do not necessarily represent official views of the European Commission.


From juantomas.sayago at gmail.com  Wed Feb  6 23:31:09 2013
From: juantomas.sayago at gmail.com (Juan Tomas Sayago Gomez)
Date: Wed, 6 Feb 2013 17:31:09 -0500
Subject: [R-sig-Geo] spatial regression for binary/dichotomous depend
	variable
In-Reply-To: <1360163386.32156.YahooMailNeo@web162102.mail.bf1.yahoo.com>
References: <CALDS4yCey_Ebn6YwVHVBRubdzT_gLxx_rDWSF1ksdTDz0YEsiw@mail.gmail.com>
	<1360163386.32156.YahooMailNeo@web162102.mail.bf1.yahoo.com>
Message-ID: <CAEOXpNBy6EH_=JOxct9UVZmXyAaqH_sDFpPEVJEUBqSY5QgJNA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130206/fffa3779/attachment.pl>

From finleya at msu.edu  Thu Feb  7 00:32:21 2013
From: finleya at msu.edu (Andrew Finley)
Date: Wed, 06 Feb 2013 18:32:21 -0500
Subject: [R-sig-Geo] spatial regression for binary/dichotomous depend
 variable
In-Reply-To: <CAEOXpNBy6EH_=JOxct9UVZmXyAaqH_sDFpPEVJEUBqSY5QgJNA@mail.gmail.com>
References: <CALDS4yCey_Ebn6YwVHVBRubdzT_gLxx_rDWSF1ksdTDz0YEsiw@mail.gmail.com>
	<1360163386.32156.YahooMailNeo@web162102.mail.bf1.yahoo.com>
	<CAEOXpNBy6EH_=JOxct9UVZmXyAaqH_sDFpPEVJEUBqSY5QgJNA@mail.gmail.com>
Message-ID: <20130206183221.15251cs6zm2kwt8l@mail.msu.edu>

Hi Tanja,
Also, check out the spGLM function in the spBayes package as well as  
functions in the geoRglm package.
-Andy

Quoting Juan Tomas Sayago Gomez <juantomas.sayago at gmail.com>:

> there is also in the package McSpatial the possibility to run
spatial logit
> and probit models. But you should check the literature in there.
> Juan
>
> On Wed, Feb 6, 2013 at 10:09 AM, Milan Sharma  
> <milansharma2012 at yahoo.com>wrote:
>
>> Looks like you want autologistic regression.
>> Just google "autologistic modelling in R" and you will get
archieves of
>> previous sessions.
>> Best,
>> Mitra Devkota
>>
>>
>> ________________________________
>> ? From: Tanja Zin?er <tanja.zinsser at googlemail.com>
>> To: r-sig-geo at r-project.org
>> Sent: Wednesday, February 6, 2013 5:53 AM
>> Subject: [R-sig-Geo] spatial regression for binary/dichotomous
depend
>> variable
>>
>> Hey everyone,
>>
>> I'm new in the field of spatial autocorrelation et spatial
regression. I'm
>> searching for a method to run a spatial regression with depend
>> binary/dichotomous variables.
>> Does anyone know, if there is a function in R to do so? I only
found the
>> morantest for lm regression. I wanted to a logit regression, and
use the
>> residuals for the morantest, but I'm not sure, if this will lead me
to the
>> right solution.
>>
>> Thanks for your help
>> Tanja
>>
>> ? ? ?[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> ? ? ? ? ?[[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>
>
> --
> Juan Tom?s Sayago G?mez
> Graduate Research Assistant
> West Virginia University - RRI
> 886 Chestnut Ridge Road, Room 520
> P.O. Box 6825
> Morgantown, WV 26506-6825
>
> ? ? ? ? [[alternative HTML version deleted]]
>
>


From Adrian.Baddeley at csiro.au  Thu Feb  7 04:37:15 2013
From: Adrian.Baddeley at csiro.au (Adrian.Baddeley at csiro.au)
Date: Thu, 7 Feb 2013 11:37:15 +0800
Subject: [R-sig-Geo] (no subject)
Message-ID: <57DC18C299094D4299F837570C5DF1C501318B10B1CD@EXWA-MBX01.nexus.csiro.au>

Mudrak, Erika [EEOBS] writes:

> Hello r-sig-geo,
> I have a question regarding envelopes for the pair correlation function in spatstat.

Questions about the spatstat package should be sent to the package authors. 

> The envelopes near r = 0 suddenly stretch to high values.   The envelopes also dip slightly at the maximum radius displayed. 
> Can someone tell me why this happens, and what I should do to avoid it?  Should I set xlim to be slightly above zero?

This is an artefact of the standard estimation algorithm, which gives a weight of 1/r to pairs of points at distance r.
It tends to happen when the point pattern is clustered. See help(pcf.ppp) for a description and literature references. 

Depending on what you want to do with the pair correlation, you can simply restrict the x limits using xlim (for plotting) or ginterval (for envelope-based tests like dclf.test)
or you could plot the log of the pair correlation e.g. plot(pcf(X), log(.) ~ r).

There exist other, non-standard estimation algorithms which will be added to spatstat sometime this year.

Adrian Baddeley
                                                    Prof Adrian Baddeley FAA
School of Earth & Environment                          |      CSIRO Mathematics, Informatics & Statistics
University of Western Australia                         |      Leeuwin Centre
35 Stirling Hwy, Crawley WA 6009, Australia    |      65 Brockway Rd, Floreat WA 6014, Australia
                                                        skype adrian.baddeley

From rsbhalla at gmail.com  Thu Feb  7 06:39:54 2013
From: rsbhalla at gmail.com (R.S. Bhalla)
Date: Thu, 07 Feb 2013 11:09:54 +0530
Subject: [R-sig-Geo] spGRASS6 issue
In-Reply-To: <51124AEC.8050307@gmail.com>
References: <51123C21.60408@gmail.com>
	<alpine.LRH.2.03.1302061253330.26728@reclus.nhh.no>
	<51124AEC.8050307@gmail.com>
Message-ID: <51133E2A.3070201@gmail.com>

Thanks Rodger,
That fixed it. I agree with Rainer, it is somewhat non-intuitive.
By the way, I've been using GRASS from within R to process dozens of 
images using loops, works like a charm and saved me hours if not days of 
repetitive work.
Thanks again and cheers,
Ravi
P.S. The corrected formula is:
execGRASS("r.neighbors", parameters=list(input=patmap, output=n11map, 
method="median", size=(11L)), flags=c("overwrite", "c"))


On 02/06/2013 05:52 PM, Rainer M Krug wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> On 06/02/13 12:55, Roger Bivand wrote:
>> On Wed, 6 Feb 2013, R.S. Bhalla wrote:
>>
>>> Dear List, I have run into trouble with the execGRASS command copied below and can't figure
>>> out what I'm doing wrong. It runs fine without the size=11 argument (takes the default value
>>> of 3). Can
>>> storage.mode(11)
>> [1] "double"
>>> is.integer(11)
>> [1] FALSE
>>> is.integer(11L)
>> [1] TRUE
>>
>> Just because it looks like an integer, it doesn't mean it is.
> Hi Roger
>
> this has bittan many users, including myself, as it is a little aux contraire to R, as here 11 is
> acepted as integer in most circumstances.
>
> Would it be possible to use a different check for integer e.g.
>
> if(as.integer(x) == x) then {x <- as.integer(x)} else {ERROR}
>
> I have the feeling that would be more in line with the treating in R of different numerical
> storage modes.
>
> Cheers,
>
> Rainer
>
>
>
>> Roger
>>
>>> someone please help. Thanks in advance, Ravi
>>>
>>> Command: execGRASS("r.neighbors", parameters=list(input=patmap, output=n11map,
>>> method="median", size=11), flags=c("overwrite", "c"))
>>>
>>> Error: Error in doGRASS(cmd, flags = flags, ..., parameters = parameters, echoCmd = echoCmd)
>>> : Parameter <size> does not have integer value
>>>
>>>
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.11 (GNU/Linux)
> Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/
>
> iQEcBAEBAgAGBQJREkrsAAoJENvXNx4PUvmC4YYIAPJnH4dmYQZTCJewHCGwW3zD
> szbWSeWB7Yye2DxP/7ADMQUL6buR7ZAAQWpQDjps1u6o82inoRUQ0JiUHeXGB/oW
> MHMiYFlcvK6+WU6/ZIhL8uKsyUeDscyDUfuLOeyuNpsLe1Y8RvinQWtmrwefhLVZ
> 4sjDrtSXJs0YBKRdHyhtmIkCUzXfra7VvbuOA5ehb76t0Re66Dvmzha1VvgBSa1Y
> oOP/zlzj+AqK/RrJX2Jlt2YrdU97wsb80MeHlkIX7h33qKriaqf9okcURPyMkIib
> pR+qED66Fjz916qnyn8RWiI8lRSg64uYyWbgGyx2OlsyRNxfvD7dvG45ZnuqrLQ=
> =X7qL
> -----END PGP SIGNATURE-----
>

-- 
R.S. Bhalla, Ph.D.
Sr.Research Fellow
Foundation for Ecological Research, Advocacy and Learning (FERAL)
Ph. +91 413 2671566
Fax. +91 413  2671567
Web: http://www.feralindia.org


From babuawara at gmail.com  Thu Feb  7 06:45:53 2013
From: babuawara at gmail.com (vikram ranga)
Date: Thu, 7 Feb 2013 11:15:53 +0530
Subject: [R-sig-Geo] Not able to write shp file
Message-ID: <CAL-ALVEuEi4yRrhx0Ck7M+UsarVBkk+AxhkwOM9X9yQO0n-F9Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130207/779947ad/attachment.pl>

From rsbhalla at gmail.com  Thu Feb  7 06:47:29 2013
From: rsbhalla at gmail.com (R.S. Bhalla)
Date: Thu, 07 Feb 2013 11:17:29 +0530
Subject: [R-sig-Geo] spGRASS6 issue
In-Reply-To: <57DC18C299094D4299F837570C5DF1C501318B10B1CD@EXWA-MBX01.nexus.csiro.au>
References: <57DC18C299094D4299F837570C5DF1C501318B10B1CD@EXWA-MBX01.nexus.csiro.au>
Message-ID: <51133FF1.2030809@gmail.com>

Thanks Roger,
That fixed it. I agree with Rainer, it is somewhat non-intuitive.
By the way, I've been using GRASS from within R to process dozens of 
images using loops, works like a charm and saved me hours if not days of 
repetitive work.
Thanks again and cheers,
Ravi
P.S. The corrected formula is:
execGRASS("r.neighbors", parameters=list(input=patmap, output=n11map, 
method="median", size=(11L)), flags=c("overwrite", "c"))


On 02/06/2013 05:52 PM, Rainer M Krug wrote:
>
> On 06/02/13 12:55, Roger Bivand wrote:
>> On Wed, 6 Feb 2013, R.S. Bhalla wrote:
>>
>>> Dear List, I have run into trouble with the execGRASS command copied 
>>> below and can't figure
>>> out what I'm doing wrong. It runs fine without the size=11 argument 
>>> (takes the default value
>>> of 3). Can
>>> storage.mode(11)
>> [1] "double"
>>> is.integer(11)
>> [1] FALSE
>>> is.integer(11L)
>> [1] TRUE
>>
>> Just because it looks like an integer, it doesn't mean it is.
> Hi Roger
>
> this has bittan many users, including myself, as it is a little aux 
> contraire to R, as here 11 is
> acepted as integer in most circumstances.
>
> Would it be possible to use a different check for integer e.g.
>
> if(as.integer(x) == x) then {x <- as.integer(x)} else {ERROR}
>
> I have the feeling that would be more in line with the treating in R 
> of different numerical
> storage modes.
>
> Cheers,
>
> Rainer
>
>
>
>> Roger
>>
>>> someone please help. Thanks in advance, Ravi
>>>
>>> Command: execGRASS("r.neighbors", parameters=list(input=patmap, 
>>> output=n11map,
>>> method="median", size=11), flags=c("overwrite", "c"))
>>>
>>> Error: Error in doGRASS(cmd, flags = flags, ..., parameters = 
>>> parameters, echoCmd = echoCmd)
>>> : Parameter <size> does not have integer value
>>>
-- 
R.S. Bhalla, Ph.D.
Sr.Research Fellow
Foundation for Ecological Research, Advocacy and Learning (FERAL)
Ph. +91 413 2671566
Fax. +91 413  2671567
Web: http://www.feralindia.org


From jwesroberts at gmail.com  Thu Feb  7 08:34:22 2013
From: jwesroberts at gmail.com (Wesley Roberts)
Date: Thu, 7 Feb 2013 09:34:22 +0200
Subject: [R-sig-Geo] converting 0 to NAN in SpatialGridDataFrame
In-Reply-To: <CAFik=Fe2RaA=be_738Bq72Gf2uYxp8L9UoXzEpOuouJJaYu7yQ@mail.gmail.com>
References: <CAFik=FfegasQvwYUKFeggbRm9iR4h7tvb1hujk1q-HJqQ6ULhg@mail.gmail.com>
	<CALjAYt4BBrXxKoQ8t0n+Dm7ruy72w+h2YKqzK7D+k6LL0Kd9xA@mail.gmail.com>
	<CAFik=FeR+G5ddg_jcTfcubm0J7wKWKufpLsSO9kHe7u5tjg=hQ@mail.gmail.com>
	<CALjAYt50KAEZjrDTpX5iL7Uk2K+1+Vmp8WRsz0T3ed3dM1u2iQ@mail.gmail.com>
	<CAFik=Fe2RaA=be_738Bq72Gf2uYxp8L9UoXzEpOuouJJaYu7yQ@mail.gmail.com>
Message-ID: <CAFik=Fe_D8nwbr1YNHBshjrJe3moZirRrsh8DuydzR3Hn0V2tA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130207/e51d4cee/attachment.pl>

From salinir at tiscali.it  Thu Feb  7 09:22:42 2013
From: salinir at tiscali.it (Romolo Salini)
Date: Thu, 7 Feb 2013 09:22:42 +0100
Subject: [R-sig-Geo] R crashes when looping with function writeRaster
Message-ID: <CAOWj_3r+UdBiXii7XWp2oQBJDZUFuS820RQ=wen5YZfykWukWA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130207/3b92e14f/attachment.pl>

From r.m.krug at gmail.com  Thu Feb  7 10:09:17 2013
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Thu, 07 Feb 2013 10:09:17 +0100
Subject: [R-sig-Geo] spGRASS6 issue
In-Reply-To: <51124AEC.8050307@gmail.com>
References: <51123C21.60408@gmail.com>
	<alpine.LRH.2.03.1302061253330.26728@reclus.nhh.no>
	<51124AEC.8050307@gmail.com>
Message-ID: <51136F3D.5010908@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 06/02/13 13:22, Rainer M Krug wrote:
> On 06/02/13 12:55, Roger Bivand wrote:
>> On Wed, 6 Feb 2013, R.S. Bhalla wrote:
> 
>>> Dear List, I have run into trouble with the execGRASS command copied below and can't
>>> figure out what I'm doing wrong. It runs fine without the size=11 argument (takes the
>>> default value of 3). Can
> 
>>> storage.mode(11)
>> [1] "double"
>>> is.integer(11)
>> [1] FALSE
>>> is.integer(11L)
>> [1] TRUE
> 
>> Just because it looks like an integer, it doesn't mean it is.
> 
> Hi Roger
> 
> this has bittan many users, including myself, as it is a little aux contraire to R, as here 11
> is acepted as integer in most circumstances.
> 
> Would it be possible to use a different check for integer e.g.
> 
> if(as.integer(x) == x) then {x <- as.integer(x)} else {ERROR}
> 
> I have the feeling that would be more in line with the treating in R of different numerical 
> storage modes.

Hi Roger,

To follow up:

in the function doGRASS, I would suggest to change:



 else if (pmv[i] == "integer") {
                  if (!is.integer(parameters[[i]]))
                    stop(paste("Parameter <", names(parameters)[i],
                      "> does not have integer value", sep = ""))
                }


to

 else if (pmv[i] == "integer") {
                  if (!(as.integer(parameters[[i]]==parameters[[i]])) {
                    stop(paste("Parameter <", names(parameters)[i],
                      "> does not have integer value", sep = ""))
                  } else {
                    parameters[[i]] <- as.integer(parameters[[i]]
                  }
                }

which will cause the error message when a not integer *value* has been submitted, irrespective of
the storage mode. If it is an integer value, the parameter[[i]] wil be stored as an integer.

A side effect would be that even "11" would be accepted, which is actually quite nice.

In addition, One could even add the same construct to the float test:

else if (pmv[i] == "float") {
                  if (!(as.numeric(parameters[[i]]==parameters[[i]])) {
                    stop(paste("Parameter <", names(parameters)[i],
                      "> does not have numeric value", sep = ""))
                  } else {
                    parameters[[i]] <- as.numeric(parameters[[i]]
                  }
                }


I also would suggest to change the error message for float from "not have a float value" to "does
not have a numeric value" as this is more consistent, as this would be more consistent with R
terminology.

Cheers,

Rainer


> 
> Cheers,
> 
> Rainer
> 
> 
> 
> 
>> Roger
> 
>>> someone please help. Thanks in advance, Ravi
>>> 
>>> Command: execGRASS("r.neighbors", parameters=list(input=patmap, output=n11map, 
>>> method="median", size=11), flags=c("overwrite", "c"))
>>> 
>>> Error: Error in doGRASS(cmd, flags = flags, ..., parameters = parameters, echoCmd =
>>> echoCmd) : Parameter <size> does not have integer value
>>> 
>>> 
> 
> 
> 

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/

iQEcBAEBAgAGBQJRE289AAoJENvXNx4PUvmC0kIIAIdCli9LydwiFyHCswPK8GZs
ravj05hOEQIQs6PgKAAJuF8F/ON16IlFiZ4sgTF9vHuRNTNiJOKCb4ajqwUSOGXb
n24k6sYFkR8v8aPZxVYtUSHB+LNaMTN1+skVvPJQwMp4+g5yguu2XIC8J1OsWX4b
fAqPuzOASyFci4J8G0yiqdtKy2FGSHzPP3hZrKwbaTXlgjjTxDswZv9Y8lykMWT8
tIYqX1qvFBoznFD/meiuYKFX/nv1ZwRRXNm+sa3lhDqPwjhv3zba7p603pzaLYfS
p4XmKx5/rI70PjJtqqfgeSgSw6CQAU5wDuOUhvQEW9uAiHPUuY7ryRAyjzOBFCs=
=rQ6u
-----END PGP SIGNATURE-----


From michela.giusti at isprambiente.it  Thu Feb  7 10:29:30 2013
From: michela.giusti at isprambiente.it (Michela Giusti)
Date: Thu, 07 Feb 2013 10:29:30 +0100
Subject: [R-sig-Geo] MADIFA results
Message-ID: <511373FA.8070503@isprambiente.it>

Dear list,

  I did an ENFA analysis and then I used MADIFA to produce an habitat 
suitability map.

I attached the legends results as jpg (sorry for low resolution).

Can you help me in explaining the unit of mesaure obtained from the 
analysis? percentage of what? and distance (m, Km,...)?

  Any help would be appreciated....

Thank you very much.

michela

-- 
*****************************************************************
Dr. Michela Giusti
ISPRA
Istituto Superiore per la Protezione e la Ricerca Ambientale
Via Brancati, 60
00144 Roma
Tel. +390650074746
michela.giusti at isprambiente.it
*****************************************************************

-------------- next part --------------
A non-text attachment was scrubbed...
Name: madifa_res_legend.jpg
Type: image/jpeg
Size: 30214 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130207/7f4b1065/attachment.jpg>

From Roger.Bivand at nhh.no  Thu Feb  7 11:48:17 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 7 Feb 2013 11:48:17 +0100
Subject: [R-sig-Geo] spGRASS6 issue
In-Reply-To: <51136F3D.5010908@gmail.com>
References: <51123C21.60408@gmail.com>
	<alpine.LRH.2.03.1302061253330.26728@reclus.nhh.no>
	<51124AEC.8050307@gmail.com> <51136F3D.5010908@gmail.com>
Message-ID: <alpine.LRH.2.03.1302071147340.32452@reclus.nhh.no>

On Thu, 7 Feb 2013, Rainer M Krug wrote:

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> On 06/02/13 13:22, Rainer M Krug wrote:
>> On 06/02/13 12:55, Roger Bivand wrote:
>>> On Wed, 6 Feb 2013, R.S. Bhalla wrote:
>>
>>>> Dear List, I have run into trouble with the execGRASS command copied below and can't
>>>> figure out what I'm doing wrong. It runs fine without the size=11 argument (takes the
>>>> default value of 3). Can
>>
>>>> storage.mode(11)
>>> [1] "double"
>>>> is.integer(11)
>>> [1] FALSE
>>>> is.integer(11L)
>>> [1] TRUE
>>
>>> Just because it looks like an integer, it doesn't mean it is.
>>
>> Hi Roger
>>
>> this has bittan many users, including myself, as it is a little aux contraire to R, as here 11
>> is acepted as integer in most circumstances.
>>
>> Would it be possible to use a different check for integer e.g.
>>
>> if(as.integer(x) == x) then {x <- as.integer(x)} else {ERROR}
>>
>> I have the feeling that would be more in line with the treating in R of different numerical
>> storage modes.
>
> Hi Roger,
>
> To follow up:
>
> in the function doGRASS, I would suggest to change:
>
>
>
> else if (pmv[i] == "integer") {
>                  if (!is.integer(parameters[[i]]))
>                    stop(paste("Parameter <", names(parameters)[i],
>                      "> does not have integer value", sep = ""))
>                }
>
>
> to
>
> else if (pmv[i] == "integer") {
>                  if (!(as.integer(parameters[[i]]==parameters[[i]])) {
>                    stop(paste("Parameter <", names(parameters)[i],
>                      "> does not have integer value", sep = ""))
>                  } else {
>                    parameters[[i]] <- as.integer(parameters[[i]]
>                  }
>                }
>
> which will cause the error message when a not integer *value* has been submitted, irrespective of
> the storage mode. If it is an integer value, the parameter[[i]] wil be stored as an integer.
>
> A side effect would be that even "11" would be accepted, which is actually quite nice.


I've commited some changes to the spgrass6 module of the rspatial project
on R-forge (revision 1349), but not the conversion of strings to integer
or numeric, which I think must be the users' responsibility, as failure is
not an error but an NA. Please let me know if this helps. Maybe the
statgrass list is a better forum?

Roger


>
> In addition, One could even add the same construct to the float test:
>
> else if (pmv[i] == "float") {
>                  if (!(as.numeric(parameters[[i]]==parameters[[i]])) {
>                    stop(paste("Parameter <", names(parameters)[i],
>                      "> does not have numeric value", sep = ""))
>                  } else {
>                    parameters[[i]] <- as.numeric(parameters[[i]]
>                  }
>                }
>
>
> I also would suggest to change the error message for float from "not have a float value" to "does
> not have a numeric value" as this is more consistent, as this would be more consistent with R
> terminology.
>
> Cheers,
>
> Rainer
>
>
>>
>> Cheers,
>>
>> Rainer
>>
>>
>>
>>
>>> Roger
>>
>>>> someone please help. Thanks in advance, Ravi
>>>>
>>>> Command: execGRASS("r.neighbors", parameters=list(input=patmap, output=n11map,
>>>> method="median", size=11), flags=c("overwrite", "c"))
>>>>
>>>> Error: Error in doGRASS(cmd, flags = flags, ..., parameters = parameters, echoCmd =
>>>> echoCmd) : Parameter <size> does not have integer value
>>>>
>>>>
>>
>>
>>
>
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.11 (GNU/Linux)
> Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/
>
> iQEcBAEBAgAGBQJRE289AAoJENvXNx4PUvmC0kIIAIdCli9LydwiFyHCswPK8GZs
> ravj05hOEQIQs6PgKAAJuF8F/ON16IlFiZ4sgTF9vHuRNTNiJOKCb4ajqwUSOGXb
> n24k6sYFkR8v8aPZxVYtUSHB+LNaMTN1+skVvPJQwMp4+g5yguu2XIC8J1OsWX4b
> fAqPuzOASyFci4J8G0yiqdtKy2FGSHzPP3hZrKwbaTXlgjjTxDswZv9Y8lykMWT8
> tIYqX1qvFBoznFD/meiuYKFX/nv1ZwRRXNm+sa3lhDqPwjhv3zba7p603pzaLYfS
> p4XmKx5/rI70PjJtqqfgeSgSw6CQAU5wDuOUhvQEW9uAiHPUuY7ryRAyjzOBFCs=
> =rQ6u
> -----END PGP SIGNATURE-----
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From kanwalnayan at gmail.com  Thu Feb  7 11:48:09 2013
From: kanwalnayan at gmail.com (Kanwal Nayan)
Date: Thu, 7 Feb 2013 16:18:09 +0530
Subject: [R-sig-Geo] i want to extract a zip file using r
Message-ID: <CAJftVECiZbMAfkbuWRg6-+djHSfO3NQyXbn69bvwntde5H5NYA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130207/fa0e45e3/attachment.pl>

From r.m.krug at gmail.com  Thu Feb  7 12:12:27 2013
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Thu, 07 Feb 2013 12:12:27 +0100
Subject: [R-sig-Geo] integer parameter treatment in doGRASS - WAS: spGRASS6
	issue
In-Reply-To: <alpine.LRH.2.03.1302071147340.32452@reclus.nhh.no>
References: <51123C21.60408@gmail.com>
	<alpine.LRH.2.03.1302061253330.26728@reclus.nhh.no>
	<51124AEC.8050307@gmail.com> <51136F3D.5010908@gmail.com>
	<alpine.LRH.2.03.1302071147340.32452@reclus.nhh.no>
Message-ID: <51138C1B.9000204@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 07/02/13 11:48, Roger Bivand wrote:
> On Thu, 7 Feb 2013, Rainer M Krug wrote:
> 
> On 06/02/13 13:22, Rainer M Krug wrote:
>>>> On 06/02/13 12:55, Roger Bivand wrote:
>>>>> On Wed, 6 Feb 2013, R.S. Bhalla wrote:
>>>> 
>>>>>> Dear List, I have run into trouble with the execGRASS command copied below and can't 
>>>>>> figure out what I'm doing wrong. It runs fine without the size=11 argument (takes
>>>>>> the default value of 3). Can
>>>> 
>>>>>> storage.mode(11)
>>>>> [1] "double"
>>>>>> is.integer(11)
>>>>> [1] FALSE
>>>>>> is.integer(11L)
>>>>> [1] TRUE
>>>> 
>>>>> Just because it looks like an integer, it doesn't mean it is.
>>>> 
>>>> Hi Roger
>>>> 
>>>> this has bittan many users, including myself, as it is a little aux contraire to R, as
>>>> here 11 is acepted as integer in most circumstances.
>>>> 
>>>> Would it be possible to use a different check for integer e.g.
>>>> 
>>>> if(as.integer(x) == x) then {x <- as.integer(x)} else {ERROR}
>>>> 
>>>> I have the feeling that would be more in line with the treating in R of different
>>>> numerical storage modes.
> 
> Hi Roger,
> 
> To follow up:
> 
> in the function doGRASS, I would suggest to change:
> 
> 
> 
> else if (pmv[i] == "integer") { if (!is.integer(parameters[[i]])) stop(paste("Parameter <",
> names(parameters)[i], "> does not have integer value", sep = "")) }
> 
> 
> to
> 
> else if (pmv[i] == "integer") { if (!(as.integer(parameters[[i]]==parameters[[i]])) { 
> stop(paste("Parameter <", names(parameters)[i], "> does not have integer value", sep = "")) }
> else { parameters[[i]] <- as.integer(parameters[[i]] } }
> 
> which will cause the error message when a not integer *value* has been submitted, irrespective
> of the storage mode. If it is an integer value, the parameter[[i]] wil be stored as an
> integer.
> 
> A side effect would be that even "11" would be accepted, which is actually quite nice.
> 
> 
>> I've commited some changes to the spgrass6 module of the rspatial project on R-forge
>> (revision 1349), but not the conversion of strings to integer or numeric, which I think must
>> be the users' responsibility, as failure is not an error but an NA. Please let me know if
>> this helps. Maybe the statgrass list is a better forum?
> 
>> Roger

Hi Roger

looks fine with me. Conversion from character to numeric is not necessary: agreed.

I cc this to statsgrass for the record and possibly further comments

Thanks,

Rainer



> 
> 
> 
> In addition, One could even add the same construct to the float test:
> 
> else if (pmv[i] == "float") { if (!(as.numeric(parameters[[i]]==parameters[[i]])) { 
> stop(paste("Parameter <", names(parameters)[i], "> does not have numeric value", sep = "")) }
> else { parameters[[i]] <- as.numeric(parameters[[i]] } }
> 
> 
> I also would suggest to change the error message for float from "not have a float value" to
> "does not have a numeric value" as this is more consistent, as this would be more consistent
> with R terminology.
> 
> Cheers,
> 
> Rainer
> 
> 
>>>> 
>>>> Cheers,
>>>> 
>>>> Rainer
>>>> 
>>>> 
>>>> 
>>>> 
>>>>> Roger
>>>> 
>>>>>> someone please help. Thanks in advance, Ravi
>>>>>> 
>>>>>> Command: execGRASS("r.neighbors", parameters=list(input=patmap, output=n11map, 
>>>>>> method="median", size=11), flags=c("overwrite", "c"))
>>>>>> 
>>>>>> Error: Error in doGRASS(cmd, flags = flags, ..., parameters = parameters, echoCmd = 
>>>>>> echoCmd) : Parameter <size> does not have integer value
>>>>>> 
>>>>>> 
>>>> 
>>>> 
>>>> 
> 
>> 
> 

- -- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys.
(Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/

iQEcBAEBAgAGBQJRE4wbAAoJENvXNx4PUvmCMAQIAKGMTPl8DW9nb3qEtCbZQ5+m
INGt1OKoU9hL5+uXJ0zMndU4uqqg0iG1pKe84O39rsUGrPoL8aAybarmHs0H0PGn
sotxnsUpJbc0SxAp4d6c8+kZf3AkV68yh0TKZDkNKUhxSjXskmBNDxQzXoRRryha
S8d4fifPYtkWTYoNjl4p3AlosurFdg+xVyPLZNTV9/V1P+8mPl6KPLc7RHM4fxfk
xFjYNuz3H5iL4I/dO7K/7FBRYOJDINKuIOrzCYf4ZMO6VO2K6fCEGGa2Ks3G+YsA
3Id8+jKy9Ac+ryGIOTf/HRYR/zfWU0H4LlcBnw2at0HuL+MNrDW7PJwDufhW0hY=
=r8+p
-----END PGP SIGNATURE-----


From saimabashir11 at yahoo.com  Thu Feb  7 12:37:07 2013
From: saimabashir11 at yahoo.com (Saima Bashir)
Date: Thu, 7 Feb 2013 03:37:07 -0800 (PST)
Subject: [R-sig-Geo] (no subject)
Message-ID: <1360237027.1241.YahooMailNeo@web125001.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130207/a8c387fc/attachment.pl>

From milansharma2012 at yahoo.com  Thu Feb  7 17:32:37 2013
From: milansharma2012 at yahoo.com (Milan Sharma)
Date: Thu, 7 Feb 2013 08:32:37 -0800 (PST)
Subject: [R-sig-Geo] Simulation of spatial data
Message-ID: <1360254757.34849.YahooMailNeo@web162104.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130207/29bc1b0a/attachment.pl>

From lisasolomon at alum.mit.edu  Thu Feb  7 22:02:39 2013
From: lisasolomon at alum.mit.edu (Lisa Solomon)
Date: Thu, 7 Feb 2013 16:02:39 -0500
Subject: [R-sig-Geo] New Webinar Series: The Evolution of Regression From
 Classical Linear Regression to Modern Ensembles
Message-ID: <1704612354.832.1360270959937.JavaMail.help@alum.mit.edu>

The Evolution of Regression: An Upcoming Webinar Series
(Hands-on Component)

Registration: 
http://bit.ly/salford-systems-regression-webinar-series

Regression is one of the most popular modeling methods, but the classical approach has significant problems. This webinar series addresses these problems. Are you working with larger datasets? Is your data challenging? Does your data include missing values, nonlinear relationships, local patterns and interactions? This webinar series is for you! We will cover improvements to conventional and logistic regression, and will include a discussion of classical, regularized, and nonlinear regression, as well as modern ensemble and data mining approaches. This series will be of value to any classically trained statistician or modeler.

Overcoming Linear Regression Limitations

Part 1: March 1 - Regression methods discussed
?	Classical Regression
?	Logistic Regression
?	Regularized Regression: GPS Generalized Path Seeker
?	Nonlinear Regression: MARS Regression Splines

Part 2: March 15 - Hands-on demonstration of concepts discussed in Part 1
?	Step-by-step demonstration
?	Datasets and software available for download
?	Instructions for reproducing demo at your leisure
?	For the dedicated student: apply these methods to your own data (optional)

Part 3: March 29 - Regression methods discussed
*Part 1 is a recommended pre-requisite
?	Nonlinear Ensemble Approaches: TreeNet Gradient Boosting; Random Forests; Gradient Boosting incorporating RF
?	Ensemble Post-Processing: ISLE; RuleLearner

Part 4: April 12 - Hands-on demonstration of concepts discussed in Part 3
?	Step-by-step demonstration
?	Datasets and software available for download
?	Instructions for reproducing demo at your leisure
?	For the dedicated student: apply these methods to your own data (optional)

From saito.hiroshi at lab.ntt.co.jp  Fri Feb  8 01:48:55 2013
From: saito.hiroshi at lab.ntt.co.jp (Hiroshi Saito)
Date: Fri, 08 Feb 2013 09:48:55 +0900
Subject: [R-sig-Geo] spatstat kstest
Message-ID: <20130208094855.40CD.18BBA78F@lab.ntt.co.jp>

Dear sir,

I am analyzing a spatial point data set.
I would like to test how fit the model fitted by ppm is.
For this objective, I used kstest.
Unfortunately, however, I am not sure that the test actually tests the
fit of the model for the data set on the two dimensional space.
For example, if I set the covariate = x, it means (in my understanding)
that the projection of the data set to the x-axis is tested.
Is it possible to test the fit by appropriately setting the covariate?

Please give me some pieces of advice how I test the fit.
I need to test the method for the model including inhomogeneous Poisson
model.
If there is no appropriate method, I would like to develop.

Regards,
Hiroshi Saito

*************************
Hiroshi Saito:
E-MAIL: saito.hiroshi at lab.ntt.co.jp
http://www9.plala.or.jp/hslab/
PHONE: +81 422 59 4300
FAX: +81 422 59 6364


From r.turner at auckland.ac.nz  Fri Feb  8 01:51:55 2013
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Fri, 08 Feb 2013 13:51:55 +1300
Subject: [R-sig-Geo] spatstat kstest
In-Reply-To: <20130208094855.40CD.18BBA78F@lab.ntt.co.jp>
References: <20130208094855.40CD.18BBA78F@lab.ntt.co.jp>
Message-ID: <51144C2B.4020905@auckland.ac.nz>


Can you please give a *reproducible* example (including code and data,
possibly provided using dput()) illustrating just exactly what is the 
problem
that you are trying to solve?

     cheers,

         Rolf Turner

On 02/08/2013 01:48 PM, Hiroshi Saito wrote:
> Dear sir,
>
> I am analyzing a spatial point data set.
> I would like to test how fit the model fitted by ppm is.
> For this objective, I used kstest.
> Unfortunately, however, I am not sure that the test actually tests the
> fit of the model for the data set on the two dimensional space.
> For example, if I set the covariate = x, it means (in my understanding)
> that the projection of the data set to the x-axis is tested.
> Is it possible to test the fit by appropriately setting the covariate?
>
> Please give me some pieces of advice how I test the fit.
> I need to test the method for the model including inhomogeneous Poisson
> model.
> If there is no appropriate method, I would like to develop.


From saito.hiroshi at lab.ntt.co.jp  Fri Feb  8 04:00:13 2013
From: saito.hiroshi at lab.ntt.co.jp (Hiroshi Saito)
Date: Fri, 08 Feb 2013 12:00:13 +0900
Subject: [R-sig-Geo] spatstat kstest
In-Reply-To: <51144C2B.4020905@auckland.ac.nz>
References: <20130208094855.40CD.18BBA78F@lab.ntt.co.jp>
	<51144C2B.4020905@auckland.ac.nz>
Message-ID: <20130208120013.F1F6.18BBA78F@lab.ntt.co.jp>

Dear Rolf,

Unfortunately, the data I have is under nondisclosure agreement.
Therefore, I hesitate to offer.

Let X={(x1,y1),(x2,y2),..} be the data set, and X_x={x1,x2,...} be its
projection to the x-axis.
Try, for example, 
fit <- ppm(X, ~x+y+I(x^2)+I(y^2), Poisson())
(that is, the inhomogeneous Poisson process with the intensity
\lambda(x,y)=exp(a+bx+cy+dx^2+ey^2))
and test
kstest(fit, covariate="x")

In my understanding, this is the KS-test whether X_x and the
inhomogeneous Poisson process with the intensity \lambda(x)=\int
\lambda(x,y)dy.
Am I wrong ?

What I would like to say is that kstest is not a function of the test of
the agreement between the model defined over (x,y) and the data set on
the plane, but the function of the test of the agreement between the
projected model and the projected model on a one-dimensional space.
Am I wrong?

Even so, you may have a good way to use kstest to test the two
dimensional data by, for example, appropriately setting the covariate in
kstest.
If so, please give me some pieces of advice.

Regards,
Hiroshi Saito

On Fri, 08 Feb 2013 13:51:55 +1300
Rolf Turner <r.turner at auckland.ac.nz> wrote:

> 
> Can you please give a *reproducible* example (including code and data,
> possibly provided using dput()) illustrating just exactly what is the 
> problem
> that you are trying to solve?
> 
>      cheers,
> 
>          Rolf Turner
> 
> On 02/08/2013 01:48 PM, Hiroshi Saito wrote:
> > Dear sir,
> >
> > I am analyzing a spatial point data set.
> > I would like to test how fit the model fitted by ppm is.
> > For this objective, I used kstest.
> > Unfortunately, however, I am not sure that the test actually tests the
> > fit of the model for the data set on the two dimensional space.
> > For example, if I set the covariate = x, it means (in my understanding)
> > that the projection of the data set to the x-axis is tested.
> > Is it possible to test the fit by appropriately setting the covariate?
> >
> > Please give me some pieces of advice how I test the fit.
> > I need to test the method for the model including inhomogeneous Poisson
> > model.
> > If there is no appropriate method, I would like to develop.

*************************
Hiroshi Saito:
E-MAIL: saito.hiroshi at lab.ntt.co.jp
http://www9.plala.or.jp/hslab/
PHONE: +81 422 59 4300
FAX: +81 422 59 6364


From yamamotogu at gmail.com  Fri Feb  8 04:43:53 2013
From: yamamotogu at gmail.com (xin xin)
Date: Thu, 7 Feb 2013 22:43:53 -0500
Subject: [R-sig-Geo] seek for help with spatial panel data in seemly
 unrelated regression with possible endogenous explanatory variables
Message-ID: <CACKkqQd=W3rDnjbLRAWmbn4v5M-ODQjisDqkL_4bcgaK_gMvMg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130207/0d9f3e4a/attachment.pl>

From Roger.Bivand at nhh.no  Fri Feb  8 09:09:39 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 8 Feb 2013 09:09:39 +0100
Subject: [R-sig-Geo] New Webinar Series: The Evolution of Regression
 From Classical Linear Regression to Modern Ensembles
In-Reply-To: <1704612354.832.1360270959937.JavaMail.help@alum.mit.edu>
References: <1704612354.832.1360270959937.JavaMail.help@alum.mit.edu>
Message-ID: <alpine.LRH.2.03.1302080904560.9549@reclus.nhh.no>

The poster of this message has been unsubscribed administratively. It is 
not permitted to send general course information on this list. It is 
possible for those running spatial and spatiotemporal courses to provide 
URLs to forthcoming courses that should be of interest to subscribers; if 
in doubt about relevance, ask the list admin: 
r-sig-geo-owner at r-project.org.

Roger Bivand

On Thu, 7 Feb 2013, Lisa Solomon wrote:

> The Evolution of Regression: An Upcoming Webinar Series
> (Hands-on Component)
>
> Registration:
> http://bit.ly/salford-systems-regression-webinar-series
>
> Regression is one of the most popular modeling methods, but the classical approach has significant problems. This webinar series addresses these problems. Are you working with larger datasets? Is your data challenging? Does your data include missing values, nonlinear relationships, local patterns and interactions? This webinar series is for you! We will cover improvements to conventional and logistic regression, and will include a discussion of classical, regularized, and nonlinear regression, as well as modern ensemble and data mining approaches. This series will be of value to any classically trained statistician or modeler.
>
> Overcoming Linear Regression Limitations
>
> Part 1: March 1 - Regression methods discussed
> ?	Classical Regression
> ?	Logistic Regression
> ?	Regularized Regression: GPS Generalized Path Seeker
> ?	Nonlinear Regression: MARS Regression Splines
>
> Part 2: March 15 - Hands-on demonstration of concepts discussed in Part 1
> ?	Step-by-step demonstration
> ?	Datasets and software available for download
> ?	Instructions for reproducing demo at your leisure
> ?	For the dedicated student: apply these methods to your own data (optional)
>
> Part 3: March 29 - Regression methods discussed
> *Part 1 is a recommended pre-requisite
> ?	Nonlinear Ensemble Approaches: TreeNet Gradient Boosting; Random Forests; Gradient Boosting incorporating RF
> ?	Ensemble Post-Processing: ISLE; RuleLearner
>
> Part 4: April 12 - Hands-on demonstration of concepts discussed in Part 3
> ?	Step-by-step demonstration
> ?	Datasets and software available for download
> ?	Instructions for reproducing demo at your leisure
> ?	For the dedicated student: apply these methods to your own data (optional)
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From edzer.pebesma at uni-muenster.de  Fri Feb  8 12:04:09 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 08 Feb 2013 12:04:09 +0100
Subject: [R-sig-Geo] JSS call for papers: Special issue on Spatial
 Statistics, deadline Jun 1 2013
Message-ID: <5114DBA9.9050705@uni-muenster.de>

The Journal of Statistical Software (JSS) now reached an impact factor 
of over 4., and recently ended highest in the category "statistics and 
probability" on the ISI web of knowledge ranking [1].

Special issues of JSS are very popular and get a lot of citations [2]. 
We now invite papers for a special issue of the Journal of Statistical 
Software on "Spatial Statistics". The conditions are the regular ones of 
JSS submissions [3], but the paper should in addition focus on (some 
area of) spatial statistics, e.g.

- geostatistics
- lattice data
- point pattern analysis
- Gaussian Markov random fields in spatial statistics
- spatio-temporal statistics

Authors who intend to submit an article for this special issue are 
strongly encouraged to submit paper title, authors, and a preliminary 
abstract to edzer.pebesma at uni-muenster.de before Mar 1, 2013.

Guest editors for this special issue are:
   Edzer Pebesma
   Paulo Justiniano Ribeiro Jr
   Roger Bivand

Deadline for papers is Jun 1, 2013.

[1] 
http://lists.stat.ucla.edu/pipermail/jss-announce/attachments/20130117/6619cdec/attachment-0001.png
[2] 
http://lists.stat.ucla.edu/pipermail/jss-announce/2013-January/000379.html
[3] http://www.jstatsoft.org/

With best regards,
-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From tanja.zinsser at googlemail.com  Fri Feb  8 12:15:00 2013
From: tanja.zinsser at googlemail.com (=?ISO-8859-1?Q?Tanja_Zin=DFer?=)
Date: Fri, 8 Feb 2013 12:15:00 +0100
Subject: [R-sig-Geo] See in the table,
	which observation belongs to which class in the histogramm
Message-ID: <CALDS4yDsH2_=fTH6pYOb1qowNLSuN+Ue1jAqU0qUYa8U8YjBrA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130208/a21224d4/attachment.pl>

From edzer.pebesma at uni-muenster.de  Fri Feb  8 12:29:17 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 08 Feb 2013 12:29:17 +0100
Subject: [R-sig-Geo] "software for spatio-temporal statistics" session on
 Spatial Statistics 2013, title deadl Feb 13.
Message-ID: <5114E18D.3060000@uni-muenster.de>

Dear all,

The Spatial Statistics Conference 2013 [1], held Jun 4-7 in Columbus, 
Ohio, calls for session proposals [2]. Sessions can have several forms, 
ranging from 3  20-minute papers to 12 5-minute short presentations.

I would like to organize a session during this conference on "software 
for spatio-temporal statistics", emphasizing on:

- how we handle spatio-temporal data in data bases, how we exchange them 
with R or other analytical software systems
- how we analyse spatio-temporal data in practice: visualisation options 
or requirements, models, model features that need visualisation, 
interaction possibilities and challenges
- how different spatio-temporal data types can be combined, and how 
their dependence is analysed, e.g. addressing geostatistical, point 
pattern, lattice, and trajectory data types.

I can see many other topics fit in as well.

To propose such a session, I need to list authors and titles of 
contributions that will be held in this session, i.e. author who commit 
to contributing. I need to receive your contribution (list of authors, 
title, form & duration of presentation) before Wednesday, Feb 13, 23:59 UTC.

For those who have in mind to combine this with writing a full paper, 
please consider the call for papers for a Journal of Statistical 
Software special issue on Spatial Statistics [3].

[1] http://www.spatialstatisticsconference.com/
[2] http://www.spatialstatisticsconference.com/conference-sessions.html
[3] https://stat.ethz.ch/pipermail/r-sig-geo/2013-February/017419.html
-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From whittierj at missouri.edu  Fri Feb  8 17:35:32 2013
From: whittierj at missouri.edu (Whittier, Joanna B.)
Date: Fri, 8 Feb 2013 16:35:32 +0000
Subject: [R-sig-Geo] error in calculating mean of a raster brick
Message-ID: <9EE48301F6C10843B2A9CD99CDB7B49E0F96CA@UM-MBX-N03.um.umsystem.edu>

When calculating mean from a subset of layers within a raster brick, I get a single layer with one value for all cells.  If I do not try to take the mean of a subset of data, then I get the correct values.  The output dimensions are correct in both cases.  The original data is a netcdf file for the years 2001 -2100.  I need the mean for years 2046 - 2100. From looking at the examples in the raster package documentation, I think I coded correctly to calculate the mean across years, but apparently I am wrong.  Can anyone tell me how to code this correctly?

Thank you,
JW

This is the coding and output when I try to calculate the mean for 2046 - 2100.
> mean_ttl_precip_flux=NULL
> mean_ttl_precip_flux<-mean(ncr1,541:1200)
> mean_ttl_precip_flux
class       : RasterLayer
dimensions  : 48, 96, 4608  (nrow, ncol, ncell)
resolution  : 3.75, 3.708898  (x, y)
extent      : -1.875, 358.125, -89.01354, 89.01354  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
data source : in memory
names       : layer
values      : 308.8871, 308.8872  (min, max)

This is the coding and output if I do not try to specify particular years.
> mean_ttl_precip_flux=NULL
> mean_ttl_precip_flux<-mean(ncr1)
> mean_ttl_precip_flux
class       : RasterLayer
dimensions  : 48, 96, 4608  (nrow, ncol, ncell)
resolution  : 3.75, 3.708898  (x, y)
extent      : -1.875, 358.125, -89.01354, 89.01354  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
data source : in memory
names       : layer
values      : 6.547268e-07, 0.0001545883  (min, max)

-----Original Message-----
From: Roger Bivand [mailto:Roger.Bivand at nhh.no] 
Sent: Friday, February 08, 2013 10:00 AM
To: Whittier, Joanna B.
Cc: r-sig-geo-owner at r-project.org
Subject: Re: FW: error in calculating mean of a raster brick

Jodi,

You are not subscribed to this list with your name or whittierj at missouri.edu. Since you tried posting through nabble, had you checked that you are fully subscribed to the list, or only to nabble? 
Subscribe directly at:

https://stat.ethz.ch/mailman/listinfo/r-sig-geo

and wait to see traffic arriving first before trying to post.

Roger Bivand
List admin.

On Fri, 8 Feb 2013, Whittier, Joanna B. wrote:

> Hi - sorry to bother you but yesterday I registered and posted a 
> question but then received the below message.  Did I need to wait for 
> some period of time before posting a question?
>
> Thank you,
> Jodi
>
> -----Original Message-----
> From: r-sig-geo-bounces at r-project.org 
> [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of 
> r-sig-geo-owner at r-project.org
> Sent: Thursday, February 07, 2013 4:03 PM
> To: Whittier, Joanna B.
> Subject: error in calculating mean of a raster brick
>
> You are not allowed to post to this mailing list, and your message has been automatically rejected.  If you think that your messages are being rejected in error, contact the mailing list owner at r-sig-geo-owner at r-project.org.
>
>

--
Roger Bivand
Department of Economics, NHH Norwegian School of Economics, Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From John_gross at nps.gov  Fri Feb  8 23:44:15 2013
From: John_gross at nps.gov (JohnG)
Date: Fri, 8 Feb 2013 14:44:15 -0800 (PST)
Subject: [R-sig-Geo] 64-bit ncdf4 for Windows??
In-Reply-To: <1360014863756-7582474.post@n2.nabble.com>
References: <1360014863756-7582474.post@n2.nabble.com>
Message-ID: <1360363455076-7582540.post@n2.nabble.com>

Bump.  Still wondering if anyone can help.



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/64-bit-ncdf4-for-Windows-tp7582474p7582540.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From istazahn at gmail.com  Sat Feb  9 00:23:23 2013
From: istazahn at gmail.com (Ista Zahn)
Date: Fri, 8 Feb 2013 18:23:23 -0500
Subject: [R-sig-Geo] 64-bit ncdf4 for Windows??
In-Reply-To: <1360363455076-7582540.post@n2.nabble.com>
References: <1360014863756-7582474.post@n2.nabble.com>
	<1360363455076-7582540.post@n2.nabble.com>
Message-ID: <CA+vqiLFLOex1fi=DMMDWJNaGAnkp9AHrG+SaczuEqWVS=D4oEQ@mail.gmail.com>

Hi John,

On Fri, Feb 8, 2013 at 5:44 PM, JohnG <John_gross at nps.gov> wrote:
> Bump.  Still wondering if anyone can help.

You haven't given us much to go on. What happened when you tried
building the package? What error messages did you get? What version of
R are you using? What version of the ncdf dll's do you have (are there
even 64bit versions of these? all I see at
ftp://ftp.unidata.ucar.edu/pub/netcdf/contrib/ are 32 bit...)

Finally, if linux is not an option (why not?) can you use a Mac
instead (there are binary versions of the ncdf4 package for OSX)?

HTH,
Ista

>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/64-bit-ncdf4-for-Windows-tp7582474p7582540.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From milansharma2012 at yahoo.com  Sat Feb  9 16:32:58 2013
From: milansharma2012 at yahoo.com (Milan Sharma)
Date: Sat, 9 Feb 2013 07:32:58 -0800 (PST)
Subject: [R-sig-Geo] spgwr (georgia)
Message-ID: <1360423978.18466.YahooMailNeo@web162103.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130209/e7a67235/attachment.pl>

From Roger.Bivand at nhh.no  Sat Feb  9 17:24:32 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 9 Feb 2013 17:24:32 +0100
Subject: [R-sig-Geo] spgwr (georgia)
In-Reply-To: <1360423978.18466.YahooMailNeo@web162103.mail.bf1.yahoo.com>
References: <1360423978.18466.YahooMailNeo@web162103.mail.bf1.yahoo.com>
Message-ID: <alpine.LRH.2.03.1302091713440.14967@reclus.nhh.no>

YOU ARE STILL POSTING HTML! Please do follow the rules, which are quite 
clear.

The object you are interested in is res.adpt$SDF,

so in R (as is easy to establish by reading the introductory manual) you 
can say:

summary(res.adpt$SDF)

which tells you what it is, and what is inside it. Using str() fives more 
details on the contents.

You are plotting the local coefficients for the PctBlack covariate, the 
residuals are gwr.e. So:

res.adpt$SDF$ols.e <- residuals(lm(PctBach ~ TotPop90 + PctRural +
   PctEld + PctFB + PctPov + PctBlack, data=gSRDF))
spplot(res.adpt$SDF, c("ols.e", "gwr.e"))

plots both together on the same scale.

Roger


On Sat, 9 Feb 2013, Milan Sharma wrote:

> Dear all,
> #the following is gwr code for georgia data.
> #Can somebody point out what is plotted by this code?
> #I want to plot residual plot (gwr and ols both)?for this data.
> library(spgwr)
> data(georgia)
> g.adapt.gauss <- gwr.sel(PctBach ~ TotPop90 + PctRural + PctEld + PctFB + PctPov + PctBlack, data=gSRDF, adapt=TRUE)
> res.adpt <- gwr(PctBach ~ TotPop90 + PctRural + PctEld + PctFB + PctPov + PctBlack, data=gSRDF, adapt=g.adapt.gauss)
> brks <- c(-0.25, 0, 0.01, 0.025, 0.075)
> cols <- grey(5:2/6)
> plot(res.adpt$SDF, col=cols[findInterval(res.adpt$SDF$PctBlack, brks, all.inside=TRUE)])
> #I want residual plot under GWR and OLS.
> 	[[alternative HTML version deleted]]
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From roosbeh.nowrouzian at gmail.com  Sat Feb  9 17:39:05 2013
From: roosbeh.nowrouzian at gmail.com (Roosbeh Nowrouzian)
Date: Sat, 9 Feb 2013 11:39:05 -0500
Subject: [R-sig-Geo] Deriving Design Matrix and Spatial adjacency matrix for
	package "spatcounts"
Message-ID: <CAJw-hPZYnJkdCxp8z1XHYgKmrTSaerhzQN9U9OhTAHhim+JB3A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130209/9b3a8df1/attachment.pl>

From John_gross at nps.gov  Sat Feb  9 18:03:07 2013
From: John_gross at nps.gov (JohnG)
Date: Sat, 9 Feb 2013 09:03:07 -0800 (PST)
Subject: [R-sig-Geo] 64-bit ncdf4 for Windows??
In-Reply-To: <CA+vqiLFLOex1fi=DMMDWJNaGAnkp9AHrG+SaczuEqWVS=D4oEQ@mail.gmail.com>
References: <1360014863756-7582474.post@n2.nabble.com>
	<1360363455076-7582540.post@n2.nabble.com>
	<CA+vqiLFLOex1fi=DMMDWJNaGAnkp9AHrG+SaczuEqWVS=D4oEQ@mail.gmail.com>
Message-ID: <1360429387798-7582545.post@n2.nabble.com>

Ista,  

Sorry about lack of detail.  Here are a some additional specifics:
- this is for Windows (only).  I'm aware the libraries exist for Linus,
MacOX, etc  but we're a Windows shop.
- R:  We've been struggling with this in ver 2.14 to the current (2.15.2). 
It's not a version issue.

Two professional developers here have attempted to build the libraries.  The
most recent is on vacation so I can't provide precise error messages, but I
can get those details this Wed. or Thurs. if they'd be helpful.  My
recollection is that the issue was the make file and library linking - maybe
a library or function not found error.

We followed the directions to the Unidata site and (both times) downloaded
the most recent 64-bit files (yes, they exist). 

This is a known, difficult issue, and I suspect what I'm looking for is a
very talented person that has successfully build the libraries.

The best instructions I know of are at: 

http://cirrus.ucsd.edu/~pierce/ncdf/how_to_build_on_windows.html

and D. Pierce notes that he will not support others that attempt the build,
presumably because of the mysterious issues and error messages, which may be
system-specific.  These are noted on his web page.

Unidata apparently has restricted public distribution of the compiled
libraries, thus I'm thinking that a solution is most likely to come from
someone that's built the libraries, but is not posting them to avoid
licensing violation.  If (when?) we're successful, we'll be in a similar
position - presumably we can respond to requests from individuals for the
64-bit package, but we won't be able post it to the RCRAN site.  




--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/64-bit-ncdf4-for-Windows-tp7582474p7582545.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From John_gross at nps.gov  Sat Feb  9 18:14:58 2013
From: John_gross at nps.gov (JohnG)
Date: Sat, 9 Feb 2013 09:14:58 -0800 (PST)
Subject: [R-sig-Geo] i want to extract a zip file using r
In-Reply-To: <CAJftVECiZbMAfkbuWRg6-+djHSfO3NQyXbn69bvwntde5H5NYA@mail.gmail.com>
References: <CAJftVECiZbMAfkbuWRg6-+djHSfO3NQyXbn69bvwntde5H5NYA@mail.gmail.com>
Message-ID: <1360430098232-7582546.post@n2.nabble.com>

Your message is a bit short on detail, but for starters there's a misplaced
quote (") in the first line of your code.  I'd start by replacing that.





--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/i-want-to-extract-a-zip-file-using-r-tp7582524p7582546.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Roger.Bivand at nhh.no  Sat Feb  9 18:54:46 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 9 Feb 2013 18:54:46 +0100
Subject: [R-sig-Geo] spgwr (georgia)
In-Reply-To: <alpine.LRH.2.03.1302091713440.14967@reclus.nhh.no>
References: <1360423978.18466.YahooMailNeo@web162103.mail.bf1.yahoo.com>
	<alpine.LRH.2.03.1302091713440.14967@reclus.nhh.no>
Message-ID: <alpine.LRH.2.03.1302091849540.14967@reclus.nhh.no>

On Sat, 9 Feb 2013, Roger Bivand wrote:

> YOU ARE STILL POSTING HTML! Please do follow the rules, which are quite 
> clear.

To clarify the above, this is a setting in email clients for outgoing 
email:

http://www.r-project.org/mail.html#instructions

General Instructions

Note that you should configure your e-mail software in such a way as to 
send only plain text, i.e., no HTML. ?html-ified? messages are usually 
considerably longer (in bytes!) and harder to filter for spam or viruses. 
Many of these (e.g. ?html-only? ones) are currently spam-filtered or 
otherwise intercepted completely and without notice to the sender.

The link in the instructions to

http://expita.com/nomime.html

is dead, this is a copy:

http://stagecraft.theprices.net/nomime.html

Another link is:

http://ask-leo.com/whats_the_difference_between_plain_text_and_html_email.html

but has lots of adverts. This is also helpful:

http://email.about.com/od/netiquettetips/qt/When-In-Doubt-Send-Plain-Text-Email-Not-Fancy-Html.htm

Roger
(list admin.)

>
> The object you are interested in is res.adpt$SDF,
>
> so in R (as is easy to establish by reading the introductory manual) you can 
> say:
>
> summary(res.adpt$SDF)
>
> which tells you what it is, and what is inside it. Using str() fives more 
> details on the contents.
>
> You are plotting the local coefficients for the PctBlack covariate, the 
> residuals are gwr.e. So:
>
> res.adpt$SDF$ols.e <- residuals(lm(PctBach ~ TotPop90 + PctRural +
>  PctEld + PctFB + PctPov + PctBlack, data=gSRDF))
> spplot(res.adpt$SDF, c("ols.e", "gwr.e"))
>
> plots both together on the same scale.
>
> Roger
>
>
> On Sat, 9 Feb 2013, Milan Sharma wrote:
>
>> Dear all,
>> #the following is gwr code for georgia data.
>> #Can somebody point out what is plotted by this code?
>> #I want to plot residual plot (gwr and ols both)?for this data.
>> library(spgwr)
>> data(georgia)
>> g.adapt.gauss <- gwr.sel(PctBach ~ TotPop90 + PctRural + PctEld + PctFB + 
>> PctPov + PctBlack, data=gSRDF, adapt=TRUE)
>> res.adpt <- gwr(PctBach ~ TotPop90 + PctRural + PctEld + PctFB + PctPov + 
>> PctBlack, data=gSRDF, adapt=g.adapt.gauss)
>> brks <- c(-0.25, 0, 0.01, 0.025, 0.075)
>> cols <- grey(5:2/6)
>> plot(res.adpt$SDF, col=cols[findInterval(res.adpt$SDF$PctBlack, brks, 
>> all.inside=TRUE)])
>> #I want residual plot under GWR and OLS.
>> 	[[alternative HTML version deleted]]
>> 
>> 
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From istazahn at gmail.com  Sat Feb  9 21:29:08 2013
From: istazahn at gmail.com (Ista Zahn)
Date: Sat, 9 Feb 2013 15:29:08 -0500
Subject: [R-sig-Geo] 64-bit ncdf4 for Windows??
In-Reply-To: <1360429387798-7582545.post@n2.nabble.com>
References: <1360014863756-7582474.post@n2.nabble.com>
	<1360363455076-7582540.post@n2.nabble.com>
	<CA+vqiLFLOex1fi=DMMDWJNaGAnkp9AHrG+SaczuEqWVS=D4oEQ@mail.gmail.com>
	<1360429387798-7582545.post@n2.nabble.com>
Message-ID: <CA+vqiLGPC0KWOTgR+8o3eik_TaygAiLbTGF+3JY383uEMJ9h_w@mail.gmail.com>

Hi John,

Looks like a PITA. I gave it a try without any success. All I can
suggest is that you very carefully document your build attempts, and
post only very specific questions, including exactly what you did and
the exact error messages.

Honestly if I were you I would just do this in Linux. You could run it
inside a VM on Windows if you like.

Best,
Ista

On Sat, Feb 9, 2013 at 12:03 PM, JohnG <John_gross at nps.gov> wrote:
> Ista,
>
> Sorry about lack of detail.  Here are a some additional specifics:
> - this is for Windows (only).  I'm aware the libraries exist for Linus,
> MacOX, etc  but we're a Windows shop.
> - R:  We've been struggling with this in ver 2.14 to the current (2.15.2).
> It's not a version issue.
>
> Two professional developers here have attempted to build the libraries.  The
> most recent is on vacation so I can't provide precise error messages, but I
> can get those details this Wed. or Thurs. if they'd be helpful.  My
> recollection is that the issue was the make file and library linking - maybe
> a library or function not found error.
>
> We followed the directions to the Unidata site and (both times) downloaded
> the most recent 64-bit files (yes, they exist).
>
> This is a known, difficult issue, and I suspect what I'm looking for is a
> very talented person that has successfully build the libraries.
>
> The best instructions I know of are at:
>
> http://cirrus.ucsd.edu/~pierce/ncdf/how_to_build_on_windows.html
>
> and D. Pierce notes that he will not support others that attempt the build,
> presumably because of the mysterious issues and error messages, which may be
> system-specific.  These are noted on his web page.
>
> Unidata apparently has restricted public distribution of the compiled
> libraries, thus I'm thinking that a solution is most likely to come from
> someone that's built the libraries, but is not posting them to avoid
> licensing violation.  If (when?) we're successful, we'll be in a similar
> position - presumably we can respond to requests from individuals for the
> 64-bit package, but we won't be able post it to the RCRAN site.
>
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/64-bit-ncdf4-for-Windows-tp7582474p7582545.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From John_gross at nps.gov  Sat Feb  9 22:19:36 2013
From: John_gross at nps.gov (JohnG)
Date: Sat, 9 Feb 2013 13:19:36 -0800 (PST)
Subject: [R-sig-Geo] 64-bit ncdf4 for Windows??
In-Reply-To: <CA+vqiLGPC0KWOTgR+8o3eik_TaygAiLbTGF+3JY383uEMJ9h_w@mail.gmail.com>
References: <1360014863756-7582474.post@n2.nabble.com>
	<1360363455076-7582540.post@n2.nabble.com>
	<CA+vqiLFLOex1fi=DMMDWJNaGAnkp9AHrG+SaczuEqWVS=D4oEQ@mail.gmail.com>
	<1360429387798-7582545.post@n2.nabble.com>
	<CA+vqiLGPC0KWOTgR+8o3eik_TaygAiLbTGF+3JY383uEMJ9h_w@mail.gmail.com>
Message-ID: <1360444776721-7582549.post@n2.nabble.com>

Yep.  That's what the developers tell me.  I'm grateful they've been willing
to work on this, saving me the pain.  When the one working on this returns,
I'll post more precise info on the issues and error messages.  The Unidata
site makes it look simple, but it obviously is not.

Thanks for having a look!
johng



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/64-bit-ncdf4-for-Windows-tp7582474p7582549.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From roosbeh.nowrouzian at gmail.com  Sun Feb 10 01:57:42 2013
From: roosbeh.nowrouzian at gmail.com (Roosbeh Nowrouzian)
Date: Sat, 9 Feb 2013 19:57:42 -0500
Subject: [R-sig-Geo] Spbayes package-spGLM function-Error in spGLM( ,
	c++ error: dpotrf failed
Message-ID: <CAJw-hPYZydgSZQXbwseQYoCAtwi3H6W93xnAnhwMa=e1ZDZ=1A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130209/79766b0f/attachment.pl>

From milansharma2012 at yahoo.com  Sun Feb 10 02:28:20 2013
From: milansharma2012 at yahoo.com (Milan Sharma)
Date: Sat, 9 Feb 2013 17:28:20 -0800 (PST)
Subject: [R-sig-Geo] GWR residual plot, state map did not appear
In-Reply-To: <1360459208.23416.YahooMailNeo@web162102.mail.bf1.yahoo.com>
References: <1360459208.23416.YahooMailNeo@web162102.mail.bf1.yahoo.com>
Message-ID: <1360459700.24448.YahooMailNeo@web162106.mail.bf1.yahoo.com>

?
Dear list,
I did GWR residual plot using the same technique as spgwr package. When I do for Georgia data, I get the nice plot (with the state map) with the residuals, but same code applied to my data gives residuals plot (without the state map). My code is given below, if someone can tell me what is the problem.

library(spdep)
library(spgwr)
data<-read.csv("GWRDATA.csv",header=TRUE)
attach(data)
map = SpatialPointsDataFrame(data=data, coords=cbind(Longitude,Latitude))
bw = gwr.sel(Y~x1+x2,data=map,adapt=T)
(gwr.model = gwr(Y~x1+x2,data=map, adapt=bw))
? SD.adapt.gauss <- gwr.sel(Y~x1+x2,data=map,adapt=TRUE)
?res.adpt <- gwr(Y~x1+x2,data=map,adapt=SD.adapt.gauss)
?brks <- c(-0.25, 0, 0.01, 0.025, 0.075)
? cols <- grey(5:2/6)
?res.adpt$SDF$ols.e <- residuals(lm(yield~temp+precpt,data=map))
spplot(res.adpt$SDF, c("ols.e", "gwr.e"),main="Residuals from OLS and GWR")
Milan


From finleya at msu.edu  Sun Feb 10 02:30:19 2013
From: finleya at msu.edu (Andrew Finley)
Date: Sat, 9 Feb 2013 20:30:19 -0500
Subject: [R-sig-Geo] Spbayes package-spGLM function-Error in spGLM( ,
	c++ error: dpotrf failed
In-Reply-To: <CAJw-hPYZydgSZQXbwseQYoCAtwi3H6W93xnAnhwMa=e1ZDZ=1A@mail.gmail.com>
References: <CAJw-hPYZydgSZQXbwseQYoCAtwi3H6W93xnAnhwMa=e1ZDZ=1A@mail.gmail.com>
Message-ID: <EE96F4B3-5D34-4C25-AF5F-3234F79B49FC@msu.edu>

Hi Roosbeh,
It's generally good to direct package specific error questions to the package maintainers. That's me for spBayes. Do you have duplicate coordinates (that's a common issue when this error occurs). Otherwise you might have an issue with phi's prior. If it's not one of these, then please send me some code and data that I can check out.
Thanks-
Andy

On Feb 9, 2013, at 19:57, Roosbeh Nowrouzian <roosbeh.nowrouzian at gmail.com> wrote:

> Dear lest members:
> I am using Spbayes package after using spGLM function  I am running to
> *
> *
> *Error in spGLM*(HHVEHCNT ~ 1, family = "poisson", weights = weights, data
> = total at data,  :
> * c++ error: dpotrf failed*
> 
> I am wondering what has caused this error. Should I mke some codes that R
> and C++ call each other or ...?
> 
> Apprecieate your respmse
> 
> Roosbeh Nowrouzian
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From roosbeh.nowrouzian at gmail.com  Sun Feb 10 03:33:41 2013
From: roosbeh.nowrouzian at gmail.com (Roosbeh Nowrouzian)
Date: Sat, 9 Feb 2013 21:33:41 -0500
Subject: [R-sig-Geo] Spbayes package-spGLM function-Error in spGLM( ,
 c++ error: dpotrf failed
In-Reply-To: <EE96F4B3-5D34-4C25-AF5F-3234F79B49FC@msu.edu>
References: <CAJw-hPYZydgSZQXbwseQYoCAtwi3H6W93xnAnhwMa=e1ZDZ=1A@mail.gmail.com>
	<EE96F4B3-5D34-4C25-AF5F-3234F79B49FC@msu.edu>
Message-ID: <CAJw-hPb8Z9gJ=pW5X-E=mkEeubX=Y+omXjyAncrBKtO4wU=GQw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130209/6dbd18ea/attachment.pl>

From HodgessE at uhd.edu  Sun Feb 10 05:10:43 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Sun, 10 Feb 2013 04:10:43 +0000
Subject: [R-sig-Geo] question about STIDF objects
Message-ID: <FF9DB805FC41CC4E95825A50F680630212916AD6@challenger.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130210/70b2bd16/attachment.pl>

From HodgessE at uhd.edu  Sun Feb 10 07:57:45 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Sun, 10 Feb 2013 06:57:45 +0000
Subject: [R-sig-Geo] question about STIDF objects
In-Reply-To: <FF9DB805FC41CC4E95825A50F680630212916AD6@challenger.uhd.campus>
References: <FF9DB805FC41CC4E95825A50F680630212916AD6@challenger.uhd.campus>
Message-ID: <FF9DB805FC41CC4E95825A50F680630212916B41@challenger.uhd.campus>

I figured it out.  Please ignore the previous message.

________________________________________
From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Hodgess, Erin
Sent: Saturday, February 09, 2013 10:10 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] question about STIDF objects

Dear R-sig Geo People:

I have a question about the space-time package, please.  I'm working through the "worked examples"  from the JRSS paper.

My question is:  can I make the wind.data object an STIDF instead of an STFDF, please?

I would like it in that form so I can use plotKML to produce those cool Google Earth KML files.

Thanks,
Erin


        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From r.turner at auckland.ac.nz  Sun Feb 10 09:34:05 2013
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sun, 10 Feb 2013 21:34:05 +1300
Subject: [R-sig-Geo] spatstat kstest
In-Reply-To: <20130208120013.F1F6.18BBA78F@lab.ntt.co.jp>
References: <20130208094855.40CD.18BBA78F@lab.ntt.co.jp>
	<51144C2B.4020905@auckland.ac.nz>
	<20130208120013.F1F6.18BBA78F@lab.ntt.co.jp>
Message-ID: <51175B7D.3040606@auckland.ac.nz>


Sorry to be so slow to respond, but I am having a great deal of
difficulty in understanding what you are asking.

To attempt to answer your questions, at least partially, the "projections"
onto the axes of the point pattern being analysed are completely
irrelevant.  Investigating these projections does not arise in any way
when invoking kstest().   The test is *NOT* a test about these projections.

The function kstest() tests the *null* hypothesis that the observed pattern
was generated by CSR (i.e. by a constant intensity Poisson process).   The
alternative hypothesis is in effect that the intensity is dependent upon the
specified covariate.

The test is effected by comparing the empirical distribution of the values
of the covariate at the points of the pattern with the distribution that 
these
values would have under the null hypothesis, i.e. a uniform distribution.
If the first argument to kstest() is the pattern under consideration then
the "raw" values of the covariate are used.  If the first argument is a 
*model*
fitted to the pattern, then (as the online help says):
> The values of the covariate at all locations in the observation window 
> are evaluated,
> weighted according to the point process intensity of the fitted model, 
> and compiled
> into a cumulative distribution function F using ewcdf. 

In the latter case the function is testing the null hypothesis that the 
model fits adequately
versus there being a dependence upon the specified covariate which is 
not accounted
for by the model.

To return to the simpler setting where the first argument is the pattern 
then,
if the specified covariate is the x-coordinate of the points, the empirical
distribution of these x-coordinates is compared with the uniform 
distribution.
However the test is not "about" these x-coordinates.  These coordinates are
simply used as a means to detect whether the intensity is constant as 
opposed
to varying with x.

The Cartesian coordinates are only one pair of choices of specified 
covariate
upon which the intensity of the underlying process might depend. 
Strictly speaking
the choice of "specified covariate" should be made a priori --- before 
the data are
collected or inspected --- and should be made on the basis of sound 
scientific
conjectures about the nature of the underlying process.  This rule is of 
course
breached more often than it is observed.

To gain some insight into what the test is doing you should try 
experimenting with
simulated data.  I.e. simulate a pattern with dependence upon 
covariates, fit correct
and incorrect models to the pattern, and apply the kstest() function to 
both the
correct and incorrect models, with various choices of covariate.

     cheers,

         Rolf Turner


On 02/08/2013 04:00 PM, Hiroshi Saito wrote:
> Dear Rolf,
>
> Unfortunately, the data I have is under nondisclosure agreement.
> Therefore, I hesitate to offer.
>
> Let X={(x1,y1),(x2,y2),..} be the data set, and X_x={x1,x2,...} be its
> projection to the x-axis.
> Try, for example,
> fit <- ppm(X, ~x+y+I(x^2)+I(y^2), Poisson())
> (that is, the inhomogeneous Poisson process with the intensity
> \lambda(x,y)=exp(a+bx+cy+dx^2+ey^2))
> and test
> kstest(fit, covariate="x")
>
> In my understanding, this is the KS-test whether X_x and the
> inhomogeneous Poisson process with the intensity \lambda(x)=\int
> \lambda(x,y)dy.
> Am I wrong ?
>
> What I would like to say is that kstest is not a function of the test of
> the agreement between the model defined over (x,y) and the data set on
> the plane, but the function of the test of the agreement between the
> projected model and the projected model on a one-dimensional space.
> Am I wrong?
>
> Even so, you may have a good way to use kstest to test the two
> dimensional data by, for example, appropriately setting the covariate in
> kstest.
> If so, please give me some pieces of advice.
>
> Regards,
> Hiroshi Saito
>
> On Fri, 08 Feb 2013 13:51:55 +1300
> Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>> Can you please give a *reproducible* example (including code and data,
>> possibly provided using dput()) illustrating just exactly what is the
>> problem
>> that you are trying to solve?
>>
>>       cheers,
>>
>>           Rolf Turner
>>
>> On 02/08/2013 01:48 PM, Hiroshi Saito wrote:
>>> Dear sir,
>>>
>>> I am analyzing a spatial point data set.
>>> I would like to test how fit the model fitted by ppm is.
>>> For this objective, I used kstest.
>>> Unfortunately, however, I am not sure that the test actually tests the
>>> fit of the model for the data set on the two dimensional space.
>>> For example, if I set the covariate = x, it means (in my understanding)
>>> that the projection of the data set to the x-axis is tested.
>>> Is it possible to test the fit by appropriately setting the covariate?
>>>
>>> Please give me some pieces of advice how I test the fit.
>>> I need to test the method for the model including inhomogeneous Poisson
>>> model.
>>> If there is no appropriate method, I would like to develop.


From Roger.Bivand at nhh.no  Sun Feb 10 15:49:41 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 10 Feb 2013 15:49:41 +0100
Subject: [R-sig-Geo] FOSS4G 2013 Call for Presentations and Workshops now
	open.
Message-ID: <alpine.LRH.2.03.1302101541190.31503@reclus.nhh.no>

I'm copying this from:

http://lists.osgeo.org/pipermail/discuss/2013-February/011347.html

because it clearly deserves attention:

(from http://2013.foss4g.org/welcome/: FOSS4G is the global conference for 
Free and Open Source Software for Geospatial, organized by the Open Source 
Geospatial Foundation (OSGeo). In 2013, FOSS4G will be held in in the 
United Kingdom for the first time, at the East Midlands Conference Centre 
in Nottingham, from 17th to 21st September. FOSS4G 2013 will follow on 
from the Association for Geospatial Information (AGI) annual GeoCommunity 
Event at the same venue, and delegates will have an opportunity to attend 
both events for a full week of Geo-Goodness!)

"The submission system for presentations and workshops is now live,
and links are available from here:

http://2013.foss4g.org/programme/call-for-papers/

  Note that all we need for these is a summary and a few small details
- there's no requirement for a paper at all."

Roger

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Tom_Roche at pobox.com  Sun Feb 10 20:40:05 2013
From: Tom_Roche at pobox.com (Tom Roche)
Date: Sun, 10 Feb 2013 14:40:05 -0500
Subject: [R-sig-Geo] [raster] problem with large netCDF file
Message-ID: <87obfsj6ui.fsf@pobox.com>


I'm trying to create an extents object from a large netCDF file on a
linux cluster running RHEL 5.4. I'd try to make the file publicly
available, but

$ ls -alh ./METCRO3D_080101
-r--r--r-- 1 me mygroup 5.3G Jan  8 11:32 ./METCRO3D_080101

# extension used below
$ ln -s ./METCRO3D_080101 ./METCRO3D_080101.nc

# note netCDF-ness of file, and existence of datavar=ZF
$ ncdump -v ZF ./METCRO3D_080101 | head
netcdf METCRO3D_080101 {
dimensions:
        TSTEP = UNLIMITED ; // (25 currently)
        DATE-TIME = 2 ;
        LAY = 24 ;
        VAR = 17 ;
        ROW = 299 ;
        COL = 459 ;
variables:
        int TFLAG(TSTEP, VAR, DATE-TIME) ;
$ ncdump -v ZF ./METCRO3D_080101 | tail
    19116.16, 19112.75, 19128.86, 19171.77, 19206.04, 19224.66, 19247.3, 
    19293.71, 19343.23, 19370.01, 19386.64, 19389.33, 19391.63, 19417.19, 
    19442.12, 19456.19, 19471.03, 19481.76, 19485.71, 19492.51, 19501.67, 
    19511.11, 19499.88, 19470.57, 19464.8,  19466.73, 19467.94, 19481.03, 
    19502.62, 19534.05, 19562.75, 19607.45, 19659.45, 19687.44, 19706.39, 
    19735.43, 19790.02, 19842.22, 19862.31, 19867.04, 19871.75, 19876.44, 
    19881.59, 19882.53, 19838.23, 19772.65, 19724.43, 19754.49, 19824.58, 
    19852.86, 19897.51, 19921.67, 19909.53, 19925.96, 19937.74, 19940.95, 
    19944.61, 19948.7,  19953.03, 19957.13 ;
}

$ R
R version 2.15.2 (2012-10-26) -- "Trick or Treat"
Copyright (C) 2012 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
Platform: x86_64-unknown-linux-gnu (64-bit)

...

> library(raster)
Loading required package: sp
raster 2.0-41 (21-December-2012)
> system('ls -alh ./METCRO3D_080101')
-r--r--r-- 1 me mygroup 5.3G Jan  8 11:32 ./METCRO3D_080101
> system('ls -alh ./METCRO3D_080101.nc')
lrwxrwxrwx 1 me mygroup 17 Feb 10 13:46 ./METCRO3D_080101.nc -> ./METCRO3D_080101
> raster('./METCRO3D_080101', varname='ZF')
rgdal: version: 0.8-4, (SVN revision 431)
Geospatial Data Abstraction Library extensions to R successfully loaded
Loaded GDAL runtime: GDAL 1.7.3, released 2010/11/10
Path to GDAL shared files: /usr/local/share/gdal
GDAL does not use iconv for recoding strings.
Loaded PROJ.4 runtime: Rel. 4.8.0, 6 March 2012, [PJ_VERSION: 480]
Path to PROJ.4 shared files: (autodetected)
Error in .local(.Object, ...) : 
  `/home/rtd/code/regridding/MOZART_global_to_AQMEII-NA/METCRO3D_080101' not recognised as a supported file format.


Error in .rasterObjectFromFile(x, band = band, objecttype = "RasterLayer",  : 
  Cannot create a RasterLayer object from this file.

# Thinking that `raster` might want a supported extension to convince
# it of the file's netCDF-ness, I tried

> raster('./METCRO3D_080101.nc', varname='ZF')
Error in .local(.Object, ...) : 
  `.../METCRO3D_080101' not recognised as a supported file format.


Error in .rasterObjectFromFile(x, band = band, objecttype = "RasterLayer",  : 
  Cannot create a RasterLayer object from this file.

But plainly `ncdump` thinks METCRO3D_080101 *is* netCDF.
Can I convince `raster`? Either way, how to proceed?

Your assistance is appreciated, Tom Roche <Tom_Roche at pobox.com>


From r.hijmans at gmail.com  Sun Feb 10 22:53:56 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sun, 10 Feb 2013 13:53:56 -0800
Subject: [R-sig-Geo] [raster] problem with large netCDF file
In-Reply-To: <87obfsj6ui.fsf@pobox.com>
References: <87obfsj6ui.fsf@pobox.com>
Message-ID: <CANtt_hxkSGRTUj7kUE==5RBbhh=QAH=bM1N0UCR12ugPgy7aPw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130210/07888461/attachment.pl>

From Adrian.Baddeley at csiro.au  Mon Feb 11 06:56:42 2013
From: Adrian.Baddeley at csiro.au (Adrian.Baddeley at csiro.au)
Date: Mon, 11 Feb 2013 13:56:42 +0800
Subject: [R-sig-Geo] spatstat kstest
Message-ID: <57DC18C299094D4299F837570C5DF1C501318B132D70@EXWA-MBX01.nexus.csiro.au>


On 02/08/2013 01:48 PM, Hiroshi Saito wrote:
>>> I am analyzing a spatial point data set.
>>> I would like to test how fit the model fitted by ppm is.
>>> For this objective, I used kstest.

This is a question about the 'spatstat' package.
Questions about this package should preferably be sent to the package authors.

>>> Unfortunately, however, I am not sure that the test actually tests the
>>> fit of the model for the data set on the two dimensional space.

Yes, it does.

>>> For example, if I set the covariate = x, it means (in my understanding)
>>> that the projection of the data set to the x-axis is tested.

That is correct.

In general, the Kolmogorov-Smirnov test compares the observed distribution of some numerical variable with the expected or theoretical distribution of the same variable.
 
To apply the K-S test to spatial data, each point in the data and each spatial location in the window must be assigned a numerical value. In 'kstest' this is specified by the argument 'covariate'. 

If you specify covariate="x" then the numerical value assigned to each point is its x-coordinate. Thus, effectively the data points are projected onto the x-axis. Then the observed distribution of these x-coordinates is compared with the theoretical distribution of the x-coordinate according to the fitted model. 

Another possible choice would be covariate = function(x,y){ 2 * x + y}.
More realistically, we would often have some other data in the form of a pixel image Z,
and we could then use covariate=Z.

The choice of covariate is arbitrary. Different choices of covariate lead to different tests, each of which is equally valid, and all of which have the same significance level (probability of type I error), but which will have different power (probability of type II error) depending on the true origin of the data. 

The appropriate choice of covariate depends on the *suspected* type of deviation from the null hypothesis.

regards
Adrian Baddeley

Prof Adrian Baddeley FAA
School of Earth and Environment
University of Western Australia
35 Stirling Hwy, Crawley WA 6009, Australia
          and 
CSIRO Mathematics, Informatics & Statistics
Leeuwin Centre, 65 Brockway Road, Floreat WA 6014, Australia
Tel: 08 9333 6177 | Fax: 08 9333 6121 | Skype: adrian.baddeley


From dick.brus at wur.nl  Mon Feb 11 09:51:25 2013
From: dick.brus at wur.nl (Dick Brus)
Date: Mon, 11 Feb 2013 00:51:25 -0800 (PST)
Subject: [R-sig-Geo] GRTS-sampling
Message-ID: <1360572685174-7582561.post@n2.nabble.com>

I try to understand the hierarchical randomization as applied in the GRTS
design.
 
I randomized 16 points on a square grid, see R script below. The argument
do.sample was set to FALSE, so that the result consists of a dataframe of
all 16 points instead of a GRTS sample. When plotting the order of the
points it appears that the numbers 1-4 are not always in different
subsquares (of which there are four) , for instance points 1 and 3 are both
in the lower-right subsquare. What am I doing wrong?

<http://r-sig-geo.2731867.n2.nabble.com/file/n7582561/GRTSRandomizedFrameSquare.png> 



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/GRTS-sampling-tp7582561.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From tanja.zinsser at googlemail.com  Mon Feb 11 11:08:25 2013
From: tanja.zinsser at googlemail.com (=?ISO-8859-1?Q?Tanja_Zin=DFer?=)
Date: Mon, 11 Feb 2013 11:08:25 +0100
Subject: [R-sig-Geo] problems with read.geoda
Message-ID: <CALDS4yDmvQnZQRwV0ssTP-_APdSYesVFQnpKofzZ7K=WweefZw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130211/04eb667d/attachment.pl>

From Roger.Bivand at nhh.no  Mon Feb 11 11:27:03 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 11 Feb 2013 11:27:03 +0100
Subject: [R-sig-Geo] problems with read.geoda
In-Reply-To: <CALDS4yDmvQnZQRwV0ssTP-_APdSYesVFQnpKofzZ7K=WweefZw@mail.gmail.com>
References: <CALDS4yDmvQnZQRwV0ssTP-_APdSYesVFQnpKofzZ7K=WweefZw@mail.gmail.com>
Message-ID: <alpine.LRH.2.03.1302111120330.5035@reclus.nhh.no>

Please do not post HTML - I explained yesterday how to avoid this 
nuisance.

Just use read.csv() or read.csv2() - read.geoda is only a wrapper, so if 
your CSV uses ";" instead of "," failure will follow for obvious reasons. 
Open the CSV in a text editor to see what it actually looks like, or say 
file.show() in R for a text display. I guess that from your ss name (but 
no affiliation), that you are in a German language locale, which may 
trigger spreadsheets to use ";" - for which read.csv2() is a better 
choice. The author of read.geoda, Luc Anselin, works in an English locale, 
so commas are good there, but not necessarily everywhere.

You haven't included any sample code, not the output of sessionInfo() - 
which shows your locale.

Roger

On Mon, 11 Feb 2013, Tanja Zin?er wrote:

> Hey everyone,
>
> I'm trying to create a data frame using read.geoda and a csv. document
> I get an result, but the names of my columns are missing, instead I get som
> randomly chosen names for the columnes. When I use read.csv everything is
> working as it should.
>
> Regards
> Tanja
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From Thierry.ONKELINX at inbo.be  Mon Feb 11 13:55:51 2013
From: Thierry.ONKELINX at inbo.be (ONKELINX, Thierry)
Date: Mon, 11 Feb 2013 12:55:51 +0000
Subject: [R-sig-Geo] GRTS-sampling
In-Reply-To: <1360572685174-7582561.post@n2.nabble.com>
References: <1360572685174-7582561.post@n2.nabble.com>
Message-ID: <AA818EAD2576BC488B4F623941DA7427A7A57B77@inbomail.inbo.be>

Hi Dick,

Can you send us your script?

Best regards,

Thierry

ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium
+ 32 2 525 02 51
+ 32 54 43 61 85
Thierry.Onkelinx at inbo.be
www.inbo.be

To call in the statistician after the experiment is done may be no more than asking him to perform a post-mortem examination: he may be able to say what the experiment died of.
~ Sir Ronald Aylmer Fisher

The plural of anecdote is not data.
~ Roger Brinner

The combination of some data and an aching desire for an answer does not ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey

-----Oorspronkelijk bericht-----
Van: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] Namens Dick Brus
Verzonden: maandag 11 februari 2013 9:51
Aan: r-sig-geo at r-project.org
Onderwerp: [R-sig-Geo] GRTS-sampling

I try to understand the hierarchical randomization as applied in the GRTS design.

I randomized 16 points on a square grid, see R script below. The argument do.sample was set to FALSE, so that the result consists of a dataframe of all 16 points instead of a GRTS sample. When plotting the order of the points it appears that the numbers 1-4 are not always in different subsquares (of which there are four) , for instance points 1 and 3 are both in the lower-right subsquare. What am I doing wrong?

<http://r-sig-geo.2731867.n2.nabble.com/file/n7582561/GRTSRandomizedFrameSquare.png>



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/GRTS-sampling-tp7582561.html
Sent from the R-sig-geo mailing list archive at Nabble.com.

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo
* * * * * * * * * * * * * D I S C L A I M E R * * * * * * * * * * * * *
Dit bericht en eventuele bijlagen geven enkel de visie van de schrijver weer en binden het INBO onder geen enkel beding, zolang dit bericht niet bevestigd is door een geldig ondertekend document.
The views expressed in this message and any annex are purely those of the writer and may not be regarded as stating an official position of INBO, as long as the message is not confirmed by a duly signed document.


From leandrosabade at gmail.com  Mon Feb 11 14:06:25 2013
From: leandrosabade at gmail.com (Leandro Abade)
Date: Mon, 11 Feb 2013 13:06:25 +0000
Subject: [R-sig-Geo] Error ENFA: Error in eigen(Se) : infinite or missing
	values in 'x'
Message-ID: <CAPcFACGJtwZ-ggTUgcnAfUJxMrOiXTC_V-jD91E-mduqVyoH=w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130211/b5e93191/attachment.pl>

From alfios17 at hotmail.com  Mon Feb 11 14:14:57 2013
From: alfios17 at hotmail.com (Lorenzo Alfieri)
Date: Mon, 11 Feb 2013 14:14:57 +0100
Subject: [R-sig-Geo] apply function to lists of rasters
In-Reply-To: <mailman.11.1360580404.23621.r-sig-geo@r-project.org>
References: <mailman.11.1360580404.23621.r-sig-geo@r-project.org>
Message-ID: <DUB107-W37583886CE68166DFFC573D70A0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130211/97d276c6/attachment.pl>

From roman.lustrik at gmail.com  Mon Feb 11 14:31:20 2013
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Mon, 11 Feb 2013 14:31:20 +0100
Subject: [R-sig-Geo] apply function to lists of rasters
In-Reply-To: <DUB107-W37583886CE68166DFFC573D70A0@phx.gbl>
References: <mailman.11.1360580404.23621.r-sig-geo@r-project.org>
	<DUB107-W37583886CE68166DFFC573D70A0@phx.gbl>
Message-ID: <CAHT1vpj302vi=NCuYdPiBZSKgOSoU5gLJ_JFj-gJ3+ctkic-Sw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130211/8c5c53f6/attachment.pl>

From dick.brus at wur.nl  Mon Feb 11 15:45:29 2013
From: dick.brus at wur.nl (Dick Brus)
Date: Mon, 11 Feb 2013 06:45:29 -0800 (PST)
Subject: [R-sig-Geo] GRTS sampling
Message-ID: <1360593929427-7582569.post@n2.nabble.com>

I try to understand the hierarchical randomization as applied in the GRTS
design.
   
I randomized 16 points on a square grid, see R script below. The argument
do.sample was set to FALSE, so that the result consists of a dataframe of
all 16 points instead of a GRTS sample. When plotting the order of the
points it appears that the numbers 1-4 are not always in different
subsquares (of which there are four) , for instance points 1 and 3 are both
in the lower-right subsquare. What am I doing wrong?
 
library(spsurvey)

frame<-expand.grid(x=seq(from=1,to=4,by=1),y=seq(from=1,to=4,by=1))

#population size (total number of sampling units in Kandahar)
N<-nrow(frame)

#set number of sampling units (sample size) to be selected
n<-4

design<-list(None=list(panel=c(Panel1=n), seltype="Equal", caty.n=c("Caty
1"=n), over=0))
x<-frame$x
y<-frame$y
index<-1:N
att<-data.frame(x=x,y=y,ids=index)

#do.sample=FALSE gives all sampling units in hierarchical? randomized order
res<-grts(design, DesignID="Site", SiteBegin=1, type.frame="finite",
         src.frame="att.frame", in.shape=NULL, sp.object=NULL,
att.frame=att,
         id=NULL, xcoord="x", ycoord="y", stratum=NULL, mdcaty=NULL,
startlev=2,
         maxlev=11, maxtry=1000, shift.grid=FALSE, do.sample=rep(FALSE,
length(design)),
         shapefile=FALSE, prjfilename=NULL, out.shape="sample")
frame.randomized<-data.frame(res$xcoord,res$ycoord)
names(frame.randomized)<-c("x","y")
frame.randomized$id<-1:N

png(file = "GRTSRandomizedFrameSquare.png", width = 480, height = 480)
print(
  ggplot(data = frame.randomized) +
    geom_text(
      data = frame.randomized,
      mapping = aes(
        x = x,
        y = y,
        label = id
      ),
      size = 5
    ) +
    coord_equal()
)
dev.off()

<http://r-sig-geo.2731867.n2.nabble.com/file/n7582569/GRTSRandomizedFrameSquare.png> 



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/GRTS-sampling-tp7582569.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From r.hijmans at gmail.com  Mon Feb 11 18:14:07 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Mon, 11 Feb 2013 09:14:07 -0800
Subject: [R-sig-Geo] apply function to lists of rasters
In-Reply-To: <CAHT1vpj302vi=NCuYdPiBZSKgOSoU5gLJ_JFj-gJ3+ctkic-Sw@mail.gmail.com>
References: <mailman.11.1360580404.23621.r-sig-geo@r-project.org>
	<DUB107-W37583886CE68166DFFC573D70A0@phx.gbl>
	<CAHT1vpj302vi=NCuYdPiBZSKgOSoU5gLJ_JFj-gJ3+ctkic-Sw@mail.gmail.com>
Message-ID: <CANtt_hwX63mOoYBcsf1DivRT8g8QusE093XJh8txfFWXVjP2dQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130211/7469a560/attachment.pl>

From Tom_Roche at pobox.com  Mon Feb 11 18:31:26 2013
From: Tom_Roche at pobox.com (Tom Roche)
Date: Mon, 11 Feb 2013 12:31:26 -0500
Subject: [R-sig-Geo] [raster] problem with large netCDF file
In-Reply-To: <CANtt_hxkSGRTUj7kUE==5RBbhh=QAH=bM1N0UCR12ugPgy7aPw@mail.gmail.com>
References: <CANtt_hxkSGRTUj7kUE==5RBbhh=QAH=bM1N0UCR12ugPgy7aPw@mail.gmail.com>
	<87obfsj6ui.fsf@pobox.com>
Message-ID: <87liaukb9t.fsf@pobox.com>


Tom Roche Sun, 10 Feb 2013 14:40:05 -0500
>> $ ls -alh ./METCRO3D_080101
>> -r--r--r-- 1 me mygroup 5.3G Jan  8 11:32 ./METCRO3D_080101
>> # extension used below
>> $ ln -s ./METCRO3D_080101 ./METCRO3D_080101.nc
...
>> raster('./METCRO3D_080101.nc', varname='ZF')
...
>> Error in .local(.Object, ...) : 
>>   `[METCRO3D_080101]' not recognised as a supported file format.

Robert J. Hijmans Sun, 10 Feb 2013 13:53:56 -0800
> ncdf files are indeed recognized by their extension (".NC",".CDF",

I was able rename the above file and subsequently load it with
`raster`, but only after copying the above file to my homespace :-(
which is generally unfeasible due to size.

> I might add further checks that do not depend on the extension.

Or perhaps merely add a flag allowing the user to {assert, vouch for}
the file's netCDF-ness? Why I ask:

Files such as the above are generated by a production model of long
standing (~20 years), which moreover generates many other netCDF files
with the same naming convention ("<8 char description/>_<timestamp/>"
with no extension). Hence a request by me for a more appropriate
naming convention seems unlikely to be adopted, and would not help
work with many years of legacy output. Moreover these outputs are
usually quite large (i.e., tens of GB or more), and usually generated
to shared directories with restricted permissions. Hence it would be
quite desirable to enable current `raster` code to either

* respect the extension of a symlink

* take a runtime flag, e.g. 'format=CDF'

If there is somewhere to make a feature request, please let me know.

TIA, Tom Roche <Tom_Roche at pobox.com>


From r.hijmans at gmail.com  Mon Feb 11 20:04:41 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Mon, 11 Feb 2013 11:04:41 -0800
Subject: [R-sig-Geo] [raster] problem with large netCDF file
In-Reply-To: <87liaukb9t.fsf@pobox.com>
References: <87obfsj6ui.fsf@pobox.com>
	<CANtt_hxkSGRTUj7kUE==5RBbhh=QAH=bM1N0UCR12ugPgy7aPw@mail.gmail.com>
	<87liaukb9t.fsf@pobox.com>
Message-ID: <CANtt_hzLFc0YgUNgC7o-sFXAcZeJtoXCBJuGLHWvtad4+BAuDA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130211/eccbfc17/attachment.pl>

From tephilippi at gmail.com  Mon Feb 11 20:24:20 2013
From: tephilippi at gmail.com (Tom Philippi)
Date: Mon, 11 Feb 2013 11:24:20 -0800
Subject: [R-sig-Geo] GRTS sampling
In-Reply-To: <1360593929427-7582569.post@n2.nabble.com>
References: <1360593929427-7582569.post@n2.nabble.com>
Message-ID: <CALyPt8xBxcSKAon592q8smEyY1wpMF93D5i6Gdyiqa1OxV9J-Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130211/104824bf/attachment.pl>

From tephilippi at gmail.com  Mon Feb 11 20:53:13 2013
From: tephilippi at gmail.com (Tom Philippi)
Date: Mon, 11 Feb 2013 11:53:13 -0800
Subject: [R-sig-Geo] 64-bit ncdf4 for Windows??
In-Reply-To: <1360444776721-7582549.post@n2.nabble.com>
References: <1360014863756-7582474.post@n2.nabble.com>
	<1360363455076-7582540.post@n2.nabble.com>
	<CA+vqiLFLOex1fi=DMMDWJNaGAnkp9AHrG+SaczuEqWVS=D4oEQ@mail.gmail.com>
	<1360429387798-7582545.post@n2.nabble.com>
	<CA+vqiLGPC0KWOTgR+8o3eik_TaygAiLbTGF+3JY383uEMJ9h_w@mail.gmail.com>
	<1360444776721-7582549.post@n2.nabble.com>
Message-ID: <CALyPt8xQUQhWj7wh6_q3fj6GD815v7Vp4MxLg+8C3BX1rmgzCA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130211/e4866671/attachment.pl>

From Roger.Bivand at nhh.no  Mon Feb 11 21:27:34 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 11 Feb 2013 21:27:34 +0100
Subject: [R-sig-Geo] 64-bit ncdf4 for Windows??
In-Reply-To: <CALyPt8xQUQhWj7wh6_q3fj6GD815v7Vp4MxLg+8C3BX1rmgzCA@mail.gmail.com>
References: <1360014863756-7582474.post@n2.nabble.com>
	<1360363455076-7582540.post@n2.nabble.com>
	<CA+vqiLFLOex1fi=DMMDWJNaGAnkp9AHrG+SaczuEqWVS=D4oEQ@mail.gmail.com>
	<1360429387798-7582545.post@n2.nabble.com>
	<CA+vqiLGPC0KWOTgR+8o3eik_TaygAiLbTGF+3JY383uEMJ9h_w@mail.gmail.com>
	<1360444776721-7582549.post@n2.nabble.com>
	<CALyPt8xQUQhWj7wh6_q3fj6GD815v7Vp4MxLg+8C3BX1rmgzCA@mail.gmail.com>
Message-ID: <alpine.LRH.2.03.1302112106500.5035@reclus.nhh.no>

On Mon, 11 Feb 2013, Tom Philippi wrote:

> All--
>
> Does anyone know if the update from R 2.15.2 to 3.0 is likely to change
> they way these binaries would need to be built?  I don't think that the
> NAMESPACE & .First.lib changes will matter, but I don't understand the
> implications of long.vectors. http://developer.r-project.org/30update.txt

No, no impact at all. The changes to NAMESPACE & .First.lib are only to 
lock out packages whose maintainers have not been submitting required 
changes (for years). Long vectors remove the 2^31-1 length limit on 
vectors, meaning that on 64-bit systems, vectors can be longer (and arrays 
and matrices are vectors, so the limit now is on the product of the 
dimensions). As the note says, the only consequence for package authors is 
that the value returned by length() may not be an integer. Otherwise no 
relevance to your concerns, unless you have single objects with > 2G 
values.

>
> The 64-bit MSwin binaries of ncdf available from unidata:
> http://www.unidata.ucar.edu/software/netcdf/win_netcdf/#binaries state that
> they are set up for use with Visual Studio.   I may call in a (big!) favor
> to have a Visual Studio / C friend work on this with me, and then make the
> 64-bit MSwin binary available to all, but I don't want to have to do it
> twice.

I doubt whether Visual Studio / C is of any help, unless you install 
ncdf4 locally using the same build train, so it may work in-house, and 
only as long as the same guy helps each time ncdf4 and/or the external 
software get updated.

What needs to be done for portability and future-proofing is to build the 
ncdf4 static library under MSYS for Windows 32 and 64 bit systems. CRAN 
does not permit the bundling of external DLLs any longer (or is moving 
towards forbidding them). The OSX ncdf4 binaries are built static, as are 
thw Windows ncdf binaries. The spatial packages that have serious external 
dependencies, rgdal and rgeos, are built static against Windows MSYS 
static libraries. See:

http://cran.r-project.org/doc/manuals/r-release/R-exts.html#Windows-external-software

So if your colleague can compile ncdf4 and link it under MSYS using the 
Rtools compilers, and document any patches - feeding them back up to 
Unidata so that they don't need re-doing next time round - maybe this 
might work. The effort involved is typically substantial; Brian Ripley 
submitted patches to clean up GDAL for 64-bit systems.

In the link above, you'll see a reference to configure.win in rgdal; 
thanks to the uniform cross-compilation approach, all this now does is to 
copy PROJ.4 and GDAL metadata files, such as datum grids and EPSG lists, 
no linking to external DLLs remains as the build is static.

Hope this clarifies,

Roger

>
> While I would rather take the easy path & migrate back to linux, I work for
> the same agency as JohnG and thus am required to use MSwin.
>
> Tom 2
>
>
>
> On Sat, Feb 9, 2013 at 1:19 PM, JohnG <John_gross at nps.gov> wrote:
>
>> Yep.  That's what the developers tell me.  I'm grateful they've been
>> willing
>> to work on this, saving me the pain.  When the one working on this returns,
>> I'll post more precise info on the issues and error messages.  The Unidata
>> site makes it look simple, but it obviously is not.
>>
>> Thanks for having a look!
>> johng
>>
>>
>>
>> --
>> View this message in context:
>> http://r-sig-geo.2731867.n2.nabble.com/64-bit-ncdf4-for-Windows-tp7582474p7582549.html
>> Sent from the R-sig-geo mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From gustaf.granath at gmail.com  Mon Feb 11 23:59:28 2013
From: gustaf.granath at gmail.com (Gustaf Granath)
Date: Mon, 11 Feb 2013 17:59:28 -0500
Subject: [R-sig-Geo] Spatial points to lines/polygons
Message-ID: <511977D0.4090307@gmail.com>

Hi,
I have mapped structures with a GPS (walked along their edges) and Im 
now trying to make polygons from my coordinates. The GPS data are a bit 
fuzzy and I want to establish the edge of the structure with a smoother 
or similar. However, I have not been able to find an easy way to do this 
in R. This seems odd to me and I might have missed something. I have so 
far tried doing lines with spline (xspline) or polygons with the 
alphahull package, but they are tricky to work with (usually overfit).   
Any pointers are welcome.

Gustaf


Example code, testing the alphahull package:
require(alphahull)
set.seed(1)
xx <-c(1:10,8,5,2)
xx <- xx + rnorm(39,0,0.4)
yy <-c(1:5,5:1,1,1,1)
yy <-yy + rnorm(39,0,0.4)
plot( xx ~ yy)
xy <-data.frame("x" = xx, "y" = yy)
coords <- coordinates(xy)

# alpha-shape
x.as <- ashape(coords, alpha=5)

# alpha-hull
x.ah <- ahull(coords, alpha=5)

#plot
plot(x.as)
plot(x.ah)

-- 
Gustaf Granath (PhD)
Post doc
McMaster University
Email: gustaf.granath at gmail.com


From jh.eco.cas at gmail.com  Tue Feb 12 00:01:30 2013
From: jh.eco.cas at gmail.com (Jianhua Huang)
Date: Mon, 11 Feb 2013 16:01:30 -0700
Subject: [R-sig-Geo] float points
Message-ID: <024801ce08ab$bbe2b5f0$33a821d0$@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130211/e8d5c1cf/attachment.pl>

From saito.hiroshi at lab.ntt.co.jp  Tue Feb 12 01:43:34 2013
From: saito.hiroshi at lab.ntt.co.jp (Hiroshi Saito)
Date: Tue, 12 Feb 2013 09:43:34 +0900
Subject: [R-sig-Geo] spatstat kstest
In-Reply-To: <57DC18C299094D4299F837570C5DF1C501318B132D70@EXWA-MBX01.nexus.csiro.au>
References: <57DC18C299094D4299F837570C5DF1C501318B132D70@EXWA-MBX01.nexus.csiro.au>
Message-ID: <20130212094334.84DD.18BBA78F@lab.ntt.co.jp>

Dear Adrian and Rolf,

Thank you for your comments.
I am considering your comments to understand them.
I will send such questions to  the package authors.

Regards,
Hiroshi Saito

On Mon, 11 Feb 2013 13:56:42 +0800
<Adrian.Baddeley at csiro.au> wrote:

> 
> On 02/08/2013 01:48 PM, Hiroshi Saito wrote:
> >>> I am analyzing a spatial point data set.
> >>> I would like to test how fit the model fitted by ppm is.
> >>> For this objective, I used kstest.
> 
> This is a question about the 'spatstat' package.
> Questions about this package should preferably be sent to the package authors.
> 
> >>> Unfortunately, however, I am not sure that the test actually tests the
> >>> fit of the model for the data set on the two dimensional space.
> 
> Yes, it does.
> 
> >>> For example, if I set the covariate = x, it means (in my understanding)
> >>> that the projection of the data set to the x-axis is tested.
> 
> That is correct.
> 
> In general, the Kolmogorov-Smirnov test compares the observed distribution of some numerical variable with the expected or theoretical distribution of the same variable.
>  
> To apply the K-S test to spatial data, each point in the data and each spatial location in the window must be assigned a numerical value. In 'kstest' this is specified by the argument 'covariate'. 
> 
> If you specify covariate="x" then the numerical value assigned to each point is its x-coordinate. Thus, effectively the data points are projected onto the x-axis. Then the observed distribution of these x-coordinates is compared with the theoretical distribution of the x-coordinate according to the fitted model. 
> 
> Another possible choice would be covariate = function(x,y){ 2 * x + y}.
> More realistically, we would often have some other data in the form of a pixel image Z,
> and we could then use covariate=Z.
> 
> The choice of covariate is arbitrary. Different choices of covariate lead to different tests, each of which is equally valid, and all of which have the same significance level (probability of type I error), but which will have different power (probability of type II error) depending on the true origin of the data. 
> 
> The appropriate choice of covariate depends on the *suspected* type of deviation from the null hypothesis.
> 
> regards
> Adrian Baddeley
> 
> Prof Adrian Baddeley FAA
> School of Earth and Environment
> University of Western Australia
> 35 Stirling Hwy, Crawley WA 6009, Australia
>           and 
> CSIRO Mathematics, Informatics & Statistics
> Leeuwin Centre, 65 Brockway Road, Floreat WA 6014, Australia
> Tel: 08 9333 6177 | Fax: 08 9333 6121 | Skype: adrian.baddeley

*************************
Hiroshi Saito:
E-MAIL: saito.hiroshi at lab.ntt.co.jp
http://www9.plala.or.jp/hslab/
PHONE: +81 422 59 4300
FAX: +81 422 59 6364


From Han_Li at baylor.edu  Tue Feb 12 01:50:47 2013
From: Han_Li at baylor.edu (Li, Han)
Date: Tue, 12 Feb 2013 00:50:47 +0000
Subject: [R-sig-Geo] question on the difference between spdep function
 spautolm() and glm() with autocovariate
Message-ID: <0F7B6F86D2AFD049B10949D376D8C64A0CF9538D@HARRY.baylor.edu>

Dear list,

I am currently working on spatial autoregression modeling for my dissertation research. I want to use regression models to identify socioeconomic/landscape variables (15 total, var1$bat_survey - var15$bay_survey) that can affect the presence/absence of bats (p/a$bat_survey). Since spatial autocorrelation exists in my P/A data, I tried different spatial models.

My question is:

If I use the same way (same neighboring criteria, same weight style) to define neighbors, and build model #1 spatial simultaneous autoregression model (SAR) by function spautolm(), and model #2 glm() with autocovariate generated by function autocov_dist(), should I expect the same result, or not?

I understood that if I use glm() with autocovariate it will include one more variable (the autocovariate) in the result. I also learned that glm() is more a predicting model and spautolm() is more an explanatory model. But I am not sure whether the significant variables selected by these two models will be same.


##r code example##
model_1 <- spautolm (p/a ~ var1 + var2 + ... + var15, data = bat_survey, listw = neighbor_regime1, family="SAR")
####
autocov_model_2 <- autocov_dist (p/a$bat_survey, xy = coords, style = "W", type = "one")
model_2 <- glm (p/a ~ var1 + var2 + ... + var15 + autocov_model_2, family = "binomial", data = bat_survey)

Thanks in advance. Your insight will be deeply appreciated.

Han


Han Li
Department of Biology
Baylor University
Waco, TX  76798-7388
Phone: (254) 710-2151
Fax: (254) 710-2969
han_li at baylor.edu<mailto:han_li at baylor.edu>


From horning at amnh.org  Tue Feb 12 04:44:15 2013
From: horning at amnh.org (Ned Horning)
Date: Mon, 11 Feb 2013 22:44:15 -0500
Subject: [R-sig-Geo] Alternative to zonal for large images
Message-ID: <5119BA8F.8060802@amnh.org>

Hi - Are there alternatives to using the raster package "zonal" function 
for large images when using functions for the "stat" parameter? The 
canned functions like 'mean' work well but I would like to write my own 
functions to calculate standard deviation and other statistics.

I tried "extract" using polygons to define the zones but that is very, 
very slow since I have ~40,000 polygons. Are there other alternatives? 
My image is about 5000 x 6000 pixels x 3 bands.

Any thoughts would be appreciated.

Ned


From forrest at ufl.edu  Tue Feb 12 05:03:56 2013
From: forrest at ufl.edu (Forrest Stevens)
Date: Mon, 11 Feb 2013 23:03:56 -0500
Subject: [R-sig-Geo] Alternative to zonal for large images
In-Reply-To: <5119BA8F.8060802@amnh.org>
References: <5119BA8F.8060802@amnh.org>
Message-ID: <CAEBQMMmuXYU_930ALW2A2mVkHVU5Vo4NniAC6zh7f2kubEMHYQ@mail.gmail.com>

On Mon, Feb 11, 2013 at 10:44 PM, Ned Horning <horning at amnh.org> wrote:
> Hi - Are there alternatives to using the raster package "zonal" function
> for
> large images when using functions for the "stat" parameter?

I would be interested to know as well.  I have found both extract and
zonal to be unworkably slow over large datasets.  As a workaround I
currently am using RPyGeo to run zonal statistics using the ArcGIS
GeoProcessing environment.  I'd like to keep it all in R without the
overhead of invoking the ArcGIS environment, but as of right now it
takes a fraction of the time to jump through those hoops, even with
moderately sized raster and polygon datasets.

I hope this causes no offense to Robert and Jacob regarding the raster
package... It's truly indispensable and makes R a joy to work with for
most raster-based tasks.. But I think there's room for improvement
somewhere along that analysis chain, with a bottleneck that can
hopefully be bypassed at some point soon (I haven't had time to dig
into the source but maybe one day!)

Sincerely,
Forrest Stevens

--
Ph.D. Candidate, QSE3 IGERT Fellow
Department of Geography
Land Use and Environmental Change Institute
University of Florida
www.clas.ufl.edu/users/forrest


From Roger.Bivand at nhh.no  Tue Feb 12 08:05:50 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 12 Feb 2013 08:05:50 +0100
Subject: [R-sig-Geo] question on the difference between spdep function
 spautolm() and glm() with autocovariate
In-Reply-To: <0F7B6F86D2AFD049B10949D376D8C64A0CF9538D@HARRY.baylor.edu>
References: <0F7B6F86D2AFD049B10949D376D8C64A0CF9538D@HARRY.baylor.edu>
Message-ID: <alpine.LRH.2.03.1302120757080.8611@reclus.nhh.no>

On Tue, 12 Feb 2013, Li, Han wrote:

> Dear list,
>
> I am currently working on spatial autoregression modeling for my 
> dissertation research. I want to use regression models to identify 
> socioeconomic/landscape variables (15 total, var1$bat_survey - 
> var15$bay_survey) that can affect the presence/absence of bats 
> (p/a$bat_survey). Since spatial autocorrelation exists in my P/A data, I 
> tried different spatial models.
>
> My question is:
>
> If I use the same way (same neighboring criteria, same weight style) to 
> define neighbors, and build model #1 spatial simultaneous autoregression 
> model (SAR) by function spautolm(), and model #2 glm() with 
> autocovariate generated by function autocov_dist(), should I expect the 
> same result, or not?

No, because obviously they are different models:

spautolm: y = Xb + u, u = lambda W u + e, e ~ N(0, sigma2 I)

glm+auto: y = rho W y + Xb + e

Interpreting the latter is subject to great difficulty (see ?impacts) 
because the DGP is:

(I - rho W) y = Xb + e,

y = (I - rho W)^{-1} (Xb + e)

so the b coefficients cannot be interpreted directly. In addition, the glm 
estimate of rho is biassed because it is not constrained to its feasible 
range (so that (I - rho W) can be inverted).

Using geo-additive models, ML in the spautolm case, or others, is easier 
to handle because the fitted coefficients don't interact. It is only in 
some settings that the observations interact with each other directly, 
more often the autocorrelation is in the residuals.

Hope this clarifies,

Roger

>
> I understood that if I use glm() with autocovariate it will include one 
> more variable (the autocovariate) in the result. I also learned that 
> glm() is more a predicting model and spautolm() is more an explanatory 
> model. But I am not sure whether the significant variables selected by 
> these two models will be same.
>
>
> ##r code example##
> model_1 <- spautolm (p/a ~ var1 + var2 + ... + var15, data = bat_survey, 
> listw = neighbor_regime1, family="SAR")
> ####
> autocov_model_2 <- autocov_dist (p/a$bat_survey, xy = coords, style = 
> "W", type = "one")
> model_2 <- glm (p/a ~ var1 + var2 + ... + var15 + autocov_model_2, 
> family = "binomial", data = bat_survey)
>
> Thanks in advance. Your insight will be deeply appreciated.
>
> Han
>
>
> Han Li
> Department of Biology
> Baylor University
> Waco, TX  76798-7388
> Phone: (254) 710-2151
> Fax: (254) 710-2969
> han_li at baylor.edu<mailto:han_li at baylor.edu>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Thierry.ONKELINX at inbo.be  Tue Feb 12 10:17:11 2013
From: Thierry.ONKELINX at inbo.be (ONKELINX, Thierry)
Date: Tue, 12 Feb 2013 09:17:11 +0000
Subject: [R-sig-Geo] GRTS sampling
In-Reply-To: <1360593929427-7582569.post@n2.nabble.com>
References: <1360593929427-7582569.post@n2.nabble.com>
Message-ID: <AA818EAD2576BC488B4F623941DA7427A7A5B31C@inbomail.inbo.be>

Dear Dick,

I have written my own functions for GRTS sampling. The idea is that you create a square matrix with dimensions which are a power of 2. Then it is easy to use a recursive function. The output is a matrix with the order of the cell. Sampling n elements reduces to take the first n elements.

QuadratRanking <- function(Ranking, Level = 0){
  if(ncol(Ranking) > 1){
    Sequence <- sample(0:3)
    Q1 <- QuadratRanking(Ranking[seq_len(nrow(Ranking)) <= nrow(Ranking) / 2, seq_len(ncol(Ranking)) <= ncol(Ranking) / 2, drop = FALSE] + Sequence[1] * 4 ^ Level, Level = Level + 1)
    Q2 <- QuadratRanking(Ranking[seq_len(nrow(Ranking)) > nrow(Ranking) / 2, seq_len(ncol(Ranking)) <= ncol(Ranking) / 2, drop = FALSE] + Sequence[2] * 4 ^ Level, Level = Level + 1)
    Q3 <- QuadratRanking(Ranking[seq_len(nrow(Ranking)) <= nrow(Ranking) / 2, seq_len(ncol(Ranking)) > ncol(Ranking) / 2, drop = FALSE] + Sequence[3] * 4 ^ Level, Level = Level + 1)
    Q4 <- QuadratRanking(Ranking[seq_len(nrow(Ranking)) > nrow(Ranking) / 2, seq_len(ncol(Ranking)) > ncol(Ranking) / 2, drop = FALSE] + Sequence[4] * 4 ^ Level, Level = Level + 1)
    cbind(rbind(Q1, Q2), rbind(Q3, Q4))
  } else {
    Ranking
  }
}
DimGrid <- 2 ^2
QuadratRanking(matrix(0L, ncol = DimGrid, nrow = DimGrid), Level = 0)


Here is a solution when you want to sample within a polygon

GRTS <- function(spPolygon, Precision, Subset = TRUE, RandomStart = TRUE){
  library(sp)
  QuadratRanking <- function(Ranking, Level = 0){
    if(ncol(Ranking) > 1){
      Sequence <- sample(0:3)
      Q1 <- QuadratRanking(Ranking[seq_len(nrow(Ranking)) <= nrow(Ranking) / 2, seq_len(ncol(Ranking)) <= ncol(Ranking) / 2, drop = FALSE] + Sequence[1] * 4 ^ Level, Level = Level + 1)
      Q2 <- QuadratRanking(Ranking[seq_len(nrow(Ranking)) > nrow(Ranking) / 2, seq_len(ncol(Ranking)) <= ncol(Ranking) / 2, drop = FALSE] + Sequence[2] * 4 ^ Level, Level = Level + 1)
      Q3 <- QuadratRanking(Ranking[seq_len(nrow(Ranking)) <= nrow(Ranking) / 2, seq_len(ncol(Ranking)) > ncol(Ranking) / 2, drop = FALSE] + Sequence[3] * 4 ^ Level, Level = Level + 1)
      Q4 <- QuadratRanking(Ranking[seq_len(nrow(Ranking)) > nrow(Ranking) / 2, seq_len(ncol(Ranking)) > ncol(Ranking) / 2, drop = FALSE] + Sequence[4] * 4 ^ Level, Level = Level + 1)
      cbind(rbind(Q1, Q2), rbind(Q3, Q4))
    } else {
      Ranking
    }
  }
  Xrange <- bbox(spPolygon)[1, ]
  Yrange <- bbox(spPolygon)[2, ]
  DimGrid <- ceiling(max(diff(Xrange), diff(Yrange)) / Precision)
  DimGrid <- 2 ^ min(seq_len(100)[2 ^ seq_len(100) > DimGrid])

  GRTS <- QuadratRanking(matrix(0L, ncol = DimGrid, nrow = DimGrid), Level = 0)
  GRTS <- GRTS[seq_len(ceiling(diff(Xrange)/Precision)), seq_len(ceiling(diff(Yrange)/Precision))]
  if(RandomStart){
    GRID <- GridTopology(cellcentre.offset = c(x = min(Xrange), y = min(Yrange)) + runif(2, min = 0, max = Precision), cellsize = c(Precision, Precision), cells.dim = dim(GRTS))
  } else {
    GRID <- GridTopology(cellcentre.offset = c(x = min(Xrange), y = min(Yrange)) + 0.5 * Precision, cellsize = c(Precision, Precision), cells.dim = dim(GRTS))
  }
  GRTS <- SpatialGridDataFrame(grid = GRID, data = data.frame(Ranking = as.vector(GRTS)), proj4string = proj4string(spPolygon))
  rm(GRID)
  if(Subset){
    gc()
    gridded(GRTS) <- FALSE
    GRTS <- GRTS[!is.na(over(GRTS, spPolygon)[, 1]), ]
    GRTS <- GRTS[order(GRTS$Ranking), ]
    GRTS$Ranking <- seq_along(GRTS$Ranking)
  }
  GRTS
}

If anyone would like to add it to a package, please feel free to do so. As long as it released under a GPL like license and properly credited.

Best regards,

Thierry

ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium
+ 32 2 525 02 51
+ 32 54 43 61 85
Thierry.Onkelinx at inbo.be
www.inbo.be

To call in the statistician after the experiment is done may be no more than asking him to perform a post-mortem examination: he may be able to say what the experiment died of.
~ Sir Ronald Aylmer Fisher

The plural of anecdote is not data.
~ Roger Brinner

The combination of some data and an aching desire for an answer does not ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey

-----Oorspronkelijk bericht-----
Van: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] Namens Dick Brus
Verzonden: maandag 11 februari 2013 15:45
Aan: r-sig-geo at r-project.org
Onderwerp: [R-sig-Geo] GRTS sampling

I try to understand the hierarchical randomization as applied in the GRTS design.

I randomized 16 points on a square grid, see R script below. The argument do.sample was set to FALSE, so that the result consists of a dataframe of all 16 points instead of a GRTS sample. When plotting the order of the points it appears that the numbers 1-4 are not always in different subsquares (of which there are four) , for instance points 1 and 3 are both in the lower-right subsquare. What am I doing wrong?

library(spsurvey)

frame<-expand.grid(x=seq(from=1,to=4,by=1),y=seq(from=1,to=4,by=1))

#population size (total number of sampling units in Kandahar)
N<-nrow(frame)

#set number of sampling units (sample size) to be selected
n<-4

design<-list(None=list(panel=c(Panel1=n), seltype="Equal", caty.n=c("Caty 1"=n), over=0)) x<-frame$x y<-frame$y index<-1:N
att<-data.frame(x=x,y=y,ids=index)

#do.sample=FALSE gives all sampling units in hierarchical? randomized order res<-grts(design, DesignID="Site", SiteBegin=1, type.frame="finite",
         src.frame="att.frame", in.shape=NULL, sp.object=NULL, att.frame=att,
         id=NULL, xcoord="x", ycoord="y", stratum=NULL, mdcaty=NULL, startlev=2,
         maxlev=11, maxtry=1000, shift.grid=FALSE, do.sample=rep(FALSE, length(design)),
         shapefile=FALSE, prjfilename=NULL, out.shape="sample")
frame.randomized<-data.frame(res$xcoord,res$ycoord)
names(frame.randomized)<-c("x","y")
frame.randomized$id<-1:N

png(file = "GRTSRandomizedFrameSquare.png", width = 480, height = 480) print(
  ggplot(data = frame.randomized) +
    geom_text(
      data = frame.randomized,
      mapping = aes(
        x = x,
        y = y,
        label = id
      ),
      size = 5
    ) +
    coord_equal()
)
dev.off()

<http://r-sig-geo.2731867.n2.nabble.com/file/n7582569/GRTSRandomizedFrameSquare.png>



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/GRTS-sampling-tp7582569.html
Sent from the R-sig-geo mailing list archive at Nabble.com.

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo
* * * * * * * * * * * * * D I S C L A I M E R * * * * * * * * * * * * *
Dit bericht en eventuele bijlagen geven enkel de visie van de schrijver weer en binden het INBO onder geen enkel beding, zolang dit bericht niet bevestigd is door een geldig ondertekend document.
The views expressed in this message and any annex are purely those of the writer and may not be regarded as stating an official position of INBO, as long as the message is not confirmed by a duly signed document.


From landis at isciences.com  Tue Feb 12 13:52:05 2013
From: landis at isciences.com (Matt Landis)
Date: Tue, 12 Feb 2013 07:52:05 -0500
Subject: [R-sig-Geo] Alternative to zonal for large images
In-Reply-To: <CAEBQMMmuXYU_930ALW2A2mVkHVU5Vo4NniAC6zh7f2kubEMHYQ@mail.gmail.com>
References: <5119BA8F.8060802@amnh.org>
	<CAEBQMMmuXYU_930ALW2A2mVkHVU5Vo4NniAC6zh7f2kubEMHYQ@mail.gmail.com>
Message-ID: <CAE-RneJPrN7U6T_jtew5rAY1bT4QwLmeJ87v34Qy77x1Nqci2Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130212/f8cf0de0/attachment.pl>

From leandrosabade at gmail.com  Tue Feb 12 15:10:45 2013
From: leandrosabade at gmail.com (Leandro Abade)
Date: Tue, 12 Feb 2013 14:10:45 +0000
Subject: [R-sig-Geo] AUC from ENFA model
Message-ID: <CAPcFACHJthfYMEvvU6y3Z4hKx2YyJ15dyC4+sruFhT56Ap4ihw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130212/e3ec599d/attachment.pl>

From jgrn at illinois.edu  Tue Feb 12 15:40:29 2013
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Tue, 12 Feb 2013 08:40:29 -0600
Subject: [R-sig-Geo] R version of gdal_polygonize.py
Message-ID: <CABG0rftfh0hgKacuqpjTRJay2QvSkTJQTji=4NL6M=M8vacdcQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130212/b15c77fc/attachment.pl>

From lyndon.estes at gmail.com  Tue Feb 12 15:49:37 2013
From: lyndon.estes at gmail.com (Lyndon Estes)
Date: Tue, 12 Feb 2013 09:49:37 -0500
Subject: [R-sig-Geo] R version of gdal_polygonize.py
In-Reply-To: <CABG0rftfh0hgKacuqpjTRJay2QvSkTJQTji=4NL6M=M8vacdcQ@mail.gmail.com>
References: <CABG0rftfh0hgKacuqpjTRJay2QvSkTJQTji=4NL6M=M8vacdcQ@mail.gmail.com>
Message-ID: <CALuVVaYMVkqJwwt4Nkk+=FVSu4eFb3x-852=03yhKzae+yyjkw@mail.gmail.com>

Hi Jonathan,

With rasterToPolygons, the dissolve = T argument should do what you
want in terms of merging common value polygons, provided you have
rgeos installed.

I also use the a system call to gdal_polygonize.py, which seems to
help for larger polygons.

runGdalPolygonize <- function(inraster, outshape, attname, readin =
TRUE, gdalformat = "ESRI Shapefile") {
# Runs gdal_polygonize.py to create polygons from raster (with limited
options at present)
# Args:
#   inraster: The name of a raster object referring to a permanent,
GDAL-readable raster
#   outshape: The name of the desired output polygon file
#   attname: The name for the column in the output attribute table
#   gdalformat: Defaults to ESRI shapefile at present
#   readin: Option specifies whether result is read into an R object
or not, defaults to TRUE. Set to FALSE
#     (and don't assign to an object) and it will just write to disk
(useful for when polygons are very large)
# Returns:
#   Polygon file, read back in to an R object
# Notes:
#   This needs to be run within the directory containing the raster file

  py.c <- "python2.7
/Library/Frameworks/GDAL.framework/Versions/1.8/Programs/gdal_polygonize.py"
  rast.nm <- unlist(strsplit(inraster at file@name,
"/"))[length(unlist(strsplit(inraster at file@name, "/")))]
  full.c <- paste(py.c, rast.nm, "-f", paste("'", gdalformat, "'", sep = ""),
                  paste(outshape, ".shp", sep = ""), outshape, attname)
  system(full.c, intern = TRUE)
  if(readin == TRUE) {
    shp <- readOGR(dsn = paste(outshape, ".shp", sep = ""), layer = outshape)
    return(shp)
  }
}

Cheers, Lyndon

On Tue, Feb 12, 2013 at 9:40 AM, Jonathan Greenberg <jgrn at illinois.edu> wrote:
> R-sig-geo'ers:
>
> Continuing on my quest to *precisely* reproject/resize a categorical raster
> where the output cell is the category which has the maximum areal cover of
> that cell (this is not the same as nearest neighbor), it is looking more
> and more like the solution is to first convert a class raster to a polygon
> surface, reproject/resize, then re-rasterize the output.
>
> As such, is there a function within R that does this?  I see raster has the
> "rasterToPolygons" but as far as I can tell, this produces one polygon per
> cell (e.g. it doesn't merge the cells if they contain the same values --
> Robert, correct me if I'm wrong here) -- this could cause some memory
> issues, I imagine, on some big files.  I'm looking for something like
> what gdal_polygonize.py
> does.
>
> Any thoughts?
>
> --j
>
> --
> Jonathan A. Greenberg, PhD
> Assistant Professor
> Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
> Department of Geography and Geographic Information Science
> University of Illinois at Urbana-Champaign
> 607 South Mathews Avenue, MC 150
> Urbana, IL 61801
> Phone: 217-300-1924
> http://www.geog.illinois.edu/~jgrn/
> AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From laci_gon at yahoo.com  Tue Feb 12 16:23:08 2013
From: laci_gon at yahoo.com (laszlo gondor)
Date: Tue, 12 Feb 2013 07:23:08 -0800 (PST)
Subject: [R-sig-Geo] gwrk - kriging with gwr trend component
Message-ID: <1360682588.9945.YahooMailNeo@web160604.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130212/19b1f743/attachment.pl>

From etiennebr at gmail.com  Tue Feb 12 17:01:49 2013
From: etiennebr at gmail.com (Etienne B. Racine)
Date: Tue, 12 Feb 2013 11:01:49 -0500
Subject: [R-sig-Geo] Alternative to zonal for large images
In-Reply-To: <CAE-RneJPrN7U6T_jtew5rAY1bT4QwLmeJ87v34Qy77x1Nqci2Q@mail.gmail.com>
References: <5119BA8F.8060802@amnh.org>
	<CAEBQMMmuXYU_930ALW2A2mVkHVU5Vo4NniAC6zh7f2kubEMHYQ@mail.gmail.com>
	<CAE-RneJPrN7U6T_jtew5rAY1bT4QwLmeJ87v34Qy77x1Nqci2Q@mail.gmail.com>
Message-ID: <CALjAYt5edbQWSFbNWyrG7MkKm-ZY2oyWr_ThVetRivRs-5n_HQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130212/b1ef2706/attachment.pl>

From milansharma2012 at yahoo.com  Tue Feb 12 17:21:52 2013
From: milansharma2012 at yahoo.com (Milan Sharma)
Date: Tue, 12 Feb 2013 08:21:52 -0800 (PST)
Subject: [R-sig-Geo] residuals of gwr and ols
Message-ID: <1360686112.37636.YahooMailNeo@web162104.mail.bf1.yahoo.com>

Dear all,
I?fitted gwr and ols and I was expecting that residuals for gwr will be?smaller than that of ols. But, my result? (copied below) is kind of mixed. Some ols residuals are smaller than gwr, some are not.
Is it because of small samples? or anything else?
Milan
???? -0.136016648? 1.101457156 -1.578367473? 0.105823902? 2.564813044
?[6]? 2.180718179? 0.045675369 -4.507514803 -1.292321914 -2.485451077
[11] -0.368047977? 1.691501792? 2.684117999 -0.556613862 -0.289227113
[16] -0.155533739 -0.021840369 -0.021840369? 2.173046587 -3.416457929
[21]? 0.151411146? 0.724629941 -2.876030643? 1.023334130? 0.918531627
[26] -1.376270203 -2.474632837? 3.183919800 -0.177862432? 0.022877635
[31] -2.141706576 -0.869152125? 0.319373467 -1.648694491 -2.915420257
[36]? 0.116417634 -2.337159270? 1.938201163? 2.738647354? 2.644367167
[41]? 2.550086985 -1.423905997? 1.982824142? 1.790273664 -0.748049508
[46] -3.107517323 -3.971182584? 0.681914115? 3.726619604? 4.143072934
[51] -2.249552558 -2.790999526 -0.005880056? 1.960107982? 0.604239516
[56]? 0.926852572? 1.894691740? 1.249465628 -0.917200873 -2.698823361
[61] -1.599490524? 1.874868510? 2.846065630 -0.201141839? 1.391264890
[66] -2.591306751
> res.adpt$SDF$gwr.e
?[1]? 0.003574804? 0.401173060 -0.098673920 -0.398602560? 0.388960727
?[6]? 1.176528697? 1.249810375 -3.083140986? 0.875553761 -2.149192311
[11] -0.104606457 -0.027614179? 0.571800125 -2.374157297? 0.742099604
[16]? 0.287192964 -0.250966065 -0.402284402? 0.189696242 -1.393609850
[21]? 0.051342940? 0.566711177 -1.692136783? 1.043811603 -0.771654807
[26] -0.055346083? 0.122587447? 1.031404349? 0.173498890 -0.033888702
[31] -0.301781064 -0.189544419 -0.148000181 -1.282745180 -1.208561844
[36]? 0.499945507 -0.199431072? 0.152781739? 0.351565548? 3.161790009
[41] -0.105187439? 0.166309039? 0.581371048 -0.140668745 -0.982077223
[46] -0.657665352 -1.891088552 -0.496321984? 1.332209404? 1.874694434
[51]? 0.079247599 -1.043226527? 0.523089114? 0.420164685? 0.021321941
[56]? 1.907471032? 1.183379281? 2.591380013 -0.333712724 -0.996557548
[61] -0.214775620 -0.266639348? 0.208623714? 0.367054376 -0.013960720
[66]? 0.196095634



From giuseppe.amatulli at gmail.com  Tue Feb 12 18:40:33 2013
From: giuseppe.amatulli at gmail.com (Giuseppe Amatulli)
Date: Tue, 12 Feb 2013 11:40:33 -0600
Subject: [R-sig-Geo] Alternative to zonal for large images
In-Reply-To: <CALjAYt5edbQWSFbNWyrG7MkKm-ZY2oyWr_ThVetRivRs-5n_HQ@mail.gmail.com>
References: <5119BA8F.8060802@amnh.org>
	<CAEBQMMmuXYU_930ALW2A2mVkHVU5Vo4NniAC6zh7f2kubEMHYQ@mail.gmail.com>
	<CAE-RneJPrN7U6T_jtew5rAY1bT4QwLmeJ87v34Qy77x1Nqci2Q@mail.gmail.com>
	<CALjAYt5edbQWSFbNWyrG7MkKm-ZY2oyWr_ThVetRivRs-5n_HQ@mail.gmail.com>
Message-ID: <CAKoiDHK4SZSbT4dqPQnQx+5C3vWWF6hGz_OgQE=ivvn5kE9aNw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130212/e463ddd7/attachment.pl>

From roosbeh.nowrouzian at gmail.com  Tue Feb 12 21:11:51 2013
From: roosbeh.nowrouzian at gmail.com (Roosbeh Nowrouzian)
Date: Tue, 12 Feb 2013 15:11:51 -0500
Subject: [R-sig-Geo] ggwr object from ggwr, p-values.Se values?
Message-ID: <CAJw-hPZ3VbkUgAN99jjjbLK4uvwsMyAKR4on4bt5LLX6v7zRvA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130212/0d7cd7c7/attachment.pl>

From oscar.perpinan at gmail.com  Wed Feb 13 00:30:36 2013
From: oscar.perpinan at gmail.com (Oscar =?utf-8?B?UGVycGnDscOhbg==?= Lamigueiro)
Date: Wed, 13 Feb 2013 00:30:36 +0100
Subject: [R-sig-Geo] Alternative to zonal for large images
In-Reply-To: <CAKoiDHK4SZSbT4dqPQnQx+5C3vWWF6hGz_OgQE=ivvn5kE9aNw@mail.gmail.com>
References: <5119BA8F.8060802@amnh.org>,
	<CAEBQMMmuXYU_930ALW2A2mVkHVU5Vo4NniAC6zh7f2kubEMHYQ@mail.gmail.com>,
	<CAE-RneJPrN7U6T_jtew5rAY1bT4QwLmeJ87v34Qy77x1Nqci2Q@mail.gmail.com>,
	<CALjAYt5edbQWSFbNWyrG7MkKm-ZY2oyWr_ThVetRivRs-5n_HQ@mail.gmail.com>,
	<CAKoiDHK4SZSbT4dqPQnQx+5C3vWWF6hGz_OgQE=ivvn5kE9aNw@mail.gmail.com>
Message-ID: <877gmd3yar.fsf@gmail.com>

Hello,

I think that the combination of the raster and data.table packages can
be really useful. For example, here it is a very simplified version of
zonal using the data.table methods. It provides the same results about
10 times faster.

Best,

Oscar.

-- 
Oscar Perpi??n Lamigueiro
Dpto. Ingenier?a El?ctrica
EUITI-UPM
URL: http://procomun.wordpress.com
Twitter: @oscarperpinan

----------------------------------------------------------------
library(data.table)

myZonal <- function (x, z, stat = "mean", digits = 0, na.rm = TRUE, 
                     ...) {
  fun <- match.fun(stat)
  vals <- getValues(x)
  zones <- round(getValues(z), digits = digits)
  rDT <- data.table(vals, z=zones)
  setkey(rDT, z)
  rDT[, lapply(.SD, fun), by=z]
}

## A RasterLayer with 1e6 cells
r <- raster(ncols=1000, nrows=1000)
r[] <- runif(ncell(r)) * 1:ncell(r)
z <- r
z[] <- rep(1:10, each=ncell(r)/10)

> system.time(print(zonal(r, z)))
      zone    "mean"
 [1,]    1  24936.45
 [2,]    2  75138.38
 [3,]    3 124880.63
 [4,]    4 175018.38
 [5,]    5 224632.18
 [6,]    6 274356.22
 [7,]    7 325141.16
 [8,]    8 375625.27
 [9,]    9 424195.16
[10,]   10 474595.73
   user  system elapsed 
  3.988   0.220   4.215 
> system.time(print(myZonal(r, z)))
     z      vals
 1:  1  24936.45
 2:  2  75138.38
 3:  3 124880.63
 4:  4 175018.38
 5:  5 224632.18
 6:  6 274356.22
 7:  7 325141.16
 8:  8 375625.27
 9:  9 424195.16
10: 10 474595.73
   user  system elapsed 
  0.464   0.024   0.489 

## Now with a RasterBrick
s <- brick(r, nl=4)
s[] <- runif(ncell(s)*4)

> system.time(print(zonal(s, z)))
      zone   layer.1   layer.2   layer.3   layer.4
 [1,]    1 0.4986786 0.5007106 0.5001397 0.4994188
 [2,]    2 0.4993135 0.5009089 0.5006163 0.5001419
 [3,]    3 0.4989671 0.5013064 0.4983836 0.5004493
 [4,]    4 0.5005992 0.5009225 0.4971442 0.4999080
 [5,]    5 0.4998065 0.4989140 0.5000887 0.5014669
 [6,]    6 0.5010002 0.5008529 0.4987527 0.5012223
 [7,]    7 0.5002876 0.5006790 0.4982280 0.4999350
 [8,]    8 0.5006809 0.4997827 0.5000287 0.4995565
 [9,]    9 0.4993470 0.5010943 0.5005641 0.5003999
[10,]   10 0.4994278 0.4991750 0.4978472 0.5003966
   user  system elapsed 
 10.009   0.560  10.584 
> system.time(print(myZonal(s, z)))
     z   layer.1   layer.2   layer.3   layer.4
 1:  1 0.4986786 0.5007106 0.5001397 0.4994188
 2:  2 0.4993135 0.5009089 0.5006163 0.5001419
 3:  3 0.4989671 0.5013064 0.4983836 0.5004493
 4:  4 0.5005992 0.5009225 0.4971442 0.4999080
 5:  5 0.4998065 0.4989140 0.5000887 0.5014669
 6:  6 0.5010002 0.5008529 0.4987527 0.5012223
 7:  7 0.5002876 0.5006790 0.4982280 0.4999350
 8:  8 0.5006809 0.4997827 0.5000287 0.4995565
 9:  9 0.4993470 0.5010943 0.5005641 0.5003999
10: 10 0.4994278 0.4991750 0.4978472 0.5003966
   user  system elapsed 
  0.652   0.284   0.939


From forrest at ufl.edu  Wed Feb 13 01:11:07 2013
From: forrest at ufl.edu (Forrest Stevens)
Date: Tue, 12 Feb 2013 19:11:07 -0500
Subject: [R-sig-Geo] Alternative to zonal for large images
In-Reply-To: <877gmd3yar.fsf@gmail.com>
References: <5119BA8F.8060802@amnh.org>
	<CAEBQMMmuXYU_930ALW2A2mVkHVU5Vo4NniAC6zh7f2kubEMHYQ@mail.gmail.com>
	<CAE-RneJPrN7U6T_jtew5rAY1bT4QwLmeJ87v34Qy77x1Nqci2Q@mail.gmail.com>
	<CALjAYt5edbQWSFbNWyrG7MkKm-ZY2oyWr_ThVetRivRs-5n_HQ@mail.gmail.com>
	<CAKoiDHK4SZSbT4dqPQnQx+5C3vWWF6hGz_OgQE=ivvn5kE9aNw@mail.gmail.com>
	<877gmd3yar.fsf@gmail.com>
Message-ID: <CAEBQMMmSGK8-PPGjy+R1sGbsW_oyPgunD_ahwbgC3b==56w6cA@mail.gmail.com>

On Tue, Feb 12, 2013 at 6:30 PM, Oscar Perpi??n Lamigueiro
<oscar.perpinan at gmail.com> wrote:
> Hello,
>
> I think that the combination of the raster and data.table packages can
> be really useful. For example, here it is a very simplified version of
> zonal using the data.table methods. It provides the same results about
> 10 times faster.

That's very useful to know, thanks very much for sharing the code
Oscar.  Along a similar vein, has anyone tested the fastest way to
convert polygons to a raster object?  This also seems to be a
significant bottle-neck in the R raster toolchain and is usually the
first step for generating per-zone summary statistics in the
applications I work with.

Forrest


From Han_Li at baylor.edu  Wed Feb 13 01:47:03 2013
From: Han_Li at baylor.edu (Li, Han)
Date: Wed, 13 Feb 2013 00:47:03 +0000
Subject: [R-sig-Geo] question on the difference between spdep function
 spautolm() and glm() with autocovariate
In-Reply-To: <alpine.LRH.2.03.1302120757080.8611@reclus.nhh.no>
References: <0F7B6F86D2AFD049B10949D376D8C64A0CF9538D@HARRY.baylor.edu>,
	<alpine.LRH.2.03.1302120757080.8611@reclus.nhh.no>
Message-ID: <0F7B6F86D2AFD049B10949D376D8C64A0CF954A2@HARRY.baylor.edu>

Hey Roger, thank you very much for your explanation. I found out from R help that errorsarlm() and spautolm(..., family="SAR") do the same analysis. So I was afraid this (two functions using the same model and doing the same analysis) might happen somewhere else. I never took any regression analysis or spatial statistic class. In general I have been using your book Applied Spatial Data Analysis with R as the guide.

I have this following question:
You mentioned that the model for glm()+auto is  y = rho W y + Xb + e
Based on what I know, this is also the model for function lagsarlm()
So do glm()+auto and lagsarlm() do the same/similar analysis?

The second question is:
If I use several different models, for example here, I used CAR, SAR, glm()+auto, and lagsarlm(), is it wise to use AIC to decide which model fits my data better? Based on your previous explanation, I understand now glm()+auto will cause problems to interpret the coefficients. But how about CAR and SAR, or lagsarlm(), assuming it is different from glm()+auto?

Also after trying all these models (SAR, CAR, glm()+auto, and lagsarlm()), if some variables are significant in all of these models, can I interpret that these variables are more important than other variables which are only significant in one or two models?
For example, variable 1 is significant in all 4 models for predicting the presence of bats; variable 2 is only significant in SAR. Can I say that variable 1 is more important than variable 2? I would like to point out that my research is about bats in urban environment. There is very little biological information to help me interpret the results.

Thanks again.

Han



Han Li
Ph.D. Candidate
Department of Biology
Baylor University
Waco, TX  76798-7388
Phone: (254) 710-2151
Fax: (254) 710-2969
han_li at baylor.edu<mailto:han_li at baylor.edu>




________________________________________
From: Roger Bivand [Roger.Bivand at nhh.no]
Sent: Tuesday, February 12, 2013 1:05 AM
To: Li, Han
Cc: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] question on the difference between spdep function spautolm() and glm() with autocovariate

On Tue, 12 Feb 2013, Li, Han wrote:

> Dear list,
>
> I am currently working on spatial autoregression modeling for my
> dissertation research. I want to use regression models to identify
> socioeconomic/landscape variables (15 total, var1$bat_survey -
> var15$bay_survey) that can affect the presence/absence of bats
> (p/a$bat_survey). Since spatial autocorrelation exists in my P/A data, I
> tried different spatial models.
>
> My question is:
>
> If I use the same way (same neighboring criteria, same weight style) to
> define neighbors, and build model #1 spatial simultaneous autoregression
> model (SAR) by function spautolm(), and model #2 glm() with
> autocovariate generated by function autocov_dist(), should I expect the
> same result, or not?

No, because obviously they are different models:

spautolm: y = Xb + u, u = lambda W u + e, e ~ N(0, sigma2 I)

glm+auto: y = rho W y + Xb + e

Interpreting the latter is subject to great difficulty (see ?impacts)
because the DGP is:

(I - rho W) y = Xb + e,

y = (I - rho W)^{-1} (Xb + e)

so the b coefficients cannot be interpreted directly. In addition, the glm
estimate of rho is biassed because it is not constrained to its feasible
range (so that (I - rho W) can be inverted).

Using geo-additive models, ML in the spautolm case, or others, is easier
to handle because the fitted coefficients don't interact. It is only in
some settings that the observations interact with each other directly,
more often the autocorrelation is in the residuals.

Hope this clarifies,

Roger

>
> I understood that if I use glm() with autocovariate it will include one
> more variable (the autocovariate) in the result. I also learned that
> glm() is more a predicting model and spautolm() is more an explanatory
> model. But I am not sure whether the significant variables selected by
> these two models will be same.
>
>
> ##r code example##
> model_1 <- spautolm (p/a ~ var1 + var2 + ... + var15, data = bat_survey,
> listw = neighbor_regime1, family="SAR")
> ####
> autocov_model_2 <- autocov_dist (p/a$bat_survey, xy = coords, style =
> "W", type = "one")
> model_2 <- glm (p/a ~ var1 + var2 + ... + var15 + autocov_model_2,
> family = "binomial", data = bat_survey)
>
> Thanks in advance. Your insight will be deeply appreciated.
>
> Han
>
>
> Han Li
> Department of Biology
> Baylor University
> Waco, TX 76798-7388
> Phone: (254) 710-2151
> Fax: (254) 710-2969
> han_li at baylor.edu<mailto:han_li at baylor.edu>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

--
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From rteurlaimag at yahoo.fr  Wed Feb 13 02:21:33 2013
From: rteurlaimag at yahoo.fr (Teurlai Magali)
Date: Wed, 13 Feb 2013 01:21:33 +0000 (GMT)
Subject: [R-sig-Geo] problem reading large ncdf on windows 7 64 bits
Message-ID: <1360718493.33962.YahooMailNeo@web133106.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130213/58c42629/attachment.pl>

From Tom_Roche at pobox.com  Wed Feb 13 05:59:08 2013
From: Tom_Roche at pobox.com (Tom Roche)
Date: Tue, 12 Feb 2013 23:59:08 -0500
Subject: [R-sig-Geo] raster:::.rasterObjectFromCDF,
 was: [raster] problem with large netCDF file
References: <CANtt_hzLFc0YgUNgC7o-sFXAcZeJtoXCBJuGLHWvtad4+BAuDA@mail.gmail.com>
	<87obfsj6ui.fsf@pobox.com>
	<CANtt_hxkSGRTUj7kUE==5RBbhh=QAH=bM1N0UCR12ugPgy7aPw@mail.gmail.com>
	<87liaukb9t.fsf@pobox.com>
Message-ID: <87a9r8kdwj.fsf@pobox.com>


summary: what are the semantics of 'band', 'level', and 'lvar' in
`raster:::.rasterObjectFromCDF` (et al)?

details:

https://stat.ethz.ch/pipermail/r-sig-geo/2013-February/017441.html
> > system('ls -alh ./METCRO3D_080101')
> -r--r--r-- 1 me mygroup 5.3G Jan  8 11:32 ./METCRO3D_080101
> > system('ls -alh ./METCRO3D_080101.nc')
> lrwxrwxrwx 1 me mygroup 17 Feb 10 13:46 ./METCRO3D_080101.nc -> ./METCRO3D_080101
> > raster('./METCRO3D_080101', varname='ZF')
...
> Error in .local(.Object, ...) : 
>   `[...]/METCRO3D_080101' not recognised as a supported file format.

https://stat.ethz.ch/pipermail/r-sig-geo/2013-February/017454.html
> For now, the workaround you can use is this function

> raster:::.rasterObjectFromCDF(filename, varname='', band=NA,
> type='RasterLayer', lvar=3, level=0, warn=TRUE, ...)

I'm apparently not understanding the semantics of 'band', and possibly
'level', and 'lvar' (all of which I'm guessing `raster` is designed to
protect me from :-) As noted above, my datavar='ZF' of interest is in
netCDF='./METCRO3D_080101', which is

> > system(sprintf('ncdump -h %s', template.raw.fp))
> netcdf METCRO3D_080101 {
> dimensions:
>         TSTEP = UNLIMITED ; // (25 currently)
TSTEP is the time dimension
>         DATE-TIME = 2 ;
>         LAY = 24 ;
LAY is the vertical dimension
>         VAR = 17 ;
>         ROW = 299 ;
>         COL = 459 ;
ROW and COL are the horizontal dimensions
> variables:

... followed by 10 datavars (none of which are coordinate variables),
then ...

>         float ZF(TSTEP, LAY, ROW, COL) ;
>                 ZF:long_name = "ZF              " ;
>                 ZF:units = "M               " ;
>                 ZF:var_desc = "full-layer height above ground" ;

... followed by 7 more datavars (none of which are coordinate
variables), then many global attributes (of which this convention,
IOAPI, is inordinately fond :-) So I tried

> raster:::.rasterObjectFromCDF(
+   './METCRO3D_080101', varname='ZF',
+   band=11,  # datavar=ZF is 11th reported by `ncdump -h`
+   level=1,  # "4th dimension variable" in (TSTEP, LAY, ROW, COL)
+   lvar=2,   # "3rd dimension variable" in (TSTEP, LAY, ROW, COL)
+   type='RasterLayer', warn=TRUE)
class       : RasterLayer 
band        : 11 
dimensions  : 299, 459, 137241  (nrow, ncol, ncell)
resolution  : 1, 1  (x, y)
extent      : 0.5, 459.5, 0.5, 299.5  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0 
data source : ./METCRO3D_080101 
names       : ZF 
z-value     : 11 
zvar        : ZF 
level       : 1 

But if I do

system('mv ./METCRO3D_080101 ./METCRO3D_080101.nc')
raster('./METCRO3D_080101.nc', varname='ZF')

I get

class       : RasterLayer 
band        : 1 
dimensions  : 299, 459, 137241  (nrow, ncol, ncell)
resolution  : 1, 1  (x, y)
extent      : 0.5, 459.5, 0.5, 299.5  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0 
data source : [...]/METCRO3D_080101.nc 
names       : ZF 
z-value     : 1 
zvar        : ZF 
level       : 1 

which is almost the same, but not quite. It seems my 'band' value is
wrong, so I'd like to know how to determine the appropriate value; I'd
also like to know if my comments above correctly reflect the semantics
of 'level' and 'lvar'. Unfortunately I'm not quite getting this from
raster.pdf, and the source for raster:::.rasterObjectFromCDF seems quite
inscrutable (YMMV :-)

TIA, Tom Roche <Tom_Roche at pobox.com>


From kridox at ymail.com  Wed Feb 13 07:42:31 2013
From: kridox at ymail.com (Pascal Oettli)
Date: Wed, 13 Feb 2013 15:42:31 +0900
Subject: [R-sig-Geo] problem reading large ncdf on windows 7 64 bits
In-Reply-To: <1360718493.33962.YahooMailNeo@web133106.mail.ir2.yahoo.com>
References: <1360718493.33962.YahooMailNeo@web133106.mail.ir2.yahoo.com>
Message-ID: <511B35D7.2050906@ymail.com>

Hello,

Which version of NetCDF binaries are you using?

Regards,
Pascal


Le 13/02/2013 10:21, Teurlai Magali a ?crit :
> Hi all,
>
> After reading this help post:
> https://stat.ethz.ch/pipermail/r-help/2011-November/297141.html
>
> I think I have the
>
> "issue in the Windows 64-bit NetCDF external dependency"
>
> and would like to know whether it is possible to fix it, or whether I
> should change computer to solve my problem (which could take some time,
> given I have a lot of files to transfer and process).
>
> Here is my problem :
> - I have to read a large ncdf file (3.8 gigas)
> - I have 20 variables in it, each variable's dimension is  250 (lon ) * 270 (lat) * 730 (time)
> - My computer uses windows 7 64 bit
> - I have installed R version 2.15.2 (64 bits)
>
> - I am using the ncdf library, the open.ncdf function works fine.
> - I use function get.var.ncdf to retrieve the variables.
>
> - when I read the ncdf one time step at a time, it reads ok  from time steps 1 to 418
> - R crashes whenever I try to read any of the variables for a time step
>   >= 419 (no matter how much I "zoom" the spatial dimensions, and even
>   if I try to read only one time step over a small spatial extent)
> with the following message :
>
> "Microsoft Visual C++ Runtime Library:
> This application has requested the Runtime to terminate it in an unusual way.
> Please contact the application's support team for more information"
>
> On another computer (runing linux) :
> - ferret is able to retrieve an entire variable
> - matlab is able to retrieve an entire variable
> - R is able to retrieve an entire variable (not a problem of memory)
> - if we cut the ncdf to include only the 418 first time steps, the new ncdf is then... 2.0 gigas
>
> On my computer:
> - if I use a ncdf that has been "cut" spatially on another computer, I
> can extract any entire variable, over the 730 time steps (the new ncdf is then 1.8 Gigas instead of
> 3.8 gigas)
> - if I use a ncdf that keeps all the spatial information, and all the
> time steps, but with only one variable in it, I can read this entire
> variable (the new ncdf is then 800 megas)
>
> So it looks as if R were having trouble extracting variables from ncdf files of more than 2 gigas when runing under windows.
>
> - Has anyone got any explanation for this (I thought the big advantage of working wth ncdf files was the possibility to handle huge files, because R does not have to read the entire file, to read time step 419, is R putting all the previous information into memory ?)
>
> - Is there a way to fix this ? (or should I process all my files on another computer ?)
>
> Thank you in advance for all your answers.
>
> Magali
>
>
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From Roger.Bivand at nhh.no  Wed Feb 13 09:53:19 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 13 Feb 2013 09:53:19 +0100
Subject: [R-sig-Geo] ggwr object from ggwr, p-values.Se values?
In-Reply-To: <CAJw-hPZ3VbkUgAN99jjjbLK4uvwsMyAKR4on4bt5LLX6v7zRvA@mail.gmail.com>
References: <CAJw-hPZ3VbkUgAN99jjjbLK4uvwsMyAKR4on4bt5LLX6v7zRvA@mail.gmail.com>
Message-ID: <alpine.LRH.2.03.1302130948400.6609@reclus.nhh.no>

On Tue, 12 Feb 2013, Roosbeh Nowrouzian wrote:

> Dear List members:
>
> I estimated a GGWR object(quasi Poisson). But I cant find corresponding
> p-value or Standard error values for estimated coefficients. Is there any
> way to pull those values out. To infer which one is significant which one
> is not.

Please always state which package(s) you have used, and which versions - 
that is the output of sessionInfo(). Assuming that you may mean ggwr() in 
spgwr, these are not provided as there is no established way of knowing 
what the effective degrees of freedom are.

In general, unless you are basing your understanding of GWR on Paez et al. 
2011, your work should be desk rejected by any reputable journal, so 
asking whether the GWR coefficients are significant is an unusual 
question, because nobody knows what significance means in this context.

Roger

> I appreciate your help.
>
> Roosbeh Nowrouzian
>
> PhD student
> University of Florida
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Wed Feb 13 10:02:21 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 13 Feb 2013 10:02:21 +0100
Subject: [R-sig-Geo] residuals of gwr and ols
In-Reply-To: <1360686112.37636.YahooMailNeo@web162104.mail.bf1.yahoo.com>
References: <1360686112.37636.YahooMailNeo@web162104.mail.bf1.yahoo.com>
Message-ID: <alpine.LRH.2.03.1302130958170.6609@reclus.nhh.no>

On Tue, 12 Feb 2013, Milan Sharma wrote:

> Dear all,

> I?fitted gwr and ols and I was expecting that residuals for gwr will 
> be?smaller than that of ols. But, my result? (copied below) is kind of 
> mixed. Some ols residuals are smaller than gwr, some are not.

In general, unless you are basing your understanding of GWR on Paez et al.
2011, your work should be desk rejected by any reputable journal. They 
specifically state that their tests on GWR with n < 160 show that it 
should never be used on data sets of this size or smaller.

My guess would be that there is no non-stationarity in your covariates. 
You could try the gwrr package to check whether your output is being 
driven by induced collinearity (when the bandwidth is small, the kernel 
downweights all but very close observations, which, given positive spatial 
autocorrelation, will have very similar values on the response and 
covariates).

Roger

> Is it because of small samples? or anything else?
> Milan
> ???? -0.136016648? 1.101457156 -1.578367473? 0.105823902? 2.564813044
> ?[6]? 2.180718179? 0.045675369 -4.507514803 -1.292321914 -2.485451077
> [11] -0.368047977? 1.691501792? 2.684117999 -0.556613862 -0.289227113
> [16] -0.155533739 -0.021840369 -0.021840369? 2.173046587 -3.416457929
> [21]? 0.151411146? 0.724629941 -2.876030643? 1.023334130? 0.918531627
> [26] -1.376270203 -2.474632837? 3.183919800 -0.177862432? 0.022877635
> [31] -2.141706576 -0.869152125? 0.319373467 -1.648694491 -2.915420257
> [36]? 0.116417634 -2.337159270? 1.938201163? 2.738647354? 2.644367167
> [41]? 2.550086985 -1.423905997? 1.982824142? 1.790273664 -0.748049508
> [46] -3.107517323 -3.971182584? 0.681914115? 3.726619604? 4.143072934
> [51] -2.249552558 -2.790999526 -0.005880056? 1.960107982? 0.604239516
> [56]? 0.926852572? 1.894691740? 1.249465628 -0.917200873 -2.698823361
> [61] -1.599490524? 1.874868510? 2.846065630 -0.201141839? 1.391264890
> [66] -2.591306751
>> res.adpt$SDF$gwr.e
> ?[1]? 0.003574804? 0.401173060 -0.098673920 -0.398602560? 0.388960727
> ?[6]? 1.176528697? 1.249810375 -3.083140986? 0.875553761 -2.149192311
> [11] -0.104606457 -0.027614179? 0.571800125 -2.374157297? 0.742099604
> [16]? 0.287192964 -0.250966065 -0.402284402? 0.189696242 -1.393609850
> [21]? 0.051342940? 0.566711177 -1.692136783? 1.043811603 -0.771654807
> [26] -0.055346083? 0.122587447? 1.031404349? 0.173498890 -0.033888702
> [31] -0.301781064 -0.189544419 -0.148000181 -1.282745180 -1.208561844
> [36]? 0.499945507 -0.199431072? 0.152781739? 0.351565548? 3.161790009
> [41] -0.105187439? 0.166309039? 0.581371048 -0.140668745 -0.982077223
> [46] -0.657665352 -1.891088552 -0.496321984? 1.332209404? 1.874694434
> [51]? 0.079247599 -1.043226527? 0.523089114? 0.420164685? 0.021321941
> [56]? 1.907471032? 1.183379281? 2.591380013 -0.333712724 -0.996557548
> [61] -0.214775620 -0.266639348? 0.208623714? 0.367054376 -0.013960720
> [66]? 0.196095634
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From jonesmus.mutua at gmail.com  Wed Feb 13 10:25:33 2013
From: jonesmus.mutua at gmail.com (Jonesmus Wambua)
Date: Wed, 13 Feb 2013 12:25:33 +0300
Subject: [R-sig-Geo] Fwd: spatio temporal variogram
In-Reply-To: <CABgQd+MRCuJYuMke9XoZ3uaTgR2g1HG_GoKgnYdGAN6Obd642g@mail.gmail.com>
References: <CABgQd+MRCuJYuMke9XoZ3uaTgR2g1HG_GoKgnYdGAN6Obd642g@mail.gmail.com>
Message-ID: <CABgQd+OJABC+QBhQ4ERBXSSOCVBA1-fx0RO-XVMiLpF3A3hr2w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130213/930de1d9/attachment.pl>

From mark at dimensionaledge.com  Wed Feb 13 12:05:36 2013
From: mark at dimensionaledge.com (Mark Wynter)
Date: Wed, 13 Feb 2013 22:05:36 +1100
Subject: [R-sig-Geo] Least Cost Routing and execGRASS
Message-ID: <A847989A-CF7B-4EFD-A9E6-D8010A0A7C31@dimensionaledge.com>

Is it possible to pipe in values to a GRASS command via execGRASS?  The context is least cost routing and network analysis using the v.net function.

To calculate a least-cost route from directly within GRASS, the syntax is:
# Fastest path: ID as first number, then cat1 and cat2
echo "2 52 27"|v.net.path --overwrite input=network_cat3 at user1 output=path_52_27_db_cost alayer=3 afcolumn=cost

At times it might be necessary to update the GRASS cost table, which again requires the use of a pipe delimiter in the syntax. 
echo "UPDATE network_cat3_3 SET cost=lungh_a/speed/1610" | db.execute

These examples have been drawn from...
http://www.ing.unitn.it/~grass/docs/tutorial_64_en/htdocs/esercitazione/network_analysis/node4.html

Note the use of pipes.  Can these be incorporated within the execGRASS command?  Alternatively, is there another syntax?

Best regards
Mark

From matteo.mattiuzzi at boku.ac.at  Wed Feb 13 13:49:20 2013
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Wed, 13 Feb 2013 13:49:20 +0100
Subject: [R-sig-Geo] R version of gdal_polygonize.py
Message-ID: <511B99DF0200002700018617@gwia2.boku.ac.at>

Hi Jonathan,
for what I understand from your question the main issue is the resizing of the pixels to a larger size. The solution below is 1 not very performant and 2 not fully memory save as polygonToRaster is used again, but maybe you find something usefull. 
Matteo


# largest area function (is definitively slow!)
maj <- function(x) {as.numeric(names(which.max(tapply(INDEX=x[,1],X=x[,2],FUN=sum,na.rm=TRUE))[1]))} # important, this function returns NULL if in the extraction area there is no raster value available!


# source raster
r   <- raster(nrow=20, ncol=20, xmn=-15, xmx=17, ymn=40, ymx=50)
r[] <- round(runif(ncell(r),1,2))


# target raster
trs <- "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181 +b=6371007.181 +units=m +no_defs"
t   <- projectExtent(r,trs)
dim(t) <- c(10,10,1)
poly <- rasterToPolygons(t) # here maybe use the gdal_polygonize.py instead


# beginCluster()
# mj <- extract(r,poly,fun=maj,weights=T) # would be nice if it would work like that, but 'fun' argument must be a vector and with weights=T it becomes a matrix, I think thats the reason! So:
mj  <- extract(r, poly,weights=T) # You can make this also memory save by extracting only a sequence in poly
t[] <- sapply(mj, FUN=maj)


writeRaster(r,"./r.tif",NAflag=0)
writeRaster(t,"./t.tif",NAflag=0)
shapefile(poly,filename="./pols.shp")




>>> Jonathan Greenberg  02/12/13 3:41 PM >>>
R-sig-geo'ers:

Continuing on my quest to *precisely* reproject/resize a categorical raster
where the output cell is the category which has the maximum areal cover of
that cell (this is not the same as nearest neighbor), it is looking more
and more like the solution is to first convert a class raster to a polygon
surface, reproject/resize, then re-rasterize the output.

As such, is there a function within R that does this?  I see raster has the
"rasterToPolygons" but as far as I can tell, this produces one polygon per
cell (e.g. it doesn't merge the cells if they contain the same values --
Robert, correct me if I'm wrong here) -- this could cause some memory
issues, I imagine, on some big files.  I'm looking for something like
what gdal_polygonize.py
does.

Any thoughts?

--j

-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 217-300-1924
http://www.geog.illinois.edu/~jgrn/
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007

    [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From HodgessE at uhd.edu  Wed Feb 13 14:31:24 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Wed, 13 Feb 2013 13:31:24 +0000
Subject: [R-sig-Geo] Fwd: spatio temporal variogram
In-Reply-To: <CABgQd+OJABC+QBhQ4ERBXSSOCVBA1-fx0RO-XVMiLpF3A3hr2w@mail.gmail.com>
References: <CABgQd+MRCuJYuMke9XoZ3uaTgR2g1HG_GoKgnYdGAN6Obd642g@mail.gmail.com>,
	<CABgQd+OJABC+QBhQ4ERBXSSOCVBA1-fx0RO-XVMiLpF3A3hr2w@mail.gmail.com>
Message-ID: <FF9DB805FC41CC4E95825A50F68063021291A70F@challenger.uhd.campus>

Hi!

When you make your shift from the first data set to the second, set it up such the the X1 - X4 are time series.

For instance, if your data frame is called d1.df,
d1.df$X1 <- ts(d1.df$X1,start=1981,freq=12)
(for monthly data)

Hope this helps!

Sincerely,
Erin

________________________________________
From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Jonesmus Wambua [jonesmus.mutua at gmail.com]
Sent: Wednesday, February 13, 2013 3:25 AM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] Fwd: spatio temporal variogram

Hi everyone,
am trying to do temporal and cross correlation and also fit a
spatio-temporal variogram with data in this format.

 |           ID year   y  X_COORD  Y_COORD
        1   1  1981   60  36.98203  2.042057
        2   2  1982   40  37.12720  2.016312
        3   2  1983   20  37.12720  2.016312
        4   3  1980  165  35.38416  1.714100
        5   3  1981   26  35.38416  1.714100
        6   3  1982   50  35.38416  1.714100|

My challenge is getting the data in the right format. my years are only 5
but with over 500 cluster points. I have summarized the data by adding the
data for each cluster per year so that my data now looks like below

 year X1 X2 X3 X4
1 1980 NA NA  3 NA
2 1981  1 NA  2  5
3 1982 NA  0  0 NA
4 1983 NA  0 NA NA
5 1984 NA NA NA NA


where X1 are my clusters. when i tried to do a autocorrelation using the
following code,
acf(na.omit(som)) it works, but for cross-autocorrelation as follows

acf(na.omit(som), "xts") , it gives the following error

Error in ts(x) : 'ts' object must have one or more observations


can anyone help?
thanks

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From horning at amnh.org  Wed Feb 13 16:31:34 2013
From: horning at amnh.org (Ned Horning)
Date: Wed, 13 Feb 2013 10:31:34 -0500
Subject: [R-sig-Geo] Alternative to zonal for large images
In-Reply-To: <877gmd3yar.fsf@gmail.com>
References: <5119BA8F.8060802@amnh.org>,
	<CAEBQMMmuXYU_930ALW2A2mVkHVU5Vo4NniAC6zh7f2kubEMHYQ@mail.gmail.com>,
	<CAE-RneJPrN7U6T_jtew5rAY1bT4QwLmeJ87v34Qy77x1Nqci2Q@mail.gmail.com>,
	<CALjAYt5edbQWSFbNWyrG7MkKm-ZY2oyWr_ThVetRivRs-5n_HQ@mail.gmail.com>,
	<CAKoiDHK4SZSbT4dqPQnQx+5C3vWWF6hGz_OgQE=ivvn5kE9aNw@mail.gmail.com>
	<877gmd3yar.fsf@gmail.com>
Message-ID: <511BB1D6.6060000@amnh.org>

Thanks to everyone who responded to my question. This morning I tried 
the approach suggested by Oscar Perpi??n Lamigueiro and was very 
impressed. It is very fast, didn't consume excessive memory, and it 
provides enough flexibility to use different statistics. It also 
introduced me to the data.table package which I expect will come in 
handy for lots of other applications.

All the best,

Ned

On 02/12/2013 06:30 PM, Oscar Perpi??n Lamigueiro wrote:
> Hello,
>
> I think that the combination of the raster and data.table packages can
> be really useful. For example, here it is a very simplified version of
> zonal using the data.table methods. It provides the same results about
> 10 times faster.
>
> Best,
>
> Oscar.
>


From jgrn at illinois.edu  Wed Feb 13 16:35:21 2013
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Wed, 13 Feb 2013 09:35:21 -0600
Subject: [R-sig-Geo] float points
In-Reply-To: <024801ce08ab$bbe2b5f0$33a821d0$@gmail.com>
References: <024801ce08ab$bbe2b5f0$33a821d0$@gmail.com>
Message-ID: <CABG0rfsJeArir0GV7cMVAA1ANWMUBPd3xU7qLFWFhXrkezQeOA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130213/a8aebbbe/attachment.pl>

From jgrn at illinois.edu  Wed Feb 13 16:42:24 2013
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Wed, 13 Feb 2013 09:42:24 -0600
Subject: [R-sig-Geo] error in calculating mean of a raster brick
In-Reply-To: <9EE48301F6C10843B2A9CD99CDB7B49E0F96CA@UM-MBX-N03.um.umsystem.edu>
References: <9EE48301F6C10843B2A9CD99CDB7B49E0F96CA@UM-MBX-N03.um.umsystem.edu>
Message-ID: <CABG0rft=zXy55MPVEEru1gwCn4wPEdEYxmQu3a1TqCgOWykYdQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130213/3ca2009c/attachment.pl>

From jgrn at illinois.edu  Wed Feb 13 16:55:09 2013
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Wed, 13 Feb 2013 09:55:09 -0600
Subject: [R-sig-Geo] R crashes when looping with function writeRaster
In-Reply-To: <CAOWj_3r+UdBiXii7XWp2oQBJDZUFuS820RQ=wen5YZfykWukWA@mail.gmail.com>
References: <CAOWj_3r+UdBiXii7XWp2oQBJDZUFuS820RQ=wen5YZfykWukWA@mail.gmail.com>
Message-ID: <CABG0rfuyxcb9BO8nCtcCJCGeofDUvrxgAd9pz9YmTzakz2FBqA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130213/2eb921a5/attachment.pl>

From caminoccg at gmail.com  Wed Feb 13 19:01:43 2013
From: caminoccg at gmail.com (=?ISO-8859-1?Q?Carlos_Camino_Gonz=E1lez?=)
Date: Wed, 13 Feb 2013 18:01:43 +0000
Subject: [R-sig-Geo] Netcdf rotated pole projection
Message-ID: <CA+=XxBe4bsxKYE5XsxTknwLmZuz+51=_TL2M0AFwpitnNDmL_w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130213/3afa4f32/attachment.pl>

From Han_Li at baylor.edu  Wed Feb 13 19:42:00 2013
From: Han_Li at baylor.edu (Li, Han)
Date: Wed, 13 Feb 2013 18:42:00 +0000
Subject: [R-sig-Geo] question on the difference between spdep function
 spautolm() and glm() with autocovariate
In-Reply-To: <CAEOXpNC6990Esq=9MR_fkYAgsrd-naa3Uy0G381y8hrfa7ZOAA@mail.gmail.com>
References: <0F7B6F86D2AFD049B10949D376D8C64A0CF9538D@HARRY.baylor.edu>
	<1078087248-1360680214-cardhu_decombobulator_blackberry.rim.net-426800063-@b15.c4.bise6.blackberry>
	<0F7B6F86D2AFD049B10949D376D8C64A0CF954D0@HARRY.baylor.edu>,
	<CAEOXpNC6990Esq=9MR_fkYAgsrd-naa3Uy0G381y8hrfa7ZOAA@mail.gmail.com>
Message-ID: <0F7B6F86D2AFD049B10949D376D8C64A15289AF7@HARRY.baylor.edu>

This package looks very interesting, especially function splogit() and spprobit(). And I can see the model

Y ? = ?WY ? + X + u used in these functions may cause the problem to interpret the coefficient due to the interaction (the other person Mr. Roger Bivand explained that to me). Now I am very curious about the comparison of different models. I am wondering if it is possible to compare different models to see which one fits the data better. Thanks for your help.



Han




Han Li
Department of Biology
Baylor University
Waco, TX  76798-7388
Phone: (254) 710-2151
Fax: (254) 710-2969
han_li at baylor.edu<mailto:han_li at baylor.edu>









________________________________
From: Juan Tomas Sayago Gomez [juantomas.sayago at gmail.com]
Sent: Wednesday, February 13, 2013 8:10 AM
To: Li, Han
Subject: Re: [R-sig-Geo] question on the difference between spdep function spautolm() and glm() with autocovariate


http://cran.r-project.org/web/packages/McSpatial/McSpatial.pdf

On Tue, Feb 12, 2013 at 7:57 PM, Li, Han <Han_Li at baylor.edu<mailto:Han_Li at baylor.edu>> wrote:
Hey Juan,

I am trying to do a logit model with spatial autocorrelation. what is the exact name of the package you mentioned?
I know one called "spatial". But I cannot find one called "macspatial". Thanks.
Han


Han Li
Ph.D. Candidate
Department of Biology
Baylor University
Waco, TX  76798-7388
Phone: (254) 710-2151<tel:%28254%29%20710-2151>
Fax: (254) 710-2969<tel:%28254%29%20710-2969>
han_li at baylor.edu<mailto:han_li at baylor.edu>

________________________________________
From: juantomas.sayago at gmail.com<mailto:juantomas.sayago at gmail.com> [juantomas.sayago at gmail.com<mailto:juantomas.sayago at gmail.com>]
Sent: Tuesday, February 12, 2013 8:43 AM
To: Li, Han
Subject: Re: [R-sig-Geo] question on the difference between spdep function spautolm() and glm() with autocovariate

Is your variable a dummy? Is it censored? If you estimate an slx model you can do it without problem. If you estimate a probit or logit with spatial autocorrelation you can check the package macspatial.
Juan
Sent on the Sprint? Now Network from my BlackBerry?

-----Original Message-----
From: "Li, Han" <Han_Li at baylor.edu<mailto:Han_Li at baylor.edu>>
Sender: r-sig-geo-bounces at r-project.orgDate: Tue, 12 Feb 2013 00:50:47
To: r-sig-geo at r-project.org<mailto:r-sig-geo at r-project.org><r-sig-geo at r-project.org<mailto:r-sig-geo at r-project.org>>
Subject: [R-sig-Geo] question on the difference between spdep function
 spautolm() and glm() with autocovariate

Dear list,

I am currently working on spatial autoregression modeling for my dissertation research. I want to use regression models to identify socioeconomic/landscape variables (15 total, var1$bat_survey - var15$bay_survey) that can affect the presence/absence of bats (p/a$bat_survey). Since spatial autocorrelation exists in my P/A data, I tried different spatial models.

My question is:

If I use the same way (same neighboring criteria, same weight style) to define neighbors, and build model #1 spatial simultaneous autoregression model (SAR) by function spautolm(), and model #2 glm() with autocovariate generated by function autocov_dist(), should I expect the same result, or not?

I understood that if I use glm() with autocovariate it will include one more variable (the autocovariate) in the result. I also learned that glm() is more a predicting model and spautolm() is more an explanatory model. But I am not sure whether the significant variables selected by these two models will be same.


##r code example##
model_1 <- spautolm (p/a ~ var1 + var2 + ... + var15, data = bat_survey, listw = neighbor_regime1, family="SAR")
####
autocov_model_2 <- autocov_dist (p/a$bat_survey, xy = coords, style = "W", type = "one")
model_2 <- glm (p/a ~ var1 + var2 + ... + var15 + autocov_model_2, family = "binomial", data = bat_survey)

Thanks in advance. Your insight will be deeply appreciated.

Han


Han Li
Department of Biology
Baylor University
Waco, TX  76798-7388
Phone: (254) 710-2151
Fax: (254) 710-2969
han_li at baylor.edu<mailto:han_li at baylor.edu><mailto:han_li at baylor.edu<mailto:han_li at baylor.edu>>

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo



--
Juan Tom?s Sayago G?mez
Graduate Research Assistant
West Virginia University - RRI
886 Chestnut Ridge Road, Room 520
P.O. Box 6825
Morgantown, WV 26506-6825


From etiennebr at gmail.com  Wed Feb 13 20:14:41 2013
From: etiennebr at gmail.com (Etienne B. Racine)
Date: Wed, 13 Feb 2013 14:14:41 -0500
Subject: [R-sig-Geo] Alternative to zonal for large images
In-Reply-To: <877gmd3yar.fsf@gmail.com>
References: <5119BA8F.8060802@amnh.org>
	<CAEBQMMmuXYU_930ALW2A2mVkHVU5Vo4NniAC6zh7f2kubEMHYQ@mail.gmail.com>
	<CAE-RneJPrN7U6T_jtew5rAY1bT4QwLmeJ87v34Qy77x1Nqci2Q@mail.gmail.com>
	<CALjAYt5edbQWSFbNWyrG7MkKm-ZY2oyWr_ThVetRivRs-5n_HQ@mail.gmail.com>
	<CAKoiDHK4SZSbT4dqPQnQx+5C3vWWF6hGz_OgQE=ivvn5kE9aNw@mail.gmail.com>
	<877gmd3yar.fsf@gmail.com>
Message-ID: <CALjAYt4JY4iwFRML1Vkb0Y-J6_t4jGFHXaG0VmN3Enc1_0KCVA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130213/6abaa9d9/attachment.pl>

From Nathalie.M.Morin at Usherbrooke.ca  Wed Feb 13 22:05:04 2013
From: Nathalie.M.Morin at Usherbrooke.ca (Nathalie Morin)
Date: Wed, 13 Feb 2013 16:05:04 -0500
Subject: [R-sig-Geo] Change z coordinates of SpatialGridDataFrame
Message-ID: <006501ce0a2d$cbd6ef70$6384ce50$@Usherbrooke.ca>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130213/8f466a94/attachment.pl>

From edzer.pebesma at uni-muenster.de  Wed Feb 13 22:17:39 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 13 Feb 2013 22:17:39 +0100
Subject: [R-sig-Geo] Change z coordinates of SpatialGridDataFrame
In-Reply-To: <006501ce0a2d$cbd6ef70$6384ce50$@Usherbrooke.ca>
References: <006501ce0a2d$cbd6ef70$6384ce50$@Usherbrooke.ca>
Message-ID: <511C02F3.7040603@uni-muenster.de>

Is ground level varying, over your domain? If yes, the new set of voxels 
may no longer be a regular grid in the new CRS; you could represent them 
as a SpatialPointsDataFrame. If no, you could simply modify 
obj at grid@cellcentre.offset[3]

On 02/13/2013 10:05 PM, Nathalie Morin wrote:
> Hello,
>
>
>
> I would like to change or assign a new value of the z coordinates
> intrinsically in a 3 dimensional SpatialGridDataFrame from absolute height
> in UTM to relative height above the ground, in order to remove slope. So
> basically, I would like to move the current position of the voxels according
> to a new vector of coordinates, but by keeping the same data attribute
> contained in each of the original voxels.
>
>
>
> I tried creating a new SpatialGridDataFrame from (i) a new GridTopology with
> z coordinates in relative height and from (ii) the same vector of attribute,
> but of course this does not actually move the cubes accordingly in the 3
> dimensional space. It just changes the z value of the voxel from UTM to
> relative height above the ground. Same thing when I try doing this with a
> regular 3D Array.
>
>
>
> Does anybody have any hints in how to achieve this with (or without) sp ?
>
> Cheers,
>
> Nathalie
>
>
>
> --
>
> Nathalie MORIN
>
> Doctorante en t?l?d?tection foresti?re (Ph.D. student in remote sensing
> applied to forestry)
>
> Centre d?application et de recherches en t?l?d?tection (CARTEL)
>
> D?partement de g?omatique appliqu?e
>
> Universit? de Sherbrooke
>
> Sherbrooke (QC) Canada J1K 2R1
>
> Tel. : + 1 (819)  821-8000 #62962
>
> e-mail :  <mailto:Nathalie.M.Morin at Usherbrooke.ca>
> Nathalie.M.Morin at Usherbrooke.ca
>
> Page Web :  <http://pages.usherbrooke.ca/cartel/morin_nathalie.php>
> http://pages.usherbrooke.ca/cartel/morin_nathalie.php
>
>
>
>
> 	[[alternative HTML version deleted]]
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From janesh.devkota at gmail.com  Thu Feb 14 00:46:31 2013
From: janesh.devkota at gmail.com (Janesh Devkota)
Date: Wed, 13 Feb 2013 17:46:31 -0600
Subject: [R-sig-Geo] Creating multipanel levelplot with common color legend
Message-ID: <CAPTbr1paqfC=GUSivXxX3gHD5NvDQTTMrDFeFvtHhdfYG5a=fw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130213/a952a8e8/attachment.pl>

From kridox at ymail.com  Thu Feb 14 01:19:37 2013
From: kridox at ymail.com (Pascal Oettli)
Date: Thu, 14 Feb 2013 09:19:37 +0900
Subject: [R-sig-Geo] Creating multipanel levelplot with common color
	legend
In-Reply-To: <CAPTbr1paqfC=GUSivXxX3gHD5NvDQTTMrDFeFvtHhdfYG5a=fw@mail.gmail.com>
References: <CAPTbr1paqfC=GUSivXxX3gHD5NvDQTTMrDFeFvtHhdfYG5a=fw@mail.gmail.com>
Message-ID: <511C2D99.5030105@ymail.com>

Hello,

Please have a look at the 2nd example given by ?levelplot ("lattice" 
package).

It uses a data frame.

HTH,
Pascal


Le 14/02/2013 08:46, Janesh Devkota a ?crit :
> Hello All,
>
> I have created a levelplot and I want to use multipanel levelplot with same
> common color legend.
>
> Lets say I have a plot with name p1.
> I tried some methods such as:
>
> print(p1, split=c(1,1,1,2), more=TRUE)
> print(p1, split=c(1,2,1,2))
>
> I couldn't control the look and feel of the plot with that function.
>
> I tried another method:
>
> print(p1, position=c(0, .5, 1, 1), more=TRUE)
> print(p1, position=c(0, 0, 1, .5))
>
> These methods would just make two columns of the plot at center.
>
> I think I need to use the trellis function but I couldn't figure out. Can
> anyone show an example of using multipanel levelplot with the common legend
> ?
>
> Thanks.
>
> Janesh
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From philip.greenwood at unimelb.edu.au  Thu Feb 14 02:09:33 2013
From: philip.greenwood at unimelb.edu.au (Philip Greenwood)
Date: Thu, 14 Feb 2013 01:09:33 +0000
Subject: [R-sig-Geo] writeOGR(GeoJSON) to string instead of file
Message-ID: <0B013988-D629-48BF-89CC-D7A039825060@unimelb.edu.au>

Hi all,

My project requires passing spatial data from R to Java, and then storing data as GeoJSON. I'm using RServe to interface between R and Java. 

I'm using writeOGR{rgdal} to a create GeoJSON temporary file then reading the file and passing as a string in Java. It would be really nice to avoid writing the temporary file, and have R return a GeoJSON string.

Is this possible?

Thanks.

Philip Greenwood

Geospatial and Analytics eEnabler 
Australian Urban Research Infrastructure Network (AURIN)
308 Doug McDonell Building, University of Melbourne
Tel: +61-(0)3-9035-8549
philip.greenwood at unimelb.edu.au


From janesh.devkota at gmail.com  Thu Feb 14 02:13:08 2013
From: janesh.devkota at gmail.com (Janesh Devkota)
Date: Wed, 13 Feb 2013 19:13:08 -0600
Subject: [R-sig-Geo] Creating multipanel levelplot with common color
	legend
In-Reply-To: <511C2D99.5030105@ymail.com>
References: <CAPTbr1paqfC=GUSivXxX3gHD5NvDQTTMrDFeFvtHhdfYG5a=fw@mail.gmail.com>
	<511C2D99.5030105@ymail.com>
Message-ID: <CAPTbr1qwKB2_=W_a=7pV=O6+_miKBNVUai_tb0Scb6kbxjw8Bw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130213/b9b06b48/attachment.pl>

From ephraim at epbaron.com  Thu Feb 14 04:24:28 2013
From: ephraim at epbaron.com (EPBaron)
Date: Wed, 13 Feb 2013 19:24:28 -0800 (PST)
Subject: [R-sig-Geo] Need help with spatial data plotting
Message-ID: <1360812268212-7582619.post@n2.nabble.com>

Stop me if you've heard this one. I'm new to R, and I want to do something
cool but I don't know how.
(I know, you're all shouting 'Stop!' Luckily I can't hear you, so I'll
continue.) 
What I'm trying to do seems simple, but I don't 'speak' R well enough to
know how to do it. Here's the idea. I have a lot of data about companies in
different industries, including location and revenues. I want to create a
map showing company location. I want it to be a balloon plot with the size
of the bubble proportional to company revenues. And I'd like to color code
the bubbles by industry. Finally, if I could label each data point with the
company name, that would be ideal. Here's some sample data:
Company.Name  Industry  Revenues  Longitude  LatitudeABC Company Industry A 
123326  51.519822   -0.087848BCD Company Industry B  47445   37.24142075
-121.7828064CDE Company Industry C  257197  48.89798563 2.40603433DEF
Company Industry A  418062  40.74407578 -74.00460052EFG Company Industry B 
93900   48.93931961 2.355410099FGH Company Industry C  476525  34.050655  
-118.266068GHI Company Industry A  128891  37.379179   -121.9550711HIJ
Company Industry B  88330   1.32118 103.6950302IJK Company Industry C  73932  
43.6447601  -79.3839111JKL Company Industry A  413623  40.73675215
-74.17335078KLM Company Industry B  123657  22.33628273 114.1868286LMN
Company Industry C  232588  33.75854753 -84.3876446
I've done several web searches that lead me to the theory of GIS and the
intricacies of global coordinate systems. I've also made several trials
using the maps, maptools, and plotKML packages, but I'm too inarticulate to
correctly tell R what to do. Has anyone done something similar and, if so,
could you help out a man in need? Thanks in advance! 



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Need-help-with-spatial-data-plotting-tp7582619.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From tim.appelhans at gmail.com  Thu Feb 14 05:06:25 2013
From: tim.appelhans at gmail.com (Tim Appelhans)
Date: Thu, 14 Feb 2013 05:06:25 +0100
Subject: [R-sig-Geo] Creating multipanel levelplot with common color
	legend
In-Reply-To: <CAPTbr1qwKB2_=W_a=7pV=O6+_miKBNVUai_tb0Scb6kbxjw8Bw@mail.gmail.com>
References: <CAPTbr1paqfC=GUSivXxX3gHD5NvDQTTMrDFeFvtHhdfYG5a=fw@mail.gmail.com>
	<511C2D99.5030105@ymail.com>
	<CAPTbr1qwKB2_=W_a=7pV=O6+_miKBNVUai_tb0Scb6kbxjw8Bw@mail.gmail.com>
Message-ID: <511C62C1.8010503@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130214/5019f2c0/attachment.pl>

From kridox at ymail.com  Thu Feb 14 07:45:43 2013
From: kridox at ymail.com (Pascal Oettli)
Date: Thu, 14 Feb 2013 15:45:43 +0900
Subject: [R-sig-Geo] Creating multipanel levelplot with common color
	legend
In-Reply-To: <CAPTbr1oQD_gaVqa-x1caUxFGwd5CSBT1Oy4F4hKF7J1DxKGhBw@mail.gmail.com>
References: <CAPTbr1paqfC=GUSivXxX3gHD5NvDQTTMrDFeFvtHhdfYG5a=fw@mail.gmail.com>
	<511C2D99.5030105@ymail.com>
	<CAPTbr1qwKB2_=W_a=7pV=O6+_miKBNVUai_tb0Scb6kbxjw8Bw@mail.gmail.com>
	<511C3D6D.2050203@ymail.com>
	<CAPTbr1oDwTxi+0Geaoen5sV72X=_DfOXK3U6eEdWvEO+VbYz3g@mail.gmail.com>
	<511C4C2B.708@ymail.com>
	<CAPTbr1r6jsNh6LLC43bYyn-iHLj4fpRqSjsDwt18wHL_i7VF7g@mail.gmail.com>
	<511C50C3.1020007@ymail.com>
	<CAPTbr1oQD_gaVqa-x1caUxFGwd5CSBT1Oy4F4hKF7J1DxKGhBw@mail.gmail.com>
Message-ID: <511C8817.3020206@ymail.com>

One possibility.

I also include the list, for someone to do better job.


age2100 <- read.csv("testinglattice.csv",header=T,sep=",")
colnames(age2100) <- c('Eastings','Northings','Salinity','Time')

sub.basesal <- subset(age2100, Time=='basesal')
tmp <- with(sub.basesal, akima::interp(Eastings, Northings, Salinity, 
xo=seq(min(Eastings),max(Eastings), length=100),
 
yo=seq(min(Northings),max(Northings), length=100)))
sub.basesal <- expand.grid(Eastings=tmp$x,Northings=tmp$y)
sub.basesal$Salinity <- as.vector(tmp$z)
sub.basesal$Time <- factor('basesal')
rm(tmp)

sub.sal2050 <- subset(age2100, Time=='sal2050')
tmp <- with(sub.sal2050, akima::interp(Eastings, Northings, Salinity, 
xo=seq(min(Eastings),max(Eastings), length=100),
 
yo=seq(min(Northings),max(Northings), length=100)))
sub.sal2050 <- expand.grid(Eastings=tmp$x,Northings=tmp$y)
sub.sal2050$Salinity <- as.vector(tmp$z)
sub.sal2050$Time <- factor('sal2050')
rm(tmp)

sub.sal2100 <- subset(age2100, Time=='sal2100')
tmp <- with(sub.sal2100, akima::interp(Eastings, Northings, Salinity, 
xo=seq(min(Eastings),max(Eastings), length=100),
 
yo=seq(min(Northings),max(Northings), length=100)))
sub.sal2100 <- expand.grid(Eastings=tmp$x,Northings=tmp$y)
sub.sal2100$Salinity <- as.vector(tmp$z)
sub.sal2100$Time <- factor('sal2100')
rm(tmp)

age2100.akima <- rbind(sub.basesal, sub.sal2050, sub.sal2100)


   levelplot(Salinity ~ Eastings+Northings | Time, age2100,
             panel=function(x,y,subset,...)
             {
               panel.levelplot.points(x,y,subset,...)
             },
             aspect = "iso", scales = list(draw=FALSE),
             cuts=40,smooth=T,
             colorkey = list(space = "right"),
             col.regions = rainbow(100, start = 3/15, end = 1),
             xlim=c(435000,468900),ylim=c(3337500,3374500),
             autokey=list(title="An image"),
             main="",
             col.symbol=0) +
   contourplot(Salinity ~ Eastings+Northings | Time, age2100.akima, cuts=40)

Pascal


Le 14/02/2013 11:59, Janesh Devkota a ?crit :
> Hi Pascal,
>
> Thank you so much. I have been stuck on this for more than 4 hours. I am
> glad I asked it here. One quick question here: is it possible add
> contour line on such type of data ?
>
> Thank you
>
> Best Regards,
> Janesh
>
>
> On Wed, Feb 13, 2013 at 8:49 PM, Pascal Oettli <kridox at ymail.com
> <mailto:kridox at ymail.com>> wrote:
>
>     Hi,
>
>     This should work
>
>
>     age2100 <- read.csv("testinglattice.csv",__header=T,sep=",")
>     colnames(age2100) <- c('Eastings','Northings','__Salinity','Time')
>
>     levelplot(Salinity ~ Eastings+Northings | Time, age2100,
>
>                 panel=function(x,y,subset,...)
>                 {
>                   panel.levelplot.points(x,y,__subset,...)
>                 },
>                 aspect = "iso", scales = list(draw=FALSE),
>                 cuts=40,smooth=T,
>                 colorkey = list(space = "right"),
>                 col.regions = rainbow(100, start = 3/15, end = 1),
>                 xlim=c(435000,468900),ylim=c(__3337500,3374500),
>                 autokey=list(title="An image"),
>                 main="",
>                 col.symbol=0)
>
>
>
>     Le 14/02/2013 11:36, Janesh Devkota a ?crit :
>
>         Hi Pascal,
>
>         This is a salinity data at three different times. Actually I have
>         combined three data sets into one and have given the type to
>         each data
>         set. So, for each data set I have x, y and z which represent
>         latitude,
>         longitude and salinity for that location. For each times, x and
>         y are
>         same and only variables that vary are z and the type. Type here is a
>         variable that shows that these data are measured at different
>         times and
>         I want to make panel for each type. First type is "basesal",
>         second type
>         is "sal2050" and third type is "sal2100". I want to make panels
>         for each
>         type.
>
>         I combined my three data sets into one and I sent you the
>         combined data
>         set.
>
>         Does this explanation make sense ? Please let me know if you are
>         still
>         confused.
>
>         Thank you so much for your time.
>
>         Best Regards,
>         Janesh
>
>
>         On Wed, Feb 13, 2013 at 8:30 PM, Pascal Oettli <kridox at ymail.com
>         <mailto:kridox at ymail.com>
>         <mailto:kridox at ymail.com <mailto:kridox at ymail.com>>> wrote:
>
>              Hi,
>
>              I don't understand on which criterion you can base your
>         multipanel plot.
>
>              Pascal
>
>              Le 14/02/2013 11:23, Janesh Devkota a ?crit :
>
>                  Hi Pascal, thank you so much for that nice example.
>         Actually, my
>                  data is
>                  not continuous data. My data is discrete data. The code
>         I have
>                  used so
>                  far is as follows and I have also attached a link to my
>         data. I have
>                  shown two options: one without any panels and one with
>                  multipanels. For
>                  single graph it is working fine but for multipanel it
>         throws an
>                  error
>                  "Error in limits.and.aspect(default.____prepanel,
>         prepanel = prepanel,
>
>                  have.xlim = have.xlim,  :  need at least one panel"
>
>                  The data testinglattice.csv can be found on
>         https://www.dropbox.com/s/____rq7e5vhaqard405/____testinglattice.csv
>         <https://www.dropbox.com/s/__rq7e5vhaqard405/__testinglattice.csv>
>
>
>         <https://www.dropbox.com/s/__rq7e5vhaqard405/__testinglattice.csv <https://www.dropbox.com/s/rq7e5vhaqard405/testinglattice.csv>>
>
>                  library(latticeExtra)
>                  library(sp)
>                  library(rgdal)
>                  library(lattice)
>                  library(gridExtra)
>                  getwd()
>
>                  age2100<-
>         read.csv("testinglattice.csv",____header=T,sep=",")
>
>
>                  ## Without type and layout parameter
>                  levelplot(age2100$z~age2100$x+____age2100$y,
>         as.data.frame(age2100),
>                              panel=function(x,y,subset,...)
>                              {
>                                panel.levelplot.points(x,y,____subset,...)
>
>                              },
>                              aspect = "iso", scales = list(draw=FALSE),
>                  xlab="Eastings",
>                  ylab = "Northings",
>                              cuts=40,smooth=T,
>                              colorkey = list(space = "right"),
>                              col.regions = rainbow(100, start = 3/15,
>         end = 1),
>
>         xlim=c(435000,468900),ylim=c(____3337500,3374500),
>                              autokey=list(title="An image"),
>                              main="",
>                              col.symbol=0)
>
>                  ## With type and layout parameter
>
>
>         levelplot(age2100$z~age2100$x+____age2100$y|age2100$type,__layout=__c(2,2),
>                  age2100,
>                              panel=function(x,y,subset,...)
>                              {
>                                panel.levelplot.points(x,y,____subset,...)
>
>                              },
>                              aspect = "iso", scales = list(draw=FALSE),
>                  xlab="Eastings",
>                  ylab = "Northings",
>                              cuts=40,smooth=T,
>                              colorkey = list(space = "right"),
>                              col.regions = rainbow(100, start = 3/15,
>         end = 1),
>
>         xlim=c(435000,468900),ylim=c(____3337500,3374500),
>                              autokey=list(title="An image"),
>                              main="",
>                              col.symbol=0)
>
>                  I added the parameter type to define for different panels.
>
>                     Would you please let me know what can I do to make it
>                  multipanel ? BTW
>                  your example works perfect.
>
>                  Thanks.
>
>                  Janesh
>
>
>                  On Wed, Feb 13, 2013 at 7:27 PM, Pascal Oettli
>         <kridox at ymail.com <mailto:kridox at ymail.com>
>                  <mailto:kridox at ymail.com <mailto:kridox at ymail.com>>
>                  <mailto:kridox at ymail.com <mailto:kridox at ymail.com>
>         <mailto:kridox at ymail.com <mailto:kridox at ymail.com>>>> wrote:
>
>                       Hello,
>
>                       In your data frame, you need a column to
>         categorize your
>                  data 'z'.
>
>                       grid1 <- expand.grid(x=1:10, y=1:10,
>                       w=c('Cat.1','Cat.2','Cat.3','______Cat.4'))
>
>
>
>                       grid1$z <- round(rnorm(400,50,25),0)
>
>                       levelplot(z ~ x+y | w, grid1, layout=c(2,2))
>
>                       If it does't match what you need, it is
>         complicated to go
>                  further
>                       without knowing the structure of your data.
>
>                       HTH,
>                       Pascal
>
>
>                       Le 14/02/2013 10:13, Janesh Devkota a ?crit :
>
>                           Hello Pascal,
>
>                           Thank you for your reply. But I couldn't find
>         how can I
>                  use the same
>                           concept to my data.
>
>                           The code I have used is as follows:
>
>                           levelplot(age2100$z~age2100$x+______age2100$y,
>                  as.data.frame(age2100),
>                                       panel=function(x,y,subset,...)
>                                       {
>
>           panel.levelplot.points(x,y,______subset,...)
>
>
>                                         sp.polygons(hello)
>                                       },
>                                       aspect = "iso", scales =
>         list(draw=FALSE),
>                           xlab="Eastings",
>                           ylab = "Northings",
>                                       cuts=40,smooth=T,
>                                       colorkey = list(space = "right"),
>                                       col.regions = rainbow(100, start =
>         3/15,
>                  end = 1),
>
>                  xlim=c(435000,468900),ylim=c(______3337500,3374500),
>
>
>                                       autokey=list(title="An image"),
>                                       main="",
>                                       col.symbol=0)
>
>                           where age2100 is a dataset with x, y and z
>         coordinates.
>                  and I
>                           have added
>                           a polygon here.
>
>                           I found it very difficult to relate with that
>         example.
>
>                           Another trial I did was using
>                           grid.arrange(p1, p1, p1,ncol=2)
>
>                           This way I got the three plots not sharing the
>         same
>                  legend. Can
>                           anyone
>                           suggest with the code I provided ?
>
>                           Janesh
>
>
>                           On Wed, Feb 13, 2013 at 6:19 PM, Pascal Oettli
>                  <kridox at ymail.com <mailto:kridox at ymail.com>
>         <mailto:kridox at ymail.com <mailto:kridox at ymail.com>>
>                           <mailto:kridox at ymail.com
>         <mailto:kridox at ymail.com> <mailto:kridox at ymail.com
>         <mailto:kridox at ymail.com>>>
>                           <mailto:kridox at ymail.com
>         <mailto:kridox at ymail.com> <mailto:kridox at ymail.com
>         <mailto:kridox at ymail.com>>
>                  <mailto:kridox at ymail.com <mailto:kridox at ymail.com>
>         <mailto:kridox at ymail.com <mailto:kridox at ymail.com>>>>> wrote:
>
>                                Hello,
>
>                                Please have a look at the 2nd example
>         given by
>                  ?levelplot
>                           ("lattice"
>                                package).
>
>                                It uses a data frame.
>
>                                HTH,
>                                Pascal
>
>
>                                Le 14/02/2013 08:46, Janesh Devkota a ?crit :
>
>                                    Hello All,
>
>                                    I have created a levelplot and I want
>         to use
>                  multipanel
>                                    levelplot with same
>                                    common color legend.
>
>                                    Lets say I have a plot with name p1.
>                                    I tried some methods such as:
>
>                                    print(p1, split=c(1,1,1,2), more=TRUE)
>                                    print(p1, split=c(1,2,1,2))
>
>                                    I couldn't control the look and feel
>         of the
>                  plot with
>                           that function.
>
>                                    I tried another method:
>
>                                    print(p1, position=c(0, .5, 1, 1),
>         more=TRUE)
>                                    print(p1, position=c(0, 0, 1, .5))
>
>                                    These methods would just make two
>         columns of
>                  the plot
>                           at center.
>
>                                    I think I need to use the trellis
>         function but I
>                           couldn't figure
>                                    out. Can
>                                    anyone show an example of using
>         multipanel
>                  levelplot
>                           with the
>                                    common legend
>                                    ?
>
>                                    Thanks.
>
>                                    Janesh
>
>                                             [[alternative HTML version
>         deleted]]
>
>
>                    _______________________________________________________
>
>
>                                    R-sig-Geo mailing list
>         R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>         <mailto:R-sig-Geo at r-project.__org <mailto:R-sig-Geo at r-project.org>>
>                  <mailto:R-sig-Geo at r-project.
>         <mailto:R-sig-Geo at r-project.>____org
>         <mailto:R-sig-Geo at r-project.__org <mailto:R-sig-Geo at r-project.org>>>
>                           <mailto:R-sig-Geo at r-project
>         <mailto:R-sig-Geo at r-project>.
>                  <mailto:R-sig-Geo at r-project
>         <mailto:R-sig-Geo at r-project>.>______org
>                  <mailto:R-sig-Geo at r-project.
>         <mailto:R-sig-Geo at r-project.>____org
>         <mailto:R-sig-Geo at r-project.__org
>         <mailto:R-sig-Geo at r-project.org>>>>
>         https://stat.ethz.ch/mailman/________listinfo/r-sig-geo
>         <https://stat.ethz.ch/mailman/______listinfo/r-sig-geo>
>                  <https://stat.ethz.ch/mailman/______listinfo/r-sig-geo
>         <https://stat.ethz.ch/mailman/____listinfo/r-sig-geo>>
>
>
>           <https://stat.ethz.ch/mailman/______listinfo/r-sig-geo
>         <https://stat.ethz.ch/mailman/____listinfo/r-sig-geo>
>                  <https://stat.ethz.ch/mailman/____listinfo/r-sig-geo
>         <https://stat.ethz.ch/mailman/__listinfo/r-sig-geo>>>
>
>
>         <https://stat.ethz.ch/mailman/______listinfo/r-sig-geo
>         <https://stat.ethz.ch/mailman/____listinfo/r-sig-geo>
>                  <https://stat.ethz.ch/mailman/____listinfo/r-sig-geo
>         <https://stat.ethz.ch/mailman/__listinfo/r-sig-geo>>
>
>           <https://stat.ethz.ch/mailman/____listinfo/r-sig-geo
>         <https://stat.ethz.ch/mailman/__listinfo/r-sig-geo>
>                  <https://stat.ethz.ch/mailman/__listinfo/r-sig-geo
>         <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>>>>
>
>
>
>
>


From oscar.perpinan at gmail.com  Thu Feb 14 08:00:06 2013
From: oscar.perpinan at gmail.com (Oscar =?utf-8?B?UGVycGnDscOhbg==?= Lamigueiro)
Date: Thu, 14 Feb 2013 08:00:06 +0100
Subject: [R-sig-Geo] Alternative to zonal for large images
In-Reply-To: <CALjAYt4JY4iwFRML1Vkb0Y-J6_t4jGFHXaG0VmN3Enc1_0KCVA@mail.gmail.com>
References: <5119BA8F.8060802@amnh.org>,
	<CAEBQMMmuXYU_930ALW2A2mVkHVU5Vo4NniAC6zh7f2kubEMHYQ@mail.gmail.com>,
	<CAE-RneJPrN7U6T_jtew5rAY1bT4QwLmeJ87v34Qy77x1Nqci2Q@mail.gmail.com>,
	<CALjAYt5edbQWSFbNWyrG7MkKm-ZY2oyWr_ThVetRivRs-5n_HQ@mail.gmail.com>,
	<CAKoiDHK4SZSbT4dqPQnQx+5C3vWWF6hGz_OgQE=ivvn5kE9aNw@mail.gmail.com>,
	<877gmd3yar.fsf@gmail.com>,
	<CALjAYt4JY4iwFRML1Vkb0Y-J6_t4jGFHXaG0VmN3Enc1_0KCVA@mail.gmail.com>
Message-ID: <87liar2xe1.fsf@gmail.com>


> Oscar, I find your idea ingenious, however I don't see how this method
> could still work with out of memory raster (since you load the whole raster
> using getValues()). data.table storage is more efficient, so maybe it's the
> fact that you can shrink the space taken by the two layers that allow to
> process rasters in memory ? Or is canProcessInMemory() too conservative ? I
> think it's using a 10% buffer.

Hello,

My last code focused only on speed improvement. We should add several
lines of code to check memory usage. On the other hand, I am still
learning to use the amazing data.table package, so I cannot give a
solution for out of memory problems. However, it seems that data.table
copes with them quite well:

http://stackoverflow.com/questions/11564775/exceeding-memory-limit-in-r-even-with-24gb-ram

Besides, I have just discovered the ":=" operator which could be useful
for working with large datasets.

http://stackoverflow.com/questions/9508118/out-of-memory-when-modifying-a-big-r-dataframe
http://stackoverflow.com/questions/7029944/when-should-i-use-the-operator-in-data-table

Best,

Oscar.


From roman.lustrik at gmail.com  Thu Feb 14 08:52:43 2013
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Thu, 14 Feb 2013 08:52:43 +0100
Subject: [R-sig-Geo] Need help with spatial data plotting
In-Reply-To: <1360812268212-7582619.post@n2.nabble.com>
References: <1360812268212-7582619.post@n2.nabble.com>
Message-ID: <CAHT1vpgJ=jpfO9tcGNeeXDCZe80rxHdnhQ8+DB0bBx3-xZ36KA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130214/1ab02c15/attachment.pl>

From jonesmus.mutua at gmail.com  Thu Feb 14 09:24:04 2013
From: jonesmus.mutua at gmail.com (Jonesmus Wambua)
Date: Thu, 14 Feb 2013 11:24:04 +0300
Subject: [R-sig-Geo] Fwd: spatio temporal variogram
In-Reply-To: <FF9DB805FC41CC4E95825A50F68063021291A70F@challenger.uhd.campus>
References: <CABgQd+MRCuJYuMke9XoZ3uaTgR2g1HG_GoKgnYdGAN6Obd642g@mail.gmail.com>
	<CABgQd+OJABC+QBhQ4ERBXSSOCVBA1-fx0RO-XVMiLpF3A3hr2w@mail.gmail.com>
	<FF9DB805FC41CC4E95825A50F68063021291A70F@challenger.uhd.campus>
Message-ID: <CABgQd+OvpdAGkP4U65oqiWP8GuvHqnEKz-g320+q4HxCQLVf8w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130214/d9a546b5/attachment.pl>

From salinir at tiscali.it  Thu Feb 14 09:35:46 2013
From: salinir at tiscali.it (Romolo Salini)
Date: Thu, 14 Feb 2013 09:35:46 +0100
Subject: [R-sig-Geo] R crashes when looping with function writeRaster
In-Reply-To: <CABG0rfvLCtU7H1Pfkzg_FNj-_nQQFf7M_6OaQdykLkZJRtikgw@mail.gmail.com>
References: <CAOWj_3r+UdBiXii7XWp2oQBJDZUFuS820RQ=wen5YZfykWukWA@mail.gmail.com>
	<CABG0rfvLCtU7H1Pfkzg_FNj-_nQQFf7M_6OaQdykLkZJRtikgw@mail.gmail.com>
Message-ID: <CAOWj_3qdpKz17WzCPhe8hNz-g1Z0PQSqnVhgf84HJNDtC4Zf5Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130214/de7aa122/attachment.pl>

From ephraim at epbaron.com  Thu Feb 14 10:06:58 2013
From: ephraim at epbaron.com (EPBaron)
Date: Thu, 14 Feb 2013 01:06:58 -0800 (PST)
Subject: [R-sig-Geo] Need help with spatial data plotting
In-Reply-To: <CAHT1vpgJ=jpfO9tcGNeeXDCZe80rxHdnhQ8+DB0bBx3-xZ36KA@mail.gmail.com>
References: <1360812268212-7582619.post@n2.nabble.com>
	<CAHT1vpgJ=jpfO9tcGNeeXDCZe80rxHdnhQ8+DB0bBx3-xZ36KA@mail.gmail.com>
Message-ID: <1360832818585-7582626.post@n2.nabble.com>

Thank you Roman.  I had already looked at the plotKML tutorial.  I found the
examples fascinating, but I'm afraid it made me feel even more illiterate
than when I started.  In essence, it told me how to build an elegant watch
when I'm just trying to tell what time it is.  Or, to use the language
analogy, it introduced me to poetry when all I can understand is simple
sentences.  The code that seemed most relevant to what I'm trying to do
baffles me:
data(eberg)coordinates(eberg) <- ~X+Yproj4string(eberg) <-
CRS("+init=epsg:31467")eberg <-
eberg[runif(nrow(eberg))<.2,]bubble(eberg["CLYMHT_A"])plotKML(eberg["CLYMHT_A"])




--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Need-help-with-spatial-data-plotting-tp7582619p7582626.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From edzer.pebesma at uni-muenster.de  Thu Feb 14 10:32:25 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 14 Feb 2013 10:32:25 +0100
Subject: [R-sig-Geo] Need help with spatial data plotting
In-Reply-To: <1360832818585-7582626.post@n2.nabble.com>
References: <1360812268212-7582619.post@n2.nabble.com>
	<CAHT1vpgJ=jpfO9tcGNeeXDCZe80rxHdnhQ8+DB0bBx3-xZ36KA@mail.gmail.com>
	<1360832818585-7582626.post@n2.nabble.com>
Message-ID: <511CAF29.1030908@uni-muenster.de>

Most of us learned to crawl before we could walk, but this is something 
we cannot do for you. Go to the R web site, read the R FAQ and the R 
manual "An introduction to R", read as much as possible related or 
similar material as you can, and get your hands dirty on doing simple 
things. Then, read the mailing list posting guide to learn which 
questions trigger volunteers to answer here:

http://www.r-project.org/posting-guide.html

On 02/14/2013 10:06 AM, EPBaron wrote:
> Thank you Roman.  I had already looked at the plotKML tutorial.  I found the
> examples fascinating, but I'm afraid it made me feel even more illiterate
> than when I started.  In essence, it told me how to build an elegant watch
> when I'm just trying to tell what time it is.  Or, to use the language
> analogy, it introduced me to poetry when all I can understand is simple
> sentences.  The code that seemed most relevant to what I'm trying to do
> baffles me:
> data(eberg)coordinates(eberg) <- ~X+Yproj4string(eberg) <-
> CRS("+init=epsg:31467")eberg <-
> eberg[runif(nrow(eberg))<.2,]bubble(eberg["CLYMHT_A"])plotKML(eberg["CLYMHT_A"])
>
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Need-help-with-spatial-data-plotting-tp7582619p7582626.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From roman.lustrik at gmail.com  Thu Feb 14 10:41:16 2013
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Thu, 14 Feb 2013 10:41:16 +0100
Subject: [R-sig-Geo] Need help with spatial data plotting
In-Reply-To: <1360832818585-7582626.post@n2.nabble.com>
References: <1360812268212-7582619.post@n2.nabble.com>
	<CAHT1vpgJ=jpfO9tcGNeeXDCZe80rxHdnhQ8+DB0bBx3-xZ36KA@mail.gmail.com>
	<1360832818585-7582626.post@n2.nabble.com>
Message-ID: <CAHT1vpjCWapNaXnHY1+zcuFogSmPMB3y6dLm0cO2RddWTGAZUg@mail.gmail.com>

I suggest you run the code step by step and examine what happens. By
reading help files along the way will bring you closer to
understanding the code than you imagined.

Here are a few hints I hope you may find helpful.

> data(eberg)
This loads a dataset called `eberg`

First, run coordinates(eberg). Error, right?
Error in .checkNumericCoerce2double(obj) :
  cannot retrieve coordinates from non-numeric elements

Now run
> coordinates(eberg) <- ~X+Y
This sets the "default" coordinates of this object. Inspect it with
str(eberg) and you will see you're now dealing with a
SpatialPointsDataFrame (very
important to remember this!). When you imported the data, it was
"only" a data.frame. It is now enhanced with coordinates, among other
things.

> proj4string(eberg) <- CRS("+init=epsg:31467")
This will set the projection of those coordinates in a data.frame to espg:31467.

> eberg <- eberg[runif(nrow(eberg))<.2, ]
First run nrow(eberg). This is the number of rows data.frame eberg
has. Run runif(nrow(eberg)) and you will notice that you get a lot of
values (nrow(eberg)  many, as a matter of fact) between 0 and 1. By
saying <2, you are asking, which values are smaller than 0.2? If a
value is smaller than 0.2, it will be marked as TRUE and FALSE
otherwise. By putting all this inside [..., ], it makes a convenient
way of extracting random rows from a data.frame.  Values before the
comma means rows, after the comma means columns. Try eberg[1:5, 1:5].
See? If there are no commas, R assumes you mean columns.

> bubble(eberg["CLYMHT_A"])
Calls a bubble plot (see ?bubble) and it takes column "CLYMHT_A" as
data to draw bubbles. If this doesn't work for you, try the example
provided in ?bubble:

data(meuse)
coordinates(meuse) <- c("x", "y") # promote to SpatialPointsDataFrame
bubble(meuse, "cadmium", maxsize = 2.5, main = "cadmium concentrations (ppm)",
    key.entries = 2^(-1:4))

> plotKML(eberg["CLYMHT_A"])
Ibidem, except you can now see the data displayed in Google Earth (or
some other viewer).


Cheers,
Roman


On Thu, Feb 14, 2013 at 10:06 AM, EPBaron <ephraim at epbaron.com> wrote:
>
> Thank you Roman.  I had already looked at the plotKML tutorial.  I found the
> examples fascinating, but I'm afraid it made me feel even more illiterate
> than when I started.  In essence, it told me how to build an elegant watch
> when I'm just trying to tell what time it is.  Or, to use the language
> analogy, it introduced me to poetry when all I can understand is simple
> sentences.  The code that seemed most relevant to what I'm trying to do
> baffles me:
> data(eberg)coordinates(eberg) <- ~X+Yproj4string(eberg) <-
> CRS("+init=epsg:31467")eberg <-
> eberg[runif(nrow(eberg))<.2,]bubble(eberg["CLYMHT_A"])plotKML(eberg["CLYMHT_A"])
>
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Need-help-with-spatial-data-plotting-tp7582619p7582626.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo




--
In God we trust, all others bring data.


From jonesmus.mutua at gmail.com  Thu Feb 14 12:08:32 2013
From: jonesmus.mutua at gmail.com (Jonesmus Wambua)
Date: Thu, 14 Feb 2013 14:08:32 +0300
Subject: [R-sig-Geo] Spatio temporal variogram
Message-ID: <CABgQd+N-dnK5CUQMwBS_Xc9Y2-PYYSycZfU60vCLZjy5G+MaJg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130214/0a40a208/attachment.pl>

From jonesmus.mutua at gmail.com  Thu Feb 14 12:14:30 2013
From: jonesmus.mutua at gmail.com (Jonesmus Wambua)
Date: Thu, 14 Feb 2013 14:14:30 +0300
Subject: [R-sig-Geo] Fwd: Spatio temporal variogram
In-Reply-To: <CABgQd+N-dnK5CUQMwBS_Xc9Y2-PYYSycZfU60vCLZjy5G+MaJg@mail.gmail.com>
References: <CABgQd+N-dnK5CUQMwBS_Xc9Y2-PYYSycZfU60vCLZjy5G+MaJg@mail.gmail.com>
Message-ID: <CABgQd+OVXpFP5DtOgCgykHQTF3ALYxNAtcfimEEisqhet8XPPw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130214/94cdc4b9/attachment.pl>

From ephraim at epbaron.com  Thu Feb 14 18:15:25 2013
From: ephraim at epbaron.com (EPBaron)
Date: Thu, 14 Feb 2013 09:15:25 -0800 (PST)
Subject: [R-sig-Geo] Need help with spatial data plotting
In-Reply-To: <511CAF29.1030908@uni-muenster.de>
References: <1360812268212-7582619.post@n2.nabble.com>
	<CAHT1vpgJ=jpfO9tcGNeeXDCZe80rxHdnhQ8+DB0bBx3-xZ36KA@mail.gmail.com>
	<1360832818585-7582626.post@n2.nabble.com>
	<511CAF29.1030908@uni-muenster.de>
Message-ID: <1360862125254-7582631.post@n2.nabble.com>

Edzer Pebesma-2 wrote
> Most of us learned to crawl before we could walk, but this is something we
> cannot do for you. Go to the R web site, read the R FAQ and the R manual
> "An introduction to R", read as much as possible related or similar
> material as you can, and get your hands dirty on doing simple things.
> Then, read the mailing list posting guide to learn which questions trigger
> volunteers to answer here:http://www.r-project.org/posting-guide.html

I understand that I have a responsibility to try before simply asking for
help.  To that end, I completed a 4-week Coursera class on " Computing for
Data Analysis <https://www.coursera.org/course/compdata>  ".  I'm midway
through an 8-week class on  Data Analysis
<https://class.coursera.org/dataanalysis-001/class>  .  On my desk, I have
both the R Cookbook and the R Graphic Cookbook from O'Reilly, which I use
often.  I have made several web searches and found a number of useful
references.  I've followed along step-by-step with the examples provided.  I
made a number of attempts to substitute my data for what was used in the
examples, but I kept getting indecipherable (for me, at least) errors.  I
googled the errors, but when I could find matches they didn't enlighten.
All of which is to say that this wasn't the first place I looked for help. 
It just seemed the most promising, since so many people in this country of
yours seem to speak the language beautifully.  I am a tourist asking for
directions - not detailed, step-by-step directions, but general directions
such as "if you go to this district, you'll find a good chocolate shop". 
Or, in my case, "this package is most useful for what you're trying to do,
and you can find more information about it here ..."
If I have violated the etiquette or customs of your country, I apologize. 
It was not my intent.  I came to admire, not to criticize.



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Need-help-with-spatial-data-plotting-tp7582619p7582631.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From ephraim at epbaron.com  Thu Feb 14 18:30:07 2013
From: ephraim at epbaron.com (EPBaron)
Date: Thu, 14 Feb 2013 09:30:07 -0800 (PST)
Subject: [R-sig-Geo] Need help with spatial data plotting
In-Reply-To: <CAHT1vpjCWapNaXnHY1+zcuFogSmPMB3y6dLm0cO2RddWTGAZUg@mail.gmail.com>
References: <1360812268212-7582619.post@n2.nabble.com>
	<CAHT1vpgJ=jpfO9tcGNeeXDCZe80rxHdnhQ8+DB0bBx3-xZ36KA@mail.gmail.com>
	<1360832818585-7582626.post@n2.nabble.com>
	<CAHT1vpjCWapNaXnHY1+zcuFogSmPMB3y6dLm0cO2RddWTGAZUg@mail.gmail.com>
Message-ID: <1360863007050-7582632.post@n2.nabble.com>

Roman Lu?trik wrote
> I suggest you run the code step by step and examine what happens. By
> reading help files along the way will bring you closer to
> understanding the code than you imagined.
> 
> Here are a few hints I hope you may find helpful.
> 
> 
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> 

> R-sig-Geo@

>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> 
> 
> 
> --
> In God we trust, all others bring data.
> 
> _______________________________________________
> R-sig-Geo mailing list

> R-sig-Geo@

> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Roman, I know the rules of the SIG say I shouldn't simply reply to say
'thank you', but I really must.  You're kindness is VERY much appreciated. 
I will work through the example again and carefully, and I'll try to
replicate it with my data. <br>
Wish me luck!



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Need-help-with-spatial-data-plotting-tp7582619p7582632.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From r.hijmans at gmail.com  Thu Feb 14 19:28:17 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 14 Feb 2013 10:28:17 -0800
Subject: [R-sig-Geo] R crashes when looping with function writeRaster
In-Reply-To: <CAOWj_3qdpKz17WzCPhe8hNz-g1Z0PQSqnVhgf84HJNDtC4Zf5Q@mail.gmail.com>
References: <CAOWj_3r+UdBiXii7XWp2oQBJDZUFuS820RQ=wen5YZfykWukWA@mail.gmail.com>
	<CABG0rfvLCtU7H1Pfkzg_FNj-_nQQFf7M_6OaQdykLkZJRtikgw@mail.gmail.com>
	<CAOWj_3qdpKz17WzCPhe8hNz-g1Z0PQSqnVhgf84HJNDtC4Zf5Q@mail.gmail.com>
Message-ID: <CANtt_hyi8690dabcqUNXQJknEYyR4Ckt0ctuKTojxcGbVJXTLA@mail.gmail.com>

Romolo,

For your questions about memory, please read vignette('raster').

> r[,]=ifelse(r[,]<=(-2000), NA, r[,]/10000) # is this the culprit?

probably yes, because you are loading all the values into RAM if you do that.
Consider doing something like this:

fileDisp=list.files(getwd())
for (f in 1:length(fileDisp))  :
      r <- raster(fileDisp[f])
   # never overwrite your input files!
   # preferably also send the output to another directory
     outf <- paste0(extension(fileDisp, ''), "_out.tif"
     x <- calc(r, function(x){ x[x <= -2000] <- NA;  x/10000 }, filename=outf)
}


# or perhaps

fileDisp=list.files(getwd())
for (f in 1:length(fileDisp))  :
      r <- raster(fileDisp[f])
     NAvalue(r) <- -2000
     outf <- paste0(extension(fileDisp, ''), "_out.tif"
     x <- calc(r, function(x)  x/10000, filename=outf)
}


Robert

On Thu, Feb 14, 2013 at 12:35 AM, Romolo Salini <salinir at tiscali.it> wrote:
>  Jonathan, thanks for your reply. I adjusted the code (fileAnno wasn't
> correct)...
>
> fileDisp=list.files(getwd(), full=TRUE)
> for (f in 1:length(fileDisp))
> {
> r=raster(fileDisp[f])
> r[,]=ifelse(r[,]<=(-2000), NA, r[,]/10000) # is this the culprit?
> writeRaster(r,filename=fileDisp[f],format="GTiff",overwrite=TRUE)
> }
>
> Also I don't understand the behaviour (in memory managment),
> for the following examples:
>
> LayerTot = stack(fileDisp)
> #ex1
> MeanL=calc(LayerTot, fun=mean) #gives a memory allocation error, while...
> #ex2
> MeanL=mean(LayerTot) #doesn't
>
> Furthermore, when I ran:
> #ex3
> ss <- calc(LayerTot,fun=myfunction)
> which gives a rasterbrick, a .grd file was written into my local temporary
> directory.
> is it possible to force this behaviour each time I call the function "calc"
> (for ex1, this could avoid the error)?
>
> Romolo
>
> 2013/2/13 Jonathan Greenberg <jgrn at illinois.edu>
>
>> Romolo:
>>
>> I feel like:
>>   #do some calculation on r and write it with same name
>> Might be the culprit.  What calculation were you doing?  Can you paste in
>> the code?  Creating a raster and writing a raster take almost no memory
>> AFAIK.
>>
>> Also, your code shows the looping through the length of fileAnno, but I
>> don't see that defined anywhere.
>>
>> --j
>>
>>
>> On Thu, Feb 7, 2013 at 2:22 AM, Romolo Salini <salinir at tiscali.it> wrote:
>>
>>> Dear R-sig-geo,
>>> I'm looping the function "writeRaster", as in:
>>>
>>> fileDisp=list.files(getwd(),full=TRUE)
>>> for (f in 1:length(fileAnno))
>>>   {
>>>   r=raster(fileDisp[f])
>>>   #do some calculation on r and write it with same name
>>>   writeRaster(r,filename=fileDisp[f],format="GTiff",overwrite=TRUE)
>>>   }
>>>
>>> After about 10/15 iterations, R quits.
>>> As it seemed to be a memory allocation problem, I tried adding
>>> (uselessly):
>>>
>>> rm(r)
>>> Sys.sleep(5)
>>>
>>> Does anybody had the same problem?
>>>
>>> > sessionInfo()
>>> R version 2.15.1 (2012-06-22)
>>> Platform: i386-pc-mingw32/i386 (32-bit)
>>>
>>> locale:
>>> [1] LC_COLLATE=Italian_Italy.1252  LC_CTYPE=Italian_Italy.1252
>>> [3] LC_MONETARY=Italian_Italy.1252 LC_NUMERIC=C
>>> [5] LC_TIME=Italian_Italy.1252
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>> Sys.info()
>>>                      sysname                      release
>>>                    "Windows"                         "XP"
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>>
>>
>> --
>> Jonathan A. Greenberg, PhD
>> Assistant Professor
>> Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
>> Department of Geography and Geographic Information Science
>> University of Illinois at Urbana-Champaign
>> 607 South Mathews Avenue, MC 150
>> Urbana, IL 61801
>> Phone: 217-300-1924
>> http://www.geog.illinois.edu/~jgrn/
>> AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
>>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From janesh.devkota at gmail.com  Thu Feb 14 20:58:12 2013
From: janesh.devkota at gmail.com (Janesh Devkota)
Date: Thu, 14 Feb 2013 13:58:12 -0600
Subject: [R-sig-Geo] Clip a contour with shapefile while using contourplot
Message-ID: <CAPTbr1ox9MMaYU2G6CjcEk227zx59msBeMbY2-jS99GGLJqvZA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130214/3958ff59/attachment.pl>

From Nathalie.M.Morin at usherbrooke.ca  Thu Feb 14 22:12:12 2013
From: Nathalie.M.Morin at usherbrooke.ca (Nathalie Morin)
Date: Thu, 14 Feb 2013 13:12:12 -0800 (PST)
Subject: [R-sig-Geo] Change z coordinates of SpatialGridDataFrame
In-Reply-To: <511C02F3.7040603@uni-muenster.de>
References: <006501ce0a2d$cbd6ef70$6384ce50$@Usherbrooke.ca>
	<511C02F3.7040603@uni-muenster.de>
Message-ID: <1360876332417-7582635.post@n2.nabble.com>

Dear Edzer,

I transformed my SpatialGridDataFrame into a SpatiaPointsDataFrame (by the
way is there any coercion method such as "as.SpatialPointsDataFrame"
available in sp instead of creating a new one for I have not found it ?).
But this does not change my problem: I need the vector of attributes to
follow through the change in the z position. Right now the order of the
values in the vector of attributes stays the same even if the z coordinates
change. Here is my code starting from the summary of the initial
SpatialGridDataFrame

> summary(tls.spgdf)
Object of class SpatialGridDataFrame
Coordinates:
        min    max
[1,] 828099 828139
[2,] 101834 101874
[3,]    322    374
Is projected: TRUE 
proj4string :
[+init=epsg:27561 +proj=lcc +lat_1=49.50000000000001
+lat_0=49.50000000000001 +lon_0=0
+k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515
+towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs]
Grid attributes:
  cellcentre.offset cellsize cells.dim
1          828099.5        1        40
2          101834.5        1        40
3             322.5        1        52
Data attributes:
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
0.000000 0.000000 0.000000 0.007572 0.000000 1.226000 

# (i) 3D Matrix
(x.coord <- floor(coordinates(tls.spgdf)[,1]))
(y.coord <- floor(coordinates(tls.spgdf)[,2]))
(z.coord <- floor(coordinates(tls.spgdf)[,3]))
tls.xyz2 <- cbind(x.coord, y.coord, z.coord)

# (ii) SpatialPoints
tls.sp2 <- SpatialPoints(tls.xyz2, proj4string = CRS("+init=epsg:27561"))

# (iii) DataFrame (attribut z)
tls.df2 <- data.frame(d=tls.spgdf$d)

# (iv) SpatialPointsDataFrame
tls.spdf2 <- SpatialPointsDataFrame(tls.xyz2, tls.df2)

# Summary of DTM values
> summary(sge)
Object of class SpatialGridDataFrame
Coordinates:
      min    max
s1 828099 828139
s2 101834 101874
Is projected: TRUE 
proj4string :
[+init=epsg:27561 +proj=lcc +lat_1=49.50000000000001
+lat_0=49.50000000000001 +lon_0=0
+k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515
+towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs]
Grid attributes:
   cellcentre.offset cellsize cells.dim
s1          828099.5        1        40
s2          101834.5        1        40
Data attributes:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  325.9   329.1   330.8   330.8   332.4   335.6 

z.sge <- round(sge[[1]])
z <- coordinates(tls.spdf2)[,3]
tls.spdf2$z <- z
nz <- tls.spdf2[[2]] - z.sge[[1]]
tls.spdf2$nz <- nz

> summary(tls.spdf2)
Object of class SpatialPointsDataFrame
Coordinates:
           min    max
x.coord 828099 828138
y.coord 101834 101873
z.coord    322    373
Is projected: NA 
proj4string : [NA]
Number of points: 83200
Data attributes:
       d                  z               nz        
 Min.   :0.000000   Min.   :322.0   Min.   :-11.00  
 1st Qu.:0.000000   1st Qu.:334.8   1st Qu.:  1.75  
 Median :0.000000   Median :347.5   Median : 14.50  
 Mean   :0.007572   Mean   :347.5   Mean   : 14.50  
 3rd Qu.:0.000000   3rd Qu.:360.2   3rd Qu.: 27.25  
 Max.   :1.226040   Max.   :373.0   Max.   : 40.00 

(x.coord2 <- coordinates(tls.spdf2)[,1])
(y.coord2 <- coordinates(tls.spdf2)[,2])
(z.coord2 <- tls.spdf2$nz)
tls.xyz3 <- cbind(x.coord2, y.coord2, z.coord2)
tls.sp3 <- SpatialPoints(tls.xyz3, proj4string = CRS("+init=epsg:27561"))
tls.df2 <- data.frame(d=tls.spdf2$d)
tls.spdf3 <- SpatialPointsDataFrame(tls.sp3, tls.df2)




--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Change-z-coordinates-of-SpatialGridDataFrame-tp7582612p7582635.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From r.hijmans at gmail.com  Fri Feb 15 02:08:52 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 14 Feb 2013 17:08:52 -0800
Subject: [R-sig-Geo] apply function to lists of rasters
In-Reply-To: <CANtt_hwX63mOoYBcsf1DivRT8g8QusE093XJh8txfFWXVjP2dQ@mail.gmail.com>
References: <mailman.11.1360580404.23621.r-sig-geo@r-project.org>
	<DUB107-W37583886CE68166DFFC573D70A0@phx.gbl>
	<CAHT1vpj302vi=NCuYdPiBZSKgOSoU5gLJ_JFj-gJ3+ctkic-Sw@mail.gmail.com>
	<CANtt_hwX63mOoYBcsf1DivRT8g8QusE093XJh8txfFWXVjP2dQ@mail.gmail.com>
Message-ID: <CANtt_hy94RPsdFk+syGrHBiyN=_zp-0q6a7_bUi-D4jthPOdOA@mail.gmail.com>

This mapply problem has now been fixed for the next release of raster (>= 2.1-6)
https://stat.ethz.ch/pipermail/r-devel/2013-February/065847.html
Also thanks to Roman Lu?trik for off list suggestions. Robert

On Mon, Feb 11, 2013 at 9:14 AM, Robert J. Hijmans <r.hijmans at gmail.com> wrote:
>
> mapply does indeed not seem to work here, further illustrated below. I do
> not know why. However, in this case I think it is simpler not to use mapply
> (see example at the very end).
>
>> library(raster)
> Loading required package: sp
> raster 2.1-3 (1-February-2013)
>>
>> aa<-matrix(c(2,1,3,4),nrow=2,ncol=2)
>> bb<-matrix(c(5,7,4,6),nrow=2,ncol=2)
>> cc<-matrix(c(12,13,17,16),nrow=2,ncol=2)
>> A<-list(raster(aa),raster(t(aa)))
>> B<-list(raster(bb),raster(t(bb)))
>> C<-list(raster(cc),raster(t(cc)))
>>
>>
>> f1 <- function(a,b,c) 1/(1-exp(-exp(-((a - b)/c))))
>
> # this function does not work, I suppose the "-" function, as shortcut for
> "-1 *" is not implemented for Raster objects
>> f1(A[[1]], B[[1]], C[[1]])
> Error in -((a - b)/c) : invalid argument to unary operator
>
> # You can make it work like this, because "-1 *" is understood
>> f2 <- function(a,b,c) 1/(1-exp(-1*exp(-1*((a - b)/c))))
>> f2(A[[1]], B[[1]], C[[1]])
> class       : RasterLayer
> dimensions  : 2, 2, 4  (nrow, ncol, ncell)
> resolution  : 0.5, 0.5  (x, y)
> extent      : 0, 1, 0, 1  (xmin, xmax, ymin, ymax)
> coord. ref. : NA
> data source : in memory
> names       : layer
> values      : 1.257289, 1.529642  (min, max)
>
> # now on to mapply
> # simple fucnction
>> f3 <- function(a,b,c) (a - b)/c
>
> # works
>> D <- mapply(f3, A,B,C)
>
> # original function does not work
>> D <- mapply(f2, A,B,C)
> Error in as.character(sys.call(sys.parent())[[1]]) :
>   cannot coerce type 'closure' to vector of type 'character'
> # probably because "exp" is part of the Math group generic and the
> # method for Raster objects gets lost along the way.
> # I need to investigate that. Ideas anyone?
>
>
> # However, I think the good news is that a more rasteresque solution works:
>> f2(stack(A), stack(B), stack(C))
> class       : RasterBrick
> dimensions  : 2, 2, 4, 2  (nrow, ncol, ncell, nlayers)
> resolution  : 0.5, 0.5  (x, y)
> extent      : 0, 1, 0, 1  (xmin, xmax, ymin, ymax)
> coord. ref. : NA
> data source : in memory
> names       :  layer.1,  layer.2
> min values  : 1.257289, 1.257289
> max values  : 1.529642, 1.529642
>
> # OR
> overlay(stack(A), stack(B), stack(C), fun=f2)
> class       : RasterBrick
> dimensions  : 2, 2, 4, 2  (nrow, ncol, ncell, nlayers)
> resolution  : 0.5, 0.5  (x, y)
> extent      : 0, 1, 0, 1  (xmin, xmax, ymin, ymax)
> coord. ref. : NA
> data source : in memory
> names       :  layer.1,  layer.2
> min values  : 1.257289, 1.257289
> max values  : 1.529642, 1.529642
>
>>
>
>
>
> On Mon, Feb 11, 2013 at 5:31 AM, Roman Lu?trik <roman.lustrik at gmail.com>
> wrote:
>>
>> There may be a problem.
>>
>> mapply(function(a, b, c) exp(a), A, B, C)
>>
>>
>> alas
>>
>> > exp(A[[1]])
>> > class       : RasterLayer
>> > dimensions  : 2, 2, 4  (nrow, ncol, ncell)
>> > resolution  : 0.5, 0.5  (x, y)
>> > extent      : 0, 1, 0, 1  (xmin, xmax, ymin, ymax)
>> > coord. ref. : NA
>> > data source : in memory
>> > names       : layer
>> > values      : 2.718282, 54.59815  (min, max)
>>
>>
>> Looks like exp() doesn't work from inside `mapply`. Robert?
>>
>> # I changed c to d, because it's hell to debug `c`
>>
>> D <- mapply(function(a, b, d) {
>> >   browser()
>>
>>   1/(1 - exp(-exp(-((a - b)/d))))
>> > }, A, B, C)
>>
>>
>>
>> Browse[1]> class(a)
>> > [1] "RasterLayer"
>> > attr(,"package")
>> > [1] "raster"
>> > Browse[1]> exp(a)
>> > Error in as.character(sys.call(sys.parent())[[1]]) :
>> >   cannot coerce type 'closure' to vector of type 'character'
>>
>>
>>
>>
>> Cheers,
>> Roman
>>
>>
>>
>> On Mon, Feb 11, 2013 at 2:14 PM, Lorenzo Alfieri
>> <alfios17 at hotmail.com>wrote:
>>
>> >
>> > Dear list,
>> > I'm trying to apply a function to lists of rasters, but without success.
>> > I'm not sure if it feasible of if I should use a for loop.
>> > Let's say a, b and c are three lists of argument to my function
>> >  1/(1-exp(-exp(-((a - b)/c))))  (2 rasters each)
>> > I'd like this function to be applied to these arguments, so that I get
>> > as
>> > result a list D of 2 rasters, where for example
>> > D[[1]] = 1/(1-exp(-exp(-((A[[1]] - B[[1]])/C[[1]])))) and the same for
>> > D[[2]]
>> >
>> > I tryed with this but didn't work:
>> >
>> > library(raster)
>> >
>> > aa<-matrix(c(2,1,3,4),nrow=2,ncol=2)
>> > bb<-matrix(c(5,7,4,6),nrow=2,ncol=2)
>> > cc<-matrix(c(12,13,17,16),nrow=2,ncol=2)
>> > A<-list(raster(aa),raster(t(aa)))
>> > B<-list(raster(bb),raster(t(bb)))
>> > C<-list(raster(cc),raster(t(cc)))
>> >
>> > D<-mapply(function(a,b,c) 1/(1-exp(-exp(-((a - b)/c)))), A,B,C)
>> >
>> > Any suggestions?
>> >
>> > Lorenzo
>> >
>> >
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-sig-Geo mailing list
>> > R-sig-Geo at r-project.org
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> >
>>
>>
>>
>> --
>> In God we trust, all others bring data.
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>


From davideps at umich.edu  Fri Feb 15 05:32:22 2013
From: davideps at umich.edu (David Epstein)
Date: Thu, 14 Feb 2013 23:32:22 -0500
Subject: [R-sig-Geo] measuring overlaps with many shapefiles
Message-ID: <CAK0sU7FCetQutkxZkqdeUUbXOmTpfNcrKKjSfqaby3PjWceW2g@mail.gmail.com>

Hello,


I am familiar with R and GIS separately, but not working with spatial
objects in R. I have a PRIMARY shapefile and many SECONDARY
shapefiles. All are polygons and have a string "label" column for
features. I want to generate a nonspatial dataframe of overlap
measurements with the following columns:

1) label of PRIMARY feature
2) SECONDARY shapefile name
3) label of SECONDARY feature
4) area of overlap in square miles

I believe on way to proceed is to use "v.to.rast" and "r.stats" in
spgrass6. But, I am not sure if that is the easiest way. Any
suggestions would be appreciated.


Thank you,
-david


From Tom_Roche at pobox.com  Fri Feb 15 06:05:22 2013
From: Tom_Roche at pobox.com (Tom Roche)
Date: Fri, 15 Feb 2013 00:05:22 -0500
Subject: [R-sig-Geo] how to display a projected map on an
	rasterVis::layerplot?
Message-ID: <87vc9ui2ul.fsf@pobox.com>


Please advise me regarding overlay of an LCC-projected map on `raster`
data plotted by `rasterVis::layerplot`. What I mean, why I ask:

As discussed in detail @

http://stackoverflow.com/questions/14865507/how-to-display-a-projected-map-on-an-rlatticelayerplot

(more detail than is feasible for an email post) I'm trying to overlay
LCC-projected data from a netCDF file with an LCC-projected map. The
netCDF uses the IOAPI convention (described in link), and also manages
to hit yet again the `raster` filename-extension problem. (Dunno why,
but that's twice in one week for me--bad karma?) The data's horizontal
extents are CONUS, so I'm looking for an LCC CONUS map.

In one example (in the link above), I use CRAN package=M3 to get
(basically) a matrix of coordinates

map.lines <- M3::get.map.lines.M3.proj(
  file=lcc.file, database="state", units="m")

and feed that to old-style graphics. But I'd much prefer to make this
work like the other example, which resembles other code I have that is
using `rasterVis::layerplot`. Unfortunately that other code is using
unprojected/lon-lat data, and I must also handle projected (probably all
LCC) data.

TIA, Tom Roche <Tom_Roche at pobox.com>


From jonesmus.mutua at gmail.com  Fri Feb 15 09:26:03 2013
From: jonesmus.mutua at gmail.com (Jonesmus Wambua)
Date: Fri, 15 Feb 2013 11:26:03 +0300
Subject: [R-sig-Geo] Spatio-temporal variogram error
Message-ID: <CABgQd+Mx=u8m8m_vUyLcnkmM2qJBiHBAqD80r3xcv0QjwNVPjw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130215/2f6518b6/attachment.pl>

From johannesradinger at gmail.com  Fri Feb 15 10:22:31 2013
From: johannesradinger at gmail.com (Johannes Radinger)
Date: Fri, 15 Feb 2013 10:22:31 +0100
Subject: [R-sig-Geo] Error when accessing raster layer (package 'raster')
Message-ID: <CABsGe_yF82ynWDk6AFxh+SYQ2doduMAK__i=2b2JLGqPtnuhPg@mail.gmail.com>

Hi,

I have a rasterbrick and when I try to access a single layer of it I
get following error:
>  my_brick[["layer_1"]]
class       : RasterLayer
dimensions  : 912, 840, 766080  (nrow, ncol, ncell)
resolution  : 50, 50  (x, y)
extent      : 3505300, 3547300, 6025800, 6071400  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=tmerc +lat_0=0 +lon_0=9 +k=1 +x_0=3500000 +y_0=0
+ellps=bessel +datum=potsdam +units=m +no_defs
+towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7
values      : in memory
layer name  : layer_1
min value   : 0
max value   : 0.1841621
Error in if (is.factor(object)) { : missing value where TRUE/FALSE needed

The rasterbrick is created by a rasterstack (approx. 15 layers) that
is masked using the function mask.
When I try to access the same layer in the unmasked rasterstack I
don't get the error.

Any suggestions?

I am using R 2.15.2 with raster 2.0-08 (27-June-2012) on Ubuntu.

best regards,
/Johannes


From oscar.perpinan at gmail.com  Fri Feb 15 10:35:11 2013
From: oscar.perpinan at gmail.com (=?ISO-8859-1?Q?Oscar_Perpi=F1an?=)
Date: Fri, 15 Feb 2013 10:35:11 +0100
Subject: [R-sig-Geo] how to display a projected map on an
	rasterVis::layerplot?
In-Reply-To: <87vc9ui2ul.fsf@pobox.com>
References: <87vc9ui2ul.fsf@pobox.com>
Message-ID: <CAMLL7bkgM3qbYW+d-NXTReAaHkL3W=XgxJy33SSBF4wLLm1sFQ@mail.gmail.com>

Hello,

Yesterday I read your question in stackoverflow. I tried to display
the ozone file with the state boundaries overlaid without success. In
my opinion, the problem is that the extent of the RasterLayer as read
by raster is quite different from the state boundaries. If I am not
wrong, this is the same problem you asked and answered in another
stackoverflow question:

http://stackoverflow.com/questions/13005181/how-to-set-the-display-bounds-of-a-rasterplot

I download the file from
https://bitbucket.org/tlroche/mozart-global-to-aqmeii-na/downloads/ozone_lcc.nc
and then:

library(raster)
library(maps)
library(maptools)
lcc.crs <- "+proj=lcc +lat_1=33 +lat_2=45 +lat_0=40 +lon_0=-97
+a=6370000 +b=6370000"
o3.raster <- raster('ozone_lcc.nc', varname="O3", crs=lcc.crs, band=1)
> o3.raster
class       : RasterLayer
band        : 1
dimensions  : 112, 148, 16576  (nrow, ncol, ncell)
resolution  : 1, 1  (x, y)
extent      : 0.5, 148.5, 0.5, 112.5  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84
data source : /home/oscar/temp/ozone_lcc.nc
names       : O3
z-value     : 1
zvar        : O3
level       : 1 o3.raster

state.map <- map(database="state", plot=FALSE, projection='lambert',
parameters=c(40, 33))
state.map.shp <- map2SpatialLines(state.map, proj4string=CRS(lcc.crs))

> state.map.shp
class       : SpatialLines
nfeatures   : 169
extent      : -0.2226344, 0.2112617, -0.9123794, -0.6458026  (xmin,
xmax, ymin, ymax)
coord. ref. : +proj=lcc +lat_1=33 +lat_2=45 +lat_0=40 +lon_0=-97
+a=6370000 +b=6370000


Best,

Oscar.

Grupo de Sistemas Fotovoltaicos (IES-UPM)
Dpto. Ingenier?a El?ctrica (EUITI-UPM)
URL: http://procomun.wordpress.com
Twitter: @oscarperpinan


2013/2/15 Tom Roche <Tom_Roche at pobox.com>:
>
> Please advise me regarding overlay of an LCC-projected map on `raster`
> data plotted by `rasterVis::layerplot`. What I mean, why I ask:
>
> As discussed in detail @
>
> http://stackoverflow.com/questions/14865507/how-to-display-a-projected-map-on-an-rlatticelayerplot
>
> (more detail than is feasible for an email post) I'm trying to overlay
> LCC-projected data from a netCDF file with an LCC-projected map. The
> netCDF uses the IOAPI convention (described in link), and also manages
> to hit yet again the `raster` filename-extension problem. (Dunno why,
> but that's twice in one week for me--bad karma?) The data's horizontal
> extents are CONUS, so I'm looking for an LCC CONUS map.
>
> In one example (in the link above), I use CRAN package=M3 to get
> (basically) a matrix of coordinates
>
> map.lines <- M3::get.map.lines.M3.proj(
>   file=lcc.file, database="state", units="m")
>
> and feed that to old-style graphics. But I'd much prefer to make this
> work like the other example, which resembles other code I have that is
> using `rasterVis::layerplot`. Unfortunately that other code is using
> unprojected/lon-lat data, and I must also handle projected (probably all
> LCC) data.
>
> TIA, Tom Roche <Tom_Roche at pobox.com>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From ben.graeler at uni-muenster.de  Fri Feb 15 13:33:31 2013
From: ben.graeler at uni-muenster.de (=?ISO-8859-1?Q?Benedikt_Gr=E4ler?=)
Date: Fri, 15 Feb 2013 13:33:31 +0100
Subject: [R-sig-Geo] Spatio-temporal variogram error
In-Reply-To: <CABgQd+Mx=u8m8m_vUyLcnkmM2qJBiHBAqD80r3xcv0QjwNVPjw@mail.gmail.com>
References: <CABgQd+Mx=u8m8m_vUyLcnkmM2qJBiHBAqD80r3xcv0QjwNVPjw@mail.gmail.com>
Message-ID: <511E2B1B.4020901@uni-muenster.de>

Dear Jonesmus,

during the calculation of the spatio-temporal variogram, the STFDF is 
processed time-step-wise. Presumably, your STFDF has an empty time step 
and this caused the described error (that is how I could reproduce your 
error at least). I'll update gstat on r-forge (today) such that it takes 
care of this issue.

Thanks for pointing us to this problem.

Please let me know if your data does not have an empty time step and the 
error is due to something else.

Best wishes,

  Ben



On 15.02.2013 09:26, Jonesmus Wambua wrote:
> hi, am doing a spatio-temporal variogram and am getting this error below
> that i have no response variable in my data set even though it is there. my
> data am calling gdata and the response variable is pfpr. i have tried the
> code below with no access. the summary of my data is as follows:
>
>> summary(gdata)
> Object of class STFDF
>   with Dimensions (s, t, attr): (438, 21, 1)
> [[Spatial:]]
> Object of class SpatialPoints
> Coordinates:
>           min      max
> Long -16.718 -13.8500
> Lat   13.176  13.7915
> Is projected: NA
> proj4string : [NA]
> Number of points: 438
> [[Temporal:]]
>       Index              timeIndex
>   Min.   :1990-01-01   Min.   : 1
>   1st Qu.:1994-12-31   1st Qu.: 6
>   Median :1999-12-30   Median :11
>   Mean   :1999-12-30   Mean   :11
>   3rd Qu.:2004-12-28   3rd Qu.:16
>   Max.   :2009-12-27   Max.   :21
> [[Data attributes:]]
>     Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's
>      0.0     1.0     4.0    10.1    13.0   330.0    8640
>
>
>> s=variogram(gdata at data~1, gdata)
>
>    |
>
>    |
>                                 |   0%Error in .subset2(x, i, exact = exact)
> : no such index at level 1
>
>
>> s=variogram(pfpr~1, gdata)
>
>    |
>
>    |
>                                 |   0%Error in gstat.formula(d$formula,
> d$data) :
>    no response variable present in formula
> In addition: Warning messages:
> 1: In min(x) : no non-missing arguments to min; returning Inf
> 2: In max(x) : no non-missing arguments to max; returning -Inf
> 3: In min(x) : no non-missing arguments to min; returning Inf
> 4: In max(x) : no non-missing arguments to max; returning -Inf
>>
>
> can anyone help?
> J
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Benedikt Gr?ler

ifgi - Institute for Geoinformatics
University of Muenster

http://ifgi.uni-muenster.de/graeler

Phone: +49 251 83-33082
Mail: ben.graeler at uni-muenster.de


From milansharma2012 at yahoo.com  Fri Feb 15 15:06:20 2013
From: milansharma2012 at yahoo.com (Milan Sharma)
Date: Fri, 15 Feb 2013 06:06:20 -0800 (PST)
Subject: [R-sig-Geo] spplot
Message-ID: <1360937180.12488.YahooMailNeo@web162106.mail.bf1.yahoo.com>

Dear list/ Dr. Bivand,
is it possible to plot spplot if there is no Longitude and Latitude in my data? (i.e. asking R to find latitude and longitude itself, is there any way to do that)?
Milan


From clement.calenge at oncfs.gouv.fr  Fri Feb 15 15:20:22 2013
From: clement.calenge at oncfs.gouv.fr (Clement Calenge)
Date: Fri, 15 Feb 2013 15:20:22 +0100
Subject: [R-sig-Geo] Error ENFA: Error in eigen(Se) : infinite or
 missing values in 'x'
In-Reply-To: <CAPcFACGJtwZ-ggTUgcnAfUJxMrOiXTC_V-jD91E-mduqVyoH=w@mail.gmail.com>
References: <CAPcFACGJtwZ-ggTUgcnAfUJxMrOiXTC_V-jD91E-mduqVyoH=w@mail.gmail.com>
Message-ID: <511E4426.5090301@oncfs.gouv.fr>

Dear Leandro,

On 02/11/2013 02:06 PM, Leandro Abade wrote:
> Dear all,
>
> I am trying to run an ENFA using ADE package though I am stuck in this
> error, and I do not understand what could be the problem.
>
> Error in eigen(Se) : infinite or missing values in 'x'
>
> I get the error message after the following step:
>
>> dataenfa1 <- data2enfa(var,locs)
>> (enfa1 <- enfa(pc, dataenfa1$pr, + scannf = FALSE))
> Error in eigen(Se) : infinite or missing values in 'x'
>
> Any thoughts or help would be much appreciated.

This happens when the covariance matrix associated with the used 
resource units (pixels) is singular, i.e. it cannot be inverted. This 
happens when one of the columns of the table Z ? containing the value of 
the variables (columns) in the used resource units (rows) ? can be 
predicted by a linear combination of the other columns.

Several problems in the data can lead to this error message, but the 
most likely is that you have in your data one habitat type that is not 
used at all by the species. In this case, one of the columns of Z is 
populated only by zeros, and the associated covariance matrix cannot be 
inverted. Actually, if this habitat type is not used, you cannot measure 
the habitat suitability from the data. Therefore, you have to consider 
that your focus species does not use this environmental type, and to 
delete it from the dataset (var in your example).
HTH,

Cl?ment Calenge

-- 
Cl?ment CALENGE
Cellule d'appui ? l'analyse de donn?es
Direction des Etudes et de la Recherche
Office national de la chasse et de la faune sauvage
Saint Benoist - 78610 Auffargis
tel. (33) 01.30.46.54.14


From bogdan.antonescu at manchester.ac.uk  Fri Feb 15 16:56:14 2013
From: bogdan.antonescu at manchester.ac.uk (Bogdan Antonescu)
Date: Fri, 15 Feb 2013 15:56:14 +0000
Subject: [R-sig-Geo] Lightning density map
Message-ID: <511E5A9E.2020203@manchester.ac.uk>

Hi ,

I am trying to plot a cloud-to-ground lightning density map for Romania. 
The data set contains: date(year/month/dat), time(hh/mm/ss), latitude, 
and longitude for each lightning flash. The density maps were based on 
dividing the study area into a grid cells (e.g., 20-km to correspond 
with the audible range of thunder). I have used ArcGIS to calculate a 
density value for each cell by counting the number of lightning flashes 
within the cell and dividing by the cell area. The density value 
(flashes km?2) is then assigned to each cell.

Can someone help me on how to do this in R?

Thank you very much,

Bogdan


From clint at ecy.wa.gov  Fri Feb 15 17:09:31 2013
From: clint at ecy.wa.gov (Clint Bowman)
Date: Fri, 15 Feb 2013 08:09:31 -0800 (PST)
Subject: [R-sig-Geo] Lightning density map
In-Reply-To: <511E5A9E.2020203@manchester.ac.uk>
References: <511E5A9E.2020203@manchester.ac.uk>
Message-ID: <alpine.LRH.2.02.1302150808590.7598@aeolus.ecy.wa.gov>

?hexbin may get you started.

Clint Bowman			INTERNET:	clint at ecy.wa.gov
Air Quality Modeler		INTERNET:	clint at math.utah.edu
Department of Ecology		VOICE:		(360) 407-6815
PO Box 47600			FAX:		(360) 407-7534
Olympia, WA 98504-7600

         USPS:           PO Box 47600, Olympia, WA 98504-7600
         Parcels:        300 Desmond Drive, Lacey, WA 98503-1274

On Fri, 15 Feb 2013, Bogdan Antonescu wrote:

> Hi ,
>
> I am trying to plot a cloud-to-ground lightning density map for Romania. The 
> data set contains: date(year/month/dat), time(hh/mm/ss), latitude, and 
> longitude for each lightning flash. The density maps were based on dividing 
> the study area into a grid cells (e.g., 20-km to correspond with the audible 
> range of thunder). I have used ArcGIS to calculate a density value for each 
> cell by counting the number of lightning flashes within the cell and dividing 
> by the cell area. The density value (flashes km?2) is then assigned to each 
> cell.
>
> Can someone help me on how to do this in R?
>
> Thank you very much,
>
> Bogdan
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

From r.hijmans at gmail.com  Fri Feb 15 18:03:06 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 15 Feb 2013 09:03:06 -0800
Subject: [R-sig-Geo] Error when accessing raster layer (package 'raster')
In-Reply-To: <CABsGe_yF82ynWDk6AFxh+SYQ2doduMAK__i=2b2JLGqPtnuhPg@mail.gmail.com>
References: <CABsGe_yF82ynWDk6AFxh+SYQ2doduMAK__i=2b2JLGqPtnuhPg@mail.gmail.com>
Message-ID: <CANtt_hzCRKt4EjuSdkmhJ0ysnABpcs6B+G7cSb04ZXOkhmJPJA@mail.gmail.com>

Johannes,
Please update the raster package and try again --- that is always a
good procedure when you get an error message.
Robert

On Fri, Feb 15, 2013 at 1:22 AM, Johannes Radinger
<johannesradinger at gmail.com> wrote:
> Hi,
>
> I have a rasterbrick and when I try to access a single layer of it I
> get following error:
>>  my_brick[["layer_1"]]
> class       : RasterLayer
> dimensions  : 912, 840, 766080  (nrow, ncol, ncell)
> resolution  : 50, 50  (x, y)
> extent      : 3505300, 3547300, 6025800, 6071400  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=tmerc +lat_0=0 +lon_0=9 +k=1 +x_0=3500000 +y_0=0
> +ellps=bessel +datum=potsdam +units=m +no_defs
> +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7
> values      : in memory
> layer name  : layer_1
> min value   : 0
> max value   : 0.1841621
> Error in if (is.factor(object)) { : missing value where TRUE/FALSE needed
>
> The rasterbrick is created by a rasterstack (approx. 15 layers) that
> is masked using the function mask.
> When I try to access the same layer in the unmasked rasterstack I
> don't get the error.
>
> Any suggestions?
>
> I am using R 2.15.2 with raster 2.0-08 (27-June-2012) on Ubuntu.
>
> best regards,
> /Johannes
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From r.hijmans at gmail.com  Fri Feb 15 18:39:55 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 15 Feb 2013 09:39:55 -0800
Subject: [R-sig-Geo] Lightning density map
In-Reply-To: <511E5A9E.2020203@manchester.ac.uk>
References: <511E5A9E.2020203@manchester.ac.uk>
Message-ID: <CANtt_hxQG2Z4T0ZPMN7ZcDTi3VunuSO3ix5XRMD3oEYU+rCvBA@mail.gmail.com>

library(raster)
?rasterize


On Fri, Feb 15, 2013 at 7:56 AM, Bogdan Antonescu
<bogdan.antonescu at manchester.ac.uk> wrote:
> Hi ,
>
> I am trying to plot a cloud-to-ground lightning density map for Romania. The
> data set contains: date(year/month/dat), time(hh/mm/ss), latitude, and
> longitude for each lightning flash. The density maps were based on dividing
> the study area into a grid cells (e.g., 20-km to correspond with the audible
> range of thunder). I have used ArcGIS to calculate a density value for each
> cell by counting the number of lightning flashes within the cell and
> dividing by the cell area. The density value (flashes km-2) is then assigned
> to each cell.
>
> Can someone help me on how to do this in R?
>
> Thank you very much,
>
> Bogdan
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From r.hijmans at gmail.com  Fri Feb 15 18:43:39 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 15 Feb 2013 09:43:39 -0800
Subject: [R-sig-Geo] spplot
In-Reply-To: <1360937180.12488.YahooMailNeo@web162106.mail.bf1.yahoo.com>
References: <1360937180.12488.YahooMailNeo@web162106.mail.bf1.yahoo.com>
Message-ID: <CANtt_hwiEM_GOzOHfZY=yy_ZUtM4d1N+KevJoq-Fvx7gi4A9Eg@mail.gmail.com>

Milan,
That depends on what there is in your data. Please provide a clear
description of the relevant variables you have (coordinates in another
reference system? textual geo-references?); and perhaps add a
"summary(x)".
Robert

On Fri, Feb 15, 2013 at 6:06 AM, Milan Sharma <milansharma2012 at yahoo.com> wrote:
> Dear list/ Dr. Bivand,
> is it possible to plot spplot if there is no Longitude and Latitude in my data? (i.e. asking R to find latitude and longitude itself, is there any way to do that)?
> Milan
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Tom_Roche at pobox.com  Fri Feb 15 22:00:28 2013
From: Tom_Roche at pobox.com (Tom Roche)
Date: Fri, 15 Feb 2013 16:00:28 -0500
Subject: [R-sig-Geo] how to display a projected map on an
 rasterVis::layerplot?
In-Reply-To: <CAMLL7bkgM3qbYW+d-NXTReAaHkL3W=XgxJy33SSBF4wLLm1sFQ@mail.gmail.com>
References: <CAMLL7bkgM3qbYW+d-NXTReAaHkL3W=XgxJy33SSBF4wLLm1sFQ@mail.gmail.com>
	<87vc9ui2ul.fsf@pobox.com>
Message-ID: <87sj4xi977.fsf@pobox.com>


summary: How to convert from a simple (x,y) matrix (as produced by
M3::get.map.lines.M3.proj) to a SpatialLines, or to coordinates
consumable by latticeExtra::layer?

details:

Perhaps I should have asked the question above first, instead of
putting it at the end of

http://stackoverflow.com/questions/14865507/how-to-display-a-projected-map-on-an-rlatticelayerplot

where it is obviously overlooked :-( The problem is also explained
there:

http://stackoverflow.com/questions/14865507/how-to-display-a-projected-map-on-an-rlatticelayerplot (formatted for mail)
> ## Read in variable with daily ozone.
> o3.raster <- raster::raster(
>   x=lcc.file, varname="O3", crs=lcc.crs, level=1)
> o3.raster at crs <- lcc.crs # why does the above assignment not take?
> # start debugging
> o3.raster
> summary(coordinates(o3.raster)) # thanks, Felix Andrews!
> M3::get.grid.info.M3(lcc.file)
> #   end debugging

> # > o3.raster
> # class       : RasterLayer 
> # band        : 1 
> # dimensions  : 112, 148, 16576  (nrow, ncol, ncell)
> # resolution  : 1, 1  (x, y)
> # extent      : 0.5, 148.5, 0.5, 112.5  (xmin, xmax, ymin, ymax)
> # coord. ref. :
> +proj=lcc +lat_1=33 +lat_2=45 +lat_0=40 +lon_0=-97
>   +a=6370000 +b=6370000 
> # data source : .../ozone_lcc.nc 
> # names       : O3 
> # z-value     : 1 
> # zvar        : O3 
> # level       : 1 

> # > summary(coordinates(o3.raster))
> #        x                y         
> #  Min.   :  1.00   Min.   :  1.00  
> #  1st Qu.: 37.75   1st Qu.: 28.75  
> #  Median : 74.50   Median : 56.50  
> #  Mean   : 74.50   Mean   : 56.50  
> #  3rd Qu.:111.25   3rd Qu.: 84.25  
> #  Max.   :148.00   Max.   :112.00  

> # > M3::get.grid.info.M3(lcc.file)
> # $x.orig
> # [1] -2736000
> # $y.orig
> # [1] -2088000
> # $x.cell.width
> # [1] 36000
> # $y.cell.width
> # [1] 36000
> # $hz.units
> # [1] "m"
> # $ncols
> # [1] 148
> # $nrows
> # [1] 112
> # $nlays
> # [1] 1

> # The grid (`coordinates(o3.raster)`) is integers, because this
> # data is stored using the IOAPI convention. IOAPI makes the grid
> # Cartesian by using an (approximately) equiareal projection (LCC)
> # and abstracting grid positioning to metadata stored in netCDF
> # global attributes. Some of this spatial metadata can be accessed
> # by `M3::get.grid.info.M3` (above), and some can be accessed via
> # the coordinate reference system (`CRS`, see `lcc.proj4` above)

However I can

> ## Get state boundaries in projection units.
> map.lines <- M3::get.map.lines.M3.proj(
>   file=lcc.file, database="state", units="m")
> # start debugging
> class(map.lines)
> summary(map.lines)
> summary(map.lines$coords)
> #   end debugging

> # >     class(map.lines)
> # [1] "list"
> # >     summary(map.lines)
> #        Length Class  Mode     
> # coords 23374  -none- numeric  
> # units      1  -none- character
> # >     summary(map.lines$coords)
> #        x                  y           
> #  Min.   :-2272238   Min.   :-1567156  
> #  1st Qu.:   94244   1st Qu.: -673953  
> #  Median :  913204   Median :  -26948  
> #  Mean   :  689997   Mean   :  -84644  
> #  3rd Qu.: 1744969   3rd Qu.:  524531  
> #  Max.   : 2322260   Max.   : 1265778  
> #  NA's   :168        NA's   :168    

Note how these grid coordinates derive linearly from the IOAPI
metadata above, and to the raster bounds (farther above): e.g.,

map.lines.XY.min.raw <-
  c(-2272238,-1567156) # from summary(map.lines$coords)
x.orig       <- -2736000
x.cell.width <- 36000
y.orig       <- -2088000
y.cell.width <- 36000

map.lines.XY.min.IOAPI <- c(
  (map.lines.XY.min.raw[1] - x.orig)/x.cell.width,
  (map.lines.XY.min.raw[2] - y.orig)/y.cell.width
)
map.lines.XY.min.IOAPI
# [1] 12.88228 14.46789

Looking @ 

http://i.stack.imgur.com/eijZI.png (example 2)

eyeball the intersection of the latitude of south tip of Texas with
the westernmost longitude of California. Then look at the
corresponding location in

http://i.stack.imgur.com/z7OA0.png (example 1)

you will see that corresponding example1 coordinates are approximately
(12.88228,14.46789) as computed above. Hardly a proof :-) but the this
certainly shows that the transform from `map.lines`-coordinates to
IOAPI-coordinates is straightforward. So what I need to know, in order
to feed output from M3::get.map.lines.M3.proj(...) to
latticeExtra::layer(...), is how to set the coordinates of a
SpatialLines as produced by, e.g.,

> state.map.shp <-
>   maptools::map2SpatialLines(state.map, proj4string=lcc.crs)

or

> latticeExtra::layer(
>   sp::sp.lines(state.map.shp, lwd=0.8, col='darkgray'))

or otherwise how to set the (x,y) coordinates being read by
latticeExtra::layer(...)

TIA, Tom Roche <Tom_Roche at pobox.com>


From Tom_Roche at pobox.com  Fri Feb 15 23:41:15 2013
From: Tom_Roche at pobox.com (Tom Roche)
Date: Fri, 15 Feb 2013 17:41:15 -0500
Subject: [R-sig-Geo] how to display a projected map on an
 rasterVis::layerplot?
In-Reply-To: <87sj4xi977.fsf@pobox.com>
References: <87sj4xi977.fsf@pobox.com>
	<CAMLL7bkgM3qbYW+d-NXTReAaHkL3W=XgxJy33SSBF4wLLm1sFQ@mail.gmail.com>
	<87vc9ui2ul.fsf@pobox.com>
Message-ID: <87pq01i4j8.fsf@pobox.com>


https://stat.ethz.ch/pipermail/r-sig-geo/2013-February/017531.html
> How to convert from a simple (x,y) matrix (as produced by
> M3::get.map.lines.M3.proj) to a SpatialLines, or to coordinates
> consumable by latticeExtra::layer?

One way to do this, though ugly, is the current answer @

http://stackoverflow.com/questions/14865507/how-to-display-a-projected-map-on-an-rlatticelayerplot

I.e., "fix" the coordinates in the `state.map` obtained from
`maps::map`, using the linear IOAPI transform, and process that into a
SpatialLines as previously--see code and plot @ link above.

Is there a cleaner way to do this?


From milansharma2012 at yahoo.com  Sat Feb 16 07:13:49 2013
From: milansharma2012 at yahoo.com (Milan Sharma)
Date: Fri, 15 Feb 2013 22:13:49 -0800 (PST)
Subject: [R-sig-Geo] different states have same county name,
	problem in spplot
Message-ID: <1360995229.96497.YahooMailNeo@web162104.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130215/0745f45c/attachment.pl>

From r.hijmans at gmail.com  Sat Feb 16 07:55:29 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 15 Feb 2013 22:55:29 -0800
Subject: [R-sig-Geo] Alternative to zonal for large images
In-Reply-To: <87liar2xe1.fsf@gmail.com>
References: <5119BA8F.8060802@amnh.org>
	<CAEBQMMmuXYU_930ALW2A2mVkHVU5Vo4NniAC6zh7f2kubEMHYQ@mail.gmail.com>
	<CAE-RneJPrN7U6T_jtew5rAY1bT4QwLmeJ87v34Qy77x1Nqci2Q@mail.gmail.com>
	<CALjAYt5edbQWSFbNWyrG7MkKm-ZY2oyWr_ThVetRivRs-5n_HQ@mail.gmail.com>
	<CAKoiDHK4SZSbT4dqPQnQx+5C3vWWF6hGz_OgQE=ivvn5kE9aNw@mail.gmail.com>
	<877gmd3yar.fsf@gmail.com>
	<CALjAYt4JY4iwFRML1Vkb0Y-J6_t4jGFHXaG0VmN3Enc1_0KCVA@mail.gmail.com>
	<87liar2xe1.fsf@gmail.com>
Message-ID: <CANtt_hxYG5UOJd78yOooHU8ng4X_FQ6_wCBhGfNRKENVzRz=YA@mail.gmail.com>

Oscar,
Thanks for illustrating the large speed gain of using data.table for
aggregating (instead of tapply / aggregate).
I am going to use this in the raster package for the zonal function
and a few others.
Robert

On Wed, Feb 13, 2013 at 11:00 PM, Oscar Perpi??n Lamigueiro
<oscar.perpinan at gmail.com> wrote:
>
>> Oscar, I find your idea ingenious, however I don't see how this method
>> could still work with out of memory raster (since you load the whole raster
>> using getValues()). data.table storage is more efficient, so maybe it's the
>> fact that you can shrink the space taken by the two layers that allow to
>> process rasters in memory ? Or is canProcessInMemory() too conservative ? I
>> think it's using a 10% buffer.
>
> Hello,
>
> My last code focused only on speed improvement. We should add several
> lines of code to check memory usage. On the other hand, I am still
> learning to use the amazing data.table package, so I cannot give a
> solution for out of memory problems. However, it seems that data.table
> copes with them quite well:
>
> http://stackoverflow.com/questions/11564775/exceeding-memory-limit-in-r-even-with-24gb-ram
>
> Besides, I have just discovered the ":=" operator which could be useful
> for working with large datasets.
>
> http://stackoverflow.com/questions/9508118/out-of-memory-when-modifying-a-big-r-dataframe
> http://stackoverflow.com/questions/7029944/when-should-i-use-the-operator-in-data-table
>
> Best,
>
> Oscar.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From m.bevanda at ymail.com  Sat Feb 16 14:23:58 2013
From: m.bevanda at ymail.com (M. Bevanda)
Date: Sat, 16 Feb 2013 13:23:58 +0000 (GMT)
Subject: [R-sig-Geo] SummerSchool AniMove 2013 using R, GRASS, QGIS
Message-ID: <1361021038.9746.YahooMailNeo@web132501.mail.ird.yahoo.com>

fyi

apologies for potential cross posting


fwd. message from GRASS-ML:


SummerSchool AniMove 2013 - Programs learnt will be: R (raster, sp, dismo, 
rgdal etc.), GRASS (with add-ons like r.pi), QGIS
??? 
FYI

http://remote-sensing-biodiversity.org/animove2013

----------------------------------------------------

This Summer School provides you with profound knowledge of remote sensing and 
species distribution and animal movement within conservation.
It includes hand-on exercises ranging from land cover and species distribution 
analysis to modeling of animal movement.

This Summer School includes hand-on exercises ranging from land cover and 
species distribution analysis to modeling of animal movement. Talks by 
conservationists and field work (GPS tracking) will be part of the Summer 
School as well.

The analysis of remote sensing data, the linkages with in-situ (animal 
movement) data is complex but highly relevant. The required methods and 
approaches to combine animal movement with remote sensing data for 
conservation will be tought during the AniMove Summer School in August 2013

This applied Summer School focuses on addressing conservation issues using 
remote sensing and modelling. Only Open Source software will be used to allow 
participants to apply them after the Summer School as well. Programs learnt 
will be: R (raster, sp, dismo, rgdal etc.), GRASS (with add-ons like r.pi), 
QGIS.

Dates

Summer School:
August 11.- 25. 2013
(arrival on the 11st, workshops start on the 12th 9am)

Application dead-line:
March 31st 2013

----------------------------------------------------
best regards
Helmut


From jonesmus.mutua at gmail.com  Sat Feb 16 20:08:26 2013
From: jonesmus.mutua at gmail.com (Jonesmus Mutua)
Date: Sat, 16 Feb 2013 22:08:26 +0300
Subject: [R-sig-Geo] Spatio-temporal variogram error
In-Reply-To: <511E57CF.9010103@uni-muenster.de>
References: <CABgQd+PuOptofKqLrCRX5cXMdt5jN5rZvDmd4-8+6h0-0oa57w@mail.gmail.com>
	<511E29D0.5040103@uni-muenster.de>
	<CABgQd+Pbdnxt+ChEFVrX=D46YiQga-v5FbD_VGOmxPobVSu34A@mail.gmail.com>
	<CABgQd+M-WqEE-gJgbdciULT1_K7CTkxSqgopo3Wt2iA=SQsSPA@mail.gmail.com>
	<511E57CF.9010103@uni-muenster.de>
Message-ID: <000301ce0c79$04c70110$0e550330$@gmail.com>

Dear Ben,
Thanks a lot, it actually solves the problem. What I was wondering is whether the time lag is only allowed upto lag 15. The data am using has 21 time points but the lag on the graphs is upto 15, no matter what I change.

Is there a way of  determining what to use as width and cutoff in the formula to compute the spatio-temporal variogram instead of trying different values severally?

Regards,
Jonesmus 

-----Original Message-----
From: Benedikt Gr?ler [mailto:ben.graeler at uni-muenster.de] 
Sent: 15 February 2013 18:44
To: Jonesmus Wambua
Cc: Edzer Pebesma
Subject: Re: [R-sig-Geo] Spatio-temporal variogram error

Dear Jonesmus,

I just submitted the updated version to r-forge. You will find a package build (.tar.gz) and windows binaries (.zip) attached to check whether this solves your problem.

Best wishes,

 Ben

On Freitag, 15. Februar 2013 13:31:18, Jonesmus Wambua wrote:
>
> Hi ben,
> what is the solution to the problem am having?
>
> On Fri, Feb 15, 2013 at 3:28 PM, Jonesmus Wambua 
> <jonesmus.mutua at gmail.com <mailto:jonesmus.mutua at gmail.com>> wrote:
>
>     no, he has not.
>
>
>     On Fri, Feb 15, 2013 at 3:28 PM, Edzer Pebesma
>     <edzer.pebesma at uni-muenster.de
>     <mailto:edzer.pebesma at uni-muenster.de>> wrote:
>
>         It seems Ben solved your problem, has he told you?
>
>
>
>         -------- Original Message --------
>         Subject:        Re: [R-sig-Geo] Spatio-temporal variogram error
>         Date:   Fri, 15 Feb 2013 15:26:53 +0300
>         From:   Jonesmus Wambua <jonesmus.mutua at gmail.com
>         <mailto:jonesmus.mutua at gmail.com>>
>         To:     Edzer Pebesma <edzer.pebesma at uni-muenster.de
>         <mailto:edzer.pebesma at uni-muenster.de>__>
>
>
>
>         Hi,
>         here is the data, coordinates and code. the spatial variogram
>         part of
>         the code works but the spatio-temporal part doesn't work.
>
>         Thanks for the help.
>         regards.
>
>
>         On Fri, Feb 15, 2013 at 2:16 PM, Edzer Pebesma
>         <edzer.pebesma at uni-muenster.de
>         <mailto:edzer.pebesma at uni-muenster.de>
>         <mailto:edzer.pebesma at uni-__muenster.de
>         <mailto:edzer.pebesma at uni-muenster.de>>>
>
>         wrote:
>
>             I can have a look if you send me the data, as .RData file,
>         off-list.
>
>
>             On 02/15/2013 09:26 AM, Jonesmus Wambua wrote:
>
>                 hi, am doing a spatio-temporal variogram and am
>         getting this
>                 error below
>                 that i have no response variable in my data set even
>         though it
>                 is there. my
>                 data am calling gdata and the response variable is
>         pfpr. i have
>                 tried the
>                 code below with no access. the summary of my data is
>         as follows:
>
>                     summary(gdata)
>
>                 Object of class STFDF
>                    with Dimensions (s, t, attr): (438, 21, 1)
>                 [[Spatial:]]
>                 Object of class SpatialPoints
>                 Coordinates:
>                            min      max
>                 Long -16.718 -13.8500
>                 Lat   13.176  13.7915
>                 Is projected: NA
>                 proj4string : [NA]
>                 Number of points: 438
>                 [[Temporal:]]
>                        Index              timeIndex
>                    Min.   :1990-01-01   Min.   : 1
>                    1st Qu.:1994-12-31   1st Qu.: 6
>                    Median :1999-12-30   Median :11
>                    Mean   :1999-12-30   Mean   :11
>                    3rd Qu.:2004-12-28   3rd Qu.:16
>                    Max.   :2009-12-27   Max.   :21
>                 [[Data attributes:]]
>                      Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's
>                       0.0     1.0     4.0    10.1    13.0   330.0    8640
>
>
>                     s=variogram(gdata at data~1, gdata)
>
>
>                     |
>
>                     |
>                                                  |   0%Error in
>         .subset2(x, i,
>                 exact = exact)
>                 : no such index at level 1
>
>
>                     s=variogram(pfpr~1, gdata)
>
>
>                     |
>
>                     |
>                                                  |   0%Error in
>                 gstat.formula(d$formula,
>                 d$data) :
>                     no response variable present in formula
>                 In addition: Warning messages:
>                 1: In min(x) : no non-missing arguments to min;
>         returning Inf
>                 2: In max(x) : no non-missing arguments to max;
>         returning -Inf
>                 3: In min(x) : no non-missing arguments to min;
>         returning Inf
>                 4: In max(x) : no non-missing arguments to max;
>         returning -Inf
>
>
>
>                 can anyone help?
>                 J
>
>                          [[alternative HTML version deleted]]
>
>                 ___________________________________________________
>                 R-sig-Geo mailing list
>         R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>         <mailto:R-sig-Geo at r-project.__org
>         <mailto:R-sig-Geo at r-project.org>>
>         https://stat.ethz.ch/mailman/____listinfo/r-sig-geo
>         <https://stat.ethz.ch/mailman/__listinfo/r-sig-geo>
>
>                 <https://stat.ethz.ch/mailman/__listinfo/r-sig-geo
>         <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>>
>
>
>             --
>             Edzer Pebesma
>             Institute for Geoinformatics (ifgi), University of M?nster
>             Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>             8333081, Fax: +49 251 8339763 <tel:%2B49%20251%208339763>
>         <tel:%2B49%20251%208339763>
>         http://ifgi.uni-muenster.de
>         http://www.52north.org/____geostatistics
>         <http://www.52north.org/__geostatistics>
>             <http://www.52north.org/__geostatistics
>         <http://www.52north.org/geostatistics>> e.pebesma at wwu.de
>         <mailto:e.pebesma at wwu.de>
>             <mailto:e.pebesma at wwu.de <mailto:e.pebesma at wwu.de>>
>
>
>
>
>
>

--
Benedikt Gr?ler

ifgi - Institute for Geoinformatics
University of Muenster

http://ifgi.uni-muenster.de/graeler

Phone: +49 251 83-33082
Mail: ben.graeler at uni-muenster.de


From jonesmus.mutua at gmail.com  Sat Feb 16 20:13:10 2013
From: jonesmus.mutua at gmail.com (Jonesmus Mutua)
Date: Sat, 16 Feb 2013 22:13:10 +0300
Subject: [R-sig-Geo] Recall:  Spatio-temporal variogram error
Message-ID: <!&!GAAAAAAAAACaSt41o2xuRI+Szc9NRWtywoAAABgAAAAAAAAAmkreNaNsbkSPks3PTUVrcmTTIAAAAAAAEAAAAEwRBMT/orFDj6b5JmGvK9owAAAAUkU6IFtSLXNpZy1HZW9dIFNwYXRpby10ZW1wb3JhbCB2YXJpb2dyYW0gZXJyb3IA@gmail.com>

Jonesmus Mutua would like to recall the message, "[R-sig-Geo]
Spatio-temporal variogram error".
-------------- next part --------------
A non-text attachment was scrubbed...
Name: winmail.dat
Type: application/ms-tnef
Size: 1333 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130216/63f21152/attachment.bin>

From Roger.Bivand at nhh.no  Sun Feb 17 15:08:22 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 17 Feb 2013 15:08:22 +0100
Subject: [R-sig-Geo] Recall:  Spatio-temporal variogram error
In-Reply-To: <!&!GAAAAAAAAACaSt41o2xuRI+Szc9NRWtywoAAABgAAAAAAAAAmkreNaNsbkSPks3PTUVrcmTTIAAAAAAAEAAAAEwRBMT/orFDj6b5JmGvK9owAAAAUkU6IFtSLXNpZy1HZW9dIFNwYXRpby10ZW1wb3JhbCB2YXJpb2dyYW0gZXJyb3IA@gmail.com>
References: <!&!GAAAAAAAAACaSt41o2xuRI+Szc9NRWtywoAAABgAAAAAAAAAmkreNaNsbkSPks3PTUVrcmTTIAAAAAAAEAAAAEwRBMT/orFDj6b5JmGvK9owAAAAUkU6IFtSLXNpZy1HZW9dIFNwYXRpby10ZW1wb3JhbCB2YXJpb2dyYW0gZXJyb3IA@gmail.com>
Message-ID: <alpine.LRH.2.03.1302171504250.8512@reclus.nhh.no>

I'll use this pretext to warn users never to recall messages sent to the 
list. Recall does not work, and the bounced recalls from the 2700 on the 
list which then fill the list admin's email inbox are less than welcome.

Always check your postings, including included addressees, editing out the 
list if you don't want your message broadcast. Once you send, you cannot 
practically withdraw; the recall is also archived as a posting.

Roger Bivand

List admin.


On Sat, 16 Feb 2013, Jonesmus Mutua wrote:

> Jonesmus Mutua would like to recall the message, "[R-sig-Geo] 
> Spatio-temporal variogram error".
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From johannesradinger at gmail.com  Mon Feb 18 11:03:03 2013
From: johannesradinger at gmail.com (Johannes Radinger)
Date: Mon, 18 Feb 2013 11:03:03 +0100
Subject: [R-sig-Geo] Error when accessing raster layer (package 'raster')
In-Reply-To: <CANtt_hzCRKt4EjuSdkmhJ0ysnABpcs6B+G7cSb04ZXOkhmJPJA@mail.gmail.com>
References: <CABsGe_yF82ynWDk6AFxh+SYQ2doduMAK__i=2b2JLGqPtnuhPg@mail.gmail.com>
	<CANtt_hzCRKt4EjuSdkmhJ0ysnABpcs6B+G7cSb04ZXOkhmJPJA@mail.gmail.com>
Message-ID: <CABsGe_xfnN8A=L9ZaYwVKxPnerqfom_S7ZvGTPszb2_yCaUg0Q@mail.gmail.com>

Robert,
yes updating solved the problems; Somehow I did not realize that my package
is out of date ;)

Johannes

On Fri, Feb 15, 2013 at 6:03 PM, Robert J. Hijmans <r.hijmans at gmail.com> wrote:
> Johannes,
> Please update the raster package and try again --- that is always a
> good procedure when you get an error message.
> Robert
>
> On Fri, Feb 15, 2013 at 1:22 AM, Johannes Radinger
> <johannesradinger at gmail.com> wrote:
>> Hi,
>>
>> I have a rasterbrick and when I try to access a single layer of it I
>> get following error:
>>>  my_brick[["layer_1"]]
>> class       : RasterLayer
>> dimensions  : 912, 840, 766080  (nrow, ncol, ncell)
>> resolution  : 50, 50  (x, y)
>> extent      : 3505300, 3547300, 6025800, 6071400  (xmin, xmax, ymin, ymax)
>> coord. ref. : +proj=tmerc +lat_0=0 +lon_0=9 +k=1 +x_0=3500000 +y_0=0
>> +ellps=bessel +datum=potsdam +units=m +no_defs
>> +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7
>> values      : in memory
>> layer name  : layer_1
>> min value   : 0
>> max value   : 0.1841621
>> Error in if (is.factor(object)) { : missing value where TRUE/FALSE needed
>>
>> The rasterbrick is created by a rasterstack (approx. 15 layers) that
>> is masked using the function mask.
>> When I try to access the same layer in the unmasked rasterstack I
>> don't get the error.
>>
>> Any suggestions?
>>
>> I am using R 2.15.2 with raster 2.0-08 (27-June-2012) on Ubuntu.
>>
>> best regards,
>> /Johannes
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From mauriziomarchi85 at gmail.com  Mon Feb 18 15:19:04 2013
From: mauriziomarchi85 at gmail.com (Maurizio Marchi)
Date: Mon, 18 Feb 2013 15:19:04 +0100
Subject: [R-sig-Geo] Interpolation with linear models
Message-ID: <CANJhsN1u_gf-zynM_7HoSYrB9EWZbsPbBmqad=SjfApFZDpQhw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130218/67eba607/attachment.pl>

From milansharma2012 at yahoo.com  Mon Feb 18 22:55:11 2013
From: milansharma2012 at yahoo.com (Milan Sharma)
Date: Mon, 18 Feb 2013 13:55:11 -0800 (PST)
Subject: [R-sig-Geo] counties plot in R
Message-ID: <1361224511.59463.YahooMailNeo@web162105.mail.bf1.yahoo.com>

Hi list/ Roger,
I tried just?3 states as you said, I merged state and county names to make sure the county names are different.
Here is the error message.

library(maptools)
library(maps)
library(spdep)
library(rgdal)
library(alr3)
?data<-read.csv("try3.csv",header=TRUE)
> attach(data)
> names(data)
[1] "State"???? "NAME"????? "county"??? "Longitude" "Latitude"? "yield"??? 
[7] "temp"????? "precpt"?? 
> sd<-map("county", c("Illinois","Indiana","Iowa"), fill=F, plot=F)
> county.names<-as.character(sd$names)
> sd.sp<-map2SpatialPolygons(sd, IDs=county.names, proj4string=CRS("+proj=longlat"))
Error in map2SpatialPolygons(sd, IDs = county.names, proj4string = CRS("+proj=longlat")) : 
? map and IDs differ in length
> 
How do I solve the problem of matching?
Milan



From flaxman at gmail.com  Tue Feb 19 04:23:39 2013
From: flaxman at gmail.com (Seth Flaxman)
Date: Mon, 18 Feb 2013 22:23:39 -0500
Subject: [R-sig-Geo] unexpected behavior from rpcp function in stpp
Message-ID: <CAPGk9pfiUVmypZJX_MRmWhK0mHp8en73fkjLKFAWEEeqzhVGSw@mail.gmail.com>

Hi list. Am I missing something obvious here? Should the dispersion
flip the relative number of parents and children? Or maybe I'm
misinterpreting the rownames?

# -- sample code --

library(stpp)
set.seed(1)
pp1 <- rpcp(nparents=40, mc=5, cluster=c("normal"),dispersion=.4)

# I expect 40*5 = 200 points total, 40 parents (marked with "") and
40*4=160 children (marked with "x")

table(rownames(pp1$xyt))
# result makes sense:
#      x
# 54 153

pp2 <- rpcp(nparents=40, mc=5, cluster=c("normal"),dispersion=.05)
# I expect the same thing, but for some reason the number of parents
and the number of children are switched

table(rownames(pp2$xyt))
# result doesn't make sense:
#      x
# 143  59

Thanks,
Seth


From Roger.Bivand at nhh.no  Tue Feb 19 08:12:49 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 19 Feb 2013 08:12:49 +0100
Subject: [R-sig-Geo] counties plot in R
In-Reply-To: <1361224511.59463.YahooMailNeo@web162105.mail.bf1.yahoo.com>
References: <1361224511.59463.YahooMailNeo@web162105.mail.bf1.yahoo.com>
Message-ID: <alpine.LRH.2.03.1302190809160.17188@reclus.nhh.no>

On Mon, 18 Feb 2013, Milan Sharma wrote:

> Hi list/ Roger,
> I tried just?3 states as you said, I merged state and county names to make sure the county names are different.
> Here is the error message.
>
> library(maptools)
> library(maps)
> library(spdep)
> library(rgdal)
> library(alr3)
> ?data<-read.csv("try3.csv",header=TRUE)
>> attach(data)
>> names(data)
> [1] "State"???? "NAME"????? "county"??? "Longitude" "Latitude"? "yield"???
> [7] "temp"????? "precpt"??
>> sd<-map("county", c("Illinois","Indiana","Iowa"), fill=F, plot=F)
>> county.names<-as.character(sd$names)
>> sd.sp<-map2SpatialPolygons(sd, IDs=county.names, proj4string=CRS("+proj=longlat"))
> Error in map2SpatialPolygons(sd, IDs = county.names, proj4string = CRS("+proj=longlat")) :
> ? map and IDs differ in length
>>
> How do I solve the problem of matching?

By checking and paying attention. You have fill=FALSE (never ever use F 
for FALSE or T for TRUE, try T <- FALSE to see why this is bad), but in an 
earlier reply, I said fill=TRUE (to return polygons, not line segments). 
You could find this out by reading ?map.

I do not have time for trivial questions to which I have already replied, 
hand-holding decreases learning, this terminates my input to your project.

Roger

> Milan
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From encharbel at gmail.com  Tue Feb 19 14:08:36 2013
From: encharbel at gmail.com (Charbel Eliane)
Date: Tue, 19 Feb 2013 15:08:36 +0200
Subject: [R-sig-Geo] help- raster overlap
Message-ID: <CA+XydTRnvAtYfCBoMbGcoBpfwe3943=4v-Mme0QYmc1bm+uZRg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130219/9a7b9b8e/attachment.pl>

From hakim.abdi at nateko.lu.se  Tue Feb 19 14:18:49 2013
From: hakim.abdi at nateko.lu.se (Abdulhakim Abdi)
Date: Tue, 19 Feb 2013 14:18:49 +0100
Subject: [R-sig-Geo] arcStats: do not know how to convert 'locDates' to
	class "Date"
Message-ID: <CALPtVYXHwfjG3SMymqnJn-omQu0gaP3-n2vDs6SdBWUA9hs+vA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130219/73158bcb/attachment.pl>

From matteo.mattiuzzi at boku.ac.at  Tue Feb 19 14:36:47 2013
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Tue, 19 Feb 2013 14:36:47 +0100
Subject: [R-sig-Geo] arcStats: do not know how to convert 'locDates' to
 class "Date"
Message-ID: <51238DFF02000027000187B9@gwia2.boku.ac.at>

Dear Abdulhakim,


which version is your MODIS package? In the last version 0.8-04 this
should work!


Matteo


>>> Abdulhakim Abdi  02/19/13 2:19 PM >>>
Dear List,

I'm trying to execute the arcStats function in the MODIS package:

arcStats(product="MYD17A2", collection="005",
extent=list(xmin=-20,xmax=40,ymin=10, ymax=20), begin="2000.08.01",
end="2000.08.31", asMap=TRUE, outName=NULL)?

and I get the following error:

Error in as.Date.default(locDates, "%Y.%m.%d") :
  do not know how to convert 'locDates' to class "Date"

Any fixes out there?

    [[alternative HTML version deleted]]


From nwaoguchima at yahoo.co.uk  Tue Feb 19 19:37:47 2013
From: nwaoguchima at yahoo.co.uk (chima Nwaogu)
Date: Tue, 19 Feb 2013 18:37:47 +0000 (GMT)
Subject: [R-sig-Geo] Minimum Convex Polygon
Message-ID: <1361299067.27178.YahooMailNeo@web133004.mail.ir2.yahoo.com>

?Hi all,
?I got these set of codes to compute mcp which worked well in drawing the polygons but I don't have any idea about how the get the areas of the various polygons calculated??for each study site. Here is what I did using version 2.15.2; data for location 1 attached with mail.

?library(ggplot2)
?library(plyr)

?##Location 1
mcpyankari<-read.csv("mcpyankari.csv")
head(mcpyankari)


?find_hully <- function(mcpyankari) mcpyankari[chull(mcpyankari$long, mcpyankari$lat), ]
?hullsy <- ddply(mcpyankari, "mcpyankari$Individual", find_hully)

?plot <- ggplot(data = hullsy, aes(x = long, y = lat, colour=Individual, fill = Individual)) +
?geom_point() + geom_polygon(data = hullsy, alpha= 0.5) + labs(x = "Longitude", y = "Latitude")
?plot?

?##Location 2
?mcpkainji<-read.csv("mcpkainji.csv")
?head(mcpkainji)

?find_hullk <- function(mcpkainji) mcpkainji[chull(mcpkainji$long, mcpkainji$lat), ]
?hullsk <- ddply(mcpkainji, "mcpkainji$Individual", find_hullk)

?plot <- ggplot(data = hullsk, aes(x = long, y = lat, colour=Individual, fill = Individual)) +
?geom_point() + geom_polygon(data = hullsk, alpha = 0.5) + labs(x = "Longitude", y = "Latitude")
?plot

?Thanks?
?Chima

WebRep
Overall rating
This site has no rating
(not enough votes)
WebRep
Overall rating
This site has no rating
(not enough votes)
WebRep
Overall rating
This site has no rating
(not enough votes)
WebRep
Overall rating
This site has no rating
(not enough votes)
WebRep
Overall rating
This site has no rating
(not enough votes)
WebRep
Overall rating
This site has no rating
(not enough votes)
WebRep
Overall rating
This site has no rating
(not enough votes)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130219/c6a6c3bc/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mcpyankari.csv
Type: application/vnd.ms-excel
Size: 2744 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130219/c6a6c3bc/attachment.xlb>

From HodgessE at uhd.edu  Wed Feb 20 01:30:25 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Wed, 20 Feb 2013 00:30:25 +0000
Subject: [R-sig-Geo] missing vgmST?
Message-ID: <FF9DB805FC41CC4E95825A50F680630212927B01@challenger.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130220/30daef8a/attachment.pl>

From piero.campa at gmail.com  Wed Feb 20 07:44:00 2013
From: piero.campa at gmail.com (Piero Campalani)
Date: Wed, 20 Feb 2013 07:44:00 +0100
Subject: [R-sig-Geo] missing vgmST?
In-Reply-To: <FF9DB805FC41CC4E95825A50F680630212927B01@challenger.uhd.campus>
References: <FF9DB805FC41CC4E95825A50F680630212927B01@challenger.uhd.campus>
Message-ID: <CAMp9JaNYOVLF6bGXooOavUSkAxQx9h+_oLPo6RmTadwJUHxJJA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130220/a9a81c7a/attachment.pl>

From HodgessE at uhd.edu  Wed Feb 20 08:01:53 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Wed, 20 Feb 2013 07:01:53 +0000
Subject: [R-sig-Geo] missing vgmST?
In-Reply-To: <CAMp9JaNYOVLF6bGXooOavUSkAxQx9h+_oLPo6RmTadwJUHxJJA@mail.gmail.com>
References: <FF9DB805FC41CC4E95825A50F680630212927B01@challenger.uhd.campus>,
	<CAMp9JaNYOVLF6bGXooOavUSkAxQx9h+_oLPo6RmTadwJUHxJJA@mail.gmail.com>
Message-ID: <FF9DB805FC41CC4E95825A50F680630212927E3D@challenger.uhd.campus>

There's a new one...both spacetime and gstat.

That's what the problem was.

Thanks,
Erin

________________________________________
From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Piero Campalani [piero.campa at gmail.com]
Sent: Wednesday, February 20, 2013 12:44 AM
Cc: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] missing vgmST?

Hi Erin,
...did you load the library?

Piero


On 20 February 2013 01:30, Hodgess, Erin <HodgessE at uhd.edu> wrote:

> Hi!
>
> I'm working with some spatio-temporal data and was trying to use vgmST.
>
> However, it says that the function is not there.  I have the spacetime
> library running.
>
> Any suggestions, please?
>
> > v <- vgmST("separable",space=vgm(1,"Nug"),time=vgm(1,"Nug"))
> Error: could not find function "vgmST"
> >
>
> Thanks,
> Sincerely,
> Erin
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From rossahmed at googlemail.com  Wed Feb 20 11:10:34 2013
From: rossahmed at googlemail.com (Ross Ahmed)
Date: Wed, 20 Feb 2013 10:10:34 +0000
Subject: [R-sig-Geo] raster resolution
Message-ID: <CD4A519A.3DE4%rossahmed@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130220/acd5ad08/attachment.pl>

From pep.bioalerts at gmail.com  Wed Feb 20 14:48:21 2013
From: pep.bioalerts at gmail.com (Josep M Serra diaz)
Date: Wed, 20 Feb 2013 14:48:21 +0100
Subject: [R-sig-Geo] raster resolution
In-Reply-To: <CD4A519A.3DE4%rossahmed@gmail.com>
References: <CD4A519A.3DE4%rossahmed@gmail.com>
Message-ID: <CAF8H1dcR4N=zYCE-EYpTjafEubnDBTbnHN=WZpVEvQxDdMUu-A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130220/39daa988/attachment.pl>

From julian at hafro.is  Wed Feb 20 15:29:59 2013
From: julian at hafro.is (Julian Burgos)
Date: Wed, 20 Feb 2013 14:29:59 +0000
Subject: [R-sig-Geo] raster resolution
In-Reply-To: <CAF8H1dcR4N=zYCE-EYpTjafEubnDBTbnHN=WZpVEvQxDdMUu-A@mail.gmail.com>
References: <CD4A519A.3DE4%rossahmed@gmail.com>
	<CAF8H1dcR4N=zYCE-EYpTjafEubnDBTbnHN=WZpVEvQxDdMUu-A@mail.gmail.com>
Message-ID: <5124DDE7.2040204@hafro.is>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130220/0059488d/attachment.pl>

From tghoward at gw.dec.state.ny.us  Wed Feb 20 16:19:50 2013
From: tghoward at gw.dec.state.ny.us (Tim Howard)
Date: Wed, 20 Feb 2013 10:19:50 -0500
Subject: [R-sig-Geo] remove nearby points
Message-ID: <5124A346020000D500066227@gwsmtp.dec.state.ny.us>

I am trying to remove spatial 'duplicates' from a point dataset. The coordinates won't be exactly the same and so I can't use the normal methods for removing the second instance of the points. This generalizes to a question about removing points nearby others, either randomly or based on other criteria (in my case, I want to keep the one with a more recent date attribute). 
 
Although my research and fiddling has got me close, I wonder if there already is a solution I'm missing within the various spatial packages so I'm starting with sig-geo, even though I'm stuck at a spot that would use regular R syntax. 
 
My approach (code at bottom of email):
 
1. Move the full point data set over to SpatialPoints as decimal degrees longlat  [package=sp]
2. Reproject to utm, using spTransform
3. convert to ppp
4. find the distance from each point to its nearest using nndist()  [package = spatstat]
5. identify that nearest using nnwhich()  [package = spatstat]
6. extract those with neighbors closer than 100m
 
** this is where I'm stuck **  I now have a list of neighbors, for which I'd like to keep the first case of each neighbor but remove the second (and sometimes third). Similar to unique(). Here's a dummy example
 
#set up dummy data frame, the dist and neigh columns are from nndist() and nnwhich(), respectively
a <- data.frame(ID=c("one","two","three","four"),dist=c(2.2,5.1,5.1,2.2),neigh=c(4,3,2,1))
 
#here's as far as I've got, I can remove the neighbor to row one with the following line.
#a looping solution seems problematic as the size of the dataframe changes with each loop
 
b <- a[-match(a$neigh[1], rownames(a)),]
 
Questions:
- Is there already a function in a spatial package that offers a way to remove points within a certain distance of others?
- if not, does anyone have any hints for taking the next step from what I've done?
 
### code for what I've got so far.
### dat.wind.tall is the input DF of lat long decimal degree coordinates
 
library(sp)
library(spatstat)
library(maptools)
library(rgdal)
llCRS <-  CRS("+proj=longlat +datum=NAD83")
wind.sp <- SpatialPoints(dat.wind.tall[,c(66,65)], proj4string=llCRS)
prjNew <- CRS("+proj=utm +zone=18 +datum=NAD83")
wind.utm <- spTransform(wind.sp, prjNew)
wind.ppp <- as(as(wind.utm, "SpatialPoints"), "ppp")
turb.dist <- nndist(wind.ppp)
turb.nearest <- nnwhich(wind.ppp)
dat.wind.tall.nbr <- cbind(dat.wind.tall, nneigh=turb.nearest, dist=turb.dist)
closeNeighbors <- dat.wind.tall.nbr[turb.dist<100,]
#code for removing neighbor to first row. 
y <- closeNeighbors[-match(closeNeighbors$nneigh[1], rownames(closeNeighbors)),]
 
Thanks in advance for any help. 
Tim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130220/8075c6b8/attachment.html>

From matteo.mattiuzzi at boku.ac.at  Wed Feb 20 17:08:24 2013
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Wed, 20 Feb 2013 17:08:24 +0100
Subject: [R-sig-Geo] raster resolution
Message-ID: <512503090200002700018832@gwia2.boku.ac.at>

Dear Ross,

You have 2 problems, one is that by changing the resolution you change
in most of the cases also the extent, and second you cannot generate a
regular raster (same area for all pixels) based on LAT/LON.
You will have to use to an equal area projection.
http://en.wikipedia.org/wiki/Map_projection#Equal-area

Here a function that helps you to adapt the extent:
ext=rasterExtent
resolution= rasterExtent units resolution as c(x,y) or single value for
both
inner = as the change of the resolution in most of the cases changes the
given extent you can choose to make the extent little smaller
(inner=TRUE) or little bigger.


obeyRes <- function(ext,resolution,inner=TRUE)
{
    if(length(resolution)==1)
    {
        resolution <- rep(resolution,2)
    }
    cols <- (ext at xmax - ext at xmin)/resolution[2]
    rows <- (ext at ymax - ext at ymin)/resolution[1]


    if(inner)
    {
        cols <- floor(cols)
        rows <- floor(rows)
    } else
    {
        cols <- ceiling(cols)
        rows <- ceiling(rows)
    }


    olim     <- resolution * c(rows,cols)
    ext at xmax <- ext at xmin + olim[2]
    ext at ymin <- ext at ymax - olim[1]
    return(list(extent=ext,cols=cols,rows=rows))
}



myExtent <-  extent(-176.5813, 174.1103,-31.16667, 83.1)
r   <- raster(ext=myExtent,crs="+proj=longlat +ellps=WGS84
+datum=WGS84")


# Sinusoidal (as example!!)
EAE <- projectExtent(r,crs="+proj=sinu +lon_0=0 +x_0=0 +y_0=0
+a=6371007.181 +b=6371007.181 +units=m +no_defs")
 
ext100 <- obeyRes(extent(EAE),resolution=10000)  
r100    <- raster(ext=ext100$extent,ncol=ext100$cols,nrows=ext100$rows,
crs="+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181 +b=6371007.181
+units=m +no_defs")


r100[]  <- round(runif(ncell(r100),0,1))
# writeRaster(r100,"r100.tif")


ext1000 <- obeyRes(extent(EAE),resolution=sqrt(1000)*1000)
r1000    <-
raster(ext=ext1000$extent,ncol=ext1000$cols,nrows=ext1000$rows,
crs="+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181 +b=6371007.181
+units=m +no_defs")

r1000[]  <- round(runif(ncell(r1000),0,1))
# writeRaster(r1000,"r1000.tif")




#################
I'm not 100 % sure about my calculations/considerations so take it with
care! 
Matteo
 


>>> Ross Ahmed  02/20/13 11:03 AM >>>
I have the following raster:

myRaster <- c(-176.5813, 174.1103, -31.16667, 83.1)
myRasterExtent <- extent(matrix(myRaster, ncol=2, nrow=2, byrow=T))
myRasterExtent <-  raster(myRasterExtent, crs="+proj=longlat
+ellps=WGS84
+datum=WGS84?)

How can I change resolution to 100km^2 and 1000km^2

many thanks
Ross



    [[alternative HTML version deleted]]


From tghoward at gw.dec.state.ny.us  Wed Feb 20 19:39:27 2013
From: tghoward at gw.dec.state.ny.us (Tim Howard)
Date: Wed, 20 Feb 2013 13:39:27 -0500
Subject: [R-sig-Geo] remove nearby points
Message-ID: <5124D20F020000D50006626D@gwsmtp.dec.state.ny.us>

I've found a very inelegant solution that continues on the path I was going. Using the dummy dataset below, this code will strip neighbors as I desire. 
 
b <- a[0,]
for(i in 2:nrow(a)){
    if(!is.na(a[match(a$neigh[i],rownames(a)[1:i]),]$ID)){ 
    b <- rbind(b,a[i,])
    }
    } 
> b
     ID dist neigh
3 three  5.1     2
4  four  2.2     1
I'd still be curious if anyone knows a cleaner solution. 
Best, 
Tim

>>> Tim Howard 2/20/2013 10:19 AM >>>
I am trying to remove spatial 'duplicates' from a point dataset. The coordinates won't be exactly the same and so I can't use the normal methods for removing the second instance of the points. This generalizes to a question about removing points nearby others, either randomly or based on other criteria (in my case, I want to keep the one with a more recent date attribute). 
 
Although my research and fiddling has got me close, I wonder if there already is a solution I'm missing within the various spatial packages so I'm starting with sig-geo, even though I'm stuck at a spot that would use regular R syntax. 
 
My approach (code at bottom of email):
 
1. Move the full point data set over to SpatialPoints as decimal degrees longlat  [package=sp]
2. Reproject to utm, using spTransform
3. convert to ppp
4. find the distance from each point to its nearest using nndist()  [package = spatstat]
5. identify that nearest using nnwhich()  [package = spatstat]
6. extract those with neighbors closer than 100m
 
** this is where I'm stuck **  I now have a list of neighbors, for which I'd like to keep the first case of each neighbor but remove the second (and sometimes third). Similar to unique(). Here's a dummy example
 
#set up dummy data frame, the dist and neigh columns are from nndist() and nnwhich(), respectively
a <- data.frame(ID=c("one","two","three","four"),dist=c(2.2,5.1,5.1,2.2),neigh=c(4,3,2,1))
 
#here's as far as I've got, I can remove the neighbor to row one with the following line.
#a looping solution seems problematic as the size of the dataframe changes with each loop
 
b <- a[-match(a$neigh[1], rownames(a)),]
 
Questions:
- Is there already a function in a spatial package that offers a way to remove points within a certain distance of others?
- if not, does anyone have any hints for taking the next step from what I've done?
 
### code for what I've got so far.
### dat.wind.tall is the input DF of lat long decimal degree coordinates
 
library(sp)
library(spatstat)
library(maptools)
library(rgdal)
llCRS <-  CRS("+proj=longlat +datum=NAD83")
wind.sp <- SpatialPoints(dat.wind.tall[,c(66,65)], proj4string=llCRS)
prjNew <- CRS("+proj=utm +zone=18 +datum=NAD83")
wind.utm <- spTransform(wind.sp, prjNew)
wind.ppp <- as(as(wind.utm, "SpatialPoints"), "ppp")
turb.dist <- nndist(wind.ppp)
turb.nearest <- nnwhich(wind.ppp)
dat.wind.tall.nbr <- cbind(dat.wind.tall, nneigh=turb.nearest, dist=turb.dist)
closeNeighbors <- dat.wind.tall.nbr[turb.dist<100,]
#code for removing neighbor to first row. 
y <- closeNeighbors[-match(closeNeighbors$nneigh[1], rownames(closeNeighbors)),]
 
Thanks in advance for any help. 
Tim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130220/d734f758/attachment.html>

From tejasbhagwat at gmail.com  Thu Feb 21 03:24:39 2013
From: tejasbhagwat at gmail.com (Tejas Bhagwat)
Date: Wed, 20 Feb 2013 21:24:39 -0500
Subject: [R-sig-Geo] kmz to shapefile
Message-ID: <CACGX5CJ5dXgDSZLYneHn0jBQRzy__QdZJ7_aVr=7BXX+j1aESQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130220/9e8e1c3b/attachment.pl>

From julian at hafro.is  Thu Feb 21 09:24:24 2013
From: julian at hafro.is (Julian Burgos)
Date: Thu, 21 Feb 2013 08:24:24 +0000
Subject: [R-sig-Geo] remove nearby points
In-Reply-To: <5124D20F020000D50006626D@gwsmtp.dec.state.ny.us>
References: <5124D20F020000D50006626D@gwsmtp.dec.state.ny.us>
Message-ID: <5125D9B8.5020109@hafro.is>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130221/3a2c9df8/attachment.pl>

From marianne.uhlig at kit.edu  Thu Feb 21 14:08:16 2013
From: marianne.uhlig at kit.edu (Uhlig, Marianne (IMK))
Date: Thu, 21 Feb 2013 14:08:16 +0100
Subject: [R-sig-Geo] Data on irregular grid in a stereographic projection
In-Reply-To: <51260718.4000103@kit.edu>
References: <51260718.4000103@kit.edu>
Message-ID: <51261C40.2090601@kit.edu>

Hi everyone,

Maybe this sounds dumb, but I am new to R. I'm trying to plot data on a 
stereographic map that looks like
map("world",proj="stereographic",xlim=c(-50,75),ylim=c(20,75))
map.grid(lim=c(-50,75,20,75,180,50,90),nx=5,ny=8,pretty=TRUE,col=1)

My Problem is, that I can't use image(lat,lon,data), because I have an 
irregular grid like this:
dim(lat)=212  206
dim(lon)=212  206
dim(data)=212  206
(Error in image.default(lon, lat, data) :
   increasing 'x' and 'y' values expected)

So far I'm using image.plot

image.plot(lon,lat,data,xlim=c(-50,75),ylim=c(20,75),...)
addland(col="white",lwd=1)
grid()

which works fine, except the resulting image doesn't look very good.

Is there an relative easy way of plotting this without interpolating my 
data onto a regular grid?

Many thanks.

Marianne


From julian at hafro.is  Thu Feb 21 15:44:06 2013
From: julian at hafro.is (Julian Burgos)
Date: Thu, 21 Feb 2013 14:44:06 +0000
Subject: [R-sig-Geo] kmz to shapefile
In-Reply-To: <CACGX5CJ5dXgDSZLYneHn0jBQRzy__QdZJ7_aVr=7BXX+j1aESQ@mail.gmail.com>
References: <CACGX5CJ5dXgDSZLYneHn0jBQRzy__QdZJ7_aVr=7BXX+j1aESQ@mail.gmail.com>
Message-ID: <512632B6.1010300@hafro.is>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130221/ebad4868/attachment.pl>

From HodgessE at uhd.edu  Thu Feb 21 18:03:12 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Thu, 21 Feb 2013 17:03:12 +0000
Subject: [R-sig-Geo] question about wireframe
Message-ID: <FF9DB805FC41CC4E95825A50F680630212928A5F@challenger.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130221/7ea396a2/attachment.pl>

From edzer.pebesma at uni-muenster.de  Thu Feb 21 20:52:58 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 21 Feb 2013 20:52:58 +0100
Subject: [R-sig-Geo] question about wireframe
In-Reply-To: <FF9DB805FC41CC4E95825A50F680630212928A5F@challenger.uhd.campus>
References: <FF9DB805FC41CC4E95825A50F680630212928A5F@challenger.uhd.campus>
Message-ID: <51267B1A.6020701@uni-muenster.de>



On 02/21/2013 06:03 PM, Hodgess, Erin wrote:
> Hello!
>
> I have a krigeST object:
>
>> str(kr1)
> Formal class 'STFDF' [package "spacetime"] with 4 slots
>    ..@ data   :'data.frame':     8250 obs. of  1 variable:
>    .. ..$ var1.pred: num [1:8250] 95 95.1 95.3 95.4 95.6 ...
>    ..@ sp     :Formal class 'SpatialPoints' [package "sp"] with 3 slots
>    .. .. ..@ coords     : num [1:825, 1:2] -108 -108 -107 -106 -106 ...
>    .. .. .. ..- attr(*, "dimnames")=List of 2
>    .. .. .. .. ..$ : NULL
>    .. .. .. .. ..$ : chr [1:2] "lon" "lat"
>    .. .. ..@ bbox       : num [1:2, 1:2] -108 24 -92 36
>    .. .. .. ..- attr(*, "dimnames")=List of 2
>    .. .. .. .. ..$ : chr [1:2] "lon" "lat"
>    .. .. .. .. ..$ : chr [1:2] "min" "max"
>    .. .. ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots
>    .. .. .. .. ..@ projargs: chr " +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0"
>    ..@ time   :An ?xts? object on 2001-01-01/2010-01-01 containing:
>    Data: int [1:10, 1] 1 2 3 4 5 6 7 8 9 10
>   - attr(*, "dimnames")=List of 2
>    ..$ : NULL
>    ..$ : chr "timeIndex"
>    Indexed by objects of class: [Date] TZ: UTC
>    xts Attributes:
>   NULL
>    ..@ endTime: POSIXct[1:10], format: "2002-01-01" "2003-01-01" ...
>
>
> I would like to draw a wireframe, but I keep getting the following:
>
>> str(pred.grd)
> Formal class 'STF' [package "spacetime"] with 3 slots
>    ..@ sp     :Formal class 'SpatialPoints' [package "sp"] with 3 slots
>    .. .. ..@ coords     : num [1:825, 1:2] -108 -108 -107 -106 -106 ...
>    .. .. .. ..- attr(*, "dimnames")=List of 2
>    .. .. .. .. ..$ : NULL
>    .. .. .. .. ..$ : chr [1:2] "lon" "lat"
>    .. .. ..@ bbox       : num [1:2, 1:2] -108 24 -92 36
>    .. .. .. ..- attr(*, "dimnames")=List of 2
>    .. .. .. .. ..$ : chr [1:2] "lon" "lat"
>    .. .. .. .. ..$ : chr [1:2] "min" "max"
>    .. .. ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots
>    .. .. .. .. ..@ projargs: chr " +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0"
>    ..@ time   :An ?xts? object on 2001-01-01/2010-01-01 containing:
>    Data: int [1:10, 1] 1 2 3 4 5 6 7 8 9 10
>   - attr(*, "dimnames")=List of 2
>    ..$ : NULL
>    ..$ : chr "timeIndex"
>    Indexed by objects of class: [Date] TZ: UTC
>    xts Attributes:
>   NULL
>    ..@ endTime: POSIXct[1:10], format: "2002-01-01" "2003-01-01" ...
>> wireframe(pred.grd at coords[,1],pred.grd at coords[,2],pred.grd at time,data=kr1$var1.pred)
> Error in wireframe(pred.grd at coords[, 1], pred.grd at coords[, 2], pred.grd at time,  :
>    no slot of name "coords" for this object of class "STF"
>>

the error message is pretty clear; showClass("STF") would have told you 
where to look, as does your output above: assuming kr1 and pred.grd 
refer to the same geometry, you should have used pred.grd at sp@coords and 
index(pred.grd at time).

Simpler would be to use as(kr1, "data.frame") and specify your wireframe 
from there, using the formula var1.pred~lon+lat .

I don't understand what you expect lattice::wireframe to do when you 
pass it four vectors.

>
>
> Thanks,
> Erin
> PS this is with the latest version of gstat and spacetime (2/19)
>
>
> 	[[alternative HTML version deleted]]
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From tarabridwell at gmail.com  Thu Feb 21 21:06:23 2013
From: tarabridwell at gmail.com (Tara Bridwell)
Date: Thu, 21 Feb 2013 12:06:23 -0800
Subject: [R-sig-Geo] Modified t-test for correlation, round 2
Message-ID: <CAELQJc3J0Qio45jbZFeeE+XneL9DGA3R2QNBoC2YYEViX4MNDA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130221/65e950b8/attachment.pl>

From macqueen1 at llnl.gov  Thu Feb 21 22:35:22 2013
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Thu, 21 Feb 2013 21:35:22 +0000
Subject: [R-sig-Geo] spplot
In-Reply-To: <1360937180.12488.YahooMailNeo@web162106.mail.bf1.yahoo.com>
Message-ID: <5E1B812FAC2C4A49B3D99593B5A521912CD293@PRDEXMBX-08.the-lab.llnl.gov>

To use spplot:
  Your data must have coordinates.
  The coordinates do not have to be longitude and latitude.

You have to tell R where to find the coordinates, it cannot find them for
you.

Telling R where to find the coordinates might be very easy, depending on
what is already in your data, or where it came from and how you loaded it
into R.

-Don

-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062





On 2/15/13 6:06 AM, "Milan Sharma" <milansharma2012 at yahoo.com> wrote:

Dear list/ Dr. Bivand,
is it possible to plot spplot if there is no Longitude and Latitude in my
data? (i.e. asking R to find latitude and longitude itself, is there any
way to do that)?
Milan

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From tiagovieira7 at yahoo.com.br  Thu Feb 21 22:55:49 2013
From: tiagovieira7 at yahoo.com.br (Tiago Vieira)
Date: Thu, 21 Feb 2013 13:55:49 -0800 (PST)
Subject: [R-sig-Geo] Map 3D
In-Reply-To: <1361224511.59463.YahooMailNeo@web162105.mail.bf1.yahoo.com>
References: <1361224511.59463.YahooMailNeo@web162105.mail.bf1.yahoo.com>
Message-ID: <1361483749.17339.YahooMailNeo@web122101.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130221/9d3629c1/attachment.pl>

From edzer.pebesma at uni-muenster.de  Thu Feb 21 23:02:26 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 21 Feb 2013 23:02:26 +0100
Subject: [R-sig-Geo] Map 3D
In-Reply-To: <1361483749.17339.YahooMailNeo@web122101.mail.ne1.yahoo.com>
References: <1361224511.59463.YahooMailNeo@web162105.mail.bf1.yahoo.com>
	<1361483749.17339.YahooMailNeo@web122101.mail.ne1.yahoo.com>
Message-ID: <51269972.4060207@uni-muenster.de>

Tiago, most maps are two-dimensional. Could you point us to an example 
of what you have in mind?

On 02/21/2013 10:55 PM, Tiago Vieira wrote:
> Dear,
>
> I made a indicator kriging to estimate lithology and wanted to see a three-dimensional map, where lithologies are differentiated by color. So far, I could only see in slices with lattice :: levelplot. Do you have any better suggestions, you can help me?
>
> Thank you,
>
> Tiago Vieira.
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From Tom_Roche at pobox.com  Fri Feb 22 00:30:03 2013
From: Tom_Roche at pobox.com (Tom Roche)
Date: Thu, 21 Feb 2013 18:30:03 -0500
Subject: [R-sig-Geo] [raster newbie] split along dimension into RasterBrick
	layers
Message-ID: <87txp59res.fsf@pobox.com>


Suppose one has a netCDF file (name='foo.nc') with a data variable=
'foo(time, lat, lon)' having size(time)=14. I want to convert that to
a RasterBrick with one layer per timestep, each like 'bar(lat, lon)'.
I will then `projectRaster(brick ...)`, and operate on the values from
each layer separately.

However I cannot find the appropriate constructor syntax using either
`brick(x='foo.nc',...)` or `raster(x='foo.nc',...)`. Can this be done?
Or must I instead do something like

# r <- rep(raster(nrow=lat.size, ncol=lon.size), time.size) # fail
# more fail:
# r <- rep(NA, time.size) # =14
# for (i in 1:time.size) {
#   r[i] <- raster(nrow=lat.size, ncol=lon.size, crs=my.crs)
#   values(r[i]) <- foo.timestep(i)
# }
# subquestion: how does one create a vector of S4 classes?

# brute forcing the main question :-(
r.1 <- raster(nrow=lat.size, ncol=lon.size, crs=my.crs)
values(r.1) <- foo.timestep(1)
...
r.14 <- raster(nrow=lat.size, ncol=lon.size, crs=my.crs)
values(r.14) <- foo.timestep(14)
brick( r.1,  r.2,  r.3,  r.4, r.5, r.6, r.7, r.8, r.9, r.10,
      r.11, r.12, r.13, r.14)

Or is there another/better way to do this?

TIA, Tom Roche <Tom_Roche at pobox.com>


From r.hijmans at gmail.com  Fri Feb 22 02:52:30 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 21 Feb 2013 17:52:30 -0800
Subject: [R-sig-Geo] [raster newbie] split along dimension into
 RasterBrick layers
In-Reply-To: <87txp59res.fsf@pobox.com>
References: <87txp59res.fsf@pobox.com>
Message-ID: <CANtt_hyKegZ_rEEo51Hfm9t-AurcWKR=iksPJ3WbA2cnbQxGQQ@mail.gmail.com>

If I understand your question, which I probably do not, the answer is:

b <- brick('foo.nc')

Robert

On Thu, Feb 21, 2013 at 3:30 PM, Tom Roche <Tom_Roche at pobox.com> wrote:
>
> Suppose one has a netCDF file (name='foo.nc') with a data variable=
> 'foo(time, lat, lon)' having size(time)=14. I want to convert that to
> a RasterBrick with one layer per timestep, each like 'bar(lat, lon)'.
> I will then `projectRaster(brick ...)`, and operate on the values from
> each layer separately.
>
> However I cannot find the appropriate constructor syntax using either
> `brick(x='foo.nc',...)` or `raster(x='foo.nc',...)`. Can this be done?
> Or must I instead do something like
>
> # r <- rep(raster(nrow=lat.size, ncol=lon.size), time.size) # fail
> # more fail:
> # r <- rep(NA, time.size) # =14
> # for (i in 1:time.size) {
> #   r[i] <- raster(nrow=lat.size, ncol=lon.size, crs=my.crs)
> #   values(r[i]) <- foo.timestep(i)
> # }
> # subquestion: how does one create a vector of S4 classes?
>
> # brute forcing the main question :-(
> r.1 <- raster(nrow=lat.size, ncol=lon.size, crs=my.crs)
> values(r.1) <- foo.timestep(1)
> ...
> r.14 <- raster(nrow=lat.size, ncol=lon.size, crs=my.crs)
> values(r.14) <- foo.timestep(14)
> brick( r.1,  r.2,  r.3,  r.4, r.5, r.6, r.7, r.8, r.9, r.10,
>       r.11, r.12, r.13, r.14)
>
> Or is there another/better way to do this?
>
> TIA, Tom Roche <Tom_Roche at pobox.com>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From olga.rsiggeo at herenstraat.nl  Fri Feb 22 12:11:53 2013
From: olga.rsiggeo at herenstraat.nl (olga lyashevska)
Date: Fri, 22 Feb 2013 03:11:53 -0800 (PST)
Subject: [R-sig-Geo] could not find function "checkCRSArgs"
Message-ID: <1361531513007-7582720.post@n2.nabble.com>

require(maptools)
require(rgdal)

borders<-readShapePoly("./borders.shp", proj4string=CRS("+init=epsg:4326"))
Error in CRS("+init=epsg:4326") : could not find function "checkCRSArgs"

Any clues what might cause this?

Many thanks,
Olga



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/could-not-find-function-checkCRSArgs-tp7582720.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From claudia.dupke at googlemail.com  Fri Feb 22 13:58:37 2013
From: claudia.dupke at googlemail.com (Claudia Dupke)
Date: Fri, 22 Feb 2013 13:58:37 +0100
Subject: [R-sig-Geo] derivation for surf.ls
Message-ID: <51276B7D.6050506@googlemail.com>

Hi everyone,

for a spatial prediction I want to use a simple linear regression where 
spatial coordinates are used for predictors (trend surface analysis) 
which can easily be done by

DAT <- 
as.data.frame(cbind(x=Grid at coords[,1],y=Grid at coords[,2],z=Grid at data$z))
#I attached DAT

dg <- 4
M1 <- surf.ls(np=dg,DAT)

I would like to get the derivation of the function, so I tried

PD <- predict.derivative(M1,DAT$x,DAT$y)

I would have expected to obtain a matrix of partial derivatives: The 
columns being the partial derivatives and the rows the locations as it 
is explained in the manual. Instead, I get a vector. What is that?

Furthermore, is there a convenient way of getting the explicit equation 
of the modelfunction, instead of taking the coefficients manually out of 
the model output?
I have also tried to use lm for modelling the surface
M2 <- lm(z ~ poly(x,y, degree= dg,raw=FALSE), data=DAT)
but also here I can not find an easy way to derive the derivation of the 
model function.

Any suggestion would be helpful.
Thanks in advance,
Claudia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130222/51e53452/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: DAT.RData
Type: application/octet-stream
Size: 2100 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130222/51e53452/attachment.obj>

From tghoward at gw.dec.state.ny.us  Fri Feb 22 14:18:24 2013
From: tghoward at gw.dec.state.ny.us (Tim Howard)
Date: Fri, 22 Feb 2013 08:18:24 -0500
Subject: [R-sig-Geo] remove nearby points
In-Reply-To: <5125D9B8.5020109@hafro.is>
References: <5124D20F020000D50006626D@gwsmtp.dec.state.ny.us>
	<5125D9B8.5020109@hafro.is>
Message-ID: <512729D0020000D5000663E9@gwsmtp.dec.state.ny.us>

Julian, 
Thanks for the reply. That seems like an interesting approach. I
suppose another 'GIS' way would be to buffer all the points 100m and
then find those where the buffers overlap. My dataset isn't too big
(1000's records), and what I came up with seems to do the trick, so I'll
stick with it for now.  
 
For the archives, I was a bit hasty in the solution I pasted below - it
caught the second of the pairs, where I wanted the first of the pairs
(after sorting descending by date). These are the lines that do it
correctly. 
 
b <- a[0,]
for(i in 1:nrow(a)){
    if(is.na(a[match(a$neigh[i],rownames(a)[1:i]),]$ID)){ 
        b <- rbind(b,a[i,])
    }
} 
 
Best to all,
Tim


>>> Julian Burgos <julian at hafro.is> 2/21/2013 3:24 AM >>>
Hi Tim,

Perhaps you should use clustering to identify groups of points that are
separated 100m or more from other points.  You could:
a) Calculate distances among points
b) Do some type of hierarchical clustering (e.g. the function agnes in
the cluster package).
c) Identify as clusters everything with a dissimilarity less than
100m.
d) Randomly select a single point from each cluster.

Julian

-- 
Julian Mariano Burgos, PhD
Hafranns?knastofnunin/Marine Research Institute
Sk?lagata 4, 121 Reykjav?k, Iceland
S?mi/Telephone : +354-5752037
Br?fs?mi/Telefax:  +354-5752001
Netfang/Email: julian at hafro.is

On 02/20/2013 06:39 PM, Tim Howard wrote:


I've found a very inelegant solution that continues on the path I was
going. Using the dummy dataset below, this code will strip neighbors as
I desire. 
 
b <- a[0,]
for(i in 2:nrow(a)){
    if(!is.na(a[match(a$neigh[i],rownames(a)[1:i]),]$ID)){ 
    b <- rbind(b,a[i,])
    }
    } 
> b
     ID dist neigh
3 three  5.1     2
4  four  2.2     1
I'd still be curious if anyone knows a cleaner solution. 
Best, 
Tim

>>> Tim Howard 2/20/2013 10:19 AM >>>
I am trying to remove spatial 'duplicates' from a point dataset. The
coordinates won't be exactly the same and so I can't use the normal
methods for removing the second instance of the points. This generalizes
to a question about removing points nearby others, either randomly or
based on other criteria (in my case, I want to keep the one with a more
recent date attribute). 
 
Although my research and fiddling has got me close, I wonder if there
already is a solution I'm missing within the various spatial packages so
I'm starting with sig-geo, even though I'm stuck at a spot that would
use regular R syntax. 
 
My approach (code at bottom of email):
 
1. Move the full point data set over to SpatialPoints as decimal
degrees longlat  [package=sp]
2. Reproject to utm, using spTransform
3. convert to ppp
4. find the distance from each point to its nearest using nndist() 
[package = spatstat]
5. identify that nearest using nnwhich()  [package = spatstat]
6. extract those with neighbors closer than 100m
 
** this is where I'm stuck **  I now have a list of neighbors, for
which I'd like to keep the first case of each neighbor but remove the
second (and sometimes third). Similar to unique(). Here's a dummy
example
 
#set up dummy data frame, the dist and neigh columns are from nndist()
and nnwhich(), respectively
a <-
data.frame(ID=c("one","two","three","four"),dist=c(2.2,5.1,5.1,2.2),neigh=c(4,3,2,1))
 
#here's as far as I've got, I can remove the neighbor to row one with
the following line.
#a looping solution seems problematic as the size of the dataframe
changes with each loop
 
b <- a[-match(a$neigh[1], rownames(a)),]
 
Questions:
- Is there already a function in a spatial package that offers a way to
remove points within a certain distance of others?
- if not, does anyone have any hints for taking the next step from what
I've done?
 
### code for what I've got so far.
### dat.wind.tall is the input DF of lat long decimal degree
coordinates
 
library(sp)
library(spatstat)
library(maptools)
library(rgdal)
llCRS <-  CRS("+proj=longlat +datum=NAD83")
wind.sp <- SpatialPoints(dat.wind.tall[,c(66,65)], proj4string=llCRS)
prjNew <- CRS("+proj=utm +zone=18 +datum=NAD83")
wind.utm <- spTransform(wind.sp, prjNew)
wind.ppp <- as(as(wind.utm, "SpatialPoints"), "ppp")
turb.dist <- nndist(wind.ppp)
turb.nearest <- nnwhich(wind.ppp)
dat.wind.tall.nbr <- cbind(dat.wind.tall, nneigh=turb.nearest,
dist=turb.dist)
closeNeighbors <- dat.wind.tall.nbr[turb.dist<100,]
#code for removing neighbor to first row. 
y <- closeNeighbors[-match(closeNeighbors$nneigh[1],
rownames(closeNeighbors)),]
 
Thanks in advance for any help. 
Tim


_______________________________________________
R-sig-Geo mailing
listR-sig-Geo at r-project.orghttps://stat.ethz.ch/mailman/listinfo/r-sig-geo


From jon.skoien at jrc.ec.europa.eu  Fri Feb 22 14:23:28 2013
From: jon.skoien at jrc.ec.europa.eu (Jon Olav Skoien)
Date: Fri, 22 Feb 2013 14:23:28 +0100
Subject: [R-sig-Geo] could not find function "checkCRSArgs"
In-Reply-To: <1361531513007-7582720.post@n2.nabble.com>
References: <1361531513007-7582720.post@n2.nabble.com>
Message-ID: <51277150.7030804@jrc.ec.europa.eu>

Hi Olga,

Most likely you have a version mismatch between rgdal and sp. I get the 
same error message on one of our servers (still running rgdal 0.7-12), 
but not on another server with rgdal 0.8-4, so updating will probably 
solve your problem.

Cheers,
Jon

On 22-Feb-13 12:11, olga lyashevska wrote:
> require(maptools)
> require(rgdal)
>
> borders<-readShapePoly("./borders.shp", proj4string=CRS("+init=epsg:4326"))
> Error in CRS("+init=epsg:4326") : could not find function "checkCRSArgs"
>
> Any clues what might cause this?
>
> Many thanks,
> Olga
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/could-not-find-function-checkCRSArgs-tp7582720.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
Jon Olav Sk?ien
Joint Research Centre - European Commission
Institute for Environment and Sustainability (IES)
Land Resource Management Unit

Via Fermi 2749, TP 440,  I-21027 Ispra (VA), ITALY

jon.skoien at jrc.ec.europa.eu
Tel:  +39 0332 789206

Disclaimer: Views expressed in this email are those of the individual and do not necessarily represent official views of the European Commission.


From edzer.pebesma at uni-muenster.de  Fri Feb 22 14:29:23 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 22 Feb 2013 14:29:23 +0100
Subject: [R-sig-Geo] remove nearby points
In-Reply-To: <512729D0020000D5000663E9@gwsmtp.dec.state.ny.us>
References: <5124D20F020000D50006626D@gwsmtp.dec.state.ny.us>
	<5125D9B8.5020109@hafro.is>
	<512729D0020000D5000663E9@gwsmtp.dec.state.ny.us>
Message-ID: <512772B3.30306@uni-muenster.de>

sp::zerodist might be your friend, look into the "zero" argument to 
control what is to be considered nearby.

On 02/22/2013 02:18 PM, Tim Howard wrote:
> Julian,
> Thanks for the reply. That seems like an interesting approach. I
> suppose another 'GIS' way would be to buffer all the points 100m and
> then find those where the buffers overlap. My dataset isn't too big
> (1000's records), and what I came up with seems to do the trick, so I'll
> stick with it for now.
>
> For the archives, I was a bit hasty in the solution I pasted below - it
> caught the second of the pairs, where I wanted the first of the pairs
> (after sorting descending by date). These are the lines that do it
> correctly.
>
> b <- a[0,]
> for(i in 1:nrow(a)){
>      if(is.na(a[match(a$neigh[i],rownames(a)[1:i]),]$ID)){
>          b <- rbind(b,a[i,])
>      }
> }
>
> Best to all,
> Tim
>
>
>>>> Julian Burgos <julian at hafro.is> 2/21/2013 3:24 AM >>>
> Hi Tim,
>
> Perhaps you should use clustering to identify groups of points that are
> separated 100m or more from other points.  You could:
> a) Calculate distances among points
> b) Do some type of hierarchical clustering (e.g. the function agnes in
> the cluster package).
> c) Identify as clusters everything with a dissimilarity less than
> 100m.
> d) Randomly select a single point from each cluster.
>
> Julian
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From olga.rsiggeo at herenstraat.nl  Fri Feb 22 15:12:20 2013
From: olga.rsiggeo at herenstraat.nl (olga lyashevska)
Date: Fri, 22 Feb 2013 06:12:20 -0800 (PST)
Subject: [R-sig-Geo] could not find function "checkCRSArgs"
In-Reply-To: <51277150.7030804@jrc.ec.europa.eu>
References: <1361531513007-7582720.post@n2.nabble.com>
	<51277150.7030804@jrc.ec.europa.eu>
Message-ID: <1361542340185-7582730.post@n2.nabble.com>

Jon Olav Skoien-2 wrote
> Most likely you have a version mismatch between rgdal and sp. I get the 
> same error message on one of our servers (still running rgdal 0.7-12), 
> but not on another server with rgdal 0.8-4, so updating will probably 
> solve your problem.

Cheers Jon, 
Checking this right now.

Olga





--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/could-not-find-function-checkCRSArgs-tp7582720p7582730.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From edzer.pebesma at uni-muenster.de  Fri Feb 22 15:22:15 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 22 Feb 2013 15:22:15 +0100
Subject: [R-sig-Geo] could not find function "checkCRSArgs"
In-Reply-To: <1361542340185-7582730.post@n2.nabble.com>
References: <1361531513007-7582720.post@n2.nabble.com>
	<51277150.7030804@jrc.ec.europa.eu>
	<1361542340185-7582730.post@n2.nabble.com>
Message-ID: <51277F17.8080706@uni-muenster.de>



On 02/22/2013 03:12 PM, olga lyashevska wrote:
> Jon Olav Skoien-2 wrote
>> Most likely you have a version mismatch between rgdal and sp. I get the
>> same error message on one of our servers (still running rgdal 0.7-12),
>> but not on another server with rgdal 0.8-4, so updating will probably
>> solve your problem.
>
> Cheers Jon,
> Checking this right now.

Here is a suggestion about mailing list ethics: avoid messages like 
this. Wait until you're done with checking, and write the outcome of the 
check to the mailing list.

Thank you.

>
> Olga
>
>
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/could-not-find-function-checkCRSArgs-tp7582720p7582730.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From Gema.FAviles at uclm.es  Fri Feb 22 15:55:25 2013
From: Gema.FAviles at uclm.es (GEMA FERNANDEZ-AVILES CALDERON)
Date: Fri, 22 Feb 2013 15:55:25 +0100
Subject: [R-sig-Geo] Errror in 3D s-t variogram {variogramST} gstat
Message-ID: <2DA2DD6A3859694A971ACE0998D7B6591CA952@evsab03.uclm.es>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130222/32ab0bd0/attachment.pl>

From edzer.pebesma at uni-muenster.de  Fri Feb 22 16:37:03 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 22 Feb 2013 16:37:03 +0100
Subject: [R-sig-Geo] Errror in 3D s-t variogram {variogramST} gstat
In-Reply-To: <2DA2DD6A3859694A971ACE0998D7B6591CA952@evsab03.uclm.es>
References: <2DA2DD6A3859694A971ACE0998D7B6591CA952@evsab03.uclm.es>
Message-ID: <5127909F.6000808@uni-muenster.de>

I believe we caught this bug; it should be resolved in 1.0-17, the 
development version of which can be downloaded from r-forge:

https://r-forge.r-project.org/R/?group_id=378

On 02/22/2013 03:55 PM, GEMA FERNANDEZ-AVILES CALDERON wrote:
> Dear list:
>
> I'm trying to fit a spatio-temporal variogram model in gstat.
>
> I'm reading: http://cran.r-project.org/web/packages/gstat/vignettes/st.pdf
>
> My dataset is: CO, 23 Monitoring stations (irregular), 24 hours.
> I create a STFDF object and it looks fine, but when I try to create
> a variogramST, I found an error. (I'm attaching the code)
>
> I have read a previous discussion about it but I cann't solve my error.
>
> Please, could you help me?
>
> Thanks in advance,
> Gema
>
>
>
> ##--------------------------------------------------------------------------------------##
>
>> sp = cbind(coords[,1], coords[,2])
>> row.names(sp) = paste("point", 1:nrow(sp), sep="")
>> sp = SpatialPoints(sp)
>
>> time = as.POSIXct("2008-01-01")+3600*(00:23)
>> #select 24 hours
>> dia.co=co_stl_23[1:24,]
>>
>> mydata = (length(sp)*length(time),dia.co)
>> mydata = data.frame(values = signif(mydata,3), ID=IDs)
>> stfdf.co = STFDF(sp, time, mydata)
>>
>> summary(stfdf.co)
>
> Object of class STFDF
>   with Dimensions (s, t, attr): (23, 24, 2)
> [[Spatial:]]
> Object of class SpatialPoints
> Coordinates:
>                  min     max
> coords.x1  436436.6  448850
> coords.x2 4470109.5 4481161
> Is projected: NA
> proj4string : [NA]
> Number of points: 23
> [[Temporal:]]
>       Index                       timeIndex
>   Min.   :2008-01-01 00:00:00   Min.   : 1.00
>   1st Qu.:2008-01-01 05:45:00   1st Qu.: 6.75
>   Median :2008-01-01 11:30:00   Median :12.50
>   Mean   :2008-01-01 11:30:00   Mean   :12.50
>   3rd Qu.:2008-01-01 17:15:00   3rd Qu.:18.25
>   Max.   :2008-01-01 23:00:00   Max.   :24.00
> [[Data attributes:]]
>       values               ID
>   Min.   :-3.12000   ID 1   : 46
>   1st Qu.:-0.75150   ID 10  : 46
>   Median :-0.01895   ID 11  : 46
>   Mean   : 0.03365   ID 12  : 46
>   3rd Qu.: 0.75600   ID 2   : 46
>   Max.   : 2.94000   ID 3   : 46
>                      (Other):276
>> #plot
>> stplot(stfdf.co)
>
>> st.var<- variogramST(values ~ 1, data=stfdf.co, tlags=0:5)
>
> Error en if (nrow(x) < nrow(y)) matrix(t(apply(x, 1, spDiN1, y = y, ll = longlat)),  :
>    argumento tiene longitud cero
>
>
> ##--------------------------------------------------------------------------------------##
>
>
>
>
> Gema Fern?ndez-Avil?s
>
> Department of Statistics
> Faculty of Law and Social Sciences
> University of Castilla-La Mancha at Toledo
>
> http://www.uclm.es/profesorado/gemafaviles/
> New book: http://eu.wiley.com/WileyCDA/WileyTitle/productCd-1118413180.html
>
> 	[[alternative HTML version deleted]]
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From matteo.mattiuzzi at boku.ac.at  Fri Feb 22 17:19:59 2013
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Fri, 22 Feb 2013 17:19:59 +0100
Subject: [R-sig-Geo] R-SEXTANTE-QGIS
Message-ID: <5127A8BF0200002700018901@gwia2.boku.ac.at>

Dear List,


I want to invite you to that discussion http://osgeo-org.1560.n6.nabble.com/QGIS-SEXTANTE-R-td5036108.html about the integration of R in SEXTANTE-QGIS. 
I think SEXTANTE offers a really interesting possibility to use R from within Q-GIS. So also people not comfortable with R could use R functionality.


Thanks Matteo


From Gema.FAviles at uclm.es  Fri Feb 22 17:21:03 2013
From: Gema.FAviles at uclm.es (GEMA FERNANDEZ-AVILES CALDERON)
Date: Fri, 22 Feb 2013 17:21:03 +0100
Subject: [R-sig-Geo] Errror in 3D s-t variogram {variogramST} gstat
References: <2DA2DD6A3859694A971ACE0998D7B6591CA952@evsab03.uclm.es>
	<5127909F.6000808@uni-muenster.de>
Message-ID: <2DA2DD6A3859694A971ACE0998D7B6591CA954@evsab03.uclm.es>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130222/14c763bd/attachment.pl>

From oscar.perpinan at gmail.com  Fri Feb 22 19:53:44 2013
From: oscar.perpinan at gmail.com (Oscar =?utf-8?B?UGVycGnDscOhbg==?= Lamigueiro)
Date: Fri, 22 Feb 2013 19:53:44 +0100
Subject: [R-sig-Geo] Problem with projection in NetCDF file
Message-ID: <87fw0ogoxz.fsf@gmail.com>

Hello,

Sorry in advance for this long email.  

I am trying to use the NetCDF files available at the
Meteogalicia-THREDDS server
(http://www.meteogalicia.es/web/modelos/threddsIndex.action). I am
having problems with the projection parameters (see figure attached for
a quick understanding of the problem).

For example, I download and open the file
wrf_arw_det_history_d01_20130214_0000.nc4 (~85Mb):

    library(raster) ## 2.1.6
    library(rgdal) ## 0.8.1

    download.file('http://mandeo.meteogalicia.es/thredds/fileServer/wrf_2d_36km/fmrc/files/20130214/wrf_arw_det_history_d01_20130214_0000.nc4',
                  destfile='~/temp/wrf_arw_det_history_d01_20130214_0000.nc4')

    ## Temperature values
    temps <- brick('~/temp/wrf_arw_det_history_d01_20130214_0000.nc4', varname='temp')
    ## This file uses the LCC projection
    projection(temps)
    ## "+proj=lcc +lon_0=-14.1000003814697 +lat_0=24.2280006408691
    ## +x_0=2182.62935 +y_0=-269.65597 +lat_1=43 +lat_2=43 +ellps=WGS84"

    ## Latitude
    lats <- raster('~/temp/wrf_arw_det_history_d01_20130214_0000.nc4',
                   varname='lat')
    ## However the latitude layer does not inherit that projection...
    projection(lats)
    ## "+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0"
    ## Therefore, a correction is needed
    projection(lats) <- projection(temps)

    ## Longitude
    lons <- raster('~/temp/wrf_arw_det_history_d01_20130214_0000.nc4', 
                    varname='lon')
    projection(lons) <- projection(temps)

I detect the problem with the projection parameters when overlaying the
administrative boundaries:

    download.file('http://gadm.org/data/rda/ESP_adm0.RData',
              destfile='~/temp/ESP_adm0.RData')
    load('~/temp/ESP_adm0.RData') ## a new object named gadm
    projection(gadm)
    ## "+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0"

    projLCC <- projection(temps)
    spainLCC <- spTransform(gadm, CRS(projLCC))

    library(rasterVis)
    levelplot(temps, layers=10) +
      layer(sp.polygons(spainLCC, lwd=.4))+
      contourplot(lons) + contourplot(lats)

Then, after inspecting the metadata I found that x and y are using km
units. Since this information has not been transferred to the proj4
string, I modify the projection:

    projLCC <- paste(projection(temps), '+units=km')
    projection(temps) <- projLCC
    projection(lons) <- projLCC
    projection(lats) <- projLCC
    spainLCC <- spTransform(gadm, CRS(projLCC))

However, the result is still not correct (see temps.jpg):

    levelplot(temps, layers=10) +
      layer(sp.polygons(spainLCC, lwd=.4))+
      contourplot(lons) + contourplot(lats)

Could it be that the parameters of the proj4 string are incorrect? Maybe
am I missing something?  I have tested this same file with the Godiva2
viewer and it is correctly displayed:
http://mandeo.meteogalicia.es/thredds/godiva2/godiva2.html?menu=&layer=temp&elevation=0&time=2013-02-22T14:29:45Z&scale=267.15,313.15&bbox=-49.182593,13.500592,18.788996,66.603396&server=http://mandeo.meteogalicia.es/thredds/wms/wrf_2d_36km/fmrc/files/20130214/wrf_arw_det_history_d01_20130214_0000.nc4.

Thanks in advance.

Best,

Oscar.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: temps.jpg
Type: image/jpeg
Size: 19241 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130222/cf43dbea/attachment.jpg>
-------------- next part --------------
-- 
Oscar Perpi??n Lamigueiro
Grupo de Sistemas Fotovoltaicos (IES-UPM)
Dpto. Ingenier?a El?ctrica (EUITI-UPM)
URL: http://procomun.wordpress.com
Twitter: @oscarperpinan

From HodgessE at uhd.edu  Sat Feb 23 04:57:18 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Sat, 23 Feb 2013 03:57:18 +0000
Subject: [R-sig-Geo] question about variogramST
Message-ID: <FF9DB805FC41CC4E95825A50F68063021292AAED@challenger.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130223/cdce2447/attachment.pl>

From olga.rsiggeo at herenstraat.nl  Sat Feb 23 19:20:53 2013
From: olga.rsiggeo at herenstraat.nl (olga lyashevska)
Date: Sat, 23 Feb 2013 10:20:53 -0800 (PST)
Subject: [R-sig-Geo] could not find function "checkCRSArgs"
In-Reply-To: <51277150.7030804@jrc.ec.europa.eu>
References: <1361531513007-7582720.post@n2.nabble.com>
	<51277150.7030804@jrc.ec.europa.eu>
Message-ID: <1361643653730-7582746.post@n2.nabble.com>

Jon Olav Skoien-2 wrote
> Most likely you have a version mismatch between rgdal and sp.

Just to confirm that the problem has been solved for "rgdal" "0.8-5" and
"sp" "1.0-5"

Thank you,
Olga




--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/could-not-find-function-checkCRSArgs-tp7582720p7582746.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From rossahmed at googlemail.com  Sun Feb 24 09:11:59 2013
From: rossahmed at googlemail.com (Ross Ahmed)
Date: Sun, 24 Feb 2013 08:11:59 +0000
Subject: [R-sig-Geo] raster resolution
In-Reply-To: <512503090200002700018832@gwia2.boku.ac.at>
Message-ID: <CD4F7A6C.3E3F%rossahmed@gmail.com>

Dear Matteo

Your answer has been very useful - thanks. I have a query: to make a
raster in which each cell is 1000^2m, you have provided this code:

ext1000 <- obeyRes(extent(EAE),resolution=sqrt(1000)*1000)


Why have you used sqrt(1000)*1000? Why not 1000*1000?

Ross


On 20/02/2013 16:08, "Matteo Mattiuzzi" <matteo.mattiuzzi at boku.ac.at>
wrote:

>Dear Ross,
>
>You have 2 problems, one is that by changing the resolution you change
>in most of the cases also the extent, and second you cannot generate a
>regular raster (same area for all pixels) based on LAT/LON.
>You will have to use to an equal area projection.
>http://en.wikipedia.org/wiki/Map_projection#Equal-area
>
>Here a function that helps you to adapt the extent:
>ext=rasterExtent
>resolution= rasterExtent units resolution as c(x,y) or single value for
>both
>inner = as the change of the resolution in most of the cases changes the
>given extent you can choose to make the extent little smaller
>(inner=TRUE) or little bigger.
>
>
>obeyRes <- function(ext,resolution,inner=TRUE)
>{
>    if(length(resolution)==1)
>    {
>        resolution <- rep(resolution,2)
>    }
>    cols <- (ext at xmax - ext at xmin)/resolution[2]
>    rows <- (ext at ymax - ext at ymin)/resolution[1]
>
>
>    if(inner)
>    {
>        cols <- floor(cols)
>        rows <- floor(rows)
>    } else
>    {
>        cols <- ceiling(cols)
>        rows <- ceiling(rows)
>    }
>
>
>    olim     <- resolution * c(rows,cols)
>    ext at xmax <- ext at xmin + olim[2]
>    ext at ymin <- ext at ymax - olim[1]
>    return(list(extent=ext,cols=cols,rows=rows))
>}
>
>
>
>myExtent <-  extent(-176.5813, 174.1103,-31.16667, 83.1)
>r   <- raster(ext=myExtent,crs="+proj=longlat +ellps=WGS84
>+datum=WGS84")
>
>
># Sinusoidal (as example!!)
>EAE <- projectExtent(r,crs="+proj=sinu +lon_0=0 +x_0=0 +y_0=0
>+a=6371007.181 +b=6371007.181 +units=m +no_defs")
> 
>ext100 <- obeyRes(extent(EAE),resolution=10000)
>r100    <- raster(ext=ext100$extent,ncol=ext100$cols,nrows=ext100$rows,
>crs="+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181 +b=6371007.181
>+units=m +no_defs")
>
>
>r100[]  <- round(runif(ncell(r100),0,1))
># writeRaster(r100,"r100.tif")
>
>
>ext1000 <- obeyRes(extent(EAE),resolution=sqrt(1000)*1000)
>r1000    <-
>raster(ext=ext1000$extent,ncol=ext1000$cols,nrows=ext1000$rows,
>crs="+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181 +b=6371007.181
>+units=m +no_defs")
>
>r1000[]  <- round(runif(ncell(r1000),0,1))
># writeRaster(r1000,"r1000.tif")
>
>
>
>
>#################
>I'm not 100 % sure about my calculations/considerations so take it with
>care! 
>Matteo
> 
>
>
>>>> Ross Ahmed  02/20/13 11:03 AM >>>
>I have the following raster:
>
>myRaster <- c(-176.5813, 174.1103, -31.16667, 83.1)
>myRasterExtent <- extent(matrix(myRaster, ncol=2, nrow=2, byrow=T))
>myRasterExtent <-  raster(myRasterExtent, crs="+proj=longlat
>+ellps=WGS84
>+datum=WGS84?)
>
>How can I change resolution to 100km^2 and 1000km^2
>
>many thanks
>Ross
>
>
>
>    [[alternative HTML version deleted]]
>
>
>
>


From matteo.mattiuzzi at boku.ac.at  Sun Feb 24 11:16:10 2013
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Sun, 24 Feb 2013 11:16:10 +0100
Subject: [R-sig-Geo] raster resolution
Message-ID: <5129F67A0200002700018944@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130224/3247ffd4/attachment.pl>

From rossahmed at googlemail.com  Sun Feb 24 15:40:10 2013
From: rossahmed at googlemail.com (Ross Ahmed)
Date: Sun, 24 Feb 2013 14:40:10 +0000
Subject: [R-sig-Geo] raster resolution
In-Reply-To: <5129F67A0200002700018944@gwia2.boku.ac.at>
References: <5129F67A0200002700018944@gwia2.boku.ac.at>
Message-ID: <1BC831DC-123F-4F77-B433-4B0CDDC7939D@gmail.com>

Dear Matteo

Sorry for confusing metres and kilometres. If I understand correctly:

sqrt(1000)*1000 = each cell in raster is 1000^2km



Therefore:

sqrt(50)*50 = each cell in raster is 50^2km


sqrt(300)*300 = each cell in raster is 300^2km


sqrt(800)*800 = each cell in raster is 800^2km


Could you let me know if these are correct?

Ross

On 24 Feb 2013, at 10:16, "Matteo Mattiuzzi" <matteo.mattiuzzi at boku.ac.at> wrote:

> Dear Ross,
> in your mail you wrote 100 qkm and 1000 qkm. The map unit of sinusoidal is [m] as you see in the CRS.
> 
> sqrt(100)*1000 = 10000 [m] side length
> and 
> sqrt(1000)*1000
> is the equivalent side-length of such a squared pixel in meter. The *1000 is only to convert km in m, and the sqrt() is the area to side-length conversion.
> So I did not generate a raster with 1000 qm but 1000 qkm as you asked. if you want 1000 qm, resolution=sqrt(1000) 
> 
> Matteo
> 
> 
> >>> Ross Ahmed <rossahmed at googlemail.com> 02/24/13 9:04 AM >>>
> Dear Matteo
> 
> Your answer has been very useful - thanks. I have a query: to make a
> raster in which each cell is 1000^2m, you have provided this code:
> 
> ext1000 <- obeyRes(extent(EAE),resolution=sqrt(1000)*1000)
> 
> 
> Why have you used sqrt(1000)*1000? Why not 1000*1000?
> 
> Ross
> 
> 
> On 20/02/2013 16:08, "Matteo Mattiuzzi" <matteo.mattiuzzi at boku.ac.at>
> wrote:
> 
> >Dear Ross,
> >
> >You have 2 problems, one is that by changing the resolution you change
> >in most of the cases also the extent, and second you cannot generate a
> >regular raster (same area for all pixels) based on LAT/LON.
> >You will have to use to an equal area projection.
> >http://en.wikipedia.org/wiki/Map_projection#Equal-area
> >
> >Here a function that helps you to adapt the extent:
> >ext=rasterExtent
> >resolution= rasterExtent units resolution as c(x,y) or single value for
> >both
> >inner = as the change of the resolution in most of the cases changes the
> >given extent you can choose to make the extent little smaller
> >(inner=TRUE) or little bigger.
> >
> >
> >obeyRes <- function(ext,resolution,inner=TRUE)
> >{
> > if(length(resolution)==1)
> > {
> > resolution <- rep(resolution,2)
> > }
> > cols <- (ext at xmax - ext at xmin)/resolution[2]
> > rows <- (ext at ymax - ext at ymin)/resolution[1]
> >
> >
> > if(inner)
> > {
> > cols <- floor(cols)
> > rows <- floor(rows)
> > } else
> > {
> > cols <- ceiling(cols)
> > rows <- ceiling(rows)
> > }
> >
> >
> > olim <- resolution * c(rows,cols)
> > ext at xmax <- ext at xmin + olim[2]
> > ext at ymin <- ext at ymax - olim[1]
> > return(list(extent=ext,cols=cols,rows=rows))
> >}
> >
> >
> >
> >myExtent <- extent(-176.5813, 174.1103,-31.16667, 83.1)
> >r <- raster(ext=myExtent,crs="+proj=longlat +ellps=WGS84
> >+datum=WGS84")
> >
> >
> ># Sinusoidal (as example!!)
> >EAE <- projectExtent(r,crs="+proj=sinu +lon_0=0 +x_0=0 +y_0=0
> >+a=6371007.181 +b=6371007.181 +units=m +no_defs")
> > 
> >ext100 <- obeyRes(extent(EAE),resolution=10000)
> >r100 <- raster(ext=ext100$extent,ncol=ext100$cols,nrows=ext100$rows,
> >crs="+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181 +b=6371007.181
> >+units=m +no_defs")
> >
> >
> >r100[] <- round(runif(ncell(r100),0,1))
> ># writeRaster(r100,"r100.tif")
> >
> >
> >ext1000 <- obeyRes(extent(EAE),resolution=sqrt(1000)*1000)
> >r1000 <-
> >raster(ext=ext1000$extent,ncol=ext1000$cols,nrows=ext1000$rows,
> >crs="+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181 +b=6371007.181
> >+units=m +no_defs")
> >
> >r1000[] <- round(runif(ncell(r1000),0,1))
> ># writeRaster(r1000,"r1000.tif")
> >
> >
> >
> >
> >#################
> >I'm not 100 % sure about my calculations/considerations so take it with
> >care! 
> >Matteo
> > 
> >
> >
> >>>> Ross Ahmed 02/20/13 11:03 AM >>>
> >I have the following raster:
> >
> >myRaster <- c(-176.5813, 174.1103, -31.16667, 83.1)
> >myRasterExtent <- extent(matrix(myRaster, ncol=2, nrow=2, byrow=T))
> >myRasterExtent <- raster(myRasterExtent, crs="+proj=longlat
> >+ellps=WGS84
> >+datum=WGS84?)
> >
> >How can I change resolution to 100km^2 and 1000km^2
> >
> >many thanks
> >Ross
> >
> >
> >
> > [[alternative HTML version deleted]]
> >
> >
> >
> >
> 
> 


From julleeyaw at yahoo.ca  Sun Feb 24 19:38:03 2013
From: julleeyaw at yahoo.ca (Julie Lee-Yaw)
Date: Sun, 24 Feb 2013 10:38:03 -0800 (PST)
Subject: [R-sig-Geo] create point density raster OR other ways to thin point
	data
Message-ID: <1361731083.23003.YahooMailClassic@web142502.mail.bf1.yahoo.com>

Hi 

I have a set of sampling locations with a strong bias towards one area within my study region (e.g. many more points in the south than in the north). I want to "thin" sites in this high density region by randomly discarding sites until the density of sampling is similar to other areas of my study region. 

The approach I've come up with so far is something like: 

1) calculate a kernel density or point density raster from the points
2) take the average "density value" of all points above (x) and below (y) a user-defined cutoff 
3) for all points with an initial density value > a defined cutoff, randomly discard point one at a time, create a new density raster, recalculate the average density (x) of these points...repeat until x = y 

To make this work, I'm trying to figure out how to produce a kernel density raster or point density raster from point data in R (akin to the "kernel density" and "point density" tools in ArcGIS). 

Can anyone point me in the right direction? I have seen the density.ppp function but I am unsure of how to calculate "sigma" or whether this function even what I need to meet my ultimate goal. Any alternative solutions for thinning point data are also appreciated.


From edzer.pebesma at uni-muenster.de  Sun Feb 24 20:51:07 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 24 Feb 2013 20:51:07 +0100
Subject: [R-sig-Geo] question about variogramST
In-Reply-To: <FF9DB805FC41CC4E95825A50F68063021292AAED@challenger.uhd.campus>
References: <FF9DB805FC41CC4E95825A50F68063021292AAED@challenger.uhd.campus>
Message-ID: <512A6F2B.6040802@uni-muenster.de>

Erin, see

https://stat.ethz.ch/pipermail/r-sig-geo/2013-February/017577.html

(where the same error message appeared, but in Italian!)

On 02/23/2013 04:57 AM, Hodgess, Erin wrote:
> Hello everyone:
>
> I have an STFDF object and I would like to produce a variogramST.  I'm using the version of spacetime from 2/19.
>
> However, I'm getting a weird error message.  Here is the output:
>
>> str(city4.st)
> Formal class 'STFDF' [package "spacetime"] with 4 slots
>    ..@ data   :'data.frame':     230 obs. of  1 variable:
>    .. ..$ index: num [1:230] 100 100 100 100 100 100 100 100 100 100 ...
>    ..@ sp     :Formal class 'SpatialPoints' [package "sp"] with 3 slots
>    .. .. ..@ coords     : num [1:23, 1:2] -99.7 -101.8 -97.7 -94.1 -97.5 ...
>    .. .. .. ..- attr(*, "dimnames")=List of 2
>    .. .. .. .. ..$ : NULL
>    .. .. .. .. ..$ : chr [1:2] "lon" "lat"
>    .. .. ..@ bbox       : num [1:2, 1:2] -106.5 25.9 -94 35.2
>    .. .. .. ..- attr(*, "dimnames")=List of 2
>    .. .. .. .. ..$ : chr [1:2] "lon" "lat"
>    .. .. .. .. ..$ : chr [1:2] "min" "max"
>    .. .. ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots
>    .. .. .. .. ..@ projargs: chr " +proj=lcc +lat_1=27.5 +lat_2=35 +lat_0=18 +lon_0=-100 +x_0=1500000 +y_0=5000000 +ellps=GRS80 +datum=NAD83 +units=m +no_defs +t"| __truncated__
>    ..@ time   :An ?xts? object on 2001-01-01/2010-01-01 containing:
>    Data: int [1:10, 1] 1 2 3 4 5 6 7 8 9 10
>   - attr(*, "dimnames")=List of 2
>    ..$ : NULL
>    ..$ : chr "timeIndex"
>    Indexed by objects of class: [Date] TZ: UTC
>    xts Attributes:
>   NULL
>    ..@ endTime: POSIXct[1:10], format: "2002-01-01" "2003-01-01" "2004-01-01" "2005-01-01" ...
>> variogramST(index~1,city4.st)
> Error in if (nrow(x) < nrow(y)) matrix(t(apply(x, 1, spDiN1, y = y, ll = longlat)),  :
>    argument is of length zero
>>
>
> Any suggestions would be much appreciated.
>
> Thanks,
> Sincerely,
> Erin
>
>
> 	[[alternative HTML version deleted]]
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From marcelino.delacruz at upm.es  Sun Feb 24 20:55:17 2013
From: marcelino.delacruz at upm.es (MARCELINO DE LA CRUZ ROT)
Date: Sun, 24 Feb 2013 20:55:17 +0100
Subject: [R-sig-Geo] create point density raster OR other ways to thin
 point data
In-Reply-To: <1361731083.23003.YahooMailClassic@web142502.mail.bf1.yahoo.com>
References: <1361731083.23003.YahooMailClassic@web142502.mail.bf1.yahoo.com>
Message-ID: <03a5d8d4b923ac1f28efd3e9230cf855@upm.es>

Hi,

you can combine density.ppp and rthin to thin inversely to the density 
of points. See this example

# example of a heterogeneous point pattern
library(spatstat)
data(lansing)
maple<-lansing[lansing$marks=="maple"]
plot(maple)
maple.dens<- density(maple)
plot(maple.dens)

# get the probability of retention as inversely proportional to the 
density

maple.p <- eval.im(1-(maple.dens/max(maple.dens)))
plot(maple.p)

# Thin your pp
plot(rthin(maple, maple.p))

Sigma us calculted by default by density.ppp but you can set your aown 
sigma also (see the help page of density.ppp)


HTH,
Marcelino

El 2013-02-24 19:38, Julie Lee-Yaw escribi?:
> Hi
>
> I have a set of sampling locations with a strong bias towards one
> area within my study region (e.g. many more points in the south than
> in the north). I want to "thin" sites in this high density region by
> randomly discarding sites until the density of sampling is similar to
> other areas of my study region.
>
> The approach I've come up with so far is something like:
>
> 1) calculate a kernel density or point density raster from the points
> 2) take the average "density value" of all points above (x) and below
> (y) a user-defined cutoff
> 3) for all points with an initial density value > a defined cutoff,
> randomly discard point one at a time, create a new density raster,
> recalculate the average density (x) of these points...repeat until x 
> =
> y
>
> To make this work, I'm trying to figure out how to produce a kernel
> density raster or point density raster from point data in R (akin to
> the "kernel density" and "point density" tools in ArcGIS).
>
> Can anyone point me in the right direction? I have seen the
> density.ppp function but I am unsure of how to calculate "sigma" or
> whether this function even what I need to meet my ultimate goal. Any
> alternative solutions for thinning point data are also appreciated.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
MARCELINO DE LA CRUZ ROT
Universidad Politecnica de Madrid


From piero.campa at gmail.com  Sun Feb 24 22:43:11 2013
From: piero.campa at gmail.com (Piero Campalani)
Date: Sun, 24 Feb 2013 22:43:11 +0100
Subject: [R-sig-Geo] question about variogramST
In-Reply-To: <512A6F2B.6040802@uni-muenster.de>
References: <FF9DB805FC41CC4E95825A50F68063021292AAED@challenger.uhd.campus>
	<512A6F2B.6040802@uni-muenster.de>
Message-ID: <CAMp9JaMcKConncV1E12yeg882m8w_ZL1mofav-HZFZO3Q3-yGg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130224/6307f4e0/attachment.pl>

From r.hijmans at gmail.com  Mon Feb 25 00:41:37 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sun, 24 Feb 2013 15:41:37 -0800
Subject: [R-sig-Geo] create point density raster OR other ways to thin
 point data
In-Reply-To: <1361731083.23003.YahooMailClassic@web142502.mail.bf1.yahoo.com>
References: <1361731083.23003.YahooMailClassic@web142502.mail.bf1.yahoo.com>
Message-ID: <CANtt_hxAB9q7h7CsZyXbinN0kW3d2rfpmQZ28h5pCtCBUZvg8g@mail.gmail.com>

Julie,

> Any alternative solutions for thinning point data are also appreciated

See:

library(dismo)
?gridSample

Robert

On Sun, Feb 24, 2013 at 10:38 AM, Julie Lee-Yaw <julleeyaw at yahoo.ca> wrote:
> Hi
>
> I have a set of sampling locations with a strong bias towards one area within my study region (e.g. many more points in the south than in the north). I want to "thin" sites in this high density region by randomly discarding sites until the density of sampling is similar to other areas of my study region.
>
> The approach I've come up with so far is something like:
>
> 1) calculate a kernel density or point density raster from the points
> 2) take the average "density value" of all points above (x) and below (y) a user-defined cutoff
> 3) for all points with an initial density value > a defined cutoff, randomly discard point one at a time, create a new density raster, recalculate the average density (x) of these points...repeat until x = y
>
> To make this work, I'm trying to figure out how to produce a kernel density raster or point density raster from point data in R (akin to the "kernel density" and "point density" tools in ArcGIS).
>
> Can anyone point me in the right direction? I have seen the density.ppp function but I am unsure of how to calculate "sigma" or whether this function even what I need to meet my ultimate goal. Any alternative solutions for thinning point data are also appreciated.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From juanitachoo at gmail.com  Mon Feb 25 03:14:15 2013
From: juanitachoo at gmail.com (juanitachoo)
Date: Sun, 24 Feb 2013 18:14:15 -0800 (PST)
Subject: [R-sig-Geo] bivariate mark correlation
Message-ID: <CAE=dzzqQnOOq8uBMV+cNdHZazuR0bEaJUFL9zAkfQ_mOJH1zAA@mail.gmail.com>

Hi,

I would like to examine the spatial correlations in the diameter of two
tree species. However, I have not found any R packages that has a function
to  run bivariate mark correlation analyses. I would appreciate it if
anyone can provide any leads or suggestions. Thanks in advance for your
help.


Regards,
Juanita




--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/bivariate-mark-correlation-tp7582764.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From kathryn.lee1 at students.mq.edu.au  Mon Feb 25 03:38:03 2013
From: kathryn.lee1 at students.mq.edu.au (kalee)
Date: Sun, 24 Feb 2013 18:38:03 -0800 (PST)
Subject: [R-sig-Geo] spsample random sampling a subset of polygons based on
 a variable from a different dataframe
Message-ID: <1361759883275-7582766.post@n2.nabble.com>

Hi all,

Data background: I have a dataframe of fish telemetry locations where we
have to estimate the X and Y co-ordinates based on the depth at which the
fish is detected and the receiver number (combined into one attribute named
'RecDepth' within the dataframe; 20 fish each with 1,000-10,000 locations) .
I have a shapefile of the study area with the depth contours overlaided with
the detection range of each receiver. The depth contours have an accuracy of
+/-2m so I have buffered each of these polylines to give me the possible
area into which fish detection could be (polygons: with a attribute of
RecDepth that corresponds the the reciever number and depth of the contour).
The idea is to randomly select a point in each polygon corresponding to each
fish detection and then pass the results to calculate the home-range and run
1000 iterations to see how much the home-range estimates differ. 

Method and problem encountered: I now want to use spsample to randomly
select a point within each polygons for each fish detection. I've tried to
write a function to iterate through all the fish locations for each fish.
However, I'm having trouble with the function and I'm unsure why. I tried to
use the method suggested at
http://casoilresource.lawr.ucdavis.edu/drupal/node/644 but I can't figure
out how to select the correct polygons according the RecDepth in the
dataframe. 

Any help could be greatly appreciated. 
Thanks
Kate



My code is as follows:

library(sp)
data1 <- read.csv("Blues_COA_breed.csv", header= TRUE)
 
 str(data1)
##'data.frame':   102656 obs. of  9 variables:
## $ Date.Time: Factor w/ 56064 levels "1/08/2009 0:00",..: 40063 40064
40089 40100 40114 40119 40129 ##40134 40160 40166 ...
 ##$ ID       : int  1 1 1 1 1 1 1 1 1 1 ...
## $ sex      : Factor w/ 3 levels "female","male",..: 3 3 3 3 3 3 3 3 3 3
...
## $ sex_1    : int  3 3 3 3 3 3 3 3 3 3 ...
## $ RecDepth : int  608 608 608 608 508 608 608 608 606 606 ...
## $ Y        : num  -33.9 -33.9 -33.9 -33.9 -33.9 ...
## $ X        : num  151 151 151 151 151 ...
## $ Z        : int  8 8 8 8 8 8 8 8 6 6 ...
## $ Breeding : int  1 1 1 1 1 1 1 1 1 1 ...


#### Projection of shapefile is Australia Albers as follows:
 PROJECTION <- CRS("+proj=aea +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=134
+x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs") 
 
 
 
 BCARshp <-
readShapeSpatial("Reef_depth_detectionrange_Buffer4m_ALbers.shp",
proj4string = PROJECTION)
 

str(BCARshp)
##Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots
##  ..@ data       :'data.frame': 150 obs. of  6 variables:
##  .. ..$ COMMENT   : Factor w/ 1 level "Coogee Area": 1 1 1 1 1 1 1 1 1 1
...
##  .. ..$ depth_islw: int [1:150] 2 2 2 2 2 2 2 8 8 16 ...
##  .. ..$ Station   : num [1:150] 2 3 5 6 7 8 9 4 5 8 ...
##  .. ..$ Y         : num [1:150] -3834217 -3834550 -3834729 -3834818
-3834753 ...
##  .. ..$ X         : num [1:150] 1765872 1765908 1765672 1765450 1765176
...
##  .. ..$ RecDepth  : num [1:150] 202 302 502 602 702 802 902 408 508 816
...
##  .. ..- attr(*, "data_types")= chr [1:6] "C" "N" "N" "N" ...
##  ..@ polygons   :List of 150
##  .. ..$ :Formal class 'Polygons' [package "sp"] with 5 slots
##  .. .. .. ..@ Polygons :List of 1
##  .. .. .. .. ..$ :Formal class 'Polygon' [package "sp"] with 5 slots
##  .. .. .. .. .. .. ..@ labpt  : num [1:2] 1765872 -3834217
##  .. .. .. .. .. .. ..@ area   : num 1200
##  .. .. .. .. .. .. ..@ hole   : logi FALSE
##  .. .. .. .. .. .. ..@ ringDir: int 1
##  .. .. .. .. .. .. ..@ coords : num [1:164, 1:2] 1765898 1765898 1765897
1765897 1765897 ...
##  .. .. .. ..@ plotOrder: int 1
##  .. .. .. ..@ labpt    : num [1:2] 1765872 -3834217
##  .. .. .. ..@ ID       : chr "0"
##  .. .. .. ..@ area     : num 1200
##  .. ..$ :Formal class 'Polygons' [package "sp"] with 5 slots
 ## .. .. .. ..@ Polygons :List of 1
 ## .. .. .. .. ..$ :Formal class 'Polygon' [package "sp"] with 5 slots
##  .. .. .. .. .. .. ..@ labpt  : num [1:2] 1765908 -3834550
##  .. .. .. .. .. .. ..@ area   : num 1572
##  .. .. .. .. .. .. ..@ hole   : logi FALSE
##  .. .. .. .. .. .. ..@ ringDir: int 1
##  .. .. .. .. .. .. ..@ coords : num [1:221, 1:2] 1765883 1765882 1765882
1765882 1765882 ...
##  .. .. .. ..@ plotOrder: int 1
##  .. .. .. ..@ labpt    : num [1:2] 1765908 -3834550
##  .. .. .. ..@ ID       : chr "1"
##  .. .. .. ..@ area     : num 1572
##  .. ..$ :Formal class 'Polygons' [package "sp"] with 5 slots
##  .. .. .. ..@ Polygons :List of 1
##  .. .. .. .. ..$ :Formal class 'Polygon' [package "sp"] with 5 slots
##  .. .. .. .. .. .. ..@ labpt  : num [1:2] 1765672 -3834729
##  .. .. .. .. .. .. ..@ area   : num 3334
##  .. .. .. .. .. .. ..@ hole   : logi FALSE
##  .. .. .. .. .. .. ..@ ringDir: int 1
 ## .. .. .. .. .. .. ..@ coords : num [1:494, 1:2] 1765498 1765498 1765498
1765498 1765498 ...
##  .. .. .. ..@ plotOrder: int 1
##  .. .. .. ..@ labpt    : num [1:2] 1765672 -3834729
##  .. .. .. ..@ ID       : chr "2"
##  .. .. .. ..@ area     : num 3334
## .. .. [list output truncated]
##  ..@ plotOrder  : int [1:150] 78 55 62 48 69 5 56 3 67 44 ...
##  ..@ bbox       : num [1:2, 1:2] 1764709 -3835506 1766254 -3833973
##  .. ..- attr(*, "dimnames")=List of 2
##  .. .. ..$ : chr [1:2] "x" "y"
##  .. .. ..$ : chr [1:2] "min" "max"
##  ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots
##  .. .. ..@ projargs: chr "+proj=aea +lat_1=-18 +lat_2=-36 +lat_0=0
+lon_0=134 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
+no_defs" 


 
 class(BCARshp)
##[1] "SpatialPolygonsDataFrame"
##attr(,"package")
##[1] "sp"

## starting with just fish ID 1

fish1 <- data1[data1$ID == 1, 5]

str(fish1)
## int [1:8185] 608 608 608 608 508 608 608 608 606 606 ...


d <- as.data.frame(fish1)

myfun <- function(d, k) {

BCARfish <- BCARshp[BCARshp$RecDepth == d[k,],] 

fish <- spsample(BCARfish, n = 1, type = "random", proj4string = PROJECTION,
iter= 10)

 xco <- fish at coords[[1]]
 yco<- fish at coords[[2]]

xy <- cbind(xco, yco)

return(xy)
}

fishdet <- rep(0, nrow(d))

for (j in 1:length(fishdet)) fishdet[j] <- myfun(d, j)

## ERROR I'M RECEIVING

Error in if (is.numeric(i) && i < 0) { : 
  missing value where TRUE/FALSE needed
In addition: There were 27 warnings (use warnings() to see them)


z <- as.matrix(d)
  
m <- dimnames(z)
  
l <-list(m[[1]], xy)

write.csv(l, file = paste("fish1_randpoint_test.csv"), row.names = F)

traceback()
12: stop("arguments imply differing number of rows: ", paste(unique(nrows), 
        collapse = ", "))
11: data.frame(NULL, c(1765491.27849468, -3834819.10145441), check.names =
FALSE, 
        stringsAsFactors = TRUE)
10: eval(expr, envir, enclos)
9: eval(as.call(c(expression(data.frame), x, check.names = !optional, 
       stringsAsFactors = stringsAsFactors)))
8: as.data.frame.list(x[[i]], optional = TRUE, stringsAsFactors =
stringsAsFactors)
7: as.data.frame(x[[i]], optional = TRUE, stringsAsFactors =
stringsAsFactors)
6: data.frame(x)
5: write.table(l, file = paste("fish1_randpoint_test.csv"), row.names = F, 
       col.names = TRUE, sep = ",", dec = ".", qmethod = "double")
4: eval(expr, envir, enclos)
3: eval(expr, p)
2: eval.parent(Call)
1: write.csv(l, file = paste("fish1_randpoint_test.csv"), row.names = F)




#### When I ran the following as a tester it worked ok


 BCARfish608 <- BCARshp[BCARshp$RecDepth == 608,]
 fish608 <- spsample(BCARfish608, n = 10, type = "stratified", proj4string =
PROJECTION)
 x_3 <- fish608 at coords[[1]]
 y_3 <- fish608 at coords[[2]]
 xy3 <- cbind(x_3, y_3)

 BCARfish426 <- BCARshp[BCARshp$RecDepth == 426,]
fish426 <- spsample(BCARfish426, n = 10, type = "stratified", proj4string =
PROJECTION)
 x_4 <- fish426 at coords[[1]]
y_4 <- fish426 at coords[[2]]
 xy4 <- cbind(x_4, y_4)

 BCARfish408 <- BCARshp[BCARshp$RecDepth == 408,]
 fish408 <- spsample(BCARfish408, n = 10, type = "stratified", proj4string =
PROJECTION)
 x_5 <- fish408 at coords[[1]]
 y_5 <- fish408 at coords[[2]]
 xy5 <- cbind(x_5, y_5)

fish <- rbind(xy1, xy2, xy3, xy4, xy5)


### the code for my home-range analysis would then be (this normally works
fine)

H.s <- Hpi(xy, binned = TRUE)
    
KDE <- kde(xy, H=H.s, binned = TRUE)
     
cont <- contourSizes(KDE, cont = c(95), approx = TRUE)
    
return(cont)
  

## plot of shapefile is attached
plot(BCARshp)

<http://r-sig-geo.2731867.n2.nabble.com/file/n7582766/BCARshp_plot.png> 

 
  




--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/spsample-random-sampling-a-subset-of-polygons-based-on-a-variable-from-a-different-dataframe-tp7582766.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From edzer.pebesma at uni-muenster.de  Mon Feb 25 08:23:51 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 25 Feb 2013 08:23:51 +0100
Subject: [R-sig-Geo] bivariate mark correlation
In-Reply-To: <CAE=dzzqQnOOq8uBMV+cNdHZazuR0bEaJUFL9zAkfQ_mOJH1zAA@mail.gmail.com>
References: <CAE=dzzqQnOOq8uBMV+cNdHZazuR0bEaJUFL9zAkfQ_mOJH1zAA@mail.gmail.com>
Message-ID: <512B1187.9030402@uni-muenster.de>

Juanita,

If you believe that variograms are a good tool to describe spatial 
correlation of marks, you might want to have a look at computing cross 
variograms, e.g. in R package gstat.

On 02/25/2013 03:14 AM, juanitachoo wrote:
> Hi,
>
> I would like to examine the spatial correlations in the diameter of two
> tree species. However, I have not found any R packages that has a function
> to  run bivariate mark correlation analyses. I would appreciate it if
> anyone can provide any leads or suggestions. Thanks in advance for your
> help.
>
>
> Regards,
> Juanita
>
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/bivariate-mark-correlation-tp7582764.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From matteo.mattiuzzi at boku.ac.at  Mon Feb 25 10:12:32 2013
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Mon, 25 Feb 2013 10:12:32 +0100
Subject: [R-sig-Geo] raster resolution
Message-ID: <512B39100200002700018984@gwia2.boku.ac.at>

Dear Ross, no you missunderstud.


The area of a (square) pixel is computed by a^2 where 'a' is the length
of one pixel side.
In your case a^2 = 100 qkm (and a^2 = 1000 qkm in the second case).


So if you want 'a' from your area's you have to make sqrt(100[km]) and
sqrt(1000[km]), the result is the length of 'a' in KM!


Now 1 km = 1000 m so you have to multiply the km by 1000 to get meters
(because the mapunit is [m]):


sqrt(XXX[km])*1000 = a [m]


so:
resolution=sqrt(50)*1000 = each cell in raster is 50^2km
resolution=sqrt(300)*1000 = each cell in raster is 300^2km
resolution=sqrt(800)*1000 = each cell in raster is 800^2km


Matteo




>>> Ross Ahmed  02/24/13 3:39 PM >>>
Dear Matteo

Sorry for confusing metres and kilometres. If I understand correctly:

sqrt(1000)*1000 = each cell in raster is 1000^2km



Therefore:

sqrt(50)*50 = each cell in raster is 50^2km


sqrt(300)*300 = each cell in raster is 300^2km


sqrt(800)*800 = each cell in raster is 800^2km


Could you let me know if these are correct?

Ross

On 24 Feb 2013, at 10:16, "Matteo Mattiuzzi"  wrote:

> Dear Ross,
> in your mail you wrote 100 qkm and 1000 qkm. The map unit of
sinusoidal is [m] as you see in the CRS.
> 
> sqrt(100)*1000 = 10000 [m] side length
> and 
> sqrt(1000)*1000
> is the equivalent side-length of such a squared pixel in meter. The
*1000 is only to convert km in m, and the sqrt() is the area to
side-length conversion.
> So I did not generate a raster with 1000 qm but 1000 qkm as you asked.
if you want 1000 qm, resolution=sqrt(1000) 
> 
> Matteo
> 
> 
> >>> Ross Ahmed  02/24/13 9:04 AM >>>
> Dear Matteo
> 
> Your answer has been very useful - thanks. I have a query: to make a
> raster in which each cell is 1000^2m, you have provided this code:
> 
> ext1000 <- obeyRes(extent(EAE),resolution=sqrt(1000)*1000)
> 
> 
> Why have you used sqrt(1000)*1000? Why not 1000*1000?
> 
> Ross
> 
> 
> On 20/02/2013 16:08, "Matteo Mattiuzzi" 
> wrote:
> 
> >Dear Ross,
> >
> >You have 2 problems, one is that by changing the resolution you
change
> >in most of the cases also the extent, and second you cannot generate
a
> >regular raster (same area for all pixels) based on LAT/LON.
> >You will have to use to an equal area projection.
> >http://en.wikipedia.org/wiki/Map_projection#Equal-area
> >
> >Here a function that helps you to adapt the extent:
> >ext=rasterExtent
> >resolution= rasterExtent units resolution as c(x,y) or single value
for
> >both
> >inner = as the change of the resolution in most of the cases changes
the
> >given extent you can choose to make the extent little smaller
> >(inner=TRUE) or little bigger.
> >
> >
> >obeyRes <- function(ext,resolution,inner=TRUE)
> >{
> > if(length(resolution)==1)
> > {
> > resolution <- rep(resolution,2)
> > }
> > cols <- (ext at xmax - ext at xmin)/resolution[2]
> > rows <- (ext at ymax - ext at ymin)/resolution[1]
> >
> >
> > if(inner)
> > {
> > cols <- floor(cols)
> > rows <- floor(rows)
> > } else
> > {
> > cols <- ceiling(cols)
> > rows <- ceiling(rows)
> > }
> >
> >
> > olim <- resolution * c(rows,cols)
> > ext at xmax <- ext at xmin + olim[2]
> > ext at ymin <- ext at ymax - olim[1]
> > return(list(extent=ext,cols=cols,rows=rows))
> >}
> >
> >
> >
> >myExtent <- extent(-176.5813, 174.1103,-31.16667, 83.1)
> >r <- raster(ext=myExtent,crs="+proj=longlat +ellps=WGS84
> >+datum=WGS84")
> >
> >
> ># Sinusoidal (as example!!)
> >EAE <- projectExtent(r,crs="+proj=sinu +lon_0=0 +x_0=0 +y_0=0
> >+a=6371007.181 +b=6371007.181 +units=m +no_defs")
> > 
> >ext100 <- obeyRes(extent(EAE),resolution=10000)
> >r100 <- raster(ext=ext100$extent,ncol=ext100$cols,nrows=ext100$rows,
> >crs="+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181 +b=6371007.181
> >+units=m +no_defs")
> >
> >
> >r100[] <- round(runif(ncell(r100),0,1))
> ># writeRaster(r100,"r100.tif")
> >
> >
> >ext1000 <- obeyRes(extent(EAE),resolution=sqrt(1000)*1000)
> >r1000 <-
> >raster(ext=ext1000$extent,ncol=ext1000$cols,n> >r1000[] <- round(runif(ncell(r1000),0,1))
> ># writeRaster(r1000,"r1000.tif")
> >
> >
> >
> >
> >#################
> >I'm not 100 % sure about my calculations/considerations so take it
with
> >care! 
> >Matteo
> > 
> >
> >
> >>>> Ross Ahmed 02/20/13 11:03 AM >>>
> >I have the following raster:
> >
> >myRaster <- c(-176.5813, 174.1103, -31.16667, 83.1)
> >myRasterExtent <- extent(matrix(myRaster, ncol=2, nrow=2, byrow=T))
> >myRasterExtent <- raster(myRasterExtent, crs="+proj=longlat
> >+ellps=WGS84
> >+datum=WGS84?)
> >
> >How can I change resolution to 100km^2 and 1000km^2
> >
> >many thanks
> >Ross
> >
> >
> >
> > [[alternative HTML version deleted]]
> >
> >
> >
> >
> 
>


From jonesmus.mutua at gmail.com  Mon Feb 25 10:58:15 2013
From: jonesmus.mutua at gmail.com (Jonesmus Wambua)
Date: Mon, 25 Feb 2013 12:58:15 +0300
Subject: [R-sig-Geo] units of spatial distance in variogram
Message-ID: <CABgQd+OnGPkwD2v2rU8o3Bu39jFTPafYvF_sC5RmdOE2PjB7wQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130225/b7d7a86a/attachment.pl>

From edzer.pebesma at uni-muenster.de  Mon Feb 25 11:14:04 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 25 Feb 2013 11:14:04 +0100
Subject: [R-sig-Geo] units of spatial distance in variogram
In-Reply-To: <CABgQd+OnGPkwD2v2rU8o3Bu39jFTPafYvF_sC5RmdOE2PjB7wQ@mail.gmail.com>
References: <CABgQd+OnGPkwD2v2rU8o3Bu39jFTPafYvF_sC5RmdOE2PjB7wQ@mail.gmail.com>
Message-ID: <512B396C.2020508@uni-muenster.de>

if your data are latitude/longitude, and you specified them to be so 
(i.e., is.projected(object) is TRUE), then distance is in km, else 
distance is in the units of the original data coordinates.

(I recognized your output to come from gstat::variogram, but please 
mention such details in future postings)

On 02/25/2013 10:58 AM, Jonesmus Wambua wrote:
> when computing variogram, what are the units of the dist in the output
> below. are they in km?
>
>      np      dist    gamma   id timelag spacelag
> 2  90855  1.148903 42.10353 lag0       0        1
> 3 114349  2.929328 40.82177 lag0       0        3
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From alexandre.champendal at unil.ch  Mon Feb 25 11:34:02 2013
From: alexandre.champendal at unil.ch (alexandre.champendal at unil.ch)
Date: Mon, 25 Feb 2013 11:34:02 +0100
Subject: [R-sig-Geo] Fitting a STvariogram
Message-ID: <512b3e1a.54ab.b431c700.54f92d0c@unil.ch>

Hello,

I am working with spacetime data of pollution (91 stations, 193 time). 
With the new release of gstat, i was able to compute a good sample 
variogram (thanks :-)).

But now I would like to now if there is a way to visualize our data 
set in order to be able to define a good Space-Time anisotropy !? I 
understand the variable we have to
set: anis = c(p,q,r,s,t), but i am not able to find a good way to find 
the parameters.

How can we do this?

Thanks a lot.

Alexandre


From pingyang.whu at gmail.com  Mon Feb 25 14:24:07 2013
From: pingyang.whu at gmail.com (ping yang)
Date: Mon, 25 Feb 2013 08:24:07 -0500
Subject: [R-sig-Geo] Spatiotemporal inquiry
Message-ID: <CAK8gSG_X7qF+kSnzvHjzJCqf5fLkO2ODU5SJ=f=DrsevAodq8w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130225/d849b3e3/attachment.pl>

From edzer.pebesma at uni-muenster.de  Mon Feb 25 15:40:52 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 25 Feb 2013 15:40:52 +0100
Subject: [R-sig-Geo] Spatiotemporal inquiry
In-Reply-To: <CAK8gSG_X7qF+kSnzvHjzJCqf5fLkO2ODU5SJ=f=DrsevAodq8w@mail.gmail.com>
References: <CAK8gSG_X7qF+kSnzvHjzJCqf5fLkO2ODU5SJ=f=DrsevAodq8w@mail.gmail.com>
Message-ID: <512B77F4.4000805@uni-muenster.de>



On 02/25/2013 02:24 PM, ping yang wrote:
> Dear R,
>
> I have a question for conducting a spatio-temporal inquiry, suppose I have
> a time series of air temperature data for 100 years for my domain, can I
> perform a inquiry like this " *How many days are there temperature above 40
> degree *(CC) and get all these days", I noticed there are evolving
> discussion on the space-time library, Have anyone already done this? or Any
> suggestions will be appreciated.

assuming you have regular time series for a limited number of weather 
stations, then your question is similar to asking for the wind data set 
how many days the wind speed exceeded e.g. the value of 19:

library(spacetime)
example(stConstruct)
sel = which(apply(as(wind.st, "xts"), 1, function(x) any(x > 19)))
length(sel)
# how many: 2416
unique(index(wind.st[,sel]))
# which dates: "1961-01-10 GMT" "1961-01-11 GMT" "1961-01-12 GMT" etc.

note that we're essentially counting rows in a matrix with some value(s) 
larger than 19 here -- seeing the thing as a multivariate time series, 
meaning you could do all this with xts or zoo alone.

>
> Thanks,
>
> Ping
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From jgrn at illinois.edu  Mon Feb 25 16:10:20 2013
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Mon, 25 Feb 2013 09:10:20 -0600
Subject: [R-sig-Geo] Parallel processing engine for raster now available on
	CRAN
Message-ID: <CABG0rft9xgxktA3mcAy=5WdN6AWphGK7g0_TCVaTPR4d6QhnfA@mail.gmail.com>

Folks:

After about a year of working on this package, I finally got
spatial.tools pushed out to CRAN this weekend.  The core function
(?focal.hpc) provides an engine for realizing parallel/cluster
processing of raster files with some features to make the development
of the functions easier for users.  Among the key features of the
engine:

1) Supports both single-pixel and local window processing (in parallel).
2) Works with any parallel backend that can be registered with foreach
(parallel, snow, Rmpi, multicore, etc).
3) Supports asynchronous and (OS-willing) parallel writes to the
output file using functionality provided by mmap.
4) Function writing should be intuitive -- for pixel-based functions,
your function will receive an
array with dimensions representing column/row/bands of a chunk, and
should return a chunk of equal columns/rows.  For focal functions, the
function will receive a single local window, and should return a
single value or vector of values representing a single pixel (with
potentially multiple bands).

I've also developed a few convenience functions for quickly
starting/stopping a parallel engine and registering it with foreach
(sfQuickInit and sfQuickStop).

As with all things, your mileage with parallel processing may vary.
The test dataset is relatively small so you may see a somewhat longer
execution, but the benefit of this package should (hopefully) be seen
with larger datasets.

I would love if some r-sig-geo'ers working with larger rasters could
take this package for a drive and let me know if they are seeing a
benefit, and pass along any suggested improvements/bugs!  Cheers!

Here are a few examples:

### spatial.tools
install.packages("spatial.tools")
help(package="spatial.tools")
library("spatial.tools")
# Test file:
tahoe_highrez <- brick(system.file("external/tahoe_highrez.tif",
package="spatial.tools"))

# Start a parallel engine and register it with foreach (uses all processors):
sfQuickInit()

# NDVI function:
ndvi_function <- function(x,...)
{
# Note that x is received by the function as a 3-d array:
red_band <- x[,,2]
nir_band <- x[,,3]
ndvi <- (nir_band - red_band)/(nir_band + red_band)
# The output of the function should also be a 3-d array,
# even if it is a single band:
ndvi <- array(ndvi,dim=c(dim(x)[1],dim(x)[2],1))
return(ndvi)
}

# The first time you run the function, there is an overhead associated with
# loading the packages into the cluster:
system.time(tahoe_ndvi <- focal_hpc(x=tahoe_highrez,fun=ndvi_function))
# Second time will execute faster:
system.time(tahoe_ndvi <- focal_hpc(x=tahoe_highrez,fun=ndvi_function))
plot(tahoe_ndvi)

# Local window smoothing function:

local_smoother <- function(x,...)
{
# Assumes a 3-d array representing
# a single local window, and return
# a single value or a vector of values.
smoothed <- apply(x,3,mean)
return(smoothed)
}

# window_dims gives the local window size, in this case 3 x 3:
system.time(
tahoe_3x3_smoothed <-
focal_hpc(x=tahoe_highrez,fun=local_smoother,window_dims=c(3,3))
)
plotRGB(tahoe_3x3_smoothed)

# Same function, used on a 7 x 7 window:
tahoe_7x7_smoothed <-
focal_hpc(x=tahoe_highrez,fun=local_smoother,window_dims=c(7,7))
plotRGB(tahoe_7x7_smoothed)

# Stop the cluster and re-register foreach with a sequential run:
sfQuickStop()

# Note that focal_hpc will still work even with the cluster stopped,
albeit (possibly) a lot slower:
system.time(
tahoe_3x3_smoothed <-
focal_hpc(x=tahoe_highrez,fun=local_smoother,window_dims=c(3,3))
)
# This took about 4 times longer on my 8 cpu system.

###

I wanted to thank to Robert Hijimans, Roger Bivand, Jeff Ryan (mmap),
and Simon Urbanek,  among many others, for helping me get this thing
working!

--jonathan

--
Jonathan A. Greenberg, PhD
Assistant Professor
Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 217-300-1924
http://www.geog.illinois.edu/~jgrn/
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007


From jgrn at illinois.edu  Mon Feb 25 20:12:14 2013
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Mon, 25 Feb 2013 13:12:14 -0600
Subject: [R-sig-Geo] foreach progress bar?
Message-ID: <CABG0rfs3NdvFV_4PFL3T=0=wzsWAcThUTjcvrqh534WhaQZACw@mail.gmail.com>

Folks:

Has anyone figured out a general solution to create a foreach progress
bar, updated as each iteration is completed?

--j

-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 217-300-1924
http://www.geog.illinois.edu/~jgrn/
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007


From forrest at ufl.edu  Mon Feb 25 20:28:20 2013
From: forrest at ufl.edu (Forrest Stevens)
Date: Mon, 25 Feb 2013 14:28:20 -0500
Subject: [R-sig-Geo] foreach progress bar?
In-Reply-To: <CABG0rfs3NdvFV_4PFL3T=0=wzsWAcThUTjcvrqh534WhaQZACw@mail.gmail.com>
References: <CABG0rfs3NdvFV_4PFL3T=0=wzsWAcThUTjcvrqh534WhaQZACw@mail.gmail.com>
Message-ID: <CAEBQMMkqbfNEQ2gCZPD99W+hE=E0iUEXqBNwZn=zcZha49MOJg@mail.gmail.com>

On Mon, Feb 25, 2013 at 2:12 PM, Jonathan Greenberg <jgrn at illinois.edu> wrote:
> Folks:
>
> Has anyone figured out a general solution to create a foreach progress
> bar, updated as each iteration is completed?
>
> --j

The following is what I use frequently, but you should note that the
raster package (assuming that's what you'd like it for) has facilities
built in for progress bar creation:


##	NOTE: The tcltk library is used to create a progress bar, but the
##		raster package has a progress bar mechanism built in in recent versions.
##		Look up the pbCreate(), pbStep(), and pbClose() functions in the raster
##		package...
require(tcltk)

total_n <- 1000

pb <- tkProgressBar(title = "Predicting Population Density:", min = 0,
max = total_n, width = 300)

for (i in 1:total_n) {
	## ...
	setTkProgressBar(pb, i, label=paste( round(i/total_n*100, 0),"% done"))
}
close(pb)



Forrest Stevens

-- 
Ph.D. Candidate, QSE3 IGERT Fellow
Department of Geography
Land Use and Environmental Change Institute
University of Florida
www.clas.ufl.edu/users/forrest


From bogdan.antonescu at manchester.ac.uk  Mon Feb 25 23:00:07 2013
From: bogdan.antonescu at manchester.ac.uk (Adrian Antonescu)
Date: Mon, 25 Feb 2013 22:00:07 +0000
Subject: [R-sig-Geo] Lightning density map
In-Reply-To: <3CB2260786D64F44BA62080EE73E2395067773@MBXP14.ds.man.ac.uk>
References: <511E5A9E.2020203@manchester.ac.uk>,
	<alpine.LRH.2.02.1302150808590.7598@aeolus.ecy.wa.gov>,
	<3CB2260786D64F44BA62080EE73E2395067773@MBXP14.ds.man.ac.uk>
Message-ID: <3CB2260786D64F44BA62080EE73E239506781D@MBXP14.ds.man.ac.uk>

Hi,

Two weeks ago I have asked a question regarding the use of R for plotting lightning density maps. Thanks to you answers I was able to go one step further.
Attached is the .R script and a sample of the data. The script is counting the number of lightning strikes in hexagons, and then is plotting the hexagons over Europe.
To obtain the lightning density I need the area of the hexagons. Could you please help me on how to calculate the area of the hexagons? Also, how can I obtain the
number of days with lightning  in each hexagons?

Thank you very much.

Cheers,
Bogdan
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lightning.r
Type: application/octet-stream
Size: 1687 bytes
Desc: lightning.r
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130225/0f490a85/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sample_data.csv
Type: application/vnd.ms-excel
Size: 1596 bytes
Desc: sample_data.csv
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130225/0f490a85/attachment.xlb>

From Tom_Roche at pobox.com  Mon Feb 25 23:18:49 2013
From: Tom_Roche at pobox.com (Tom Roche)
Date: Mon, 25 Feb 2013 17:18:49 -0500
Subject: [R-sig-Geo] interoperating SpatialLinesDataFrame,
	SpatialPolygonsDataFrame
Message-ID: <87k3pw9gvq.fsf@pobox.com>


How to cast SpatialPolygonsDataFrame (SPDF) to SpatialLinesDataFrame
(SLDF), or vice versa? Alternatively, how best to write a function to
use either an SPDF or an SLDF as a map overlay in levelplot(...)?
Why I ask:

https://bitbucket.org/tlroche/clm_cn_global_to_aqmeii-na

regrids a dataset from global/unprojected to LCC over a superset of
CONUS ("AQMEII-NA"). I currently have code that gets a projected map
of the CONUS state boundaries with

+ state.map <- maps::map(
+   database="state", projection="lambert", par=c(33,45), plot=FALSE)

tweaks the coordinates, and converts the map to an SLDF

> state.map.IOAPI.shp <-
>   maptools::map2SpatialLines(state.map.IOAPI, proj4string=out.crs)

I then pass the SLDF to a function (which I wrote because I'll be
repeating this task with different datasets) to overlay that map onto
plots of the layers of a RasterBrick:

> plot(rasterVis::levelplot(brick,
>   margin=FALSE,
>   layout=c(1,length(names(brick)))
> ) +
>   latticeExtra::layer(
>     sp::sp.lines(map.shp, lwd=0.8, col='darkgray')))

I want to include Canada and Mexico in my map overlay, since the
horizontal domain includes large portions. I can do

> library(maptools)
> data(wrld_simpl) # from maptools
> map.noram.shp.unproj <- 
>   wrld_simpl[wrld_simpl$ISO3 %in% c('CAN', 'MEX', 'USA'),]
> map.noram.shp.proj <-
>   rgdal::spTransform(map.noram.shp.unproj, CRS=out.crs)

But the latter is an SPDF, for which my function above throws an error
(since sp::sp.lines wants a SLDF). I'm guessing I could change the code
to use sp::sp.polygons as needed (with some sort of `if` or `case`
checking the class of the map), but I'd much prefer to just convert the
SPDF to an SLDF (since I'm not using the polygon's fill or other
attributes). How best to do that? Or is the way to do this Something
Completely Different?

Apologies if this is a FAQ, but I'm not seeing the answer in doc
(sp.pdf or intro_sp.pdf) or via googling.

TIA, Tom Roche <Tom_Roche at pobox.com>


From basille at ase-research.org  Mon Feb 25 23:19:53 2013
From: basille at ase-research.org (Mathieu Basille)
Date: Mon, 25 Feb 2013 17:19:53 -0500
Subject: [R-sig-Geo] MADIFA results
In-Reply-To: <511373FA.8070503@isprambiente.it>
References: <511373FA.8070503@isprambiente.it>
Message-ID: <512BE389.7080102@ase-research.org>

Dear Michela,

I apologize for the late answer. From the help of mahasuhab, section "Details":

?mahasuhab

      The function ?mahasuhab? first computes this mean vector as well
      as the variance-covariance matrix of the niche density function,
      based on the value of habitat variables in the sample of
      locations.  Then, the *squared* Mahalanobis distance from this
      optimum is computed for each pixel of the map.  Thus, the smaller
      this squared distance is for a given pixel, and the better is the
      habitat in this pixel.

      Assuming multivariate normality, squared Mahalanobis distances are
      approximately distributed as Chi-square with n-1 degrees of
      freedom, where n equals the number of habitat characteristics.  If
      the argument ?type = "probability"?, maps of these p-values are
      returned by the function. As such these are the probabilities of a
      larger squared Mahalanobis distance than that observed when x is
      sampled from the niche.

Hope this helps!
Mathieu Basille.


Le 02/07/2013 04:29 AM, Michela Giusti a ?crit :
> Dear list,
>
>   I did an ENFA analysis and then I used MADIFA to produce an habitat
> suitability map.
>
> I attached the legends results as jpg (sorry for low resolution).
>
> Can you help me in explaining the unit of mesaure obtained from the
> analysis? percentage of what? and distance (m, Km,...)?
>
>   Any help would be appreciated....
>
> Thank you very much.
>
> michela
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 

~$ whoami
Mathieu Basille, PhD

~$ locate --details
University of Florida \\
Fort Lauderdale Research and Education Center
(+1) 954-577-6314
http://ase-research.org/basille

~$ fortune
? Le tout est de tout dire, et je manque de mots
Et je manque de temps, et je manque d'audace. ?
  -- Paul ?luard


From microbeatic at gmail.com  Mon Feb 25 23:21:21 2013
From: microbeatic at gmail.com (Migun Shakya)
Date: Mon, 25 Feb 2013 17:21:21 -0500
Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon
Message-ID: <CAChP=snBMrcg32a3_o4Y60=wWcoGf5F4peNzb9nKpL61bMG6wg@mail.gmail.com>

Hi all,

Is there a way/package/trick to convert the NAD83 formatted file to
lat lon format?

I downloaded the "Major Hydrography" dataset from NC,USA to plot
rivers into a NC map. However, the dataset is in NAD83 or in state
plane projection, but i need it to be in lat/lon.


Any help would be great.


Thanks
Migee


dataset can be found in:
http://data.nconemap.com/geoportal/catalog/search/resource/details.page?uuid=%7B2515713B-2CA0-476F-863F-61441A9D6F70%7D


The downloaded dataset consist of
hydromaj_arc.dbf
hydromaj_arc.prj
hydromaj_arc.shp
hydromaj_arc.shx
hydromaj_arc.txt
hydromaj_poly.dbf
hydromaj_poly.prj
hydromaj_poly.shp
hydromaj_poly.shx


From HodgessE at uhd.edu  Mon Feb 25 23:47:11 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Mon, 25 Feb 2013 22:47:11 +0000
Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon
In-Reply-To: <CAChP=snBMrcg32a3_o4Y60=wWcoGf5F4peNzb9nKpL61bMG6wg@mail.gmail.com>
References: <CAChP=snBMrcg32a3_o4Y60=wWcoGf5F4peNzb9nKpL61bMG6wg@mail.gmail.com>
Message-ID: <FF9DB805FC41CC4E95825A50F68063021292BB84@challenger.uhd.campus>

Hi!

Suppose your data set is called nc1.df.

Then you can do:
library(rgdal)
nc1.wgs84 <- spTransform(nc1.df,CRS("+proj=longlat +datum=WGS84"))


________________________________________
From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Migun Shakya [microbeatic at gmail.com]
Sent: Monday, February 25, 2013 4:21 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon

Hi all,

Is there a way/package/trick to convert the NAD83 formatted file to
lat lon format?

I downloaded the "Major Hydrography" dataset from NC,USA to plot
rivers into a NC map. However, the dataset is in NAD83 or in state
plane projection, but i need it to be in lat/lon.


Any help would be great.


Thanks
Migee


dataset can be found in:
http://data.nconemap.com/geoportal/catalog/search/resource/details.page?uuid=%7B2515713B-2CA0-476F-863F-61441A9D6F70%7D


The downloaded dataset consist of
hydromaj_arc.dbf
hydromaj_arc.prj
hydromaj_arc.shp
hydromaj_arc.shx
hydromaj_arc.txt
hydromaj_poly.dbf
hydromaj_poly.prj
hydromaj_poly.shp
hydromaj_poly.shx

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From edzer.pebesma at uni-muenster.de  Mon Feb 25 23:55:26 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 25 Feb 2013 23:55:26 +0100
Subject: [R-sig-Geo] Lightning density map
In-Reply-To: <3CB2260786D64F44BA62080EE73E239506781D@MBXP14.ds.man.ac.uk>
References: <511E5A9E.2020203@manchester.ac.uk>,
	<alpine.LRH.2.02.1302150808590.7598@aeolus.ecy.wa.gov>,
	<3CB2260786D64F44BA62080EE73E2395067773@MBXP14.ds.man.ac.uk>
	<3CB2260786D64F44BA62080EE73E239506781D@MBXP14.ds.man.ac.uk>
Message-ID: <512BEBDE.4060308@uni-muenster.de>



On 02/25/2013 11:00 PM, Adrian Antonescu wrote:
> Hi,
>
> Two weeks ago I have asked a question regarding the use of R for plotting lightning density maps. Thanks to you answers I was able to go one step further.
> Attached is the .R script and a sample of the data. The script is counting the number of lightning strikes in hexagons, and then is plotting the hexagons over Europe.
> To obtain the lightning density I need the area of the hexagons. Could you please help me on how to calculate the area of the hexagons? Also, how can I obtain the
> number of days with lightning  in each hexagons?

 > unique(sapply(HexPolsDf at polygons, function(x) x at area))
[1] 6393744806 6393744806 6393744806 6393744806

I believe the number of days query was mentioned earlier on this list, 
Today -- you've ignore time so far, right?

>
> Thank you very much.
>
> Cheers,
> Bogdan
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From edzer.pebesma at uni-muenster.de  Mon Feb 25 23:57:40 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 25 Feb 2013 23:57:40 +0100
Subject: [R-sig-Geo] interoperating SpatialLinesDataFrame,
	SpatialPolygonsDataFrame
In-Reply-To: <87k3pw9gvq.fsf@pobox.com>
References: <87k3pw9gvq.fsf@pobox.com>
Message-ID: <512BEC64.90005@uni-muenster.de>

Tom, say x is your SpatialPolygonsDataFrame, did you try the obvious,

as(x, "SpatialLinesDataFrame")

?

On 02/25/2013 11:18 PM, Tom Roche wrote:
>
> How to cast SpatialPolygonsDataFrame (SPDF) to SpatialLinesDataFrame
> (SLDF), or vice versa? Alternatively, how best to write a function to
> use either an SPDF or an SLDF as a map overlay in levelplot(...)?
> Why I ask:
>
> https://bitbucket.org/tlroche/clm_cn_global_to_aqmeii-na
>
> regrids a dataset from global/unprojected to LCC over a superset of
> CONUS ("AQMEII-NA"). I currently have code that gets a projected map
> of the CONUS state boundaries with
>
> + state.map <- maps::map(
> +   database="state", projection="lambert", par=c(33,45), plot=FALSE)
>
> tweaks the coordinates, and converts the map to an SLDF
>
>> state.map.IOAPI.shp <-
>>    maptools::map2SpatialLines(state.map.IOAPI, proj4string=out.crs)
>
> I then pass the SLDF to a function (which I wrote because I'll be
> repeating this task with different datasets) to overlay that map onto
> plots of the layers of a RasterBrick:
>
>> plot(rasterVis::levelplot(brick,
>>    margin=FALSE,
>>    layout=c(1,length(names(brick)))
>> ) +
>>    latticeExtra::layer(
>>      sp::sp.lines(map.shp, lwd=0.8, col='darkgray')))
>
> I want to include Canada and Mexico in my map overlay, since the
> horizontal domain includes large portions. I can do
>
>> library(maptools)
>> data(wrld_simpl) # from maptools
>> map.noram.shp.unproj <-
>>    wrld_simpl[wrld_simpl$ISO3 %in% c('CAN', 'MEX', 'USA'),]
>> map.noram.shp.proj <-
>>    rgdal::spTransform(map.noram.shp.unproj, CRS=out.crs)
>
> But the latter is an SPDF, for which my function above throws an error
> (since sp::sp.lines wants a SLDF). I'm guessing I could change the code
> to use sp::sp.polygons as needed (with some sort of `if` or `case`
> checking the class of the map), but I'd much prefer to just convert the
> SPDF to an SLDF (since I'm not using the polygon's fill or other
> attributes). How best to do that? Or is the way to do this Something
> Completely Different?
>
> Apologies if this is a FAQ, but I'm not seeing the answer in doc
> (sp.pdf or intro_sp.pdf) or via googling.
>
> TIA, Tom Roche <Tom_Roche at pobox.com>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From microbeatic at gmail.com  Tue Feb 26 02:45:50 2013
From: microbeatic at gmail.com (Migun Shakya)
Date: Mon, 25 Feb 2013 20:45:50 -0500
Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon
In-Reply-To: <FF9DB805FC41CC4E95825A50F68063021292BB84@challenger.uhd.campus>
References: <CAChP=snBMrcg32a3_o4Y60=wWcoGf5F4peNzb9nKpL61bMG6wg@mail.gmail.com>
	<FF9DB805FC41CC4E95825A50F68063021292BB84@challenger.uhd.campus>
Message-ID: <CAChP=smSr+bB_+F1K9nqExvwgWcAvikfPKKdu6We6B89VW4TcQ@mail.gmail.com>

Hi Erin,
I tried that but ended up getting this error. Does the spTransform
function requires the data to be as data.frame?
Here is what i did to read the data

library(maptools)
library(rgdal)
nc.river<-readShapeSpatial("~/hydromaj/hydromaj_arc.shp") #reading the
shape file

nc1.wgs84 <- spTransform(nc.river,CRS("+proj=longlat +datum=WGS84"))
Error in spTransform(xSP, CRSobj, ...) :
  No transformation possible from NA reference system


Thanks again
Migee

On Mon, Feb 25, 2013 at 5:47 PM, Hodgess, Erin <HodgessE at uhd.edu> wrote:
> Hi!
>
> Suppose your data set is called nc1.df.
>
> Then you can do:
> library(rgdal)
> nc1.wgs84 <- spTransform(nc1.df,CRS("+proj=longlat +datum=WGS84"))
>
>
> ________________________________________
> From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Migun Shakya [microbeatic at gmail.com]
> Sent: Monday, February 25, 2013 4:21 PM
> To: r-sig-geo at r-project.org
> Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon
>
> Hi all,
>
> Is there a way/package/trick to convert the NAD83 formatted file to
> lat lon format?
>
> I downloaded the "Major Hydrography" dataset from NC,USA to plot
> rivers into a NC map. However, the dataset is in NAD83 or in state
> plane projection, but i need it to be in lat/lon.
>
>
> Any help would be great.
>
>
> Thanks
> Migee
>
>
> dataset can be found in:
> http://data.nconemap.com/geoportal/catalog/search/resource/details.page?uuid=%7B2515713B-2CA0-476F-863F-61441A9D6F70%7D
>
>
> The downloaded dataset consist of
> hydromaj_arc.dbf
> hydromaj_arc.prj
> hydromaj_arc.shp
> hydromaj_arc.shx
> hydromaj_arc.txt
> hydromaj_poly.dbf
> hydromaj_poly.prj
> hydromaj_poly.shp
> hydromaj_poly.shx
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From HodgessE at uhd.edu  Tue Feb 26 03:01:11 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Tue, 26 Feb 2013 02:01:11 +0000
Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon
In-Reply-To: <CAChP=smSr+bB_+F1K9nqExvwgWcAvikfPKKdu6We6B89VW4TcQ@mail.gmail.com>
References: <CAChP=snBMrcg32a3_o4Y60=wWcoGf5F4peNzb9nKpL61bMG6wg@mail.gmail.com>
	<FF9DB805FC41CC4E95825A50F68063021292BB84@challenger.uhd.campus>,
	<CAChP=smSr+bB_+F1K9nqExvwgWcAvikfPKKdu6We6B89VW4TcQ@mail.gmail.com>
Message-ID: <FF9DB805FC41CC4E95825A50F68063021292BC45@challenger.uhd.campus>

Hi Migun:

Do an str(nc.river)

Is the proj4string string set, please?

Thanks,
Erin

________________________________________
From: Migun Shakya [microbeatic at gmail.com]
Sent: Monday, February 25, 2013 7:45 PM
To: Hodgess, Erin
Cc: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] converting from NAD83 datum to lat,lon

Hi Erin,
I tried that but ended up getting this error. Does the spTransform
function requires the data to be as data.frame?
Here is what i did to read the data

library(maptools)
library(rgdal)
nc.river<-readShapeSpatial("~/hydromaj/hydromaj_arc.shp") #reading the
shape file

nc1.wgs84 <- spTransform(nc.river,CRS("+proj=longlat +datum=WGS84"))
Error in spTransform(xSP, CRSobj, ...) :
  No transformation possible from NA reference system


Thanks again
Migee

On Mon, Feb 25, 2013 at 5:47 PM, Hodgess, Erin <HodgessE at uhd.edu> wrote:
> Hi!
>
> Suppose your data set is called nc1.df.
>
> Then you can do:
> library(rgdal)
> nc1.wgs84 <- spTransform(nc1.df,CRS("+proj=longlat +datum=WGS84"))
>
>
> ________________________________________
> From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Migun Shakya [microbeatic at gmail.com]
> Sent: Monday, February 25, 2013 4:21 PM
> To: r-sig-geo at r-project.org
> Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon
>
> Hi all,
>
> Is there a way/package/trick to convert the NAD83 formatted file to
> lat lon format?
>
> I downloaded the "Major Hydrography" dataset from NC,USA to plot
> rivers into a NC map. However, the dataset is in NAD83 or in state
> plane projection, but i need it to be in lat/lon.
>
>
> Any help would be great.
>
>
> Thanks
> Migee
>
>
> dataset can be found in:
> http://data.nconemap.com/geoportal/catalog/search/resource/details.page?uuid=%7B2515713B-2CA0-476F-863F-61441A9D6F70%7D
>
>
> The downloaded dataset consist of
> hydromaj_arc.dbf
> hydromaj_arc.prj
> hydromaj_arc.shp
> hydromaj_arc.shx
> hydromaj_arc.txt
> hydromaj_poly.dbf
> hydromaj_poly.prj
> hydromaj_poly.shp
> hydromaj_poly.shx
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From mdsumner at gmail.com  Tue Feb 26 03:01:45 2013
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 26 Feb 2013 13:01:45 +1100
Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon
In-Reply-To: <CAChP=smSr+bB_+F1K9nqExvwgWcAvikfPKKdu6We6B89VW4TcQ@mail.gmail.com>
References: <CAChP=snBMrcg32a3_o4Y60=wWcoGf5F4peNzb9nKpL61bMG6wg@mail.gmail.com>
	<FF9DB805FC41CC4E95825A50F68063021292BB84@challenger.uhd.campus>
	<CAChP=smSr+bB_+F1K9nqExvwgWcAvikfPKKdu6We6B89VW4TcQ@mail.gmail.com>
Message-ID: <CAAcGz9_c2S81nQj+RtwMtwxS1EYak2KBLyQ9NSWxt_xB4Z8mNg@mail.gmail.com>

You need an input projection on the data, it doesn't know what you are
transforming FROM.

Did you read this with maptools::readShapePoly? Try with rgdal:readOGR
so you get the projection automatically with the object.

I cannot download the data from the link you provide, but if you post
the text of the .prj files here someone will be able to give you R
code to set it without re-reading.  (Explore for yourself on
spatialreference.org).

Also, "lat,lon" requires a datum like any map projection - you'll need
to find out if you should stay with NAD83 or convert to WGS84 as in
Erin's code.

Cheers, Mike.



On Tue, Feb 26, 2013 at 12:45 PM, Migun Shakya <microbeatic at gmail.com> wrote:
> Hi Erin,
> I tried that but ended up getting this error. Does the spTransform
> function requires the data to be as data.frame?
> Here is what i did to read the data
>
> library(maptools)
> library(rgdal)
> nc.river<-readShapeSpatial("~/hydromaj/hydromaj_arc.shp") #reading the
> shape file
>
> nc1.wgs84 <- spTransform(nc.river,CRS("+proj=longlat +datum=WGS84"))
> Error in spTransform(xSP, CRSobj, ...) :
>   No transformation possible from NA reference system
>
>
> Thanks again
> Migee
>
> On Mon, Feb 25, 2013 at 5:47 PM, Hodgess, Erin <HodgessE at uhd.edu> wrote:
>> Hi!
>>
>> Suppose your data set is called nc1.df.
>>
>> Then you can do:
>> library(rgdal)
>> nc1.wgs84 <- spTransform(nc1.df,CRS("+proj=longlat +datum=WGS84"))
>>
>>
>> ________________________________________
>> From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Migun Shakya [microbeatic at gmail.com]
>> Sent: Monday, February 25, 2013 4:21 PM
>> To: r-sig-geo at r-project.org
>> Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon
>>
>> Hi all,
>>
>> Is there a way/package/trick to convert the NAD83 formatted file to
>> lat lon format?
>>
>> I downloaded the "Major Hydrography" dataset from NC,USA to plot
>> rivers into a NC map. However, the dataset is in NAD83 or in state
>> plane projection, but i need it to be in lat/lon.
>>
>>
>> Any help would be great.
>>
>>
>> Thanks
>> Migee
>>
>>
>> dataset can be found in:
>> http://data.nconemap.com/geoportal/catalog/search/resource/details.page?uuid=%7B2515713B-2CA0-476F-863F-61441A9D6F70%7D
>>
>>
>> The downloaded dataset consist of
>> hydromaj_arc.dbf
>> hydromaj_arc.prj
>> hydromaj_arc.shp
>> hydromaj_arc.shx
>> hydromaj_arc.txt
>> hydromaj_poly.dbf
>> hydromaj_poly.prj
>> hydromaj_poly.shp
>> hydromaj_poly.shx
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Michael Sumner
Hobart, Australia
e-mail: mdsumner at gmail.com


From microbeatic at gmail.com  Tue Feb 26 03:14:30 2013
From: microbeatic at gmail.com (Migun Shakya)
Date: Mon, 25 Feb 2013 21:14:30 -0500
Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon
In-Reply-To: <CAAcGz9_c2S81nQj+RtwMtwxS1EYak2KBLyQ9NSWxt_xB4Z8mNg@mail.gmail.com>
References: <CAChP=snBMrcg32a3_o4Y60=wWcoGf5F4peNzb9nKpL61bMG6wg@mail.gmail.com>
	<FF9DB805FC41CC4E95825A50F68063021292BB84@challenger.uhd.campus>
	<CAChP=smSr+bB_+F1K9nqExvwgWcAvikfPKKdu6We6B89VW4TcQ@mail.gmail.com>
	<CAAcGz9_c2S81nQj+RtwMtwxS1EYak2KBLyQ9NSWxt_xB4Z8mNg@mail.gmail.com>
Message-ID: <CAChP=sncvkytzAvcsFZCCgDt9HLZ5+-rNZTiZJchXTOs1U-SEg@mail.gmail.com>

Hi Mike,

I tried the rgdal:readOGR, but got an error.

> nc.river<-readOGR("~/hydromaj/hydromaj_arc.shp")
Error in readOGR("~/hydromaj/hydromaj_arc.shp") :
  missing layer

Sorry, I am not very familiar with the data structure, but i am
looking at the spatialreference.org. Lets see what i get.

Thanks,
Migun

Here is the .prj file content for hydromaj_arc.prj

PROJCS["NAD_1983_StatePlane_North_Carolina_FIPS_3200",GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Lambert_Conformal_Conic"],PARAMETER["False_Easting",609601.22],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-79.0],PARAMETER["Standard_Parallel_1",34.33333333333334],PARAMETER["Standard_Parallel_2",36.16666666666666],PARAMETER["Latitude_Of_Origin",33.75],UNIT["Meter",1.0]]

On Mon, Feb 25, 2013 at 9:01 PM, Michael Sumner <mdsumner at gmail.com> wrote:
> You need an input projection on the data, it doesn't know what you are
> transforming FROM.
>
> Did you read this with maptools::readShapePoly? Try with rgdal:readOGR
> so you get the projection automatically with the object.
>
> I cannot download the data from the link you provide, but if you post
> the text of the .prj files here someone will be able to give you R
> code to set it without re-reading.  (Explore for yourself on
> spatialreference.org).
>
> Also, "lat,lon" requires a datum like any map projection - you'll need
> to find out if you should stay with NAD83 or convert to WGS84 as in
> Erin's code.
>
> Cheers, Mike.
>
>
>
> On Tue, Feb 26, 2013 at 12:45 PM, Migun Shakya <microbeatic at gmail.com> wrote:
>> Hi Erin,
>> I tried that but ended up getting this error. Does the spTransform
>> function requires the data to be as data.frame?
>> Here is what i did to read the data
>>
>> library(maptools)
>> library(rgdal)
>> nc.river<-readShapeSpatial("~/hydromaj/hydromaj_arc.shp") #reading the
>> shape file
>>
>> nc1.wgs84 <- spTransform(nc.river,CRS("+proj=longlat +datum=WGS84"))
>> Error in spTransform(xSP, CRSobj, ...) :
>>   No transformation possible from NA reference system
>>
>>
>> Thanks again
>> Migee
>>
>> On Mon, Feb 25, 2013 at 5:47 PM, Hodgess, Erin <HodgessE at uhd.edu> wrote:
>>> Hi!
>>>
>>> Suppose your data set is called nc1.df.
>>>
>>> Then you can do:
>>> library(rgdal)
>>> nc1.wgs84 <- spTransform(nc1.df,CRS("+proj=longlat +datum=WGS84"))
>>>
>>>
>>> ________________________________________
>>> From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Migun Shakya [microbeatic at gmail.com]
>>> Sent: Monday, February 25, 2013 4:21 PM
>>> To: r-sig-geo at r-project.org
>>> Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon
>>>
>>> Hi all,
>>>
>>> Is there a way/package/trick to convert the NAD83 formatted file to
>>> lat lon format?
>>>
>>> I downloaded the "Major Hydrography" dataset from NC,USA to plot
>>> rivers into a NC map. However, the dataset is in NAD83 or in state
>>> plane projection, but i need it to be in lat/lon.
>>>
>>>
>>> Any help would be great.
>>>
>>>
>>> Thanks
>>> Migee
>>>
>>>
>>> dataset can be found in:
>>> http://data.nconemap.com/geoportal/catalog/search/resource/details.page?uuid=%7B2515713B-2CA0-476F-863F-61441A9D6F70%7D
>>>
>>>
>>> The downloaded dataset consist of
>>> hydromaj_arc.dbf
>>> hydromaj_arc.prj
>>> hydromaj_arc.shp
>>> hydromaj_arc.shx
>>> hydromaj_arc.txt
>>> hydromaj_poly.dbf
>>> hydromaj_poly.prj
>>> hydromaj_poly.shp
>>> hydromaj_poly.shx
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
> --
> Michael Sumner
> Hobart, Australia
> e-mail: mdsumner at gmail.com


From HodgessE at uhd.edu  Tue Feb 26 03:30:28 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Tue, 26 Feb 2013 02:30:28 +0000
Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon
In-Reply-To: <CAChP=sncvkytzAvcsFZCCgDt9HLZ5+-rNZTiZJchXTOs1U-SEg@mail.gmail.com>
References: <CAChP=snBMrcg32a3_o4Y60=wWcoGf5F4peNzb9nKpL61bMG6wg@mail.gmail.com>
	<FF9DB805FC41CC4E95825A50F68063021292BB84@challenger.uhd.campus>
	<CAChP=smSr+bB_+F1K9nqExvwgWcAvikfPKKdu6We6B89VW4TcQ@mail.gmail.com>
	<CAAcGz9_c2S81nQj+RtwMtwxS1EYak2KBLyQ9NSWxt_xB4Z8mNg@mail.gmail.com>,
	<CAChP=sncvkytzAvcsFZCCgDt9HLZ5+-rNZTiZJchXTOs1U-SEg@mail.gmail.com>
Message-ID: <FF9DB805FC41CC4E95825A50F68063021292BD6A@challenger.uhd.campus>

Try something like this:

proj4string(nc.river) <- CRS("+proj=lcc +lat_1=36.16666666666666 +lat_2=34.33333333333334 +lat_0=33.75 +lon_0=-79 +x_0=609601.22 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs")



________________________________________
From: Migun Shakya [microbeatic at gmail.com]
Sent: Monday, February 25, 2013 8:14 PM
To: Michael Sumner
Cc: Hodgess, Erin; r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] converting from NAD83 datum to lat,lon

Hi Mike,

I tried the rgdal:readOGR, but got an error.

> nc.river<-readOGR("~/hydromaj/hydromaj_arc.shp")
Error in readOGR("~/hydromaj/hydromaj_arc.shp") :
  missing layer

Sorry, I am not very familiar with the data structure, but i am
looking at the spatialreference.org. Lets see what i get.

Thanks,
Migun

Here is the .prj file content for hydromaj_arc.prj

PROJCS["NAD_1983_StatePlane_North_Carolina_FIPS_3200",GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Lambert_Conformal_Conic"],PARAMETER["False_Easting",609601.22],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-79.0],PARAMETER["Standard_Parallel_1",34.33333333333334],PARAMETER["Standard_Parallel_2",36.16666666666666],PARAMETER["Latitude_Of_Origin",33.75],UNIT["Meter",1.0]]

On Mon, Feb 25, 2013 at 9:01 PM, Michael Sumner <mdsumner at gmail.com> wrote:
> You need an input projection on the data, it doesn't know what you are
> transforming FROM.
>
> Did you read this with maptools::readShapePoly? Try with rgdal:readOGR
> so you get the projection automatically with the object.
>
> I cannot download the data from the link you provide, but if you post
> the text of the .prj files here someone will be able to give you R
> code to set it without re-reading.  (Explore for yourself on
> spatialreference.org).
>
> Also, "lat,lon" requires a datum like any map projection - you'll need
> to find out if you should stay with NAD83 or convert to WGS84 as in
> Erin's code.
>
> Cheers, Mike.
>
>
>
> On Tue, Feb 26, 2013 at 12:45 PM, Migun Shakya <microbeatic at gmail.com> wrote:
>> Hi Erin,
>> I tried that but ended up getting this error. Does the spTransform
>> function requires the data to be as data.frame?
>> Here is what i did to read the data
>>
>> library(maptools)
>> library(rgdal)
>> nc.river<-readShapeSpatial("~/hydromaj/hydromaj_arc.shp") #reading the
>> shape file
>>
>> nc1.wgs84 <- spTransform(nc.river,CRS("+proj=longlat +datum=WGS84"))
>> Error in spTransform(xSP, CRSobj, ...) :
>>   No transformation possible from NA reference system
>>
>>
>> Thanks again
>> Migee
>>
>> On Mon, Feb 25, 2013 at 5:47 PM, Hodgess, Erin <HodgessE at uhd.edu> wrote:
>>> Hi!
>>>
>>> Suppose your data set is called nc1.df.
>>>
>>> Then you can do:
>>> library(rgdal)
>>> nc1.wgs84 <- spTransform(nc1.df,CRS("+proj=longlat +datum=WGS84"))
>>>
>>>
>>> ________________________________________
>>> From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Migun Shakya [microbeatic at gmail.com]
>>> Sent: Monday, February 25, 2013 4:21 PM
>>> To: r-sig-geo at r-project.org
>>> Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon
>>>
>>> Hi all,
>>>
>>> Is there a way/package/trick to convert the NAD83 formatted file to
>>> lat lon format?
>>>
>>> I downloaded the "Major Hydrography" dataset from NC,USA to plot
>>> rivers into a NC map. However, the dataset is in NAD83 or in state
>>> plane projection, but i need it to be in lat/lon.
>>>
>>>
>>> Any help would be great.
>>>
>>>
>>> Thanks
>>> Migee
>>>
>>>
>>> dataset can be found in:
>>> http://data.nconemap.com/geoportal/catalog/search/resource/details.page?uuid=%7B2515713B-2CA0-476F-863F-61441A9D6F70%7D
>>>
>>>
>>> The downloaded dataset consist of
>>> hydromaj_arc.dbf
>>> hydromaj_arc.prj
>>> hydromaj_arc.shp
>>> hydromaj_arc.shx
>>> hydromaj_arc.txt
>>> hydromaj_poly.dbf
>>> hydromaj_poly.prj
>>> hydromaj_poly.shp
>>> hydromaj_poly.shx
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
> --
> Michael Sumner
> Hobart, Australia
> e-mail: mdsumner at gmail.com


From mdsumner at gmail.com  Tue Feb 26 03:30:43 2013
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 26 Feb 2013 13:30:43 +1100
Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon
In-Reply-To: <CAChP=sncvkytzAvcsFZCCgDt9HLZ5+-rNZTiZJchXTOs1U-SEg@mail.gmail.com>
References: <CAChP=snBMrcg32a3_o4Y60=wWcoGf5F4peNzb9nKpL61bMG6wg@mail.gmail.com>
	<FF9DB805FC41CC4E95825A50F68063021292BB84@challenger.uhd.campus>
	<CAChP=smSr+bB_+F1K9nqExvwgWcAvikfPKKdu6We6B89VW4TcQ@mail.gmail.com>
	<CAAcGz9_c2S81nQj+RtwMtwxS1EYak2KBLyQ9NSWxt_xB4Z8mNg@mail.gmail.com>
	<CAChP=sncvkytzAvcsFZCCgDt9HLZ5+-rNZTiZJchXTOs1U-SEg@mail.gmail.com>
Message-ID: <CAAcGz98dw294Xs9V6669vr9_b-qR-5OvHfhsByzGg=OMsuKm8w@mail.gmail.com>

Since you can install rgdal it would be best to go that way (I had
completely missed that you obviously had access to rgdal::spTransform,
please provide the code you are using as asked by the mailing list
guidelines).

library(rgdal)


See ?readOGR

You need a layer name, which can just be the file name without extension:

nc.river<-readOGR("~/hydromaj/hydromaj_arc.shp", "hydromaj_arc")

Then do

proj4string(nc.river)

to see that it's not NA before proceeding with spTransform.

(Re-projecting is not straightforward and you should really be
checking carefully at every step against the needs of your project, we
can't advise past the basics of just running code. )

Cheers, Mike.

On Tue, Feb 26, 2013 at 1:14 PM, Migun Shakya <microbeatic at gmail.com> wrote:
> Hi Mike,
>
> I tried the rgdal:readOGR, but got an error.
>
>> nc.river<-readOGR("~/hydromaj/hydromaj_arc.shp")
> Error in readOGR("~/hydromaj/hydromaj_arc.shp") :
>   missing layer
>
> Sorry, I am not very familiar with the data structure, but i am
> looking at the spatialreference.org. Lets see what i get.
>
> Thanks,
> Migun
>
> Here is the .prj file content for hydromaj_arc.prj
>
> PROJCS["NAD_1983_StatePlane_North_Carolina_FIPS_3200",GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Lambert_Conformal_Conic"],PARAMETER["False_Easting",609601.22],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-79.0],PARAMETER["Standard_Parallel_1",34.33333333333334],PARAMETER["Standard_Parallel_2",36.16666666666666],PARAMETER["Latitude_Of_Origin",33.75],UNIT["Meter",1.0]]
>
> On Mon, Feb 25, 2013 at 9:01 PM, Michael Sumner <mdsumner at gmail.com> wrote:
>> You need an input projection on the data, it doesn't know what you are
>> transforming FROM.
>>
>> Did you read this with maptools::readShapePoly? Try with rgdal:readOGR
>> so you get the projection automatically with the object.
>>
>> I cannot download the data from the link you provide, but if you post
>> the text of the .prj files here someone will be able to give you R
>> code to set it without re-reading.  (Explore for yourself on
>> spatialreference.org).
>>
>> Also, "lat,lon" requires a datum like any map projection - you'll need
>> to find out if you should stay with NAD83 or convert to WGS84 as in
>> Erin's code.
>>
>> Cheers, Mike.
>>
>>
>>
>> On Tue, Feb 26, 2013 at 12:45 PM, Migun Shakya <microbeatic at gmail.com> wrote:
>>> Hi Erin,
>>> I tried that but ended up getting this error. Does the spTransform
>>> function requires the data to be as data.frame?
>>> Here is what i did to read the data
>>>
>>> library(maptools)
>>> library(rgdal)
>>> nc.river<-readShapeSpatial("~/hydromaj/hydromaj_arc.shp") #reading the
>>> shape file
>>>
>>> nc1.wgs84 <- spTransform(nc.river,CRS("+proj=longlat +datum=WGS84"))
>>> Error in spTransform(xSP, CRSobj, ...) :
>>>   No transformation possible from NA reference system
>>>
>>>
>>> Thanks again
>>> Migee
>>>
>>> On Mon, Feb 25, 2013 at 5:47 PM, Hodgess, Erin <HodgessE at uhd.edu> wrote:
>>>> Hi!
>>>>
>>>> Suppose your data set is called nc1.df.
>>>>
>>>> Then you can do:
>>>> library(rgdal)
>>>> nc1.wgs84 <- spTransform(nc1.df,CRS("+proj=longlat +datum=WGS84"))
>>>>
>>>>
>>>> ________________________________________
>>>> From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Migun Shakya [microbeatic at gmail.com]
>>>> Sent: Monday, February 25, 2013 4:21 PM
>>>> To: r-sig-geo at r-project.org
>>>> Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon
>>>>
>>>> Hi all,
>>>>
>>>> Is there a way/package/trick to convert the NAD83 formatted file to
>>>> lat lon format?
>>>>
>>>> I downloaded the "Major Hydrography" dataset from NC,USA to plot
>>>> rivers into a NC map. However, the dataset is in NAD83 or in state
>>>> plane projection, but i need it to be in lat/lon.
>>>>
>>>>
>>>> Any help would be great.
>>>>
>>>>
>>>> Thanks
>>>> Migee
>>>>
>>>>
>>>> dataset can be found in:
>>>> http://data.nconemap.com/geoportal/catalog/search/resource/details.page?uuid=%7B2515713B-2CA0-476F-863F-61441A9D6F70%7D
>>>>
>>>>
>>>> The downloaded dataset consist of
>>>> hydromaj_arc.dbf
>>>> hydromaj_arc.prj
>>>> hydromaj_arc.shp
>>>> hydromaj_arc.shx
>>>> hydromaj_arc.txt
>>>> hydromaj_poly.dbf
>>>> hydromaj_poly.prj
>>>> hydromaj_poly.shp
>>>> hydromaj_poly.shx
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>>
>> --
>> Michael Sumner
>> Hobart, Australia
>> e-mail: mdsumner at gmail.com



-- 
Michael Sumner
Hobart, Australia
e-mail: mdsumner at gmail.com


From microbeatic at gmail.com  Tue Feb 26 03:52:26 2013
From: microbeatic at gmail.com (Migun Shakya)
Date: Mon, 25 Feb 2013 21:52:26 -0500
Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon
In-Reply-To: <CAAcGz98dw294Xs9V6669vr9_b-qR-5OvHfhsByzGg=OMsuKm8w@mail.gmail.com>
References: <CAChP=snBMrcg32a3_o4Y60=wWcoGf5F4peNzb9nKpL61bMG6wg@mail.gmail.com>
	<FF9DB805FC41CC4E95825A50F68063021292BB84@challenger.uhd.campus>
	<CAChP=smSr+bB_+F1K9nqExvwgWcAvikfPKKdu6We6B89VW4TcQ@mail.gmail.com>
	<CAAcGz9_c2S81nQj+RtwMtwxS1EYak2KBLyQ9NSWxt_xB4Z8mNg@mail.gmail.com>
	<CAChP=sncvkytzAvcsFZCCgDt9HLZ5+-rNZTiZJchXTOs1U-SEg@mail.gmail.com>
	<CAAcGz98dw294Xs9V6669vr9_b-qR-5OvHfhsByzGg=OMsuKm8w@mail.gmail.com>
Message-ID: <CAChP=skq735LmU1N=MM3Yua7jePYBP3Mcw47-6UdSY7a84qbvQ@mail.gmail.com>

Hi Mike and Erin,
I added the projection to the shape file as suggested by Erin.

Then i plotted the rivers over and plotted my data points (places
where i collected samples). All my data points look accurate.


Thank you so much.

This was my first try working with GIS data. And, it was fun.

Migun

On Mon, Feb 25, 2013 at 9:30 PM, Michael Sumner <mdsumner at gmail.com> wrote:
> Since you can install rgdal it would be best to go that way (I had
> completely missed that you obviously had access to rgdal::spTransform,
> please provide the code you are using as asked by the mailing list
> guidelines).
>
> library(rgdal)
>
>
> See ?readOGR
>
> You need a layer name, which can just be the file name without extension:
>
> nc.river<-readOGR("~/hydromaj/hydromaj_arc.shp", "hydromaj_arc")
>
> Then do
>
> proj4string(nc.river)
>
> to see that it's not NA before proceeding with spTransform.
>
> (Re-projecting is not straightforward and you should really be
> checking carefully at every step against the needs of your project, we
> can't advise past the basics of just running code. )
>
> Cheers, Mike.
>
> On Tue, Feb 26, 2013 at 1:14 PM, Migun Shakya <microbeatic at gmail.com> wrote:
>> Hi Mike,
>>
>> I tried the rgdal:readOGR, but got an error.
>>
>>> nc.river<-readOGR("~/hydromaj/hydromaj_arc.shp")
>> Error in readOGR("~/hydromaj/hydromaj_arc.shp") :
>>   missing layer
>>
>> Sorry, I am not very familiar with the data structure, but i am
>> looking at the spatialreference.org. Lets see what i get.
>>
>> Thanks,
>> Migun
>>
>> Here is the .prj file content for hydromaj_arc.prj
>>
>> PROJCS["NAD_1983_StatePlane_North_Carolina_FIPS_3200",GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Lambert_Conformal_Conic"],PARAMETER["False_Easting",609601.22],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-79.0],PARAMETER["Standard_Parallel_1",34.33333333333334],PARAMETER["Standard_Parallel_2",36.16666666666666],PARAMETER["Latitude_Of_Origin",33.75],UNIT["Meter",1.0]]
>>
>> On Mon, Feb 25, 2013 at 9:01 PM, Michael Sumner <mdsumner at gmail.com> wrote:
>>> You need an input projection on the data, it doesn't know what you are
>>> transforming FROM.
>>>
>>> Did you read this with maptools::readShapePoly? Try with rgdal:readOGR
>>> so you get the projection automatically with the object.
>>>
>>> I cannot download the data from the link you provide, but if you post
>>> the text of the .prj files here someone will be able to give you R
>>> code to set it without re-reading.  (Explore for yourself on
>>> spatialreference.org).
>>>
>>> Also, "lat,lon" requires a datum like any map projection - you'll need
>>> to find out if you should stay with NAD83 or convert to WGS84 as in
>>> Erin's code.
>>>
>>> Cheers, Mike.
>>>
>>>
>>>
>>> On Tue, Feb 26, 2013 at 12:45 PM, Migun Shakya <microbeatic at gmail.com> wrote:
>>>> Hi Erin,
>>>> I tried that but ended up getting this error. Does the spTransform
>>>> function requires the data to be as data.frame?
>>>> Here is what i did to read the data
>>>>
>>>> library(maptools)
>>>> library(rgdal)
>>>> nc.river<-readShapeSpatial("~/hydromaj/hydromaj_arc.shp") #reading the
>>>> shape file
>>>>
>>>> nc1.wgs84 <- spTransform(nc.river,CRS("+proj=longlat +datum=WGS84"))
>>>> Error in spTransform(xSP, CRSobj, ...) :
>>>>   No transformation possible from NA reference system
>>>>
>>>>
>>>> Thanks again
>>>> Migee
>>>>
>>>> On Mon, Feb 25, 2013 at 5:47 PM, Hodgess, Erin <HodgessE at uhd.edu> wrote:
>>>>> Hi!
>>>>>
>>>>> Suppose your data set is called nc1.df.
>>>>>
>>>>> Then you can do:
>>>>> library(rgdal)
>>>>> nc1.wgs84 <- spTransform(nc1.df,CRS("+proj=longlat +datum=WGS84"))
>>>>>
>>>>>
>>>>> ________________________________________
>>>>> From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Migun Shakya [microbeatic at gmail.com]
>>>>> Sent: Monday, February 25, 2013 4:21 PM
>>>>> To: r-sig-geo at r-project.org
>>>>> Subject: [R-sig-Geo] converting from NAD83 datum to lat,lon
>>>>>
>>>>> Hi all,
>>>>>
>>>>> Is there a way/package/trick to convert the NAD83 formatted file to
>>>>> lat lon format?
>>>>>
>>>>> I downloaded the "Major Hydrography" dataset from NC,USA to plot
>>>>> rivers into a NC map. However, the dataset is in NAD83 or in state
>>>>> plane projection, but i need it to be in lat/lon.
>>>>>
>>>>>
>>>>> Any help would be great.
>>>>>
>>>>>
>>>>> Thanks
>>>>> Migee
>>>>>
>>>>>
>>>>> dataset can be found in:
>>>>> http://data.nconemap.com/geoportal/catalog/search/resource/details.page?uuid=%7B2515713B-2CA0-476F-863F-61441A9D6F70%7D
>>>>>
>>>>>
>>>>> The downloaded dataset consist of
>>>>> hydromaj_arc.dbf
>>>>> hydromaj_arc.prj
>>>>> hydromaj_arc.shp
>>>>> hydromaj_arc.shx
>>>>> hydromaj_arc.txt
>>>>> hydromaj_poly.dbf
>>>>> hydromaj_poly.prj
>>>>> hydromaj_poly.shp
>>>>> hydromaj_poly.shx
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>>
>>> --
>>> Michael Sumner
>>> Hobart, Australia
>>> e-mail: mdsumner at gmail.com
>
>
>
> --
> Michael Sumner
> Hobart, Australia
> e-mail: mdsumner at gmail.com


From ben.graeler at uni-muenster.de  Tue Feb 26 09:56:09 2013
From: ben.graeler at uni-muenster.de (=?ISO-8859-1?Q?Benedikt_Gr=E4ler?=)
Date: Tue, 26 Feb 2013 09:56:09 +0100
Subject: [R-sig-Geo] Fitting a STvariogram
In-Reply-To: <512b3e1a.54ab.b431c700.54f92d0c@unil.ch>
References: <512b3e1a.54ab.b431c700.54f92d0c@unil.ch>
Message-ID: <512C78A9.9070305@uni-muenster.de>

Dear Alexandre,

currently, the parameter "anis" in one of the building blocks of a 
spatio-temporal variogram model is not supported. The spatio-temporal 
anisotropy (e.g. in a metric model) is part of the spatio-temporal 
variogram model definition ("stAni"), see ?vgmST for available models 
and parameter definitions.

We do not provide special plotting functions to fit the spatio-temporal 
anisotropy. However, the demo(stkrige) will show levelplots for sample 
and model variograms and bring up an interactive "lollipop3d"-plot 
(based on the rgl package) to visually judge the overall variogram fit.

The function fit.StVariogram will minimize (using optim) all parameters 
(incl. stAni where part of the model) in terms of the residuals between 
sample and model variogram.

I hope this helps. Best wishes

  Ben


On 25.02.2013 11:34, alexandre.champendal at unil.ch wrote:
> Hello,
>
> I am working with spacetime data of pollution (91 stations, 193 time).
> With the new release of gstat, i was able to compute a good sample
> variogram (thanks :-)).
You're welcome; it is always nice to see code being used.

>
> But now I would like to now if there is a way to visualize our data set
> in order to be able to define a good Space-Time anisotropy !? I
> understand the variable we have to
> set: anis = c(p,q,r,s,t), but i am not able to find a good way to find
> the parameters.
>
> How can we do this?
>
> Thanks a lot.
>
> Alexandre
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Benedikt Gr?ler

ifgi - Institute for Geoinformatics
University of Muenster

http://ifgi.uni-muenster.de/graeler

Phone: +49 251 83-33082
Mail: ben.graeler at uni-muenster.de


From jonesmus.mutua at gmail.com  Tue Feb 26 11:03:27 2013
From: jonesmus.mutua at gmail.com (Jonesmus Wambua)
Date: Tue, 26 Feb 2013 13:03:27 +0300
Subject: [R-sig-Geo] space time variogram
Message-ID: <CABgQd+OUb6tEe9tsWerPSA15i4XBkWOtZMHMSJ8mHZ+LSxYv5A@mail.gmail.com>

hi,
am specifying a variogram with 53 years by generating the time variable as
follows:

time <- as.POSIXct(paste0(1960:2012,"-01-01"), tz = "GMT")

When i generate the map variagram, it comes with time in thousands (see
attached map). how can i make sure that it gives time in years with a
reasonable range?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130226/3b04aaf7/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: central africa Variogram1.png
Type: image/png
Size: 13628 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130226/3b04aaf7/attachment.png>

From zbynek.janoska at centrum.cz  Tue Feb 26 11:59:02 2013
From: zbynek.janoska at centrum.cz (zbynek.janoska at centrum.cz)
Date: Tue, 26 Feb 2013 02:59:02 -0800 (PST)
Subject: [R-sig-Geo] Incorrect result of gDisjoint in rgeos?
Message-ID: <1361876342467-7582819.post@n2.nabble.com>

Hello,
I have encountered strange results, when using Geometry Relationship tools
in rgeos package.
I have set of lines and points and want to check, which point lies on which
line.

The results, which I obtain using rgeos tools, are incorrect, however.
For example, I have point 59 and line 63.
Point 59 is endpoint of this line:

> coordinates(point[59,])
             x        y
point -641291.2 -1115435
> coordinates(line[63,])[[1]][[1]][1,]
[1]  -641291.2 -1115435.2
> coordinates(line[63,])[[1]][[1]][1,] == coordinates(point[59,])
        x    y
point1 TRUE TRUE

But rgeos sees them as disjoint geometries
> gDisjoint(line[63,],point[59,])
[1] TRUE

Point 59 was initialy created by taking first vertex of line 63, and there
was no rounding used, therefore I dont think this error is due to rounding
error.
Also both lines and points have the same coordinate system.

I can not seem to find the explanation, does anyone have any suggestion?

Thanks,
Zbynek



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Incorrect-result-of-gDisjoint-in-rgeos-tp7582819.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From HodgessE at uhd.edu  Tue Feb 26 12:43:59 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Tue, 26 Feb 2013 11:43:59 +0000
Subject: [R-sig-Geo] space time variogram
In-Reply-To: <CABgQd+OUb6tEe9tsWerPSA15i4XBkWOtZMHMSJ8mHZ+LSxYv5A@mail.gmail.com>
References: <CABgQd+OUb6tEe9tsWerPSA15i4XBkWOtZMHMSJ8mHZ+LSxYv5A@mail.gmail.com>
Message-ID: <FF9DB805FC41CC4E95825A50F68063021292BEA7@challenger.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130226/bd812f0f/attachment.pl>

From edzer.pebesma at uni-muenster.de  Tue Feb 26 13:08:21 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 26 Feb 2013 13:08:21 +0100
Subject: [R-sig-Geo] space time variogram
In-Reply-To: <FF9DB805FC41CC4E95825A50F68063021292BEA7@challenger.uhd.campus>
References: <CABgQd+OUb6tEe9tsWerPSA15i4XBkWOtZMHMSJ8mHZ+LSxYv5A@mail.gmail.com>
	<FF9DB805FC41CC4E95825A50F68063021292BEA7@challenger.uhd.campus>
Message-ID: <512CA5B5.5040904@uni-muenster.de>

Erin, there is AFAIK in R no other way to represent a year then by its 
first Date, and that is what Jonesmus did.

Jonesmus, I didn't see the map that you mentioned in your email.

In the plot that you sent, lag1 refers to the first temporal lag.

variogramST will assume time to be strictly regular regardless whether 
it is -- often it isn't (years, months, even days in local time zones 
have irregular length) but nearly is. In your plot, lag1 means time[1] 
to time[2], time[2] to time[3] etc, indicating one year to the next 
(whether this is 365 days, or 366).

Please, in postings, give a complete record of what you did to obtain 
certain results -- this post might be complete speculative and hence 
completely useless to you.

On 02/26/2013 12:43 PM, Hodgess, Erin wrote:
> Hello!
>
> I think it is showing days rather than years.
>
>
> ________________________________
> From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Jonesmus Wambua [jonesmus.mutua at gmail.com]
> Sent: Tuesday, February 26, 2013 4:03 AM
> To: r-sig-geo at r-project.org
> Subject: [R-sig-Geo] space time variogram
>
> hi,
> am specifying a variogram with 53 years by generating the time variable as follows:
>
> time <- as.POSIXct(paste0(1960:2012,"-01-01"), tz = "GMT")
>
> When i generate the map variagram, it comes with time in thousands (see attached map). how can i make sure that it gives time in years with a reasonable range?
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From waldircj at gmail.com  Tue Feb 26 18:41:08 2013
From: waldircj at gmail.com (Waldir de Carvalho Junior)
Date: Tue, 26 Feb 2013 14:41:08 -0300
Subject: [R-sig-Geo] rpart - regression tree
Message-ID: <CAFs5Q4LQ+xz5ZuSPqAzp+==SaRbnHjQGEDq64WiLPUvgsDnm+Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130226/f1e7ef0e/attachment.pl>

From phytophthorasb at yahoo.com  Tue Feb 26 22:01:48 2013
From: phytophthorasb at yahoo.com (Empty Empty)
Date: Tue, 26 Feb 2013 13:01:48 -0800 (PST)
Subject: [R-sig-Geo] z and p-values for Moran Local raster map
Message-ID: <1361912508.32513.YahooMailNeo@web142502.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130226/c68e5db6/attachment.pl>

From laura_mendenhall at fws.gov  Tue Feb 26 22:59:28 2013
From: laura_mendenhall at fws.gov (Mendenhall, Laura)
Date: Tue, 26 Feb 2013 13:59:28 -0800
Subject: [R-sig-Geo] KDE in Geospatial Modelling Environment
Message-ID: <CAOU_yppz_v5wEGcNDptbQm_Mqb8WDeHTabugZBSjSiSSEzXxPg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130226/6464f821/attachment.pl>

From lily_franknich at yahoo.com  Wed Feb 27 05:12:37 2013
From: lily_franknich at yahoo.com (Lilis Husna)
Date: Wed, 27 Feb 2013 12:12:37 +0800
Subject: [R-sig-Geo] error Install package
In-Reply-To: <1357538992.89272.YahooMailNeo@web192906.mail.sg3.yahoo.com>
References: <1357538992.89272.YahooMailNeo@web192906.mail.sg3.yahoo.com>
Message-ID: <1361938357.26767.YahooMailNeo@web192901.mail.sg3.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130227/b6d77b3a/attachment.pl>

From lily_franknich at yahoo.com  Wed Feb 27 05:12:37 2013
From: lily_franknich at yahoo.com (Lilis Husna)
Date: Wed, 27 Feb 2013 12:12:37 +0800 (SGT)
Subject: [R-sig-Geo] error Install package
In-Reply-To: <1357538992.89272.YahooMailNeo@web192906.mail.sg3.yahoo.com>
References: <1357538992.89272.YahooMailNeo@web192906.mail.sg3.yahoo.com>
Message-ID: <1361938357.26767.YahooMailNeo@web192901.mail.sg3.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130227/b6d77b3a/attachment-0001.pl>

From kridox at ymail.com  Wed Feb 27 05:28:26 2013
From: kridox at ymail.com (Pascal Oettli)
Date: Wed, 27 Feb 2013 13:28:26 +0900
Subject: [R-sig-Geo] error Install package
In-Reply-To: <1361938357.26767.YahooMailNeo@web192901.mail.sg3.yahoo.com>
References: <1357538992.89272.YahooMailNeo@web192906.mail.sg3.yahoo.com>
	<1361938357.26767.YahooMailNeo@web192901.mail.sg3.yahoo.com>
Message-ID: <512D8B6A.3070007@ymail.com>

Hi,

The error message is explicit enough. You need to install the 'sp' package.

Regards,
Pascal


Le 27/02/2013 13:12, Lilis Husna a ?crit :
> i want to install package spgwr by zip file.
>
> the package is succesfully unpacked, but when i call it
> library (spgwr)
> there is a comment error :
>
> "Error: package ?sp? required by ?spgwr? could not be found"
>
>
>
> Regards,
>
> Lilis Nurul Husna
> Institute of Statistics
>
> Jakarta
> 	[[alternative HTML version deleted]]
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From ross.dwyer at uq.edu.au  Wed Feb 27 05:45:44 2013
From: ross.dwyer at uq.edu.au (Ross Dwyer)
Date: Wed, 27 Feb 2013 04:45:44 +0000
Subject: [R-sig-Geo] spsample random sampling a subset of polygons based
 on a variable from a different dataframe
In-Reply-To: <1361759883275-7582766.post@n2.nabble.com>
References: <1361759883275-7582766.post@n2.nabble.com>
Message-ID: <84B4751733167E41A8156E63A69C1C3A120685@uqexmdb4.soe.uq.edu.au>

Hi Kate,

It's always tough to decipher errors in code without the raw data to play around with. However I appreciate that the acoustic detection datasets can be huge (102656 in your case) and not easy to push around.

>From reading your code, I'm unsure why you need to run the for-loop on the 'myfun' function. Why don't you simply specify n = number of detections at that receiver as you did on the 'tester'? For-loops are computationally demanding and good to avoid when possible. This would would dramatically speed up the run-time and may fix your error.

If this doesn't work, try posting your data on something like http://www.filefactory.com/. You may get more responses on your  query that way.

Cheers, Ross

Dr Ross Dwyer | University of Queensland | Email: ross.dwyer at uq.edu.au | http://www.uq.edu.au/eco-lab/ross-dwyer




-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of kalee
Sent: Monday, 25 February 2013 12:38 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] spsample random sampling a subset of polygons based on a variable from a different dataframe

Hi all,

Data background: I have a dataframe of fish telemetry locations where we have to estimate the X and Y co-ordinates based on the depth at which the fish is detected and the receiver number (combined into one attribute named 'RecDepth' within the dataframe; 20 fish each with 1,000-10,000 locations) .
I have a shapefile of the study area with the depth contours overlaided with the detection range of each receiver. The depth contours have an accuracy of
+/-2m so I have buffered each of these polylines to give me the possible
area into which fish detection could be (polygons: with a attribute of RecDepth that corresponds the the reciever number and depth of the contour).
The idea is to randomly select a point in each polygon corresponding to each fish detection and then pass the results to calculate the home-range and run
1000 iterations to see how much the home-range estimates differ. 

Method and problem encountered: I now want to use spsample to randomly select a point within each polygons for each fish detection. I've tried to write a function to iterate through all the fish locations for each fish.
However, I'm having trouble with the function and I'm unsure why. I tried to use the method suggested at
http://casoilresource.lawr.ucdavis.edu/drupal/node/644 but I can't figure out how to select the correct polygons according the RecDepth in the dataframe. 

Any help could be greatly appreciated. 
Thanks
Kate



My code is as follows:

library(sp)
data1 <- read.csv("Blues_COA_breed.csv", header= TRUE)
 
 str(data1)
##'data.frame':   102656 obs. of  9 variables:
## $ Date.Time: Factor w/ 56064 levels "1/08/2009 0:00",..: 40063 40064
40089 40100 40114 40119 40129 ##40134 40160 40166 ...
 ##$ ID       : int  1 1 1 1 1 1 1 1 1 1 ...
## $ sex      : Factor w/ 3 levels "female","male",..: 3 3 3 3 3 3 3 3 3 3
...
## $ sex_1    : int  3 3 3 3 3 3 3 3 3 3 ...
## $ RecDepth : int  608 608 608 608 508 608 608 608 606 606 ...
## $ Y        : num  -33.9 -33.9 -33.9 -33.9 -33.9 ...
## $ X        : num  151 151 151 151 151 ...
## $ Z        : int  8 8 8 8 8 8 8 8 6 6 ...
## $ Breeding : int  1 1 1 1 1 1 1 1 1 1 ...


#### Projection of shapefile is Australia Albers as follows:
 PROJECTION <- CRS("+proj=aea +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=134
+x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs")
 
 
 
 BCARshp <-
readShapeSpatial("Reef_depth_detectionrange_Buffer4m_ALbers.shp",
proj4string = PROJECTION)
 

str(BCARshp)
##Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots
##  ..@ data       :'data.frame': 150 obs. of  6 variables:
##  .. ..$ COMMENT   : Factor w/ 1 level "Coogee Area": 1 1 1 1 1 1 1 1 1 1
...
##  .. ..$ depth_islw: int [1:150] 2 2 2 2 2 2 2 8 8 16 ...
##  .. ..$ Station   : num [1:150] 2 3 5 6 7 8 9 4 5 8 ...
##  .. ..$ Y         : num [1:150] -3834217 -3834550 -3834729 -3834818
-3834753 ...
##  .. ..$ X         : num [1:150] 1765872 1765908 1765672 1765450 1765176
...
##  .. ..$ RecDepth  : num [1:150] 202 302 502 602 702 802 902 408 508 816 ...
##  .. ..- attr(*, "data_types")= chr [1:6] "C" "N" "N" "N" ...
##  ..@ polygons   :List of 150
##  .. ..$ :Formal class 'Polygons' [package "sp"] with 5 slots ##  .. .. .. ..@ Polygons :List of 1 ##  .. .. .. .. ..$ :Formal class 'Polygon' [package "sp"] with 5 slots ##  .. .. .. .. .. .. ..@ labpt  : num [1:2] 1765872 -3834217
##  .. .. .. .. .. .. ..@ area   : num 1200
##  .. .. .. .. .. .. ..@ hole   : logi FALSE
##  .. .. .. .. .. .. ..@ ringDir: int 1 ##  .. .. .. .. .. .. ..@ coords : num [1:164, 1:2] 1765898 1765898 1765897
1765897 1765897 ...
##  .. .. .. ..@ plotOrder: int 1
##  .. .. .. ..@ labpt    : num [1:2] 1765872 -3834217
##  .. .. .. ..@ ID       : chr "0"
##  .. .. .. ..@ area     : num 1200
##  .. ..$ :Formal class 'Polygons' [package "sp"] with 5 slots  ## .. .. .. ..@ Polygons :List of 1  ## .. .. .. .. ..$ :Formal class 'Polygon' [package "sp"] with 5 slots ##  .. .. .. .. .. .. ..@ labpt  : num [1:2] 1765908 -3834550
##  .. .. .. .. .. .. ..@ area   : num 1572
##  .. .. .. .. .. .. ..@ hole   : logi FALSE
##  .. .. .. .. .. .. ..@ ringDir: int 1 ##  .. .. .. .. .. .. ..@ coords : num [1:221, 1:2] 1765883 1765882 1765882
1765882 1765882 ...
##  .. .. .. ..@ plotOrder: int 1
##  .. .. .. ..@ labpt    : num [1:2] 1765908 -3834550
##  .. .. .. ..@ ID       : chr "1"
##  .. .. .. ..@ area     : num 1572
##  .. ..$ :Formal class 'Polygons' [package "sp"] with 5 slots ##  .. .. .. ..@ Polygons :List of 1 ##  .. .. .. .. ..$ :Formal class 'Polygon' [package "sp"] with 5 slots ##  .. .. .. .. .. .. ..@ labpt  : num [1:2] 1765672 -3834729
##  .. .. .. .. .. .. ..@ area   : num 3334
##  .. .. .. .. .. .. ..@ hole   : logi FALSE
##  .. .. .. .. .. .. ..@ ringDir: int 1  ## .. .. .. .. .. .. ..@ coords : num [1:494, 1:2] 1765498 1765498 1765498
1765498 1765498 ...
##  .. .. .. ..@ plotOrder: int 1
##  .. .. .. ..@ labpt    : num [1:2] 1765672 -3834729
##  .. .. .. ..@ ID       : chr "2"
##  .. .. .. ..@ area     : num 3334
## .. .. [list output truncated]
##  ..@ plotOrder  : int [1:150] 78 55 62 48 69 5 56 3 67 44 ...
##  ..@ bbox       : num [1:2, 1:2] 1764709 -3835506 1766254 -3833973
##  .. ..- attr(*, "dimnames")=List of 2 ##  .. .. ..$ : chr [1:2] "x" "y"
##  .. .. ..$ : chr [1:2] "min" "max"
##  ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots ##  .. .. ..@ projargs: chr "+proj=aea +lat_1=-18 +lat_2=-36 +lat_0=0
+lon_0=134 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m 
+no_defs"


 
 class(BCARshp)
##[1] "SpatialPolygonsDataFrame"
##attr(,"package")
##[1] "sp"

## starting with just fish ID 1

fish1 <- data1[data1$ID == 1, 5]

str(fish1)
## int [1:8185] 608 608 608 608 508 608 608 608 606 606 ...


d <- as.data.frame(fish1)

myfun <- function(d, k) {

BCARfish <- BCARshp[BCARshp$RecDepth == d[k,],] 

fish <- spsample(BCARfish, n = 1, type = "random", proj4string = PROJECTION, iter= 10)

 xco <- fish at coords[[1]]
 yco<- fish at coords[[2]]

xy <- cbind(xco, yco)

return(xy)
}

fishdet <- rep(0, nrow(d))

for (j in 1:length(fishdet)) fishdet[j] <- myfun(d, j)

## ERROR I'M RECEIVING

Error in if (is.numeric(i) && i < 0) { : 
  missing value where TRUE/FALSE needed
In addition: There were 27 warnings (use warnings() to see them)


z <- as.matrix(d)
  
m <- dimnames(z)
  
l <-list(m[[1]], xy)

write.csv(l, file = paste("fish1_randpoint_test.csv"), row.names = F)

traceback()
12: stop("arguments imply differing number of rows: ", paste(unique(nrows), 
        collapse = ", "))
11: data.frame(NULL, c(1765491.27849468, -3834819.10145441), check.names = FALSE, 
        stringsAsFactors = TRUE)
10: eval(expr, envir, enclos)
9: eval(as.call(c(expression(data.frame), x, check.names = !optional, 
       stringsAsFactors = stringsAsFactors)))
8: as.data.frame.list(x[[i]], optional = TRUE, stringsAsFactors =
stringsAsFactors)
7: as.data.frame(x[[i]], optional = TRUE, stringsAsFactors =
stringsAsFactors)
6: data.frame(x)
5: write.table(l, file = paste("fish1_randpoint_test.csv"), row.names = F, 
       col.names = TRUE, sep = ",", dec = ".", qmethod = "double")
4: eval(expr, envir, enclos)
3: eval(expr, p)
2: eval.parent(Call)
1: write.csv(l, file = paste("fish1_randpoint_test.csv"), row.names = F)




#### When I ran the following as a tester it worked ok


 BCARfish608 <- BCARshp[BCARshp$RecDepth == 608,]
 fish608 <- spsample(BCARfish608, n = 10, type = "stratified", proj4string =
PROJECTION)
 x_3 <- fish608 at coords[[1]]
 y_3 <- fish608 at coords[[2]]
 xy3 <- cbind(x_3, y_3)

 BCARfish426 <- BCARshp[BCARshp$RecDepth == 426,]
fish426 <- spsample(BCARfish426, n = 10, type = "stratified", proj4string =
PROJECTION)
 x_4 <- fish426 at coords[[1]]
y_4 <- fish426 at coords[[2]]
 xy4 <- cbind(x_4, y_4)

 BCARfish408 <- BCARshp[BCARshp$RecDepth == 408,]
 fish408 <- spsample(BCARfish408, n = 10, type = "stratified", proj4string =
PROJECTION)
 x_5 <- fish408 at coords[[1]]
 y_5 <- fish408 at coords[[2]]
 xy5 <- cbind(x_5, y_5)

fish <- rbind(xy1, xy2, xy3, xy4, xy5)


### the code for my home-range analysis would then be (this normally works
fine)

H.s <- Hpi(xy, binned = TRUE)
    
KDE <- kde(xy, H=H.s, binned = TRUE)
     
cont <- contourSizes(KDE, cont = c(95), approx = TRUE)
    
return(cont)
  

## plot of shapefile is attached
plot(BCARshp)

<http://r-sig-geo.2731867.n2.nabble.com/file/n7582766/BCARshp_plot.png> 

 
  




--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/spsample-random-sampling-a-subset-of-polygons-based-on-a-variable-from-a-different-dataframe-tp7582766.html
Sent from the R-sig-geo mailing list archive at Nabble.com.

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From apcar at deakin.edu.au  Wed Feb 27 07:07:33 2013
From: apcar at deakin.edu.au (Adam)
Date: Tue, 26 Feb 2013 22:07:33 -0800 (PST)
Subject: [R-sig-Geo] Confusing raster file? GDA94 aus albers...
Message-ID: <1361945253747-7582828.post@n2.nabble.com>

G'day,

I have a raster file ( Landuse for Australia
<http://adl.brs.gov.au/anrdl/metadata_files/pa_luausr9abll07611a00.xml>  )
with projection GDA94 Australian Albers (EPSG:3577).

class       : RasterLayer 
dimensions  : 76740, 80200, 6154548000  (nrow, ncol, ncell)
resolution  : 50, 50  (x, y)
extent      : -1888000, 2122000, -4847000, -1010000  (xmin, xmax, ymin,
ymax)
coord. ref. : +proj=aea +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=132 +x_0=0
+y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs 
data source : C:\Users\Adam\Documents\Spatial
data\enviro_layers\Aus_data\Aus_Landuse\luausr9abll07612b00egialb132\clumfill_0310\dblbnd.adf 
names       : dblbnd 
values      : 100, 663  (min, max)  
attributes  : (there are a few, I have left them out)


When I try to projectRaster() to a different projection (normal GDA94,
EPSG:4283) it either takes a very long time or isn't working (I stopped it
after an hour or so) because it is relatively big. So I tried to crop to a
smaller extent, but I only know my extents in lat/lon values and it came up
with the error : Objects do not overlap. Also, my spatial points dont
overlap with it either, I'm just wondering where this raster is saying it
is?

I would like to know if anyone can help me to change this object to
something in lat/lon (extent and resolution) so I am more familiar with it.
Also, is this raster really over Australia, I am thrown off by the extent. 

Thanks in advance for your help, and sorry for what I believe is probably
something very obvious that I am missing. 

Regards,
Adam 





--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Confusing-raster-file-GDA94-aus-albers-tp7582828.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From r.hijmans at gmail.com  Wed Feb 27 07:43:52 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 26 Feb 2013 22:43:52 -0800
Subject: [R-sig-Geo] Confusing raster file? GDA94 aus albers...
In-Reply-To: <1361945253747-7582828.post@n2.nabble.com>
References: <1361945253747-7582828.post@n2.nabble.com>
Message-ID: <CANtt_hwN2hK0rba_Py7mOV8M5AqpMCVk=M8g+GG5hgRgdK3mZg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130226/65e96f59/attachment.pl>

From r.hijmans at gmail.com  Wed Feb 27 08:07:31 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 26 Feb 2013 23:07:31 -0800
Subject: [R-sig-Geo] z and p-values for Moran Local raster map
In-Reply-To: <1361912508.32513.YahooMailNeo@web142502.mail.bf1.yahoo.com>
References: <1361912508.32513.YahooMailNeo@web142502.mail.bf1.yahoo.com>
Message-ID: <CANtt_hyCGrWQ73uh2uGG_1iRy21Uhm2bLZ+4WdYFngBM5CgC8w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130226/070bc5c0/attachment.pl>

From potts.a at gmail.com  Wed Feb 27 10:24:55 2013
From: potts.a at gmail.com (Alastair Potts)
Date: Wed, 27 Feb 2013 11:24:55 +0200
Subject: [R-sig-Geo] Legend problem with levelplot and categorical rasters
Message-ID: <CAG_8N1YaOW2VyXhm_UBJfJFF74CbGD_NhGf=LaEsYpzyRCgXWg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130227/ebf88c26/attachment.pl>

From apcar at deakin.edu.au  Wed Feb 27 10:34:00 2013
From: apcar at deakin.edu.au (Adam)
Date: Wed, 27 Feb 2013 01:34:00 -0800 (PST)
Subject: [R-sig-Geo] Confusing raster file? GDA94 aus albers...
In-Reply-To: <CANtt_hwN2hK0rba_Py7mOV8M5AqpMCVk=M8g+GG5hgRgdK3mZg@mail.gmail.com>
References: <1361945253747-7582828.post@n2.nabble.com>
	<CANtt_hwN2hK0rba_Py7mOV8M5AqpMCVk=M8g+GG5hgRgdK3mZg@mail.gmail.com>
Message-ID: <1361957640084-7582832.post@n2.nabble.com>

Thanks Robert,

That has work a treat! I really like the trick to show where the projection
is by using wrld_simpl; that will come in handy in the future. Thank you
very much for your help.

Regards,
Adam



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Confusing-raster-file-GDA94-aus-albers-tp7582828p7582832.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From oscar.perpinan at gmail.com  Wed Feb 27 11:09:32 2013
From: oscar.perpinan at gmail.com (Oscar =?utf-8?B?UGVycGnDscOhbg==?= Lamigueiro)
Date: Wed, 27 Feb 2013 11:09:32 +0100
Subject: [R-sig-Geo] Legend problem with levelplot and categorical
	rasters
In-Reply-To: <CAG_8N1YaOW2VyXhm_UBJfJFF74CbGD_NhGf=LaEsYpzyRCgXWg@mail.gmail.com>
References: <CAG_8N1YaOW2VyXhm_UBJfJFF74CbGD_NhGf=LaEsYpzyRCgXWg@mail.gmail.com>
Message-ID: <87621eukyr.fsf@gmail.com>

Hello,

This is a bug in rasterVis::levelplot. The ticks locations of the legend are incorrectly
calculated. I will try to fix it as soon as possible.

Best,

Oscar.
Alastair Potts <potts.a at gmail.com> writes:

> Good day all,
>
> I can't seem to wrap my head around why this is not working. Below are two
> examples of plotting a categorical raster. The first has a continuous
> series of integers (i.e. 1,2,3) whereas the second has breaks (i.e. 1,3,5).
> The legend in the second levelplot example is incorrect as it seems to be
> expecting a continuous series. I have very good reasons to have a broken
> series and would very much like to have to avoid recoding the to a
> continuous series.
>
> Any suggestions would be greatly appreciated. Thanks in advance.
>
> Examples below.
>
> ## Example 1
> library(raster)
> library(rasterVis)
> ## Categorical data
> r <- raster(nrow=10, ncol=10)
> r[] = 1
> r[51:100] = 2
> r[3:6, 1:5] = 3
> r <- ratify(r)
>
> rat <- levels(r)[[1]]
> rat$landcover <- c('Pine', 'Oak', 'Meadow')
> levels(r) <- rat
> r
> levelplot(r, col.regions=c('palegreen', 'midnightblue', 'indianred1'))
>
> ## Example 2
> ## Categorical data
> r <- raster(nrow=10, ncol=10)
> r[] = 1
> r[51:100] = 3
> r[3:6, 1:5] = 5
> r <- ratify(r)
>
> rat <- levels(r)[[1]]
> rat$landcover <- c('Pine', 'Oak', 'Meadow')
> levels(r) <- rat
> r
> levelplot(r, col.regions=c('palegreen', 'midnightblue', 'indianred1'))


-- 
Oscar Perpi??n Lamigueiro
Grupo de Sistemas Fotovoltaicos (IES-UPM)
Dpto. Ingenier?a El?ctrica (EUITI-UPM)
URL: http://procomun.wordpress.com
Twitter: @oscarperpinan


From Sophie.MONSARRAT at cefe.cnrs.fr  Wed Feb 27 14:45:58 2013
From: Sophie.MONSARRAT at cefe.cnrs.fr (Sophie MONSARRAT)
Date: Wed, 27 Feb 2013 14:45:58 +0100
Subject: [R-sig-Geo] Center a raster on the Pacific in a plot
Message-ID: <27E8F74BDE503149AD9768BCBEC0BECF34F18F54B6@ZZMAIL.newcefe.newage.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130227/a78e22d0/attachment.pl>

From alexandre.castagna at gmail.com  Wed Feb 27 15:56:19 2013
From: alexandre.castagna at gmail.com (Alexandre Castagna)
Date: Wed, 27 Feb 2013 11:56:19 -0300
Subject: [R-sig-Geo] Center a raster on the Pacific in a plot
In-Reply-To: <27E8F74BDE503149AD9768BCBEC0BECF34F18F54B6@ZZMAIL.newcefe.newage.fr>
References: <27E8F74BDE503149AD9768BCBEC0BECF34F18F54B6@ZZMAIL.newcefe.newage.fr>
Message-ID: <CAFiuohLcs7NjS5z5pBQj_Tot=m7zNCXc2bQ9N21bV243vjcG1Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130227/977900c9/attachment.pl>

From landis at isciences.com  Wed Feb 27 16:50:17 2013
From: landis at isciences.com (Matt Landis)
Date: Wed, 27 Feb 2013 10:50:17 -0500
Subject: [R-sig-Geo] Center a raster on the Pacific in a plot
In-Reply-To: <CAFiuohLcs7NjS5z5pBQj_Tot=m7zNCXc2bQ9N21bV243vjcG1Q@mail.gmail.com>
References: <27E8F74BDE503149AD9768BCBEC0BECF34F18F54B6@ZZMAIL.newcefe.newage.fr>
	<CAFiuohLcs7NjS5z5pBQj_Tot=m7zNCXc2bQ9N21bV243vjcG1Q@mail.gmail.com>
Message-ID: <CAE-RneLBTtcNyQaMDTtb0VTYpg74ed2z9s-RbgeVyB1zxdDyoA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130227/774929ff/attachment.pl>

From r.hijmans at gmail.com  Wed Feb 27 17:57:11 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 27 Feb 2013 08:57:11 -0800
Subject: [R-sig-Geo] Center a raster on the Pacific in a plot
In-Reply-To: <27E8F74BDE503149AD9768BCBEC0BECF34F18F54B6@ZZMAIL.newcefe.newage.fr>
References: <27E8F74BDE503149AD9768BCBEC0BECF34F18F54B6@ZZMAIL.newcefe.newage.fr>
Message-ID: <CANtt_hywRQPQZ1FjrChScEocNo=2hfSD9MRDXMLaoVko+zB+RA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130227/65a5351a/attachment.pl>

From allenaven at gmail.com  Wed Feb 27 18:56:20 2013
From: allenaven at gmail.com (Allen Aven)
Date: Wed, 27 Feb 2013 11:56:20 -0600
Subject: [R-sig-Geo] KDE in Geospatial Modelling Environment
Message-ID: <CADwQ1vr89H5b__g-b7Z4U1_3qUxudZ=42Af4Y0nPuGQMRc+3RA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130227/638d0c13/attachment.pl>

From laura_mendenhall at fws.gov  Wed Feb 27 19:02:25 2013
From: laura_mendenhall at fws.gov (Mendenhall, Laura)
Date: Wed, 27 Feb 2013 10:02:25 -0800
Subject: [R-sig-Geo] KDE in Geospatial Modelling Environment
In-Reply-To: <CADwQ1vr89H5b__g-b7Z4U1_3qUxudZ=42Af4Y0nPuGQMRc+3RA@mail.gmail.com>
References: <CADwQ1vr89H5b__g-b7Z4U1_3qUxudZ=42Af4Y0nPuGQMRc+3RA@mail.gmail.com>
Message-ID: <CAOU_ypoSTziJVfyZ1LEi0Ky-txmAp8zmoHdtG0Tw9JU=5Pq7sg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130227/1c3632b6/attachment.pl>

From allenaven at gmail.com  Wed Feb 27 19:16:10 2013
From: allenaven at gmail.com (Allen Aven)
Date: Wed, 27 Feb 2013 12:16:10 -0600
Subject: [R-sig-Geo] create point density raster OR other ways to thin
 point data
Message-ID: <CADwQ1vqy_u8awcODcZKTQ9UqsQWSxcmruNDHm4yJPE+Hg0W=CQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130227/5a09c502/attachment.pl>

From rossahmed at googlemail.com  Wed Feb 27 20:23:27 2013
From: rossahmed at googlemail.com (Ross Ahmed)
Date: Wed, 27 Feb 2013 19:23:27 +0000
Subject: [R-sig-Geo] drawPoly()
Message-ID: <CD540DAF.3EE3%rossahmed@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130227/45f673cb/attachment.pl>

From kathryn.lee1 at students.mq.edu.au  Wed Feb 27 23:07:01 2013
From: kathryn.lee1 at students.mq.edu.au (KATHRYN LEE)
Date: Thu, 28 Feb 2013 09:07:01 +1100
Subject: [R-sig-Geo] spsample random sampling a subset of polygons based
 on a variable from a different dataframe
In-Reply-To: <84B4751733167E41A8156E63A69C1C3A120685@uqexmdb4.soe.uq.edu.au>
References: <1361759883275-7582766.post@n2.nabble.com>
	<84B4751733167E41A8156E63A69C1C3A120685@uqexmdb4.soe.uq.edu.au>
Message-ID: <CA+0eFhbPOZ9=9fMmsW1MFqakaHyrTWV6qA6KM4mtXqmLRrz82g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130228/0a95ccbd/attachment.pl>

From r.hijmans at gmail.com  Thu Feb 28 00:18:46 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 27 Feb 2013 15:18:46 -0800
Subject: [R-sig-Geo] drawPoly()
In-Reply-To: <CD540DAF.3EE3%rossahmed@gmail.com>
References: <CD540DAF.3EE3%rossahmed@gmail.com>
Message-ID: <CANtt_hyRvopjSxG4qcdWsQMj=AqWUAfzgsUAa8P7bEYnUC5gLw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130227/91b0a02e/attachment.pl>

From lily_franknich at yahoo.com  Thu Feb 28 04:30:22 2013
From: lily_franknich at yahoo.com (Lilis Husna)
Date: Thu, 28 Feb 2013 11:30:22 +0800 (SGT)
Subject: [R-sig-Geo] save output to excel;
In-Reply-To: <512D8B6A.3070007@ymail.com>
References: <1357538992.89272.YahooMailNeo@web192906.mail.sg3.yahoo.com>
	<1361938357.26767.YahooMailNeo@web192901.mail.sg3.yahoo.com>
	<512D8B6A.3070007@ymail.com>
Message-ID: <1362022222.83016.YahooMailNeo@web192906.mail.sg3.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130228/954a10f8/attachment.pl>

From HodgessE at uhd.edu  Thu Feb 28 06:23:12 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Thu, 28 Feb 2013 05:23:12 +0000
Subject: [R-sig-Geo] save output to excel;
In-Reply-To: <1362022222.83016.YahooMailNeo@web192906.mail.sg3.yahoo.com>
References: <1357538992.89272.YahooMailNeo@web192906.mail.sg3.yahoo.com>
	<1361938357.26767.YahooMailNeo@web192901.mail.sg3.yahoo.com>
	<512D8B6A.3070007@ymail.com>,
	<1362022222.83016.YahooMailNeo@web192906.mail.sg3.yahoo.com>
Message-ID: <FF9DB805FC41CC4E95825A50F68063021292CFB6@challenger.uhd.campus>

What kind of output, please?
________________________________________
From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Lilis Husna [lily_franknich at yahoo.com]
Sent: Wednesday, February 27, 2013 9:30 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] save output to excel;

How to save R Output into Ms.Excel ?


Best Regards,
Lilis Nurul Husna
Institute of Statistics

Jakarta



________________________________
        [[alternative HTML version deleted]]



From milansharma2012 at yahoo.com  Thu Feb 28 16:06:49 2013
From: milansharma2012 at yahoo.com (Milan Sharma)
Date: Thu, 28 Feb 2013 07:06:49 -0800 (PST)
Subject: [R-sig-Geo] save output to excel;
In-Reply-To: <FF9DB805FC41CC4E95825A50F68063021292CFB6@challenger.uhd.campus>
References: <1357538992.89272.YahooMailNeo@web192906.mail.sg3.yahoo.com>
	<1361938357.26767.YahooMailNeo@web192901.mail.sg3.yahoo.com>
	<512D8B6A.3070007@ymail.com>,
	<1362022222.83016.YahooMailNeo@web192906.mail.sg3.yahoo.com>
	<FF9DB805FC41CC4E95825A50F68063021292CFB6@challenger.uhd.campus>
Message-ID: <1362064009.93131.YahooMailNeo@web162105.mail.bf1.yahoo.com>

An output of data.frame form can be exported using "write.csv()"or "write.table"....
Milan


----- Original Message -----
From: "Hodgess, Erin" <HodgessE at uhd.edu>
To: Lilis Husna <lily_franknich at yahoo.com>; "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
Cc: 
Sent: Wednesday, February 27, 2013 11:23 PM
Subject: Re: [R-sig-Geo] save output to excel;

What kind of output, please?
________________________________________
From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Lilis Husna [lily_franknich at yahoo.com]
Sent: Wednesday, February 27, 2013 9:30 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] save output to excel;

How to save R Output into Ms.Excel ?


Best Regards,
Lilis Nurul Husna
Institute of Statistics

Jakarta



________________________________
? ? ? ? [[alternative HTML version deleted]]


_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From juantomas.sayago at gmail.com  Thu Feb 28 16:23:38 2013
From: juantomas.sayago at gmail.com (Juan Tomas Sayago Gomez)
Date: Thu, 28 Feb 2013 10:23:38 -0500
Subject: [R-sig-Geo] save output to excel;
In-Reply-To: <1362064009.93131.YahooMailNeo@web162105.mail.bf1.yahoo.com>
References: <1357538992.89272.YahooMailNeo@web192906.mail.sg3.yahoo.com>
	<1361938357.26767.YahooMailNeo@web192901.mail.sg3.yahoo.com>
	<512D8B6A.3070007@ymail.com>
	<1362022222.83016.YahooMailNeo@web192906.mail.sg3.yahoo.com>
	<FF9DB805FC41CC4E95825A50F68063021292CFB6@challenger.uhd.campus>
	<1362064009.93131.YahooMailNeo@web162105.mail.bf1.yahoo.com>
Message-ID: <CAEOXpNArT4_sSsRJJP+rcjdOUGHroefu4cmbm_p9Vqag=rtOZQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130228/1d61fca8/attachment.pl>

From rossahmed at googlemail.com  Thu Feb 28 18:03:36 2013
From: rossahmed at googlemail.com (Ross Ahmed)
Date: Thu, 28 Feb 2013 17:03:36 +0000
Subject: [R-sig-Geo] plot raster over google map
Message-ID: <CD553E68.3EFE%rossahmed@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130228/956bbd29/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Thu Feb 28 18:52:06 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Thu, 28 Feb 2013 17:52:06 +0000
Subject: [R-sig-Geo] plot raster over google map
In-Reply-To: <742acbdcafb24257b268045d6211151e@EX-1-HT0.lancs.local>
References: <742acbdcafb24257b268045d6211151e@EX-1-HT0.lancs.local>
Message-ID: <CANVKczOy0hgDd1847WGiZADvQrXN8Ux5E8gSGp2tm2tyxJ395A@mail.gmail.com>

On Thu, Feb 28, 2013 at 5:03 PM, Ross Ahmed <rossahmed at googlemail.com> wrote:
> I've downloaded the following google map:
>
> library(raster)
> myExtent <- matrix(c(-1.87710, -1.772096, 55.61399, 55.682171), ncol=2,
> byrow=T)
> g <- gmap(myExtent, type='hybrid')
> plot(g, interpolate=T)
>
> I'm trying to plot the raster over the google map:
>
> rownames(myExtent) <- c('long', 'lat')
> colnames(myExtent) <- c('min', 'max')
> rasterExtent <- extent(myExtent)
> myRaster   <- raster(ext=rasterExtent,crs="+proj=merc +a=6378137 +b=6378137
> +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null
> +no_defs")
> values(myRaster) <- rnorm(ncell(myRaster))

 You've created a raster with an extent in lat-long coordinates, but
assigned it a very non lat-long projection CRS.

 gmap has done a couple of things, it has got the google map for the
lat-long extent you requested, but returned a raster in google's CRS.
It's not a lat-long grid.

 > extent(g)
class       : Extent
xmin        : -213661.6
xmax        : -192526.8
ymin        : 7476426
ymax        : 7500886

 > extent(myExtent)
class       : Extent
xmin        : -1.8771
xmax        : -1.772096
ymin        : 55.61399
ymax        : 55.68217


> plot(myRaster, add=T, alpha=0.5)
>
> However, there's no sign of the raster in the plot. I presume theres a
> projection issue here. How can I get the raster to plot over the top of the
> google map?

 You need to stop lying to your raster, and tell it it really is a
raster in lat-long, then project it to the google map CRS:

 > projection(myRaster)="+init=epsg:4326"  # lat-long WGS84
 > pRaster =projectRaster(myRaster, crs=projection(g)) # reproject to
the google CRS (no need to type it all in again)
 > plot(pRaster,add=TRUE) # shazam

Barry


From rossahmed at googlemail.com  Thu Feb 28 19:22:04 2013
From: rossahmed at googlemail.com (Ross Ahmed)
Date: Thu, 28 Feb 2013 18:22:04 +0000
Subject: [R-sig-Geo] plot raster over google map
In-Reply-To: <CANVKczOy0hgDd1847WGiZADvQrXN8Ux5E8gSGp2tm2tyxJ395A@mail.gmail.com>
Message-ID: <CD5550C0.3F02%rossahmed@gmail.com>

Brilliant, thanks


On 28/02/2013 17:52, "Barry Rowlingson" <b.rowlingson at lancaster.ac.uk>
wrote:

>> projection(myRaster)="+init=epsg:4326"  # lat-long WGS84
>> pRaster =projectRaster(myRaster, crs=projection(g)) # reproject to
>the google CRS (no need to type it all in again)
>> plot(pRaster,add=TRUE) # shazam


From rossahmed at googlemail.com  Thu Feb 28 19:26:22 2013
From: rossahmed at googlemail.com (Ross Ahmed)
Date: Thu, 28 Feb 2013 18:26:22 +0000
Subject: [R-sig-Geo] British national grid to long lat
Message-ID: <CD5551CD.3F05%rossahmed@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130228/f2db9c11/attachment.pl>

From milansharma2012 at yahoo.com  Thu Feb 28 19:23:57 2013
From: milansharma2012 at yahoo.com (Milan Sharma)
Date: Thu, 28 Feb 2013 10:23:57 -0800 (PST)
Subject: [R-sig-Geo] Mixed model for spatial data
Message-ID: <1362075837.9659.YahooMailNeo@web162103.mail.bf1.yahoo.com>

Hi all,
as of now, I have been fitting mixed models for longitudinal data (measurements repeated over time). I have spatial data (ID, response, predictors, longitude, latitude). Generally mixed model?in R?uses something like?:?? (1|Subject) in the argument.
Now, my question is how do I take care of (1|Subject) stuff?
Bivand et al. has given an example in page 288, (1|Areakey).
Any help?
Milan


From jasoneg at med.umich.edu  Thu Feb 28 19:59:04 2013
From: jasoneg at med.umich.edu (Goldstick, Jason)
Date: Thu, 28 Feb 2013 18:59:04 +0000
Subject: [R-sig-Geo] R package "spatstat": Getting standard errors for
 coefficients when use.gam=TRUE
Message-ID: <58FFDAD9E468FB4686E483A14C9FFD9F1B985BE5@UHEXMBSPR04.umhs.med.umich.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130228/55b0bc19/attachment.pl>

From r.hijmans at gmail.com  Thu Feb 28 20:03:58 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 28 Feb 2013 11:03:58 -0800
Subject: [R-sig-Geo] plot raster over google map
In-Reply-To: <CD5550C0.3F02%rossahmed@gmail.com>
References: <CANVKczOy0hgDd1847WGiZADvQrXN8Ux5E8gSGp2tm2tyxJ395A@mail.gmail.com>
	<CD5550C0.3F02%rossahmed@gmail.com>
Message-ID: <CANtt_hze6TwfMnfE3bzncC2d2bNwKhFMLb6U+=Va2kFrRgq5sg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130228/d9123189/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Thu Feb 28 20:29:57 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Thu, 28 Feb 2013 19:29:57 +0000
Subject: [R-sig-Geo] British national grid to long lat
In-Reply-To: <bb59d6c26cea49daa929276695686385@EX-0-HT0.lancs.local>
References: <bb59d6c26cea49daa929276695686385@EX-0-HT0.lancs.local>
Message-ID: <CANVKczMEYLj5Aa839-9hg-gd5Q6b6ZOsz6dRnnO+wcM1ABjU1w@mail.gmail.com>

On Thu, Feb 28, 2013 at 6:26 PM, Ross Ahmed <rossahmed at googlemail.com> wrote:
> This might well be an FAQ, so apologies, but I couldnt find an answer
> through googling.
>
> I have the following OS grid references, which are from the British national
> grid system: http://en.wikipedia.org/wiki/Ordnance_Survey_National_Grid
>
> gridRefs <- c('NU13366133','NU13366808','NU13369308','NU14361713')
>
> How can I convert these to lat-long WGS84?
>

The grid square gets you 100km resolution, the the first four numbers
are x coordinate in 10m steps and the second four numbers are y coords
in 10m steps...

You have to lookup the grid square offset from the map of grid square.
For NU, thats 4 along and 6 up.

 For your example, extract the coordinates thus:

 > x=as.numeric(substr(gridRefs,3,6))
 > y=as.numeric(substr(gridRefs,7,10))

then create a spatial data frame with the coordinates. We multiply
your four-figures to get metres, and add the X and Y grid offset (also
in metres)

 > xy = data.frame(x=400000+x*10,y=600000+y*10)
 > coordinates(xy)=~x+y
 > proj4string(xy)=CRS("+init=epsg:27700")

 - this is the epsg code for OSgrid references in metres. To convert
to lat-long WGS84 coords:

 > spTransform(xy,CRS("+init=epsg:4326"))
SpatialPoints:
             x        y
[1,] -1.788218 55.84500
[2,] -1.787888 55.90565
[3,] -1.786655 56.13026
[4,] -1.774539 55.44783
Coordinate Reference System (CRS) arguments: +init=epsg:4326
+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0

 Check the points are where you expect them to be.

 If you have more than one grid square, you can extract that with
substr and compute or lookup the correct x and y offsets.

 You need the sp and rgdal packages for all this.

Barry


From lucasantini85 at hotmail.com  Thu Feb 28 20:47:09 2013
From: lucasantini85 at hotmail.com (Luca)
Date: Thu, 28 Feb 2013 20:47:09 +0100
Subject: [R-sig-Geo] geodesic distance calculation
Message-ID: <BLU0-SMTP33B2FA570097DB6664F105BFFE0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130228/4aa3ba28/attachment.pl>

From rossahmed at googlemail.com  Thu Feb 28 21:29:31 2013
From: rossahmed at googlemail.com (Ross Ahmed)
Date: Thu, 28 Feb 2013 20:29:31 +0000
Subject: [R-sig-Geo] plot raster over google map
In-Reply-To: <CANtt_hze6TwfMnfE3bzncC2d2bNwKhFMLb6U+=Va2kFrRgq5sg@mail.gmail.com>
Message-ID: <CD556DCD.3F09%rossahmed@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130228/677ad5bf/attachment.pl>

From aniru123 at gmail.com  Thu Feb 28 21:25:05 2013
From: aniru123 at gmail.com (aniruddha ghosh)
Date: Fri, 1 Mar 2013 01:55:05 +0530
Subject: [R-sig-Geo] arithmetic with layers from a raster stack/brick
Message-ID: <CAAFmNktBUGL_c5njuiDX1vVvBbTKLYSO6GTK0wjYZ6D04jPR_A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130301/335654c0/attachment.pl>

From matteo.mattiuzzi at boku.ac.at  Thu Feb 28 21:43:10 2013
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Thu, 28 Feb 2013 21:43:10 +0100
Subject: [R-sig-Geo] Antw: arithmetic with layers from a raster stack/brick
Message-ID: <512FCF700200002700018AA9@gwia2.boku.ac.at>

Dear Ani,


Your "a" and "b" are not objects, they are the name the layers in your object "s". So you can't treat it that way.


Maybe this is what you want?


require(raster)
r<- raster(nrows=2, ncols=2)
r[]<-1:ncell(r)
s<-stack(r,r)
names(s)<-c("a","b")



r1<- s[["a"]] + s[["b"]]


Matteo 

>>> aniruddha ghosh  28.02.13 21.26 Uhr >>>
Dear List,

I'm trying to perform some arithmetic operation with layers of a raster
object. What I'm trying is

>require(raster)
>r<- raster(nrows=2, ncols=2)
>r[]<-1:ncell(r)
>s<-stack(r,r)
>names(s)<-c("a","b")

# now I want to add the layers of the raster "r" using their corresponding
names,i.e. "a" and "b" so that I get

>r1<-a+b

I don't want to use subset (or any other methods) to define "a" or "b".
This may be very trivial, but I couldn't do it.

Any suggestions?

Thanks
-- 
Ani

    [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From berman.jesse at gmail.com  Thu Feb 28 22:20:26 2013
From: berman.jesse at gmail.com (Jesse Berman)
Date: Thu, 28 Feb 2013 13:20:26 -0800 (PST)
Subject: [R-sig-Geo] Large Prediction Variances with gstat
Message-ID: <1362086426948-7582882.post@n2.nabble.com>

Hi All,

First time post, so please excuse any omissions/confusion.  I am performing
a series of prediction models using gstat and discovered that prediction
variance of spatially dependent data with OLS models was larger than those
of kriging models.  This is counter-intuitive to the assumption that
treating spatially dependent data as IID will result in artificially
shrunken prediction variances.  Anyhow, to better understand how gstat
treats OLS predictions, I reproduced an OLS prediction with the base package
('predict' and 'predict.lm') and found that while I got identical beta's, I
got substantially higher variances with gstat.

Can anyone shed some light as to why gstat might be giving these larger
prediction variances when performing an OLS model?  (see reproducible
example below)

Regards and thanks for the help,
Jesse   

library(gstat)
data(meuse)
coordinates(meuse) = ~x+y
meuse.ns<-as.data.frame(meuse) #non-spatial Meuse data

#Data sets for modeling and prediction; spatial and non-spatial
dat.mod<-meuse[1:100,]
dat.pred<-meuse[101:155,]
dat.ns.mod<-meuse.ns[1:100,]
dat.ns.pred<-meuse.ns[101:155,]

#Linear Model Prediction with base package
lm.zn<-lm(log(zinc)~x+y+elev, data=dat.mod)
lm.zn.pred<-predict(lm.zn, dat.pred, se.fit=TRUE)
pred.variance<-(lm.zn.pred$se.fit)^2

#Linear Model Prediction with gstat
gstat.lm.zn.pred<-krige(log(zinc)~x+y+elev, dat.mod, newdata=dat.pred)

#Compare Results
summary(gstat.lm.zn.pred at data) #gstat results
summary(lm.zn.pred$fit)
summary(pred.variance) #base model prediction variance




--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Large-Prediction-Variances-with-gstat-tp7582882.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


