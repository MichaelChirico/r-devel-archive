From Roger.Bivand at nhh.no  Tue Jul  1 00:39:00 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 1 Jul 2008 00:39:00 +0200 (CEST)
Subject: [R-sig-Geo] API documentation?
In-Reply-To: <f5d848060806301039j5609156bj730d78e391e42d57@mail.gmail.com>
References: <f5d848060806300948k61b21090v587ee3f33969d1e0@mail.gmail.com>
	<1214846674.6005.11.camel@fh-vrubio>
	<f5d848060806301039j5609156bj730d78e391e42d57@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0807010026260.12805@reclus.nhh.no>

On Mon, 30 Jun 2008, David Hugh-Jones wrote:

> Guys
>
> I don't mean to rant, but believe me, I've spent plenty of time with
> the documentation and it's really not helping.
>
> Partly this is a problem of R's doc format which treats package
> documentation as an alphabetical list of functions - which gives me no
> idea where to start.

This is an inherent (and perhaps ugly) characteristic of the S4 
object/class structure as you suggest below. New style classes are not as 
well integrated into the documentation as straight functions are. Here, 
coerce is as(), but the issue of how to improve documentation is not 
resolved.

>
> This then interacts badly with the OO structure. For example, look at
> the 20+ pages on "coerce". Hmm, what does "coerce" actually do? In
> fact that's in a whole different library. But I didn't know that, so I
> click on a page at random, say
>
> coerce,SpatialGrid,data.frame-method
>
> and this takes me to SpatialGrid class - which doesn't mention coerce
> at all. (Nor does it tell me what SpatialGrid is, or what it is used
> for.)
>
> On the other hand, maybe I might guess that to get a list of
> coordinates, I'd use "coordinates". So I click on that method, and it
> tells me yes, this "retrieves spatial coordinates". But unfortunately
> it retrieves them hidden inside another object ("an object of class
> SpatialPointsDataFrame"). OK, but how do I get the _actual_data_?
> Maybe the SpatialPointsDataFrame class page will tell me. Nope. Et
> cetera.
>
> Rick: yes, I agree that using the internal data structures is how to
> do things, but this is broken isn't it? The whole point of having OO
> is to be able to use it _without_ understanding the internal data
> structures. The ideal, in other words, would be to have a "thin.lines"
> method that I could just run on any polygon or set of polygons.
> Failing that, then I should be able to get at the internal data
> without hours of head scratching.
>

No, because the underlying understanding of dp and other methods for 
thinning is that the objects implement an arc-node topological model, so 
that each arc can be thinned without different thinning happening on 
otherwise identical boundaries of neighbouring polygons. But we do not 
have an arc-node representation, so there cannot be line thinning for 
polygon boundaries in a spaghetti world.

> Right now, it's like, everything is hidden behind a layer of classes
> and slots and methods, but I still need to go behind that layer to get
> at the actual raw data, and this is so complicated and confusing that
> it would be easier just to work with the raw data.
>

You need to build topology first, so if need be take the data out to a GIS 
that does topology properly, do the arc line thinning there, and bring it 
back in. Building topology from a stream of straight line segments is a 
serious challenge, especially if you want to retain the association with 
attribute data.

Roger

> OK, I'll stop venting. If there's anything I could do to improve this
> situation, I would gladly try.
>
> David Hugh-Jones
> PhD Candidate
> Essex University Department of Government
> http://davidhughjones.googlepages.com
>
>
> 2008/6/30 Virgilio Gomez-Rubio <v.gomezrubio at imperial.ac.uk>:
>> Dear David,
>>
>> Probably the best way to start is by checking the HTML documentation. It
>> should be installed locally but it is also accesible, for example, here:
>>
>> http://finzi.psych.upenn.edu/R/library/sp/html/00Index.html
>>
>> Hope this helps.
>>
>> Virgilio
>>
>> On Mon, 2008-06-30 at 18:48 +0200, David Hugh-Jones wrote:
>>> Thanks David for his comment about dp.
>>>
>>> Quick question: is there any reasonably comprehensible API
>>> documentation for the "sp" package? I have just spent about an hour
>>> trying to get a list of points from a SpatialPolygons object. I
>>> eventually just printed everything out and found the data by hand, so
>>> now I am doing:
>>>
>>> coords <- myobject at polygons[[1]]@Polygons[[1]]@coords
>>>
>>> but I don't assume that is right. Surely there must be some simple way
>>> to get a list of x and y coords out of any object?
>>>
>>> in frustration,
>>> David Hugh-Jones
>>> PhD Candidate
>>> Essex University Department of Government
>>> http://davidhughjones.googlepages.com
>>>
>>>
>>> 2008/6/30 David PINAUD <pinaud at cebc.cnrs.fr>:
>>>> maybe you can try the function dp() in the package "shapefiles", which is an
>>>> implementation of the Douglas-Peucker polyLine simplification algorithm.
>>>> Hope it helps
>>>> David
>>>>
>>>> David Hugh-Jones a ?crit :
>>>>>
>>>>> Hi all
>>>>>
>>>>> I have a big dataset of points and am doing stuff on them that takes a
>>>>> lot of time. To speed it up, I would like to use "thinlines" from
>>>>> RArcinfo, which basically makes the maps "rougher" by throwing away
>>>>> points. Is there an equivalent function for SpatialPolygon type
>>>>> objects? (I assume that there's no way to convert _to_ Arcinfo, though
>>>>> I know it's possible to read from it).
>>>>>
>>>>> Cheers
>>>>>
>>>>> David Hugh-Jones
>>>>> PhD Candidate
>>>>> Essex University Department of Government
>>>>> http://davidhughjones.googlepages.com
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>> --
>>>> ***************************************************
>>>> David PINAUD
>>>> Ing?nieur de Recherche "Analyses spatiales"
>>>>
>>>> Centre d'Etudes Biologiques de Chiz? - CNRS UPR1934
>>>> 79360 Villiers-en-Bois, France poste 485
>>>> Tel: +33 (0)5.49.09.35.58
>>>> Fax: +33 (0)5.49.09.65.26
>>>> http://www.cebc.cnrs.fr/
>>>>
>>>> ***************************************************
>>>>
>>>>
>>>>
>>>>
>>>> ________ Information from NOD32 ________
>>>> This message was checked by NOD32 Antivirus System for Linux Mail Servers.
>>>> http://www.eset.com
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From tomfool at as220.org  Tue Jul  1 04:30:29 2008
From: tomfool at as220.org (tom sgouros)
Date: Mon, 30 Jun 2008 22:30:29 -0400
Subject: [R-sig-Geo] API documentation?
In-Reply-To: <Pine.LNX.4.64.0807010026260.12805@reclus.nhh.no> 
References: <f5d848060806300948k61b21090v587ee3f33969d1e0@mail.gmail.com>
	<1214846674.6005.11.camel@fh-vrubio>
	<f5d848060806301039j5609156bj730d78e391e42d57@mail.gmail.com>
	<Pine.LNX.4.64.0807010026260.12805@reclus.nhh.no>
Message-ID: <14419.1214879429@as220.org>


Roger Bivand <Roger.Bivand at nhh.no> wrote:


> > I don't mean to rant, but believe me, I've spent plenty of time with
> > the documentation and it's really not helping.
> >
> > Partly this is a problem of R's doc format which treats package
> > documentation as an alphabetical list of functions - which gives me no
> > idea where to start.

I would tend to second this.  I've been lurking on the list for a few
months, hoping to learn a bit, but so far without much success, since
the conversation and the documentation are so far above where I am and
what I need.  I am almost familiar with R, using it for time-series
statistics, and learned early on that the Dalgaard book was a better
intro than any of the real R documents.  It doesn't cover nearly
everything, but it seems to cover what I needed, so I use what is
probably a baby-level set of R functions, but it's adequate.  Without a
professor lurking over my shoulder to explain stuff, I am perpetually
slightly lost, because all the documentation assumes I know stuff that I
don't.

I still use R because I know that with enough poking around it will
eventually provide a solution.  But if the alternatives were not very
expensive, I would have given up a while ago.

I joined this group when I wanted to expand into making maps of
geographical economic data, and after a month of working on the problem,
I essentially had to give up for the time being.  I wish there were an
introduction that showed me how to use R with a GIS program, but to my
knowledge, there is not.  I did run across a GRASS book that claimed it
would help, but as I recall, it cost upward of US$100.

To make this more useful than just a rant, I would second David's point.
What is missing is only what David misses: an introduction that says
where to start to deal with simple geographic data, maybe providing a
few examples of common techniques and frequent problems, and pushing
data back and forth to some GIS.  I was not able to find that, and
without it, found the R documentation pretty much useless.  I'd be happy
to know of some source I hadn't found before, so if you have one to
recommend, please do.

 -tom



> 
> This is an inherent (and perhaps ugly) characteristic of the S4
> object/class structure as you suggest below. New style classes are not
> as well integrated into the documentation as straight functions
> are. Here, coerce is as(), but the issue of how to improve
> documentation is not resolved.
> 
> >
> > This then interacts badly with the OO structure. For example, look at
> > the 20+ pages on "coerce". Hmm, what does "coerce" actually do? In
> > fact that's in a whole different library. But I didn't know that, so I
> > click on a page at random, say
> >
> > coerce,SpatialGrid,data.frame-method
> >
> > and this takes me to SpatialGrid class - which doesn't mention coerce
> > at all. (Nor does it tell me what SpatialGrid is, or what it is used
> > for.)
> >
> > On the other hand, maybe I might guess that to get a list of
> > coordinates, I'd use "coordinates". So I click on that method, and it
> > tells me yes, this "retrieves spatial coordinates". But unfortunately
> > it retrieves them hidden inside another object ("an object of class
> > SpatialPointsDataFrame"). OK, but how do I get the _actual_data_?
> > Maybe the SpatialPointsDataFrame class page will tell me. Nope. Et
> > cetera.
> >
> > Rick: yes, I agree that using the internal data structures is how to
> > do things, but this is broken isn't it? The whole point of having OO
> > is to be able to use it _without_ understanding the internal data
> > structures. The ideal, in other words, would be to have a "thin.lines"
> > method that I could just run on any polygon or set of polygons.
> > Failing that, then I should be able to get at the internal data
> > without hours of head scratching.
> >
> 
> No, because the underlying understanding of dp and other methods for
> thinning is that the objects implement an arc-node topological model,
> so that each arc can be thinned without different thinning happening
> on otherwise identical boundaries of neighbouring polygons. But we do
> not have an arc-node representation, so there cannot be line thinning
> for polygon boundaries in a spaghetti world.
> 
> > Right now, it's like, everything is hidden behind a layer of classes
> > and slots and methods, but I still need to go behind that layer to get
> > at the actual raw data, and this is so complicated and confusing that
> > it would be easier just to work with the raw data.
> >
> 
> You need to build topology first, so if need be take the data out to a
> GIS that does topology properly, do the arc line thinning there, and
> bring it back in. Building topology from a stream of straight line
> segments is a serious challenge, especially if you want to retain the
> association with attribute data.
> 
> Roger
> 
> > OK, I'll stop venting. If there's anything I could do to improve this
> > situation, I would gladly try.
> >
> > David Hugh-Jones
> > PhD Candidate
> > Essex University Department of Government
> > http://davidhughjones.googlepages.com
> >
> >
> > 2008/6/30 Virgilio Gomez-Rubio <v.gomezrubio at imperial.ac.uk>:
> >> Dear David,
> >>
> >> Probably the best way to start is by checking the HTML documentation. It
> >> should be installed locally but it is also accesible, for example, here:
> >>
> >> http://finzi.psych.upenn.edu/R/library/sp/html/00Index.html
> >>
> >> Hope this helps.
> >>
> >> Virgilio
> >>
> >> On Mon, 2008-06-30 at 18:48 +0200, David Hugh-Jones wrote:
> >>> Thanks David for his comment about dp.
> >>>
> >>> Quick question: is there any reasonably comprehensible API
> >>> documentation for the "sp" package? I have just spent about an hour
> >>> trying to get a list of points from a SpatialPolygons object. I
> >>> eventually just printed everything out and found the data by hand, so
> >>> now I am doing:
> >>>
> >>> coords <- myobject at polygons[[1]]@Polygons[[1]]@coords
> >>>
> >>> but I don't assume that is right. Surely there must be some simple way
> >>> to get a list of x and y coords out of any object?
> >>>
> >>> in frustration,
> >>> David Hugh-Jones
> >>> PhD Candidate
> >>> Essex University Department of Government
> >>> http://davidhughjones.googlepages.com
> >>>
> >>>
> >>> 2008/6/30 David PINAUD <pinaud at cebc.cnrs.fr>:
> >>>> maybe you can try the function dp() in the package "shapefiles", which is an
> >>>> implementation of the Douglas-Peucker polyLine simplification algorithm.
> >>>> Hope it helps
> >>>> David
> >>>>
> >>>> David Hugh-Jones a ?crit :
> >>>>>
> >>>>> Hi all
> >>>>>
> >>>>> I have a big dataset of points and am doing stuff on them that takes a
> >>>>> lot of time. To speed it up, I would like to use "thinlines" from
> >>>>> RArcinfo, which basically makes the maps "rougher" by throwing away
> >>>>> points. Is there an equivalent function for SpatialPolygon type
> >>>>> objects? (I assume that there's no way to convert _to_ Arcinfo, though
> >>>>> I know it's possible to read from it).
> >>>>>
> >>>>> Cheers
> >>>>>
> >>>>> David Hugh-Jones
> >>>>> PhD Candidate
> >>>>> Essex University Department of Government
> >>>>> http://davidhughjones.googlepages.com
> >>>>>
> >>>>> _______________________________________________
> >>>>> R-sig-Geo mailing list
> >>>>> R-sig-Geo at stat.math.ethz.ch
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>
> >>>> --
> >>>> ***************************************************
> >>>> David PINAUD
> >>>> Ing?nieur de Recherche "Analyses spatiales"
> >>>>
> >>>> Centre d'Etudes Biologiques de Chiz? - CNRS UPR1934
> >>>> 79360 Villiers-en-Bois, France poste 485
> >>>> Tel: +33 (0)5.49.09.35.58
> >>>> Fax: +33 (0)5.49.09.65.26
> >>>> http://www.cebc.cnrs.fr/
> >>>>
> >>>> ***************************************************
> >>>>
> >>>>
> >>>>
> >>>>
> >>>> ________ Information from NOD32 ________
> >>>> This message was checked by NOD32 Antivirus System for Linux Mail Servers.
> >>>> http://www.eset.com
> >>>
> >>> _______________________________________________
> >>> R-sig-Geo mailing list
> >>> R-sig-Geo at stat.math.ethz.ch
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>
> >>
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at stat.math.ethz.ch
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> 
> -- 
> Roger Bivand
> Economic Geography Section, Department of Economics, Norwegian School of
> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
 ------------------------
 tomfool at as220 dot org
 http://sgouros.com  
 http://whatcheer.net



From Roger.Bivand at nhh.no  Tue Jul  1 08:51:41 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 1 Jul 2008 08:51:41 +0200 (CEST)
Subject: [R-sig-Geo] API documentation?
In-Reply-To: <14419.1214879429@as220.org>
References: <f5d848060806300948k61b21090v587ee3f33969d1e0@mail.gmail.com>
	<1214846674.6005.11.camel@fh-vrubio>
	<f5d848060806301039j5609156bj730d78e391e42d57@mail.gmail.com>
	<Pine.LNX.4.64.0807010026260.12805@reclus.nhh.no>
	<14419.1214879429@as220.org>
Message-ID: <Pine.LNX.4.64.0807010812270.16863@reclus.nhh.no>

On Mon, 30 Jun 2008, tom sgouros wrote:

>
> Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
>
>>> I don't mean to rant, but believe me, I've spent plenty of time with
>>> the documentation and it's really not helping.
>>>
>>> Partly this is a problem of R's doc format which treats package
>>> documentation as an alphabetical list of functions - which gives me no
>>> idea where to start.
>
> I would tend to second this.  I've been lurking on the list for a few
> months, hoping to learn a bit, but so far without much success, since
> the conversation and the documentation are so far above where I am and
> what I need.  I am almost familiar with R, using it for time-series
> statistics, and learned early on that the Dalgaard book was a better
> intro than any of the real R documents.  It doesn't cover nearly
> everything, but it seems to cover what I needed, so I use what is
> probably a baby-level set of R functions, but it's adequate.  Without a
> professor lurking over my shoulder to explain stuff, I am perpetually
> slightly lost, because all the documentation assumes I know stuff that I
> don't.
>
> I still use R because I know that with enough poking around it will
> eventually provide a solution.  But if the alternatives were not very
> expensive, I would have given up a while ago.
>
> I joined this group when I wanted to expand into making maps of
> geographical economic data, and after a month of working on the problem,
> I essentially had to give up for the time being.  I wish there were an
> introduction that showed me how to use R with a GIS program, but to my
> knowledge, there is not.  I did run across a GRASS book that claimed it
> would help, but as I recall, it cost upward of US$100.

I would be happy to link to such a guide from the Spatial Task View, for 
example on the R-Geo site. There are other nice resources, for instance 
Dylan Beaudette's site - one page is:

http://casoilresource.lawr.ucdavis.edu/drupal/node/100

Seen from the developer side, it is hard to know what users see as the 
most useful advice. The courses that have been provided - say like:

http://www.bias-project.org.uk/ASDARcourse/

are rather "developer-view", as indeed the forthcoming "useR" series book 
will be. By "developer-view", I mean attempting to provide information 
both for beginning users and trying to advance along the useR-developeR 
continuum where experience has shown that this may be advisable, even 
though neither desired nor immediately applauded.

A typical immediate response to the courses has been that "all that class 
and coordinate reference system stuff is unnecessary". This seems to hold 
until the participants actually get to do work with their own data, at 
which point having a reference to what is going on is handy. The specific 
difficulty, as teachers often find, is that the initial expectation from 
the user is often not the most fruitful question for helping the user 
to become more self-reliant going forward.

One clear reason for this difficulty is that many different disciplines 
use spatial data, and all of them seem to feel that they know enough for 
their internal purposes, so get frustrated when they encounter barriers 
which are inherent in their perception(s) of spatial data. So listening to 
other disciplines and learning from them can be helpful.

As far as sp classes are concerned, is the R-News note of 2005 too 
outdated to be helpful? Should it be placed more prominiently on the Task 
View page? I would acknowledge that ease of use is not what it could be, 
we are still where time series (and time representation) were in R a 
couple of years ago. However, the sp classes ought to work for many who do 
not need to manipulate the actual coordinates. For working statisticians, 
simple mapping of model residuals is no more than:

library(sp)
library(rgdal)
mydata <- readOGR(dsn="directory", layer="shpfile")
# or:
# library(maptools)
# mydata <- readShapeSpatial("shpfile.shp")
# from release 0.7-14 already submitted to CRAN, now you have to know
# whether your shapefile is point, line or polygons
myobj <- lm(response ~ x1 + x2, data=mydata)
mydata$residuals <- residuals(myobj)
spplot(mydata, "residuals")

where the mydata Spatial*DataFrame behaves as a data.frame. The two-faced 
nature of the Spatial*DataFrame classes is intentional, looking like GIS 
data models for GIS people, and data frames for statisticians. But 
manipulating coordinates is just a good deal more complicated - unless 
you just need subsetting with the "[" methods.

To summarise, contributions of user tips and examples, and links to those 
examples, would be very welcome.

Roger

>
> To make this more useful than just a rant, I would second David's point.
> What is missing is only what David misses: an introduction that says
> where to start to deal with simple geographic data, maybe providing a
> few examples of common techniques and frequent problems, and pushing
> data back and forth to some GIS.  I was not able to find that, and
> without it, found the R documentation pretty much useless.  I'd be happy
> to know of some source I hadn't found before, so if you have one to
> recommend, please do.
>
> -tom
>
>
>
>>
>> This is an inherent (and perhaps ugly) characteristic of the S4
>> object/class structure as you suggest below. New style classes are not
>> as well integrated into the documentation as straight functions
>> are. Here, coerce is as(), but the issue of how to improve
>> documentation is not resolved.
>>
>>>
>>> This then interacts badly with the OO structure. For example, look at
>>> the 20+ pages on "coerce". Hmm, what does "coerce" actually do? In
>>> fact that's in a whole different library. But I didn't know that, so I
>>> click on a page at random, say
>>>
>>> coerce,SpatialGrid,data.frame-method
>>>
>>> and this takes me to SpatialGrid class - which doesn't mention coerce
>>> at all. (Nor does it tell me what SpatialGrid is, or what it is used
>>> for.)
>>>
>>> On the other hand, maybe I might guess that to get a list of
>>> coordinates, I'd use "coordinates". So I click on that method, and it
>>> tells me yes, this "retrieves spatial coordinates". But unfortunately
>>> it retrieves them hidden inside another object ("an object of class
>>> SpatialPointsDataFrame"). OK, but how do I get the _actual_data_?
>>> Maybe the SpatialPointsDataFrame class page will tell me. Nope. Et
>>> cetera.
>>>
>>> Rick: yes, I agree that using the internal data structures is how to
>>> do things, but this is broken isn't it? The whole point of having OO
>>> is to be able to use it _without_ understanding the internal data
>>> structures. The ideal, in other words, would be to have a "thin.lines"
>>> method that I could just run on any polygon or set of polygons.
>>> Failing that, then I should be able to get at the internal data
>>> without hours of head scratching.
>>>
>>
>> No, because the underlying understanding of dp and other methods for
>> thinning is that the objects implement an arc-node topological model,
>> so that each arc can be thinned without different thinning happening
>> on otherwise identical boundaries of neighbouring polygons. But we do
>> not have an arc-node representation, so there cannot be line thinning
>> for polygon boundaries in a spaghetti world.
>>
>>> Right now, it's like, everything is hidden behind a layer of classes
>>> and slots and methods, but I still need to go behind that layer to get
>>> at the actual raw data, and this is so complicated and confusing that
>>> it would be easier just to work with the raw data.
>>>
>>
>> You need to build topology first, so if need be take the data out to a
>> GIS that does topology properly, do the arc line thinning there, and
>> bring it back in. Building topology from a stream of straight line
>> segments is a serious challenge, especially if you want to retain the
>> association with attribute data.
>>
>> Roger
>>
>>> OK, I'll stop venting. If there's anything I could do to improve this
>>> situation, I would gladly try.
>>>
>>> David Hugh-Jones
>>> PhD Candidate
>>> Essex University Department of Government
>>> http://davidhughjones.googlepages.com
>>>
>>>
>>> 2008/6/30 Virgilio Gomez-Rubio <v.gomezrubio at imperial.ac.uk>:
>>>> Dear David,
>>>>
>>>> Probably the best way to start is by checking the HTML documentation. It
>>>> should be installed locally but it is also accesible, for example, here:
>>>>
>>>> http://finzi.psych.upenn.edu/R/library/sp/html/00Index.html
>>>>
>>>> Hope this helps.
>>>>
>>>> Virgilio
>>>>
>>>> On Mon, 2008-06-30 at 18:48 +0200, David Hugh-Jones wrote:
>>>>> Thanks David for his comment about dp.
>>>>>
>>>>> Quick question: is there any reasonably comprehensible API
>>>>> documentation for the "sp" package? I have just spent about an hour
>>>>> trying to get a list of points from a SpatialPolygons object. I
>>>>> eventually just printed everything out and found the data by hand, so
>>>>> now I am doing:
>>>>>
>>>>> coords <- myobject at polygons[[1]]@Polygons[[1]]@coords
>>>>>
>>>>> but I don't assume that is right. Surely there must be some simple way
>>>>> to get a list of x and y coords out of any object?
>>>>>
>>>>> in frustration,
>>>>> David Hugh-Jones
>>>>> PhD Candidate
>>>>> Essex University Department of Government
>>>>> http://davidhughjones.googlepages.com
>>>>>
>>>>>
>>>>> 2008/6/30 David PINAUD <pinaud at cebc.cnrs.fr>:
>>>>>> maybe you can try the function dp() in the package "shapefiles", which is an
>>>>>> implementation of the Douglas-Peucker polyLine simplification algorithm.
>>>>>> Hope it helps
>>>>>> David
>>>>>>
>>>>>> David Hugh-Jones a ?crit :
>>>>>>>
>>>>>>> Hi all
>>>>>>>
>>>>>>> I have a big dataset of points and am doing stuff on them that takes a
>>>>>>> lot of time. To speed it up, I would like to use "thinlines" from
>>>>>>> RArcinfo, which basically makes the maps "rougher" by throwing away
>>>>>>> points. Is there an equivalent function for SpatialPolygon type
>>>>>>> objects? (I assume that there's no way to convert _to_ Arcinfo, though
>>>>>>> I know it's possible to read from it).
>>>>>>>
>>>>>>> Cheers
>>>>>>>
>>>>>>> David Hugh-Jones
>>>>>>> PhD Candidate
>>>>>>> Essex University Department of Government
>>>>>>> http://davidhughjones.googlepages.com
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> R-sig-Geo mailing list
>>>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> --
>>>>>> ***************************************************
>>>>>> David PINAUD
>>>>>> Ing?nieur de Recherche "Analyses spatiales"
>>>>>>
>>>>>> Centre d'Etudes Biologiques de Chiz? - CNRS UPR1934
>>>>>> 79360 Villiers-en-Bois, France poste 485
>>>>>> Tel: +33 (0)5.49.09.35.58
>>>>>> Fax: +33 (0)5.49.09.65.26
>>>>>> http://www.cebc.cnrs.fr/
>>>>>>
>>>>>> ***************************************************
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> ________ Information from NOD32 ________
>>>>>> This message was checked by NOD32 Antivirus System for Linux Mail Servers.
>>>>>> http://www.eset.com
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Economic Geography Section, Department of Economics, Norwegian School of
>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From dhughj at essex.ac.uk  Tue Jul  1 10:55:46 2008
From: dhughj at essex.ac.uk (David Hugh-Jones)
Date: Tue, 1 Jul 2008 10:55:46 +0200
Subject: [R-sig-Geo] API documentation?
In-Reply-To: <Pine.LNX.4.64.0807010026260.12805@reclus.nhh.no>
References: <f5d848060806300948k61b21090v587ee3f33969d1e0@mail.gmail.com>
	<1214846674.6005.11.camel@fh-vrubio>
	<f5d848060806301039j5609156bj730d78e391e42d57@mail.gmail.com>
	<Pine.LNX.4.64.0807010026260.12805@reclus.nhh.no>
Message-ID: <f5d848060807010155m5dcdf47cg7d280bcdce783c5c@mail.gmail.com>

Roger

Thanks for that tip. As it happens, what I am doing is quick and dirty
enough that it doesn't matter, but it could have bitten me fairly
badly.

David Hugh-Jones
PhD Candidate
Essex University Department of Government
http://davidhughjones.googlepages.com


2008/7/1 Roger Bivand <Roger.Bivand at nhh.no>:
> On Mon, 30 Jun 2008, David Hugh-Jones wrote:
>
>> Guys
>>
>> I don't mean to rant, but believe me, I've spent plenty of time with
>> the documentation and it's really not helping.
>>
>> Partly this is a problem of R's doc format which treats package
>> documentation as an alphabetical list of functions - which gives me no
>> idea where to start.
>
> This is an inherent (and perhaps ugly) characteristic of the S4 object/class
> structure as you suggest below. New style classes are not as well integrated
> into the documentation as straight functions are. Here, coerce is as(), but
> the issue of how to improve documentation is not resolved.
>
>>
>> This then interacts badly with the OO structure. For example, look at
>> the 20+ pages on "coerce". Hmm, what does "coerce" actually do? In
>> fact that's in a whole different library. But I didn't know that, so I
>> click on a page at random, say
>>
>> coerce,SpatialGrid,data.frame-method
>>
>> and this takes me to SpatialGrid class - which doesn't mention coerce
>> at all. (Nor does it tell me what SpatialGrid is, or what it is used
>> for.)
>>
>> On the other hand, maybe I might guess that to get a list of
>> coordinates, I'd use "coordinates". So I click on that method, and it
>> tells me yes, this "retrieves spatial coordinates". But unfortunately
>> it retrieves them hidden inside another object ("an object of class
>> SpatialPointsDataFrame"). OK, but how do I get the _actual_data_?
>> Maybe the SpatialPointsDataFrame class page will tell me. Nope. Et
>> cetera.
>>
>> Rick: yes, I agree that using the internal data structures is how to
>> do things, but this is broken isn't it? The whole point of having OO
>> is to be able to use it _without_ understanding the internal data
>> structures. The ideal, in other words, would be to have a "thin.lines"
>> method that I could just run on any polygon or set of polygons.
>> Failing that, then I should be able to get at the internal data
>> without hours of head scratching.
>>
>
> No, because the underlying understanding of dp and other methods for
> thinning is that the objects implement an arc-node topological model, so
> that each arc can be thinned without different thinning happening on
> otherwise identical boundaries of neighbouring polygons. But we do not have
> an arc-node representation, so there cannot be line thinning for polygon
> boundaries in a spaghetti world.
>
>> Right now, it's like, everything is hidden behind a layer of classes
>> and slots and methods, but I still need to go behind that layer to get
>> at the actual raw data, and this is so complicated and confusing that
>> it would be easier just to work with the raw data.
>>
>
> You need to build topology first, so if need be take the data out to a GIS
> that does topology properly, do the arc line thinning there, and bring it
> back in. Building topology from a stream of straight line segments is a
> serious challenge, especially if you want to retain the association with
> attribute data.
>
> Roger
>
>> OK, I'll stop venting. If there's anything I could do to improve this
>> situation, I would gladly try.
>>
>> David Hugh-Jones
>> PhD Candidate
>> Essex University Department of Government
>> http://davidhughjones.googlepages.com
>>
>>
>> 2008/6/30 Virgilio Gomez-Rubio <v.gomezrubio at imperial.ac.uk>:
>>>
>>> Dear David,
>>>
>>> Probably the best way to start is by checking the HTML documentation. It
>>> should be installed locally but it is also accesible, for example, here:
>>>
>>> http://finzi.psych.upenn.edu/R/library/sp/html/00Index.html
>>>
>>> Hope this helps.
>>>
>>> Virgilio
>>>
>>> On Mon, 2008-06-30 at 18:48 +0200, David Hugh-Jones wrote:
>>>>
>>>> Thanks David for his comment about dp.
>>>>
>>>> Quick question: is there any reasonably comprehensible API
>>>> documentation for the "sp" package? I have just spent about an hour
>>>> trying to get a list of points from a SpatialPolygons object. I
>>>> eventually just printed everything out and found the data by hand, so
>>>> now I am doing:
>>>>
>>>> coords <- myobject at polygons[[1]]@Polygons[[1]]@coords
>>>>
>>>> but I don't assume that is right. Surely there must be some simple way
>>>> to get a list of x and y coords out of any object?
>>>>
>>>> in frustration,
>>>> David Hugh-Jones
>>>> PhD Candidate
>>>> Essex University Department of Government
>>>> http://davidhughjones.googlepages.com
>>>>
>>>>
>>>> 2008/6/30 David PINAUD <pinaud at cebc.cnrs.fr>:
>>>>>
>>>>> maybe you can try the function dp() in the package "shapefiles", which
>>>>> is an
>>>>> implementation of the Douglas-Peucker polyLine simplification
>>>>> algorithm.
>>>>> Hope it helps
>>>>> David
>>>>>
>>>>> David Hugh-Jones a ?crit :
>>>>>>
>>>>>> Hi all
>>>>>>
>>>>>> I have a big dataset of points and am doing stuff on them that takes a
>>>>>> lot of time. To speed it up, I would like to use "thinlines" from
>>>>>> RArcinfo, which basically makes the maps "rougher" by throwing away
>>>>>> points. Is there an equivalent function for SpatialPolygon type
>>>>>> objects? (I assume that there's no way to convert _to_ Arcinfo, though
>>>>>> I know it's possible to read from it).
>>>>>>
>>>>>> Cheers
>>>>>>
>>>>>> David Hugh-Jones
>>>>>> PhD Candidate
>>>>>> Essex University Department of Government
>>>>>> http://davidhughjones.googlepages.com
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>> --
>>>>> ***************************************************
>>>>> David PINAUD
>>>>> Ing?nieur de Recherche "Analyses spatiales"
>>>>>
>>>>> Centre d'Etudes Biologiques de Chiz? - CNRS UPR1934
>>>>> 79360 Villiers-en-Bois, France poste 485
>>>>> Tel: +33 (0)5.49.09.35.58
>>>>> Fax: +33 (0)5.49.09.65.26
>>>>> http://www.cebc.cnrs.fr/
>>>>>
>>>>> ***************************************************
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> ________ Information from NOD32 ________
>>>>> This message was checked by NOD32 Antivirus System for Linux Mail
>>>>> Servers.
>>>>> http://www.eset.com
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Roger Bivand
> Economic Geography Section, Department of Economics, Norwegian School of
> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>



From dhughj at essex.ac.uk  Tue Jul  1 11:30:31 2008
From: dhughj at essex.ac.uk (David Hugh-Jones)
Date: Tue, 1 Jul 2008 11:30:31 +0200
Subject: [R-sig-Geo]  API documentation?
In-Reply-To: <f5d848060807010229y2f68c8bfrb2a03ed57a899cb5@mail.gmail.com>
References: <f5d848060806300948k61b21090v587ee3f33969d1e0@mail.gmail.com>
	<1214846674.6005.11.camel@fh-vrubio>
	<f5d848060806301039j5609156bj730d78e391e42d57@mail.gmail.com>
	<Pine.LNX.4.64.0807010026260.12805@reclus.nhh.no>
	<14419.1214879429@as220.org>
	<Pine.LNX.4.64.0807010812270.16863@reclus.nhh.no>
	<f5d848060807010229y2f68c8bfrb2a03ed57a899cb5@mail.gmail.com>
Message-ID: <f5d848060807010230l10cd66a4x7d9a43baec36641e@mail.gmail.com>

I thought about this some more. One solution would be some wiki-like
documentation which people could easily edit as they learnt. The
obvious place is the R wiki ( http://wiki.r-project.org/rwiki/ ). At
the moment there's no section on spatial data and the spatial
statistics section just points you at the spatial view on CRAN.

Things I would like to know
- a list of external data types and how to get them into and out of R
- a list of internal R data representations (RarcInfo, spatstat etc.)
and how to convert between them
- a list of things to do to data (subset, thin, measure distances,
graphing etc.) and what packages do them

I am sure other people have their own thoughts - e.g. I haven't even
mentioned data analysis or statistics yet - so I am just going to
start hacking at
http://wiki.r-project.org/rwiki/doku.php?id=tips:spatial-data .
Helpers would be welcome - people who know a lot can provide answers,
and if (like me) you know barely anything, then you'll know what
questions need answering.

David Hugh-Jones
PhD Candidate
Essex University Department of Government
http://davidhughjones.googlepages.com


2008/7/1 Roger Bivand <Roger.Bivand at nhh.no>:
> On Mon, 30 Jun 2008, tom sgouros wrote:
>
>>
>> Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>
>>
>>>> I don't mean to rant, but believe me, I've spent plenty of time with
>>>> the documentation and it's really not helping.
>>>>
>>>> Partly this is a problem of R's doc format which treats package
>>>> documentation as an alphabetical list of functions - which gives me no
>>>> idea where to start.
>>
>> I would tend to second this.  I've been lurking on the list for a few
>> months, hoping to learn a bit, but so far without much success, since
>> the conversation and the documentation are so far above where I am and
>> what I need.  I am almost familiar with R, using it for time-series
>> statistics, and learned early on that the Dalgaard book was a better
>> intro than any of the real R documents.  It doesn't cover nearly
>> everything, but it seems to cover what I needed, so I use what is
>> probably a baby-level set of R functions, but it's adequate.  Without a
>> professor lurking over my shoulder to explain stuff, I am perpetually
>> slightly lost, because all the documentation assumes I know stuff that I
>> don't.
>>
>> I still use R because I know that with enough poking around it will
>> eventually provide a solution.  But if the alternatives were not very
>> expensive, I would have given up a while ago.
>>
>> I joined this group when I wanted to expand into making maps of
>> geographical economic data, and after a month of working on the problem,
>> I essentially had to give up for the time being.  I wish there were an
>> introduction that showed me how to use R with a GIS program, but to my
>> knowledge, there is not.  I did run across a GRASS book that claimed it
>> would help, but as I recall, it cost upward of US$100.
>
> I would be happy to link to such a guide from the Spatial Task View, for
> example on the R-Geo site. There are other nice resources, for instance
> Dylan Beaudette's site - one page is:
>
> http://casoilresource.lawr.ucdavis.edu/drupal/node/100
>
> Seen from the developer side, it is hard to know what users see as the most
> useful advice. The courses that have been provided - say like:
>
> http://www.bias-project.org.uk/ASDARcourse/
>
> are rather "developer-view", as indeed the forthcoming "useR" series book
> will be. By "developer-view", I mean attempting to provide information both
> for beginning users and trying to advance along the useR-developeR continuum
> where experience has shown that this may be advisable, even though neither
> desired nor immediately applauded.
>
> A typical immediate response to the courses has been that "all that class
> and coordinate reference system stuff is unnecessary". This seems to hold
> until the participants actually get to do work with their own data, at which
> point having a reference to what is going on is handy. The specific
> difficulty, as teachers often find, is that the initial expectation from the
> user is often not the most fruitful question for helping the user to become
> more self-reliant going forward.
>
> One clear reason for this difficulty is that many different disciplines use
> spatial data, and all of them seem to feel that they know enough for their
> internal purposes, so get frustrated when they encounter barriers which are
> inherent in their perception(s) of spatial data. So listening to other
> disciplines and learning from them can be helpful.
>
> As far as sp classes are concerned, is the R-News note of 2005 too outdated
> to be helpful? Should it be placed more prominiently on the Task View page?
> I would acknowledge that ease of use is not what it could be, we are still
> where time series (and time representation) were in R a couple of years ago.
> However, the sp classes ought to work for many who do not need to manipulate
> the actual coordinates. For working statisticians, simple mapping of model
> residuals is no more than:
>
> library(sp)
> library(rgdal)
> mydata <- readOGR(dsn="directory", layer="shpfile")
> # or:
> # library(maptools)
> # mydata <- readShapeSpatial("shpfile.shp")
> # from release 0.7-14 already submitted to CRAN, now you have to know
> # whether your shapefile is point, line or polygons
> myobj <- lm(response ~ x1 + x2, data=mydata)
> mydata$residuals <- residuals(myobj)
> spplot(mydata, "residuals")
>
> where the mydata Spatial*DataFrame behaves as a data.frame. The two-faced
> nature of the Spatial*DataFrame classes is intentional, looking like GIS
> data models for GIS people, and data frames for statisticians. But
> manipulating coordinates is just a good deal more complicated - unless you
> just need subsetting with the "[" methods.
>
> To summarise, contributions of user tips and examples, and links to those
> examples, would be very welcome.
>
> Roger
>
>>
>> To make this more useful than just a rant, I would second David's point.
>> What is missing is only what David misses: an introduction that says
>> where to start to deal with simple geographic data, maybe providing a
>> few examples of common techniques and frequent problems, and pushing
>> data back and forth to some GIS.  I was not able to find that, and
>> without it, found the R documentation pretty much useless.  I'd be happy
>> to know of some source I hadn't found before, so if you have one to
>> recommend, please do.
>>
>> -tom
>>
>>
>>
>>>
>>> This is an inherent (and perhaps ugly) characteristic of the S4
>>> object/class structure as you suggest below. New style classes are not
>>> as well integrated into the documentation as straight functions
>>> are. Here, coerce is as(), but the issue of how to improve
>>> documentation is not resolved.
>>>
>>>>
>>>> This then interacts badly with the OO structure. For example, look at
>>>> the 20+ pages on "coerce". Hmm, what does "coerce" actually do? In
>>>> fact that's in a whole different library. But I didn't know that, so I
>>>> click on a page at random, say
>>>>
>>>> coerce,SpatialGrid,data.frame-method
>>>>
>>>> and this takes me to SpatialGrid class - which doesn't mention coerce
>>>> at all. (Nor does it tell me what SpatialGrid is, or what it is used
>>>> for.)
>>>>
>>>> On the other hand, maybe I might guess that to get a list of
>>>> coordinates, I'd use "coordinates". So I click on that method, and it
>>>> tells me yes, this "retrieves spatial coordinates". But unfortunately
>>>> it retrieves them hidden inside another object ("an object of class
>>>> SpatialPointsDataFrame"). OK, but how do I get the _actual_data_?
>>>> Maybe the SpatialPointsDataFrame class page will tell me. Nope. Et
>>>> cetera.
>>>>
>>>> Rick: yes, I agree that using the internal data structures is how to
>>>> do things, but this is broken isn't it? The whole point of having OO
>>>> is to be able to use it _without_ understanding the internal data
>>>> structures. The ideal, in other words, would be to have a "thin.lines"
>>>> method that I could just run on any polygon or set of polygons.
>>>> Failing that, then I should be able to get at the internal data
>>>> without hours of head scratching.
>>>>
>>>
>>> No, because the underlying understanding of dp and other methods for
>>> thinning is that the objects implement an arc-node topological model,
>>> so that each arc can be thinned without different thinning happening
>>> on otherwise identical boundaries of neighbouring polygons. But we do
>>> not have an arc-node representation, so there cannot be line thinning
>>> for polygon boundaries in a spaghetti world.
>>>
>>>> Right now, it's like, everything is hidden behind a layer of classes
>>>> and slots and methods, but I still need to go behind that layer to get
>>>> at the actual raw data, and this is so complicated and confusing that
>>>> it would be easier just to work with the raw data.
>>>>
>>>
>>> You need to build topology first, so if need be take the data out to a
>>> GIS that does topology properly, do the arc line thinning there, and
>>> bring it back in. Building topology from a stream of straight line
>>> segments is a serious challenge, especially if you want to retain the
>>> association with attribute data.
>>>
>>> Roger
>>>
>>>> OK, I'll stop venting. If there's anything I could do to improve this
>>>> situation, I would gladly try.
>>>>
>>>> David Hugh-Jones
>>>> PhD Candidate
>>>> Essex University Department of Government
>>>> http://davidhughjones.googlepages.com
>>>>
>>>>
>>>> 2008/6/30 Virgilio Gomez-Rubio <v.gomezrubio at imperial.ac.uk>:
>>>>>
>>>>> Dear David,
>>>>>
>>>>> Probably the best way to start is by checking the HTML documentation.
>>>>> It
>>>>> should be installed locally but it is also accesible, for example,
>>>>> here:
>>>>>
>>>>> http://finzi.psych.upenn.edu/R/library/sp/html/00Index.html
>>>>>
>>>>> Hope this helps.
>>>>>
>>>>> Virgilio
>>>>>
>>>>> On Mon, 2008-06-30 at 18:48 +0200, David Hugh-Jones wrote:
>>>>>>
>>>>>> Thanks David for his comment about dp.
>>>>>>
>>>>>> Quick question: is there any reasonably comprehensible API
>>>>>> documentation for the "sp" package? I have just spent about an hour
>>>>>> trying to get a list of points from a SpatialPolygons object. I
>>>>>> eventually just printed everything out and found the data by hand, so
>>>>>> now I am doing:
>>>>>>
>>>>>> coords <- myobject at polygons[[1]]@Polygons[[1]]@coords
>>>>>>
>>>>>> but I don't assume that is right. Surely there must be some simple way
>>>>>> to get a list of x and y coords out of any object?
>>>>>>
>>>>>> in frustration,
>>>>>> David Hugh-Jones
>>>>>> PhD Candidate
>>>>>> Essex University Department of Government
>>>>>> http://davidhughjones.googlepages.com
>>>>>>
>>>>>>
>>>>>> 2008/6/30 David PINAUD <pinaud at cebc.cnrs.fr>:
>>>>>>>
>>>>>>> maybe you can try the function dp() in the package "shapefiles",
>>>>>>> which is an
>>>>>>> implementation of the Douglas-Peucker polyLine simplification
>>>>>>> algorithm.
>>>>>>> Hope it helps
>>>>>>> David
>>>>>>>
>>>>>>> David Hugh-Jones a ?crit :
>>>>>>>>
>>>>>>>> Hi all
>>>>>>>>
>>>>>>>> I have a big dataset of points and am doing stuff on them that takes
>>>>>>>> a
>>>>>>>> lot of time. To speed it up, I would like to use "thinlines" from
>>>>>>>> RArcinfo, which basically makes the maps "rougher" by throwing away
>>>>>>>> points. Is there an equivalent function for SpatialPolygon type
>>>>>>>> objects? (I assume that there's no way to convert _to_ Arcinfo,
>>>>>>>> though
>>>>>>>> I know it's possible to read from it).
>>>>>>>>
>>>>>>>> Cheers
>>>>>>>>
>>>>>>>> David Hugh-Jones
>>>>>>>> PhD Candidate
>>>>>>>> Essex University Department of Government
>>>>>>>> http://davidhughjones.googlepages.com
>>>>>>>>
>>>>>>>> _______________________________________________
>>>>>>>> R-sig-Geo mailing list
>>>>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>> --
>>>>>>> ***************************************************
>>>>>>> David PINAUD
>>>>>>> Ing?nieur de Recherche "Analyses spatiales"
>>>>>>>
>>>>>>> Centre d'Etudes Biologiques de Chiz? - CNRS UPR1934
>>>>>>> 79360 Villiers-en-Bois, France poste 485
>>>>>>> Tel: +33 (0)5.49.09.35.58
>>>>>>> Fax: +33 (0)5.49.09.65.26
>>>>>>> http://www.cebc.cnrs.fr/
>>>>>>>
>>>>>>> ***************************************************
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> ________ Information from NOD32 ________
>>>>>>> This message was checked by NOD32 Antivirus System for Linux Mail
>>>>>>> Servers.
>>>>>>> http://www.eset.com
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>>
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>
>>> --
>>> Roger Bivand
>>> Economic Geography Section, Department of Economics, Norwegian School of
>>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>>> e-mail: Roger.Bivand at nhh.no
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>>
>
> --
> Roger Bivand
> Economic Geography Section, Department of Economics, Norwegian School of
> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>



From Roger.Bivand at nhh.no  Tue Jul  1 11:38:42 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 1 Jul 2008 11:38:42 +0200 (CEST)
Subject: [R-sig-Geo] API documentation?
In-Reply-To: <f5d848060807010230l10cd66a4x7d9a43baec36641e@mail.gmail.com>
References: <f5d848060806300948k61b21090v587ee3f33969d1e0@mail.gmail.com>
	<1214846674.6005.11.camel@fh-vrubio>
	<f5d848060806301039j5609156bj730d78e391e42d57@mail.gmail.com>
	<Pine.LNX.4.64.0807010026260.12805@reclus.nhh.no>
	<14419.1214879429@as220.org>
	<Pine.LNX.4.64.0807010812270.16863@reclus.nhh.no>
	<f5d848060807010229y2f68c8bfrb2a03ed57a899cb5@mail.gmail.com>
	<f5d848060807010230l10cd66a4x7d9a43baec36641e@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0807011137270.17264@reclus.nhh.no>

On Tue, 1 Jul 2008, David Hugh-Jones wrote:

> I thought about this some more. One solution would be some wiki-like
> documentation which people could easily edit as they learnt. The
> obvious place is the R wiki ( http://wiki.r-project.org/rwiki/ ). At
> the moment there's no section on spatial data and the spatial
> statistics section just points you at the spatial view on CRAN.
>
> Things I would like to know
> - a list of external data types and how to get them into and out of R
> - a list of internal R data representations (RarcInfo, spatstat etc.)
> and how to convert between them
> - a list of things to do to data (subset, thin, measure distances,
> graphing etc.) and what packages do them
>
> I am sure other people have their own thoughts - e.g. I haven't even
> mentioned data analysis or statistics yet - so I am just going to
> start hacking at
> http://wiki.r-project.org/rwiki/doku.php?id=tips:spatial-data .
> Helpers would be welcome - people who know a lot can provide answers,
> and if (like me) you know barely anything, then you'll know what
> questions need answering.

Excellent. Please do support David's initiative - I'll add a link to the 
task view very soon.

Roger

>
> David Hugh-Jones
> PhD Candidate
> Essex University Department of Government
> http://davidhughjones.googlepages.com
>
>
> 2008/7/1 Roger Bivand <Roger.Bivand at nhh.no>:
>> On Mon, 30 Jun 2008, tom sgouros wrote:
>>
>>>
>>> Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>>
>>>
>>>>> I don't mean to rant, but believe me, I've spent plenty of time with
>>>>> the documentation and it's really not helping.
>>>>>
>>>>> Partly this is a problem of R's doc format which treats package
>>>>> documentation as an alphabetical list of functions - which gives me no
>>>>> idea where to start.
>>>
>>> I would tend to second this.  I've been lurking on the list for a few
>>> months, hoping to learn a bit, but so far without much success, since
>>> the conversation and the documentation are so far above where I am and
>>> what I need.  I am almost familiar with R, using it for time-series
>>> statistics, and learned early on that the Dalgaard book was a better
>>> intro than any of the real R documents.  It doesn't cover nearly
>>> everything, but it seems to cover what I needed, so I use what is
>>> probably a baby-level set of R functions, but it's adequate.  Without a
>>> professor lurking over my shoulder to explain stuff, I am perpetually
>>> slightly lost, because all the documentation assumes I know stuff that I
>>> don't.
>>>
>>> I still use R because I know that with enough poking around it will
>>> eventually provide a solution.  But if the alternatives were not very
>>> expensive, I would have given up a while ago.
>>>
>>> I joined this group when I wanted to expand into making maps of
>>> geographical economic data, and after a month of working on the problem,
>>> I essentially had to give up for the time being.  I wish there were an
>>> introduction that showed me how to use R with a GIS program, but to my
>>> knowledge, there is not.  I did run across a GRASS book that claimed it
>>> would help, but as I recall, it cost upward of US$100.
>>
>> I would be happy to link to such a guide from the Spatial Task View, for
>> example on the R-Geo site. There are other nice resources, for instance
>> Dylan Beaudette's site - one page is:
>>
>> http://casoilresource.lawr.ucdavis.edu/drupal/node/100
>>
>> Seen from the developer side, it is hard to know what users see as the most
>> useful advice. The courses that have been provided - say like:
>>
>> http://www.bias-project.org.uk/ASDARcourse/
>>
>> are rather "developer-view", as indeed the forthcoming "useR" series book
>> will be. By "developer-view", I mean attempting to provide information both
>> for beginning users and trying to advance along the useR-developeR continuum
>> where experience has shown that this may be advisable, even though neither
>> desired nor immediately applauded.
>>
>> A typical immediate response to the courses has been that "all that class
>> and coordinate reference system stuff is unnecessary". This seems to hold
>> until the participants actually get to do work with their own data, at which
>> point having a reference to what is going on is handy. The specific
>> difficulty, as teachers often find, is that the initial expectation from the
>> user is often not the most fruitful question for helping the user to become
>> more self-reliant going forward.
>>
>> One clear reason for this difficulty is that many different disciplines use
>> spatial data, and all of them seem to feel that they know enough for their
>> internal purposes, so get frustrated when they encounter barriers which are
>> inherent in their perception(s) of spatial data. So listening to other
>> disciplines and learning from them can be helpful.
>>
>> As far as sp classes are concerned, is the R-News note of 2005 too outdated
>> to be helpful? Should it be placed more prominiently on the Task View page?
>> I would acknowledge that ease of use is not what it could be, we are still
>> where time series (and time representation) were in R a couple of years ago.
>> However, the sp classes ought to work for many who do not need to manipulate
>> the actual coordinates. For working statisticians, simple mapping of model
>> residuals is no more than:
>>
>> library(sp)
>> library(rgdal)
>> mydata <- readOGR(dsn="directory", layer="shpfile")
>> # or:
>> # library(maptools)
>> # mydata <- readShapeSpatial("shpfile.shp")
>> # from release 0.7-14 already submitted to CRAN, now you have to know
>> # whether your shapefile is point, line or polygons
>> myobj <- lm(response ~ x1 + x2, data=mydata)
>> mydata$residuals <- residuals(myobj)
>> spplot(mydata, "residuals")
>>
>> where the mydata Spatial*DataFrame behaves as a data.frame. The two-faced
>> nature of the Spatial*DataFrame classes is intentional, looking like GIS
>> data models for GIS people, and data frames for statisticians. But
>> manipulating coordinates is just a good deal more complicated - unless you
>> just need subsetting with the "[" methods.
>>
>> To summarise, contributions of user tips and examples, and links to those
>> examples, would be very welcome.
>>
>> Roger
>>
>>>
>>> To make this more useful than just a rant, I would second David's point.
>>> What is missing is only what David misses: an introduction that says
>>> where to start to deal with simple geographic data, maybe providing a
>>> few examples of common techniques and frequent problems, and pushing
>>> data back and forth to some GIS.  I was not able to find that, and
>>> without it, found the R documentation pretty much useless.  I'd be happy
>>> to know of some source I hadn't found before, so if you have one to
>>> recommend, please do.
>>>
>>> -tom
>>>
>>>
>>>
>>>>
>>>> This is an inherent (and perhaps ugly) characteristic of the S4
>>>> object/class structure as you suggest below. New style classes are not
>>>> as well integrated into the documentation as straight functions
>>>> are. Here, coerce is as(), but the issue of how to improve
>>>> documentation is not resolved.
>>>>
>>>>>
>>>>> This then interacts badly with the OO structure. For example, look at
>>>>> the 20+ pages on "coerce". Hmm, what does "coerce" actually do? In
>>>>> fact that's in a whole different library. But I didn't know that, so I
>>>>> click on a page at random, say
>>>>>
>>>>> coerce,SpatialGrid,data.frame-method
>>>>>
>>>>> and this takes me to SpatialGrid class - which doesn't mention coerce
>>>>> at all. (Nor does it tell me what SpatialGrid is, or what it is used
>>>>> for.)
>>>>>
>>>>> On the other hand, maybe I might guess that to get a list of
>>>>> coordinates, I'd use "coordinates". So I click on that method, and it
>>>>> tells me yes, this "retrieves spatial coordinates". But unfortunately
>>>>> it retrieves them hidden inside another object ("an object of class
>>>>> SpatialPointsDataFrame"). OK, but how do I get the _actual_data_?
>>>>> Maybe the SpatialPointsDataFrame class page will tell me. Nope. Et
>>>>> cetera.
>>>>>
>>>>> Rick: yes, I agree that using the internal data structures is how to
>>>>> do things, but this is broken isn't it? The whole point of having OO
>>>>> is to be able to use it _without_ understanding the internal data
>>>>> structures. The ideal, in other words, would be to have a "thin.lines"
>>>>> method that I could just run on any polygon or set of polygons.
>>>>> Failing that, then I should be able to get at the internal data
>>>>> without hours of head scratching.
>>>>>
>>>>
>>>> No, because the underlying understanding of dp and other methods for
>>>> thinning is that the objects implement an arc-node topological model,
>>>> so that each arc can be thinned without different thinning happening
>>>> on otherwise identical boundaries of neighbouring polygons. But we do
>>>> not have an arc-node representation, so there cannot be line thinning
>>>> for polygon boundaries in a spaghetti world.
>>>>
>>>>> Right now, it's like, everything is hidden behind a layer of classes
>>>>> and slots and methods, but I still need to go behind that layer to get
>>>>> at the actual raw data, and this is so complicated and confusing that
>>>>> it would be easier just to work with the raw data.
>>>>>
>>>>
>>>> You need to build topology first, so if need be take the data out to a
>>>> GIS that does topology properly, do the arc line thinning there, and
>>>> bring it back in. Building topology from a stream of straight line
>>>> segments is a serious challenge, especially if you want to retain the
>>>> association with attribute data.
>>>>
>>>> Roger
>>>>
>>>>> OK, I'll stop venting. If there's anything I could do to improve this
>>>>> situation, I would gladly try.
>>>>>
>>>>> David Hugh-Jones
>>>>> PhD Candidate
>>>>> Essex University Department of Government
>>>>> http://davidhughjones.googlepages.com
>>>>>
>>>>>
>>>>> 2008/6/30 Virgilio Gomez-Rubio <v.gomezrubio at imperial.ac.uk>:
>>>>>>
>>>>>> Dear David,
>>>>>>
>>>>>> Probably the best way to start is by checking the HTML documentation.
>>>>>> It
>>>>>> should be installed locally but it is also accesible, for example,
>>>>>> here:
>>>>>>
>>>>>> http://finzi.psych.upenn.edu/R/library/sp/html/00Index.html
>>>>>>
>>>>>> Hope this helps.
>>>>>>
>>>>>> Virgilio
>>>>>>
>>>>>> On Mon, 2008-06-30 at 18:48 +0200, David Hugh-Jones wrote:
>>>>>>>
>>>>>>> Thanks David for his comment about dp.
>>>>>>>
>>>>>>> Quick question: is there any reasonably comprehensible API
>>>>>>> documentation for the "sp" package? I have just spent about an hour
>>>>>>> trying to get a list of points from a SpatialPolygons object. I
>>>>>>> eventually just printed everything out and found the data by hand, so
>>>>>>> now I am doing:
>>>>>>>
>>>>>>> coords <- myobject at polygons[[1]]@Polygons[[1]]@coords
>>>>>>>
>>>>>>> but I don't assume that is right. Surely there must be some simple way
>>>>>>> to get a list of x and y coords out of any object?
>>>>>>>
>>>>>>> in frustration,
>>>>>>> David Hugh-Jones
>>>>>>> PhD Candidate
>>>>>>> Essex University Department of Government
>>>>>>> http://davidhughjones.googlepages.com
>>>>>>>
>>>>>>>
>>>>>>> 2008/6/30 David PINAUD <pinaud at cebc.cnrs.fr>:
>>>>>>>>
>>>>>>>> maybe you can try the function dp() in the package "shapefiles",
>>>>>>>> which is an
>>>>>>>> implementation of the Douglas-Peucker polyLine simplification
>>>>>>>> algorithm.
>>>>>>>> Hope it helps
>>>>>>>> David
>>>>>>>>
>>>>>>>> David Hugh-Jones a ?crit :
>>>>>>>>>
>>>>>>>>> Hi all
>>>>>>>>>
>>>>>>>>> I have a big dataset of points and am doing stuff on them that takes
>>>>>>>>> a
>>>>>>>>> lot of time. To speed it up, I would like to use "thinlines" from
>>>>>>>>> RArcinfo, which basically makes the maps "rougher" by throwing away
>>>>>>>>> points. Is there an equivalent function for SpatialPolygon type
>>>>>>>>> objects? (I assume that there's no way to convert _to_ Arcinfo,
>>>>>>>>> though
>>>>>>>>> I know it's possible to read from it).
>>>>>>>>>
>>>>>>>>> Cheers
>>>>>>>>>
>>>>>>>>> David Hugh-Jones
>>>>>>>>> PhD Candidate
>>>>>>>>> Essex University Department of Government
>>>>>>>>> http://davidhughjones.googlepages.com
>>>>>>>>>
>>>>>>>>> _______________________________________________
>>>>>>>>> R-sig-Geo mailing list
>>>>>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>> --
>>>>>>>> ***************************************************
>>>>>>>> David PINAUD
>>>>>>>> Ing?nieur de Recherche "Analyses spatiales"
>>>>>>>>
>>>>>>>> Centre d'Etudes Biologiques de Chiz? - CNRS UPR1934
>>>>>>>> 79360 Villiers-en-Bois, France poste 485
>>>>>>>> Tel: +33 (0)5.49.09.35.58
>>>>>>>> Fax: +33 (0)5.49.09.65.26
>>>>>>>> http://www.cebc.cnrs.fr/
>>>>>>>>
>>>>>>>> ***************************************************
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> ________ Information from NOD32 ________
>>>>>>>> This message was checked by NOD32 Antivirus System for Linux Mail
>>>>>>>> Servers.
>>>>>>>> http://www.eset.com
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> R-sig-Geo mailing list
>>>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>
>>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>
>>>> --
>>>> Roger Bivand
>>>> Economic Geography Section, Department of Economics, Norwegian School of
>>>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>>>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>>>> e-mail: Roger.Bivand at nhh.no
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>>
>>
>> --
>> Roger Bivand
>> Economic Geography Section, Department of Economics, Norwegian School of
>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From tomfool at as220.org  Tue Jul  1 15:00:54 2008
From: tomfool at as220.org (tom sgouros)
Date: Tue, 01 Jul 2008 09:00:54 -0400
Subject: [R-sig-Geo] API documentation?
In-Reply-To: <f5d848060807010155m5dcdf47cg7d280bcdce783c5c@mail.gmail.com> 
References: <f5d848060806300948k61b21090v587ee3f33969d1e0@mail.gmail.com>
	<1214846674.6005.11.camel@fh-vrubio>
	<f5d848060806301039j5609156bj730d78e391e42d57@mail.gmail.com>
	<Pine.LNX.4.64.0807010026260.12805@reclus.nhh.no>
	<f5d848060807010155m5dcdf47cg7d280bcdce783c5c@mail.gmail.com>
Message-ID: <29598.1214917254@as220.org>



One thing you could begin with on that wiki is simply a description of
which class of geographical problems R is useful for and which class is
better to use a GIS for.

 -tom

-- 
 ------------------------
 tomfool at as220 dot org
 http://sgouros.com  
 http://whatcheer.net



From dhughj at essex.ac.uk  Tue Jul  1 15:16:56 2008
From: dhughj at essex.ac.uk (David Hugh-Jones)
Date: Tue, 1 Jul 2008 15:16:56 +0200
Subject: [R-sig-Geo] API documentation?
In-Reply-To: <29598.1214917254@as220.org>
References: <f5d848060806300948k61b21090v587ee3f33969d1e0@mail.gmail.com>
	<1214846674.6005.11.camel@fh-vrubio>
	<f5d848060806301039j5609156bj730d78e391e42d57@mail.gmail.com>
	<Pine.LNX.4.64.0807010026260.12805@reclus.nhh.no>
	<f5d848060807010155m5dcdf47cg7d280bcdce783c5c@mail.gmail.com>
	<29598.1214917254@as220.org>
Message-ID: <f5d848060807010616u52f08feeqe2e63f718b23c8aa@mail.gmail.com>

Yes, and a list of links to external tools would be great also.

Work so far is at
http://wiki.r-project.org/rwiki/doku.php?id=tips:spatial-data . It's
very incomplete so please feel free to improve!

David Hugh-Jones
PhD Candidate
Essex University Department of Government
http://davidhughjones.googlepages.com


2008/7/1 tom sgouros <tomfool at as220.org>:
>
>
> One thing you could begin with on that wiki is simply a description of
> which class of geographical problems R is useful for and which class is
> better to use a GIS for.
>
>  -tom
>
> --
>  ------------------------
>  tomfool at as220 dot org
>  http://sgouros.com
>  http://whatcheer.net
>



From tomfool at as220.org  Tue Jul  1 15:37:18 2008
From: tomfool at as220.org (tom sgouros)
Date: Tue, 01 Jul 2008 09:37:18 -0400
Subject: [R-sig-Geo] API documentation?
In-Reply-To: <f5d848060807010616u52f08feeqe2e63f718b23c8aa@mail.gmail.com> 
References: <f5d848060806300948k61b21090v587ee3f33969d1e0@mail.gmail.com>
	<1214846674.6005.11.camel@fh-vrubio>
	<f5d848060806301039j5609156bj730d78e391e42d57@mail.gmail.com>
	<Pine.LNX.4.64.0807010026260.12805@reclus.nhh.no>
	<f5d848060807010155m5dcdf47cg7d280bcdce783c5c@mail.gmail.com>
	<29598.1214917254@as220.org>
	<f5d848060807010616u52f08feeqe2e63f718b23c8aa@mail.gmail.com>
Message-ID: <31775.1214919438@as220.org>


David Hugh-Jones <dhughj at essex.ac.uk> wrote:

> Yes, and a list of links to external tools would be great also.
> 
> Work so far is at
> http://wiki.r-project.org/rwiki/doku.php?id=tips:spatial-data . It's
> very incomplete so please feel free to improve!

Since mine is the perspective of a rank beginning, the only improvement
I'm qualified to make is to add the questions that confounded me last
winter.  So I just did that, adding a section called "when to use", and
apologize to all who click there expecting to find answers.  But my hope
is that answers will be forthcoming from some kind wiki-editor.

 -tom



> 
> 2008/7/1 tom sgouros <tomfool at as220.org>:
> >
> >
> > One thing you could begin with on that wiki is simply a description of
> > which class of geographical problems R is useful for and which class is
> > better to use a GIS for.
> >
> >  -tom
> >
> > --
> >  ------------------------
> >  tomfool at as220 dot org
> >  http://sgouros.com
> >  http://whatcheer.net
> >
> 


-- 
 ------------------------
 tomfool at as220 dot org
 http://sgouros.com  
 http://whatcheer.net



From jbarnier at ens-lsh.fr  Tue Jul  1 16:00:59 2008
From: jbarnier at ens-lsh.fr (Julien Barnier)
Date: Tue, 01 Jul 2008 16:00:59 +0200
Subject: [R-sig-Geo] thinlines equivalent?
References: <f5d848060806300700g29ee257ev3caf2a8c101e0d22@mail.gmail.com>
Message-ID: <87abh1aelg.fsf@z.nozav.org>

Hi David,

> I have a big dataset of points and am doing stuff on them that takes a
> lot of time. To speed it up, I would like to use "thinlines" from
> RArcinfo, which basically makes the maps "rougher" by throwing away
> points. Is there an equivalent function for SpatialPolygon type
> objects? (I assume that there's no way to convert _to_ Arcinfo, though
> I know it's possible to read from it).

Maybe you already know it, but I just discovered a free online tool
called MapShaper which allows to simplify shapefiles
?interactively?. I don't know if it can be useful for your data :

http://mapshaper.org

HTH,

Julien

-- 
Julien Barnier
Groupe de recherche sur la socialisation
ENS-LSH - Lyon, France



From davidhughjones at gmail.com  Tue Jul  1 20:33:39 2008
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Tue, 1 Jul 2008 20:33:39 +0200
Subject: [R-sig-Geo] merging sp objects
Message-ID: <f5d848060807011133v43573975m26fe78a5c7ace5ac@mail.gmail.com>

OK, writing http://wiki.r-project.org/rwiki/doku.php?id=tips:spatial-data:merging,
a question comes up:

I am trying to rbind() two SpatialLines (or SpatialPolygons or
whatever) objects and I keep getting the error that they have
overlapping IDs - not surprisingly as they were independently created.
Is there a simple way to give new IDs to these objects, and to know
how many I have to give?

David Hugh-Jones
PhD Candidate
Essex University Department of Government
http://davidhughjones.googlepages.com



From Roger.Bivand at nhh.no  Tue Jul  1 23:40:59 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 1 Jul 2008 23:40:59 +0200 (CEST)
Subject: [R-sig-Geo] merging sp objects
In-Reply-To: <f5d848060807011133v43573975m26fe78a5c7ace5ac@mail.gmail.com>
References: <f5d848060807011133v43573975m26fe78a5c7ace5ac@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0807012332230.30795@reclus.nhh.no>

On Tue, 1 Jul 2008, David Hugh-Jones wrote:

> OK, writing http://wiki.r-project.org/rwiki/doku.php?id=tips:spatial-data:merging,
> a question comes up:
>
> I am trying to rbind() two SpatialLines (or SpatialPolygons or
> whatever) objects and I keep getting the error that they have
> overlapping IDs - not surprisingly as they were independently created.
> Is there a simple way to give new IDs to these objects, and to know
> how many I have to give?

?spChFIDs in maptools for the methods, but the choice of unique IDs will 
depend on your domain. The default readOGR IDs are the feature IDs, 
usually 0:(n-1), which will not be unique. If there are known official 
codes, like US FIPS codes, they can be used to disambiguate. You can use 
unique(c(IDs_A, IDs_B)) to proceed. Have you looked at spRbind methods in 
maptools as an alternative to rbind.* in sp?

Roger

>
> David Hugh-Jones
> PhD Candidate
> Essex University Department of Government
> http://davidhughjones.googlepages.com
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From davidhughjones at gmail.com  Wed Jul  2 11:39:06 2008
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Wed, 2 Jul 2008 11:39:06 +0200
Subject: [R-sig-Geo] merging sp objects
In-Reply-To: <Pine.LNX.4.64.0807012332230.30795@reclus.nhh.no>
References: <f5d848060807011133v43573975m26fe78a5c7ace5ac@mail.gmail.com>
	<Pine.LNX.4.64.0807012332230.30795@reclus.nhh.no>
Message-ID: <f5d848060807020239m6849c1f7kc70f326487e39b4b@mail.gmail.com>

The spRbind methods also complain about non-unique IDs. Is there any
other difference between them and rbind?


David Hugh-Jones
PhD Candidate
Essex University Department of Government
http://davidhughjones.googlepages.com


2008/7/1 Roger Bivand <Roger.Bivand at nhh.no>:
> On Tue, 1 Jul 2008, David Hugh-Jones wrote:
>
>> OK, writing
>> http://wiki.r-project.org/rwiki/doku.php?id=tips:spatial-data:merging,
>> a question comes up:
>>
>> I am trying to rbind() two SpatialLines (or SpatialPolygons or
>> whatever) objects and I keep getting the error that they have
>> overlapping IDs - not surprisingly as they were independently created.
>> Is there a simple way to give new IDs to these objects, and to know
>> how many I have to give?
>
> ?spChFIDs in maptools for the methods, but the choice of unique IDs will
> depend on your domain. The default readOGR IDs are the feature IDs, usually
> 0:(n-1), which will not be unique. If there are known official codes, like
> US FIPS codes, they can be used to disambiguate. You can use unique(c(IDs_A,
> IDs_B)) to proceed. Have you looked at spRbind methods in maptools as an
> alternative to rbind.* in sp?
>
> Roger
>
>>
>> David Hugh-Jones
>> PhD Candidate
>> Essex University Department of Government
>> http://davidhughjones.googlepages.com
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Roger Bivand
> Economic Geography Section, Department of Economics, Norwegian School of
> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
>



From edzer.pebesma at uni-muenster.de  Wed Jul  2 11:58:47 2008
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 02 Jul 2008 11:58:47 +0200
Subject: [R-sig-Geo] merging sp objects
In-Reply-To: <f5d848060807020239m6849c1f7kc70f326487e39b4b@mail.gmail.com>
References: <f5d848060807011133v43573975m26fe78a5c7ace5ac@mail.gmail.com>	<Pine.LNX.4.64.0807012332230.30795@reclus.nhh.no>
	<f5d848060807020239m6849c1f7kc70f326487e39b4b@mail.gmail.com>
Message-ID: <486B5157.7060703@uni-muenster.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080702/fce9c7dd/attachment.pl>

From hi_ono2001 at ybb.ne.jp  Thu Jul  3 10:44:38 2008
From: hi_ono2001 at ybb.ne.jp (Hisaji ONO)
Date: Thu, 3 Jul 2008 17:44:38 +0900 (JST)
Subject: [R-sig-Geo] Impact of ArcGIS 8.3 beta's new spatial statistical
	functions in its Spatial Analyst Extension
Message-ID: <20080703084438.6540.qmail@web10708.mail.bbt.yahoo.co.jp>

Hi.

 What do you think about ArcGIS 8.3's new statistical
functions(Calculation of spatial or network, GWR,
Global/Local Moran, Gi etc.) in its Spatial Analyst
Extension described in
http://webhelp.esri.com/arcgisdesktop/9.3/pdf/Whats_New_In_ArcGIS_93.pdf?

 Current R's spdep's and spgwr's and others' end users
will loose interests of them and go to use ESRI's apart
from R's?

 And will decrease activities of developments of
(geo)spatial data analysis tools in R?



 Regards.



From dimitris123 at gmail.com  Thu Jul  3 11:22:11 2008
From: dimitris123 at gmail.com (Dimitris)
Date: Thu, 03 Jul 2008 10:22:11 +0100
Subject: [R-sig-Geo] Impact of ArcGIS 8.3 beta's new spatial statistical
 functions in its Spatial Analyst Extension
In-Reply-To: <20080703084438.6540.qmail@web10708.mail.bbt.yahoo.co.jp>
References: <20080703084438.6540.qmail@web10708.mail.bbt.yahoo.co.jp>
Message-ID: <486C9A43.2040400@gmail.com>

Hi list
(first post)

This new spatial analyst extension from ESRI looks promising and interesting. Nice stuff.
I believe we use R and it's geographical abilities not only because it is robust and programmaticaly 
efficient as well as an investment on ourself, but also because we do support open source and the 
promise of free software (free as beer) to the community.

Learning to use an ESRI software extension will help you do your work faster and without much 
trouble. I believe we are "here" (email list, R, programming, statistics, GIS, open source) because 
we value our freedom and we want to know they way software is working (what happens under the hood).

So choose a pill (see MATRIX). The easy way like everybody else, or the difficult way which 
eventually will pay back in multiple ways...

The decision is yours

-- 
Dimitris Kavroudakis
___________________
www.dimitrisk.gr


Hisaji ONO wrote:
> Hi.
> 
>  What do you think about ArcGIS 8.3's new statistical
> functions(Calculation of spatial or network, GWR,
> Global/Local Moran, Gi etc.) in its Spatial Analyst
> Extension described in
> http://webhelp.esri.com/arcgisdesktop/9.3/pdf/Whats_New_In_ArcGIS_93.pdf?
> 
>  Current R's spdep's and spgwr's and others' end users
> will loose interests of them and go to use ESRI's apart
> from R's?
> 
>  And will decrease activities of developments of
> (geo)spatial data analysis tools in R?
> 
> 
> 
>  Regards.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Dimitris Kavroudakis
___________________
www.dimitrisk.gr



From edzer.pebesma at uni-muenster.de  Thu Jul  3 13:33:16 2008
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 03 Jul 2008 13:33:16 +0200
Subject: [R-sig-Geo] kriging
In-Reply-To: <37382E8DCB905042969BA78541F6570624D4DE@kwek.ic.uva.nl>
References: <48569992.8020006@scimail.uwaterloo.ca><Pine.LNX.4.58.0806161720010.19855@macalan.c3sl.ufpr.br>	<4856D2F8.4060009@scimail.uwaterloo.ca>
	<37382E8DCB905042969BA78541F6570624D4DE@kwek.ic.uva.nl>
Message-ID: <486CB8FC.7050902@uni-muenster.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080703/c5c81f79/attachment.pl>

From edzer.pebesma at uni-muenster.de  Thu Jul  3 13:41:40 2008
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 03 Jul 2008 13:41:40 +0200
Subject: [R-sig-Geo] Impact of ArcGIS 8.3 beta's new spatial statistical
 functions in its Spatial Analyst Extension
In-Reply-To: <20080703084438.6540.qmail@web10708.mail.bbt.yahoo.co.jp>
References: <20080703084438.6540.qmail@web10708.mail.bbt.yahoo.co.jp>
Message-ID: <486CBAF4.8030505@uni-muenster.de>

Of course ESRI is trying to cover a wider field, as it has always done. 
Quite a few versions ago they started with a geostatistical analyst, 
which is used by many, but hasn't led to a decrease of interest in using 
R for geostatistical purposes, is my impression. It has some very nice 
features, misses many others, and is not extendible.
--
Edzer

Hisaji ONO wrote:
> Hi.
>
>  What do you think about ArcGIS 8.3's new statistical
> functions(Calculation of spatial or network, GWR,
> Global/Local Moran, Gi etc.) in its Spatial Analyst
> Extension described in
> http://webhelp.esri.com/arcgisdesktop/9.3/pdf/Whats_New_In_ArcGIS_93.pdf?
>
>  Current R's spdep's and spgwr's and others' end users
> will loose interests of them and go to use ESRI's apart
> from R's?
>
>  And will decrease activities of developments of
> (geo)spatial data analysis tools in R?
>
>
>
>  Regards.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (IfGI)
University of M?nster
http://ifgi.uni-muenster.de/



From p.hiemstra at geo.uu.nl  Thu Jul  3 13:54:31 2008
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Thu, 03 Jul 2008 13:54:31 +0200
Subject: [R-sig-Geo] Impact of ArcGIS 8.3 beta's new spatial statistical
 functions in its Spatial Analyst Extension
In-Reply-To: <20080703084438.6540.qmail@web10708.mail.bbt.yahoo.co.jp>
References: <20080703084438.6540.qmail@web10708.mail.bbt.yahoo.co.jp>
Message-ID: <486CBDF7.4010207@geo.uu.nl>

Dear Hisaji,

I think that the choice of people for R is not only based on the fact 
that a certain method is only available in R. R is much more flexible in 
working with data, allows scripting, allows you to see exactly how a 
method works, allows you to extend or develop methods and if you write 
in script files it also provides a record of what you have done. Apart 
from spatial analysis, R also provides a very wide range of "normal" 
statistical methods that are not available in ArcGIS (linear regression 
and such).

So I don't think a lot of people will forsake R once a few more methods 
become available in ArcGIS.

regards,
Paul

Hisaji ONO wrote:
> Hi.
>
>  What do you think about ArcGIS 8.3's new statistical
> functions(Calculation of spatial or network, GWR,
> Global/Local Moran, Gi etc.) in its Spatial Analyst
> Extension described in
> http://webhelp.esri.com/arcgisdesktop/9.3/pdf/Whats_New_In_ArcGIS_93.pdf?
>
>  Current R's spdep's and spgwr's and others' end users
> will loose interests of them and go to use ESRI's apart
> from R's?
>
>  And will decrease activities of developments of
> (geo)spatial data analysis tools in R?
>
>
>
>  Regards.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   


-- 
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone: 	+31302535773
Fax:	+31302531145
http://intamap.geo.uu.nl/~paul



From Thomas.Adams at noaa.gov  Thu Jul  3 14:59:07 2008
From: Thomas.Adams at noaa.gov (Thomas.Adams at noaa.gov)
Date: Thu, 03 Jul 2008 08:59:07 -0400
Subject: [R-sig-Geo] Impact of ArcGIS 8.3 beta's new spatial statistical
 functions in its Spatial Analyst Extension
In-Reply-To: <486CBDF7.4010207@geo.uu.nl>
References: <20080703084438.6540.qmail@web10708.mail.bbt.yahoo.co.jp>
	<486CBDF7.4010207@geo.uu.nl>
Message-ID: <4456a47559cbd798.486c94db@noaa.gov>

Paul,

Not to mention the huge cost of ESRI products and the fact that they run only on the MS-Windows platform. R also integrates well with GRASS GIS. Personally, I can not see any compelling reasons to go the ESRI route vs R/GRASS?

I feel a great debt of gratitude to the selfless developers of R & GRASS!

Tom

----- Original Message -----
From: Paul Hiemstra <p.hiemstra at geo.uu.nl>
Date: Thursday, July 3, 2008 7:54 am
Subject: Re: [R-sig-Geo] Impact of ArcGIS 8.3 beta's new spatial statistical functions in its Spatial Analyst Extension

> Dear Hisaji,
> 
> I think that the choice of people for R is not only based on the 
> fact 
> that a certain method is only available in R. R is much more 
> flexible in 
> working with data, allows scripting, allows you to see exactly how 
> a 
> method works, allows you to extend or develop methods and if you 
> write 
> in script files it also provides a record of what you have done. 
> Apart 
> from spatial analysis, R also provides a very wide range of 
> "normal" 
> statistical methods that are not available in ArcGIS (linear 
> regression 
> and such).
> 
> So I don't think a lot of people will forsake R once a few more 
> methods 
> become available in ArcGIS.
> 
> regards,
> Paul
> 
> Hisaji ONO wrote:
> > Hi.
> >
> >  What do you think about ArcGIS 8.3's new statistical
> > functions(Calculation of spatial or network, GWR,
> > Global/Local Moran, Gi etc.) in its Spatial Analyst
> > Extension described in
> > 
> http://webhelp.esri.com/arcgisdesktop/9.3/pdf/Whats_New_In_ArcGIS_93.pdf?>
> >  Current R's spdep's and spgwr's and others' end users
> > will loose interests of them and go to use ESRI's apart
> > from R's?
> >
> >  And will decrease activities of developments of
> > (geo)spatial data analysis tools in R?
> >
> >
> >
> >  Regards.
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at stat.math.ethz.ch
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >   
> 
> 
> -- 
> Drs. Paul Hiemstra
> Department of Physical Geography
> Faculty of Geosciences
> University of Utrecht
> Heidelberglaan 2
> P.O. Box 80.115
> 3508 TC Utrecht
> Phone: 	+31302535773
> Fax:	+31302531145
> http://intamap.geo.uu.nl/~paul
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



From john.callahan at udel.edu  Thu Jul  3 15:31:02 2008
From: john.callahan at udel.edu (John Callahan)
Date: Thu, 03 Jul 2008 09:31:02 -0400
Subject: [R-sig-Geo] Impact of ArcGIS 8.3 beta's new spatial statistical
 functions in its Spatial Analyst Extension
In-Reply-To: <4456a47559cbd798.486c94db@noaa.gov>
References: <20080703084438.6540.qmail@web10708.mail.bbt.yahoo.co.jp>	<486CBDF7.4010207@geo.uu.nl>
	<4456a47559cbd798.486c94db@noaa.gov>
Message-ID: <486CD496.2070100@udel.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080703/9edec1cc/attachment.pl>

From davidhughjones at gmail.com  Thu Jul  3 17:16:22 2008
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Thu, 3 Jul 2008 17:16:22 +0200
Subject: [R-sig-Geo] Impact of ArcGIS 8.3 beta's new spatial statistical
	functions in its Spatial Analyst Extension
In-Reply-To: <486CD496.2070100@udel.edu>
References: <20080703084438.6540.qmail@web10708.mail.bbt.yahoo.co.jp>
	<486CBDF7.4010207@geo.uu.nl> <4456a47559cbd798.486c94db@noaa.gov>
	<486CD496.2070100@udel.edu>
Message-ID: <f5d848060807030816x3ac0c07fm7c534d0ea516b566@mail.gmail.com>

Maybe this would be an appropriate time to mention

http://wiki.r-project.org/rwiki/doku.php?id=tips:spatial-data:when_to_use

How would list members answer this question?

David Hugh-Jones
PhD Candidate
Essex University Department of Government
http://davidhughjones.googlepages.com


2008/7/3 John Callahan <john.callahan at udel.edu>:
> I agree.  It's difficult to see any reason that someone who currently
> uses R/GRASS would go to ESRI for spatial statistics.  I come from a
> long history as an ESRI user with an interest in spatial stats.  As
> others have said, ArcGIS may give you the basics quickly and easily, but
> it is limited and expensive.
>
> Actually, ESRI giving spatial statistics any kind of attention is a
> bonus for R users.  The new ArcGIS spatial stats functions may draw in
> some typical GIS users to take a look (just like the ArcGIS GeoStat ext
> did years ago), but once they need to do more intensive work, or modify
> parameters, or deal with larger datasets, or get tired of crashes,
> etc..., they will look elsewhere (again, like ArcGIS GeoStat did), and
> R/GRASS is right there waiting.
>
> - John
>
> ****************************************
> John Callahan
> Geospatial Application Developer
>
> Delaware Geological Survey
> University of Delaware
> 227 Academy St, Newark DE 19716-7501
> Tel: (302) 831-3584
>
> Email: john.callahan at udel.edu
> http://www.dgs.udel.edu
> ****************************************
>
>
>
> Thomas.Adams at noaa.gov wrote:
>> Paul,
>>
>> Not to mention the huge cost of ESRI products and the fact that they run only on the MS-Windows platform. R also integrates well with GRASS GIS. Personally, I can not see any compelling reasons to go the ESRI route vs R/GRASS?
>>
>> I feel a great debt of gratitude to the selfless developers of R & GRASS!
>>
>> Tom
>>
>> ----- Original Message -----
>> From: Paul Hiemstra <p.hiemstra at geo.uu.nl>
>> Date: Thursday, July 3, 2008 7:54 am
>> Subject: Re: [R-sig-Geo] Impact of ArcGIS 8.3 beta's new spatial statistical functions in its Spatial Analyst Extension
>>
>>
>>> Dear Hisaji,
>>>
>>> I think that the choice of people for R is not only based on the
>>> fact
>>> that a certain method is only available in R. R is much more
>>> flexible in
>>> working with data, allows scripting, allows you to see exactly how
>>> a
>>> method works, allows you to extend or develop methods and if you
>>> write
>>> in script files it also provides a record of what you have done.
>>> Apart
>>> from spatial analysis, R also provides a very wide range of
>>> "normal"
>>> statistical methods that are not available in ArcGIS (linear
>>> regression
>>> and such).
>>>
>>> So I don't think a lot of people will forsake R once a few more
>>> methods
>>> become available in ArcGIS.
>>>
>>> regards,
>>> Paul
>>>
>>> Hisaji ONO wrote:
>>>
>>>> Hi.
>>>>
>>>>  What do you think about ArcGIS 8.3's new statistical
>>>> functions(Calculation of spatial or network, GWR,
>>>> Global/Local Moran, Gi etc.) in its Spatial Analyst
>>>> Extension described in
>>>>
>>>>
>>> http://webhelp.esri.com/arcgisdesktop/9.3/pdf/Whats_New_In_ArcGIS_93.pdf?>
>>>
>>>>  Current R's spdep's and spgwr's and others' end users
>>>> will loose interests of them and go to use ESRI's apart
>>>> from R's?
>>>>
>>>>  And will decrease activities of developments of
>>>> (geo)spatial data analysis tools in R?
>>>>
>>>>
>>>>
>>>>  Regards.
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>
>>> --
>>> Drs. Paul Hiemstra
>>> Department of Physical Geography
>>> Faculty of Geosciences
>>> University of Utrecht
>>> Heidelberglaan 2
>>> P.O. Box 80.115
>>> 3508 TC Utrecht
>>> Phone:       +31302535773
>>> Fax: +31302531145
>>> http://intamap.geo.uu.nl/~paul
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>        [[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>



From ddepew at sciborg.uwaterloo.ca  Thu Jul  3 20:02:36 2008
From: ddepew at sciborg.uwaterloo.ca (Dave Depew)
Date: Thu, 03 Jul 2008 14:02:36 -0400
Subject: [R-sig-Geo] kriging
In-Reply-To: <486CB8FC.7050902@uni-muenster.de>
References: <48569992.8020006@scimail.uwaterloo.ca><Pine.LNX.4.58.0806161720010.19855@macalan.c3sl.ufpr.br>	<4856D2F8.4060009@scimail.uwaterloo.ca>
	<37382E8DCB905042969BA78541F6570624D4DE@kwek.ic.uva.nl>
	<486CB8FC.7050902@uni-muenster.de>
Message-ID: <486D143C.10007@scimail.uwaterloo.ca>

Hi All,
I had a look at the paper suggested by Edzer. Some of my data is of 
similar nature (% cover rather than direct counts; but many zeroes in 
the data set). It is difficult to assess the presence of trends with 
this variable due to 1) a limited number of covariates (i.e x,y, and 
depth) but also due to the nature of variation of the data (the 
distribution is quite patchy due to variations in substrate, exposure 
degree, etc). For example;

panel.hist <- function(x, ...)
 {
     usr <- par("usr"); on.exit(par(usr))
     par(usr = c(usr[1:2], 0, 1.5) )
     h <- hist(x, plot = FALSE)
     breaks <- h$breaks; nB <- length(breaks)
     y <- h$counts; y <- y/max(y)
     rect(breaks[-nB], 0, breaks[-1], y, col="cyan", ...)
 }
 pairs(fulmar, diag.panel=panel.hist)

shows that the variables of interest are highly left skewed for both 
coast and fulmar variables. I guess I'm confused as to why glm usage in 
this case was chosen as the trend predictor? Was it simply due to the 
limited covariates and the skewed distributions? If one looks as the 
residuals of the glm, they show some characteristics of non-homogeneity. 
Eg; plot(glm98)

Does the glm procedure use GLS to estimate the model as opposed to OLS? 
Please excuse my beginner level ignorance, but I was under the 
assumption that when there was a trend present, GLS should be used. I 
guess part of my confusion also stems from difficulty visualizing the 
"linear" model specified in the fulmar demo (i.e. fulmar ~ coast + 
depth)....there appears in the scatterplots to be only weak 
relationships between each of the variables, a case not unlike the data 
I am working with. I've tried variations of ordinary, and universal 
kriging and also "regression kriging" as discussed below...they all seem 
to give similar predictions of distribution and actual data values. I 
had avoided using the kriging variance due to my perhaps incorrect 
assumption that the variance computed on trend residuals was not optimal.

I guess it really depends on the way in which one models the data and 
any underlying trends...and that there does not appear to be a "gold 
standard" for data such as the fulmar data set?

Edzer Pebesma wrote:
> Hengl, T. wrote:
>> I agree with Paulo - gstat can work with any linear model including the transforms of the original predictors e.g.:
>>
>> Z ~ X + X^2 + Y + Y^2    etc.
>>
>> The problem is that gstat implements the so-called Kriging-with-external-trend algorithm to make predictions (see section 2.1 of my lecture notes), which is mathematically more elegant, but then it accepts only a family of linear models (and not GLMs, regreesion-trees etc.). I have been promoting the concept of regression-kriging (deterministic and stochastic predictions seperated), but we still did not implement it in any package so far.
>>   
> And I can see why, as there are quite a few problems still to solve 
> (afaik) ahead of you. When you cut the problem in two, do the 
> regression estimation and residual prediction in two separate 
> processes (often under different assumptions, e.g. wrt spatial 
> correlation) you ignore the correlation between the two. Finding a 
> prediction variance by naively adding the variances of the two 
> components e.g. does not yield zero variance at observation locations, 
> because a non-zero correlation is ignored. At other locations, this 
> correlation is also non-zero. Furthermore, if you cut the problem in 
> two for e.g. binomial or Poisson distributed cases, in this approach 
> you likely end up with negative predictions or predictions above one 
> for the binomial case.
>
> Does the paper you refer to (by yourself) give solutions to these two 
> problems?
>> You can at any time separate the predictions (e.g. krige only the residuals), but then gstat will not give you the regression-kriging variance, and you can not run geostatistical simulations.
>>   
> No, of course not, for the reasons mentioned above. The gstat approach 
> is: if you want to make a mess, please take responsibility for it by 
> yourself (and don't blame me--through the package). There is a paper I 
> did it with count data, though, which is
>
> E.J. Pebesma, R.N.M. Duin, P.A. Burrough, 2005. Mapping Sea Bird 
> Densities over the North Sea: Spatially Aggregated Estimates and 
> Temporal Changes. Environmetrics 16 
> <http://www3.interscience.wiley.com/cgi-bin/jissue/110577560>, (6), p 
> 573-587 <http://dx.doi.org/10.1002/env.723>.
>
> and (part of) the analysis is found in
>
> library(gstat)
> demo(fulmar)
>
> I'm also confused by this term "regression kriging". Would you claim 
> that the universal kriging/kriging with (one or more) external drifts 
> implemented by gstat is not regression kriging? Are you actually 
> working on a package that does do regression kriging as you define it?
> --
> Edzer
>
>> see also:
>> https://stat.ethz.ch/pipermail/r-sig-geo/2008-February/003174.html
>>
>>
>> All the best,
>>
>> Tom Hengl
>> http://spatial-analyst.net
>>
>> Hengl, T., 2007. A Practical Guide to Geostatistical Mapping of
>> Environmental Variables. EUR 22904 EN Scientific and Technical Research
>> series, Office for Official Publications of the European Communities,
>> Luxemburg, 143 pp.
>> http://bookshop.europa.eu/uri?target=EUB:NOTICE:LBNA22904:EN:HTML
>>
>>
>> -----Original Message-----
>> From: r-sig-geo-bounces at stat.math.ethz.ch on behalf of Dave Depew
>> Sent: Mon 6/16/2008 10:54 PM
>> To: Paulo Justiniano Ribeiro Jr
>> Cc: r-sig-geo at stat.math.ethz.ch
>> Subject: Re: [R-sig-Geo] kriging
>>  
>> Ok,
>> What about higher order polynomials? I have fitted one using a gam to 
>> the data which which helps to normalize the residuals, and reduce the 
>> variance of the residuals.
>> Is it simply a matter of plugging in the function into the gstat command 
>> line? Or is it simpler to krig the residuals and then add the trend back 
>> to the interpolated residual grid?
>>
>>
>> Paulo Justiniano Ribeiro Jr wrote:
>>   
>>> Dave,
>>>
>>> what is necessary for UK is a relation expressed by a linear model, not
>>> necessaraly a linear relation between the variables.
>>> e.g. you could have a second degree polinomial and still work within the
>>> scope of universal kriging.
>>>
>>>
>>> On Mon, 16 Jun 2008, Dave Depew wrote:
>>>
>>>   
>>>     
>>>> Hi all,
>>>> I have a data set that I would like to krige to interpolate between
>>>> transects. There is a non-linear trend between two of the variables...my
>>>> impression from reading the gstat help file is that there must be a
>>>> linear relationship between the data to use universal kriging?
>>>> Second, would a method of non-linear regression followed by modelling of
>>>> the residuals with a semivariogram be an appropriate solution?
>>>>
>>>> Thanks,
>>>>
>>>> Dave
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>     
>>>>       
>>> Paulo Justiniano Ribeiro Jr
>>> LEG (Laboratorio de Estatistica e Geoinformacao)
>>> Universidade Federal do Parana
>>> Caixa Postal 19.081
>>> CEP 81.531-990
>>> Curitiba, PR  -  Brasil
>>> Tel: (+55) 41 3361 3573
>>> Fax: (+55) 41 3361 3141
>>> e-mail: paulojus AT  ufpr  br
>>> http://www.leg.ufpr.br/~paulojus
>>>
>>>
>>>
>>>
>>>     
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>   
>
> -- 
> Edzer Pebesma
> Institute for Geoinformatics (IfGI)
> University of M?nster
> http://ifgi.uni-muenster.de/
>



From Jin.Li at ga.gov.au  Fri Jul  4 02:18:32 2008
From: Jin.Li at ga.gov.au (Jin.Li at ga.gov.au)
Date: Fri, 4 Jul 2008 10:18:32 +1000
Subject: [R-sig-Geo] kriging [SEC=UNCLASSIFIED]
Message-ID: <8BD19F29B0E16E4F88277A997CD872C203EB6694@mail.agso.gov.au>

Hi All,

I have recently reviewed the spatial interpolation methods for environmental
scientists. Regression kriging (RK) is one of over 40 methods reviewed. Here
attached is what I described in the draft of my review. Obviously, RK
described in the review is different from Edzer's approach. Any comment?
Thanks.
Cheers,

Jin

--------------------------------------------
Jin Li, PhD
Spatial Modeller/
Computational Statistician
Marine & Coastal Environment
Geoscience Australia

Ph: 61 (02) 6249 9899
Fax: 61 (02) 6249 9956
email: jin.li at ga.gov.au
--------------------------------------------

-----Original Message-----
From: r-sig-geo-bounces at stat.math.ethz.ch
[mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of Edzer Pebesma
Sent: Thursday, 3 July 2008 9:33
To: Hengl, T.
Cc: r-sig-geo at stat.math.ethz.ch; Dave Depew
Subject: Re: [R-sig-Geo] kriging

Hengl, T. wrote:
> I agree with Paulo - gstat can work with any linear model including the
transforms of the original predictors e.g.:
>
> Z ~ X + X^2 + Y + Y^2    etc.
>
> The problem is that gstat implements the so-called
Kriging-with-external-trend algorithm to make predictions (see section 2.1 of
my lecture notes), which is mathematically more elegant, but then it accepts
only a family of linear models (and not GLMs, regreesion-trees etc.). I have
been promoting the concept of regression-kriging (deterministic and
stochastic predictions seperated), but we still did not implement it in any
package so far.
>   
And I can see why, as there are quite a few problems still to solve 
(afaik) ahead of you. When you cut the problem in two, do the regression 
estimation and residual prediction in two separate processes (often 
under different assumptions, e.g. wrt spatial correlation) you ignore 
the correlation between the two. Finding a prediction variance by 
naively adding the variances of the two components e.g. does not yield 
zero variance at observation locations, because a non-zero correlation 
is ignored. At other locations, this correlation is also non-zero. 
Furthermore, if you cut the problem in two for e.g. binomial or Poisson 
distributed cases, in this approach you likely end up with negative 
predictions or predictions above one for the binomial case.

Does the paper you refer to (by yourself) give solutions to these two 
problems?
> You can at any time separate the predictions (e.g. krige only the
residuals), but then gstat will not give you the regression-kriging variance,
and you can not run geostatistical simulations.
>   
No, of course not, for the reasons mentioned above. The gstat approach 
is: if you want to make a mess, please take responsibility for it by 
yourself (and don't blame me--through the package). There is a paper I 
did it with count data, though, which is

E.J. Pebesma, R.N.M. Duin, P.A. Burrough, 2005. Mapping Sea Bird 
Densities over the North Sea: Spatially Aggregated Estimates and 
Temporal Changes. Environmetrics 16 
<http://www3.interscience.wiley.com/cgi-bin/jissue/110577560>, (6), p 
573-587 <http://dx.doi.org/10.1002/env.723>.

and (part of) the analysis is found in

library(gstat)
demo(fulmar)

I'm also confused by this term "regression kriging". Would you claim 
that the universal kriging/kriging with (one or more) external drifts 
implemented by gstat is not regression kriging? Are you actually working 
on a package that does do regression kriging as you define it?
--
Edzer

> see also:
> https://stat.ethz.ch/pipermail/r-sig-geo/2008-February/003174.html
>
>
> All the best,
>
> Tom Hengl
> http://spatial-analyst.net
>
> Hengl, T., 2007. A Practical Guide to Geostatistical Mapping of
> Environmental Variables. EUR 22904 EN Scientific and Technical Research
> series, Office for Official Publications of the European Communities,
> Luxemburg, 143 pp.
> http://bookshop.europa.eu/uri?target=EUB:NOTICE:LBNA22904:EN:HTML
>
>
> -----Original Message-----
> From: r-sig-geo-bounces at stat.math.ethz.ch on behalf of Dave Depew
> Sent: Mon 6/16/2008 10:54 PM
> To: Paulo Justiniano Ribeiro Jr
> Cc: r-sig-geo at stat.math.ethz.ch
> Subject: Re: [R-sig-Geo] kriging
>  
> Ok,
> What about higher order polynomials? I have fitted one using a gam to 
> the data which which helps to normalize the residuals, and reduce the 
> variance of the residuals.
> Is it simply a matter of plugging in the function into the gstat command 
> line? Or is it simpler to krig the residuals and then add the trend back 
> to the interpolated residual grid?
>
>
> Paulo Justiniano Ribeiro Jr wrote:
>   
>> Dave,
>>
>> what is necessary for UK is a relation expressed by a linear model, not
>> necessaraly a linear relation between the variables.
>> e.g. you could have a second degree polinomial and still work within the
>> scope of universal kriging.
>>
>>
>> On Mon, 16 Jun 2008, Dave Depew wrote:
>>
>>   
>>     
>>> Hi all,
>>> I have a data set that I would like to krige to interpolate between
>>> transects. There is a non-linear trend between two of the variables...my
>>> impression from reading the gstat help file is that there must be a
>>> linear relationship between the data to use universal kriging?
>>> Second, would a method of non-linear regression followed by modelling of
>>> the residuals with a semivariogram be an appropriate solution?
>>>
>>> Thanks,
>>>
>>> Dave
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>     
>>>       
>> Paulo Justiniano Ribeiro Jr
>> LEG (Laboratorio de Estatistica e Geoinformacao)
>> Universidade Federal do Parana
>> Caixa Postal 19.081
>> CEP 81.531-990
>> Curitiba, PR  -  Brasil
>> Tel: (+55) 41 3361 3573
>> Fax: (+55) 41 3361 3141
>> e-mail: paulojus AT  ufpr  br
>> http://www.leg.ufpr.br/~paulojus
>>
>>
>>
>>
>>     
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (IfGI)
University of M?nster
http://ifgi.uni-muenster.de/


	[[alternative HTML version deleted]]

-------------- next part --------------
A non-text attachment was scrubbed...
Name: RK.doc
Type: application/msword
Size: 50688 bytes
Desc: RK.doc
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080704/c3c294f0/attachment.doc>

From FredeA.Togersen at agrsci.dk  Fri Jul  4 09:08:29 2008
From: FredeA.Togersen at agrsci.dk (=?iso-8859-1?Q?Frede_Aakmann_T=F8gersen?=)
Date: Fri, 4 Jul 2008 09:08:29 +0200
Subject: [R-sig-Geo] kriging
References: <48569992.8020006@scimail.uwaterloo.ca><Pine.LNX.4.58.0806161720010.19855@macalan.c3sl.ufpr.br>	<4856D2F8.4060009@scimail.uwaterloo.ca>
	<37382E8DCB905042969BA78541F6570624D4DE@kwek.ic.uva.nl>
	<486CB8FC.7050902@uni-muenster.de>
Message-ID: <C83C5E3DEEE97E498B74729A33F6EAEC04E87E9C@DJFPOST01.djf.agrsci.dk>

Sorry for dropping in late in this thread, which I have not followed closely. 
 
Perhaps Paulo Ribeiro can correct me but thinking of geostatistics in terms of statistical models then I think that the book by Diggle & Ribeiro:
 
http://www.springer.com/geosciences/computer+&+mathematical+applications/book/978-0-387-32907-9
 
would give some regular methods to do what some call regression kriging (and related methods) based on statistical models. I know this requires some distributional assumptions, but there are straight forward methods for Gaussian data as well as data with more general distribution as in "generalized linear models". Also moderate departure from the assumption of Gaussian data do not have that big effect on inferences in such models. The above reference is supporting the geoR package in R.
 
Med venlig hilsen / Regards

Frede Aakmann T?gersen
Forsker / Scientist


 	
 	 AARHUS UNIVERSITET / UNIVERSITY OF AARHUS	
Det Jordbrugsvidenskabelige Fakultet / Faculty of Agricultural Sciences	
Inst. for Genetik og Bioteknologi / Dept. of Genetics and Biotechnology	
Blichers All? 20, P.O. BOX 50	
DK-8830 Tjele	
 	
Tel:	 +45 8999 1900	
Direct:	 +45 8999 1878	
Mobile:	 +45 	
E-mail:	 FredeA.Togersen at agrsci.dk <mailto:FredeA.Togersen at agrsci.dk> 	
Web:	 www.agrsci.dk <https://djfpost.agrsci.dk/exchweb/bin/redir.asp?URL=http://www.agrsci.dk/> 	
________________________________

DJF udbyder nye uddannelser <https://djfpost.agrsci.dk/exchweb/bin/redir.asp?URL=http://www.agrsci.dk/ny_navigation/uddannelse/>  / DJF now offers new degree programmes <https://djfpost.agrsci.dk/exchweb/bin/redir.asp?URL=http://www.agrsci.org/content/view/full/34133> . 

Tilmeld dig DJF's nyhedsbrev / Subscribe Faculty of Agricultural Sciences Newsletter <https://djfpost.agrsci.dk/exchweb/bin/redir.asp?URL=http://www.agrsci.dk/user/register?lan=dan-DK> . 

Denne email kan indeholde fortrolig information. Enhver brug eller offentligg?relse af denne email uden skriftlig tilladelse fra DJF er ikke tilladt. Hvis De ikke er den tilt?nkte adressat, bedes De venligst straks underrette DJF samt slette emailen.

This email may contain information that is confidential. Any use or publication of this email without written permission from Faculty of Agricultural Sciences is not allowed. If you are not the intended recipient, please notify Faculty of Agricultural Sciences immediately and delete this email.



________________________________

Fra: r-sig-geo-bounces at stat.math.ethz.ch p? vegne af Edzer Pebesma
Sendt: to 03-07-2008 13:33
Til: Hengl, T.
Cc: r-sig-geo at stat.math.ethz.ch; Dave Depew
Emne: Re: [R-sig-Geo] kriging



Hengl, T. wrote:
> I agree with Paulo - gstat can work with any linear model including the transforms of the original predictors e.g.:
>
> Z ~ X + X^2 + Y + Y^2    etc.
>
> The problem is that gstat implements the so-called Kriging-with-external-trend algorithm to make predictions (see section 2.1 of my lecture notes), which is mathematically more elegant, but then it accepts only a family of linear models (and not GLMs, regreesion-trees etc.). I have been promoting the concept of regression-kriging (deterministic and stochastic predictions seperated), but we still did not implement it in any package so far.
>  
And I can see why, as there are quite a few problems still to solve
(afaik) ahead of you. When you cut the problem in two, do the regression
estimation and residual prediction in two separate processes (often
under different assumptions, e.g. wrt spatial correlation) you ignore
the correlation between the two. Finding a prediction variance by
naively adding the variances of the two components e.g. does not yield
zero variance at observation locations, because a non-zero correlation
is ignored. At other locations, this correlation is also non-zero.
Furthermore, if you cut the problem in two for e.g. binomial or Poisson
distributed cases, in this approach you likely end up with negative
predictions or predictions above one for the binomial case.

Does the paper you refer to (by yourself) give solutions to these two
problems?
> You can at any time separate the predictions (e.g. krige only the residuals), but then gstat will not give you the regression-kriging variance, and you can not run geostatistical simulations.
>  
No, of course not, for the reasons mentioned above. The gstat approach
is: if you want to make a mess, please take responsibility for it by
yourself (and don't blame me--through the package). There is a paper I
did it with count data, though, which is

E.J. Pebesma, R.N.M. Duin, P.A. Burrough, 2005. Mapping Sea Bird
Densities over the North Sea: Spatially Aggregated Estimates and
Temporal Changes. Environmetrics 16
<http://www3.interscience.wiley.com/cgi-bin/jissue/110577560>, (6), p
573-587 <http://dx.doi.org/10.1002/env.723>.

and (part of) the analysis is found in

library(gstat)
demo(fulmar)

I'm also confused by this term "regression kriging". Would you claim
that the universal kriging/kriging with (one or more) external drifts
implemented by gstat is not regression kriging? Are you actually working
on a package that does do regression kriging as you define it?
--
Edzer

> see also:
> https://stat.ethz.ch/pipermail/r-sig-geo/2008-February/003174.html
>
>
> All the best,
>
> Tom Hengl
> http://spatial-analyst.net <http://spatial-analyst.net/> 
>
> Hengl, T., 2007. A Practical Guide to Geostatistical Mapping of
> Environmental Variables. EUR 22904 EN Scientific and Technical Research
> series, Office for Official Publications of the European Communities,
> Luxemburg, 143 pp.
> http://bookshop.europa.eu/uri?target=EUB:NOTICE:LBNA22904:EN:HTML
>
>
> -----Original Message-----
> From: r-sig-geo-bounces at stat.math.ethz.ch on behalf of Dave Depew
> Sent: Mon 6/16/2008 10:54 PM
> To: Paulo Justiniano Ribeiro Jr
> Cc: r-sig-geo at stat.math.ethz.ch
> Subject: Re: [R-sig-Geo] kriging
> 
> Ok,
> What about higher order polynomials? I have fitted one using a gam to
> the data which which helps to normalize the residuals, and reduce the
> variance of the residuals.
> Is it simply a matter of plugging in the function into the gstat command
> line? Or is it simpler to krig the residuals and then add the trend back
> to the interpolated residual grid?
>
>
> Paulo Justiniano Ribeiro Jr wrote:
>  
>> Dave,
>>
>> what is necessary for UK is a relation expressed by a linear model, not
>> necessaraly a linear relation between the variables.
>> e.g. you could have a second degree polinomial and still work within the
>> scope of universal kriging.
>>
>>
>> On Mon, 16 Jun 2008, Dave Depew wrote:
>>
>>  
>>    
>>> Hi all,
>>> I have a data set that I would like to krige to interpolate between
>>> transects. There is a non-linear trend between two of the variables...my
>>> impression from reading the gstat help file is that there must be a
>>> linear relationship between the data to use universal kriging?
>>> Second, would a method of non-linear regression followed by modelling of
>>> the residuals with a semivariogram be an appropriate solution?
>>>
>>> Thanks,
>>>
>>> Dave
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>    
>>>      
>> Paulo Justiniano Ribeiro Jr
>> LEG (Laboratorio de Estatistica e Geoinformacao)
>> Universidade Federal do Parana
>> Caixa Postal 19.081
>> CEP 81.531-990
>> Curitiba, PR  -  Brasil
>> Tel: (+55) 41 3361 3573
>> Fax: (+55) 41 3361 3141
>> e-mail: paulojus AT  ufpr  br
>> http://www.leg.ufpr.br/~paulojus
>>
>>
>>
>>
>>    
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
>       [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>  

--
Edzer Pebesma
Institute for Geoinformatics (IfGI)
University of M?nster
http://ifgi.uni-muenster.de/


        [[alternative HTML version deleted]]



From T.Hengl at uva.nl  Fri Jul  4 09:54:37 2008
From: T.Hengl at uva.nl (Hengl, T.)
Date: Fri, 4 Jul 2008 09:54:37 +0200
Subject: [R-sig-Geo] kriging [SEC=UNCLASSIFIED]
References: <8BD19F29B0E16E4F88277A997CD872C203EB6694@mail.agso.gov.au>
Message-ID: <37382E8DCB905042969BA78541F6570624D52C@kwek.ic.uva.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080704/6809cdab/attachment.pl>

From edzer.pebesma at uni-muenster.de  Fri Jul  4 10:56:07 2008
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 04 Jul 2008 10:56:07 +0200
Subject: [R-sig-Geo] kriging [SEC=UNCLASSIFIED]
In-Reply-To: <37382E8DCB905042969BA78541F6570624D52C@kwek.ic.uva.nl>
References: <8BD19F29B0E16E4F88277A997CD872C203EB6694@mail.agso.gov.au>
	<37382E8DCB905042969BA78541F6570624D52C@kwek.ic.uva.nl>
Message-ID: <486DE5A7.8020607@uni-muenster.de>

Hengl, T. wrote:
>  Anybody interested in these topics should take a look at sections 2.8 "Final notes about regression-kriging" and "2.2 Local versus localized models" in my lecture notes (I like to refer to it because it is an open-access material).
>   
I noticed. But is it peer-reviewed?

-- 
Edzer Pebesma
Institute for Geoinformatics (IfGI)
University of M?nster
http://ifgi.uni-muenster.de/



From edzer.pebesma at uni-muenster.de  Fri Jul  4 11:19:53 2008
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 04 Jul 2008 11:19:53 +0200
Subject: [R-sig-Geo] kriging
In-Reply-To: <C83C5E3DEEE97E498B74729A33F6EAEC04E87E9C@DJFPOST01.djf.agrsci.dk>
References: <48569992.8020006@scimail.uwaterloo.ca><Pine.LNX.4.58.0806161720010.19855@macalan.c3sl.ufpr.br>	<4856D2F8.4060009@scimail.uwaterloo.ca>
	<37382E8DCB905042969BA78541F6570624D4DE@kwek.ic.uva.nl>
	<486CB8FC.7050902@uni-muenster.de>
	<C83C5E3DEEE97E498B74729A33F6EAEC04E87E9C@DJFPOST01.djf.agrsci.dk>
Message-ID: <486DEB39.2030305@uni-muenster.de>

I completely agree with you that this seems the more coherent 
statistical modelling approach to these kind of problems. At the time we 
did the analysis on /Fulmaris glacialis/, which was 2003, the 
corresponding approach was already offered by package geoRglm (using 
MCMC; it extends geoR with glm-type models) but seemed computationally 
too demanding for samples of that size (a few hundred observations, two 
years).

Tom, is this approach mentioned in one of your teaching guides?
--
Edzer

Frede Aakmann T?gersen wrote:
> Sorry for dropping in late in this thread, which I have not followed closely. 
>  
> Perhaps Paulo Ribeiro can correct me but thinking of geostatistics in terms of statistical models then I think that the book by Diggle & Ribeiro:
>  
> http://www.springer.com/geosciences/computer+&+mathematical+applications/book/978-0-387-32907-9
>  
> would give some regular methods to do what some call regression kriging (and related methods) based on statistical models. I know this requires some distributional assumptions, but there are straight forward methods for Gaussian data as well as data with more general distribution as in "generalized linear models". Also moderate departure from the assumption of Gaussian data do not have that big effect on inferences in such models. The above reference is supporting the geoR package in R.
>  
> Med venlig hilsen / Regards
>
> Frede Aakmann T?gersen
> Forsker / Scientist
>
>
>  	
>  	 AARHUS UNIVERSITET / UNIVERSITY OF AARHUS	
> Det Jordbrugsvidenskabelige Fakultet / Faculty of Agricultural Sciences	
> Inst. for Genetik og Bioteknologi / Dept. of Genetics and Biotechnology	
> Blichers All? 20, P.O. BOX 50	
> DK-8830 Tjele	
>  	
> Tel:	 +45 8999 1900	
> Direct:	 +45 8999 1878	
> Mobile:	 +45 	
> E-mail:	 FredeA.Togersen at agrsci.dk <mailto:FredeA.Togersen at agrsci.dk> 	
> Web:	 www.agrsci.dk <https://djfpost.agrsci.dk/exchweb/bin/redir.asp?URL=http://www.agrsci.dk/> 	
> ________________________________
>
> DJF udbyder nye uddannelser <https://djfpost.agrsci.dk/exchweb/bin/redir.asp?URL=http://www.agrsci.dk/ny_navigation/uddannelse/>  / DJF now offers new degree programmes <https://djfpost.agrsci.dk/exchweb/bin/redir.asp?URL=http://www.agrsci.org/content/view/full/34133> . 
>
> Tilmeld dig DJF's nyhedsbrev / Subscribe Faculty of Agricultural Sciences Newsletter <https://djfpost.agrsci.dk/exchweb/bin/redir.asp?URL=http://www.agrsci.dk/user/register?lan=dan-DK> . 
>
> Denne email kan indeholde fortrolig information. Enhver brug eller offentligg?relse af denne email uden skriftlig tilladelse fra DJF er ikke tilladt. Hvis De ikke er den tilt?nkte adressat, bedes De venligst straks underrette DJF samt slette emailen.
>
> This email may contain information that is confidential. Any use or publication of this email without written permission from Faculty of Agricultural Sciences is not allowed. If you are not the intended recipient, please notify Faculty of Agricultural Sciences immediately and delete this email.
>
>  
>
> ________________________________
>
> Fra: r-sig-geo-bounces at stat.math.ethz.ch p? vegne af Edzer Pebesma
> Sendt: to 03-07-2008 13:33
> Til: Hengl, T.
> Cc: r-sig-geo at stat.math.ethz.ch; Dave Depew
> Emne: Re: [R-sig-Geo] kriging
>
>
>
> Hengl, T. wrote:
>   
>> I agree with Paulo - gstat can work with any linear model including the transforms of the original predictors e.g.:
>>
>> Z ~ X + X^2 + Y + Y^2    etc.
>>
>> The problem is that gstat implements the so-called Kriging-with-external-trend algorithm to make predictions (see section 2.1 of my lecture notes), which is mathematically more elegant, but then it accepts only a family of linear models (and not GLMs, regreesion-trees etc.). I have been promoting the concept of regression-kriging (deterministic and stochastic predictions seperated), but we still did not implement it in any package so far.
>>  
>>     
> And I can see why, as there are quite a few problems still to solve
> (afaik) ahead of you. When you cut the problem in two, do the regression
> estimation and residual prediction in two separate processes (often
> under different assumptions, e.g. wrt spatial correlation) you ignore
> the correlation between the two. Finding a prediction variance by
> naively adding the variances of the two components e.g. does not yield
> zero variance at observation locations, because a non-zero correlation
> is ignored. At other locations, this correlation is also non-zero.
> Furthermore, if you cut the problem in two for e.g. binomial or Poisson
> distributed cases, in this approach you likely end up with negative
> predictions or predictions above one for the binomial case.
>
> Does the paper you refer to (by yourself) give solutions to these two
> problems?
>   
>> You can at any time separate the predictions (e.g. krige only the residuals), but then gstat will not give you the regression-kriging variance, and you can not run geostatistical simulations.
>>  
>>     
> No, of course not, for the reasons mentioned above. The gstat approach
> is: if you want to make a mess, please take responsibility for it by
> yourself (and don't blame me--through the package). There is a paper I
> did it with count data, though, which is
>
> E.J. Pebesma, R.N.M. Duin, P.A. Burrough, 2005. Mapping Sea Bird
> Densities over the North Sea: Spatially Aggregated Estimates and
> Temporal Changes. Environmetrics 16
> <http://www3.interscience.wiley.com/cgi-bin/jissue/110577560>, (6), p
> 573-587 <http://dx.doi.org/10.1002/env.723>.
>
> and (part of) the analysis is found in
>
> library(gstat)
> demo(fulmar)
>
> I'm also confused by this term "regression kriging". Would you claim
> that the universal kriging/kriging with (one or more) external drifts
> implemented by gstat is not regression kriging? Are you actually working
> on a package that does do regression kriging as you define it?
> --
> Edzer
>
>   
>> see also:
>> https://stat.ethz.ch/pipermail/r-sig-geo/2008-February/003174.html
>>
>>
>> All the best,
>>
>> Tom Hengl
>> http://spatial-analyst.net <http://spatial-analyst.net/> 
>>
>> Hengl, T., 2007. A Practical Guide to Geostatistical Mapping of
>> Environmental Variables. EUR 22904 EN Scientific and Technical Research
>> series, Office for Official Publications of the European Communities,
>> Luxemburg, 143 pp.
>> http://bookshop.europa.eu/uri?target=EUB:NOTICE:LBNA22904:EN:HTML
>>
>>
>> -----Original Message-----
>> From: r-sig-geo-bounces at stat.math.ethz.ch on behalf of Dave Depew
>> Sent: Mon 6/16/2008 10:54 PM
>> To: Paulo Justiniano Ribeiro Jr
>> Cc: r-sig-geo at stat.math.ethz.ch
>> Subject: Re: [R-sig-Geo] kriging
>>
>> Ok,
>> What about higher order polynomials? I have fitted one using a gam to
>> the data which which helps to normalize the residuals, and reduce the
>> variance of the residuals.
>> Is it simply a matter of plugging in the function into the gstat command
>> line? Or is it simpler to krig the residuals and then add the trend back
>> to the interpolated residual grid?
>>
>>
>> Paulo Justiniano Ribeiro Jr wrote:
>>  
>>     
>>> Dave,
>>>
>>> what is necessary for UK is a relation expressed by a linear model, not
>>> necessaraly a linear relation between the variables.
>>> e.g. you could have a second degree polinomial and still work within the
>>> scope of universal kriging.
>>>
>>>
>>> On Mon, 16 Jun 2008, Dave Depew wrote:
>>>
>>>  
>>>    
>>>       
>>>> Hi all,
>>>> I have a data set that I would like to krige to interpolate between
>>>> transects. There is a non-linear trend between two of the variables...my
>>>> impression from reading the gstat help file is that there must be a
>>>> linear relationship between the data to use universal kriging?
>>>> Second, would a method of non-linear regression followed by modelling of
>>>> the residuals with a semivariogram be an appropriate solution?
>>>>
>>>> Thanks,
>>>>
>>>> Dave
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>    
>>>>      
>>>>         
>>> Paulo Justiniano Ribeiro Jr
>>> LEG (Laboratorio de Estatistica e Geoinformacao)
>>> Universidade Federal do Parana
>>> Caixa Postal 19.081
>>> CEP 81.531-990
>>> Curitiba, PR  -  Brasil
>>> Tel: (+55) 41 3361 3573
>>> Fax: (+55) 41 3361 3141
>>> e-mail: paulojus AT  ufpr  br
>>> http://www.leg.ufpr.br/~paulojus
>>>
>>>
>>>
>>>
>>>    
>>>       
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>>
>>       [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>  
>>     
>
> --
> Edzer Pebesma
> Institute for Geoinformatics (IfGI)
> University of M?nster
> http://ifgi.uni-muenster.de/
>
>
>         [[alternative HTML version deleted]]
>
>
>
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (IfGI)
University of M?nster
http://ifgi.uni-muenster.de/



From paulojus at c3sl.ufpr.br  Fri Jul  4 13:57:25 2008
From: paulojus at c3sl.ufpr.br (Paulo Justiniano Ribeiro Jr)
Date: Fri, 4 Jul 2008 08:57:25 -0300 (BRT)
Subject: [R-sig-Geo] kriging
In-Reply-To: <C83C5E3DEEE97E498B74729A33F6EAEC04E87E9C@DJFPOST01.djf.agrsci.dk>
References: <48569992.8020006@scimail.uwaterloo.ca><Pine.LNX.4.58.0806161720010.19855@macalan.c3sl.ufpr.br>
	<4856D2F8.4060009@scimail.uwaterloo.ca>
	<37382E8DCB905042969BA78541F6570624D4DE@kwek.ic.uva.nl>
	<486CB8FC.7050902@uni-muenster.de>
	<C83C5E3DEEE97E498B74729A33F6EAEC04E87E9C@DJFPOST01.djf.agrsci.dk>
Message-ID: <Pine.LNX.4.58.0807040814560.31370@dalmore.c3sl.ufpr.br>

Dear Frede

I would not say that the methods discussed in the MBG book should be
refered as "regression kriging".

As far as I understand, the term "regression kriging", despite of all
variations, refer to proposals/algorithms for which predictions are
obtained combining two stages:
1. get predictions by some method (linear model, GLM, GAM, trees, etc)
   without accounting for the spatial correlations by a stochastic
   mechanism, without assuming a random field
2. either use or combine the above with some sort of kriging, i.e.,
   spatial predictions assuming and using the spatial covariance structure
This brings issue on how to assess prediction variances and so on.


The algorithms in geoR and geoRglm **does not** follow
this kind of two stage route.
**Given the assumed model**, the inference and prediction
follows from it and therefore likelihood based methods
(including Bayesian) can be adopted.


This does come with some price ---
As Edzer already pointed, for very large number of data points
this can be prohibitive for dealing with large covariance matrices
and this is a limitation of geoR/geoRglm.
There are possible workarounds still within the same paradigma
but not (yet?) implemented in such packages


best
P.J.

Paulo Justiniano Ribeiro Jr
LEG (Laboratorio de Estatistica e Geoinformacao)
Universidade Federal do Parana
Caixa Postal 19.081
CEP 81.531-990
Curitiba, PR  -  Brasil
Tel: (+55) 41 3361 3573
Fax: (+55) 41 3361 3141
e-mail: paulojus AT  ufpr  br
http://www.leg.ufpr.br/~paulojus



On Fri, 4 Jul 2008, Frede Aakmann T?gersen wrote:

> Sorry for dropping in late in this thread, which I have not followed closely.
>
> Perhaps Paulo Ribeiro can correct me but thinking of geostatistics in terms of statistical models then I think that the book by Diggle & Ribeiro:
>
> http://www.springer.com/geosciences/computer+&+mathematical+applications/book/978-0-387-32907-9
>  would give some regular methods to do what some call regression kriging
> (and related methods) based on statistical models. I know this requires
> some distributional assumptions, but there are straight forward methods
> for Gaussian data as well as data with more general distribution as in
> "generalized linear models". Also moderate departure from the assumption
> of Gaussian data do not have that big effect on inferences in such
> models. The above reference is supporting the geoR package in R.
>
> Med venlig hilsen / Regards
>
> Frede Aakmann T?gersen
> Forsker / Scientist
>
>
>
>  	 AARHUS UNIVERSITET / UNIVERSITY OF AARHUS
> Det Jordbrugsvidenskabelige Fakultet / Faculty of Agricultural Sciences
> Inst. for Genetik og Bioteknologi / Dept. of Genetics and Biotechnology
> Blichers All? 20, P.O. BOX 50
> DK-8830 Tjele
>
> Tel:	 +45 8999 1900
> Direct:	 +45 8999 1878
> Mobile:	 +45
> E-mail:	 FredeA.Togersen at agrsci.dk <mailto:FredeA.Togersen at agrsci.dk>
> Web:	 www.agrsci.dk <https://djfpost.agrsci.dk/exchweb/bin/redir.asp?URL=http://www.agrsci.dk/>
> ________________________________
>
> DJF udbyder nye uddannelser <https://djfpost.agrsci.dk/exchweb/bin/redir.asp?URL=http://www.agrsci.dk/ny_navigation/uddannelse/>  / DJF now offers new degree programmes <https://djfpost.agrsci.dk/exchweb/bin/redir.asp?URL=http://www.agrsci.org/content/view/full/34133> .
>
> Tilmeld dig DJF's nyhedsbrev / Subscribe Faculty of Agricultural Sciences Newsletter <https://djfpost.agrsci.dk/exchweb/bin/redir.asp?URL=http://www.agrsci.dk/user/register?lan=dan-DK> .
>
> Denne email kan indeholde fortrolig information. Enhver brug eller offentligg?relse af denne email uden skriftlig tilladelse fra DJF er ikke tilladt. Hvis De ikke er den tilt?nkte adressat, bedes De venligst straks underrette DJF samt slette emailen.
>
> This email may contain information that is confidential. Any use or publication of this email without written permission from Faculty of Agricultural Sciences is not allowed. If you are not the intended recipient, please notify Faculty of Agricultural Sciences immediately and delete this email.
>
>
>
> ________________________________
>
> Fra: r-sig-geo-bounces at stat.math.ethz.ch p? vegne af Edzer Pebesma
> Sendt: to 03-07-2008 13:33
> Til: Hengl, T.
> Cc: r-sig-geo at stat.math.ethz.ch; Dave Depew
> Emne: Re: [R-sig-Geo] kriging
>
>
>
> Hengl, T. wrote:
> > I agree with Paulo - gstat can work with any linear model including the transforms of the original predictors e.g.:
> >
> > Z ~ X + X^2 + Y + Y^2    etc.
> >
> > The problem is that gstat implements the so-called Kriging-with-external-trend algorithm to make predictions (see section 2.1 of my lecture notes), which is mathematically more elegant, but then it accepts only a family of linear models (and not GLMs, regreesion-trees etc.). I have been promoting the concept of regression-kriging (deterministic and stochastic predictions seperated), but we still did not implement it in any package so far.
> >
> And I can see why, as there are quite a few problems still to solve
> (afaik) ahead of you. When you cut the problem in two, do the regression
> estimation and residual prediction in two separate processes (often
> under different assumptions, e.g. wrt spatial correlation) you ignore
> the correlation between the two. Finding a prediction variance by
> naively adding the variances of the two components e.g. does not yield
> zero variance at observation locations, because a non-zero correlation
> is ignored. At other locations, this correlation is also non-zero.
> Furthermore, if you cut the problem in two for e.g. binomial or Poisson
> distributed cases, in this approach you likely end up with negative
> predictions or predictions above one for the binomial case.
>
> Does the paper you refer to (by yourself) give solutions to these two
> problems?
> > You can at any time separate the predictions (e.g. krige only the residuals), but then gstat will not give you the regression-kriging variance, and you can not run geostatistical simulations.
> >
> No, of course not, for the reasons mentioned above. The gstat approach
> is: if you want to make a mess, please take responsibility for it by
> yourself (and don't blame me--through the package). There is a paper I
> did it with count data, though, which is
>
> E.J. Pebesma, R.N.M. Duin, P.A. Burrough, 2005. Mapping Sea Bird
> Densities over the North Sea: Spatially Aggregated Estimates and
> Temporal Changes. Environmetrics 16
> <http://www3.interscience.wiley.com/cgi-bin/jissue/110577560>, (6), p
> 573-587 <http://dx.doi.org/10.1002/env.723>.
>
> and (part of) the analysis is found in
>
> library(gstat)
> demo(fulmar)
>
> I'm also confused by this term "regression kriging". Would you claim
> that the universal kriging/kriging with (one or more) external drifts
> implemented by gstat is not regression kriging? Are you actually working
> on a package that does do regression kriging as you define it?
> --
> Edzer
>
> > see also:
> > https://stat.ethz.ch/pipermail/r-sig-geo/2008-February/003174.html
> >
> >
> > All the best,
> >
> > Tom Hengl
> > http://spatial-analyst.net <http://spatial-analyst.net/>
> >
> > Hengl, T., 2007. A Practical Guide to Geostatistical Mapping of
> > Environmental Variables. EUR 22904 EN Scientific and Technical Research
> > series, Office for Official Publications of the European Communities,
> > Luxemburg, 143 pp.
> > http://bookshop.europa.eu/uri?target=EUB:NOTICE:LBNA22904:EN:HTML
> >
> >
> > -----Original Message-----
> > From: r-sig-geo-bounces at stat.math.ethz.ch on behalf of Dave Depew
> > Sent: Mon 6/16/2008 10:54 PM
> > To: Paulo Justiniano Ribeiro Jr
> > Cc: r-sig-geo at stat.math.ethz.ch
> > Subject: Re: [R-sig-Geo] kriging
> >
> > Ok,
> > What about higher order polynomials? I have fitted one using a gam to
> > the data which which helps to normalize the residuals, and reduce the
> > variance of the residuals.
> > Is it simply a matter of plugging in the function into the gstat command
> > line? Or is it simpler to krig the residuals and then add the trend back
> > to the interpolated residual grid?
> >
> >
> > Paulo Justiniano Ribeiro Jr wrote:
> >
> >> Dave,
> >>
> >> what is necessary for UK is a relation expressed by a linear model, not
> >> necessaraly a linear relation between the variables.
> >> e.g. you could have a second degree polinomial and still work within the
> >> scope of universal kriging.
> >>
> >>
> >> On Mon, 16 Jun 2008, Dave Depew wrote:
> >>
> >>
> >>
> >>> Hi all,
> >>> I have a data set that I would like to krige to interpolate between
> >>> transects. There is a non-linear trend between two of the variables...my
> >>> impression from reading the gstat help file is that there must be a
> >>> linear relationship between the data to use universal kriging?
> >>> Second, would a method of non-linear regression followed by modelling of
> >>> the residuals with a semivariogram be an appropriate solution?
> >>>
> >>> Thanks,
> >>>
> >>> Dave
> >>>
> >>> _______________________________________________
> >>> R-sig-Geo mailing list
> >>> R-sig-Geo at stat.math.ethz.ch
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>>
> >>>
> >>>
> >> Paulo Justiniano Ribeiro Jr
> >> LEG (Laboratorio de Estatistica e Geoinformacao)
> >> Universidade Federal do Parana
> >> Caixa Postal 19.081
> >> CEP 81.531-990
> >> Curitiba, PR  -  Brasil
> >> Tel: (+55) 41 3361 3573
> >> Fax: (+55) 41 3361 3141
> >> e-mail: paulojus AT  ufpr  br
> >> http://www.leg.ufpr.br/~paulojus
> >>
> >>
> >>
> >>
> >>
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at stat.math.ethz.ch
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at stat.math.ethz.ch
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
> --
> Edzer Pebesma
> Institute for Geoinformatics (IfGI)
> University of M?nster
> http://ifgi.uni-muenster.de/
>
>
>         [[alternative HTML version deleted]]
>
>
>
>



From hi_ono2001 at ybb.ne.jp  Fri Jul  4 16:06:18 2008
From: hi_ono2001 at ybb.ne.jp (Hisaji ONO)
Date: Fri, 4 Jul 2008 23:06:18 +0900 (JST)
Subject: [R-sig-Geo] Impact of ArcGIS 8.3 beta's new spatial statistical
	functions in its Spatial Analyst Extension
In-Reply-To: <486CD496.2070100@udel.edu>
Message-ID: <20080704140618.33680.qmail@web10715.mail.bbt.yahoo.co.jp>

Thank you for your very interesting responses.

 Today I found following ArcGIS 9.3's GWR info in ESRI
site.

http://webhelp.esri.com/arcgisdesktop/9.3/index.cfm?TopicName=Geographically_Weighted_Regression_%28Spatial_Statistics%29



 Regards.



From Morten.Sickel at nrpa.no  Fri Jul  4 16:41:44 2008
From: Morten.Sickel at nrpa.no (Morten Sickel)
Date: Fri, 4 Jul 2008 16:41:44 +0200
Subject: [R-sig-Geo] Select polygons
Message-ID: <0CE0A03D0F390E46B12B64489D20B1D402E7BB62BE@MAILHUB.NRPA.LOCAL>

I am reading in a shape file using read.shape() I would like to select some of the polygons in the shape file, depending on data in the att.data ... but for some (probably simple) reason, it doesn't work.

having read the shape file into the object nw, I would believe that

nw2=nw[nw$att.data$FTEMA>0,]

would select those polygons with FTEMA>0 but it give sme the error "incorrect number of dimentions" removing the last , I think I get the selection I wants, but what it returns is no longer a map object...

Any clues anywhere?

--
Morten Sickel
Norwegian Radiation Protection Authority
tel (+47) 6716 2551



From edzer.pebesma at uni-muenster.de  Fri Jul  4 16:51:28 2008
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 04 Jul 2008 16:51:28 +0200
Subject: [R-sig-Geo] Select polygons
In-Reply-To: <0CE0A03D0F390E46B12B64489D20B1D402E7BB62BE@MAILHUB.NRPA.LOCAL>
References: <0CE0A03D0F390E46B12B64489D20B1D402E7BB62BE@MAILHUB.NRPA.LOCAL>
Message-ID: <486E38F0.40309@uni-muenster.de>

The "new style" way of doing this, using the classes of package sp, 
would be reading the shape with readOGR (in package rgdal), and then 
selecting by

nw2 = nw[nw$FTEMA>0, ]
--
Edzer

Morten Sickel wrote:
> I am reading in a shape file using read.shape() I would like to select some of the polygons in the shape file, depending on data in the att.data ... but for some (probably simple) reason, it doesn't work.
>
> having read the shape file into the object nw, I would believe that
>
> nw2=nw[nw$att.data$FTEMA>0,]
>
> would select those polygons with FTEMA>0 but it give sme the error "incorrect number of dimentions" removing the last , I think I get the selection I wants, but what it returns is no longer a map object...
>
> Any clues anywhere?
>
> --
> Morten Sickel
> Norwegian Radiation Protection Authority
> tel (+47) 6716 2551
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (IfGI)
University of M?nster
http://ifgi.uni-muenster.de/



From Morten.Sickel at nrpa.no  Fri Jul  4 17:04:18 2008
From: Morten.Sickel at nrpa.no (Morten Sickel)
Date: Fri, 4 Jul 2008 17:04:18 +0200
Subject: [R-sig-Geo] Select polygons
In-Reply-To: <486E38F0.40309@uni-muenster.de>
References: <0CE0A03D0F390E46B12B64489D20B1D402E7BB62BE@MAILHUB.NRPA.LOCAL>
	<486E38F0.40309@uni-muenster.de>
Message-ID: <0CE0A03D0F390E46B12B64489D20B1D402E7BB62BF@MAILHUB.NRPA.LOCAL>

Great! Thanks, that did it!

Morten

-----Original Message-----
From: Edzer Pebesma [mailto:edzer.pebesma at uni-muenster.de]
Sent: Friday, July 04, 2008 4:51 PM
To: Morten Sickel
Cc: r-sig-geo at stat.math.ethz.ch
Subject: Re: [R-sig-Geo] Select polygons

The "new style" way of doing this, using the classes of package sp, would be reading the shape with readOGR (in package rgdal), and then selecting by

nw2 = nw[nw$FTEMA>0, ]
--
Edzer

Morten Sickel wrote:
> I am reading in a shape file using read.shape() I would like to select some of the polygons in the shape file, depending on data in the att.data ... but for some (probably simple) reason, it doesn't work.
>
> having read the shape file into the object nw, I would believe that
>
> nw2=nw[nw$att.data$FTEMA>0,]
>
> would select those polygons with FTEMA>0 but it give sme the error "incorrect number of dimentions" removing the last , I think I get the selection I wants, but what it returns is no longer a map object...
>
> Any clues anywhere?
>



From T.Hengl at uva.nl  Sat Jul  5 10:23:20 2008
From: T.Hengl at uva.nl (Hengl, T.)
Date: Sat, 5 Jul 2008 10:23:20 +0200
Subject: [R-sig-Geo] kriging
References: <48569992.8020006@scimail.uwaterloo.ca><Pine.LNX.4.58.0806161720010.19855@macalan.c3sl.ufpr.br>	<4856D2F8.4060009@scimail.uwaterloo.ca>
	<37382E8DCB905042969BA78541F6570624D4DE@kwek.ic.uva.nl>
	<486CB8FC.7050902@uni-muenster.de>
	<C83C5E3DEEE97E498B74729A33F6EAEC04E87E9C@DJFPOST01.djf.agrsci.dk>
	<486DEB39.2030305@uni-muenster.de>
Message-ID: <37382E8DCB905042969BA78541F6570624D530@kwek.ic.uva.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080705/b20224f8/attachment.pl>

From Jin.Li at ga.gov.au  Mon Jul  7 04:10:31 2008
From: Jin.Li at ga.gov.au (Jin.Li at ga.gov.au)
Date: Mon, 7 Jul 2008 12:10:31 +1000
Subject: [R-sig-Geo] kriging [SEC=UNCLASSIFIED]
Message-ID: <8BD19F29B0E16E4F88277A997CD872C204499672@mail.agso.gov.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080707/72565116/attachment.pl>

From Jin.Li at ga.gov.au  Mon Jul  7 04:12:20 2008
From: Jin.Li at ga.gov.au (Jin.Li at ga.gov.au)
Date: Mon, 7 Jul 2008 12:12:20 +1000
Subject: [R-sig-Geo] kriging [SEC=UNCLASSIFIED]
Message-ID: <8BD19F29B0E16E4F88277A997CD872C204499673@mail.agso.gov.au>

It is under review.

-----Original Message-----
From: Edzer Pebesma [mailto:edzer.pebesma at uni-muenster.de] 
Sent: Friday, 4 July 2008 6:56
To: Hengl, T.
Cc: Li Jin; r-sig-geo at stat.math.ethz.ch
Subject: Re: [R-sig-Geo] kriging [SEC=UNCLASSIFIED]

Hengl, T. wrote:
>  Anybody interested in these topics should take a look at sections 2.8
"Final notes about regression-kriging" and "2.2 Local versus localized
models" in my lecture notes (I like to refer to it because it is an
open-access material).
>   
I noticed. But is it peer-reviewed?

-- 
Edzer Pebesma
Institute for Geoinformatics (IfGI)
University of M?nster
http://ifgi.uni-muenster.de/



From T.Hengl at uva.nl  Mon Jul  7 10:23:05 2008
From: T.Hengl at uva.nl (Hengl, T.)
Date: Mon, 7 Jul 2008 10:23:05 +0200
Subject: [R-sig-Geo] kriging [SEC=UNCLASSIFIED]
References: <8BD19F29B0E16E4F88277A997CD872C204499672@mail.agso.gov.au>
Message-ID: <37382E8DCB905042969BA78541F6570624D538@kwek.ic.uva.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080707/c768e7b7/attachment.pl>

From pecardoso at netcabo.pt  Mon Jul  7 11:48:51 2008
From: pecardoso at netcabo.pt (Paulo Cardoso)
Date: Mon, 7 Jul 2008 10:48:51 +0100
Subject: [R-sig-Geo] Spatial analysis - matrix algebra
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAAAiqk/5CNPFFq17hx4jN18vCgAAAEAAAAOcSZHhAaMBLgRf86SSUSwQBAAAAAA==@netcabo.pt>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080707/71c882bd/attachment.pl>

From hi_ono2001 at ybb.ne.jp  Mon Jul  7 12:04:56 2008
From: hi_ono2001 at ybb.ne.jp (Hisaji ONO)
Date: Mon, 7 Jul 2008 19:04:56 +0900 (JST)
Subject: [R-sig-Geo] Spatial analysis - matrix algebra
In-Reply-To: <!&!AAAAAAAAAAAYAAAAAAAAAAiqk/5CNPFFq17hx4jN18vCgAAAEAAAAOcSZHhAaMBLgRf86SSUSwQBAAAAAA==@netcabo.pt>
Message-ID: <20080707100456.68578.qmail@web10702.mail.bbt.yahoo.co.jp>

Hi.

 R seems to be able to deal with your desired processes.

 However, your had better use GRASS GIS or SAGA both of
which support map algebra or cartographic modelling,
import ascii grid and has interface packages(spgrass or
RSAGA) to R for more complicated analyses if required.


 Regards.

--- Paulo Cardoso <pecardoso at netcabo.pt> wrote:

> Can R perform matrix algebra between ascii converted
> Esri grids? I'm
> convinced that its trivial.
> 
>  
> 
> The question is a little more complex (from my point
> of view and
> inexperience): I'm interested in perform cost
> surface and distance surface
> analysis avoiding ArcGIS tools. Maybe R can deal
> with grid formatted as
> matrices...
> 
>  
> 
> Maybe R could call FWtools to perform all
> calculations iteratively...
> 
>  
> 
> Paulo
> 
>  
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



From mdsumner at utas.edu.au  Mon Jul  7 12:05:02 2008
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Mon, 07 Jul 2008 20:05:02 +1000
Subject: [R-sig-Geo] Spatial analysis - matrix algebra
In-Reply-To: <!&!AAAAAAAAAAAYAAAAAAAAAAiqk/5CNPFFq17hx4jN18vCgAAAEAAAAOcSZHhAaMBLgRf86SSUSwQBAAAAAA==@netcabo.pt>
References: <!&!AAAAAAAAAAAYAAAAAAAAAAiqk/5CNPFFq17hx4jN18vCgAAAEAAAAOcSZHhAaMBLgRf86SSUSwQBAAAAAA==@netcabo.pt>
Message-ID: <4871EA4E.3020805@utas.edu.au>

Hi Paulo,

You can read ESRI ASCII grids (amongst many others) using rgdal package:

library(rgdal)
d <- readGDAL("file1.asc")

See gdalDrivers() for a listing of the available file formats for your 
package build.

The read above would result in a single-colum SpatialGridDataFrame - 
named "band1". To add further files as a new column (assuming the 
subsequent files have exactly the same grid topology):

d$band2 <- readGDAL("file2.asc")$band1

. . . and so on.

To obtain the resulting raster bands as individual matrices you can use 
as.image.SpatialGridDataFrame:

m1 <- as.image.SpatialGridDataFrame(d[1])$z

m2 <- as.image.SpatialGriddataFrame(d[2])$z

. . .

Then use your matrices as needed.  If you only want the matrices and not 
the intermediate SGDF objects, use readGDAL directly:

m1 <- as.image.SpatialGridDataFrame(readGDAL("file1.asc")[1])
. . .

These could be collected in a single 3-way array, or a list of matrices 
as needed.

HTH,

Mike.


Paulo Cardoso wrote:
> Can R perform matrix algebra between ascii converted Esri grids? I'm
> convinced that its trivial.
>
>  
>
> The question is a little more complex (from my point of view and
> inexperience): I'm interested in perform cost surface and distance surface
> analysis avoiding ArcGIS tools. Maybe R can deal with grid formatted as
> matrices...
>
>  
>
> Maybe R could call FWtools to perform all calculations iteratively...
>
>  
>
> Paulo
>
>  
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> No virus found in this incoming message.
> Checked by AVG - http://www.avg.com 
> Version: 8.0.138 / Virus Database: 270.4.5/1537 - Release Date: 7/6/2008 5:26 AM
>
>
>
>



From edzer.pebesma at uni-muenster.de  Mon Jul  7 12:17:40 2008
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 07 Jul 2008 12:17:40 +0200
Subject: [R-sig-Geo] Spatial analysis - matrix algebra
In-Reply-To: <4871EA4E.3020805@utas.edu.au>
References: <!&!AAAAAAAAAAAYAAAAAAAAAAiqk/5CNPFFq17hx4jN18vCgAAAEAAAAOcSZHhAaMBLgRf86SSUSwQBAAAAAA==@netcabo.pt>
	<4871EA4E.3020805@utas.edu.au>
Message-ID: <4871ED44.5040700@uni-muenster.de>

Paulo,

Please note that there is also an

as(d[1], "matrix")

but that it returns the matrix in a different organization.

Please find out which one suits you best; the help of ?image has all 
information how image assumes image matrices to be organized, and thus 
how as.image.Spatial... converts it---it is not the typical one that a 
geographer or person used to a raster GIS would think of.
--
Edzer

Michael Sumner wrote:
> Hi Paulo,
>
> You can read ESRI ASCII grids (amongst many others) using rgdal package:
>
> library(rgdal)
> d <- readGDAL("file1.asc")
>
> See gdalDrivers() for a listing of the available file formats for your 
> package build.
>
> The read above would result in a single-colum SpatialGridDataFrame - 
> named "band1". To add further files as a new column (assuming the 
> subsequent files have exactly the same grid topology):
>
> d$band2 <- readGDAL("file2.asc")$band1
>
> . . . and so on.
>
> To obtain the resulting raster bands as individual matrices you can 
> use as.image.SpatialGridDataFrame:
>
> m1 <- as.image.SpatialGridDataFrame(d[1])$z
>
> m2 <- as.image.SpatialGriddataFrame(d[2])$z
>
> . . .
>
> Then use your matrices as needed.  If you only want the matrices and 
> not the intermediate SGDF objects, use readGDAL directly:
>
> m1 <- as.image.SpatialGridDataFrame(readGDAL("file1.asc")[1])
> . . .
>
> These could be collected in a single 3-way array, or a list of 
> matrices as needed.
>
> HTH,
>
> Mike.
>
>
> Paulo Cardoso wrote:
>> Can R perform matrix algebra between ascii converted Esri grids? I'm
>> convinced that its trivial.
>>
>>  
>>
>> The question is a little more complex (from my point of view and
>> inexperience): I'm interested in perform cost surface and distance 
>> surface
>> analysis avoiding ArcGIS tools. Maybe R can deal with grid formatted as
>> matrices...
>>
>>  
>>
>> Maybe R could call FWtools to perform all calculations iteratively...
>>
>>  
>>
>> Paulo
>>
>>  
>>
>>
>>     [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>> No virus found in this incoming message.
>> Checked by AVG - http://www.avg.com Version: 8.0.138 / Virus 
>> Database: 270.4.5/1537 - Release Date: 7/6/2008 5:26 AM
>>
>>
>>
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (IfGI), University of M?nster, Weseler
Stra?e 253, 48151 M?nster. Phone: +49 251 8333081 Fax: +49 251 8339763
email: edzer.pebesma at uni-muenster.de http://ifgi.uni-muenster.de/



From pecardoso at netcabo.pt  Mon Jul  7 12:23:24 2008
From: pecardoso at netcabo.pt (Paulo Cardoso)
Date: Mon, 7 Jul 2008 11:23:24 +0100
Subject: [R-sig-Geo] Spatial analysis - matrix algebra
In-Reply-To: <4871EA4E.3020805@utas.edu.au>
References: <!&!AAAAAAAAAAAYAAAAAAAAAAiqk/5CNPFFq17hx4jN18vCgAAAEAAAAOcSZHhAaMBLgRf86SSUSwQBAAAAAA==@netcabo.pt>
	<4871EA4E.3020805@utas.edu.au>
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAAAiqk/5CNPFFq17hx4jN18vCgAAAEAAAADZ9YnOcIqdCqgPEfoW3RxQBAAAAAA==@netcabo.pt>

Thanks Mike. I know rgdal package (you introduce it to me!) but I used it
occasionally.

One question remains since I want to consider an array of options to get
cost distance surfaces (e.g. Varying the cost of each habitat).

I've being playing around with calling other programs from R and change
iteratively parameters to be considered at each "run".
Something like this:

for(z in 1:length(iter)) ## R iterations with iterations to be used by the
program
{
  input[17]<-paste("NUMITNS",as.character(iter[z]),sep=" ") ## write the
iter parameter in R internal input file
    for(cc in 1:length(costs)) ## R iterations with costs to be used by the
program
    {
      unit$cost<-as.numeric(costs[cc]) ## write the cost parameter into the
R internal unit file
      #unit$cost[abund$pu[abund$species==4]]<-as.numeric(costs[cc]) ## Cost
for seagrasses - not used
      write.table(unit,"unit.dat",sep="\t",row.names=F,quote=F,dec=".") ##
write the unit.dat file to be used in each R loop
        for(tt in 1:length(perc.t)) ## R iterations with CF target
percentages to be used by the program
        {
          target[,3]<-agg.abx202[,2]*perc.t[tt] ## All targets with perc.t %
of the total available area
          target[which(target$name=="Marine
waters"),3]<-agg.abx202[which(agg.abx202$species=="Marine waters"),2]*0.1 ##
Marine waters with 10% of total available in all scenarios
          target[which(target$name=="Terrestrial habitats"),3]<-0 ##
Terrestrial habitats with 0% of total available in all cenarios
            for(ii in 1:length(spf.t)) ## R iterations with Penalty to be
used by the program Target spf parameter
            {
              target[,4]<-rep(as.numeric(spf.t[ii]),nrow(target)) ## write
the SPF parameter into the R internal target file
              write.table(target,"target.dat",sep=",",row.names=F,quote =
FALSE) ## write the target.dat file to be used in each R loop
                for(i in 1:length(blm)) ## R iterations with BLM factor to
be used by the program
                {
                  input[10]<-paste("BLM",blm[i]) ## write the BLM factor
into the R internal input file
                    for(r in 1:length(nreps))
                    {
                      input[14]<-paste("NUMREPS",nreps[r]) ## write the
Number of Runs into the R internal input file
                      temp<-date()
                      input[35]<-paste("SCENNAME"," ",  ## write the
Scenario Name into the R internal input file with all parameters
 
paste(substring(temp,12,13),substring(temp,15,16),substring(temp,18,19),sep=
""),"-", # internal clock time at the beggining of the process
                                  "Output","-",                 # Initial
Sentence for each by the program Run
                                  "Iter",as.character(iter[z]), # Number of
iteractions
                                  "Cost",costs[cc],"-",         # Cost used
                                  "Targ",perc.t[tt],"-",        # % of
Target used
                                  "Spf",spf.t[ii],"-",          # SPF used
                                  "Blm",blm[i],"-",             # BLM used
                                  "Reps",nreps[r]               # Nreps used
                                  ,sep="")

                      write(input,"input.dat")# Re-write the final input.dat
file to be used at each program run with the corresponding changed
parameters
                      system("program.exe",wait=T,invisible=T) # Calling
program to execute each scen?rio
                    }
                }
            }
        }
    }
}


In fact I have no idea if R can perform cost analysis as IDRISI, ArgGIS,
GRASS, SAGA, etc...
In a cost analysis we usually have a point, a line or polygon defined as
start positions (sources in this case), so we have the interaction of Two
themes...



-----Original Message-----
From: Michael Sumner [mailto:mdsumner at utas.edu.au] 
Sent: segunda-feira, 7 de Julho de 2008 11:05
To: Paulo Cardoso
Cc: r-sig-geo at stat.math.ethz.ch
Subject: Re: [R-sig-Geo] Spatial analysis - matrix algebra

Hi Paulo,

You can read ESRI ASCII grids (amongst many others) using rgdal package:

library(rgdal)
d <- readGDAL("file1.asc")

See gdalDrivers() for a listing of the available file formats for your 
package build.

The read above would result in a single-colum SpatialGridDataFrame - 
named "band1". To add further files as a new column (assuming the 
subsequent files have exactly the same grid topology):

d$band2 <- readGDAL("file2.asc")$band1

. . . and so on.

To obtain the resulting raster bands as individual matrices you can use 
as.image.SpatialGridDataFrame:

m1 <- as.image.SpatialGridDataFrame(d[1])$z

m2 <- as.image.SpatialGriddataFrame(d[2])$z

. . .

Then use your matrices as needed.  If you only want the matrices and not 
the intermediate SGDF objects, use readGDAL directly:

m1 <- as.image.SpatialGridDataFrame(readGDAL("file1.asc")[1])
. . .

These could be collected in a single 3-way array, or a list of matrices 
as needed.

HTH,

Mike.


Paulo Cardoso wrote:
> Can R perform matrix algebra between ascii converted Esri grids? I'm
> convinced that its trivial.
>
>  
>
> The question is a little more complex (from my point of view and
> inexperience): I'm interested in perform cost surface and distance surface
> analysis avoiding ArcGIS tools. Maybe R can deal with grid formatted as
> matrices...
>
>  
>
> Maybe R could call FWtools to perform all calculations iteratively...
>
>  
>
> Paulo
>
>  
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> No virus found in this incoming message.
> Checked by AVG - http://www.avg.com 
> Version: 8.0.138 / Virus Database: 270.4.5/1537 - Release Date: 7/6/2008
5:26 AM
>
>
>
>   

Internal Virus Database is out of date.
Checked by AVG. 

03-07-2008
8:32



From milton.ruser at gmail.com  Mon Jul  7 14:20:28 2008
From: milton.ruser at gmail.com (milton ruser)
Date: Mon, 7 Jul 2008 09:20:28 -0300
Subject: [R-sig-Geo] Spatial analysis - matrix algebra
In-Reply-To: <!&!AAAAAAAAAAAYAAAAAAAAAAiqk/5CNPFFq17hx4jN18vCgAAAEAAAADZ9YnOcIqdCqgPEfoW3RxQBAAAAAA==@netcabo.pt>
References: <!&!AAAAAAAAAAAYAAAAAAAAAAiqk/5CNPFFq17hx4jN18vCgAAAEAAAAOcSZHhAaMBLgRf86SSUSwQBAAAAAA==@netcabo.pt>
	<4871EA4E.3020805@utas.edu.au>
	<!&!AAAAAAAAAAAYAAAAAAAAAAiqk/5CNPFFq17hx4jN18vCgAAAEAAAADZ9YnOcIqdCqgPEfoW3RxQBAAAAAA==@netcabo.pt>
Message-ID: <3aaf1a030807070520k5c7d3bfcp2e35c9ff2064b5a7@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080707/20a0b725/attachment.pl>

From Hollister.Jeff at epamail.epa.gov  Mon Jul  7 15:03:59 2008
From: Hollister.Jeff at epamail.epa.gov (Hollister.Jeff at epamail.epa.gov)
Date: Mon, 7 Jul 2008 09:03:59 -0400
Subject: [R-sig-Geo] Interpolating Count Data?
Message-ID: <OF4AA199A8.1F0C4B33-ON8525747F.00473F2D-8525747F.0047C71E@epamail.epa.gov>


All,

I am reviewing some research in which a number of interpolations
(Inverse Distance Weighting) were done on Species Abundance and Taxa
Richness.  My gut and my memory suggest that interpolating count data is
not acceptable.  After several hours of research I couldn't confirm
this.

My questions for the list are:

1.) Is it acceptable or not to interpolate count data?

2.) Are there any good references that state this?

Thanks in advance your help!

Cheers,
Jeff

***************************
Dr. Jeffrey W. Hollister
US EPA
Atlantic Ecology Division
27 Tarzwell Drive
Narragansett, RI 02882
(401) 782-9655



From edzer.pebesma at uni-muenster.de  Mon Jul  7 15:12:49 2008
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 07 Jul 2008 15:12:49 +0200
Subject: [R-sig-Geo] Interpolating Count Data?
In-Reply-To: <OF4AA199A8.1F0C4B33-ON8525747F.00473F2D-8525747F.0047C71E@epamail.epa.gov>
References: <OF4AA199A8.1F0C4B33-ON8525747F.00473F2D-8525747F.0047C71E@epamail.epa.gov>
Message-ID: <48721651.3040605@uni-muenster.de>

I think that if the counts are representative for a spatial support 
(area) or temporal support that does not vary, then you can consider the 
counts as an unscaled density and can interpolate. If they are 
representative for varying spatial/temporal support, I would avoid it, 
and first work towards a density estimate.

I cannot think of a reference to this.
--
Edzer

Hollister.Jeff at epamail.epa.gov wrote:
> All,
>
> I am reviewing some research in which a number of interpolations
> (Inverse Distance Weighting) were done on Species Abundance and Taxa
> Richness.  My gut and my memory suggest that interpolating count data is
> not acceptable.  After several hours of research I couldn't confirm
> this.
>
> My questions for the list are:
>
> 1.) Is it acceptable or not to interpolate count data?
>
> 2.) Are there any good references that state this?
>
> Thanks in advance your help!
>
> Cheers,
> Jeff
>
> ***************************
> Dr. Jeffrey W. Hollister
> US EPA
> Atlantic Ecology Division
> 27 Tarzwell Drive
> Narragansett, RI 02882
> (401) 782-9655
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (IfGI), University of M?nster, Weseler
Stra?e 253, 48151 M?nster. Phone: +49 251 8333081 Fax: +49 251 8339763
email: edzer.pebesma at uni-muenster.de http://ifgi.uni-muenster.de/



From dylan.beaudette at gmail.com  Mon Jul  7 18:40:09 2008
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Mon, 7 Jul 2008 09:40:09 -0700
Subject: [R-sig-Geo] Spatial analysis - matrix algebra
In-Reply-To: <!&!AAAAAAAAAAAYAAAAAAAAAAiqk/5CNPFFq17hx4jN18vCgAAAEAAAAOcSZHhAaMBLgRf86SSUSwQBAAAAAA==@netcabo.pt>
References: <!&!AAAAAAAAAAAYAAAAAAAAAAiqk/5CNPFFq17hx4jN18vCgAAAEAAAAOcSZHhAaMBLgRf86SSUSwQBAAAAAA==@netcabo.pt>
Message-ID: <3c5546140807070940n33854f81n40164b2861e8184a@mail.gmail.com>

On Mon, Jul 7, 2008 at 2:48 AM, Paulo Cardoso <pecardoso at netcabo.pt> wrote:
> Can R perform matrix algebra between ascii converted Esri grids? I'm
> convinced that its trivial.
>
>
>
> The question is a little more complex (from my point of view and
> inexperience): I'm interested in perform cost surface and distance surface
> analysis avoiding ArcGIS tools. Maybe R can deal with grid formatted as
> matrices...
>

Paulo,

GRASS would be my first choice for any type of raster operation. See
r.cost, r.drain, and r.walk for some examples of cost surface
modeling. Here is a worked example:

http://casoilresource.lawr.ucdavis.edu/drupal/node/544

Cheers,

Dylan



From Jin.Li at ga.gov.au  Tue Jul  8 01:35:45 2008
From: Jin.Li at ga.gov.au (Jin.Li at ga.gov.au)
Date: Tue, 8 Jul 2008 09:35:45 +1000
Subject: [R-sig-Geo] kriging [SEC=UNCLASSIFIED]
Message-ID: <8BD19F29B0E16E4F88277A997CD872C20449967B@mail.agso.gov.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080708/cdbe4c5a/attachment.pl>

From Jin.Li at ga.gov.au  Tue Jul  8 09:13:14 2008
From: Jin.Li at ga.gov.au (Jin.Li at ga.gov.au)
Date: Tue, 8 Jul 2008 17:13:14 +1000
Subject: [R-sig-Geo] why are idw and gstat different? [SEC=UNCLASSIFIED]
Message-ID: <8BD19F29B0E16E4F88277A997CD872C204499681@mail.agso.gov.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080708/34fe87cb/attachment.pl>

From laura.poggio at gmail.com  Tue Jul  8 09:23:41 2008
From: laura.poggio at gmail.com (Laura Poggio)
Date: Tue, 8 Jul 2008 09:23:41 +0200
Subject: [R-sig-Geo] Normal score transformation
Message-ID: <e027b8750807080023s312883eej2b8211b29715a3ef@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080708/ea675fe9/attachment.pl>

From edzer.pebesma at uni-muenster.de  Tue Jul  8 09:34:30 2008
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 08 Jul 2008 09:34:30 +0200
Subject: [R-sig-Geo] why are idw and gstat different? [SEC=UNCLASSIFIED]
In-Reply-To: <8BD19F29B0E16E4F88277A997CD872C204499681@mail.agso.gov.au>
References: <8BD19F29B0E16E4F88277A997CD872C204499681@mail.agso.gov.au>
Message-ID: <48731886.4020508@uni-muenster.de>

Jin, you specified nmax = 7 in the second call, but not in the first. 
Comparing idp values is easiest when other things remain equal.
--
Edzer

Jin.Li at ga.gov.au wrote:
> Dear there,
>
> I tried to compare idw and gstat in library(gstat). I specified idp as 0.5 in
> both functions, I expected identical results, but what I got are different as
> shown for the first five samples.  Please help. Thanks.
>
>  
>
>   
>> data(meuse)
>>     
>
>   
>> coordinates(meuse) = ~x+y
>>     
>
>   
>> data(meuse.grid)
>>     
>
>   
>> gridded(meuse.grid) = ~x+y
>>     
>
>   
>> x <- idw(zinc~1, meuse, meuse.grid, idp=0.5)
>>     
>
> [inverse distance weighted interpolation]
>
>   
>> as.data.frame(x)[1:5,]
>>     
>
>   var1.pred var1.var      x      y
>
> 1  482.8753       NA 181180 333740
>
> 2  487.0065       NA 181140 333700
>
> 3  483.9747       NA 181180 333700
>
> 4  481.2115       NA 181220 333700
>
> 5  494.8720       NA 181100 333660
>
>  
>
>   
>> data(meuse)
>>     
>
>   
>> data(meuse.grid)
>>     
>
>   
>> meuse.gstat <- gstat(id = "zinc", formula = zinc ~ 1, locations = ~ x + y,
>>     
>
> +         data = meuse, nmax = 7, set = list(idp = .5))
>
>   
>> meuse.gstat
>>     
>
> data:
>
> zinc : formula = zinc`~`1 ; data dim = 155 x 12 nmax = 7
>
> set idp = 0.5; 
>
> ~x + y
>
>   
>> z <- predict(meuse.gstat, meuse.grid)
>>     
>
> [inverse distance weighted interpolation]
>
>   
>> z[1:5,]
>>     
>
>        x      y zinc.pred zinc.var
>
> 1 181180 333740  626.3628       NA
>
> 2 181140 333700  645.9319       NA
>
> 3 181180 333700  629.7041       NA
>
> 4 181220 333700  615.1368       NA
>
> 5 181100 333660  682.3401       NA
>
>  
>
> Cheers,
>
>  
>
> Jin
>
> --------------------------------------------
>
> Jin Li, PhD
>
> Spatial Modeller/
>
> Computational Statistician
>
> Marine & Coastal Environment
>
> Geoscience Australia
>
>
>
> Ph: 61 (02) 6249 9899
>
> Fax: 61 (02) 6249 9956
>
> email: jin.li at ga.gov.au <mailto:jin.li at ga.gov.au> 
>
> --------------------------------------------
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (IfGI), University of M?nster, Weseler
Stra?e 253, 48151 M?nster. Phone: +49 251 8333081 Fax: +49 251 8339763
email: edzer.pebesma at uni-muenster.de http://ifgi.uni-muenster.de/



From ashton at msu.edu  Tue Jul  8 15:00:12 2008
From: ashton at msu.edu (Ashton Shortridge)
Date: Tue, 8 Jul 2008 09:00:12 -0400
Subject: [R-sig-Geo] Normal score transformation
In-Reply-To: <e027b8750807080023s312883eej2b8211b29715a3ef@mail.gmail.com>
References: <e027b8750807080023s312883eej2b8211b29715a3ef@mail.gmail.com>
Message-ID: <200807080900.12599.ashton@msu.edu>

Hi Laura,

I've written code to do normal score and back-transforms. Edzer dropped this 
code from me last month on this list, but I'll repost.

Normalizing data is extremely simple in R. The back-transform is the 
problematic part. Please read the documentation in the file to learn more 
about these issues and to help determine if what I wrote is useful for you.

The URL for the normal score code is:
http://www.msu.edu/~ashton/temp/nscore.R

Yours,

Ashton

-- 
Ashton Shortridge
Associate Professor			ashton at msu.edu
Dept of Geography			http://www.msu.edu/~ashton
235 Geography Building		ph (517) 432-3561
Michigan State University		fx (517) 432-1671

On Tuesday 08 July 2008, Laura Poggio wrote:
> Dear all,
> I have a small image with three bands and I would like to normalise the
> variance of the three bands in order to get a more homogeneous dataset for
> further elaborations.
> I am thinking to use the normal score transform, but I have some questions
> about how to implement in R and especially how to do with raster data.
> My data are read into R with the readGDAL function.
>
> I have been trying the qnorm() and the qqnorm(ppoints()) with strange
> results, using on data.frame or matrix or vector types: in any case all
> values are NAs.
>
> Any suggestion on which is the most suitable function to do the transform
> on raster data within R would be really appreciated.
>
> Thank you very much in advance
>
> Laura
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



From hi_ono2001 at ybb.ne.jp  Tue Jul  8 20:41:40 2008
From: hi_ono2001 at ybb.ne.jp (Hisaji ONO)
Date: Wed, 9 Jul 2008 03:41:40 +0900 (JST)
Subject: [R-sig-Geo] Japanese translation of "Applied Spatial Data Analysis
	with R" planned?
Message-ID: <20080708184140.57833.qmail@web10702.mail.bbt.yahoo.co.jp>

Hello.

 Some Springer's R related books has been published in
Japan.

 I think some demand for a book about spatial statistics
in my country.

 Any plan or contact of Japanese translation of this
interesting book prepared?



 Regards.



From Jin.Li at ga.gov.au  Wed Jul  9 02:11:07 2008
From: Jin.Li at ga.gov.au (Jin.Li at ga.gov.au)
Date: Wed, 9 Jul 2008 10:11:07 +1000
Subject: [R-sig-Geo] why are idw and gstat different? [SEC=UNCLASSIFIED]
Message-ID: <8BD19F29B0E16E4F88277A997CD872C204499684@mail.agso.gov.au>

Edzer,

Thanks for identifying the problem. The problem showed how big the impact of
the choice of nmax value on the estimation is.

In both krige and gstat, the default value for nmax is Inf. I am doing a
simulation experiment now to assess the performance of several spatial
interpolators using a few hundreds datasets. It is easy to do it by using the
default value. But I am wondering what the best guess for nmax is?

I assumed that the default value Inf for nmax would take the maximum value of
the number of samples available. After a few trials, I found my assumption
was wrong as evidenced below. Obviously, it took a value between 20 and 30. 
> system.time(x <- krige(log(zinc)~1, meuse, meuse.grid, model = m))
[using ordinary kriging]
   user  system elapsed 
   0.32    0.00    0.31 
> system.time(x <- krige(log(zinc)~1, meuse, meuse.grid, model = m, nmax=20))
[using ordinary kriging]
   user  system elapsed 
   0.25    0.02    0.27 
> system.time(x <- krige(log(zinc)~1, meuse, meuse.grid, model = m, nmax=30))
[using ordinary kriging]
   user  system elapsed 
   0.41    0.02    0.43
> system.time(x <- krige(log(zinc)~1, meuse, meuse.grid, model = m, nmax=50))
[using ordinary kriging]
   user  system elapsed 
   0.89    0.00    0.89 

Please clarify this. 
Thanks,
Jin 

-----Original Message-----
From: Edzer Pebesma [mailto:edzer.pebesma at uni-muenster.de] 
Sent: Tuesday, 8 July 2008 5:35
To: Li Jin
Cc: r-sig-geo at stat.math.ethz.ch
Subject: Re: [R-sig-Geo] why are idw and gstat different? [SEC=UNCLASSIFIED]

Jin, you specified nmax = 7 in the second call, but not in the first. 
Comparing idp values is easiest when other things remain equal.
--
Edzer

Jin.Li at ga.gov.au wrote:
> Dear there,
>
> I tried to compare idw and gstat in library(gstat). I specified idp as 0.5
in
> both functions, I expected identical results, but what I got are different
as
> shown for the first five samples.  Please help. Thanks.
>
>  
>
>   
>> data(meuse)
>>     
>
>   
>> coordinates(meuse) = ~x+y
>>     
>
>   
>> data(meuse.grid)
>>     
>
>   
>> gridded(meuse.grid) = ~x+y
>>     
>
>   
>> x <- idw(zinc~1, meuse, meuse.grid, idp=0.5)
>>     
>
> [inverse distance weighted interpolation]
>
>   
>> as.data.frame(x)[1:5,]
>>     
>
>   var1.pred var1.var      x      y
>
> 1  482.8753       NA 181180 333740
>
> 2  487.0065       NA 181140 333700
>
> 3  483.9747       NA 181180 333700
>
> 4  481.2115       NA 181220 333700
>
> 5  494.8720       NA 181100 333660
>
>  
>
>   
>> data(meuse)
>>     
>
>   
>> data(meuse.grid)
>>     
>
>   
>> meuse.gstat <- gstat(id = "zinc", formula = zinc ~ 1, locations = ~ x + y,
>>     
>
> +         data = meuse, nmax = 7, set = list(idp = .5))
>
>   
>> meuse.gstat
>>     
>
> data:
>
> zinc : formula = zinc`~`1 ; data dim = 155 x 12 nmax = 7
>
> set idp = 0.5; 
>
> ~x + y
>
>   
>> z <- predict(meuse.gstat, meuse.grid)
>>     
>
> [inverse distance weighted interpolation]
>
>   
>> z[1:5,]
>>     
>
>        x      y zinc.pred zinc.var
>
> 1 181180 333740  626.3628       NA
>
> 2 181140 333700  645.9319       NA
>
> 3 181180 333700  629.7041       NA
>
> 4 181220 333700  615.1368       NA
>
> 5 181100 333660  682.3401       NA
>
>  
>
> Cheers,
>
>  
>
> Jin
>
> --------------------------------------------
>
> Jin Li, PhD
>
> Spatial Modeller/
>
> Computational Statistician
>
> Marine & Coastal Environment
>
> Geoscience Australia
>
>
>
> Ph: 61 (02) 6249 9899
>
> Fax: 61 (02) 6249 9956
>
> email: jin.li at ga.gov.au <mailto:jin.li at ga.gov.au> 
>
> --------------------------------------------
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (IfGI), University of M?nster, Weseler
Stra?e 253, 48151 M?nster. Phone: +49 251 8333081 Fax: +49 251 8339763
email: edzer.pebesma at uni-muenster.de http://ifgi.uni-muenster.de/



From edzer.pebesma at uni-muenster.de  Wed Jul  9 08:03:54 2008
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 09 Jul 2008 08:03:54 +0200
Subject: [R-sig-Geo] why are idw and gstat different? [SEC=UNCLASSIFIED]
In-Reply-To: <8BD19F29B0E16E4F88277A997CD872C204499684@mail.agso.gov.au>
References: <8BD19F29B0E16E4F88277A997CD872C204499684@mail.agso.gov.au>
Message-ID: <487454CA.3060101@uni-muenster.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080709/127b7d62/attachment.pl>

From laura.poggio at gmail.com  Wed Jul  9 08:20:18 2008
From: laura.poggio at gmail.com (Laura Poggio)
Date: Wed, 9 Jul 2008 08:20:18 +0200
Subject: [R-sig-Geo] Normal score transformation
In-Reply-To: <200807080900.12599.ashton@msu.edu>
References: <e027b8750807080023s312883eej2b8211b29715a3ef@mail.gmail.com>
	<200807080900.12599.ashton@msu.edu>
Message-ID: <e027b8750807082320y230f851do2708b909ea344f2d@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080709/d9c3102f/attachment.pl>

From Jin.Li at ga.gov.au  Wed Jul  9 09:20:46 2008
From: Jin.Li at ga.gov.au (Jin.Li at ga.gov.au)
Date: Wed, 9 Jul 2008 17:20:46 +1000
Subject: [R-sig-Geo] why are idw and gstat different? [SEC=UNCLASSIFIED]
Message-ID: <8BD19F29B0E16E4F88277A997CD872C204499685@mail.agso.gov.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080709/88c26283/attachment.pl>

From edzer.pebesma at uni-muenster.de  Wed Jul  9 09:27:25 2008
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 09 Jul 2008 09:27:25 +0200
Subject: [R-sig-Geo] why are idw and gstat different? [SEC=UNCLASSIFIED]
In-Reply-To: <8BD19F29B0E16E4F88277A997CD872C204499685@mail.agso.gov.au>
References: <8BD19F29B0E16E4F88277A997CD872C204499685@mail.agso.gov.au>
Message-ID: <4874685D.50609@uni-muenster.de>

Jin.Li at ga.gov.au wrote:
>
> Edzer,
>
> I guess what I mean by ?best guess? is that there should possibly be a 
> reasonable value for nmax as we know that samples located beyond the 
> range are expected to have little contribution to the estimation.
>
This is only true if (i) the relative nugget is small, and (ii) there is 
no regression going on in the trend. But where should the threshold be 
for (i)? And what to do when there are no samples within the range distance?
>
> Am I right by assuming that the effect of the range has been taking 
> into account by ?model? in the krige and gstat and we do not need to 
> worry about choosing a value for nmax?
>
I'm not sure. The default is that no neighbourhood selection takes place 
unless you specify a neighbourhood. The motivation behind this was 
simplicity rather than a model.
--
Edzer
>
> Thanks.
>
> Jin
>
> Thanks for identifying the problem. The problem showed how big the impact of
> the choice of nmax value on the estimation is.
>  
> In both krige and gstat, the default value for nmax is Inf. I am doing a
> simulation experiment now to assess the performance of several spatial
> interpolators using a few hundreds datasets. It is easy to do it by using the
> default value. But I am wondering what the best guess for nmax is?
>   
>
> I've wondered that too; I know that if n >> 10000 or so, maybe 
> earlier, things will fail miserably. But how would you define "best" 
> in this context?
>
>
>
>  
> I assumed that the default value Inf for nmax would take the maximum value of
> the number of samples available. 
>
> Yes, that is the case.
>
> After a few trials, I found my assumption
> was wrong as evidenced below. Obviously, it took a value between 20 and 30.
>
> You falsely assume that CPU times has to increase with nmax. This is 
> true as long as it is smaller than the data size, but then it suddenly 
> drops. This is because if the search neighbourhood is global, (i) the 
> covariance matrix decomposition has to be done only once instead N 
> times with N the number of prediction locations , and (ii) the 
> overhead for neighbourhood selection vanishes.
>
> --
> Edzer
>
>> system.time(x <- krige(log(zinc)~1, meuse, meuse.grid, model = m))
>>     
> [using ordinary kriging]
>    user  system elapsed 
>    0.32    0.00    0.31 
>   
>> system.time(x <- krige(log(zinc)~1, meuse, meuse.grid, model = m, nmax=20))
>>     
> [using ordinary kriging]
>    user  system elapsed 
>    0.25    0.02    0.27 
>   
>> system.time(x <- krige(log(zinc)~1, meuse, meuse.grid, model = m, nmax=30))
>>     
> [using ordinary kriging]
>    user  system elapsed 
>    0.41    0.02    0.43
>   
>> system.time(x <- krige(log(zinc)~1, meuse, meuse.grid, model = m, nmax=50))
>>     
> [using ordinary kriging]
>    user  system elapsed 
>    0.89    0.00    0.89 
>  
> Please clarify this. 
> Thanks,
> Jin 
>  
> -----Original Message-----
> From: Edzer Pebesma [mailto:edzer.pebesma at uni-muenster.de] 
> Sent: Tuesday, 8 July 2008 5:35
> To: Li Jin
> Cc: r-sig-geo at stat.math.ethz.ch <mailto:r-sig-geo at stat.math.ethz.ch>
> Subject: Re: [R-sig-Geo] why are idw and gstat different? [SEC=UNCLASSIFIED]
>  
> Jin, you specified nmax = 7 in the second call, but not in the first. 
> Comparing idp values is easiest when other things remain equal.
> --
> Edzer
>  
> Jin.Li at ga.gov.au <mailto:Jin.Li at ga.gov.au> wrote:
>   
>> Dear there,
>>  
>> I tried to compare idw and gstat in library(gstat). I specified idp as 0.5
>>     
> in
>   
>> both functions, I expected identical results, but what I got are different
>>     
> as
>   
>> shown for the first five samples.  Please help. Thanks.
>>  
>>  
>>  
>>   
>>     
>>> data(meuse)
>>>     
>>>       
>>   
>>     
>>> coordinates(meuse) = ~x+y
>>>     
>>>       
>>   
>>     
>>> data(meuse.grid)
>>>     
>>>       
>>   
>>     
>>> gridded(meuse.grid) = ~x+y
>>>     
>>>       
>>   
>>     
>>> x <- idw(zinc~1, meuse, meuse.grid, idp=0.5)
>>>     
>>>       
>> [inverse distance weighted interpolation]
>>  
>>   
>>     
>>> as.data.frame(x)[1:5,]
>>>     
>>>       
>>   var1.pred var1.var      x      y
>>  
>> 1  482.8753       NA 181180 333740
>>  
>> 2  487.0065       NA 181140 333700
>>  
>> 3  483.9747       NA 181180 333700
>>  
>> 4  481.2115       NA 181220 333700
>>  
>> 5  494.8720       NA 181100 333660
>>  
>>  
>>  
>>   
>>     
>>> data(meuse)
>>>     
>>>       
>>   
>>     
>>> data(meuse.grid)
>>>     
>>>       
>>   
>>     
>>> meuse.gstat <- gstat(id = "zinc", formula = zinc ~ 1, locations = ~ x + y,
>>>     
>>>       
>> +         data = meuse, nmax = 7, set = list(idp = .5))
>>  
>>   
>>     
>>> meuse.gstat
>>>     
>>>       
>> data:
>>  
>> zinc : formula = zinc`~`1 ; data dim = 155 x 12 nmax = 7
>>  
>> set idp = 0.5; 
>>  
>> ~x + y
>>  
>>   
>>     
>>> z <- predict(meuse.gstat, meuse.grid)
>>>     
>>>       
>> [inverse distance weighted interpolation]
>>  
>>   
>>     
>>> z[1:5,]
>>>     
>>>       
>>        x      y zinc.pred zinc.var
>>  
>> 1 181180 333740  626.3628       NA
>>  
>> 2 181140 333700  645.9319       NA
>>  
>> 3 181180 333700  629.7041       NA
>>  
>> 4 181220 333700  615.1368       NA
>>  
>> 5 181100 333660  682.3401       NA
>>  
>>  
>>  
>> Cheers,
>>  
>>  
>>  
>> Jin
>>  
>> --------------------------------------------
>>  
>> Jin Li, PhD
>>  
>> Spatial Modeller/
>>  
>> Computational Statistician
>>  
>> Marine & Coastal Environment
>>  
>> Geoscience Australia
>>  
>>  
>>  
>> Ph: 61 (02) 6249 9899
>>  
>> Fax: 61 (02) 6249 9956
>>  
>> email: jin.li at ga.gov.au <mailto:jin.li at ga.gov.au> <mailto:jin.li at ga.gov.au> 
>>  
>> --------------------------------------------
>>  
>>  
>>  
>>  
>>    [[alternative HTML version deleted]]
>>  
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch <mailto:R-sig-Geo at stat.math.ethz.ch>
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>   
>>     
>  
>   
>
>
>
> -- 
> Edzer Pebesma
> Institute for Geoinformatics (IfGI), University of M?nster, Weseler
> Stra?e 253, 48151 M?nster. Phone: +49 251 8333081 Fax: +49 251 8339763
> email: edzer.pebesma at uni-muenster.de <mailto:edzer.pebesma at uni-muenster.de> http://ifgi.uni-muenster.de/

-- 
Edzer Pebesma
Institute for Geoinformatics (IfGI), University of M?nster, Weseler
Stra?e 253, 48151 M?nster. Phone: +49 251 8333081 Fax: +49 251 8339763
email: edzer.pebesma at uni-muenster.de http://ifgi.uni-muenster.de/



From francois.jouvie at supelec.fr  Wed Jul  9 14:01:03 2008
From: francois.jouvie at supelec.fr (Francois JOUVIE)
Date: Wed, 9 Jul 2008 14:01:03 +0200
Subject: [R-sig-Geo] vgm with a Cauchy function
Message-ID: <3D7AB68F-4A30-44FC-AB88-5E001DA79DBC@supelec.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080709/e3686409/attachment.pl>

From bacaro at unisi.it  Wed Jul  9 12:36:29 2008
From: bacaro at unisi.it (Giovanni Bacaro)
Date: Wed, 09 Jul 2008 12:36:29 +0200
Subject: [R-sig-Geo] help for xvalid with external data
Message-ID: <000c01c8e1af$a5acc9b0$f1065d10$@it>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080709/a9844d61/attachment.pl>

From paulojus at c3sl.ufpr.br  Wed Jul  9 13:25:30 2008
From: paulojus at c3sl.ufpr.br (Paulo Justiniano Ribeiro Jr)
Date: Wed, 9 Jul 2008 08:25:30 -0300 (BRT)
Subject: [R-sig-Geo] help for xvalid with external data
In-Reply-To: <000c01c8e1af$a5acc9b0$f1065d10$@it>
References: <000c01c8e1af$a5acc9b0$f1065d10$@it>
Message-ID: <Pine.LNX.4.58.0807090824030.2019@caporal.c3sl.ufpr.br>

Dear Giovanni

Apparently there is a bug passing the trend
in the current version of the function.
I'll fix and let you know

Thanks
P.J.


Paulo Justiniano Ribeiro Jr
LEG (Laboratorio de Estatistica e Geoinformacao)
Universidade Federal do Parana
Caixa Postal 19.081
CEP 81.531-990
Curitiba, PR  -  Brasil
Tel: (+55) 41 3361 3573
Fax: (+55) 41 3361 3141
e-mail: paulojus AT  ufpr  br
http://www.leg.ufpr.br/~paulojus



On Wed, 9 Jul 2008, Giovanni Bacaro wrote:

>
>
> Hi, as usual I have a problem with R functions!
>
> I formulated a geostatistical model with geoR.
>
> I decided to include some covariates in my model, and I estimated all the
> parameters (linear model and covariance function parameters) by the likfit
> function as follows:
>
>
>
> mod1<-likfit(geodata, ini=varfitmodel, trend=~cov1 +cov2, lambda=0.5,
> cov.model="matern",kappa=0.5)
>
>
>
> Once I obtained my best model, I'd like to validate it using an external
> dataset by using the function xvalid.
>
>
>
> First of all, I transformed the external dataset in a geodata object, as
> usual, named
>
> "validation_data"
>
> ,where also covariates were included.
>
> Then I tried the following syntax:
>
>
>
> Validation<-xvalid(geodata, model=mod1,
> locations.xvalid=validation_data$coords,  data.xvalid= validation_data$data)
>
>
>
> Bur R says:
>
> Trend elements not found.
>
>
>
> My question is: how can I specify the trend structure within the xvalid
> function?
>
> Thank a lot
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



From stefan.duke at gmail.com  Thu Jul 10 14:26:46 2008
From: stefan.duke at gmail.com (stefan.duke at gmail.com)
Date: Thu, 10 Jul 2008 14:26:46 +0200
Subject: [R-sig-Geo] How to get "Applied Spatial Data Analysis with R"
	before 9th of August
Message-ID: <a211af3b0807100526l602f2d0p7b748132f8c74562@mail.gmail.com>

Hello,
I would like to get my hands on "Applied Spatial Data Analysis with R"
before I leave for summer vacation in the 2nd week of August (it
promises to be a great beach reading).

It is announced for the 25th of July, so I would like to know if this
is still publication date and what is the best vendor (e.g. at
Springer or Amazon or maybe the author directly?) to order?
I have made the experience that, in particular with new books, that
the vendor promises delivery within a few days but in fact needs weeks
before actually having it in stock.
To complicate things, I live in the Netherlands and not in the US.

Any thoughst on that vacation saving question?
Best,
Stefan



From T.Hengl at uva.nl  Thu Jul 10 14:59:30 2008
From: T.Hengl at uva.nl (Tomislav Hengl)
Date: Thu, 10 Jul 2008 14:59:30 +0200
Subject: [R-sig-Geo] How to get "Applied Spatial Data Analysis with
	R"before 9th of August
In-Reply-To: <a211af3b0807100526l602f2d0p7b748132f8c74562@mail.gmail.com>
Message-ID: <007c01c8e28c$caea9850$3a871291@pcibed193>


Hi Stefan,

This is what I got just today:


-----Original Message-----
From: Symanzik, Christian, SDC [mailto:Christian.Symanzik at springer.com] 
Sent: woensdag 9 juli 2008 17:47
To: Tomislav Hengl
Subject: AW: Request for an Order "Applied Spatial Data Analysis with R" ISBN 978-0-387-78170-9

Dear Mr. Hengl,

Thank you for your e-mail. To order the books, please follow the procedure and register on our
website. But we would like to point out that the book is still in preperation. We are waiting for
the manuscript and the estimated publishing date is "around" August. It can also happen that the
book will become available in the beginning of September and we can't give you a guarantee.

You can use this link to get updated with the availability of the book.
http://www.springer.com/public+health/epidemiology/book/978-0-387-78170-9

Please contact us again before ordering the book, because we would like to check if there is enough
time for the shipping after the book was published. 

Mit freundlichen Gr?ssen / With kind regards

Christian Symanzik
Customer Service Books/Authors
Springer Customer Service Center GmbH
Haberstrasse 7
D-69126 Heidelberg
Phone ++49 / 6221 / 345 - 0
fax     ++49 / 6221 / 345 - 4229
Email: sdc-bookorder at springer.com

Business hours: Monday to Friday: 8 a.m. to 8 p.m. local time


-----Original Message-----
From: r-sig-geo-bounces at stat.math.ethz.ch [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of
stefan.duke at gmail.com
Sent: donderdag 10 juli 2008 14:27
To: r-sig-geo at stat.math.ethz.ch
Subject: [R-sig-Geo] How to get "Applied Spatial Data Analysis with R"before 9th of August

Hello,
I would like to get my hands on "Applied Spatial Data Analysis with R"
before I leave for summer vacation in the 2nd week of August (it
promises to be a great beach reading).

It is announced for the 25th of July, so I would like to know if this
is still publication date and what is the best vendor (e.g. at
Springer or Amazon or maybe the author directly?) to order?
I have made the experience that, in particular with new books, that
the vendor promises delivery within a few days but in fact needs weeks
before actually having it in stock.
To complicate things, I live in the Netherlands and not in the US.

Any thoughst on that vacation saving question?
Best,
Stefan

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo



From T.Hengl at uva.nl  Thu Jul 10 15:30:30 2008
From: T.Hengl at uva.nl (Tomislav Hengl)
Date: Thu, 10 Jul 2008 15:30:30 +0200
Subject: [R-sig-Geo] How to get "Applied Spatial Data Analysis with
	R"before 9th of August
In-Reply-To: <a211af3b0807100526l602f2d0p7b748132f8c74562@mail.gmail.com>
Message-ID: <008401c8e291$1f842b70$3a871291@pcibed193>


I forgot to mention - the book's website is already on-line:

http://www.bias-project.org.uk/asdar-book/

The datasets and R scripts are still missing, but I imagine it should all soon be there? (for me
personally, R scripts/datasets/examaples are equally important as the book itself)


cheers,

Tom



-----Original Message-----
From: r-sig-geo-bounces at stat.math.ethz.ch [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of
stefan.duke at gmail.com
Sent: donderdag 10 juli 2008 14:27
To: r-sig-geo at stat.math.ethz.ch
Subject: [R-sig-Geo] How to get "Applied Spatial Data Analysis with R"before 9th of August

Hello,
I would like to get my hands on "Applied Spatial Data Analysis with R"
before I leave for summer vacation in the 2nd week of August (it
promises to be a great beach reading).

It is announced for the 25th of July, so I would like to know if this
is still publication date and what is the best vendor (e.g. at
Springer or Amazon or maybe the author directly?) to order?
I have made the experience that, in particular with new books, that
the vendor promises delivery within a few days but in fact needs weeks
before actually having it in stock.
To complicate things, I live in the Netherlands and not in the US.

Any thoughst on that vacation saving question?
Best,
Stefan

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo



From edzer.pebesma at uni-muenster.de  Thu Jul 10 16:36:49 2008
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 10 Jul 2008 16:36:49 +0200
Subject: [R-sig-Geo] How to get "Applied Spatial Data Analysis
 with	R"before 9th of August
In-Reply-To: <008401c8e291$1f842b70$3a871291@pcibed193>
References: <008401c8e291$1f842b70$3a871291@pcibed193>
Message-ID: <48761E81.3000602@uni-muenster.de>

Thanks for spotting; note that it is under construction, and is not 
planned to be finished long before the book, which may still take a 
while. Also note that each of the figure generating code snippets here 
currently still contains 11 lines of cluttering nonsense having to do 
with producing a book rather than an R plot only.
--
Edzer

Tomislav Hengl wrote:
> I forgot to mention - the book's website is already on-line:
>
> http://www.bias-project.org.uk/asdar-book/
>
> The datasets and R scripts are still missing, but I imagine it should all soon be there? (for me
> personally, R scripts/datasets/examaples are equally important as the book itself)
>
>
> cheers,
>
> Tom
>
>
>
> -----Original Message-----
> From: r-sig-geo-bounces at stat.math.ethz.ch [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of
> stefan.duke at gmail.com
> Sent: donderdag 10 juli 2008 14:27
> To: r-sig-geo at stat.math.ethz.ch
> Subject: [R-sig-Geo] How to get "Applied Spatial Data Analysis with R"before 9th of August
>
> Hello,
> I would like to get my hands on "Applied Spatial Data Analysis with R"
> before I leave for summer vacation in the 2nd week of August (it
> promises to be a great beach reading).
>
> It is announced for the 25th of July, so I would like to know if this
> is still publication date and what is the best vendor (e.g. at
> Springer or Amazon or maybe the author directly?) to order?
> I have made the experience that, in particular with new books, that
> the vendor promises delivery within a few days but in fact needs weeks
> before actually having it in stock.
> To complicate things, I live in the Netherlands and not in the US.
>
> Any thoughst on that vacation saving question?
> Best,
> Stefan
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster, 
Weseler Stra?e 253, 48151 M?nster. Phone: +49 251 8333081,
Fax: +49 251 8339763 http://ifgi.uni-muenster.de/



From v.gomezrubio at imperial.ac.uk  Thu Jul 10 16:39:54 2008
From: v.gomezrubio at imperial.ac.uk (Gomez Rubio, Virgilio)
Date: Thu, 10 Jul 2008 15:39:54 +0100
Subject: [R-sig-Geo] How to get "Applied Spatial Data Analysis
	withR"before 9th of August
References: <008401c8e291$1f842b70$3a871291@pcibed193>
Message-ID: <76ECA97A30510E498EB5A97AB4A6AE2104A116C0@icex1.ic.ac.uk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080710/47e74903/attachment.pl>

From enayatkhojasteh at yahoo.com  Thu Jul 10 18:07:13 2008
From: enayatkhojasteh at yahoo.com (enayat khojasteh)
Date: Thu, 10 Jul 2008 09:07:13 -0700 (PDT)
Subject: [R-sig-Geo] conditional independence
Message-ID: <303437.45555.qm@web36803.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080710/99f29393/attachment.pl>

From T.Hengl at uva.nl  Fri Jul 11 10:26:56 2008
From: T.Hengl at uva.nl (Tomislav Hengl)
Date: Fri, 11 Jul 2008 10:26:56 +0200
Subject: [R-sig-Geo] How to get "Applied Spatial Data Analysis
	withR"before 9th of August
In-Reply-To: <76ECA97A30510E498EB5A97AB4A6AE2104A116C0@icex1.ic.ac.uk>
Message-ID: <00ba01c8e32f$e1842100$3a871291@pcibed193>


Dear Virgilio,

Thanks for the info.

I still do not mind if you would inform us, via the r-sig-geo mailing list, once the website is 90%
finished (the official launch). Again, I feel that for many the website (R scripts, datasets,
exercises) will be equally important as the book itself.

It would be even better if the website would support some interactivity (e.g. to post comments, see
the most popular scripts etc.; see e.g. http://geomorphometry.org/view_scripts.asp?id=6).

Looking forward (and congratulations on your book),

Tom Hengl
http://spatial-analyst.net 


-----Original Message-----
From: Gomez Rubio, Virgilio [mailto:v.gomezrubio at imperial.ac.uk] 
Sent: donderdag 10 juli 2008 16:40
To: Tomislav Hengl; stefan.duke at gmail.com
Cc: r-sig-geo at stat.math.ethz.ch
Subject: RE: [R-sig-Geo] How to get "Applied Spatial Data Analysis withR"before 9th of August

Hi,

It is good to see that the book has rised such interest... :)
We are not sure about the exact release date yet, but I believe
it should be in production now.

We are working on the web site at the moment and I am afraid that it is
not ready yet. The R scripts and figures are already there and the data sets
will come soon. We plan to have everything ready at http://www.asdar-book.org
in two or three weeks.

What you can see at http://www.bias-project.org.uk/asdar-book is a test
that I am doing to produce a web site from the book source files.
The final site may look different... hopefully, it will look better. :)
But the R scripts should run smoothly (there is no guarantee at the moment
though!).

Best regards,

Virgilio

P.S: If you have any other question about the book I would personally prefer to be contacted
off list for these issues (self-advertising is not pleasant...).

-----Original Message-----
From: r-sig-geo-bounces at stat.math.ethz.ch on behalf of Tomislav Hengl
Sent: Thu 7/10/2008 2:30 PM
To: stefan.duke at gmail.com
Cc: r-sig-geo at stat.math.ethz.ch
Subject: Re: [R-sig-Geo] How to get "Applied Spatial Data Analysis withR"before 9th of August


I forgot to mention - the book's website is already on-line:

http://www.bias-project.org.uk/asdar-book/

The datasets and R scripts are still missing, but I imagine it should all soon be there? (for me
personally, R scripts/datasets/examaples are equally important as the book itself)


cheers,

Tom



-----Original Message-----
From: r-sig-geo-bounces at stat.math.ethz.ch [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of
stefan.duke at gmail.com
Sent: donderdag 10 juli 2008 14:27
To: r-sig-geo at stat.math.ethz.ch
Subject: [R-sig-Geo] How to get "Applied Spatial Data Analysis with R"before 9th of August

Hello,
I would like to get my hands on "Applied Spatial Data Analysis with R"
before I leave for summer vacation in the 2nd week of August (it
promises to be a great beach reading).

It is announced for the 25th of July, so I would like to know if this
is still publication date and what is the best vendor (e.g. at
Springer or Amazon or maybe the author directly?) to order?
I have made the experience that, in particular with new books, that
the vendor promises delivery within a few days but in fact needs weeks
before actually having it in stock.
To complicate things, I live in the Netherlands and not in the US.

Any thoughst on that vacation saving question?
Best,
Stefan

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo



From stefan.duke at gmail.com  Fri Jul 11 12:35:41 2008
From: stefan.duke at gmail.com (stefan.duke at gmail.com)
Date: Fri, 11 Jul 2008 12:35:41 +0200
Subject: [R-sig-Geo] How to get "Applied Spatial Data Analysis
	withR"before 9th of August
In-Reply-To: <00ba01c8e32f$e1842100$3a871291@pcibed193>
References: <76ECA97A30510E498EB5A97AB4A6AE2104A116C0@icex1.ic.ac.uk>
	<00ba01c8e32f$e1842100$3a871291@pcibed193>
Message-ID: <a211af3b0807110335i4a09c019w9e1df8d54a9604a8@mail.gmail.com>

Hi,
thanks a lot for the info. So I guess I will order via springer, hope
for the best and pack an Agatha Christie novel for the beach.

Best,
Stefan


On Fri, Jul 11, 2008 at 10:26 AM, Tomislav Hengl <T.Hengl at uva.nl> wrote:
>
> Dear Virgilio,
>
> Thanks for the info.
>
> I still do not mind if you would inform us, via the r-sig-geo mailing list, once the website is 90%
> finished (the official launch). Again, I feel that for many the website (R scripts, datasets,
> exercises) will be equally important as the book itself.
>
> It would be even better if the website would support some interactivity (e.g. to post comments, see
> the most popular scripts etc.; see e.g. http://geomorphometry.org/view_scripts.asp?id=6).
>
> Looking forward (and congratulations on your book),
>
> Tom Hengl
> http://spatial-analyst.net
>
>
> -----Original Message-----
> From: Gomez Rubio, Virgilio [mailto:v.gomezrubio at imperial.ac.uk]
> Sent: donderdag 10 juli 2008 16:40
> To: Tomislav Hengl; stefan.duke at gmail.com
> Cc: r-sig-geo at stat.math.ethz.ch
> Subject: RE: [R-sig-Geo] How to get "Applied Spatial Data Analysis withR"before 9th of August
>
> Hi,
>
> It is good to see that the book has rised such interest... :)
> We are not sure about the exact release date yet, but I believe
> it should be in production now.
>
> We are working on the web site at the moment and I am afraid that it is
> not ready yet. The R scripts and figures are already there and the data sets
> will come soon. We plan to have everything ready at http://www.asdar-book.org
> in two or three weeks.
>
> What you can see at http://www.bias-project.org.uk/asdar-book is a test
> that I am doing to produce a web site from the book source files.
> The final site may look different... hopefully, it will look better. :)
> But the R scripts should run smoothly (there is no guarantee at the moment
> though!).
>
> Best regards,
>
> Virgilio
>
> P.S: If you have any other question about the book I would personally prefer to be contacted
> off list for these issues (self-advertising is not pleasant...).
>
> -----Original Message-----
> From: r-sig-geo-bounces at stat.math.ethz.ch on behalf of Tomislav Hengl
> Sent: Thu 7/10/2008 2:30 PM
> To: stefan.duke at gmail.com
> Cc: r-sig-geo at stat.math.ethz.ch
> Subject: Re: [R-sig-Geo] How to get "Applied Spatial Data Analysis withR"before 9th of August
>
>
> I forgot to mention - the book's website is already on-line:
>
> http://www.bias-project.org.uk/asdar-book/
>
> The datasets and R scripts are still missing, but I imagine it should all soon be there? (for me
> personally, R scripts/datasets/examaples are equally important as the book itself)
>
>
> cheers,
>
> Tom
>
>
>
> -----Original Message-----
> From: r-sig-geo-bounces at stat.math.ethz.ch [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of
> stefan.duke at gmail.com
> Sent: donderdag 10 juli 2008 14:27
> To: r-sig-geo at stat.math.ethz.ch
> Subject: [R-sig-Geo] How to get "Applied Spatial Data Analysis with R"before 9th of August
>
> Hello,
> I would like to get my hands on "Applied Spatial Data Analysis with R"
> before I leave for summer vacation in the 2nd week of August (it
> promises to be a great beach reading).
>
> It is announced for the 25th of July, so I would like to know if this
> is still publication date and what is the best vendor (e.g. at
> Springer or Amazon or maybe the author directly?) to order?
> I have made the experience that, in particular with new books, that
> the vendor promises delivery within a few days but in fact needs weeks
> before actually having it in stock.
> To complicate things, I live in the Netherlands and not in the US.
>
> Any thoughst on that vacation saving question?
> Best,
> Stefan
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



From enayatkhojasteh at yahoo.com  Mon Jul 14 09:50:01 2008
From: enayatkhojasteh at yahoo.com (enayat khojasteh)
Date: Mon, 14 Jul 2008 00:50:01 -0700 (PDT)
Subject: [R-sig-Geo] Random walk in geostatistical simulation
Message-ID: <614010.64834.qm@web36801.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080714/03f4fc83/attachment.pl>

From spluque at gmail.com  Mon Jul 14 20:24:32 2008
From: spluque at gmail.com (Sebastian P. Luque)
Date: Mon, 14 Jul 2008 13:24:32 -0500
Subject: [R-sig-Geo] as.SpatialPolygons.GridTopology does not return
Message-ID: <87k5fouxwf.fsf@patagonia.sebmags.homelinux.org>

Hi,

With the following topology and projection defined:

---<---------------cut here---------------start-------------->---
R> gt.aea
                     X1   X2
cellcentre.offset -1609 -698
cellsize              2    2
cells.dim          1383  892
R> print(gt.aea at cellcentre.offset, digits=12)
[1] -1609.022720303  -698.011235825
R> print(gt.aea at cellsize, digits=12)
[1] 2 2
R> print(gt.aea at cells.dim, digits=12)
[1] 1383  892
R> p4
CRS arguments:
 +proj=aea +units=km +lon_0=214.074 +lat_0=69.641 +lat_1=63.4296666666667 +lat_2=75.8523333333333 +ellps=WGS84 
---<---------------cut here---------------end---------------->---

as.SpatialPolygons.GridTopology(gt.aea, p4), R goes to work using 92-97%
CPU user resource and never returns (well, at least not after 15 min),
which seems abnormal.  sessionInfo():

---<---------------cut here---------------start-------------->---
R> sessionInfo()
R version 2.7.1 (2008-06-23) 
x86_64-pc-linux-gnu 

locale:
LC_CTYPE=en_CA.UTF-8;LC_NUMERIC=C;LC_TIME=en_CA.UTF-8;LC_COLLATE=en_CA.UTF-8;LC_MONETARY=C;LC_MESSAGES=en_CA.UTF-8;LC_PAPER=en_CA.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_CA.UTF-8;LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] trip_1.1-1      sp_0.9-26       lattice_0.17-10

loaded via a namespace (and not attached):
[1] grid_2.7.1  tools_2.7.1
---<---------------cut here---------------end---------------->---

Am I running into some floating point issue?  I'd appreciate any
pointers on what the problem might be.  Thanks.


Cheers,

-- 
Seb



From Jin.Li at ga.gov.au  Tue Jul 15 07:39:59 2008
From: Jin.Li at ga.gov.au (Jin.Li at ga.gov.au)
Date: Tue, 15 Jul 2008 15:39:59 +1000
Subject: [R-sig-Geo] UK, KED or OCK? [SEC=UNCLASSIFIED]
Message-ID: <8BD19F29B0E16E4F88277A997CD872C204499694@mail.agso.gov.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080715/fd0c9762/attachment.pl>

From yong.li at unimelb.edu.au  Tue Jul 15 13:41:26 2008
From: yong.li at unimelb.edu.au (Yong Li)
Date: Tue, 15 Jul 2008 21:41:26 +1000
Subject: [R-sig-Geo] RE rgdal: Memory error!
In-Reply-To: <mailman.9.1216116002.14762.r-sig-geo@stat.math.ethz.ch>
Message-ID: <86DBA0678E017341B449A62F258E29561548A6@IS-EX-BEV3.unimelb.edu.au>

Hi All,

I ran the following code and got the below error:
"Error: cannot allocate vector of size 30.3 Mb".

Actually my laptop has 4096 MB ram, and I increased the limit already.
Pls advise any tips to let me pass through. 
I guess Dr Hengl experienced this before. 

Regards

Yong

#-----------------------------------------------------------------------
----
memory.size()
memory.size(TRUE)
memory.limit(size=4000)
round(memory.limit()/1024, 2)
options(scipen=3)

options(digits=15)
rm(list=ls())
require(sp)
require(gstat)
require(maptools)

cellsize <- 25

#         1            2           3            4               5

VarName=c("logit(SOM)","logit(TN)","logit(AVN)","logit(OLSENP)","logit(A
VK)")
out=paste("Variable","No","Model","C0","C","Spatial","Range","R2","p","S
SE",sep=",")
setwd("C:/Rcode/EJSS/Hongtong/county")
data <- read.csv("htfs_19N_2005_A.csv", header = TRUE, sep = ",")
names(data)
class(data)
coordinates(data) <- ~X+Y
proj4string(data) <- CRS("+proj=tmerc +lat_0=0 +lon_0=111 +k=1.0
+x_0=500000 +y_0=0 +ellps=krass +units=m +no_defs
+towgs84=22,-118,30.5,0,0,0,0")

library(rgdal)
predictors         = readGDAL("VIs/GSI.mpr")
predictors$CI      = readGDAL("VIs/CI.mpr")$band1
predictors$WRNDVI  = readGDAL("VIs/WRNDVI.mpr")$band1
predictors$ARVI    = readGDAL("VIs/ARVI.mpr")$band1
predictors$NDWI    = readGDAL("VIs/NDWI.mpr")$band1
predictors$EVI     = readGDAL("VIs/EVI.mpr")$band1
predictors$DEM     = readGDAL("Terrain/ht_dem.mpr")$band1
predictors$CONVERG = readGDAL("Terrain/ht_converg.mpr")$band1
predictors$PLANC   = readGDAL("Terrain/ht_planc.mpr")$band1
predictors$PROFC   = readGDAL("Terrain/ht_profc.mpr")$band1
predictors$SLOPE   = readGDAL("Terrain/ht_slope.mpr")$band1
predictors$TWI     = readGDAL("Terrain/ht_twi.mpr")$band1

predictors$GSI = predictors$band1
predictors$band1 = NULL
proj4string(predictors) <- CRS("+proj=tmerc +lat_0=0 +lon_0=111 +k=1.0
+x_0=500000 +y_0=0 +ellps=krass +units=m +no_defs
+towgs84=22,-118,30.5,0,0,0,0")
#-----------------------------------------------------------------------
----



From p.hiemstra at geo.uu.nl  Tue Jul 15 16:29:59 2008
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Tue, 15 Jul 2008 16:29:59 +0200
Subject: [R-sig-Geo] RE rgdal: Memory error!
In-Reply-To: <86DBA0678E017341B449A62F258E29561548A6@IS-EX-BEV3.unimelb.edu.au>
References: <86DBA0678E017341B449A62F258E29561548A6@IS-EX-BEV3.unimelb.edu.au>
Message-ID: <487CB467.9020708@geo.uu.nl>

Hi Yong,

What operating system are you using (probably windows) and is it 32 bit 
of 64 bit and after what command did your computer crash. Without this 
kind of information it is hard to judge what would be a solution for 
your problem.

cheers,
Paul

Yong Li wrote:
> Hi All,
>
> I ran the following code and got the below error:
> "Error: cannot allocate vector of size 30.3 Mb".
>
> Actually my laptop has 4096 MB ram, and I increased the limit already.
> Pls advise any tips to let me pass through. 
> I guess Dr Hengl experienced this before. 
>
> Regards
>
> Yong
>
> #-----------------------------------------------------------------------
> ----
> memory.size()
> memory.size(TRUE)
> memory.limit(size=4000)
> round(memory.limit()/1024, 2)
> options(scipen=3)
>
> options(digits=15)
> rm(list=ls())
> require(sp)
> require(gstat)
> require(maptools)
>
> cellsize <- 25
>
> #         1            2           3            4               5
>
> VarName=c("logit(SOM)","logit(TN)","logit(AVN)","logit(OLSENP)","logit(A
> VK)")
> out=paste("Variable","No","Model","C0","C","Spatial","Range","R2","p","S
> SE",sep=",")
> setwd("C:/Rcode/EJSS/Hongtong/county")
> data <- read.csv("htfs_19N_2005_A.csv", header = TRUE, sep = ",")
> names(data)
> class(data)
> coordinates(data) <- ~X+Y
> proj4string(data) <- CRS("+proj=tmerc +lat_0=0 +lon_0=111 +k=1.0
> +x_0=500000 +y_0=0 +ellps=krass +units=m +no_defs
> +towgs84=22,-118,30.5,0,0,0,0")
>
> library(rgdal)
> predictors         = readGDAL("VIs/GSI.mpr")
> predictors$CI      = readGDAL("VIs/CI.mpr")$band1
> predictors$WRNDVI  = readGDAL("VIs/WRNDVI.mpr")$band1
> predictors$ARVI    = readGDAL("VIs/ARVI.mpr")$band1
> predictors$NDWI    = readGDAL("VIs/NDWI.mpr")$band1
> predictors$EVI     = readGDAL("VIs/EVI.mpr")$band1
> predictors$DEM     = readGDAL("Terrain/ht_dem.mpr")$band1
> predictors$CONVERG = readGDAL("Terrain/ht_converg.mpr")$band1
> predictors$PLANC   = readGDAL("Terrain/ht_planc.mpr")$band1
> predictors$PROFC   = readGDAL("Terrain/ht_profc.mpr")$band1
> predictors$SLOPE   = readGDAL("Terrain/ht_slope.mpr")$band1
> predictors$TWI     = readGDAL("Terrain/ht_twi.mpr")$band1
>
> predictors$GSI = predictors$band1
> predictors$band1 = NULL
> proj4string(predictors) <- CRS("+proj=tmerc +lat_0=0 +lon_0=111 +k=1.0
> +x_0=500000 +y_0=0 +ellps=krass +units=m +no_defs
> +towgs84=22,-118,30.5,0,0,0,0")
> #-----------------------------------------------------------------------
> ----
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   


-- 
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone: 	+31302535773
Fax:	+31302531145
http://intamap.geo.uu.nl/~paul



From yong.li at unimelb.edu.au  Wed Jul 16 02:06:47 2008
From: yong.li at unimelb.edu.au (Yong Li)
Date: Wed, 16 Jul 2008 10:06:47 +1000
Subject: [R-sig-Geo] RE rgdal: Memory error!
In-Reply-To: <487CB467.9020708@geo.uu.nl>
Message-ID: <86DBA0678E017341B449A62F258E29561548A7@IS-EX-BEV3.unimelb.edu.au>

Hi Paul,

It is windows xp. Each grid has 1993 rows and 1990 cols. The error
occurred almost in the end of code at:
> predictors$SLOPE   = readGDAL("Terrain/ht_slope.mpr")$band1 

Yong

-----Original Message-----
From: Paul Hiemstra [mailto:p.hiemstra at geo.uu.nl]  
Sent: Wednesday, 16 July 2008 12:30 AM
To: Yong Li
Cc: r-sig-geo at stat.math.ethz.ch
Subject: Re: [R-sig-Geo] RE rgdal: Memory error!

Hi Yong,

What operating system are you using (probably windows) and is it 32 bit 
of 64 bit and after what command did your computer crash. Without this 
kind of information it is hard to judge what would be a solution for 
your problem.

cheers,
Paul

Yong Li wrote:
> Hi All,
>
> I ran the following code and got the below error:
> "Error: cannot allocate vector of size 30.3 Mb".
>
> Actually my laptop has 4096 MB ram, and I increased the limit already.
> Pls advise any tips to let me pass through. 
> I guess Dr Hengl experienced this before. 
>
> Regards
>
> Yong
>
>
#-----------------------------------------------------------------------
> ----
> memory.size()
> memory.size(TRUE)
> memory.limit(size=4000)
> round(memory.limit()/1024, 2)
> options(scipen=3)
>
> options(digits=15)
> rm(list=ls())
> require(sp)
> require(gstat)
> require(maptools)
>
> cellsize <- 25
>
> #         1            2           3            4               5
>
>
VarName=c("logit(SOM)","logit(TN)","logit(AVN)","logit(OLSENP)","logit(A
> VK)")
>
out=paste("Variable","No","Model","C0","C","Spatial","Range","R2","p","S
> SE",sep=",")
> setwd("C:/Rcode/EJSS/Hongtong/county")
> data <- read.csv("htfs_19N_2005_A.csv", header = TRUE, sep = ",")
> names(data)
> class(data)
> coordinates(data) <- ~X+Y
> proj4string(data) <- CRS("+proj=tmerc +lat_0=0 +lon_0=111 +k=1.0
> +x_0=500000 +y_0=0 +ellps=krass +units=m +no_defs
> +towgs84=22,-118,30.5,0,0,0,0")
>
> library(rgdal)
> predictors         = readGDAL("VIs/GSI.mpr")
> predictors$CI      = readGDAL("VIs/CI.mpr")$band1
> predictors$WRNDVI  = readGDAL("VIs/WRNDVI.mpr")$band1
> predictors$ARVI    = readGDAL("VIs/ARVI.mpr")$band1
> predictors$NDWI    = readGDAL("VIs/NDWI.mpr")$band1
> predictors$EVI     = readGDAL("VIs/EVI.mpr")$band1
> predictors$DEM     = readGDAL("Terrain/ht_dem.mpr")$band1
> predictors$CONVERG = readGDAL("Terrain/ht_converg.mpr")$band1
> predictors$PLANC   = readGDAL("Terrain/ht_planc.mpr")$band1
> predictors$PROFC   = readGDAL("Terrain/ht_profc.mpr")$band1
> predictors$SLOPE   = readGDAL("Terrain/ht_slope.mpr")$band1
> predictors$TWI     = readGDAL("Terrain/ht_twi.mpr")$band1
>
> predictors$GSI = predictors$band1
> predictors$band1 = NULL
> proj4string(predictors) <- CRS("+proj=tmerc +lat_0=0 +lon_0=111 +k=1.0
> +x_0=500000 +y_0=0 +ellps=krass +units=m +no_defs
> +towgs84=22,-118,30.5,0,0,0,0")
>
#-----------------------------------------------------------------------
> ----
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   


-- 
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone: 	+31302535773
Fax:	+31302531145
http://intamap.geo.uu.nl/~paul



From marco.helbich at gmx.at  Wed Jul 16 07:27:28 2008
From: marco.helbich at gmx.at (Marco Helbich)
Date: Wed, 16 Jul 2008 07:27:28 +0200
Subject: [R-sig-Geo] package for bidimemsional regression
Message-ID: <000b01c8e704$a3e5f020$0300a8c0@mirk>

Dear list,

Is there a package available, which computes the "bidimemsional regression"? 
For literature see e.g.

Tobler, W: Bidimensional Regression, Geographical Analysis, 26: 186-212.

Friedman, A; Kohler, B 2003: Bidimensional regression: A method for 
assessing the configural similarity of cognitive maps and other 
two-dimensional data. Psychological Methods, B, 468-491

I appreciate every hint!

Best regards
Marco Helbich



From ashton at msu.edu  Wed Jul 16 16:17:21 2008
From: ashton at msu.edu (Ashton Shortridge)
Date: Wed, 16 Jul 2008 10:17:21 -0400
Subject: [R-sig-Geo] package for bidimemsional regression
In-Reply-To: <000b01c8e704$a3e5f020$0300a8c0@mirk>
References: <000b01c8e704$a3e5f020$0300a8c0@mirk>
Message-ID: <200807161017.21493.ashton@msu.edu>

Hi Marco,

I'm no expert on this area, but a quick read indicates that this refers to a 
variety of approaches. One main point is that Tobler and others suggest that 
the regression is separable into two functions. That is, the goal is to 
determine the mapping of a set of (x,y) into a set of (u,v), and these can be 
separated:
u = f(x,y)
v = g(u,v)

This is a standard problem in rectification, and depending on what assumptions 
you are willing to make (e.g. are f and g independent? Is the relationship 
linear?) a wide array of methods present themselves. The Tobler paper(s) and 
others identify a number of these.

I thought the Friedman & Kohler paper (Psych Methods 8(4) 468-491) was very 
clear on some implementation issues; if you are somewhat comfortable with 
matrices and R scripting you can probably develop this pretty quickly 
yourself.

The Friedman & Kohler paper is here:
http://www.psych.ualberta.ca/%7Ealinda/PDFs/Friedman%20Kohler%20%5B03-Psych%20Methods%5D.pdf

Yours, 

Ashton Shortridge
Michigan State University

On Wednesday 16 July 2008, Marco Helbich wrote:
> Dear list,
>
> Is there a package available, which computes the "bidimemsional
> regression"? For literature see e.g.
>
> Tobler, W: Bidimensional Regression, Geographical Analysis, 26: 186-212.
>
> Friedman, A; Kohler, B 2003: Bidimensional regression: A method for
> assessing the configural similarity of cognitive maps and other
> two-dimensional data. Psychological Methods, B, 468-491
>
> I appreciate every hint!
>
> Best regards
> Marco Helbich
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



From chunkylo at gmail.com  Wed Jul 16 22:15:17 2008
From: chunkylo at gmail.com (Jeebz)
Date: Wed, 16 Jul 2008 13:15:17 -0700
Subject: [R-sig-Geo] kernels, contours, points?
Message-ID: <E93C40BE-D801-408B-BD90-52DFAC931783@gmail.com>

Hi

I'm new to the R spatial packages, but I have a spatial-oriented task  
I would like to accomplish.

I have a 2d grid of points and each point has a class (13 classes  
total in the dataset).  The grid is small-ish, only 256x256.  I have  
run a 2d kernel density estimation (using kde2d) and can create a  
contour plot easily (per class).

What I would like to do is use a contour line to extract all the  
points from the original grid that are bounded by that contour.   
Ultimately, I wish to calculate a sort of "purity" measure, so given a  
particular contour (e.g. a contour level that encloses 95% of the  
classes points), how many points from other classes fall in with the  
classes that were used to define the contour.

I know there has to be a way to do this with R... right?  A colleague  
of mine showed my how it could be done using ArcGIS and "Hawkes  
tools", by calculating percent volume contours, but I don't know where  
to begin in R.

Anyone have any thoughts or examples on this?

Much thanks in advance,

bct



From ashton at msu.edu  Thu Jul 17 15:48:09 2008
From: ashton at msu.edu (Ashton Shortridge)
Date: Thu, 17 Jul 2008 09:48:09 -0400
Subject: [R-sig-Geo] kernels, contours, points?
In-Reply-To: <E93C40BE-D801-408B-BD90-52DFAC931783@gmail.com>
References: <E93C40BE-D801-408B-BD90-52DFAC931783@gmail.com>
Message-ID: <200807170948.09396.ashton@msu.edu>

I think creative use of the overlay() function would accomplish what you want.
Some example code that is a bit like what you propose (uses the sp library):

# I have a polydataframe object:
my.poly.data <- SpatialPolygonsDataFrame(my.poly, area.lu.table)

# I have a set of point objects (derived, in this case, from spsample):
samgrid <- spsample(us.spPolys, 500, 'regular')  

# I'd like to know which poly in my.poly.data each point in samgrid falls in:
sample.area <- overlay(my.poly.data, samgrid)$name

For this to work, you would need to figure out how to turn contours into 
polys, which might be tricky, especially if they aren't closed and/or have 
holes (pits) within them.

I admit that I am not very comfortable working with the sp objects, and I 
would generally advise someone doing GIS-type work to use a GIS. Hawth's 
(not "Hawk's") Analysis Tools are very useful in an ESRI environment, as are 
built in commands and extensions in many GIS.

yours,

Ashton
-- 
Ashton Shortridge
Associate Professor			ashton at msu.edu
Dept of Geography			http://www.msu.edu/~ashton
235 Geography Building		ph (517) 432-3561
Michigan State University		fx (517) 432-1671

On Wednesday 16 July 2008, Jeebz wrote:
> Hi
>
> I'm new to the R spatial packages, but I have a spatial-oriented task
> I would like to accomplish.
>
> I have a 2d grid of points and each point has a class (13 classes
> total in the dataset).  The grid is small-ish, only 256x256.  I have
> run a 2d kernel density estimation (using kde2d) and can create a
> contour plot easily (per class).
>
> What I would like to do is use a contour line to extract all the
> points from the original grid that are bounded by that contour.
> Ultimately, I wish to calculate a sort of "purity" measure, so given a
> particular contour (e.g. a contour level that encloses 95% of the
> classes points), how many points from other classes fall in with the
> classes that were used to define the contour.
>
> I know there has to be a way to do this with R... right?  A colleague
> of mine showed my how it could be done using ArcGIS and "Hawkes
> tools", by calculating percent volume contours, but I don't know where
> to begin in R.
>
> Anyone have any thoughts or examples on this?
>
> Much thanks in advance,
>
> bct
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



From jonthayn at ku.edu  Thu Jul 17 17:47:57 2008
From: jonthayn at ku.edu (Jonathan Boyd Thayn)
Date: Thu, 17 Jul 2008 10:47:57 -0500
Subject: [R-sig-Geo] creating a multi-band SpatialGridDataFrame
Message-ID: <5E6DA831-6CD7-4A61-896B-8A1348C392A2@ku.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080717/57cb64e1/attachment.pl>

From hi_ono2001 at ybb.ne.jp  Thu Jul 17 20:22:10 2008
From: hi_ono2001 at ybb.ne.jp (Hisaji ONO)
Date: Fri, 18 Jul 2008 03:22:10 +0900 (JST)
Subject: [R-sig-Geo] package for bidimemsional regression
In-Reply-To: <000b01c8e704$a3e5f020$0300a8c0@mirk>
Message-ID: <20080717182210.9242.qmail@web10711.mail.bbt.yahoo.co.jp>

Hello.

 I've tried to implement Euclid and Affine versions of
Bidimensional Analysis.


#
#algorithms an data from Nakaya, T. (1998): Statistical
analysis of spatial distortion: an application of
bidimensional regression procedure, The Ritsumeikan
Bungaku 553, 1333-1356. in Japanese
#
# You had better refer to, "Nakaya, T. (1997): Statistical
inferences in bidimensional regression models,
Geographical Analysis 29, 169-186." too.


# sample data
#kanazawa1.csv
#
0.105,0.515,0.041,0.536
0.88,-0.122,0.445,-0.047
1.057,1.109,0.773,0.83
1.262,0.463,0.747,0.309
2.316,-0.037,1.328,-0.687
3.293,-0.149,2.007,-1.452
-0.743,2.092,-0.316,1.457
-0.964,1.328,-0.497,1.12
-1.249,2.322,-0.629,1.632
-0.179,-0.689,-0.124,-0.25
0.832,-0.926,0.309,-0.611
2.217,-1.092,0.847,-0.959
-0.352,-1.571,-0.368,-0.503
1.434,-2.092,0.44,-1.543
-0.611,-2.908,-0.964,-1.707
0.497,-2.989,-0.379,-1.763
2.333,1.214,1.83,-0.134
3.13,1.307,2.184,-0.752
2.296,2.232,1.763,0.72

d<-read.csv("F://tobler/bidimension_regression/kanazawa1.csv",header=
FALSE)
u<-d[,1]
v<-d[,2]
x<-d[,3]
y<-d[,4]

#
# Euclid version of Bidimensional Regression
#using design matrix
#

d1<-cbind(c(d[,1],d[,2]),c(rep(1,nrow(d)),rep(0,nrow(d))),c(rep(0,nrow(d)),rep(1,nrow(d))),c(d[,3],d[,4]),c(d[,4]*-1,d[,3]))
lu<-lm(d1[,1] ~ d1[,2]+d1[,3]+d1[,4]+d1[,5] - 1)

a1<-lu$coefficients[3]
a2<-lu$coefficients[4]
b1<-lu$coefficients[1]
b2<-lu$coefficients[2]
cc<-sqrt(a1*a1+a2*a2)

theta<-acos(a1/cc)

#predict values
uv<-predict(lu)
uu<-uv[1:(length(uv)/2)]
vv<-uv[(length(uv)/2 +1):length]

#draw scattergram
plot(u,v)
points(uu,vv,col="red")


#
# Affine version of Bidimensional Regression
#
daf<-cbind(c(d[,1],d[,2]),c(rep(1,nrow(d)),rep(0,nrow(d))),c(rep(0,nrow(d)),rep(1,nrow(d))),c(d[,3],rep(0,nrow(d))),c(d[,4],rep(0,nrow(d))),c(rep(0,nrow(d)),d[,3]),c(rep(0,nrow(d)),d[,4]))
la<-lm(daf[,1] ~
daf[,2]+daf[,3]+daf[,4]+daf[,5]+daf[,6]+daf[,7] - 1)




 I hope this will help you.


 Regards.

--- Marco Helbich <marco.helbich at gmx.at> wrote:

> Dear list,
> 
> Is there a package available, which computes the
> "bidimemsional regression"? 
> For literature see e.g.
> 
> Tobler, W: Bidimensional Regression, Geographical
> Analysis, 26: 186-212.
> 
> Friedman, A; Kohler, B 2003: Bidimensional
> regression: A method for 
> assessing the configural similarity of cognitive
> maps and other 
> two-dimensional data. Psychological Methods, B,
> 468-491
> 
> I appreciate every hint!
> 
> Best regards
> Marco Helbich
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



From chunkylo at gmail.com  Thu Jul 17 21:17:45 2008
From: chunkylo at gmail.com (Jeebz)
Date: Thu, 17 Jul 2008 12:17:45 -0700
Subject: [R-sig-Geo] kernels, contours, points?
In-Reply-To: <200807170948.09396.ashton@msu.edu>
References: <E93C40BE-D801-408B-BD90-52DFAC931783@gmail.com>
	<200807170948.09396.ashton@msu.edu>
Message-ID: <67399C1D-2A86-46F3-9B15-6CD06BA0D22B@gmail.com>

That's exactly the issue I think: anyone know how to turn a contour  
into a polygon??

On Jul 17, 2008, at 6:48 AM, Ashton Shortridge wrote:

> I think creative use of the overlay() function would accomplish what  
> you want.
> Some example code that is a bit like what you propose (uses the sp  
> library):
>
> # I have a polydataframe object:
> my.poly.data <- SpatialPolygonsDataFrame(my.poly, area.lu.table)
>
> # I have a set of point objects (derived, in this case, from  
> spsample):
> samgrid <- spsample(us.spPolys, 500, 'regular')
>
> # I'd like to know which poly in my.poly.data each point in samgrid  
> falls in:
> sample.area <- overlay(my.poly.data, samgrid)$name
>
> For this to work, you would need to figure out how to turn contours  
> into
> polys, which might be tricky, especially if they aren't closed and/ 
> or have
> holes (pits) within them.
>
> I admit that I am not very comfortable working with the sp objects,  
> and I
> would generally advise someone doing GIS-type work to use a GIS.  
> Hawth's
> (not "Hawk's") Analysis Tools are very useful in an ESRI  
> environment, as are
> built in commands and extensions in many GIS.
>
> yours,
>
> Ashton
> -- 
> Ashton Shortridge
> Associate Professor			ashton at msu.edu
> Dept of Geography			http://www.msu.edu/~ashton
> 235 Geography Building		ph (517) 432-3561
> Michigan State University		fx (517) 432-1671
>
> On Wednesday 16 July 2008, Jeebz wrote:
>> Hi
>>
>> I'm new to the R spatial packages, but I have a spatial-oriented task
>> I would like to accomplish.
>>
>> I have a 2d grid of points and each point has a class (13 classes
>> total in the dataset).  The grid is small-ish, only 256x256.  I have
>> run a 2d kernel density estimation (using kde2d) and can create a
>> contour plot easily (per class).
>>
>> What I would like to do is use a contour line to extract all the
>> points from the original grid that are bounded by that contour.
>> Ultimately, I wish to calculate a sort of "purity" measure, so  
>> given a
>> particular contour (e.g. a contour level that encloses 95% of the
>> classes points), how many points from other classes fall in with the
>> classes that were used to define the contour.
>>
>> I know there has to be a way to do this with R... right?  A colleague
>> of mine showed my how it could be done using ArcGIS and "Hawkes
>> tools", by calculating percent volume contours, but I don't know  
>> where
>> to begin in R.
>>
>> Anyone have any thoughts or examples on this?
>>
>> Much thanks in advance,
>>
>> bct
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



From mao.loecher at gmail.com  Fri Jul 18 16:41:49 2008
From: mao.loecher at gmail.com (Markus Loecher)
Date: Fri, 18 Jul 2008 10:41:49 -0400
Subject: [R-sig-Geo] timeStamp in kmlOverlay, animated kml
Message-ID: <3827b1320807180741s463b7e1an3f683d3196928698@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080718/c395b408/attachment.pl>

From detuimelaar at snail-mail.net  Sat Jul 19 16:52:09 2008
From: detuimelaar at snail-mail.net (De Tuimelaar)
Date: Sat, 19 Jul 2008 07:52:09 -0700
Subject: [R-sig-Geo] Welcome to the "R-sig-Geo" mailing list (Digest
	mode)
Message-ID: <81f301c8e9af$05575fe0$086a010a@mail2world.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080719/f7a294a0/attachment.pl>

From detuimelaar at snail-mail.net  Sun Jul 20 10:34:34 2008
From: detuimelaar at snail-mail.net (De Tuimelaar)
Date: Sun, 20 Jul 2008 01:34:34 -0700
Subject: [R-sig-Geo] generalized spatial autoregressive lag model
Message-ID: <EC2C34B0469C4B25B5647C03F510071D@mail2world.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080720/d1ce4c0b/attachment.pl>

From patuelli at tin.it  Sun Jul 20 12:31:14 2008
From: patuelli at tin.it (Roberto Patuelli)
Date: Sun, 20 Jul 2008 12:31:14 +0200
Subject: [R-sig-Geo] generalized spatial autoregressive lag model
Message-ID: <009001c8ea53$bcebbc10$3b01a8c0@Ciretto>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080720/18749c9a/attachment.pl>

From T.Hengl at uva.nl  Sun Jul 20 20:49:45 2008
From: T.Hengl at uva.nl (Hengl, T.)
Date: Sun, 20 Jul 2008 20:49:45 +0200
Subject: [R-sig-Geo] RE rgdal: Memory error!
References: <86DBA0678E017341B449A62F258E29561548A7@IS-EX-BEV3.unimelb.edu.au>
Message-ID: <37382E8DCB905042969BA78541F6570624D56B@kwek.ic.uva.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080720/a029393c/attachment.pl>

From jaime.garcia at uni-bonn.de  Mon Jul 21 15:15:01 2008
From: jaime.garcia at uni-bonn.de (=?iso-8859-1?Q?Jaime_R._Garc=EDa_M=E1rquez?=)
Date: Mon, 21 Jul 2008 15:15:01 +0200
Subject: [R-sig-Geo] Prediction using Autologistic Regression
Message-ID: <000c01c8eb33$c81f8ef0$585eacd0$@garcia@uni-bonn.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080721/9db7e584/attachment.pl>

From milton.ruser at gmail.com  Mon Jul 21 21:11:09 2008
From: milton.ruser at gmail.com (milton ruser)
Date: Mon, 21 Jul 2008 16:11:09 -0300
Subject: [R-sig-Geo] generating distance map for Large map
Message-ID: <3aaf1a030807211211q737d0b71h633d0ea201eafa54@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080721/940e7779/attachment.pl>

From dylan.beaudette at gmail.com  Mon Jul 21 21:30:01 2008
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Mon, 21 Jul 2008 12:30:01 -0700
Subject: [R-sig-Geo] generating distance map for Large map
In-Reply-To: <3aaf1a030807211211q737d0b71h633d0ea201eafa54@mail.gmail.com>
References: <3aaf1a030807211211q737d0b71h633d0ea201eafa54@mail.gmail.com>
Message-ID: <200807211230.01940.dylan.beaudette@gmail.com>

On Monday 21 July 2008, milton ruser wrote:
> Dear all,
>
> I have a very large BINARY image (60,000x50,000 pixels) and need to
> generate the distance map from the 1 values.
> When the images are small than my image, I can generate the distance map
> using ArcGis (my image is in .IMG format), but ArcGis return error for this
> large one.
>
> I am running R 2.7.1 under windows/xp. Is there a way of do this job using
> R ou RSaga? (unfortunately I don?t have GRASS installed), and my
> experience with RSAGA is near zero. My computer is 4GB ram.  I can load the
> images on ArcGis and Erdas without problem, but I only don?t know how do
> this task.
>

Try and use GRASS. It is made for these types of operations. Since R is 
memory-bound (for most practical purposes) a sequential-access approach like 
GRASS should work much better. There is a windows installer for GRASS, or you 
can just install the latest QGIS: this comes with GRASS!

Cheers,

Dylan


-- 
Dylan Beaudette
Soil Resource Laboratory
http://casoilresource.lawr.ucdavis.edu/
University of California at Davis
530.754.7341



From giohappy at gmail.com  Tue Jul 22 00:39:54 2008
From: giohappy at gmail.com (G. Allegri)
Date: Tue, 22 Jul 2008 00:39:54 +0200
Subject: [R-sig-Geo] generating distance map for Large map
In-Reply-To: <200807211230.01940.dylan.beaudette@gmail.com>
References: <3aaf1a030807211211q737d0b71h633d0ea201eafa54@mail.gmail.com>
	<200807211230.01940.dylan.beaudette@gmail.com>
Message-ID: <e12429640807211539x4c702c0ay5b39227900a6c283@mail.gmail.com>

http://grass.itc.it/grass63/binary/mswindows/native/

2008/7/21 Dylan Beaudette <dylan.beaudette at gmail.com>:
> On Monday 21 July 2008, milton ruser wrote:
>> Dear all,
>>
>> I have a very large BINARY image (60,000x50,000 pixels) and need to
>> generate the distance map from the 1 values.
>> When the images are small than my image, I can generate the distance map
>> using ArcGis (my image is in .IMG format), but ArcGis return error for this
>> large one.
>>
>> I am running R 2.7.1 under windows/xp. Is there a way of do this job using
>> R ou RSaga? (unfortunately I don?t have GRASS installed), and my
>> experience with RSAGA is near zero. My computer is 4GB ram.  I can load the
>> images on ArcGis and Erdas without problem, but I only don?t know how do
>> this task.
>>
>
> Try and use GRASS. It is made for these types of operations. Since R is
> memory-bound (for most practical purposes) a sequential-access approach like
> GRASS should work much better. There is a windows installer for GRASS, or you
> can just install the latest QGIS: this comes with GRASS!
>
> Cheers,
>
> Dylan
>
>
> --
> Dylan Beaudette
> Soil Resource Laboratory
> http://casoilresource.lawr.ucdavis.edu/
> University of California at Davis
> 530.754.7341
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>



From hi_ono2001 at ybb.ne.jp  Tue Jul 22 14:43:20 2008
From: hi_ono2001 at ybb.ne.jp (Hisaji ONO)
Date: Tue, 22 Jul 2008 21:43:20 +0900 (JST)
Subject: [R-sig-Geo] About support site for "Applied Spatial Data Analysis
	with R"
Message-ID: <20080722124320.63700.qmail@web10706.mail.bbt.yahoo.co.jp>

Hello.

 I couldn't see this
site(http://www.bias-project.org.uk/asdar-book/) on IE 6
correctly.

 However I could do on Firefox 3.0 withought problem.



 Regards.



From yud at mail.montclair.edu  Tue Jul 22 14:55:27 2008
From: yud at mail.montclair.edu (Danlin Yu)
Date: Tue, 22 Jul 2008 08:55:27 -0400
Subject: [R-sig-Geo] About support site for "Applied Spatial Data
 Analysis with R"
In-Reply-To: <20080722124320.63700.qmail@web10706.mail.bbt.yahoo.co.jp>
References: <20080722124320.63700.qmail@web10706.mail.bbt.yahoo.co.jp>
Message-ID: <4885D8BF.3040800@mail.montclair.edu>

Hisaji:

If you update your browser to IE 7.x (free updating), it'd show fine.

Best,
Danlin

Hisaji ONO wrote:
> Hello.
>
>  I couldn't see this
> site(http://www.bias-project.org.uk/asdar-book/) on IE 6
> correctly.
>
>  However I could do on Firefox 3.0 withought problem.
>
>
>
>  Regards.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
___________________________________________
Danlin Yu, Ph.D.
Assistant Professor
Department of Earth & Environmental Studies
Montclair State University
Montclair, NJ, 07043
Tel: 973-655-4313
Fax: 973-655-4072
email: yud at mail.montclair.edu
webpage: csam.montclair.edu/~yu



From v.gomezrubio at imperial.ac.uk  Tue Jul 22 15:00:20 2008
From: v.gomezrubio at imperial.ac.uk (Virgilio Gomez-Rubio)
Date: Tue, 22 Jul 2008 14:00:20 +0100
Subject: [R-sig-Geo] About support site for "Applied Spatial
	Data	Analysis with R"
In-Reply-To: <4885D8BF.3040800@mail.montclair.edu>
References: <20080722124320.63700.qmail@web10706.mail.bbt.yahoo.co.jp>
	<4885D8BF.3040800@mail.montclair.edu>
Message-ID: <1216731620.21211.28.camel@fh-vrubio>

Dear all,

Many thanks for the update. We are still working on the website. So,
there may be some stuff not working properly until the site is
officially 'launched'.

Best regards,

Virgilio



From regmi_pujan at hotmail.com  Tue Jul 22 15:00:47 2008
From: regmi_pujan at hotmail.com (PUJAN RAJ REGMI)
Date: Tue, 22 Jul 2008 13:00:47 +0000
Subject: [R-sig-Geo] To fix the axis increment
Message-ID: <BAY113-W43C1E349098B9A80B62F9084850@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080722/7c73e3c5/attachment.pl>

From dhughj at essex.ac.uk  Tue Jul 22 21:09:28 2008
From: dhughj at essex.ac.uk (David Hugh-Jones)
Date: Tue, 22 Jul 2008 21:09:28 +0200
Subject: [R-sig-Geo] wiki, 2 weeks later
Message-ID: <f5d848060807221209m1de653acp42b5514480ba3e03@mail.gmail.com>

A while ago I and some others put a bit of work into the R wiki
section on spatial data. Looking at it, there are still a couple of
things missing. So, if you know anything about using GISes, or about
kriging, please take a look at

http://wiki.r-project.org/rwiki/doku.php?id=tips:spatial-data:when_to_use
http://wiki.r-project.org/rwiki/doku.php?id=tips:stats-spatial:kriging

and see if you can replace the blank spaces with something useful....

Cheers
David Hugh-Jones
PhD Candidate
Essex University Department of Government
http://davidhughjones.googlepages.com



From jatwood at montana.edu  Wed Jul 23 01:33:50 2008
From: jatwood at montana.edu (jatwood at montana.edu)
Date: Tue, 22 Jul 2008 19:33:50 -0400
Subject: [R-sig-Geo] identying shapefile polygons containing long-lat points
Message-ID: <380-220087222233350550@M2W020.mail2web.com>

Good Afternoon
I searched the archives but could not find the answer to my question.
I have shapefiles for various geographic regions such as states, counties,
zipcode areas, townships, etc.  I also have long-lat coordinates for 12000
plus weather stations.  I am able to use maptools to plot the maps and am
able to plot the points on the polygon maps with appropriate text. However,
I also need to be able to identify which shapefile polygon each weather
station (or pobbibly other long-lat points) lies within.

Does any package have a function similar to the "maps" packages'
"map.where" function that would work with more general shapefile polygons?

I am new to this list so please excuse me if this question has been
previously addressed.  I will appreciate any help or suggestions.

   

--------------------------------------------------------------------
mail2web.com ? Enhanced email for the mobile individual based on Microsoft?
Exchange - http://link.mail2web.com/Personal/EnhancedEmail



From reeves at nceas.ucsb.edu  Wed Jul 23 02:03:56 2008
From: reeves at nceas.ucsb.edu (Rick Reeves)
Date: Tue, 22 Jul 2008 17:03:56 -0700
Subject: [R-sig-Geo] identying shapefile polygons containing long-lat
 points
In-Reply-To: <380-220087222233350550@M2W020.mail2web.com>
References: <380-220087222233350550@M2W020.mail2web.com>
Message-ID: <4886756C.7040304@nceas.ucsb.edu>

Hi:

Check out the FindPolys method in the PBSMapping package. here is a code 
snippet from a larger example:
(I will be extracting a simpler use case for distribution soon, but this 
will give you the general idea....

HucPolys = readShapePoly("AllHucsMerged")
DamPoints = readShapePoints("Part1Dams")
#
NumHucs = length(HucPolys at data[,1])
NumDams = length(DamPoints at data[,1])
#
# promote points to EventData for compatability with FindPolys
#
DamEvents <- as.EventData(data.frame(EID=1:NumDams ,X=DamPoints at coords[,1],
Y=DamPoints at coords[,2]),projection = "LL")
#
ValidHucsSP = SpatialPolygons2PolySet(HucPolys)
#
# Prepend (add to front) column to DamPoints data frame for HUC assignment
#
Huc8ID = as.numeric(c(1:NumDams))
dim(Huc8ID) = c(NumDams,1)
DamPoints at data = cbind(Huc8ID,DamPoints at data)
#
# convert factors to strings in Data Frames and Lists.
#
print(sprintf("about to assign.."))
browser()
#
# note: it is possible for a PointPolyFlags entry to be NA, if
# no polygon was found for a specific point.
#
PointPolyFlags = findPolys(DamEvents,ValidHucsSP)

OR, check out this example, which is more compete:

http://nceas.ucsb.edu/scicomp/GISSeminar/UseCases/PointInPolygonAnalysis/point_in_poly.html

Hope this helps!


jatwood at montana.edu wrote:
> Good Afternoon
> I searched the archives but could not find the answer to my question.
> I have shapefiles for various geographic regions such as states, counties,
> zipcode areas, townships, etc.  I also have long-lat coordinates for 12000
> plus weather stations.  I am able to use maptools to plot the maps and am
> able to plot the points on the polygon maps with appropriate text. However,
> I also need to be able to identify which shapefile polygon each weather
> station (or pobbibly other long-lat points) lies within.
>
> Does any package have a function similar to the "maps" packages'
> "map.where" function that would work with more general shapefile polygons?
>
> I am new to this list so please excuse me if this question has been
> previously addressed.  I will appreciate any help or suggestions.
>
>    
>
> --------------------------------------------------------------------
> mail2web.com ? Enhanced email for the mobile individual based on Microsoft?
> Exchange - http://link.mail2web.com/Personal/EnhancedEmail
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>   
-------------- next part --------------
A non-text attachment was scrubbed...
Name: reeves.vcf
Type: text/x-vcard
Size: 339 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080722/265cb973/attachment.vcf>

From giohappy at gmail.com  Wed Jul 23 02:25:22 2008
From: giohappy at gmail.com (G. Allegri)
Date: Wed, 23 Jul 2008 02:25:22 +0200
Subject: [R-sig-Geo] identying shapefile polygons containing long-lat
	points
In-Reply-To: <4886756C.7040304@nceas.ucsb.edu>
References: <380-220087222233350550@M2W020.mail2web.com>
	<4886756C.7040304@nceas.ucsb.edu>
Message-ID: <e12429640807221725r3cd87877wfbb04d95ea16fa33@mail.gmail.com>

Maybe this could help?
http://sekhon.berkeley.edu/library/sp/html/overlay-methods.html

2008/7/23 Rick Reeves <reeves at nceas.ucsb.edu>:
> Hi:
>
> Check out the FindPolys method in the PBSMapping package. here is a code
> snippet from a larger example:
> (I will be extracting a simpler use case for distribution soon, but this
> will give you the general idea....
>
> HucPolys = readShapePoly("AllHucsMerged")
> DamPoints = readShapePoints("Part1Dams")
> #
> NumHucs = length(HucPolys at data[,1])
> NumDams = length(DamPoints at data[,1])
> #
> # promote points to EventData for compatability with FindPolys
> #
> DamEvents <- as.EventData(data.frame(EID=1:NumDams ,X=DamPoints at coords[,1],
> Y=DamPoints at coords[,2]),projection = "LL")
> #
> ValidHucsSP = SpatialPolygons2PolySet(HucPolys)
> #
> # Prepend (add to front) column to DamPoints data frame for HUC assignment
> #
> Huc8ID = as.numeric(c(1:NumDams))
> dim(Huc8ID) = c(NumDams,1)
> DamPoints at data = cbind(Huc8ID,DamPoints at data)
> #
> # convert factors to strings in Data Frames and Lists.
> #
> print(sprintf("about to assign.."))
> browser()
> #
> # note: it is possible for a PointPolyFlags entry to be NA, if
> # no polygon was found for a specific point.
> #
> PointPolyFlags = findPolys(DamEvents,ValidHucsSP)
>
> OR, check out this example, which is more compete:
>
> http://nceas.ucsb.edu/scicomp/GISSeminar/UseCases/PointInPolygonAnalysis/point_in_poly.html
>
> Hope this helps!
>
>
> jatwood at montana.edu wrote:
>>
>> Good Afternoon
>> I searched the archives but could not find the answer to my question.
>> I have shapefiles for various geographic regions such as states, counties,
>> zipcode areas, townships, etc.  I also have long-lat coordinates for 12000
>> plus weather stations.  I am able to use maptools to plot the maps and am
>> able to plot the points on the polygon maps with appropriate text.
>> However,
>> I also need to be able to identify which shapefile polygon each weather
>> station (or pobbibly other long-lat points) lies within.
>>
>> Does any package have a function similar to the "maps" packages'
>> "map.where" function that would work with more general shapefile polygons?
>>
>> I am new to this list so please excuse me if this question has been
>> previously addressed.  I will appreciate any help or suggestions.
>>
>>
>> --------------------------------------------------------------------
>> mail2web.com ? Enhanced email for the mobile individual based on
>> Microsoft(R)
>> Exchange - http://link.mail2web.com/Personal/EnhancedEmail
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>



From macq at llnl.gov  Wed Jul 23 02:31:13 2008
From: macq at llnl.gov (Don MacQueen)
Date: Tue, 22 Jul 2008 17:31:13 -0700
Subject: [R-sig-Geo] identying shapefile polygons containing long-lat
 points
In-Reply-To: <380-220087222233350550@M2W020.mail2web.com>
References: <380-220087222233350550@M2W020.mail2web.com>
Message-ID: <p06240800c4ac2bf531c2@[192.168.11.8]>

I believer the overlay() function in the sp package will do this.

-Don

At 7:33 PM -0400 7/22/08, jatwood at montana.edu wrote:
>Good Afternoon
>I searched the archives but could not find the answer to my question.
>I have shapefiles for various geographic regions such as states, counties,
>zipcode areas, townships, etc.  I also have long-lat coordinates for 12000
>plus weather stations.  I am able to use maptools to plot the maps and am
>able to plot the points on the polygon maps with appropriate text. However,
>I also need to be able to identify which shapefile polygon each weather
>station (or pobbibly other long-lat points) lies within.
>
>Does any package have a function similar to the "maps" packages'
>"map.where" function that would work with more general shapefile polygons?
>
>I am new to this list so please excuse me if this question has been
>previously addressed.  I will appreciate any help or suggestions.
>
>   
>
>--------------------------------------------------------------------
>mail2web.com ? Enhanced email for the mobile individual based on Microsoft?
>Exchange - http://link.mail2web.com/Personal/EnhancedEmail
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at stat.math.ethz.ch
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
---------------------------------
Don MacQueen
Lawrence Livermore National Laboratory
Livermore, CA, USA
925-423-1062
macq at llnl.gov



From Morten.Sickel at nrpa.no  Wed Jul 23 10:34:32 2008
From: Morten.Sickel at nrpa.no (Morten Sickel)
Date: Wed, 23 Jul 2008 10:34:32 +0200
Subject: [R-sig-Geo] Plotting - holes from shapefile
Message-ID: <0CE0A03D0F390E46B12B64489D20B1D402F1A6B22C@MAILHUB.NRPA.LOCAL>

Hi,

Guess this is quite easy when one just knows how, but I have noe been able to dig out how...

I have a shape file with water areas with some islands. I want to plot this without the islands. In the shape file, the islands are flagged with a certain value, so I can remove them, but it doesn't seem to work. What I am doing is:

reading in the shape file:

> norvann=readOGR(mapdir,'fylk-vaf')

then I've tried to flag the holes:

> norvann$hole=norvann$FTEMA==0

or I've removed the islands

> norvann=norvann[norvann$FTEMA>0,]

Note, Ive done one of these on a new data set I've read from the file.

Then I've plotted it:

> plot(nordvann, col='blue')

In both cases both water and islands comes out colored blue...

guess I've overlooked something... but what?


Morten Sickel

--
Morten Sickel
Norwegian Radiation Protection Authority
tel (+47) 6716 2551



From regmi_pujan at hotmail.com  Wed Jul 23 16:37:48 2008
From: regmi_pujan at hotmail.com (PUJAN RAJ REGMI)
Date: Wed, 23 Jul 2008 14:37:48 +0000
Subject: [R-sig-Geo] Spatial Resampling
In-Reply-To: <1216731620.21211.28.camel@fh-vrubio>
References: <20080722124320.63700.qmail@web10706.mail.bbt.yahoo.co.jp>
	<4885D8BF.3040800@mail.montclair.edu>
	<1216731620.21211.28.camel@fh-vrubio>
Message-ID: <BAY113-W43B7E2F60B680A8E64838384840@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080723/2fa7e2bc/attachment.pl>

From sburbeck at bfs.de  Wed Jul 23 18:36:53 2008
From: sburbeck at bfs.de (Sven Burbeck)
Date: Wed, 23 Jul 2008 18:36:53 +0200 (CEST)
Subject: [R-sig-Geo] error from universal kriging with krige()
Message-ID: <64114.217.233.91.197.1216831013.squirrel@mail.fr.bfs.de>

Hello,

when I try to apply universal kriging by krige() I produce the following
error:
>myVg_2 <- variogram(log10(M_BL) ~  GEO_UNIT - 1, data = myBlt_utm)
>myVgm <- vgm(psill = 0.05,model = "Sph",range = 25000,nugget = 0.1)
>myVgmf <- fit.variogram(object = myVg_2,model = myVgm,fit.sills = TRUE,
fit.ranges = TRUE,fit.method = 7)
>myBlt_grid_UK <- krige(log10(M_BL) ~  GEO_UNIT - 1, locations =
myBlt_utm, newdata = myPointGrid_utm, model = myVgmf)
Error in gstat.formula.predict(d$formula, newdata, na.action = na.action,  :
  NROW(locs) != NROW(X): this should not occur
In addition: Warning messages:
1: 'newdata' had 2701 rows but variable(s) found have 911 rows
2: 'newdata' had 2701 rows but variable(s) found have 911 rows


I know there was a posting about this error. There it was a coordinate
problem but still I don't know how to solve the problem.

Can anybody give me a hint?

Thanks in advance,
Sven



From v.gomezrubio at imperial.ac.uk  Wed Jul 23 19:41:00 2008
From: v.gomezrubio at imperial.ac.uk (Virgilio Gomez-Rubio)
Date: Wed, 23 Jul 2008 18:41:00 +0100
Subject: [R-sig-Geo] error from universal kriging with krige()
In-Reply-To: <64114.217.233.91.197.1216831013.squirrel@mail.fr.bfs.de>
References: <64114.217.233.91.197.1216831013.squirrel@mail.fr.bfs.de>
Message-ID: <1216834860.7267.2.camel@fh-vrubio>

Sven,

It looks like myPointGrid_utm has more points that rows in the
associated dataframe. Could you check that? For example, with

nrow(coordinates(myPointGrid_utm))
nrow(myPointGrid_utm at data)

Best,

Virgilio



From a.ghisla at studenti.uninsubria.it  Thu Jul 24 12:22:48 2008
From: a.ghisla at studenti.uninsubria.it (Anne Ghisla)
Date: Thu, 24 Jul 2008 12:22:48 +0200
Subject: [R-sig-Geo] wiki, 2 weeks later
In-Reply-To: <f5d848060807221209m1de653acp42b5514480ba3e03@mail.gmail.com>
References: <f5d848060807221209m1de653acp42b5514480ba3e03@mail.gmail.com>
Message-ID: <1216894968.6628.45.camel@galadriel>

On Tue, 2008-07-22 at 21:09 +0200, David Hugh-Jones wrote:
> A while ago I and some others put a bit of work into the R wiki
> section on spatial data. Looking at it, there are still a couple of
> things missing. So, if you know anything about using GISes, or about
> kriging, please take a look at
> 
> http://wiki.r-project.org/rwiki/doku.php?id=tips:spatial-data:when_to_use
> http://wiki.r-project.org/rwiki/doku.php?id=tips:stats-spatial:kriging
> 
> and see if you can replace the blank spaces with something useful....

Good start! Let's start adding items.
cheers

> 
> Cheers
> David Hugh-Jones
> PhD Candidate
> Essex University Department of Government
> http://davidhughjones.googlepages.com

-- 
Anne Ghisla <a.ghisla at studenti.uninsubria.it>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080724/59135219/attachment.bin>

From Sandra.Garcia at upct.es  Thu Jul 24 21:16:17 2008
From: Sandra.Garcia at upct.es (Sandra.Garcia at upct.es)
Date: Thu, 24 Jul 2008 21:16:17 +0200 (CEST)
Subject: [R-sig-Geo] Character vectors: paste
Message-ID: <9147928729sgarcia@upct.es>

Hello, 

Does anyone knows how I can paste in a character vector the following 
names of maps?
LST2007001_1_16
LST2007017_1_16
LST2007033_1_16
..
LST2007353_1_16
LST2008001_1_16
..

How I can implement this in R?

Thanks in advance,

Sandra
UPCT
(may be it is too basic ! excuse me, I am learning R).



From sarah.goslee at gmail.com  Thu Jul 24 21:20:10 2008
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Thu, 24 Jul 2008 15:20:10 -0400
Subject: [R-sig-Geo] Character vectors: paste
In-Reply-To: <9147928729sgarcia@upct.es>
References: <9147928729sgarcia@upct.es>
Message-ID: <efb536d50807241220g147db6ebtc781b82d02dbbaaf@mail.gmail.com>

Sandra,

It isn't clear what you want.

Do you want to enter these names at the console? Or
do you have the names in a text file you'd like to
read in?

If the former,
mynames <- c("name1", "name2", "name3")
will create a vector containing the names.

If the latter,
mynames <- read.table("allnames.txt", as.is=TRUE)
will read the names into a data.frame that you can
convert to a vector using as.vector()

The R-help newsgroup is great for basic R questions that
don't really relate to geography topics.

Sarah

On Thu, Jul 24, 2008 at 3:16 PM,  <Sandra.Garcia at upct.es> wrote:
> Hello,
>
> Does anyone knows how I can paste in a character vector the following
> names of maps?
> LST2007001_1_16
> LST2007017_1_16
> LST2007033_1_16
> ..
> LST2007353_1_16
> LST2008001_1_16
> ..
>
> How I can implement this in R?
>
> Thanks in advance,
>
> Sandra
> UPCT
> (may be it is too basic ! excuse me, I am learning R).
>


-- 
Sarah Goslee
http://www.functionaldiversity.org



From naiara at mail.utexas.edu  Thu Jul 24 22:05:44 2008
From: naiara at mail.utexas.edu (Naiara Pinto)
Date: Thu, 24 Jul 2008 13:05:44 -0700
Subject: [R-sig-Geo] spatial bounding box
Message-ID: <9d4084070807241305o209a9b34m127b291d3f971d02@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080724/1e5dc272/attachment.pl>

From adrian at maths.uwa.edu.au  Fri Jul 25 03:59:50 2008
From: adrian at maths.uwa.edu.au (adrian at maths.uwa.edu.au)
Date: Fri, 25 Jul 2008 09:59:50 +0800 (WST)
Subject: [R-sig-Geo]  Spatial Resampling
In-Reply-To: <mailman.7.1216893603.21203.r-sig-geo@stat.math.ethz.ch>
References: <mailman.7.1216893603.21203.r-sig-geo@stat.math.ethz.ch>
Message-ID: <60141.124.182.15.91.1216951190.squirrel@124.182.15.91>

Pujan Raj Regmi <regmi_pujan at hotmail.com> writes:

> I have a satellite image of 12m spatial resolution (4 bands). I want to
> resample to coarser level. i.e. to 18m, 24m,30m,36m and so on.
> The result I got from ENVI are not realistic so I want to do it in R
> using weighted average from neighboring pixels.

In package 'spatstat' the function 'blur' will perform spatial averaging
of a pixel image, using Gaussian weights. The function 'as.im' can be used
to change the dimensions of a pixel image.

So for example if Z is a pixel image (object of class "im") then
    old.pixelsize <- Z$xstep
    blurZ <- blur(Z, 1.5 * old.pixelsize)
    old.dim <- Z$dim
    new.dim <- floor(old.dim/2)
    Y <- as.im(blurZ, dimyx=new.dim)
computes a Gaussian kernel-weighted average of pixel values, then
subsamples the image.

Adrian Baddeley



From jonthayn at ku.edu  Fri Jul 25 07:04:13 2008
From: jonthayn at ku.edu (Jonathan Boyd Thayn)
Date: Fri, 25 Jul 2008 00:04:13 -0500
Subject: [R-sig-Geo] To fix the axis increment
In-Reply-To: <BAY113-W43C1E349098B9A80B62F9084850@phx.gbl>
References: <BAY113-W43C1E349098B9A80B62F9084850@phx.gbl>
Message-ID: <4CD36DB0-FFAE-4B89-B523-165C5D676BE9@ku.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080725/b5e44267/attachment.pl>

From regmi_pujan at hotmail.com  Fri Jul 25 10:48:48 2008
From: regmi_pujan at hotmail.com (PUJAN RAJ REGMI)
Date: Fri, 25 Jul 2008 08:48:48 +0000
Subject: [R-sig-Geo] To fix the axis increment
In-Reply-To: <4CD36DB0-FFAE-4B89-B523-165C5D676BE9@ku.edu>
References: <BAY113-W43C1E349098B9A80B62F9084850@phx.gbl>
	<4CD36DB0-FFAE-4B89-B523-165C5D676BE9@ku.edu>
Message-ID: <BAY113-W499584C6B8A4BFD36159F184860@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080725/83f2985b/attachment.pl>

From regmi_pujan at hotmail.com  Fri Jul 25 14:05:53 2008
From: regmi_pujan at hotmail.com (PUJAN RAJ REGMI)
Date: Fri, 25 Jul 2008 12:05:53 +0000
Subject: [R-sig-Geo] Spatial Resampling
In-Reply-To: <60141.124.182.15.91.1216951190.squirrel@124.182.15.91>
References: <mailman.7.1216893603.21203.r-sig-geo@stat.math.ethz.ch>
	<60141.124.182.15.91.1216951190.squirrel@124.182.15.91>
Message-ID: <BAY113-W562205D84A2420A252DA3484860@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080725/a1e9ceb6/attachment.pl>

From regmi_pujan at hotmail.com  Fri Jul 25 22:16:35 2008
From: regmi_pujan at hotmail.com (PUJAN RAJ REGMI)
Date: Fri, 25 Jul 2008 20:16:35 +0000
Subject: [R-sig-Geo] Spatial Resampling
In-Reply-To: <60141.124.182.15.91.1216951190.squirrel@124.182.15.91>
References: <mailman.7.1216893603.21203.r-sig-geo@stat.math.ethz.ch>
	<60141.124.182.15.91.1216951190.squirrel@124.182.15.91>
Message-ID: <BAY113-W13385E39DB82BAD5C20DEA84860@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080725/edc454dd/attachment.pl>

From aloboaleu at gmail.com  Sat Jul 26 18:48:24 2008
From: aloboaleu at gmail.com (Agustin Lobo)
Date: Sat, 26 Jul 2008 18:48:24 +0200
Subject: [R-sig-Geo] rbind and spRbind
Message-ID: <488B5558.2060207@gmail.com>

I'm a bit confused with the following:

I have a SPDF object ika1v4

 > dim(ika1v4geo at data)
[1] 693  23
 > dim(ika1v4geo)
[1] 693  23

Then I do an rbind:

 > a <- rbind(ika1v4geo,ika1v4geo)
 > dim(a)
[1] 1386   23
 > dim(a at data)
[1] 1386   23

But spRbind introduces 2 variables:
 > a2 <- spRbind(ika1v4geo,ika1v4geo)
 > dim(a2)
[1] 1386   25
 > dim(a2 at data)
[1] 1386   25

 > names(a at data)
  [1] "IKAPUNTO" "IKAID"    "CN"       "dia"      "hora_obs" "GPSID"
  [7] "GPS"      "N_PUNTO"  "GUIA"     "MONITOR"  "COD_SP_C" "SP_C"
[13] "COD_OBS"  "OBS"      "N"        "VULN"     "VULNT"    "CL"
[19] "A"        "H"        "D"        "S"        "V"
 > names(a2 at data)
  [1] "IKAPUNTO" "IKAID"    "CN"       "dia"      "hora_obs" "GPSID"
  [7] "GPS"      "UTMX"     "UTMY"     "N_PUNTO"  "GUIA"     "MONITOR"
[13] "COD_SP_C" "SP_C"     "COD_OBS"  "OBS"      "N"        "VULN"
[19] "VULNT"    "CL"       "A"        "H"        "D"        "S"
[25] "V"
 >

Why? Which are the differences between rbind and spRbind?

Thanks!

Agus
-- 
Dr. Agustin Lobo
Institut de Ciencies de la Terra "Jaume Almera" (CSIC)
LLuis Sole Sabaris s/n
08028 Barcelona
Spain
Tel. 34 934095410
Fax. 34 934110012
email: Agustin.Lobo at ija.csic.es
http://www.ija.csic.es/gt/obster



From yud at mail.montclair.edu  Sat Jul 26 20:55:02 2008
From: yud at mail.montclair.edu (Danlin Yu)
Date: Sat, 26 Jul 2008 14:55:02 -0400
Subject: [R-sig-Geo] rbind and spRbind
In-Reply-To: <488B5558.2060207@gmail.com>
References: <488B5558.2060207@gmail.com>
Message-ID: <488B7306.1040504@mail.montclair.edu>

Agustin:

Since you are using the sp method for binding, I suppose the coordinates 
(in UTM project according to the name) are added automatically (as the 
added two new names are UTMX and UTMY). Why not check these two values 
to see what's in them.

Hope this helps.

Danlin


Agustin Lobo wrote:
> I'm a bit confused with the following:
>
> I have a SPDF object ika1v4
>
> > dim(ika1v4geo at data)
> [1] 693  23
> > dim(ika1v4geo)
> [1] 693  23
>
> Then I do an rbind:
>
> > a <- rbind(ika1v4geo,ika1v4geo)
> > dim(a)
> [1] 1386   23
> > dim(a at data)
> [1] 1386   23
>
> But spRbind introduces 2 variables:
> > a2 <- spRbind(ika1v4geo,ika1v4geo)
> > dim(a2)
> [1] 1386   25
> > dim(a2 at data)
> [1] 1386   25
>
> > names(a at data)
>  [1] "IKAPUNTO" "IKAID"    "CN"       "dia"      "hora_obs" "GPSID"
>  [7] "GPS"      "N_PUNTO"  "GUIA"     "MONITOR"  "COD_SP_C" "SP_C"
> [13] "COD_OBS"  "OBS"      "N"        "VULN"     "VULNT"    "CL"
> [19] "A"        "H"        "D"        "S"        "V"
> > names(a2 at data)
>  [1] "IKAPUNTO" "IKAID"    "CN"       "dia"      "hora_obs" "GPSID"
>  [7] "GPS"      "UTMX"     "UTMY"     "N_PUNTO"  "GUIA"     "MONITOR"
> [13] "COD_SP_C" "SP_C"     "COD_OBS"  "OBS"      "N"        "VULN"
> [19] "VULNT"    "CL"       "A"        "H"        "D"        "S"
> [25] "V"
> >
>
> Why? Which are the differences between rbind and spRbind?
>
> Thanks!
>
> Agus

-- 
___________________________________________
Danlin Yu, Ph.D.
Assistant Professor
Department of Earth & Environmental Studies
Montclair State University
Montclair, NJ, 07043
Tel: 973-655-4313
Fax: 973-655-4072
email: yud at mail.montclair.edu
webpage: csam.montclair.edu/~yu



From Roger.Bivand at nhh.no  Sat Jul 26 21:06:49 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 26 Jul 2008 21:06:49 +0200 (CEST)
Subject: [R-sig-Geo] rbind and spRbind
In-Reply-To: <488B7306.1040504@mail.montclair.edu>
References: <488B5558.2060207@gmail.com> <488B7306.1040504@mail.montclair.edu>
Message-ID: <Pine.LNX.4.64.0807262101540.1558@reclus.nhh.no>

On Sat, 26 Jul 2008, Danlin Yu wrote:

> Agustin:
>
> Since you are using the sp method for binding, I suppose the coordinates (in 
> UTM project according to the name) are added automatically (as the added two 
> new names are UTMX and UTMY). Why not check these two values to see what's in 
> them.

Yes, that's right. Your (cryptic) SPDF is a SpatialPointsDataFrame (could 
be Pixels or Polygons too ...), where the as(, "data.frame") coercion 
method adds back the columns "hidden" by the coordinates()<- assignment 
step earlier. spRbind uses the coercion method, rbind grabs the data slot 
with the @ operator. Both are acceptable.

Roger

>
> Hope this helps.
>
> Danlin
>
>
> Agustin Lobo wrote:
>>  I'm a bit confused with the following:
>>
>>  I have a SPDF object ika1v4
>> 
>> >  dim(ika1v4geo at data)
>>  [1] 693  23
>> >  dim(ika1v4geo)
>>  [1] 693  23
>>
>>  Then I do an rbind:
>> 
>> >  a <- rbind(ika1v4geo,ika1v4geo)
>> >  dim(a)
>>  [1] 1386   23
>> >  dim(a at data)
>>  [1] 1386   23
>>
>>  But spRbind introduces 2 variables:
>> >  a2 <- spRbind(ika1v4geo,ika1v4geo)
>> >  dim(a2)
>>  [1] 1386   25
>> >  dim(a2 at data)
>>  [1] 1386   25
>> 
>> >  names(a at data)
>>   [1] "IKAPUNTO" "IKAID"    "CN"       "dia"      "hora_obs" "GPSID"
>>   [7] "GPS"      "N_PUNTO"  "GUIA"     "MONITOR"  "COD_SP_C" "SP_C"
>>  [13] "COD_OBS"  "OBS"      "N"        "VULN"     "VULNT"    "CL"
>>  [19] "A"        "H"        "D"        "S"        "V"
>> >  names(a2 at data)
>>   [1] "IKAPUNTO" "IKAID"    "CN"       "dia"      "hora_obs" "GPSID"
>>   [7] "GPS"      "UTMX"     "UTMY"     "N_PUNTO"  "GUIA"     "MONITOR"
>>  [13] "COD_SP_C" "SP_C"     "COD_OBS"  "OBS"      "N"        "VULN"
>>  [19] "VULNT"    "CL"       "A"        "H"        "D"        "S"
>>  [25] "V"
>> > 
>>
>>  Why? Which are the differences between rbind and spRbind?
>>
>>  Thanks!
>>
>>  Agus
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From saldanha.plangeo at gmail.com  Sat Jul 26 23:42:30 2008
From: saldanha.plangeo at gmail.com (Raphael Saldanha)
Date: Sat, 26 Jul 2008 18:42:30 -0300
Subject: [R-sig-Geo] Spatial Sample
Message-ID: <c85849370807261442s5a244f81h13dc0103584f3663@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080726/e86c6c6c/attachment.pl>

From p.hiemstra at geo.uu.nl  Sun Jul 27 00:03:35 2008
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Sun, 27 Jul 2008 00:03:35 +0200
Subject: [R-sig-Geo] Spatial Sample
In-Reply-To: <c85849370807261442s5a244f81h13dc0103584f3663@mail.gmail.com>
References: <c85849370807261442s5a244f81h13dc0103584f3663@mail.gmail.com>
Message-ID: <488B9F37.5050800@geo.uu.nl>

Hi,

One option is:

?spsample

cheers,
Paul

Raphael Saldanha schreef:
> Hi!
>
> How can I make a spatial sample?
>
> Can someone recommend theorical books and materials for this?
>
>
> --
> Raphael Saldanha
> UFJF - Brazil
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



From Agustin.Lobo at ija.csic.es  Sun Jul 27 12:49:27 2008
From: Agustin.Lobo at ija.csic.es (Agustin Lobo)
Date: Sun, 27 Jul 2008 12:49:27 +0200
Subject: [R-sig-Geo] rbind and spRbind
In-Reply-To: <Pine.LNX.4.64.0807262101540.1558@reclus.nhh.no>
References: <488B5558.2060207@gmail.com> <488B7306.1040504@mail.montclair.edu>
	<Pine.LNX.4.64.0807262101540.1558@reclus.nhh.no>
Message-ID: <488C52B7.4080707@ija.csic.es>

Acceptable, yes, but perhaps we should choose
one or the other and, for sure, document the difference
between spRbind and rbind.
Personally, I find a bit odd spRbind() in that you get 2
variables that you were not seeing in data slot (I understand
they are there as coordinates) of the original
objects. This is not " rbind-like". But perhaps
there are advantages that I'm not considering.
Just wanted to point this out and make sure
there were not other consequences at choosing
between both functions.

Also, sorry for not having included this info:

 > str(ika1v4geo)
Formal class 'SpatialPointsDataFrame' [package "sp"] with 5 slots
   ..@ data       :'data.frame':	693 obs. of  23 variables:
   .. ..$ IKAPUNTO: int [1:693] 1 2 3 4 5 6 7 8 9 10 ...
   .. ..$ IKAID   : num [1:693] 1 1 1 1 1 1 1 1 1 1 ...
   .. ..$ CN      : chr [1:693] "Ivasichi" "Ivasichi" "Ivasichi" 
"Ivasichi" ...
   .. ..$ dia     : chr [1:693] "2008-01-30" "2008-01-30" "2008-01-30" 
"2008-01-30" ...
   .. ..$ hora_obs: chr [1:693] " 8:48:21" " 8:55:17" " 9:00:22" " 
9:07:13" ...
   .. ..$ GPSID   : chr [1:693] "1-20080328-115" "1-20080328-116" 
"1-20080328-117" "1-20080328-118" ...
   .. ..$ GPS     : int [1:693] 1 1 1 1 1 1 1 1 1 1 ...
   .. ..$ N_PUNTO : int [1:693] 115 116 117 118 119 120 122 123 124 125 ...
   .. ..$ GUIA    : chr [1:693] "Endracio" "Endracio" "Endracio" 
"Endracio" ...
   .. ..$ MONITOR : chr [1:693] "Julio Vie" "Julio Vie" "Julio Vie" 
"Julio Vie" ...
   .. ..$ COD_SP_C: int [1:693] 29 9 10 29 8 8 28 8 28 29 ...
   .. ..$ SP_C    : chr [1:693] "tatu" "jochi colorado" "jochi pintado" 
"tatu" ...
   .. ..$ COD_OBS : int [1:693] 5 5 5 5 6 6 6 7 6 8 ...
   .. ..$ OBS     : chr [1:693] "huella" "huella" "huella" "huella" ...
   .. ..$ N       : num [1:693] 1 1 1 1 1 1 1 1 1 1 ...
   .. ..$ VULN    : int [1:693] 1 1 NA 1 3 3 NA 3 NA 1 ...
   .. ..$ VULNT   : num [1:693] 1 1 NA 1 3 3 NA 3 NA 1 ...
   .. ..$ CL      : num [1:693] 1 1 1 1 1 1 1 1 1 1 ...
   .. ..$ A       : num [1:693] 8 8 8 8 8 8 8 8 8 8 ...
   .. ..$ H       : num [1:693] 1.91 1.91 1.91 1.91 1.91 ...
   .. ..$ D       : num [1:693] 0.719 0.719 0.719 0.719 0.719 ...
   .. ..$ S       : num [1:693] 4 4 4 4 4 4 4 4 4 4 ...
   .. ..$ V       : num [1:693] 34 34 34 34 34 34 34 34 34 34 ...
   ..@ coords.nrs : int [1:2] 8 9
   ..@ coords     : num [1:693, 1:2] 724547 724413 724367 724282 724225 ...
   .. ..- attr(*, "dimnames")=List of 2
   .. .. ..$ : NULL
   .. .. ..$ : chr [1:2] "UTMX" "UTMY"
   ..@ bbox       : num [1:2, 1:2]  716934 8303862  735638 8325272
   .. ..- attr(*, "dimnames")=List of 2
   .. .. ..$ : chr [1:2] "UTMX" "UTMY"
   .. .. ..$ : chr [1:2] "min" "max"
   ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots
   .. .. ..@ projargs: chr NA

Thanks!

Agus

Roger Bivand wrote:
> On Sat, 26 Jul 2008, Danlin Yu wrote:
> 
>> Agustin:
>>
>> Since you are using the sp method for binding, I suppose the 
>> coordinates (in UTM project according to the name) are added 
>> automatically (as the added two new names are UTMX and UTMY). Why not 
>> check these two values to see what's in them.
> 
> Yes, that's right. Your (cryptic) SPDF is a SpatialPointsDataFrame 
> (could be Pixels or Polygons too ...), where the as(, "data.frame") 
> coercion method adds back the columns "hidden" by the coordinates()<- 
> assignment step earlier. spRbind uses the coercion method, rbind grabs 
> the data slot with the @ operator. Both are acceptable.
> 
> Roger
> 
>>
>> Hope this helps.
>>
>> Danlin
>>
>>
>> Agustin Lobo wrote:
>>>  I'm a bit confused with the following:
>>>
>>>  I have a SPDF object ika1v4
>>>
>>> >  dim(ika1v4geo at data)
>>>  [1] 693  23
>>> >  dim(ika1v4geo)
>>>  [1] 693  23
>>>
>>>  Then I do an rbind:
>>>
>>> >  a <- rbind(ika1v4geo,ika1v4geo)
>>> >  dim(a)
>>>  [1] 1386   23
>>> >  dim(a at data)
>>>  [1] 1386   23
>>>
>>>  But spRbind introduces 2 variables:
>>> >  a2 <- spRbind(ika1v4geo,ika1v4geo)
>>> >  dim(a2)
>>>  [1] 1386   25
>>> >  dim(a2 at data)
>>>  [1] 1386   25
>>>
>>> >  names(a at data)
>>>   [1] "IKAPUNTO" "IKAID"    "CN"       "dia"      "hora_obs" "GPSID"
>>>   [7] "GPS"      "N_PUNTO"  "GUIA"     "MONITOR"  "COD_SP_C" "SP_C"
>>>  [13] "COD_OBS"  "OBS"      "N"        "VULN"     "VULNT"    "CL"
>>>  [19] "A"        "H"        "D"        "S"        "V"
>>> >  names(a2 at data)
>>>   [1] "IKAPUNTO" "IKAID"    "CN"       "dia"      "hora_obs" "GPSID"
>>>   [7] "GPS"      "UTMX"     "UTMY"     "N_PUNTO"  "GUIA"     "MONITOR"
>>>  [13] "COD_SP_C" "SP_C"     "COD_OBS"  "OBS"      "N"        "VULN"
>>>  [19] "VULNT"    "CL"       "A"        "H"        "D"        "S"
>>>  [25] "V"
>>> >
>>>  Why? Which are the differences between rbind and spRbind?
>>>
>>>  Thanks!
>>>
>>>  Agus
>>
>>
> 

-- 
Dr. Agustin Lobo
Institut de Ciencies de la Terra "Jaume Almera" (CSIC)
LLuis Sole Sabaris s/n
08028 Barcelona
Spain
Tel. 34 934095410
Fax. 34 934110012
email: Agustin.Lobo at ija.csic.es
http://www.ija.csic.es/gt/obster



From Roger.Bivand at nhh.no  Sun Jul 27 17:53:26 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 27 Jul 2008 17:53:26 +0200 (CEST)
Subject: [R-sig-Geo] Spatial Sample
In-Reply-To: <488B9F37.5050800@geo.uu.nl>
References: <c85849370807261442s5a244f81h13dc0103584f3663@mail.gmail.com>
	<488B9F37.5050800@geo.uu.nl>
Message-ID: <Pine.LNX.4.64.0807271751390.32403@reclus.nhh.no>

On Sun, 27 Jul 2008, Paul Hiemstra wrote:

> Hi,
>
> One option is:
>
> ?spsample

- which implements most of Ripley (1981, reprinted 2004, ch.3), and for 
even more choice, see functions in the spatstat package for point 
patterns, and the spsurvey package.

Roger

>
> cheers,
> Paul
>
> Raphael Saldanha schreef:
>>  Hi!
>>
>>  How can I make a spatial sample?
>>
>>  Can someone recommend theorical books and materials for this?
>> 
>>
>>  --
>>  Raphael Saldanha
>>  UFJF - Brazil
>>
>>   [[alternative HTML version deleted]]
>>
>>  _______________________________________________
>>  R-sig-Geo mailing list
>>  R-sig-Geo at stat.math.ethz.ch
>>  https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From hi_ono2001 at ybb.ne.jp  Sun Jul 27 20:37:24 2008
From: hi_ono2001 at ybb.ne.jp (Hisaji ONO)
Date: Mon, 28 Jul 2008 03:37:24 +0900 (JST)
Subject: [R-sig-Geo] Where is your John Snow's map in "Analysing Spatial
	Data in R: Why spatial data in R?" available?
Message-ID: <20080727183724.87510.qmail@web10704.mail.bbt.yahoo.co.jp>

Hello.

 I found in your PDF file,
http://www.bias-project.org.uk/ASDARcourse/unit0_slides.pdf.

 In this document, you used interesting John Snow's
"Cholera" map.

Is this format ESRI's shapefile?

 Where is this file available?
 
Once I've created Snow's shapefile(available form this
site,
http://giswin.geo.tsukuba.ac.jp/teacher/murayama/sdam/download.html(sorry
in Japanese only)) from Dr. Tobler's original
data(http://www.ncgia.ucsb.edu/pubs/snow/snow.html) with
permission.



 Regards.



From Roger.Bivand at nhh.no  Sun Jul 27 21:31:38 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 27 Jul 2008 21:31:38 +0200 (CEST)
Subject: [R-sig-Geo] rbind and spRbind
In-Reply-To: <488C52B7.4080707@ija.csic.es>
References: <488B5558.2060207@gmail.com> <488B7306.1040504@mail.montclair.edu>
	<Pine.LNX.4.64.0807262101540.1558@reclus.nhh.no>
	<488C52B7.4080707@ija.csic.es>
Message-ID: <Pine.LNX.4.64.0807271841010.32403@reclus.nhh.no>

On Sun, 27 Jul 2008, Agustin Lobo wrote:

> Acceptable, yes, but perhaps we should choose
> one or the other and, for sure, document the difference
> between spRbind and rbind.
> Personally, I find a bit odd spRbind() in that you get 2
> variables that you were not seeing in data slot (I understand
> they are there as coordinates) of the original
> objects. This is not " rbind-like". But perhaps
> there are advantages that I'm not considering.
> Just wanted to point this out and make sure
> there were not other consequences at choosing
> between both functions.

rbind tries to be "like" rbind. Note that there is no default rbind 
generic method in base R - it is just a function. The original function is 
mean to join vectors and matrices by stacking them by row. It has no 
concept of anything other than the data. There are issues with stacking 
ordered objects by row, be they time series or whatever - so it isn't 
clear how this ought to be done. The rbind and spRbind methods for 
Spatial* objects try to help, but because user needs differ, no choices 
will meet all needs. As I said, the addition of the coordinates comes from 
the behaviour of the coercion method for SpatialPointsDataFrame to 
data.frame.

There are no single good solutions here, perhaps other than dropping any 
similarity to the base rbind, IMHO.

Roger

>
> Also, sorry for not having included this info:
>
>>  str(ika1v4geo)
> Formal class 'SpatialPointsDataFrame' [package "sp"] with 5 slots
>   ..@ data       :'data.frame':	693 obs. of  23 variables:
>   .. ..$ IKAPUNTO: int [1:693] 1 2 3 4 5 6 7 8 9 10 ...
>   .. ..$ IKAID   : num [1:693] 1 1 1 1 1 1 1 1 1 1 ...
>   .. ..$ CN      : chr [1:693] "Ivasichi" "Ivasichi" "Ivasichi" 
> "Ivasichi" ...
>  .. ..$ dia     : chr [1:693] "2008-01-30" "2008-01-30" "2008-01-30" 
> "2008-01-30" ...
>  .. ..$ hora_obs: chr [1:693] " 8:48:21" " 8:55:17" " 9:00:22" " 9:07:13" 
> ...
>  .. ..$ GPSID   : chr [1:693] "1-20080328-115" "1-20080328-116" 
> "1-20080328-117" "1-20080328-118" ...
>   .. ..$ GPS     : int [1:693] 1 1 1 1 1 1 1 1 1 1 ...
>   .. ..$ N_PUNTO : int [1:693] 115 116 117 118 119 120 122 123 124 125 ...
>   .. ..$ GUIA    : chr [1:693] "Endracio" "Endracio" "Endracio" 
> "Endracio" ...
>  .. ..$ MONITOR : chr [1:693] "Julio Vie" "Julio Vie" "Julio Vie" "Julio 
> Vie" ...
>   .. ..$ COD_SP_C: int [1:693] 29 9 10 29 8 8 28 8 28 29 ...
>   .. ..$ SP_C    : chr [1:693] "tatu" "jochi colorado" "jochi pintado" 
> "tatu" ...
>   .. ..$ COD_OBS : int [1:693] 5 5 5 5 6 6 6 7 6 8 ...
>   .. ..$ OBS     : chr [1:693] "huella" "huella" "huella" "huella" ...
>   .. ..$ N       : num [1:693] 1 1 1 1 1 1 1 1 1 1 ...
>   .. ..$ VULN    : int [1:693] 1 1 NA 1 3 3 NA 3 NA 1 ...
>   .. ..$ VULNT   : num [1:693] 1 1 NA 1 3 3 NA 3 NA 1 ...
>   .. ..$ CL      : num [1:693] 1 1 1 1 1 1 1 1 1 1 ...
>   .. ..$ A       : num [1:693] 8 8 8 8 8 8 8 8 8 8 ...
>   .. ..$ H       : num [1:693] 1.91 1.91 1.91 1.91 1.91 ...
>   .. ..$ D       : num [1:693] 0.719 0.719 0.719 0.719 0.719 ...
>   .. ..$ S       : num [1:693] 4 4 4 4 4 4 4 4 4 4 ...
>   .. ..$ V       : num [1:693] 34 34 34 34 34 34 34 34 34 34 ...
>   ..@ coords.nrs : int [1:2] 8 9
>   ..@ coords     : num [1:693, 1:2] 724547 724413 724367 724282 724225 ...
>   .. ..- attr(*, "dimnames")=List of 2
>   .. .. ..$ : NULL
>   .. .. ..$ : chr [1:2] "UTMX" "UTMY"
>   ..@ bbox       : num [1:2, 1:2]  716934 8303862  735638 8325272
>   .. ..- attr(*, "dimnames")=List of 2
>   .. .. ..$ : chr [1:2] "UTMX" "UTMY"
>   .. .. ..$ : chr [1:2] "min" "max"
>   ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots
>   .. .. ..@ projargs: chr NA
>
> Thanks!
>
> Agus
>
> Roger Bivand wrote:
>>  On Sat, 26 Jul 2008, Danlin Yu wrote:
>> 
>> >  Agustin:
>> > 
>> >  Since you are using the sp method for binding, I suppose the coordinates 
>> >  (in UTM project according to the name) are added automatically (as the 
>> >  added two new names are UTMX and UTMY). Why not check these two values 
>> >  to see what's in them.
>>
>>  Yes, that's right. Your (cryptic) SPDF is a SpatialPointsDataFrame (could
>>  be Pixels or Polygons too ...), where the as(, "data.frame") coercion
>>  method adds back the columns "hidden" by the coordinates()<- assignment
>>  step earlier. spRbind uses the coercion method, rbind grabs the data slot
>>  with the @ operator. Both are acceptable.
>>
>>  Roger
>> 
>> > 
>> >  Hope this helps.
>> > 
>> >  Danlin
>> > 
>> > 
>> >  Agustin Lobo wrote:
>> > >   I'm a bit confused with the following:
>> > > 
>> > >   I have a SPDF object ika1v4
>> > > 
>> > > >   dim(ika1v4geo at data)
>> > >   [1] 693  23
>> > > >   dim(ika1v4geo)
>> > >   [1] 693  23
>> > > 
>> > >   Then I do an rbind:
>> > > 
>> > > >   a <- rbind(ika1v4geo,ika1v4geo)
>> > > >   dim(a)
>> > >   [1] 1386   23
>> > > >   dim(a at data)
>> > >   [1] 1386   23
>> > > 
>> > >   But spRbind introduces 2 variables:
>> > > >   a2 <- spRbind(ika1v4geo,ika1v4geo)
>> > > >   dim(a2)
>> > >   [1] 1386   25
>> > > >   dim(a2 at data)
>> > >   [1] 1386   25
>> > > 
>> > > >   names(a at data)
>> > >    [1] "IKAPUNTO" "IKAID"    "CN"       "dia"      "hora_obs" "GPSID"
>> > >    [7] "GPS"      "N_PUNTO"  "GUIA"     "MONITOR"  "COD_SP_C" "SP_C"
>> > >   [13] "COD_OBS"  "OBS"      "N"        "VULN"     "VULNT"    "CL"
>> > >   [19] "A"        "H"        "D"        "S"        "V"
>> > > >   names(a2 at data)
>> > >    [1] "IKAPUNTO" "IKAID"    "CN"       "dia"      "hora_obs" "GPSID"
>> > >    [7] "GPS"      "UTMX"     "UTMY"     "N_PUNTO"  "GUIA"     "MONITOR"
>> > >   [13] "COD_SP_C" "SP_C"     "COD_OBS"  "OBS"      "N"        "VULN"
>> > >   [19] "VULNT"    "CL"       "A"        "H"        "D"        "S"
>> > >   [25] "V"
>> > > > 
>> > >   Why? Which are the differences between rbind and spRbind?
>> > > 
>> > >   Thanks!
>> > > 
>> > >   Agus
>> > 
>> >
>> 
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From Roger.Bivand at nhh.no  Sun Jul 27 21:37:54 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 27 Jul 2008 21:37:54 +0200 (CEST)
Subject: [R-sig-Geo] Where is your John Snow's map in "Analysing Spatial
 Data in R: Why spatial data in R?" available?
In-Reply-To: <20080727183724.87510.qmail@web10704.mail.bbt.yahoo.co.jp>
References: <20080727183724.87510.qmail@web10704.mail.bbt.yahoo.co.jp>
Message-ID: <Pine.LNX.4.64.0807272133000.32403@reclus.nhh.no>

On Mon, 28 Jul 2008, Hisaji ONO wrote:

> Hello.
>
> I found in your PDF file,
> http://www.bias-project.org.uk/ASDARcourse/unit0_slides.pdf.
>
> In this document, you used interesting John Snow's
> "Cholera" map.
>
> Is this format ESRI's shapefile?
>
> Where is this file available?

A GRASS location, and a zip archive of a GeoTiff and several shapefiles 
are on www.asdar-book.org/RC1 -> Data sets download -> Broad Street *

The accomanying code is in chapter 4, and the non-GRASS version is in the 
Code download area for the chapter.

Acknowledgements to the sources of the data are given in the Data set 
download entry.

Hope this helps,

Roger

>
> Once I've created Snow's shapefile(available form this
> site,
> http://giswin.geo.tsukuba.ac.jp/teacher/murayama/sdam/download.html(sorry
> in Japanese only)) from Dr. Tobler's original
> data(http://www.ncgia.ucsb.edu/pubs/snow/snow.html) with
> permission.
>
>
>
> Regards.
>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From yong.li at unimelb.edu.au  Mon Jul 28 03:37:30 2008
From: yong.li at unimelb.edu.au (Yong Li)
Date: Mon, 28 Jul 2008 11:37:30 +1000
Subject: [R-sig-Geo] How to estimate variables of a given vgm model?
In-Reply-To: <mailman.9.1217152803.5088.r-sig-geo@stat.math.ethz.ch>
Message-ID: <86DBA0678E017341B449A62F258E29561548B7@IS-EX-BEV3.unimelb.edu.au>

Hi ALL,

How can I calculate the corresponding semivariance or distance if a vgm
model (model, nug, psill, range are known) and a value of either
semivariance or distance are given?
I am using gstat R package.

Regards

Yong



From saldanha.plangeo at gmail.com  Mon Jul 28 13:31:00 2008
From: saldanha.plangeo at gmail.com (Raphael Saldanha)
Date: Mon, 28 Jul 2008 08:31:00 -0300
Subject: [R-sig-Geo] Spatial Sample
In-Reply-To: <Pine.LNX.4.64.0807271751390.32403@reclus.nhh.no>
References: <c85849370807261442s5a244f81h13dc0103584f3663@mail.gmail.com>
	<488B9F37.5050800@geo.uu.nl>
	<Pine.LNX.4.64.0807271751390.32403@reclus.nhh.no>
Message-ID: <c85849370807280431j2159c77o3d812556a865b173@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080728/8d4a2896/attachment.pl>

From massimo.ventrucci at unibo.it  Mon Jul 28 16:38:44 2008
From: massimo.ventrucci at unibo.it (Massimo Ventrucci)
Date: Mon, 28 Jul 2008 16:38:44 +0200
Subject: [R-sig-Geo] plot a variable in a SpatialPolygons object
Message-ID: <2023742A9DC9514DAC068ABFE73E9E6F11E07D@EXBK03.personale.dir.unibo.it>

Dear all,
sorry my question seems to me quite basic and perhaps is already posted but at a first sight I did not find it.
Basically I have a map of contiguous areas in the form of a SpatialPolygons object. In all areas I need to display the value of a binary value (e.g. to color the areas corresponding to value 1).
I have to say in a guide to the package "spdep" I found the code to do a map (it was a map of probabilities buillt by using plot coomand after having used probmap command), but in that case the plot is done starting from an object of class polylist if I say well. Instead I need to do a plot starting from a SpatialPolygons object because I do not have the map in other formats. 
 
Moreover, in future I will also need to plot values graduated by colors.
 
Please, can you help me?
thanks in advance
massimo
 
Massimo Ventrucci
Ph.D Student in Statistics
Dipartimento di Scienze Statistiche
Universit? degli studi di Bologna
Via Belle Arti 41
40126 Bologna-Italy
_____________________________________

Phone +39(051)264182 (office)
Fax     +39(051)232153
E-mail massimo.ventrucci at unibo.it



From Bjarke.Christensen at sydbank.dk  Mon Jul 28 16:44:42 2008
From: Bjarke.Christensen at sydbank.dk (Bjarke Christensen)
Date: Mon, 28 Jul 2008 16:44:42 +0200
Subject: [R-sig-Geo] Outline of set of gridded points
In-Reply-To: <mailman.13.1206702003.15065.r-sig-geo@stat.math.ethz.ch>
Message-ID: <OF9629F5CA.88F50CBB-ONC1257494.004F9430-C1257494.0050FF87@bdpnet.dk>

Hi,

I have a large number of SpatialPixelsDataFrame (or a grid with points that
can have either value 0 or 1). The pixels/points all cluster together, so
if there is a pixel at location (x, y), there is guaranteed to be a pixel
at an adjoining location also. So each SpatialPixelsDataFrame contains one
and only one contiguous cluster of pixels (points with value 1) and the
rest of the pixels have value 0. There may be holes in the clusters.

What I thought would be simple, but can't seem to program my way out of, is
to get a polygon demarking the outline of the cluster. I know I could use
chull, but it will draw a circle around a horseshoe-shaped cluster (quite
reasonably, as it is intended to make convex hulls). I would prefer a
polygon shaped like the outlines of a horseshoe, and I figure this should
be possible given that the data are gridded, so no need for a convexity
condition. Also, I'd like to trace the outlines only, not any holes in the
clusters. This must be a reasonably well known problem to geographers and
others,  but as I said, I can't figure it out.
Can anyone help with ideas, pointers, code or anything?

Thanks very much in advance!
Bjarke.



From T.Hengl at uva.nl  Mon Jul 28 16:56:27 2008
From: T.Hengl at uva.nl (Tomislav Hengl)
Date: Mon, 28 Jul 2008 16:56:27 +0200
Subject: [R-sig-Geo] generating distance map for Large map
In-Reply-To: <3aaf1a030807211211q737d0b71h633d0ea201eafa54@mail.gmail.com>
Message-ID: <A13321CB4CAF4CADB6B7EC95DAFD9C6B@pcibed193>


Yes, buffer distances can be smoothly calculated using SAGA (I do not if it will work for your HUGE
image, but you can try). Here is an example:

.........

# Import the contour data (from the 1:5k and 1:50k topo maps):

> library(maptools)
> getinfo.shape("contours.shp")
> contours.50 <- readShapeLines("contours.shp", proj4string=CRS(as.character(NA)))
> contours.5 <- readShapeLines("contours2.shp", proj4string=CRS(as.character(NA)))

# estimate the initial cell size based on the spacing between the contours:

dem.area <- (contours.5 at bbox[1,2]-contours.5 at bbox[1,1])*(contours.5 at bbox[2,2]-contours.5 at bbox[2,1])
# for beginning, we take a cell size that corresponds to the effective scale:
dem.pixelsize <- 25

# estimate the buffer distance between the contour lines 

library(RSAGA)
# Download SAGA GIS from www.saga-gis.org and unzip the binaries to:
rsaga.env(path="C:/Program Files/saga_vc")

# first, convert the contour map to a raster map:

rsaga.geoprocessor(lib="grid_gridding", module=3, param=list(GRID="contour50_buff.sgrd",
INPUT="contours.shp", FIELD=1, LINE_TYPE=0, USER_CELL_SIZE=dem.pixelsize,
USER_X_EXTENT_MIN=contours.5 at bbox[1,1], USER_X_EXTENT_MAX=contours.5 at bbox[1,2],
USER_Y_EXTENT_MIN=contours.5 at bbox[2,1], USER_Y_EXTENT_MAX=contours.5 at bbox[2,2]))

# now extract a buffer distance map (for 'contours') and load it back to R:
# the parameters DIST and IVAL are estimated based on the grid properties:

rsaga.geoprocessor(lib="grid_tools", module=10, param=list(SOURCE="contour50_buff.sgrd",
DISTANCE="contours50_dist.sgrd", ALLOC="contours50_alloc.sgrd", BUFFER="contours50_bdist.sgrd",
DIST=sqrt(dem.area)/3, IVAL=dem.pixelsize))
rsaga.sgrd.to.esri(in.sgrds="contours50_dist.sgrd", out.grids="contours50_dist.asc",
out.path=getwd(), prec=1)

contours50.dist <- readGDAL("contours50_dist.asc")

.........

and the complete sample R script:
http://spatial-analyst.net/PIXEL/pixelR.zip 

cheers,

Tom Hengl
http://spatial-analyst.net 





-----Original Message-----
From: r-sig-geo-bounces at stat.math.ethz.ch [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of
milton ruser
Sent: maandag 21 juli 2008 21:11
To: r-sig-geo at stat.math.ethz.ch
Subject: [R-sig-Geo] generating distance map for Large map

Dear all,

I have a very large BINARY image (60,000x50,000 pixels) and need to generate
the distance map from the 1 values.
When the images are small than my image, I can generate the distance map
using ArcGis (my image is in .IMG format), but ArcGis return error for this
large one.

I am running R 2.7.1 under windows/xp. Is there a way of do this job using R
ou RSaga? (unfortunately I don?t have GRASS installed), and my experience
with RSAGA is near zero. My computer is 4GB ram.  I can load the images on
ArcGis and Erdas without problem, but I only don?t know how do this task.

Sorry for not send a reproducible code.

Any help are welcome.

Miltinho Astronauta
Brazil

	[[alternative HTML version deleted]]



From Roger.Bivand at nhh.no  Mon Jul 28 17:44:30 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 28 Jul 2008 17:44:30 +0200 (CEST)
Subject: [R-sig-Geo] plot a variable in a SpatialPolygons object
In-Reply-To: <2023742A9DC9514DAC068ABFE73E9E6F11E07D@EXBK03.personale.dir.unibo.it>
References: <2023742A9DC9514DAC068ABFE73E9E6F11E07D@EXBK03.personale.dir.unibo.it>
Message-ID: <Pine.LNX.4.64.0807281738110.6775@reclus.nhh.no>

On Mon, 28 Jul 2008, Massimo Ventrucci wrote:

> Dear all,

> sorry my question seems to me quite basic and perhaps is already posted 
> but at a first sight I did not find it. Basically I have a map of 
> contiguous areas in the form of a SpatialPolygons object. In all areas I 
> need to display the value of a binary value (e.g. to color the areas 
> corresponding to value 1). I have to say in a guide to the package 
> "spdep" I found the code to do a map (it was a map of probabilities 
> buillt by using plot coomand after having used probmap command), but in 
> that case the plot is done starting from an object of class polylist if 
> I say well. Instead I need to do a plot starting from a SpatialPolygons 
> object because I do not have the map in other formats.

I'm planning to update the now very obsolete vignette in spdep soon. The 
easiest way to plot a variable from a SpatialPolygonsDataFrame object is 
the spplot method in the sp package (which spdep loads). Just try:

spplot(my_SpolDF, "myvar")

for a first cut.

Base graphics methods, such as plot(), are also available. The best online 
guide may be one of the units at:

http://www.bias-project.org.uk/ASDARcourse/

either "Vizualising Spatial Data" for the description, or your choice of 
the worked examples. There are also code examples and figures on the ASDAR 
book website: www.asdar-book.org; though this is still under construction, 
most things are there.

Roger

>
> Moreover, in future I will also need to plot values graduated by colors.
>
> Please, can you help me?
> thanks in advance
> massimo
>
> Massimo Ventrucci
> Ph.D Student in Statistics
> Dipartimento di Scienze Statistiche
> Universit? degli studi di Bologna
> Via Belle Arti 41
> 40126 Bologna-Italy
> _____________________________________
>
> Phone +39(051)264182 (office)
> Fax     +39(051)232153
> E-mail massimo.ventrucci at unibo.it
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From T.Hengl at uva.nl  Mon Jul 28 18:38:14 2008
From: T.Hengl at uva.nl (Tomislav Hengl)
Date: Mon, 28 Jul 2008 18:38:14 +0200
Subject: [R-sig-Geo] Spatial Resampling
In-Reply-To: <60141.124.182.15.91.1216951190.squirrel@124.182.15.91>
Message-ID: <F741BFC6275548F3BC8284B28F1E9E46@pcibed193>


You can also try RSAGA. It is very fast and handy to up-scale large grids (it is perfect to automate
processing), and you only need to define the new grid cell size and the up/down-scaling method:

> library(RSAGA)
# Download SAGA GIS from www.saga-gis.org and unzip the binaries to:
rsaga.env(path="C:/Program Files/saga_vc")

# first, convert to the SAGA format:
> rsaga.esri.to.sgrd(in.grids="image12m.asc", out.sgrds="image12m.sgrd", in.path=getwd())

# now resample to 18 m grid resolution using the bilinear resampling:
> rsaga.get.usage(lib="grid_tools", module=0)
> rsaga.geoprocessor(lib="grid_tools", module=0, param=list(INPUT="image12m.sgrd",
GRID="image18m.sgrd", METHOD=1, DIMENSIONS_CELLSIZE=18, SCALE_UP_METHOD=1))

# convert back to ESRI format:
> rsaga.sgrd.to.esri(in.sgrds="image18m.sgrd", out.grids="image18m.asc", out.path=getwd(), prec=1)

The resampling methods implemented in SAGA (see GRID > Tools > Construction > Resampling) are
available using the "rsaga.get.usage(lib="grid_tools", module=0)":

-SCALE_UP_METHOD:<num>        Interpolation Method
        Choice
        Available Choices:
        [0] Nearest Neighbor
        [1] Bilinear Interpolation
        [2] Inverse Distance Interpolation
        [3] Bicubic Spline Interpolation
        [4] B-Spline Interpolation
        [5] Mean Value
  -SCALE_DOWN_METHOD:<num>      Interpolation Method
        Choice
        Available Choices:
        [0] Nearest Neighbor
        [1] Bilinear Interpolation
        [2] Inverse Distance Interpolation
        [3] Bicubic Spline Interpolation
        [4] B-Spline Interpolation


Tom Hengl
http://spatial-analyst.net 


-----Original Message-----
From: r-sig-geo-bounces at stat.math.ethz.ch [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of
adrian at maths.uwa.edu.au
Sent: vrijdag 25 juli 2008 4:00
To: r-sig-geo at stat.math.ethz.ch
Subject: [R-sig-Geo] Spatial Resampling

Pujan Raj Regmi <regmi_pujan at hotmail.com> writes:

> I have a satellite image of 12m spatial resolution (4 bands). I want to
> resample to coarser level. i.e. to 18m, 24m,30m,36m and so on.
> The result I got from ENVI are not realistic so I want to do it in R
> using weighted average from neighboring pixels.

In package 'spatstat' the function 'blur' will perform spatial averaging
of a pixel image, using Gaussian weights. The function 'as.im' can be used
to change the dimensions of a pixel image.

So for example if Z is a pixel image (object of class "im") then
    old.pixelsize <- Z$xstep
    blurZ <- blur(Z, 1.5 * old.pixelsize)
    old.dim <- Z$dim
    new.dim <- floor(old.dim/2)
    Y <- as.im(blurZ, dimyx=new.dim)
computes a Gaussian kernel-weighted average of pixel values, then
subsamples the image.

Adrian Baddeley

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo



From T.Hengl at uva.nl  Mon Jul 28 18:53:26 2008
From: T.Hengl at uva.nl (Tomislav Hengl)
Date: Mon, 28 Jul 2008 18:53:26 +0200
Subject: [R-sig-Geo] kernels, contours, points?
In-Reply-To: <67399C1D-2A86-46F3-9B15-6CD06BA0D22B@gmail.com>
Message-ID: <D9194DCBFF8F4007879545B0D78078D8@pcibed193>


SAGA GIS can convert lines to polygons (and run many other GIS operations on shapes):

> library(RSAGA)
> rsaga.get.usage("shapes_polygons",3)
SAGA CMD 2.0
Copyright (C) 2005 by Olaf Conrad
library path:   C:/Progra~1/saga_vc/modules
library name:   shapes_polygons
module name:    Convert Lines to Polygons
Usage: 3 -POLYGONS <str> -LINES <str>
  -POLYGONS:<str>       Polygons
        Shapes (output)
  -LINES:<str>          Lines
        Shapes (input)

But I do not really know how it works. As far as I know, to convert lines to polygons, the lines
need to be closed (no overlaps, no dead-ends) and a point map is needed to define the topology. See
for example - http://spatial-analyst.net/PDF/TN_Ortofoto_in_ILWIS.pdf 


Tom Hengl
http://spatial-analyst.net 


-----Original Message-----
From: r-sig-geo-bounces at stat.math.ethz.ch [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of
Jeebz
Sent: donderdag 17 juli 2008 21:18
To: r-sig-geo at stat.math.ethz.ch
Subject: Re: [R-sig-Geo] kernels, contours, points?

That's exactly the issue I think: anyone know how to turn a contour  
into a polygon??

On Jul 17, 2008, at 6:48 AM, Ashton Shortridge wrote:

> I think creative use of the overlay() function would accomplish what  
> you want.
> Some example code that is a bit like what you propose (uses the sp  
> library):
>
> # I have a polydataframe object:
> my.poly.data <- SpatialPolygonsDataFrame(my.poly, area.lu.table)
>
> # I have a set of point objects (derived, in this case, from  
> spsample):
> samgrid <- spsample(us.spPolys, 500, 'regular')
>
> # I'd like to know which poly in my.poly.data each point in samgrid  
> falls in:
> sample.area <- overlay(my.poly.data, samgrid)$name
>
> For this to work, you would need to figure out how to turn contours  
> into
> polys, which might be tricky, especially if they aren't closed and/ 
> or have
> holes (pits) within them.
>
> I admit that I am not very comfortable working with the sp objects,  
> and I
> would generally advise someone doing GIS-type work to use a GIS.  
> Hawth's
> (not "Hawk's") Analysis Tools are very useful in an ESRI  
> environment, as are
> built in commands and extensions in many GIS.
>
> yours,
>
> Ashton
> -- 
> Ashton Shortridge
> Associate Professor			ashton at msu.edu
> Dept of Geography			http://www.msu.edu/~ashton
> 235 Geography Building		ph (517) 432-3561
> Michigan State University		fx (517) 432-1671
>
> On Wednesday 16 July 2008, Jeebz wrote:
>> Hi
>>
>> I'm new to the R spatial packages, but I have a spatial-oriented task
>> I would like to accomplish.
>>
>> I have a 2d grid of points and each point has a class (13 classes
>> total in the dataset).  The grid is small-ish, only 256x256.  I have
>> run a 2d kernel density estimation (using kde2d) and can create a
>> contour plot easily (per class).
>>
>> What I would like to do is use a contour line to extract all the
>> points from the original grid that are bounded by that contour.
>> Ultimately, I wish to calculate a sort of "purity" measure, so  
>> given a
>> particular contour (e.g. a contour level that encloses 95% of the
>> classes points), how many points from other classes fall in with the
>> classes that were used to define the contour.
>>
>> I know there has to be a way to do this with R... right?  A colleague
>> of mine showed my how it could be done using ArcGIS and "Hawkes
>> tools", by calculating percent volume contours, but I don't know  
>> where
>> to begin in R.
>>
>> Anyone have any thoughts or examples on this?
>>
>> Much thanks in advance,
>>
>> bct
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo



From v.gomezrubio at imperial.ac.uk  Tue Jul 29 18:37:24 2008
From: v.gomezrubio at imperial.ac.uk (Virgilio Gomez-Rubio)
Date: Tue, 29 Jul 2008 17:37:24 +0100
Subject: [R-sig-Geo] [Fwd: R  'e' workshop]
Message-ID: <1217349444.10301.17.camel@fh-vrubio>

Dear all,

Please, find attached information about an  e-workshop on spatial 
analysis with R organised by Prof. Dave Unwin and that is due to 
happen in the spring term of 2009.

Best wishes,

Virgilio
-------------- next part --------------
A non-text attachment was scrubbed...
Name: R-workshop_description.pdf
Type: application/pdf
Size: 76417 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080729/718dbf62/attachment.pdf>

From guy.serbin at gmail.com  Tue Jul 29 18:54:51 2008
From: guy.serbin at gmail.com (Guy Serbin)
Date: Tue, 29 Jul 2008 12:54:51 -0400
Subject: [R-sig-Geo] ENVI data and R
Message-ID: <1ed1e01b0807290954h5dcb6709h501458cb5229c1ab@mail.gmail.com>

Hi,

I was wondering if anyone knows how to either call up R functions from
within IDL, or conversely read ENVI image data into R.  If you have
any advice I'd greatly appreciate it.

Thanks,
Guy Serbin

-- 
Guy Serbin, Ph.D.
Research Soil Scientist
Hydrology and Remote Sensing Lab
Bldg 007 Rm 104 BARC-West
10300 Baltimore Blvd
Beltsville, MD 20705-2350 USA
+1(301)504-5250 guy.serbin at gmail.com



From Thomas.Adams at noaa.gov  Tue Jul 29 19:59:31 2008
From: Thomas.Adams at noaa.gov (Thomas Adams)
Date: Tue, 29 Jul 2008 13:59:31 -0400
Subject: [R-sig-Geo] ENVI data and R
In-Reply-To: <1ed1e01b0807290954h5dcb6709h501458cb5229c1ab@mail.gmail.com>
References: <1ed1e01b0807290954h5dcb6709h501458cb5229c1ab@mail.gmail.com>
Message-ID: <488F5A83.20008@noaa.gov>

Guy,

I don't know the answer to your question. However, depending on what you 
are trying to do, might it be possible to use GRASS GIS in place of what 
you are doing with IDL in ENVI? GRASS plays quite nicely with R. You 
probably can read ENVI image data into R, but you may need to go through 
a file conversion process to do it.

Regards,
Tom

Guy Serbin wrote:
> Hi,
>
> I was wondering if anyone knows how to either call up R functions from
> within IDL, or conversely read ENVI image data into R.  If you have
> any advice I'd greatly appreciate it.
>
> Thanks,
> Guy Serbin
>
>   


-- 
Thomas E Adams
National Weather Service
Ohio River Forecast Center
1901 South State Route 134
Wilmington, OH 45177

EMAIL:	thomas.adams at noaa.gov

VOICE:	937-383-0528
FAX:	937-383-0033



From Matt.Farnsworth at aphis.usda.gov  Tue Jul 29 20:11:06 2008
From: Matt.Farnsworth at aphis.usda.gov (Matt.Farnsworth at aphis.usda.gov)
Date: Tue, 29 Jul 2008 12:11:06 -0600
Subject: [R-sig-Geo] R Raster to ArcGIS
Message-ID: <OF6B5B1321.711B5E3D-ON87257495.0062F5F5-87257495.0063E4FA@aphis.usda.gov>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080729/e6dafce2/attachment.pl>

From andrew.niccolai at yale.edu  Tue Jul 29 20:24:04 2008
From: andrew.niccolai at yale.edu (Andrew Niccolai)
Date: Tue, 29 Jul 2008 14:24:04 -0400
Subject: [R-sig-Geo] ENVI data and R
In-Reply-To: <1ed1e01b0807290954h5dcb6709h501458cb5229c1ab@mail.gmail.com>
References: <1ed1e01b0807290954h5dcb6709h501458cb5229c1ab@mail.gmail.com>
Message-ID: <000001c8f1a8$48182200$d8486600$@niccolai@yale.edu>

This code might help:

############################################################################
####
############################################################################
####
## Read in envi file
cir.image <- "C:/YOUR_ENVI_FILE"
CIR.envi = read.ENVI(cir.image, headerfile=paste(cir.image,".hdr", sep="")) 

############################################################################
####
############################################################################
####
## Show image
CIR.envi.band1 <- CIR.envi[,,1]
image(CIR.envi.band1, main="")
mtext("Raw Matrix ENVI Image for Band 1", side=3,line = 2, font=3, cex=1.25)

############################################################################
####
############################################################################
####

Andrew Niccolai
Doctoral Candidate
Yale School of Forestry


 
-----Original Message-----
From: r-sig-geo-bounces at stat.math.ethz.ch
[mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of Guy Serbin
Sent: Tuesday, July 29, 2008 12:55 PM
To: R-sig-Geo at stat.math.ethz.ch
Subject: [R-sig-Geo] ENVI data and R

Hi,

I was wondering if anyone knows how to either call up R functions from
within IDL, or conversely read ENVI image data into R.  If you have
any advice I'd greatly appreciate it.

Thanks,
Guy Serbin

-- 
Guy Serbin, Ph.D.
Research Soil Scientist
Hydrology and Remote Sensing Lab
Bldg 007 Rm 104 BARC-West
10300 Baltimore Blvd
Beltsville, MD 20705-2350 USA
+1(301)504-5250 guy.serbin at gmail.com

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo



From ashton at msu.edu  Tue Jul 29 20:54:00 2008
From: ashton at msu.edu (Ashton Shortridge)
Date: Tue, 29 Jul 2008 14:54:00 -0400
Subject: [R-sig-Geo] R Raster to ArcGIS
In-Reply-To: <OF6B5B1321.711B5E3D-ON87257495.0062F5F5-87257495.0063E4FA@aphis.usda.gov>
References: <OF6B5B1321.711B5E3D-ON87257495.0062F5F5-87257495.0063E4FA@aphis.usda.gov>
Message-ID: <200807291454.00892.ashton@msu.edu>

Hi Matt (and list),

ArcGIS still (as far as I know) doesn't work with rectangular cells. This 
isn't a problem with the AsciitoGrid function, but I think is more 
fundamentally a problem with Arc's raster data structure.

The trick to getting around this may be to convert your matrix to a point 
object - with x, y, and z values - in R, where x and y correspond to the 
ground coordinates of each cell in the matrix. I think you would have to do 
this with your own code, but if you've programmed with arrays before it would 
not be difficult. Then interpolate these points to a square grid. The 
interpolation could be done in R (using gstat routines for example) or within 
a GIS (that is, write the xyz object to a text file, or perhaps straight to a 
shapefile, import it as a vector point set to a GIS, and then convert that to 
a raster.

Hope this helps,

Ashton


On Tuesday 29 July 2008, Matt.Farnsworth at aphis.usda.gov wrote:
> Dear list,
>
> I'm trying to bring an ASCII raster file into ArcGIS that resulted from
> calling the R function Tsp(), which is in the "fields" library, followed
> by the use of the function predict.surface() to generate the matrix of
> predicted values. These functions use many of the same inputs as the
> Krig() function in R. My problem is that the output is a symmetrical
> matrix of dimension NxN, however, because R outputs an NxN matrix it
> necessarily results in having a rectangular grid cell (e.g., x dimension
> is 50 and y dimension is 30) for any input data set whose spatial extent
> is not square.
>
> My question is; does anybody know how to import a rectangular grid from an
> ASCII raster file into ArcGIS using something other than the AsciiToGrid
> function in ArcGIS, which only allows for square grids?
>
> Thanks in advance for any help,
> Matt
>
> *************************************************
> Matt Farnsworth
> Disease Ecologist
> Spatial Epidemiology Unit
> Centers for Epidemiology and Animal Health

-- 
Ashton Shortridge
Associate Professor			ashton at msu.edu
Dept of Geography			http://www.msu.edu/~ashton
235 Geography Building		ph (517) 432-3561
Michigan State University		fx (517) 432-1671



From guy.serbin at gmail.com  Tue Jul 29 21:17:40 2008
From: guy.serbin at gmail.com (Guy Serbin)
Date: Tue, 29 Jul 2008 15:17:40 -0400
Subject: [R-sig-Geo] R Raster to ArcGIS
In-Reply-To: <200807291454.00892.ashton@msu.edu>
References: <OF6B5B1321.711B5E3D-ON87257495.0062F5F5-87257495.0063E4FA@aphis.usda.gov>
	<200807291454.00892.ashton@msu.edu>
Message-ID: <1ed1e01b0807291217x345a911bueeaa99db4cacab96@mail.gmail.com>

Hi list,

I'm going to borrow what I just learned from my other thread.  I'd
export your raster data as an ENVI file, which ArcGIS should be able
to read with the ENVI Reader for ArcGIS installed.

1. Go to www.ittvis.com and download the appropriate version of the
ENVI Reader for ArcGIS (1.1 for ArcGIS 8.3-9.1, 1.2 for ArcGIS 9.2).
You won't need the ENVI reader for ArcGIS 9.3 as support for this
format is in the upcoming version.
2. Get the caTools package for R and load it.
3. Export your data from R using write.ENVI
4. Read data into ArcGIS using usual means.

You could also see if one of the other packages, e.g., RPyGeo, allows
you to directly interface between R and ArcGIS for your purposes.

Best of luck,
Guy Serbin

On Tue, Jul 29, 2008 at 2:54 PM, Ashton Shortridge <ashton at msu.edu> wrote:
> Hi Matt (and list),
>
> ArcGIS still (as far as I know) doesn't work with rectangular cells. This
> isn't a problem with the AsciitoGrid function, but I think is more
> fundamentally a problem with Arc's raster data structure.
>
> The trick to getting around this may be to convert your matrix to a point
> object - with x, y, and z values - in R, where x and y correspond to the
> ground coordinates of each cell in the matrix. I think you would have to do
> this with your own code, but if you've programmed with arrays before it would
> not be difficult. Then interpolate these points to a square grid. The
> interpolation could be done in R (using gstat routines for example) or within
> a GIS (that is, write the xyz object to a text file, or perhaps straight to a
> shapefile, import it as a vector point set to a GIS, and then convert that to
> a raster.
>
> Hope this helps,
>
> Ashton
>
>
> On Tuesday 29 July 2008, Matt.Farnsworth at aphis.usda.gov wrote:
>> Dear list,
>>
>> I'm trying to bring an ASCII raster file into ArcGIS that resulted from
>> calling the R function Tsp(), which is in the "fields" library, followed
>> by the use of the function predict.surface() to generate the matrix of
>> predicted values. These functions use many of the same inputs as the
>> Krig() function in R. My problem is that the output is a symmetrical
>> matrix of dimension NxN, however, because R outputs an NxN matrix it
>> necessarily results in having a rectangular grid cell (e.g., x dimension
>> is 50 and y dimension is 30) for any input data set whose spatial extent
>> is not square.
>>
>> My question is; does anybody know how to import a rectangular grid from an
>> ASCII raster file into ArcGIS using something other than the AsciiToGrid
>> function in ArcGIS, which only allows for square grids?
>>
>> Thanks in advance for any help,
>> Matt
>>
>> *************************************************
>> Matt Farnsworth
>> Disease Ecologist
>> Spatial Epidemiology Unit
>> Centers for Epidemiology and Animal Health
>
> --
> Ashton Shortridge
> Associate Professor                     ashton at msu.edu
> Dept of Geography                       http://www.msu.edu/~ashton
> 235 Geography Building          ph (517) 432-3561
> Michigan State University               fx (517) 432-1671
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Guy Serbin, Ph.D.
Research Soil Scientist
Hydrology and Remote Sensing Lab
Bldg 007 Rm 104 BARC-West
10300 Baltimore Blvd
Beltsville, MD 20705-2350 USA
+1(301)504-5250 guy.serbin at gmail.com



From Roger.Bivand at nhh.no  Tue Jul 29 21:38:53 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 29 Jul 2008 21:38:53 +0200 (CEST)
Subject: [R-sig-Geo] R Raster to ArcGIS
In-Reply-To: <1ed1e01b0807291217x345a911bueeaa99db4cacab96@mail.gmail.com>
References: <OF6B5B1321.711B5E3D-ON87257495.0062F5F5-87257495.0063E4FA@aphis.usda.gov>
	<200807291454.00892.ashton@msu.edu>
	<1ed1e01b0807291217x345a911bueeaa99db4cacab96@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0807292134030.10738@reclus.nhh.no>

On Tue, 29 Jul 2008, Guy Serbin wrote:

> Hi list,
>
> I'm going to borrow what I just learned from my other thread.  I'd
> export your raster data as an ENVI file, which ArcGIS should be able
> to read with the ENVI Reader for ArcGIS installed.
>
> 1. Go to www.ittvis.com and download the appropriate version of the
> ENVI Reader for ArcGIS (1.1 for ArcGIS 8.3-9.1, 1.2 for ArcGIS 9.2).
> You won't need the ENVI reader for ArcGIS 9.3 as support for this
> format is in the upcoming version.
> 2. Get the caTools package for R and load it.
> 3. Export your data from R using write.ENVI
> 4. Read data into ArcGIS using usual means.


Seems like a long way round when readGDAL/writeGDAL in the rgdal package 
have plenty of drivers, such as GeoTiff. Depending on which application 
needs to be "in front", using rgdal and system() from R is very flexible.

I've found GDAL-generated GeoTiff files very easy to read into ENVI, 
harder to read into ArcGIS (may need statistics setting to get the 
symbology reasonable).

Roger

>
> You could also see if one of the other packages, e.g., RPyGeo, allows
> you to directly interface between R and ArcGIS for your purposes.
>
> Best of luck,
> Guy Serbin
>
> On Tue, Jul 29, 2008 at 2:54 PM, Ashton Shortridge <ashton at msu.edu> wrote:
>> Hi Matt (and list),
>>
>> ArcGIS still (as far as I know) doesn't work with rectangular cells. This
>> isn't a problem with the AsciitoGrid function, but I think is more
>> fundamentally a problem with Arc's raster data structure.
>>
>> The trick to getting around this may be to convert your matrix to a point
>> object - with x, y, and z values - in R, where x and y correspond to the
>> ground coordinates of each cell in the matrix. I think you would have to do
>> this with your own code, but if you've programmed with arrays before it would
>> not be difficult. Then interpolate these points to a square grid. The
>> interpolation could be done in R (using gstat routines for example) or within
>> a GIS (that is, write the xyz object to a text file, or perhaps straight to a
>> shapefile, import it as a vector point set to a GIS, and then convert that to
>> a raster.
>>
>> Hope this helps,
>>
>> Ashton
>>
>>
>> On Tuesday 29 July 2008, Matt.Farnsworth at aphis.usda.gov wrote:
>>> Dear list,
>>>
>>> I'm trying to bring an ASCII raster file into ArcGIS that resulted from
>>> calling the R function Tsp(), which is in the "fields" library, followed
>>> by the use of the function predict.surface() to generate the matrix of
>>> predicted values. These functions use many of the same inputs as the
>>> Krig() function in R. My problem is that the output is a symmetrical
>>> matrix of dimension NxN, however, because R outputs an NxN matrix it
>>> necessarily results in having a rectangular grid cell (e.g., x dimension
>>> is 50 and y dimension is 30) for any input data set whose spatial extent
>>> is not square.
>>>
>>> My question is; does anybody know how to import a rectangular grid from an
>>> ASCII raster file into ArcGIS using something other than the AsciiToGrid
>>> function in ArcGIS, which only allows for square grids?
>>>
>>> Thanks in advance for any help,
>>> Matt
>>>
>>> *************************************************
>>> Matt Farnsworth
>>> Disease Ecologist
>>> Spatial Epidemiology Unit
>>> Centers for Epidemiology and Animal Health
>>
>> --
>> Ashton Shortridge
>> Associate Professor                     ashton at msu.edu
>> Dept of Geography                       http://www.msu.edu/~ashton
>> 235 Geography Building          ph (517) 432-3561
>> Michigan State University               fx (517) 432-1671
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From regmi_pujan at hotmail.com  Tue Jul 29 22:05:29 2008
From: regmi_pujan at hotmail.com (PUJAN RAJ REGMI)
Date: Tue, 29 Jul 2008 20:05:29 +0000
Subject: [R-sig-Geo] ENVI data and R
In-Reply-To: <000001c8f1a8$48182200$d8486600$@niccolai@yale.edu>
References: <1ed1e01b0807290954h5dcb6709h501458cb5229c1ab@mail.gmail.com>
	<000001c8f1a8$48182200$d8486600$@niccolai@yale.edu>
Message-ID: <BAY113-W20BF14455942C7ADF169B584820@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080729/f1f6b4e0/attachment.pl>

From guy.serbin at gmail.com  Tue Jul 29 22:15:34 2008
From: guy.serbin at gmail.com (Guy Serbin)
Date: Tue, 29 Jul 2008 16:15:34 -0400
Subject: [R-sig-Geo] ENVI data and R
In-Reply-To: <BAY113-W20BF14455942C7ADF169B584820@phx.gbl>
References: <1ed1e01b0807290954h5dcb6709h501458cb5229c1ab@mail.gmail.com>
	<BAY113-W20BF14455942C7ADF169B584820@phx.gbl>
Message-ID: <1ed1e01b0807291315p2b556089o7bfc03f2d3d4167f@mail.gmail.com>

Thank you all for the help- I successfully read an image into R using
these methods.

I did, however, encounter some problems when loading a hyperspectral
image cube into R as it was unable to allocate the 2.9 GB of volatile
memory that it needed.

Is there a way to improve memory management by R, so that it only
reads in the data when actually needed for processing, e.g., only read
in the bands I need, or conversely read in spectra on a per-pixel
basis?

Guy

On Tue, Jul 29, 2008 at 4:05 PM, PUJAN RAJ REGMI
<regmi_pujan at hotmail.com> wrote:
>
> This might help to mange the orientation of image:
>
> # To read ENVI format
> cir.image<-("YOUR_ENVI_FILE")
> CIR.envi<-read.ENVI(cir.image,headerfile=paste(cir.image,".hdr",sep=""))
> # To Show image
> CIR.envi.band1<-CIR.envi[,,1]
> CIR.envi.band1.s<-CIR.envi.band1[order(nrow(CIR.envi.band1):1),]
> CIR.envi.band1.t<-t(CIR.envi.band1.s)
> image(CIR.envi.band1.t,main="")
> mtext("Raw Matrix ENVI Image for Band1", side=3,line=2, font=3,cex=1.25)
>
> Pujan
> ________________________________
>> From: andrew.niccolai at yale.edu
>> To: guy.serbin at gmail.com; R-sig-Geo at stat.math.ethz.ch
>> Date: Tue, 29 Jul 2008 14:24:04 -0400
>> Subject: Re: [R-sig-Geo] ENVI data and R
>>
>> This code might help:
>>
>>
>> ############################################################################
>> ####
>>
>> ############################################################################
>> ####
>> ## Read in envi file
>> cir.image <- "C:/YOUR_ENVI_FILE"
>> CIR.envi = read.ENVI(cir.image, headerfile=paste(cir.image,".hdr",
>> sep=""))
>>
>>
>> ############################################################################
>> ####
>>
>> ############################################################################
>> ####
>> ## Show image
>> CIR.envi.band1 <- CIR.envi[,,1]
>> image(CIR.envi.band1, main="")
>> mtext("Raw Matrix ENVI Image for Band 1", side=3,line = 2, font=3,
>> cex=1.25)
>>
>>
>> ############################################################################
>> ####
>>
>> ############################################################################
>> ####
>>
>> Andrew Niccolai
>> Doctoral Candidate
>> Yale School of Forestry
>>
>>
>>
>> -----Original Message-----
>> From: r-sig-geo-bounces at stat.math.ethz.ch
>> [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of Guy Serbin
>> Sent: Tuesday, July 29, 2008 12:55 PM
>> To: R-sig-Geo at stat.math.ethz.ch
>> Subject: [R-sig-Geo] ENVI data and R
>>
>> Hi,
>>
>> I was wondering if anyone knows how to either call up R functions from
>> within IDL, or conversely read ENVI image data into R. If you have
>> any advice I'd greatly appreciate it.
>>
>> Thanks,
>> Guy Serbin
>>
>> --
>> Guy Serbin, Ph.D.
>> Research Soil Scientist
>> Hydrology and Remote Sensing Lab
>> Bldg 007 Rm 104 BARC-West
>> 10300 Baltimore Blvd
>> Beltsville, MD 20705-2350 USA
>> +1(301)504-5250 guy.serbin at gmail.com
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> ________________________________
> Stay in touch when you're away with Windows Live Messenger. IM anytime
> you're online.



-- 
Guy Serbin, Ph.D.
Research Soil Scientist
Hydrology and Remote Sensing Lab
Bldg 007 Rm 104 BARC-West
10300 Baltimore Blvd
Beltsville, MD 20705-2350 USA
+1(301)504-5250 guy.serbin at gmail.com



From Roger.Bivand at nhh.no  Tue Jul 29 22:24:37 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 29 Jul 2008 22:24:37 +0200 (CEST)
Subject: [R-sig-Geo] ENVI data and R
In-Reply-To: <1ed1e01b0807291315p2b556089o7bfc03f2d3d4167f@mail.gmail.com>
References: <1ed1e01b0807290954h5dcb6709h501458cb5229c1ab@mail.gmail.com>
	<BAY113-W20BF14455942C7ADF169B584820@phx.gbl>
	<1ed1e01b0807291315p2b556089o7bfc03f2d3d4167f@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0807292219430.10738@reclus.nhh.no>

On Tue, 29 Jul 2008, Guy Serbin wrote:

> Thank you all for the help- I successfully read an image into R using
> these methods.
>
> I did, however, encounter some problems when loading a hyperspectral
> image cube into R as it was unable to allocate the 2.9 GB of volatile
> memory that it needed.

Buy more memory, 64-bit Linux works fine. Seriously, R is for statistics, 
so its memory management is designed for samples, even though very large 
samples can be handled when used appropriately. If your data are in a 
GeoTiff, you can read them by band using functions in the rgdal package, 
or equally well many bands in a window or tile of a larger scene. Note 
that ArcGIS uses GDAL too for handling some raster formats. Using R does 
mean thinking through your work flow.

Roger

>
> Is there a way to improve memory management by R, so that it only
> reads in the data when actually needed for processing, e.g., only read
> in the bands I need, or conversely read in spectra on a per-pixel
> basis?
>
> Guy
>
> On Tue, Jul 29, 2008 at 4:05 PM, PUJAN RAJ REGMI
> <regmi_pujan at hotmail.com> wrote:
>>
>> This might help to mange the orientation of image:
>>
>> # To read ENVI format
>> cir.image<-("YOUR_ENVI_FILE")
>> CIR.envi<-read.ENVI(cir.image,headerfile=paste(cir.image,".hdr",sep=""))
>> # To Show image
>> CIR.envi.band1<-CIR.envi[,,1]
>> CIR.envi.band1.s<-CIR.envi.band1[order(nrow(CIR.envi.band1):1),]
>> CIR.envi.band1.t<-t(CIR.envi.band1.s)
>> image(CIR.envi.band1.t,main="")
>> mtext("Raw Matrix ENVI Image for Band1", side=3,line=2, font=3,cex=1.25)
>>
>> Pujan
>> ________________________________
>>> From: andrew.niccolai at yale.edu
>>> To: guy.serbin at gmail.com; R-sig-Geo at stat.math.ethz.ch
>>> Date: Tue, 29 Jul 2008 14:24:04 -0400
>>> Subject: Re: [R-sig-Geo] ENVI data and R
>>>
>>> This code might help:
>>>
>>>
>>> ############################################################################
>>> ####
>>>
>>> ############################################################################
>>> ####
>>> ## Read in envi file
>>> cir.image <- "C:/YOUR_ENVI_FILE"
>>> CIR.envi = read.ENVI(cir.image, headerfile=paste(cir.image,".hdr",
>>> sep=""))
>>>
>>>
>>> ############################################################################
>>> ####
>>>
>>> ############################################################################
>>> ####
>>> ## Show image
>>> CIR.envi.band1 <- CIR.envi[,,1]
>>> image(CIR.envi.band1, main="")
>>> mtext("Raw Matrix ENVI Image for Band 1", side=3,line = 2, font=3,
>>> cex=1.25)
>>>
>>>
>>> ############################################################################
>>> ####
>>>
>>> ############################################################################
>>> ####
>>>
>>> Andrew Niccolai
>>> Doctoral Candidate
>>> Yale School of Forestry
>>>
>>>
>>>
>>> -----Original Message-----
>>> From: r-sig-geo-bounces at stat.math.ethz.ch
>>> [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of Guy Serbin
>>> Sent: Tuesday, July 29, 2008 12:55 PM
>>> To: R-sig-Geo at stat.math.ethz.ch
>>> Subject: [R-sig-Geo] ENVI data and R
>>>
>>> Hi,
>>>
>>> I was wondering if anyone knows how to either call up R functions from
>>> within IDL, or conversely read ENVI image data into R. If you have
>>> any advice I'd greatly appreciate it.
>>>
>>> Thanks,
>>> Guy Serbin
>>>
>>> --
>>> Guy Serbin, Ph.D.
>>> Research Soil Scientist
>>> Hydrology and Remote Sensing Lab
>>> Bldg 007 Rm 104 BARC-West
>>> 10300 Baltimore Blvd
>>> Beltsville, MD 20705-2350 USA
>>> +1(301)504-5250 guy.serbin at gmail.com
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> ________________________________
>> Stay in touch when you're away with Windows Live Messenger. IM anytime
>> you're online.
>
>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From guy.serbin at gmail.com  Tue Jul 29 22:38:42 2008
From: guy.serbin at gmail.com (Guy Serbin)
Date: Tue, 29 Jul 2008 16:38:42 -0400
Subject: [R-sig-Geo] ENVI data and R
In-Reply-To: <Pine.LNX.4.64.0807292219430.10738@reclus.nhh.no>
References: <1ed1e01b0807290954h5dcb6709h501458cb5229c1ab@mail.gmail.com>
	<BAY113-W20BF14455942C7ADF169B584820@phx.gbl>
	<1ed1e01b0807291315p2b556089o7bfc03f2d3d4167f@mail.gmail.com>
	<Pine.LNX.4.64.0807292219430.10738@reclus.nhh.no>
Message-ID: <1ed1e01b0807291338y36916eb9i1ef02e48fe176135@mail.gmail.com>

My machine currently has 4 GB on it, but a lot of that's getting eaten
by video memory and the other programs I have in memory.  Also, some
of my image cubes are 12 GB in size, so I'd need to find a workaround
anyways.  However, since what my colleagues and I are interested in
are pixel-by-pixel spectral analyses, I assume the best approach would
be to pass the spectra either from ENVI/IDL (for which there is no
frontend, but I have logged a request with ITT Visual Solutions to
develop one) or conversely from ArcGIS (which can read ENVI data with
the ENVI Reader) into R for analysis.

Are you aware of ways to send arrays back and forth between R and ArcGIS?

Guy

On Tue, Jul 29, 2008 at 4:24 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> On Tue, 29 Jul 2008, Guy Serbin wrote:
>
>> Thank you all for the help- I successfully read an image into R using
>> these methods.
>>
>> I did, however, encounter some problems when loading a hyperspectral
>> image cube into R as it was unable to allocate the 2.9 GB of volatile
>> memory that it needed.
>
> Buy more memory, 64-bit Linux works fine. Seriously, R is for statistics, so
> its memory management is designed for samples, even though very large
> samples can be handled when used appropriately. If your data are in a
> GeoTiff, you can read them by band using functions in the rgdal package, or
> equally well many bands in a window or tile of a larger scene. Note that
> ArcGIS uses GDAL too for handling some raster formats. Using R does mean
> thinking through your work flow.
>
> Roger
>
>>
>> Is there a way to improve memory management by R, so that it only
>> reads in the data when actually needed for processing, e.g., only read
>> in the bands I need, or conversely read in spectra on a per-pixel
>> basis?
>>
>> Guy
>>
>> On Tue, Jul 29, 2008 at 4:05 PM, PUJAN RAJ REGMI
>> <regmi_pujan at hotmail.com> wrote:
>>>
>>> This might help to mange the orientation of image:
>>>
>>> # To read ENVI format
>>> cir.image<-("YOUR_ENVI_FILE")
>>> CIR.envi<-read.ENVI(cir.image,headerfile=paste(cir.image,".hdr",sep=""))
>>> # To Show image
>>> CIR.envi.band1<-CIR.envi[,,1]
>>> CIR.envi.band1.s<-CIR.envi.band1[order(nrow(CIR.envi.band1):1),]
>>> CIR.envi.band1.t<-t(CIR.envi.band1.s)
>>> image(CIR.envi.band1.t,main="")
>>> mtext("Raw Matrix ENVI Image for Band1", side=3,line=2, font=3,cex=1.25)
>>>
>>> Pujan
>>> ________________________________
>>>>
>>>> From: andrew.niccolai at yale.edu
>>>> To: guy.serbin at gmail.com; R-sig-Geo at stat.math.ethz.ch
>>>> Date: Tue, 29 Jul 2008 14:24:04 -0400
>>>> Subject: Re: [R-sig-Geo] ENVI data and R
>>>>
>>>> This code might help:
>>>>
>>>>
>>>>
>>>> ############################################################################
>>>> ####
>>>>
>>>>
>>>> ############################################################################
>>>> ####
>>>> ## Read in envi file
>>>> cir.image <- "C:/YOUR_ENVI_FILE"
>>>> CIR.envi = read.ENVI(cir.image, headerfile=paste(cir.image,".hdr",
>>>> sep=""))
>>>>
>>>>
>>>>
>>>> ############################################################################
>>>> ####
>>>>
>>>>
>>>> ############################################################################
>>>> ####
>>>> ## Show image
>>>> CIR.envi.band1 <- CIR.envi[,,1]
>>>> image(CIR.envi.band1, main="")
>>>> mtext("Raw Matrix ENVI Image for Band 1", side=3,line = 2, font=3,
>>>> cex=1.25)
>>>>
>>>>
>>>>
>>>> ############################################################################
>>>> ####
>>>>
>>>>
>>>> ############################################################################
>>>> ####
>>>>
>>>> Andrew Niccolai
>>>> Doctoral Candidate
>>>> Yale School of Forestry
>>>>
>>>>
>>>>
>>>> -----Original Message-----
>>>> From: r-sig-geo-bounces at stat.math.ethz.ch
>>>> [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of Guy Serbin
>>>> Sent: Tuesday, July 29, 2008 12:55 PM
>>>> To: R-sig-Geo at stat.math.ethz.ch
>>>> Subject: [R-sig-Geo] ENVI data and R
>>>>
>>>> Hi,
>>>>
>>>> I was wondering if anyone knows how to either call up R functions from
>>>> within IDL, or conversely read ENVI image data into R. If you have
>>>> any advice I'd greatly appreciate it.
>>>>
>>>> Thanks,
>>>> Guy Serbin
>>>>
>>>> --
>>>> Guy Serbin, Ph.D.
>>>> Research Soil Scientist
>>>> Hydrology and Remote Sensing Lab
>>>> Bldg 007 Rm 104 BARC-West
>>>> 10300 Baltimore Blvd
>>>> Beltsville, MD 20705-2350 USA
>>>> +1(301)504-5250 guy.serbin at gmail.com
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>> ________________________________
>>> Stay in touch when you're away with Windows Live Messenger. IM anytime
>>> you're online.
>>
>>
>>
>>
>
> --
> Roger Bivand
> Economic Geography Section, Department of Economics, Norwegian School of
> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
>



-- 
Guy Serbin, Ph.D.
Research Soil Scientist
Hydrology and Remote Sensing Lab
Bldg 007 Rm 104 BARC-West
10300 Baltimore Blvd
Beltsville, MD 20705-2350 USA
+1(301)504-5250 guy.serbin at gmail.com



From moliver at udel.edu  Tue Jul 29 23:15:29 2008
From: moliver at udel.edu (Matt Oliver)
Date: Tue, 29 Jul 2008 17:15:29 -0400
Subject: [R-sig-Geo] ENVI data and R
In-Reply-To: <1ed1e01b0807291338y36916eb9i1ef02e48fe176135@mail.gmail.com>
References: <1ed1e01b0807290954h5dcb6709h501458cb5229c1ab@mail.gmail.com>
	<BAY113-W20BF14455942C7ADF169B584820@phx.gbl>
	<1ed1e01b0807291315p2b556089o7bfc03f2d3d4167f@mail.gmail.com>
	<Pine.LNX.4.64.0807292219430.10738@reclus.nhh.no>
	<1ed1e01b0807291338y36916eb9i1ef02e48fe176135@mail.gmail.com>
Message-ID: <6d4aad460807291415i682625fexfa383eba1bf96610@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080729/5057d816/attachment.pl>

From moliver at udel.edu  Tue Jul 29 23:17:10 2008
From: moliver at udel.edu (Matt Oliver)
Date: Tue, 29 Jul 2008 17:17:10 -0400
Subject: [R-sig-Geo] ENVI data and R
In-Reply-To: <1ed1e01b0807291338y36916eb9i1ef02e48fe176135@mail.gmail.com>
References: <1ed1e01b0807290954h5dcb6709h501458cb5229c1ab@mail.gmail.com>
	<BAY113-W20BF14455942C7ADF169B584820@phx.gbl>
	<1ed1e01b0807291315p2b556089o7bfc03f2d3d4167f@mail.gmail.com>
	<Pine.LNX.4.64.0807292219430.10738@reclus.nhh.no>
	<1ed1e01b0807291338y36916eb9i1ef02e48fe176135@mail.gmail.com>
Message-ID: <6d4aad460807291417h6235581ajeb0a341aab8148de@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080729/0756b205/attachment.pl>

From aloboaleu at gmail.com  Wed Jul 30 09:15:08 2008
From: aloboaleu at gmail.com (Agustin Lobo)
Date: Wed, 30 Jul 2008 09:15:08 +0200
Subject: [R-sig-Geo] ENVI data and R
In-Reply-To: <1ed1e01b0807291338y36916eb9i1ef02e48fe176135@mail.gmail.com>
References: <1ed1e01b0807290954h5dcb6709h501458cb5229c1ab@mail.gmail.com>	<BAY113-W20BF14455942C7ADF169B584820@phx.gbl>	<1ed1e01b0807291315p2b556089o7bfc03f2d3d4167f@mail.gmail.com>	<Pine.LNX.4.64.0807292219430.10738@reclus.nhh.no>
	<1ed1e01b0807291338y36916eb9i1ef02e48fe176135@mail.gmail.com>
Message-ID: <489014FC.80708@gmail.com>

R is not intended for the analysis of large hyperspectral images.
If you are interested on spectra of selected pixels, just
import the envi spectra, I recall they are stored as if
they were envi images: a raw file + a text header file in which
you have all the info you need to import into R provided you have an 
elementary knowledge of R.

In general, the approach is using RS and/or GIS software to
select from the images the information that you really have to process 
in R, which is,
as stated by Roger, a tool for statistics.

Agus

Guy Serbin wrote:
> My machine currently has 4 GB on it, but a lot of that's getting eaten
> by video memory and the other programs I have in memory.  Also, some
> of my image cubes are 12 GB in size, so I'd need to find a workaround
> anyways.  However, since what my colleagues and I are interested in
> are pixel-by-pixel spectral analyses, I assume the best approach would
> be to pass the spectra either from ENVI/IDL (for which there is no
> frontend, but I have logged a request with ITT Visual Solutions to
> develop one) or conversely from ArcGIS (which can read ENVI data with
> the ENVI Reader) into R for analysis.
> 
> Are you aware of ways to send arrays back and forth between R and ArcGIS?
> 
> Guy
> 
> On Tue, Jul 29, 2008 at 4:24 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>> On Tue, 29 Jul 2008, Guy Serbin wrote:
>>
>>> Thank you all for the help- I successfully read an image into R using
>>> these methods.
>>>
>>> I did, however, encounter some problems when loading a hyperspectral
>>> image cube into R as it was unable to allocate the 2.9 GB of volatile
>>> memory that it needed.
>> Buy more memory, 64-bit Linux works fine. Seriously, R is for statistics, so
>> its memory management is designed for samples, even though very large
>> samples can be handled when used appropriately. If your data are in a
>> GeoTiff, you can read them by band using functions in the rgdal package, or
>> equally well many bands in a window or tile of a larger scene. Note that
>> ArcGIS uses GDAL too for handling some raster formats. Using R does mean
>> thinking through your work flow.
>>
>> Roger
>>
>>> Is there a way to improve memory management by R, so that it only
>>> reads in the data when actually needed for processing, e.g., only read
>>> in the bands I need, or conversely read in spectra on a per-pixel
>>> basis?
>>>
>>> Guy
>>>
>>> On Tue, Jul 29, 2008 at 4:05 PM, PUJAN RAJ REGMI
>>> <regmi_pujan at hotmail.com> wrote:
>>>> This might help to mange the orientation of image:
>>>>
>>>> # To read ENVI format
>>>> cir.image<-("YOUR_ENVI_FILE")
>>>> CIR.envi<-read.ENVI(cir.image,headerfile=paste(cir.image,".hdr",sep=""))
>>>> # To Show image
>>>> CIR.envi.band1<-CIR.envi[,,1]
>>>> CIR.envi.band1.s<-CIR.envi.band1[order(nrow(CIR.envi.band1):1),]
>>>> CIR.envi.band1.t<-t(CIR.envi.band1.s)
>>>> image(CIR.envi.band1.t,main="")
>>>> mtext("Raw Matrix ENVI Image for Band1", side=3,line=2, font=3,cex=1.25)
>>>>
>>>> Pujan
>>>> ________________________________
>>>>> From: andrew.niccolai at yale.edu
>>>>> To: guy.serbin at gmail.com; R-sig-Geo at stat.math.ethz.ch
>>>>> Date: Tue, 29 Jul 2008 14:24:04 -0400
>>>>> Subject: Re: [R-sig-Geo] ENVI data and R
>>>>>
>>>>> This code might help:
>>>>>
>>>>>
>>>>>
>>>>> ############################################################################
>>>>> ####
>>>>>
>>>>>
>>>>> ############################################################################
>>>>> ####
>>>>> ## Read in envi file
>>>>> cir.image <- "C:/YOUR_ENVI_FILE"
>>>>> CIR.envi = read.ENVI(cir.image, headerfile=paste(cir.image,".hdr",
>>>>> sep=""))
>>>>>
>>>>>
>>>>>
>>>>> ############################################################################
>>>>> ####
>>>>>
>>>>>
>>>>> ############################################################################
>>>>> ####
>>>>> ## Show image
>>>>> CIR.envi.band1 <- CIR.envi[,,1]
>>>>> image(CIR.envi.band1, main="")
>>>>> mtext("Raw Matrix ENVI Image for Band 1", side=3,line = 2, font=3,
>>>>> cex=1.25)
>>>>>
>>>>>
>>>>>
>>>>> ############################################################################
>>>>> ####
>>>>>
>>>>>
>>>>> ############################################################################
>>>>> ####
>>>>>
>>>>> Andrew Niccolai
>>>>> Doctoral Candidate
>>>>> Yale School of Forestry
>>>>>
>>>>>
>>>>>
>>>>> -----Original Message-----
>>>>> From: r-sig-geo-bounces at stat.math.ethz.ch
>>>>> [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of Guy Serbin
>>>>> Sent: Tuesday, July 29, 2008 12:55 PM
>>>>> To: R-sig-Geo at stat.math.ethz.ch
>>>>> Subject: [R-sig-Geo] ENVI data and R
>>>>>
>>>>> Hi,
>>>>>
>>>>> I was wondering if anyone knows how to either call up R functions from
>>>>> within IDL, or conversely read ENVI image data into R. If you have
>>>>> any advice I'd greatly appreciate it.
>>>>>
>>>>> Thanks,
>>>>> Guy Serbin
>>>>>
>>>>> --
>>>>> Guy Serbin, Ph.D.
>>>>> Research Soil Scientist
>>>>> Hydrology and Remote Sensing Lab
>>>>> Bldg 007 Rm 104 BARC-West
>>>>> 10300 Baltimore Blvd
>>>>> Beltsville, MD 20705-2350 USA
>>>>> +1(301)504-5250 guy.serbin at gmail.com
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>> ________________________________
>>>> Stay in touch when you're away with Windows Live Messenger. IM anytime
>>>> you're online.
>>>
>>>
>>>
>> --
>> Roger Bivand
>> Economic Geography Section, Department of Economics, Norwegian School of
>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>>
> 
> 
> 

-- 
Dr. Agustin Lobo
Institut de Ciencies de la Terra "Jaume Almera" (CSIC)
LLuis Sole Sabaris s/n
08028 Barcelona
Spain
Tel. 34 934095410
Fax. 34 934110012
email: Agustin.Lobo at ija.csic.es
http://www.ija.csic.es/gt/obster



From Roger.Bivand at nhh.no  Wed Jul 30 10:49:44 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 30 Jul 2008 10:49:44 +0200 (CEST)
Subject: [R-sig-Geo] ENVI data and R
In-Reply-To: <1ed1e01b0807291338y36916eb9i1ef02e48fe176135@mail.gmail.com>
References: <1ed1e01b0807290954h5dcb6709h501458cb5229c1ab@mail.gmail.com> 
	<BAY113-W20BF14455942C7ADF169B584820@phx.gbl> 
	<1ed1e01b0807291315p2b556089o7bfc03f2d3d4167f@mail.gmail.com> 
	<Pine.LNX.4.64.0807292219430.10738@reclus.nhh.no>
	<1ed1e01b0807291338y36916eb9i1ef02e48fe176135@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0807301041460.21635@reclus.nhh.no>

On Tue, 29 Jul 2008, Guy Serbin wrote:

> My machine currently has 4 GB on it, but a lot of that's getting eaten
> by video memory and the other programs I have in memory.  Also, some
> of my image cubes are 12 GB in size, so I'd need to find a workaround
> anyways.  However, since what my colleagues and I are interested in
> are pixel-by-pixel spectral analyses, I assume the best approach would
> be to pass the spectra either from ENVI/IDL (for which there is no
> frontend, but I have logged a request with ITT Visual Solutions to
> develop one) or conversely from ArcGIS (which can read ENVI data with
> the ENVI Reader) into R for analysis.
>
> Are you aware of ways to send arrays back and forth between R and ArcGIS?

You can use R as a back-end compute engine through (D)COM, see:

http://cran.r-project.org/contrib/extra/dcom/

and note the scripting sample for Python. Regular (D)COM does arrays 
easily in VBA, going through usually Python means an extra copy, but may 
be more convenient. One needs to watch error trapping and what the 
different systems do with Inf, NaN, and NA values. I usually start from 
Python in front, and both Arc and R via (D)COM, but the Duke University 
MGET site has lots of code examples for interfacing R and Arc in 
different configurations:

http://code.env.duke.edu/projects/mget

MGET is under active development.

Roger

>
> Guy
>
> On Tue, Jul 29, 2008 at 4:24 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>> On Tue, 29 Jul 2008, Guy Serbin wrote:
>>
>>> Thank you all for the help- I successfully read an image into R using
>>> these methods.
>>>
>>> I did, however, encounter some problems when loading a hyperspectral
>>> image cube into R as it was unable to allocate the 2.9 GB of volatile
>>> memory that it needed.
>>
>> Buy more memory, 64-bit Linux works fine. Seriously, R is for statistics, so
>> its memory management is designed for samples, even though very large
>> samples can be handled when used appropriately. If your data are in a
>> GeoTiff, you can read them by band using functions in the rgdal package, or
>> equally well many bands in a window or tile of a larger scene. Note that
>> ArcGIS uses GDAL too for handling some raster formats. Using R does mean
>> thinking through your work flow.
>>
>> Roger
>>
>>>
>>> Is there a way to improve memory management by R, so that it only
>>> reads in the data when actually needed for processing, e.g., only read
>>> in the bands I need, or conversely read in spectra on a per-pixel
>>> basis?
>>>
>>> Guy
>>>
>>> On Tue, Jul 29, 2008 at 4:05 PM, PUJAN RAJ REGMI
>>> <regmi_pujan at hotmail.com> wrote:
>>>>
>>>> This might help to mange the orientation of image:
>>>>
>>>> # To read ENVI format
>>>> cir.image<-("YOUR_ENVI_FILE")
>>>> CIR.envi<-read.ENVI(cir.image,headerfile=paste(cir.image,".hdr",sep=""))
>>>> # To Show image
>>>> CIR.envi.band1<-CIR.envi[,,1]
>>>> CIR.envi.band1.s<-CIR.envi.band1[order(nrow(CIR.envi.band1):1),]
>>>> CIR.envi.band1.t<-t(CIR.envi.band1.s)
>>>> image(CIR.envi.band1.t,main="")
>>>> mtext("Raw Matrix ENVI Image for Band1", side=3,line=2, font=3,cex=1.25)
>>>>
>>>> Pujan
>>>> ________________________________
>>>>>
>>>>> From: andrew.niccolai at yale.edu
>>>>> To: guy.serbin at gmail.com; R-sig-Geo at stat.math.ethz.ch
>>>>> Date: Tue, 29 Jul 2008 14:24:04 -0400
>>>>> Subject: Re: [R-sig-Geo] ENVI data and R
>>>>>
>>>>> This code might help:
>>>>>
>>>>>
>>>>>
>>>>> ############################################################################
>>>>> ####
>>>>>
>>>>>
>>>>> ############################################################################
>>>>> ####
>>>>> ## Read in envi file
>>>>> cir.image <- "C:/YOUR_ENVI_FILE"
>>>>> CIR.envi = read.ENVI(cir.image, headerfile=paste(cir.image,".hdr",
>>>>> sep=""))
>>>>>
>>>>>
>>>>>
>>>>> ############################################################################
>>>>> ####
>>>>>
>>>>>
>>>>> ############################################################################
>>>>> ####
>>>>> ## Show image
>>>>> CIR.envi.band1 <- CIR.envi[,,1]
>>>>> image(CIR.envi.band1, main="")
>>>>> mtext("Raw Matrix ENVI Image for Band 1", side=3,line = 2, font=3,
>>>>> cex=1.25)
>>>>>
>>>>>
>>>>>
>>>>> ############################################################################
>>>>> ####
>>>>>
>>>>>
>>>>> ############################################################################
>>>>> ####
>>>>>
>>>>> Andrew Niccolai
>>>>> Doctoral Candidate
>>>>> Yale School of Forestry
>>>>>
>>>>>
>>>>>
>>>>> -----Original Message-----
>>>>> From: r-sig-geo-bounces at stat.math.ethz.ch
>>>>> [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of Guy Serbin
>>>>> Sent: Tuesday, July 29, 2008 12:55 PM
>>>>> To: R-sig-Geo at stat.math.ethz.ch
>>>>> Subject: [R-sig-Geo] ENVI data and R
>>>>>
>>>>> Hi,
>>>>>
>>>>> I was wondering if anyone knows how to either call up R functions from
>>>>> within IDL, or conversely read ENVI image data into R. If you have
>>>>> any advice I'd greatly appreciate it.
>>>>>
>>>>> Thanks,
>>>>> Guy Serbin
>>>>>
>>>>> --
>>>>> Guy Serbin, Ph.D.
>>>>> Research Soil Scientist
>>>>> Hydrology and Remote Sensing Lab
>>>>> Bldg 007 Rm 104 BARC-West
>>>>> 10300 Baltimore Blvd
>>>>> Beltsville, MD 20705-2350 USA
>>>>> +1(301)504-5250 guy.serbin at gmail.com
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>> ________________________________
>>>> Stay in touch when you're away with Windows Live Messenger. IM anytime
>>>> you're online.
>>>
>>>
>>>
>>>
>>
>> --
>> Roger Bivand
>> Economic Geography Section, Department of Economics, Norwegian School of
>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>>
>
>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From Morten.Sickel at nrpa.no  Wed Jul 30 11:21:20 2008
From: Morten.Sickel at nrpa.no (Morten Sickel)
Date: Wed, 30 Jul 2008 11:21:20 +0200
Subject: [R-sig-Geo] Gridding of data
Message-ID: <0CE0A03D0F390E46B12B64489D20B1D402F1A6B23E@MAILHUB.NRPA.LOCAL>

I have a lot of measurements located using GPS projected to UTM. I would prefer to grid those data, i.e. define a grid with e.g. 200m cell size and calculate the average for each cell. Each cell may contain one, zero or many measurements. Another related thing I would like to do is to count for each grid cell how many measurement that falls within that cell

Again, this looks like something that should be fairly easy, if you just know how...

Morten

--
Morten Sickel
Norwegian Radiation Protection Authority
tel (+47) 6716 2551



From Roger.Bivand at nhh.no  Wed Jul 30 13:18:30 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 30 Jul 2008 13:18:30 +0200 (CEST)
Subject: [R-sig-Geo] Gridding of data
In-Reply-To: <0CE0A03D0F390E46B12B64489D20B1D402F1A6B23E@MAILHUB.NRPA.LOCAL>
References: <0CE0A03D0F390E46B12B64489D20B1D402F1A6B23E@MAILHUB.NRPA.LOCAL>
Message-ID: <Pine.LNX.4.64.0807301254560.21635@reclus.nhh.no>

On Wed, 30 Jul 2008, Morten Sickel wrote:

> I have a lot of measurements located using GPS projected to UTM. I would 
> prefer to grid those data, i.e. define a grid with e.g. 200m cell size 
> and calculate the average for each cell. Each cell may contain one, zero 
> or many measurements. Another related thing I would like to do is to 
> count for each grid cell how many measurement that falls within that 
> cell

The overlay methods in sp for SpatialPoints* and your grid (GridTopology, 
SpatialPixels, SpatialGrid) ought in some combination return a vector of 
length equat to the number of grid cells, with an integer index value. 
Doing tapply() on your SpatialPoints* variable(s) should give output that 
can be inserted into a variable in (probably) a SpatialGridDataFrame:

library(sp)
data(meuse)
data(meuse.grid)
coordinates(meuse) <- c("x", "y")
coordinates(meuse.grid) <- c("x", "y")
gridded(meuse.grid) <- TRUE
o <- overlay(meuse.grid, meuse)
# o is a vector of flattened grid indices, here for the SpatialPixels 
# object
oo <- tapply(meuse$zinc, o, mean)
meuse.grid$zinc <- NA
meuse.grid$zinc[as.integer(names(oo))] <- c(oo)
image(meuse.grid, "zinc")
points(meuse, pch=4)

Do "look" at o and oo as a sanity check, and maybe pass arguments to the 
FUN in tapply too. Perhaps o should be checked for NAs too.

Roger

>
> Again, this looks like something that should be fairly easy, if you just 
> know how...
>
> Morten
>
> --
> Morten Sickel
> Norwegian Radiation Protection Authority
> tel (+47) 6716 2551
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From guy.serbin at gmail.com  Wed Jul 30 16:09:36 2008
From: guy.serbin at gmail.com (Guy Serbin)
Date: Wed, 30 Jul 2008 10:09:36 -0400
Subject: [R-sig-Geo] ENVI data and R
In-Reply-To: <Pine.LNX.4.64.0807301041460.21635@reclus.nhh.no>
References: <1ed1e01b0807290954h5dcb6709h501458cb5229c1ab@mail.gmail.com>
	<BAY113-W20BF14455942C7ADF169B584820@phx.gbl>
	<1ed1e01b0807291315p2b556089o7bfc03f2d3d4167f@mail.gmail.com>
	<Pine.LNX.4.64.0807292219430.10738@reclus.nhh.no>
	<1ed1e01b0807291338y36916eb9i1ef02e48fe176135@mail.gmail.com>
	<Pine.LNX.4.64.0807301041460.21635@reclus.nhh.no>
Message-ID: <1ed1e01b0807300709o7f08621fq1924b650e79276ea@mail.gmail.com>

Thank you for the information- I'll try that approach out.  The new
version of ENVI (4.5) is optimized to work with ArcGIS, so there may
be a way to pass spectra from ENVI to ArcGIS and then on to R if I
can't set up a direct ENVI/IDL to R connection.

I agree with you that R isn't for image processing (I certainly
enjoyed the two-three minute wait I had to endure to show a single
band ENVI image in R, something which would have been rendered
instantly in ENVI)- what we're interested in is using R for
statistical capabilities currently not available in either ENVI or
IDL.

Thanks for all your help,
Guy

On Wed, Jul 30, 2008 at 4:49 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> On Tue, 29 Jul 2008, Guy Serbin wrote:
>
>> My machine currently has 4 GB on it, but a lot of that's getting eaten
>> by video memory and the other programs I have in memory.  Also, some
>> of my image cubes are 12 GB in size, so I'd need to find a workaround
>> anyways.  However, since what my colleagues and I are interested in
>> are pixel-by-pixel spectral analyses, I assume the best approach would
>> be to pass the spectra either from ENVI/IDL (for which there is no
>> frontend, but I have logged a request with ITT Visual Solutions to
>> develop one) or conversely from ArcGIS (which can read ENVI data with
>> the ENVI Reader) into R for analysis.
>>
>> Are you aware of ways to send arrays back and forth between R and ArcGIS?
>
> You can use R as a back-end compute engine through (D)COM, see:
>
> http://cran.r-project.org/contrib/extra/dcom/
>
> and note the scripting sample for Python. Regular (D)COM does arrays easily
> in VBA, going through usually Python means an extra copy, but may be more
> convenient. One needs to watch error trapping and what the different systems
> do with Inf, NaN, and NA values. I usually start from Python in front, and
> both Arc and R via (D)COM, but the Duke University MGET site has lots of
> code examples for interfacing R and Arc in different configurations:
>
> http://code.env.duke.edu/projects/mget
>
> MGET is under active development.
>
> Roger
>
>>
>> Guy
>>
>> On Tue, Jul 29, 2008 at 4:24 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>>
>>> On Tue, 29 Jul 2008, Guy Serbin wrote:
>>>
>>>> Thank you all for the help- I successfully read an image into R using
>>>> these methods.
>>>>
>>>> I did, however, encounter some problems when loading a hyperspectral
>>>> image cube into R as it was unable to allocate the 2.9 GB of volatile
>>>> memory that it needed.
>>>
>>> Buy more memory, 64-bit Linux works fine. Seriously, R is for statistics,
>>> so
>>> its memory management is designed for samples, even though very large
>>> samples can be handled when used appropriately. If your data are in a
>>> GeoTiff, you can read them by band using functions in the rgdal package,
>>> or
>>> equally well many bands in a window or tile of a larger scene. Note that
>>> ArcGIS uses GDAL too for handling some raster formats. Using R does mean
>>> thinking through your work flow.
>>>
>>> Roger
>>>
>>>>
>>>> Is there a way to improve memory management by R, so that it only
>>>> reads in the data when actually needed for processing, e.g., only read
>>>> in the bands I need, or conversely read in spectra on a per-pixel
>>>> basis?
>>>>
>>>> Guy
>>>>
>>>> On Tue, Jul 29, 2008 at 4:05 PM, PUJAN RAJ REGMI
>>>> <regmi_pujan at hotmail.com> wrote:
>>>>>
>>>>> This might help to mange the orientation of image:
>>>>>
>>>>> # To read ENVI format
>>>>> cir.image<-("YOUR_ENVI_FILE")
>>>>>
>>>>> CIR.envi<-read.ENVI(cir.image,headerfile=paste(cir.image,".hdr",sep=""))
>>>>> # To Show image
>>>>> CIR.envi.band1<-CIR.envi[,,1]
>>>>> CIR.envi.band1.s<-CIR.envi.band1[order(nrow(CIR.envi.band1):1),]
>>>>> CIR.envi.band1.t<-t(CIR.envi.band1.s)
>>>>> image(CIR.envi.band1.t,main="")
>>>>> mtext("Raw Matrix ENVI Image for Band1", side=3,line=2,
>>>>> font=3,cex=1.25)
>>>>>
>>>>> Pujan
>>>>> ________________________________
>>>>>>
>>>>>> From: andrew.niccolai at yale.edu
>>>>>> To: guy.serbin at gmail.com; R-sig-Geo at stat.math.ethz.ch
>>>>>> Date: Tue, 29 Jul 2008 14:24:04 -0400
>>>>>> Subject: Re: [R-sig-Geo] ENVI data and R
>>>>>>
>>>>>> This code might help:
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> ############################################################################
>>>>>> ####
>>>>>>
>>>>>>
>>>>>>
>>>>>> ############################################################################
>>>>>> ####
>>>>>> ## Read in envi file
>>>>>> cir.image <- "C:/YOUR_ENVI_FILE"
>>>>>> CIR.envi = read.ENVI(cir.image, headerfile=paste(cir.image,".hdr",
>>>>>> sep=""))
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> ############################################################################
>>>>>> ####
>>>>>>
>>>>>>
>>>>>>
>>>>>> ############################################################################
>>>>>> ####
>>>>>> ## Show image
>>>>>> CIR.envi.band1 <- CIR.envi[,,1]
>>>>>> image(CIR.envi.band1, main="")
>>>>>> mtext("Raw Matrix ENVI Image for Band 1", side=3,line = 2, font=3,
>>>>>> cex=1.25)
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> ############################################################################
>>>>>> ####
>>>>>>
>>>>>>
>>>>>>
>>>>>> ############################################################################
>>>>>> ####
>>>>>>
>>>>>> Andrew Niccolai
>>>>>> Doctoral Candidate
>>>>>> Yale School of Forestry
>>>>>>
>>>>>>
>>>>>>
>>>>>> -----Original Message-----
>>>>>> From: r-sig-geo-bounces at stat.math.ethz.ch
>>>>>> [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of Guy Serbin
>>>>>> Sent: Tuesday, July 29, 2008 12:55 PM
>>>>>> To: R-sig-Geo at stat.math.ethz.ch
>>>>>> Subject: [R-sig-Geo] ENVI data and R
>>>>>>
>>>>>> Hi,
>>>>>>
>>>>>> I was wondering if anyone knows how to either call up R functions from
>>>>>> within IDL, or conversely read ENVI image data into R. If you have
>>>>>> any advice I'd greatly appreciate it.
>>>>>>
>>>>>> Thanks,
>>>>>> Guy Serbin
>>>>>>
>>>>>> --
>>>>>> Guy Serbin, Ph.D.
>>>>>> Research Soil Scientist
>>>>>> Hydrology and Remote Sensing Lab
>>>>>> Bldg 007 Rm 104 BARC-West
>>>>>> 10300 Baltimore Blvd
>>>>>> Beltsville, MD 20705-2350 USA
>>>>>> +1(301)504-5250 guy.serbin at gmail.com
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>> ________________________________
>>>>> Stay in touch when you're away with Windows Live Messenger. IM anytime
>>>>> you're online.
>>>>
>>>>
>>>>
>>>>
>>>
>>> --
>>> Roger Bivand
>>> Economic Geography Section, Department of Economics, Norwegian School of
>>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>>> e-mail: Roger.Bivand at nhh.no
>>>
>>>
>>
>>
>>
>>
>
> --
> Roger Bivand
> Economic Geography Section, Department of Economics, Norwegian School of
> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
>



-- 
Guy Serbin, Ph.D.
Research Soil Scientist
Hydrology and Remote Sensing Lab
Bldg 007 Rm 104 BARC-West
10300 Baltimore Blvd
Beltsville, MD 20705-2350 USA
+1(301)504-5250 guy.serbin at gmail.com



From suraj.cimmyt at gmail.com  Wed Jul 30 17:10:35 2008
From: suraj.cimmyt at gmail.com (Suraj Pandey)
Date: Wed, 30 Jul 2008 17:10:35 +0200
Subject: [R-sig-Geo] Cloud Masking in ENVI
Message-ID: <c9f7e5a70807300810j57bde146y5564bed03e68d21c@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080730/aaa506f1/attachment.pl>

From epeterson at cnps.org  Wed Jul 30 17:22:11 2008
From: epeterson at cnps.org (Eric B. Peterson)
Date: Wed, 30 Jul 2008 08:22:11 -0700
Subject: [R-sig-Geo] ENVI data and R
In-Reply-To: UID1074-1205967303
References: UID1074-1205967303
Message-ID: <489024B3.D097.0090.0@cnps.org>

I don't know if this will exactly apply to your case, but you mention pixel by pixel analysis.  If that is really all you need and there are no texture/neighborhood analyses going on, then you could simply open the file and use readBin to grab an appropriately sized chunk, analyze it, writeBin to your output file, then move on.  

Right now I'm exporting about a dozen rasters from ArcMap to binary floating point files (.flt), reading one row at a time into R with readBin(filehandle, double(), size=4, n=ncols) for each raster, and looping through all rows to output a manually constructed classification.  I've done similar things with ENVI files in the past (which when not compressed are simple, straight-forward binary files).  I've just used single-band files for simplicity sake;  for multi-band images you would need to manage the interleaving pattern (e.g. BSQ, BIL).

-Eric

------------------------------

Message: 10
Date: Tue, 29 Jul 2008 16:15:34 -0400
From: "Guy Serbin" <guy.serbin at gmail.com>
Subject: Re: [R-sig-Geo] ENVI data and R
To: r-sig-geo at stat.math.ethz.ch 
Message-ID:
	<1ed1e01b0807291315p2b556089o7bfc03f2d3d4167f at mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Thank you all for the help- I successfully read an image into R using
these methods.

I did, however, encounter some problems when loading a hyperspectral
image cube into R as it was unable to allocate the 2.9 GB of volatile
memory that it needed.

Is there a way to improve memory management by R, so that it only
reads in the data when actually needed for processing, e.g., only read
in the bands I need, or conversely read in spectra on a per-pixel
basis?

Guy



---
Eric B. Peterson, Ph.D.
Vegetation Ecologist / Data Manager
California Native Plant Society
(916) 322-2926 (desk)
(775) 750-4628 (cell)


From Alexander.Herr at csiro.au  Thu Jul 31 01:20:27 2008
From: Alexander.Herr at csiro.au (Alexander.Herr at csiro.au)
Date: Thu, 31 Jul 2008 09:20:27 +1000
Subject: [R-sig-Geo] accumulate gridcells to a specific value
References: <mailman.9.1217412002.21993.r-sig-geo@stat.math.ethz.ch>
Message-ID: <9ED523708FAD8448BDE5EC41B83E7024177797@exactn2-cbr.nexus.csiro.au>

 
Hi List,

I am trying to accumulate gridcells to a specific value. This means I
need to extent the nearest neighbours (or search radius) to a size so
that the sum of gridcell values reaches the desired value (or stops if
sum value of gridcells/radius goes beyond a specific size). It should
start with the highest gridcell value then next remaining highest etc.

Of course this could also work with points/polygons or on a matrix.

Rather than re-inventing the wheel I was wondering if anyone has or
knows of a tool/script.

Thanks and cheers
Herry
 



From jaime.carrera at ipicyt.edu.mx  Thu Jul 31 07:08:07 2008
From: jaime.carrera at ipicyt.edu.mx (Jaime Carrera)
Date: Thu, 31 Jul 2008 00:08:07 -0500
Subject: [R-sig-Geo] reading WKB geometry
Message-ID: <489148B7.7050203@ipicyt.edu.mx>

Hi list,

I've been looking around trying to solve this problem; unfortunately I 
haven't found a way to solve it.
I have a database with sampling points with an associated sampling date 
and would like to plot the density of sampling points on a monthly basis 
for one year using spplot. However, I need to query the database and 
import the result of the query into R to visualize the data. I can 
import the query on a column-wise basis but the WKB data are imported as 
chars into R (as expected). Is there a way by which I could read these 
data (WKB geometry) once imported into R? Or is there a way by which 
ReadOGR can read the outcome of the query?
I tried creating a temporary table through the query, but it seems that 
ReadOGR can't read it.

Thanks for your help,

Jaime

As an example:
 > db.execute("select geo.id as id,geo.wkb_geometry as geom from wells 
as geo, gwhead as h where geo.id=h.id and date_part('year',h.date)=2001 
and h.gwhead<700",clear=F)
 > ids<-db.read.column("id",as.is=F)
 > geom<-db.read.column("geom",as.is=F)
Warning message:
In rpgsql.cast.values.default(data.col) :
  Coercing PGSQL type 16437 to character
 > geom
  [1] "0101000020FF7F00000000000088FD2141000000C09BB95741"
  [2] "0101000020FF7F00000000000088FD2141000000C09BB95741"
  [3] "0101000020FF7F00000000000088FD2141000000C09BB95741"
  [4] "0101000020FF7F00000000000088FD2141000000C09BB95741"
  [5] "0101000020FF7F00000000000088FD2141000000C09BB95741"



From edzer.pebesma at uni-muenster.de  Thu Jul 31 10:50:48 2008
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 31 Jul 2008 10:50:48 +0200
Subject: [R-sig-Geo] reading WKB geometry
In-Reply-To: <489148B7.7050203@ipicyt.edu.mx>
References: <489148B7.7050203@ipicyt.edu.mx>
Message-ID: <48917CE8.3070603@uni-muenster.de>

Jaime, I've been successful in reading points from a PostGIS data base 
through OGR; see

http://wiki.intamap.org/index.php/PostGIS
--
Edzer


Jaime Carrera wrote:
> Hi list,
>
> I've been looking around trying to solve this problem; unfortunately I 
> haven't found a way to solve it.
> I have a database with sampling points with an associated sampling 
> date and would like to plot the density of sampling points on a 
> monthly basis for one year using spplot. However, I need to query the 
> database and import the result of the query into R to visualize the 
> data. I can import the query on a column-wise basis but the WKB data 
> are imported as chars into R (as expected). Is there a way by which I 
> could read these data (WKB geometry) once imported into R? Or is there 
> a way by which ReadOGR can read the outcome of the query?
> I tried creating a temporary table through the query, but it seems 
> that ReadOGR can't read it.
>
> Thanks for your help,
>
> Jaime
>
> As an example:
> > db.execute("select geo.id as id,geo.wkb_geometry as geom from wells 
> as geo, gwhead as h where geo.id=h.id and 
> date_part('year',h.date)=2001 and h.gwhead<700",clear=F)
> > ids<-db.read.column("id",as.is=F)
> > geom<-db.read.column("geom",as.is=F)
> Warning message:
> In rpgsql.cast.values.default(data.col) :
>  Coercing PGSQL type 16437 to character
> > geom
>  [1] "0101000020FF7F00000000000088FD2141000000C09BB95741"
>  [2] "0101000020FF7F00000000000088FD2141000000C09BB95741"
>  [3] "0101000020FF7F00000000000088FD2141000000C09BB95741"
>  [4] "0101000020FF7F00000000000088FD2141000000C09BB95741"
>  [5] "0101000020FF7F00000000000088FD2141000000C09BB95741"
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster, 
Weseler Stra?e 253, 48151 M?nster, Germany.  Phone: +49 251 
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de/



From b.rowlingson at lancaster.ac.uk  Thu Jul 31 11:08:44 2008
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Thu, 31 Jul 2008 10:08:44 +0100
Subject: [R-sig-Geo] accumulate gridcells to a specific value
In-Reply-To: <9ED523708FAD8448BDE5EC41B83E7024177797@exactn2-cbr.nexus.csiro.au>
References: <mailman.9.1217412002.21993.r-sig-geo@stat.math.ethz.ch>
	<9ED523708FAD8448BDE5EC41B83E7024177797@exactn2-cbr.nexus.csiro.au>
Message-ID: <d8ad40b50807310208v6e5fb3f9x3e42bd1f95813969@mail.gmail.com>

2008/7/31  <Alexander.Herr at csiro.au>:

> I am trying to accumulate gridcells to a specific value. This means I
> need to extent the nearest neighbours (or search radius) to a size so
> that the sum of gridcell values reaches the desired value (or stops if
> sum value of gridcells/radius goes beyond a specific size). It should
> start with the highest gridcell value then next remaining highest etc.
>
> Of course this could also work with points/polygons or on a matrix.
>
> Rather than re-inventing the wheel I was wondering if anyone has or
> knows of a tool/script.

 It's not totally clear what you want to do, but it sounds like the
sort of raster operation that GRASS GIS does.

 http://grass.itc.it/

 Can you explain a bit more about your problem?

 * What are the inputs? Just a grid of values or are there some starting points?
 * What are the outputs? A list of grid cells that add up to your
accumulated value?

 I ask this because this week I wrote some code that did something
very similar, namely:

 Given a grid of resource values and a number of population centres,
compute the areas on the grid that allocate a given resource total to
each population centre by minimising the distance from each centre,
and not allowing any grid square to be allocated to more than one
centre.

 It basically grows areas out from the centres, by finding the minimum
centre-resource cell distance for unallocated cells and allocating
that cell to that centre.

 This was written in Python and used gdal to read grids. Took me a day
to write and a day to document.

 I'll have to start charging for this :)

Barry



From moliver at udel.edu  Thu Jul 31 16:24:02 2008
From: moliver at udel.edu (Matt Oliver)
Date: Thu, 31 Jul 2008 10:24:02 -0400
Subject: [R-sig-Geo] ncdf file with non-equally spaced grid
Message-ID: <6d4aad460807310724j10f9e0a2gde7c23852df69337@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080731/c3b2628e/attachment.pl>

From jaime.carrera at ipicyt.edu.mx  Thu Jul 31 20:56:14 2008
From: jaime.carrera at ipicyt.edu.mx (Jaime Carrera)
Date: Thu, 31 Jul 2008 13:56:14 -0500
Subject: [R-sig-Geo] specifying different colors for vector map as background
Message-ID: <48920ACE.3040508@ipicyt.edu.mx>

Hi,
I'm trying to create a spplot with a vector map on the background. It 
works fine if I don't want the polygon map to be filled, but what I do 
want to is to have the polygons filled with different colors. The 
following command plots the polygon map fine, filling each polygon with 
its respective color:

plot(avi,axes=FALSE,lty=0,col=rgb(avi$r/255,avi$g/255,avi$b/255))

Now I try to do this on ssplot, but it doesn't work, as all polygons are 
filled with the first color found:

basemap<-list("sp.polygons",avi,fill=rgb(avi$r/255,avi$g/255,avi$b/255),lty=1)
spplot(wells2001sp,c("May","Jun"),as.table=TRUE,sp.layout=list(basemap))

Is there a way around it?

Thanks,

Jaime



From Roger.Bivand at nhh.no  Thu Jul 31 22:17:12 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 31 Jul 2008 22:17:12 +0200 (CEST)
Subject: [R-sig-Geo] specifying different colors for vector map as
 background
In-Reply-To: <48920ACE.3040508@ipicyt.edu.mx>
References: <48920ACE.3040508@ipicyt.edu.mx>
Message-ID: <Pine.LNX.4.64.0807312123040.28744@reclus.nhh.no>

On Thu, 31 Jul 2008, Jaime Carrera wrote:

> Hi,
> I'm trying to create a spplot with a vector map on the background. It works 
> fine if I don't want the polygon map to be filled, but what I do want to is 
> to have the polygons filled with different colors. The following command 
> plots the polygon map fine, filling each polygon with its respective color:
>
> plot(avi,axes=FALSE,lty=0,col=rgb(avi$r/255,avi$g/255,avi$b/255))
>
> Now I try to do this on ssplot, but it doesn't work, as all polygons are 
> filled with the first color found:
>
> basemap<-list("sp.polygons",avi,fill=rgb(avi$r/255,avi$g/255,avi$b/255),lty=1)
> spplot(wells2001sp,c("May","Jun"),as.table=TRUE,sp.layout=list(basemap))
>
> Is there a way around it?

Not for spplot in the current code. The fill= argument in "sp.polygons" is 
passed through to the internal function sp.polygon3 without being indexed, 
so grid.polygon gets given the whole fill vector each time, and takes the 
first value. We can try to add the functionality at some time in the 
future - or others could help - type sp.polygons at the prompt to see the 
code. fill= is being passed in the ... arguments, and needs to be 
conditioned on, and fill=fill[i] passed to sp.polygon3.

The sp code is on the r-spatial sourceforge site - patches welcome!

Roger

PS: This is a first cut:

sp.polygons = function(obj, col = 1, fill="transparent", ...) {
 	sp.polygon3 = function(x, col, fill, ...) {
 		cc = slot(x, "coords")
 		grid.polygon(cc[,1], cc[,2], default.units = "native",
 			gp = gpar(col = col, fill = fill, ...))
 		panel.lines(cc, col = col, ...)
 	}
 	if (is.character(obj))
 		obj = get(obj)
 	if (!is(obj, "SpatialPolygons"))
 		stop(paste("object extending class SpatialPolygons",
 		    "expected; got class", class(obj)))
 	else
 		obj = as(obj, "SpatialPolygons")
 	pls = slot(obj, "polygons")
    	pO <- slot(obj, "plotOrder")
 	if (length(fill) != length(pO)) fill <- rep(fill[1], length(pO))
    	for (i in pO) {
    		Srs <- slot(pls[[i]], "Polygons")
    		pOi <- slot(pls[[i]], "plotOrder")
    		for (j in pOi)
 		    sp.polygon3(Srs[[j]], col = col, fill = fill[i], ...)
 	}
}




>
> Thanks,
>
> Jaime
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From mdsumner at utas.edu.au  Thu Jul 31 23:03:47 2008
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Fri, 01 Aug 2008 07:03:47 +1000
Subject: [R-sig-Geo] ncdf file with non-equally spaced grid
In-Reply-To: <6d4aad460807310724j10f9e0a2gde7c23852df69337@mail.gmail.com>
References: <6d4aad460807310724j10f9e0a2gde7c23852df69337@mail.gmail.com>
Message-ID: <489228B3.7020707@utas.edu.au>

You can use gdalwarp in FWTools to re-grid the data with control points 
(perhaps with with some effort), but as you say that will interpolate to 
a regular grid.

Is it definitely dlon that increases? Can you post a link to an example 
file?

Some netCDF files I've seen are actually using Mercator, but store the 
pixel coordinates as lon/lat.

There are totally irregular grids as well though, so as a raster you 
would have to resample it in some way. Otherwise you can interpret the 
data as a SpatialPointsDataFrame and use it as you would in Matlab. Note 
that the image() function will handle irregular (but xy locked) grid 
spacings, so you can jig a function to plot these things as an image 
pretty easily.

Cheers, Mike.

 Matt Oliver wrote:
> Hi All, I have CF compliant ncdf files of sea surface temperature. The lon,
> lat grid is known but not equally spaced (ie dlon increases). Is there a
> clean way to get this matrix ported over to a geo-tiff or some other file
> that Arc will read? I have talked with some arc users that tell me that the
> grid needs to be equally spaced. I guess I could interpolate to an equally
> spaced grid, but I would rather preserve the original grid if possible.
>
> Thanks in advance
>
> Matt
>
>
>



From moliver at udel.edu  Thu Jul 31 23:31:49 2008
From: moliver at udel.edu (Matt Oliver)
Date: Thu, 31 Jul 2008 17:31:49 -0400
Subject: [R-sig-Geo] ncdf file with non-equally spaced grid
In-Reply-To: <489228B3.7020707@utas.edu.au>
References: <6d4aad460807310724j10f9e0a2gde7c23852df69337@mail.gmail.com>
	<489228B3.7020707@utas.edu.au>
Message-ID: <6d4aad460807311431g777882f7lccb58849a6582ea4@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20080731/37ef8b6f/attachment.pl>

