From l.cattarino at uq.edu.au  Wed Feb  1 00:38:34 2012
From: l.cattarino at uq.edu.au (Lorenzo Cattarino)
Date: Wed, 1 Feb 2012 09:38:34 +1000
Subject: [R-sig-Geo] finding distance from a patch
Message-ID: <2869E75AAA158C4E936333A119467ADD27331271BE@UQEXMB06.soe.uq.edu.au>

Hi,

I obtained the patches (i.e., clusters of connected cells - queen's case) from a raster object. What I am trying to do is to calculate the euclidean distance between (the border of) a patch and a cell in the raster (outside the patch). What I am looking for is the minimum euclidean distance between the cell outside the patch and the patch. 

I would like to find the coordinates of the points of each patch to calculate the distance between each of those points and the cell of interest. Then I will choose the smallest value. 

require(raster)
landscape <- matrix (sample(c(1,0), 100, T), 10) 
w <- raster(landscape)
#plot(w)
patches <- clump(w)   
#windows()
#plot(patches)

Is there a function that might help doing that?

thanks 
Lorenzo

From Adrian.Baddeley at csiro.au  Wed Feb  1 03:27:20 2012
From: Adrian.Baddeley at csiro.au (Adrian.Baddeley at csiro.au)
Date: Wed, 1 Feb 2012 10:27:20 +0800
Subject: [R-sig-Geo]  finding coordinates of points on a dilation contour
Message-ID: <57DC18C299094D4299F837570C5DF1C558BC9A78C3@EXWA-MBX01.nexus.csiro.au>

Lorenzo Cattarino <l.cattarino at uq.edu.au> writes:

 > I have a set of coordinates representing a shape (i.e. a square). I would like to perform an Euclidean dilation operation,
 >  i.e., find all the point that lie at a distance r from the shape contour. I tried with the dilation function in the "spatstat" package 
 > but I could not get the coordinates of the points forming the dilated contour, nor the number of those points.

Use the function 'vertices'. You need to ensure that gpclib is enabled. For example:

library(spatstat)
spatstat.options(gpclib=TRUE)
w <- square(1) # or whatever your shape is
r <- 0.1             # Dilation distance
z <- dilation(w, r)
v <- vertices(z)

------
Adrian Baddeley

From Roger.Bivand at nhh.no  Wed Feb  1 10:14:43 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 1 Feb 2012 10:14:43 +0100 (CET)
Subject: [R-sig-Geo] Building Windows binary of rgdal package to include
 PGeo driver for reading ESRI personal geodatabases.
In-Reply-To: <52151386A57A5046BD5FD6CC131EF644010382B2@Postamt2.des.ucdavis.edu>
References: <52151386A57A5046BD5FD6CC131EF644010382B2@Postamt2.des.ucdavis.edu>
Message-ID: <alpine.LRH.2.02.1202010954320.11633@reclus.nhh.no>

On Tue, 31 Jan 2012, Obrien, Josh wrote:

> I am a long-time R user, currently working with a team of ArcGIS users. 
> The GIS guys would like to be able pass me data in the form of ESRI 
> personal geodatabases (*.mdb), but the OGR driver that reads such files 
> (PGeo) is not included in the Windows rgdal binary.
>
> Roger Bivand's 2008 book (p 111) and the "README.windows" file located 
> in rgdal's main directory both have the same advice for me. They tell me 
> that "the R Windows binary rgdal package can be built against an FWTools 
> binary, using VC++."

Josh,

Could you please try to install R-devel for Windows:

http://cran.r-project.org/bin/windows/base/rdevel.html

and install the CRAN binary of rgdal? Prof. Brian Ripley and Uwe Ligges 
have been continuing their excellent support for us and the whole 
community, and as part of build train enhancements for forthcoming 2.15 on 
Windows, have built GDAL with more dependencies, including ODBC. For me on 
R-devel, ogrDrivers() now shows:

23   MapInfo File  TRUE
24         Memory  TRUE
25   MSSQLSpatial  TRUE
26           ODBC  TRUE
27        OpenAir FALSE
28         PCIDSK  TRUE
29            PDS FALSE
30         PGDump  TRUE
31           PGeo FALSE

where FALSE means that the driver cannot write Pgeo files. It would be 
helpful if you could try it out, which may well mean finding out how to 
declare the Pgeo data source through ODBC or some such.

If you can find out how to use the driver, it may be simpler to go with 
2.15 as Devel will become, most likely in April 2012, than try to build 
using FWTools or OSGeo4W.

Hope this helps,

Roger

>
> My questions are these:
>
> 1) What does it mean to "build against" an FWTools binary? I have installed FWTools on my machine, so is the only  additional requirement that I add the path to it (presumably something like "C:\Program Files\FWTools2.4.7\bin") to my Windows PATH environment variable? Do I need to give the compiler other directions to the DLLs it'll be looking to link in?
>
> 2) Do I really need to use VC++, or is there a way to do the compilation with gcc? If anyone here has done that, do you have any advice about particular flags I'll need? Otherwise, will I likely need to go buy some version of VC++?
>
> 3) Or is there some easier solution that I'm missing? Because we're packaging this up for use by others, I'd prefer not to have to do any of the conversions by hand using the FWTools binary, and the ArcGIS folks would strongly prefer not to pass me info in shapefiles, so those two are right now options of last resort.
>
> Thank you,
>
> Josh O'Brien
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From edzer.pebesma at uni-muenster.de  Wed Feb  1 11:20:51 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 01 Feb 2012 11:20:51 +0100
Subject: [R-sig-Geo] changes to SpatialGrid in sp_0.9-94
Message-ID: <4F291203.6000404@uni-muenster.de>

Dear r-sig-geo-ers,

sp 0.9-94 has been released and will propagate through the CRAN networks.

The class hierarchy in sp has been slightly modified in the upcoming sp
version. In particular, SpatialGrid no longer "is" SpatialPixels, and
the same is true for objects of class SpatialGridDataFrame.

The binary representation also changed, as obsolete slots (coords,
grid.index) could be removed. It seems that saved R data bases will
still work with the new sp versions, as only slots disappeared. The
reverse is not true (saved 0.9-94 objects will create errors when run
with sp 0.9-93).

The main reason for this change is a strong performance improvement when
large images are read (e.g. by rgdal::readGDAL) into
SpatialGridDataFrame objects.

This change may affect the working of scripts that depend on the old sp
behaviour. If so, an explicit coercion of a SpatialGridDataFrame object
x needs to be added, as in:

x = as(x, "SpatialPixelsDataFrame")

or, equivalently:

fullgrid(x) = FALSE

before you pass on the object to the routine that assumes x to be a
SpatialPixels. And there may be other issues that I missed, of course.

sp version up to 0.9-93 had:

> library(sp)
> data(meuse.grid)
> gridded(meuse.grid)=~x+y
> fullgrid(meuse.grid)=TRUE
> is(meuse.grid)
[1] "SpatialGridDataFrame" "SpatialGrid"        "SpatialPixels"
[4] "SpatialPoints"        "Spatial"
> slotNames(meuse.grid)
[1] "data"        "coords"      "grid"     "grid.index"  "bbox"
[6] "proj4string"

from 0.9-94 on:

> library(sp)
> data(meuse.grid)
> gridded(meuse.grid)=~x+y
> fullgrid(meuse.grid)=TRUE
> is(meuse.grid)
[1] "SpatialGridDataFrame" "SpatialGrid"         "Spatial"
> slotNames(meuse.grid)
[1] "data"        "grid"        "bbox"        "proj4string"

In case of questions, please ask, on- or off-list.
-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From JRadinger at gmx.at  Wed Feb  1 11:33:55 2012
From: JRadinger at gmx.at (Johannes Radinger)
Date: Wed, 1 Feb 2012 11:33:55 +0100
Subject: [R-sig-Geo] transform spatial points into data.frame
Message-ID: <3C1580A1-9A52-4B01-96FE-010AA6E2380B@gmx.at>

Hello,

probably this is a very simple task:

How can I transform spatial points (assigned coordinates with rgdal)  
into a ordinary data.frame
where the first column is name of the point and the second and third  
columns are
X and Y?

/johannes


From edzer.pebesma at uni-muenster.de  Wed Feb  1 11:38:40 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 01 Feb 2012 11:38:40 +0100
Subject: [R-sig-Geo] transform spatial points into data.frame
In-Reply-To: <3C1580A1-9A52-4B01-96FE-010AA6E2380B@gmx.at>
References: <3C1580A1-9A52-4B01-96FE-010AA6E2380B@gmx.at>
Message-ID: <4F291630.8080804@uni-muenster.de>

did you try

as.data.frame(x)

?

On 02/01/2012 11:33 AM, Johannes Radinger wrote:
> Hello,
> 
> probably this is a very simple task:
> 
> How can I transform spatial points (assigned coordinates with rgdal)
> into a ordinary data.frame
> where the first column is name of the point and the second and third
> columns are
> X and Y?
> 
> /johannes
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From pgalpern at gmail.com  Wed Feb  1 13:51:59 2012
From: pgalpern at gmail.com (pgalpern)
Date: Wed, 01 Feb 2012 06:51:59 -0600
Subject: [R-sig-Geo] finding distance from a patch
In-Reply-To: <2869E75AAA158C4E936333A119467ADD27331271BE@UQEXMB06.soe.uq.edu.au>
References: <2869E75AAA158C4E936333A119467ADD27331271BE@UQEXMB06.soe.uq.edu.au>
Message-ID: <4F29356F.3080309@gmail.com>

I have not found a function in an existing package that will do this 
exactly, although there may be one.  However, here is an approach that 
will find the minimum distance from a point to a class based on 
functions in the raster package.  Note that this uses the grid distance 
and not the Euclidean distance for efficiency.  (Also, has not been 
thoroughly tested.)

DistancePointToClass <- function(classRaster, pointXY, focalClass) {
     rasterPointXY <- classRaster
     rasterPointXY[] <- NA
      rasterPointXY[cellFromXY(classRaster, pointXY)] <- 1
      distanceFrom <- gridDistance(rasterPointXY, origin = 1)
      minDistance <- min(distanceFrom[classRaster[] == focalClass])
      return(minDistance)
  }

The classRaster parameter can be your patches object.  If you need the 
minimum distance to any patch you can set all the patches to the same 
focalClass:

patches[!is.na(patches)] <- 1

Or if you need minimum distances to each patch, you can iterate through 
all the classes on patches using the focalClass parameter, although this 
will be very inefficient on large rasters.

You can find examples of usage of this function in this tutorial:  
http://nricaribou.cc.umanitoba.ca/R/RWorkshop3.pdf

-- 
Paul Galpern, PhD Candidate
Natural Resources Institute
70 Dysart Road
University of Manitoba
Winnipeg, Manitoba, Canada R3T 2M6
http://borealscape.ca



On 31/01/2012 5:38 PM, Lorenzo Cattarino wrote:
> Hi,
>
> I obtained the patches (i.e., clusters of connected cells - queen's case) from a raster object. What I am trying to do is to calculate the euclidean distance between (the border of) a patch and a cell in the raster (outside the patch). What I am looking for is the minimum euclidean distance between the cell outside the patch and the patch.
>
> I would like to find the coordinates of the points of each patch to calculate the distance between each of those points and the cell of interest. Then I will choose the smallest value.
>
> require(raster)
> landscape<- matrix (sample(c(1,0), 100, T), 10)
> w<- raster(landscape)
> #plot(w)
> patches<- clump(w)
> #windows()
> #plot(patches)
>
> Is there a function that might help doing that?
>
> thanks
> Lorenzo
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From katakagi at bu.edu  Wed Feb  1 14:45:56 2012
From: katakagi at bu.edu (Ken)
Date: Wed, 1 Feb 2012 13:45:56 +0000
Subject: [R-sig-Geo] transform spatial points into data.frame
References: <3C1580A1-9A52-4B01-96FE-010AA6E2380B@gmx.at>
Message-ID: <loom.20120201T143629-114@post.gmane.org>

Johannes Radinger <JRadinger <at> gmx.at> writes:

> 
> Hello,
> 
> probably this is a very simple task:
> 
> How can I transform spatial points (assigned 
coordinates with rgdal)  
> into a ordinary data.frame
> where the first column is name of the point and the 
second and third  
> columns are
> X and Y?
> 
> /johannes
>
Hi Johannes,

if it is a S3 or S4 object, you can try using the @ symbol:
sp.df = myspatialpts at data

where myspatialpts is the object containing your spatial 
points.

HTH,
Ken


From diegoandre at caen.ufc.br  Wed Feb  1 17:46:28 2012
From: diegoandre at caen.ufc.br (Diego Andre)
Date: Wed, 1 Feb 2012 13:46:28 -0300
Subject: [R-sig-Geo] Spatial tobit
Message-ID: <CAJgw8vDR5rAHZSK=ZvKLnE51eqDXPHn+niyfCKu5o3UXracizw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120201/9a3f4f9c/attachment.pl>

From r.hijmans at gmail.com  Wed Feb  1 18:18:18 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 1 Feb 2012 09:18:18 -0800
Subject: [R-sig-Geo] finding distance from a patch
In-Reply-To: <4F29356F.3080309@gmail.com>
References: <2869E75AAA158C4E936333A119467ADD27331271BE@UQEXMB06.soe.uq.edu.au>
	<4F29356F.3080309@gmail.com>
Message-ID: <CANtt_hzN=47dAPv+x+op+ZVm=WxmC+bJ-rTvmHypejycVCb_vA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120201/b76c86e0/attachment.pl>

From JObrien at ucdavis.edu  Wed Feb  1 21:04:08 2012
From: JObrien at ucdavis.edu (Obrien, Josh)
Date: Wed, 1 Feb 2012 12:04:08 -0800
Subject: [R-sig-Geo] Building Windows binary of rgdal package to include
	PGeo driver for reading ESRI personal geodatabases.
References: <52151386A57A5046BD5FD6CC131EF644010382B2@Postamt2.des.ucdavis.edu>
	<alpine.LRH.2.02.1202010954320.11633@reclus.nhh.no>
Message-ID: <52151386A57A5046BD5FD6CC131EF644010382B4@Postamt2.des.ucdavis.edu>

 
>> On Tue, 31 Jan 2012, Obrien, Josh wrote:

>> I am a long-time R user, currently working with a team of ArcGIS users. 
>> The GIS guys would like to be able pass me data in the form of ESRI 
>> personal geodatabases (*.mdb), but the OGR driver that reads such files 
>> (PGeo) is not included in the Windows rgdal binary.
>>
>> Roger Bivand's 2008 book (p 111) and the "README.windows" file located 
>> in rgdal's main directory both have the same advice for me. They tell me 
>> that "the R Windows binary rgdal package can be built against an FWTools 
>> binary, using VC++."

> Josh,
> 
> Could you please try to install R-devel for Windows:
> 
> http://cran.r-project.org/bin/windows/base/rdevel.html
> 
> and install the CRAN binary of rgdal? Prof. Brian Ripley and Uwe Ligges 
> have been continuing their excellent support for us and the whole 
> community, and as part of build train enhancements for forthcoming 2.15 on 
> Windows, have built GDAL with more dependencies, including ODBC. For me on 
> R-devel, ogrDrivers() now shows:
> 
> 23   MapInfo File  TRUE
> 24         Memory  TRUE
> 25   MSSQLSpatial  TRUE
> 26           ODBC  TRUE
> 27        OpenAir FALSE
> 28         PCIDSK  TRUE
> 29            PDS FALSE
> 30         PGDump  TRUE
> 31           PGeo FALSE
> 
> where FALSE means that the driver cannot write Pgeo files. It would be 
> helpful if you could try it out, which may well mean finding out how to 
> declare the Pgeo data source through ODBC or some such.
> 
> If you can find out how to use the driver, it may be simpler to go with 
> 2.15 as Devel will become, most likely in April 2012, than try to build 
> using FWTools or OSGeo4W.
> 
> Hope this helps,
> 
> Roger

Dear Professor Bivand,

That's phenomenally helpful. 

For the record, after installing R-devel (soon to be R-2.15.0) from http://cran.r-project.org/bin/windows/base/rdevel.html, the following steps were the only ones needed to read data from an ESRI personal geodatabase into an R SpatialPointsDataFrame. (The table to be read is named "TelemetryPoints", and is stored in the personal geodatabase at "C://temp/example.mdb"):

install.packages("rgdal") 
library(rgdal)
ogrDrivers()      # Confirming that the PGeo driver was indeed installed
SPDF <- readOGR("C://temp/example.mdb", "Telemetry points") 

Thanks so much for your help,

Josh O'Brien

P.S. Not sure I yet have the hang of properly quoting the context from previous emails in the thread.


From xuanlong.ma at uts.edu.au  Thu Feb  2 02:03:10 2012
From: xuanlong.ma at uts.edu.au (Richard Ma)
Date: Wed, 1 Feb 2012 17:03:10 -0800 (PST)
Subject: [R-sig-Geo] Problem when export raster to KML
Message-ID: <1328144590489-7245302.post@n2.nabble.com>

Hi all,

Below is the information of my raster file:

> r.tmp
class       : RasterLayer 
dimensions  : 220, 200, 44000  (nrow, ncol, ncell)
resolution  : 0.05, 0.05  (x, y)
extent      : 128, 138, -23, -12  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=lonlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0 
values      : in memory
min value   : 5.079816e-05 
max value   : 0.9999755 

however, when I want to use KML function (raster package) to export this
raster to KML, I got an error.

> KML(r.tmp, file = 'r_tmp.kml')
Error in .local(x, ...) : CRS of x must be longitude / latitude

Does this means I need to reproject my raster file to longitude/latitude
coordinates system? How to do that?


-----
Richard Ma
PhD student, Ecology & Remote Sensing
Climate Change Cluster, Department of Environment Science
University of Technology, Sydney
http://everydropr.wordpress.com
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Problem-when-export-raster-to-KML-tp7245302p7245302.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From r.hijmans at gmail.com  Thu Feb  2 02:51:03 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 1 Feb 2012 17:51:03 -0800
Subject: [R-sig-Geo] Problem when export raster to KML
In-Reply-To: <1328144590489-7245302.post@n2.nabble.com>
References: <1328144590489-7245302.post@n2.nabble.com>
Message-ID: <CANtt_hzvx++Uk9D09=yH0s_oM9LWUxfG4GK=+tp58H93512BmQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120201/a9068924/attachment.pl>

From apcar at deakin.edu.au  Thu Feb  2 06:13:07 2012
From: apcar at deakin.edu.au (ADAM PETER CARDILINI)
Date: Thu, 2 Feb 2012 05:13:07 +0000
Subject: [R-sig-Geo] Identifying the cell that points are associated with?
Message-ID: <11DC569BD7493645998AD27DA1F01E27372BD6AA@mbox-b-2.du.deakin.edu.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120202/b421c950/attachment.pl>

From tom.gottfried at tum.de  Thu Feb  2 06:34:57 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Thu, 02 Feb 2012 06:34:57 +0100
Subject: [R-sig-Geo] Identifying the cell that points are associated
	with?
In-Reply-To: <11DC569BD7493645998AD27DA1F01E27372BD6AA@mbox-b-2.du.deakin.edu.au>
References: <11DC569BD7493645998AD27DA1F01E27372BD6AA@mbox-b-2.du.deakin.edu.au>
Message-ID: <4F2A2081.3010001@tum.de>

Have a look at ?sp::over

regards,
Tom

Am 02.02.2012 06:13, schrieb ADAM PETER CARDILINI:
> G'day All,
>
>
>
> I have been struggling to figure out an answer to this question and wasn't sure where else to ask, so here goes. I have a large amount of presence/absence point data (~125,000) with lon/lat coordinates. Like this:
>
> Lat                          lon                          abs/pres              date
>
> 113.6481              -24.90278             0                              1/1/1998
>
> 113.6481              -24.90278             1                              1/2/1998
>
> 113.6481              -24.90278             0                              1/3/1998
>
> 137.5175              -35.69556             1                              1/1/1998
>
> 137.5175              -35.69556             1                              1/2/1998
>
> 137.5175              -35.69556             1                              1/3/1998
>
>
>
> I have been trying to work out a way to identify the cells that each point would fall into if it were mapped onto a raster grid (I am using rasters with the same cell resolution as BIOCLIM rasters). That is, for all points falling within the same cell, I would like to identify them as being a part of the same cell. I am trying to model site occupancy for this species from repeated survey data, using the package 'unmarked', which requires records to be associated with sites. I don't have site IDs with this data so I need to come up with a proxy for this. I thought I could use grid cell id as a proxy for site id, so that all records that fall within the same grid cell can be considered the same site.
>
> How do I identify the grid cell that each point falls into on a raster grid and associate it with my presence/absence data, to produce a dataset that looks like this?
>
> Lat                          lon                          abs/pres              date                       cellID
>
> 113.6481              -24.90278             0                              1/1/1998              234
>
> 113.6481              -24.90278             1                              1/2/1998              234
>
> 113.6481              -24.90278             0                              1/3/1998              234
>
> 137.5175              -35.69556             1                              1/1/1998              250
>
> 137.5175              -35.69556             1                              1/2/1998              250
>
> 137.5175              -35.69556             1                              1/3/1998              250
>
>
>
> Thanks for your help in advance.
>
>
>
> Kind regards,
>
> Adam Cardilini
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From m.hewson at uq.edu.au  Thu Feb  2 07:55:23 2012
From: m.hewson at uq.edu.au (Michael Hewson)
Date: Thu, 2 Feb 2012 16:55:23 +1000
Subject: [R-sig-Geo] gstats cross-correlograms
Message-ID: <9A1DEDF79496F54D9D5014BD785AA8D847BB92C063@UQEXMB08.soe.uq.edu.au>

G'day list,

I can get cross-variograms using gstat for variables in an atmospheric data set.

Am I right to understand that gstat does not have a cross-correlogram function?

My thanks

________________________________________________________
Michael Hewson PhD candidate
Climate Research Group<http://www.gpem.uq.edu.au/crg> | Centre for Spatial Environmental Research<http://www.gpem.uq.edu.au/cser>
The University of Queensland | Brisbane Q 4072 | Australia
m.hewson at uq.edu.au | +61 (0)408 379 373

[cid:image001.jpg at 01CCE1CB.7498E690]


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120202/07818d97/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 8446 bytes
Desc: image001.jpg
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120202/07818d97/attachment.jpg>

From edzer.pebesma at uni-muenster.de  Thu Feb  2 10:18:39 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 02 Feb 2012 10:18:39 +0100
Subject: [R-sig-Geo] gstats cross-correlograms
In-Reply-To: <9A1DEDF79496F54D9D5014BD785AA8D847BB92C063@UQEXMB08.soe.uq.edu.au>
References: <9A1DEDF79496F54D9D5014BD785AA8D847BB92C063@UQEXMB08.soe.uq.edu.au>
Message-ID: <4F2A54EF.6010402@uni-muenster.de>



On 02/02/2012 07:55 AM, Michael Hewson wrote:
> Am I right to understand that gstat does not have a cross-correlogram
> function?
> 
yes.
-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From jpeterb at essex.ac.uk  Thu Feb  2 11:14:18 2012
From: jpeterb at essex.ac.uk (Jakob Petersen)
Date: Thu, 02 Feb 2012 10:14:18 +0000
Subject: [R-sig-Geo] transform xy grid references
Message-ID: <4F2A61FA.9080509@essex.ac.uk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120202/534ada43/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Thu Feb  2 12:49:22 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Thu, 2 Feb 2012 11:49:22 +0000
Subject: [R-sig-Geo] transform xy grid references
In-Reply-To: <4F2A61FA.9080509@essex.ac.uk>
References: <4F2A61FA.9080509@essex.ac.uk>
Message-ID: <CANVKczP2NQuxoXKiZS9bAk9cYHX=s23WQSCaCCkZUotBQo5-eQ@mail.gmail.com>

On Thu, Feb 2, 2012 at 10:14 AM, Jakob Petersen <jpeterb at essex.ac.uk> wrote:
> I have a dataset like this
>
> Id,x,y,grid
>
> 1,2,3,a
>
> 2,5,7,b
>
> And would like to transform the xy from grid b to grid a, like this:
>
> Id,x,y,grid,xa,ya
>
> 1,2,3,a,2,3
>
> 2,5,7,b,17,21
>
> Any suggestions? Many thanks,Jakob
>

 I've stared at this for ten minutes and my suggestion is that you
tell us where the 17 and 21 come from. Is there some formula you've
neglected to tell us?

Barry


From JRadinger at gmx.at  Thu Feb  2 12:51:09 2012
From: JRadinger at gmx.at (Johannes Radinger)
Date: Thu, 02 Feb 2012 12:51:09 +0100
Subject: [R-sig-Geo] subset of spatial points
Message-ID: <20120202115109.168060@gmx.net>

Hello,

I tried to subset a spatial points dataframe with:
subset(df,Attr == i)
but then I get the error:
"Fehler in subset.SpatialPointsDataFrame(df, Attr == i) : 
  Objekt 'Attr' nicht gefunden"

so it the object 'Attr' couldn't be found. There is definetly
a column called 'Attr' in the spatialpointsdataframe. This is also
proofed when I transform my spatial points into a ordinary dataframe before everything works (there is the column 'Attr'):
df <- as.data.frame(df)


It gets strange now:
when I tried to make a short sample script... everything
works, so I don't know why the 'Attr' couldn't be found in 
my script although it exists...??

library(rgdal)

X <- c(9.3182,9.31609,9.29932, 9.14613, 9.32783)
Y <- c(54.6461, 54.439, 54.4786, 54.6561, 54.5668)
Attr <- factor(c("A","A","B","C","C"))

df <- data.frame(X,Y,Attr)
coordinates(df) <- c("X", "Y")
proj4string(df) <- CRS("+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0")

select.Attr<- names(table(df$Attr)[table(df$Attr)>1])

for(i in select.Attr){
	X <- subset(df,Attr == i)
	print(X)
	}

Any suggestions?

best regards,
/johannes
--


From katakagi at bu.edu  Thu Feb  2 14:48:25 2012
From: katakagi at bu.edu (Ken)
Date: Thu, 2 Feb 2012 13:48:25 +0000
Subject: [R-sig-Geo] subset of spatial points
References: <20120202115109.168060@gmx.net>
Message-ID: <loom.20120202T142915-836@post.gmane.org>



Johannes Radinger <JRadinger <at> 
gmx.at> writes:

> 
> Hello,
> 
> I tried to subset a spatial points 
dataframe with:
> subset(df,Attr == i)
> but then I get the error:
> "Fehler in 
subset.SpatialPointsDataFrame(df, Attr == 
i) : 
>   Objekt 'Attr' nicht gefunden"
> 
> so it the object 'Attr' couldn't be found. 
There is definetly
> a column called 'Attr' in the 
spatialpointsdataframe. This is also
> proofed when I transform my spatial 
points into a ordinary dataframe before 
everything works (there is the
> column 'Attr'):
> df <- as.data.frame(df)
> 
> It gets strange now:
> when I tried to make a short sample 
script... everything
> works, so I don't know why the 'Attr' 
couldn't be found in 
> my script although it exists...??
> 
> library(rgdal)
> 
> X <- c(9.3182,9.31609,9.29932, 9.14613, 
9.32783)
> Y <- c(54.6461, 54.439, 54.4786, 
54.6561, 54.5668)
> Attr <- factor(c("A","A","B","C","C"))
> 
> df <- data.frame(X,Y,Attr)
> coordinates(df) <- c("X", "Y")
> proj4string(df) <- CRS("+proj=longlat 
+datum=WGS84 +ellps=WGS84 
+towgs84=0,0,0")
> 
> select.Attr<- 
names(table(df$Attr)[table(df$Attr)>1])
> 
> for(i in select.Attr){
> 	X <- subset(df,Attr == i)
> 	print(X)
> 	}
> 
> Any suggestions?
> 
> best regards,
> /johannees

Johannes,
 if spdf is a spatial points data frame, you 
can try:

spdf.subset = spdf[spdf$Attr == i, ]

HTH,
ken


From tom.gottfried at tum.de  Thu Feb  2 15:24:30 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Thu, 02 Feb 2012 15:24:30 +0100
Subject: [R-sig-Geo] subset of spatial points
In-Reply-To: <20120202115109.168060@gmx.net>
References: <20120202115109.168060@gmx.net>
Message-ID: <4F2A9C9E.4070705@tum.de>

As a workaround you could do

subset(df,df$Attr == i)

or what Ken suggested.

regards,
Tom

Am 02.02.2012 12:51, schrieb Johannes Radinger:
> Hello,
>
> I tried to subset a spatial points dataframe with:
> subset(df,Attr == i)
> but then I get the error:
> "Fehler in subset.SpatialPointsDataFrame(df, Attr == i) :
>    Objekt 'Attr' nicht gefunden"
>
> so it the object 'Attr' couldn't be found. There is definetly
> a column called 'Attr' in the spatialpointsdataframe. This is also
> proofed when I transform my spatial points into a ordinary dataframe before everything works (there is the column 'Attr'):
> df<- as.data.frame(df)
>
>
> It gets strange now:
> when I tried to make a short sample script... everything
> works, so I don't know why the 'Attr' couldn't be found in
> my script although it exists...??
>
> library(rgdal)
>
> X<- c(9.3182,9.31609,9.29932, 9.14613, 9.32783)
> Y<- c(54.6461, 54.439, 54.4786, 54.6561, 54.5668)
> Attr<- factor(c("A","A","B","C","C"))
>
> df<- data.frame(X,Y,Attr)
> coordinates(df)<- c("X", "Y")
> proj4string(df)<- CRS("+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0")
>
> select.Attr<- names(table(df$Attr)[table(df$Attr)>1])
>
> for(i in select.Attr){
> 	X<- subset(df,Attr == i)
> 	print(X)
> 	}
>
> Any suggestions?
>
> best regards,
> /johannes
> --
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From lyndon.estes at gmail.com  Thu Feb  2 15:50:46 2012
From: lyndon.estes at gmail.com (Lyndon Estes)
Date: Thu, 2 Feb 2012 09:50:46 -0500
Subject: [R-sig-Geo] Identifying the cell that points are associated
	with?
In-Reply-To: <11DC569BD7493645998AD27DA1F01E27372BD6AA@mbox-b-2.du.deakin.edu.au>
References: <11DC569BD7493645998AD27DA1F01E27372BD6AA@mbox-b-2.du.deakin.edu.au>
Message-ID: <CALuVVaYAEK2=GET2RDNi=k_oSTwkOmH5SLER90bVjE1obi9WhQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120202/c2a6a647/attachment.pl>

From JRadinger at gmx.at  Thu Feb  2 17:09:16 2012
From: JRadinger at gmx.at (Johannes Radinger)
Date: Thu, 02 Feb 2012 17:09:16 +0100
Subject: [R-sig-Geo] subset of spatial points
Message-ID: <20120202160916.92610@gmx.net>

Hello,

I tried to follow your and Ken's suggestions but I still fail and
I can't find the source for the problem. 

I attached the script and the data (path to load the data in the script
must be changed). Maybe there is just a small mistake
in the script but I tried to find the problem now for
some hours but can't find  it... Maybe someone of you
has some hints and you can help me please.

best regards,
Johannes


-------- Original-Nachricht --------
> Datum: Thu, 02 Feb 2012 15:24:30 +0100
> Von: Tom Gottfried <tom.gottfried at tum.de>
> An: r-sig-geo at r-project.org
> Betreff: Re: [R-sig-Geo] subset of spatial points

> As a workaround you could do
> 
> subset(df,df$Attr == i)
> 
> or what Ken suggested.
> 
> regards,
> Tom
> 
> Am 02.02.2012 12:51, schrieb Johannes Radinger:
> > Hello,
> >
> > I tried to subset a spatial points dataframe with:
> > subset(df,Attr == i)
> > but then I get the error:
> > "Fehler in subset.SpatialPointsDataFrame(df, Attr == i) :
> >    Objekt 'Attr' nicht gefunden"
> >
> > so it the object 'Attr' couldn't be found. There is definetly
> > a column called 'Attr' in the spatialpointsdataframe. This is also
> > proofed when I transform my spatial points into a ordinary dataframe
> before everything works (there is the column 'Attr'):
> > df<- as.data.frame(df)
> >
> >
> > It gets strange now:
> > when I tried to make a short sample script... everything
> > works, so I don't know why the 'Attr' couldn't be found in
> > my script although it exists...??
> >
> > library(rgdal)
> >
> > X<- c(9.3182,9.31609,9.29932, 9.14613, 9.32783)
> > Y<- c(54.6461, 54.439, 54.4786, 54.6561, 54.5668)
> > Attr<- factor(c("A","A","B","C","C"))
> >
> > df<- data.frame(X,Y,Attr)
> > coordinates(df)<- c("X", "Y")
> > proj4string(df)<- CRS("+proj=longlat +datum=WGS84 +ellps=WGS84
> +towgs84=0,0,0")
> >
> > select.Attr<- names(table(df$Attr)[table(df$Attr)>1])
> >
> > for(i in select.Attr){
> > 	X<- subset(df,Attr == i)
> > 	print(X)
> > 	}
> >
> > Any suggestions?
> >
> > best regards,
> > /johannes
> > --
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> -- 
> Technische Universit?t M?nchen
> Department f?r Pflanzenwissenschaften
> Lehrstuhl f?r Gr?nlandlehre
> Alte Akademie 12
> 85350 Freising / Germany
> Phone: ++49 (0)8161 715324
> Fax:   ++49 (0)8161 713243
> email: tom.gottfried at wzw.tum.de
> http://www.wzw.tum.de/gruenland
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 


-------------- next part --------------
A non-text attachment was scrubbed...
Name: subset_test.zip
Type: application/zip
Size: 10388 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120202/d786c1a9/attachment.zip>

From tom.gottfried at tum.de  Thu Feb  2 17:52:58 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Thu, 02 Feb 2012 17:52:58 +0100
Subject: [R-sig-Geo] subset of spatial points
In-Reply-To: <20120202160916.92610@gmx.net>
References: <20120202160916.92610@gmx.net>
Message-ID: <4F2ABF6A.7020105@tum.de>

Hi Johannes,

> # joining "Coordinates" to "Species"
> df<- merge(Main,Coordinates,by="Station")
>
> #Replacing NA's with 0 for all species
> Sp <- c("A","B","C","D")
> df.sub<-df[,Sp]
> df.sub[is.na(df.sub)]<-0

I suppose you get an error here. The dimension of the index do not fit 
the dimensions of the indexed object (have a look at the manual "An 
Introduction to R" for example. It's on r-project.org). 
`df.sub[is.na(df.sub),]<-0' should work

> df[,Sp]<-df.sub
>
> # Presence points for single species
> dfm <- melt(df, measure.vars=Sp, variable_name = "Species", na.rm = FALSE)
> df_A <- subset(dfm, value > 0 , select = c(Species, X, Y))
>
> # Spatial Information, Coordinates Transform
> coordinates(df_A) <- c("X", "Y")
> proj4string(df_A) <- CRS("+init=epsg:31467")
> df_B <- spTransform(df_A, CRS("+init=epsg:4326"))
>
> # df_B <- as.data.frame(df_B)
>
> Species.names <- names(table(df_B$Species)[table(df_B$Species)>1])
>
> # Subsetting
> for(i in Species.names){
> 	X <- subset(df_B,Species == i) # 1st approach
>
> 	#X <- df_B[Species == i] # 2nd approach

Same issue as above plus what you corrected in the next line. Keep in 
mind that "[" is a function that looks for object in environments as any 
other function does (and there is no object 'Species'). From ?subset: 
"For data frames, the subset argument works on the rows. Note that 
subset will be evaluated in the data frame, so columns can be referred 
to (by name) as variables in the expression (see the examples)." That's 
what's special about subset() and which does not seem to work with the 
method for SpatialPointsDataFrame.

HTH,
Tom

>
> 	#X <- df_B[df_B$Species == i] # 3rd approach
> 	
> 	print(X)
> 	}
>
>

Am 02.02.2012 17:09, schrieb Johannes Radinger:
> Hello,
>
> I tried to follow your and Ken's suggestions but I still fail and
> I can't find the source for the problem.
>
> I attached the script and the data (path to load the data in the script
> must be changed). Maybe there is just a small mistake
> in the script but I tried to find the problem now for
> some hours but can't find  it... Maybe someone of you
> has some hints and you can help me please.
>
> best regards,
> Johannes
>
>
> -------- Original-Nachricht --------
>> Datum: Thu, 02 Feb 2012 15:24:30 +0100
>> Von: Tom Gottfried<tom.gottfried at tum.de>
>> An: r-sig-geo at r-project.org
>> Betreff: Re: [R-sig-Geo] subset of spatial points
>
>> As a workaround you could do
>>
>> subset(df,df$Attr == i)
>>
>> or what Ken suggested.
>>
>> regards,
>> Tom
>>
>> Am 02.02.2012 12:51, schrieb Johannes Radinger:
>>> Hello,
>>>
>>> I tried to subset a spatial points dataframe with:
>>> subset(df,Attr == i)
>>> but then I get the error:
>>> "Fehler in subset.SpatialPointsDataFrame(df, Attr == i) :
>>>     Objekt 'Attr' nicht gefunden"
>>>
>>> so it the object 'Attr' couldn't be found. There is definetly
>>> a column called 'Attr' in the spatialpointsdataframe. This is also
>>> proofed when I transform my spatial points into a ordinary dataframe
>> before everything works (there is the column 'Attr'):
>>> df<- as.data.frame(df)
>>>
>>>
>>> It gets strange now:
>>> when I tried to make a short sample script... everything
>>> works, so I don't know why the 'Attr' couldn't be found in
>>> my script although it exists...??
>>>
>>> library(rgdal)
>>>
>>> X<- c(9.3182,9.31609,9.29932, 9.14613, 9.32783)
>>> Y<- c(54.6461, 54.439, 54.4786, 54.6561, 54.5668)
>>> Attr<- factor(c("A","A","B","C","C"))
>>>
>>> df<- data.frame(X,Y,Attr)
>>> coordinates(df)<- c("X", "Y")
>>> proj4string(df)<- CRS("+proj=longlat +datum=WGS84 +ellps=WGS84
>> +towgs84=0,0,0")
>>>
>>> select.Attr<- names(table(df$Attr)[table(df$Attr)>1])
>>>
>>> for(i in select.Attr){
>>> 	X<- subset(df,Attr == i)
>>> 	print(X)
>>> 	}
>>>
>>> Any suggestions?
>>>
>>> best regards,
>>> /johannes
>>> --
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> --
>> Technische Universit?t M?nchen
>> Department f?r Pflanzenwissenschaften
>> Lehrstuhl f?r Gr?nlandlehre
>> Alte Akademie 12
>> 85350 Freising / Germany
>> Phone: ++49 (0)8161 715324
>> Fax:   ++49 (0)8161 713243
>> email: tom.gottfried at wzw.tum.de
>> http://www.wzw.tum.de/gruenland
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From edzer.pebesma at uni-muenster.de  Thu Feb  2 17:58:27 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 02 Feb 2012 17:58:27 +0100
Subject: [R-sig-Geo] subset of spatial points
In-Reply-To: <20120202160916.92610@gmx.net>
References: <20120202160916.92610@gmx.net>
Message-ID: <4F2AC0B3.1080806@uni-muenster.de>



On 02/02/2012 05:09 PM, Johannes Radinger wrote:
> Hello,
> 
> I tried to follow your and Ken's suggestions 

I don't think you did, as both

for(i in Species.names){
    X <- subset(df_B,df_B$Species == i) # 1st approach
    print(X)
}

and

for(i in Species.names){
    X <- df_B[df_B$Species == i,] # 2nd approach
    print(X)
}

work.


but I still fail and
> I can't find the source for the problem. 
> 
> I attached the script and the data (path to load the data in the script
> must be changed). Maybe there is just a small mistake
> in the script but I tried to find the problem now for
> some hours but can't find  it... Maybe someone of you
> has some hints and you can help me please.
> 
> best regards,
> Johannes
> 
> 
> -------- Original-Nachricht --------
>> Datum: Thu, 02 Feb 2012 15:24:30 +0100
>> Von: Tom Gottfried <tom.gottfried at tum.de>
>> An: r-sig-geo at r-project.org
>> Betreff: Re: [R-sig-Geo] subset of spatial points
> 
>> As a workaround you could do
>>
>> subset(df,df$Attr == i)
>>
>> or what Ken suggested.
>>
>> regards,
>> Tom
>>
>> Am 02.02.2012 12:51, schrieb Johannes Radinger:
>>> Hello,
>>>
>>> I tried to subset a spatial points dataframe with:
>>> subset(df,Attr == i)
>>> but then I get the error:
>>> "Fehler in subset.SpatialPointsDataFrame(df, Attr == i) :
>>>    Objekt 'Attr' nicht gefunden"
>>>
>>> so it the object 'Attr' couldn't be found. There is definetly
>>> a column called 'Attr' in the spatialpointsdataframe. This is also
>>> proofed when I transform my spatial points into a ordinary dataframe
>> before everything works (there is the column 'Attr'):
>>> df<- as.data.frame(df)
>>>
>>>
>>> It gets strange now:
>>> when I tried to make a short sample script... everything
>>> works, so I don't know why the 'Attr' couldn't be found in
>>> my script although it exists...??
>>>
>>> library(rgdal)
>>>
>>> X<- c(9.3182,9.31609,9.29932, 9.14613, 9.32783)
>>> Y<- c(54.6461, 54.439, 54.4786, 54.6561, 54.5668)
>>> Attr<- factor(c("A","A","B","C","C"))
>>>
>>> df<- data.frame(X,Y,Attr)
>>> coordinates(df)<- c("X", "Y")
>>> proj4string(df)<- CRS("+proj=longlat +datum=WGS84 +ellps=WGS84
>> +towgs84=0,0,0")
>>>
>>> select.Attr<- names(table(df$Attr)[table(df$Attr)>1])
>>>
>>> for(i in select.Attr){
>>> 	X<- subset(df,Attr == i)
>>> 	print(X)
>>> 	}
>>>
>>> Any suggestions?
>>>
>>> best regards,
>>> /johannes
>>> --
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> -- 
>> Technische Universit?t M?nchen
>> Department f?r Pflanzenwissenschaften
>> Lehrstuhl f?r Gr?nlandlehre
>> Alte Akademie 12
>> 85350 Freising / Germany
>> Phone: ++49 (0)8161 715324
>> Fax:   ++49 (0)8161 713243
>> email: tom.gottfried at wzw.tum.de
>> http://www.wzw.tum.de/gruenland
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From r.hijmans at gmail.com  Thu Feb  2 18:10:50 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 2 Feb 2012 09:10:50 -0800
Subject: [R-sig-Geo] Identifying the cell that points are associated
	with?
In-Reply-To: <11DC569BD7493645998AD27DA1F01E27372BD6AA@mbox-b-2.du.deakin.edu.au>
References: <11DC569BD7493645998AD27DA1F01E27372BD6AA@mbox-b-2.du.deakin.edu.au>
Message-ID: <CANtt_hx9q8jYDpVviDJT2JbvgSy9mN7HWKoX1GMgWxQW0eHAaA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120202/16a2338d/attachment.pl>

From kathryn.lee1 at students.mq.edu.au  Fri Feb  3 06:04:11 2012
From: kathryn.lee1 at students.mq.edu.au (kalee)
Date: Thu, 2 Feb 2012 21:04:11 -0800 (PST)
Subject: [R-sig-Geo] 3D kde output conversion to volume
In-Reply-To: <1326968936445-7203184.post@n2.nabble.com>
References: <1326968936445-7203184.post@n2.nabble.com>
Message-ID: <1328245451726-7249728.post@n2.nabble.com>

I had a reply back from the developer of the ks package to the same query I
sent him. His response was:

"I'll include this functionality in a future update in the ks library.
But in the meantime, you can compute volumes manually using these
commands, continuing the 3-d example,

ct <- contourLevels(fhat, cont=95, approx=TRUE) ## compute 95% contour level
vol.voxel <- prod(sapply(fhat$eval.points, diff)[1,]) ## volume of an
individual voxel
no.voxel <- sum(fhat$estimate>ct) ## number of voxels inside contour region
vol <- no.voxel*vol.voxel  ## approx. volume of contour region

The volume is only approximate and depends highly on the estimation
grid. These commands also for 2D density estimates (of course then the
volume is replaced by area)."

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/3D-kde-output-conversion-to-volume-tp7203184p7249728.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From karl at huftis.org  Fri Feb  3 11:05:09 2012
From: karl at huftis.org (Karl Ove Hufthammer)
Date: Fri, 3 Feb 2012 11:05:09 +0100
Subject: [R-sig-Geo] Reducing the size of the R-produced maps while
	saving
References: <CAN2xGJZMVJbpMqebYVkRXHazAgEoN-PEjKiuimM66yA1_h2h6w@mail.gmail.com>
	<alpine.LRH.2.02.1201312202250.9563@reclus.nhh.no>
Message-ID: <jggbgl$bg4$1@dough.gmane.org>

Roger Bivand wrote:

>> However, once the map is saved, I am getting a huge .emf file (e.g., 74
>> MB). Is there any way to save it in a smaller size?
> 
> If you have to use a vector output format, then you should simplify the
> input, which has extremely detailed coastlines but coarser resolution
> administrative boundaries. Maybe try gSimplify() in rgeos.

Couldn?t (part of) the problem also be that the map object contains much 
more information than what is displayed? I have experienced this when 
plotting small parts of large maps using xlim and ylim. The resulting map 
displayed on screen and saved in a vector format (e.g., PDF) would show just 
the few countries within the xlim and ylim boundaries, but the file would 
actually contain (for example) the entire Eurasia continent (this could be 
seen by opening the file in Inkscape and moving map outlines or changing the 
boundary box).

The best solution is to crop the map object before saving. Note that for 
detailed map objects, this can be a *very* slow process. And the polygons 
are actually closed, so you will see black horizontal or vertical lines in 
the margin. I guess you could could crop the map to slightly outside the 
xlim and ylim boundaries before saving it to avoid this last problem.

-- 
Karl Ove Hufthammer


From pgonzalez at ebd.csic.es  Fri Feb  3 11:55:47 2012
From: pgonzalez at ebd.csic.es (Pablo Gonzalez)
Date: Fri, 3 Feb 2012 11:55:47 +0100
Subject: [R-sig-Geo] Using Spatial Eigenvector Mapping for Negative
 Binomial GLM
In-Reply-To: <alpine.LRH.2.02.1201312152150.9563@reclus.nhh.no>
References: <CAC+kXa3CyXsA1iyQrmpAh8GQLM02v=j42O77VG7vrPD3tGZ8sg@mail.gmail.com>
	<alpine.LRH.2.02.1201312152150.9563@reclus.nhh.no>
Message-ID: <CAC+kXa0AsZLSPw0aAdKDCeBDoPmP5Kaw7UdFu+h57n3m_gg1KA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120203/95cb0a90/attachment.pl>

From Roger.Bivand at nhh.no  Fri Feb  3 20:25:43 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 3 Feb 2012 20:25:43 +0100
Subject: [R-sig-Geo] Reducing the size of the R-produced maps while
 saving
In-Reply-To: <jggbgl$bg4$1@dough.gmane.org>
References: <CAN2xGJZMVJbpMqebYVkRXHazAgEoN-PEjKiuimM66yA1_h2h6w@mail.gmail.com>
	<alpine.LRH.2.02.1201312202250.9563@reclus.nhh.no>
	<jggbgl$bg4$1@dough.gmane.org>
Message-ID: <alpine.LRH.2.02.1202032016130.21535@reclus.nhh.no>

On Fri, 3 Feb 2012, Karl Ove Hufthammer wrote:

> Roger Bivand wrote:
>
>>> However, once the map is saved, I am getting a huge .emf file (e.g., 74
>>> MB). Is there any way to save it in a smaller size?
>> 
>> If you have to use a vector output format, then you should simplify the
>> input, which has extremely detailed coastlines but coarser resolution
>> administrative boundaries. Maybe try gSimplify() in rgeos.
>
> Couldn?t (part of) the problem also be that the map object contains much 
> more information than what is displayed? I have experienced this when 
> plotting small parts of large maps using xlim and ylim. The resulting map 
> displayed on screen and saved in a vector format (e.g., PDF) would show just 
> the few countries within the xlim and ylim boundaries, but the file would 
> actually contain (for example) the entire Eurasia continent (this could be 
> seen by opening the file in Inkscape and moving map outlines or changing the 
> boundary box).

Could you provide an example? On F16 x86 I see:

> library(maptools)
> data(wrld_simpl)
> pdf("wrld_simpl_base.pdf")
> plot(wrld_simpl)
> dev.off()
> file.info("wrld_simpl_base.pdf")[1]
                       size
wrld_simpl_base.pdf 141093
> pdf("wrld_simpl_nor.pdf")
> plot(wrld_simpl, xlim=c(3,31), ylim=c(58,71))
> dev.off()
> file.info("wrld_simpl_nor.pdf")[1]
                     size
wrld_simpl_nor.pdf 13222

So something is being clipped, isn't it? If there is more that can be 
done, a use case would be needed to show when we had reduced the file 
size. In this case, converting the output object to SpatialLines makes 
little difference.

Interested in your issue,

Roger

>
> The best solution is to crop the map object before saving. Note that for 
> detailed map objects, this can be a *very* slow process. And the polygons 
> are actually closed, so you will see black horizontal or vertical lines in 
> the margin. I guess you could could crop the map to slightly outside the 
> xlim and ylim boundaries before saving it to avoid this last problem.
>
> -- 
> Karl Ove Hufthammer
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From rossiter at itc.nl  Fri Feb  3 21:45:35 2012
From: rossiter at itc.nl (D G Rossiter)
Date: Fri, 3 Feb 2012 15:45:35 -0500
Subject: [R-sig-Geo] Mysterious (to me) behaviour of cbind() on an envelope
	-- ASDAR ch. 7
Message-ID: <02E560AF-869A-4201-BF5D-5C6603507DC7@itc.nl>

Dear r-sig-geo friends:

I am working through ASDAR (Applied Spatial Data Analysis with R) book using the code and datasets on the book's website http://www.asdar-book.org/.

In sppa_mod.R (code for Chapter 7) we are trying to bind a new column giving the point-pattern name to an object of class envelope:

>  Gresults <- rbind(envjap, envred, envcells)
>  class(Gresults)
[1] "envelope"   "fv"         "data.frame"
>  Gresults <- cbind(Gresults, DATASET=rep(c("JAPANESE", "REDWOOD", "CELLS"), each=length(r)))

but somehow the newly-bound column does not get the assigned name 'DATASET', but is assigned the name 'y':

> str(Gresults)
Classes 'fv' and 'data.frame':  144 obs. of  6 variables:
 $ r   : num  0 0.005 0.01 0.015 0.02 0.025 0.03 0.035 0.04 0.045 ...
 $ obs : num  0 0 0 0.0615 0.0615 ...
 $ theo: num  0 0.00509 0.02021 0.04491 0.07843 ...
 $ lo  : num  0 0 0 0 0 ...
 $ hi  : num  0 0.0625 0.0748 0.1427 0.1933 ...
 $ y   : Factor w/ 3 levels "CELLS","JAPANESE",..: 2 2 2 2 2 2 2 2 2 2 ...
....

somehow the envelope has been removed also. Then when I try to plot according to the following code:

> print(xyplot(obs~theo|DATASET , data=Gresults, type="l", ...

the classifying category is not found. If I replace DATASET with y the plot is shown as in Fig. 7.3.

Clearly the cbind() is somehow not preserving the assigned column name, despite the class being build on data.frame. Where it gets the 'y' from is also seriously mysterious to me.

Here's my version info. I started from a clean workspace and only loaded the packages as indicated.

> version
platform       x86_64-apple-darwin9.8.0
arch           x86_64
os             darwin9.8.0
system         x86_64, darwin9.8.0
status
major          2
minor          14.0
year           2011
month          10
day            31
svn rev        57496
language       R
version.string R version 2.14.0 (2011-10-31)

Package:            sp
Version:            0.9-94
Date:               2011-12-21

Package:            spatstat
Version:            1.25-2
Date:               2012-01-19

Thanks for any insight!

D. G. Rossiter
Senior University Lecturer
University of Twente, Faculty ITC
Hengelosestraat 99
PO Box 217, 7500 AE Enschede, the Netherlands (NL)
Phone:  +31-(0)53 4874 499
Fax:    +31-(0)53 4874 336
mailto:rossiter at itc.nl,  Internet: http://www.itc.nl/personal/rossiter




Faculty of Geo-Information Science and Earth Observation (ITC)
University of Twente
Chamber of Commerce: 501305360000

E-mail disclaimer
The information in this e-mail, including any attachments, is intended for the addressee only. If you are not the intended recipient, you are hereby notified that any disclosure, copying, distribution or action in relation to the content of this information is strictly prohibited. If you have received this e-mail by mistake, please delete the message and any attachment and inform the sender by return e-mail. ITC accepts no liability for any error or omission in the message content or for damage of any kind that may arise as a result of e-mail transmission.


From marcelino.delacruz at upm.es  Fri Feb  3 22:16:50 2012
From: marcelino.delacruz at upm.es (marcelino.delacruz at upm.es)
Date: Fri, 03 Feb 2012 22:16:50 +0100
Subject: [R-sig-Geo] Mysterious (to me) behaviour of cbind() on an
	envelope -- ASDAR ch. 7
In-Reply-To: <02E560AF-869A-4201-BF5D-5C6603507DC7@itc.nl>
Message-ID: <u4njpuCW.1328303810.3762600.marcelino.delacruz@upm.es>

Hi,

I  think this is because Gresuts is an fv object in adtition to a
data.frame. It has its own cbind.fv method.

>From the help.page of fv:

Use cbind.fv to combine several "fv" objects. Use bind.fv to glue
additional columns onto an existing "fv" object.

So you should use instead bind.fv...

Cheers


Marcelino


Con fecha 3/2/2012, "D G Rossiter" <rossiter at itc.nl> escribi?:

>Dear r-sig-geo friends:
>
>I am working through ASDAR (Applied Spatial Data Analysis with R) book using the code and datasets on the book's website http://www.asdar-book.org/.
>
>In sppa_mod.R (code for Chapter 7) we are trying to bind a new column giving the point-pattern name to an object of class envelope:
>
>>  Gresults <- rbind(envjap, envred, envcells)
>>  class(Gresults)
>[1] "envelope"   "fv"         "data.frame"
>>  Gresults <- cbind(Gresults, DATASET=rep(c("JAPANESE", "REDWOOD", "CELLS"), each=length(r)))
>
>but somehow the newly-bound column does not get the assigned name 'DATASET', but is assigned the name 'y':
>
>> str(Gresults)
>Classes 'fv' and 'data.frame':  144 obs. of  6 variables:
> $ r   : num  0 0.005 0.01 0.015 0.02 0.025 0.03 0.035 0.04 0.045 ...
> $ obs : num  0 0 0 0.0615 0.0615 ...
> $ theo: num  0 0.00509 0.02021 0.04491 0.07843 ...
> $ lo  : num  0 0 0 0 0 ...
> $ hi  : num  0 0.0625 0.0748 0.1427 0.1933 ...
> $ y   : Factor w/ 3 levels "CELLS","JAPANESE",..: 2 2 2 2 2 2 2 2 2 2 ...
>....
>
>somehow the envelope has been removed also. Then when I try to plot according to the following code:
>
>> print(xyplot(obs~theo|DATASET , data=Gresults, type="l", ...
>
>the classifying category is not found. If I replace DATASET with y the plot is shown as in Fig. 7.3.
>
>Clearly the cbind() is somehow not preserving the assigned column name, despite the class being build on data.frame. Where it gets the 'y' from is also seriously mysterious to me.
>
>Here's my version info. I started from a clean workspace and only loaded the packages as indicated.
>
>> version
>platform       x86_64-apple-darwin9.8.0
>arch           x86_64
>os             darwin9.8.0
>system         x86_64, darwin9.8.0
>status
>major          2
>minor          14.0
>year           2011
>month          10
>day            31
>svn rev        57496
>language       R
>version.string R version 2.14.0 (2011-10-31)
>
>Package:            sp
>Version:            0.9-94
>Date:               2011-12-21
>
>Package:            spatstat
>Version:            1.25-2
>Date:               2012-01-19
>
>Thanks for any insight!
>
>D. G. Rossiter
>Senior University Lecturer
>University of Twente, Faculty ITC
>Hengelosestraat 99
>PO Box 217, 7500 AE Enschede, the Netherlands (NL)
>Phone:  +31-(0)53 4874 499
>Fax:    +31-(0)53 4874 336
>mailto:rossiter at itc.nl,  Internet: http://www.itc.nl/personal/rossiter
>
>
>
>
>Faculty of Geo-Information Science and Earth Observation (ITC)
>University of Twente
>Chamber of Commerce: 501305360000
>
>E-mail disclaimer
>The information in this e-mail, including any attachments, is intended for the addressee only. If you are not the intended recipient, you are hereby notified that any disclosure, copying, distribution or action in relation to the content of this information is strictly prohibited. If you have received this e-mail by mistake, please delete the message and any attachment and inform the sender by return e-mail. ITC accepts no liability for any error or omission in the message content or for damage of any kind that may arise as a result of e-mail transmission.
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From karl at huftis.org  Fri Feb  3 22:36:01 2012
From: karl at huftis.org (Karl Ove Hufthammer)
Date: Fri, 3 Feb 2012 22:36:01 +0100
Subject: [R-sig-Geo] Reducing the size of the R-produced maps while
 saving
In-Reply-To: <alpine.LRH.2.02.1202032016130.21535@reclus.nhh.no>
References: <CAN2xGJZMVJbpMqebYVkRXHazAgEoN-PEjKiuimM66yA1_h2h6w@mail.gmail.com>
	<alpine.LRH.2.02.1201312202250.9563@reclus.nhh.no>
	<jggbgl$bg4$1@dough.gmane.org>
	<alpine.LRH.2.02.1202032016130.21535@reclus.nhh.no>
Message-ID: <1328304961.5167.1.camel@adrian.site>

fr. den 03. 02. 2012 klokka 20.25 (+0100) skreiv Roger Bivand:
> > Couldn?t (part of) the problem also be that the map object contains much 
> > more information than what is displayed? I have experienced this when 
> > plotting small parts of large maps using xlim and ylim. The resulting map 
> > displayed on screen and saved in a vector format (e.g., PDF) would show just 
> > the few countries within the xlim and ylim boundaries, but the file would 
> > actually contain (for example) the entire Eurasia continent (this could be 
> > seen by opening the file in Inkscape and moving map outlines or changing the 
> > boundary box).
> 
> Could you provide an example? 

I think one example is the GSHHS map (especially the non-coarse
versions) if you *don?t* clip it to the bounding box. But when I tried
reproducing it now, I only get an error message:
  
$ library(maptools)
$ x=getRgshhsMap(xlim=c(0,30), ylim=c(55,75), no.clip=TRUE)
Data are polygon data
Data are polygon data
Feil: TopologyException: side location conflict at -178.44555049573185
65.525617234053172

With ?no.clip=FALSE?, it works fine.

$ sessionInfo()
R version 2.14.1 (2011-12-22)
Platform: x86_64-suse-linux-gnu (64-bit)

locale:
[1] LC_CTYPE=nn_NO.UTF-8       LC_NUMERIC=C               LC_TIME=nn_NO.UTF-8       
[4] LC_COLLATE=nn_NO.UTF-8     LC_MONETARY=nn_NO.UTF-8    LC_MESSAGES=nn_NO.UTF-8   
[7] LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C              
[10] LC_TELEPHONE=C             LC_MEASUREMENT=nn_NO.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
  [1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
  [1] rgeos_0.2-2     stringr_0.6     maptools_0.8-14 lattice_0.20-0  sp_0.9-94       foreign_0.8-48 

loaded via a namespace (and not attached):
  [1] grid_2.14.1  plyr_1.7.1   tools_2.14.1

-- 
Karl Ove Hufthammer
http://huftis.org/
Jabber: karl at huftis.org


From Roger.Bivand at nhh.no  Fri Feb  3 23:09:15 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 3 Feb 2012 23:09:15 +0100
Subject: [R-sig-Geo] Reducing the size of the R-produced maps while
 saving
In-Reply-To: <1328304961.5167.1.camel@adrian.site>
References: <CAN2xGJZMVJbpMqebYVkRXHazAgEoN-PEjKiuimM66yA1_h2h6w@mail.gmail.com>
	<alpine.LRH.2.02.1201312202250.9563@reclus.nhh.no>
	<jggbgl$bg4$1@dough.gmane.org>
	<alpine.LRH.2.02.1202032016130.21535@reclus.nhh.no>
	<1328304961.5167.1.camel@adrian.site>
Message-ID: <alpine.LRH.2.02.1202032258570.22058@reclus.nhh.no>

On Fri, 3 Feb 2012, Karl Ove Hufthammer wrote:

> fr. den 03. 02. 2012 klokka 20.25 (+0100) skreiv Roger Bivand:
>>> Couldn?t (part of) the problem also be that the map object contains much
>>> more information than what is displayed? I have experienced this when
>>> plotting small parts of large maps using xlim and ylim. The resulting map
>>> displayed on screen and saved in a vector format (e.g., PDF) would show just
>>> the few countries within the xlim and ylim boundaries, but the file would
>>> actually contain (for example) the entire Eurasia continent (this could be
>>> seen by opening the file in Inkscape and moving map outlines or changing the
>>> boundary box).
>>
>> Could you provide an example?
>
> I think one example is the GSHHS map (especially the non-coarse
> versions) if you *don?t* clip it to the bounding box. But when I tried
> reproducing it now, I only get an error message:
>
> $ library(maptools)
> $ x=getRgshhsMap(xlim=c(0,30), ylim=c(55,75), no.clip=TRUE)


I'll look into the issue in getRgshhsMap() later. Using the more general 
Rgshhs(), there is a small difference in size:

> library(maptools)
> x=Rgshhs(system.file("share/gshhs_c.b", package= "maptools"), 
+ xlim=c(0,30), ylim=c(55,75), no.clip=TRUE)$SP
Data are polygon data
> pdf("gshhs_noclip.pdf")
> plot(x, xlim=c(0,30), ylim=c(55,75))
> dev.off()
null device
           1
> file.info("gshhs_noclip.pdf")[1]
                  size
gshhs_noclip.pdf 9426
> x=Rgshhs(system.file("share/gshhs_c.b", package= "maptools"), 
xlim=c(0,30), ylim=c(55,75), no.clip=FALSE)$SP
Data are polygon data
Rgshhs: clipping 9 of 126 polygons ...
null polygon: [[2]]
null polygon: [[24]]
> pdf("gshhs_clip.pdf")
> plot(x, xlim=c(0,30), ylim=c(55,75))
> dev.off()
null device
           1
> file.info("gshhs_clip.pdf")[1]               size
gshhs_clip.pdf 8529

Roger


> Data are polygon data
> Data are polygon data
> Feil: TopologyException: side location conflict at -178.44555049573185
> 65.525617234053172
>
> With ?no.clip=FALSE?, it works fine.
>
> $ sessionInfo()
> R version 2.14.1 (2011-12-22)
> Platform: x86_64-suse-linux-gnu (64-bit)
>
> locale:
> [1] LC_CTYPE=nn_NO.UTF-8       LC_NUMERIC=C               LC_TIME=nn_NO.UTF-8
> [4] LC_COLLATE=nn_NO.UTF-8     LC_MONETARY=nn_NO.UTF-8    LC_MESSAGES=nn_NO.UTF-8
> [7] LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C
> [10] LC_TELEPHONE=C             LC_MEASUREMENT=nn_NO.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
>  [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
>  [1] rgeos_0.2-2     stringr_0.6     maptools_0.8-14 lattice_0.20-0  sp_0.9-94       foreign_0.8-48
>
> loaded via a namespace (and not attached):
>  [1] grid_2.14.1  plyr_1.7.1   tools_2.14.1
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From karl at huftis.org  Fri Feb  3 23:35:23 2012
From: karl at huftis.org (Karl Ove Hufthammer)
Date: Fri, 3 Feb 2012 23:35:23 +0100
Subject: [R-sig-Geo] Reducing the size of the R-produced maps while
 saving
In-Reply-To: <alpine.LRH.2.02.1202032258570.22058@reclus.nhh.no>
References: <CAN2xGJZMVJbpMqebYVkRXHazAgEoN-PEjKiuimM66yA1_h2h6w@mail.gmail.com>
	<alpine.LRH.2.02.1201312202250.9563@reclus.nhh.no>
	<jggbgl$bg4$1@dough.gmane.org>
	<alpine.LRH.2.02.1202032016130.21535@reclus.nhh.no>
	<1328304961.5167.1.camel@adrian.site>
	<alpine.LRH.2.02.1202032258570.22058@reclus.nhh.no>
Message-ID: <1328308523.5167.12.camel@adrian.site>

fr. den 03. 02. 2012 klokka 23.09 (+0100) skreiv Roger Bivand:
> Using the more general 
> Rgshhs(), there is a small difference in size:
> 
> > library(maptools)
> > x=Rgshhs(system.file("share/gshhs_c.b", package= "maptools"), 
> + xlim=c(0,30), ylim=c(55,75), no.clip=TRUE)$SP
> Data are polygon data
> > pdf("gshhs_noclip.pdf")
> > plot(x, xlim=c(0,30), ylim=c(55,75))
> > dev.off() 

Yes, and there is a small difference in the amount of vector information
stored in the PDF. Try

library(maptools)
x=Rgshhs(system.file("share/gshhs_c.b", package= "maptools"), 
         xlim=c(0,50), ylim=c(55,75), no.clip=TRUE)$SP
pdf("gshhs_noclip.pdf")
plot(x, xlim=c(30,50), ylim=c(55,75))
dev.off()

If you import the PDF in Inkscape, select all objects and use the
ungroup command a couple of times, you can see *all* of Norway.
The difference is not as large as I remember, though, as the PDF 
doesn?t include all of Eurasia (it?s clipped to the media/page box).
This may be because of changes in R, or that the file format (EMF? WMF)
I used didn?t support proper clipping. I can?t test this right now, as
I?m not on a Windows system.

-- 
Karl Ove Hufthammer
http://huftis.org/
Jabber: karl at huftis.org


From rossiter at itc.nl  Sat Feb  4 02:03:01 2012
From: rossiter at itc.nl (D G Rossiter)
Date: Fri, 3 Feb 2012 20:03:01 -0500
Subject: [R-sig-Geo] Mysterious (to me) behaviour of cbind() on an
	envelope -- ASDAR ch. 7
In-Reply-To: <u4njpuCW.1328303810.3762600.marcelino.delacruz@upm.es>
References: <u4njpuCW.1328303810.3762600.marcelino.delacruz@upm.es>
Message-ID: <F3D57FFD-DA05-4AA4-938A-CABB2718ED4E@itc.nl>

Thanks for the suggestion, but that doesn't work. In fact, I believe cbind.fv is what is being dispatched. But your suggestion gave me the clue to try:

> cbind.data.frame(....)

performs as advertised in ASDAR up to a point --  It indeed binds the DATASET= named column onto the data.frame inside Gresults. BUT the class is now reduced to just a dataframe, and all the attributes of the fv and envelope classes are lost.  I tried coercing this up to fv or envelope with as() but of course there is missing information which I can't re-create.

Is the problem perhaps because of a change in the class dispatch? Since the classes are listed in order as envelope, fv, data.set, maybe the dispatch is to the earliest-named one with a cbind method?

so cbind ---> cbind.fv in this case?

On 03 Feb2012, at 16:16, marcelino.delacruz at upm.es wrote:

> Hi,
>
> I  think this is because Gresuts is an fv object in adtition to a
> data.frame. It has its own cbind.fv method.
>
> From the help.page of fv:
>
> Use cbind.fv to combine several "fv" objects. Use bind.fv to glue
> additional columns onto an existing "fv" object.
>
> So you should use instead bind.fv...
>
> Cheers
>
>
> Marcelino
>
>
> Con fecha 3/2/2012, "D G Rossiter" <rossiter at itc.nl> escribi?:
>
>> Dear r-sig-geo friends:
>>
>> I am working through ASDAR (Applied Spatial Data Analysis with R) book using the code and datasets on the book's website http://www.asdar-book.org/.
>>
>> In sppa_mod.R (code for Chapter 7) we are trying to bind a new column giving the point-pattern name to an object of class envelope:
>>
>>> Gresults <- rbind(envjap, envred, envcells)
>>> class(Gresults)
>> [1] "envelope"   "fv"         "data.frame"
>>> Gresults <- cbind(Gresults, DATASET=rep(c("JAPANESE", "REDWOOD", "CELLS"), each=length(r)))
>>
>> but somehow the newly-bound column does not get the assigned name 'DATASET', but is assigned the name 'y':
>>
>>> str(Gresults)
>> Classes 'fv' and 'data.frame':  144 obs. of  6 variables:
>> $ r   : num  0 0.005 0.01 0.015 0.02 0.025 0.03 0.035 0.04 0.045 ...
>> $ obs : num  0 0 0 0.0615 0.0615 ...
>> $ theo: num  0 0.00509 0.02021 0.04491 0.07843 ...
>> $ lo  : num  0 0 0 0 0 ...
>> $ hi  : num  0 0.0625 0.0748 0.1427 0.1933 ...
>> $ y   : Factor w/ 3 levels "CELLS","JAPANESE",..: 2 2 2 2 2 2 2 2 2 2 ...
>> ....
>>
>> somehow the envelope has been removed also. Then when I try to plot according to the following code:
>>
>>> print(xyplot(obs~theo|DATASET , data=Gresults, type="l", ...
>>
>> the classifying category is not found. If I replace DATASET with y the plot is shown as in Fig. 7.3.
>>
>> Clearly the cbind() is somehow not preserving the assigned column name, despite the class being build on data.frame. Where it gets the 'y' from is also seriously mysterious to me.
>>
>> Here's my version info. I started from a clean workspace and only loaded the packages as indicated.
>>
>>> version
>> platform       x86_64-apple-darwin9.8.0
>> arch           x86_64
>> os             darwin9.8.0
>> system         x86_64, darwin9.8.0
>> status
>> major          2
>> minor          14.0
>> year           2011
>> month          10
>> day            31
>> svn rev        57496
>> language       R
>> version.string R version 2.14.0 (2011-10-31)
>>
>> Package:            sp
>> Version:            0.9-94
>> Date:               2011-12-21
>>
>> Package:            spatstat
>> Version:            1.25-2
>> Date:               2012-01-19
>>
>> Thanks for any insight!
>>
>> D. G. Rossiter
>> Senior University Lecturer
>> University of Twente, Faculty ITC
>> Hengelosestraat 99
>> PO Box 217, 7500 AE Enschede, the Netherlands (NL)
>> Phone:  +31-(0)53 4874 499
>> Fax:    +31-(0)53 4874 336
>> mailto:rossiter at itc.nl,  Internet: http://www.itc.nl/personal/rossiter
>>
>>
>>
>>
>> Faculty of Geo-Information Science and Earth Observation (ITC)
>> University of Twente
>> Chamber of Commerce: 501305360000
>>
>> E-mail disclaimer
>> The information in this e-mail, including any attachments, is intended for the addressee only. If you are not the intended recipient, you are hereby notified that any disclosure, copying, distribution or action in relation to the content of this information is strictly prohibited. If you have received this e-mail by mistake, please delete the message and any attachment and inform the sender by return e-mail. ITC accepts no liability for any error or omission in the message content or for damage of any kind that may arise as a result of e-mail transmission.
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


Faculty of Geo-Information Science and Earth Observation (ITC)
University of Twente
Chamber of Commerce: 501305360000

E-mail disclaimer
The information in this e-mail, including any attachments, is intended for the addressee only. If you are not the intended recipient, you are hereby notified that any disclosure, copying, distribution or action in relation to the content of this information is strictly prohibited. If you have received this e-mail by mistake, please delete the message and any attachment and inform the sender by return e-mail. ITC accepts no liability for any error or omission in the message content or for damage of any kind that may arise as a result of e-mail transmission.


From marcelino.delacruz at upm.es  Sat Feb  4 13:05:23 2012
From: marcelino.delacruz at upm.es (marcelino.delacruz at upm.es)
Date: Sat, 04 Feb 2012 13:05:23 +0100
Subject: [R-sig-Geo] Mysterious (to me) behaviour of cbind() on an
	envelope -- ASDAR ch. 7
In-Reply-To: <F3D57FFD-DA05-4AA4-938A-CABB2718ED4E@itc.nl>
Message-ID: <a1PPrIqX.1328357123.6135860.marcelino.delacruz@upm.es>

Well, I was suggesting "bind.fv" instead of "cbind.fv".

bind.fv has the argument "y" and it expects another fv object or a
data.frame.

So in your example it should be:

 Gresults <- bind.fv(Gresults, data.frame(DATASET=rep(c("JAPANESE",
"REDWOOD", "CELLS"), each=length(r))))

By the way, I dont know if it is worth  keeping the fv and envelope
attributes to a rbined object with the envelopes of several datasets; I
think that  in the ASDAR book this was used in order to use conditional
Lattice graphics (were the fv and envelope attributes are ignored).

For this case, you could do as well:

class(Gresults) <- data.frame
 Gresults <- cbind(Gresults, DATASET=rep(c("JAPANESE", "REDWOOD",
"CELLS"), each=length(r)))


Cheers,
Marcelino



Con fecha 4/2/2012, "D G Rossiter" <rossiter at itc.nl> escribi?:

>Thanks for the suggestion, but that doesn't work. In fact, I believe cbind.fv is what is being dispatched. But your suggestion gave me the clue to try:
>
>> cbind.data.frame(....)
>
>performs as advertised in ASDAR up to a point --  It indeed binds the DATASET= named column onto the data.frame inside Gresults. BUT the class is now reduced to just a dataframe, and all the attributes of the fv and envelope classes are lost.  I tried coercing this up to fv or envelope with as() but of course there is missing information which I can't re-create.
>
>Is the problem perhaps because of a change in the class dispatch? Since the classes are listed in order as envelope, fv, data.set, maybe the dispatch is to the earliest-named one with a cbind method?
>
>so cbind ---> cbind.fv in this case?
>
>On 03 Feb2012, at 16:16, marcelino.delacruz at upm.es wrote:
>
>> Hi,
>>
>> I  think this is because Gresuts is an fv object in adtition to a
>> data.frame. It has its own cbind.fv method.
>>
>> From the help.page of fv:
>>
>> Use cbind.fv to combine several "fv" objects. Use bind.fv to glue
>> additional columns onto an existing "fv" object.
>>
>> So you should use instead bind.fv...
>>
>> Cheers
>>
>>
>> Marcelino
>>
>>
>> Con fecha 3/2/2012, "D G Rossiter" <rossiter at itc.nl> escribi?:
>>
>>> Dear r-sig-geo friends:
>>>
>>> I am working through ASDAR (Applied Spatial Data Analysis with R) book using the code and datasets on the book's website http://www.asdar-book.org/.
>>>
>>> In sppa_mod.R (code for Chapter 7) we are trying to bind a new column giving the point-pattern name to an object of class envelope:
>>>
>>>> Gresults <- rbind(envjap, envred, envcells)
>>>> class(Gresults)
>>> [1] "envelope"   "fv"         "data.frame"
>>>> Gresults <- cbind(Gresults, DATASET=rep(c("JAPANESE", "REDWOOD", "CELLS"), each=length(r)))
>>>
>>> but somehow the newly-bound column does not get the assigned name 'DATASET', but is assigned the name 'y':
>>>
>>>> str(Gresults)
>>> Classes 'fv' and 'data.frame':  144 obs. of  6 variables:
>>> $ r   : num  0 0.005 0.01 0.015 0.02 0.025 0.03 0.035 0.04 0.045 ...
>>> $ obs : num  0 0 0 0.0615 0.0615 ...
>>> $ theo: num  0 0.00509 0.02021 0.04491 0.07843 ...
>>> $ lo  : num  0 0 0 0 0 ...
>>> $ hi  : num  0 0.0625 0.0748 0.1427 0.1933 ...
>>> $ y   : Factor w/ 3 levels "CELLS","JAPANESE",..: 2 2 2 2 2 2 2 2 2 2 ...
>>> ....
>>>
>>> somehow the envelope has been removed also. Then when I try to plot according to the following code:
>>>
>>>> print(xyplot(obs~theo|DATASET , data=Gresults, type="l", ...
>>>
>>> the classifying category is not found. If I replace DATASET with y the plot is shown as in Fig. 7.3.
>>>
>>> Clearly the cbind() is somehow not preserving the assigned column name, despite the class being build on data.frame. Where it gets the 'y' from is also seriously mysterious to me.
>>>
>>> Here's my version info. I started from a clean workspace and only loaded the packages as indicated.
>>>
>>>> version
>>> platform       x86_64-apple-darwin9.8.0
>>> arch           x86_64
>>> os             darwin9.8.0
>>> system         x86_64, darwin9.8.0
>>> status
>>> major          2
>>> minor          14.0
>>> year           2011
>>> month          10
>>> day            31
>>> svn rev        57496
>>> language       R
>>> version.string R version 2.14.0 (2011-10-31)
>>>
>>> Package:            sp
>>> Version:            0.9-94
>>> Date:               2011-12-21
>>>
>>> Package:            spatstat
>>> Version:            1.25-2
>>> Date:               2012-01-19
>>>
>>> Thanks for any insight!
>>>
>>> D. G. Rossiter
>>> Senior University Lecturer
>>> University of Twente, Faculty ITC
>>> Hengelosestraat 99
>>> PO Box 217, 7500 AE Enschede, the Netherlands (NL)
>>> Phone:  +31-(0)53 4874 499
>>> Fax:    +31-(0)53 4874 336
>>> mailto:rossiter at itc.nl,  Internet: http://www.itc.nl/personal/rossiter
>>>
>>>
>>>
>>>
>>> Faculty of Geo-Information Science and Earth Observation (ITC)
>>> University of Twente
>>> Chamber of Commerce: 501305360000
>>>
>>> E-mail disclaimer
>>> The information in this e-mail, including any attachments, is intended for the addressee only. If you are not the intended recipient, you are hereby notified that any disclosure, copying, distribution or action in relation to the content of this information is strictly prohibited. If you have received this e-mail by mistake, please delete the message and any attachment and inform the sender by return e-mail. ITC accepts no liability for any error or omission in the message content or for damage of any kind that may arise as a result of e-mail transmission.
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>Faculty of Geo-Information Science and Earth Observation (ITC)
>University of Twente
>Chamber of Commerce: 501305360000
>
>E-mail disclaimer
>The information in this e-mail, including any attachments, is intended for the addressee only. If you are not the intended recipient, you are hereby notified that any disclosure, copying, distribution or action in relation to the content of this information is strictly prohibited. If you have received this e-mail by mistake, please delete the message and any attachment and inform the sender by return e-mail. ITC accepts no liability for any error or omission in the message content or for damage of any kind that may arise as a result of e-mail transmission.


From marcelino.delacruz at upm.es  Sat Feb  4 13:15:22 2012
From: marcelino.delacruz at upm.es (marcelino.delacruz at upm.es)
Date: Sat, 04 Feb 2012 13:15:22 +0100
Subject: [R-sig-Geo] Mysterious (to me) behaviour of cbind() on an
	envelope -- ASDAR ch. 7
In-Reply-To: <a1PPrIqX.1328357123.6135860.marcelino.delacruz@upm.es>
Message-ID: <GDb1zMt8.1328357722.9545880.marcelino.delacruz@upm.es>

In the last example I forgot the quotes:


class(Gresults) <- "data.frame"
Gresults <- cbind(Gresults, DATASET=rep(c("JAPANESE", "REDWOOD",
"CELLS"), each=length(r)))



Con fecha 4/2/2012, "marcelino.delacruz at upm.es"
<marcelino.delacruz at upm.es> escribi?:

>Well, I was suggesting "bind.fv" instead of "cbind.fv".
>
>bind.fv has the argument "y" and it expects another fv object or a
>data.frame.
>
>So in your example it should be:
>
> Gresults <- bind.fv(Gresults, data.frame(DATASET=rep(c("JAPANESE",
>"REDWOOD", "CELLS"), each=length(r))))
>
>By the way, I dont know if it is worth  keeping the fv and envelope
>attributes to a rbined object with the envelopes of several datasets; I
>think that  in the ASDAR book this was used in order to use conditional
>Lattice graphics (were the fv and envelope attributes are ignored).
>
>For this case, you could do as well:
>
>class(Gresults) <- data.frame
> Gresults <- cbind(Gresults, DATASET=rep(c("JAPANESE", "REDWOOD",
>"CELLS"), each=length(r)))
>
>
>Cheers,
>Marcelino
>
>
>
>Con fecha 4/2/2012, "D G Rossiter" <rossiter at itc.nl> escribi?:
>
>>Thanks for the suggestion, but that doesn't work. In fact, I believe cbind.fv is what is being dispatched. But your suggestion gave me the clue to try:
>>
>>> cbind.data.frame(....)
>>
>>performs as advertised in ASDAR up to a point --  It indeed binds the DATASET= named column onto the data.frame inside Gresults. BUT the class is now reduced to just a dataframe, and all the attributes of the fv and envelope classes are lost.  I tried coercing this up to fv or envelope with as() but of course there is missing information which I can't re-create.
>>
>>Is the problem perhaps because of a change in the class dispatch? Since the classes are listed in order as envelope, fv, data.set, maybe the dispatch is to the earliest-named one with a cbind method?
>>
>>so cbind ---> cbind.fv in this case?
>>
>>On 03 Feb2012, at 16:16, marcelino.delacruz at upm.es wrote:
>>
>>> Hi,
>>>
>>> I  think this is because Gresuts is an fv object in adtition to a
>>> data.frame. It has its own cbind.fv method.
>>>
>>> From the help.page of fv:
>>>
>>> Use cbind.fv to combine several "fv" objects. Use bind.fv to glue
>>> additional columns onto an existing "fv" object.
>>>
>>> So you should use instead bind.fv...
>>>
>>> Cheers
>>>
>>>
>>> Marcelino
>>>
>>>
>>> Con fecha 3/2/2012, "D G Rossiter" <rossiter at itc.nl> escribi?:
>>>
>>>> Dear r-sig-geo friends:
>>>>
>>>> I am working through ASDAR (Applied Spatial Data Analysis with R) book using the code and datasets on the book's website http://www.asdar-book.org/.
>>>>
>>>> In sppa_mod.R (code for Chapter 7) we are trying to bind a new column giving the point-pattern name to an object of class envelope:
>>>>
>>>>> Gresults <- rbind(envjap, envred, envcells)
>>>>> class(Gresults)
>>>> [1] "envelope"   "fv"         "data.frame"
>>>>> Gresults <- cbind(Gresults, DATASET=rep(c("JAPANESE", "REDWOOD", "CELLS"), each=length(r)))
>>>>
>>>> but somehow the newly-bound column does not get the assigned name 'DATASET', but is assigned the name 'y':
>>>>
>>>>> str(Gresults)
>>>> Classes 'fv' and 'data.frame':  144 obs. of  6 variables:
>>>> $ r   : num  0 0.005 0.01 0.015 0.02 0.025 0.03 0.035 0.04 0.045 ...
>>>> $ obs : num  0 0 0 0.0615 0.0615 ...
>>>> $ theo: num  0 0.00509 0.02021 0.04491 0.07843 ...
>>>> $ lo  : num  0 0 0 0 0 ...
>>>> $ hi  : num  0 0.0625 0.0748 0.1427 0.1933 ...
>>>> $ y   : Factor w/ 3 levels "CELLS","JAPANESE",..: 2 2 2 2 2 2 2 2 2 2 ...
>>>> ....
>>>>
>>>> somehow the envelope has been removed also. Then when I try to plot according to the following code:
>>>>
>>>>> print(xyplot(obs~theo|DATASET , data=Gresults, type="l", ...
>>>>
>>>> the classifying category is not found. If I replace DATASET with y the plot is shown as in Fig. 7.3.
>>>>
>>>> Clearly the cbind() is somehow not preserving the assigned column name, despite the class being build on data.frame. Where it gets the 'y' from is also seriously mysterious to me.
>>>>
>>>> Here's my version info. I started from a clean workspace and only loaded the packages as indicated.
>>>>
>>>>> version
>>>> platform       x86_64-apple-darwin9.8.0
>>>> arch           x86_64
>>>> os             darwin9.8.0
>>>> system         x86_64, darwin9.8.0
>>>> status
>>>> major          2
>>>> minor          14.0
>>>> year           2011
>>>> month          10
>>>> day            31
>>>> svn rev        57496
>>>> language       R
>>>> version.string R version 2.14.0 (2011-10-31)
>>>>
>>>> Package:            sp
>>>> Version:            0.9-94
>>>> Date:               2011-12-21
>>>>
>>>> Package:            spatstat
>>>> Version:            1.25-2
>>>> Date:               2012-01-19
>>>>
>>>> Thanks for any insight!
>>>>
>>>> D. G. Rossiter
>>>> Senior University Lecturer
>>>> University of Twente, Faculty ITC
>>>> Hengelosestraat 99
>>>> PO Box 217, 7500 AE Enschede, the Netherlands (NL)
>>>> Phone:  +31-(0)53 4874 499
>>>> Fax:    +31-(0)53 4874 336
>>>> mailto:rossiter at itc.nl,  Internet: http://www.itc.nl/personal/rossiter
>>>>
>>>>
>>>>
>>>>
>>>> Faculty of Geo-Information Science and Earth Observation (ITC)
>>>> University of Twente
>>>> Chamber of Commerce: 501305360000
>>>>
>>>> E-mail disclaimer
>>>> The information in this e-mail, including any attachments, is intended for the addressee only. If you are not the intended recipient, you are hereby notified that any disclosure, copying, distribution or action in relation to the content of this information is strictly prohibited. If you have received this e-mail by mistake, please delete the message and any attachment and inform the sender by return e-mail. ITC accepts no liability for any error or omission in the message content or for damage of any kind that may arise as a result of e-mail transmission.
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>>Faculty of Geo-Information Science and Earth Observation (ITC)
>>University of Twente
>>Chamber of Commerce: 501305360000
>>
>>E-mail disclaimer
>>The information in this e-mail, including any attachments, is intended for the addressee only. If you are not the intended recipient, you are hereby notified that any disclosure, copying, distribution or action in relation to the content of this information is strictly prohibited. If you have received this e-mail by mistake, please delete the message and any attachment and inform the sender by return e-mail. ITC accepts no liability for any error or omission in the message content or for damage of any kind that may arise as a result of e-mail transmission.
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From samanmonfared1 at gmail.com  Sat Feb  4 19:25:25 2012
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Sat, 4 Feb 2012 21:55:25 +0330
Subject: [R-sig-Geo] spatio-temporal
Message-ID: <CAOytA4a1=cnp7fd2J-iHLk2SQTPDmZYeV+wPgRb2sHw_x39tLw@mail.gmail.com>

Hi.
Is there packages in R that can perform spatio-temporal analysis such
as Testing stationary and sepreability, fitting covariance
function(Sepreable and non-sepreable)
and kriging??
Please guid me.
Thanks
-- 

Saman Monfared
Msc Student,
Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167


From Roger.Bivand at nhh.no  Sat Feb  4 21:45:29 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 4 Feb 2012 21:45:29 +0100 (CET)
Subject: [R-sig-Geo] Mysterious (to me) behaviour of cbind() on an
 envelope -- ASDAR ch. 7
In-Reply-To: <02E560AF-869A-4201-BF5D-5C6603507DC7@itc.nl>
References: <02E560AF-869A-4201-BF5D-5C6603507DC7@itc.nl>
Message-ID: <alpine.LRH.2.02.1202042114540.25338@reclus.nhh.no>

On Fri, 3 Feb 2012, D G Rossiter wrote:

> Dear r-sig-geo friends:
>
> I am working through ASDAR (Applied Spatial Data Analysis with R) book 
> using the code and datasets on the book's website 
> http://www.asdar-book.org/.
>
> In sppa_mod.R (code for Chapter 7) we are trying to bind a new column 
> giving the point-pattern name to an object of class envelope:
>
>>  Gresults <- rbind(envjap, envred, envcells)
>>  class(Gresults)
> [1] "envelope"   "fv"         "data.frame"
>>  Gresults <- cbind(Gresults, DATASET=rep(c("JAPANESE", "REDWOOD", "CELLS"), each=length(r)))
>
> but somehow the newly-bound column does not get the assigned name 
> 'DATASET', but is assigned the name 'y':

Thanks for noting this. I've updated the online code to give the variable 
the name "y" instead of "DATASET" here, and in the F and K tests too. An 
erratum has also been added. The figures now show the envelopes as on book 
figures 7.3, 7.4 and 7.9. There was a further infelicity in that 
lpolygon() takes a col= rather than a fill= argument, changed in the 
online code for the figures.

Best wishes,

Roger

>
>> str(Gresults)
> Classes 'fv' and 'data.frame':  144 obs. of  6 variables:
> $ r   : num  0 0.005 0.01 0.015 0.02 0.025 0.03 0.035 0.04 0.045 ...
> $ obs : num  0 0 0 0.0615 0.0615 ...
> $ theo: num  0 0.00509 0.02021 0.04491 0.07843 ...
> $ lo  : num  0 0 0 0 0 ...
> $ hi  : num  0 0.0625 0.0748 0.1427 0.1933 ...
> $ y   : Factor w/ 3 levels "CELLS","JAPANESE",..: 2 2 2 2 2 2 2 2 2 2 ...
> ....
>
> somehow the envelope has been removed also. Then when I try to plot according to the following code:
>
>> print(xyplot(obs~theo|DATASET , data=Gresults, type="l", ...
>
> the classifying category is not found. If I replace DATASET with y the plot is shown as in Fig. 7.3.
>
> Clearly the cbind() is somehow not preserving the assigned column name, despite the class being build on data.frame. Where it gets the 'y' from is also seriously mysterious to me.
>
> Here's my version info. I started from a clean workspace and only loaded the packages as indicated.
>
>> version
> platform       x86_64-apple-darwin9.8.0
> arch           x86_64
> os             darwin9.8.0
> system         x86_64, darwin9.8.0
> status
> major          2
> minor          14.0
> year           2011
> month          10
> day            31
> svn rev        57496
> language       R
> version.string R version 2.14.0 (2011-10-31)
>
> Package:            sp
> Version:            0.9-94
> Date:               2011-12-21
>
> Package:            spatstat
> Version:            1.25-2
> Date:               2012-01-19
>
> Thanks for any insight!
>
> D. G. Rossiter
> Senior University Lecturer
> University of Twente, Faculty ITC
> Hengelosestraat 99
> PO Box 217, 7500 AE Enschede, the Netherlands (NL)
> Phone:  +31-(0)53 4874 499
> Fax:    +31-(0)53 4874 336
> mailto:rossiter at itc.nl,  Internet: http://www.itc.nl/personal/rossiter
>
>
>
>
> Faculty of Geo-Information Science and Earth Observation (ITC)
> University of Twente
> Chamber of Commerce: 501305360000
>
> E-mail disclaimer
> The information in this e-mail, including any attachments, is intended for the addressee only. If you are not the intended recipient, you are hereby notified that any disclosure, copying, distribution or action in relation to the content of this information is strictly prohibited. If you have received this e-mail by mistake, please delete the message and any attachment and inform the sender by return e-mail. ITC accepts no liability for any error or omission in the message content or for damage of any kind that may arise as a result of e-mail transmission.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From r.turner at auckland.ac.nz  Sat Feb  4 23:22:27 2012
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sun, 05 Feb 2012 11:22:27 +1300
Subject: [R-sig-Geo] spatio-temporal
In-Reply-To: <CAOytA4a1=cnp7fd2J-iHLk2SQTPDmZYeV+wPgRb2sHw_x39tLw@mail.gmail.com>
References: <CAOytA4a1=cnp7fd2J-iHLk2SQTPDmZYeV+wPgRb2sHw_x39tLw@mail.gmail.com>
Message-ID: <4F2DAFA3.7010009@auckland.ac.nz>

On 05/02/12 07:25, Saman Monfared wrote:
> Hi.
> Is there packages in R that can perform spatio-temporal analysis such
> as Testing stationary and sepreability, fitting covariance
> function(Sepreable and non-sepreable)
> and kriging??
> Please guid me.
> Thanks

The lgcp package might be of some use to you.  It is specialised
to log Gaussian Cox processes, but it could give you a start.  I gather
from looking at the lgcp package that the area you are interested
in is *hard*.

     cheers,

         Rolf Turner


From samanmonfared1 at gmail.com  Sun Feb  5 09:49:27 2012
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Sun, 5 Feb 2012 12:19:27 +0330
Subject: [R-sig-Geo] help to analisys spatio-temporal
Message-ID: <CAOytA4YAJTPRkDvBNsmRfWb6iyHE6MLgr5=ng6zJfubwY4R9NA@mail.gmail.com>

Hi.
Are there packages in R that can perform spatio-temporal analysis such
as Testing stationary and sepreability, fitting covariance
function(Sepreable and non-sepreable)
and kriging??
Please guid me.
Thanks



-- 

Saman Monfared
Msc Student,
Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167


From seanpor at acm.org  Sun Feb  5 13:17:26 2012
From: seanpor at acm.org (Sean O'Riordain)
Date: Sun, 5 Feb 2012 12:17:26 +0000
Subject: [R-sig-Geo] help to analisys spatio-temporal
In-Reply-To: <CAOytA4YAJTPRkDvBNsmRfWb6iyHE6MLgr5=ng6zJfubwY4R9NA@mail.gmail.com>
References: <CAOytA4YAJTPRkDvBNsmRfWb6iyHE6MLgr5=ng6zJfubwY4R9NA@mail.gmail.com>
Message-ID: <CA+MmmTLuncs5jVygoMOVWzQ28a_ZB55sni7DQWO6oVDKZfF8XA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120205/c87d7026/attachment.pl>

From arnold_salvacion at yahoo.com  Sun Feb  5 16:46:01 2012
From: arnold_salvacion at yahoo.com (Arnold Salvacion)
Date: Sun, 5 Feb 2012 23:46:01 +0800 (SGT)
Subject: [R-sig-Geo] Coverting GPS Points in Text  File to Spatial Lines
Message-ID: <1328456761.51774.YahooMailNeo@web190401.mail.sg3.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120205/eb37873b/attachment.pl>

From hengl at spatial-analyst.net  Mon Feb  6 09:28:48 2012
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Mon, 6 Feb 2012 09:28:48 +0100
Subject: [R-sig-Geo] Fwd: Re: Coverting GPS Points in Text File to Spatial
 Lines
In-Reply-To: <4F2F8EB9.3050903@wur.nl>
References: <4F2F8EB9.3050903@wur.nl>
Message-ID: <4F2F8F40.2010904@spatial-analyst.net>


Hi Armold,

In what format is your GPS data? I highly suggest using the GPX protocol 
as this is the lingua franca for GPS data.

I recently made a function that reads GPS data and converts into a data
frame (via the XML package):

http://plotkml.r-forge.r-project.org/readGPX.html

*this is still rather experimental but you can look at the actual steps
via R-forge:

https://r-forge.r-project.org/scm/viewvc.php/pkg/R/readGPX.R?view=markup&root=plotkml

HTH,

T. Hengl
http://www.wewur.wur.nl/popups/vcard.aspx?id=HENGL001

On 5-2-2012 16:46, Arnold Salvacion wrote:
> Dear All,
>
> I want to convert GPS traces from a text file to a line (spatial line). Does anybody have an idea how to implement this in R?
>
> Thanks in advance!
>
> Best regards,
>
> Armold
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Mon Feb  6 09:38:05 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 6 Feb 2012 09:38:05 +0100
Subject: [R-sig-Geo] Fwd: Re: Coverting GPS Points in Text File to
 Spatial Lines
In-Reply-To: <4F2F8F40.2010904@spatial-analyst.net>
References: <4F2F8EB9.3050903@wur.nl> <4F2F8F40.2010904@spatial-analyst.net>
Message-ID: <alpine.LRH.2.02.1202060934530.4927@reclus.nhh.no>

On Mon, 6 Feb 2012, Tomislav Hengl wrote:

>
> Hi Armold,
>
> In what format is your GPS data? I highly suggest using the GPX protocol as 
> this is the lingua franca for GPS data.
>
> I recently made a function that reads GPS data and converts into a data
> frame (via the XML package):

Or use the GPX OGR driver in rgdal through

readOGR(dsn="myfile.gpx", layer="tracks")

or a different layer definition - see ?readOGR.

Roger

>
> http://plotkml.r-forge.r-project.org/readGPX.html
>
> *this is still rather experimental but you can look at the actual steps
> via R-forge:
>
> https://r-forge.r-project.org/scm/viewvc.php/pkg/R/readGPX.R?view=markup&root=plotkml
>
> HTH,
>
> T. Hengl
> http://www.wewur.wur.nl/popups/vcard.aspx?id=HENGL001
>
> On 5-2-2012 16:46, Arnold Salvacion wrote:
>> Dear All,
>> 
>> I want to convert GPS traces from a text file to a line (spatial line). 
>> Does anybody have an idea how to implement this in R?
>> 
>> Thanks in advance!
>> 
>> Best regards,
>> 
>> Armold
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From hengl at spatial-analyst.net  Mon Feb  6 09:44:12 2012
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Mon, 06 Feb 2012 09:44:12 +0100
Subject: [R-sig-Geo] help to analisys spatio-temporal
In-Reply-To: <CAOytA4YAJTPRkDvBNsmRfWb6iyHE6MLgr5=ng6zJfubwY4R9NA@mail.gmail.com>
References: <CAOytA4YAJTPRkDvBNsmRfWb6iyHE6MLgr5=ng6zJfubwY4R9NA@mail.gmail.com>
Message-ID: <4F2F92DC.1000109@spatial-analyst.net>


Package "stem" claims to do exactly the kind of things you require:

http://cran.r-project.org/web/packages/Stem/

I still prefer to use gstat see e.g. 
http://cran.r-project.org/web/packages/gstat/vignettes/st.pdf

There are apparently some new discoveries in the Cressie's new book 
[http://books.google.com/books?id=-kOC6D0DiNYC] about how to fit 
space-time prediction models, but I would also advise you to look at 
[http://books.google.com/books?id=YqpZKTp-Wh0C] or some recent papers 
from Edzer and colleagues 
[http://stml.uni-muenster.de/index.php?option=com_content&view=article&id=4&Itemid=16&lang=en].

T. Hengl
http://www.wewur.wur.nl/popups/vcard.aspx?id=HENGL001

On 5-2-2012 9:49, Saman Monfared wrote:
> Hi.
> Are there packages in R that can perform spatio-temporal analysis such
> as Testing stationary and sepreability, fitting covariance
> function(Sepreable and non-sepreable)
> and kriging??
> Please guid me.
> Thanks
>
>
>


From M.Rosario.Garcia at slu.se  Mon Feb  6 12:01:51 2012
From: M.Rosario.Garcia at slu.se (Rosario Garcia Gil)
Date: Mon, 6 Feb 2012 12:01:51 +0100
Subject: [R-sig-Geo] Spatial genetics
Message-ID: <A29987079A478A4A91B7210BC46CE0D0542B17E657@exmbx3.ad.slu.se>

Dear colleges

I need to include spatial genetic relatedness data in my statistical model.

I have sampled trees from a forest and I have run molecular markers on them. My first intention is use similar approach as for the K function (Ripley, 1976) by placing circles of different radius (d) around. Instead of simply counting the events within each circule of radius d, I intend to estimate the genetic relatedness.

I am asking here if any of you know if this idea has been implemented in a ny R package.

Kind regards


From alaios at yahoo.com  Mon Feb  6 16:51:24 2012
From: alaios at yahoo.com (Alaios)
Date: Mon, 6 Feb 2012 07:51:24 -0800 (PST)
Subject: [R-sig-Geo] Poisson disk distribution
In-Reply-To: <CAOytA4a1=cnp7fd2J-iHLk2SQTPDmZYeV+wPgRb2sHw_x39tLw@mail.gmail.com>
References: <CAOytA4a1=cnp7fd2J-iHLk2SQTPDmZYeV+wPgRb2sHw_x39tLw@mail.gmail.com>
Message-ID: <1328543484.14397.YahooMailNeo@web120101.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120206/77179244/attachment.pl>

From vivien.deparday at gmail.com  Mon Feb  6 23:33:28 2012
From: vivien.deparday at gmail.com (Vivien Deparday)
Date: Mon, 06 Feb 2012 17:33:28 -0500
Subject: [R-sig-Geo] PostGIS merge and subset selection
Message-ID: <4F305538.1090406@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120206/cb4bbe1c/attachment.pl>

From edzer.pebesma at uni-muenster.de  Tue Feb  7 07:45:30 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 07 Feb 2012 07:45:30 +0100
Subject: [R-sig-Geo] PostGIS merge and subset selection
In-Reply-To: <4F305538.1090406@gmail.com>
References: <4F305538.1090406@gmail.com>
Message-ID: <4F30C88A.8090609@uni-muenster.de>

Vivien, the following might give you some pointers:

library(spacetime)
vignette("stpg")
edit(vignette("stpg"))

to run the postGIS thing, you have to uncomment all the eval=FALSE sections.

Best regards,

On 02/06/2012 11:33 PM, Vivien Deparday wrote:
> Dear all,
> 
> I have been reading around the mailing list but I have not been able to 
> find a somewhat easy solution to my issue.
> I have a PostgreSQL / PostGIS database that I am accessing with R. The 
> database is organized in a way that there is one large table that has 
> all the geometry records (two columns, one with centroid, one with 
> polygons) and then I have several tables that have attributes related to 
> these geometries. The link between the tables is made with a unique ID.
> The second constraint is that when I am doing calculation in R, I want 
> to retrieve only a subset of the lines. And in the end, I want to make 
> some choropleth maps. So I suppose that I want to create a 
> SpatialPolygonsDataFrame (and SpatialPointsDataFrame) that contains my 
> subset of geometries and attribute values and then map that.
> 
> - I have tried to use rgdal and readOGR. I used readOGR to retrieve all 
> the geometries (I found several references in the mailing about 
> implementing -sql for readOGR [1] but I don't think it has been 
> implemented yet? I would have to use system(ogr2ogr ... ) ?)  and then I 
> tried to do the merge with the example here [2]
> But I get the following error: Error: length(Sr at polygons) == nrow(data) 
> is not TRUE
> I suppose it is due to the fact that my attribute table has a subset of 
> the lines whereas the geometry table retrieved with OGR has all the values?
> A solution could be to use ogr2ogr but it is becoming quite cumbersome.
> 
> - Given my constraints, it may be easier to use RODBC. So I managed to 
> retrieve my geometries through RODBC. Then I am stuck as I don' t know 
> how to convert my two geometry fields (polygons and points) into spatial 
> object. There are detected as Factors by default. I have seen a similar 
> questions in the archive but the advice was to use readOGR. Would there 
> be a way to create spatial objects from the RODBC query?
> 
> For points I can follow [1]:
> SELECT attr, ST_X(the_geom) AS x, ST_Y(the_geom) AS y FROM yourtable 
> WHERE ...")
> coordinates(data_frame) <- ~x+y
> 
> But how could I do that with polygons?
> 
> Thank you,
> 
> Vivien
> 
> [1] 
> http://r-sig-geo.2731867.n2.nabble.com/passing-SQL-through-readOGR-td3816889.html 
> 
> [2] 
> http://r-sig-geo.2731867.n2.nabble.com/merging-data-with-SpatialPolygonsDataFrame-td2764348.html
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From b.rowlingson at lancaster.ac.uk  Tue Feb  7 09:37:46 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 7 Feb 2012 08:37:46 +0000
Subject: [R-sig-Geo] PostGIS merge and subset selection
In-Reply-To: <4F30C88A.8090609@uni-muenster.de>
References: <4F305538.1090406@gmail.com>
	<4F30C88A.8090609@uni-muenster.de>
Message-ID: <CANVKczMNeKeu9xk63HedkK3w_1wtwPuy5D0TD0fwH8L=YyM7=g@mail.gmail.com>

On Tue, Feb 7, 2012 at 6:45 AM, Edzer Pebesma
<edzer.pebesma at uni-muenster.de> wrote:
> Vivien, the following might give you some pointers:
>
> library(spacetime)
> vignette("stpg")
> edit(vignette("stpg"))
>
> to run the postGIS thing, you have to uncomment all the eval=FALSE sections.
>

 Not sure if Edzer's vignette is doing this, but another way might be
to use a VIEW on the database to do your joining and selecting. You
can use the R PostgreSQL database driver to do this. You'll also have
to add the view to the geometry_columns table to make it 'spatial'.
Then you can get it via readOGR.

I can dig out more details later, but basically you run some SQL like:

 CREATE VIEW fred AS SELECT * FROM polygons,attributes WHERE
polygons.id = attributes.id AND attributes.name='fred';

SQL strings like that can be constructed in R and sent to the database
via the usual R database tools.

 If you create database indexes on the id variables then this will be
speedy, although note it is done each time you query the view - ie the
results of the view aren't stored on the database.

Barry


From mathieu.rajerison at gmail.com  Tue Feb  7 13:39:35 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Tue, 7 Feb 2012 13:39:35 +0100
Subject: [R-sig-Geo] dismo::gmap: can not create a RasterLayer from this file
Message-ID: <CAGfc75kjifDzj1rzmnBYQ=at3vrJoPs2Yhq_BeEmPtqAF1XBXg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120207/67390efb/attachment.pl>

From michael.denslow at gmail.com  Tue Feb  7 14:24:16 2012
From: michael.denslow at gmail.com (Michael Denslow)
Date: Tue, 7 Feb 2012 08:24:16 -0500
Subject: [R-sig-Geo] Building Windows binary of rgdal package to include
 PGeo driver for reading ESRI personal geodatabases.
In-Reply-To: <52151386A57A5046BD5FD6CC131EF644010382B4@Postamt2.des.ucdavis.edu>
References: <52151386A57A5046BD5FD6CC131EF644010382B2@Postamt2.des.ucdavis.edu>
	<alpine.LRH.2.02.1202010954320.11633@reclus.nhh.no>
	<52151386A57A5046BD5FD6CC131EF644010382B4@Postamt2.des.ucdavis.edu>
Message-ID: <CAEewEpjRpZEWE3ZHMFeqbSJW0se=J5GM889EwpYc33gQgFqAQw@mail.gmail.com>

Hi Roger and Josh,


On Wed, Feb 1, 2012 at 3:04 PM, Obrien, Josh <JObrien at ucdavis.edu> wrote:
>
>>> On Tue, 31 Jan 2012, Obrien, Josh wrote:
>
>>> I am a long-time R user, currently working with a team of ArcGIS users.
>>> The GIS guys would like to be able pass me data in the form of ESRI
>>> personal geodatabases (*.mdb), but the OGR driver that reads such files
>>> (PGeo) is not included in the Windows rgdal binary.
>>>
>>> Roger Bivand's 2008 book (p 111) and the "README.windows" file located
>>> in rgdal's main directory both have the same advice for me. They tell me
>>> that "the R Windows binary rgdal package can be built against an FWTools
>>> binary, using VC++."
>
>> Josh,
>>
>> Could you please try to install R-devel for Windows:
>>
>> http://cran.r-project.org/bin/windows/base/rdevel.html
>>
>> and install the CRAN binary of rgdal? Prof. Brian Ripley and Uwe Ligges
>> have been continuing their excellent support for us and the whole
>> community, and as part of build train enhancements for forthcoming 2.15 on
>> Windows, have built GDAL with more dependencies, including ODBC. For me on
>> R-devel, ogrDrivers() now shows:
>>
>> 23 ? MapInfo File ?TRUE
>> 24 ? ? ? ? Memory ?TRUE
>> 25 ? MSSQLSpatial ?TRUE
>> 26 ? ? ? ? ? ODBC ?TRUE
>> 27 ? ? ? ?OpenAir FALSE
>> 28 ? ? ? ? PCIDSK ?TRUE
>> 29 ? ? ? ? ? ?PDS FALSE
>> 30 ? ? ? ? PGDump ?TRUE
>> 31 ? ? ? ? ? PGeo FALSE
>>
>> where FALSE means that the driver cannot write Pgeo files. It would be
>> helpful if you could try it out, which may well mean finding out how to
>> declare the Pgeo data source through ODBC or some such.
>>
>> If you can find out how to use the driver, it may be simpler to go with
>> 2.15 as Devel will become, most likely in April 2012, than try to build
>> using FWTools or OSGeo4W.
>>
>> Hope this helps,
>>
>> Roger
>
> Dear Professor Bivand,
>
> That's phenomenally helpful.
>
> For the record, after installing R-devel (soon to be R-2.15.0) from http://cran.r-project.org/bin/windows/base/rdevel.html, the following steps were the only ones needed to read data from an ESRI personal geodatabase into an R SpatialPointsDataFrame. (The table to be read is named "TelemetryPoints", and is stored in the personal geodatabase at "C://temp/example.mdb"):
>
> install.packages("rgdal")
> library(rgdal)
> ogrDrivers() ? ? ?# Confirming that the PGeo driver was indeed installed
> SPDF <- readOGR("C://temp/example.mdb", "Telemetry points")
>
> Thanks so much for your help,
>
> Josh O'Brien
>
> P.S. Not sure I yet have the hang of properly quoting the context from previous emails in the thread.
>

Sorry to join this discuss late, but I have also been curious about
reading ESRI geodatabases since I teach with ArcGIS and work with
rgdal for my own research purposes. I have two questions that I hope
are not too off topic.

1. I have the most recent rgdal version (rgdal_0.7-8) build from
source and Pgeo driver list says FALSE. I am using MAC OS 10.6. Can
you point me to documentation to use this on Mac OS?

2. Alternatively, I noticed that GDAL 1.9 has a new driver for .mdb
(http://trac.osgeo.org/gdal/wiki/Release/1.9.0-News). However this
makes reference to Pgeo.
Will this driver change things significantly?

I am still using GDAL 1.8 downloaded from
http://www.kyngchaos.com/software/frameworks.

Thanks for any thoughts and/or advice,
Michael



-- 
Michael Denslow

I.W. Carpenter Jr. Herbarium [BOON]
Department of Biology
Appalachian State University
Boone, North Carolina U.S.A.
-- AND --
Communications Manager
Southeast Regional Network of Expertise and Collections
sernec.org

36.214177, -81.681480 +/- 3103 meters


From b.rowlingson at lancaster.ac.uk  Tue Feb  7 16:57:11 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 7 Feb 2012 15:57:11 +0000
Subject: [R-sig-Geo] Building Windows binary of rgdal package to include
 PGeo driver for reading ESRI personal geodatabases.
In-Reply-To: <CAEewEpjRpZEWE3ZHMFeqbSJW0se=J5GM889EwpYc33gQgFqAQw@mail.gmail.com>
References: <52151386A57A5046BD5FD6CC131EF644010382B2@Postamt2.des.ucdavis.edu>
	<alpine.LRH.2.02.1202010954320.11633@reclus.nhh.no>
	<52151386A57A5046BD5FD6CC131EF644010382B4@Postamt2.des.ucdavis.edu>
	<CAEewEpjRpZEWE3ZHMFeqbSJW0se=J5GM889EwpYc33gQgFqAQw@mail.gmail.com>
Message-ID: <CANVKczNkB7ATqqEEDyq46mbBt8gX9gEx3G_MVCHU1kFbi7Mozw@mail.gmail.com>

On Tue, Feb 7, 2012 at 1:24 PM, Michael Denslow
<michael.denslow at gmail.com> wrote:

> Sorry to join this discuss late, but I have also been curious about
> reading ESRI geodatabases since I teach with ArcGIS and work with
> rgdal for my own research purposes. I have two questions that I hope
> are not too off topic.
>
> 1. I have the most recent rgdal version (rgdal_0.7-8) build from
> source and Pgeo driver list says FALSE. I am using MAC OS 10.6. Can
> you point me to documentation to use this on Mac OS?
>
> 2. Alternatively, I noticed that GDAL 1.9 has a new driver for .mdb
> (http://trac.osgeo.org/gdal/wiki/Release/1.9.0-News). However this
> makes reference to Pgeo.
> Will this driver change things significantly?
>
> I am still using GDAL 1.8 downloaded from
> http://www.kyngchaos.com/software/frameworks.
>
> Thanks for any thoughts and/or advice,
> Michael

I just read your email just after reading this blog entry:

http://www.structuralknowledge.com/2012/02/03/why-esri-as-is-cant-be-part-of-the-open-government-movement/

 so good luck with reading ESRI databases....

Barry


From drdr8080 at gmail.com  Tue Feb  7 20:38:55 2012
From: drdr8080 at gmail.com (dimitrisr)
Date: Tue, 7 Feb 2012 11:38:55 -0800 (PST)
Subject: [R-sig-Geo] find in which polygon each point-coordinate belongs to
Message-ID: <1328643535906-7263478.post@n2.nabble.com>

hi i am new to these stuff so bear with me  ,
i have a shapefile of Europe and a dataset of point coordinates that has 
way too many mistakes(a csv file of 10.000 lines/point coordinates written
in this way)

country,longitude,latitude
Italy,213,4353
Italy,234,3463
Italy,234,43643
Germany,325,453
Germany,344,234
etc..

but coordinates with country-name Germany are actually plotted in
Italy,Spain,Sweden .etc...
to make it clearer,if i do

plot(europe)
points(myPoints$longitude[myPoints$country=="Italy"],myPoints$latitude[myPoints$country=="Italy"])
the majority of points are drawn in Italy but there are many points
scattered around Europe.This happens for every country!

i want to write a file (preferable in the same format as points.csv) that
contains each polygon-country and the points/coordinates corrected(i.e
points with country-name Germany plotted only in Germany)

this is what i have tried so far:
europe<-readShapeSpatial("/europe/europe.shp",proj4string=CRS("+proj=longlat")
myPoints<-read.csv("points.csv",header=T)  #3 columns,10.000 rows
xy<-cbind(myPoints$longitude,myPoints$latitude)
dimnames(xy)[[1]]<-myPoints$country ---->if try to add the country-column i
get an error that the over function does not accept duplicates 
pts<-SpatialPoints(xy,proj4string=CRS("+proj=longlat")
over(pts,europe) 

how can continue from here?(if this is not the correct way to do it,please
let me know)
help is much appreciated. :)

(put differently ,if the csv file didn`t have country-names but just
coordinates,how would you write a  csv file that contains in which
polygon-country each point belongs to, but save both the country-name *and*
the coordinate)

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/find-in-which-polygon-each-point-coordinate-belongs-to-tp7263478p7263478.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From osoong+r at gmail.com  Tue Feb  7 22:16:10 2012
From: osoong+r at gmail.com (Oliver Soong)
Date: Tue, 7 Feb 2012 13:16:10 -0800
Subject: [R-sig-Geo] raster package memory management
Message-ID: <CAPQ=hV+vP1gmNGRPRyq_9cOk1k3Zg5N6DeSPUtNBi7BcnsxSWw@mail.gmail.com>

Hi,

I'm putting together a package to do some analysis that uses the great
features provided by raster package.  I'm anticipating reading a large
number of rasters (tens of thousands in my test case), lined up into a
single rasterStack.  At any given time, I only need to operate on a
few layers, but I'm constantly accessing different layers.  Is the
raster package smart enough to manage memory usage of the entire
stack?  In other words, will it release data read into memory but
backed by a file in order to read in new data?  I'm willing to
tradeoff speed for functionality.

If I had to read separate rasterLayers, (say each layer had different
extents), would the raster package manage memory across the collection
of raster* objects?

Lastly, since this sort of memory management seems complex enough that
I'm guessing it hasn't been implemented, should I use clearValues to
do this manually?  Can I apply clearValues to specific elements of a
rasterStack?

Thanks for reading.  The raster package has made things much easier
already, so I'm hoping to be pleasantly surprised.

Oliver


From oluseun.idowu at mail.umkc.edu  Tue Feb  7 23:54:50 2012
From: oluseun.idowu at mail.umkc.edu (Idowu, Oluseun S. (UMKC-Student))
Date: Tue, 7 Feb 2012 22:54:50 +0000
Subject: [R-sig-Geo] Help with Era_Interim Data
Message-ID: <CB5707D7.3867%osif38@mail.umkc.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120207/7f6ecc6a/attachment.pl>

From osoong+r at gmail.com  Wed Feb  8 00:12:33 2012
From: osoong+r at gmail.com (Oliver Soong)
Date: Tue, 7 Feb 2012 15:12:33 -0800
Subject: [R-sig-Geo] raster package, values pixel order
Message-ID: <CAPQ=hVJ1UXGqz=VhXV3aj1hpkkYwZj8b_355yjbNEA=YGgvEmA@mail.gmail.com>

Can somebody confirm whether raster::values(x, format = "") always
starts in the top-left of the image and moves left-to-right then
top-to-bottom?

I'm really hoping it doesn't depend on the pixel order of the underlying raster.

Thanks,
Oliver


From roman.lustrik at gmail.com  Wed Feb  8 00:57:36 2012
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Wed, 8 Feb 2012 00:57:36 +0100
Subject: [R-sig-Geo] raster package, values pixel order
In-Reply-To: <CAPQ=hVJ1UXGqz=VhXV3aj1hpkkYwZj8b_355yjbNEA=YGgvEmA@mail.gmail.com>
References: <CAPQ=hVJ1UXGqz=VhXV3aj1hpkkYwZj8b_355yjbNEA=YGgvEmA@mail.gmail.com>
Message-ID: <CAHT1vphEFRMm3djSMbfQQ+YyJ6ASk4+OWmKHFS9xBEZnmp0CUA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120208/4f3f9e09/attachment.pl>

From osoong+r at gmail.com  Wed Feb  8 02:14:51 2012
From: osoong+r at gmail.com (Oliver Soong)
Date: Tue, 7 Feb 2012 17:14:51 -0800
Subject: [R-sig-Geo] raster package, values pixel order
In-Reply-To: <CAHT1vphEFRMm3djSMbfQQ+YyJ6ASk4+OWmKHFS9xBEZnmp0CUA@mail.gmail.com>
References: <CAPQ=hVJ1UXGqz=VhXV3aj1hpkkYwZj8b_355yjbNEA=YGgvEmA@mail.gmail.com>
	<CAHT1vphEFRMm3djSMbfQQ+YyJ6ASk4+OWmKHFS9xBEZnmp0CUA@mail.gmail.com>
Message-ID: <CAPQ=hVKxbg=cX26EVfvxeBqiCThb7SzQn0JyQFPuH=KH1X9Khg@mail.gmail.com>

Ah, thanks for pointing out the definition of cell order.  The
documentation for raster::values doesn't specify that
values(rasterLayer, format = "") always returns values in cell order,
nor does it state that values(rasterStack) or values (rasterBrick)
returns rows in cell order, so I wanted to check.

Oliver


On Tue, Feb 7, 2012 at 3:57 PM, Roman Lu?trik <roman.lustrik at gmail.com> wrote:
> From the package vignette (try vignette("Raster")):
>
> The cell number is an important concept in the raster package. Raster data
> can be thought of as a matrix, but in a RasterLayer it is more commonly
> 19
> treated as a vector. Cells are numbered from the upper left cell to the
> upper
> right cell and then continuing on the left side of the next row, and so on
> until the
> last cell at the lower-right side of the raster.
> There are several helper functions
> to determine the column or row number from a cell and vice versa, and to
> determine the cell number for x, y coordinates and vice versa.
>
>
>
> Cheers,
> Roman
>
> On Wed, Feb 8, 2012 at 12:12 AM, Oliver Soong <osoong+r at gmail.com> wrote:
>>
>> Can somebody confirm whether raster::values(x, format = "") always
>> starts in the top-left of the image and moves left-to-right then
>> top-to-bottom?
>>
>> I'm really hoping it doesn't depend on the pixel order of the underlying
>> raster.
>>
>> Thanks,
>> Oliver
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
>
> --
> In God we trust, all others bring data.


From ross.bowden at iinet.net.au  Wed Feb  8 05:37:41 2012
From: ross.bowden at iinet.net.au (Ross Bowden)
Date: Wed, 08 Feb 2012 12:37:41 +0800
Subject: [R-sig-Geo] Forecasting of sky images
Message-ID: <4F31FC15.7020806@iinet.net.au>

Hello everyone. I'm designing a system to forecast the availability of 
solar radiation for photovoltaic power stations. The forecasting system 
will use regularly-taken images of the sky, each of which is a full grid 
of binary values (each element indicates cloudy or clear-sky conditions 
for roughly a 40m x 40m area). These (PNG) images are captured every 
minute using a "sky camera". I'm looking to use R to predict the images 
(i.e. the movement of clouds) in an automated fashion for a short time 
period ahead (up to 30 minutes) by utilising trends in the sequence of 
images. Does anyone know of a way to use R to undertake the 
extrapolation of such images please?

There are a number of predictive approaches in the meteorological 
literature (where such methods are included under the term "nowcasting") 
but it's not clear how the algorithms could be used in R without a 
substantial amount of programming. There is also the issue of a lack of 
statistical rigour in the methods. So I'm looking for modelling tools 
(from spatial statistics?) which will allow the statistical forecasting 
of images and which have been implemented in R. I've searched through 
the available spatial statistics packages such as "spacetime" and "geoR" 
but nothing immediately presents as suitable (although I've considered 
using localised spatial logistic regression employing the 
temporally-lagged values from surrounding mosaic elements as predictors).

Many thanks for any suggestions

Ross Bowden
PhD Candidate, Murdoch University, Western Australia.


From mauricio.zambrano at jrc.ec.europa.eu  Wed Feb  8 08:44:08 2012
From: mauricio.zambrano at jrc.ec.europa.eu (Mauricio Zambrano-Bigiarini)
Date: Wed, 08 Feb 2012 08:44:08 +0100
Subject: [R-sig-Geo] Building Windows binary of rgdal package to include
 PGeo driver for reading ESRI personal geodatabases.
In-Reply-To: <CANVKczNkB7ATqqEEDyq46mbBt8gX9gEx3G_MVCHU1kFbi7Mozw@mail.gmail.com>
References: <52151386A57A5046BD5FD6CC131EF644010382B2@Postamt2.des.ucdavis.edu>
	<alpine.LRH.2.02.1202010954320.11633@reclus.nhh.no>
	<52151386A57A5046BD5FD6CC131EF644010382B4@Postamt2.des.ucdavis.edu>
	<CAEewEpjRpZEWE3ZHMFeqbSJW0se=J5GM889EwpYc33gQgFqAQw@mail.gmail.com>
	<CANVKczNkB7ATqqEEDyq46mbBt8gX9gEx3G_MVCHU1kFbi7Mozw@mail.gmail.com>
Message-ID: <4F3227C8.7050709@jrc.ec.europa.eu>

On 07/02/12 16:57, Barry Rowlingson wrote:
> On Tue, Feb 7, 2012 at 1:24 PM, Michael Denslow
> <michael.denslow at gmail.com>  wrote:
>
>> Sorry to join this discuss late, but I have also been curious about
>> reading ESRI geodatabases since I teach with ArcGIS and work with
>> rgdal for my own research purposes. I have two questions that I hope
>> are not too off topic.
>>
>> 1. I have the most recent rgdal version (rgdal_0.7-8) build from
>> source and Pgeo driver list says FALSE. I am using MAC OS 10.6. Can
>> you point me to documentation to use this on Mac OS?
>>
>> 2. Alternatively, I noticed that GDAL 1.9 has a new driver for .mdb
>> (http://trac.osgeo.org/gdal/wiki/Release/1.9.0-News). However this
>> makes reference to Pgeo.
>> Will this driver change things significantly?
>>
>> I am still using GDAL 1.8 downloaded from
>> http://www.kyngchaos.com/software/frameworks.
>>
>> Thanks for any thoughts and/or advice,
>> Michael
> I just read your email just after reading this blog entry:
>
> http://www.structuralknowledge.com/2012/02/03/why-esri-as-is-cant-be-part-of-the-open-government-movement/

Thank you very much Barry for sharing such interesting post about the 
new proprietary format of ESRI !.

All the best,

Mauricio Zambrano-Bigiarini

-- 
=======================================================
FLOODS Action
Water Resources Unit (H01)
Institute for Environment and Sustainability (IES)
European Commission, Joint Research Centre (JRC)
webinfo    : http://floods.jrc.ec.europa.eu/
=======================================================
DISCLAIMER:\ "The views expressed are purely those of th...{{dropped:22}}


From tommasojucker at gmail.com  Wed Feb  8 13:18:52 2012
From: tommasojucker at gmail.com (Tommaso Jucker)
Date: Wed, 8 Feb 2012 04:18:52 -0800 (PST)
Subject: [R-sig-Geo] Confidence interval for SAR model regression fit
 (errorsarlm, package spdep)
Message-ID: <1328703532163-7265503.post@n2.nabble.com>

Dear List,

I am modelling the relationship between species richness and an
environmental variable and want to compare the fit of an OLS regression with
that of a spatial model. I have used a SAR error model (errorsarlm()
function in spdep) from which I extracted and plotted the fit. However, I
would also like to plot a confidence interval for this fit. 

I know how to do this for an object of class ?lm? using the predict.lm()
function which returns upper and lower confidence intervals for each
estimate. However, the predict.sarlm() function is slightly different as it
reports the trend (non-spatial smooth) and signal (spatial smooth), the sum
of which is used to estimate the fit. 

I was wondering if anyone knew if/how it is possible to obtain confidence
estimates for a regression line generated from a SAR error model.

Thanks in advance for any suggestions.

Cheers,

Tommaso Jucker
--
Tommaso Jucker
Ph.D. student
Forest Ecology and Conservation Group
Department of Plant Sciences
University of Cambridge
e-mail: tommasojucker at gmail.com


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Confidence-interval-for-SAR-model-regression-fit-errorsarlm-package-spdep-tp7265503p7265503.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Roger.Bivand at nhh.no  Wed Feb  8 13:40:55 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 8 Feb 2012 13:40:55 +0100 (CET)
Subject: [R-sig-Geo] Confidence interval for SAR model regression fit
 (errorsarlm, package spdep)
In-Reply-To: <1328703532163-7265503.post@n2.nabble.com>
References: <1328703532163-7265503.post@n2.nabble.com>
Message-ID: <alpine.LRH.2.02.1202081333550.13191@reclus.nhh.no>

On Wed, 8 Feb 2012, Tommaso Jucker wrote:

> Dear List,
>
> I am modelling the relationship between species richness and an
> environmental variable and want to compare the fit of an OLS regression with
> that of a spatial model. I have used a SAR error model (errorsarlm()
> function in spdep) from which I extracted and plotted the fit. However, I
> would also like to plot a confidence interval for this fit. 
>
> I know how to do this for an object of class ?lm? using the predict.lm()
> function which returns upper and lower confidence intervals for each
> estimate. However, the predict.sarlm() function is slightly different as it
> reports the trend (non-spatial smooth) and signal (spatial smooth), the sum
> of which is used to estimate the fit. 
>
> I was wondering if anyone knew if/how it is possible to obtain confidence
> estimates for a regression line generated from a SAR error model.

They are not provided because they are unknown in the literature so far, 
as far as I know. It might be possible to get an empirical distribution by 
simulating from the fitted model, in a similar way to the extraction of 
impacts/emanating effects for spatial lag models.

Hope this helps,

Roger

>
> Thanks in advance for any suggestions.
>
> Cheers,
>
> Tommaso Jucker
> --
> Tommaso Jucker
> Ph.D. student
> Forest Ecology and Conservation Group
> Department of Plant Sciences
> University of Cambridge
> e-mail: tommasojucker at gmail.com
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Confidence-interval-for-SAR-model-regression-fit-errorsarlm-package-spdep-tp7265503p7265503.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From Javier.Perez-Barberia at hutton.ac.uk  Wed Feb  8 17:31:48 2012
From: Javier.Perez-Barberia at hutton.ac.uk (Javier Perez-Barberia)
Date: Wed, 8 Feb 2012 16:31:48 +0000
Subject: [R-sig-Geo] simulate correlated random walks within boundaries
Message-ID: <EBB9FB26C0C0184E86180D82D00279A13CB4D255@ABEXC02.ad.hutton.ac.uk>

Dear all,

Does anyone know an R function to simulate correlated random walks within the boundaries of a polygon.

Sorry everyone if this question was in the archives, but I couldn't find it.

Thanks

Javier


Dr. Javier Perez-Barberia
Senior scientist
The James Hutton Institute
Craigiebuckler
Aberdeen AB15 8QH
Scotland UK

Tel: +44 (0) 1224 395 221 (direct)
Tel: +44 (0) 844 928 5428 (switchboard)
Fax: +44 (0) 844 928 5429

www.hutton.ac.uk<http://www.hutton.ac.uk/>

[Description: cid:image002.png at 01CC0501.C157E190]

________________________________________________________
This email is from The James Hutton Institute (JHI), however the views
expressed by the sender are not necessarily the views of JHI and its
subsidiaries. This email and any attachments are confidential and are intended
solely for the use of the recipient(s) to whom they are addressed.  If you
are not the intended recipient, you should not read, copy, disclose or rely on
any information contained in this email, and we would ask you to contact the
sender immediately and delete the email from your system.  Although JHI has
taken reasonable precautions to ensure no viruses are present in this email,
neither the Institute nor the sender accepts any responsibility for any
viruses, and it is your responsibility to scan the email and any attachments.

The James Hutton Institute is a Scottish charitable company limited by
guarantee.
Registered in Edinburgh No. SC374831
Registered Office: The James Hutton Institute, Invergowrie Dundee DD2 5DA.
Charity No. SC041796
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120208/4881f0a7/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 8115 bytes
Desc: image001.png
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120208/4881f0a7/attachment.png>

From basille at ase-research.org  Wed Feb  8 18:04:12 2012
From: basille at ase-research.org (Mathieu Basille)
Date: Wed, 08 Feb 2012 12:04:12 -0500
Subject: [R-sig-Geo] simulate correlated random walks within boundaries
In-Reply-To: <EBB9FB26C0C0184E86180D82D00279A13CB4D255@ABEXC02.ad.hutton.ac.uk>
References: <EBB9FB26C0C0184E86180D82D00279A13CB4D255@ABEXC02.ad.hutton.ac.uk>
Message-ID: <4F32AB0C.1000501@ase-research.org>

Dear Javier,

You may have a look at the functions 'NMs.CRW' and 'NMs.randomCRW' in the 
package 'adehabitatLT'. Please check the vignette of the package, section 5 
(this is quite long, but really worth it), with emphasis on 5.3 and 5.7:

http://cran.r-project.org/web/packages/adehabitatLT/vignettes/adehabitatLT.pdf

Hope it helps,
Mathieu.


Le 08/02/2012 11:31, Javier Perez-Barberia a ?crit :
> Dear all,
>
> Does anyone know an R function to simulate correlated random walks within
> the boundaries of a polygon.
>
> Sorry everyone if this question was in the archives, but I couldn't find it.
>
> Thanks
>
> Javier
>
> Dr. Javier Perez-Barberia
>
> Senior scientist
>
> The James Hutton Institute
>
> Craigiebuckler
>
> Aberdeen AB15 8QH
>
> Scotland UK
>
> Tel: +44 (0) 1224 395 221 (direct)
>
> Tel: +44 (0) 844 928 5428 (switchboard)
>
> Fax: +44 (0) 844 928 5429
>
>
> _www.hutton.ac.uk <http://www.hutton.ac.uk/>_
>
> __
>
> Description: cid:image002.png at 01CC0501.C157E190__
>
>
> ________________________________________________________
>
> This email is from The James Hutton Institute (JHI), however the views
> expressed by the sender are not necessarily the views of JHI and its
> subsidiaries. This email and any attachments are confidential and are
> intended solely for the use of the recipient(s) to whom they are addressed.
> If you are not the intended recipient, you should not read, copy,
> disclose or rely on any information contained in this email, and we would
> ask you to contact the sender immediately and delete the email from your
> system. Although JHI has taken reasonable precautions to ensure no
> viruses are present in this email, neither the Institute nor the sender
> accepts any responsibility for any viruses, and it is your responsibility to
> scan the email and any attachments.
>
> The James Hutton Institute is a Scottish charitable company limited by
> guarantee.
> Registered in Edinburgh No. SC374831
> Registered Office: The James Hutton Institute, Invergowrie Dundee DD2 5DA.
> Charity No. SC041796
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 

~$ whoami
Mathieu Basille, Post-Doc

~$ locate
Laboratoire d'?cologie Comportementale et de Conservation de la Faune
+ Centre d'?tude de la For?t
D?partement de Biologie
Universit? Laval, Qu?bec

~$ info
http://ase-research.org/basille

~$ fortune
``If you can't win by reason, go for volume.''
Calvin, by Bill Watterson.


From n.p.odgers at gmail.com  Wed Feb  8 19:16:53 2012
From: n.p.odgers at gmail.com (Nathan Odgers)
Date: Wed, 8 Feb 2012 10:16:53 -0800
Subject: [R-sig-Geo] Error in .local(.Object, ...) : Dataset copy failed
Message-ID: <CA+EPzxrDYGHYfRdhXsiohYGS6Twb9YfxeiBzZybFuPcrv-ukOg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120208/aa8ddd9c/attachment.pl>

From gianni.lavaredo at gmail.com  Wed Feb  8 19:25:33 2012
From: gianni.lavaredo at gmail.com (gianni lavaredo)
Date: Wed, 8 Feb 2012 19:25:33 +0100
Subject: [R-sig-Geo] help to create a raster BRICK from a list
Message-ID: <CAJ6JbR_i+K6+mbqit9Zvme25VFTKhHaKwLgSw=5fJo=u=tGMog@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120208/f25fea08/attachment.pl>

From thi_veloso at yahoo.com.br  Wed Feb  8 20:41:52 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Wed, 8 Feb 2012 11:41:52 -0800
Subject: [R-sig-Geo] Combine two rasters with different spatial coverage
Message-ID: <1328730112.86267.YahooMailClassic@web161406.mail.bf1.yahoo.com>

  Dear list,

  I am trying to combine two rasters. One raster has global coverage, while other covers only Amazon.

  Let me show in pratice. First I create an emtpy structure with the intended domain (global) and resolution (0.5 degree):

> library(raster)
> glb<-raster(nrows=360,ncols=720,xmn=-180,xmx=180,ymn=-90,ymx=90)
> glb[]<-NA
> glb
class       : RasterLayer 
dimensions  : 360, 720, 259200  (nrow, ncol, ncell)
resolution  : 0.5, 0.5  (x, y)
extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0 
values      : in memory
min value   : NA 
max value   : NA 

  On the other hand, I load a Amazon deforestation file which contains values between 0 and 1:

> amz<-raster("/home/data/amz.img")
> amz
class       : RasterLayer
dimensions  : 47, 65, 3055  (nrow, ncol, ncell)
resolution  : 0.5, 0.5  (x, y)
extent      : -74, -41.5, -17.5, 6  (xmin, xmax, ymin, ymax)
coord. ref. : NA
values      : /home/data/amz.img
min value   : 0
max value   : 1

  Next, I apply the same projection:

> projection(amz) <- projection(glb)
> amz
class       : RasterLayer 
dimensions  : 47, 65, 3055  (nrow, ncol, ncell)
resolution  : 0.5, 0.5  (x, y)
extent      : -74, -41.5, -17.5, 6  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0 
values      : /home/data/amz.img 
min value   : 0 
max value   : 1 

  Last, after trying to replace NA values in the global raster with the values of the amazon object, 

> result <- cover(glb,amz)

  a erratic stripe across the globe is produced, like showed in this image: http://img269.imageshack.us/img269/1328/errorau.png

  Does anyone have a suggestion to solve this problem?

  Thanks in advance,
  Thiago.


From r.hijmans at gmail.com  Wed Feb  8 21:31:10 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 8 Feb 2012 12:31:10 -0800
Subject: [R-sig-Geo] Combine two rasters with different spatial coverage
In-Reply-To: <1328730112.86267.YahooMailClassic@web161406.mail.bf1.yahoo.com>
References: <1328730112.86267.YahooMailClassic@web161406.mail.bf1.yahoo.com>
Message-ID: <CANtt_hy6kHMsKFLWMiqDTBVGqZWvK8HLkbZdQpU5EP7j0KhLTQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120208/fa6889b1/attachment.pl>

From r.hijmans at gmail.com  Wed Feb  8 21:33:10 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 8 Feb 2012 12:33:10 -0800
Subject: [R-sig-Geo] Error in .local(.Object, ...) : Dataset copy failed
In-Reply-To: <CA+EPzxrDYGHYfRdhXsiohYGS6Twb9YfxeiBzZybFuPcrv-ukOg@mail.gmail.com>
References: <CA+EPzxrDYGHYfRdhXsiohYGS6Twb9YfxeiBzZybFuPcrv-ukOg@mail.gmail.com>
Message-ID: <CANtt_hz4BjWJpj5nZps6s1sX25UV_S3_qBieYhTUbud8EXG65A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120208/081f385a/attachment.pl>

From jgrn at illinois.edu  Wed Feb  8 23:18:15 2012
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Wed, 8 Feb 2012 16:18:15 -0600
Subject: [R-sig-Geo] rgdal loading problem...
Message-ID: <CABG0rfsct9LZfx=0-Y2tBS=StqbGmiG_9ymzLHTNJ-rW=7Njdw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120208/d83390ab/attachment.pl>

From sandeep.coepcivil at gmail.com  Wed Feb  8 23:29:59 2012
From: sandeep.coepcivil at gmail.com (Sandeep Patil)
Date: Wed, 8 Feb 2012 16:29:59 -0600
Subject: [R-sig-Geo] AutoKrige.cv error
Message-ID: <CAHnA5RXxB87=sTGAgHQT+ykj7rzoT6uO7JutCFQdQc+GDBXziw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120208/4421a509/attachment.pl>

From n.p.odgers at gmail.com  Wed Feb  8 23:35:43 2012
From: n.p.odgers at gmail.com (Nathan Odgers)
Date: Wed, 8 Feb 2012 14:35:43 -0800
Subject: [R-sig-Geo] Error in .local(.Object, ...) : Dataset copy failed
In-Reply-To: <CANtt_hz4BjWJpj5nZps6s1sX25UV_S3_qBieYhTUbud8EXG65A@mail.gmail.com>
References: <CA+EPzxrDYGHYfRdhXsiohYGS6Twb9YfxeiBzZybFuPcrv-ukOg@mail.gmail.com>
	<CANtt_hz4BjWJpj5nZps6s1sX25UV_S3_qBieYhTUbud8EXG65A@mail.gmail.com>
Message-ID: <CA+EPzxp-TN8DqK+1LC5VittakHrWQMjMqDzQ-4v00W_iUn7_0Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120208/87d0db29/attachment.pl>

From r.hijmans at gmail.com  Thu Feb  9 03:17:51 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 8 Feb 2012 18:17:51 -0800
Subject: [R-sig-Geo] dismo::gmap: can not create a RasterLayer from this
	file
In-Reply-To: <CAGfc75kjifDzj1rzmnBYQ=at3vrJoPs2Yhq_BeEmPtqAF1XBXg@mail.gmail.com>
References: <CAGfc75kjifDzj1rzmnBYQ=at3vrJoPs2Yhq_BeEmPtqAF1XBXg@mail.gmail.com>
Message-ID: <CANtt_hzCziqpC86Lr=eMTQAhRKmRt9CcvogoYBAtVLuYBYc=4w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120208/053b48da/attachment.pl>

From r.hijmans at gmail.com  Thu Feb  9 03:24:13 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 8 Feb 2012 18:24:13 -0800
Subject: [R-sig-Geo] raster package memory management
In-Reply-To: <CAPQ=hV+vP1gmNGRPRyq_9cOk1k3Zg5N6DeSPUtNBi7BcnsxSWw@mail.gmail.com>
References: <CAPQ=hV+vP1gmNGRPRyq_9cOk1k3Zg5N6DeSPUtNBi7BcnsxSWw@mail.gmail.com>
Message-ID: <CANtt_hxXgMur8-Z8s1R53mR3_saCKLf53o_fq+CO24waYwzGhg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120208/07e66060/attachment.pl>

From mathieu.rajerison at gmail.com  Thu Feb  9 08:49:52 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Thu, 9 Feb 2012 08:49:52 +0100
Subject: [R-sig-Geo] dismo::gmap: can not create a RasterLayer from this
	file
In-Reply-To: <CANtt_hzCziqpC86Lr=eMTQAhRKmRt9CcvogoYBAtVLuYBYc=4w@mail.gmail.com>
References: <CAGfc75kjifDzj1rzmnBYQ=at3vrJoPs2Yhq_BeEmPtqAF1XBXg@mail.gmail.com>
	<CANtt_hzCziqpC86Lr=eMTQAhRKmRt9CcvogoYBAtVLuYBYc=4w@mail.gmail.com>
Message-ID: <CAGfc75m1Y9NExz0Wfn=EOmsipGexEE2Mt_dFse-JyD5GBhC_1Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120209/f327ebac/attachment.pl>

From paul.hiemstra at knmi.nl  Thu Feb  9 09:25:08 2012
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Thu, 9 Feb 2012 08:25:08 +0000
Subject: [R-sig-Geo] AutoKrige.cv error
In-Reply-To: <CAHnA5RXxB87=sTGAgHQT+ykj7rzoT6uO7JutCFQdQc+GDBXziw@mail.gmail.com>
References: <CAHnA5RXxB87=sTGAgHQT+ykj7rzoT6uO7JutCFQdQc+GDBXziw@mail.gmail.com>
Message-ID: <4F3382E4.2060505@knmi.nl>

Hi Sandeep,

Please provide a reproducible example. The error seems familiar, but
without an example we cannot help you.

cheers,
Paul

On 02/08/2012 10:29 PM, Sandeep Patil wrote:
> Hello everyone,
>
> I have a spatial data frame with about 50 variables (precip and temp for
> diff months).
>
> I am using autokrige.cv to perform ordinary kriging cross validation for
> each variable.
>
> This works fine with most (~45 variables) but for about 5 variables i get a
> weird error
>
> saying that the no of locations (6076) and data (3037) do not match.
>
> This is despite the fact that i am using the same data frame for all
> variables and have same no of
>
> rows for each variable.
>
> Has anyone seen something like this before ? Any suggestion welcome.
>
> Thanks in advance,
>
> Sandeep
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From thi_veloso at yahoo.com.br  Thu Feb  9 14:38:17 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Thu, 9 Feb 2012 05:38:17 -0800
Subject: [R-sig-Geo] Combine two rasters with different spatial coverage
In-Reply-To: <CANtt_hy6kHMsKFLWMiqDTBVGqZWvK8HLkbZdQpU5EP7j0KhLTQ@mail.gmail.com>
Message-ID: <1328794697.27941.YahooMailClassic@web161406.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120209/2d47ab54/attachment.pl>

From paul.hiemstra at knmi.nl  Thu Feb  9 16:20:33 2012
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Thu, 9 Feb 2012 15:20:33 +0000
Subject: [R-sig-Geo] rgdal loading problem...
In-Reply-To: <CABG0rfsct9LZfx=0-Y2tBS=StqbGmiG_9ymzLHTNJ-rW=7Njdw@mail.gmail.com>
References: <CABG0rfsct9LZfx=0-Y2tBS=StqbGmiG_9ymzLHTNJ-rW=7Njdw@mail.gmail.com>
Message-ID: <4F33E441.6010309@knmi.nl>

The env. variable you need is probably LD_LIBRARY_PATH...

cheers,
Paul

On 02/08/2012 10:18 PM, Jonathan Greenberg wrote:
> R-sig-geo'ers:
>
> I'm trying to get the Eclipse plugin for R ("Stat-et") working, but I've
> run into a curious problem with rgdal I was hoping to get some help with.
>  When loading rgdal from within the remote connection in Eclipse, I get
> this error:
>
>> require("rgdal")
> Loading required package: rgdal
> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>   unable to load shared object
> '/usr/apps/oa/lib64/R/library/rgdal/libs/rgdal.so':
>   libgdal.so.1: cannot open shared object file: No such file or directory
>
> Other packages work fine via the remote "load", e.g.:
>> require("raster")
> Loading required package: raster
> raster version 1.9-64 (16-January-2012)
>
>
> Curiously, when launch of R via the command line (connecting to the same
> server as above via SSH) I get the normal, no-problem load:
>> require("rgdal")
> Loading required package: rgdal
> Loading required package: sp
> Geospatial Data Abstraction Library extensions to R successfully loaded
> Loaded GDAL runtime: GDAL 1.9.0, released 2011/12/29
> Path to GDAL shared files: /usr/apps/oa/share/gdal
> Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009, [PJ_VERSION: 470]
> Path to PROJ.4 shared files: (autodetected)
>
> I suspect something is going on with the environment variables between the
> Stat-ET launching of R, and the command-line launching.  A Sys.getenv()
> reveals that the environment variables are different, but I'm unclear which
> variable(s?) I should be looking for to fix this problem (or perhaps it is
> another issue altogether).  Thoughts?  Cheers!
>
> --j
>
>
>


-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From virgilio.gomez at uclm.es  Thu Feb  9 16:24:50 2012
From: virgilio.gomez at uclm.es (Virgilio =?ISO-8859-1?Q?G=F3mez-Rubio?=)
Date: Thu, 9 Feb 2012 16:24:50 +0100
Subject: [R-sig-Geo] [Fwd: gsoc 2012 officially announced!]
Message-ID: <1328801090.2161.24.camel@virgil-HP-Compaq-8000-Elite-USDT-PC>

Dear all,

I believe that this could be of interest to some of you. We have had a
few projects on spatial data analysis in past years and it will be good
to have some this year too. We are looking for students and mentors.
Check the wiki for details (see below). 

Best,

Virgilio

--------- Mensaje reenviado --------
De: Toby Dylan Hocking <Toby.Hocking at inria.fr>
Reply-to: gsoc-r at googlegroups.com
Para: gsoc-r at googlegroups.com
Asunto: gsoc 2012 officially announced!
Fecha: Thu, 09 Feb 2012 15:27:17 +0100 (CET)

The GSOC 2012 has been announced

http://www.google-melange.com/gsoc/homepage/google/gsoc2012

and I have copied the relevant dates to the R wiki page

http://rwiki.sciviews.org/doku.php?id=developers:projects:gsoc2012

Potential mentors, please add to the wiki page to give any interested
students some ideas for projects!

Potential students, look at the list of project proposals and email
the mentors if you are interested!


From thi_veloso at yahoo.com.br  Thu Feb  9 16:29:08 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Thu, 9 Feb 2012 07:29:08 -0800
Subject: [R-sig-Geo] How to change raster cell value by coordinates?
Message-ID: <1328801348.85565.YahooMailClassic@web161404.mail.bf1.yahoo.com>

  Dear list,

  I wonder if there is a way to change the values of a raster grid using the coordinates as a condition. Please consider the raster below:

> library(raster)
> amz<-raster("/home/data/amz.img")
> amz
class       : RasterLayer
dimensions  : 47, 65, 3055  (nrow, ncol, ncell)
resolution  : 0.5, 0.5  (x, y)
extent      : -74, -41.5, -17.5, 6  (xmin, xmax, ymin, ymax)
coord. ref. : NA
values      : /home/data/amz.img
min value   : 0
max value   : 1

  This is what I would like to do:

>amz[-55,2]<-0.5

  Package "raster" offers a 'replacement' function that seemed promising, but its arguments are row and column numbers, instead of coordinates.

  Could anyone please point out another option?


From roman.lustrik at gmail.com  Thu Feb  9 16:32:52 2012
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Thu, 9 Feb 2012 16:32:52 +0100
Subject: [R-sig-Geo] How to change raster cell value by coordinates?
In-Reply-To: <1328801348.85565.YahooMailClassic@web161404.mail.bf1.yahoo.com>
References: <1328801348.85565.YahooMailClassic@web161404.mail.bf1.yahoo.com>
Message-ID: <CAHT1vphvQ0OYqdcjSQS3b70B1a-PtN2vxzKyRa39RJ42K8FjBw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120209/7c0e0d1c/attachment.pl>

From etiennebr at gmail.com  Thu Feb  9 17:02:10 2012
From: etiennebr at gmail.com (Etienne B. Racine)
Date: Thu, 9 Feb 2012 11:02:10 -0500
Subject: [R-sig-Geo] Not so random sampleRandom in raster package
Message-ID: <CALjAYt5egELuh_1-x7KaZha_H3e6YVLsGt09xXfew5sEVMf59Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120209/ca4510d9/attachment.pl>

From r.hijmans at gmail.com  Thu Feb  9 17:50:06 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 9 Feb 2012 08:50:06 -0800
Subject: [R-sig-Geo] Not so random sampleRandom in raster package
In-Reply-To: <CALjAYt5egELuh_1-x7KaZha_H3e6YVLsGt09xXfew5sEVMf59Q@mail.gmail.com>
References: <CALjAYt5egELuh_1-x7KaZha_H3e6YVLsGt09xXfew5sEVMf59Q@mail.gmail.com>
Message-ID: <CANtt_hwdsYSRPEzhzrc_8kutrzCH9cU4LPfEmhTr5A5Xo2zA+w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120209/2b296efa/attachment.pl>

From edzer.pebesma at uni-muenster.de  Thu Feb  9 17:58:04 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 09 Feb 2012 17:58:04 +0100
Subject: [R-sig-Geo] Not so random sampleRandom in raster package
In-Reply-To: <CALjAYt5egELuh_1-x7KaZha_H3e6YVLsGt09xXfew5sEVMf59Q@mail.gmail.com>
References: <CALjAYt5egELuh_1-x7KaZha_H3e6YVLsGt09xXfew5sEVMf59Q@mail.gmail.com>
Message-ID: <4F33FB1C.3050503@uni-muenster.de>



On 02/09/2012 05:02 PM, Etienne B. Racine wrote:
> It seems that sampleRandom isn't so random.
> 
> # try this :
> library(raster)
> r <- raster(matrix(1:25, 5, 5))
> sampleRandom(r, 25)
> ## 1 6 11 16 21 2 7 12 17 22 3 8 13 18 23 4 9 14 19 24 5 10 15
> sampleRandom(r, 25)
> ## 1 6 11 16 21 2 7 12 17 22 3 8 13 18 23 4 9 14 19 24 5 10 15
> 
> I haven't seen any documentation about this behavior.
> 

Isn't the more important question whether you saw documentation that is
in conflict with this behaviour?

> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From etiennebr at gmail.com  Thu Feb  9 20:14:33 2012
From: etiennebr at gmail.com (Etienne B. Racine)
Date: Thu, 9 Feb 2012 14:14:33 -0500
Subject: [R-sig-Geo] Not so random sampleRandom in raster package
In-Reply-To: <4F33FB1C.3050503@uni-muenster.de>
References: <CALjAYt5egELuh_1-x7KaZha_H3e6YVLsGt09xXfew5sEVMf59Q@mail.gmail.com>
	<4F33FB1C.3050503@uni-muenster.de>
Message-ID: <CALjAYt7hMfcgOwgdVdAPtesZT7-3o+0vxmREyh2kptyexm3=AA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120209/8b09fe37/attachment.pl>

From jgrn at illinois.edu  Thu Feb  9 20:31:16 2012
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Thu, 9 Feb 2012 13:31:16 -0600
Subject: [R-sig-Geo] GDALinfo to get hdf metadata
Message-ID: <CABG0rfv48rQqVMVSiHWSckTX0pmtBKe0_8RgmAJidHTaFYAyEQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120209/541f199d/attachment.pl>

From jgrn at illinois.edu  Thu Feb  9 20:33:27 2012
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Thu, 9 Feb 2012 13:33:27 -0600
Subject: [R-sig-Geo] rgdal loading problem...
In-Reply-To: <4F33E441.6010309@knmi.nl>
References: <CABG0rfsct9LZfx=0-Y2tBS=StqbGmiG_9ymzLHTNJ-rW=7Njdw@mail.gmail.com>
	<4F33E441.6010309@knmi.nl>
Message-ID: <CABG0rfuM+=eR_jMA0+wTJj5DTtJNMS-PxaVACm-k8-pcnEjmsg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120209/30a6ff62/attachment.pl>

From satish.regonda at gmail.com  Thu Feb  9 21:19:37 2012
From: satish.regonda at gmail.com (satishr)
Date: Thu, 9 Feb 2012 12:19:37 -0800 (PST)
Subject: [R-sig-Geo] unable to customize a plot produced from a shapefile
Message-ID: <1328818777002-7270579.post@n2.nabble.com>

Hi, 
  I read ESRI shapefile and related files using readOGR, and was able to
plot successfully but am unable to customize the plot. The data is attached
and corresponds to US climate divisions.
  The below mentioned second command supposed to produce a plot of sub
region of the USA but it's not. I tried using readShapePoly but no success.
In addition, I found a lot of space on top of the picture and want to reduce
it, but not sure how to do it. I request you to provide suggestions. 
Thanks,
Satish


> climagdiv = readOGR("US102ClimateDivisions", "US102ClimateDivisions") 
OGR data source with driver: ESRI Shapefile 
Source: "US102ClimateDivisions", layer: "US102ClimateDivisions" 
with 102 features and 5 fields 
Feature type: wkbPolygon with 2 dimensions 
> plot(climagdiv)
> plot(climagdiv,ylim=c(20,40))


>climagdiv = readShapePoly("US102ClimateDivisions.shp") 
> plot(climagdiv)
> plot(climagdiv,ylim=c(20,40))

Data:
http://r-sig-geo.2731867.n2.nabble.com/file/n7270579/US102ClimateDivisions.zip
US102ClimateDivisions.zip 

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/unable-to-customize-a-plot-produced-from-a-shapefile-tp7270579p7270579.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From villers.alexandre at gmail.com  Thu Feb  9 21:39:24 2012
From: villers.alexandre at gmail.com (Alexandre Villers)
Date: Thu, 09 Feb 2012 22:39:24 +0200
Subject: [R-sig-Geo] unable to customize a plot produced from a shapefile
In-Reply-To: <1328818777002-7270579.post@n2.nabble.com>
References: <1328818777002-7270579.post@n2.nabble.com>
Message-ID: <4F342EFC.1040807@gmail.com>

Hi,

You should have a look at the documentation (e.g. manuals) available on 
graphics in R (on the CRAN website, hhttp://cran.r-project.org/) to 
learn how to set the parameters of a R graphic, and more specifically at 
the spplot function (from package sp) for spatial objects (the ASDAR 
book of Roger Bivand et al. is worth the look  
http://www.springer.com/public+health/book/978-0-387-78170-9 ).
There are also several web sites showing this: just google "plot spatial 
data r" and you should find what you are looking for.

HTH


Alex


Le 09/02/2012 22:19, satishr a ?crit :
> Hi,
>    I read ESRI shapefile and related files using readOGR, and was able to
> plot successfully but am unable to customize the plot. The data is attached
> and corresponds to US climate divisions.
>    The below mentioned second command supposed to produce a plot of sub
> region of the USA but it's not. I tried using readShapePoly but no success.
> In addition, I found a lot of space on top of the picture and want to reduce
> it, but not sure how to do it. I request you to provide suggestions.
> Thanks,
> Satish
>
>
>> climagdiv = readOGR("US102ClimateDivisions", "US102ClimateDivisions")
> OGR data source with driver: ESRI Shapefile
> Source: "US102ClimateDivisions", layer: "US102ClimateDivisions"
> with 102 features and 5 fields
> Feature type: wkbPolygon with 2 dimensions
>> plot(climagdiv)
>> plot(climagdiv,ylim=c(20,40))
>
>> climagdiv = readShapePoly("US102ClimateDivisions.shp")
>> plot(climagdiv)
>> plot(climagdiv,ylim=c(20,40))
> Data:
> http://r-sig-geo.2731867.n2.nabble.com/file/n7270579/US102ClimateDivisions.zip
> US102ClimateDivisions.zip
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/unable-to-customize-a-plot-produced-from-a-shapefile-tp7270579p7270579.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From r.hijmans at gmail.com  Fri Feb 10 07:56:32 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 9 Feb 2012 22:56:32 -0800
Subject: [R-sig-Geo] Not so random sampleRandom in raster package
In-Reply-To: <CALjAYt7hMfcgOwgdVdAPtesZT7-3o+0vxmREyh2kptyexm3=AA@mail.gmail.com>
References: <CALjAYt5egELuh_1-x7KaZha_H3e6YVLsGt09xXfew5sEVMf59Q@mail.gmail.com>
	<4F33FB1C.3050503@uni-muenster.de>
	<CALjAYt7hMfcgOwgdVdAPtesZT7-3o+0vxmREyh2kptyexm3=AA@mail.gmail.com>
Message-ID: <CANtt_hyFzHD6QZ8GQBR6+-D6Hpzp-YOEhOZo7X8Df47ea7X-OA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120209/52dd15bf/attachment.pl>

From tom.gottfried at tum.de  Fri Feb 10 08:00:46 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Fri, 10 Feb 2012 08:00:46 +0100
Subject: [R-sig-Geo] Not so random sampleRandom in raster package
In-Reply-To: <4F33FB1C.3050503@uni-muenster.de>
References: <CALjAYt5egELuh_1-x7KaZha_H3e6YVLsGt09xXfew5sEVMf59Q@mail.gmail.com>
	<4F33FB1C.3050503@uni-muenster.de>
Message-ID: <4F34C09E.3020300@tum.de>

Edzer,

Am 09.02.2012 17:58, schrieb Edzer Pebesma:
>
>
> On 02/09/2012 05:02 PM, Etienne B. Racine wrote:
>> It seems that sampleRandom isn't so random.
>>
>> # try this :
>> library(raster)
>> r<- raster(matrix(1:25, 5, 5))
>> sampleRandom(r, 25)
>> ## 1 6 11 16 21 2 7 12 17 22 3 8 13 18 23 4 9 14 19 24 5 10 15
>> sampleRandom(r, 25)
>> ## 1 6 11 16 21 2 7 12 17 22 3 8 13 18 23 4 9 14 19 24 5 10 15
>>
>> I haven't seen any documentation about this behavior.
>>
>
> Isn't the more important question whether you saw documentation that is
> in conflict with this behaviour?

taking that to the extremes: undocumented software always works perfectly.

(By the way I've heard that's the way ESRI did it with their 
"Geostatistical Analyst")

Sorry for missing the topic of the thread.
Tom

>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From edzer.pebesma at uni-muenster.de  Fri Feb 10 08:29:25 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 10 Feb 2012 08:29:25 +0100
Subject: [R-sig-Geo] Not so random sampleRandom in raster package
In-Reply-To: <4F34C09E.3020300@tum.de>
References: <CALjAYt5egELuh_1-x7KaZha_H3e6YVLsGt09xXfew5sEVMf59Q@mail.gmail.com>
	<4F33FB1C.3050503@uni-muenster.de> <4F34C09E.3020300@tum.de>
Message-ID: <4F34C755.60405@uni-muenster.de>



On 02/10/2012 08:00 AM, Tom Gottfried wrote:
> Edzer,
> 
> Am 09.02.2012 17:58, schrieb Edzer Pebesma:
>>
>>
>> On 02/09/2012 05:02 PM, Etienne B. Racine wrote:
>>> It seems that sampleRandom isn't so random.
>>>
>>> # try this :
>>> library(raster)
>>> r<- raster(matrix(1:25, 5, 5))
>>> sampleRandom(r, 25)
>>> ## 1 6 11 16 21 2 7 12 17 22 3 8 13 18 23 4 9 14 19 24 5 10 15
>>> sampleRandom(r, 25)
>>> ## 1 6 11 16 21 2 7 12 17 22 3 8 13 18 23 4 9 14 19 24 5 10 15
>>>
>>> I haven't seen any documentation about this behavior.
>>>
>>
>> Isn't the more important question whether you saw documentation that is
>> in conflict with this behaviour?
> 
> taking that to the extremes: undocumented software always works perfectly.

And is useless, too -- no, these kind of questions are often highly
useful because they improve software or the documentation, and both are
valuable activities.

>From the base::sample analogy, I would have expected a random
permutation, so IMO it would make sense to document this is not the case
(the function is not called sample, anyway -- question are: what would
the random permutation be good for? and would it still perform well when
the image is huge?)

> 
> (By the way I've heard that's the way ESRI did it with their
> "Geostatistical Analyst")
> 
You might be mixing up things here or have outdated information; the
author of Geostatistical Analyst published in 2011 (at ESRI press) a
nearly 1000 page e-book "Spatial Statistical Data Analysis for GIS
users", which obviously addresses ArcGIS, but also R and WinBugs for
areas where ArcGIS does not offer solutions. He is on this list, too.
-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From tom.gottfried at tum.de  Fri Feb 10 09:51:45 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Fri, 10 Feb 2012 09:51:45 +0100
Subject: [R-sig-Geo] Not so random sampleRandom in raster package
In-Reply-To: <4F34C755.60405@uni-muenster.de>
References: <CALjAYt5egELuh_1-x7KaZha_H3e6YVLsGt09xXfew5sEVMf59Q@mail.gmail.com>	<4F33FB1C.3050503@uni-muenster.de>
	<4F34C09E.3020300@tum.de> <4F34C755.60405@uni-muenster.de>
Message-ID: <4F34DAA1.1090803@tum.de>

Am 10.02.2012 08:29, schrieb Edzer Pebesma:
>
>
> On 02/10/2012 08:00 AM, Tom Gottfried wrote:
>> Edzer,
>>
>> Am 09.02.2012 17:58, schrieb Edzer Pebesma:
>>>
>>>
>>> On 02/09/2012 05:02 PM, Etienne B. Racine wrote:
>>>> It seems that sampleRandom isn't so random.
>>>>
>>>> # try this :
>>>> library(raster)
>>>> r<- raster(matrix(1:25, 5, 5))
>>>> sampleRandom(r, 25)
>>>> ## 1 6 11 16 21 2 7 12 17 22 3 8 13 18 23 4 9 14 19 24 5 10 15
>>>> sampleRandom(r, 25)
>>>> ## 1 6 11 16 21 2 7 12 17 22 3 8 13 18 23 4 9 14 19 24 5 10 15
>>>>
>>>> I haven't seen any documentation about this behavior.
>>>>
>>>
>>> Isn't the more important question whether you saw documentation that is
>>> in conflict with this behaviour?
>>
>> taking that to the extremes: undocumented software always works perfectly.
>
> And is useless, too -- no, these kind of questions are often highly
> useful because they improve software or the documentation, and both are
> valuable activities.
>
>> From the base::sample analogy, I would have expected a random
> permutation, so IMO it would make sense to document this is not the case
> (the function is not called sample, anyway -- question are: what would
> the random permutation be good for? and would it still perform well when
> the image is huge?)
>
>>
>> (By the way I've heard that's the way ESRI did it with their
>> "Geostatistical Analyst")
>>
> You might be mixing up things here or have outdated information; the
> author of Geostatistical Analyst published in 2011 (at ESRI press) a
> nearly 1000 page e-book "Spatial Statistical Data Analysis for GIS
> users", which obviously addresses ArcGIS, but also R and WinBugs for
> areas where ArcGIS does not offer solutions. He is on this list, too.

thanks, just ordered from the library to have a look and spread the word.

Tom

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From pinaud at cebc.cnrs.fr  Fri Feb 10 10:51:08 2012
From: pinaud at cebc.cnrs.fr (Pinaud David)
Date: Fri, 10 Feb 2012 10:51:08 +0100
Subject: [R-sig-Geo] identical(coordinates)
Message-ID: <4F34E88C.4070902@cebc.cnrs.fr>

Dear all,
I need to convert several times sp objects from data.frame and use 
zerodist2() to match locations.
As zerodist2() seems to use identical(), something seems strange to me:

library(sp)

xy <- data.frame(x=rnorm(4), y=rnorm(4))
dfxy <- xy
coordinates(xy) <- ~ x + y
dfxy[1,1]
coordinates(xy)[1,1]

identical(dfxy[1,1], coordinates(xy)[1,1])
 > FALSE        # I should expect TRUE!?
coordinates(dfxy) <- ~ x + y
identical(coordinates(dfxy)[1,1], coordinates(xy)[1,1])
 > TRUE

Why identical(dfxy[1,1], coordinates(xy)[1,1]) gives FALSE?

Thanks,
David

sessionInfo()
R version 2.14.1 (2011-12-22)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=French_France.1252  LC_CTYPE=French_France.1252    
LC_MONETARY=French_France.1252 LC_NUMERIC=C
[5] LC_TIME=French_France.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
  [1] rgdal_0.7-5     trip_1.1-10     maptools_0.8-12 lattice_0.20-0  
foreign_0.8-48  rgeos_0.1-17    stringr_0.6
  [8] sp_0.9-93       spatstat_1.25-1 deldir_0.0-16   mgcv_1.7-12

loaded via a namespace (and not attached):
[1] grid_2.14.1  Matrix_1.0-2 nlme_3.1-102 plyr_1.7.1   tools_2.14.1


-- 
***************************************************
Dr. David PINAUD
Ing?nieur de Recherche "Analyses spatiales"

Centre d'Etudes Biologiques de Chiz? - CNRS UPR1934
79360 Villiers-en-Bois, France
poste 485
Tel: +33 (0)5.49.09.35.58
Fax: +33 (0)5.49.09.65.26
http://www.cebc.cnrs.fr/

***************************************************

-------------- next part --------------
A non-text attachment was scrubbed...
Name: pinaud.vcf
Type: text/x-vcard
Size: 324 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120210/366833d1/attachment.vcf>

From Roger.Bivand at nhh.no  Fri Feb 10 11:00:20 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 10 Feb 2012 11:00:20 +0100 (CET)
Subject: [R-sig-Geo] identical(coordinates)
In-Reply-To: <4F34E88C.4070902@cebc.cnrs.fr>
References: <4F34E88C.4070902@cebc.cnrs.fr>
Message-ID: <alpine.LRH.2.02.1202101059370.24402@reclus.nhh.no>

On Fri, 10 Feb 2012, Pinaud David wrote:

> Dear all,
> I need to convert several times sp objects from data.frame and use 
> zerodist2() to match locations.
> As zerodist2() seems to use identical(), something seems strange to me:
>
> library(sp)
>
> xy <- data.frame(x=rnorm(4), y=rnorm(4))
> dfxy <- xy
> coordinates(xy) <- ~ x + y
> dfxy[1,1]
> coordinates(xy)[1,1]
>
> identical(dfxy[1,1], coordinates(xy)[1,1])
>> FALSE        # I should expect TRUE!?
> coordinates(dfxy) <- ~ x + y
> identical(coordinates(dfxy)[1,1], coordinates(xy)[1,1])
>> TRUE
>
> Why identical(dfxy[1,1], coordinates(xy)[1,1]) gives FALSE?

str(coordinates(xy)[1,1]) shows that it is named, so:

> identical(dfxy[1,1,drop=TRUE], unname(coordinates(xy)[1,1]))
[1] TRUE

Roger

>
> Thanks,
> David
>
> sessionInfo()
> R version 2.14.1 (2011-12-22)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=French_France.1252  LC_CTYPE=French_France.1252 
> LC_MONETARY=French_France.1252 LC_NUMERIC=C
> [5] LC_TIME=French_France.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] rgdal_0.7-5     trip_1.1-10     maptools_0.8-12 lattice_0.20-0 
> foreign_0.8-48  rgeos_0.1-17    stringr_0.6
> [8] sp_0.9-93       spatstat_1.25-1 deldir_0.0-16   mgcv_1.7-12
>
> loaded via a namespace (and not attached):
> [1] grid_2.14.1  Matrix_1.0-2 nlme_3.1-102 plyr_1.7.1   tools_2.14.1
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From edzer.pebesma at uni-muenster.de  Fri Feb 10 11:00:59 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 10 Feb 2012 11:00:59 +0100
Subject: [R-sig-Geo] identical(coordinates)
In-Reply-To: <4F34E88C.4070902@cebc.cnrs.fr>
References: <4F34E88C.4070902@cebc.cnrs.fr>
Message-ID: <4F34EADB.8040904@uni-muenster.de>



On 02/10/2012 10:51 AM, Pinaud David wrote:
> Dear all,
> I need to convert several times sp objects from data.frame and use
> zerodist2() to match locations.
> As zerodist2() seems to use identical(), something seems strange to me:
> 
> library(sp)
> 
> xy <- data.frame(x=rnorm(4), y=rnorm(4))
> dfxy <- xy
> coordinates(xy) <- ~ x + y
> dfxy[1,1]
> coordinates(xy)[1,1]
> 
> identical(dfxy[1,1], coordinates(xy)[1,1])
>> FALSE        # I should expect TRUE!?
> coordinates(dfxy) <- ~ x + y
> identical(coordinates(dfxy)[1,1], coordinates(xy)[1,1])
>> TRUE
> 
> Why identical(dfxy[1,1], coordinates(xy)[1,1]) gives FALSE?
> 

read a bit further in ?identical, and try:

> all.equal(dfxy[1,1], coordinates(xy)[1,1])
[1] "names for current but not for target"

> (dfxy[1,1])
[1] 2.787465
> coordinates(xy)[1,1]
       x
2.787465


> Thanks,
> David
> 
> sessionInfo()
> R version 2.14.1 (2011-12-22)
> Platform: i386-pc-mingw32/i386 (32-bit)
> 
> locale:
> [1] LC_COLLATE=French_France.1252  LC_CTYPE=French_France.1252   
> LC_MONETARY=French_France.1252 LC_NUMERIC=C
> [5] LC_TIME=French_France.1252
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
>  [1] rgdal_0.7-5     trip_1.1-10     maptools_0.8-12 lattice_0.20-0 
> foreign_0.8-48  rgeos_0.1-17    stringr_0.6
>  [8] sp_0.9-93       spatstat_1.25-1 deldir_0.0-16   mgcv_1.7-12
> 
> loaded via a namespace (and not attached):
> [1] grid_2.14.1  Matrix_1.0-2 nlme_3.1-102 plyr_1.7.1   tools_2.14.1
> 
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From janverbesselt at gmail.com  Fri Feb 10 11:16:18 2012
From: janverbesselt at gmail.com (Jan Verbesselt)
Date: Fri, 10 Feb 2012 11:16:18 +0100
Subject: [R-sig-Geo] GDALinfo to get hdf metadata
In-Reply-To: <CABG0rfv48rQqVMVSiHWSckTX0pmtBKe0_8RgmAJidHTaFYAyEQ@mail.gmail.com>
References: <CABG0rfv48rQqVMVSiHWSckTX0pmtBKe0_8RgmAJidHTaFYAyEQ@mail.gmail.com>
Message-ID: <FFD44B11-A048-4F02-A46A-9EFB452EF196@gmail.com>

Hi Jonathan,

Maybe this helps:

> library(rgdal)
Geospatial Data Abstraction Library extensions to R successfully loaded
Loaded GDAL runtime: GDAL 1.8.1, released 2011/07/09
Path to GDAL shared files: /Library/Frameworks/GDAL.framework/Versions/1.8/Resources/gdal
Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009, [PJ_VERSION: 470]
Path to PROJ.4 shared files: (autodetected)
> GDALinfo('MOD13C1.A2000049.005.2006271195746.hdf')
rows        512 
columns     512 
bands       0 
origin.x        0 
origin.y        0 
res.x       1 
res.y       1 
ysign       -1 
oblique.x   0 
oblique.y   0 
driver      HDF4 
projection  NA 
*****

> inf <- GDALinfo('MOD13C1.A2000049.005.2006271195746.hdf')
Warning messages:
1: In dim(x) : no bands in dataset
2: In GDALinfo("MOD13C1.A2000049.005.2006271195746.hdf") :
  GeoTransform values not available
> attr(info,"subdsmdata")
Error: object 'info' not found
> attr(inf,"subdsmdata")
 [1] "SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:\"MOD13C1.A2000049.005.2006271195746.hdf\":MODIS_Grid_16Day_VI_CMG:CMG 0.05 Deg 16 days NDVI"                
 [2] "SUBDATASET_1_DESC=[3600x7200] CMG 0.05 Deg 16 days NDVI MODIS_Grid_16Day_VI_CMG (16-bit integer)"                                                
 [3] "SUBDATASET_2_NAME=HDF4_EOS:EOS_GRID:\"MOD13C1.A2000049.005.2006271195746.hdf\":MODIS_Grid_16Day_VI_CMG:CMG 0.05 Deg 16 days EVI"                 
 [4] "SUBDATASET_2_DESC=[3600x7200] CMG 0.05 Deg 16 days EVI MODIS_Grid_16Day_VI_CMG (16-bit integer)"                                                 
 [5] "SUBDATASET_3_NAME=HDF4_EOS:EOS_GRID:\"MOD13C1.A2000049.005.2006271195746.hdf\":MODIS_Grid_16Day_VI_CMG:CMG 0.05 Deg 16 days VI Quality"          
 [6] "SUBDATASET_3_DESC=[3600x7200] CMG 0.05 Deg 16 days VI Quality MODIS_Grid_16Day_VI_CMG (16-bit unsigned integer)"                                 
 [7] "SUBDATASET_4_NAME=HDF4_EOS:EOS_GRID:\"MOD13C1.A2000049.005.2006271195746.hdf\":MODIS_Grid_16Day_VI_CMG:CMG 0.05 Deg 16 days red reflectance"     
 [8] "SUBDATASET_4_DESC=[3600x7200] CMG 0.05 Deg 16 days red reflectance MODIS_Grid_16Day_VI_CMG (16-bit integer)"                                     
 [9] "SUBDATASET_5_NAME=HDF4_EOS:EOS_GRID:\"MOD13C1.A2000049.005.2006271195746.hdf\":MODIS_Grid_16Day_VI_CMG:CMG 0.05 Deg 16 days NIR reflectance"     
[10] "SUBDATASET_5_DESC=[3600x7200] CMG 0.05 Deg 16 days NIR reflectance MODIS_Grid_16Day_VI_CMG (16-bit integer)"                                     
[11] "SUBDATASET_6_NAME=HDF4_EOS:EOS_GRID:\"MOD13C1.A2000049.005.2006271195746.hdf\":MODIS_Grid_16Day_VI_CMG:CMG 0.05 Deg 16 days blue reflectance"    
[12] "SUBDATASET_6_DESC=[3600x7200] CMG 0.05 Deg 16 days blue reflectance MODIS_Grid_16Day_VI_CMG (16-bit integer)"                                    
[13] "SUBDATASET_7_NAME=HDF4_EOS:EOS_GRID:\"MOD13C1.A2000049.005.2006271195746.hdf\":MODIS_Grid_16Day_VI_CMG:CMG 0.05 Deg 16 days MIR reflectance"     
[14] "SUBDATASET_7_DESC=[3600x7200] CMG 0.05 Deg 16 days MIR reflectance MODIS_Grid_16Day_VI_CMG (16-bit integer)"                                     
[15] "SUBDATASET_8_NAME=HDF4_EOS:EOS_GRID:\"MOD13C1.A2000049.005.2006271195746.hdf\":MODIS_Grid_16Day_VI_CMG:CMG 0.05 Deg 16 days Avg sun zen angle"   
[16] "SUBDATASET_8_DESC=[3600x7200] CMG 0.05 Deg 16 days Avg sun zen angle MODIS_Grid_16Day_VI_CMG (16-bit integer)"                                   
[17] "SUBDATASET_9_NAME=HDF4_EOS:EOS_GRID:\"MOD13C1.A2000049.005.2006271195746.hdf\":MODIS_Grid_16Day_VI_CMG:CMG 0.05 Deg 16 days NDVI std dev"        
[18] "SUBDATASET_9_DESC=[3600x7200] CMG 0.05 Deg 16 days NDVI std dev MODIS_Grid_16Day_VI_CMG (16-bit integer)"                                        
[19] "SUBDATASET_10_NAME=HDF4_EOS:EOS_GRID:\"MOD13C1.A2000049.005.2006271195746.hdf\":MODIS_Grid_16Day_VI_CMG:CMG 0.05 Deg 16 days EVI std dev"        
[20] "SUBDATASET_10_DESC=[3600x7200] CMG 0.05 Deg 16 days EVI std dev MODIS_Grid_16Day_VI_CMG (16-bit integer)"                                        
[21] "SUBDATASET_11_NAME=HDF4_EOS:EOS_GRID:\"MOD13C1.A2000049.005.2006271195746.hdf\":MODIS_Grid_16Day_VI_CMG:CMG 0.05 Deg 16 days #1km pix used"      
[22] "SUBDATASET_11_DESC=[3600x7200] CMG 0.05 Deg 16 days #1km pix used MODIS_Grid_16Day_VI_CMG (8-bit unsigned integer)"                              
[23] "SUBDATASET_12_NAME=HDF4_EOS:EOS_GRID:\"MOD13C1.A2000049.005.2006271195746.hdf\":MODIS_Grid_16Day_VI_CMG:CMG 0.05 Deg 16 days #1km pix +-30deg VZ"
[24] "SUBDATASET_12_DESC=[3600x7200] CMG 0.05 Deg 16 days #1km pix +-30deg VZ MODIS_Grid_16Day_VI_CMG (8-bit unsigned integer)"                        
[25] "SUBDATASET_13_NAME=HDF4_EOS:EOS_GRID:\"MOD13C1.A2000049.005.2006271195746.hdf\":MODIS_Grid_16Day_VI_CMG:CMG 0.05 Deg 16 days pixel reliability"  
[26] "SUBDATASET_13_DESC=[3600x7200] CMG 0.05 Deg 16 days pixel reliability MODIS_Grid_16Day_VI_CMG (8-bit integer)"                                   
> str(inf)
Class 'GDALobj'  atomic [1:9] 512 512 0 0 0 1 1 0 0
  ..- attr(*, "ysign")= num -1
  ..- attr(*, "driver")= chr "HDF4"
  ..- attr(*, "projection")= chr NA
  ..- attr(*, "file")= chr "MOD13C1.A2000049.005.2006271195746.hdf"
  ..- attr(*, "mdata")= chr [1:173] "HDFEOSVersion=HDFEOS_V2.9" "LOCALGRANULEID=MOD13C1.A2000049.005.2006271195746.hdf" "PRODUCTIONDATETIME=2006-09-28T19:57:46.000Z" "DAYNIGHTFLAG=Both" ...
  ..- attr(*, "subdsmdata")= chr [1:26] "SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:\"MOD13C1.A2000049.005.2006271195746.hdf\":MODIS_Grid_16Day_VI_CMG:CMG 0.05 Deg 16 days NDV"| __truncated__ "SUBDATASET_1_DESC=[3600x7200] CMG 0.05 Deg 16 days NDVI MODIS_Grid_16Day_VI_CMG (16-bit integer)" "SUBDATASET_2_NAME=HDF4_EOS:EOS_GRID:\"MOD13C1.A2000049.005.2006271195746.hdf\":MODIS_Grid_16Day_VI_CMG:CMG 0.05 Deg 16 days EVI"| __truncated__ "SUBDATASET_2_DESC=[3600x7200] CMG 0.05 Deg 16 days EVI MODIS_Grid_16Day_VI_CMG (16-bit integer)" ...
> 

Best,
Jan

Dr. ir. Jan Verbesselt
Centre for Geo-information
Wageningen University, The Netherlands
T: + 31 317 48 52 68
http://bfast.r-forge.r-project.org/
http://www.mendeley.com/profiles/jan-verbesselt/
http://eeecon.uibk.ac.at/wopec2/repec/inn/wpaper/2011-18.pdf (in review)


On 09/02/2012, at 8:31 PM, Jonathan Greenberg wrote:

> R-sig-geo'ers:
> 
> I'm trying to figure out how to "capture" metadata from the GDALinfo call
> on an HDF file -- running GDALinfo("some.hdf") displays all the metadata,
> but I can seem to figure out how to extract this data.  All I can see as
> extractable variables are:
> 
> [1] "rows"      "columns"   "bands"     "ll.x"      "ll.y"      "res.x"
> [7] "res.y"     "oblique.x" "oblique.y"
> 
> --j
> 
> -- 
> Jonathan A. Greenberg, PhD
> Assistant Professor
> Department of Geography
> University of Illinois at Urbana-Champaign
> 607 South Mathews Avenue, MC 150
> Urbana, IL 61801
> Phone: 415-763-5476
> AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
> http://www.geog.illinois.edu/people/JonathanGreenberg.html
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From kidsmake6 at msn.com  Fri Feb 10 15:03:51 2012
From: kidsmake6 at msn.com (Brad Nesom)
Date: Fri, 10 Feb 2012 08:03:51 -0600
Subject: [R-sig-Geo] Not so random sampleRandom in raster package
In-Reply-To: <4F34C09E.3020300@tum.de>
References: <CALjAYt5egELuh_1-x7KaZha_H3e6YVLsGt09xXfew5sEVMf59Q@mail.gmail.com>
	<4F33FB1C.3050503@uni-muenster.de> <4F34C09E.3020300@tum.de>
Message-ID: <CAPD=LeuUOpsb_x6=oRtLETBHVYM4paEZTLvjyuWpAnHKvyEd_A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120210/d464ab51/attachment.pl>

From etiennebr at gmail.com  Fri Feb 10 16:23:53 2012
From: etiennebr at gmail.com (Etienne B. Racine)
Date: Fri, 10 Feb 2012 10:23:53 -0500
Subject: [R-sig-Geo] Not so random sampleRandom in raster package
In-Reply-To: <CAPD=LeuUOpsb_x6=oRtLETBHVYM4paEZTLvjyuWpAnHKvyEd_A@mail.gmail.com>
References: <CALjAYt5egELuh_1-x7KaZha_H3e6YVLsGt09xXfew5sEVMf59Q@mail.gmail.com>
	<4F33FB1C.3050503@uni-muenster.de> <4F34C09E.3020300@tum.de>
	<CAPD=LeuUOpsb_x6=oRtLETBHVYM4paEZTLvjyuWpAnHKvyEd_A@mail.gmail.com>
Message-ID: <CALjAYt6-ZA5Rhzhfaw3dxkaQT8iTUAorfTio6cNRcc94DhtRGg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120210/aeb93fb9/attachment.pl>

From satish.regonda at gmail.com  Fri Feb 10 17:09:11 2012
From: satish.regonda at gmail.com (Satish Regonda)
Date: Fri, 10 Feb 2012 11:09:11 -0500
Subject: [R-sig-Geo] unable to customize a plot produced from a shapefile
In-Reply-To: <4F342EFC.1040807@gmail.com>
References: <1328818777002-7270579.post@n2.nabble.com>
	<4F342EFC.1040807@gmail.com>
Message-ID: <CACQSnN8oWi2UHgsM=vcERbKNQzhfA+K-+60jzKZizdV-Qk_DoQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120210/30ae8045/attachment.pl>

From rrasterr at gmail.com  Fri Feb 10 18:13:58 2012
From: rrasterr at gmail.com (Ana)
Date: Fri, 10 Feb 2012 09:13:58 -0800 (PST)
Subject: [R-sig-Geo] sample points - sp package
Message-ID: <1328894038296-7273420.post@n2.nabble.com>

When I make a sample in sp, for example a random samping of 5 points in
dataset1:

sample.dataset1=spsample(dataset1, n = 5, "random")

I have a sp object for the selected sampling...

My question is : How can I extract from dataset2 the points & data for the
coordinates(sample.dataset1) ?

The dataset2 would be an object with the same area and coordinate system,
but I would like to extract for the coordinates of sample.dataset1 the data
in each point for dataset2.

I didn't found a way to do this in the sp package docs, but I might have
missed it. 

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/sample-points-sp-package-tp7273420p7273420.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From edzer.pebesma at uni-muenster.de  Fri Feb 10 19:54:49 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 10 Feb 2012 19:54:49 +0100
Subject: [R-sig-Geo] sample points - sp package
In-Reply-To: <1328894038296-7273420.post@n2.nabble.com>
References: <1328894038296-7273420.post@n2.nabble.com>
Message-ID: <4F3567F9.6020709@uni-muenster.de>



On 02/10/2012 06:13 PM, Ana wrote:
> When I make a sample in sp, for example a random samping of 5 points in
> dataset1:
> 
> sample.dataset1=spsample(dataset1, n = 5, "random")
> 
> I have a sp object for the selected sampling...
> 
> My question is : How can I extract from dataset2 the points & data for the
> coordinates(sample.dataset1) ?
> 
> The dataset2 would be an object with the same area and coordinate system,
> but I would like to extract for the coordinates of sample.dataset1 the data
> in each point for dataset2.
> 

over(sample.dataset1, dataset2)

> I didn't found a way to do this in the sp package docs, but I might have
> missed it. 

http://cran.r-project.org/web/packages/sp/vignettes/over.pdf

> 
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/sample-points-sp-package-tp7273420p7273420.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From etiennebr at gmail.com  Fri Feb 10 23:19:21 2012
From: etiennebr at gmail.com (etiennebr)
Date: Fri, 10 Feb 2012 14:19:21 -0800 (PST)
Subject: [R-sig-Geo] help to create a raster BRICK from a list
In-Reply-To: <CAJ6JbR_i+K6+mbqit9Zvme25VFTKhHaKwLgSw=5fJo=u=tGMog@mail.gmail.com>
References: <CAJ6JbR_i+K6+mbqit9Zvme25VFTKhHaKwLgSw=5fJo=u=tGMog@mail.gmail.com>
Message-ID: <1328912361826-7274487.post@n2.nabble.com>

Gianni,

Try
my.Area.tot <- sapply(fileNames, raster)  # this is equivalent to your for
loop
b <- brick(my.Area.tot)

Etienne

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/help-to-create-a-raster-BRICK-from-a-list-tp7266815p7274487.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From samanmonfared1 at gmail.com  Sat Feb 11 03:14:20 2012
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Sat, 11 Feb 2012 05:44:20 +0330
Subject: [R-sig-Geo] help for emperical spatio-temporal
Message-ID: <CAOytA4bBb7_rZDbSyjUZsCwxJzx4s6aNqk_CWtBjya6o957Hbg@mail.gmail.com>

Dear All.
I need help for calculate empirical spatio-temporal variogram or covariance.
for example Irish wind data.

-- 

Saman Monfared
Msc Student,
Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167


From heimann.richard at gmail.com  Sat Feb 11 05:21:46 2012
From: heimann.richard at gmail.com (Rich Heimann)
Date: Sat, 11 Feb 2012 08:51:46 +0430
Subject: [R-sig-Geo] Comprehensive R package for Spatial Stats
Message-ID: <CAPAHiAL8uJ6JvJUHHRXo6PzJhJiCY+Q2SftGaKGk=6qDVP6npg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120211/d07fb9fb/attachment.pl>

From tom.gottfried at tum.de  Sat Feb 11 09:49:04 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Sat, 11 Feb 2012 09:49:04 +0100
Subject: [R-sig-Geo] help for emperical spatio-temporal
In-Reply-To: <CAOytA4bBb7_rZDbSyjUZsCwxJzx4s6aNqk_CWtBjya6o957Hbg@mail.gmail.com>
References: <CAOytA4bBb7_rZDbSyjUZsCwxJzx4s6aNqk_CWtBjya6o957Hbg@mail.gmail.com>
Message-ID: <4F362B80.1030104@tum.de>

library(gstat)
vignette(st)


Am 11.02.2012 03:14, schrieb Saman Monfared:
> Dear All.
> I need help for calculate empirical spatio-temporal variogram or covariance.
> for example Irish wind data.
>

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From tom.gottfried at tum.de  Sat Feb 11 09:54:18 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Sat, 11 Feb 2012 09:54:18 +0100
Subject: [R-sig-Geo] Comprehensive R package for Spatial Stats
In-Reply-To: <CAPAHiAL8uJ6JvJUHHRXo6PzJhJiCY+Q2SftGaKGk=6qDVP6npg@mail.gmail.com>
References: <CAPAHiAL8uJ6JvJUHHRXo6PzJhJiCY+Q2SftGaKGk=6qDVP6npg@mail.gmail.com>
Message-ID: <4F362CBA.6020000@tum.de>

have a look on CRAN. At the bottom of the "Task Views" page is a 
description how to install complete views. Doing that with task view 
"Spatial" might yield what you are looking for.

regards,
Tom

Am 11.02.2012 05:21, schrieb Rich Heimann:
> Hello all,
>
> I am working in a disconnected environment and will be using R to do much
> on my spatial analysis. I wondered if there was one complete download
> encompassing all of the R packages for spatial stats. I am primarily
> interested in mapping, lattice/areal data, and some point process but will
> also take geostatistical packages if they are included as well. Does such a
> package exist?
>
> Regards,
> Rich
>
> ____________
> Rich Heimann
> @rheimann
>
> 571.403.0119 [Google Voice]
> 011 93 79 561 1765  [Roshan]
>   [image: Google Talk] heimann.richard
>   [image: Skype] heimann.rich
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From Roger.Bivand at nhh.no  Sat Feb 11 12:09:12 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 11 Feb 2012 12:09:12 +0100 (CET)
Subject: [R-sig-Geo] Comprehensive R package for Spatial Stats
In-Reply-To: <4F362CBA.6020000@tum.de>
References: <CAPAHiAL8uJ6JvJUHHRXo6PzJhJiCY+Q2SftGaKGk=6qDVP6npg@mail.gmail.com>
	<4F362CBA.6020000@tum.de>
Message-ID: <alpine.LRH.2.02.1202111159390.28212@reclus.nhh.no>

On Sat, 11 Feb 2012, Tom Gottfried wrote:

> have a look on CRAN. At the bottom of the "Task Views" page is a description 
> how to install complete views. Doing that with task view "Spatial" might 
> yield what you are looking for.

Exactly. If you install ctv first:

install.packages("ctv")
library(ctv)

you use:

install.views("Spatial", coreOnly=TRUE)

or:

download.views("Spatial", coreOnly=TRUE, destdir="spatial_tv")

or similar. These will also examine package dependencies on the download 
system, so for portability - to include the full dependency tree, run on a 
fresh installation of R. If coreOnly=FALSE, you pull in everything in the 
task view and all their dependencies, which can be quite a lot.

If there are suggestions for moving packages into/out of core, I'd be 
interested to hear.

Of course, OSX users should setRepositories(ind=1:2) before 
install.views() to pick up rgdal and rgeos from CRAN extras.

Unix/Linux users will need to provide the external dependencies to 
packages failing to install with unsatisfied dependencies.

Roger

>
> regards,
> Tom
>
> Am 11.02.2012 05:21, schrieb Rich Heimann:
>> Hello all,
>> 
>> I am working in a disconnected environment and will be using R to do much
>> on my spatial analysis. I wondered if there was one complete download
>> encompassing all of the R packages for spatial stats. I am primarily
>> interested in mapping, lattice/areal data, and some point process but will
>> also take geostatistical packages if they are included as well. Does such a
>> package exist?
>> 
>> Regards,
>> Rich
>> 
>> ____________
>> Rich Heimann
>> @rheimann
>> 
>> 571.403.0119 [Google Voice]
>> 011 93 79 561 1765  [Roshan]
>>   [image: Google Talk] heimann.richard
>>   [image: Skype] heimann.rich
>>
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From thi_veloso at yahoo.com.br  Sat Feb 11 20:09:38 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Sat, 11 Feb 2012 11:09:38 -0800
Subject: [R-sig-Geo] How to change raster cell value by coordinates?
In-Reply-To: <CAHT1vphvQ0OYqdcjSQS3b70B1a-PtN2vxzKyRa39RJ42K8FjBw@mail.gmail.com>
Message-ID: <1328987378.69358.YahooMailClassic@web161403.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120211/8db5f2b3/attachment.pl>

From elena.guijarro at vi.ieo.es  Sun Feb 12 15:35:08 2012
From: elena.guijarro at vi.ieo.es (Elena Guijarro Garcia)
Date: Sun, 12 Feb 2012 15:35:08 +0100
Subject: [R-sig-Geo] convert bln files
Message-ID: <CB98987E6A626A42A92C02833553DEF50245E8D1@ieovigo1.vi.ieo.es>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120212/788236d5/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Sun Feb 12 15:58:27 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sun, 12 Feb 2012 14:58:27 +0000
Subject: [R-sig-Geo] convert bln files
In-Reply-To: <CB98987E6A626A42A92C02833553DEF50245E8D1@ieovigo1.vi.ieo.es>
References: <CB98987E6A626A42A92C02833553DEF50245E8D1@ieovigo1.vi.ieo.es>
Message-ID: <CANVKczM2-8vsB1E7aQuBdhbh_8mU-3Dr+KJe1udsOH+BHB3wuw@mail.gmail.com>

On Sun, Feb 12, 2012 at 2:35 PM, Elena Guijarro Garcia
<elena.guijarro at vi.ieo.es> wrote:
>
> Dear all,
>
> I am new to GIS and just starting to explore R as GIS tool. I have got a compilation of bln files (made in surfer) with the stratification of my study area. Is there a way to convert them with R to other file types so I can use them in R or export them to QGIS?

 If they are supported by GDAL (for raster data) or OGR (for vector
data) then they should be readable by either readGDAL or readOGR from
the rgdal package, or via the raster() function in the raster package.

 If you point us to a sample file then maybe we can have a go...

Barry


From hyeonjongkil at ucla.edu  Sun Feb 12 18:59:11 2012
From: hyeonjongkil at ucla.edu (HJ Kil)
Date: Sun, 12 Feb 2012 09:59:11 -0800
Subject: [R-sig-Geo] ME function for negative binomial
Message-ID: <000001cce9b0$071319f0$15394dd0$@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120212/d6a27516/attachment.pl>

From jmackenzie at tnc.org  Mon Feb 13 04:48:05 2012
From: jmackenzie at tnc.org (jason b mackenzie)
Date: Mon, 13 Feb 2012 14:48:05 +1100
Subject: [R-sig-Geo] evaluating maxent models in dismo with presence-absence
	data
Message-ID: <B0CF082B-20EE-4A79-B882-00539741C400@tnc.org>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120213/8765f3ce/attachment.pl>

From manuel.schneider at art.admin.ch  Mon Feb 13 11:23:31 2012
From: manuel.schneider at art.admin.ch (Manuel Schneider)
Date: Mon, 13 Feb 2012 10:23:31 +0000
Subject: [R-sig-Geo] unable to customize a plot produced from a shapefile
References: <1328818777002-7270579.post@n2.nabble.com>
	<4F342EFC.1040807@gmail.com>
	<CACQSnN8oWi2UHgsM=vcERbKNQzhfA+K-+60jzKZizdV-Qk_DoQ@mail.gmail.com>
Message-ID: <loom.20120213T111425-656@post.gmane.org>

Try
plot(1, t="n", xlim=c(bbox(testS)[1,1], bbox(testS)[1,2]), ylim=c(30,50))
plot(testS, add=T)

Abw
Manuel


From Roger.Bivand at nhh.no  Mon Feb 13 11:30:40 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 13 Feb 2012 11:30:40 +0100 (CET)
Subject: [R-sig-Geo] ME function for negative binomial
In-Reply-To: <000001cce9b0$071319f0$15394dd0$@ucla.edu>
References: <000001cce9b0$071319f0$15394dd0$@ucla.edu>
Message-ID: <alpine.LRH.2.02.1202131124180.13403@reclus.nhh.no>

On Sun, 12 Feb 2012, HJ Kil wrote:

> Dear all,
>
>
>
> First of all, thank you so much for reading this long mail (Please read 
> this if you are familiar with the "ME" function).


Please rework this question with data that everyone can see. There is no 
chance at all of seeing what is wrong without your casting this in terms 
of a standard data set, or making your own data available. The tests you 
are using have not been established for non-normal variables, so apparent 
results on GLM residuals may not be correctly sized.

Warnings and lack of convergence are always potentially serious and must 
always be checked out (to see what the cause is).

Roger

>
> I need your help and comments to conduct an analysis with "ME" function of
> the package spdep.
>
> I am trying to run a regression (a count dependent variable and 7-8
> explanatory variables) with about 2000 observations (adjacent census tracts
> in an urban area).
>
> Basically, I am trying to look at how these areas' demographics aspects (7-8
> explanatory variables) are related to a certain social aspect (my dependent
> count variable).
>
> To do this, I used the below script (Italic: parts of results):
>
>
>
> ### Load all libraries: I skipped all the libraries that I loaded
>
> ### Read shape data file made/joined by ArcGis and a queen matrix (gal) made
> by Geoda
>
> myshp <- readShapeSpatial("a.shp", ID="ID")
>
> mygal <- read.gal("a.GAL")
>
>
>
> #Test symmetry of the matrix: Result was "TRUE"
>
> print(is.symmetric.nb(mygal))
>
> [1] TRUE
>
>
>
> #Change nb to listw
>
> mylistw <- nb2listw(mygal)
>
>
>
> #Run a poisson model as a base: including offset since I would like to know
> "density"
>
> base.poisson <- glm(dep ~ a + b + c + d + e + f + g, offset(log(TOT_POP)),
> data=myshp, family="poisson")
>
>
>
> #Run dispersion test to check whether a negative binomial model is better:
> RESULT showed over-dispersed.
>
> dispersiontest(base.poisson)
>
>        Overdispersion test
>
> data:  base.poisson
>
> z = 8.711, p-value < 2.2e-16
>
> alternative hypothesis: true dispersion is greater than 1
>
> sample estimates:
>
> dispersion
>
>  3.123331
>
>
>
> #Run a negative binomial regression as a base by using "glm.nb"
>
> base.nb <- glm.nb(dep ~ a + b + c + d + e + f + g + offset(log(TOTAL_POP)),
> data=myshp, maxit=100)
>
> summary(base.nb)
>
>
>
> #Based on the result of the above, I found that "initial theta" was
> "1.174928547"
>
> #I used the other way of running a negative binomial with the above value:
>
> base.nb2 <- glm(dep ~  a + b + c + d + e + f + g + offset(log(TOTAL_POP)),
> data=myshp, family=negative.binomial(1.174928547), maxit=100)
>
> summary(base.nb)
>
>
>
> # I found that both results are VERY SIMILAR (decimal differences)
>
>
>
> # Conducting "moran.test" and "lm.morantest" to supplementary check the
> existence of the spatial autocorrelation in the residuals before moving to
> the eigenfiltering
>
> moran.test(residuals.glm(base.nb), mylistw)
>
>        Moran's I test under randomisation
>
> Moran I statistic standard deviate = 10.835, p-value < 2.2e-16
>
> alternative hypothesis: greater
>
> sample estimates:
>
> Moran I statistic       Expectation          Variance
>
>     0.1372647104     -0.0004995005      0.0001616635
>
>
>
> moran.test(residuals.glm(base.nb2), mylistw)
>
>        Moran's I test under randomisation
>
> Moran I statistic standard deviate = 10.837, p-value < 2.2e-16
>
> alternative hypothesis: greater
>
> sample estimates:
>
> Moran I statistic       Expectation          Variance
>
>     0.1372900049     -0.0004995005      0.0001616636
>
>
>
> lm.morantest(base.nb, mylistw)
>
>   Global Moran's I for regression residuals
>
> Moran I statistic standard deviate = 16.465, p-value < 2.2e-16
>
> alternative hypothesis: greater
>
> sample estimates:
>
> Observed Moran's I        Expectation           Variance
>
>      0.2056132825      -0.0028246948       0.0001602612
>
>
>
> lm.morantest(base.nb2, mylistw)
>
>     Global Moran's I for regression residuals
>
> Moran I statistic standard deviate = 16.4668, p-value < 2.2e-16
>
> alternative hypothesis: greater
>
> sample estimates:
>
> Observed Moran's I        Expectation           Variance
>
>      0.2056358254      -0.0028246666       0.0001602612
>
>
>
> ## I do not know whether both tests are OK for a negative binomial model, it
> seems that they all showed that there existed somewhat significant spatial
> autocorrelations on the residuals.
>
>
>
> #Run "ME" to identify whether the model needs eigenvectors and, if needed,
> how many eigenvectors are needed.
>
> ### FIRST with base.nb2 (glm above)
>
> myme.nb2 <- ME(dep ~ a + b + c + d + e + f + g, data=myshp, family =
> negative.binomial(1.174928547), offset=log(TOTAL_POP), listw=mylistw,
> alpha=0.05, verbose=TRUE, nsim=99)
>
> Error in ME(a ~ b + c + d + e +  :
>
>   base correlation larger than alpha
>
> In addition: Warning message:
>
> glm.fit: algorithm did not converge
>
>
>
> ## SECOND with base.nb1 (glm.nb)
>
> ## To do this, I copied and pasted the new "ME.nb" command made by Pablo
> (Feb. 03): http://www.mail-archive.com/r-sig-geo at r-project.org/msg03967.html
>
> myme.nb <- ME.nb (dep ~ a + b + c + d + e + f + g + offset(log(TOTAL_POP),
> data=myshp, listw=mylistw, alpha=0.05, nsim=99, verbose =TRUE)
>
> Error in ME.nb(base.nb2, data = myshp, listw = mylistw, alpha = 0.05,  :
>
>  base correlation larger than alpha
>
> In addition: Warning messages:
>
> 1: glm.fit: algorithm did not converge
>
> 2: glm.fit: algorithm did not converge
>
> 3: In glm.nb(formula, data = data) : alternation limit reached
>
>
>
> ### I TRIED AFTER CHANGING "stdev" OPTIONS BOTH, BUT THE RESULTS WERE THE
> SAME.
>
> ### WHEN I INCREASED THE ALPHA LEVEL TO 0.4 IN BOTH, THE RESULTS WERE THE
> SAME.
>
> ### HOWEVER, WHEN I INCREASED THE ALPHA LEVEL TO 4.7 IN BOTH, I FINALLY GOT
> THE BELOW RESULT.
>
> myme.nb2 <- ME (dep~ a + b + c + d + e + f + g, data=myshp, family =
> negative.binomial(1.174928547), offset=log(TOTAL_POP), listw=mylistw,
> alpha=0.48, stdev=TRUE, verbose=TRUE, nsim=99)
>
> eV[,135], I: 3.805725e-09 ZI: -0.1491594, pr(ZI): 0.4407139
>
> eV[,18], I: 1.253316e-10 ZI: -0.02069758, pr(ZI): 0.4917434
>
> There were 50 or more warnings (use warnings() to see the first 50)
>
> (all warnings: glm.fit: algorithm did not converge)
>
>
>
> myme.nb1 <- ME.nb (REV_NUM ~ RACE_H_6_B + AGE_H_8_B + EDU_H_7_TO +
> INC_H_GINI + POV_PE + AVE_HOU_IN + GOV_REV + offset(log(TOTAL_POP)),
> data=myshp, listw=mylistw, alpha=0.48, nsim=999, verbose =TRUE)
>
> eV[,15], I: 2.775260e-08 ZI:
>
> NA, pr(ZI): 0.451
>
> eV[,17], I: 1.302856e-08 ZI: NA, pr(ZI): 0.486
>
> There were 50 or more warnings (use warnings() to see the first 50)
>
> (warnings:  glm.fit: algorithm did not converge
>
> In glm.nb(formula, data = data) : alternation limit reached
>
> In glm.nb(Y ~ iX) : alternation limit reached)
>
>
>
> ### Based on the result, if the warnings (glm.fit: algorithm did not
> converge) are not serious (particularly for the lower alpha level at which
> "base correlation larger than alphs showed"), I decided to stick to a
> negative binomial (non-spatial) model for my statistics.
>
>
>
> Here are some questions to the groups related to this work:
>
> First, is there any way that I can make the algorithm be converged? (like
> maxit=100 in glm.nb).
>
> Particularly, if Pablo can read this, It would appreciate if you can give me
> some suggestion for the modification of your program.
>
>
>
> Second, could you let me know if you find any mistakes on my script? In
> addition, does my conclusion (using a non-spatial negative binomial) seem to
> be OK?
>
> Or, if you think the warning is very serious, what alternative could you
> suggest? Do you think a spatial poisson may be an alternative? (considering
> spatial autocorrelation is more important than over dispersion.)
>
> (When I conduct the same procedure (the ME function) with the poisson model
> above, I did not get any warnings or errors with "ME" function.)
>
>
>
> Third, regarding the differences of Moran's I among "moran.test,"
> "lm.morantest," and "ME,"
>
> If the Moran's I from the "ME" function is correct for glm, I think that
> both "moran.test" and "lm.morantest" are somewhat risky for both poisson or
> negative binomial, at least a model with "offset" (like mine).
>
> (Actually, I also tried to use the ME function with the poisson base model
> above (though my data seems overdispersed). Then, the result requires me to
> add about 20 eigenvectors into my model at alpha 0.2, so that I "fitted" the
> eigenvectors from the "ME" results to my base poisson model. Then, I
> double-checked the spatial poisson regression with both "moran.test" and
> "lm.morantest," and they still showed  somewhat significant spatial
> autocorrelations in the model.)
>
> Could anyone explain the reason of these differences?
>
>
>
> Fourth, this is somewhat different topic, but I heard that Bayesian is
> another option for these non-normal distributed model. However, I also read
> a couple of articles (e.g., Gelman(2008)), that it may be dangerous to use
> it since it requires "prior distribution or belief" incorporated in the
> model. Is it also applied to spatial statistics? For me, I have never use
> the Bayesian yet and it seems to me that I can use it for now with my
> dataset.
>
>
>
> I would be very appreciated for any comments.
>
> Thanks,
>
> HJ
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From timothee.vergne at cirad.fr  Mon Feb 13 12:00:38 2012
From: timothee.vergne at cirad.fr (Timothee Vergne)
Date: Mon, 13 Feb 2012 12:00:38 +0100
Subject: [R-sig-Geo] Testing for spatial autocorrelation in residuals from a
	ZI model
Message-ID: <4F38ED56.1000509@cirad.fr>

Hi,

I work on a zero-inflated count model (zero-inflated Poisson and 
zero-inflated negative binomial) to describe the number of detected H5N1 
outbreaks in the subdistricts of Thailand.
I would like to test the residuals of my model for spatial 
autocorrelation. But I don't really know how to test it as my model is 
not a conventional linear model nor a glm (rather a hierarchical model).

Does a function (such as moran.test() or lm.morantest()) exist for 
residuals of hierarchical models (zero-inflated models) ? I cannot find 
any clue in the litterature... Would you mind to light me ?
If nothing exists yet, what do you advise me to do ?

Thank you very much for you answer.
Best regards,
Timoth?e

-- 
Timoth?e Vergne, DVM, MSc
PhD candidate
e-mail : timothee.vergne at cirad.fr

CIRAD - UR AGIRs
TA C22/E Campus international de Baillarguet
34398 Montpellier FRANCE
tel :  +33 4 67 59 38 68

ANSES - Laboratoire de Sant? Animale de Maisons-Alfort
23 avenue du G?n?ral de Gaulle
94706 Maisons-Alfort
tel : +33 1 49 77 26 75


From Roger.Bivand at nhh.no  Mon Feb 13 12:36:43 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 13 Feb 2012 12:36:43 +0100
Subject: [R-sig-Geo] unable to customize a plot produced from a shapefile
In-Reply-To: <loom.20120213T111425-656@post.gmane.org>
References: <1328818777002-7270579.post@n2.nabble.com>
	<4F342EFC.1040807@gmail.com>
	<CACQSnN8oWi2UHgsM=vcERbKNQzhfA+K-+60jzKZizdV-Qk_DoQ@mail.gmail.com>
	<loom.20120213T111425-656@post.gmane.org>
Message-ID: <alpine.LRH.2.02.1202131204180.13403@reclus.nhh.no>

On Mon, 13 Feb 2012, Manuel Schneider wrote:

> Try
> plot(1, t="n", xlim=c(bbox(testS)[1,1], bbox(testS)[1,2]), ylim=c(30,50))
> plot(testS, add=T)

The issues here are quite complex. Firstly, you should have added a 
coordinate reference system to the object (no direct impact on ylim, but a 
contributing factor). Methods for plotting take an asp= argument for 
aspect; in sp methods, the asp= is set to 1 for non-geographic 
coordinates, and "stretched" for geographic coordinates depending on the 
distance from the equator, see ?mapasp.

If the plot window is set with xlim or ylim, they will not respond 
directly, but will create a rectangle of appropriate aspect, which means 
that the plot region does not respect the x/ylim, but will expand to 
values matching asp=. Next, read up on xaxs= and yaxs= in ?par; by 
default, the axes are extended by 4% at each end, if x/yaxs="i", the 
extension more or less respects the requested plot region. Then the 
plotting devices clip to this region. So to get close to what you wanted, 
you'd have to work out the geometry of the output rectangle, open a device 
with the required shape, and go from there (using Manuel's contribution):

library(rgdal)
climagdiv = readOGR("US102ClimateDivisions", "US102ClimateDivisions")
proj4string(climagdiv) <- CRS("+proj=longlat +datum=WGS84")
x11(width=7, height=4)
plot(as(climagdiv, "Spatial"), xlim=bbox(climagdiv)[1,], ylim=c(20,40),
   xaxs="i", yaxs="i", axes=TRUE)
plot(climagdiv, add=TRUE)

or similar.

It is also possible to use rgeos:

library(rgeos)
SP <- SpatialPoints(rbind(c(-125, 25), c(-67, 40)),
   proj4string=CRS("+proj=longlat +datum=WGS84"))
clipbox <- gEnvelope(SP)
GI <- gIntersects(climagdiv, clipbox, byid=TRUE)
plot(climagdiv)
plot(climagdiv[GI[1,],], border="red", add=TRUE)

to choose Polygons objects at least partly within the chosen rectangle. 
Not that this is not strictly appropriate for geographical coordinates, 
and you may not want to clip either, as entities will appear strange in 
the ouput graphics.

This isn't as simple as it appears, really.

Hope this clarifies,

Roger

>
> Abw
> Manuel
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From JRadinger at gmx.at  Mon Feb 13 17:23:25 2012
From: JRadinger at gmx.at (Johannes Radinger)
Date: Mon, 13 Feb 2012 17:23:25 +0100
Subject: [R-sig-Geo] Importing GRASS-Rasters into R
In-Reply-To: <alpine.LRH.2.02.1202131600270.14220@reclus.nhh.no>
References: <000001cce9b0$071319f0$15394dd0$@ucla.edu>
	<alpine.LRH.2.02.1202131124180.13403@reclus.nhh.no>
	<20120213134932.204480@gmx.net>
	<alpine.LRH.2.02.1202131600270.14220@reclus.nhh.no>
Message-ID: <20120213162325.281690@gmx.net>

Hi,

I just tranferred to R-sig.geo list:

> On Mon, 13 Feb 2012, Johannes Radinger wrote:
> 
> > Dear Roger,
> >
> > as you wrote the spgrass6 package for R, you are most probably the
> > one who can help me.
> >
> > On the one hand I am working with GRASS and have created several Raster 
> > maps in a mapset. On the other hand I am working with R in the Eclipse 
> > environement and run different scripts also involving dismo (species 
> > distribution models). Therefore I need my GRASS raster maps tranfered to
> > R as a RasterStack. As I don't want to run the script from R within a 
> > GRASS session, what is the easiest way to get all the raster maps of one
> > mapset into a rasterstack in R (in my Eclipse session)? What are the 
> > single steps (R-commands) I need to do? Do I need to set a pseudo 
> > location when I don't run any GRASS commands from R, only the export to 
> > the RasterStack?
> 
> No idea, I don't use Eclipse. Trouble was reported recently with a similar
> front end messing up the path for loading dynamic library objects. Try 
> R-sig-geo or statgrass, please. Have you tried initGRASS() in the Eclipse 
> setting?

It was more of a general question if i have to set a pseudolocation etc. with initGRASS() when I only want to use readRAST6 and working outside GRASS? If I need to set the location, is it possible to use the location which is already existing (created by GRASS itself), although i am running R outside GRASS?


/Johannes

> 
> Roger
> 
> >
> > My rasters are here:
> > GISDBASE=/Users/Johannes Radinger/Documents/GRASS-GIS
> > LOCATION_NAME=Treene_location
> > MAPSET=SDM_Treene
> >
> >
> > Best regards,
> > Johannes
> >
> 
> -- 
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
> 

--


From Roger.Bivand at nhh.no  Mon Feb 13 17:39:45 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 13 Feb 2012 17:39:45 +0100 (CET)
Subject: [R-sig-Geo] Importing GRASS-Rasters into R
In-Reply-To: <20120213162325.281690@gmx.net>
References: <000001cce9b0$071319f0$15394dd0$@ucla.edu>
	<alpine.LRH.2.02.1202131124180.13403@reclus.nhh.no>
	<20120213134932.204480@gmx.net>
	<alpine.LRH.2.02.1202131600270.14220@reclus.nhh.no>
	<20120213162325.281690@gmx.net>
Message-ID: <alpine.LRH.2.02.1202131736280.14568@reclus.nhh.no>

On Mon, 13 Feb 2012, Johannes Radinger wrote:

> Hi,
>
> I just tranferred to R-sig.geo list:
>
>> On Mon, 13 Feb 2012, Johannes Radinger wrote:
>>
>>> Dear Roger,
>>>
>>> as you wrote the spgrass6 package for R, you are most probably the
>>> one who can help me.
>>>
>>> On the one hand I am working with GRASS and have created several Raster
>>> maps in a mapset. On the other hand I am working with R in the Eclipse
>>> environement and run different scripts also involving dismo (species
>>> distribution models). Therefore I need my GRASS raster maps tranfered to
>>> R as a RasterStack. As I don't want to run the script from R within a
>>> GRASS session, what is the easiest way to get all the raster maps of one
>>> mapset into a rasterstack in R (in my Eclipse session)? What are the
>>> single steps (R-commands) I need to do? Do I need to set a pseudo
>>> location when I don't run any GRASS commands from R, only the export to
>>> the RasterStack?
>>
>> No idea, I don't use Eclipse. Trouble was reported recently with a similar
>> front end messing up the path for loading dynamic library objects. Try
>> R-sig-geo or statgrass, please. Have you tried initGRASS() in the Eclipse
>> setting?
>
> It was more of a general question if i have to set a pseudolocation etc. 
> with initGRASS() when I only want to use readRAST6 and working outside 
> GRASS? If I need to set the location, is it possible to use the location 
> which is already existing (created by GRASS itself), although i am 
> running R outside GRASS?

In principle yes, but you have to be aware that you may trash your .gisrc 
file, hence the need for care. Others use this method for simulation 
without problems, but with care and some experience.

Roger

>
>
> /Johannes
>
>>
>> Roger
>>
>>>
>>> My rasters are here:
>>> GISDBASE=/Users/Johannes Radinger/Documents/GRASS-GIS
>>> LOCATION_NAME=Treene_location
>>> MAPSET=SDM_Treene
>>>
>>>
>>> Best regards,
>>> Johannes
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, NHH Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From momadou at yahoo.fr  Mon Feb 13 20:00:41 2012
From: momadou at yahoo.fr (Komine)
Date: Mon, 13 Feb 2012 11:00:41 -0800 (PST)
Subject: [R-sig-Geo] redundancy of coordinates of pixels
In-Reply-To: <1326140234659-7169408.post@n2.nabble.com>
References: <1326140234659-7169408.post@n2.nabble.com>
Message-ID: <1329159641979-7281513.post@n2.nabble.com>

Hi, 
I actualize my topic because I have not again a solution.
I have in a matrix 1 255 153 rows and corresponding to the coordinates of
burned pixels on 10 years. The coordinates are in UTM. I want to know the
pixels burned several times on the 10 years. However, less 1% of my pixels
were burned on the 10 years. It seems false. My code uses the center of
pixels, in this case, a same area can burn several times in the 10 years,
but because the center of pixels differ little one year to another, the code
will not show correctly me the pixels which burn each year. Because the code
required that the pixels have EXACTELY the same cordinates. 
Do you known a solution with R to resolve this problem? I'm not looking that
pixels overlap exactly but a slight delay is not bad. 
My Code: 
>redon<-read.table("C:\\Users\\Documents\\\\PixelFire.txt",sep="",dec=",",header=TRUE)
>XY <- redon[c("X", "Y")] 
>Z<-xtabs(~apply(XY,1,paste,collapse="-")) 
>Z2<-matrix(unlist(strsplit(names(Z),"-")),ncol=2,byrow=T) 
>Matrice<-data.frame(Z2,freq=Z[])
>write.table(Matrice,"C:\\Users\\Desktop\\Matrice.txt",sep=" ")

Sorry for my bad English!
Thank you in advance


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/redundancy-of-coordinates-of-pixels-tp7169408p7281513.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Roger.Bivand at nhh.no  Mon Feb 13 20:32:36 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 13 Feb 2012 20:32:36 +0100 (CET)
Subject: [R-sig-Geo] redundancy of coordinates of pixels
In-Reply-To: <1329159641979-7281513.post@n2.nabble.com>
References: <1326140234659-7169408.post@n2.nabble.com>
	<1329159641979-7281513.post@n2.nabble.com>
Message-ID: <alpine.LRH.2.02.1202132030190.14568@reclus.nhh.no>

On Mon, 13 Feb 2012, Komine wrote:

> Hi,
> I actualize my topic because I have not again a solution.
> I have in a matrix 1 255 153 rows and corresponding to the coordinates of
> burned pixels on 10 years. The coordinates are in UTM. I want to know the
> pixels burned several times on the 10 years. However, less 1% of my pixels
> were burned on the 10 years. It seems false. My code uses the center of
> pixels, in this case, a same area can burn several times in the 10 years,
> but because the center of pixels differ little one year to another, the code
> will not show correctly me the pixels which burn each year. Because the code
> required that the pixels have EXACTELY the same cordinates.
> Do you known a solution with R to resolve this problem? I'm not looking that
> pixels overlap exactly but a slight delay is not bad.
> My Code:
>> redon<-read.table("C:\\Users\\Documents\\\\PixelFire.txt",sep="",dec=",",header=TRUE)
>> XY <- redon[c("X", "Y")]
>> Z<-xtabs(~apply(XY,1,paste,collapse="-"))
>> Z2<-matrix(unlist(strsplit(names(Z),"-")),ncol=2,byrow=T)
>> Matrice<-data.frame(Z2,freq=Z[])
>> write.table(Matrice,"C:\\Users\\Desktop\\Matrice.txt",sep=" ")

Two possibilities, one using nn2() in the RANN package with 
searchtype="priority" and eps < 0.0, the other to define a grid over your 
study area and count points falling in each grid cell.

Hope this helps,

Roger

>
> Sorry for my bad English!
> Thank you in advance
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/redundancy-of-coordinates-of-pixels-tp7169408p7281513.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From momadou at yahoo.fr  Mon Feb 13 21:19:56 2012
From: momadou at yahoo.fr (Komine)
Date: Mon, 13 Feb 2012 12:19:56 -0800 (PST)
Subject: [R-sig-Geo] redundancy of coordinates of pixels
In-Reply-To: <1326140234659-7169408.post@n2.nabble.com>
References: <1326140234659-7169408.post@n2.nabble.com>
Message-ID: <1329164396533-7281771.post@n2.nabble.com>

Hi everybody, 
Thank Roger for your answer, I will try your suggestions and you will say
the result. 
Regards

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/redundancy-of-coordinates-of-pixels-tp7169408p7281771.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From JRadinger at gmx.at  Tue Feb 14 10:42:43 2012
From: JRadinger at gmx.at (Johannes Radinger)
Date: Tue, 14 Feb 2012 10:42:43 +0100
Subject: [R-sig-Geo] spgrass6, initGRASS() on MacOSX
Message-ID: <20120214094243.3220@gmx.net>

Hello,

I want to use spgrass6 in an R session outside GRASS on Mac OSX. Therefore I want to use initGRASS to set some needed environmental variables etc.
initGRASS() needs gisBase as one parameter which is the direcotry path to the GRASS binaries. What is the standard path on Mac OS X? My GRASS.app is in /
/Applications/GRASS-6.5.app...

so I tried following two approaches so far without success:

> initGRASS("/Applications/GRASS-6.5", home=tempdir())
Fehler in initGRASS("/Applications/GRASS-6.5", home = tempdir()) : 
  /Applications/GRASS-6.5 not found
> initGRASS("/Applications/GRASS-6.5.app", home=tempdir())
Fehler in system(paste("g.version", get("addEXE", envir = .GRASS_CACHE),  : 
  Fehler bei der Ausf"uhrung des Kommandos

I don't know what is causing the problem in the second approach?
Does anyone know how to use initGRASS on Mac OS X in an R session outside GRASS correctly?

Best regards,
Johannes
--


From Roger.Bivand at nhh.no  Tue Feb 14 11:27:35 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 14 Feb 2012 11:27:35 +0100 (CET)
Subject: [R-sig-Geo] spgrass6, initGRASS() on MacOSX
In-Reply-To: <20120214094243.3220@gmx.net>
References: <20120214094243.3220@gmx.net>
Message-ID: <alpine.LRH.2.02.1202141124290.3986@reclus.nhh.no>

On Tue, 14 Feb 2012, Johannes Radinger wrote:

> Hello,
>
> I want to use spgrass6 in an R session outside GRASS on Mac OSX. 
> Therefore I want to use initGRASS to set some needed environmental 
> variables etc. initGRASS() needs gisBase as one parameter which is the 
> direcotry path to the GRASS binaries. What is the standard path on Mac 
> OS X? My GRASS.app is in / /Applications/GRASS-6.5.app...
>
> so I tried following two approaches so far without success:

Please ask on statgrass or grass-users with reference to:

http://grass.osgeo.org/wiki/Working_with_GRASS_without_starting_it_explicitly

saying how you installed OSX GRASS. The views that OSX and R or Python or 
other scripting languages have of the file system may well differ a good 
deal.

Roger

>
>> initGRASS("/Applications/GRASS-6.5", home=tempdir())
> Fehler in initGRASS("/Applications/GRASS-6.5", home = tempdir()) :
>  /Applications/GRASS-6.5 not found
>> initGRASS("/Applications/GRASS-6.5.app", home=tempdir())
> Fehler in system(paste("g.version", get("addEXE", envir = .GRASS_CACHE),  :
>  Fehler bei der Ausf"uhrung des Kommandos
>
> I don't know what is causing the problem in the second approach?
> Does anyone know how to use initGRASS on Mac OS X in an R session outside GRASS correctly?
>
> Best regards,
> Johannes
> --
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From hevals at gmail.com  Tue Feb 14 11:52:57 2012
From: hevals at gmail.com (=?ISO-8859-1?Q?Henri_Vall=E8s?=)
Date: Tue, 14 Feb 2012 06:52:57 -0400
Subject: [R-sig-Geo] testing autocorrelation on residuals of a binomial
	mixed-effect model
Message-ID: <CAGpXgKuzJ0to28anL4xX0Vg8rp9kJhgR7c8QbzgqMeq8ndH+rw@mail.gmail.com>

Dear all,

I have multiple geo-referenced sites and at each site I have multiple
sampling units where I record the presence/absence of my organism of
interest along with environmental descriptors. I am using
presence/absence as my dependent variable in a binomial mixed-effects
model (glmmML function) with substrate descriptors as fixed effects
and sites as random effects. I am using the "average presence" at a
site, i.e. "proportion of sampling units where the organism was found"
and the site coordinates to examine spatial auto-correlation across
site-level values using the moran.mc function of the "spdep" package
(after creating a spatial weighting object) and I do find a
significant auto-correlation.

I would be interested in finding out whether the Pearson residuals of
the binomial mixed-effect model can be used in the same manner
(averaging residuals at a site and using moran.mc function for a test
across sites) to assess whether the spatial correlation was linked to
environmental features.

Would this make any sense?

Best regards

Henri


From vivien.deparday at gmail.com  Tue Feb 14 13:27:11 2012
From: vivien.deparday at gmail.com (Vivien Deparday)
Date: Tue, 14 Feb 2012 07:27:11 -0500
Subject: [R-sig-Geo] PostGIS merge and subset selection
In-Reply-To: <CANVKczMNeKeu9xk63HedkK3w_1wtwPuy5D0TD0fwH8L=YyM7=g@mail.gmail.com>
References: <4F305538.1090406@gmail.com> <4F30C88A.8090609@uni-muenster.de>
	<CANVKczMNeKeu9xk63HedkK3w_1wtwPuy5D0TD0fwH8L=YyM7=g@mail.gmail.com>
Message-ID: <4F3A531F.6010202@gmail.com>

Thank you for your suggestions. I ended up using PostgreSQL Views as I 
still feel more comfortable with SQL. I had only one issue is that I had 
two geometry columns (polygon and centroids) in my view and because of 
that I was getting "Layer not found" with readOGR. Is the only 
workaround to create two views, one with each geometry?
What are the plans on implementing a -sql argument for readOGR?

Thank you,

Vivien

On 02/07/2012 03:37 AM, Barry Rowlingson wrote:
> On Tue, Feb 7, 2012 at 6:45 AM, Edzer Pebesma
> <edzer.pebesma at uni-muenster.de>  wrote:
>> Vivien, the following might give you some pointers:
>>
>> library(spacetime)
>> vignette("stpg")
>> edit(vignette("stpg"))
>>
>> to run the postGIS thing, you have to uncomment all the eval=FALSE sections.
>>
>   Not sure if Edzer's vignette is doing this, but another way might be
> to use a VIEW on the database to do your joining and selecting. You
> can use the R PostgreSQL database driver to do this. You'll also have
> to add the view to the geometry_columns table to make it 'spatial'.
> Then you can get it via readOGR.
>
> I can dig out more details later, but basically you run some SQL like:
>
>   CREATE VIEW fred AS SELECT * FROM polygons,attributes WHERE
> polygons.id = attributes.id AND attributes.name='fred';
>
> SQL strings like that can be constructed in R and sent to the database
> via the usual R database tools.
>
>   If you create database indexes on the id variables then this will be
> speedy, although note it is done each time you query the view - ie the
> results of the view aren't stored on the database.
>
> Barry
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From JRadinger at gmx.at  Tue Feb 14 13:51:15 2012
From: JRadinger at gmx.at (Johannes Radinger)
Date: Tue, 14 Feb 2012 13:51:15 +0100
Subject: [R-sig-Geo] RasterBrick questions
Message-ID: <20120214125115.50300@gmx.net>

Dear R-sig-geo List!

I have two little questions concerning RasterBricks from the Raster package.

1) I have a list of several rasters (programmatically created during a loop)
which I want to transform into a RasterBrick. Here an example:

library(raster)
r1 <- r2 <- r3 <- raster(nrow=10, ncol=10)
values(r1) <- runif(ncell(r1))
values(r2) <- runif(ncell(r2))
values(r3) <- runif(ncell(r3))

#Thats how the loops collects the rasters into the list:
ls <- list()
ls[["r1"]] <- r1
ls[["r2"]] <- r2
ls[["r3"]] <- r3
ls

How can I transform ls into a RasterBrick? Or is there any function to append a new layer to a RasterBrick during each run of the loop (instead of collecting the results in a list of rasters)?

2) If I have a final RasterBrick, is there a simple way to exclude a single layer, resp. remove it? I am looking for something like indexing?

b <- brick(r1,r2,r3)
# e.g. something like: b[b!="r2"]

Best regards,

/johannes

--


From villers.alexandre at gmail.com  Tue Feb 14 14:46:14 2012
From: villers.alexandre at gmail.com (Alexandre Villers)
Date: Tue, 14 Feb 2012 15:46:14 +0200
Subject: [R-sig-Geo] [R-sig-eco] Model for zero-inflated species
 abundance data, allowing for spatial autocorrelation?
In-Reply-To: <CADcQ+RqG82g-vbnZNFUC9VTm6RXN7z-SaWnq+byX9DZv7O-Qmw@mail.gmail.com>
References: <CADcQ+RqG82g-vbnZNFUC9VTm6RXN7z-SaWnq+byX9DZv7O-Qmw@mail.gmail.com>
Message-ID: <4F3A65A6.7060207@gmail.com>

Hi,

If you are not afraid to switch to Bayesian methods (but fast ones !), 
the INLA package could do that for you. ( www.r-inla.org )
Cheers


Alex



On 14/02/2012 15:36, Kay Cichini wrote:
> Hi all,
>
> I'd very much appreciate pointers at methodology/R-packages/functions
> suited for modelling zero inflated species abundance data (counts) that
> most likely will show spatial autocorrelation. Species abundances range
> between 0 and 6, the proportion of zeroes is about 90%. I have about 6
> nominal covariables (partly heavily unbalanced).
>
> Yours,
> Kay
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-ecology mailing list
> R-sig-ecology at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-ecology
>


From etiennebr at gmail.com  Tue Feb 14 14:50:56 2012
From: etiennebr at gmail.com (Etienne B. Racine)
Date: Tue, 14 Feb 2012 08:50:56 -0500
Subject: [R-sig-Geo] RasterBrick questions
In-Reply-To: <20120214125115.50300@gmx.net>
References: <20120214125115.50300@gmx.net>
Message-ID: <CALjAYt7iSZzxkJnEkFMNB=m9xukEZEftrDLdDYAu2Ag6bDXQaQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120214/7b736448/attachment.pl>

From lyndon.estes at gmail.com  Tue Feb 14 14:52:53 2012
From: lyndon.estes at gmail.com (Lyndon Estes)
Date: Tue, 14 Feb 2012 08:52:53 -0500
Subject: [R-sig-Geo] RasterBrick questions
In-Reply-To: <20120214125115.50300@gmx.net>
References: <20120214125115.50300@gmx.net>
Message-ID: <CALuVVaZCb0BXUMeC0F4yO4dvMQK6QG1Xvnkw7zBnkf0+heww-w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120214/368dd658/attachment.pl>

From gianni.lavaredo at gmail.com  Tue Feb 14 15:45:40 2012
From: gianni.lavaredo at gmail.com (gianni lavaredo)
Date: Tue, 14 Feb 2012 15:45:40 +0100
Subject: [R-sig-Geo] help to create a raster BRICK from a list
In-Reply-To: <1328912361826-7274487.post@n2.nabble.com>
References: <CAJ6JbR_i+K6+mbqit9Zvme25VFTKhHaKwLgSw=5fJo=u=tGMog@mail.gmail.com>
	<1328912361826-7274487.post@n2.nabble.com>
Message-ID: <CAJ6JbR8Gf+BEQtfvUqmo0JXpHe_uex00=kY8xcMLKecRKyJTpA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120214/139080e2/attachment.pl>

From pgalpern at gmail.com  Tue Feb 14 17:17:46 2012
From: pgalpern at gmail.com (pgalpern)
Date: Tue, 14 Feb 2012 10:17:46 -0600
Subject: [R-sig-Geo] Read and write GRASS rasters without GRASS installed
Message-ID: <4F3A892A.4010906@gmail.com>

Could anyone tell me if it is possible to read and write GRASS rasters 
(compressed) in R without having GRASS installed?  raster() will not do 
this directly.

Could readRAST6 in spgrass6 be used to do this?  It seems that is 
should, using the useGDAL option.  I have been unsuccessful, am I 
missing something?

Thank you,
Paul

-- 
Paul Galpern, PhD Candidate
Natural Resources Institute
70 Dysart Road
University of Manitoba
Winnipeg, Manitoba, Canada R3T 2M6
http://borealscape.ca


From Roger.Bivand at nhh.no  Tue Feb 14 18:15:31 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 14 Feb 2012 18:15:31 +0100 (CET)
Subject: [R-sig-Geo] Read and write GRASS rasters without GRASS installed
In-Reply-To: <4F3A892A.4010906@gmail.com>
References: <4F3A892A.4010906@gmail.com>
Message-ID: <alpine.LRH.2.02.1202141805390.5755@reclus.nhh.no>

On Tue, 14 Feb 2012, pgalpern wrote:

> Could anyone tell me if it is possible to read and write GRASS rasters 
> (compressed) in R without having GRASS installed?  raster() will not do this 
> directly.
>
> Could readRAST6 in spgrass6 be used to do this?  It seems that is should, 
> using the useGDAL option.  I have been unsuccessful, am I missing something?

No, it doesn't seem that it should. Its documentation explains that it 
reads and writes temporary files written and read by GRASS, no more or 
less. The useGDAL= argument is used to use a GDAL-supported driver for the 
intermediate file, rather tha r.in/our.bin in GRASS and readBin() in R.

You are thinking of the GRASS GDAL raster plugin, which allows other 
programs to read GRASS rasters. However, GDAL must be built with it, and 
the plugin driver links dynamically to the GRASS installation, so it is 
not a stand-alone driver: "For GRASS 5.7 Radim Blazek has moved the driver 
to using the GRASS shared libraries directly instead of using libgrass. 
Currently (GDAL 1.2.2 and later) ..." - GRASS is now at 6.4.2 and GDAL at 
1.9.0, so the format definition shows how up to date the plugin notes are.

So the only sensible route if you do not have GRASS installed is to export 
the files to a GDAL raster format and use those with readGDAL() or 
raster(), etc.

Hope this clarifies,

Roger

>
> Thank you,
> Paul
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From dkennedy at airsci.com  Tue Feb 14 18:22:31 2012
From: dkennedy at airsci.com (dman)
Date: Tue, 14 Feb 2012 09:22:31 -0800 (PST)
Subject: [R-sig-Geo] "extract" in the raster package
Message-ID: <1329240151347-7284748.post@n2.nabble.com>

I have done some searching, and don't believe this to be a cross-post, my
apologies if this is the case.

I am dealing with spatial points with the "extract" function within raster.
The points can be served up as long/lat or projected into their UTM
appropriate. The raster I have underneath for the extraction is in long/lat
and spans most of N. America. I'm extracting varying buffers around each
point, and in the documentation, it appears that I can send long/lat points
and use meter measures for my buffers, which is great. I am concerned with
the error of measure that one sees South to North using long/lat WGS84. Has
anyone dealt with/had this thought before? Is this accounted for in the
function?  

Thank you for your time and efforts

David Kennedy

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/extract-in-the-raster-package-tp7284748p7284748.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From etiennebr at gmail.com  Tue Feb 14 19:04:31 2012
From: etiennebr at gmail.com (Etienne B. Racine)
Date: Tue, 14 Feb 2012 13:04:31 -0500
Subject: [R-sig-Geo] help to create a raster BRICK from a list
In-Reply-To: <CAJ6JbR8Gf+BEQtfvUqmo0JXpHe_uex00=kY8xcMLKecRKyJTpA@mail.gmail.com>
References: <CAJ6JbR_i+K6+mbqit9Zvme25VFTKhHaKwLgSw=5fJo=u=tGMog@mail.gmail.com>
	<1328912361826-7274487.post@n2.nabble.com>
	<CAJ6JbR8Gf+BEQtfvUqmo0JXpHe_uex00=kY8xcMLKecRKyJTpA@mail.gmail.com>
Message-ID: <CALjAYt7oHYgC0gAmfBPOz0jBaHyExLib1-LMj01oteg8357_KA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120214/1de7e3f9/attachment.pl>

From etiennebr at gmail.com  Tue Feb 14 19:04:45 2012
From: etiennebr at gmail.com (etiennebr)
Date: Tue, 14 Feb 2012 10:04:45 -0800 (PST)
Subject: [R-sig-Geo] help to create a raster BRICK from a list
In-Reply-To: <CAJ6JbR8Gf+BEQtfvUqmo0JXpHe_uex00=kY8xcMLKecRKyJTpA@mail.gmail.com>
References: <CAJ6JbR_i+K6+mbqit9Zvme25VFTKhHaKwLgSw=5fJo=u=tGMog@mail.gmail.com>
	<1328912361826-7274487.post@n2.nabble.com>
	<CAJ6JbR8Gf+BEQtfvUqmo0JXpHe_uex00=kY8xcMLKecRKyJTpA@mail.gmail.com>
Message-ID: <CALjAYt7oHYgC0gAmfBPOz0jBaHyExLib1-LMj01oteg8357_KA@mail.gmail.com>

2012/2/14 gianni lavaredo [via R-sig-geo] <
ml-node+s2731867n7284084h32 at n2.nabble.com>

> Dear Etienne,
>
> i hale always the some error
>
> b <- brick(my.Area.tot)
> Error in function (classes, fdef, mtable)  :
>   unable to find an inherited method for function "brick", for signature
> "list"
>
Hmmm... do you have a the latest raster package ? I can read lists with
brick.

Maybe Robert will be able to help on this one.

Otherwise, could you provide a reproducible example ?

Etienne


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/help-to-create-a-raster-BRICK-from-a-list-tp7266815p7284910.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From hyeonjongkil at ucla.edu  Tue Feb 14 19:38:27 2012
From: hyeonjongkil at ucla.edu (HJ Kil)
Date: Tue, 14 Feb 2012 10:38:27 -0800
Subject: [R-sig-Geo] ME function for negative binomial
In-Reply-To: <alpine.LRH.2.02.1202131124180.13403@reclus.nhh.no>
References: <000001cce9b0$071319f0$15394dd0$@ucla.edu>
	<alpine.LRH.2.02.1202131124180.13403@reclus.nhh.no>
Message-ID: <000001cceb47$d7945650$86bd02f0$@ucla.edu>

Sorry for not providing all the information appropriately and thank you so
much for your comments.
I would like to share my dataset, but, because of the confidentiality issue,
I could not share it.
All my explanatory variables are continuous variables and my dependent
variable almost shows exactly the same histogram distribution as this link:
(http://www.ats.ucla.edu/stat/sas/dae/nbreg.htm)
When I run the base negative binomial model without using "ME function," as
you see, I have to expand the # of convergence (maxit=100 option in glm.nb)
to be converged.
Without this, I could not converge the model appropriately.
Is it possible that, if the base model requires more # of convergence to
find the initial theta, this feature is also reflected to the ME function?

Regarding your comment, I have a couple of clarifying questions.
"The tests" in the below comment refer both "moran.test" and "lm.morantest"
(not ME function)?
So, do you mean, although ME function can be used for normal, binomial,
poisson and negative binomial, the above two tests may not be appropriate
for binomial, poisson and negative binomial distribution?

In addition, if I received these "not converged" warnings, could you teach
me some strategies that I may use to make the model be converged?
Again, thank you so much for your answer.
HJ


-----Original Message-----
From: Roger Bivand [mailto:Roger.Bivand at nhh.no] 
Sent: Monday, February 13, 2012 2:31 AM
To: HJ Kil
Cc: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] ME function for negative binomial

On Sun, 12 Feb 2012, HJ Kil wrote:

> Dear all,
>
>
>
> First of all, thank you so much for reading this long mail (Please 
> read this if you are familiar with the "ME" function).


Please rework this question with data that everyone can see. There is no
chance at all of seeing what is wrong without your casting this in terms of
a standard data set, or making your own data available. The tests you are
using have not been established for non-normal variables, so apparent
results on GLM residuals may not be correctly sized.

Warnings and lack of convergence are always potentially serious and must
always be checked out (to see what the cause is).

Roger

>
> I need your help and comments to conduct an analysis with "ME" 
> function of the package spdep.
>
> I am trying to run a regression (a count dependent variable and 7-8 
> explanatory variables) with about 2000 observations (adjacent census 
> tracts in an urban area).
>
> Basically, I am trying to look at how these areas' demographics 
> aspects (7-8 explanatory variables) are related to a certain social 
> aspect (my dependent count variable).
>
> To do this, I used the below script (Italic: parts of results):
>
>
>
> ### Load all libraries: I skipped all the libraries that I loaded
>
> ### Read shape data file made/joined by ArcGis and a queen matrix 
> (gal) made by Geoda
>
> myshp <- readShapeSpatial("a.shp", ID="ID")
>
> mygal <- read.gal("a.GAL")
>
>
>
> #Test symmetry of the matrix: Result was "TRUE"
>
> print(is.symmetric.nb(mygal))
>
> [1] TRUE
>
>
>
> #Change nb to listw
>
> mylistw <- nb2listw(mygal)
>
>
>
> #Run a poisson model as a base: including offset since I would like to 
> know "density"
>
> base.poisson <- glm(dep ~ a + b + c + d + e + f + g, 
> offset(log(TOT_POP)), data=myshp, family="poisson")
>
>
>
> #Run dispersion test to check whether a negative binomial model is better:
> RESULT showed over-dispersed.
>
> dispersiontest(base.poisson)
>
>        Overdispersion test
>
> data:  base.poisson
>
> z = 8.711, p-value < 2.2e-16
>
> alternative hypothesis: true dispersion is greater than 1
>
> sample estimates:
>
> dispersion
>
>  3.123331
>
>
>
> #Run a negative binomial regression as a base by using "glm.nb"
>
> base.nb <- glm.nb(dep ~ a + b + c + d + e + f + g + 
> offset(log(TOTAL_POP)), data=myshp, maxit=100)
>
> summary(base.nb)
>
>
>
> #Based on the result of the above, I found that "initial theta" was 
> "1.174928547"
>
> #I used the other way of running a negative binomial with the above value:
>
> base.nb2 <- glm(dep ~  a + b + c + d + e + f + g + 
> offset(log(TOTAL_POP)), data=myshp, 
> family=negative.binomial(1.174928547), maxit=100)
>
> summary(base.nb)
>
>
>
> # I found that both results are VERY SIMILAR (decimal differences)
>
>
>
> # Conducting "moran.test" and "lm.morantest" to supplementary check 
> the existence of the spatial autocorrelation in the residuals before 
> moving to the eigenfiltering
>
> moran.test(residuals.glm(base.nb), mylistw)
>
>        Moran's I test under randomisation
>
> Moran I statistic standard deviate = 10.835, p-value < 2.2e-16
>
> alternative hypothesis: greater
>
> sample estimates:
>
> Moran I statistic       Expectation          Variance
>
>     0.1372647104     -0.0004995005      0.0001616635
>
>
>
> moran.test(residuals.glm(base.nb2), mylistw)
>
>        Moran's I test under randomisation
>
> Moran I statistic standard deviate = 10.837, p-value < 2.2e-16
>
> alternative hypothesis: greater
>
> sample estimates:
>
> Moran I statistic       Expectation          Variance
>
>     0.1372900049     -0.0004995005      0.0001616636
>
>
>
> lm.morantest(base.nb, mylistw)
>
>   Global Moran's I for regression residuals
>
> Moran I statistic standard deviate = 16.465, p-value < 2.2e-16
>
> alternative hypothesis: greater
>
> sample estimates:
>
> Observed Moran's I        Expectation           Variance
>
>      0.2056132825      -0.0028246948       0.0001602612
>
>
>
> lm.morantest(base.nb2, mylistw)
>
>     Global Moran's I for regression residuals
>
> Moran I statistic standard deviate = 16.4668, p-value < 2.2e-16
>
> alternative hypothesis: greater
>
> sample estimates:
>
> Observed Moran's I        Expectation           Variance
>
>      0.2056358254      -0.0028246666       0.0001602612
>
>
>
> ## I do not know whether both tests are OK for a negative binomial 
> model, it seems that they all showed that there existed somewhat 
> significant spatial autocorrelations on the residuals.
>
>
>
> #Run "ME" to identify whether the model needs eigenvectors and, if 
> needed, how many eigenvectors are needed.
>
> ### FIRST with base.nb2 (glm above)
>
> myme.nb2 <- ME(dep ~ a + b + c + d + e + f + g, data=myshp, family = 
> negative.binomial(1.174928547), offset=log(TOTAL_POP), listw=mylistw, 
> alpha=0.05, verbose=TRUE, nsim=99)
>
> Error in ME(a ~ b + c + d + e +  :
>
>   base correlation larger than alpha
>
> In addition: Warning message:
>
> glm.fit: algorithm did not converge
>
>
>
> ## SECOND with base.nb1 (glm.nb)
>
> ## To do this, I copied and pasted the new "ME.nb" command made by 
> Pablo (Feb. 03): 
> http://www.mail-archive.com/r-sig-geo at r-project.org/msg03967.html
>
> myme.nb <- ME.nb (dep ~ a + b + c + d + e + f + g + 
> offset(log(TOTAL_POP), data=myshp, listw=mylistw, alpha=0.05, nsim=99, 
> verbose =TRUE)
>
> Error in ME.nb(base.nb2, data = myshp, listw = mylistw, alpha = 0.05,  :
>
>  base correlation larger than alpha
>
> In addition: Warning messages:
>
> 1: glm.fit: algorithm did not converge
>
> 2: glm.fit: algorithm did not converge
>
> 3: In glm.nb(formula, data = data) : alternation limit reached
>
>
>
> ### I TRIED AFTER CHANGING "stdev" OPTIONS BOTH, BUT THE RESULTS WERE 
> THE SAME.
>
> ### WHEN I INCREASED THE ALPHA LEVEL TO 0.4 IN BOTH, THE RESULTS WERE 
> THE SAME.
>
> ### HOWEVER, WHEN I INCREASED THE ALPHA LEVEL TO 4.7 IN BOTH, I 
> FINALLY GOT THE BELOW RESULT.
>
> myme.nb2 <- ME (dep~ a + b + c + d + e + f + g, data=myshp, family = 
> negative.binomial(1.174928547), offset=log(TOTAL_POP), listw=mylistw, 
> alpha=0.48, stdev=TRUE, verbose=TRUE, nsim=99)
>
> eV[,135], I: 3.805725e-09 ZI: -0.1491594, pr(ZI): 0.4407139
>
> eV[,18], I: 1.253316e-10 ZI: -0.02069758, pr(ZI): 0.4917434
>
> There were 50 or more warnings (use warnings() to see the first 50)
>
> (all warnings: glm.fit: algorithm did not converge)
>
>
>
> myme.nb1 <- ME.nb (REV_NUM ~ RACE_H_6_B + AGE_H_8_B + EDU_H_7_TO + 
> INC_H_GINI + POV_PE + AVE_HOU_IN + GOV_REV + offset(log(TOTAL_POP)), 
> data=myshp, listw=mylistw, alpha=0.48, nsim=999, verbose =TRUE)
>
> eV[,15], I: 2.775260e-08 ZI:
>
> NA, pr(ZI): 0.451
>
> eV[,17], I: 1.302856e-08 ZI: NA, pr(ZI): 0.486
>
> There were 50 or more warnings (use warnings() to see the first 50)
>
> (warnings:  glm.fit: algorithm did not converge
>
> In glm.nb(formula, data = data) : alternation limit reached
>
> In glm.nb(Y ~ iX) : alternation limit reached)
>
>
>
> ### Based on the result, if the warnings (glm.fit: algorithm did not
> converge) are not serious (particularly for the lower alpha level at 
> which "base correlation larger than alphs showed"), I decided to stick 
> to a negative binomial (non-spatial) model for my statistics.
>
>
>
> Here are some questions to the groups related to this work:
>
> First, is there any way that I can make the algorithm be converged? 
> (like
> maxit=100 in glm.nb).
>
> Particularly, if Pablo can read this, It would appreciate if you can 
> give me some suggestion for the modification of your program.
>
>
>
> Second, could you let me know if you find any mistakes on my script? 
> In addition, does my conclusion (using a non-spatial negative 
> binomial) seem to be OK?
>
> Or, if you think the warning is very serious, what alternative could 
> you suggest? Do you think a spatial poisson may be an alternative? 
> (considering spatial autocorrelation is more important than over 
> dispersion.)
>
> (When I conduct the same procedure (the ME function) with the poisson 
> model above, I did not get any warnings or errors with "ME" function.)
>
>
>
> Third, regarding the differences of Moran's I among "moran.test,"
> "lm.morantest," and "ME,"
>
> If the Moran's I from the "ME" function is correct for glm, I think 
> that both "moran.test" and "lm.morantest" are somewhat risky for both 
> poisson or negative binomial, at least a model with "offset" (like mine).
>
> (Actually, I also tried to use the ME function with the poisson base 
> model above (though my data seems overdispersed). Then, the result 
> requires me to add about 20 eigenvectors into my model at alpha 0.2, 
> so that I "fitted" the eigenvectors from the "ME" results to my base 
> poisson model. Then, I double-checked the spatial poisson regression 
> with both "moran.test" and "lm.morantest," and they still showed  
> somewhat significant spatial autocorrelations in the model.)
>
> Could anyone explain the reason of these differences?
>
>
>
> Fourth, this is somewhat different topic, but I heard that Bayesian is 
> another option for these non-normal distributed model. However, I also 
> read a couple of articles (e.g., Gelman(2008)), that it may be 
> dangerous to use it since it requires "prior distribution or belief" 
> incorporated in the model. Is it also applied to spatial statistics? 
> For me, I have never use the Bayesian yet and it seems to me that I 
> can use it for now with my dataset.
>
>
>
> I would be very appreciated for any comments.
>
> Thanks,
>
> HJ
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

--
Roger Bivand
Department of Economics, NHH Norwegian School of Economics, Helleveien 30,
N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From dkennedy at airsci.com  Tue Feb 14 20:10:16 2012
From: dkennedy at airsci.com (dman)
Date: Tue, 14 Feb 2012 11:10:16 -0800 (PST)
Subject: [R-sig-Geo] "extract" in the raster package
In-Reply-To: <1329240151347-7284748.post@n2.nabble.com>
References: <1329240151347-7284748.post@n2.nabble.com>
Message-ID: <1329246616661-7285124.post@n2.nabble.com>

Ah ha.  Even on the order of distance I'm working with, I lose one 30x30m
pixel for a 4000m buffer around a point. So this question is something of a
moot point. 

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/extract-in-the-raster-package-tp7284748p7285124.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From r.hijmans at gmail.com  Tue Feb 14 21:34:43 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 14 Feb 2012 12:34:43 -0800
Subject: [R-sig-Geo] help to create a raster BRICK from a list
In-Reply-To: <CALjAYt7oHYgC0gAmfBPOz0jBaHyExLib1-LMj01oteg8357_KA@mail.gmail.com>
References: <CAJ6JbR_i+K6+mbqit9Zvme25VFTKhHaKwLgSw=5fJo=u=tGMog@mail.gmail.com>
	<1328912361826-7274487.post@n2.nabble.com>
	<CAJ6JbR8Gf+BEQtfvUqmo0JXpHe_uex00=kY8xcMLKecRKyJTpA@mail.gmail.com>
	<CALjAYt7oHYgC0gAmfBPOz0jBaHyExLib1-LMj01oteg8357_KA@mail.gmail.com>
Message-ID: <CANtt_hw=iF39ezd09st-vTF0TihMgJqbM-2wP9o3KCtz0mnSng@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120214/fc153850/attachment.pl>

From r.hijmans at gmail.com  Tue Feb 14 21:43:11 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 14 Feb 2012 12:43:11 -0800
Subject: [R-sig-Geo] RasterBrick questions
In-Reply-To: <CALjAYt7iSZzxkJnEkFMNB=m9xukEZEftrDLdDYAu2Ag6bDXQaQ@mail.gmail.com>
References: <20120214125115.50300@gmx.net>
	<CALjAYt7iSZzxkJnEkFMNB=m9xukEZEftrDLdDYAu2Ag6bDXQaQ@mail.gmail.com>
Message-ID: <CANtt_hyt0i8amOnN94A0wBJYYy2DSn61Apd16BEuf4ernyep2w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120214/36d8bb8b/attachment.pl>

From JRadinger at gmx.at  Wed Feb 15 10:25:59 2012
From: JRadinger at gmx.at (Johannes Radinger)
Date: Wed, 15 Feb 2012 10:25:59 +0100
Subject: [R-sig-Geo] GRASS raster as RasterLayer
Message-ID: <20120215092559.320590@gmx.net>

Hello,

I am not sure if a ran into a dead end, but how can I import a GRASS GIS raster (native) into R as a RasterLayer. With the spgrass6 package I am able to import the rasters (readRAST6) into R, but they are in SpatialGridDataFrame format...but I need them for other calculations (dismo-package) as RasterLayers resp. bricks/stacks.
Is there a R function that transforms from SpatialGridDataFrame to RasterLayer? Or do I need to save the Raster in GRASS as ASCII file etc. and read that raster in with the raster package?

Best regards,

Johannes
--


From rafael.wueest at wsl.ch  Wed Feb 15 10:31:26 2012
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Wed, 15 Feb 2012 10:31:26 +0100
Subject: [R-sig-Geo] GRASS raster as RasterLayer
In-Reply-To: <20120215092559.320590@gmx.net>
References: <20120215092559.320590@gmx.net>
Message-ID: <B8B6AD00-5CF9-4767-A11C-D34C15CCF49F@wsl.ch>

Hi,

if you have a SpatialGridDataFrame you can use the raster() command to transform it into a raster.

check ?raster

Rafael


On 15.02.2012, at 10:25, Johannes Radinger wrote:

> Hello,
> 
> I am not sure if a ran into a dead end, but how can I import a GRASS GIS raster (native) into R as a RasterLayer. With the spgrass6 package I am able to import the rasters (readRAST6) into R, but they are in SpatialGridDataFrame format...but I need them for other calculations (dismo-package) as RasterLayers resp. bricks/stacks.
> Is there a R function that transforms from SpatialGridDataFrame to RasterLayer? Or do I need to save the Raster in GRASS as ASCII file etc. and read that raster in with the raster package?
> 
> Best regards,
> 
> Johannes
> --
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest


From Roger.Bivand at nhh.no  Wed Feb 15 12:38:53 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 15 Feb 2012 12:38:53 +0100 (CET)
Subject: [R-sig-Geo] ME function for negative binomial
In-Reply-To: <000001cceb47$d7945650$86bd02f0$@ucla.edu>
References: <000001cce9b0$071319f0$15394dd0$@ucla.edu>
	<alpine.LRH.2.02.1202131124180.13403@reclus.nhh.no>
	<000001cceb47$d7945650$86bd02f0$@ucla.edu>
Message-ID: <alpine.LRH.2.02.1202151234470.14063@reclus.nhh.no>

On Tue, 14 Feb 2012, HJ Kil wrote:

> Sorry for not providing all the information appropriately and thank you so
> much for your comments.
> I would like to share my dataset, but, because of the confidentiality issue,
> I could not share it.

So then you will have to provide code demonstrating the problem with a 
data set that is available, say one shipped with one of the packages, 
perhaps in ade4 or similar. Have you also looked at advice given in:

http://www.bio.umontreal.ca/numecolR/

especially chapter 7?

Roger

> All my explanatory variables are continuous variables and my dependent
> variable almost shows exactly the same histogram distribution as this link:
> (http://www.ats.ucla.edu/stat/sas/dae/nbreg.htm)
> When I run the base negative binomial model without using "ME function," as
> you see, I have to expand the # of convergence (maxit=100 option in glm.nb)
> to be converged.
> Without this, I could not converge the model appropriately.
> Is it possible that, if the base model requires more # of convergence to
> find the initial theta, this feature is also reflected to the ME function?
>
> Regarding your comment, I have a couple of clarifying questions.
> "The tests" in the below comment refer both "moran.test" and "lm.morantest"
> (not ME function)?
> So, do you mean, although ME function can be used for normal, binomial,
> poisson and negative binomial, the above two tests may not be appropriate
> for binomial, poisson and negative binomial distribution?
>
> In addition, if I received these "not converged" warnings, could you teach
> me some strategies that I may use to make the model be converged?
> Again, thank you so much for your answer.
> HJ
>
>
> -----Original Message-----
> From: Roger Bivand [mailto:Roger.Bivand at nhh.no]
> Sent: Monday, February 13, 2012 2:31 AM
> To: HJ Kil
> Cc: r-sig-geo at r-project.org
> Subject: Re: [R-sig-Geo] ME function for negative binomial
>
> On Sun, 12 Feb 2012, HJ Kil wrote:
>
>> Dear all,
>>
>>
>>
>> First of all, thank you so much for reading this long mail (Please
>> read this if you are familiar with the "ME" function).
>
>
> Please rework this question with data that everyone can see. There is no
> chance at all of seeing what is wrong without your casting this in terms of
> a standard data set, or making your own data available. The tests you are
> using have not been established for non-normal variables, so apparent
> results on GLM residuals may not be correctly sized.
>
> Warnings and lack of convergence are always potentially serious and must
> always be checked out (to see what the cause is).
>
> Roger
>
>>
>> I need your help and comments to conduct an analysis with "ME"
>> function of the package spdep.
>>
>> I am trying to run a regression (a count dependent variable and 7-8
>> explanatory variables) with about 2000 observations (adjacent census
>> tracts in an urban area).
>>
>> Basically, I am trying to look at how these areas' demographics
>> aspects (7-8 explanatory variables) are related to a certain social
>> aspect (my dependent count variable).
>>
>> To do this, I used the below script (Italic: parts of results):
>>
>>
>>
>> ### Load all libraries: I skipped all the libraries that I loaded
>>
>> ### Read shape data file made/joined by ArcGis and a queen matrix
>> (gal) made by Geoda
>>
>> myshp <- readShapeSpatial("a.shp", ID="ID")
>>
>> mygal <- read.gal("a.GAL")
>>
>>
>>
>> #Test symmetry of the matrix: Result was "TRUE"
>>
>> print(is.symmetric.nb(mygal))
>>
>> [1] TRUE
>>
>>
>>
>> #Change nb to listw
>>
>> mylistw <- nb2listw(mygal)
>>
>>
>>
>> #Run a poisson model as a base: including offset since I would like to
>> know "density"
>>
>> base.poisson <- glm(dep ~ a + b + c + d + e + f + g,
>> offset(log(TOT_POP)), data=myshp, family="poisson")
>>
>>
>>
>> #Run dispersion test to check whether a negative binomial model is better:
>> RESULT showed over-dispersed.
>>
>> dispersiontest(base.poisson)
>>
>>        Overdispersion test
>>
>> data:  base.poisson
>>
>> z = 8.711, p-value < 2.2e-16
>>
>> alternative hypothesis: true dispersion is greater than 1
>>
>> sample estimates:
>>
>> dispersion
>>
>>  3.123331
>>
>>
>>
>> #Run a negative binomial regression as a base by using "glm.nb"
>>
>> base.nb <- glm.nb(dep ~ a + b + c + d + e + f + g +
>> offset(log(TOTAL_POP)), data=myshp, maxit=100)
>>
>> summary(base.nb)
>>
>>
>>
>> #Based on the result of the above, I found that "initial theta" was
>> "1.174928547"
>>
>> #I used the other way of running a negative binomial with the above value:
>>
>> base.nb2 <- glm(dep ~  a + b + c + d + e + f + g +
>> offset(log(TOTAL_POP)), data=myshp,
>> family=negative.binomial(1.174928547), maxit=100)
>>
>> summary(base.nb)
>>
>>
>>
>> # I found that both results are VERY SIMILAR (decimal differences)
>>
>>
>>
>> # Conducting "moran.test" and "lm.morantest" to supplementary check
>> the existence of the spatial autocorrelation in the residuals before
>> moving to the eigenfiltering
>>
>> moran.test(residuals.glm(base.nb), mylistw)
>>
>>        Moran's I test under randomisation
>>
>> Moran I statistic standard deviate = 10.835, p-value < 2.2e-16
>>
>> alternative hypothesis: greater
>>
>> sample estimates:
>>
>> Moran I statistic       Expectation          Variance
>>
>>     0.1372647104     -0.0004995005      0.0001616635
>>
>>
>>
>> moran.test(residuals.glm(base.nb2), mylistw)
>>
>>        Moran's I test under randomisation
>>
>> Moran I statistic standard deviate = 10.837, p-value < 2.2e-16
>>
>> alternative hypothesis: greater
>>
>> sample estimates:
>>
>> Moran I statistic       Expectation          Variance
>>
>>     0.1372900049     -0.0004995005      0.0001616636
>>
>>
>>
>> lm.morantest(base.nb, mylistw)
>>
>>   Global Moran's I for regression residuals
>>
>> Moran I statistic standard deviate = 16.465, p-value < 2.2e-16
>>
>> alternative hypothesis: greater
>>
>> sample estimates:
>>
>> Observed Moran's I        Expectation           Variance
>>
>>      0.2056132825      -0.0028246948       0.0001602612
>>
>>
>>
>> lm.morantest(base.nb2, mylistw)
>>
>>     Global Moran's I for regression residuals
>>
>> Moran I statistic standard deviate = 16.4668, p-value < 2.2e-16
>>
>> alternative hypothesis: greater
>>
>> sample estimates:
>>
>> Observed Moran's I        Expectation           Variance
>>
>>      0.2056358254      -0.0028246666       0.0001602612
>>
>>
>>
>> ## I do not know whether both tests are OK for a negative binomial
>> model, it seems that they all showed that there existed somewhat
>> significant spatial autocorrelations on the residuals.
>>
>>
>>
>> #Run "ME" to identify whether the model needs eigenvectors and, if
>> needed, how many eigenvectors are needed.
>>
>> ### FIRST with base.nb2 (glm above)
>>
>> myme.nb2 <- ME(dep ~ a + b + c + d + e + f + g, data=myshp, family =
>> negative.binomial(1.174928547), offset=log(TOTAL_POP), listw=mylistw,
>> alpha=0.05, verbose=TRUE, nsim=99)
>>
>> Error in ME(a ~ b + c + d + e +  :
>>
>>   base correlation larger than alpha
>>
>> In addition: Warning message:
>>
>> glm.fit: algorithm did not converge
>>
>>
>>
>> ## SECOND with base.nb1 (glm.nb)
>>
>> ## To do this, I copied and pasted the new "ME.nb" command made by
>> Pablo (Feb. 03):
>> http://www.mail-archive.com/r-sig-geo at r-project.org/msg03967.html
>>
>> myme.nb <- ME.nb (dep ~ a + b + c + d + e + f + g +
>> offset(log(TOTAL_POP), data=myshp, listw=mylistw, alpha=0.05, nsim=99,
>> verbose =TRUE)
>>
>> Error in ME.nb(base.nb2, data = myshp, listw = mylistw, alpha = 0.05,  :
>>
>>  base correlation larger than alpha
>>
>> In addition: Warning messages:
>>
>> 1: glm.fit: algorithm did not converge
>>
>> 2: glm.fit: algorithm did not converge
>>
>> 3: In glm.nb(formula, data = data) : alternation limit reached
>>
>>
>>
>> ### I TRIED AFTER CHANGING "stdev" OPTIONS BOTH, BUT THE RESULTS WERE
>> THE SAME.
>>
>> ### WHEN I INCREASED THE ALPHA LEVEL TO 0.4 IN BOTH, THE RESULTS WERE
>> THE SAME.
>>
>> ### HOWEVER, WHEN I INCREASED THE ALPHA LEVEL TO 4.7 IN BOTH, I
>> FINALLY GOT THE BELOW RESULT.
>>
>> myme.nb2 <- ME (dep~ a + b + c + d + e + f + g, data=myshp, family =
>> negative.binomial(1.174928547), offset=log(TOTAL_POP), listw=mylistw,
>> alpha=0.48, stdev=TRUE, verbose=TRUE, nsim=99)
>>
>> eV[,135], I: 3.805725e-09 ZI: -0.1491594, pr(ZI): 0.4407139
>>
>> eV[,18], I: 1.253316e-10 ZI: -0.02069758, pr(ZI): 0.4917434
>>
>> There were 50 or more warnings (use warnings() to see the first 50)
>>
>> (all warnings: glm.fit: algorithm did not converge)
>>
>>
>>
>> myme.nb1 <- ME.nb (REV_NUM ~ RACE_H_6_B + AGE_H_8_B + EDU_H_7_TO +
>> INC_H_GINI + POV_PE + AVE_HOU_IN + GOV_REV + offset(log(TOTAL_POP)),
>> data=myshp, listw=mylistw, alpha=0.48, nsim=999, verbose =TRUE)
>>
>> eV[,15], I: 2.775260e-08 ZI:
>>
>> NA, pr(ZI): 0.451
>>
>> eV[,17], I: 1.302856e-08 ZI: NA, pr(ZI): 0.486
>>
>> There were 50 or more warnings (use warnings() to see the first 50)
>>
>> (warnings:  glm.fit: algorithm did not converge
>>
>> In glm.nb(formula, data = data) : alternation limit reached
>>
>> In glm.nb(Y ~ iX) : alternation limit reached)
>>
>>
>>
>> ### Based on the result, if the warnings (glm.fit: algorithm did not
>> converge) are not serious (particularly for the lower alpha level at
>> which "base correlation larger than alphs showed"), I decided to stick
>> to a negative binomial (non-spatial) model for my statistics.
>>
>>
>>
>> Here are some questions to the groups related to this work:
>>
>> First, is there any way that I can make the algorithm be converged?
>> (like
>> maxit=100 in glm.nb).
>>
>> Particularly, if Pablo can read this, It would appreciate if you can
>> give me some suggestion for the modification of your program.
>>
>>
>>
>> Second, could you let me know if you find any mistakes on my script?
>> In addition, does my conclusion (using a non-spatial negative
>> binomial) seem to be OK?
>>
>> Or, if you think the warning is very serious, what alternative could
>> you suggest? Do you think a spatial poisson may be an alternative?
>> (considering spatial autocorrelation is more important than over
>> dispersion.)
>>
>> (When I conduct the same procedure (the ME function) with the poisson
>> model above, I did not get any warnings or errors with "ME" function.)
>>
>>
>>
>> Third, regarding the differences of Moran's I among "moran.test,"
>> "lm.morantest," and "ME,"
>>
>> If the Moran's I from the "ME" function is correct for glm, I think
>> that both "moran.test" and "lm.morantest" are somewhat risky for both
>> poisson or negative binomial, at least a model with "offset" (like mine).
>>
>> (Actually, I also tried to use the ME function with the poisson base
>> model above (though my data seems overdispersed). Then, the result
>> requires me to add about 20 eigenvectors into my model at alpha 0.2,
>> so that I "fitted" the eigenvectors from the "ME" results to my base
>> poisson model. Then, I double-checked the spatial poisson regression
>> with both "moran.test" and "lm.morantest," and they still showed
>> somewhat significant spatial autocorrelations in the model.)
>>
>> Could anyone explain the reason of these differences?
>>
>>
>>
>> Fourth, this is somewhat different topic, but I heard that Bayesian is
>> another option for these non-normal distributed model. However, I also
>> read a couple of articles (e.g., Gelman(2008)), that it may be
>> dangerous to use it since it requires "prior distribution or belief"
>> incorporated in the model. Is it also applied to spatial statistics?
>> For me, I have never use the Bayesian yet and it seems to me that I
>> can use it for now with my dataset.
>>
>>
>>
>> I would be very appreciated for any comments.
>>
>> Thanks,
>>
>> HJ
>>
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics, Helleveien 30,
> N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From karimbakhat at gmail.com  Wed Feb 15 14:40:56 2012
From: karimbakhat at gmail.com (Karim)
Date: Wed, 15 Feb 2012 05:40:56 -0800 (PST)
Subject: [R-sig-Geo] Network distance
Message-ID: <1329313256059-7287496.post@n2.nabble.com>

Helo 
I want use network distance  in spgwr , have u any idea how ca i do it..,
thinks
Karim


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Network-distance-tp7287496p7287496.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From friendly at yorku.ca  Wed Feb 15 15:49:11 2012
From: friendly at yorku.ca (Michael Friendly)
Date: Wed, 15 Feb 2012 09:49:11 -0500
Subject: [R-sig-Geo] Plotting data on Canadian maps
Message-ID: <4F3BC5E7.5050107@yorku.ca>

Barry Rowlingson replied to a query on R-Help:


>  gadm has four levels of Canadian boundaries, at first glance -
> country, province (black), something smaller than province (blue) and
> then red which looks like urban divisions.
>
>  The province upper-left doesn't seem to have any blue subdivisions,
> but that's possibly because there would be more subdivisions than
> people who actually live there.
>
> http://www.gadm.org/download
>
>  Gadm also has a facility to download the data as .Rdata objects that
> can load straight into R.

I've downloaded the .Rdata versions of the maps of Canada, 
CAN_adm[1-4].RData but can't find information on the contents of these 
SPDataFrames, other than direct exploration:

 > load("CAN_adm1.RData")
 > class(gadm)
[1] "SpatialPolygonsDataFrame"
attr(,"package")
[1] "sp"
 > names(gadm)
  [1] "PID"       "ID_0"      "ISO"       "NAME_0"    "ID_1" 
"NAME_1"    "NL_NAME_1" "VARNAME_1"
  [9] "TYPE_1"    "ENGTYPE_1"
 > gadm$NAME_1
  [1] "Alberta"                   "British Columbia"          "Manitoba" 

  [4] "New Brunswick"             "Newfoundland and Labrador" "Northwest 
Territories"
  [7] "Nova Scotia"               "Nunavut"                   "Ontario" 

[10] "Prince Edward Island"      "Qu?bec" 
"Saskatchewan"
[13] "Yukon"

I'd like to try plotting some data on the map of Ontario.  Does anyone 
have an example or sources for such data?

-Michael


-- 
Michael Friendly     Email: friendly AT yorku DOT ca
Professor, Psychology Dept.
York University      Voice: 416 736-5115 x66249 Fax: 416 736-5814
4700 Keele Street    Web:   http://www.datavis.ca
Toronto, ONT  M3J 1P3 CANADA


From zua3 at cornell.edu  Thu Feb 16 04:39:17 2012
From: zua3 at cornell.edu (Zia Ahmed)
Date: Wed, 15 Feb 2012 22:39:17 -0500
Subject: [R-sig-Geo] Problem with create several maps and save a PNG files
 in a loop from a sppolygon object
Message-ID: <4F3C7A65.6050705@cornell.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120215/69908958/attachment.pl>

From atsiban at unipi.gr  Fri Feb 17 00:23:11 2012
From: atsiban at unipi.gr (Apostolis)
Date: Thu, 16 Feb 2012 15:23:11 -0800 (PST)
Subject: [R-sig-Geo] A question about gwr.morantest  pvalue
Message-ID: <1329434591050-7292670.post@n2.nabble.com>

Dear list members

I am a new user of R and I would like to ask a question about the function
gwr.morantest which is included in the spgwr package.

According to the paper of Leung et al  page  881 
when 
 EQ.EQ3.gwr > 0 the pvalue of the test is  P(chisqh<= chi2.gwr)    
(equation 43) 

and when

 EQ.EQ3.gwr < 0    the pvalue  is  1 - P(chisqh<= chi2.gwr)  (equation 44) 

However in the function gwr.morantest the estimations in the IF  are
respectively: 

if (EQ.EQ3.gwr > 0) {
        chi2.gwr <- h.gwr - ((sqrt(2 * h.gwr) * EQ.gwr)/(sqrt(varQ.gwr)))
        p.gwr <- 1 - pchisq(chi2.gwr, h.gwr)
    }
    else if (EQ.EQ3.gwr < 0) {
        chi2.gwr <- (h.gwr + ((sqrt(2 * h.gwr) * EQ.gwr)/(sqrt(varQ.gwr))))
        p.gwr <- pchisq(chi2.gwr, h.gwr)
    }

Is it correct or there is an error? My problem is in the appearance  of 1 in 
p.gwr inside the IF. 

I wish to use the gwr.morantest function in a simulation study and I would
like to know whether the function estimates the pvalue which is described in
the paper  correctly.

Thanks in advance
Apostolis





--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/A-question-about-gwr-morantest-pvalue-tp7292670p7292670.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From edzer.pebesma at uni-muenster.de  Fri Feb 17 08:15:23 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 17 Feb 2012 08:15:23 +0100
Subject: [R-sig-Geo] R / ArcGIS
Message-ID: <4F3DFE8B.6030903@uni-muenster.de>

Hi,

I might succeed meeting with some ESRI / ArcGIS folks at AAG next week;
I'm in touch with them in particular about linking R to ArcGIS.

I would like to find out if any of you has been successful (or
unsuccessful) in reading or writing ArcGIS geodatabase files directly
from R, by using the rgdal driver, or by some other means.

Another issue is reading/writing spatio-temporal features  (netcdf does
spatio-temporal grids/arrays pretty well it seems); rumours go that
ArcGIS might, in the near future, support reading/writing SpatiaLite.

With best regards,
-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From mauricio.zambrano at jrc.ec.europa.eu  Fri Feb 17 08:53:28 2012
From: mauricio.zambrano at jrc.ec.europa.eu (Mauricio Zambrano-Bigiarini)
Date: Fri, 17 Feb 2012 08:53:28 +0100
Subject: [R-sig-Geo] R / ArcGIS
In-Reply-To: <4F3DFE8B.6030903@uni-muenster.de>
References: <4F3DFE8B.6030903@uni-muenster.de>
Message-ID: <4F3E0778.7020603@jrc.ec.europa.eu>

On 17/02/12 08:15, Edzer Pebesma wrote:
> Hi,
>
> I might succeed meeting with some ESRI / ArcGIS folks at AAG next week;
> I'm in touch with them in particular about linking R to ArcGIS.
>
> I would like to find out if any of you has been successful (or
> unsuccessful) in reading or writing ArcGIS geodatabase files directly
> from R, by using the rgdal driver, or by some other means.

Some days ago Barry Rowlingson share a link regarding this topic:

http://www.structuralknowledge.com/2012/02/03/why-esri-as-is-cant-be-part-of-the-open-government-movement/

In my opinion it would be great for the spatial community if ESRI helps 
to make it possible the open access to their new geodatabase format.

My 2 cents.


All the best,

Mauricio Zambrano-Bigiarini
-
=======================================================
FLOODS Action
Water Resources Unit (H01)
Institute for Environment and Sustainability (IES)
European Commission, Joint Research Centre (JRC)
webinfo    : http://floods.jrc.ec.europa.eu/
=======================================================
DISCLAIMER:\ "The views expressed are purely those of th...{{dropped:20}}


From Roger.Bivand at nhh.no  Fri Feb 17 09:25:00 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 17 Feb 2012 09:25:00 +0100 (CET)
Subject: [R-sig-Geo] R / ArcGIS
In-Reply-To: <4F3DFE8B.6030903@uni-muenster.de>
References: <4F3DFE8B.6030903@uni-muenster.de>
Message-ID: <alpine.LRH.2.02.1202170913320.23932@reclus.nhh.no>

On Fri, 17 Feb 2012, Edzer Pebesma wrote:

> Hi,
>
> I might succeed meeting with some ESRI / ArcGIS folks at AAG next week;
> I'm in touch with them in particular about linking R to ArcGIS.

Please also see this thread:

http://lists.osgeo.org/pipermail/grass-dev/2012-February/057922.html

http://trac.osgeo.org/grass/wiki/Grass7/TemporalExtension

http://svn.osgeo.org/grass/grass/trunk/temporal/

the code being Python-based.

>
> I would like to find out if any of you has been successful (or
> unsuccessful) in reading or writing ArcGIS geodatabase files directly
> from R, by using the rgdal driver, or by some other means.
>
> Another issue is reading/writing spatio-temporal features  (netcdf does
> spatio-temporal grids/arrays pretty well it seems); rumours go that
> ArcGIS might, in the near future, support reading/writing SpatiaLite.
>
> With best regards,
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From b.rowlingson at lancaster.ac.uk  Fri Feb 17 09:44:12 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 17 Feb 2012 08:44:12 +0000
Subject: [R-sig-Geo] R / ArcGIS
In-Reply-To: <4F3DFE8B.6030903@uni-muenster.de>
References: <4F3DFE8B.6030903@uni-muenster.de>
Message-ID: <CANVKczOXzyoo0GgF5HaD8xKsun9e7Z7cO+yj_Ftq7MSR2DCZiw@mail.gmail.com>

On Fri, Feb 17, 2012 at 7:15 AM, Edzer Pebesma
<edzer.pebesma at uni-muenster.de> wrote:
> Hi,
>
> I might succeed meeting with some ESRI / ArcGIS folks at AAG next week;
> I'm in touch with them in particular about linking R to ArcGIS.
>

 Good luck with that! Remind them that it was nearly 21 years ago that
I was trying to link Splus with Arc/Info! Plus ca change...

I would think that a possible solution might be to go via Rpy, since
(I think) ArcGIS can use python for scripting (ooh, in my day it was
all AML!).

 But of course it has already been done for Quantum GIS using Carson
Farmer's truly miraculous ManageR plugin, which integrates R into Qgis
with something like an IDE with graphics, data transfer between GIS
and R, file editing etc etc. I'm CCing this to Carson directly because
I know manageR needs a bit of work at the moment..

 Now if ManageR could be plugged into other GIS packages then you'd
have a rather formidable solution...

Barry


From soerengebbert at googlemail.com  Fri Feb 17 09:44:51 2012
From: soerengebbert at googlemail.com (=?UTF-8?Q?S=C3=B6ren_Gebbert?=)
Date: Fri, 17 Feb 2012 09:44:51 +0100
Subject: [R-sig-Geo] R / ArcGIS
In-Reply-To: <alpine.LRH.2.02.1202170913320.23932@reclus.nhh.no>
References: <4F3DFE8B.6030903@uni-muenster.de>
	<alpine.LRH.2.02.1202170913320.23932@reclus.nhh.no>
Message-ID: <CAPHDReJWMX-C566PudzCp8qDj_yuPnCOprox=22RZFdce1Ud=g@mail.gmail.com>

Hi Roger.
nice that you mention the temporal GIS framework for GRASS GIS 7.
Sorry for my rude question, i am curious how is this related to R and ArcGIS?

Best regards
Soeren

2012/2/17 Roger Bivand <Roger.Bivand at nhh.no>:
> On Fri, 17 Feb 2012, Edzer Pebesma wrote:
>
>> Hi,
>>
>> I might succeed meeting with some ESRI / ArcGIS folks at AAG next week;
>> I'm in touch with them in particular about linking R to ArcGIS.
>
>
> Please also see this thread:
>
> http://lists.osgeo.org/pipermail/grass-dev/2012-February/057922.html
>
> http://trac.osgeo.org/grass/wiki/Grass7/TemporalExtension
>
> http://svn.osgeo.org/grass/grass/trunk/temporal/
>
> the code being Python-based.
>
>
>>
>> I would like to find out if any of you has been successful (or
>> unsuccessful) in reading or writing ArcGIS geodatabase files directly
>> from R, by using the rgdal driver, or by some other means.
>>
>> Another issue is reading/writing spatio-temporal features ?(netcdf does
>> spatio-temporal grids/arrays pretty well it seems); rumours go that
>> ArcGIS might, in the near future, support reading/writing SpatiaLite.
>>
>> With best regards,
>>
>
> --
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Fri Feb 17 10:13:13 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 17 Feb 2012 10:13:13 +0100 (CET)
Subject: [R-sig-Geo] R / ArcGIS
In-Reply-To: <CAPHDReJWMX-C566PudzCp8qDj_yuPnCOprox=22RZFdce1Ud=g@mail.gmail.com>
References: <4F3DFE8B.6030903@uni-muenster.de>
	<alpine.LRH.2.02.1202170913320.23932@reclus.nhh.no>
	<CAPHDReJWMX-C566PudzCp8qDj_yuPnCOprox=22RZFdce1Ud=g@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1202171006370.23932@reclus.nhh.no>

On Fri, 17 Feb 2012, S?ren Gebbert wrote:

> Hi Roger.
> nice that you mention the temporal GIS framework for GRASS GIS 7. Sorry 
> for my rude question, i am curious how is this related to R and ArcGIS?

Good question! The space-time field is developing so fast that it seems 
helpful to encourage contacts between all working on issues of 
representation and implementation, as well as analysis like Cressie & 
Wikle (2011). This may make it easier later on, when users get confused 
about things not integrating well. Your GRASS work using Python may give 
ideas to others using Python, for example. It would be great, looking 
forward, for the R spacetime package to integrate well with the GRASS 
temporal implementation and anything that might emerge from ESRI, and for 
example Terralib. Does that make sense?

Roger

>
> Best regards
> Soeren
>
> 2012/2/17 Roger Bivand <Roger.Bivand at nhh.no>:
>> On Fri, 17 Feb 2012, Edzer Pebesma wrote:
>>
>>> Hi,
>>>
>>> I might succeed meeting with some ESRI / ArcGIS folks at AAG next week;
>>> I'm in touch with them in particular about linking R to ArcGIS.
>>
>>
>> Please also see this thread:
>>
>> http://lists.osgeo.org/pipermail/grass-dev/2012-February/057922.html
>>
>> http://trac.osgeo.org/grass/wiki/Grass7/TemporalExtension
>>
>> http://svn.osgeo.org/grass/grass/trunk/temporal/
>>
>> the code being Python-based.
>>
>>
>>>
>>> I would like to find out if any of you has been successful (or
>>> unsuccessful) in reading or writing ArcGIS geodatabase files directly
>>> from R, by using the rgdal driver, or by some other means.
>>>
>>> Another issue is reading/writing spatio-temporal features ?(netcdf does
>>> spatio-temporal grids/arrays pretty well it seems); rumours go that
>>> ArcGIS might, in the near future, support reading/writing SpatiaLite.
>>>
>>> With best regards,
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, NHH Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From villers.alexandre at gmail.com  Fri Feb 17 11:37:13 2012
From: villers.alexandre at gmail.com (Alexandre Villers)
Date: Fri, 17 Feb 2012 12:37:13 +0200
Subject: [R-sig-Geo] neighbourhood analysis with R spatial objects
Message-ID: <4F3E2DD9.40107@gmail.com>

Dear list,

I am struggling a bit with this issue and was hoping that someone could 
indicate me a solution.

I have a raster image describing the landscape (with several habitat 
classes) at 10 meters resolution. I would like to compute the different 
proportions of each habitat type, but on a coarser grid (let's say 250 
meters), each cell getting the proportions of habitat classes from 
different buffer radii, taking the centre of each grid cell as 
representative of the grid (might not be very accurate for small 
buffers, but with the radii increasing, it should quickly be OK).

I used to do similar tasks with the r.neighbors function in GRASS but 
the problem is that this time, I need to run it on the 10 meters 
resolution grid (because some habitats are very scarce but a priori 
relevant to the questions my colleague and I want to answer), meaning a 
long computation time (already several days at 25 meters resolution), 
most of which being useless (as r.neighbors in GRASS compute the 
neighbourhood on all the pixels).

For the moment, I came up with this the code below, but this is not 
efficient at all (57 seconds for a final grid of 400 cells as in the 
example, mine containing ~20000 pixels...). Moreover, as written 
earlier, I have 11 buffer radii and 16 images on which to batch.
Basically, I create a regular grid of points at 250 meters over the 
SpatialGridDataFrame at 10 meters resolution, and then, loop over each 
points (create a buffer, overlay with the raster to get the number of 
pixels of each habitat class, fill the final raster with the proportion 
after computations and save the object).

I'm not sure if this can be done more efficiently with GRASS (computing 
the neighbourhood just for a set of locations, not for all pixels) and I 
was hoping to be able to do that with R somehow. I couldn't find 
anything in the discussion  lists (with keywords "neighbourhood 
analysis", "buffer raster", etc.) but maybe I missed something (with te 
different possible approaches in sp, raster, spatstat, it is highly 
probable).

Any link towards a potential solution that could speed up the 
computations would be highly appreciated


Cheers

Alex

P.S.: the code below should give you an idea of what I would like to 
achieve (but much faster if possible !)


library(sp)


#Create the environmental covariate
extent<-5000 #extent of the raster
sp.res<-10 #resolution of the raster

bb<-matrix(c(0,0,extent,extent), ncol=2, dimnames=list(NULL, 
c("min","max")))
cs<-c(sp.res,sp.res) #the resolution of our grid of habitat
cc<-bb[,1] + (cs/2)
cd<-ceiling(diff(t(bb))/cs)
landGT.temp<-GridTopology(cellcentre.offset=cc, cellsize=cs, cells.dim=cd)
land.spg<-SpatialGrid(landGT.temp)
Habitat<-rpois(length(coordinates(land.spg)[,1]), 5) #create dummy 
variable of integers for landscape category
land.spgdf<-SpatialGridDataFrame(land.spg, data.frame(Habitat=Habitat))


#create the final grid on which we want the data
sp.res.p<-250 #resolution of the raster

bb.p<-matrix(c(0,0,extent,extent), ncol=2, dimnames=list(NULL, 
c("min","max")))
cs.p<-c(sp.res.p,sp.res.p) #the resolution of our grid of habitat
cc.p<-bb.p[,1] + (cs.p/2)
cd.p<-ceiling(diff(t(bb.p))/cs.p)
fgridGT.temp<-GridTopology(cellcentre.offset=cc.p, cellsize=cs.p, 
cells.dim=cd.p)
fgrid.spg<-SpatialGrid(fgridGT.temp)
fgrid.spp<-as(fgrid.spg, "SpatialPoints")




#the idea is to get the proportion of the different habitats described 
by land.spgdf in buffer of increasing radii
# such as in the example

image(land.spgdf)
plot(fgrid.spp[210,], col="black", add=T)
plot(gBuffer(fgrid.spp[210,], width=1000), add=T)
plot(gBuffer(fgrid.spp[210,], width=250),  add=T)



n.points<-length(coordinates(fgrid.spp)[,1])
buffers<-c(250,1000)
n.hab.class<-length(unique(Habitat))

system.time(for (j in 1:length(buffers)){ #
          temp.df<-as.data.frame(matrix(data=NA, nrow=n.points, 
ncol=n.hab.class))
         spgdf.res<-SpatialGridDataFrame(fgrid.spg, temp.df)
         res.temp<-NULL

         for (k in 1:n.points){ # n.points
             buff.temp<-gBuffer(fgrid.spp[k,], width=buffers[j]) #create 
the buffer for the kth point with radius buffers[j]
             assol.buff<-land.spgdf$Habitat[!is.na(over(land.spgdf, 
buff.temp))] #overlay and remove the useless NAs
             n.pix<-tapply(assol.buff, assol.buff, 
length)[as.character(sort(unique(Habitat)))][] #number of pixel per 
habitat class (sorted)
             res.temp<-rbind(res.temp,n.pix) #store the data in a 
temporary array
                     }
         spgdf.res at data[1:n.points,]<-res.temp; 
spgdf.res at data[is.na(spgdf.res at data[,1:21])]<- 0 #replace the NAs 
(absence of the habitat class) with zeros
         spgdf.prop<-spgdf.res; spgdf.prop at data[,1:21]<-NA; 
spgdf.prop at data[,1:21]<-t(apply(spgdf.res at data, 1, function(x) 
x/sum(x))) #the last to get the proportion of habitat
         name.temp<-paste("prop.",buffers[j],"m",sep="")
         assign(name.temp, spgdf.prop) #create the final R object (that 
could saved as well as GTiff or any other raster format)
         rm(spgdf.res, name.temp, spgdf.prop, temp.df)
           }
         )

#An example
spplot(prop.250m, "V5")


From michael.denslow at gmail.com  Fri Feb 17 11:57:31 2012
From: michael.denslow at gmail.com (Michael Denslow)
Date: Fri, 17 Feb 2012 05:57:31 -0500
Subject: [R-sig-Geo] R / ArcGIS
In-Reply-To: <4F3DFE8B.6030903@uni-muenster.de>
References: <4F3DFE8B.6030903@uni-muenster.de>
Message-ID: <CAEewEpg_D_1xaLo+RyT6SyVpDjn094C3hO57Ykz02mG8isgpdw@mail.gmail.com>

On Fri, Feb 17, 2012 at 2:15 AM, Edzer Pebesma
<edzer.pebesma at uni-muenster.de> wrote:
> Hi,
>
> I might succeed meeting with some ESRI / ArcGIS folks at AAG next week;
> I'm in touch with them in particular about linking R to ArcGIS.
>
> I would like to find out if any of you has been successful (or
> unsuccessful) in reading or writing ArcGIS geodatabase files directly
> from R, by using the rgdal driver, or by some other means.

Thanks for working on this. I have had success reading .mdb files but
not .gdb files. I typically use rgdal for this sort of thing. I was
under the impression that GDAL support for .gdb files started with
1.9.

I am very interested in this issue since I am a regular user of ArcGIS
(teaching) and R (research).

Michael


>
> Another issue is reading/writing spatio-temporal features ?(netcdf does
> spatio-temporal grids/arrays pretty well it seems); rumours go that
> ArcGIS might, in the near future, support reading/writing SpatiaLite.
>
> With best regards,
> --
> Edzer Pebesma
> Institute for Geoinformatics (ifgi), University of M?nster
> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
> http://www.52north.org/geostatistics ? ? ?e.pebesma at wwu.de
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Michael Denslow
Adjunct Instructor
Department of Geography and Planning
P.O. Box 32066
Appalachian State University
Boone, North Carolina 28608
-- AND --
Communications Manager
Southeast Regional Network of Expertise and Collections
sernec.org

36.214177, -81.681480 +/- 3103 meters


From Roger.Bivand at nhh.no  Fri Feb 17 12:18:55 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 17 Feb 2012 12:18:55 +0100 (CET)
Subject: [R-sig-Geo] R / ArcGIS
In-Reply-To: <CAEewEpg_D_1xaLo+RyT6SyVpDjn094C3hO57Ykz02mG8isgpdw@mail.gmail.com>
References: <4F3DFE8B.6030903@uni-muenster.de>
	<CAEewEpg_D_1xaLo+RyT6SyVpDjn094C3hO57Ykz02mG8isgpdw@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1202171209110.24394@reclus.nhh.no>

On Fri, 17 Feb 2012, Michael Denslow wrote:

> On Fri, Feb 17, 2012 at 2:15 AM, Edzer Pebesma
> <edzer.pebesma at uni-muenster.de> wrote:
>> Hi,
>>
>> I might succeed meeting with some ESRI / ArcGIS folks at AAG next week;
>> I'm in touch with them in particular about linking R to ArcGIS.
>>
>> I would like to find out if any of you has been successful (or
>> unsuccessful) in reading or writing ArcGIS geodatabase files directly
>> from R, by using the rgdal driver, or by some other means.
>
> Thanks for working on this. I have had success reading .mdb files but
> not .gdb files. I typically use rgdal for this sort of thing. I was
> under the impression that GDAL support for .gdb files started with
> 1.9.

This is off-topic here - the topic here is space-time data.

Your question is answered with respect to Personal geodatabases on the 
Windows platform in thread:

http://article.gmane.org/gmane.comp.lang.r.geo/13571

(link to gmane because it crosses a month boundary). You did join that 
thread, and said there that you are using OSX. You were able to open Pgeo 
files, I think. Are you thinking of the new file geodatabase format? If 
you read:

http://www.gdal.org/ogr/drv_filegdb.html

you will see that you must build GDAL linking to the proprietary FileGDB 
API SDK, which requires an ESRI global account. Reading the OGR format 
file would tell you that, no?

Roger

>
> I am very interested in this issue since I am a regular user of ArcGIS
> (teaching) and R (research).
>
> Michael
>
>
>>
>> Another issue is reading/writing spatio-temporal features ?(netcdf does
>> spatio-temporal grids/arrays pretty well it seems); rumours go that
>> ArcGIS might, in the near future, support reading/writing SpatiaLite.
>>
>> With best regards,
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics (ifgi), University of M?nster
>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
>> http://www.52north.org/geostatistics ? ? ?e.pebesma at wwu.de
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From villers.alexandre at gmail.com  Fri Feb 17 12:41:51 2012
From: villers.alexandre at gmail.com (Alexandre Villers)
Date: Fri, 17 Feb 2012 13:41:51 +0200
Subject: [R-sig-Geo] neighbourhood analysis with R spatial objects
Message-ID: <4F3E3CFF.10406@gmail.com>

Hi,

I think I found the solution with the extract function of the raster 
package, which seems pretty fast from what I just experienced...
But any other suggestions are welcome !

Best regards


From soerengebbert at googlemail.com  Fri Feb 17 14:12:51 2012
From: soerengebbert at googlemail.com (=?UTF-8?Q?S=C3=B6ren_Gebbert?=)
Date: Fri, 17 Feb 2012 14:12:51 +0100
Subject: [R-sig-Geo] R / ArcGIS
In-Reply-To: <alpine.LRH.2.02.1202171006370.23932@reclus.nhh.no>
References: <4F3DFE8B.6030903@uni-muenster.de>
	<alpine.LRH.2.02.1202170913320.23932@reclus.nhh.no>
	<CAPHDReJWMX-C566PudzCp8qDj_yuPnCOprox=22RZFdce1Ud=g@mail.gmail.com>
	<alpine.LRH.2.02.1202171006370.23932@reclus.nhh.no>
Message-ID: <CAPHDRe+vBA+6YAOkJ1rPpVwHi8ssrLf=RYHxOn6aLPVG+gnbYw@mail.gmail.com>

Hi Roger,

2012/2/17 Roger Bivand <Roger.Bivand at nhh.no>:
> On Fri, 17 Feb 2012, S?ren Gebbert wrote:
>
>> Hi Roger.
>> nice that you mention the temporal GIS framework for GRASS GIS 7. Sorry
>> for my rude question, i am curious how is this related to R and ArcGIS?
>
>
> Good question! The space-time field is developing so fast that it seems
> helpful to encourage contacts between all working on issues of
> representation and implementation, as well as analysis like Cressie & Wikle
> (2011). This may make it easier later on, when users get confused about
> things not integrating well. Your GRASS work using Python may give ideas to
> others using Python, for example. It would be great, looking forward, for
> the R spacetime package to integrate well with the GRASS temporal
> implementation and anything that might emerge from ESRI, and for example
> Terralib. Does that make sense?

Yes.

Best regards
Soeren

>
> Roger
>
>
>>
>> Best regards
>> Soeren
>>
>> 2012/2/17 Roger Bivand <Roger.Bivand at nhh.no>:
>>>
>>> On Fri, 17 Feb 2012, Edzer Pebesma wrote:
>>>
>>>> Hi,
>>>>
>>>> I might succeed meeting with some ESRI / ArcGIS folks at AAG next week;
>>>> I'm in touch with them in particular about linking R to ArcGIS.
>>>
>>>
>>>
>>> Please also see this thread:
>>>
>>> http://lists.osgeo.org/pipermail/grass-dev/2012-February/057922.html
>>>
>>> http://trac.osgeo.org/grass/wiki/Grass7/TemporalExtension
>>>
>>> http://svn.osgeo.org/grass/grass/trunk/temporal/
>>>
>>> the code being Python-based.
>>>
>>>
>>>>
>>>> I would like to find out if any of you has been successful (or
>>>> unsuccessful) in reading or writing ArcGIS geodatabase files directly
>>>> from R, by using the rgdal driver, or by some other means.
>>>>
>>>> Another issue is reading/writing spatio-temporal features ?(netcdf does
>>>> spatio-temporal grids/arrays pretty well it seems); rumours go that
>>>> ArcGIS might, in the near future, support reading/writing SpatiaLite.
>>>>
>>>> With best regards,
>>>>
>>>
>>> --
>>> Roger Bivand
>>> Department of Economics, NHH Norwegian School of Economics,
>>> Helleveien 30, N-5045 Bergen, Norway.
>>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>>> e-mail: Roger.Bivand at nhh.no
>>>
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>
> --
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no


From edzer.pebesma at uni-muenster.de  Fri Feb 17 14:49:20 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 17 Feb 2012 14:49:20 +0100
Subject: [R-sig-Geo] R / ArcGIS
In-Reply-To: <alpine.LRH.2.02.1202171209110.24394@reclus.nhh.no>
References: <4F3DFE8B.6030903@uni-muenster.de>
	<CAEewEpg_D_1xaLo+RyT6SyVpDjn094C3hO57Ykz02mG8isgpdw@mail.gmail.com>
	<alpine.LRH.2.02.1202171209110.24394@reclus.nhh.no>
Message-ID: <4F3E5AE0.5050409@uni-muenster.de>





On 02/17/2012 12:18 PM, Roger Bivand wrote:
> On Fri, 17 Feb 2012, Michael Denslow wrote:
> 
>> On Fri, Feb 17, 2012 at 2:15 AM, Edzer Pebesma
>> <edzer.pebesma at uni-muenster.de> wrote:
>>> Hi,
>>>
>>> I might succeed meeting with some ESRI / ArcGIS folks at AAG next week;
>>> I'm in touch with them in particular about linking R to ArcGIS.
>>>
>>> I would like to find out if any of you has been successful (or
>>> unsuccessful) in reading or writing ArcGIS geodatabase files directly
>>> from R, by using the rgdal driver, or by some other means.
>>
>> Thanks for working on this. I have had success reading .mdb files but
>> not .gdb files. I typically use rgdal for this sort of thing. I was
>> under the impression that GDAL support for .gdb files started with
>> 1.9.
> 
> This is off-topic here - the topic here is space-time data.

Not completely, as I started two topics in one thread. The first one,
interfacing ArcGIS personal geodatabases through rgdal (OGR drivers) has
been dealt with here:

https://stat.ethz.ch/pipermail/r-sig-geo/2009-June/005889.html

and more recently with the closed source ArcGIS 10.0 API here:

https://stat.ethz.ch/pipermail/r-sig-geo/2012-January/014090.html

followed by:

https://stat.ethz.ch/pipermail/r-sig-geo/2012-February/014094.html

and follow-ups would be easier findable when added to that thread.

The second topic addressed dealing with space-time features between R
and ArcGIS, for which rgdal/OGR could not be a solution, AFAICS.

> 
> Your question is answered with respect to Personal geodatabases on the
> Windows platform in thread:
> 
> http://article.gmane.org/gmane.comp.lang.r.geo/13571
> 
> (link to gmane because it crosses a month boundary). You did join that
> thread, and said there that you are using OSX. You were able to open
> Pgeo files, I think. Are you thinking of the new file geodatabase
> format? If you read:
> 
> http://www.gdal.org/ogr/drv_filegdb.html
> 
> you will see that you must build GDAL linking to the proprietary FileGDB
> API SDK, which requires an ESRI global account. Reading the OGR format
> file would tell you that, no?
> 
> Roger
> 
>>
>> I am very interested in this issue since I am a regular user of ArcGIS
>> (teaching) and R (research).
>>
>> Michael
>>
>>
>>>
>>> Another issue is reading/writing spatio-temporal features  (netcdf does
>>> spatio-temporal grids/arrays pretty well it seems); rumours go that
>>> ArcGIS might, in the near future, support reading/writing SpatiaLite.
>>>
>>> With best regards,
>>> -- 
>>> Edzer Pebesma
>>> Institute for Geoinformatics (ifgi), University of M?nster
>>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>>> 8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
>>> http://www.52north.org/geostatistics      e.pebesma at wwu.de
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>>
>>
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From Roger.Bivand at nhh.no  Fri Feb 17 15:00:37 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 17 Feb 2012 15:00:37 +0100 (CET)
Subject: [R-sig-Geo] R / ArcGIS
In-Reply-To: <4F3E5AE0.5050409@uni-muenster.de>
References: <4F3DFE8B.6030903@uni-muenster.de>
	<CAEewEpg_D_1xaLo+RyT6SyVpDjn094C3hO57Ykz02mG8isgpdw@mail.gmail.com>
	<alpine.LRH.2.02.1202171209110.24394@reclus.nhh.no>
	<4F3E5AE0.5050409@uni-muenster.de>
Message-ID: <alpine.LRH.2.02.1202171456110.24394@reclus.nhh.no>

On Fri, 17 Feb 2012, Edzer Pebesma wrote:

> On 02/17/2012 12:18 PM, Roger Bivand wrote:
>> On Fri, 17 Feb 2012, Michael Denslow wrote:
>>
>>> On Fri, Feb 17, 2012 at 2:15 AM, Edzer Pebesma
>>> <edzer.pebesma at uni-muenster.de> wrote:
>>>> Hi,
>>>>
>>>> I might succeed meeting with some ESRI / ArcGIS folks at AAG next week;
>>>> I'm in touch with them in particular about linking R to ArcGIS.
>>>>
>>>> I would like to find out if any of you has been successful (or
>>>> unsuccessful) in reading or writing ArcGIS geodatabase files directly
>>>> from R, by using the rgdal driver, or by some other means.
>>>
>>> Thanks for working on this. I have had success reading .mdb files but
>>> not .gdb files. I typically use rgdal for this sort of thing. I was
>>> under the impression that GDAL support for .gdb files started with
>>> 1.9.
>>
>> This is off-topic here - the topic here is space-time data.
>
> Not completely, as I started two topics in one thread. The first one,
> interfacing ArcGIS personal geodatabases through rgdal (OGR drivers) has
> been dealt with here:

OK, my misunderstanding. Wrt. file geodatabase access, the point would be 
to get them to open the API code, but it likely links to Arc DLLs, rather 
than being free-standing. So personal geodatabase access is OK in GDAL 
1.9.0 built against an ODBC provider, as in the version already available 
for forthcoming R 2.15.0, but file geodatabase access must have the API 
SDK from ESRI.

I wrongly focused on the second theme as though it was the only one.

Roger

>
> https://stat.ethz.ch/pipermail/r-sig-geo/2009-June/005889.html
>
> and more recently with the closed source ArcGIS 10.0 API here:
>
> https://stat.ethz.ch/pipermail/r-sig-geo/2012-January/014090.html
>
> followed by:
>
> https://stat.ethz.ch/pipermail/r-sig-geo/2012-February/014094.html
>
> and follow-ups would be easier findable when added to that thread.
>
> The second topic addressed dealing with space-time features between R
> and ArcGIS, for which rgdal/OGR could not be a solution, AFAICS.
>
>>
>> Your question is answered with respect to Personal geodatabases on the
>> Windows platform in thread:
>>
>> http://article.gmane.org/gmane.comp.lang.r.geo/13571
>>
>> (link to gmane because it crosses a month boundary). You did join that
>> thread, and said there that you are using OSX. You were able to open
>> Pgeo files, I think. Are you thinking of the new file geodatabase
>> format? If you read:
>>
>> http://www.gdal.org/ogr/drv_filegdb.html
>>
>> you will see that you must build GDAL linking to the proprietary FileGDB
>> API SDK, which requires an ESRI global account. Reading the OGR format
>> file would tell you that, no?
>>
>> Roger
>>
>>>
>>> I am very interested in this issue since I am a regular user of ArcGIS
>>> (teaching) and R (research).
>>>
>>> Michael
>>>
>>>
>>>>
>>>> Another issue is reading/writing spatio-temporal features  (netcdf does
>>>> spatio-temporal grids/arrays pretty well it seems); rumours go that
>>>> ArcGIS might, in the near future, support reading/writing SpatiaLite.
>>>>
>>>> With best regards,
>>>> --
>>>> Edzer Pebesma
>>>> Institute for Geoinformatics (ifgi), University of M?nster
>>>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>>>> 8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
>>>> http://www.52north.org/geostatistics      e.pebesma at wwu.de
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>>
>>>
>>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From Steve_Friedman at nps.gov  Fri Feb 17 14:59:34 2012
From: Steve_Friedman at nps.gov (Steve_Friedman at nps.gov)
Date: Fri, 17 Feb 2012 08:59:34 -0500
Subject: [R-sig-Geo] R / ArcGIS
In-Reply-To: <4F3DFE8B.6030903@uni-muenster.de>
References: <4F3DFE8B.6030903@uni-muenster.de>
Message-ID: <OF5E577E4D.A3CA44E4-ON852579A7.004BF2D1-852579A7.004CDD75@nps.gov>

Hello Edzer,

We use ARCGIS applications in much of our spatial temporal modeling work,
and rely upon NetCDF for data storage. Our models rely on hydrologic
spatial temporal data and many of the data sets we use exceed 30 years of
annual records. Sometimes we use data with higher temporal resolution.
ARCGIS netCDF does not provide the essential tools we need to conduct our
simulations. For example, extracting annual data layers from the netCDF
file fails regularly and we have to reduce the temporal domain to shorter
periods of record to get the system to work.

I have tried to access ArcGIS geodatabase files directly from R but have
not successfully accomplished what I needed.

Hope this helps.

Steve

Steve Friedman Ph. D.
Ecologist  / Spatial Statistical Analyst
Everglades and Dry Tortugas National Park
950 N Krome Ave (3rd Floor)
Homestead, Florida 33034

Steve_Friedman at nps.gov
Office (305) 224 - 4282
Fax     (305) 224 - 4147


                                                                           
             Edzer Pebesma                                                 
             <edzer.pebesma at un                                             
             i-muenster.de>                                             To 
             Sent by:                  r-sig-geo at r-project.org             
             r-sig-geo-bounces                                          cc 
             @r-project.org            Steve Kopp <skopp at esri.com>         
                                                                   Subject 
                                       [R-sig-Geo] R / ArcGIS              
             02/17/2012 02:15                                              
             AM                                                            
                                                                           
                                                                           
                                                                           
                                                                           




Hi,

I might succeed meeting with some ESRI / ArcGIS folks at AAG next week;
I'm in touch with them in particular about linking R to ArcGIS.

I would like to find out if any of you has been successful (or
unsuccessful) in reading or writing ArcGIS geodatabase files directly
from R, by using the rgdal driver, or by some other means.

Another issue is reading/writing spatio-temporal features  (netcdf does
spatio-temporal grids/arrays pretty well it seems); rumours go that
ArcGIS might, in the near future, support reading/writing SpatiaLite.

With best regards,
--
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Tamara.Emmenegger at vogelwarte.ch  Fri Feb 17 16:57:57 2012
From: Tamara.Emmenegger at vogelwarte.ch (Emmenegger Tamara)
Date: Fri, 17 Feb 2012 15:57:57 +0000
Subject: [R-sig-Geo] Polygons of a SpatialPolygonsDataFrame
Message-ID: <21988D515585C644A17F298B1FC34F3516ACDCD3@MailNT.vogelwarte.ch>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120217/68dcff55/attachment.pl>

From agus.camacho at gmail.com  Fri Feb 17 17:24:13 2012
From: agus.camacho at gmail.com (Agus Camacho)
Date: Fri, 17 Feb 2012 14:24:13 -0200
Subject: [R-sig-Geo] generating environmental raster layers with wise soil
	database
Message-ID: <CALsJ7pRK3JLhZc40k4Z56tWL7hMn-X9dLfdx4ZkF7frJ_ddk=A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120217/4648969f/attachment.pl>

From rafael.wueest at wsl.ch  Fri Feb 17 18:17:40 2012
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Fri, 17 Feb 2012 18:17:40 +0100
Subject: [R-sig-Geo] Polygons of a SpatialPolygonsDataFrame
In-Reply-To: <21988D515585C644A17F298B1FC34F3516ACDD05@MailNT.vogelwarte.ch>
References: <21988D515585C644A17F298B1FC34F3516ACDCD3@MailNT.vogelwarte.ch>
	<B4F0CD5D-E3E2-448E-89E9-A8A70CD7D4AB@wsl.ch>
	<21988D515585C644A17F298B1FC34F3516ACDD05@MailNT.vogelwarte.ch>
Message-ID: <2E32563B-AE76-4906-853A-C350AB947747@wsl.ch>

Oops, there's a mistake in the first line of code. should be:

extract(raster, SPdataframe,fun="mean",na.rm=TRUE,method="simple")

On 17.02.2012, at 17:58, Emmenegger Tamara wrote:

> Merci!
> 
> -----Urspr?ngliche Nachricht-----
> Von: Rafael W?est [mailto:rafael.wueest at wsl.ch] 
> Gesendet: Freitag, 17. Februar 2012 17:45
> An: Emmenegger Tamara
> Betreff: Re: [R-sig-Geo] Polygons of a SpatialPolygonsDataFrame
> 
> Hi Tamara
> 
> assuming SPdatframe is the SpatialPolygonsDataFrame, if you need the mean of every polygon, then you can as well try
> 
> extract(raster, SpatialPolygons(SPdataframe at polygons),fun="mean",na.rm=TRUE,method="simple")
> 
> this will give you the mean for each polygon in a vector.
> 
> If you want to do them seperately, you will have to select each polygon like:
> 
> extract(raster, SPdataframe[i,],fun="mean",na.rm=TRUE,method="simple")
> 
> Rafael
> 
> 
> On 17.02.2012, at 16:57, Emmenegger Tamara wrote:
> 
>> I have a SpatialPolygonsDataFrame with 120 Polygons and some 
>> associated data. Now I'd like to extract the mean of the values on a 
>> raster within each polygon separately. I succeded in plotting 
>> individual polygons with:
>> plot(SpatialPolygons(SPdataframe at polygons)[i])
>> 
>> But it did not work to extract the values in the same manner:
>> extract(raster, 
>> SpatialPolygons(SPdataframe at polygons)[i],fun="mean",na.rm=TRUE,method=
>> "simple")
>> 
>> Can anyone explain the difference between the use of the same 
>> indexation in this two cases? What is the official way to choose 
>> particular polygons of a SpatialPolygonsData- Frame with indices?
>> 
>> Thank you a lot for your help in advance!
>> 
>> 
>> ____________________________________________________
>> 
>> Tamara Emmenegger
>> Msc student
>> Bird migration
>> Tel. ++41 41 462 97 00
>> 
>> tamara.emmenegger at vogelwarte.ch<mailto:tamara.emmenegger at vogelwarte.ch
>>> www.vogelwarte.ch<http://www.vogelwarte.ch/>
>> 
>> Schweizerische Vogelwarte | Seerose 1 | CH-6204 Sempach | Schweiz 
>> Station ornithologique suisse | Seerose 1 | CH-6204 Sempach | Suisse 
>> Stazione ornitologica svizzera | Seerose 1 | CH-6204 Sempach | 
>> Svizzera Swiss Ornithological Institute | Seerose 1 | CH-6204 Sempach 
>> | Switzerland
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> 
> 
> --
> Rafael W?est
> Swiss Federal Research Institute WSL
> Z?rcherstrasse 111
> 8903 Birmensdorf
> Switzerland
> 
> +41 44 7392126
> rafael.wueest at wsl.ch
> http://www.wsl.ch/info/mitarbeitende/wueest
> 
> 
> 



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest


From sandeep.coepcivil at gmail.com  Fri Feb 17 19:38:54 2012
From: sandeep.coepcivil at gmail.com (Sandeep Patil)
Date: Fri, 17 Feb 2012 12:38:54 -0600
Subject: [R-sig-Geo] AutoKrige.cv error crazy..
Message-ID: <CAHnA5RWE1Yf-vsEBxeDCeaM-H4HBqhW6QGNG4NSVpsMnGVNvcg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120217/c7b49691/attachment.pl>

From edzer.pebesma at uni-muenster.de  Fri Feb 17 23:36:43 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 17 Feb 2012 23:36:43 +0100
Subject: [R-sig-Geo] AutoKrige.cv error crazy..
In-Reply-To: <CAHnA5RWE1Yf-vsEBxeDCeaM-H4HBqhW6QGNG4NSVpsMnGVNvcg@mail.gmail.com>
References: <CAHnA5RWE1Yf-vsEBxeDCeaM-H4HBqhW6QGNG4NSVpsMnGVNvcg@mail.gmail.com>
Message-ID: <4F3ED67B.2020008@uni-muenster.de>

Googling the error message you got (which comes from software I wrote
that is called from software that I did not write), I have suggested in
the past to try krige.cv or gstat.cv instead, e.g. here:

https://stat.ethz.ch/pipermail/r-sig-geo/2007-March/001790.html

but I'm not sure it helped. You could search further. I tried the
following in google search:

Error: dimensions do not match: locations  and data site:ethz.ch

On 02/17/2012 07:38 PM, Sandeep Patil wrote:
> Any suggestion is welcome..

at the risk of repeating: provide the list with a small, reproducible
example?
-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From sandeep.coepcivil at gmail.com  Sat Feb 18 02:26:45 2012
From: sandeep.coepcivil at gmail.com (Sandeep Patil)
Date: Fri, 17 Feb 2012 19:26:45 -0600
Subject: [R-sig-Geo] AutoKrige.cv error crazy..
In-Reply-To: <4F3ED67B.2020008@uni-muenster.de>
References: <CAHnA5RWE1Yf-vsEBxeDCeaM-H4HBqhW6QGNG4NSVpsMnGVNvcg@mail.gmail.com>
	<4F3ED67B.2020008@uni-muenster.de>
Message-ID: <CAHnA5RU497ot+xHvZW6C=t2xaWoJyzyaUgBY8r7h1zG1gFWzAw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120217/5caab143/attachment.pl>

From bluejp at gmail.com  Mon Feb 20 11:23:27 2012
From: bluejp at gmail.com (plopez)
Date: Mon, 20 Feb 2012 02:23:27 -0800 (PST)
Subject: [R-sig-Geo] installing plotKML
Message-ID: <1329733407947-7300787.post@n2.nabble.com>

Dear List,

I am trying to create a kml  of a big raster classification (10,000 x
10,000). 
I know this may be too heavy for R, but maybe a combination of raster
package and plotKML could deal with this. 
I haven't been able to install the plotKML package. Maybe Tom can give me
some hints about this. 
Using r 2.14.1 and 
install.packages("plotKML", repos=c("http://R-Forge.R-project.org"))
I get that "package ?plotKML? is not available".

Any suggestion on how to get plotKML installed?
Using windows 7, 32 bits. R 2.14.1





--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/installing-plotKML-tp7300787p7300787.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From b.rowlingson at lancaster.ac.uk  Mon Feb 20 11:52:12 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 20 Feb 2012 10:52:12 +0000
Subject: [R-sig-Geo] installing plotKML
In-Reply-To: <1329733407947-7300787.post@n2.nabble.com>
References: <1329733407947-7300787.post@n2.nabble.com>
Message-ID: <CANVKczMbvPOffoYoZRXOw6uaRVxHEmxz2GyQJW-URSuNTM_cfg@mail.gmail.com>

On Mon, Feb 20, 2012 at 10:23 AM, plopez <bluejp at gmail.com> wrote:
> install.packages("plotKML", repos=c("http://R-Forge.R-project.org"))

If you go to the project page on r-forge:

https://r-forge.r-project.org/projects/plotkml/

and hit the "R Packages" link, you'll see:

https://r-forge.r-project.org/R/?group_id=1106

things failed to build. Uh oh.

I guess an email to the maintainers, or a report on the plotKML issue
tracker might be the way to go.

 You could try getting the source and building it yourself.

 Also, R-forge has had some problems recently after an upgrade - a lot
of projects lost their admin users! - so don't expect an immediate
fix...

Barry


From hengl at spatial-analyst.net  Mon Feb 20 12:02:38 2012
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Mon, 20 Feb 2012 12:02:38 +0100
Subject: [R-sig-Geo] installing plotKML
In-Reply-To: <CANVKczMbvPOffoYoZRXOw6uaRVxHEmxz2GyQJW-URSuNTM_cfg@mail.gmail.com>
References: <1329733407947-7300787.post@n2.nabble.com>
	<CANVKczMbvPOffoYoZRXOw6uaRVxHEmxz2GyQJW-URSuNTM_cfg@mail.gmail.com>
Message-ID: <4F42284E.10200@spatial-analyst.net>


On 20-2-2012 11:52, Barry Rowlingson wrote:
> On Mon, Feb 20, 2012 at 10:23 AM, plopez<bluejp at gmail.com>  wrote:
>> install.packages("plotKML", repos=c("http://R-Forge.R-project.org"))
>
> If you go to the project page on r-forge:
>
> https://r-forge.r-project.org/projects/plotkml/
>
> and hit the "R Packages" link, you'll see:
>
> https://r-forge.r-project.org/R/?group_id=1106
>
> things failed to build. Uh oh.
>
> I guess an email to the maintainers, or a report on the plotKML issue
> tracker might be the way to go.

We are working on the package. Most of the problems should be fixed in 
the coming 1-2 weeks (so that it can at least install). That's why the 
package is still on R-forge and not on e.g. CRAN. Yesterday evening I 
was running Rcmd check on the source code few times and there are still 
some small difficulties.

>
>   You could try getting the source and building it yourself.
>
>   Also, R-forge has had some problems recently after an upgrade - a lot
> of projects lost their admin users! - so don't expect an immediate
> fix...

I also noticed that they are experiencing some difficulties (to much 
activities on R-forge!). We absolutely need R-forge so I hope they will 
fix these soon.

cheers,

T. Hengl

>
> Barry
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From bluejp at gmail.com  Mon Feb 20 13:10:37 2012
From: bluejp at gmail.com (plopez)
Date: Mon, 20 Feb 2012 04:10:37 -0800 (PST)
Subject: [R-sig-Geo] installing plotKML
In-Reply-To: <4F42284E.10200@spatial-analyst.net>
References: <1329733407947-7300787.post@n2.nabble.com>
	<CANVKczMbvPOffoYoZRXOw6uaRVxHEmxz2GyQJW-URSuNTM_cfg@mail.gmail.com>
	<4F42284E.10200@spatial-analyst.net>
Message-ID: <1329739837638-7301080.post@n2.nabble.com>

Thanks for the notification and success bringing the package to an stable
version. 

Cheers,

Juan 

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/installing-plotKML-tp7300787p7301080.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From vivien.deparday at gmail.com  Mon Feb 20 19:25:44 2012
From: vivien.deparday at gmail.com (Vivien Deparday)
Date: Mon, 20 Feb 2012 13:25:44 -0500
Subject: [R-sig-Geo] Legend placement for a two map comparison without
	lattice
Message-ID: <4F429028.8040306@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120220/69ebe11d/attachment.pl>

From juta.kawalerowicz at stx.ox.ac.uk  Mon Feb 20 22:42:10 2012
From: juta.kawalerowicz at stx.ox.ac.uk (Juta Kawalerowicz)
Date: Mon, 20 Feb 2012 21:42:10 +0000
Subject: [R-sig-Geo] pycno - problems with pycnophylactic interpolation
 for skewed populations
In-Reply-To: <BE8C4D3FFC7C2D49830176E9D80106958F0C5B7DFD@EXMBX04.ad.oak.ox.ac.uk>
References: <BE8C4D3FFC7C2D49830176E9D80106958F0C5B7DFD@EXMBX04.ad.oak.ox.ac.uk>
Message-ID: <4F42BE32.6000904@stx.ox.ac.uk>

With kind help of Chris Brundson the problem has now been resolved. If 
you face a similar problem download and compile the following script 
before running pycnophylactic interpolation.

http://dl.dropbox.com/u/30578197/pycno.R

Juta



On 23/01/2012 14:39, Juta Kawalerowicz wrote:
> Dear List,
>
> I have been using a Chris Brunsdon's pycno package for a while, but I wondered if anybody has faced problems when trying to interpolate over geographical units where populations distribution is very skewed towards zero (like in ew.wards$elect3). When I run estimations for a more normally distributed variables (such as ew.wards$ppl3), it's working great but I struggle to find a right celldim parameter - it's either too big and gives error or too small and then I run out of memory. I've been experimenting with different parameters for a while now, maybe I am missing something?
>
> Anyway here is the code
>
> library(pycno)
> load(url("http://dl.dropbox.com/u/30578197/space4.RData"))
> #largish workspace - may take a while to load (bit it does load)
>
> ls()		
> #"ew.districts"		shapefile with current districts
> #"ew.wards"     	shapefile with electoral wards from 1973 meregd with electoral results from 1979. I am interested in results in (elect3) showing results of a small far right party.
>
> per<-pycno(ew.wards,ew.wards$elect3, 0.1)
> #Maximum Change:          NaN - will stop at      0.00440
> #Error in if (max(abs(old.x - x))<  stopper) break :
> #  missing value where TRUE/FALSE needed
>
> #so maybe I should go down with celldim parameter?
>
> per<-pycno(ew.wards,ew.wards$elect3, 0.01)
> #Maximum Change:          NaN - will stop at      0.00095
> #Error in if (max(abs(old.x - x))<  stopper) break :
> #  missing value where TRUE/FALSE needed
>
> #CAUTION: my laptop with its 4G memory becomes pretty much unresponsive for ~5 min
>
> per<-pycno(ew.wards,ew.wards$elect3, 0.001)
> #Error: cannot allocate vector of size 367.9 Mb
> #In addition: Warning messages:
> #1: In validityMethod(object) :
> #  Reached total allocation of 3947Mb: see help(memory.size)
> #2: In validityMethod(object) :
> #  Reached total allocation of 3947Mb: see help(memory.size)
> #3: In validityMethod(object) :
> #  Reached total allocation of 3947Mb: see help(memory.size)
> #4: In validityMethod(object) :
> #  Reached total allocation of 3947Mb: see help(memory.size)
>
>
> #Compare with how smoothly it works with ew.wards$ppl3
>
> ppl<-pycno(ew.wards,ew.wards$ppl3, 0.1)
> image(ppl)
>
> Has anybody else encountered/solved this problem before? In the past setting a good celldim parameter has not been that challanging, this is the first time that I am trying to run Tobler's pycnophylactic interpolation on such a skewed data. I've been playing with different values between 0.01 and 0.001 but couldn't find anything which would not give me one of the above errors. I'd be very grateful for any hints.
>
> Thanks,
> Juta
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From zua3 at cornell.edu  Tue Feb 21 01:01:51 2012
From: zua3 at cornell.edu (Zia Ahmed)
Date: Mon, 20 Feb 2012 19:01:51 -0500
Subject: [R-sig-Geo] GGWR (family = Poission): Prediction of unknown location
Message-ID: <4F42DEEF.8030600@cornell.edu>

Hello,
I am trying to predict expected count for a geographical location  (file 
name:  data_181 - test data)  from a another data set (data_65 - 
work_data)  using GGWR poission model.  Following R code I used.  But No 
predicted counts were  found  in output SDF  file.  I am new in GGWR.   
Help will be appreciated. I attach my data sets here. Thanks
Zia

library(spgwr)
data(data_65)   # work data set
data(data_181) #  test data set

bw <- ggwr.sel(PopRisk_100TH ~ log10(WAS)*log10(GAS)+ 
offset(log(population_1000)), coords=cbind(data_65$x, data_65$y),
       data=data_65, family=poisson())
coordinates(data.181)<-~x+y
ggwr.181 <- ggwr(PopRisk_100TH ~ log10(WAS)*log10(GAS) + 
offset(log(population_1000)), coords=cbind(data.65$x, data.65$y),
       data=data.65,family=poisson(),bandwidth=bw,type = 
c("response"),fit.points = data.181)

 > ggwr.181$SDF


	sum.w 	X.Intercept. 	log10.wasMean. 	log10.gasMean. 
log10.wasMean..log10.gasMean. 	dispersion 	response_resids 	x 	y
1 	62.50764 	-2.36702 	1.45678 	-2.42768 	5.031622 	1 	NA 	2779558 
531287.3
2 	63.20595 	-2.36062 	1.451657 	-2.39074 	4.995947 	1 	NA 	2767150 
575319.5
3 	62.87379 	-2.36683 	1.456869 	-2.42598 	5.026145 	1 	NA 	2798559 
563289.6
4 	63.13653 	-2.36322 	1.453891 	-2.4054 	5.007724 	1 	NA 	2784218 
576455.7
5 	62.55473 	-2.36991 	1.459364 	-2.44354 	5.042596 	1 	NA 	2807095 	546223
6 	62.85015 	-2.36264 	1.453169 	-2.40282 	5.009307 	1 	NA 	2762510 
547772.6
7 	62.67004 	-2.36523 	1.455308 	-2.4175 	5.022374 	1 	NA 	2773146 
538941.8
8 	62.40817 	-2.36266 	1.452969 	-2.40357 	5.013347 	1 	NA 	2745574 
520650.3
9 	62.02654 	-2.36357 	1.453601 	-2.40908 	5.020167 	1 	NA 	2739576 
502023.7
10 	63.01464 	-2.35797 	1.449239 	-2.37628 	4.9865 	1 	NA 	2739005 
557044.6
11 	62.8022 	-2.35943 	1.450378 	-2.38489 	4.995307 	1 	NA 	2739341 
542981.4
12 	62.95506 	-2.36003 	1.45098 	-2.38804 	4.996592 	1 	NA 	2749492 
553074.4


-- 
---------------------
Zia Ahmed, PhD
Research Associate
Department of Crop and Soil Sciences
1002 Bradfield Hall, Cornell University
Ithaca, NY 14853-4203
t. 607.255.9387
f. 607.255.3207
email zua3 at cornell.edu


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120220/d79b28b6/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: data_65.csv
Type: application/vnd.ms-excel
Size: 4990 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120220/d79b28b6/attachment.xlb>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: data_181.csv
Type: application/vnd.ms-excel
Size: 13657 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120220/d79b28b6/attachment-0001.xlb>

From ostrikas at post.harvard.edu  Tue Feb 21 03:26:25 2012
From: ostrikas at post.harvard.edu (Ona Strikas)
Date: Mon, 20 Feb 2012 21:26:25 -0500
Subject: [R-sig-Geo] earth Package question for running a loop
Message-ID: <CAKtQ3ya5HzQKE8_S0eB5-Pe8RM3Eni7=xk1_P-MpiMcoWR2efA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120220/186f73e8/attachment.pl>

From matzke at berkeley.edu  Tue Feb 21 03:44:39 2012
From: matzke at berkeley.edu (Nick Matzke)
Date: Mon, 20 Feb 2012 18:44:39 -0800
Subject: [R-sig-Geo] earth Package question for running a loop
In-Reply-To: <CAKtQ3ya5HzQKE8_S0eB5-Pe8RM3Eni7=xk1_P-MpiMcoWR2efA@mail.gmail.com>
References: <CAKtQ3ya5HzQKE8_S0eB5-Pe8RM3Eni7=xk1_P-MpiMcoWR2efA@mail.gmail.com>
Message-ID: <4F430517.3070903@berkeley.edu>

Haven't used earth/MARS in a month or two, but I don't 
remember this being a big issue.  Wouldn't...

names(vars)

...do it for you?

Cheers!
Nick

On 2/20/12 6:26 PM, Ona Strikas wrote:
> I don't know if anyone on the list uses the package earth to run a MARS
> analysis, but I am trying to run a loop of MARS runs and table the
> variables that it selects as explanatory. However, looking at the help file
> and names for an earth model, I can't find a good way of obtaining the
> variable names that it selects. Here are my present attempts:
>
> #attempt 1
> vars = character()
>> set.seed(3042)
>> for(j in 1:1000){
> + rows = sample(1:length(rd4km$OBJECTID), 2000, replace=FALSE)
> + subrd4km = rd4km[rows, ]
> + model = earth(ff2006 ~
> roadlength+Atl.dist+Atl.dir+roadd+easting+northing,  degree=1,
> +   data=subrd4km,  glm=list(family=poisson))
> + vars=c(vars, rownames(model$glm.coefficients))
> +
> + }
>
>> head(table(vars))
> vars
>            (Intercept)              Atl.dirN             Atl.dirNE
>                   1000                    99                   629
>              Atl.dirNW              Atl.dirS             Atl.dirSE
>                    571                   882                    55
>              Atl.dirSW              Atl.dirW  h(-0.574228-easting)
>                     79                   188                     3
>    h(-100.574-easting)   h(-104.574-easting)   h(-108.574-easting)
>                      1                     1                     5
>    h(-112.574-easting)   h(-116.574-easting)   h(-12.5742-easting)
>
> # attempt 2
> dirf = character()
> set.seed(3042)
> for(j in 1:1000){
> rows = sample(1:length(rd5$X), 2000, replace=FALSE)
> subrd5 = rd5[rows, ]
> model = earth(ff ~ roadd + Atldir,  degree=1,
>    data=subrd5,  glm=list(family="poisson"))
> dirf = c(dirf,
> dimnames(model$coefficients)[[1]][length(dimnames(model$coefficients)[[1]])])
> }
> table(dirf)
>
> The data is lightning flash density with a list of possible covariates.
>
> Thanks for any help,
> Sincerely,
> Ona Strikas
> Florida State University
> Department of Geography
> Graduate Student
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
====================================================
Nicholas J. Matzke
Ph.D. Candidate, Graduate Student Researcher

Huelsenbeck Lab
Center for Theoretical Evolutionary Genomics
4151 VLSB (Valley Life Sciences Building)
Department of Integrative Biology
University of California, Berkeley

Graduate Student Instructor, IB200B
Principles of Phylogenetics: Ecology and Evolution
http://ib.berkeley.edu/courses/ib200b/
http://phylo.wikidot.com/


Lab websites:
http://ib.berkeley.edu/people/lab_detail.php?lab=54
http://fisher.berkeley.edu/cteg/hlab.html
Dept. personal page: 
http://ib.berkeley.edu/people/students/person_detail.php?person=370
Lab personal page: 
http://fisher.berkeley.edu/cteg/members/matzke.html
Lab phone: 510-643-6299
Dept. fax: 510-643-6264

Cell phone: 510-301-0179
Email: matzke at berkeley.edu

Mailing address:
Department of Integrative Biology
1005 Valley Life Sciences Building #3140
Berkeley, CA 94720-3140

-----------------------------------------------------
"[W]hen people thought the earth was flat, they were wrong. 
When people thought the earth was spherical, they were 
wrong. But if you think that thinking the earth is spherical 
is just as wrong as thinking the earth is flat, then your 
view is wronger than both of them put together."

Isaac Asimov (1989). "The Relativity of Wrong." The 
Skeptical Inquirer, 14(1), 35-44. Fall 1989.
http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm


From matzke at berkeley.edu  Tue Feb 21 03:49:05 2012
From: matzke at berkeley.edu (Nick Matzke)
Date: Mon, 20 Feb 2012 18:49:05 -0800
Subject: [R-sig-Geo] closest distance between irregularly-shaped polygons
Message-ID: <4F430621.3050507@berkeley.edu>

Hi everyone,

I have a number of irregularly-shaped polygons (from 
shapefiles) in geographic (unprojected lat/long) coordinates.

I would like to measure:

1. the distance between the polygon centroids (which is 
easy), and also

2. the *closest* distances of each polygon to each of the others

Is there an easy function or method for doing the latter? 
If not, all I can think of is to cycle through all the 
vertices and do point-to-point distances until I get the 
closest, although this seems wasteful and might even give 
the wrong answer in certain situations.

Any help or suggestions very much appreciated!

Thanks!
Nick


-- 
====================================================
Nicholas J. Matzke
Ph.D. Candidate, Graduate Student Researcher

Huelsenbeck Lab
Center for Theoretical Evolutionary Genomics
4151 VLSB (Valley Life Sciences Building)
Department of Integrative Biology
University of California, Berkeley

Graduate Student Instructor, IB200B
Principles of Phylogenetics: Ecology and Evolution
http://ib.berkeley.edu/courses/ib200b/
http://phylo.wikidot.com/


Lab websites:
http://ib.berkeley.edu/people/lab_detail.php?lab=54
http://fisher.berkeley.edu/cteg/hlab.html
Dept. personal page: 
http://ib.berkeley.edu/people/students/person_detail.php?person=370
Lab personal page: 
http://fisher.berkeley.edu/cteg/members/matzke.html
Lab phone: 510-643-6299
Dept. fax: 510-643-6264

Cell phone: 510-301-0179
Email: matzke at berkeley.edu

Mailing address:
Department of Integrative Biology
1005 Valley Life Sciences Building #3140
Berkeley, CA 94720-3140

-----------------------------------------------------
"[W]hen people thought the earth was flat, they were wrong. 
When people thought the earth was spherical, they were 
wrong. But if you think that thinking the earth is spherical 
is just as wrong as thinking the earth is flat, then your 
view is wronger than both of them put together."

Isaac Asimov (1989). "The Relativity of Wrong." The 
Skeptical Inquirer, 14(1), 35-44. Fall 1989.
http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm


From r.turner at auckland.ac.nz  Tue Feb 21 09:28:18 2012
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Tue, 21 Feb 2012 21:28:18 +1300
Subject: [R-sig-Geo] closest distance between irregularly-shaped polygons
In-Reply-To: <4F430621.3050507@berkeley.edu>
References: <4F430621.3050507@berkeley.edu>
Message-ID: <4F4355A2.3070003@auckland.ac.nz>

On 21/02/12 15:49, Nick Matzke wrote:
> Hi everyone,
>
> I have a number of irregularly-shaped polygons (from shapefiles) in 
> geographic (unprojected lat/long) coordinates.
>
> I would like to measure:
>
> 1. the distance between the polygon centroids (which is easy)
     Are you sure that it's easy?  Many people believe that the centroid
     of a polygon is the same as the centroid (xbar,ybar) of its vertices.
     This is NOT correct!
> and also
>
> 2. the *closest* distances of each polygon to each of the others
>
> Is there an easy function or method for doing the latter? If not, all 
> I can think of is to cycle through all the vertices and do 
> point-to-point distances until I get the closest, although this seems 
> wasteful and might even give the wrong answer in certain situations.

Yes.  It will often give the wrong answer.  In general the shortest 
distance will be the
distance from a vertex of one polygon to a point on an edge (but not an 
endpoint of
that edge) of the other polygon.

Think of the limiting case of two line segments:

         |
         |
         |   -----------
         |
         |

> Any help or suggestions very much appreciated!

There is a bit of a problem with the fact that your coordinates are
unprojected longitude and latitude.

If you are willing to treat your coordinates as Euclidean, or if you can 
project
your coordinates onto a more-or-less flat surface, you can use the tools of
the package *spatstat* to accomplish your goal.

     * convert each polygon to an object of class "owin"; (see below)

     * for each pair of such owin objects, say W1 and W2, calculate

         min(crossdist(as.psp(W1),as.psp(W2),type="separation"))

See Adrian's vignette "shapefiles" for advice on how to express data read
in from shapefiles as objects of the sort that spatstat works with.  There
are explicit instructions as to how to convert an object of class 
"SpatialPolygons"
to an object, or objects, of class "owin".

As of present writing, as far as I know (Adrian keeps adding features at an
incredible clip, and I can't keep up) spatstat does not have a facility 
for handling
distances between points expressed in longitude and latitude.  (Great circle
distances.)  Such a facility will be added eventually --- hard to say 
when, but.

HTH

     cheers,

             Rolf Turner

P. S.  If the polygons ever *overlap*, the solution I've outlined may 
not do what
you want.  It will give the answer 0.  Is that the "right" answer from 
your point
of view?  If not, what is the "right" answer?

             R. T.


From M.U.Kemp at uva.nl  Tue Feb 21 09:29:22 2012
From: M.U.Kemp at uva.nl (Kemp, Michael)
Date: Tue, 21 Feb 2012 08:29:22 +0000
Subject: [R-sig-Geo] closest distance between irregularly-shaped polygons
In-Reply-To: <4F430621.3050507@berkeley.edu>
References: <4F430621.3050507@berkeley.edu>
Message-ID: <41DD650D5B3A4247AD9F423FDE9378FA2992AD72@snelders.uva.nl>

Hey Nick,

There was a previous discussion on this topic in the R-sig-geo mailing list.  Follow the discussion here...
https://stat.ethz.ch/pipermail/r-sig-geo/2009-March/005216.html

Hope this helps.
Regards,
Michael


-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Nick Matzke
Sent: Tuesday, February 21, 2012 3:49 AM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] closest distance between irregularly-shaped polygons

Hi everyone,

I have a number of irregularly-shaped polygons (from
shapefiles) in geographic (unprojected lat/long) coordinates.

I would like to measure:

1. the distance between the polygon centroids (which is easy), and also

2. the *closest* distances of each polygon to each of the others

Is there an easy function or method for doing the latter? 
If not, all I can think of is to cycle through all the vertices and do point-to-point distances until I get the closest, although this seems wasteful and might even give the wrong answer in certain situations.

Any help or suggestions very much appreciated!

Thanks!
Nick


--
====================================================
Nicholas J. Matzke
Ph.D. Candidate, Graduate Student Researcher

Huelsenbeck Lab
Center for Theoretical Evolutionary Genomics
4151 VLSB (Valley Life Sciences Building) Department of Integrative Biology University of California, Berkeley

Graduate Student Instructor, IB200B
Principles of Phylogenetics: Ecology and Evolution http://ib.berkeley.edu/courses/ib200b/
http://phylo.wikidot.com/


Lab websites:
http://ib.berkeley.edu/people/lab_detail.php?lab=54
http://fisher.berkeley.edu/cteg/hlab.html
Dept. personal page: 
http://ib.berkeley.edu/people/students/person_detail.php?person=370
Lab personal page: 
http://fisher.berkeley.edu/cteg/members/matzke.html
Lab phone: 510-643-6299
Dept. fax: 510-643-6264

Cell phone: 510-301-0179
Email: matzke at berkeley.edu

Mailing address:
Department of Integrative Biology
1005 Valley Life Sciences Building #3140 Berkeley, CA 94720-3140

-----------------------------------------------------
"[W]hen people thought the earth was flat, they were wrong. 
When people thought the earth was spherical, they were wrong. But if you think that thinking the earth is spherical is just as wrong as thinking the earth is flat, then your view is wronger than both of them put together."

Isaac Asimov (1989). "The Relativity of Wrong." The Skeptical Inquirer, 14(1), 35-44. Fall 1989.
http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Tue Feb 21 11:16:21 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 21 Feb 2012 11:16:21 +0100 (CET)
Subject: [R-sig-Geo] Course: early indication of interest
Message-ID: <alpine.LRH.2.02.1202211105590.8671@reclus.nhh.no>

It would be useful to know whether a Ph.D. course on applied spatial data 
analysis held in Bergen, Norway, in early December 2012 would be of 
interest to list subscribers or others known to you. The course 
description, and details of the Spring 2011 edition are available here:

http://www.nhh.no/no/studentsider/faginformasjon/studier-ved-nhh-(studieh%C3%A5ndboken)/studieh%C3%A5ndboken.aspx?Kurs=ECS530

http://www.nhh.no/en/research---faculty/department-of-economics/phd-pages/phd-courses/ecs530-analysing-spatial-data.aspx

Indications of interest at this stage are not binding, but would be useful 
in deciding whether to offer the course in 2012 or 2013.

Grateful for feedback off-list,

Roger

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From godina at dal.ca  Tue Feb 21 12:59:09 2012
From: godina at dal.ca (Aurelie C.Godin)
Date: Tue, 21 Feb 2012 03:59:09 -0800 (PST)
Subject: [R-sig-Geo] Course: early indication of interest
In-Reply-To: <alpine.LRH.2.02.1202211105590.8671@reclus.nhh.no>
References: <alpine.LRH.2.02.1202211105590.8671@reclus.nhh.no>
Message-ID: <F076B295-5ECA-4F6D-B2A8-8F97182895EB@Dal.Ca>

Dear Dr. Bivand, I would definitely be interested!
Thank you very much, 
Best, Aurelie


Sent from my iPhone

On 2012-02-21, at 6:16 AM, "Roger Bivand [via R-sig-geo]" <ml-node+s2731867n7304270h7 at n2.nabble.com> wrote:

> listinfo/r-sig-geo
> Roger Bivand


-----
Aurelie Cosandey-Godin
Ph.D. Student, Department of Biology, Dalhousie University
Industrial Graduate Fellow, WWF-Canada
Email: godina at dal.ca | Web: wormlab.biology.dal.ca

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Course-early-indication-of-interest-tp7304270p7304503.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From pep.bioalerts at gmail.com  Tue Feb 21 15:22:24 2012
From: pep.bioalerts at gmail.com (Josep M Serra diaz)
Date: Tue, 21 Feb 2012 15:22:24 +0100
Subject: [R-sig-Geo] making Principal Component Analysis with large raster
Message-ID: <CAF8H1deY-VXWv=m4K8S+z0jwfeXoR65Na9gZoyPYitJH8NL4dQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120221/6ef53806/attachment.pl>

From nyambayarb at ou.edu  Tue Feb 21 18:03:08 2012
From: nyambayarb at ou.edu (Batbayar, Nyambayar)
Date: Tue, 21 Feb 2012 17:03:08 +0000
Subject: [R-sig-Geo] conversion of ascii grid (or
 SpatialPixelsDataFrame) to adehabitatHR::estUD-class
In-Reply-To: <1312304314413-6645600.post@n2.nabble.com>
References: <1312304314413-6645600.post@n2.nabble.com>
Message-ID: <7AB54B5B2C3F4E468A6FB19778B6924D4D0F5977@it-athena.sooner.net.ou.edu>

Hi,

Has anyone successfully implemented BBMM package using long distance bird migration data on continental scale? 
It works for data from small areas, but not for continental scale.

Best,
Nyamba

-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of andrewaduff
Sent: Tuesday, August 02, 2011 11:59 AM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] conversion of ascii grid (or SpatialPixelsDataFrame) to adehabitatHR::estUD-class

Hi List,

I have a series of ascii grid files representing home range probability
distribution functions.  The home ranges were calculated in various R
packages (adehabitat, bbmm, ks) and I would like generate volume indices
(PHR, VI, BA) for them using Clement Calenge's kerneloverlaphr function in
adehabitatHR.  Does anyone know how to convert an ascii grid (or
SpatialPixelsDataFrame) to an object of class adehabitatHR::estUD-class
("estUDm")?

Thanks in advance,

Andy

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/conversion-of-ascii-grid-or-SpatialPixelsDataFrame-to-adehabitatHR-estUD-class-tp6645600p6645600.html
Sent from the R-sig-geo mailing list archive at Nabble.com.

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From HodgessE at uhd.edu  Tue Feb 21 19:06:05 2012
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Tue, 21 Feb 2012 12:06:05 -0600
Subject: [R-sig-Geo] setting up a spatial data frame
Message-ID: <586A4828D7AAA04CA9B258C50A28DA200BF58E11@BALI.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120221/df32ce0f/attachment.pl>

From antonio.rrz at gmail.com  Wed Feb 22 09:28:59 2012
From: antonio.rrz at gmail.com (Antonio Rodriges)
Date: Wed, 22 Feb 2012 10:28:59 +0200
Subject: [R-sig-Geo] Creating multidimentional vector map
In-Reply-To: <CAPrLoNc2mrWd3zcYqOmep0GrL7BW+8QKzXM1ATrbLhJBH-1sXw@mail.gmail.com>
References: <CAPrLoNc2mrWd3zcYqOmep0GrL7BW+8QKzXM1ATrbLhJBH-1sXw@mail.gmail.com>
Message-ID: <CAPrLoNdpuVuNPmmnTfs7ExmHZ2UqbzG5WBhGxsxT08fYb4B4bA@mail.gmail.com>

Hello,

I have some shapefiles which I would like to render on a map with
different scales with my own software. Is there
a way to precreate vector layers (somewhat aggregated) for each map
scale for the given shapefile in order to reduce the volume of data
transfer and increase the
visualization speed?


Thank you

Antonio


-- 
Kind regards,
Antonio Rodriges


From villers.alexandre at gmail.com  Wed Feb 22 09:52:16 2012
From: villers.alexandre at gmail.com (Alexandre Villers)
Date: Wed, 22 Feb 2012 10:52:16 +0200
Subject: [R-sig-Geo] setting up a spatial data frame
In-Reply-To: <586A4828D7AAA04CA9B258C50A28DA200BF58E11@BALI.uhd.campus>
References: <586A4828D7AAA04CA9B258C50A28DA200BF58E11@BALI.uhd.campus>
Message-ID: <4F44ACC0.7060803@gmail.com>

Hi Erin,

You should provide us with more information: with no lat / lon data, it 
is going to be pretty difficult to turn your data frame into a Spatial 
Object... were the data collected on a regular grid, is it somehow 
linked to a Spatial object that could be imported into R? From the last 
columns, it seems to come from a shapefile... Do you have this file ?

Alex

On 21/02/2012 20:06, Hodgess, Erin wrote:
> Dear R Sig Geo People:
>
> I have a data frame with the following columns;
>
>> str(sup1.df)
> 'data.frame':   88 obs. of  34 variables:
>   $ OBJECTID      : int  1 2 3 4 5 6 7 8 9 10 ...
>   $ POLYID        : int  60 63 61 59 21 5 78 73 17 22 ...
>   $ SUM_POP100    : int  3881 13471 16716 2497 49277 33973 22317 49757 54978 26285 ...
>   $ SUM_HU100     : int  2104 5120 3664 1133 31563 15192 7411 17530 28365 14911 ...
>   $ SUM_TotPop    : int  3881 13471 16716 2497 49277 33973 22317 49757 54978 26285 ...
>   $ SUM_HispPop   : int  711 10603 3266 603 7311 15914 15338 34780 12827 7890 ...
>   $ SUM_NonHispPop: int  3170 2868 13450 1894 41966 18059 6979 14977 42151 18395 ...
>   $ SUM_NHOneRace : int  3091 2798 13347 1880 41129 17769 6806 14786 40969 17991 ...
>   $ SUM_NH_White  : int  1353 1063 6092 15 34063 4920 1824 3805 19487 14604 ...
>   $ SUM_NH_Black  : int  1396 1623 6562 1853 2291 12080 4364 9403 12911 1530 ...
>   $ SUM_NH_AmInd  : int  11 21 29 5 69 80 12 70 105 72 ...
>   $ SUM_NH_Asian  : int  321 78 355 6 4551 638 574 1434 8290 1725 ...
>   $ SUM_NH_HawPacI: int  1 2 1 0 11 5 6 6 16 11 ...
>   $ SUM_NH_Other  : int  9 11 308 1 144 46 26 68 160 49 ...
>   $ SUM_NH_2orMore: int  79 70 103 14 837 290 173 191 1182 404 ...
>   $ SUM_VAP_TotPop: int  3103 9734 16202 1859 42519 23857 14707 34648 42986 23200 ...
>   $ SUM_VAP_HispPo: int  544 7525 3141 343 5966 10149 9720 22766 9211 6228 ...
>   $ SUM_VAP_NonHis: int  2559 2209 13061 1516 36553 13708 4987 11882 33775 16972 ...
>   $ SUM_VAP_NHOneR: int  2510 2161 12973 1505 35936 13536 4886 11758 33023 16674 ...
>   $ SUM_VAP_NH_Whi: int  1310 956 5960 15 29948 4402 1563 3391 16611 13659 ...
>   $ SUM_VAP_NH_Bla: int  885 1104 6344 1480 1960 8519 2837 7167 9687 1356 ...
>   $ SUM_VAP_NH_AmI: int  11 20 29 3 55 52 8 56 73 66 ...
>   $ SUM_VAP_NH_Asi: int  296 74 333 6 3850 533 461 1091 6533 1547 ...
>   $ SUM_VAP_HawPac: int  1 1 1 0 10 5 5 6 15 8 ...
>   $ SUM_VAP_NH_Oth: int  7 6 306 1 113 25 12 47 104 38 ...
>   $ SUM_VAP_NH_2or: int  49 48 88 11 617 172 101 124 752 298 ...
>   $ SUM_TotHousing: int  2104 5120 3664 1133 31563 15192 7411 17530 28365 14911 ...
>   $ SUM_OccHU     : int  1978 4406 2921 940 27432 11484 6734 15549 24994 13595 ...
>   $ SUM_VacantHU  : int  126 714 743 193 4131 3708 677 1981 3371 1316 ...
>   $ Name          : Factor w/ 88 levels "ACRES HOME","ADDICKS PARK TEN",..: 26 68 16 14 35 33 32 27 22 82 ...
>   $ Shape         : logi  NA NA NA NA NA NA ...
>   $ Shape_Length  : num  16572 43119 39256 59785 75759 ...
>   $ Shape_Area    : num  1.30e+07 8.04e+07 7.55e+07 7.66e+07 2.30e+08 ...
>   $ DENS10        : num  0.188 0.652 0.809 0.121 2.384 ...
> There is no Longitude and latitude.
>
> How do I convert it to a spatial object, please?
>
> Thanks,
> Erin
>
> Erin M. Hodgess, PhD
> Associate Professor
> Department of Computer and Mathematical Sciences
> University of Houston - Downtown
> mailto: hodgesse at uhd.edu
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From lmorandini at ieee.org  Wed Feb 22 10:53:24 2012
From: lmorandini at ieee.org (Luca Morandini)
Date: Wed, 22 Feb 2012 10:53:24 +0100
Subject: [R-sig-Geo] setting up a spatial data frame
In-Reply-To: <4F44ACC0.7060803@gmail.com>
References: <586A4828D7AAA04CA9B258C50A28DA200BF58E11@BALI.uhd.campus>
	<4F44ACC0.7060803@gmail.com>
Message-ID: <ji2dul$77i$1@dough.gmane.org>

On 02/22/2012 09:52 AM, Alexandre Villers wrote:
> Hi Erin,
>
> You should provide us with more information: with no lat / lon data, it is going
> to be pretty difficult to turn your data frame into a Spatial Object... were the
> data collected on a regular grid, is it somehow linked to a Spatial object that
> could be imported into R? From the last columns, it seems to come from a
> shapefile... Do you have this file ?

Indeed it looks like a erroneous Shapefile import; if you look at the last three 
variables, it seems the actual geometry ("Shape") has not been imported, while 
geometry's length and area have been:

 >> $ Shape : logi NA NA NA NA NA NA ...
 >> $ Shape_Length : num 16572 43119 39256 59785 75759 ...
 >> $ Shape_Area : num 1.30e+07 8.04e+07 7.55e+07 7.66e+07 2.30e+08 ...

Regards,

Luca Morandini
http://www.lucamorandini.it


From mdsumner at gmail.com  Wed Feb 22 11:05:29 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 22 Feb 2012 21:05:29 +1100
Subject: [R-sig-Geo] Creating multidimentional vector map
In-Reply-To: <CAPrLoNdpuVuNPmmnTfs7ExmHZ2UqbzG5WBhGxsxT08fYb4B4bA@mail.gmail.com>
References: <CAPrLoNc2mrWd3zcYqOmep0GrL7BW+8QKzXM1ATrbLhJBH-1sXw@mail.gmail.com>
	<CAPrLoNdpuVuNPmmnTfs7ExmHZ2UqbzG5WBhGxsxT08fYb4B4bA@mail.gmail.com>
Message-ID: <CAAcGz9_1xTJQkZ9h2EcUU52v3WWzRfhy_bUoUqdGjSTgux8vPg@mail.gmail.com>

This is a pretty open question, and there are certainly things you
could do in R but I wonder if you'd be better looking elsewhere.

Using GDAL gives you a lot of support for pre-rendered scales and
tiled data sets, and the GDAL library has tools for rasterizing from
vector layers.  Also, mapserver provides great support for serving
layers already.

I'd probably start there instead of in R itself.

http://mapserver.org/

www.gdal.org

(This is not to say that there isn't a super-cunning R solution as
well, but the ones I can think of would better leverage these tools
more directly . . .).

Cheers, Mike

On Wed, Feb 22, 2012 at 7:28 PM, Antonio Rodriges <antonio.rrz at gmail.com> wrote:
> Hello,
>
> I have some shapefiles which I would like to render on a map with
> different scales with my own software. Is there
> a way to precreate vector layers (somewhat aggregated) for each map
> scale for the given shapefile in order to reduce the volume of data
> transfer and increase the
> visualization speed?
>
>
> Thank you
>
> Antonio
>
>
> --
> Kind regards,
> Antonio Rodriges
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From Roger.Bivand at nhh.no  Wed Feb 22 11:16:30 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 22 Feb 2012 11:16:30 +0100 (CET)
Subject: [R-sig-Geo] closest distance between irregularly-shaped polygons
In-Reply-To: <41DD650D5B3A4247AD9F423FDE9378FA2992AD72@snelders.uva.nl>
References: <4F430621.3050507@berkeley.edu>
	<41DD650D5B3A4247AD9F423FDE9378FA2992AD72@snelders.uva.nl>
Message-ID: <alpine.LRH.2.02.1202221100590.9296@reclus.nhh.no>

On Tue, 21 Feb 2012, Kemp, Michael wrote:

> Hey Nick,
>
> There was a previous discussion on this topic in the R-sig-geo mailing 
> list.  Follow the discussion here... 
> https://stat.ethz.ch/pipermail/r-sig-geo/2009-March/005216.html

And see how the cshapes package does this (using JTS and Java to simplify 
the polygons, and Great Circle distances between polygon boundary points).

If you project, then gDistance in rgeos will do this:

library(maptools)
xx <- readShapeSpatial(system.file("shapes/sids.shp",
   package="maptools")[1], proj4string=CRS("+proj=longlat +datum=NAD27"))
library(rgdal)
xx_utm <- spTransform(xx, CRS("+proj=utm +zone=17 +datum=NAD83"))
library(rgeos)
pD <- gDistance(xx_utm, xx_utm, byid=TRUE)
str(pD)


Roger

>
> Hope this helps.
> Regards,
> Michael
>
>
> -----Original Message-----
> From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Nick Matzke
> Sent: Tuesday, February 21, 2012 3:49 AM
> To: r-sig-geo at r-project.org
> Subject: [R-sig-Geo] closest distance between irregularly-shaped polygons
>
> Hi everyone,
>
> I have a number of irregularly-shaped polygons (from
> shapefiles) in geographic (unprojected lat/long) coordinates.
>
> I would like to measure:
>
> 1. the distance between the polygon centroids (which is easy), and also
>
> 2. the *closest* distances of each polygon to each of the others
>
> Is there an easy function or method for doing the latter?
> If not, all I can think of is to cycle through all the vertices and do point-to-point distances until I get the closest, although this seems wasteful and might even give the wrong answer in certain situations.
>
> Any help or suggestions very much appreciated!
>
> Thanks!
> Nick
>
>
> --
> ====================================================
> Nicholas J. Matzke
> Ph.D. Candidate, Graduate Student Researcher
>
> Huelsenbeck Lab
> Center for Theoretical Evolutionary Genomics
> 4151 VLSB (Valley Life Sciences Building) Department of Integrative Biology University of California, Berkeley
>
> Graduate Student Instructor, IB200B
> Principles of Phylogenetics: Ecology and Evolution http://ib.berkeley.edu/courses/ib200b/
> http://phylo.wikidot.com/
>
>
> Lab websites:
> http://ib.berkeley.edu/people/lab_detail.php?lab=54
> http://fisher.berkeley.edu/cteg/hlab.html
> Dept. personal page:
> http://ib.berkeley.edu/people/students/person_detail.php?person=370
> Lab personal page:
> http://fisher.berkeley.edu/cteg/members/matzke.html
> Lab phone: 510-643-6299
> Dept. fax: 510-643-6264
>
> Cell phone: 510-301-0179
> Email: matzke at berkeley.edu
>
> Mailing address:
> Department of Integrative Biology
> 1005 Valley Life Sciences Building #3140 Berkeley, CA 94720-3140
>
> -----------------------------------------------------
> "[W]hen people thought the earth was flat, they were wrong.
> When people thought the earth was spherical, they were wrong. But if you think that thinking the earth is spherical is just as wrong as thinking the earth is flat, then your view is wronger than both of them put together."
>
> Isaac Asimov (1989). "The Relativity of Wrong." The Skeptical Inquirer, 14(1), 35-44. Fall 1989.
> http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Wed Feb 22 11:22:46 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 22 Feb 2012 11:22:46 +0100 (CET)
Subject: [R-sig-Geo] A question about gwr.morantest  pvalue
In-Reply-To: <1329434591050-7292670.post@n2.nabble.com>
References: <1329434591050-7292670.post@n2.nabble.com>
Message-ID: <alpine.LRH.2.02.1202221119230.9296@reclus.nhh.no>

On Thu, 16 Feb 2012, Apostolis wrote:

> Dear list members
>
> I am a new user of R and I would like to ask a question about the function
> gwr.morantest which is included in the spgwr package.
>
> According to the paper of Leung et al  page  881
> when
> EQ.EQ3.gwr > 0 the pvalue of the test is  P(chisqh<= chi2.gwr)
> (equation 43)
>
> and when
>
> EQ.EQ3.gwr < 0    the pvalue  is  1 - P(chisqh<= chi2.gwr)  (equation 44)
>
> However in the function gwr.morantest the estimations in the IF  are
> respectively:
>
> if (EQ.EQ3.gwr > 0) {
>        chi2.gwr <- h.gwr - ((sqrt(2 * h.gwr) * EQ.gwr)/(sqrt(varQ.gwr)))
>        p.gwr <- 1 - pchisq(chi2.gwr, h.gwr)
>    }
>    else if (EQ.EQ3.gwr < 0) {
>        chi2.gwr <- (h.gwr + ((sqrt(2 * h.gwr) * EQ.gwr)/(sqrt(varQ.gwr))))
>        p.gwr <- pchisq(chi2.gwr, h.gwr)
>    }
>
> Is it correct or there is an error? My problem is in the appearance  of 1 in
> p.gwr inside the IF.

There is no "correct" here, as ?pchisq shows that if lower.tail= is not 
set it is taken by default to be TRUE. You will need to check this 
yourself. Note that GWR is a notoriously unreliable technique, and 
simulation studies indicate that it finds pattern in coefficients even 
when there is none. So any tests are doubtful anyway - it should only be 
used for exploring the data for possible missing variables or 
inappropriate functional forms.

Hope this clarifies,

Roger

>
> I wish to use the gwr.morantest function in a simulation study and I would
> like to know whether the function estimates the pvalue which is described in
> the paper  correctly.
>
> Thanks in advance
> Apostolis
>
>
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/A-question-about-gwr-morantest-pvalue-tp7292670p7292670.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From mdsumner at gmail.com  Wed Feb 22 11:35:05 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 22 Feb 2012 21:35:05 +1100
Subject: [R-sig-Geo] Creating multidimentional vector map
In-Reply-To: <CAAcGz9_1xTJQkZ9h2EcUU52v3WWzRfhy_bUoUqdGjSTgux8vPg@mail.gmail.com>
References: <CAPrLoNc2mrWd3zcYqOmep0GrL7BW+8QKzXM1ATrbLhJBH-1sXw@mail.gmail.com>
	<CAPrLoNdpuVuNPmmnTfs7ExmHZ2UqbzG5WBhGxsxT08fYb4B4bA@mail.gmail.com>
	<CAAcGz9_1xTJQkZ9h2EcUU52v3WWzRfhy_bUoUqdGjSTgux8vPg@mail.gmail.com>
Message-ID: <CAAcGz9-Jp8HkfAdCjkBeS+D7pcKLEBqu_UsUaFeicjCFzFFkXQ@mail.gmail.com>

Hmm, the subject "multidimensional" got me thinking of "rasterized"
vector layers, but I think that was off-track.

You can use gSimplify in the rgeos package to easily simplify a
Spatial[Lines/Polygons]DataFrame as read in by readShapeSpatial
(maptools) or readOGR (rgdal) (or coerced from some other format). The
output of gSimplify is a simplified version of the input that you can
collect like any other R object in a list().

See

library(rgeos)
?gSimplify

HTH



On Wed, Feb 22, 2012 at 9:05 PM, Michael Sumner <mdsumner at gmail.com> wrote:
> This is a pretty open question, and there are certainly things you
> could do in R but I wonder if you'd be better looking elsewhere.
>
> Using GDAL gives you a lot of support for pre-rendered scales and
> tiled data sets, and the GDAL library has tools for rasterizing from
> vector layers. ?Also, mapserver provides great support for serving
> layers already.
>
> I'd probably start there instead of in R itself.
>
> http://mapserver.org/
>
> www.gdal.org
>
> (This is not to say that there isn't a super-cunning R solution as
> well, but the ones I can think of would better leverage these tools
> more directly . . .).
>
> Cheers, Mike
>
> On Wed, Feb 22, 2012 at 7:28 PM, Antonio Rodriges <antonio.rrz at gmail.com> wrote:
>> Hello,
>>
>> I have some shapefiles which I would like to render on a map with
>> different scales with my own software. Is there
>> a way to precreate vector layers (somewhat aggregated) for each map
>> scale for the given shapefile in order to reduce the volume of data
>> transfer and increase the
>> visualization speed?
>>
>>
>> Thank you
>>
>> Antonio
>>
>>
>> --
>> Kind regards,
>> Antonio Rodriges
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
> --
> Michael Sumner
> Institute for Marine and Antarctic Studies, University of Tasmania
> Hobart, Australia
> e-mail: mdsumner at gmail.com



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From Roger.Bivand at nhh.no  Wed Feb 22 11:39:37 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 22 Feb 2012 11:39:37 +0100 (CET)
Subject: [R-sig-Geo] GGWR (family = Poission): Prediction of unknown
 location
In-Reply-To: <4F42DEEF.8030600@cornell.edu>
References: <4F42DEEF.8030600@cornell.edu>
Message-ID: <alpine.LRH.2.02.1202221127140.9296@reclus.nhh.no>

On Mon, 20 Feb 2012, Zia Ahmed wrote:

> Hello,
> I am trying to predict expected count for a geographical location  (file 
> name:  data_181 - test data)  from a another data set (data_65 - work_data) 
> using GGWR poission model.  Following R code I used.  But No predicted counts 
> were  found  in output SDF  file.  I am new in GGWR.   Help will be 
> appreciated. I attach my data sets here. Thanks

Why would you expect any predicted counts? The help page is admittedly 
misleading, but does not say anywhere that predictions are returned. The 
predictions available for gwr() are speculative at best. Note that GWR is 
a notoriously unreliable technique, and simulation studies indicate that 
it finds pattern in coefficients even when there is none. So any tests are 
doubtful anyway - it should only be used for exploring the data for 
possible missing variables or inappropriate functional forms.

Roger

> Zia
>
> library(spgwr)
> data(data_65)   # work data set
> data(data_181) #  test data set
>
> bw <- ggwr.sel(PopRisk_100TH ~ log10(WAS)*log10(GAS)+ 
> offset(log(population_1000)), coords=cbind(data_65$x, data_65$y),
>      data=data_65, family=poisson())
> coordinates(data.181)<-~x+y
> ggwr.181 <- ggwr(PopRisk_100TH ~ log10(WAS)*log10(GAS) + 
> offset(log(population_1000)), coords=cbind(data.65$x, data.65$y),
>      data=data.65,family=poisson(),bandwidth=bw,type = 
> c("response"),fit.points = data.181)
>
>> ggwr.181$SDF
>
>
> 	sum.w 	X.Intercept. 	log10.wasMean. 	log10.gasMean. 
> log10.wasMean..log10.gasMean. 	dispersion 	response_resids 	x 
> y
> 1 	62.50764 	-2.36702 	1.45678 	-2.42768 
> 5.031622 	1 	NA 	2779558 531287.3
> 2 	63.20595 	-2.36062 	1.451657 	-2.39074 
> 4.995947 	1 	NA 	2767150 575319.5
> 3 	62.87379 	-2.36683 	1.456869 	-2.42598 
> 5.026145 	1 	NA 	2798559 563289.6
> 4 	63.13653 	-2.36322 	1.453891 	-2.4054 
> 5.007724 	1 	NA 	2784218 576455.7
> 5 	62.55473 	-2.36991 	1.459364 	-2.44354 
> 5.042596 	1 	NA 	2807095 	546223
> 6 	62.85015 	-2.36264 	1.453169 	-2.40282 
> 5.009307 	1 	NA 	2762510 547772.6
> 7 	62.67004 	-2.36523 	1.455308 	-2.4175 
> 5.022374 	1 	NA 	2773146 538941.8
> 8 	62.40817 	-2.36266 	1.452969 	-2.40357 
> 5.013347 	1 	NA 	2745574 520650.3
> 9 	62.02654 	-2.36357 	1.453601 	-2.40908 
> 5.020167 	1 	NA 	2739576 502023.7
> 10 	63.01464 	-2.35797 	1.449239 	-2.37628 
> 4.9865 	1 	NA 	2739005 557044.6
> 11 	62.8022 	-2.35943 	1.450378 	-2.38489 
> 4.995307 	1 	NA 	2739341 542981.4
> 12 	62.95506 	-2.36003 	1.45098 	-2.38804 
> 4.996592 	1 	NA 	2749492 553074.4
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From gianni.lavaredo at gmail.com  Thu Feb 23 00:57:48 2012
From: gianni.lavaredo at gmail.com (gianni lavaredo)
Date: Thu, 23 Feb 2012 00:57:48 +0100
Subject: [R-sig-Geo] gaussian filter in RASTER with differnt valuse in sigma
Message-ID: <CAJ6JbR8Td2E5WPi-Cwqk5+RitjNFgLTj9TnFjfzAdwWHCu=xBw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120223/80e3cb94/attachment.pl>

From atsiban at unipi.gr  Thu Feb 23 01:59:32 2012
From: atsiban at unipi.gr (Apostolis)
Date: Wed, 22 Feb 2012 16:59:32 -0800 (PST)
Subject: [R-sig-Geo] A question about gwr.morantest  pvalue
In-Reply-To: <1329434591050-7292670.post@n2.nabble.com>
References: <1329434591050-7292670.post@n2.nabble.com>
Message-ID: <1329958772481-7310428.post@n2.nabble.com>

Thank you
Apostolis

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/A-question-about-gwr-morantest-pvalue-tp7292670p7310428.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From paul.hiemstra at knmi.nl  Thu Feb 23 10:03:13 2012
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Thu, 23 Feb 2012 09:03:13 +0000
Subject: [R-sig-Geo] making Principal Component Analysis with large
	raster
In-Reply-To: <CAF8H1deY-VXWv=m4K8S+z0jwfeXoR65Na9gZoyPYitJH8NL4dQ@mail.gmail.com>
References: <CAF8H1deY-VXWv=m4K8S+z0jwfeXoR65Na9gZoyPYitJH8NL4dQ@mail.gmail.com>
Message-ID: <4F4600D1.9080905@knmi.nl>

On 02/21/2012 02:22 PM, Josep M Serra diaz wrote:
> Dear listers!
>
> I am getting a bit crazy trying to perform a PCA of 6 raster layers. I
> tried using prcomp() by sampling a large dataset of points (around 70%)...
> but it is still way too large. Do you know any other way to perform such
> analysis??
>
> Pep
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
Hi Pep,

Please provide us with more information:

- What errors are you getting? (e.g. out of memory)
- How large are your raster exactly? 6 layers to perform PCA on does not
sound as a lot, I've done it on 126 layers.
- Give a reproducible example of the code that fails. This allows us to
spot any mistakes in the structure of the program. Maybe you can even
upload your dataset somewhere.

One solution could be to use princomp instead of prcomp, this function
allows one to provide a covariance matrix. In this way you can
precalculate the cov. matrix in chunks, overcoming the memory issue. I
used this approach to calculate the cov. matrix of a 2 GB data file with
almost no memory usage.

cheers,
Paul

-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From aliceschaffhauser at yahoo.fr  Thu Feb 23 10:55:29 2012
From: aliceschaffhauser at yahoo.fr (alice schaffhauser)
Date: Thu, 23 Feb 2012 09:55:29 +0000 (GMT)
Subject: [R-sig-Geo] Density of population
In-Reply-To: <1329821662.11728.YahooMailNeo@web171616.mail.ir2.yahoo.com>
References: <1329821662.11728.YahooMailNeo@web171616.mail.ir2.yahoo.com>
Message-ID: <1329990929.32811.YahooMailNeo@web171604.mail.ir2.yahoo.com>

Hi everybody,
I have a data base (baseat_part.txt) on a plant species with records attached to the centers of grid cells.
Because I don't have softwares as arcgis, I'd like to learn spatial analyses with R.
I have wgs84 coordinates and 3 status for the species population (casual=50 plants; unknown=500; established=1500).I just tried to see data with a simple plot (scriptat_part.R) but I must represent the density of population. I found kde2d but I don't know if kernel suits and what it means. 
The grid resolution can vary (not in this partial base but in others; '1' means 3km and '2' means 6 km so I must assign them to the first ones).
I just heard about krigeage and nearest neighbors but I don't know how to use them to calculate the number of plants by grid cell.
The objective is to have 'net cbf' format because I will transfer the distribution map to emission map (with estimated quantities of pollen production).
Thanks a lot for your help.
Alice
------------------------------------------------
Alice SCHAFFHAUSER 
Post-doctoral fellow 
ATOPICA project
Plant and fire ecology (FIRE PARADOX) 
Paleoecology of peatlands and pedogeomorphology 
------------------------------------------------ 
aliceschaffhauser at yahoo.fr 
alice.schaffhauser at lsce.ipsl.fr 
------------------------------------------------ 
Work address: ?
LSCE-CEA Orme des Merisiers, ?
91191 Gif-sur-Yvette cedex 
France 
Tel : 33 (0)1 69 08 77 23 
Fax : 33 (0)1 69 08 77 16
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120223/993efa72/attachment.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: scriptat_part.txt
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120223/993efa72/attachment.txt>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: baseat_part.txt
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120223/993efa72/attachment-0001.txt>

From l.santambrogio2 at campus.unimib.it  Thu Feb 23 10:59:53 2012
From: l.santambrogio2 at campus.unimib.it (Lisa Santambrogio)
Date: Thu, 23 Feb 2012 10:59:53 +0100
Subject: [R-sig-Geo] resistanceDistance representation
Message-ID: <CACDqys2jQPKtwnPxh-D0qv4ioY4N=qE0d=_zZbDvqa01GSc51g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120223/ebcd827b/attachment.pl>

From gianni.lavaredo at gmail.com  Thu Feb 23 13:59:12 2012
From: gianni.lavaredo at gmail.com (gianni lavaredo)
Date: Thu, 23 Feb 2012 13:59:12 +0100
Subject: [R-sig-Geo] image processing - find the "sigma" value in a kernel
	of 3x3 pixel
Message-ID: <CAJ6JbR9didnbxTH=pS0QkcZAA=AzfOAiOzoTPyshtg4vvZYo5Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120223/d9bd83ed/attachment.pl>

From daniel.wiesmann at ist.utl.pt  Thu Feb 23 14:32:16 2012
From: daniel.wiesmann at ist.utl.pt (Daniel Wiesmann)
Date: Thu, 23 Feb 2012 13:32:16 +0000
Subject: [R-sig-Geo] Spatial error model specification (spdep)
Message-ID: <04310168-9729-4786-9391-56578D04CAC1@ist.utl.pt>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120223/8e8881a1/attachment.pl>

From Roger.Bivand at nhh.no  Thu Feb 23 15:19:32 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 23 Feb 2012 15:19:32 +0100 (CET)
Subject: [R-sig-Geo] Spatial error model specification (spdep)
In-Reply-To: <04310168-9729-4786-9391-56578D04CAC1@ist.utl.pt>
References: <04310168-9729-4786-9391-56578D04CAC1@ist.utl.pt>
Message-ID: <alpine.LRH.2.02.1202231448510.15939@reclus.nhh.no>

On Thu, 23 Feb 2012, Daniel Wiesmann wrote:

> Dear list
>
> I am trying to use spdep to estimate a spatial error model using data 
> aggregated by census divisions for an urban area.
>
> I have problems with the model specification with my data. When 
> estimating least squares (OLS) model, the reset-test indicates that the 
> correct specification includes quadratic terms.
>
> After estimating a model that passes the reset-test, I tested the 
> residuals for spatial autocorrelation using lm.morantest and found 
> evidence for it. Therefore I tried to run a spatial error model with the 
> same model formula.
>
> The problem I run into is that the function errorsarlm will not converge 
> when I include a quadratic term into the equation. My guess is that the 
> problem is related to the high correlation between x and x^2. The error 
> is the following:
>
>> Error in solve.default(asyvar, tol = tol.solve) :
>  system is computationally singular: reciprocal condition number = 1.92175e-14
>
> So my question is how to correctly specify the model? Or how to 
> successfully include quadratic terms?
>
> I have run into this problem with real data, but to illustrate the 
> problem, I added below an example that gives the same error with 
> artificial data.

Daniel:

First - this is a model posting in clarity and the provision of a working 
example. The only missing bit is the output of sessionInfo(), but that 
isn't important here. Congratulations! Helpers really appreciate postings 
like this!

The crucial information is given in ?errorsalm for the tol.solve= 
argument. If I rescale x by 0.1:

dat.errorsarlm <- errorsarlm(y ~ I(x/10) + I((x/10)^2), dat, nb)

works. In fact, the unscaled ML fit has converged, but the inversion 
needed to get the asymetric standard errors fails. So one can also try 
alternative fitting methods:

W <- as(as_dgRMatrix_listw(nb), "CsparseMatrix")
trMC <- trW(W, type="MC")
dat.errorsarlm <- errorsarlm(y ~ x + I(x^2), dat, nb, method="Matrix",
   trs=trMC)
summary(dat.errorsarlm)

gets near without the inversion problem, but arguably the SE of lambda is 
too large - there is a suspiciously large difference between the z-value 
test and the LR-test p-values.

Hope this helps

Roger

PS:

Being cheeky, this also works:

library(splines)
dat.errorsarlm <- errorsarlm(y ~ bs(x, 3), dat, nb)
summary(dat.errorsarlm)

and:

dat.errorsarlm <- errorsarlm(y ~ poly(x, 3), dat, nb)
summary(dat.errorsarlm)

See for instance recent papers by Daniel McMillen ...

>
> many thanks in advance,
>
> Daniel
>
> --------------------------------
>
> # Load libraries
> library(lmtest)
> library(spdep)
>
> # Create artificial data
> dat <- data.frame(x = 1:1000, x2 = (1:1000)^2)
> dat$y <- dat$x2 + rnorm(1000, 0, 10)
>
> # Tests suggest that quadratic model is the correct specification
> dat.lm <- lm(y ~ x, dat)
> reset(dat.lm)
>
> dat.lm <- lm(y ~ x + x2, dat)
> reset(dat.lm)
>
> # Create artificial neighbor matrix
> nb <- sample(c(1,0), 1e6, replace = T, prob = c(1, 100))
> nb <- matrix(nb, nrow = 1000)
> nb <- nb + t(nb)
> nb <- mat2listw(nb, style = 'W')
>
> # When I try to estimate spatial error model leads to an error
> dat.errorsarlm <- errorsarlm(y ~ x + x2, dat, nb)
>
>> Error in solve.default(asyvar, tol = tol.solve) :
>  system is computationally singular: reciprocal condition number = 1.92175e-14
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From alfredo.alessa at gmail.com  Thu Feb 23 16:19:11 2012
From: alfredo.alessa at gmail.com (Alfredo Alessandrini)
Date: Thu, 23 Feb 2012 16:19:11 +0100
Subject: [R-sig-Geo] binary conversion
Message-ID: <CAFWK3MxRcwjDm4yBC7s08sdEb5MUj2NgJb1KYtSjhbDPDntHUg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120223/be59d25a/attachment.pl>

From jacobvanetten at yahoo.com  Thu Feb 23 16:47:31 2012
From: jacobvanetten at yahoo.com (Jacob van Etten)
Date: Thu, 23 Feb 2012 15:47:31 +0000 (GMT)
Subject: [R-sig-Geo] resistanceDistance representation
In-Reply-To: <CACDqys2jQPKtwnPxh-D0qv4ioY4N=qE0d=_zZbDvqa01GSc51g@mail.gmail.com>
References: <CACDqys2jQPKtwnPxh-D0qv4ioY4N=qE0d=_zZbDvqa01GSc51g@mail.gmail.com>
Message-ID: <1330012051.67692.YahooMailNeo@web29701.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120223/2e67bd9c/attachment.pl>

From marion_letexier at hotmail.fr  Thu Feb 23 17:48:26 2012
From: marion_letexier at hotmail.fr (marion le texier)
Date: Thu, 23 Feb 2012 16:48:26 +0000
Subject: [R-sig-Geo] fortify.SpatialPolygonsDataFrame error
Message-ID: <DUB108-W4485F4BB70523EBA97A5B0ED650@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120223/1e3fabe8/attachment.pl>

From r.hijmans at gmail.com  Thu Feb 23 18:43:40 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 23 Feb 2012 09:43:40 -0800
Subject: [R-sig-Geo] image processing - find the "sigma" value in a
 kernel of 3x3 pixel
In-Reply-To: <CAJ6JbR9didnbxTH=pS0QkcZAA=AzfOAiOzoTPyshtg4vvZYo5Q@mail.gmail.com>
References: <CAJ6JbR9didnbxTH=pS0QkcZAA=AzfOAiOzoTPyshtg4vvZYo5Q@mail.gmail.com>
Message-ID: <CANtt_hy=CiLn0twfeTtJxrRJWOx=kewh_Fh+W4DHnN-afWW7hw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120223/ede776d9/attachment.pl>

From antonio.rrz at gmail.com  Thu Feb 23 18:49:43 2012
From: antonio.rrz at gmail.com (Antonio Rodriges)
Date: Thu, 23 Feb 2012 19:49:43 +0200
Subject: [R-sig-Geo] Creating multidimentional vector map
In-Reply-To: <CAAcGz9-Jp8HkfAdCjkBeS+D7pcKLEBqu_UsUaFeicjCFzFFkXQ@mail.gmail.com>
References: <CAPrLoNc2mrWd3zcYqOmep0GrL7BW+8QKzXM1ATrbLhJBH-1sXw@mail.gmail.com>
	<CAPrLoNdpuVuNPmmnTfs7ExmHZ2UqbzG5WBhGxsxT08fYb4B4bA@mail.gmail.com>
	<CAAcGz9_1xTJQkZ9h2EcUU52v3WWzRfhy_bUoUqdGjSTgux8vPg@mail.gmail.com>
	<CAAcGz9-Jp8HkfAdCjkBeS+D7pcKLEBqu_UsUaFeicjCFzFFkXQ@mail.gmail.com>
Message-ID: <CAPrLoNd96mu1VM4iMxHDwDi+_AiE4aqJWM9THcqycHyVbYJ+qQ@mail.gmail.com>

Thank you, Michael,

gSimplify uses algorithm for reducing the number of points in a line.
It does not take into account a given map scale. However, your
suggests pointed me to the term of 'cartographic generalization' what
I am actually seeking. After a  Google search  I realized there are
very little solutions exist.


From mspinola10 at gmail.com  Thu Feb 23 19:52:42 2012
From: mspinola10 at gmail.com (=?ISO-8859-1?Q?Manuel_Sp=EDnola?=)
Date: Thu, 23 Feb 2012 12:52:42 -0600
Subject: [R-sig-Geo] Confusion with raster layers names using raster package
Message-ID: <CABkCotTL_OZ8Ar1LJ5Kp6tt3D9rxzEMdoOEuDNjx7LF7V_2+fQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120223/90796876/attachment.pl>

From elena.guijarro at vi.ieo.es  Fri Feb 24 10:11:08 2012
From: elena.guijarro at vi.ieo.es (Elena)
Date: Fri, 24 Feb 2012 10:11:08 +0100
Subject: [R-sig-Geo] rgeos, gpclib and polygon plotting
Message-ID: <4F47542C.4060500@vi.ieo.es>



Dear all,

I recently switched to Ubuntu and have also just started to explore R as
GIS.I am loading some packages in R to plot a shapefile (rgdal,
shapefiles, maptools), and I have stumbled upon rgeos and gpclib. I get
the message that I need geos 3.2.2 or newer, with the tip about
gpclibPermit(). It turns out I do not have a license for gpclib.  My
first question is if there is a way around this, or do I have to open R
from Windows to get newer versions of geos?

The second question: I got four xyp files compiling information from
many bln polygons originally made in Surfer, but only one of these xyp
files has four variables (I assume the fourth is the sequence number).
What kind of object should these xyp files be, and what function should
I use to plot them?

And the third question: I saved the only xyp file with four columns as
csv, imported it into R, added column names so it could pass as a
PolySet and plotted it with the package PBSmapping. I get several diagonal
lines across the map. Are they due to the fact that the sequence skips a number at the start/end
of each polygon? Or is it because the polygons are not properly closed?

Thanks for your help!

Elena


From Roger.Bivand at nhh.no  Fri Feb 24 10:27:36 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 24 Feb 2012 10:27:36 +0100 (CET)
Subject: [R-sig-Geo] rgeos, gpclib and polygon plotting
In-Reply-To: <4F47542C.4060500@vi.ieo.es>
References: <4F47542C.4060500@vi.ieo.es>
Message-ID: <alpine.LRH.2.02.1202241022040.19234@reclus.nhh.no>

On Fri, 24 Feb 2012, Elena wrote:

>
>
> Dear all,
>
> I recently switched to Ubuntu and have also just started to explore R as
> GIS.I am loading some packages in R to plot a shapefile (rgdal,
> shapefiles, maptools), and I have stumbled upon rgeos and gpclib. I get
> the message that I need geos 3.2.2 or newer, with the tip about
> gpclibPermit(). It turns out I do not have a license for gpclib.  My
> first question is if there is a way around this, or do I have to open R
> from Windows to get newer versions of geos?

At least GEOS 3.2.2 binaries are available as ubuntugis-unstable. In fact, 
building from source is simple, just download the source, and follow 
standard procedures. Treat this as an opportunity to extend your skills, 
if you've never consciously installed software from source before! Once 
GEOS is installed, install rgeos from source.

>
> The second question: I got four xyp files compiling information from
> many bln polygons originally made in Surfer, but only one of these xyp
> files has four variables (I assume the fourth is the sequence number).
> What kind of object should these xyp files be, and what function should
> I use to plot them?
>

Please ask different questions in separate threads.

Roger

> And the third question: I saved the only xyp file with four columns as
> csv, imported it into R, added column names so it could pass as a
> PolySet and plotted it with the package PBSmapping. I get several diagonal
> lines across the map. Are they due to the fact that the sequence skips a 
> number at the start/end
> of each polygon? Or is it because the polygons are not properly closed?
>
> Thanks for your help!
>
> Elena
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From aslez at princeton.edu  Fri Feb 24 12:13:16 2012
From: aslez at princeton.edu (Adam Slez)
Date: Fri, 24 Feb 2012 06:13:16 -0500
Subject: [R-sig-Geo] bad degrees of freedom in bptest.sarlm
Message-ID: <CA+9dHA8eZDdSeK7nZrfXsGJt73wet-Ge218JuXNsYzQvcGcYRg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120224/1608e5d2/attachment.pl>

From l.santambrogio2 at campus.unimib.it  Fri Feb 24 12:51:42 2012
From: l.santambrogio2 at campus.unimib.it (Lisa Santambrogio)
Date: Fri, 24 Feb 2012 12:51:42 +0100
Subject: [R-sig-Geo] polygons in gdistance
Message-ID: <CACDqys1BoxHkpko96N=hxegGBmVR84DZz-yfMawKX9RfBTyZCQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120224/1b05908f/attachment.pl>

From Roger.Bivand at nhh.no  Fri Feb 24 14:18:58 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 24 Feb 2012 14:18:58 +0100 (CET)
Subject: [R-sig-Geo] bad degrees of freedom in bptest.sarlm
In-Reply-To: <CA+9dHA8eZDdSeK7nZrfXsGJt73wet-Ge218JuXNsYzQvcGcYRg@mail.gmail.com>
References: <CA+9dHA8eZDdSeK7nZrfXsGJt73wet-Ge218JuXNsYzQvcGcYRg@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1202241417480.20037@reclus.nhh.no>

On Fri, 24 Feb 2012, Adam Slez wrote:

> Am I correct in thinking that the degrees of freedom associated with the
> bptest.sarlm, much like the bptest code from which it came, should be
> driven by the number of parameters in the auxiliary regression NOT the
> model used to generate the residuals?  The way the code for bptest.sarlm is
> written, the degrees of freedom are calculated from the original
> regression, as opposed to the auxiliary model.  The easiest way to see this
> is to do something like this:
>
> library(spdep)
> data(columbus)
> wgts<-nb2listw(col.gal.nb)
> model1<-lagsarlm(CRIME~INC, data = columbus, listw = wgts)
> model2<-lagsarlm(CRIME~INC+HOVAL, data = columbus, listw = wgts)
> bp1<-bptest.sarlm(model1, ~EW, data = columbus, studentize = F)
> bp2<-bptest.sarlm(model2, ~EW, data = columbus, studentize = F)
> bp3<-bptest.sarlm(model2, ~EW+CP+NSA, data = columbus, studentize = F)
>
> All I'm doing here is running spatially adjusted BP tests on two different
> spatial lag models.  In the first two cases, I'm just testing for groupwise
> heteroskedasticity with regimes defined in terms of the EW variable.  If I
> understand the logic of the BP test, the degrees of freedom associated with
> bp1 and bp2 should be the same, while the number of degrees of freedom
> associated with bp2 and bp3 should differ.  This doesn't seem to be the
> case.
>
> If we repeat this exercise for non-spatial models and tests, changes in the
> degrees of freedom work as expected (recognizing of course that the actual
> degrees of freedom for a non-spatial BP tests differs from the degrees of
> freedom for a spatially-adjusted BP test):
>
> library(lmtest)
> model3<-lm(CRIME~INC, data = columbus)
> model4<-lm(CRIME~INC+HOVAL, data = columbus)
> bp4<-bptest(model3, ~EW, data = columbus, studentize = F)
> bp5<-bptest(model4, ~EW, data = columbus, studentize = F)
> bp6<-bptest(model4, ~EW+CP+NSA, data = columbus, studentize = F)
>
> The bptest.sarlm routine is cribbed directly from the bptest code.  If we
> take a look a the first part of the bptest.sarlm code, we can see the
> problem (I'm using ... to denote skipped code):
>
> function (object, varformula = NULL, studentize = TRUE, data = list()) {
>    if (!inherits(object, "sarlm"))
>        stop("not sarlm object")
>    Z <- object$tarX
>    k <- ncol(Z)
>    n <- nrow(Z)
>    if (!is.null(varformula))
>        Z <- model.matrix(varformula, data = data)

Thanks, k and n should be set after the if(), not before, I think. I'll 
check and release if this seems correct.

Roger

>   ...
>    df <- k - 1
>   ...
> }
>
> It is pretty clear that df is driven by k which is unaffected by Z <-
> model.matrix(varformula, data = data), even when varformula is not null.  I
> can't see any reason why the degrees of freedom for a spatially-adjusted BP
> test would follow from the regression producing the residuals as opposed to
> the auxiliary regression.  Any help would be much appreciated.
>
> Adam
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From jgrn at illinois.edu  Fri Feb 24 16:19:39 2012
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Fri, 24 Feb 2012 09:19:39 -0600
Subject: [R-sig-Geo] HDF4 in Windows
Message-ID: <CABG0rftJgM_b+LR7uJb=zAq=9j+TXuRDmQKoCcqYdZADypWNbg@mail.gmail.com>

R-sig-geo'ers:

I'm wondering if anyone has made any progress getting hdf4 files
working (querying + extracting data) in any R package on *Windows*.  I
have some MODIS and MASTER files which use HDF that I need to open up
and would prefer to not use either an external program or the Linux
version of R.  Thoughts?

--j

-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Department of Geography
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
http://www.geog.illinois.edu/people/JonathanGreenberg.html


From janverbesselt at gmail.com  Fri Feb 24 17:47:31 2012
From: janverbesselt at gmail.com (Jan Verbesselt)
Date: Fri, 24 Feb 2012 17:47:31 +0100
Subject: [R-sig-Geo] HDF4 in Windows
In-Reply-To: <CABG0rftJgM_b+LR7uJb=zAq=9j+TXuRDmQKoCcqYdZADypWNbg@mail.gmail.com>
References: <CABG0rftJgM_b+LR7uJb=zAq=9j+TXuRDmQKoCcqYdZADypWNbg@mail.gmail.com>
Message-ID: <E186D9C0-7082-4A13-89F9-C38EC3AAE9C6@gmail.com>

Hi Jonathan,

I am using linux/mac (gdal) but did you try:
http://fwtools.maptools.org/  for windows?

Maybe you can call FWtools (gdal functions) via the:
> system() in R?

Alternatively you can use the MODIS MRT tool (windows/linux/mac) to convert to an R raster readable format.
https://lpdaac.usgs.gov/tools/modis_reprojection_tool

then use gdaltranslate() e.g. to *tif and the raster package to read the geotif.

Let us know if this helps because this will be useful for many students here,
J

Dr. ir. Jan Verbesselt
Centre for Geo-information
Wageningen University, The Netherlands
T: + 31 317 48 52 68
http://bfast.r-forge.r-project.org/
http://www.mendeley.com/profiles/jan-verbesselt/


On 24/02/2012, at 4:19 PM, Jonathan Greenberg wrote:

> R-sig-geo'ers:
> 
> I'm wondering if anyone has made any progress getting hdf4 files
> working (querying + extracting data) in any R package on *Windows*.  I
> have some MODIS and MASTER files which use HDF that I need to open up
> and would prefer to not use either an external program or the Linux
> version of R.  Thoughts?
> 
> --j
> 
> -- 
> Jonathan A. Greenberg, PhD
> Assistant Professor
> Department of Geography
> University of Illinois at Urbana-Champaign
> 607 South Mathews Avenue, MC 150
> Urbana, IL 61801
> Phone: 415-763-5476
> AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
> http://www.geog.illinois.edu/people/JonathanGreenberg.html
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From r.hijmans at gmail.com  Fri Feb 24 18:36:33 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 24 Feb 2012 09:36:33 -0800
Subject: [R-sig-Geo] Confusion with raster layers names using raster
	package
In-Reply-To: <CABkCotTL_OZ8Ar1LJ5Kp6tt3D9rxzEMdoOEuDNjx7LF7V_2+fQ@mail.gmail.com>
References: <CABkCotTL_OZ8Ar1LJ5Kp6tt3D9rxzEMdoOEuDNjx7LF7V_2+fQ@mail.gmail.com>
Message-ID: <CANtt_hw2jVAtj7C23b-RA0noiwAvZ2yZ12WxncLOWt2w4Km8+A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120224/30d9967c/attachment.pl>

From mspinola10 at gmail.com  Fri Feb 24 18:43:45 2012
From: mspinola10 at gmail.com (=?ISO-8859-1?Q?Manuel_Sp=EDnola?=)
Date: Fri, 24 Feb 2012 11:43:45 -0600
Subject: [R-sig-Geo] Confusion with raster layers names using raster
	package
In-Reply-To: <CANtt_hw2jVAtj7C23b-RA0noiwAvZ2yZ12WxncLOWt2w4Km8+A@mail.gmail.com>
References: <CABkCotTL_OZ8Ar1LJ5Kp6tt3D9rxzEMdoOEuDNjx7LF7V_2+fQ@mail.gmail.com>
	<CANtt_hw2jVAtj7C23b-RA0noiwAvZ2yZ12WxncLOWt2w4Km8+A@mail.gmail.com>
Message-ID: <CABkCotSkEQwqER2qTMu1nmqKXdpC5rL79a9Orr61eF7d=+J39g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120224/b65cc453/attachment.pl>

From massimodisasha at gmail.com  Fri Feb 24 19:00:55 2012
From: massimodisasha at gmail.com (Massimo Di Stefano)
Date: Fri, 24 Feb 2012 13:00:55 -0500
Subject: [R-sig-Geo] run R from osgeo4w as a grass-python script
Message-ID: <2C7E2821-DE9E-41A6-85FF-AA49977DA4DE@gmail.com>

Hi All,

I'm an linux user and i'm bring to develop a series of python scripts for grass 
where i'm using rpy2 to call R and require the R packages spgrass6 (rgdal sp and others).

On Linux and osx all runs as aspected .. now i need to port the script on windows .. and i'm a bit disoriented.

i'd like to use grass and python that comes with the osgeo4w installer.
I installed R, but i don't know how to use it from inside a grass session.
If I run GRASS he is not able to detect the installed R .. and also the osgeo4w python .. rpy2 is not able to detect the R installation.

Do you have any link to a guide or hints on how to  have all running in the same environment ?

Many many thanks for any help!

once i'll figure out the esiest way to do it, i'm thinking to update the grass wiki to add an 'how to' to easy run grass and R tighter trough a python grass script.


From bymanh at gmail.com  Fri Feb 24 20:57:31 2012
From: bymanh at gmail.com (Byman)
Date: Fri, 24 Feb 2012 20:57:31 +0100
Subject: [R-sig-Geo] Error levelplot+ layer(sp.polygons() +
In-Reply-To: <CANtt_hw2jVAtj7C23b-RA0noiwAvZ2yZ12WxncLOWt2w4Km8+A@mail.gmail.com>
References: <CABkCotTL_OZ8Ar1LJ5Kp6tt3D9rxzEMdoOEuDNjx7LF7V_2+fQ@mail.gmail.com>
	<CANtt_hw2jVAtj7C23b-RA0noiwAvZ2yZ12WxncLOWt2w4Km8+A@mail.gmail.com>
Message-ID: <4F47EBAB.6050201@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120224/230d42b8/attachment.pl>

From tech_dev at wildintellect.com  Sat Feb 25 00:09:42 2012
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Fri, 24 Feb 2012 15:09:42 -0800
Subject: [R-sig-Geo] run R from osgeo4w as a grass-python script
In-Reply-To: <2C7E2821-DE9E-41A6-85FF-AA49977DA4DE@gmail.com>
References: <2C7E2821-DE9E-41A6-85FF-AA49977DA4DE@gmail.com>
Message-ID: <4F4818B6.2080702@wildintellect.com>

On 02/24/2012 10:00 AM, Massimo Di Stefano wrote:
> Hi All,
>
> I'm an linux user and i'm bring to develop a series of python scripts for grass
> where i'm using rpy2 to call R and require the R packages spgrass6 (rgdal sp and others).
>
> On Linux and osx all runs as aspected .. now i need to port the script on windows .. and i'm a bit disoriented.
>
> i'd like to use grass and python that comes with the osgeo4w installer.
> I installed R, but i don't know how to use it from inside a grass session.
> If I run GRASS he is not able to detect the installed R .. and also the osgeo4w python .. rpy2 is not able to detect the R installation.
>
> Do you have any link to a guide or hints on how to  have all running in the same environment ?
>
> Many many thanks for any help!
>
> once i'll figure out the esiest way to do it, i'm thinking to update the grass wiki to add an 'how to' to easy run grass and R tighter trough a python grass script.
>

Massimo,

Taking a guess, I think you need to edit the .bat file that launches 
GRASS to ensure that it does so with R in the %PATH%. I believe many 
people have gotten the QGIS ManageR plugin to work with OSGeo4w so maybe 
there are additional hints there.

FYI, ryp2 is broken in the recent python 2.7 upgrade of osgeo4w for lack 
of a windows binary for rpy2 for said version of python.

Thank,
Alex


From tech_dev at wildintellect.com  Sat Feb 25 00:13:40 2012
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Fri, 24 Feb 2012 15:13:40 -0800
Subject: [R-sig-Geo] HDF4 in Windows
In-Reply-To: <E186D9C0-7082-4A13-89F9-C38EC3AAE9C6@gmail.com>
References: <CABG0rftJgM_b+LR7uJb=zAq=9j+TXuRDmQKoCcqYdZADypWNbg@mail.gmail.com>
	<E186D9C0-7082-4A13-89F9-C38EC3AAE9C6@gmail.com>
Message-ID: <4F4819A4.7020206@wildintellect.com>

Doesn't the rgdal binary on Windows come with gdal?
http://www.gdal.org/frmt_hdf4.html
Though it looks like that driver may be optional at compile time.

Not having seen the whole discussion of this, I assume you get some sort 
of error message trying to load with rgdal?

Thanks,
Alex

On 02/24/2012 08:47 AM, Jan Verbesselt wrote:
> Hi Jonathan,
>
> I am using linux/mac (gdal) but did you try:
> http://fwtools.maptools.org/  for windows?
>
> Maybe you can call FWtools (gdal functions) via the:
>> system() in R?
>
> Alternatively you can use the MODIS MRT tool (windows/linux/mac) to convert to an R raster readable format.
> https://lpdaac.usgs.gov/tools/modis_reprojection_tool
>
> then use gdaltranslate() e.g. to *tif and the raster package to read the geotif.
>
> Let us know if this helps because this will be useful for many students here,
> J
>
> Dr. ir. Jan Verbesselt
> Centre for Geo-information
> Wageningen University, The Netherlands
> T: + 31 317 48 52 68
> http://bfast.r-forge.r-project.org/
> http://www.mendeley.com/profiles/jan-verbesselt/
>
>
> On 24/02/2012, at 4:19 PM, Jonathan Greenberg wrote:
>
>> R-sig-geo'ers:
>>
>> I'm wondering if anyone has made any progress getting hdf4 files
>> working (querying + extracting data) in any R package on *Windows*.  I
>> have some MODIS and MASTER files which use HDF that I need to open up
>> and would prefer to not use either an external program or the Linux
>> version of R.  Thoughts?
>>
>> --j
>>
>> --
>> Jonathan A. Greenberg, PhD
>> Assistant Professor
>> Department of Geography
>> University of Illinois at Urbana-Champaign
>> 607 South Mathews Avenue, MC 150
>> Urbana, IL 61801
>> Phone: 415-763-5476
>> AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
>> http://www.geog.illinois.edu/people/JonathanGreenberg.html


From massimodisasha at gmail.com  Sat Feb 25 00:57:46 2012
From: massimodisasha at gmail.com (Massimo Di Stefano)
Date: Fri, 24 Feb 2012 18:57:46 -0500
Subject: [R-sig-Geo] run R from osgeo4w as a grass-python script
In-Reply-To: <4F4818B6.2080702@wildintellect.com>
References: <2C7E2821-DE9E-41A6-85FF-AA49977DA4DE@gmail.com>
	<4F4818B6.2080702@wildintellect.com>
Message-ID: <124F4707-2795-458A-B3E0-6DAB5149AC94@gmail.com>

Thanks Alex,

running graas7 it gives me a proper shell .. so executing the R.exe command from it i got spgrass6 running.
now i have to test if it works as aspected (i don't know if spgrass6 is compatible with grass7).

yes, as i can see there is no way to run rpy2 on windows (that's what i got from internet)
.. as hack i'm going to wrote temp file with r instructions inside and run it with R vanilla option in batch mode.

thanks for the hints, i'll dive into the egis list archive to see if someone already solved the problem with rpy2.

see you!!!

Massimo.


Il giorno Feb 24, 2012, alle ore 6:09 PM, Alex Mandel ha scritto:

> On 02/24/2012 10:00 AM, Massimo Di Stefano wrote:
>> Hi All,
>> 
>> I'm an linux user and i'm bring to develop a series of python scripts for grass
>> where i'm using rpy2 to call R and require the R packages spgrass6 (rgdal sp and others).
>> 
>> On Linux and osx all runs as aspected .. now i need to port the script on windows .. and i'm a bit disoriented.
>> 
>> i'd like to use grass and python that comes with the osgeo4w installer.
>> I installed R, but i don't know how to use it from inside a grass session.
>> If I run GRASS he is not able to detect the installed R .. and also the osgeo4w python .. rpy2 is not able to detect the R installation.
>> 
>> Do you have any link to a guide or hints on how to  have all running in the same environment ?
>> 
>> Many many thanks for any help!
>> 
>> once i'll figure out the esiest way to do it, i'm thinking to update the grass wiki to add an 'how to' to easy run grass and R tighter trough a python grass script.
>> 
> 
> Massimo,
> 
> Taking a guess, I think you need to edit the .bat file that launches GRASS to ensure that it does so with R in the %PATH%. I believe many people have gotten the QGIS ManageR plugin to work with OSGeo4w so maybe there are additional hints there.
> 
> FYI, ryp2 is broken in the recent python 2.7 upgrade of osgeo4w for lack of a windows binary for rpy2 for said version of python.
> 
> Thank,
> Alex
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From amonleong at wanadoo.es  Sat Feb 25 01:11:11 2012
From: amonleong at wanadoo.es (Toni Monleon)
Date: Sat, 25 Feb 2012 01:11:11 +0100
Subject: [R-sig-Geo] spanish environmental variables map and krige
Message-ID: <CAFFKpM0scXyeHWEmHyHAi1OAvo8cvsd=X2yGXPBd3HRSrjQWGw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120225/6b8030b6/attachment.pl>

From mspinola10 at gmail.com  Sat Feb 25 03:09:44 2012
From: mspinola10 at gmail.com (=?ISO-8859-1?Q?Manuel_Sp=EDnola?=)
Date: Fri, 24 Feb 2012 20:09:44 -0600
Subject: [R-sig-Geo] Problems with function gplot from rasterVis
Message-ID: <CABkCotSp=+W8XFXBokFvpknAJKBGDOPwUFDWka7yyeBS0K24cw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120224/b797e128/attachment.pl>

From oscar.perpinan at upm.es  Sat Feb 25 12:19:11 2012
From: oscar.perpinan at upm.es (Oscar =?utf-8?B?UGVycGnDscOhbg==?= Lamigueiro)
Date: Sat, 25 Feb 2012 12:19:11 +0100
Subject: [R-sig-Geo] Error levelplot+ layer(sp.polygons() +
In-Reply-To: <4F47EBAB.6050201@gmail.com> (Byman's message of "Fri, 24 Feb
	2012 20:57:31 +0100")
References: <CABkCotTL_OZ8Ar1LJ5Kp6tt3D9rxzEMdoOEuDNjx7LF7V_2+fQ@mail.gmail.com>
	<CANtt_hw2jVAtj7C23b-RA0noiwAvZ2yZ12WxncLOWt2w4Km8+A@mail.gmail.com>
	<4F47EBAB.6050201@gmail.com>
Message-ID: <87y5rri2j4.fsf@upm.es>

Byman <bymanh at gmail.com> writes:

> Could anyone please help me.
> I am plotting raster object (tasc) with 4 seasons: ("DJF","MAM", "JJA", 
> "SON") as layers. I get this raster from an Netcdf file. I would like to 
> add (overlay) the country polygons (afrc) on top of these 4 plots of 
> levelplot.  Levelplot function works quite ok but when I call this plot 
> (p) and plot with layer(sp.polygons(afr)), I get this error:
>
> Error in get(x, envir = this, inherits = inh)(this, ...) :
>    Need at least one of stat and geom
>
[...]
> sessionInfo()
> R version 2.14.1 (2011-12-22)
> Platform: i386-pc-mingw32/i386 (32-bit)
[...]
> other attached packages:
>   [1] maps_2.2-5          fts_0.7.7           ggplot2_0.8.9       
> proto_0.3-9.2       reshape_0.8.4
>   [6] plyr_1.7.1          ncdf_1.6.6          rasterVis_0.10-9    
> hexbin_1.26.0       latticeExtra_0.6-19
> [11] RColorBrewer_1.0-5  raster_1.9-67       maptools_0.8-14     
> lattice_0.20-3      sp_0.9-95
> [16] foreign_0.8-49
>
> loaded via a namespace (and not attached):
> [1] zoo_1.7-7

Hello,

Both ggplot2 and latticeExtra define a "layer" function. You have to
call library(latticeExtra) *after* library(ggplot2) to use the
latticeExtra::layer mechanism instead of ggplot2::layer.

Best.

Oscar

-- 
Oscar Perpi??n Lamigueiro
Dpto. de Ingenier?a El?ctrica
EUITI-UPM

http://procomun.wordpress.com


From bymanh at gmail.com  Sat Feb 25 23:29:03 2012
From: bymanh at gmail.com (Byman)
Date: Sat, 25 Feb 2012 23:29:03 +0100
Subject: [R-sig-Geo] Error levelplot+ layer(sp.polygons() +
In-Reply-To: <87y5rri2j4.fsf@upm.es>
References: <CABkCotTL_OZ8Ar1LJ5Kp6tt3D9rxzEMdoOEuDNjx7LF7V_2+fQ@mail.gmail.com>
	<CANtt_hw2jVAtj7C23b-RA0noiwAvZ2yZ12WxncLOWt2w4Km8+A@mail.gmail.com>
	<4F47EBAB.6050201@gmail.com> <87y5rri2j4.fsf@upm.es>
Message-ID: <4F4960AF.8090103@gmail.com>

Dear Oscar

Great! Many thanks, your answer helped resolve my problem. Actually I 
didnt realise that ggplot was contributing to my problem.
I just did not attach ggplot2 library, that was it. No error.

Best regards

Byman

On 25.02.2012 12:19, Oscar Perpi??n Lamigueiro wrote:
> Byman<bymanh at gmail.com>  writes:
>
>> Could anyone please help me.
>> I am plotting raster object (tasc) with 4 seasons: ("DJF","MAM", "JJA",
>> "SON") as layers. I get this raster from an Netcdf file. I would like to
>> add (overlay) the country polygons (afrc) on top of these 4 plots of
>> levelplot.  Levelplot function works quite ok but when I call this plot
>> (p) and plot with layer(sp.polygons(afr)), I get this error:
>>
>> Error in get(x, envir = this, inherits = inh)(this, ...) :
>>     Need at least one of stat and geom
>>
> [...]
>> sessionInfo()
>> R version 2.14.1 (2011-12-22)
>> Platform: i386-pc-mingw32/i386 (32-bit)
> [...]
>> other attached packages:
>>    [1] maps_2.2-5          fts_0.7.7           ggplot2_0.8.9
>> proto_0.3-9.2       reshape_0.8.4
>>    [6] plyr_1.7.1          ncdf_1.6.6          rasterVis_0.10-9
>> hexbin_1.26.0       latticeExtra_0.6-19
>> [11] RColorBrewer_1.0-5  raster_1.9-67       maptools_0.8-14
>> lattice_0.20-3      sp_0.9-95
>> [16] foreign_0.8-49
>>
>> loaded via a namespace (and not attached):
>> [1] zoo_1.7-7
> Hello,
>
> Both ggplot2 and latticeExtra define a "layer" function. You have to
> call library(latticeExtra) *after* library(ggplot2) to use the
> latticeExtra::layer mechanism instead of ggplot2::layer.
>
> Best.
>
> Oscar
>


From gianni.lavaredo at gmail.com  Sun Feb 26 12:35:50 2012
From: gianni.lavaredo at gmail.com (gianni lavaredo)
Date: Sun, 26 Feb 2012 12:35:50 +0100
Subject: [R-sig-Geo] Reading *.LAS format of LiDAR data In R
Message-ID: <CAJ6JbR85cGDc9XSTjcE3qXR7LPdzaoHKY1r-+L-N4bKiVM6TKg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120226/5dbc4d91/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Sun Feb 26 13:04:38 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sun, 26 Feb 2012 12:04:38 +0000
Subject: [R-sig-Geo] Reading *.LAS format of LiDAR data In R
In-Reply-To: <CAJ6JbR85cGDc9XSTjcE3qXR7LPdzaoHKY1r-+L-N4bKiVM6TKg@mail.gmail.com>
References: <CAJ6JbR85cGDc9XSTjcE3qXR7LPdzaoHKY1r-+L-N4bKiVM6TKg@mail.gmail.com>
Message-ID: <CANVKczPChKfP7SLY3szMndyqcU4XpspEL_wgC9yPNhBUmGCO9Q@mail.gmail.com>

On Sun, Feb 26, 2012 at 11:35 AM, gianni lavaredo
<gianni.lavaredo at gmail.com> wrote:
> Dear Researchers,
>
> is there some library to read *.LAS file format in R ?to import LiDAR data?
>
> Thanks for all suggestions

 Any chance of a pointer to a sample file, or the spec document? It
might be trivial...

 Or not.

Barry


From rhurlin at gwdg.de  Sun Feb 26 14:36:47 2012
From: rhurlin at gwdg.de (Rainer Hurling)
Date: Sun, 26 Feb 2012 14:36:47 +0100
Subject: [R-sig-Geo] Reading *.LAS format of LiDAR data In R
In-Reply-To: <CAJ6JbR85cGDc9XSTjcE3qXR7LPdzaoHKY1r-+L-N4bKiVM6TKg@mail.gmail.com>
References: <CAJ6JbR85cGDc9XSTjcE3qXR7LPdzaoHKY1r-+L-N4bKiVM6TKg@mail.gmail.com>
Message-ID: <4F4A356F.60402@gwdg.de>

On 26.02.2012 12:35 (UTC+1), gianni lavaredo wrote:
> Dear Researchers,
>
> is there some library to read *.LAS file format in R  to import LiDAR data?

Do you really need the data within R or is it more important to process 
them with R? For the second, one way is using package RSAGA, if SAGA GIS 
is installed on your system, see http://www.saga-gis.org .

RSAGA is some kind of a wrapper (and much more) for using the modules of 
SAGA GIS. With 'rsaga.get.libraries()' you will get a list of available 
SAGA GIS module libraries. In this list you should find 'io_shapes_las'. 
If not, you have to reconfigure and rebuild your SAGA GIS installation.

If module library "io_shapes_las" exists, you can ask this library for 
its modules:


#rsaga.get.modules(c("io_shapes_las"))
error: module
$io_shapes_las
   code             name interactive
1    0 Export LAS Files       FALSE
2    1 Import LAS Files       FALSE
3    2         LAS Info       FALSE


This module library contains three modules. The one with code 1 should 
be the right in your case. The error message is nonrelevant like in the 
subsequent items.
In a next step you can ask this module (Import LAS Files) for its 
parameters and options:


#rsaga.get.usage("io_shapes_las",1)
Unknown option 'h'
Usage: saga_cmd [-POINTS <str>] [-FILE <str>] [-T] [-i] [-a] [-r] [-c] 
[-u] [-n] [-R] [-G] [-B] [-e] [-d] [-p] [-C] [-VALID] [-RGB_RANGE <str>]
   -POINTS:<str>         Point Cloud
         Data Object (optional output)
   -FILE:<str>           Input File
         File path
   -T                    gps-time
         Boolean
   -i                    intensity
         Boolean
   -a                    scan angle
         Boolean
   -r                    number of the return
         Boolean
   -c                    classification
         Boolean
   -u                    user data
         Boolean
   -n                    number of returns of given pulse
         Boolean
   -R                    red channel color
         Boolean
   -G                    green channel color
         Boolean
   -B                    blue channel color
         Boolean
   -e                    edge of flight line flag
         Boolean
   -d                    direction of scan flag
         Boolean
   -p                    point source ID
         Boolean
   -C                    rgb color
         Boolean
   -VALID                Check Point Validity
         Boolean
   -RGB_RANGE:<str>      R,G,B value range
         Choice
         Available Choices:
         [0] 16 bit
         [1] 8 bit

error: executing module [Import LAS Files]
library path:   /usr/local/lib/saga
library name:   libio_shapes_las
module name :   Import LAS Files


 From here on it depends on your data how to proceed. You will find nice 
example in the help pages of RSAGA.

Hope this helps,
Rainer


> Thanks for all suggestions
> Gianni


From gianni.lavaredo at gmail.com  Sun Feb 26 15:03:58 2012
From: gianni.lavaredo at gmail.com (gianni lavaredo)
Date: Sun, 26 Feb 2012 15:03:58 +0100
Subject: [R-sig-Geo] count how many row i have in a txt file in a directory
Message-ID: <CAJ6JbR9RZApgPQZowxmeCv0mzMPjERmnns55fnvXxBfrtCZwmg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120226/8747b2d8/attachment.pl>

From hengl at spatial-analyst.net  Sun Feb 26 15:40:04 2012
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Sun, 26 Feb 2012 15:40:04 +0100
Subject: [R-sig-Geo] spanish environmental variables map and krige
In-Reply-To: <CAFFKpM0scXyeHWEmHyHAi1OAvo8cvsd=X2yGXPBd3HRSrjQWGw@mail.gmail.com>
References: <CAFFKpM0scXyeHWEmHyHAi1OAvo8cvsd=X2yGXPBd3HRSrjQWGw@mail.gmail.com>
Message-ID: <4F4A4444.2090302@spatial-analyst.net>



On 25/02/2012 01:11, Toni Monleon wrote:
> Hi All,
>
> I' d like to do a map to represent biodiversity  in Spain and Portugal
> using library "dismo" and represent also some other continous variables
> like temperature and rain:
>
> library(dismo)
> lacerta<- gbif("Lacerta", geo=TRUE)
>
> library(maps)
> library(maptools)
> library(mapdata)
>
>
> m<- map('worldHires', regions=c('Spain', 'Portugal'), exact=T,
> interior=FALSE, col="grey")
> area.map(m)
>
> points(lacerta$lon, lacerta$lat, cex=1.5, pch=19, col="blue")
>
>
>
>> Do you have any link to a guide or hints on how to  add environmental
>> variables: rain, temperature, climate, elevation, etc from Spain or/and
>> Europe?

multi-thematic 5-km resolution data is available from:

http://spatial-analyst.net/worldmaps/

*currently slowly being migrated to www.worldgrids.org

HTH,

T. Hengl

>>
>    Another question is how to add environmental variables to this map and do
> a krige?

see: http://spatial-analyst.net/book/GstatIntro

>
>>
>> Many many thanks for any help!
>>
>> Toni Monle?n
>>
> Departament of Statistics
> University of Barcelona
>
> ______________________________
>>
>> _________________
>> R-sig-Geo mailing list
>>
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> 	[[alternative HTML version deleted]]
>
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From cebulmer at telus.net  Sun Feb 26 18:04:05 2012
From: cebulmer at telus.net (Chuck)
Date: Sun, 26 Feb 2012 09:04:05 -0800
Subject: [R-sig-Geo] rsaga multi.local.function
Message-ID: <000301ccf4a8$a5abbb00$f1033100$@telus.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120226/c69c30ec/attachment.pl>

From gregor.hochschild at gmx.de  Sun Feb 26 18:24:16 2012
From: gregor.hochschild at gmx.de (gregor.hochschild at gmx.de)
Date: Sun, 26 Feb 2012 18:24:16 +0100
Subject: [R-sig-Geo] convert shapefile with Lambert Projection to longitude
	+ latitude
Message-ID: <20120226172416.130570@gmx.net>

Hi,

I am not sure whether I am expressing myself correctly but I have the following problem:
The shapefile I have is in Lambert Conformal Conic with coordinates like this (I not even sure whether the Lambert projection is the problem):
       min       max
x 913175.1 1067382.5
y 120121.9  272844.3

Plotting works fine but now I want to add points based on longitude and latitude (NYC area around -73 and 40). 

How can I convert my shapefile to longitude and latitude coordinates? Or alternatively, how can I convert my point locations?


Thanks!



The shapefile is from here: 
http://www.nyc.gov/html/dcp/html/bytes/dwndistricts.shtml
(NYC Census Track 2010 file)

Here are more information about the shapefile: 
http://www.nyc.gov/html/dcp/html/bytes/meta_dis_censustracts2010.shtml

Map Projection Name: Lambert Conformal Conic
Lambert Conformal Conic:
Standard Parallel: 40.666667
Standard Parallel: 41.033333
Longitude of Central Meridian: -74.000000
Latitude of Projection Origin: 40.166667
False Easting: 984250.000000
False Northing: 0.000000
--


From rhurlin at gwdg.de  Sun Feb 26 19:46:02 2012
From: rhurlin at gwdg.de (Rainer Hurling)
Date: Sun, 26 Feb 2012 19:46:02 +0100
Subject: [R-sig-Geo] count how many row i have in a txt file in a
	directory
In-Reply-To: <CAJ6JbR9RZApgPQZowxmeCv0mzMPjERmnns55fnvXxBfrtCZwmg@mail.gmail.com>
References: <CAJ6JbR9RZApgPQZowxmeCv0mzMPjERmnns55fnvXxBfrtCZwmg@mail.gmail.com>
Message-ID: <4F4A7DEA.10909@gwdg.de>

On 26.02.2012 15:03 (UTC+1), gianni lavaredo wrote:
> Dear Researchers,
>
> I have a large TXT (X,Y,MyValue) file in a directory and I wish to import
> row by row the txt in a loop to save only the data they are inside a buffer
> (using inside.owin of spatstat) and delete the rest. The first step before
> to create a loop row-by-row is to know how many rows there are in the txt
> file without load in R to save memory problem.

If I remember right from another thread, you are on Max OSX?

If so, you could try Unix alike commands like 'wc' (word count) with 
option 'l' for lines:

#as.numeric(unlist(strsplit(system("wc -l file.txt", intern=TRUE), 
split=" "))[2])

I suspect, there must be other, much more elegant methods ...

Rainer

> some people know the specific function?
>
> thanks in advance for all suggestions
> Gianni


From lyndon.estes at gmail.com  Sun Feb 26 20:58:49 2012
From: lyndon.estes at gmail.com (Lyndon Estes)
Date: Sun, 26 Feb 2012 14:58:49 -0500
Subject: [R-sig-Geo] convert shapefile with Lambert Projection to
 longitude + latitude
In-Reply-To: <20120226172416.130570@gmx.net>
References: <20120226172416.130570@gmx.net>
Message-ID: <CALuVVabikyO5h8JovnO+1=pdr98S_5mkrEmxxb6=VSjJDUT76g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120226/a557a640/attachment.pl>

From mdsumner at gmail.com  Sun Feb 26 21:00:34 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Mon, 27 Feb 2012 07:00:34 +1100
Subject: [R-sig-Geo] Reading *.LAS format of LiDAR data In R
In-Reply-To: <CANVKczPChKfP7SLY3szMndyqcU4XpspEL_wgC9yPNhBUmGCO9Q@mail.gmail.com>
References: <CAJ6JbR85cGDc9XSTjcE3qXR7LPdzaoHKY1r-+L-N4bKiVM6TKg@mail.gmail.com>
	<CANVKczPChKfP7SLY3szMndyqcU4XpspEL_wgC9yPNhBUmGCO9Q@mail.gmail.com>
Message-ID: <CAAcGz9_95euCnq0=j=SZHwJ=EVPm4=m5Ly5EXLMaosW2+UD6zg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120227/d14db44a/attachment.pl>

From r.hijmans at gmail.com  Sun Feb 26 21:15:14 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sun, 26 Feb 2012 12:15:14 -0800
Subject: [R-sig-Geo] count how many row i have in a txt file in a
	directory
In-Reply-To: <CAJ6JbR9RZApgPQZowxmeCv0mzMPjERmnns55fnvXxBfrtCZwmg@mail.gmail.com>
References: <CAJ6JbR9RZApgPQZowxmeCv0mzMPjERmnns55fnvXxBfrtCZwmg@mail.gmail.com>
Message-ID: <CANtt_hwJ6DyKD_rmVpjOv2jz5803LaCakmCNFn0NPX9eibjhRw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120226/b912fbc7/attachment.pl>

From HodgessE at uhd.edu  Sun Feb 26 21:24:25 2012
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Sun, 26 Feb 2012 14:24:25 -0600
Subject: [R-sig-Geo] an ArcGIS question
Message-ID: <586A4828D7AAA04CA9B258C50A28DA200BF58E5C@BALI.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120226/6af30b9d/attachment.pl>

From alobolistas at gmail.com  Sun Feb 26 23:10:08 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Sun, 26 Feb 2012 23:10:08 +0100
Subject: [R-sig-Geo] writeGDAL: pseudocolor image?
Message-ID: <CAG4NReJ-Vq3zkkguAEo11owEOJvPcGrhPWEo1GRtOVFNkRNM4w@mail.gmail.com>

Hi!
Is it possible to write a pseudocolor image as a  geotif with embedded
color table using
writeGDAL() or any other R command?
I mean an image such as:

$ gdalinfo pseudocolorv2.tif
Driver: GTiff/GeoTIFF
Files: pseudocolorv2.tif
       pseudocolorv2.tif.aux.xml
Size is 217, 232
Coordinate System is `'
Metadata:
  TIFFTAG_IMAGEDESCRIPTION=ImageJ=1.43l

Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  232.0)
Upper Right (  217.0,    0.0)
Lower Right (  217.0,  232.0)
Center      (  108.5,  116.0)
Band 1 Block=217x37 Type=Byte, ColorInterp=Palette
  Min=0.000 Max=255.000
  Minimum=0.000, Maximum=255.000, Mean=116.873, StdDev=70.651
  Metadata:
    STATISTICS_MAXIMUM=255
    STATISTICS_MEAN=116.87251708247
    STATISTICS_MINIMUM=0
    STATISTICS_STDDEV=70.651436875893
  Color Table (RGB with 256 entries)
    0: 0,6,21,255
    1: 0,13,98,255
...
255: 67,142,93,255

Thanks,

Agus


From amonleong at wanadoo.es  Mon Feb 27 10:59:06 2012
From: amonleong at wanadoo.es (TM)
Date: Mon, 27 Feb 2012 10:59:06 +0100
Subject: [R-sig-Geo] spanish environmental variables map and krige
In-Reply-To: <4F4A4444.2090302@spatial-analyst.net>
References: <CAFFKpM0scXyeHWEmHyHAi1OAvo8cvsd=X2yGXPBd3HRSrjQWGw@mail.gmail.com>
	<4F4A4444.2090302@spatial-analyst.net>
Message-ID: <68DEC49FFFC24E7B829E4C6EC3C23655@ub.edu>

DearTomislav,

Thank you very much for your help.

Toni


----- Original Message ----- 
From: "Tomislav Hengl" <hengl at spatial-analyst.net>
To: <R-sig-Geo at r-project.org>
Sent: Sunday, February 26, 2012 3:40 PM
Subject: Re: [R-sig-Geo] spanish environmental variables map and krige


>
>
> On 25/02/2012 01:11, Toni Monleon wrote:
>> Hi All,
>>
>> I' d like to do a map to represent biodiversity  in Spain and Portugal
>> using library "dismo" and represent also some other continous variables
>> like temperature and rain:
>>
>> library(dismo)
>> lacerta<- gbif("Lacerta", geo=TRUE)
>>
>> library(maps)
>> library(maptools)
>> library(mapdata)
>>
>>
>> m<- map('worldHires', regions=c('Spain', 'Portugal'), exact=T,
>> interior=FALSE, col="grey")
>> area.map(m)
>>
>> points(lacerta$lon, lacerta$lat, cex=1.5, pch=19, col="blue")
>>
>>
>>
>>> Do you have any link to a guide or hints on how to  add environmental
>>> variables: rain, temperature, climate, elevation, etc from Spain or/and
>>> Europe?
>
> multi-thematic 5-km resolution data is available from:
>
> http://spatial-analyst.net/worldmaps/
>
> *currently slowly being migrated to www.worldgrids.org
>
> HTH,
>
> T. Hengl
>
>>>
>>    Another question is how to add environmental variables to this map and 
>> do
>> a krige?
>
> see: http://spatial-analyst.net/book/GstatIntro
>
>>
>>>
>>> Many many thanks for any help!
>>>
>>> Toni Monle?n
>>>
>> Departament of Statistics
>> University of Barcelona
>>
>> ______________________________
>>>
>>> _________________
>>> R-sig-Geo mailing list
>>>
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> [[alternative HTML version deleted]]
>>
>>
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From Hans.Gardfjell at slu.se  Mon Feb 27 11:09:56 2012
From: Hans.Gardfjell at slu.se (Hans Gardfjell)
Date: Mon, 27 Feb 2012 11:09:56 +0100
Subject: [R-sig-Geo] Reading *.LAS format of LiDAR data In R
In-Reply-To: <CAAcGz9_95euCnq0=j=SZHwJ=EVPm4=m5Ly5EXLMaosW2+UD6zg@mail.gmail.com>
References: <CAJ6JbR85cGDc9XSTjcE3qXR7LPdzaoHKY1r-+L-N4bKiVM6TKg@mail.gmail.com>
	<CANVKczPChKfP7SLY3szMndyqcU4XpspEL_wgC9yPNhBUmGCO9Q@mail.gmail.com>
	<CAAcGz9_95euCnq0=j=SZHwJ=EVPm4=m5Ly5EXLMaosW2+UD6zg@mail.gmail.com>
Message-ID: <0CF27A9CBFAC8F4DBB90BBD1BCD0D62C6C3470E1B9@exmbx2.ad.slu.se>

Hi,

At our department we are using LiDAR data for many different purposes. To simplify import into R one of my colleagues are working on a R package that allows the use of the C++ libLas library from within R. It is still under (early) development, but it compiles under Linux and MacOS and allows for basic import of subsets of data from multiple .las files.

I guess you can contact him if you're interested. Try this (slightly obfuscated) mail address peder.axensten AT slu.se.

Best regards,
Hans Gardfjell

***********************************
Hans Gardfjell
Monitoring of terrestrial habitats (LIFE+ MOTH)
Department of forest resource management
Swedish university of agricultural sciences
Ume?, Sweden
***********************************


-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Michael Sumner
Sent: Sunday, February 26, 2012 21:01
To: Barry Rowlingson
Cc: r-sig-geo at stat.math.ethz.ch
Subject: Re: [R-sig-Geo] Reading *.LAS format of LiDAR data In R

There is this, use at your own risk:

https://stat.ethz.ch/pipermail/r-sig-geo/2010-June/008423.html

On Sunday, February 26, 2012, Barry Rowlingson <b.rowlingson at lancaster.ac.uk>
wrote:
> On Sun, Feb 26, 2012 at 11:35 AM, gianni lavaredo 
> <gianni.lavaredo at gmail.com> wrote:
>> Dear Researchers,
>>
>> is there some library to read *.LAS file format in R  to import LiDAR
data?
>>
>> Thanks for all suggestions
>
>  Any chance of a pointer to a sample file, or the spec document? It 
> might be trivial...
>
>  Or not.
>
> Barry
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

--
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania Hobart, Australia
e-mail: mdsumner at gmail.com

	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From pep.bioalerts at gmail.com  Mon Feb 27 11:16:05 2012
From: pep.bioalerts at gmail.com (Josep M Serra diaz)
Date: Mon, 27 Feb 2012 11:16:05 +0100
Subject: [R-sig-Geo] spanish environmental variables map and krige
In-Reply-To: <68DEC49FFFC24E7B829E4C6EC3C23655@ub.edu>
References: <CAFFKpM0scXyeHWEmHyHAi1OAvo8cvsd=X2yGXPBd3HRSrjQWGw@mail.gmail.com>
	<4F4A4444.2090302@spatial-analyst.net>
	<68DEC49FFFC24E7B829E4C6EC3C23655@ub.edu>
Message-ID: <CAF8H1df+22Aeea31R6HyfswydYD+WgR5R5_AL_KA_Ku5knXhkQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120227/ca8b9327/attachment.pl>

From paul.hiemstra at knmi.nl  Mon Feb 27 11:22:35 2012
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Mon, 27 Feb 2012 10:22:35 +0000
Subject: [R-sig-Geo] an ArcGIS question
In-Reply-To: <586A4828D7AAA04CA9B258C50A28DA200BF58E5C@BALI.uhd.campus>
References: <586A4828D7AAA04CA9B258C50A28DA200BF58E5C@BALI.uhd.campus>
Message-ID: <4F4B596B.9000002@knmi.nl>

On 02/26/2012 08:24 PM, Hodgess, Erin wrote:
> Hi R Sig Geo People:
>
> May I ask an ArcGIS question here, or should I try to find an ArcGIS group, please?
>
>
>
> Erin M. Hodgess, PhD
> Associate Professor
> Department of Computer and Mathematical Sciences
> University of Houston - Downtown
> mailto: hodgesse at uhd.edu
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Hi Erin,

This is the *R* sig geo, so I think only if there is some R involved
(coupling ArcGIS and R, comparing outcomes between ArcGIS and R, how can
I do this ArcGIS operation in R, etc) I would consider it off topic. I
would recommend posting your question on gis.stackexchange.com. It is
dedicated to GIS and there are a lot of ArcGIS questions there (and also
a lot of know how I assume).

good luck,
Paul

-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From paul.hiemstra at knmi.nl  Mon Feb 27 11:27:11 2012
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Mon, 27 Feb 2012 10:27:11 +0000
Subject: [R-sig-Geo] fortify.SpatialPolygonsDataFrame error
In-Reply-To: <DUB108-W4485F4BB70523EBA97A5B0ED650@phx.gbl>
References: <DUB108-W4485F4BB70523EBA97A5B0ED650@phx.gbl>
Message-ID: <4F4B5A7F.90700@knmi.nl>

On 02/23/2012 04:48 PM, marion le texier wrote:
> Hi everyone, 
>
> I would like to know if someone of you has already got troubles when trying to use ggplot2 with a shape file?
> Here is what I've done:
>
> NUTS1<-readShapeSpatial("nuts1_2003", proj4string=CRS(projargs=("+init=epsg:3035")),IDvar="NUTS1")
> plot(NUTS1)
>
> NUTS1 at data$id <- rownames(NUTS1 at data) 
>
> # as codes are characters and not numeric values, I've changed them into:
>
> test<-as.numeric(seq(1:94))
> NUTS1 at data$id<-test
>
> NUTS1.points <- fortify.SpatialPolygonsDataFrame(NUTS1, region="id")
>
> # The function doesn't want to be applied and I get this error message:
>
> Erreur dans unionSpatialPolygons(cp, invert(polys)) : input lengths differ
> De plus : Message d'avis :
> In split(as.numeric(row.names(attr)), addNA(attr[, region], TRUE)) :
>   NAs introduits lors de la conversion automatique
>
> (sorry for the French comments...)
>
>
> # What I would like to do at the end is :
>
> NUTS1.map <- ggplot()+geom_polygon(data=NUTS1.points, aes(long, lat, group=group), fill=NA, colour="black") + coord_map()
>
>
> Do you have any idea of what I'm doing wrong?
>
> Thanks you very much for your help!!!
> Marion
>
>  		 	   		  
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Hi Marion,

I have used fortify succesfully many times, so without a reproducible
example which reproduces your error, I have a hard time helping you.
Some notes:

- Try fortify(NUTS1, region = "id") on the unaltered NUTS1 object, i.e.
just after calling readShapeSpatial. If this works, the problem is not
in fortify, but in your code.
- There is no need to call fortify.SpatialPolygonsDataFrame explicitely,
fortify(NUTS1, region = "id") will do the job. The function will deduce
from its input object that it need to use fortify.SpatialPolygonsDataFrame.

good luck,
Paul

-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From paul.hiemstra at knmi.nl  Mon Feb 27 11:28:18 2012
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Mon, 27 Feb 2012 10:28:18 +0000
Subject: [R-sig-Geo] an ArcGIS question
In-Reply-To: <4F4B596B.9000002@knmi.nl>
References: <586A4828D7AAA04CA9B258C50A28DA200BF58E5C@BALI.uhd.campus>
	<4F4B596B.9000002@knmi.nl>
Message-ID: <4F4B5AC2.4010003@knmi.nl>

On 02/27/2012 10:22 AM, Paul Hiemstra wrote:
> On 02/26/2012 08:24 PM, Hodgess, Erin wrote:
>> Hi R Sig Geo People:
>>
>> May I ask an ArcGIS question here, or should I try to find an ArcGIS group, please?
>>
>>
>>
>> Erin M. Hodgess, PhD
>> Associate Professor
>> Department of Computer and Mathematical Sciences
>> University of Houston - Downtown
>> mailto: hodgesse at uhd.edu
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> Hi Erin,
>
> This is the *R* sig geo, so I think only if there is some R involved
> (coupling ArcGIS and R, comparing outcomes between ArcGIS and R, how can
> I do this ArcGIS operation in R, etc) I would consider it off topic.

I meant *on* topic here, sorry...

Paul

>  I
> would recommend posting your question on gis.stackexchange.com. It is
> dedicated to GIS and there are a lot of ArcGIS questions there (and also
> a lot of know how I assume).
>
> good luck,
> Paul
>


-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From despina.tg at gmail.com  Mon Feb 27 11:29:46 2012
From: despina.tg at gmail.com (despina_tg)
Date: Mon, 27 Feb 2012 02:29:46 -0800 (PST)
Subject: [R-sig-Geo] Data point coordinates from kernel home range estimation
Message-ID: <1330338586590-7321371.post@n2.nabble.com>

Hello, 

I'm very new in working on R and maybe that's a simple thing I'm trying to
do, but I am really stuck. 

I have  a data point set of animal tracking coordinates and I have
implemented a kernel utilization distribution analysis in order to find the
home range for 95% of the relocation data. I have used the ud.kde() and
hr.kde() functions of the "wild1" package, so I have a number of polygons
(peaks of kernel density) as an object of the following class: 

> class(homerange) 
[1] "Polygons" 
attr(,"package") 
[1] "sp" 

My question is how can I extract the point coordinates within each
polygon-circle? Because, the home range coordinates are arbitrary points
contouring the real data points. 

Hope it's clear, 

Despina

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Data-point-coordinates-from-kernel-home-range-estimation-tp7321371p7321371.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From babuawara at gmail.com  Mon Feb 27 11:56:55 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Mon, 27 Feb 2012 11:56:55 +0100
Subject: [R-sig-Geo] writeGDAL: pseudocolor image?
In-Reply-To: <CAG4NReJ-Vq3zkkguAEo11owEOJvPcGrhPWEo1GRtOVFNkRNM4w@mail.gmail.com>
References: <CAG4NReJ-Vq3zkkguAEo11owEOJvPcGrhPWEo1GRtOVFNkRNM4w@mail.gmail.com>
Message-ID: <4F4B6177.308@gmail.com>

Hello Agus,
Have you tried writeRaster() command from raster package?
I have tried it and it works wonderfully. I have tried it like this
octstack<-stack(croctb1,croctb2,croctb3,croctb4,croctb5,croctb7)
writeRaster(octstack,"H:/....../map_oct.tif", overwrite=T)
you can also write *.img and a number of other formats, check out raster 
package.

I hope it would help.
Good luck.
Vikram.

On 2/26/2012 11:10 PM, Agustin Lobo wrote:
> Hi!
> Is it possible to write a pseudocolor image as a  geotif with embedded
> color table using
> writeGDAL() or any other R command?
> I mean an image such as:
>
> $ gdalinfo pseudocolorv2.tif
> Driver: GTiff/GeoTIFF
> Files: pseudocolorv2.tif
>         pseudocolorv2.tif.aux.xml
> Size is 217, 232
> Coordinate System is `'
> Metadata:
>    TIFFTAG_IMAGEDESCRIPTION=ImageJ=1.43l
>
> Image Structure Metadata:
>    INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  232.0)
> Upper Right (  217.0,    0.0)
> Lower Right (  217.0,  232.0)
> Center      (  108.5,  116.0)
> Band 1 Block=217x37 Type=Byte, ColorInterp=Palette
>    Min=0.000 Max=255.000
>    Minimum=0.000, Maximum=255.000, Mean=116.873, StdDev=70.651
>    Metadata:
>      STATISTICS_MAXIMUM=255
>      STATISTICS_MEAN=116.87251708247
>      STATISTICS_MINIMUM=0
>      STATISTICS_STDDEV=70.651436875893
>    Color Table (RGB with 256 entries)
>      0: 0,6,21,255
>      1: 0,13,98,255
> ...
> 255: 67,142,93,255
>
> Thanks,
>
> Agus
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From gregor.hochschild at gmx.de  Mon Feb 27 12:32:43 2012
From: gregor.hochschild at gmx.de (gregor.hochschild at gmx.de)
Date: Mon, 27 Feb 2012 12:32:43 +0100
Subject: [R-sig-Geo] installing rgdal on linux without root access
Message-ID: <20120227113243.50290@gmx.net>

Hi, I am trying to install rgdal on a server without root access. I managed to compile proj.4 and gdal from source placing them in ~/libs using DESTDIR in make install. I am unable, however, to install rgdal using this command:

R CMD INSTALL --configure-args='
--with-gdal-config=~/libs/gdal/usr/local/bin/gdal-config 
--with-proj-include=~/libs/proj4/usr/local/include 
--with-proj-lib=~/libs/proj4/usr/local/lib' 
rgdal_0.7-8.tar.gz -l ~/R-libs

(Note: I am actually using the hard coded location and not ~, added the spaces for readability, and tried with and without -l ~/R-libs)

I am getting a long list of errors (see part of the output below). Any suggestions?


Thanks! 




...
checking for proj_api.h... yes
checking for pj_init_plus in -lproj... yes
/usr/bin/ld: cannot find -lgdal
collect2: ld returned 1 exit status
./configure: line 3366: ./proj_conf_test: No such file or directory
PROJ.4 Version 4.7 or earlier
/usr/bin/ld: cannot find -lgdal
collect2: ld returned 1 exit status
./configure: line 3409: ./proj_conf_test: No such file or directory
/usr/bin/ld: cannot find -lgdal
collect2: ld returned 1 exit status
....
OGR_write.cpp:26: error: ?OGRSFDriver? was not declared in this scope
... (long list of these scope errors)...

--


From alobolistas at gmail.com  Mon Feb 27 12:49:04 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Mon, 27 Feb 2012 12:49:04 +0100
Subject: [R-sig-Geo] writeGDAL: pseudocolor image?
In-Reply-To: <4F4B6177.308@gmail.com>
References: <CAG4NReJ-Vq3zkkguAEo11owEOJvPcGrhPWEo1GRtOVFNkRNM4w@mail.gmail.com>
	<4F4B6177.308@gmail.com>
Message-ID: <CAG4NReKnV27jaWt8K=UvAOBme9D8tYRNMEScUuP9cPjERFmCqA@mail.gmail.com>

Thanks Vikram,

But that would be a multiband image, not a pseucolor image. I need
a single layer image including its colortable in the same file (i.e. a
temperature field
represented in color such as
https://sites.google.com/site/filestemp2/home/pseudocolorv2.tif  ).
Regards,

Agus

El d?a 27 de febrero de 2012 11:56, Vikram Ranga <babuawara at gmail.com> escribi?:
> Hello Agus,
> Have you tried writeRaster() command from raster package?
> I have tried it and it works wonderfully. I have tried it like this
> octstack<-stack(croctb1,croctb2,croctb3,croctb4,croctb5,croctb7)
> writeRaster(octstack,"H:/....../map_oct.tif", overwrite=T)
> you can also write *.img and a number of other formats, check out raster
> package.
>
> I hope it would help.
> Good luck.
> Vikram.
>
>
> On 2/26/2012 11:10 PM, Agustin Lobo wrote:
>>
>> Hi!
>> Is it possible to write a pseudocolor image as a ?geotif with embedded
>> color table using
>> writeGDAL() or any other R command?
>> I mean an image such as:
>>
>> $ gdalinfo pseudocolorv2.tif
>> Driver: GTiff/GeoTIFF
>> Files: pseudocolorv2.tif
>> ? ? ? ?pseudocolorv2.tif.aux.xml
>> Size is 217, 232
>> Coordinate System is `'
>> Metadata:
>> ? TIFFTAG_IMAGEDESCRIPTION=ImageJ=1.43l
>>
>> Image Structure Metadata:
>> ? INTERLEAVE=BAND
>> Corner Coordinates:
>> Upper Left ?( ? ?0.0, ? ?0.0)
>> Lower Left ?( ? ?0.0, ?232.0)
>> Upper Right ( ?217.0, ? ?0.0)
>> Lower Right ( ?217.0, ?232.0)
>> Center ? ? ?( ?108.5, ?116.0)
>> Band 1 Block=217x37 Type=Byte, ColorInterp=Palette
>> ? Min=0.000 Max=255.000
>> ? Minimum=0.000, Maximum=255.000, Mean=116.873, StdDev=70.651
>> ? Metadata:
>> ? ? STATISTICS_MAXIMUM=255
>> ? ? STATISTICS_MEAN=116.87251708247
>> ? ? STATISTICS_MINIMUM=0
>> ? ? STATISTICS_STDDEV=70.651436875893
>> ? Color Table (RGB with 256 entries)
>> ? ? 0: 0,6,21,255
>> ? ? 1: 0,13,98,255
>> ...
>> 255: 67,142,93,255
>>
>> Thanks,
>>
>> Agus
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From b.rowlingson at lancaster.ac.uk  Mon Feb 27 12:55:38 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 27 Feb 2012 11:55:38 +0000
Subject: [R-sig-Geo] writeGDAL: pseudocolor image?
In-Reply-To: <CAG4NReKnV27jaWt8K=UvAOBme9D8tYRNMEScUuP9cPjERFmCqA@mail.gmail.com>
References: <CAG4NReJ-Vq3zkkguAEo11owEOJvPcGrhPWEo1GRtOVFNkRNM4w@mail.gmail.com>
	<4F4B6177.308@gmail.com>
	<CAG4NReKnV27jaWt8K=UvAOBme9D8tYRNMEScUuP9cPjERFmCqA@mail.gmail.com>
Message-ID: <CANVKczP2K0nk+Q5S8N5WU7y_D3K3QR6T2J7pWhFppFNiJZU3yw@mail.gmail.com>

On Mon, Feb 27, 2012 at 11:49 AM, Agustin Lobo <alobolistas at gmail.com> wrote:
> Thanks Vikram,
>
> But that would be a multiband image, not a pseucolor image. I need
> a single layer image including its colortable in the same file (i.e. a
> temperature field
> represented in color such as
> https://sites.google.com/site/filestemp2/home/pseudocolorv2.tif ?).

 Agus,

 have you got a link to the original tif of that image, because that
link is actually a jpeg with a .tif extension.

Barry


From chrjan70 at gmail.com  Mon Feb 27 13:27:09 2012
From: chrjan70 at gmail.com (Christian Jansson)
Date: Mon, 27 Feb 2012 09:27:09 -0300
Subject: [R-sig-Geo] Filled polygon borders.
Message-ID: <CAAHdiqx06gafL3H1ridJz+B3CBZxZOUkhWtt7XkuV_NeESyt2g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120227/a0a8de9c/attachment.pl>

From paul.hiemstra at knmi.nl  Mon Feb 27 13:35:08 2012
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Mon, 27 Feb 2012 12:35:08 +0000
Subject: [R-sig-Geo] installing rgdal on linux without root access
In-Reply-To: <20120227113243.50290@gmx.net>
References: <20120227113243.50290@gmx.net>
Message-ID: <4F4B787C.1020503@knmi.nl>

On 02/27/2012 11:32 AM, gregor.hochschild at gmx.de wrote:
> Hi, I am trying to install rgdal on a server without root access. I managed to compile proj.4 and gdal from source placing them in ~/libs using DESTDIR in make install. I am unable, however, to install rgdal using this command:
>
> R CMD INSTALL --configure-args='
> --with-gdal-config=~/libs/gdal/usr/local/bin/gdal-config 
> --with-proj-include=~/libs/proj4/usr/local/include 
> --with-proj-lib=~/libs/proj4/usr/local/lib' 
> rgdal_0.7-8.tar.gz -l ~/R-libs
>
> (Note: I am actually using the hard coded location and not ~, added the spaces for readability, and tried with and without -l ~/R-libs)
>
> I am getting a long list of errors (see part of the output below). Any suggestions?
>
>
> Thanks! 
>
>
>
>
> ...
> checking for proj_api.h... yes
> checking for pj_init_plus in -lproj... yes
> /usr/bin/ld: cannot find -lgdal
> collect2: ld returned 1 exit status
> ./configure: line 3366: ./proj_conf_test: No such file or directory
> PROJ.4 Version 4.7 or earlier
> /usr/bin/ld: cannot find -lgdal
> collect2: ld returned 1 exit status
> ./configure: line 3409: ./proj_conf_test: No such file or directory
> /usr/bin/ld: cannot find -lgdal
> collect2: ld returned 1 exit status
> ....
> OGR_write.cpp:26: error: ?OGRSFDriver? was not declared in this scope
> ... (long list of these scope errors)...
>
> --
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
Hi Gregor,

I never use DESTDIR, but the --prefix command of ./configure:

./configure --prefix=~/myownstuff/

This creates a bin, lib, share etc directory under ~/myownstuff.  Then
you need to edit your LD_LIBRARY_PATH and PATH environment variables
accordingly. Add something along these lines:

export PATH=/home/username/myownstuff/bin/:$PATH
export LD_LIBRARY_PATH=/home/username/myownstuff/lib/:$LD_LIBRARY_PATH

to your .bashrc and restart a terminal. Now it should be possible to
install rgdal without manually specifying the location of the
executables and libraries, because they are in the search path.

cheers,
Paul


-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From Bastien.Ferland-Raymond at mrnf.gouv.qc.ca  Mon Feb 27 15:54:39 2012
From: Bastien.Ferland-Raymond at mrnf.gouv.qc.ca (Bastien.Ferland-Raymond at mrnf.gouv.qc.ca)
Date: Mon, 27 Feb 2012 09:54:39 -0500
Subject: [R-sig-Geo] speed problem with %over% function
Message-ID: <161DC602615F6943A19BAEA3DBF2E4B90186A4620643@HARFANG.intranet.mrn.gouv>

Dear geo-list,

I'm just starting using R and the rgdal package to manage and create some shapes and I am hitting some speed issues while using the %over% function. R is significantly slower than ArcGIS.

Here is what I'm doing (I've shorten the code to make it easier to follow, I don't expect it to be reproducible).

# I first load a shape giving the perimeter of the territory of interest
terr <- readOGR("D:\\Couches GIS\\06152\\contour", "contour_carto06152_Project")

# I then want to make a grid of points.  The grid is very dense and rectangular
# to do so, I first make a gridtopology
grille.plac.temp1 <- GridTopology(...)

# and get all the coordinates from the grid
grille.plac.temp2 <- coordinates(grille.plac.temp1)

# and finally transform it to a SpatialPointsDataFrame object
grille.plac <- SpatialPointsDataFrame(grille.plac.temp2,data.frame(1:nrow(grille.plac.temp2)),proj4string =CRS(proj4string(terr)))

# The grid is very big as it is a rectangle in which you can fit the territory shape
# (which is of irregular shape). I then want to reduce it's size by keeping only
# to points from the grid that are in the territory.  I use the %over% function to do
# that.  This is the slow part.
system.time(plac.dans.contour<-grille.plac%over%contour)
   user  system elapsed
1420.23    9.57 1435.17

# I then make a new shape with only the points from the grid that are in the territory
grille.plac.reduce <- grille.plac[as.vector(!is.na(plac.dans.contour)),]


This code works fine and produce what I want it to produce. However, the %over% functions takes 24 minutes to run, while ArcGIS can run it in less than 1 minute with the intersect tool.  Is there a more efficient function than %over% to do what I want?  Is it normal that ArcGIS is that much faster than R in that case?

Thanks for your help,

Bastien Ferland-Raymond, M.Sc. Stat., M.Sc. Biol.
Division des orientations et projets sp?ciaux
Direction des inventaires forestiers
Minist?re des Ressources naturelles et de la Faune du Qu?bec


From oscar.perpinan at upm.es  Mon Feb 27 17:51:40 2012
From: oscar.perpinan at upm.es (Oscar =?utf-8?B?UGVycGnDscOhbg==?= Lamigueiro)
Date: Mon, 27 Feb 2012 17:51:40 +0100
Subject: [R-sig-Geo] Problems with function gplot from rasterVis
In-Reply-To: <CABkCotSp=+W8XFXBokFvpknAJKBGDOPwUFDWka7yyeBS0K24cw@mail.gmail.com>
	("Manuel =?utf-8?Q?Sp=C3=ADnola=22's?= message of "Fri, 24 Feb 2012
	20:09:44 -0600")
References: <CABkCotSp=+W8XFXBokFvpknAJKBGDOPwUFDWka7yyeBS0K24cw@mail.gmail.com>
Message-ID: <87ty2cdxsz.fsf@upm.es>

Manuel Sp?nola <mspinola10 at gmail.com> writes:


>> library(raster)> library(rasterVis)> r = raster(jabali$map)> p = gplot(r) + geom_tile(aes(fill = value)) + geom_point(loc, aes(X,Y))Error: ggplot2 doesn't know how to deal with data of class uneval
>
> I can plot the map, but I can get to plot the points on the map.  The
> object "loc" is a data frame with the locations given by X and Y.

Hi Manuel,

Try this:

gplot(r) + geom_tile(aes(fill = value)) + geom_point(aes(X,Y), data=loc)

The arguments of geom_point are mapping and then data, but you were
using them in reverse order.

Best,

Oscar.

-- 
Oscar Perpi??n Lamigueiro
Dpto. de Ingenier?a El?ctrica
EUITI-UPM

http://procomun.wordpress.com


From afischbach at usgs.gov  Mon Feb 27 17:54:42 2012
From: afischbach at usgs.gov (Anthony Fischbach)
Date: Mon, 27 Feb 2012 08:54:42 -0800 (PST)
Subject: [R-sig-Geo] Data point coordinates from kernel home range
	estimation
In-Reply-To: <1330338586590-7321371.post@n2.nabble.com>
References: <1330338586590-7321371.post@n2.nabble.com>
Message-ID: <1330361682772-7322335.post@n2.nabble.com>

Despina, 
Please see 
http://cran.r-project.org/web/packages/adehabitatHR/index.html
There you will find a rich set of tools that may address your problem 
and that may be readily referenced in a methods section.
Best Wishes-

-----
Tony Fischbach, Wildlife Biologist
Walrus Research Program
Alaska Science Center
U.S. Geological Survey
4210 University Drive
Anchorage, AK 99508-4650

AFischbach at usgs.gov
http://alaska.usgs.gov/science/biology/walrus
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Data-point-coordinates-from-kernel-home-range-estimation-tp7321371p7322335.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From mspinola10 at gmail.com  Mon Feb 27 19:50:52 2012
From: mspinola10 at gmail.com (=?ISO-8859-1?Q?Manuel_Sp=EDnola?=)
Date: Mon, 27 Feb 2012 12:50:52 -0600
Subject: [R-sig-Geo] Problems with function gplot from rasterVis
In-Reply-To: <87ty2cdxsz.fsf@upm.es>
References: <CABkCotSp=+W8XFXBokFvpknAJKBGDOPwUFDWka7yyeBS0K24cw@mail.gmail.com>
	<87ty2cdxsz.fsf@upm.es>
Message-ID: <CABkCotQRkZXBJuUK3_Grn6Wy9Ee7yHxeAnPmZN17NZ+ZeZDB1A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120227/2b6ea27a/attachment.pl>

From brenning at uwaterloo.ca  Mon Feb 27 23:21:46 2012
From: brenning at uwaterloo.ca (Alexander Brenning)
Date: Mon, 27 Feb 2012 17:21:46 -0500
Subject: [R-sig-Geo] rsaga multi.local.function
In-Reply-To: <mailman.13.1330340404.17470.r-sig-geo@r-project.org>
References: <mailman.13.1330340404.17470.r-sig-geo@r-project.org>
Message-ID: <4F4C01FA.7080208@uwaterloo.ca>

Hi Chuck,

the error message suggests that the function unsuccessfully tries to 
write a character string into the output file. Are you applying 
randomforest to a classification problem or a regression problem? If 
classification, are you predicting probabilities of class membership, or 
classes (i.e. class labels, which are then converted to character string).

Is it possible that the latter is the case (maybe accidentally)? The 
'fun' argument to multi.local.function and related functions currently 
has to return numeric values (single values or vector), although it 
should be fairly easy to allow character strings as well (but I'm not 
sure if that would still be a valid ASCII grid file format).

What puzzles me is that multi.focal.function with radius=0 will work 
(slowly), as you mentioned in the user forum on sourceforge.

Cheers
   Alex


From alobolistas at gmail.com  Mon Feb 27 23:32:38 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Mon, 27 Feb 2012 23:32:38 +0100
Subject: [R-sig-Geo] writeGDAL: pseudocolor image?
In-Reply-To: <CANVKczP2K0nk+Q5S8N5WU7y_D3K3QR6T2J7pWhFppFNiJZU3yw@mail.gmail.com>
References: <CAG4NReJ-Vq3zkkguAEo11owEOJvPcGrhPWEo1GRtOVFNkRNM4w@mail.gmail.com>
	<4F4B6177.308@gmail.com>
	<CAG4NReKnV27jaWt8K=UvAOBme9D8tYRNMEScUuP9cPjERFmCqA@mail.gmail.com>
	<CANVKczP2K0nk+Q5S8N5WU7y_D3K3QR6T2J7pWhFppFNiJZU3yw@mail.gmail.com>
Message-ID: <CAG4NReJsAg6yYH1WdO=R24OrdX=urL+MhfFrGWa9X-UHneJMkQ@mail.gmail.com>

You are right, I've download it and gdalinfo indicates a jpeg. It's
weird because the file I upload is a real tif, could it be that it
gets automatically modified?
Anyway, I attach the tif to another message for you.

The original file is jpeg. Then I  use imageJ to change it to "8 bit
color" (this is just to have an example of the raster I want to
create), and save it as tiff. According to gdal, it's a tiff file
(see the output of gdalinfo in my first message).

Agus

El d?a 27 de febrero de 2012 12:55, Barry Rowlingson
<b.rowlingson at lancaster.ac.uk> escribi?:
> On Mon, Feb 27, 2012 at 11:49 AM, Agustin Lobo <alobolistas at gmail.com> wrote:
>> Thanks Vikram,
>>
>> But that would be a multiband image, not a pseucolor image. I need
>> a single layer image including its colortable in the same file (i.e. a
>> temperature field
>> represented in color such as
>> https://sites.google.com/site/filestemp2/home/pseudocolorv2.tif ?).
>
> ?Agus,
>
> ?have you got a link to the original tif of that image, because that
> link is actually a jpeg with a .tif extension.
>
> Barry
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Paul.Rustomji at csiro.au  Tue Feb 28 00:22:08 2012
From: Paul.Rustomji at csiro.au (Paul.Rustomji at csiro.au)
Date: Tue, 28 Feb 2012 10:22:08 +1100
Subject: [R-sig-Geo] problem with rgdal library
Message-ID: <FC096A9DB7AE9345BA73A6F61729398F26AB4D8947@exvic-mbx05.nexus.csiro.au>

Hello List,
I am having trouble getting rgdal to load, and was hoping you could assist.  When I execute the following library() command:

>library("rgdal", character.only=TRUE)

I get a windows pop up message saying:

Rgui.exe - Unable To Locate Component
This application has failed to start because gdal18.dll was not found.  Re-installing the application may fix this problem.

With and OK button to click.  If you press OK lots of times it eventually goes away.

Then back at the R console it eventually reads:
Geospatial Data Abstraction Library extensions to R successfully loaded
Loaded GDAL runtime: GDAL 1.8.1, released 2011/07/09
Path to GDAL shared files: C:/Program Files/R/R-2.14.1/library/rgdal/gdal
Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009, [PJ_VERSION: 470]
Path to PROJ.4 shared files: C:/Program Files/R/R-2.14.1/library/rgdal/proj

But the problem is I am trying to run this within rscript.exe batch file so popup things are problematic.

I had a look around within the rgdal package for the required file but couldn't find it.

I have upgraded to R 2.14.1 and done an update packages, so all packages and R should be current versions.

Any ideas?
Paul

Paul Rustomji
CSIRO Land and Water (Lucas Heights, NSW)
Locked Bag 2007
Kirrawee NSW 2232
P: 02 9710 6915 
M: 0406 375 739


From edzer.pebesma at uni-muenster.de  Tue Feb 28 01:18:33 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 27 Feb 2012 19:18:33 -0500
Subject: [R-sig-Geo] speed problem with %over% function
In-Reply-To: <161DC602615F6943A19BAEA3DBF2E4B90186A4620643@HARFANG.intranet.mrn.gouv>
References: <161DC602615F6943A19BAEA3DBF2E4B90186A4620643@HARFANG.intranet.mrn.gouv>
Message-ID: <4F4C1D59.2000202@uni-muenster.de>

Dear Bastien,

the %over% method was primary written to work, and it seems that it did.

It is hard to tell why ArcGIS is so much faster without access to its
source code, and your data. Chances are that it uses a spatial index,
and R does not.

Talking about spatial indexes, you might want to try %over% in package
rgeos (essentially after loading rgeos) as that seems to use a spatial
index. Providing a reproducible example is always more inviting for
someone on the list (possible me) to look deeper into this.

If you want to obtain points on a regular grid within a polygon,
sp::spsample with type "regular" may be an alternative route. Package
raster may have more efficient routines for many things.

On 02/27/2012 09:54 AM, Bastien.Ferland-Raymond at mrnf.gouv.qc.ca wrote:
> Dear geo-list,
> 
> I'm just starting using R and the rgdal package to manage and create some shapes and I am hitting some speed issues while using the %over% function. R is significantly slower than ArcGIS.
> 
> Here is what I'm doing (I've shorten the code to make it easier to follow, I don't expect it to be reproducible).
> 
> # I first load a shape giving the perimeter of the territory of interest
> terr <- readOGR("D:\\Couches GIS\\06152\\contour", "contour_carto06152_Project")
> 
> # I then want to make a grid of points.  The grid is very dense and rectangular
> # to do so, I first make a gridtopology
> grille.plac.temp1 <- GridTopology(...)
> 
> # and get all the coordinates from the grid
> grille.plac.temp2 <- coordinates(grille.plac.temp1)
> 
> # and finally transform it to a SpatialPointsDataFrame object
> grille.plac <- SpatialPointsDataFrame(grille.plac.temp2,data.frame(1:nrow(grille.plac.temp2)),proj4string =CRS(proj4string(terr)))
> 
> # The grid is very big as it is a rectangle in which you can fit the territory shape
> # (which is of irregular shape). I then want to reduce it's size by keeping only
> # to points from the grid that are in the territory.  I use the %over% function to do
> # that.  This is the slow part.
> system.time(plac.dans.contour<-grille.plac%over%contour)
>    user  system elapsed
> 1420.23    9.57 1435.17
> 
> # I then make a new shape with only the points from the grid that are in the territory
> grille.plac.reduce <- grille.plac[as.vector(!is.na(plac.dans.contour)),]
> 
> 
> This code works fine and produce what I want it to produce. However, the %over% functions takes 24 minutes to run, while ArcGIS can run it in less than 1 minute with the intersect tool.  Is there a more efficient function than %over% to do what I want?  Is it normal that ArcGIS is that much faster than R in that case?
> 
> Thanks for your help,
> 
> Bastien Ferland-Raymond, M.Sc. Stat., M.Sc. Biol.
> Division des orientations et projets sp?ciaux
> Direction des inventaires forestiers
> Minist?re des Ressources naturelles et de la Faune du Qu?bec
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From despina.tg at gmail.com  Tue Feb 28 10:17:45 2012
From: despina.tg at gmail.com (Despina T)
Date: Tue, 28 Feb 2012 01:17:45 -0800 (PST)
Subject: [R-sig-Geo] Data point coordinates from kernel home range
	estimation
In-Reply-To: <1330361682772-7322335.post@n2.nabble.com>
References: <1330338586590-7321371.post@n2.nabble.com>
	<1330361682772-7322335.post@n2.nabble.com>
Message-ID: <1330420665346-7324922.post@n2.nabble.com>

Anthony, 

Thank you for your immediate response. I have to say that I wasn't aware of
the new version of the package and it's very helpful. I have quite solved my
problem with the inout() function from the package "splancs" by which i can
locate the data points existing within each polygon of the home range.

Regards,
Despina


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Data-point-coordinates-from-kernel-home-range-estimation-tp7321371p7324922.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From francis.markham at anu.edu.au  Tue Feb 28 17:38:04 2012
From: francis.markham at anu.edu.au (Francis Markham)
Date: Tue, 28 Feb 2012 11:38:04 -0500
Subject: [R-sig-Geo] speed problem with %over% function
In-Reply-To: <4F4C1D59.2000202@uni-muenster.de>
References: <161DC602615F6943A19BAEA3DBF2E4B90186A4620643@HARFANG.intranet.mrn.gouv>
	<4F4C1D59.2000202@uni-muenster.de>
Message-ID: <CACsciEhOfHkO2n7Ec0p7zff_R9s2CoexDPnQQ6Q6ibDOg=2F8Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120228/34a1ebc3/attachment.pl>

From corey.sparks at UTSA.EDU  Tue Feb 28 21:09:03 2012
From: corey.sparks at UTSA.EDU (Corey Sparks)
Date: Tue, 28 Feb 2012 12:09:03 -0800 (PST)
Subject: [R-sig-Geo] Strange results in DCluster package
Message-ID: <1330459743739-7326832.post@n2.nabble.com>

Dear list,
I am using the DCluster package and running the Kulldorrff scan statistic
for clustering of crime rates.
Here is my code:
library(spdep)
library(DCluster)
library(classInt)
library(RColorBrewer)

#read in shapefile
sabg<-readShapePoly("satract.shp", proj4string=CRS("+proj=utm +zone=14"))

#get observed and expected counts for each census tract
sabg$crimes<-sabg$Count_1
sabg$expcrime.rt<-sabg$POPSIZE*sum(sabg$crimes)/sum(sabg$POPSIZE)

#assign coordinates to the polygon centroids
sabg$x<-coordinates(sabg)[,1]
sabg$y<-coordinates(sabg)[,2]

#Create the data frame demanded by DCluster
sa<-data.frame(Observed=sabg$crimes)
sa<-cbind(sa, Expected=sabg$POPSIZE*sum(sabg$crimes)/sum(sabg$POPSIZE))
sa<-cbind(sa, x=sabg$x, y=sabg$y)
sa$Observed<-as.numeric(sa$Observed)


#Kuldorff-Nagarwalla analysis
mle<-calculate.mle(sa, model="poisson")
knres<-opgam(data=sa, thegrid=sa[,c("x","y")], alpha=.05, R=999,
iscluster=kn.iscluster, fractpop=.25, model="poisson", mle=mle)

#here is the result

knres
          x       y     statistic cluster pvalue size
1   549400.3 3255340           Inf       1  0.001    1
2   550731.4 3255426           Inf       1  0.001    4
3   550353.6 3253989           Inf       1  0.001    8
4   548815.9 3254113           Inf       1  0.001    3
5   547636.8 3254318           Inf       1  0.001    8
6   547764.7 3255747           Inf       1  0.001    9
7   548392.6 3256607           Inf       1  0.001    5
8   549163.2 3257082           Inf       1  0.001    6
9   550151.3 3256710           Inf       1  0.001    5
10  551313.1 3256875           Inf       1  0.001   14
11  554570.4 3259179           Inf       1  0.001   52
12  552041.0 3258976           Inf       1  0.001   46
13  556862.8 3261649           Inf       1  0.001   56
14  557429.1 3264038           Inf       1  0.001    8
15  553744.5 3262400           Inf       1  0.001   53
16  551412.1 3264906           Inf       1  0.001   16
17  551185.5 3263488           Inf       1  0.001   60
18  553672.4 3264075           Inf       1  0.001   23
19  554408.5 3265909           Inf       1  0.001   24
20  555923.9 3264435           Inf       1  0.001   14
21  553779.5 3266913           Inf       1  0.001   23
22  553849.9 3270009  1.869931e+05       1  0.001   20
23  559012.4 3267263 1.572973e+129       1  0.001    1
24  556118.3 3266436           Inf       1  0.001    7
25  557527.1 3268064 8.142677e+276       1  0.001    2
26  558905.3 3269407  3.048445e+22       1  0.001    5
27  560312.0 3266480  4.241565e+59       1  0.001   10
28  561209.9 3262653 2.240608e+170       1  0.001   62
29  559700.8 3263883           Inf       1  0.001    4
30  558802.2 3261427           Inf       1  0.001   58
31  560880.9 3267525  3.140650e+07       1  0.001   55
32  561308.0 3269593  3.803521e+03       1  0.001    1
33  551645.1 3255564           Inf       1  0.001   14
34  551656.9 3254163           Inf       1  0.001   28
35  551683.5 3253222           Inf       1  0.001   33
36  553754.8 3253146           Inf       1  0.001   32
37  553135.7 3254545           Inf       1  0.001   30
38  553131.0 3255779           Inf       1  0.001   26
39  553195.6 3256784           Inf       1  0.001   19
40  555212.4 3256263           Inf       1  0.001   36
41  557489.4 3256572           Inf       1  0.001   42
42  557554.7 3254371           Inf       1  0.001   68
43  555609.4 3253067           Inf       1  0.001   56
44  556845.1 3252107           Inf       1  0.001   56
45  558457.2 3251616           Inf       1  0.001   53
46  560557.1 3250393           Inf       1  0.001   63
47  560958.4 3257710           Inf       1  0.001   66
48  559050.3 3257869           Inf       1  0.001   60
49  562012.5 3261814 3.537503e+106       1  0.001   62
50  550552.2 3253113           Inf       1  0.001   12
51  550340.2 3251987           Inf       1  0.001   66
52  550133.2 3250927           Inf       1  0.001   69
53  551673.4 3252067           Inf       1  0.001   44
54  552866.0 3252026           Inf       1  0.001   52
55  553986.1 3251639           Inf       1  0.001   43
56  552303.1 3251048           Inf       1  0.001   71
57  551465.5 3249950           Inf       1  0.001   67
58  552894.5 3250203           Inf       1  0.001   63
59  552673.4 3249215           Inf       1  0.001   64
60  553292.5 3247899           Inf       1  0.001   69
61  554387.0 3250249           Inf       1  0.001   51
62  556796.2 3249775           Inf       1  0.001   72
63  555684.6 3248402           Inf       1  0.001   57
64  556841.4 3246428           Inf       1  0.001   55
65  554412.2 3246080           Inf       1  0.001   69
66  554664.9 3244541           Inf       1  0.001   65
67  561611.6 3236164           Inf       1  0.001   69
68  548170.5 3252804           Inf       1  0.001   56
69  549312.5 3252718           Inf       1  0.001   13
70  548337.5 3251112           Inf       1  0.001   67
71  546823.1 3251050           Inf       1  0.001   66
72  546021.0 3250067           Inf       1  0.001   60
73  546044.9 3249272           Inf       1  0.001   49
74  547492.7 3249655           Inf       1  0.001   69
75  548870.2 3249633           Inf       1  0.001   60
76  550740.9 3248679           Inf       1  0.001   69
77  549188.7 3248240           Inf       1  0.001   69
78  547537.2 3248249           Inf       1  0.001   50
79  545550.9 3248195           Inf       1  0.001   56
80  544406.8 3245529           Inf       1  0.001    3
81  546137.2 3245592           Inf       1  0.001    2
82  547576.1 3246828           Inf       1  0.001   65
83  549290.7 3247154           Inf       1  0.001   69
84  549152.9 3245888           Inf       1  0.001   59
85  548508.0 3244576           Inf       1  0.001   11
86  551726.2 3245392           Inf       1  0.001   67
87  551479.0 3240255           Inf       1  0.001   68
88  545252.8 3239420 3.835474e+175       1  0.001    4
89  546442.4 3253327           Inf       1  0.001   53
90  546730.7 3252383           Inf       1  0.001   67
91  545942.5 3251403           Inf       1  0.001   69
92  544507.8 3251329           Inf       1  0.001   50
93  544699.9 3253080           Inf       1  0.001   67
94  543271.5 3253626 2.443373e+213       1  0.001   49
95  542957.2 3251966           Inf       1  0.001   58
96  543483.3 3248918 8.876590e+246       1  0.001   58
97  541482.6 3246184  7.859986e+78       1  0.001   10
98  541163.7 3244295  1.747403e+64       1  0.001   10
99  539377.9 3246673  1.195084e+23       1  0.001   15
100 537559.7 3244936  4.939231e+72       1  0.001   18
101 538097.7 3248497  1.321706e+33       1  0.001   34
102 536714.3 3247450  2.650795e+36       1  0.001   28
103 535468.6 3249629  1.465449e+31       1  0.001   49
104 533038.5 3246679  5.381028e+18       1  0.001   40
105 546652.4 3256818           Inf       1  0.001   24
106 546585.8 3255896           Inf       1  0.001   18
107 546464.2 3254788           Inf       1  0.001   17
108 545171.9 3254795           Inf       1  0.001   35
109 545414.9 3256918           Inf       1  0.001   35
110 545036.0 3256182           Inf       1  0.001   30
111 545845.6 3257885           Inf       1  0.001   46
112 543616.7 3258135           Inf       1  0.001   62
113 543553.3 3257175           Inf       1  0.001   60
114 543848.8 3256173 5.551244e+239       1  0.001   52
115 543806.4 3254990 5.876307e+238       1  0.001   63
116 542701.9 3254942 7.857702e+266       1  0.001   61
117 541821.1 3254852           Inf       1  0.001   60
118 542126.3 3256405           Inf       1  0.001   59
119 541745.3 3257976  7.118135e+79       1  0.001   56
120 539939.8 3257014 1.064672e+138       1  0.001   45
121 540661.9 3254813 2.334818e+122       1  0.001   59
122 538141.2 3254706 4.276987e+203       1  0.001   28
123 535213.1 3255463           Inf       1  0.001    6
124 534922.7 3253841           Inf       1  0.001    5
125 535290.7 3252995 3.547466e+132       1  0.001    4
126 533527.2 3256323           Inf       1  0.001    1
127 533341.4 3253074  4.207235e+78       1  0.001    7
128 529398.6 3258250  2.327642e+04       1  0.001    1
129 532005.4 3253902  2.848964e+40       1  0.001   14
130 530572.8 3254956  6.363584e+25       1  0.001   15
131 531398.4 3255589  9.225320e+46       1  0.001   13
132 532555.9 3259047 2.375187e+133       1  0.001    3
133 544916.5 3259167           Inf       1  0.001   60
134 545271.8 3260987           Inf       1  0.001   61
135 544397.4 3260605 1.570527e+283       1  0.001   63
136 542895.3 3259774 7.668096e+124       1  0.001   58
137 541584.6 3259324 3.594947e+118       1  0.001   21
138 539764.2 3260148           Inf       1  0.001    9
139 539493.9 3259050 3.984253e+189       1  0.001   13
140 539848.0 3258178 5.157525e+232       1  0.001   41
141 541364.6 3261448 3.889054e+196       1  0.001   30
142 543009.4 3261002 3.864242e+254       1  0.001   52
143 542059.5 3263340           Inf       1  0.001    7
144 540282.7 3262744           Inf       1  0.001   15
145 544587.5 3263142           Inf       1  0.001   27
146 545521.5 3263346           Inf       1  0.001   40
147 544386.0 3265005           Inf       1  0.001   25
148 542161.5 3265857 5.110777e+304       1  0.001    9
149 542675.8 3264871           Inf       1  0.001   11
150 543245.8 3263666 2.149632e+297       1  0.001   12
151 543560.7 3266443 9.027490e+284       1  0.001   56
152 544661.7 3267512           Inf       1  0.001   38
153 542660.6 3268768  1.597527e+75       1  0.001   17
154 542060.4 3268056 2.057673e+164       1  0.001   14
155 541446.8 3267064 3.252695e+184       1  0.001    9
156 540130.7 3266535 3.994841e+234       1  0.001    5
157 540674.3 3264813           Inf       1  0.001    1
158 538502.4 3264905  2.308089e+78       1  0.001   18
159 539367.2 3264077           Inf       1  0.001   15
160 538996.3 3263012 8.560120e+302       1  0.001    7
161 537908.1 3260154           Inf       1  0.001    3
162 537377.4 3258785           Inf       1  0.001    3
163 537406.3 3260816           Inf       1  0.001    1
164 535256.3 3260039 3.082618e+280       1  0.001    4
165 540231.4 3271008 1.449425e+187       1  0.001    1
166 537458.4 3271704 7.235530e+120       1  0.001    3
167 538745.9 3269333 6.103567e+201       1  0.001    3
168 538958.2 3267626 2.627967e+158       1  0.001    1
169 536190.5 3277034  2.750035e+02       1  0.006    1
170 547825.5 3257719           Inf       1  0.001   14
171 549490.0 3258199           Inf       1  0.001   12
172 550945.0 3259103           Inf       1  0.001   35
173 549509.7 3259381           Inf       1  0.001   30
174 546561.9 3259060           Inf       1  0.001   54
175 547763.1 3259010           Inf       1  0.001   65
176 546375.1 3260424           Inf       1  0.001   64
177 547604.7 3260608           Inf       1  0.001   57
178 548906.5 3260933           Inf       1  0.001   64
179 548635.4 3264113           Inf       1  0.001    1
180 549886.3 3263063           Inf       1  0.001   56
181 547181.9 3261949           Inf       1  0.001   63
182 546532.6 3263683           Inf       1  0.001   42
183 547829.0 3263037           Inf       1  0.001   59
184 547955.8 3267412           Inf       1  0.001    8
185 549141.0 3269474           Inf       1  0.001    1
186 549426.3 3266670           Inf       1  0.001    5
187 548501.0 3271098  3.274024e+17       1  0.001    3
188 547420.0 3270396  2.869162e+45       1  0.001   38
189 545504.7 3270449  2.640984e+79       1  0.001   38
190 545596.0 3272720  1.977962e+04       1  0.001   38
191 547064.7 3268968  1.622851e+83       1  0.001   43
192 546451.3 3268260 9.766656e+144       1  0.001   26
193 543846.3 3269846  3.782823e+53       1  0.001   27
194 550262.1 3277594  4.348019e+55       1  0.001    1
195 540900.2 3277194  3.780419e+70       1  0.001    3


You can see that many of the clusters have Inf's for their statistic value. 
When trying to find the "Most likely cluster" corresponding to the largest 
value of the statistics, this creates a problem.  

I would appreciate any thoughts you may have on this, or if others have seen
this kind of behavior.  As far as I can tell, this only happens with the
kn.iscluster algorithm, I can use besag-newell and plain opgan() just fine.
I will put the data on my dropbox:

http://dl.dropbox.com/u/16846217/Archive.zip

Corey

Corey Sparks, PhD 
Assistant professor 
Department of Demography 
The University of Texas at San Antonio 
501 West Cesar E Chavez Blvd 
San Antonio TX 78207 
Corey.sparks 'at' utsa.edu 



-----
Corey Sparks
Assistant professor
Department of Demography
The University of Texas at San Antonio
501 West Cesar E Chavez Blvd
San Antonio TX 78207
Corey.sparks 'at' utsa.edu
210 458 3166 &lt;tel:210%20458%203166&gt;
Latitude: 29.423614  /  Longitude: -98.504282
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Strange-results-in-DCluster-package-tp7326832p7326832.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From gregor.hochschild at gmx.de  Wed Feb 29 14:27:55 2012
From: gregor.hochschild at gmx.de (gregor.hochschild at gmx.de)
Date: Wed, 29 Feb 2012 14:27:55 +0100
Subject: [R-sig-Geo] speed problem with %over% function (Francis Markham)
Message-ID: <20120229132755.188870@gmx.net>

I made the same experience as Francis Markham. I recently used the over function to check in which polygon from a shapefile a large number of points fall, and it crashed because of memory requirements. I was running the function in the cloud with 12GB of RAM...

Here are some details and below is reproducible code together with data:
600,000 points, SpatialPolygonsDataFrame with 2166 rows
over(SpatialPoints.Obj,SpatialPolygonsDataFrame.Obj)
I ended up processing the points in chunks of 100,000, which worked quit well but it's far from optimal. 


Greg



# data with sample of 300,000 points
# http://www.mediafire.com/?d1ds17guxg656s1,s5snsbafvps36fr
# (I will take these files down after some time)

require ("rgdal")
require ("maptools")

# load data
map.proj = CRS(" +proj=lcc +lat_1=40.66666666666666 +lat_2=41.03333333333333 +lat_0=40.16666666666666 +lon_0=-74 +x_0=300000 +y_0=0 +datum=NAD83 +units=us-ft +no_defs +ellps=GRS80 +towgs84=0,0,0")
points   = read.csv('~/Dropbox/sp-over/points.csv',sep=",", stringsAsFactors=FALSE)
map.nyc  = readShapeSpatial('/Users/jpl2136/Dropbox/sp-over/nyc-census-tract/nyct2010',proj4string=map.proj)

# project points
coord    =project(cbind(points$longitude,points$latitude),proj4string(map.nyc))
sppoints =SpatialPoints(coord,proj4string=map.proj)
# over function
census.track=sp::over(sppoints,map.nyc)






-- 

Jetzt informieren: http://mobile.1und1.de/?ac=OM.PW.PW003K20328T7073a


From Bastien.Ferland-Raymond at mrnf.gouv.qc.ca  Wed Feb 29 17:19:18 2012
From: Bastien.Ferland-Raymond at mrnf.gouv.qc.ca (Bastien.Ferland-Raymond at mrnf.gouv.qc.ca)
Date: Wed, 29 Feb 2012 11:19:18 -0500
Subject: [R-sig-Geo] speed problem with %over% function
In-Reply-To: <mailman.9.1330513206.17617.r-sig-geo@r-project.org>
Message-ID: <161DC602615F6943A19BAEA3DBF2E4B90186A462064A@HARFANG.intranet.mrn.gouv>

Thanks to Francis and Edzer for their responses.

I been working on my problem for the last 2 days and I managed to get some very interesting information.  I also prepared a reproducible example so people can try it.

I've found 3 functions that do the thing I want:
1) %over%
2) overlay()  (which is deprecated)
3) gIntersection()  (from the rgeos package)

So I've tried them all on my data to compare the speed between each of them and ArcGIS.  The punchline of my analysis is that %over% is the slowest (and by a lot) of all functions including ArcGIS.  overlay() is the fastest.

To get these results, here is a reproducible example:

### first, download the shapes from:
### http://www.nceas.ucsb.edu/files/scicomp/demo/read-write-shapefiles.zip
### This is not my files, I took them from the example at:
### http://www.nceas.ucsb.edu/scicomp/usecases/ReadWriteESRIShapeFiles

###  Use the rgdal library to read the files
>library(rgdal)
>shape <- readOGR("C:\\Documents and Settings\\ferba1\\Bureau\\shape","nw-counties")
OGR data source with driver: ESRI Shapefile
Source: "C:\Documents and Settings\ferba1\Bureau\shape", layer: "nw-counties"
with 208 features and 8 fields
Feature type: wkbPolygon with 2 dimensions

# choose only one territory to make the analysis easier
> shape <- shape[shape at data$COUNTYNAME=="Lemhi",]
> plot(shape, axes=T)

> etendu <- bbox(shape)

# this code is used to transfer km in degre-decimals. It's not necessary to
# understand it for this problem.  The only important part is that you can
# change "separation" to increase the density of the grid. "separation"
# represent the distance between the grid point, in that example 0.5km.
> separation <- 0.5
> circ.minlat <- 2*pi*6378.16*cos(pi*etendu[2,1]/180)
> pas.degre.lon <- circ.minlat/360
> nb.degre.lon <- separation/pas.degre.lon
> pas.degre.lat <- 111.3199
> nb.degre.lat <- separation/pas.degre.lat
###

# make the grid
> grille.plac <- GridTopology(etendu[,1],
+                             cellsize=c(nb.degre.lon,nb.degre.lat),
+                             cells.dim=(ceiling((etendu[,2]-etendu[,1])/c(nb.degre.lon,nb.degre.lat))+2))

> grille.plac <- coordinates(grille.plac)

> grille.plac <- SpatialPointsDataFrame( grille.plac,data.frame(plac_ID=1:nrow(grille.plac)), proj4string = CRS(proj4string(shape)))


> points(grille.plac,col="blue", pch=".")

### The overlay() function
> system.time(plac.dans.contour1 <- overlay(grille.plac, shape) )
   user  system elapsed
   2.33    0.00    2.34
> grille.plac1 <- grille.plac[!is.na(plac.dans.contour1),]
> points(grille.plac1,col="red", pch=".")

###  The %over% function
> system.time(plac.dans.contour2<-grille.plac%over%shape)
   user  system elapsed
 953.72    2.33  960.80
> grille.plac2 <- grille.plac[!is.na(plac.dans.contour2)[,1],]
> points(grille.plac2,col="yellow", pch=".")

###  The gIntersection() function
library(rgeos)
> system.time(grille.plac3 <- gIntersection(grille.plac, shape))
   user  system elapsed
  37.83    0.05   37.99
> points(grille.plac3,col="green", pch=".")

###  end of code

As you can see, the %over% function is the slowest with 961 seconds to run.  The overlay() function was the best with 2.34 seconds to run.  The gIntersection was in the middle with 38 seconds to run.  Finally, the intersection tool of ArcGIS took 20 seconds to do the same thing.  Those times seem to be context specific, as in my problem, gIntersection() was the slowest with 799 seconds, while %over% did the task in 250 seconds and overlay() in 119.  overlay() was still the fastest function.

So, it seems there clearly is room for amelioration of the %over% function.  And my next question is, why is overlay() deprecated? In the help, it says: "This function is deprecated, as it has some inconsistences." but I did not find any reference on what are those "inconsistences".  Going from overlay() to %over% seems more like a downgrade than a upgrade to me.  I implemented overlay() in my code instead of %over%, saving an incredible amount of time. However I'm a little stressed about it as it may cause problems or I may lose the function in a future version of the sp package.

So I guess anybody motivated to ameliorate the %over% function could start by understanding the difference between it and the overlay() function.  Sadly, I'm no programmer so I can' help here.

Best regards,
Bastien Ferland-Raymond


Date: Tue, 28 Feb 2012 11:38:04 -0500
From: Francis Markham <francis.markham at anu.edu.au>

I've had examples in the past where using %over% from the sp package takes
all available RAM (7GB) and several hours, while ArcGIS takes about 300MB
and 5 minutes, so I would agree that there is plenty of room for
improvement here. I'll try to give a reproducable example in the coming
weeks when I return from travel.

This is a critical issue for me insofar as spatial joins are a routine
procedure for me and but without reasonable speed for producedures such as
this I cannot perform all my analysis in R, making for a more complex,
error prone work flow and scuttling the possibility of "reproducable
research."

On a related note, does the 'sp' package have an accessible bug tracker?
I'd like to be able to contribute to improving this very useful package if
at all possible, but I'm not sure where to begin.

Warm regards,

Francis Markham
Research Associate
Fenner School of Environment and Society
Australian National University

On 27 February 2012 19:18, Edzer Pebesma <edzer.pebesma at uni-muenster.de>wrote:

> Dear Bastien,
>
> the %over% method was primary written to work, and it seems that it did.
>
> It is hard to tell why ArcGIS is so much faster without access to its
> source code, and your data. Chances are that it uses a spatial index,
> and R does not.
>
> Talking about spatial indexes, you might want to try %over% in package
> rgeos (essentially after loading rgeos) as that seems to use a spatial
> index. Providing a reproducible example is always more inviting for
> someone on the list (possible me) to look deeper into this.
>
> If you want to obtain points on a regular grid within a polygon,
> sp::spsample with type "regular" may be an alternative route. Package
> raster may have more efficient routines for many things.
>
> On 02/27/2012 09:54 AM, Bastien.Ferland-Raymond at mrnf.gouv.qc.ca wrote:
> > Dear geo-list,
> >
> > I'm just starting using R and the rgdal package to manage and create
> some shapes and I am hitting some speed issues while using the %over%
> function. R is significantly slower than ArcGIS.
> >
> > Here is what I'm doing (I've shorten the code to make it easier to
> follow, I don't expect it to be reproducible).
> >
> > # I first load a shape giving the perimeter of the territory of interest
> > terr <- readOGR("D:\\Couches GIS\\06152\\contour",
> "contour_carto06152_Project")
> >
> > # I then want to make a grid of points.  The grid is very dense and
> rectangular
> > # to do so, I first make a gridtopology
> > grille.plac.temp1 <- GridTopology(...)
> >
> > # and get all the coordinates from the grid
> > grille.plac.temp2 <- coordinates(grille.plac.temp1)
> >
> > # and finally transform it to a SpatialPointsDataFrame object
> > grille.plac <-
> SpatialPointsDataFrame(grille.plac.temp2,data.frame(1:nrow(grille.plac.temp2)),proj4string
> =CRS(proj4string(terr)))
> >
> > # The grid is very big as it is a rectangle in which you can fit the
> territory shape
> > # (which is of irregular shape). I then want to reduce it's size by
> keeping only
> > # to points from the grid that are in the territory.  I use the %over%
> function to do
> > # that.  This is the slow part.
> > system.time(plac.dans.contour<-grille.plac%over%contour)
> >    user  system elapsed
> > 1420.23    9.57 1435.17
> >
> > # I then make a new shape with only the points from the grid that are in
> the territory
> > grille.plac.reduce <- grille.plac[as.vector(!is.na(plac.dans.contour)),]
> >
> >
> > This code works fine and produce what I want it to produce. However, the
> %over% functions takes 24 minutes to run, while ArcGIS can run it in less
> than 1 minute with the intersect tool.  Is there a more efficient function
> than %over% to do what I want?  Is it normal that ArcGIS is that much
> faster than R in that case?
> >
> > Thanks for your help,
> >
> > Bastien Ferland-Raymond, M.Sc. Stat., M.Sc. Biol.
> > Division des orientations et projets sp?ciaux
> > Direction des inventaires forestiers
> > Minist?re des Ressources naturelles et de la Faune du Qu?bec
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> --
> Edzer Pebesma
> Institute for Geoinformatics (ifgi), University of M?nster
> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
> 8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
> http://www.52north.org/geostatistics      e.pebesma at wwu.de
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

        [[alternative HTML version deleted]]


From chrjan70 at gmail.com  Wed Feb 29 19:15:27 2012
From: chrjan70 at gmail.com (Christian Jansson)
Date: Wed, 29 Feb 2012 15:15:27 -0300
Subject: [R-sig-Geo] Get coordinates from huge shapefiles.
Message-ID: <CAAHdiqxBLMgLnwb77gwFmq-bEzJ-TUOP6KgjhONTO=0PJwCZ0Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120229/3b6088c1/attachment.pl>

From mdsumner at gmail.com  Wed Feb 29 21:44:01 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 1 Mar 2012 07:44:01 +1100
Subject: [R-sig-Geo] Get coordinates from huge shapefiles.
In-Reply-To: <CAAHdiqxBLMgLnwb77gwFmq-bEzJ-TUOP6KgjhONTO=0PJwCZ0Q@mail.gmail.com>
References: <CAAHdiqxBLMgLnwb77gwFmq-bEzJ-TUOP6KgjhONTO=0PJwCZ0Q@mail.gmail.com>
Message-ID: <CAAcGz981PLRmzcEQxTKh_R_Zcu+eMBTOEHZB7VCL4-LvjatHPg@mail.gmail.com>

You can do this:

https://stat.ethz.ch/pipermail/r-sig-geo/2010-February/007619.html

(The email archive, or my browser has auto-converted "x @ y" symbols
to "x at y" rather helpfully so you will need to fix that if that's
what you see).

The fortify tools (in ggplot2) and the geometry/topology-sense in
rgeos are important to consider though, fortify is trying to build a
table that still stores all the topology so that (for e.g.) ggplot2
can work with it in a standard way.

Raw extraction does not take any care with whether the polygons make
sense, but that takes work since shapefiles just don't store that
information, they are just sets of ring boundaries and it's up to the
software using them to build the actual topology. My code at that post
just drops the final duplicated coordinate . . .

Cheers, Mike.

On Thu, Mar 1, 2012 at 5:15 AM, Christian Jansson <chrjan70 at gmail.com> wrote:
> Hi,
>
> Thanks to everyone on this list. It is a true source of help!
>
> I'm reading huge shapefiles like this:
>
> shp_0 <- rgdal::readOGR(dsn="dir", layer="TheLayer")
>
> There are two columns in the shp_0 at data: bin1 and bin2.
>
> I need to get a table with three columns: id, X, Y.
>
> First I do this:
> shp_0 at data$id = rownames(shp_0 at data)
>
> When I then run this:
> tbl_coords <-fortify.SpatialPolygonsDataFrame(shp_0)
> I get: "Using bin1 to define regions.
> Error in createPolygonsComment(p) :
> ?rgeos_PolyCreateComment: orphaned hole, cannot find containing polygon
> for hole at index 3"
>
> After reading in previous messages on this email-list, I tried:
>
> slot(shp_0, "polygons") <- lapply(slot(shp_0, "polygons"),
> checkPolygonsHoles), which proceeds to a new R-prompt with no issue
> mentioned.
>
> But everytime I then run
> shp_1 <- unionSpatialPolygons(shp_0, as.character(shp_0$id))
> I get another crasch:
> "This application has requested the Runtime to terminate it in an unusual
> way.
> Please contact the application's support team for more information."
>
> How can I get the coordinates per polygon in one large table? I know how to
> get them per polygon, but to rbind more than 30 000 polygons take forever.
> To get the areas is easy "sapply(shp_0 at polygons, function(x) x at area)", but
> the coords are deeper into the sp-object and I don't know how to "apply-it
> out".
>
> Thank you very much for all help.
>
> /Chris
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From mdsumner at gmail.com  Wed Feb 29 21:44:38 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 1 Mar 2012 07:44:38 +1100
Subject: [R-sig-Geo] Get coordinates from huge shapefiles.
In-Reply-To: <CAAcGz981PLRmzcEQxTKh_R_Zcu+eMBTOEHZB7VCL4-LvjatHPg@mail.gmail.com>
References: <CAAHdiqxBLMgLnwb77gwFmq-bEzJ-TUOP6KgjhONTO=0PJwCZ0Q@mail.gmail.com>
	<CAAcGz981PLRmzcEQxTKh_R_Zcu+eMBTOEHZB7VCL4-LvjatHPg@mail.gmail.com>
Message-ID: <CAAcGz9_vt5nAcOzt7nCNtMstVzXZgLm+N0yhWAVzWRkmFnkcNA@mail.gmail.com>

Sorry, that should have been "x at y" for the raw access to S4 elements.

On Thu, Mar 1, 2012 at 7:44 AM, Michael Sumner <mdsumner at gmail.com> wrote:
> You can do this:
>
> https://stat.ethz.ch/pipermail/r-sig-geo/2010-February/007619.html
>
> (The email archive, or my browser has auto-converted "x @ y" symbols
> to "x at y" rather helpfully so you will need to fix that if that's
> what you see).
>
> The fortify tools (in ggplot2) and the geometry/topology-sense in
> rgeos are important to consider though, fortify is trying to build a
> table that still stores all the topology so that (for e.g.) ggplot2
> can work with it in a standard way.
>
> Raw extraction does not take any care with whether the polygons make
> sense, but that takes work since shapefiles just don't store that
> information, they are just sets of ring boundaries and it's up to the
> software using them to build the actual topology. My code at that post
> just drops the final duplicated coordinate . . .
>
> Cheers, Mike.
>
> On Thu, Mar 1, 2012 at 5:15 AM, Christian Jansson <chrjan70 at gmail.com> wrote:
>> Hi,
>>
>> Thanks to everyone on this list. It is a true source of help!
>>
>> I'm reading huge shapefiles like this:
>>
>> shp_0 <- rgdal::readOGR(dsn="dir", layer="TheLayer")
>>
>> There are two columns in the shp_0 at data: bin1 and bin2.
>>
>> I need to get a table with three columns: id, X, Y.
>>
>> First I do this:
>> shp_0 at data$id = rownames(shp_0 at data)
>>
>> When I then run this:
>> tbl_coords <-fortify.SpatialPolygonsDataFrame(shp_0)
>> I get: "Using bin1 to define regions.
>> Error in createPolygonsComment(p) :
>> ?rgeos_PolyCreateComment: orphaned hole, cannot find containing polygon
>> for hole at index 3"
>>
>> After reading in previous messages on this email-list, I tried:
>>
>> slot(shp_0, "polygons") <- lapply(slot(shp_0, "polygons"),
>> checkPolygonsHoles), which proceeds to a new R-prompt with no issue
>> mentioned.
>>
>> But everytime I then run
>> shp_1 <- unionSpatialPolygons(shp_0, as.character(shp_0$id))
>> I get another crasch:
>> "This application has requested the Runtime to terminate it in an unusual
>> way.
>> Please contact the application's support team for more information."
>>
>> How can I get the coordinates per polygon in one large table? I know how to
>> get them per polygon, but to rbind more than 30 000 polygons take forever.
>> To get the areas is easy "sapply(shp_0 at polygons, function(x) x at area)", but
>> the coords are deeper into the sp-object and I don't know how to "apply-it
>> out".
>>
>> Thank you very much for all help.
>>
>> /Chris
>>
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
> --
> Michael Sumner
> Institute for Marine and Antarctic Studies, University of Tasmania
> Hobart, Australia
> e-mail: mdsumner at gmail.com



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From cr173 at stat.duke.edu  Wed Feb 29 22:42:46 2012
From: cr173 at stat.duke.edu (Colin Rundel)
Date: Wed, 29 Feb 2012 16:42:46 -0500
Subject: [R-sig-Geo] speed problem with %over% function
In-Reply-To: <161DC602615F6943A19BAEA3DBF2E4B90186A462064A@HARFANG.intranet.mrn.gouv>
References: <161DC602615F6943A19BAEA3DBF2E4B90186A462064A@HARFANG.intranet.mrn.gouv>
Message-ID: <D2D9A26C-1649-4B4B-AA6B-77F25A0338E6@stat.duke.edu>

For this example at least you are severely handicapping rgeos as gIntersect needs to create all new points that result from the intersections which then need to be translated back to R from the geos representation. If you use something like the following you should see much better results:

> system.time(grille.plac4 <- gIntersects(shape,grille.plac,byid=TRUE))
   user  system elapsed 
  0.365   0.008   0.371 
> plot(grille.plac[c(grille.plac4),])

In this case I am using a spatial predicate instead of a topology operator, also note that I've switched the order of the polygon and the points since some of the predicates can make use of prepared geometries to improve performance and rgeos assumes the first geometry should be the prepared geometry (think in terms of the fact that you are comparing a bunch of points to one polygon so prepare the polygon (create a spatial index) to improve performance).  

-Colin

-----

Colin Rundel
Visiting Instructor
Duke University, Department of Statistical Science
colin.rundel at stat.duke.edu
www.stat.duke.edu/~cr173/

On Feb 29, 2012, at 11:19 AM, <Bastien.Ferland-Raymond at mrnf.gouv.qc.ca> <Bastien.Ferland-Raymond at mrnf.gouv.qc.ca> wrote:

> Thanks to Francis and Edzer for their responses.
> 
> I been working on my problem for the last 2 days and I managed to get some very interesting information.  I also prepared a reproducible example so people can try it.
> 
> I've found 3 functions that do the thing I want:
> 1) %over%
> 2) overlay()  (which is deprecated)
> 3) gIntersection()  (from the rgeos package)
> 
> So I've tried them all on my data to compare the speed between each of them and ArcGIS.  The punchline of my analysis is that %over% is the slowest (and by a lot) of all functions including ArcGIS.  overlay() is the fastest.
> 
> To get these results, here is a reproducible example:
> 
> ### first, download the shapes from:
> ### http://www.nceas.ucsb.edu/files/scicomp/demo/read-write-shapefiles.zip
> ### This is not my files, I took them from the example at:
> ### http://www.nceas.ucsb.edu/scicomp/usecases/ReadWriteESRIShapeFiles
> 
> ###  Use the rgdal library to read the files
>> library(rgdal)
>> shape <- readOGR("C:\\Documents and Settings\\ferba1\\Bureau\\shape","nw-counties")
> OGR data source with driver: ESRI Shapefile
> Source: "C:\Documents and Settings\ferba1\Bureau\shape", layer: "nw-counties"
> with 208 features and 8 fields
> Feature type: wkbPolygon with 2 dimensions
> 
> # choose only one territory to make the analysis easier
>> shape <- shape[shape at data$COUNTYNAME=="Lemhi",]
>> plot(shape, axes=T)
> 
>> etendu <- bbox(shape)
> 
> # this code is used to transfer km in degre-decimals. It's not necessary to
> # understand it for this problem.  The only important part is that you can
> # change "separation" to increase the density of the grid. "separation"
> # represent the distance between the grid point, in that example 0.5km.
>> separation <- 0.5
>> circ.minlat <- 2*pi*6378.16*cos(pi*etendu[2,1]/180)
>> pas.degre.lon <- circ.minlat/360
>> nb.degre.lon <- separation/pas.degre.lon
>> pas.degre.lat <- 111.3199
>> nb.degre.lat <- separation/pas.degre.lat
> ###
> 
> # make the grid
>> grille.plac <- GridTopology(etendu[,1],
> +                             cellsize=c(nb.degre.lon,nb.degre.lat),
> +                             cells.dim=(ceiling((etendu[,2]-etendu[,1])/c(nb.degre.lon,nb.degre.lat))+2))
> 
>> grille.plac <- coordinates(grille.plac)
> 
>> grille.plac <- SpatialPointsDataFrame( grille.plac,data.frame(plac_ID=1:nrow(grille.plac)), proj4string = CRS(proj4string(shape)))
> 
> 
>> points(grille.plac,col="blue", pch=".")
> 
> ### The overlay() function
>> system.time(plac.dans.contour1 <- overlay(grille.plac, shape) )
>   user  system elapsed
>   2.33    0.00    2.34
>> grille.plac1 <- grille.plac[!is.na(plac.dans.contour1),]
>> points(grille.plac1,col="red", pch=".")
> 
> ###  The %over% function
>> system.time(plac.dans.contour2<-grille.plac%over%shape)
>   user  system elapsed
> 953.72    2.33  960.80
>> grille.plac2 <- grille.plac[!is.na(plac.dans.contour2)[,1],]
>> points(grille.plac2,col="yellow", pch=".")
> 
> ###  The gIntersection() function
> library(rgeos)
>> system.time(grille.plac3 <- gIntersection(grille.plac, shape))
>   user  system elapsed
>  37.83    0.05   37.99
>> points(grille.plac3,col="green", pch=".")
> 
> ###  end of code
> 
> As you can see, the %over% function is the slowest with 961 seconds to run.  The overlay() function was the best with 2.34 seconds to run.  The gIntersection was in the middle with 38 seconds to run.  Finally, the intersection tool of ArcGIS took 20 seconds to do the same thing.  Those times seem to be context specific, as in my problem, gIntersection() was the slowest with 799 seconds, while %over% did the task in 250 seconds and overlay() in 119.  overlay() was still the fastest function.
> 
> So, it seems there clearly is room for amelioration of the %over% function.  And my next question is, why is overlay() deprecated? In the help, it says: "This function is deprecated, as it has some inconsistences." but I did not find any reference on what are those "inconsistences".  Going from overlay() to %over% seems more like a downgrade than a upgrade to me.  I implemented overlay() in my code instead of %over%, saving an incredible amount of time. However I'm a little stressed about it as it may cause problems or I may lose the function in a future version of the sp package.
> 
> So I guess anybody motivated to ameliorate the %over% function could start by understanding the difference between it and the overlay() function.  Sadly, I'm no programmer so I can' help here.
> 
> Best regards,
> Bastien Ferland-Raymond
> 
> 
> Date: Tue, 28 Feb 2012 11:38:04 -0500
> From: Francis Markham <francis.markham at anu.edu.au>
> 
> I've had examples in the past where using %over% from the sp package takes
> all available RAM (7GB) and several hours, while ArcGIS takes about 300MB
> and 5 minutes, so I would agree that there is plenty of room for
> improvement here. I'll try to give a reproducable example in the coming
> weeks when I return from travel.
> 
> This is a critical issue for me insofar as spatial joins are a routine
> procedure for me and but without reasonable speed for producedures such as
> this I cannot perform all my analysis in R, making for a more complex,
> error prone work flow and scuttling the possibility of "reproducable
> research."
> 
> On a related note, does the 'sp' package have an accessible bug tracker?
> I'd like to be able to contribute to improving this very useful package if
> at all possible, but I'm not sure where to begin.
> 
> Warm regards,
> 
> Francis Markham
> Research Associate
> Fenner School of Environment and Society
> Australian National University


