From thi_veloso at yahoo.com.br  Sat Jun  1 05:01:57 2013
From: thi_veloso at yahoo.com.br (Thiago V. dos Santos)
Date: Fri, 31 May 2013 20:01:57 -0700 (PDT)
Subject: [R-sig-Geo] Classify 106 netcdf's based on their spooled range
In-Reply-To: <1370016048.20610.YahooMailNeo@web121903.mail.ne1.yahoo.com>
References: <1369714180.38314.YahooMailNeo@web121901.mail.ne1.yahoo.com>
	<CANtt_hyMP1p4MxukEwE5ZCcaH8AOCW5ZGYCPQFqBDiZs-Vyecg@mail.gmail.com>
	<1369798364.68984.YahooMailNeo@web121904.mail.ne1.yahoo.com>
	<CANtt_hz_okJw7YG1eVSw=0ROhNn1ueDLu3h_u86paV4QwPBgrQ@mail.gmail.com>
	<1370016048.20610.YahooMailNeo@web121903.mail.ne1.yahoo.com>
Message-ID: <1370055717.24177.YahooMailNeo@web121904.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130531/fdf36803/attachment.pl>

From lukaslehnert at googlemail.com  Sat Jun  1 07:41:34 2013
From: lukaslehnert at googlemail.com (Lukas Lehnert)
Date: Sat, 01 Jun 2013 07:41:34 +0200
Subject: [R-sig-Geo] Create raster data set using rgdal
In-Reply-To: <CANVKczMm3Yj-54Ots35hNAER0EXXAc6_xEFRwRLUccj=i6hw3A@mail.gmail.com>
References: <85b4abbb5599452499264e860b8d4508@EX-0-HT0.lancs.local>
	<CANVKczMm3Yj-54Ots35hNAER0EXXAc6_xEFRwRLUccj=i6hw3A@mail.gmail.com>
Message-ID: <2717147.1ilWQHfldg@lujola>

Thank you for the reply. I made a stupid mistake in the last post. I meant 
specifying number of bands, rows and columns in the newly created image (and 
not omitting). I know the raster package and the creation options. However I 
need to use rgdal and not the raster package for that purpose.

Best regards

Lukas

Am Freitag, 31. Mai 2013, 17:29:55 schrieb Barry Rowlingson:
> On Fri, May 31, 2013 at 3:19 PM, Lukas Lehnert
> 
> <lukaslehnert at googlemail.com> wrote:
> > Dear all,
> > 
> > is there any recommended way to create a new raster file (if possible of
> > Envi- format) using rgdal by simply omitting the number of bands,
> > columns, rows and the datatype? How can I fill that file with new data?
> 
>  Did you mean "omitting" (leaving out)? Or did you mean "specifying"?
> Hard to know what's left if you omit all that information!
> 
>  I'd use the raster package. rgdal and raster don't really let you
> "fill in" existing files, you have to read them in and write them out
> into R objects.
> 
> Here's how to create an empty raster object with an extent, number of
> rows and columns, then put some random numbers in it and plot. See
> ?writeRaster for how to create your Envi output file.
> 
>  > r = raster(nrows=180, ncols=360, xmn=-180, xmx=180, ymn=-90, ymx=90)
>  > r
> 
> class       : RasterLayer
> dimensions  : 180, 360, 64800  (nrow, ncol, ncell)
> resolution  : 1, 1  (x, y)
> extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=longlat +datum=WGS84
> 
>  > r[]=runif(64800)
>  > plot(r)
>  > ?writeRaster
> 
> Barry


From b.rowlingson at lancaster.ac.uk  Sat Jun  1 10:11:30 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sat, 1 Jun 2013 09:11:30 +0100
Subject: [R-sig-Geo] Create raster data set using rgdal
In-Reply-To: <1b59f38f06534fa3a68c97f174a5410d@EX-0-HT0.lancs.local>
References: <85b4abbb5599452499264e860b8d4508@EX-0-HT0.lancs.local>
	<CANVKczMm3Yj-54Ots35hNAER0EXXAc6_xEFRwRLUccj=i6hw3A@mail.gmail.com>
	<1b59f38f06534fa3a68c97f174a5410d@EX-0-HT0.lancs.local>
Message-ID: <CANVKczMnjYh6OgUDLrN1eakwf5G5v5RWFLHP39-iP2-tRYs+Kg@mail.gmail.com>

On Sat, Jun 1, 2013 at 6:41 AM, Lukas Lehnert
<lukaslehnert at googlemail.com> wrote:
> Thank you for the reply. I made a stupid mistake in the last post. I meant
> specifying number of bands, rows and columns in the newly created image (and
> not omitting). I know the raster package and the creation options. However I
> need to use rgdal and not the raster package for that purpose.

 Okay, I think we need to get this absolutely clear then...

 You want to create a file *on disk* - ie your primary interest is not
in creating an R object, but with creating a file on disk that some
other application could read.

 If so, why can't you use the raster package? It's what it's there for.

 Otherwise, purely using rgdal, you first create a
SpatialPixelsDataFrame and then save it with writeGDAL(). The
documentation is all there.

Barry


From hnstedu at 163.com  Sat Jun  1 15:52:54 2013
From: hnstedu at 163.com (hnstedu)
Date: Sat, 1 Jun 2013 21:52:54 +0800 (CST)
Subject: [R-sig-Geo] dynamic spatial panel data model
Message-ID: <68750a40.9520.13f00032919.Coremail.hnstedu@163.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130601/f1568ce4/attachment.pl>

From agus.camacho at gmail.com  Sun Jun  2 05:39:17 2013
From: agus.camacho at gmail.com (Agus Camacho)
Date: Sun, 2 Jun 2013 00:39:17 -0300
Subject: [R-sig-Geo] What means this warning: returning values at CELL
 NUMBERS (not coordinates) : 49047 and 49646
Message-ID: <CALsJ7pT3GU+yyoRBb5E_p7yC4ehjNcc9ZXvLEucZefyArPQ=6w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130602/eea40e1d/attachment.pl>

From zhangsq1988 at gmail.com  Sun Jun  2 10:47:49 2013
From: zhangsq1988 at gmail.com (jason)
Date: Sun, 2 Jun 2013 01:47:49 -0700 (PDT)
Subject: [R-sig-Geo] how to fit space-time variogram model
Message-ID: <1370162869499-7583707.post@n2.nabble.com>

Hi all,
I am trying to carry out space-time (ST) kriging. I want to make ST ordinary
kriging with sparse data set and I can get the STSDF object now. but i don't
know how to fit the space-time variogram. Is there a way to plot temporal
and spatial variogram separately, i read some papers which show these plots.
In spatial kriging i can fit the variogram model by eye, i have no idea how
to get the variogram when using temporal-spatio data.

Thank you all in advance! 

With my best regards, 

Jason
East China Normal University



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/how-to-fit-space-time-variogram-model-tp7583707.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From alexandresantosbr at yahoo.com.br  Mon Jun  3 04:30:05 2013
From: alexandresantosbr at yahoo.com.br (ASANTOS)
Date: Sun, 02 Jun 2013 22:30:05 -0400
Subject: [R-sig-Geo] Plot a single PolySet2SpatialPolygons selected in a
	shapefile
In-Reply-To: <51657141.3040609@yahoo.com.br>
References: <51657141.3040609@yahoo.com.br>
Message-ID: <51ABFFAD.8070301@yahoo.com.br>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130602/a5caf5c0/attachment.pl>

From jgrn at illinois.edu  Mon Jun  3 23:07:16 2013
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Mon, 3 Jun 2013 16:07:16 -0500
Subject: [R-sig-Geo] spatial.tools 1.0.2 now out
Message-ID: <CABG0rfss5LfK3rAuoOF84fpd+=ewDvQ5iOy7N0qa2CTirVkJ7A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130603/401d7173/attachment.pl>

From lfelliott at hotmail.com  Tue Jun  4 13:49:24 2013
From: lfelliott at hotmail.com (LeRoy Elliott)
Date: Tue, 4 Jun 2013 11:49:24 +0000
Subject: [R-sig-Geo] how to generate perpendicular transects along a line
	feature
In-Reply-To: <mailman.17.1370340004.4302.r-sig-geo@r-project.org>
References: <mailman.17.1370340004.4302.r-sig-geo@r-project.org>
Message-ID: <BAY167-W140A6997EF69FE36973BDE8A69E0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130604/24c9ac88/attachment.pl>

From lubinbin220 at gmail.com  Tue Jun  4 15:37:58 2013
From: lubinbin220 at gmail.com (binbin lu)
Date: Tue, 4 Jun 2013 14:37:58 +0100
Subject: [R-sig-Geo] GWmodel package
Message-ID: <CANuoaEGp-7_A6wrurdc4wip9hZPLAqd+AgvZZ7vLh331CZTqnw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130604/6eec274b/attachment.pl>

From ben.graeler at uni-muenster.de  Tue Jun  4 16:15:16 2013
From: ben.graeler at uni-muenster.de (=?ISO-8859-1?Q?Benedikt_Gr=E4ler?=)
Date: Tue, 04 Jun 2013 16:15:16 +0200
Subject: [R-sig-Geo] how to fit space-time variogram model
In-Reply-To: <1370162869499-7583707.post@n2.nabble.com>
References: <1370162869499-7583707.post@n2.nabble.com>
Message-ID: <51ADF674.9070105@uni-muenster.de>

Dear Jason,

using the gstat package (preferably from r-forge), you might want to 
take a look at ?variogramST to calculate a spatio-temporal sample 
variogram surface and demo(stkrige) for fitting and visual inspection 
possibilities.

Kind regards,

  Ben

On 02.06.2013 10:47, jason wrote:
> Hi all,
> I am trying to carry out space-time (ST) kriging. I want to make ST ordinary
> kriging with sparse data set and I can get the STSDF object now. but i don't
> know how to fit the space-time variogram. Is there a way to plot temporal
> and spatial variogram separately, i read some papers which show these plots.
> In spatial kriging i can fit the variogram model by eye, i have no idea how
> to get the variogram when using temporal-spatio data.
>
> Thank you all in advance!
>
> With my best regards,
>
> Jason
> East China Normal University
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/how-to-fit-space-time-variogram-model-tp7583707.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Benedikt Gr?ler

ifgi - Institute for Geoinformatics
University of Muenster

http://ifgi.uni-muenster.de/graeler

Phone: +49 251 83-33082
Mail: ben.graeler at uni-muenster.de


From birgit.mannig at uni-wuerzburg.de  Tue Jun  4 18:27:19 2013
From: birgit.mannig at uni-wuerzburg.de (Birgit Mannig)
Date: Tue, 04 Jun 2013 18:27:19 +0200
Subject: [R-sig-Geo] projectRaster() to Goode Homolosine
Message-ID: <20130604182719.36885jvfa5wj2gyv@webmail.uni-wuerzburg.de>

Dear all,

I tried to project a Raster file (orignal projection: UTM) to a file  
in the Goode projection.
The re-projection with proj4 was obviosly not correct, neither was a  
re-projection from a geographical lon/lat file.
Does anyone know if this is a general problem with R/proj4?

Otherwise, I might have produced a faulty raster file. I used the USGS  
Global Ecosystem Data (http://edc2.usgs.gov/glcc/globdoc2_0.php),  
provided as raw binary, and had to create the Raster myself:

ny <- 17347
nx <- 40031
goge <-  
raster(xmn=-20015500,xmx=20015500,ymn=-8673500,ymx=8673500,nrows=ny,ncols=nx,crs="+proj=goode  
+a=6370997")
values(goge) <- binfromFTP

Although the created Raster File looked good to me naturally the error  
could still occur in this step.

Afterwards I just used:
projectRaster(infile,goge, method="ngb")


Any hints are very much appreciated!

Kind regards,
Birgit


From forrest at ufl.edu  Tue Jun  4 18:33:44 2013
From: forrest at ufl.edu (Forrest Stevens)
Date: Tue, 4 Jun 2013 12:33:44 -0400
Subject: [R-sig-Geo] projectRaster() to Goode Homolosine
In-Reply-To: <20130604182719.36885jvfa5wj2gyv@webmail.uni-wuerzburg.de>
References: <20130604182719.36885jvfa5wj2gyv@webmail.uni-wuerzburg.de>
Message-ID: <CAEBQMMneA3GuGYnOnG4t_Zm5R7Aj3-BJOxoJ5pUES_ivjuL7eA@mail.gmail.com>

Hi Birgit, there's something wrong with your call to raster() as the
xmin/xmax and ymin/ymax values should not be identical.  Could you
confirm what the proper extent should be for the raster you're
creating?

Forrest

On Tue, Jun 4, 2013 at 12:27 PM, Birgit Mannig
<birgit.mannig at uni-wuerzburg.de> wrote:
> Dear all,
>
> I tried to project a Raster file (orignal projection: UTM) to a file in the
> Goode projection.
> The re-projection with proj4 was obviosly not correct, neither was a
> re-projection from a geographical lon/lat file.
> Does anyone know if this is a general problem with R/proj4?
>
> Otherwise, I might have produced a faulty raster file. I used the USGS
> Global Ecosystem Data (http://edc2.usgs.gov/glcc/globdoc2_0.php), provided
> as raw binary, and had to create the Raster myself:
>
> ny <- 17347
> nx <- 40031
> goge <-
> raster(xmn=-20015500,xmx=20015500,ymn=-8673500,ymx=8673500,nrows=ny,ncols=nx,crs="+proj=goode
> +a=6370997")
> values(goge) <- binfromFTP
>
> Although the created Raster File looked good to me naturally the error could
> still occur in this step.
>
> Afterwards I just used:
> projectRaster(infile,goge, method="ngb")
>
>
> Any hints are very much appreciated!
>
> Kind regards,
> Birgit
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Forrest R. Stevens
Ph.D. Candidate, QSE3 IGERT Fellow
Department of Geography
Land Use and Environmental Change Institute
University of Florida
www.clas.ufl.edu/users/forrest


From birgit.mannig at uni-wuerzburg.de  Tue Jun  4 18:44:09 2013
From: birgit.mannig at uni-wuerzburg.de (Birgit Mannig)
Date: Tue, 04 Jun 2013 18:44:09 +0200
Subject: [R-sig-Geo] projectRaster() to Goode Homolosine
In-Reply-To: <CAEBQMMneA3GuGYnOnG4t_Zm5R7Aj3-BJOxoJ5pUES_ivjuL7eA@mail.gmail.com>
References: <20130604182719.36885jvfa5wj2gyv@webmail.uni-wuerzburg.de>
	<CAEBQMMneA3GuGYnOnG4t_Zm5R7Aj3-BJOxoJ5pUES_ivjuL7eA@mail.gmail.com>
Message-ID: <20130604184409.19374bwhwqnmwlzt@webmail.uni-wuerzburg.de>

Thanks for the fast answer!

This is the extent as given by the USGS -- it's a global map.  
Actually, what is given is:

Projection Type: Interrupted Goode Homolosine
     Units of measure: meters
     Pixel Size: 1000 meters
     Radius of sphere: 6370997 m.
     XY corner coordinates (center of pixel) in projection units (meters):
         Lower left: (-20015000, -8673000)
         Upper left: (-20015000, 8673000)
         Upper right: (20015000, 8673000)
         Lower right: (20015000, -8673000)


The "interrupted areas" (where there is no real map/world) are filled  
with dummy values in the binary file.
Note the difference in sign for xmn/xmx and ymn/ymx. The resulting  
plot looks fine.

All the best,
Birgit


Zitat von Forrest Stevens <forrest at ufl.edu>:

> Hi Birgit, there's something wrong with your call to raster() as the
> xmin/xmax and ymin/ymax values should not be identical.  Could you
> confirm what the proper extent should be for the raster you're
> creating?
>
> Forrest
>
> On Tue, Jun 4, 2013 at 12:27 PM, Birgit Mannig
> <birgit.mannig at uni-wuerzburg.de> wrote:
>> Dear all,
>>
>> I tried to project a Raster file (orignal projection: UTM) to a file in the
>> Goode projection.
>> The re-projection with proj4 was obviosly not correct, neither was a
>> re-projection from a geographical lon/lat file.
>> Does anyone know if this is a general problem with R/proj4?
>>
>> Otherwise, I might have produced a faulty raster file. I used the USGS
>> Global Ecosystem Data (http://edc2.usgs.gov/glcc/globdoc2_0.php), provided
>> as raw binary, and had to create the Raster myself:
>>
>> ny <- 17347
>> nx <- 40031
>> goge <-
>> raster(xmn=-20015500,xmx=20015500,ymn=-8673500,ymx=8673500,nrows=ny,ncols=nx,crs="+proj=goode
>> +a=6370997")
>> values(goge) <- binfromFTP
>>
>> Although the created Raster File looked good to me naturally the error could
>> still occur in this step.
>>
>> Afterwards I just used:
>> projectRaster(infile,goge, method="ngb")
>>
>>
>> Any hints are very much appreciated!
>>
>> Kind regards,
>> Birgit
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
> --
> Forrest R. Stevens
> Ph.D. Candidate, QSE3 IGERT Fellow
> Department of Geography
> Land Use and Environmental Change Institute
> University of Florida
> www.clas.ufl.edu/users/forrest
>



-- 
Dipl.-Geogr. Birgit Mannig

Universit?t W?rzburg
Institut f?r Geographie und Geologie
-Physische Geographie-
Zi. 120
Am Hubland
97074 W?rzburg

Tel. +49-931-31-81319
Fax. +49-931-31-85544
birgit.mannig at uni-wuerzburg.de


From b.rowlingson at lancaster.ac.uk  Tue Jun  4 20:23:54 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 4 Jun 2013 19:23:54 +0100
Subject: [R-sig-Geo] how to generate perpendicular transects along a
	line feature
In-Reply-To: <f9cdf3deff364641bb843000132bd742@EX-0-HT0.lancs.local>
References: <mailman.17.1370340004.4302.r-sig-geo@r-project.org>
	<f9cdf3deff364641bb843000132bd742@EX-0-HT0.lancs.local>
Message-ID: <CANVKczPppF8xxVMhcegWgsfpX=VyesmmLwPWHCAkTiPBq7T2JQ@mail.gmail.com>

On Tue, Jun 4, 2013 at 12:49 PM, LeRoy Elliott <lfelliott at hotmail.com> wrote:
> I'd like to generate 100 m long transects perpendicular to a stream (represented as a line feature in a shapefile) at 50 m intervals along the streams length. Seems likely that someone has already developed an automated way to do this, but I can't seem to find it.  Any suggestions?

 Shouldn't be that hard....

 Is the stream a single line feature that can be just a series of x,y,
coordinates? You've not got a stream network? If its just a single
line feature of connected x,y coordinates then step 1 is fairly easy:

 step 1. start at one end, compute cumulative line segment lengths,
work out which segments seq(0,length(stream), by=50) fall into. Work
out how far along each line segment those distances occur, compute x,y

 step 2. use the end points of the line segment to compute the angle
(atan2(dx,dy))

 step 3. add pi to the angle, do a quick sine and cosine computation
to get the transect perpendicular

Is your line feature that simple?

Barry


From mhbarbian at gmail.com  Tue Jun  4 20:53:44 2013
From: mhbarbian at gmail.com (=?ISO-8859-1?Q?M=E1rcia_Barbian?=)
Date: Tue, 4 Jun 2013 15:53:44 -0300
Subject: [R-sig-Geo] spatio-temporal covariance
Message-ID: <CAAiZPzFwWeO4ndgh8UU9OEJRH+AfxTwRvwYGRC3dy1t3sWu_7A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130604/09e184db/attachment.pl>

From forrest at ufl.edu  Tue Jun  4 22:03:58 2013
From: forrest at ufl.edu (Forrest Stevens)
Date: Tue, 4 Jun 2013 16:03:58 -0400
Subject: [R-sig-Geo] projectRaster() to Goode Homolosine
In-Reply-To: <20130604184409.19374bwhwqnmwlzt@webmail.uni-wuerzburg.de>
References: <20130604182719.36885jvfa5wj2gyv@webmail.uni-wuerzburg.de>
	<CAEBQMMneA3GuGYnOnG4t_Zm5R7Aj3-BJOxoJ5pUES_ivjuL7eA@mail.gmail.com>
	<20130604184409.19374bwhwqnmwlzt@webmail.uni-wuerzburg.de>
Message-ID: <CAEBQMM=jrSuK0aWvZ_8XC86HP+B=AanoewvqJf2yJXe2L79iEg@mail.gmail.com>

Hi Birgit,

I apologize for not seeing the negatives in your extent parameters,
those are indeed correct.  I think the problem that you're having is
probably occurring in however you're reading in the values and
assigning them to the raster you create.  The projectRaster() function
seems to work just fine for me going from several different
projections to Interrupted Goode Homolosine.  I don't know if this
will help you or not but I seem to be able to project rasters and
vectors easily to IGH (R 3.0.1, rgdal 0.8-9, raster 2.1-30/r2743).
Please see my test code below (which creates a header for the
downloaded goge2_0g.img file so we can read its values directly with
raster from disk) below and see if it might offer any clues:


require(raster)

## Set this to wherever you downloaded and unzipped the goge2_0g.img file:
setwd("D:/tmp/test/")

ny <- 17347
nx <- 40031

## We don't need to read the values directly as we are going to create
a header to associate with this file below:
#goge_val <- readBin("goge2_0g.img", n=ny*nx, what="integer", size=1,
signed=FALSE)

goge2_0g <- raster(xmn=-20015500,xmx=20015500,ymn=-8673500,ymx=8673500,nrows=ny,ncols=nx,crs="+proj=goode
+a=6370997")
dataType(goge2_0g) <- "INT1U"

## I wish we didn't have to do this step but creating a placeholder
BIL raster seems to be the only way to write a .hdr file:
goge2_0g <- writeStart(goge2_0g, "goge2_0g.bil", format="BIL",
datatype="INT1U", overwrite=TRUE)
writeStop(goge2_0g)
hdr(goge2_0g, format="BIL")

## Unlink (remove) our temporary .bil file leaving behind the .hdr
file for loading with raster:
unlink("goge2_0g.bil")

## Now load our raster file, which should now be in the specified
projection and map info from above:
goge2_0g <- raster("goge2_0g.img")

## Specify our projection since the BIL HDR format does not include
projection information, only coords:
projection(goge2_0g) <- "+proj=goode +a=6370997"


## Now let's try to reproject some sample data to Interrupted Goode
Homolsine and overlay it:
rs <- raster(system.file("external/test.grd", package="raster"))
rs_prj <- projectRaster(rs, crs="+proj=goode +a=6370997")

plot(goge2_0g, ext=extent(rs_prj), legend=FALSE)
plot(rs_prj, add=TRUE)



Sincerely,
Forrest

On Tue, Jun 4, 2013 at 12:44 PM, Birgit Mannig
<birgit.mannig at uni-wuerzburg.de> wrote:
> Thanks for the fast answer!
>
> This is the extent as given by the USGS -- it's a global map. Actually, what
> is given is:
>
> Projection Type: Interrupted Goode Homolosine
>     Units of measure: meters
>     Pixel Size: 1000 meters
>     Radius of sphere: 6370997 m.
>     XY corner coordinates (center of pixel) in projection units (meters):
>         Lower left: (-20015000, -8673000)
>         Upper left: (-20015000, 8673000)
>         Upper right: (20015000, 8673000)
>         Lower right: (20015000, -8673000)
>
>
> The "interrupted areas" (where there is no real map/world) are filled with
> dummy values in the binary file.
> Note the difference in sign for xmn/xmx and ymn/ymx. The resulting plot
> looks fine.
>
> All the best,
> Birgit
>
>
> Zitat von Forrest Stevens <forrest at ufl.edu>:
>
>> Hi Birgit, there's something wrong with your call to raster() as the
>> xmin/xmax and ymin/ymax values should not be identical.  Could you
>> confirm what the proper extent should be for the raster you're
>> creating?
>>
>> Forrest
>>
>> On Tue, Jun 4, 2013 at 12:27 PM, Birgit Mannig
>> <birgit.mannig at uni-wuerzburg.de> wrote:
>>>
>>> Dear all,
>>>
>>> I tried to project a Raster file (orignal projection: UTM) to a file in
>>> the
>>> Goode projection.
>>> The re-projection with proj4 was obviosly not correct, neither was a
>>> re-projection from a geographical lon/lat file.
>>> Does anyone know if this is a general problem with R/proj4?
>>>
>>> Otherwise, I might have produced a faulty raster file. I used the USGS
>>> Global Ecosystem Data (http://edc2.usgs.gov/glcc/globdoc2_0.php),
>>> provided
>>> as raw binary, and had to create the Raster myself:
>>>
>>> ny <- 17347
>>> nx <- 40031
>>> goge <-
>>>
>>> raster(xmn=-20015500,xmx=20015500,ymn=-8673500,ymx=8673500,nrows=ny,ncols=nx,crs="+proj=goode
>>> +a=6370997")
>>> values(goge) <- binfromFTP
>>>
>>> Although the created Raster File looked good to me naturally the error
>>> could
>>> still occur in this step.
>>>
>>> Afterwards I just used:
>>> projectRaster(infile,goge, method="ngb")
>>>
>>>
>>> Any hints are very much appreciated!
>>>
>>> Kind regards,
>>> Birgit
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>>
>>
>> --
>> Forrest R. Stevens
>> Ph.D. Candidate, QSE3 IGERT Fellow
>> Department of Geography
>> Land Use and Environmental Change Institute
>> University of Florida
>> www.clas.ufl.edu/users/forrest
>>
>
>
>
> --
> Dipl.-Geogr. Birgit Mannig
>
> Universit?t W?rzburg
> Institut f?r Geographie und Geologie
> -Physische Geographie-
> Zi. 120
> Am Hubland
> 97074 W?rzburg
>
> Tel. +49-931-31-81319
> Fax. +49-931-31-85544
> birgit.mannig at uni-wuerzburg.de



-- 
Forrest R. Stevens
Ph.D. Candidate, QSE3 IGERT Fellow
Department of Geography
Land Use and Environmental Change Institute
University of Florida
www.clas.ufl.edu/users/forrest


From lfelliott at hotmail.com  Wed Jun  5 12:45:49 2013
From: lfelliott at hotmail.com (LeRoy Elliott)
Date: Wed, 5 Jun 2013 10:45:49 +0000
Subject: [R-sig-Geo] how to generate perpendicular transects along a
 line feature
In-Reply-To: <CANVKczPppF8xxVMhcegWgsfpX=VyesmmLwPWHCAkTiPBq7T2JQ@mail.gmail.com>
References: <mailman.17.1370340004.4302.r-sig-geo@r-project.org>,
	<f9cdf3deff364641bb843000132bd742@EX-0-HT0.lancs.local>,
	<CANVKczPppF8xxVMhcegWgsfpX=VyesmmLwPWHCAkTiPBq7T2JQ@mail.gmail.com>
Message-ID: <BAY167-W99DB4D74F2098E6D29AC6CA69F0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130605/5e8274da/attachment.pl>

From lfelliott at hotmail.com  Wed Jun  5 12:49:57 2013
From: lfelliott at hotmail.com (LeRoy Elliott)
Date: Wed, 5 Jun 2013 10:49:57 +0000
Subject: [R-sig-Geo] how to generate perpendicular transects along
	a	line feature
In-Reply-To: <mailman.13.1370426404.24358.r-sig-geo@r-project.org>
References: <mailman.13.1370426404.24358.r-sig-geo@r-project.org>
Message-ID: <BAY167-W501A7AC07B907AC01CD204A69F0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130605/12906391/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Wed Jun  5 14:36:28 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 5 Jun 2013 13:36:28 +0100
Subject: [R-sig-Geo] how to generate perpendicular transects along a
	line feature
In-Reply-To: <7ac07289817943d087b461abb6c69759@EX-0-HT0.lancs.local>
References: <mailman.17.1370340004.4302.r-sig-geo@r-project.org>
	<f9cdf3deff364641bb843000132bd742@EX-0-HT0.lancs.local>
	<CANVKczPppF8xxVMhcegWgsfpX=VyesmmLwPWHCAkTiPBq7T2JQ@mail.gmail.com>
	<7ac07289817943d087b461abb6c69759@EX-0-HT0.lancs.local>
Message-ID: <CANVKczNHy7acQGVLBqkTyGvmf5sCcZ4jmKX5nZ16TrZnk=VT4w@mail.gmail.com>

Nothing else to do this lunchtime...

Two functions - one computes evenly spaced points along a set of xy
coordinates, the other works out the end point of transects centred on
those points:

evenspace <- function(xy, sep, start=0, size){

  dx <- c(0,diff(xy[,1]))
  dy <- c(0,diff(xy[,2]))
  dseg <- sqrt(dx^2+dy^2)
  dtotal <- cumsum(dseg)

  linelength = sum(dseg)

  pos = seq(start,linelength, by=sep)

  whichseg = unlist(lapply(pos, function(x){sum(dtotal<=x)}))

  pos=data.frame(pos=pos,whichseg=whichseg,
    x0=xy[whichseg,1],
    y0=xy[whichseg,2],
    dseg = dseg[whichseg+1],
    dtotal = dtotal[whichseg],
    x1=xy[whichseg+1,1],
    y1=xy[whichseg+1,2]
    )

  pos$further =  pos$pos - pos$dtotal
  pos$f = pos$further/pos$dseg
  pos$x = pos$x0 + pos$f * (pos$x1-pos$x0)
  pos$y = pos$y0 + pos$f * (pos$y1-pos$y0)

  pos$theta = atan2(pos$y0-pos$y1,pos$x0-pos$x1)

  return(pos[,c("x","y","x0","y0","x1","y1","theta")])

}

transect <- function( tpts, tlen){

  tpts$thetaT = tpts$theta+pi/2
  dx = tlen*cos(tpts$thetaT)
  dy = tlen*sin(tpts$thetaT)
  return(
         data.frame(x0 = tpts$x + dx,
                    y0 = tpts$y + dy,
                    x1 = tpts$x - dx,
                    y1 = tpts$y -dy)
         )

}

Apologies for complete lack of documentation and comments! If I had
two lunchtimes this would be all written up, documented, and packaged
onto GitHub....

Sample usage:

1. make a meandering stream:

> stream = data.frame(x=seq(0,20,len=50))
> stream$y=sin(stream$x/3)

2. plot it - note asp=1 is essential:

> plot(stream,type="l", asp=1)

3. compute evenly spaced (1.5 units) transect centres:

> tspts = evenspace(stream,1.5)
> points(tspts,pch="X")

4. compute perpendicular transects of length 2:

> tslines = transect(tspts,2)
> segments(tslines$x0,tslines$y0,tslines$x1,tslines$y1)

 the transect function takes the output of the evenspace function and
returns a data frame with the end points suitable for feeding into
segments(). You can convert all these things into sp-class
SpatialLines objects and save them as Shapefiles...

Nice example, I might write this up as a blog post on that RStudio
blog thing I've forgotten the name of, or use it for some teaching I'm
doing.

 The next interesting step would be to use rgeos:gBuffer to generate
buffer zones round the transects....

Barry


From lukaslehnert at googlemail.com  Wed Jun  5 14:57:05 2013
From: lukaslehnert at googlemail.com (Lukas Lehnert)
Date: Wed, 05 Jun 2013 14:57:05 +0200
Subject: [R-sig-Geo] Create raster data set using rgdal
In-Reply-To: <CANVKczMnjYh6OgUDLrN1eakwf5G5v5RWFLHP39-iP2-tRYs+Kg@mail.gmail.com>
References: <85b4abbb5599452499264e860b8d4508@EX-0-HT0.lancs.local>
	<1b59f38f06534fa3a68c97f174a5410d@EX-0-HT0.lancs.local>
	<CANVKczMnjYh6OgUDLrN1eakwf5G5v5RWFLHP39-iP2-tRYs+Kg@mail.gmail.com>
Message-ID: <2241282.j1QPb63X1I@kobold>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130605/6b5eed10/attachment.pl>

From zaholdenfs at gmail.com  Wed Jun  5 16:36:47 2013
From: zaholdenfs at gmail.com (Zack Holden)
Date: Wed, 5 Jun 2013 08:36:47 -0600
Subject: [R-sig-Geo] solved: raster/ncdf4 error: too many open files
Message-ID: <CAGC_mZSrHXariz6kPSM5i_wwQ3Cmkfkoqr7iQZ6_Hxc4eEuWQQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130605/3b192fca/attachment.pl>

From l.hilger at ku.de  Wed Jun  5 17:11:41 2013
From: l.hilger at ku.de (Ludwig Hilger)
Date: Wed, 5 Jun 2013 08:11:41 -0700 (PDT)
Subject: [R-sig-Geo] Local plane fitting to Point Cloud
Message-ID: <1370445101083-7583724.post@n2.nabble.com>

Dear list,

I have a huge (laser measurement) point cloud (Shapefile with Z as an
attribute ("d.juli")) and I have also defined a SpatialGrid ("tdaten_SG")
object whose cells I want to fill using local plane fitting, i.e. I want to
fit a local plane to all points within a certain search distance around the
cell's center and write the corresponding value to the grid cell (so this is
DEM derivation from the points). I have tried the following:
krige(z ~ 1, locations = d.juli, newdata = tdaten_SG, maxdist = 0.5, nmax =
999)
But this does not seem to give the correct result (compared to other
Software). In Bivand et al I find Figure 8.9 and I guess what I want is
"local trend surface prediction"!? So I am wondering how to define and give
a trend function or how to achieve the above in general.

Thank you dear list again and best regards,
Ludwig



-----
Dipl. Geogr. Ludwig Hilger
Wiss. MA
Lehrstuhl f?r Physische Geographie
Katholische Universit?t Eichst?tt-Ingolstadt
Ostenstra?e 18
85072 Eichst?tt

Tel.: 08421-93-1180 
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Local-plane-fitting-to-Point-Cloud-tp7583724.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From horning at amnh.org  Wed Jun  5 22:56:45 2013
From: horning at amnh.org (Ned Horning)
Date: Wed, 5 Jun 2013 16:56:45 -0400
Subject: [R-sig-Geo] ext option for Raster's sampleRandom not working?
Message-ID: <51AFA60D.1020800@amnh.org>

Hi -

I am trying to run a script that calculates a common extent between two 
images than then uses that extent to restrict the random selection of 
cells from a raster using the sampleRandom function. For some reason it 
doesn't seem to be working although it used to work. It appears as if 
the "ext=TRUE" argument doesn't have an effect. The cells that are 
returned cover the entire image and are not restricted to the area 
defined by the "ext" variable.

Another thing I notiiced is that when I use "xy=TRUE" along with 
"cells=TRUE" the resulting coordinates do not appear to match with the 
cell numbers. When I use "xyFromCell" to calculate the coordinates of 
the center of a cell returned from sampleRandom I get a good result but 
it is different form the coordinates for that same cell returned from 
sampleRandom.

I checked the extent and it looks fine.

Would someone be able to check if the extent feature in SampleRandom is 
working in the Raster package. If someone thinks of something I'm doing 
wrong please let me know.

Here is the line of code I am using:
sampleCells <- sampleRandom(predImage, size=numSamps, cells=TRUE, 
ext=commonExt)[,1]

I'm using raster 2.1-25 with R 3.0 on Ubuntu 12.04 64 bit

Ned


From r.hijmans at gmail.com  Thu Jun  6 02:02:40 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 5 Jun 2013 17:02:40 -0700
Subject: [R-sig-Geo] ext option for Raster's sampleRandom not working?
In-Reply-To: <51AFA60D.1020800@amnh.org>
References: <51AFA60D.1020800@amnh.org>
Message-ID: <CANtt_hzizDcnB5ZZpJW69yhObQKOg-FpFxy5J9easJBZzNXa1A@mail.gmail.com>

Ned,
You are right, that does not work. I will fix it.
Robert

On Wed, Jun 5, 2013 at 1:56 PM, Ned Horning <horning at amnh.org> wrote:
> Hi -
>
> I am trying to run a script that calculates a common extent between two
> images than then uses that extent to restrict the random selection of cells
> from a raster using the sampleRandom function. For some reason it doesn't
> seem to be working although it used to work. It appears as if the "ext=TRUE"
> argument doesn't have an effect. The cells that are returned cover the
> entire image and are not restricted to the area defined by the "ext"
> variable.
>
> Another thing I notiiced is that when I use "xy=TRUE" along with
> "cells=TRUE" the resulting coordinates do not appear to match with the cell
> numbers. When I use "xyFromCell" to calculate the coordinates of the center
> of a cell returned from sampleRandom I get a good result but it is different
> form the coordinates for that same cell returned from sampleRandom.
>
> I checked the extent and it looks fine.
>
> Would someone be able to check if the extent feature in SampleRandom is
> working in the Raster package. If someone thinks of something I'm doing
> wrong please let me know.
>
> Here is the line of code I am using:
> sampleCells <- sampleRandom(predImage, size=numSamps, cells=TRUE,
> ext=commonExt)[,1]
>
> I'm using raster 2.1-25 with R 3.0 on Ubuntu 12.04 64 bit
>
> Ned
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From edzer.pebesma at uni-muenster.de  Thu Jun  6 03:26:17 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 05 Jun 2013 21:26:17 -0400
Subject: [R-sig-Geo] Local plane fitting to Point Cloud
In-Reply-To: <1370445101083-7583724.post@n2.nabble.com>
References: <1370445101083-7583724.post@n2.nabble.com>
Message-ID: <51AFE539.8060207@uni-muenster.de>

Ludwig, try

library(gstat)
demo(meuse, ask=FALSE)
x = krige(zinc~1,meuse,meuse.grid,degree=1)
image(x)

add maxdist=800 or so to krige() for local first order trend surfaces.

On 06/05/2013 11:11 AM, Ludwig Hilger wrote:
> Dear list,
> 
> I have a huge (laser measurement) point cloud (Shapefile with Z as an
> attribute ("d.juli")) and I have also defined a SpatialGrid ("tdaten_SG")
> object whose cells I want to fill using local plane fitting, i.e. I want to
> fit a local plane to all points within a certain search distance around the
> cell's center and write the corresponding value to the grid cell (so this is
> DEM derivation from the points). I have tried the following:
> krige(z ~ 1, locations = d.juli, newdata = tdaten_SG, maxdist = 0.5, nmax =
> 999)
> But this does not seem to give the correct result (compared to other
> Software). In Bivand et al I find Figure 8.9 and I guess what I want is
> "local trend surface prediction"!? So I am wondering how to define and give
> a trend function or how to achieve the above in general.
> 
> Thank you dear list again and best regards,
> Ludwig
> 
> 
> 
> -----
> Dipl. Geogr. Ludwig Hilger
> Wiss. MA
> Lehrstuhl f?r Physische Geographie
> Katholische Universit?t Eichst?tt-Ingolstadt
> Ostenstra?e 18
> 85072 Eichst?tt
> 
> Tel.: 08421-93-1180 
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Local-plane-fitting-to-Point-Cloud-tp7583724.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de


From manos.kalomenopoulos at wur.nl  Thu Jun  6 13:18:32 2013
From: manos.kalomenopoulos at wur.nl (Kalomenopoulos, Manos)
Date: Thu, 6 Jun 2013 11:18:32 +0000
Subject: [R-sig-Geo] Problem with extract {raster} function
In-Reply-To: <CANtt_hxN9nEhf7z4f3uNd6DUU3HZyrEHv33-=ck7U1th5s1O4g@mail.gmail.com>
References: <22F4D0EDF68494479BC955CFF9F011BB16BC53@SCOMP0936.wurnet.nl>
	<22F4D0EDF68494479BC955CFF9F011BB16BC66@SCOMP0936.wurnet.nl>
	<CANtt_hxN9nEhf7z4f3uNd6DUU3HZyrEHv33-=ck7U1th5s1O4g@mail.gmail.com>
Message-ID: <22F4D0EDF68494479BC955CFF9F011BB16D392@SCOMP0936.wurnet.nl>

Thanks a lot, Robert!
Could you please tell me how you cleaned the shapefile. I will need to clean my whole dataset, as this was just a small extract of it.
Thanks in advance,
Manos

-------------------------------------------------------
Manos Kalomenopoulos
Lab. of Geo-Information Science and Remote Sensing, Center for Geo-Information - Wageningen University
Department for Biogeochemical Integration, Max-Planck-Institute for Biogeochemistry, Jena
-------------------------------------------------------


-----Original Message-----
From: Robert J. Hijmans [mailto:r.hijmans at gmail.com] 
Sent: dinsdag 28 mei 2013 3:15
To: Kalomenopoulos, Manos
Cc: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] Problem with extract {raster} function

Manos,

I think this happens because s1pol is invalid (self-intersecting).
s2pol also has that problem but it works anyway. I have cleaned your shapefile and will send it to you via a separate email. With the cleaned shp file the problem does not occur. The script below shows the test for validity and the difference between the two data sources.

Robert

library(raster)
s1pol <- shapefile('1site.shp')
s2 <- shapefile('cln.shp')
library(rgeos)
gIsValid(s1pol)
# [1] FALSE
# Warning message:
# In RGEOSUnaryPredFunc(spgeom, byid, "rgeos_isvalid") :
#   Ring Self-intersection at or near point -4997474.25179449 -227339.61631866
gIsValid(s2)
#  [1] TRUE

# see the difference

r <- raster('1site.tif')
df1 <- extract(r,s1pol, df=TRUE, weights=TRUE, cellnumbers=TRUE)
names(df1) <- c('ID','cell', 'r', 'weight') # Extraction for test area a <- tapply(df1$weight, df1$cell, sum)
r1 <- raster(r)
r1[as.integer(names(a))] = a

df2 <- extract(r, s2, df=TRUE, weights=TRUE, cellnumbers=TRUE)
names(df2) <- c('ID','cell', 'r', 'weight') # Extraction for test area b <- tapply(df2$weight, df2$cell, sum)
r2 <- raster(r)
r2[as.integer(names(b))] <- b

s <- stack(r1, r2)
names(s) <- c('original', 'cleaned')
plot(s)


On Mon, May 20, 2013 at 11:25 AM, Kalomenopoulos, Manos <manos.kalomenopoulos at wur.nl> wrote:
> Hi everybody,
> I am experiencing a problem with the extract{raster} function, specifically the 'weights' argument.
>
> I have a raster and a polygon shapefile with 5 polygons (land cover classes).
> I am using extract to obtain cellnumbers and the weights (percentage of cover of each class per raster cell).
> The sum of the five weights per cell should sum to 100% (except for those cells not completely inside my AOI).
> However, there is an considerable amount of cells were that is not the case.
> I have been trying to track down the error, but can't understand it so far.
>
> I localized the erroneous cells in one example site (10x10km) and clipped the original shapefile to a smaller area containing these cells.
> The script below does the extraction once for the 10x10km sample and once for a smaller testsite containing 10 erroneous cells.
> Surprisingly, doing the extraction with the smaller testsite ALL weights sum up to 100%, even though the polygon data is exactly the same....
> Any ideas why and/or suggestions how to make it work properly for the bigger extent?
>
> Here my script:
>
>
> library(raster)
> library(reshape)
>
> # raster of AOI
>  r <- raster('1site.tif')
> # polygon shapefile of AOI with 5 different classes
>   s1pol <- shapefile('1site.shp')
>
> # polygon shapefile of test area with observed errors (clipped from s1pol)
>   s2pol <- shapefile('test.shp')
> # extract class names
>   classes <- s1pol$class
> ######################################################################
> ##
> # Extraction for complete AOI
>   df1 <- extract(r,s1pol, df=TRUE, weights=TRUE, cellnumbers=TRUE)
>     names(df1) <- c('ID','cell', 'r', 'weight1') # Extraction for test 
> area
>
> # Extraction for smaller site
>   df2 <- extract(r,s2pol, df=TRUE, weights=TRUE, cellnumbers=TRUE)
>     names(df2) <- c('ID','cell', 'r', 'weight2') 
> ######################################################################
> #####################
> ### Compairing
>
> # Reshape df's keeping only ID, cell and weight
>   df1new<-cast(df1[,c(1,2,4)],cell~ID)
>     names(df1new) <- c('cell',classes)
>
>   df2new<-cast(df2[,c(1,2,4)],cell~ID)
>     names(df2new) <- c('cell',classes) # Calculate class totals
>   df1new$totals <- mapply(df1new[,2], df1new[,3], 
> df1new[,4],df1new[,5],df1new[,6], FUN=function(v,w,x,y,z) 
> sum(c(v,w,x,y,z),na.rm=TRUE))
>
>   df2new$totals <- mapply(df2new[,2], df2new[,3], 
> df2new[,4],df2new[,5],df2new[,6], FUN=function(v,w,x,y,z) 
> sum(c(v,w,x,y,z),na.rm=TRUE))
>
> # Merge the two dataframes and select only rows with differnt totals
>   df <- as.data.frame(merge(df1new,df2new,by='cell'))
>
>     dfe <- subset(df, totals.x-totals.y !=0)
>       dfe$error <- dfe$totals.x-dfe$totals.y
>
> head(dfe)
>
> Link to the files needed to run this script:
> https://www.dropbox.com/s/n283rwew1ypxghv/extractProblem.7z
>
>
> Thanks in advance!
> -------------------------------------------------------
> Manos Kalomenopoulos
> Lab. of Geo-Information Science and Remote Sensing, Center for 
> Geo-Information - Wageningen University Department for Biogeochemical 
> Integration, Max-Planck-Institute for Biogeochemistry, Jena
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From l.hilger at ku.de  Thu Jun  6 15:16:25 2013
From: l.hilger at ku.de (Ludwig Hilger)
Date: Thu, 6 Jun 2013 06:16:25 -0700 (PDT)
Subject: [R-sig-Geo] Local plane fitting to Point Cloud
In-Reply-To: <51AFE539.8060207@uni-muenster.de>
References: <1370445101083-7583724.post@n2.nabble.com>
	<51AFE539.8060207@uni-muenster.de>
Message-ID: <1370524585428-7583729.post@n2.nabble.com>

Dear Prof. Pebesma,

this worked perfectly, of course. I should have had a even closer look to
krige's ... arguments :)

Thanks!



-----
Dipl. Geogr. Ludwig Hilger
Wiss. MA
Lehrstuhl f?r Physische Geographie
Katholische Universit?t Eichst?tt-Ingolstadt
Ostenstra?e 18
85072 Eichst?tt

Tel.: 08421-93-1180 
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Local-plane-fitting-to-Point-Cloud-tp7583724p7583729.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From oliveirajc1 at gmail.com  Thu Jun  6 15:30:04 2013
From: oliveirajc1 at gmail.com (Julio Oliveira)
Date: Thu, 6 Jun 2013 10:30:04 -0300
Subject: [R-sig-Geo] Violin plot without outlines
In-Reply-To: <mailman.13.1370512804.13234.r-sig-geo@r-project.org>
References: <mailman.13.1370512804.13234.r-sig-geo@r-project.org>
Message-ID: <79AD7F51-E1A4-47B3-A79B-DB74FFC59412@gmail.com>

Dears,

It's possible violin plot  ( package vioplot ) without outlines?

For example: I can box plot without outlines (boxplot(x, outline=F))

Regards,

julio


From villers.alexandre at gmail.com  Thu Jun  6 18:42:31 2013
From: villers.alexandre at gmail.com (Alexandre Villers)
Date: Thu, 6 Jun 2013 19:42:31 +0300
Subject: [R-sig-Geo] Simulating landscapes of categorical values
Message-ID: <CAFrtd2M75kPLRbQVzr8QZq5p3KCEiT4MuPLCog0K+MQ9AYY99A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130606/3b4ad7ed/attachment.pl>

From kalbasse at yahoo.com  Thu Jun  6 21:04:53 2013
From: kalbasse at yahoo.com (Kalbasse Group)
Date: Thu, 6 Jun 2013 12:04:53 -0700 (PDT)
Subject: [R-sig-Geo] spatialdataframe to spatial.polygon
Message-ID: <1370545493.17428.YahooMailNeo@web162604.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130606/56b1817d/attachment.pl>

From edzer.pebesma at uni-muenster.de  Fri Jun  7 05:44:37 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 06 Jun 2013 23:44:37 -0400
Subject: [R-sig-Geo] spatialdataframe to spatial.polygon
In-Reply-To: <1370545493.17428.YahooMailNeo@web162604.mail.bf1.yahoo.com>
References: <1370545493.17428.YahooMailNeo@web162604.mail.bf1.yahoo.com>
Message-ID: <51B15725.7010106@uni-muenster.de>

Kalbasse,

If you provide a code example that reproduces the error, we can try to
to help you.

On 06/06/2013 03:04 PM, Kalbasse Group wrote:
> Hi to all I am new in R
> I am trying to transform a spatialdataframe into a Spatial.Polygon file using the SptialEpi package with no success. This the code
> 
> 
> library(SpatialEpi)
> library(proj4)
> polygon <- ADpoly$polygon$polygon
> nrepeats <- ADpoly$polygon$nrepeats
> names <- ADpoly$data$ADIDU
> spatial.polygon <- polygon2spatial.polygon(polygon, coordinate.system== "+proj=lcc +lat_1=50 +lat_2=70 +lat_0=40 +lon_0=-96 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs +ellps=GRS80 +towgs84=0,0,0" ,names, nrepeats)
> 
> ADpoly is my spatialdataframe projected in canada lambert conformal
> 
> and this is the error:
> 
> cannot evaluate the  'obj' when selecting a mthod for the 'coordinates' function
> 
> Please may someone help me?
> 	[[alternative HTML version deleted]]
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de


From rossahmed at googlemail.com  Fri Jun  7 10:13:28 2013
From: rossahmed at googlemail.com (Ross Ahmed)
Date: Fri, 07 Jun 2013 09:13:28 +0100
Subject: [R-sig-Geo] gDifference
Message-ID: <CDD754B8.4F47%rossahmed@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130607/ba603bba/attachment.pl>

From Roger.Bivand at nhh.no  Fri Jun  7 12:45:07 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 7 Jun 2013 12:45:07 +0200
Subject: [R-sig-Geo] gDifference
In-Reply-To: <CDD754B8.4F47%rossahmed@gmail.com>
References: <CDD754B8.4F47%rossahmed@gmail.com>
Message-ID: <alpine.LRH.2.03.1306071232020.31779@reclus.nhh.no>

On Fri, 7 Jun 2013, Ross Ahmed wrote:

> Hi all
>
> I have this polygon and these lines:
>
> library(sp); library(rgeos)
> # polygon
> coords <- matrix(c(-1.798123, -1.793072, -1.805767, -1.804129, -1.798123,
> 55.68066, 55.67369, 55.67508, 55.68139, 55.68066), ncol=2)
> myPolygon <- Polygons(list(Polygon(coords)),  "myPolygon")
> myPolygon <- SpatialPolygons(list(myPolygon))
> proj4string(myPolygon) <- CRS("+proj=longlat +datum=WGS84 +ellps=WGS84
> +towgs84=0,0,0")
> plot(myPolygon)
>
> # lines
> line1 <- matrix(c(-1.79880, -1.79517, 55.67737, 55.67920), ncol=2)
> line2 <- matrix(c(-1.80231, -1.80679, 55.67764, 55.68004), ncol=2)
> line1L <- Line(line1)
> line2L <- Line(line2)
> my.lines <- Lines(list(line1L, line2L), ID="my.lines")
> myLines <- SpatialLines(list(my.lines))
> proj4string(myLines) <- CRS("+proj=longlat +datum=WGS84 +ellps=WGS84
> +towgs84=0,0,0")
> plot(myLines, add=T)
>
>
>
> I expected that the code below would remove parts of myPolygon that contain
> myLines:
>
> d <- gDifference(myPolygon, myLines)
> plot(d)
>
>
> However myPolygon seems unaffected. Why are the parts of myPolygon that
> contain myLines not being removed?

Well, lines have by definition zero width, so:

gIntersects(myPolygon, myLines)
gArea(gIntersection(myPolygon, myLines))

so there is no difference between myPolygon and d because nothing is being 
removed. If you buffer the lines, you see a difference:

gArea(myPolygon)
d <- gDifference(myPolygon, gBuffer(myLines, width=0.000001))
gArea(d)
plot(d)

http://www.vividsolutions.com/jts/bin/JTS%20Technical%20Specs.pdf
http://www.vividsolutions.com/jts/bin/JTS%20Developer%20Guide.pdf

Note that you get warnings for using operations on unprojected objects, 
because your assumption that apparently straight lines are straight is not 
justified.

Hope this clarifies,

Roger

>
> Thanks
> Ross
>
>
>
> 	[[alternative HTML version deleted]]

Please post plain text only.

>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From rossahmed at googlemail.com  Fri Jun  7 13:05:14 2013
From: rossahmed at googlemail.com (Ross Ahmed)
Date: Fri, 7 Jun 2013 12:05:14 +0100
Subject: [R-sig-Geo] gDifference
In-Reply-To: <alpine.LRH.2.03.1306071232020.31779@reclus.nhh.no>
References: <CDD754B8.4F47%rossahmed@gmail.com>
	<alpine.LRH.2.03.1306071232020.31779@reclus.nhh.no>
Message-ID: <076497F6-E7E0-49B2-A3A2-C33E0ADE1C62@gmail.com>

Many thanks for that Roger. Didn't know lines were defined as having zero width. 

Ross

On 7 Jun 2013, at 11:45, Roger Bivand <Roger.Bivand at nhh.no> wrote:

> On Fri, 7 Jun 2013, Ross Ahmed wrote:
> 
>> Hi all
>> 
>> I have this polygon and these lines:
>> 
>> library(sp); library(rgeos)
>> # polygon
>> coords <- matrix(c(-1.798123, -1.793072, -1.805767, -1.804129, -1.798123,
>> 55.68066, 55.67369, 55.67508, 55.68139, 55.68066), ncol=2)
>> myPolygon <- Polygons(list(Polygon(coords)),  "myPolygon")
>> myPolygon <- SpatialPolygons(list(myPolygon))
>> proj4string(myPolygon) <- CRS("+proj=longlat +datum=WGS84 +ellps=WGS84
>> +towgs84=0,0,0")
>> plot(myPolygon)
>> 
>> # lines
>> line1 <- matrix(c(-1.79880, -1.79517, 55.67737, 55.67920), ncol=2)
>> line2 <- matrix(c(-1.80231, -1.80679, 55.67764, 55.68004), ncol=2)
>> line1L <- Line(line1)
>> line2L <- Line(line2)
>> my.lines <- Lines(list(line1L, line2L), ID="my.lines")
>> myLines <- SpatialLines(list(my.lines))
>> proj4string(myLines) <- CRS("+proj=longlat +datum=WGS84 +ellps=WGS84
>> +towgs84=0,0,0")
>> plot(myLines, add=T)
>> 
>> 
>> 
>> I expected that the code below would remove parts of myPolygon that contain
>> myLines:
>> 
>> d <- gDifference(myPolygon, myLines)
>> plot(d)
>> 
>> 
>> However myPolygon seems unaffected. Why are the parts of myPolygon that
>> contain myLines not being removed?
> 
> Well, lines have by definition zero width, so:
> 
> gIntersects(myPolygon, myLines)
> gArea(gIntersection(myPolygon, myLines))
> 
> so there is no difference between myPolygon and d because nothing is being removed. If you buffer the lines, you see a difference:
> 
> gArea(myPolygon)
> d <- gDifference(myPolygon, gBuffer(myLines, width=0.000001))
> gArea(d)
> plot(d)
> 
> http://www.vividsolutions.com/jts/bin/JTS%20Technical%20Specs.pdf
> http://www.vividsolutions.com/jts/bin/JTS%20Developer%20Guide.pdf
> 
> Note that you get warnings for using operations on unprojected objects, because your assumption that apparently straight lines are straight is not justified.
> 
> Hope this clarifies,
> 
> Roger
> 
>> 
>> Thanks
>> Ross
>> 
>> 
>> 
>>    [[alternative HTML version deleted]]
> 
> Please post plain text only.
> 
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> -- 
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
> 


From nicolas.bories at orange.fr  Fri Jun  7 16:28:30 2013
From: nicolas.bories at orange.fr (Nicolas Bories)
Date: Fri, 07 Jun 2013 16:28:30 +0200
Subject: [R-sig-Geo] Adaptive Savitzky Golay Filter function
Message-ID: <51B1EE0E.2080507@orange.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130607/5ea79132/attachment.pl>

From matteo.mattiuzzi at boku.ac.at  Fri Jun  7 17:24:57 2013
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Fri, 07 Jun 2013 17:24:57 +0200
Subject: [R-sig-Geo] Adaptive Savitzky Golay Filter function
In-Reply-To: <51B1EE0E.2080507@orange.fr>
References: <51B1EE0E.2080507@orange.fr>
Message-ID: <51B21769020000270001AAD8@gwia2.boku.ac.at>

Dear Nicolas,


The MODIS package on R-forge is intended to do exactly this. There are
implemented a non iterative smooth.spline filtering and the iterative
Whittaker filter (Atzberger and Eilers 2012).
MODIS offers also a lot of data acquisition and pre processing
capabilities but if you intend to use those capabilities you have to do
a little bit of set up first. 


Install the package and run MODISoptions(), this function is intended to
guide you through. Be aware that on Linux it is much simpler, but give
it a try (and give me some feedback pls).


install.packages("MODIS", repos="http://R-Forge.R-project.org")


########
# on Linux avoid to run the next part as a non typical user ie as root,
because some directory is created and you will not access it as normal
after.
########


library(MODIS)
MODISoptions()


# You are on a Windows machine you need to install a HDF supporting GDAL
 or MRT (run MODIS:::checkTools() for help). If MODIS continues to
bother you with thinks redo the steps.
# The entire processing should look approximately like that:


getProduct() # to list available once


runGdal(product="M.D13Q1",begin="2005001",end="2006001", job="testJob")
# this downloads, converts (HDF to GDAL formats), crops, warps.
see?runGdal for details. You can limit the data sung the SDSstring
argument.
# if you have MRT
runMrt(product="M.D13Q1",begin="2005001",end="2006001", job="testJob") #
this downloads, converts (HDF to GDAL formats), crops, warps. see?runMrt
for details, but I suggest to use gdal!


setwd(paste0(options()$MODIS_outDirPath,"/testJob"))
dir() # your data


 # look for data
vi     <- preStack(pattern="*_NDVI.tif$")
qa   <- preStack(pattern="*_VI_Quality.tif$")
time <- preStack(pattern="*_composite_day_of_the_year.tif$")
    
crono <- orgTime(vi) # here you decide the time steps for the output


# order data by time, and use only what is defined by orgTime    
vi      <- stack(preStack(files=vi,timeInfo=crono))
time <- stack(preStack(files=time,timeInfo=crono))
qa    <- stack(preStack(files=qa,timeInfo=crono))


# the weighting is generated internally in whittaker.raster but you
could also do it separately for more control see ?makeWeights
# qa <-  makeWeights(qa, bitShift=2, bitMask=15, threshold=6) # for
bitShift and bitMask info on other products run detectBitInfo("MOD13Q1")



# filtering 
whittaker.raster(vi=vi, wt=qa, inT=time, timeInfo=crono, lambda=1000,
overwrite=TRUE) # 


Good luck,
Matteo



>>> Nicolas Bories <nicolas.bories at orange.fr> 06/07/13 4:29 PM >>>
Dear all,

I'm trying to use the Adaptive Savitzky Golay Filterfor smoothing and
gap filling a time series of remote sensing observations  (MODIS).
For this exercise, I need to use a vector weighting strategy for a
smoothing that takes into account the pixelreliability. The TIMESAT code
(L. Eklundh, P. J?nsson,2011) seems to be ideal for this. But, it is
limiting my specific needs because it is available as an executable and
I cannot customize it according to my needs. So, I am wondering if there
is any other alternative function/tools to do this task.

Thanks in advance for any suggestions !

Nicolas.





    [[alternative HTML version deleted]]


From rossahmed at googlemail.com  Fri Jun  7 18:04:38 2013
From: rossahmed at googlemail.com (Ross Ahmed)
Date: Fri, 07 Jun 2013 17:04:38 +0100
Subject: [R-sig-Geo] cut into polygons
Message-ID: <CDD7C326.4F8C%rossahmed@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130607/97335c89/attachment.pl>

From gustavodalposso at hotmail.com  Fri Jun  7 18:01:32 2013
From: gustavodalposso at hotmail.com (Gustavo Dalposso)
Date: Fri, 7 Jun 2013 16:01:32 +0000
Subject: [R-sig-Geo] lat long --> UTM
Message-ID: <BAY172-W7941EC3A0BCD40CF97F51BB990@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130607/c6167c24/attachment.pl>

From Roger.Bivand at nhh.no  Fri Jun  7 18:08:38 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 7 Jun 2013 18:08:38 +0200
Subject: [R-sig-Geo] lat long --> UTM
In-Reply-To: <BAY172-W7941EC3A0BCD40CF97F51BB990@phx.gbl>
References: <BAY172-W7941EC3A0BCD40CF97F51BB990@phx.gbl>
Message-ID: <alpine.LRH.2.03.1306071807350.32731@reclus.nhh.no>

On Fri, 7 Jun 2013, Gustavo Dalposso wrote:

> how to transforme coordinates  LAT LONG --> UTM
> #-53.21320451 is the longitude#-25.01908674 is the latitude#zone:22 south
> xy <- cbind(c(-53.21320451), c(-25.01908674))

library(rgdal)
project(cbind(c(-53.21320451), c(-25.01908674)),
  "+proj=utm +zone=22 +south")

Hope this helps,

Roger

>
> 	[[alternative HTML version deleted]]
>

Please only use plain text.

> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From cebulmer at telus.net  Sat Jun  8 11:03:55 2013
From: cebulmer at telus.net (Chuck Bulmer)
Date: Sat, 8 Jun 2013 02:03:55 -0700 (PDT)
Subject: [R-sig-Geo] rsaga esri wrapper
Message-ID: <1370682234988-7583742.post@n2.nabble.com>

Hi all. 

I am using the rsaga.esri.wrapper to add grid values to a shapefile. The
below code works great for a single grid, but I've made many attempts to add
additional grids to this command and I can't get it to work. Can someone
please provide the correct syntax??

Thanks R3.0.1 Win 7 Saga 2.08

Chuck


rsaga.esri.wrapper(rsaga.add.grid.values.to.points,in.shapefile="points_atts.shp",in.grid="C_A_1HA",out.shapefile="points_atts.shp",in.esri=TRUE,out.esri=TRUE,esri.workspace="D:\\BC_DSM\\grids",format=1,esri.extension="asc")

I've tried in.grids=c("C_A_1HA","C_SLOPE"),

semicolons etc etc but can't figure it out so far



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/rsaga-esri-wrapper-tp7583742.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From nicolas.bories at orange.fr  Sat Jun  8 16:46:14 2013
From: nicolas.bories at orange.fr (Nicolas Bories)
Date: Sat, 08 Jun 2013 16:46:14 +0200
Subject: [R-sig-Geo] Adaptive Savitzky Golay Filter function
In-Reply-To: <51B21769020000270001AAD8@gwia2.boku.ac.at>
References: <51B1EE0E.2080507@orange.fr>
	<51B21769020000270001AAD8@gwia2.boku.ac.at>
Message-ID: <51B343B6.4010705@orange.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130608/66df292f/attachment.pl>

From alexander.brenning at uwaterloo.ca  Sat Jun  8 23:16:02 2013
From: alexander.brenning at uwaterloo.ca (Alexander Brenning)
Date: Sat, 8 Jun 2013 21:16:02 +0000
Subject: [R-sig-Geo] rsaga esri wrapper
Message-ID: <7751194102F32C41B664258D78FE5BC53C9430C6@connmbx3>

Hi Chuck,

thanks for catching this problem. Below is a corrected version of the rsaga.esri.wrapper function that works with multiple grids, which you specify as c("C_A_1HA","C_SLOPE") for example. (No semicolons - RSAGA takes care of this when passing the argument to saga_cmd.)

This bug affected only function calls that involved multiple in.* arguments, at least one of which has more than one element - my that's why it hasn't been caught earlier. (You will still get a warning because the wrapper function isn't smart enough to recognize that in.shapefile is not a grid. I'll put this on my to do list.)

On the other hand, it's always more transparent (and errors are tracked more easily) if you make the .asc to .sgrd conversions explicitly using rsaga.esri.to.sgrd and rsaga.sgrd.to.esri calls.

Btw, the next RSAGA release is coming up very soon, and I will include this fix in the release. We're currently testing RSAGA on Linux and Mac OS X. The new release will support SAGA GIS 2.1.0 (release candidates) (but will partly discontinue support of SAGA GIS 2.0.4).

Cheers
  Alex


Date: Sat, 8 Jun 2013 02:03:55 -0700 (PDT)
From: Chuck Bulmer <cebulmer at telus.net>
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] rsaga esri wrapper
Message-ID: <1370682234988-7583742.post at n2.nabble.com>
Content-Type: text/plain; charset=us-ascii

Hi all.

I am using the rsaga.esri.wrapper to add grid values to a shapefile. The
below code works great for a single grid, but I've made many attempts to add
additional grids to this command and I can't get it to work. Can someone
please provide the correct syntax??

Thanks R3.0.1 Win 7 Saga 2.08

Chuck


rsaga.esri.wrapper(rsaga.add.grid.values.to.points,in.shapefile="points_atts.shp",in.grid="C_A_1HA",out.shapefile="points_atts.shp",in.esri=TRUE,out.esri=TRUE,esri.workspace="D:\\BC_DSM\\grids",format=1,esri.extension="asc")

I've tried in.grids=c("C_A_1HA","C_SLOPE"),

semicolons etc etc but can't figure it out so far

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/rsaga-esri-wrapper-tp7583742.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


#### Corrected rsaga.esri.wrapper:

rsaga.esri.wrapper = function(fun, in.esri=TRUE, out.esri=TRUE, 
    env=rsaga.env(), esri.workspace=env$workspace,
    format="ascii", georef="corner", prec=5, esri.extension,
    condensed.res=TRUE, clean.up=TRUE, intern=TRUE, ...)
{
    in.res = NULL
    geoproc.res = NULL
    out.res = NULL
    format = match.arg.ext(format,choices=c("binary","ascii"),base=0,ignore.case=TRUE,numeric=TRUE)
    if (missing(esri.extension))
        esri.extension = c(".flt",".asc")[format+1]
    args = list(...)
    argnms = names(args)
    
    in.ok = TRUE
    if (in.esri) {
        wh = grep("^in\\.",names(args))
        if (length(wh)==0) {
            warning("'in.esri' is TRUE, but the geoprocessing function does not have an 'in.*' grid argument")
        } else {
            in.args = args[wh]
            in.res = rsaga.esri.to.sgrd(in.grids=set.file.extension(unlist(in.args),esri.extension),
                intern=intern, show.output.on.console=FALSE,
                out.sgrds=unlist(in.args), in.path=esri.workspace, env=env) # more args to geoproc
            if (!intern) in.ok = all(in.res==0)
        }
    }
    
    geoproc.ok = TRUE
    if (in.ok) {
        geoproc.res = fun(env=env,intern=intern,...)
        if (!intern) geoproc.ok = all(geoproc.res==0)
    }
    if (clean.up) {
        del.files = set.file.extension(in.args,"")
        del.files = unlist(lapply(as.list(del.files), function(x) paste(x,c("sgrd","hgrd","sdat","mgrd"),sep="")))
        unlink(del.files)
    }
    
    out.ok = TRUE
    if (out.esri & in.ok & geoproc.ok) {
        wh = grep("^out\\.",names(args))
        if (length(wh)==0) {
            warning("'out.esri' is TRUE, but the geoprocessing function does not have an 'out.*' grid argument")
        } else {
            out.args = args[wh]
            out.res = rsaga.sgrd.to.esri(in.sgrds=unlist(out.args),
                out.grids=set.file.extension(out.args,unlist(esri.extension)),
                out.path=esri.workspace, env=env, intern=intern, show.output.on.console=FALSE,
                format=format, georef=georef, prec=prec) # more args to geoproc
            if (!intern) out.ok = all(out.res==0)
            if (clean.up) {
                del.files = set.file.extension(out.args,"")
                del.files = unlist(lapply(as.list(del.files), function(x) paste(x,c("sgrd","hgrd","sdat","mgrd"),sep="")))
                unlink(del.files)
            }
        }
    }

    res = list( in.res=in.res, geoproc.res=geoproc.res, out.res=out.res )
    if (condensed.res) {
        if (intern) {
            res = geoproc.res
        } else   res = max(abs(unlist(res)))
    }
    if (intern) {
        invisible(res)
    } else  return( res )
}



--
Alexander Brenning
brenning at uwaterloo.ca - T +1-519-888-4567 ext 35783
Department of Geography and Environmental Management
University of Waterloo
200 University Ave. W - Waterloo, ON - Canada N2L 3G1
UW: https://uwaterloo.ca/gem/people-profiles/alexander-brenning
Academia.edu: http://uwaterloo.academia.edu/AlexanderBrenning
LinkedIn: http://ca.linkedin.com/pub/alexander-brenning/3/242/440

From cebulmer at telus.net  Sun Jun  9 05:51:01 2013
From: cebulmer at telus.net (Chuck Bulmer)
Date: Sat, 8 Jun 2013 20:51:01 -0700 (PDT)
Subject: [R-sig-Geo] rsaga esri wrapper
In-Reply-To: <7751194102F32C41B664258D78FE5BC53C9430C6@connmbx3>
References: <1370682234988-7583742.post@n2.nabble.com>
	<7751194102F32C41B664258D78FE5BC53C9430C6@connmbx3>
Message-ID: <1370749861285-7583745.post@n2.nabble.com>

It works now !!

Thanks very much Alex.

I can't wait to see the new version of RSAGA..

Chuck



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/rsaga-esri-wrapper-tp7583742p7583745.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From l.hilger at ku.de  Mon Jun 10 17:15:13 2013
From: l.hilger at ku.de (Ludwig Hilger)
Date: Mon, 10 Jun 2013 08:15:13 -0700 (PDT)
Subject: [R-sig-Geo] Local plane fitting to Point Cloud
In-Reply-To: <1370524585428-7583729.post@n2.nabble.com>
References: <1370445101083-7583724.post@n2.nabble.com>
	<51AFE539.8060207@uni-muenster.de>
	<1370524585428-7583729.post@n2.nabble.com>
Message-ID: <1370877313903-7583746.post@n2.nabble.com>

Hello everybody,

unfortunately I have to come up with a follow-up question. As described
above, this has worked now perfecty at first with some of my data, but with
another dataset (but it has the same structure, etc) I get the following
error:

"solve.c", line 88: singular matrix in function Usolve()
Fehler in predict.gstat(g, newdata = newdata, block = block, nsim = nsim, :
 Usolve

I have no idea what my R is trying to tell me... any hints?

thank you again everybody,

Ludwig



-----
Dipl. Geogr. Ludwig Hilger
Wiss. MA
Lehrstuhl f?r Physische Geographie
Katholische Universit?t Eichst?tt-Ingolstadt
Ostenstra?e 18
85072 Eichst?tt

Tel.: 08421-93-1180 
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Local-plane-fitting-to-Point-Cloud-tp7583724p7583746.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From edzer.pebesma at uni-muenster.de  Mon Jun 10 18:30:42 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 10 Jun 2013 18:30:42 +0200
Subject: [R-sig-Geo] Local plane fitting to Point Cloud
In-Reply-To: <1370877313903-7583746.post@n2.nabble.com>
References: <1370445101083-7583724.post@n2.nabble.com>
	<51AFE539.8060207@uni-muenster.de>
	<1370524585428-7583729.post@n2.nabble.com>
	<1370877313903-7583746.post@n2.nabble.com>
Message-ID: <51B5FF32.9080503@uni-muenster.de>

Ludwig, your email does not contain the original posting, please include
or repeat in future mailings.

The original question was, I believe, about local fitting of trend surfaces.

This error can for instance happen when your neighbourhood is too small,
or does not contain enough information.

For a first order linear trend surface, a local neighbourhood should
have at least three points, and irrespective the neighbourhood size, the
points should not be aligned (on a straight line). My hint is that one
of these conditions is not met in your setup.

You can try to set debug level to powers of two (2, 8 or 16 seem
relevant) to get detailed input about the conditions under which this
happens.

On 06/10/2013 05:15 PM, Ludwig Hilger wrote:
> Hello everybody,
> 
> unfortunately I have to come up with a follow-up question. As described
> above, this has worked now perfecty at first with some of my data, but with
> another dataset (but it has the same structure, etc) I get the following
> error:
> 
> "solve.c", line 88: singular matrix in function Usolve()
> Fehler in predict.gstat(g, newdata = newdata, block = block, nsim = nsim, :
>  Usolve
> 
> I have no idea what my R is trying to tell me... any hints?
> 
> thank you again everybody,
> 
> Ludwig
> 
> 
> 
> -----
> Dipl. Geogr. Ludwig Hilger
> Wiss. MA
> Lehrstuhl f?r Physische Geographie
> Katholische Universit?t Eichst?tt-Ingolstadt
> Ostenstra?e 18
> 85072 Eichst?tt
> 
> Tel.: 08421-93-1180 
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Local-plane-fitting-to-Point-Cloud-tp7583724p7583746.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de


From rhtardin at gmail.com  Mon Jun 10 20:43:23 2013
From: rhtardin at gmail.com (Rodrigo Tardin)
Date: Mon, 10 Jun 2013 15:43:23 -0300
Subject: [R-sig-Geo] Base correlation larger than alpha (ME - Spdep package
Message-ID: <CAE5HZZ+-HFC7BE-JZwgKnkBmQjvYO0QcicOrw3=9DSTKwy80gg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130610/ec2961e3/attachment.pl>

From Roger.Bivand at nhh.no  Mon Jun 10 22:02:06 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 10 Jun 2013 22:02:06 +0200
Subject: [R-sig-Geo] Base correlation larger than alpha (ME - Spdep
 package
In-Reply-To: <CAE5HZZ+-HFC7BE-JZwgKnkBmQjvYO0QcicOrw3=9DSTKwy80gg@mail.gmail.com>
References: <CAE5HZZ+-HFC7BE-JZwgKnkBmQjvYO0QcicOrw3=9DSTKwy80gg@mail.gmail.com>
Message-ID: <alpine.LRH.2.03.1306102154110.28056@reclus.nhh.no>

On Mon, 10 Jun 2013, Rodrigo Tardin wrote:

> Dear list,
>
> I am new to this list and I am trying to fit a Spatial Eigenvector GLM to
> count data.
>
> I am trying to fit a ME model in spdep package to investigate environmental
> drivers on Bryde's whale distribution. I have 3 environmental variables
> (depth, distance to coast, slope), my response variable is the occurrence
> (counts) of whales in 82 km2 grids.
>
> I used the dnearneigh function to build .nb data using the coordinates data.
>>    nb1  <-  dnearneigh(xy,  0,  10)  ----
> and: lw1  <-  nb2listw(nb1,  style="W")
>
> x - is latitude coordinates
> y - is longitude coordinates
>
>
> Using the glm and Spatial filtering function (as done in spdep manual) I
> had no problems. However, when I used the 'ME' it says: base correlation
> larger than alpha. My alpha is 0.05.
>
> Here it is my code:
> ##This part works well
> glmbase1  <-  glm(OCC  ~  DEPTH  +  DISTCOAST+SLOPE,  offset=RT,
> data=bryde3)
>
> lagcol1  <-  SpatialFiltering(OCC_BIN  ~  1,  ~  DEPTH  +  DISTCOAST+
> SLOPE, data=bryde3,  style="W",  nb=nb1, alpha=0.05,  verbose=TRUE)
>
> glmlag1  <-  glm(OCC ~  DEPTH  +  DISTCOAST+SLOPE +  fitted(lagcol1),
> offset=RT,data=bryde3)

These are not the same models - lagcol1 is as you know the process in the 
response (here OCC - RT??), not in the error. In ME, the process is in the 
error, and it looks as though the covariates mop up much of the spatial 
dependence (it is also a Poisson model with a default log link). 
SpatialFiltering() does not handle an offset (as you have realised, I 
think), so again, this is a possible source of difference. ME is testing 
slightly diffferently too. Do:

errcol1  <-  SpatialFiltering(I(OCC-RT)  ~  DEPTH  +  DISTCOAST +
  SLOPE, data=bryde3,  style="W",  nb=nb1, alpha=0.05,  verbose=TRUE)
glmerr1  <-  glm(OCC ~  DEPTH  +  DISTCOAST+SLOPE +  fitted(errcol1),
  offset=RT, data=bryde3)

and

errcol2  <-  ME(OCC ~  DEPTH  +  DISTCOAST+SLOPE,  offset=RT, 
data=bryde3, family="gaussian", listw=lw1,  alpha=0.05,  verbose=TRUE)
glmerr12  <-  glm(OCC ~  DEPTH  +  DISTCOAST+SLOPE +  fitted(errcol2),
  offset=RT, data=bryde3)

give similar results?

Hope this helps,

Roger



>
> anova(glmlag1)
> anova(glmbase1,  glmlag1)
> set.seed(123)
>
> ##From here on, it does not
> lagcol1  <-  ME(OCC ~  DEPTH  +  DISTCOAST+SLOPE,  offset=RT, data=bryde3,
> family="poisson",
> listw=lw1,  alpha=0.05,  verbose=TRUE)
>
> Error in ME(OCC ~ DEPTH + DISTCOAST + SLOPE, data = bryde3, family =
> "poisson",  :
>  base correlation larger than alpha
>
> When I increase alpha to 0.6 (lower values keep saying the same error),
> this error message does not appear. However, when I try to rerun GLM with
> eigenvectors included as covariates (as done in spdep manual - page 118) I
> have the following error message:
>
> Error in glm.fit(x = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,  :
>  NA/NaN/Inf in 'x'
> warning message: step size truncated due to divergence
>
> Can anyone please help me?
> Other question, if I may, is there a strong difference between Spatial
> Filtering and ME?
>
> Many thanks in advance,
> Rodrigo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From nicolas.bories at orange.fr  Tue Jun 11 01:26:56 2013
From: nicolas.bories at orange.fr (Nicolas Bories)
Date: Tue, 11 Jun 2013 01:26:56 +0200
Subject: [R-sig-Geo] Adaptive Savitzky Golay Filter function
In-Reply-To: <51B21769020000270001AAD8@gwia2.boku.ac.at>
References: <51B1EE0E.2080507@orange.fr>
	<51B21769020000270001AAD8@gwia2.boku.ac.at>
Message-ID: <51B660C0.20504@orange.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130611/d94600fc/attachment.pl>

From rhtardin at gmail.com  Tue Jun 11 03:51:09 2013
From: rhtardin at gmail.com (Rodrigo Tardin)
Date: Mon, 10 Jun 2013 22:51:09 -0300
Subject: [R-sig-Geo] Base correlation larger than alpha (ME - Spdep
	package
In-Reply-To: <alpine.LRH.2.03.1306102154110.28056@reclus.nhh.no>
References: <CAE5HZZ+-HFC7BE-JZwgKnkBmQjvYO0QcicOrw3=9DSTKwy80gg@mail.gmail.com>
	<alpine.LRH.2.03.1306102154110.28056@reclus.nhh.no>
Message-ID: <CAE5HZZLX_exXFM32b=HTjfgUM15gfOTMagtEvthnPFYcC3=_Wg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130610/2f97790b/attachment.pl>

From Roger.Bivand at nhh.no  Tue Jun 11 10:47:06 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 11 Jun 2013 10:47:06 +0200
Subject: [R-sig-Geo] Base correlation larger than alpha (ME - Spdep
 package
In-Reply-To: <CAE5HZZLX_exXFM32b=HTjfgUM15gfOTMagtEvthnPFYcC3=_Wg@mail.gmail.com>
References: <CAE5HZZ+-HFC7BE-JZwgKnkBmQjvYO0QcicOrw3=9DSTKwy80gg@mail.gmail.com>
	<alpine.LRH.2.03.1306102154110.28056@reclus.nhh.no>
	<CAE5HZZLX_exXFM32b=HTjfgUM15gfOTMagtEvthnPFYcC3=_Wg@mail.gmail.com>
Message-ID: <alpine.LRH.2.03.1306111043490.30529@reclus.nhh.no>

On Tue, 11 Jun 2013, Rodrigo Tardin wrote:

> Hello Roger,
>
> Thanks a lot for your help. I fit a model as you said but with a binomial
> response and I did ok! However, in ME model, I had to increase the alpha
> value to 0.5.

You can only use SpatialFiltering when you could use lm(), not glm() to 
fit the model, its results are only valid in that case. If your response 
is binomial, only the results of ME are valid. In addition, only ME() 
handles the offset correctly as far as I know. Do not use SpatialFiltering 
when themodel cannot not be fitted with lm().

Roger

>
> Is it bad to have such a "high" alpha value?
>
>
> The results for ME and Spatial Filtering models were a little bit different:
> anova(glmerr12,test="Chisq")
>
> Analysis of Deviance Table
>
> Model: binomial, link: logit
>
> Response: OCC_BIN
>
> Terms added sequentially (first to last)
>
>
>                Df Deviance Resid. Df Resid. Dev Pr(>Chi)
> NULL                               81     984.43
> DEPTH            1   322.27        80     662.17   <2e-16 ***
> DISTCOAST        1   114.42        79     547.74   <2e-16 ***
> SLOPE            1     0.00        78    2739.32        1
> fitted(errcol2)  1   360.44        77    2378.88   <2e-16 ***
>
>
> anova(glmerr1,test="Chisq")
> Analysis of Deviance Table
>
> Model: gaussian, link: identity
>
> Response: OCC_BIN
>
> Terms added sequentially (first to last)
>
>
>                Df Deviance Resid. Df Resid. Dev  Pr(>Chi)
> NULL                               81      20189
> DEPTH            1   1916.3        80      18272 0.0006276 ***
> DISTCOAST        1   5093.0        79      13179 2.484e-08 ***
> SLOPE            1    557.4        78      12622 0.0651683 .
> fitted(errcol1)  1      1.7        77      12620 0.9180173
> ---
> Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1
>
>
> Both models showed significant relationship with DEPTH and DISTANCE TO
> COAST and not with SLOPE. However, one model was significant for fitted
> spatial autocorrelation (ME model) and the other did not.
>
>
> When I tried to compare the results via anova (as done in spdep manual -
> pag.118) for these binomial models, I could not obtain the p level. My code:
> ##Anova comparing both models
> anova(glmerr12,glmerr1,test="Chisq")
> Analysis of Deviance Table
>
> Model 1: OCC_BIN ~ DEPTH + DISTCOAST + SLOPE + fitted(errcol2)
> Model 2: OCC_BIN ~ DEPTH + DISTCOAST + SLOPE + fitted(errcol1)
>  Resid. Df Resid. Dev Df Deviance Pr(>Chi)
> 1        77     2378.9
> 2        77    12620.3  0   -10241
>
> ##glmerr 12 is the ME model
> ##glmerr1 is the Spatial Filtering model
>
>
> Can you help me (or others in this list) one more time?
>
> Once again thanks a lot for everyone who can help me here.
>
> Rodrigo
>
>
> 2013/6/10 Roger Bivand <Roger.Bivand at nhh.no>
>
>> On Mon, 10 Jun 2013, Rodrigo Tardin wrote:
>>
>>  Dear list,
>>>
>>> I am new to this list and I am trying to fit a Spatial Eigenvector GLM to
>>> count data.
>>>
>>> I am trying to fit a ME model in spdep package to investigate
>>> environmental
>>> drivers on Bryde's whale distribution. I have 3 environmental variables
>>> (depth, distance to coast, slope), my response variable is the occurrence
>>> (counts) of whales in 82 km2 grids.
>>>
>>> I used the dnearneigh function to build .nb data using the coordinates
>>> data.
>>>
>>>>    nb1  <-  dnearneigh(xy,  0,  10)  ----
>>>>
>>> and: lw1  <-  nb2listw(nb1,  style="W")
>>>
>>> x - is latitude coordinates
>>> y - is longitude coordinates
>>>
>>>
>>> Using the glm and Spatial filtering function (as done in spdep manual) I
>>> had no problems. However, when I used the 'ME' it says: base correlation
>>> larger than alpha. My alpha is 0.05.
>>>
>>> Here it is my code:
>>> ##This part works well
>>> glmbase1  <-  glm(OCC  ~  DEPTH  +  DISTCOAST+SLOPE,  offset=RT,
>>> data=bryde3)
>>>
>>> lagcol1  <-  SpatialFiltering(OCC_BIN  ~  1,  ~  DEPTH  +  DISTCOAST+
>>> SLOPE, data=bryde3,  style="W",  nb=nb1, alpha=0.05,  verbose=TRUE)
>>>
>>> glmlag1  <-  glm(OCC ~  DEPTH  +  DISTCOAST+SLOPE +  fitted(lagcol1),
>>> offset=RT,data=bryde3)
>>>
>>
>> These are not the same models - lagcol1 is as you know the process in the
>> response (here OCC - RT??), not in the error. In ME, the process is in the
>> error, and it looks as though the covariates mop up much of the spatial
>> dependence (it is also a Poisson model with a default log link).
>> SpatialFiltering() does not handle an offset (as you have realised, I
>> think), so again, this is a possible source of difference. ME is testing
>> slightly diffferently too. Do:
>>
>> errcol1  <-  SpatialFiltering(I(OCC-RT)  ~  DEPTH  +  DISTCOAST +
>>
>>  SLOPE, data=bryde3,  style="W",  nb=nb1, alpha=0.05,  verbose=TRUE)
>> glmerr1  <-  glm(OCC ~  DEPTH  +  DISTCOAST+SLOPE +  fitted(errcol1),
>>  offset=RT, data=bryde3)
>>
>> and
>>
>> errcol2  <-  ME(OCC ~  DEPTH  +  DISTCOAST+SLOPE,  offset=RT, data=bryde3,
>> family="gaussian", listw=lw1,  alpha=0.05,  verbose=TRUE)
>> glmerr12  <-  glm(OCC ~  DEPTH  +  DISTCOAST+SLOPE +  fitted(errcol2),
>>  offset=RT, data=bryde3)
>>
>> give similar results?
>>
>> Hope this helps,
>>
>> Roger
>>
>>
>>
>>
>>
>>> anova(glmlag1)
>>> anova(glmbase1,  glmlag1)
>>> set.seed(123)
>>>
>>> ##From here on, it does not
>>> lagcol1  <-  ME(OCC ~  DEPTH  +  DISTCOAST+SLOPE,  offset=RT, data=bryde3,
>>> family="poisson",
>>> listw=lw1,  alpha=0.05,  verbose=TRUE)
>>>
>>> Error in ME(OCC ~ DEPTH + DISTCOAST + SLOPE, data = bryde3, family =
>>> "poisson",  :
>>>  base correlation larger than alpha
>>>
>>> When I increase alpha to 0.6 (lower values keep saying the same error),
>>> this error message does not appear. However, when I try to rerun GLM with
>>> eigenvectors included as covariates (as done in spdep manual - page 118) I
>>> have the following error message:
>>>
>>> Error in glm.fit(x = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,  :
>>>  NA/NaN/Inf in 'x'
>>> warning message: step size truncated due to divergence
>>>
>>> Can anyone please help me?
>>> Other question, if I may, is there a strong difference between Spatial
>>> Filtering and ME?
>>>
>>> Many thanks in advance,
>>> Rodrigo
>>>
>>>
>> --
>> Roger Bivand
>> Department of Economics, NHH Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>>
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From michel.arnaud at cirad.fr  Tue Jun 11 13:49:05 2013
From: michel.arnaud at cirad.fr (Arnaud Michel)
Date: Tue, 11 Jun 2013 13:49:05 +0200
Subject: [R-sig-Geo] a title on the map (function gvisGeoChart package
	googleVis )
Message-ID: <51B70EB1.1090105@cirad.fr>

Hi
I am using the package googleVis and the function gvisGeoChart
Is it possible to put a title on the map ?

Here is the call of the function :

library(googleVis)
G1 <- gvisGeoChart(PaysProjets, locationvar='Pays', colorvar='NbProj',
options=list(
region= "world",
displayMode="regions",
height=347*1.5, width= 556*1.5
))
plot(G1)
Thank you



-- 
Michel ARNAUD
Charg? de mission aupr?s du DRH
DGDRD-Drh - TA 174/04
Av Agropolis 34398 Montpellier cedex 5
tel : 04.67.61.75.38
fax : 04.67.61.57.87
port: 06.47.43.55.31


From matteo.mattiuzzi at boku.ac.at  Tue Jun 11 16:44:38 2013
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Tue, 11 Jun 2013 16:44:38 +0200
Subject: [R-sig-Geo] Adaptive Savitzky Golay Filter function
In-Reply-To: <51B660C0.20504@orange.fr>
References: <51B1EE0E.2080507@orange.fr>
	<51B21769020000270001AAD8@gwia2.boku.ac.at> <51B660C0.20504@orange.fr>
Message-ID: <51B753F6020000270001ABD8@gwia2.boku.ac.at>

Dear Nicolas,

Fixed in MODIS 0.9-3. Thanks! (If you like to build it yourself you can
get the source from:
http://ivfl-arc.boku.ac.at/owncloud/public.php?service=shorty_relay&id=QR5FZSxe0g)



example with the meuse dataset:
###########################
data(meuse)
coordinates(meuse) <- ~x+y
proj4string(meuse) <- CRS("+init=epsg:28992")


zone <- spTransform(meuse,CRS("+proj=sinu +lon_0=0 +x_0=0 +y_0=0
+a=6371007.181 +b=6371007.181 +units=m +no_defs"))


# make sure your extent has an assigned projection string, if not do:

# proj4string(zone) <- "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181
+b=6371007.181 +units=m +no_defs"


runGdal(product="MOD13Q1",begin="2002001",end="2002001", job="testJob",
extent=zone)


####################
Be aware, that if you use an 'extent' argument a certain re-sampling, in
form of a pixel shift, is nearly always performed, as a specified
'extent' may not matches the original MODIS grid! If you want absolutely
avoid any resampling you have to do something like that (processing the
entire TILE(s)):


tileH <- getTile(zone)$tileH
tileV <- getTile(zone)$tileV
runGdal(product="MOD13Q1",begin="2002001",end="2002001",
job="testJob",tileH=tileH,tileV=tileV)



and then you can use raster:::crop() to reduce the extents if you like!


Matteo




>>> Nicolas Bories  06/11/13 1:21 AM >>>
Dear all,

The MODIS package seems to be very useful and very powerful !
Nonetheless I encounter some problems with the runGdal() function and 
extent argument.

I need to extract a part of "MOD13Q1" product between 2002 and 2005.
I also need to keep data in the same projection and the same resolution 
than hdf files, without resampling.
I tried 2 cases :

1) runGdal(product="MOD13Q1",begin="2002001",end="2006001", 
job="testJob",extent=zone)
zone is a SpatialPointsDataFrame with same projection than hdf files

This returns :
Error in ReplProj4string(obj, CRS(value)) :
   Geographical CRS given to non-conformant data:  -94112.4108437 
4925025.8738480

2) runGdal(product="MOD13Q1",begin="2002001",end="2002001", 
job="testJob",extent=zone,pixelSize="asIn",resamplingType="near",outProj="+proj=sinu

+lon_0=0 +x_0=0 +y_0=0 +a=6371007.181 +b=6371007.181 +units=m +no_defs")
zone is a SpatialPointsDataFrame  with CRS : "+proj=longlat
+datum=WGS84"

This produces TIFF files reprojected in LongLat

Can anyone please help me?

Many thanks in advance,

Nicolas.

On 07/06/2013 17:24, Matteo Mattiuzzi wrote:
> Dear Nicolas,
>
>
> The MODIS package on R-forge is intended to do exactly this. There are
> implemented a non iterative smooth.spline filtering and the iterative
> Whittaker filter (Atzberger and Eilers 2012).
> MODIS offers also a lot of data acquisition and pre processing
> capabilities but if you intend to use those capabilities you have to
do
> a little bit of set up first.
>
>
> Install the package and run MODISoptions(), this function is intended
to
> guide you through. Be aware that on Linux it is much simpler, but give
> it a try (and give me some feedback pls).
>
>
> install.packages("MODIS", repos="http://R-Forge.R-project.org")
>
>
> ########
> # on Linux avoid to run the next part as a non typical user ie as
root,
> because some directory is created and you will not access it as normal
> after.
> ########
>
>
> library(MODIS)
> MODISoptions()
>
>
> # You are on a Windows machine you need to install a HDF supporting
GDAL
>   or MRT (run MODIS:::checkTools() for help). If MODIS continues to
> bother you with thinks redo the steps.
> # The entire processing should look approximately like that:
>
>
> getProduct() # to list available once
>
>
> runGdal(product="M.D13Q1",begin="2005001",end="2006001",
job="testJob")
> # this downloads, converts (HDF to GDAL formats), crops, warps.
> see?runGdal for details. You can limit the data sung the SDSstring
> argument.
> # if you have MRT
> runMrt(product="M.D13Q1",begin="2005001",end="2006001", job="testJob")
#
> this downloads, conv> setwd(paste0(options()$MODIS_outDirPath,"/testJob"))
> dir() # your data
>
>
>   # look for data
> vi     <- preStack(pattern="*_NDVI.tif$")
> qa   <- preStack(pattern="*_VI_Quality.tif$")
> time <- preStack(pattern="*_composite_day_of_the_year.tif$")
>      
> crono <- orgTime(vi) # here you decide the time steps for the output
>
>
> # order data by time, and use only what is defined by orgTime
> vi      <- stack(preStack(files=vi,timeInfo=crono))
> time <- stack(preStack(files=time,timeInfo=crono))
> qa    <- stack(preStack(files=qa,timeInfo=crono))
>
>
> # the weighting is generated internally in whittaker.raster but you
> could also do it separately for more control see ?makeWeights
> # qa <-  makeWeights(qa, bitShift=2, bitMask=15, threshold=6) # for
> bitShift and bitMask info on other products run
detectBitInfo("MOD13Q1")
>
>
>
> # filtering
> whittaker.raster(vi=vi, wt=qa, inT=time, timeInfo=crono, lambda=1000,
> overwrite=TRUE) #
>
>
> Good luck,
> Matteo
>
>
>
>>>> Nicolas Bories  06/07/13 4:29 PM >>>
> Dear all,
>
> I'm trying to use the Adaptive Savitzky Golay Filterfor smoothing and
> gap filling a time series of remote sensing observations  (MODIS).
> For this exercise, I need to use a vector weighting strategy for a
> smoothing that takes into account the pixelreliability. The TIMESAT
code
> (L. Eklundh, P. J?nsson,2011) seems to be ideal for this. But, it is
> limiting my specific needs because it is available as an executable
and
> I cannot customize it according to my needs. So, I am wondering if
there
> is any other alternative function/tools to do this task.
>
> Thanks in advance for any suggestions !
>
> Nicolas.
>
>
>
>
>
>      [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


    [[alternative HTML version deleted]]


From edzer.pebesma at uni-muenster.de  Tue Jun 11 17:50:26 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 11 Jun 2013 17:50:26 +0200
Subject: [R-sig-Geo] spatialdataframe to spatial.polygon
In-Reply-To: <1370545493.17428.YahooMailNeo@web162604.mail.bf1.yahoo.com>
References: <1370545493.17428.YahooMailNeo@web162604.mail.bf1.yahoo.com>
Message-ID: <51B74742.1070403@uni-muenster.de>

After looking at the data (off-list), I got the following warnings & error:

Warning messages:
1: In is.na(poly[, 1]) :
  is.na() applied to non-(list or vector) of type 'NULL'
2: In is.na(poly[, 1]) :
  is.na() applied to non-(list or vector) of type 'NULL'
Error in coordinates(coords) :
  error in evaluating the argument 'obj' in selecting a method for
function 'coordinates': Error in 1:(na.index[1] - 1) : NA/NaN argument

after checking the arguments, it turns out that polygon has value NULL.

?polygons2spatial.polygon tells that it wants a

    poly: a 2-column matrix of coordinates, where each complete
          subpolygon is separated by NA's

as first argument, but that is not what you give it.

On 06/06/2013 09:04 PM, Kalbasse Group wrote:
> Hi to all I am new in R
> I am trying to transform a spatialdataframe into a Spatial.Polygon file using the SptialEpi package with no success. This the code
> 
> 
> library(SpatialEpi)
> library(proj4)
> polygon <- ADpoly$polygon$polygon
> nrepeats <- ADpoly$polygon$nrepeats
> names <- ADpoly$data$ADIDU
> spatial.polygon <- polygon2spatial.polygon(polygon, coordinate.system== "+proj=lcc +lat_1=50 +lat_2=70 +lat_0=40 +lon_0=-96 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs +ellps=GRS80 +towgs84=0,0,0" ,names, nrepeats)
> 
> ADpoly is my spatialdataframe projected in canada lambert conformal
> 
> and this is the error:
> 
> cannot evaluate the  'obj' when selecting a mthod for the 'coordinates' function
> 
> Please may someone help me?
> 	[[alternative HTML version deleted]]
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de


From nicolas.bories at orange.fr  Tue Jun 11 18:51:26 2013
From: nicolas.bories at orange.fr (Nicolas Bories)
Date: Tue, 11 Jun 2013 18:51:26 +0200
Subject: [R-sig-Geo] Adaptive Savitzky Golay Filter function
In-Reply-To: <51B753F6020000270001ABD8@gwia2.boku.ac.at>
References: <51B1EE0E.2080507@orange.fr>
	<51B21769020000270001AAD8@gwia2.boku.ac.at>
	<51B660C0.20504@orange.fr>
	<51B753F6020000270001ABD8@gwia2.boku.ac.at>
Message-ID: <51B7558E.9080505@orange.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130611/2f5a476e/attachment.pl>

From kalbasse at yahoo.com  Tue Jun 11 19:07:52 2013
From: kalbasse at yahoo.com (Kalbasse Group)
Date: Tue, 11 Jun 2013 10:07:52 -0700 (PDT)
Subject: [R-sig-Geo] R-sig-Geo Digest, Vol 118, Issue 10
In-Reply-To: <mailman.17.1370944804.23972.r-sig-geo@r-project.org>
References: <mailman.17.1370944804.23972.r-sig-geo@r-project.org>
Message-ID: <1370970472.45944.YahooMailNeo@web162604.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130611/0d843d86/attachment.pl>

From rhtardin at gmail.com  Tue Jun 11 19:50:05 2013
From: rhtardin at gmail.com (Rodrigo Tardin)
Date: Tue, 11 Jun 2013 14:50:05 -0300
Subject: [R-sig-Geo] Base correlation larger than alpha (ME - Spdep
	package
In-Reply-To: <alpine.LRH.2.03.1306111043490.30529@reclus.nhh.no>
References: <CAE5HZZ+-HFC7BE-JZwgKnkBmQjvYO0QcicOrw3=9DSTKwy80gg@mail.gmail.com>
	<alpine.LRH.2.03.1306102154110.28056@reclus.nhh.no>
	<CAE5HZZLX_exXFM32b=HTjfgUM15gfOTMagtEvthnPFYcC3=_Wg@mail.gmail.com>
	<alpine.LRH.2.03.1306111043490.30529@reclus.nhh.no>
Message-ID: <CAE5HZZJzd=Ot1j4OzW3MnCopYAmNdrEMc3R4DpvL_KbGVPV+ow@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130611/4e913ff8/attachment.pl>

From gaobj1991 at gmail.com  Wed Jun 12 05:10:13 2013
From: gaobj1991 at gmail.com (=?GB2312?B?uN+437GmvfA=?=)
Date: Wed, 12 Jun 2013 11:10:13 +0800
Subject: [R-sig-Geo] How to display global grid data on a global map with R
Message-ID: <CAKZDnpTOnP9i6w_08-Z8K9rTUPGkxgxT4FUAQg56qd35emLZkA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130612/8d5b7d6c/attachment.pl>

From agus.camacho at gmail.com  Wed Jun 12 05:49:38 2013
From: agus.camacho at gmail.com (Agus Camacho)
Date: Wed, 12 Jun 2013 00:49:38 -0300
Subject: [R-sig-Geo] GIBF function from dismo package,
	did not download some species.
Message-ID: <CALsJ7pTu6YiELbhJXW3SM2hmdUX3oGEcZ24fbc3Y01aA=+Ar7Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130612/a6150dfa/attachment.pl>

From r.hijmans at gmail.com  Wed Jun 12 08:50:45 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 11 Jun 2013 23:50:45 -0700
Subject: [R-sig-Geo] GIBF function from dismo package,
 did not download some species.
In-Reply-To: <CALsJ7pTu6YiELbhJXW3SM2hmdUX3oGEcZ24fbc3Y01aA=+Ar7Q@mail.gmail.com>
References: <CALsJ7pTu6YiELbhJXW3SM2hmdUX3oGEcZ24fbc3Y01aA=+Ar7Q@mail.gmail.com>
Message-ID: <CANtt_hycdrqnAQTpc-JyzoHkx04z+btbKeg-Le2Y7jBdvUryMw@mail.gmail.com>

Agus,

# no records:
gbif(genus='Amphiglossus' , species='mouroundavae')

# one record --- all names that start with 'mouroundavae'
gbif(genus='Amphiglossus' , species='mouroundavae*')

# seven records --- also include records without geographic coordinates
gbif(genus='Amphiglossus' , species='mouroundavae*', geo=F)

Robert


On Tue, Jun 11, 2013 at 8:49 PM, Agus Camacho <agus.camacho at gmail.com> wrote:
> Dear list,
>
> Ive been trying to use the gbif function from the dismo package and found
> some species for which this command does not retrieve any occurrence,
> despite they are available at the site:
>
> for example, as written:
>
> gbif(genus= Amphiglossus , species= mouroundavae,
>       geo=TRUE, #ext=,
>        sp=FALSE, removeZeros=TRUE,
>        download=TRUE,
>        getAlt=TRUE,
>        ntries=5,
>        nrecs=1000,
>        start=1, end=NULL,
>        feedback=3)
>
> Thanks in advance
>
> --
> Agust?n Camacho Guerrero.
> Doutor em Zoologia.
> Laborat?rio de Herpetologia, Departamento de Zoologia, Instituto de
> Bioci?ncias, USP.
> Rua do Mat?o, trav. 14, n? 321, Cidade Universit?ria,
> S?o Paulo - SP, CEP: 05508-090, Brasil.
>
>         [[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From HEINRICH.RINNER at TIROL.GV.AT  Wed Jun 12 11:17:56 2013
From: HEINRICH.RINNER at TIROL.GV.AT (RINNER Heinrich)
Date: Wed, 12 Jun 2013 11:17:56 +0200
Subject: [R-sig-Geo] function classIntervals {classInt}: arguments
	over/under/between
Message-ID: <E18FDA5C64FC5645A25B2B52EB8CC9CE0F8D10CAF2@EXCHMCA.tirol.local>

Hello,

while making some choropleth maps wit R (version 3.0 under Windows7) I ran into an issue with function classIntervals (in package classInt):
I'm not able to change the character string value for "over"/"under"/"between" in printed table labels.

For example:
> library(classInt)
> data(jenks71)
> classIntervals(jenks71$jenks71, n = 5, style = "equal")
style: equal
  one of 3,921,225 possible partitions of this variable into 5 classes
  [15.57,43.516)  [43.516,71.462)  [71.462,99.408) [99.408,127.354)  [127.354,155.3] 
              35               44               17                4                2 
> classIntervals(jenks71$jenks71, n = 5, style = "equal", between = "-")
style: equal
  one of 3,921,225 possible partitions of this variable into 5 classes
  [15.57,43.516)  [43.516,71.462)  [71.462,99.408) [99.408,127.354)  [127.354,155.3] 
              35               44               17                4                2 

--> It seems to me that arguments "over"/"under"/"between" are being ignored, setting them has no effect on the output?

I tried with findColours as well, also with no effect:
> x <- classIntervals(jenks71$jenks71, n=5, style="equal")
> findColours(x, pal = 1:5, between = "-")
[...]
attr(,"table")
  [15.57,43.516)  [43.516,71.462)  [71.462,99.408) [99.408,127.354)  [127.354,155.3] 
              35               44               17                4                2

I have seen examples (Fig. 3.5 in the book "Applied Spatial Data Analysis with R") where classIntervals has behaved differently (?), so maybe something has changed here, or I am missing something?
What can I do to make this work? 

Kind regards,
Heinrich.


From kridox at ymail.com  Wed Jun 12 11:34:52 2013
From: kridox at ymail.com (Pascal Oettli)
Date: Wed, 12 Jun 2013 18:34:52 +0900
Subject: [R-sig-Geo] function classIntervals {classInt}: arguments
	over/under/between
In-Reply-To: <E18FDA5C64FC5645A25B2B52EB8CC9CE0F8D10CAF2@EXCHMCA.tirol.local>
References: <E18FDA5C64FC5645A25B2B52EB8CC9CE0F8D10CAF2@EXCHMCA.tirol.local>
Message-ID: <51B840BC.5030507@ymail.com>

Hi,

 From the help file:
"From version 0.1-11, the default representation has been changed to use 
cutlabels=TRUE, and representation within intervals has been corrected, 
thanks to Richard Dunlap."

You need to use cutlabels=FALSE

print(classIntervals(jenks71$jenks71, n = 5, style = "equal"), cutlabels 
= FALSE, between = "-", under = "<", over = ">")

Regards,
Pascal


On 12/06/13 18:17, RINNER Heinrich wrote:
> Hello,
>
> while making some choropleth maps wit R (version 3.0 under Windows7) I ran into an issue with function classIntervals (in package classInt):
> I'm not able to change the character string value for "over"/"under"/"between" in printed table labels.
>
> For example:
>> library(classInt)
>> data(jenks71)
>> classIntervals(jenks71$jenks71, n = 5, style = "equal")
> style: equal
>    one of 3,921,225 possible partitions of this variable into 5 classes
>    [15.57,43.516)  [43.516,71.462)  [71.462,99.408) [99.408,127.354)  [127.354,155.3]
>                35               44               17                4                2
>> classIntervals(jenks71$jenks71, n = 5, style = "equal", between = "-")
> style: equal
>    one of 3,921,225 possible partitions of this variable into 5 classes
>    [15.57,43.516)  [43.516,71.462)  [71.462,99.408) [99.408,127.354)  [127.354,155.3]
>                35               44               17                4                2
>
> --> It seems to me that arguments "over"/"under"/"between" are being ignored, setting them has no effect on the output?
>
> I tried with findColours as well, also with no effect:
>> x <- classIntervals(jenks71$jenks71, n=5, style="equal")
>> findColours(x, pal = 1:5, between = "-")
> [...]
> attr(,"table")
>    [15.57,43.516)  [43.516,71.462)  [71.462,99.408) [99.408,127.354)  [127.354,155.3]
>                35               44               17                4                2
>
> I have seen examples (Fig. 3.5 in the book "Applied Spatial Data Analysis with R") where classIntervals has behaved differently (?), so maybe something has changed here, or I am missing something?
> What can I do to make this work?
>
> Kind regards,
> Heinrich.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From Roger.Bivand at nhh.no  Wed Jun 12 11:43:11 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 12 Jun 2013 11:43:11 +0200
Subject: [R-sig-Geo] function classIntervals {classInt}: arguments
 over/under/between
In-Reply-To: <E18FDA5C64FC5645A25B2B52EB8CC9CE0F8D10CAF2@EXCHMCA.tirol.local>
References: <E18FDA5C64FC5645A25B2B52EB8CC9CE0F8D10CAF2@EXCHMCA.tirol.local>
Message-ID: <alpine.LRH.2.03.1306121134020.23763@reclus.nhh.no>

On Wed, 12 Jun 2013, RINNER Heinrich wrote:

> Hello,
>
> while making some choropleth maps wit R (version 3.0 under Windows7) I 
> ran into an issue with function classIntervals (in package classInt): 
> I'm not able to change the character string value for 
> "over"/"under"/"between" in printed table labels.

The help page for classIntervals() notes that the cutlabels= argument was 
given a default of TRUE at a revision after the first edition of the book 
was published, so the code which used to give fig 3.15 (p. 79) now gives 
labels as returned by the cut() function, and documented there. To get 
back to the original form, use cutlabels=FALSE in methods for 
"classIntervals" objects:

cI <- classIntervals(jenks71$jenks71, n = 5, style = "equal")
print(cI, cutlabels=FALSE)
attr(findColours(cI, pal = 1:5, cutlabels=FALSE), "table")

The under=, over= and between= arguments are respected when 
cutlabels=FALSE.

Hope this clarifies,

Roger

>
> For example:
>> library(classInt)
>> data(jenks71)
>> classIntervals(jenks71$jenks71, n = 5, style = "equal")
> style: equal
>  one of 3,921,225 possible partitions of this variable into 5 classes
>  [15.57,43.516)  [43.516,71.462)  [71.462,99.408) [99.408,127.354)  [127.354,155.3]
>              35               44               17                4                2
>> classIntervals(jenks71$jenks71, n = 5, style = "equal", between = "-")
> style: equal
>  one of 3,921,225 possible partitions of this variable into 5 classes
>  [15.57,43.516)  [43.516,71.462)  [71.462,99.408) [99.408,127.354)  [127.354,155.3]
>              35               44               17                4                2
>
> --> It seems to me that arguments "over"/"under"/"between" are being ignored, setting them has no effect on the output?
>
> I tried with findColours as well, also with no effect:
>> x <- classIntervals(jenks71$jenks71, n=5, style="equal")
>> findColours(x, pal = 1:5, between = "-")
> [...]
> attr(,"table")
>  [15.57,43.516)  [43.516,71.462)  [71.462,99.408) [99.408,127.354)  [127.354,155.3]
>              35               44               17                4                2
>
> I have seen examples (Fig. 3.5 in the book "Applied Spatial Data Analysis with R") where classIntervals has behaved differently (?), so maybe something has changed here, or I am missing something?
> What can I do to make this work?
>
> Kind regards,
> Heinrich.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From matteo.mattiuzzi at boku.ac.at  Wed Jun 12 12:58:04 2013
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Wed, 12 Jun 2013 12:58:04 +0200
Subject: [R-sig-Geo] Adaptive Savitzky Golay Filter function
In-Reply-To: <51B7558E.9080505@orange.fr>
References: <51B1EE0E.2080507@orange.fr>
	<51B21769020000270001AAD8@gwia2.boku.ac.at> <51B660C0.20504@orange.fr>
	<51B753F6020000270001ABD8@gwia2.boku.ac.at>
	<51B7558E.9080505@orange.fr>
Message-ID: <51B8705C020000270001AC9F@gwia2.boku.ac.at>

Nicolas,


using the meuse dataset you had a shift of 100km? or was it using your
'zone'? Is the problem in your 'zone' as I have no shift using the
'meuse'. 
Internally the specified extent is reprojected to LatLon using
rgdal:::spTransform() so maybe you have to check the CRS of your zone?
If you want to follow deeper in this argument you have to reveal more
about your 'zone'  
ie:
bbox(zone)
proj4string(zone)
zoneLatLon <- spTransform(zone,CRS("+proj=longlat +datum=WGS84
+ellps=WGS84 +towgs84=0,0,0"))

bbox(zoneLatLon)
proj4string(zoneLatLon)


# do these two shp files match visualized in a GIS? (with enabled 'on
the fly' reprojection!)
require(raster)
shapefile("z1",zone)
shapefile("z2",zoneLatLon)


#####
# Filtering
there are two helper function intended to organize the input data for
whittaker.raster() and smooth.spline.raster().
preStack and orgTime


the first ('preStack') has two rules:
1. to look for data in 'path' with a given pattern
2. to sort files by date and remove superfluous data (this info comes
from orgTime)


the secound ('orgTime') checks the available input data (from the first
preStack run), and generates a output structure based on your needs
(mainly these args: 'nDays','begin','end' and 'pillow') and the
available input data.


Example (in ?whittaker.raster):
path <- 'dir to your data'
# with the first run of preStack all files in 'path' with the ending
*_NDVI.tif$ are listened
vi <- preStack(path=path, pattern="*_NDVI.tif$")
vi


# with orgTime you say: retrieve and sort ascending by time, all
filenames (vi), that are needed to process the period begin to end,
adding (_if available_) a pillow of data on the begin and on the end you
your time serie to ensure a high quality filtering also on the temporal
borders. 
timeInfo <- orgTime(vi,nDays=16,begin="2005001",end="2005365",pillow=40)
timeInfo


# now just get the data in vi, selected and sorted by timeInfo     
vi <- preStack(files=vi,timeInfo=timeInfo)
vi
     

# now the simples run of whittaker.raster
# 'vi' is a vector of filenames, but you can also stack it:
# vi <- stack(vi)
whittaker.raster(vi=vi,timeInfo=timeInfo) # the result is written to a
file in the current dir as specified by the default argument in
whittaker.raster outDirPath="./"


# if you what 
use also the weighting info from VI_Quality and the precise day of the
year for the "X-Axis" [t], you have to organize also the following files
qa   <- preStack(path=path, pattern="*_VI_Quality.tif$")
time <- preStack(path=path, pattern="*_composite_day_of_the_year.tif$")


qa <- preStack(files=qa,timeInfo=timeInfo)

qa <- stack(qa)



time <- preStack(files=time,timeInfo=timeInfo)

time <- stack(time)




whittaker.raster(vi=vi, wt=qa, inT=time, timeInfo=timeInfo) # this
overwrites the result of the first filtering!
# in whittaker.raster and smooth.spline.raster there are functions that
are serializing the 'time' info and also extracting the bit-coded info
in qa, if you want to generate your own weighting rules based on qa you
need to run makeWeights() yourself and use it as input:


qa2 <- makeWeights(qa) # see ?makeWeights for the how to (important is:
threshold=XX, and decodeOnly=FALSE) see in the example what 'res' is
plotting
whittaker.raster(vi=vi, wt=qa2, inT=time, timeInfo=timeInfo) 


# NOTE you can also speedup the filtering using 'beginCluster()'
good luck, 
Matteo


>>> Nicolas Bories <nicolas.bories at orange.fr> 06/11/13 6:51 PM >>>

Dear Matteo,

Thanks a lot for your help !
I installed MODIS 0.9-3.
First of all, I followed your example with meuse dataset.
The projection was kept but there is a shift biger than 100 km with the 
real position.
In a second time I tried your solution to avoid any resampling.
It's worked perfectly : no shift, no resampling !
Thank you !

Now, I have to understand how to get a long time serie smoothed and gap 
filled for each pixel.
It's tricky for me, because I don't understand clearly how to use 
whittaker.rasteRe: [R-sig-Geo] Adaptive Savitzky Golay Filter function
From:	 Matteo Mattiuzzi
To:	 Nicolas Bories; r-sig-geo at r-project.org
BC:	
Date:	 Tuesday - June 11, 2013 4:44 PM
Subject: 	Re: [R-sig-Geo] Adaptive Savitzky Golay Filter function



Dear Nicolas,

Fixed in MODIS 0.9-3. Thanks! (If you like to build it yourself you can
get the source from:
http://ivfl-arc.boku.ac.at/owncloud/public.php?service=shorty_relay&id=QR5FZSxe0g)


example with the meuse dataset:
###########################
data(meuse)
coordinates(meuse) <- ~x+y
proj4string(meuse) <- CRS("+init=epsg:28992")

require(rgdal)
zone <- spTransform(meuse,CRS("+proj=sinu +lon_0=0 +x_0=0 +y_0=0
+a=6371007.181 +b=6371007.181 +units=m +no_defs"))

# make sure your extent has an assigned projection string, if not do:

# proj4string(zone) <- "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181
+b=6371007.181 +units=m +no_defs"

runGdal(product="MOD13Q1",begin="2002001",end="2002001", job="testJob",
extent=zone)

####################
Be aware, that if you use an 'extent' argument a certain re-sampling, in
form of a pixel shift, is nearly always performed, as a specified
'extent' may not matches the original MODIS grid! If you want absolutely
avoid any resampling you have to do something like that (processing the
entire TILE(s)):

tileH <- getTile(zone)$tileH
tileV <- getTile(zone)$tileV
runGdal(product="MOD13Q1",begin="2002001",end="2002001",
job="testJob",tileH=tileH,tileV=tileV)

and then you can use raster:::crop() to reduce the extents if you like!


Matteo



     Reply  Reply All  Forward   Move   Mark Unread    Delete   Print
View   
Mail Properties
From:	Nicolas Bories <nicolas.bories at orange.fr>	Tuesday - June
11, 2013 1:21 AM
To:	r-sig-geo at r-project.org
Subject:	Re: [R-sig-Geo] Adaptive Savitzky Golay Filter function
 Attachments:	
Part.001 (1 KB)	   View
Dear all,


The MODIS package seems to be very useful and very powerful !
Nonetheless I encounter some problems with the runGdal() function and 
extent argument.


I need to extract a part of "MOD13Q1" product between 2002 and 2005.
I also need to keep data in the same projection and the same resolution 
than hdf files, without resampling.
I tried 2 cases :


1) runGdal(product="MOD13Q1",begin="2002001",end="2006001", 
job="testJob",extent=zone)
zone is a SpatialPointsDataFrame with same projection than hdf files


This returns :
Error in ReplProj4string(obj, CRS(value)) :
  Geographical CRS given to non-conformant data:  -94112.4108437 
4925025.8738480


2) runGdal(product="MOD13Q1",begin="2002001",end="2002001", 
job="testJob",extent=zone,pixelSize="asIn",resamplingType="near",outProj="+proj=sinu

+lon_0=0 +x_0=0 +y_0=0 +a=6371007.181 +b=6371007.181 +units=m +no_defs")
zone is a SpatialPointsDataFrame  with CRS : "+proj=longlat
+datum=WGS84"


This produces TIFF files reprojected in LongLat


Can anyone please help me?


Many thanks in advance,


Nicolas.


On 07/06/2013 17:24, Matteo Mattiuzzi wrote:
> Dear Nicolas,
>
>
> The MODIS package on R-forge is intended to do exactly this. There are
> implemented a non iterative smooth.spline filtering and the iterative
> Whittaker filter (Atzberger and Eilers 2012).
> MODIS offers also a lot of data acquisition and pre processing
> capabilities but if you intend to use those capabilities you have to
do
> a little bit of set up first.
>
>
> Install the package and run MODISoptions(), this function is intended
to
> guide you through. Be aware that on Linux it is much simpler, but give
> it a try (and give me some feedback pls).
>
>
> install.packages("MODIS", repos="http://R-Forge.R-project.org")
>
>
> ########
> # on Linux avoid to run the next part as a non typical user ie as
root,
> because some directory is created and you will not access it as normal
> after.
> ########
>
>
> library(MODIS)
> MODISoptions()
>
>
> # You are on a Windows machine you need to install a HDF supporting
GDAL
>   or MRT (run MODIS:::checkTools() f> bother you with thinks redo the steps.
> # The entire processing should look approximately like that:
>
>
> getProduct() # to list available once
>
>
> runGdal(product="M.D13Q1",begin="2005001",end="2006001",
job="testJob")
> # this downloads, converts (HDF to GDAL formats), crops, warps.
> see?runGdal for details. You can limit the data sung the SDSstring
> argument.
> # if you have MRT
> runMrt(product="M.D13Q1",begin="2005001",end="2006001", job="testJob")
#
> this downloads, converts (HDF to GDAL formats), crops, warps.
see?runMrt
> for details, but I suggest to use gdal!
>
>
> setwd(paste0(options()$MODIS_outDirPath,"/testJob"))
> dir() # your data
>
>
>   # look for data
> vi     <- preStack(pattern="*_NDVI.tif$")
> qa   <- preStack(pattern="*_VI_Quality.tif$")
> time <- preStack(pattern="*_composite_day_of_the_year.tif$")
>      
> crono <- orgTime(vi) # here you decide the time steps for the output
>
>
> # order data by time, and use only what is defined by orgTime
> vi      <- stack(preStack(files=vi,timeInfo=crono))
> time <- stack(preStack(files=time,timeInfo=crono))
> qa    <- stack(preStack(files=qa,timeInfo=crono))
>
>
> # the weighting is generated internally in whittaker.raster but you
> could also do it separately for more control see ?makeWeights
> # qa <-  makeWeights(qa, bitShift=2, bitMask=15, threshold=6) # for
> bitShift and bitMask info on other products run
detectBitInfo("MOD13Q1")
>
>
>
> # filtering
> whittaker.raster(vi=vi, wt=qa, inT=time, timeInfo=crono, lambda=1000,
> overwrite=TRUE) #
>
>
> Good luck,
> Matteo
>
>
>
>>>> Nicolas Bories <nicolas.bories at orange.fr> 06/07/13 4:29 PM >>>
> Dear all,
>
> I'm trying to use the Adaptive Savitzky Golay Filterfor smoothing and
> gap filling a time series of remote sensing observations  (MODIS).
> For this exercise, I need to use a vector weighting strategy for a
> smoothing that takes into account the pixelreliability. The TIMESAT
code
> (L. Eklundh, P. J?nsson,2011) seems to be ideal for this. But, it is
> limiting my specific needs because it is available as an executable
and
> I cannot customize it according to my needs. So, I am wondering if
there
> is any other alternative function/tools to do this task.
>
> Thanks in advance for any suggestions !
>
> Nicolas.
>
>
>
>
>
>      [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo




    [[alternative HTML version deleted]]


From andre.vanproosdij at wur.nl  Wed Jun 12 15:11:54 2013
From: andre.vanproosdij at wur.nl (Proosdij, Andre van)
Date: Wed, 12 Jun 2013 13:11:54 +0000
Subject: [R-sig-Geo] Reading latitude longitude data from geotags
Message-ID: <84D737939C16114590DCDD4F003E013B1FE20FF5@SCOMP0936.wurnet.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130612/104e6c4a/attachment.pl>

From mdsumner at gmail.com  Wed Jun 12 15:34:18 2013
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 12 Jun 2013 23:34:18 +1000
Subject: [R-sig-Geo] Reading latitude longitude data from geotags
In-Reply-To: <84D737939C16114590DCDD4F003E013B1FE20FF5@SCOMP0936.wurnet.nl>
References: <84D737939C16114590DCDD4F003E013B1FE20FF5@SCOMP0936.wurnet.nl>
Message-ID: <CAAcGz98b6Twb8ujAJBa3JAgALJRm9fPCLJVO==53dAs=UOHPzQ@mail.gmail.com>

You can get a start at this with rgdal, I used GDALinfo to read in
EXIF metadata from one of the example files here:

http://owl.phy.queensu.ca/~phil/exiftool/sample_images.html

library(rgdal)
x <- GDALinfo("AcerCE-5330.jpg")
 attr(x, "mdata")
[1] "EXIF_ColorSpace=1"
"EXIF_ComponentsConfiguration=0x1 0x2 0x3 00"       "EXIF_Contrast=0"
 [4] "EXIF_CustomRendered=0"
"EXIF_DateTime=2009:10:10 22:58:22"
"EXIF_DateTimeDigitized=2009:10:10 22:58:22"  ...
...

I'm not familiar with this system so I don't know whether other files
have the position informationm but it might be worth a look on your
file and you could parse those strings easily enough.

A search for "exif" using sos pulled up a few more possible leads too:

library(sos)
findFn("exif")

(I'm not sure if the name of the "sos" "findFn" function is mean to be
ironic somehow, but I often type it incorrectly and have to look it up
again).

Cheers, Mike.



On Wed, Jun 12, 2013 at 11:11 PM, Proosdij, Andre van
<andre.vanproosdij at wur.nl> wrote:
> Dear colleagues,
>
> I want to read the latitude/longitude data from jpeg pictures. In the properties of the jpeg file, one can read the GPS coordinates in case the picture was taken using a camera with built-in GPS. Now I would like to use a R function to read these geotag data from the file and store it in a data.frame or matrix or other R object.
>
> 1) I tried getWikiMedia.ImageInfo from the plotKML package, but that doesn't work, probably because it was built to only read files directly from Wikimedia.
>
> ## Not run:
> imagename = "D:/R/IMG_5512.JPG"
> x <- getWikiMedia.ImageInfo(imagename)
> ## End (Not run)
>
> 2) I downloaded the exiftool (http://owl.phy.queensu.ca/~phil/exiftool/ ). One can drag and drop a jpeg file onto the exiftool(-k).exe file. The command line opens and displays the metadata. However, I wish to read this data into a data.frame or matrix in R.
>
> Any suggestions which function in which package could be used?
>
> Thanks in advance for your help!
>
>
> Andr?
>
>
> Ir. A.S.J. van Proosdij
> PhD Student
> t   +31 317 48 1198
> e  andre.vanproosdij at wur.nl<mailto:andre.vanproosdij at wur.nl>
>
> Naturalis Biodiversity Center, section NHN
> Biosystematics Group, Wageningen University
> Gen. Foulkesweg 37, 6703 BL Wageningen, the Netherlands
>
> www.bis.wur.nl<http://www.bis.wur.nl/>
>
>
>         [[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Michael Sumner
Hobart, Australia
e-mail: mdsumner at gmail.com


From alexandresantosbr at yahoo.com.br  Wed Jun 12 23:05:30 2013
From: alexandresantosbr at yahoo.com.br (Alexandre Santos)
Date: Wed, 12 Jun 2013 14:05:30 -0700 (PDT)
Subject: [R-sig-Geo] Problem with gdalinfo in landsat package
Message-ID: <1371071130.20699.YahooMailNeo@web120104.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130612/18c78849/attachment.pl>

From sarah.goslee at gmail.com  Wed Jun 12 23:09:42 2013
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Wed, 12 Jun 2013 17:09:42 -0400
Subject: [R-sig-Geo] Problem with gdalinfo in landsat package
In-Reply-To: <1371071130.20699.YahooMailNeo@web120104.mail.ne1.yahoo.com>
References: <1371071130.20699.YahooMailNeo@web120104.mail.ne1.yahoo.com>
Message-ID: <CAM_vjun9qtpe6sf=AA2shXb7qfg8W-CQXmjLWAFN8JoJKfgp+g@mail.gmail.com>

[forgot to copy the list]

Hi,

You need to install gdal following the usual procedure for your linux
distro, possibly like this:

sudo apt-get install proj
sudo apt-get install gdal-bin

Sarah

On Wed, Jun 12, 2013 at 5:05 PM, Alexandre Santos
<alexandresantosbr at yahoo.com.br> wrote:
> Dear members list,
>
>
>     I
> try to subset a Landsat geotiff image with the lssub(
> ) function in
> a landasat package, but always done: gdalinfo: not found error. I make:
>
> band5.sample<-lssub("LANDSAT_5_TM_20100506_217_074_L2_BAND5.tif",
> "subimage.tif", centerx = 773810, centery = 7841515,
> centerepsg=29193,widthx = 100, widthy = 100)
>
> sh:
> 1: gdalinfo: not found
>
> Error
> in system(paste("gdalinfo ", filename, sep = ""),
> intern = TRUE)
>
> There
> are any member group that uses the landsat package that helps me. I
> use Ubuntu OS Ubuntu 12.04 and R 3.0.0
>
> Thanks,
>
> Alexandre
> Santos



-- 
Sarah Goslee
http://www.functionaldiversity.org


From matteo.mattiuzzi at boku.ac.at  Wed Jun 12 23:13:37 2013
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Wed, 12 Jun 2013 23:13:37 +0200
Subject: [R-sig-Geo] Problem with gdalinfo in landsat package
Message-ID: <evi2ilw6oag80p9c9nx41fap.1371071617460@email.android.com>

Just a guess, open a terminal and type gdalinfo is the command not known install gdal-bin.
sudo apt-get install gdal-bin

Matteo

Alexandre Santos <alexandresantosbr at yahoo.com.br> schrieb:

>Dear members list,
>
>?????? 
>??? I
>try to subset a Landsat geotiff image with the lssub(
>) function in
>a landasat package, but always done: gdalinfo: not found error. I make:
>
>band5.sample<-lssub("LANDSAT_5_TM_20100506_217_074_L2_BAND5.tif",
>"subimage.tif", centerx = 773810, centery = 7841515,
>centerepsg=29193,widthx = 100, widthy = 100)
>
>sh:
>1: gdalinfo: not found 
>
>Error
>in system(paste("gdalinfo ", filename, sep = ""),
>intern = TRUE)  
>
>There
>are any member group that uses the landsat package that helps me. I
>use Ubuntu OS Ubuntu 12.04 and R 3.0.0
>
>Thanks,
>
>Alexandre
>Santos  
>	[[alternative HTML version deleted]]
>
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo

From gga01jet at yahoo.co.uk  Thu Jun 13 14:18:39 2013
From: gga01jet at yahoo.co.uk (John Tomkinson)
Date: Thu, 13 Jun 2013 13:18:39 +0100 (BST)
Subject: [R-sig-Geo] Merging spatial polygons
Message-ID: <1371125919.64002.YahooMailNeo@web171706.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130613/ee46149f/attachment.pl>

From lfelliott at hotmail.com  Thu Jun 13 17:23:06 2013
From: lfelliott at hotmail.com (LeRoy Elliott)
Date: Thu, 13 Jun 2013 15:23:06 +0000
Subject: [R-sig-Geo] Reading latitude longitude data from geotags
In-Reply-To: <mailman.19.1371117606.3499.r-sig-geo@r-project.org>
References: <mailman.19.1371117606.3499.r-sig-geo@r-project.org>
Message-ID: <BAY167-W4078CACE99B783A3AAFCCBA6870@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130613/a193cee3/attachment.pl>

From momadou at yahoo.fr  Thu Jun 13 17:51:45 2013
From: momadou at yahoo.fr (Komine)
Date: Thu, 13 Jun 2013 08:51:45 -0700 (PDT)
Subject: [R-sig-Geo] Performing a kriging
Message-ID: <1371138705731-7583773.post@n2.nabble.com>

Dear,
I use the data (.csv) shown below for performing a kriging.
       X             Y       Humidity
1 719134.1 1433671       90
2 736867.3 1431585       50
3 751471.1 1422197       32
4 749384.8 1414895       75
5 732694.8 1413851       12
6 719134.1 1412808       65

I use this code retreived from internet and adapted with my data.

> tab<-read.table("C:\\Users\\Kriging.csv",sep=";",dec=",",header=TRUE)
> tab
> library(geoR)
> ml <- likfit(Kriging, ini = c(1,0.5), fix.nugget =T)
> pred.grid <-  expand.grid(seq(0,1, l=51), seq(0,1, l=51))
> kc <- krige.conv(Kriging, loc = pred.grid, krige = krige.control(obj.m =
> ml))
> image(kc, loc = pred.grid, col=gray(seq(1,0.1,l=30))

When I run the code, I have an error message from the fourth command line. 

Thank you in advance for your advice, I am not familiar with in spatial
statistics.  

Komine  



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Performing-a-kriging-tp7583773.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From paulojus at c3sl.ufpr.br  Thu Jun 13 18:19:20 2013
From: paulojus at c3sl.ufpr.br (Paulo Justiniano Ribeiro Jr)
Date: Thu, 13 Jun 2013 13:19:20 -0300 (BRT)
Subject: [R-sig-Geo] Performing a kriging
In-Reply-To: <1371138705731-7583773.post@n2.nabble.com>
References: <1371138705731-7583773.post@n2.nabble.com>
Message-ID: <alpine.DEB.2.02.1306131317280.26246@macalan.c3sl.ufpr.br>

The iitial values at the ini argumento for likfit seems innapropriate for 
your data.
some reasonable guesses for them would be

var(Humidity) and 0.05*max(dist(cbind(X,Y)))

Besides consider divide UTM values by 1000 expressing distance in km
to avoid computations with large numbers




Paulo Justiniano Ribeiro Jr
LEG (Laboratorio de Estatistica e Geoinformacao)
Universidade Federal do Parana
Caixa Postal 19.081
CEP 81.531-990
Curitiba, PR  -  Brasil
Tel: (+55) 41 3361 3573
VOIP: (+55) (41) (3361 3600) 1053 1066
Fax: (+55) 41 3361 3141
e-mail: paulojus AT  ufpr  br
http://www.leg.ufpr.br/~paulojus

On Thu, 13 Jun 2013, Komine wrote:

> Dear,
> I use the data (.csv) shown below for performing a kriging.
>       X             Y       Humidity
> 1 719134.1 1433671       90
> 2 736867.3 1431585       50
> 3 751471.1 1422197       32
> 4 749384.8 1414895       75
> 5 732694.8 1413851       12
> 6 719134.1 1412808       65
>
> I use this code retreived from internet and adapted with my data.
>
>> tab<-read.table("C:\\Users\\Kriging.csv",sep=";",dec=",",header=TRUE)
>> tab
>> library(geoR)
>> ml <- likfit(Kriging, ini = c(1,0.5), fix.nugget =T)
>> pred.grid <-  expand.grid(seq(0,1, l=51), seq(0,1, l=51))
>> kc <- krige.conv(Kriging, loc = pred.grid, krige = krige.control(obj.m =
>> ml))
>> image(kc, loc = pred.grid, col=gray(seq(1,0.1,l=30))
>
> When I run the code, I have an error message from the fourth command line.
>
> Thank you in advance for your advice, I am not familiar with in spatial
> statistics.
>
> Komine
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Performing-a-kriging-tp7583773.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From momadou at yahoo.fr  Thu Jun 13 21:16:21 2013
From: momadou at yahoo.fr (Komine)
Date: Thu, 13 Jun 2013 12:16:21 -0700 (PDT)
Subject: [R-sig-Geo] Performing a kriging
In-Reply-To: <1371138705731-7583773.post@n2.nabble.com>
References: <1371138705731-7583773.post@n2.nabble.com>
Message-ID: <1371150981440-7583775.post@n2.nabble.com>

Thank you Saman and Paulo,

Certainly , I use Awkwardly the example advised by Paulo.  I don't
understand the code :var(Humidity) and 0.05*max(dist(cbind(X,Y))).

However, after the change of my data to geodata, I have not an error message
but the result is a black plot (useless).   
The followed code was used:

> library(geoR)
> tab<-as.geodata(tab,coords.col=1:2,data.col=3,data.names=NULL)
> ml <- likfit(tab, ini = c(1,0.5), fix.nugget =T) 
> pred.grid <-  expand.grid(seq(0,1, l=51), seq(0,1, l=51))
> kc <- krige.conv(tab, loc = pred.grid, krige = krige.control(obj.m = ml))
> image(kc, loc = pred.grid, col=gray(seq(1,0.1,l=30)))

Thank you in advance for your advice. 







 
Komine   
Komine wrote
> Dear,
> I use the data (.csv) shown below for performing a kriging.
>        X             Y       Humidity
> 1 719134.1 1433671       90
> 2 736867.3 1431585       50
> 3 751471.1 1422197       32
> 4 749384.8 1414895       75
> 5 732694.8 1413851       12
> 6 719134.1 1412808       65
> 
> I use this code retreived from internet and adapted with my data.
> 
>> tab<-read.table("C:\\Users\\Kriging.csv",sep=";",dec=",",header=TRUE)
>> tab
>> library(geoR)
>> ml <- likfit(Kriging, ini = c(1,0.5), fix.nugget =T)
>> pred.grid <-  expand.grid(seq(0,1, l=51), seq(0,1, l=51))
>> kc <- krige.conv(Kriging, loc = pred.grid, krige = krige.control(obj.m =
>> ml))
>> image(kc, loc = pred.grid, col=gray(seq(1,0.1,l=30))
> 
> When I run the code, I have an error message from the fourth command line. 
> 
> Thank you in advance for your advice, I am not familiar with in spatial
> statistics.  
> 
> Komine





--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Performing-a-kriging-tp7583773p7583775.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From momadou at yahoo.fr  Thu Jun 13 21:17:41 2013
From: momadou at yahoo.fr (Komine)
Date: Thu, 13 Jun 2013 12:17:41 -0700 (PDT)
Subject: [R-sig-Geo] Performing a kriging
In-Reply-To: <1371150981440-7583775.post@n2.nabble.com>
References: <1371138705731-7583773.post@n2.nabble.com>
	<1371150981440-7583775.post@n2.nabble.com>
Message-ID: <1371151061584-7583776.post@n2.nabble.com>

Thank you Saman and Paulo, 

Certainly , I use Awkwardly the example advised by Paulo.  I don't
understand the code :var(Humidity) and 0.05*max(dist(cbind(X,Y))).
 
However, after the change of my data to geodata, I have not an error message
but the result is a black plot (useless).  
 The followed code was used: 

> library(geoR) 
> tab<-as.geodata(tab,coords.col=1:2,data.col=3,data.names=NULL) 
> ml <- likfit(tab, ini = c(1,0.5), fix.nugget =T) 
> pred.grid <-  expand.grid(seq(0,1, l=51), seq(0,1, l=51)) 
> kc <- krige.conv(tab, loc = pred.grid, krige = krige.control(obj.m = ml)) 
> image(kc, loc = pred.grid, col=gray(seq(1,0.1,l=30))) 

Thank you in advance for your advice. 




--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Performing-a-kriging-tp7583773p7583776.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From gartner.gabe at gmail.com  Fri Jun 14 02:42:31 2013
From: gartner.gabe at gmail.com (Gabriel Gartner)
Date: Thu, 13 Jun 2013 20:42:31 -0400
Subject: [R-sig-Geo] specifying correlation structure in (n)lme
Message-ID: <E53D7BA8-CF4D-45A0-A616-84A819617475@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130613/792051ab/attachment.pl>

From timothy.gregoire at yale.edu  Fri Jun 14 03:20:43 2013
From: timothy.gregoire at yale.edu (Gregoire, Timothy)
Date: Fri, 14 Jun 2013 01:20:43 +0000
Subject: [R-sig-Geo] specifying correlation structure in (n)lme
In-Reply-To: <E53D7BA8-CF4D-45A0-A616-84A819617475@gmail.com>
References: <E53D7BA8-CF4D-45A0-A616-84A819617475@gmail.com>
Message-ID: <8A2DF497F2B80E4B9BE3662392CD10D807D8552C@X10-MBX9.yu.yale.edu>

Gabriel,

Look at the Pinheiro & Bates book on Mixed Models, it is part of the Springer series and is prob'ly an online resource thru the Harvard library system.

An alternative, outside the mixed models construct, is to use the likfit() function of the geoR package by Diggle & Ribeiro.

Tim

Timothy G. Gregoire
J. P. Weyerhaeuser Professor of Forest Management
School of Forestry & Environmental Studies, Yale University
360 Prospect Street, New Haven, CT  06511-2104  U.S.A.

office: 1.203.432.9398  mobile: 1.203.508.4014, fax: 1.203.432.3809
timothy.gregoire at yale.edu
G&V sampling text: http://crcpress.com/product/isbn/9781584883708


-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Gabriel Gartner
Sent: Thursday, June 13, 2013 8:43 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] specifying correlation structure in (n)lme

Hi All,

I have what I imagine is a fairly basic question, but I am a relative beginner at using spatial data in my analyses.  I am trying to address spatial autocorrelation in my data which examines lizard morphology across a broad geographic range.  My spatial data is in the form of decimal long/lat and I am trying to select which variogram model to use.

My question is, what is the form of the correlation structure within each of the corClasses for decimal lat/long data.  In other words, what goes after "form" in the following example script:

exp.cybotes<-update(null.model, correlation =corExp(1, form = ???), method= "ML")

I apologize for the basic question but I am stuck!

Thanks,
Gabriel


Gabriel E.A. Gartner
Postdoctoral Fellow
Museum of Comparative Zoology 
Harvard University
26 Oxford St.
Cambridge, MA 02138
Office: 617-384-8437
http://www.oeb.harvard.edu/faculty/losos/Gartner/index_2.html




	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Fri Jun 14 09:34:27 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 14 Jun 2013 09:34:27 +0200
Subject: [R-sig-Geo] specifying correlation structure in (n)lme
In-Reply-To: <8A2DF497F2B80E4B9BE3662392CD10D807D8552C@X10-MBX9.yu.yale.edu>
References: <E53D7BA8-CF4D-45A0-A616-84A819617475@gmail.com>
	<8A2DF497F2B80E4B9BE3662392CD10D807D8552C@X10-MBX9.yu.yale.edu>
Message-ID: <alpine.LRH.2.03.1306140930500.4981@reclus.nhh.no>

On Fri, 14 Jun 2013, Gregoire, Timothy wrote:

> Gabriel,
>
> Look at the Pinheiro & Bates book on Mixed Models, it is part of the 
> Springer series and is prob'ly an online resource thru the Harvard 
> library system.
>
> An alternative, outside the mixed models construct, is to use the 
> likfit() function of the geoR package by Diggle & Ribeiro.

But note that the coordinates are said to be given in "decimal long/lat", 
which if this means decimal degrees in geographical coordinates, and the 
study area is not on the Equator, may lead to trouble. If the study area 
is not global, you should project the coordinates to a planar 
representation, otherwise the distances used may not be what you think, 
and there may be instability numerically.

Roger

>
> Tim
>
> Timothy G. Gregoire
> J. P. Weyerhaeuser Professor of Forest Management
> School of Forestry & Environmental Studies, Yale University
> 360 Prospect Street, New Haven, CT  06511-2104  U.S.A.
>
> office: 1.203.432.9398  mobile: 1.203.508.4014, fax: 1.203.432.3809
> timothy.gregoire at yale.edu
> G&V sampling text: http://crcpress.com/product/isbn/9781584883708
>
>
> -----Original Message-----
> From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Gabriel Gartner
> Sent: Thursday, June 13, 2013 8:43 PM
> To: r-sig-geo at r-project.org
> Subject: [R-sig-Geo] specifying correlation structure in (n)lme
>
> Hi All,
>
> I have what I imagine is a fairly basic question, but I am a relative 
> beginner at using spatial data in my analyses.  I am trying to address 
> spatial autocorrelation in my data which examines lizard morphology 
> across a broad geographic range.  My spatial data is in the form of 
> decimal long/lat and I am trying to select which variogram model to use.
>
> My question is, what is the form of the correlation structure within 
> each of the corClasses for decimal lat/long data.  In other words, what 
> goes after "form" in the following example script:
>
> exp.cybotes<-update(null.model, correlation =corExp(1, form = ???), method= "ML")
>
> I apologize for the basic question but I am stuck!
>
> Thanks,
> Gabriel
>
>
> Gabriel E.A. Gartner
> Postdoctoral Fellow
> Museum of Comparative Zoology
> Harvard University
> 26 Oxford St.
> Cambridge, MA 02138
> Office: 617-384-8437
> http://www.oeb.harvard.edu/faculty/losos/Gartner/index_2.html
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Fri Jun 14 09:49:23 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 14 Jun 2013 09:49:23 +0200
Subject: [R-sig-Geo] Merging spatial polygons
In-Reply-To: <1371125919.64002.YahooMailNeo@web171706.mail.ir2.yahoo.com>
References: <1371125919.64002.YahooMailNeo@web171706.mail.ir2.yahoo.com>
Message-ID: <alpine.LRH.2.03.1306140944480.4981@reclus.nhh.no>

On Thu, 13 Jun 2013, John Tomkinson wrote:

> Hi,
>
> I'm looking to merge spatial polygons within a spatial polygon object. I 
> used to do this with the union spatial polygons command :
>
> neighbourhoods<-unionSpatialPolygons(city, neighbourhood$ID, 
> threshold=NULL, avoidGEOS=FALSE, avoidUnaryUnion=FALSE)
>
> But now having gpclib issues, my question is how would I do this with 
> the rgeos package? I can't seem to get the gUnion function to work.

If rgeos is available, unionSpatialPolygons() will use that rather than 
gpclib, so actually runs: gUnaryUnion(spgeom=city, 
id=as.character(neighbourhood$ID)) in your case. What does rgeosStatus() 
say with maptools loaded?

Always provide full details of error messages, best a reproducible example 
with a built-in data set, and always the output of sessionInfo().

>
> Thanks in advance,
>
> John
>
> 	[[alternative HTML version deleted]]

Only post plain text!

Roger

>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From lborger at cebc.cnrs.fr  Fri Jun 14 13:04:25 2013
From: lborger at cebc.cnrs.fr (lborger)
Date: Fri, 14 Jun 2013 13:04:25 +0200
Subject: [R-sig-Geo] specifying correlation structure in (n)lme
In-Reply-To: <mailman.17.1371204005.8333.r-sig-geo@r-project.org>
References: <mailman.17.1371204005.8333.r-sig-geo@r-project.org>
Message-ID: <WC20130614110425.9500F3@cebc.cnrs.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130614/079e288f/attachment.pl>

From dieter.vanderelst at ua.ac.be  Fri Jun 14 17:51:18 2013
From: dieter.vanderelst at ua.ac.be (Dieter Vanderelst)
Date: Fri, 14 Jun 2013 16:51:18 +0100
Subject: [R-sig-Geo] Determining in which polygon points lie
Message-ID: <51BB3BF6.9050605@ua.ac.be>

Dear List,

I'm reading in a shapefile of a country with different subregions in the 
shapefile (the shapefile was downloaded from the GADM database of Global 
Administrative Areas). I also have a number of points. Therefore, my 
code looks like this (using the maptools package):

country<-readShapePoly(file)
points<-readShapePoints(file)

Now, I want to know in which of the N regions of the country each of the 
spatial points lies? Is there an easy way to do this? I know there is a 
function points.in.poly in sp. But this functions seems incompatible 
with the objects created by the maptools functions. Also, this function 
requires looping over the regions in a set.

Regards,
Dieter

---
Behavioural, Acoustic and Sensory Ecology Lab
University Bristol, UK

http://bitsofbats.weebly.com/


From s6lihert at uni-bonn.de  Fri Jun 14 18:05:38 2013
From: s6lihert at uni-bonn.de (Lionel Hertzog)
Date: Fri, 14 Jun 2013 18:05:38 +0200
Subject: [R-sig-Geo] Determining in which polygon points lie
In-Reply-To: <51BB3BF6.9050605@ua.ac.be>
References: <51BB3BF6.9050605@ua.ac.be>
Message-ID: <51BB3F52.1040305@uni-bonn.de>

Dear Dieter,

You can download gadm files as R SpatialPolygonsDataFrame. Then using 
load you can load them in your session.
You should keep only the column of interest for you (the N-region 
identifiers) in the SpatialPolygons, you can then use the 'over' 
function in the sp package to get for each polygons (region) the points 
ID (usually their row number, but if you have a SpatialPointsDataFrame 
the first column values).

Sincerely yours,
Lionel

On 14/06/2013 17:51, Dieter Vanderelst wrote:
> Dear List,
>
> I'm reading in a shapefile of a country with different subregions in 
> the shapefile (the shapefile was downloaded from the GADM database of 
> Global Administrative Areas). I also have a number of points. 
> Therefore, my code looks like this (using the maptools package):
>
> country<-readShapePoly(file)
> points<-readShapePoints(file)
>
> Now, I want to know in which of the N regions of the country each of 
> the spatial points lies? Is there an easy way to do this? I know there 
> is a function points.in.poly in sp. But this functions seems 
> incompatible with the objects created by the maptools functions. Also, 
> this function requires looping over the regions in a set.
>
> Regards,
> Dieter
>
> ---
> Behavioural, Acoustic and Sensory Ecology Lab
> University Bristol, UK
>
> http://bitsofbats.weebly.com/
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Fri Jun 14 18:06:51 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 14 Jun 2013 18:06:51 +0200
Subject: [R-sig-Geo] Determining in which polygon points lie
In-Reply-To: <51BB3BF6.9050605@ua.ac.be>
References: <51BB3BF6.9050605@ua.ac.be>
Message-ID: <alpine.LRH.2.03.1306141754470.7356@reclus.nhh.no>

On Fri, 14 Jun 2013, Dieter Vanderelst wrote:

> Dear List,
>
> I'm reading in a shapefile of a country with different subregions in the 
> shapefile (the shapefile was downloaded from the GADM database of Global 
> Administrative Areas). I also have a number of points. Therefore, my code 
> looks like this (using the maptools package):
>
> country<-readShapePoly(file)
> points<-readShapePoints(file)
>
> Now, I want to know in which of the N regions of the country each of the 
> spatial points lies? Is there an easy way to do this? I know there is a 
> function points.in.poly in sp. But this functions seems incompatible with the 
> objects created by the maptools functions. Also, this function requires 
> looping over the regions in a set.

This is a FAQ. See:

library(sp)
vignette("over")
?over

Example:

library(maptools)
nc1 <- readShapePoly(system.file("shapes/sids.shp",
  package="maptools")[1],
  proj4string=CRS("+proj=longlat +ellps=clrk66"))
dim(nc1)
set.seed(1)
pts <- spsample(nc1, n=200, type="random")
str(pts %over% as(nc1, "SpatialPolygons"))

Hope this clarifies

Roger

>
> Regards,
> Dieter
>
> ---
> Behavioural, Acoustic and Sensory Ecology Lab
> University Bristol, UK
>
> http://bitsofbats.weebly.com/
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From sa.cizmeli at usherbrooke.ca  Sat Jun 15 16:35:34 2013
From: sa.cizmeli at usherbrooke.ca (scizmeli)
Date: Sat, 15 Jun 2013 07:35:34 -0700 (PDT)
Subject: [R-sig-Geo] STIDF subsetting problem
Message-ID: <1371306934635-7583785.post@n2.nabble.com>

I am trying rearrange the rows of a STIDF object using  a numerical variable
idx containing the row indexes having  some repeated indexes :

data(air)
rural = as(rural,"STIDF")
rural[c(1,1,1)]

gives me only a 1-row STIDF object. I would rather expect a 3-rows STIDF
object, with the replicates of the 1st row. 

The general behavior of R in such a case, however, would be to replicate the
rows. I give below two examples with data.frame and list objects ;

a=data.frame(a=c(1,2,3,4),b=c(1,3,4,5))
a[c(1,1,1),]
or 
a=list(k=1,l=2,m=3)
a[c(1,1,1)]

Is this behavior of spacetime (namely the internal function subs.STIDF) can
be modified in the future to provide a more compatible with the R standards?
In its current way, it is not possible to use the subsetting in a
traditional R-fashion.
thanks
Servet



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/STIDF-subsetting-problem-tp7583785.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From milansharma2012 at yahoo.com  Sun Jun 16 08:10:31 2013
From: milansharma2012 at yahoo.com (Milan Sharma)
Date: Sat, 15 Jun 2013 23:10:31 -0700 (PDT)
Subject: [R-sig-Geo] counties of montana
Message-ID: <1371363031.40530.YahooMailNeo@web162105.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130615/02cac029/attachment.pl>

From onos2god at yahoo.com  Sun Jun 16 11:54:47 2013
From: onos2god at yahoo.com (Israel Ikoyi)
Date: Sun, 16 Jun 2013 02:54:47 -0700 (PDT)
Subject: [R-sig-Geo] warning: singular in variogram fit
Message-ID: <1371376487.82556.YahooMailNeo@web160605.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130616/8d4051bf/attachment.pl>

From jones at reed.edu  Sun Jun 16 17:53:18 2013
From: jones at reed.edu (Albyn Jones)
Date: Sun, 16 Jun 2013 08:53:18 -0700
Subject: [R-sig-Geo] counties of montana
In-Reply-To: <1371363031.40530.YahooMailNeo@web162105.mail.bf1.yahoo.com>
References: <1371363031.40530.YahooMailNeo@web162105.mail.bf1.yahoo.com>
Message-ID: <CA+3jU8Eiv2ryJTpUvwGGm-J1Gyr-ys6oa04Br9WT80f5sE+L2Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130616/2b7d9a29/attachment.pl>

From Lee.Hachadoorian+L at gmail.com  Sun Jun 16 20:21:37 2013
From: Lee.Hachadoorian+L at gmail.com (Lee Hachadoorian)
Date: Sun, 16 Jun 2013 14:21:37 -0400
Subject: [R-sig-Geo] Trouble creating classed line widths
Message-ID: <51BE0231.5000804@gmail.com>

Hello,

I'm trying to map a SpatialLinesDataFrame where line weight is 
data-dependent. I can produce an unclassed map but not a classed map. 
findInterval() returns a vector, but when I try to assign it to lwd I 
get "cannot coerce type 'S4' to vector of type 'double'", even though 
docs say findInterval() returns a vector and typeof indicates integer 
(which should be coerceable).

# BEGIN
library(sp)
library(classInt)

# Provide your own SLDF, see below*
sldfTemp = sldfYourData
sldfTemp$x = sldfTemp$YourVariable

#Create dummy data
sldfTemp$x = runif(length(sldfTemp$x), 1, 7)

# All same weight.
plot(sldfTemp, lwd=3) # This works

# Unclassed, line weight proportional to data value.
plot(sldfTemp, lwd=sldfTemp$x) # This works

# Recycled vector, arbitrary.
plot(sldfTemp, lwd=c(1,3,7)) # This works

#Create class intervals
ciX = classIntervals(sldfTemp$x, n=5, style="quantile")

# Classed, line weight equals class index.
lwd = findInterval(sldfTemp$x, head(ciX$brks, n=-1))
plot(sldfTemp, lwd) # This does not work
typeof(lwd)
lwd = as.double(lwd) # This works!
typeof(lwd)
plot(sldfTemp, lwd) # This still does not work

# END

Best,
--Lee

* Apologies for not providing a dataset. I tried to run code directly 
from ASDAR which for some reason did not work, so I could not build a 
test SLDF programmatically.

 > data(meuse)
 > coordinates(meuse) = c("x", "y")
 > plot(meuse)
 > cc = coordinates(meuse)
 > m.sl = SpatialLines(list(Lines(list(Line(cc)))))
Error in Lines(list(Line(cc))) : Single ID required

-- 
Lee Hachadoorian
Assistant Professor in Geography, Dartmouth College
http://freecity.commons.gc.cuny.edu


From Roger.Bivand at nhh.no  Sun Jun 16 20:47:07 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 16 Jun 2013 20:47:07 +0200
Subject: [R-sig-Geo] Trouble creating classed line widths
In-Reply-To: <51BE0231.5000804@gmail.com>
References: <51BE0231.5000804@gmail.com>
Message-ID: <alpine.LRH.2.03.1306162030040.27618@reclus.nhh.no>

On Sun, 16 Jun 2013, Lee Hachadoorian wrote:

> Hello,
>
> I'm trying to map a SpatialLinesDataFrame where line weight is 
> data-dependent. I can produce an unclassed map but not a classed map. 
> findInterval() returns a vector, but when I try to assign it to lwd I get 
> "cannot coerce type 'S4' to vector of type 'double'", even though docs say 
> findInterval() returns a vector and typeof indicates integer (which should be 
> coerceable).
>
> # BEGIN
> library(sp)
> library(classInt)
>
> # Provide your own SLDF, see below*
> sldfTemp = sldfYourData
> sldfTemp$x = sldfTemp$YourVariable
>
> #Create dummy data
> sldfTemp$x = runif(length(sldfTemp$x), 1, 7)
>
> # All same weight.
> plot(sldfTemp, lwd=3) # This works
>
> # Unclassed, line weight proportional to data value.
> plot(sldfTemp, lwd=sldfTemp$x) # This works
>
> # Recycled vector, arbitrary.
> plot(sldfTemp, lwd=c(1,3,7)) # This works
>
> #Create class intervals
> ciX = classIntervals(sldfTemp$x, n=5, style="quantile")
>
> # Classed, line weight equals class index.
> lwd = findInterval(sldfTemp$x, head(ciX$brks, n=-1))
> plot(sldfTemp, lwd) # This does not work
> typeof(lwd)
> lwd = as.double(lwd) # This works!
> typeof(lwd)
> plot(sldfTemp, lwd) # This still does not work

Would using the argument name help?

library(sp)
data(meuse.grid)
coordinates(meuse.grid) <- c("x", "y")
gridded(meuse.grid) <- TRUE
fullgrid(meuse.grid) <- TRUE
cL <- contourLines(as.image.SpatialGridDataFrame(meuse.grid["dist"]))
library(maptools)
SPcL <- ContourLines2SLDF(cL)
SPcL$x <- as.numeric(as.character(SPcL$level))
ciX = classIntervals(SPcL$x, n=5, style="quantile")
lwd = findInterval(SPcL$x, head(ciX$brks, n=-1))
# plot(SPcL, lwd)
# Error in as.double(x) :
#  cannot coerce type 'S4' to vector of type 'double'
plot(SPcL, lwd=lwd)

>
> # END
>
> Best,
> --Lee
>
> * Apologies for not providing a dataset. I tried to run code directly from 
> ASDAR which for some reason did not work, so I could not build a test SLDF 
> programmatically.
>
>> data(meuse)
>> coordinates(meuse) = c("x", "y")
>> plot(meuse)
>> cc = coordinates(meuse)
>> m.sl = SpatialLines(list(Lines(list(Line(cc)))))
> Error in Lines(list(Line(cc))) : Single ID required

See http://www.asdar-book.org -> Errata -> Chapter 3, or:

http://www.asdar-book.org/errata.php?errchapter=4

Roger

>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Lee.Hachadoorian+L at gmail.com  Sun Jun 16 20:59:01 2013
From: Lee.Hachadoorian+L at gmail.com (Lee Hachadoorian)
Date: Sun, 16 Jun 2013 14:59:01 -0400
Subject: [R-sig-Geo] Trouble creating classed line widths
In-Reply-To: <alpine.LRH.2.03.1306162030040.27618@reclus.nhh.no>
References: <51BE0231.5000804@gmail.com>
	<alpine.LRH.2.03.1306162030040.27618@reclus.nhh.no>
Message-ID: <51BE0AF5.7070105@gmail.com>


On 06/16/2013 02:47 PM, Roger Bivand wrote:
> On Sun, 16 Jun 2013, Lee Hachadoorian wrote:
>
>> Hello,
>>
>> I'm trying to map a SpatialLinesDataFrame where line weight is 
>> data-dependent. I can produce an unclassed map but not a classed map. 
>> findInterval() returns a vector, but when I try to assign it to lwd I 
>> get "cannot coerce type 'S4' to vector of type 'double'", even though 
>> docs say findInterval() returns a vector and typeof indicates integer 
>> (which should be coerceable).
>>
>> # BEGIN
>> library(sp)
>> library(classInt)
>>
>> # Provide your own SLDF, see below*
>> sldfTemp = sldfYourData
>> sldfTemp$x = sldfTemp$YourVariable
>>
>> #Create dummy data
>> sldfTemp$x = runif(length(sldfTemp$x), 1, 7)
>>
>> # All same weight.
>> plot(sldfTemp, lwd=3) # This works
>>
>> # Unclassed, line weight proportional to data value.
>> plot(sldfTemp, lwd=sldfTemp$x) # This works
>>
>> # Recycled vector, arbitrary.
>> plot(sldfTemp, lwd=c(1,3,7)) # This works
>>
>> #Create class intervals
>> ciX = classIntervals(sldfTemp$x, n=5, style="quantile")
>>
>> # Classed, line weight equals class index.
>> lwd = findInterval(sldfTemp$x, head(ciX$brks, n=-1))
>> plot(sldfTemp, lwd) # This does not work
>> typeof(lwd)
>> lwd = as.double(lwd) # This works!
>> typeof(lwd)
>> plot(sldfTemp, lwd) # This still does not work
>
> Would using the argument name help?
>
> library(sp)
> data(meuse.grid)
> coordinates(meuse.grid) <- c("x", "y")
> gridded(meuse.grid) <- TRUE
> fullgrid(meuse.grid) <- TRUE
> cL <- contourLines(as.image.SpatialGridDataFrame(meuse.grid["dist"]))
> library(maptools)
> SPcL <- ContourLines2SLDF(cL)
> SPcL$x <- as.numeric(as.character(SPcL$level))
> ciX = classIntervals(SPcL$x, n=5, style="quantile")
> lwd = findInterval(SPcL$x, head(ciX$brks, n=-1))
> # plot(SPcL, lwd)
> # Error in as.double(x) :
> #  cannot coerce type 'S4' to vector of type 'double'
> plot(SPcL, lwd=lwd)

Embarrassingly, yes.

I suppose that's a danger of naming variables to match argument names. I 
doubt I would have made that mistake if I used a different variable name.

Thank you,
--Lee

-- 
Lee Hachadoorian
Assistant Professor in Geography, Dartmouth College
http://freecity.commons.gc.cuny.edu


From edzer.pebesma at uni-muenster.de  Sun Jun 16 22:43:58 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 16 Jun 2013 22:43:58 +0200
Subject: [R-sig-Geo] warning: singular in variogram fit
In-Reply-To: <1371376487.82556.YahooMailNeo@web160605.mail.bf1.yahoo.com>
References: <1371376487.82556.YahooMailNeo@web160605.mail.bf1.yahoo.com>
Message-ID: <51BE238E.6080609@uni-muenster.de>

searching for:

warning: singular model in variogram fit. site:stat.ethz.ch

gives a large number of hits. Did you look at them?

On 06/16/2013 11:54 AM, Israel Ikoyi wrote:
> Dear R-sig-Geo,
> 
> I am trying to fit the the "Materon' model to my data with this command:
> 
> # define gstat object and compute variogram:
> # mal = subset(mal, !is.na(mal$Zntot.s)) # needed if missing values
> g = gstat(id = c("Zntot.s"), formula = Zntot.s~1, data = mal)
> vg = variogram(g)
> # vg = variogram(g, boundaries = c(15,25,45,70,100,150,200,250,300))
> windows(width = 8, height = 6)
> plot(vg, plot.numbers = TRUE)
> 
> # choose initial variogram model and plot:
> vgm = vgm(nugget=0, psill=0.5, range=140, model="Mat", kappa = 0.9)
> plot(vg, vgm)
> 
> # fit variogram model:
> vgm = fit.variogram(vg, vgm)
> windows(width = 8, height = 6)
> plot(vg, vgm, main = "Variogram Zntoy.s")
> vgm
> 
> Then i get this warning: singular model in variogram fit. What does it mean and how do i solve the problem? 
> 
> Thank you
> 
>  
> Kind regards,
> 
> ISRAEL O. IKOYI
> MSc. Thesis Research Student
> Wageningen University 
> Department of Soil Quality 
> P.O. Box 47 
> NL-6700 AA Wageningen 
> The Netherlands
> 
> 	[[alternative HTML version deleted]]
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de


From ssgorelick at gmail.com  Sun Jun 16 23:02:27 2013
From: ssgorelick at gmail.com (Susan Gorelick)
Date: Sun, 16 Jun 2013 17:02:27 -0400
Subject: [R-sig-Geo] Help with creating a weight matrix for point dataset of
	78, 000 observations
Message-ID: <000001ce6ad4$d2820370$77860a50$@com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130616/4a6eb62c/attachment.pl>

From bakare at ualberta.ca  Mon Jun 17 03:04:31 2013
From: bakare at ualberta.ca (Moshood Agba Bakare)
Date: Sun, 16 Jun 2013 19:04:31 -0600
Subject: [R-sig-Geo] Trend surface analysis spatial data
Message-ID: <CAJRR3XMZZWhwTRD20QLnY5kru4m+jmBjTdTDq+pAcXsmEz5byQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130616/98effd10/attachment.pl>

From milansharma2012 at yahoo.com  Mon Jun 17 04:46:34 2013
From: milansharma2012 at yahoo.com (Milan Sharma)
Date: Sun, 16 Jun 2013 19:46:34 -0700 (PDT)
Subject: [R-sig-Geo] plotting counties of  two states
Message-ID: <1371437194.17033.YahooMailNeo@web162101.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130616/e96146ec/attachment.pl>

From Roger.Bivand at nhh.no  Mon Jun 17 10:12:46 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 17 Jun 2013 10:12:46 +0200
Subject: [R-sig-Geo] Help with creating a weight matrix for point
 dataset of 78, 000 observations
In-Reply-To: <000001ce6ad4$d2820370$77860a50$@com>
References: <000001ce6ad4$d2820370$77860a50$@com>
Message-ID: <alpine.LRH.2.03.1306170941450.30176@reclus.nhh.no>

On Sun, 16 Jun 2013, Susan Gorelick wrote:

> Hi,
>
> I need to create a weight matrix in R  for point dataset of 78,000
> observations from a shapefile( from ArcGIS) which has both sets of
> longitudes and latitudes and X-Y coordinates (based on state plane feet).
>
> So far I projected the dataset in ESRI coordinates using rgdal maptools.

Your data are point data. Did you look at a summary() of the object after 
reading it in? You would look at summary in Stata, so do the same in R.

>
> I  keep getting error message as below:
>
> shapeR_SP <-spTransform(shapeR, CRS("+init=ESRI:102730"))

Did you check what the CRS of the imported object was?

>
>> IDs <-row.names(as(shapeR_SP, "data.frame"))
>
>> coords<-coordinates(shapeR_SP)
>
>> shapeR_nbq <-poly2nb(shapeR_SP)
>
> Error: extends(class(pl), "SpatialPolygons") is not TRUE

You did read ?poly2nb, didn't you? You have data with point support, so if 
you really want to treat them as polygons, you would go through a 
triangulation first - then tri2nb?

>
>> shapeR_kn6 <-knn2nb(knearneigh(coords, k=6), row.names=IDs)
>
> Warning message:
>
> In library(package, lib.loc = lib.loc, character.only = TRUE, logical.return
> = TRUE,  :
>
>  there is no package called 'RANN'
>
>
>
> where is 'RANN' from?!

Please do understand how R packages work. Do visit the spdep page on CRAN 
- you'll see that RANN (a clever implementation of fast approximate 
nearest neighbours) is "Suggests:". If spdep had "Depends:" on RANN, it 
would have been installed automatically when you installed spdep; when 
packages are "Suggests:", they are optional extras. In your case with 
point support, RANN will be faster than using the fallback, so install it. 
This is just as in using additional, user-contributed code in Stata, the 
user chooses what to install.

>
>
>
> The outcome goal is to address the spatial dependence  in hedonic model with
> house sales transaction study.  I like to run the spatial dependence test so
> that I can refine the spatial regession analysis.
>
>
>
> I would appreciate any suggestions  and/or  answers to the following
> questions:
>
> 1.       What is the sample size capacity of R (weight matrix size)?  This
> is the main reason I switched back to R from Stata.  Is there any means to
> achieve the outcomes I am looking for?

library(fortunes)
fortune("Yoda")

>
> 2.       Do I need to install.view ("Spatial)? When I tried to
> install.view("Spatial"), I've been getting a message that that package is
> not available for R 3.0 which I am using - R studio. Is "Spatial" different
> from "spatial" package?  Do I need to find a different version of R?
>

No, but you should read up on and understand how R handles contributed 
packages. It may be that R Studio is getting in the way adding an extra 
layer of stuff between you and the console - it will work fine when you 
know what you are doing, but will not help you to learn, it is intended 
to support programming in R when the programmer knows what to do.

> 3.       Is there a better to achieve the outcome?  For instance, using
> GeoDa to create a weight matrix?

Generating neighbour objects for 78k points is not a problem:

library(spdep)
set.seed(1)
xy <- matrix(runif(78000*2), ncol=2)
system.time(nb6 <- knn2nb(knearneigh(xy, k=6)))
#   user  system elapsed
#  7.093   0.047   7.142

You may of course check this by creating k6 neighbours in GeoDa from the 
projected point shapefile, and reading the resulting GAL file into R.

However, this is an asymmetric neighbour list, so fitting ML models will 
be done accurately with method="LU", which will be slower than 
method="Matrix" using updating spare Cholesky log determinants for 
symmetric neighbours. You may also use method="MC" for Monte Carlo log 
determinant approximations. The default method="eigen" will have memory 
problems with your dense 78k by 78k matrix.

You should also be able to use the full range of GM estimators (as you 
would in Stata). Check by exporting the neighbours generated in R to Stata 
with:

lw <- nb2listw(nb, style="W")
# for row standardised weights
sn <- listw2sn(lw)
write.sn2gwt(sn, "nb_w.gwt")

spmat import W using nb_w.gwt, geoda replace
spreg gs2sls Y <your Xs>, id(ID) dlmat(W) elmat(W)

See for details:

http://rri.wvu.edu/wp-content/uploads/2012/11/Piras_BivandWP2013.pdf

Hope this clarifies,

Roger

>
>
>
> Thank you.
>
>
>
> Susan Shim Gorelick
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From edzer.pebesma at uni-muenster.de  Mon Jun 17 10:46:24 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 17 Jun 2013 10:46:24 +0200
Subject: [R-sig-Geo] STIDF subsetting problem
In-Reply-To: <1371306934635-7583785.post@n2.nabble.com>
References: <1371306934635-7583785.post@n2.nabble.com>
Message-ID: <51BECCE0.3080308@uni-muenster.de>

I think this is a fair request, and changed the code accordingly. The
updated code is on r-forge; the next CRAN version will support this.

Also, this version has an stplot method for STIDF that shows attributes
per time (slice), e.g. point pattern marks, the same way spplot does for
multiple attributes.

Thanks for the suggestion,

On 06/15/2013 04:35 PM, scizmeli wrote:
> I am trying rearrange the rows of a STIDF object using  a numerical variable
> idx containing the row indexes having  some repeated indexes :
> 
> data(air)
> rural = as(rural,"STIDF")
> rural[c(1,1,1)]
> 
> gives me only a 1-row STIDF object. I would rather expect a 3-rows STIDF
> object, with the replicates of the 1st row. 
> 
> The general behavior of R in such a case, however, would be to replicate the
> rows. I give below two examples with data.frame and list objects ;
> 
> a=data.frame(a=c(1,2,3,4),b=c(1,3,4,5))
> a[c(1,1,1),]
> or 
> a=list(k=1,l=2,m=3)
> a[c(1,1,1)]
> 
> Is this behavior of spacetime (namely the internal function subs.STIDF) can
> be modified in the future to provide a more compatible with the R standards?
> In its current way, it is not possible to use the subsetting in a
> traditional R-fashion.
> thanks
> Servet
> 
> 
> 
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/STIDF-subsetting-problem-tp7583785.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de


From sa.cizmeli at usherbrooke.ca  Mon Jun 17 12:15:15 2013
From: sa.cizmeli at usherbrooke.ca (scizmeli)
Date: Mon, 17 Jun 2013 03:15:15 -0700 (PDT)
Subject: [R-sig-Geo] STIDF subsetting problem
In-Reply-To: <51BECCE0.3080308@uni-muenster.de>
References: <1371306934635-7583785.post@n2.nabble.com>
	<51BECCE0.3080308@uni-muenster.de>
Message-ID: <1371464115957-7583798.post@n2.nabble.com>

Thanks for your interest, and timely fix, Edzer.

Do you also think that some modifications can be done in the way STFDF and
STSDF are subsetted? I understand that they are different than STIDF as
length(rural at sp)!=nrow(rural at data)

Servet





--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/STIDF-subsetting-problem-tp7583785p7583798.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From edzer.pebesma at uni-muenster.de  Mon Jun 17 13:30:13 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 17 Jun 2013 13:30:13 +0200
Subject: [R-sig-Geo] STIDF subsetting problem
In-Reply-To: <1371464115957-7583798.post@n2.nabble.com>
References: <1371306934635-7583785.post@n2.nabble.com>
	<51BECCE0.3080308@uni-muenster.de>
	<1371464115957-7583798.post@n2.nabble.com>
Message-ID: <51BEF345.5010004@uni-muenster.de>

I don't know what you would like to modify:

> library(spacetime)
Loading required package: sp
> data(air)
> class(rural)
[1] "STFDF"
attr(,"package")
[1] "spacetime"
> dim(rural)
    space      time variables
       70      4383         1
> dim(rural[c(1,1:10),])
    space      time variables
       11      4383         1
> dim(rural[,c(1,1:10)])
    space      time variables
       70        11         1

please try this yourself; the behaviour is of course different, as we're
replicating a full location time series (first case) or time slice
(second case).

On 06/17/2013 12:15 PM, scizmeli wrote:
> Thanks for your interest, and timely fix, Edzer.
> 
> Do you also think that some modifications can be done in the way STFDF and
> STSDF are subsetted? I understand that they are different than STIDF as
> length(rural at sp)!=nrow(rural at data)
> 
> Servet
> 
> 
> 
> 
> 
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/STIDF-subsetting-problem-tp7583785p7583798.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de


From carstennh at aol.com  Mon Jun 17 13:47:05 2013
From: carstennh at aol.com (Carsten Neumann)
Date: Mon, 17 Jun 2013 13:47:05 +0200
Subject: [R-sig-Geo] band/wavelength names
Message-ID: <51BEF739.5030701@aol.com>

Dear friends,

Is there a possibility to write/keep band names or wavelength names
within an Envi *.hdr file when writing a RasterStack to a file? I only
get a standard name output (band1, band2...) in the header file,
althouhgh the original file contains wavelength numbers. I would like to
avoid reading the header file a second time with scan(). So maybe it
would be of general interest to have the possibility of a direct header
file specification.

Thanks in advance.

Carsten

-- 

Carsten Neumann
Telegrafenberg, A 17 01.13
14473 Potsdam
-------------------------------------------------------
Helmholtz Centre Potsdam
GFZ German Research Centre for Geosciences
Department 1 - Section 1.4 - Remote Sensing
-------------------------------------------------------
Tel.: +49 (0) 331 288 1766
e-mail: carstenn at gfz-potsdam.de


From sarah.goslee at gmail.com  Mon Jun 17 14:56:42 2013
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Mon, 17 Jun 2013 08:56:42 -0400
Subject: [R-sig-Geo] plotting counties of two states
In-Reply-To: <1371437194.17033.YahooMailNeo@web162101.mail.bf1.yahoo.com>
References: <1371437194.17033.YahooMailNeo@web162101.mail.bf1.yahoo.com>
Message-ID: <CAM_vjukTk2q=VFsa8gvXqJ4au1BgvUUopKyzNe4FimbVKiEq5Q@mail.gmail.com>

Hi,

On Sun, Jun 16, 2013 at 10:46 PM, Milan Sharma
<milansharma2012 at yahoo.com> wrote:
> Hi all,
> As I already mentioned, this is the problem due to one extra county "yellowstone national" in montana. I am trying to plot Montana and wyoming together for further analysis.. At the last line, index does not match between  counties$names and data$co(see NA below). I know this is is due to the extra county of montana. I would appreciate any help in this.

Well, what do you want to have happen for Yellowstone National Park?

You could import your own shapefile with the county boundaries you
expect, you could insert NA values into your data for YNP, you could
modify the file that you're using to remove that entry. And so on.
There's not an extra county, but there is an extra-county geographic
area. You need to decide what the best way for your purposes is to
handle that.


> I attached data if u want to have a look.

The server blocks most attachments, and dput() is the best way to
provide data as part of a reproducible example.

> library(maps)
> data<-read.csv("2data.csv",header=TRUE)
>  dim(data)#79 rows
> [1] 79  6
> data[1,]#first row
>     state     county        Y        X Longitude Latitude
> 1 Montana Beaverhead 5.393363 7.893883 -112.8929 45.13386
>  data$co <- paste(tolower(data$state),tolower(data$county), sep='.')
>  counties <- map("county",c("montana","wyoming"), fill=T, plot=F)
>  commaReplace <- function(x) {
> + return(gsub(",",".", x))
> + }
>  counties$names <- sapply(counties$names, commaReplace, simplify=TRUE)
>  names(counties$names) <- NULL
>  length(counties$names)
> [1] 80
>  index <- match(counties$names,data$co)
>  index
>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
> [26] 26 27 29 28 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50
> [51] 51 52 53 54 55 56 NA 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74
> [76] 75 76 77 78 79
> #####
> Thanks in advance,
> Milan
>


-- 
Sarah Goslee
http://www.functionaldiversity.org


From sarah.goslee at gmail.com  Mon Jun 17 15:31:02 2013
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Mon, 17 Jun 2013 09:31:02 -0400
Subject: [R-sig-Geo] plotting counties of two states
In-Reply-To: <1371475085.37406.YahooMailNeo@web162102.mail.bf1.yahoo.com>
References: <1371437194.17033.YahooMailNeo@web162101.mail.bf1.yahoo.com>
	<CAM_vjukTk2q=VFsa8gvXqJ4au1BgvUUopKyzNe4FimbVKiEq5Q@mail.gmail.com>
	<1371475085.37406.YahooMailNeo@web162102.mail.bf1.yahoo.com>
Message-ID: <CAM_vjumVDB7qFHyzuDy0rpDT+q795-HqciVahixZ0qzb=F4MoA@mail.gmail.com>

Hi,

Since you sent me your data (I'd still prefer dput() and you should
use that in the future so you can send your data to the list):

I don't see how your problem has anything to do with YNP. See below.

On Mon, Jun 17, 2013 at 9:18 AM, Milan Sharma <milansharma2012 at yahoo.com> wrote:
> Could you please run my code and see the problem? I spent couple days in it.
> please help me, I attached my data to u.
> library(maps)
> library(maptools)
> library(spdep)
> data<-read.csv("2data.csv",header=TRUE)
> dim(data)#79 rows
> data$stateco <- paste(tolower(data$state),tolower(data$county), sep='.')
> comap <- map("county",c("montana","wyoming"), fill=T, plot=F)
> commaReplace <- function(x) {
> return(gsub(",",".", x))
> }
> comap$names <- sapply(comap$names, commaReplace, simplify=TRUE)
> names(comap$names) <- NULL
> length(comap$names)
> comapP <- map2SpatialPolygons(comap, comap$names)
> proj4string(comapP) <- CRS("+proj=longlat")
> comapP<-comapP[-1]

^^^
This line deletes Montana's Beaverhead county from your SpatialPolygon
object. Is that really what you wanted to do?

> index <- match(comap$names,data$stateco)
> index
> data2 <- data[index,]
> row.names(data2) <- comap$names

This adds NA values for YNP, which makes sense.

> counties <- SpatialPolygonsDataFrame(comapP, data=data2)

But now you're trying to use an 80-element data frame with a
79-element Spatial Polygon object.

If you refrain from deleting a perfectly good county, your code runs.

Sarah

> ________________________________
> From: Sarah Goslee <sarah.goslee at gmail.com>
> To: Milan Sharma <milansharma2012 at yahoo.com>
> Cc: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
> Sent: Monday, June 17, 2013 6:56 AM
> Subject: Re: [R-sig-Geo] plotting counties of two states
>
> Hi,
>
> On Sun, Jun 16, 2013 at 10:46 PM, Milan Sharma
> <milansharma2012 at yahoo.com> wrote:
>> Hi all,
>> As I already mentioned, this is the problem due to one extra county
>> "yellowstone national" in montana. I am trying to plot Montana and wyoming
>> together for further analysis.. At the last line, index does not match
>> between  counties$names and data$co(see NA below). I know this is is due to
>> the extra county of montana. I would appreciate any help in this.
>
> Well, what do you want to have happen for Yellowstone National Park?
>
> You could import your own shapefile with the county boundaries you
> expect, you could insert NA values into your data for YNP, you could
> modify the file that you're using to remove that entry. And so on.
> There's not an extra county, but there is an extra-county geographic
> area. You need to decide what the best way for your purposes is to
> handle that.
>
>
>> I attached data if u want to have a look.
>
> The server blocks most attachments, and dput() is the best way to
> provide data as part of a reproducible example.
>
>> library(maps)
>> data<-read.csv("2data.csv",header=TRUE)
>>  dim(data)#79 rows
>> [1] 79  6
>> data[1,]#first row
>>    state    county        Y        X Longitude Latitude
>> 1 Montana Beaverhead 5.393363 7.893883 -112.8929 45.13386
>>  data$co <- paste(tolower(data$state),tolower(data$county), sep='.')
>>  counties <- map("county",c("montana","wyoming"), fill=T, plot=F)
>>  commaReplace <- function(x) {
>> + return(gsub(",",".", x))
>> + }
>>  counties$names <- sapply(counties$names, commaReplace, simplify=TRUE)
>>  names(counties$names) <- NULL
>>  length(counties$names)
>> [1] 80
>>  index <- match(counties$names,data$co)
>>  index
>>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
>> 24 25
>> [26] 26 27 29 28 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48
>> 49 50
>> [51] 51 52 53 54 55 56 NA 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72
>> 73 74
>> [76] 75 76 77 78 79
>> #####
>> Thanks in advance,
>> Milan
>>
>
>
> --
> Sarah Goslee
> http://www.functionaldiversity.org
>
>



-- 
Sarah Goslee
http://www.stringpage.com
http://www.sarahgoslee.com
http://www.functionaldiversity.org


From ppanday at clarku.edu  Mon Jun 17 17:10:27 2013
From: ppanday at clarku.edu (ppanday)
Date: Mon, 17 Jun 2013 08:10:27 -0700 (PDT)
Subject: [R-sig-Geo] Create a mask with 1 deg latitudinal bands
Message-ID: <1371481827567-7583803.post@n2.nabble.com>

Hi, I am trying to create a mask within a specified extent [ext <-
extent(-58,-48,-17,-2)] that has 1 degree latitudinal band masks. So every 1
degree is a different number category. Eventually, I want to use it in zonal
(as a mask) to obtain zonal statistics.

I have a way that is a bit roundabout and I was trying to see if there is a
more straightforward option.

Sincerely
Prajjwal



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Create-a-mask-with-1-deg-latitudinal-bands-tp7583803.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From rhtardin at gmail.com  Mon Jun 17 19:54:04 2013
From: rhtardin at gmail.com (Rodrigo Tardin)
Date: Mon, 17 Jun 2013 14:54:04 -0300
Subject: [R-sig-Geo] Anova between GLM and Spatial Eigenvector GLM
Message-ID: <CAE5HZZKMxoJcWE42tK3ZdbwfQ7At3tS6R+7d=vRH7aN3jh4gpw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130617/054d6d5d/attachment.pl>

From joanarboavida at gmail.com  Mon Jun 17 22:04:52 2013
From: joanarboavida at gmail.com (Joana Ruela Boavida)
Date: Mon, 17 Jun 2013 21:04:52 +0100
Subject: [R-sig-Geo] Lat Long --> UTM again
Message-ID: <CAC6EPQ_se_AHwRfAGmhmK5TjCO6frG4w-TEWjU9kv+aMOgEbbg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130617/45b78139/attachment.pl>

From HodgessE at uhd.edu  Mon Jun 17 22:53:21 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Mon, 17 Jun 2013 20:53:21 +0000
Subject: [R-sig-Geo] Lat Long --> UTM again
In-Reply-To: <CAC6EPQ_se_AHwRfAGmhmK5TjCO6frG4w-TEWjU9kv+aMOgEbbg@mail.gmail.com>
References: <CAC6EPQ_se_AHwRfAGmhmK5TjCO6frG4w-TEWjU9kv+aMOgEbbg@mail.gmail.com>
Message-ID: <FF9DB805FC41CC4E95825A50F6806302179FE715@challenger.uhd.campus>

Hi Joana:

You may want to check out this website:
http://georepository.com/crs_32729/WGS-84-UTM-zone-29S.html

I think that you're getting the false northing and easting.

Thanks,
Erin


-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Joana Ruela Boavida
Sent: Monday, June 17, 2013 3:05 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] Lat Long --> UTM again

Hello,

perhaps someone can help. i'm trying to convert coordinates from decimal degrees (WGS84) to UTM zone 29S (Portugal), but i have two problems:

1) i always get a wrong northing. I've read all messages regarding this subject and online documentation, which greatly helped, but i still couldn't get the correct northing. This is the code i used:

#csv file with raw data
frames<-read.table("framescoords.csv", sep=";", header=T) dd <- cbind(frames$long, frames$lat) LatLong <- data.frame(X = dd[,1], Y = dd[,2]) #X is longitude

#convert to sp object:
coordinates(LatLong) <- ~ Y + X #longitude first

#adding a coordinate reference system:
proj4string(LatLong) <- CRS("+proj=longlat +ellps=WGS84 +datum=WGS84") LatLong

#project using sp transform:
UTM <- spTransform(LatLong, CRS("+proj=utm +zone=29 +north +ellps=WGS84
+datum=WGS84"))
UTM

e.g. for the coordinates pair (dd): 36,9892160333 and -8,4846898591 i get:

SpatialPoints:
          Y        X
 [1,] 5e+05 -9997965
(...)
Coordinate Reference System (CRS) arguments: +proj=utm +zone=29
+ellps=WGS84 +datum=WGS84 +towgs84=0,0,0

i believe i should be getting: 545 856.274 and  4 093 809.460 Meters

i also tried:
proj4string(LatLong) <- CRS("+init=epsg:32629") UTM <- spTransform(LatLong, CRS("+init=epsg:32629")) UTM

and got:

SpatialPoints:
             Y         X
 [1,] 36.98933 -8.484690
 [2,] 36.98926 -8.484682
 [3,] 36.98921 -8.484672
etc...
Coordinate Reference System (CRS) arguments: +init=epsg:32629 +proj=utm
+zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs +towgs84=0,0,0

so, no transformation.

2) Another problem is that regardless the values being correct or not, i get the same value for all points (in fact they are very close to each other but i need to get a distance matrix in meters, so i really need this to be accurate):

SpatialPoints:
          Y        X
 [1,] 5e+05 -9997965
 [2,] 5e+05 -9997965
 [3,] 5e+05 -9997965
 [4,] 5e+05 -9997965
 [5,] 5e+05 -9997965
(etc...)

Finally, it is not feasible to do it using an online conversion tool since i need to repeat this for many coordinates and for many different sites, and the few that i've tried give always the same coordinates, ie, don't have enough resolution for close points(?).

Any comments may be helpful. Thank you very much, joanna

	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From bakare at ualberta.ca  Mon Jun 17 23:08:12 2013
From: bakare at ualberta.ca (Moshood Agba Bakare)
Date: Mon, 17 Jun 2013 15:08:12 -0600
Subject: [R-sig-Geo] Lat Long --> UTM again
In-Reply-To: <FF9DB805FC41CC4E95825A50F6806302179FE715@challenger.uhd.campus>
References: <CAC6EPQ_se_AHwRfAGmhmK5TjCO6frG4w-TEWjU9kv+aMOgEbbg@mail.gmail.com>
	<FF9DB805FC41CC4E95825A50F6806302179FE715@challenger.uhd.campus>
Message-ID: <CAJRR3XMgu0M8wDirBDMMUROuqow2sXgS4UG2=ReaVH-zF-J4-A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130617/589d29d0/attachment.pl>

From joanarboavida at gmail.com  Mon Jun 17 23:25:03 2013
From: joanarboavida at gmail.com (Joana Ruela Boavida)
Date: Mon, 17 Jun 2013 22:25:03 +0100
Subject: [R-sig-Geo] Lat Long --> UTM again
In-Reply-To: <CAJRR3XMgu0M8wDirBDMMUROuqow2sXgS4UG2=ReaVH-zF-J4-A@mail.gmail.com>
References: <CAC6EPQ_se_AHwRfAGmhmK5TjCO6frG4w-TEWjU9kv+aMOgEbbg@mail.gmail.com>
	<FF9DB805FC41CC4E95825A50F6806302179FE715@challenger.uhd.campus>
	<CAJRR3XMgu0M8wDirBDMMUROuqow2sXgS4UG2=ReaVH-zF-J4-A@mail.gmail.com>
Message-ID: <CAC6EPQ-1ZBSNnPUv7WrFJHXrG1OarrTwUzVcBagXzWiBMB5GFw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130617/e06ba7c7/attachment.pl>

From joanarboavida at gmail.com  Mon Jun 17 23:38:25 2013
From: joanarboavida at gmail.com (Joana Ruela Boavida)
Date: Mon, 17 Jun 2013 22:38:25 +0100
Subject: [R-sig-Geo] Lat Long --> UTM again
In-Reply-To: <CAC6EPQ-1ZBSNnPUv7WrFJHXrG1OarrTwUzVcBagXzWiBMB5GFw@mail.gmail.com>
References: <CAC6EPQ_se_AHwRfAGmhmK5TjCO6frG4w-TEWjU9kv+aMOgEbbg@mail.gmail.com>
	<FF9DB805FC41CC4E95825A50F6806302179FE715@challenger.uhd.campus>
	<CAJRR3XMgu0M8wDirBDMMUROuqow2sXgS4UG2=ReaVH-zF-J4-A@mail.gmail.com>
	<CAC6EPQ-1ZBSNnPUv7WrFJHXrG1OarrTwUzVcBagXzWiBMB5GFw@mail.gmail.com>
Message-ID: <CAC6EPQ8Cn6Z-wUXJ6ZsBm3v06bCHWd9eda_0uGxbk_1qKKKx1g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130617/19be423b/attachment.pl>

From mdsumner at gmail.com  Tue Jun 18 02:41:46 2013
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 18 Jun 2013 10:41:46 +1000
Subject: [R-sig-Geo] Create a mask with 1 deg latitudinal bands
In-Reply-To: <1371481827567-7583803.post@n2.nabble.com>
References: <1371481827567-7583803.post@n2.nabble.com>
Message-ID: <CAAcGz9_AXg=osrNsLx7Lj3oNOEAnyt9L16VZ88zFmyvq+Tm7Yw@mail.gmail.com>

How about this?

library(raster)

## quick way to get 1-degree raster with your extents
r <- crop(raster(), extent(-58,-48,-17,-2))
r2 <- setValues(r, rowFromCell(r, 1:ncell(r)))
plot(r2)



On Tue, Jun 18, 2013 at 1:10 AM, ppanday <ppanday at clarku.edu> wrote:
> Hi, I am trying to create a mask within a specified extent [ext <-
> extent(-58,-48,-17,-2)] that has 1 degree latitudinal band masks. So every 1
> degree is a different number category. Eventually, I want to use it in zonal
> (as a mask) to obtain zonal statistics.
>
> I have a way that is a bit roundabout and I was trying to see if there is a
> more straightforward option.
>
> Sincerely
> Prajjwal
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Create-a-mask-with-1-deg-latitudinal-bands-tp7583803.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Michael Sumner
Hobart, Australia
e-mail: mdsumner at gmail.com


From d.g.rossiter at utwente.nl  Tue Jun 18 08:40:17 2013
From: d.g.rossiter at utwente.nl (d.g.rossiter at utwente.nl)
Date: Tue, 18 Jun 2013 06:40:17 +0000
Subject: [R-sig-Geo] Broken conversion from sp to spatstat ppp
Message-ID: <2BB4CAA243815F4BA16E205054AA61D116730467@EXMBX22.ad.utwente.nl>

Since upgrading to R 3.0.1 and the latest version of packages sp 1.0.9, gstat 1.0.16, spatstat 1.31-13 the following conversion no longer works:

> require(gstat)
> data(meuse)
> coordinates(meuse) <- ~x + y
> meuse.ppp <- as(meuse, "ppp")

Error message:

Error in as(ds, "ppp") : 
  no method or default for coercing "SpatialPointsDataFrame" to "ppp"

Trying another way:

?
> meuse.ppp <- as.ppp(meuse)

Gives a different error message:

Error in as.ppp.default(ds) : Can't interpret X as a point pattern

But I suppose these are at root the same problem.

I can get around this with:

> x <- coordinates(meuse)[,1]
> y <- coordinates(meuse)[,2]
> l1 <- bbox(meuse)[1,1]
> l2 <- bbox(meuse)[1,2]
> l3 <- bbox(meuse)[2,1]
> l4 <- bbox(meuse)[2,2]
> win <- owin(xrange=c(l1,l2), yrange=c(l3,l4))
> class(win)
[1] "owin"
> win
window: rectangle = [178605, 181390] x [329714, 333611] units  
> meuse.ppp <- ppp(x, y, window=win, marks=meuse at data)
> plot(meuse.ppp, which.marks="ffreq")

So it seems the conversion routine should be easy to implement or adjust to whatever has changed in R 3.0.

D G Rossiter
Senior University Lecturer
Faculty of Geoinformation and Earth   Observation Science
Universiteit Twente.
Enschede (NL)


From edzer.pebesma at uni-muenster.de  Tue Jun 18 08:47:04 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 18 Jun 2013 08:47:04 +0200
Subject: [R-sig-Geo] Broken conversion from sp to spatstat ppp
In-Reply-To: <2BB4CAA243815F4BA16E205054AA61D116730467@EXMBX22.ad.utwente.nl>
References: <2BB4CAA243815F4BA16E205054AA61D116730467@EXMBX22.ad.utwente.nl>
Message-ID: <51C00268.4020208@uni-muenster.de>

David, iirc these conversion methods are in package maptools.

On 06/18/2013 08:40 AM, d.g.rossiter at utwente.nl wrote:
> Since upgrading to R 3.0.1 and the latest version of packages sp 1.0.9, gstat 1.0.16, spatstat 1.31-13 the following conversion no longer works:
> 
>> require(gstat)
>> data(meuse)
>> coordinates(meuse) <- ~x + y
>> meuse.ppp <- as(meuse, "ppp")
> 
> Error message:
> 
> Error in as(ds, "ppp") : 
>   no method or default for coercing "SpatialPointsDataFrame" to "ppp"
> 
> Trying another way:
> 
> ?
>> meuse.ppp <- as.ppp(meuse)
> 
> Gives a different error message:
> 
> Error in as.ppp.default(ds) : Can't interpret X as a point pattern
> 
> But I suppose these are at root the same problem.
> 
> I can get around this with:
> 
>> x <- coordinates(meuse)[,1]
>> y <- coordinates(meuse)[,2]
>> l1 <- bbox(meuse)[1,1]
>> l2 <- bbox(meuse)[1,2]
>> l3 <- bbox(meuse)[2,1]
>> l4 <- bbox(meuse)[2,2]
>> win <- owin(xrange=c(l1,l2), yrange=c(l3,l4))
>> class(win)
> [1] "owin"
>> win
> window: rectangle = [178605, 181390] x [329714, 333611] units  
>> meuse.ppp <- ppp(x, y, window=win, marks=meuse at data)
>> plot(meuse.ppp, which.marks="ffreq")
> 
> So it seems the conversion routine should be easy to implement or adjust to whatever has changed in R 3.0.
> 
> D G Rossiter
> Senior University Lecturer
> Faculty of Geoinformation and Earth   Observation Science
> Universiteit Twente.
> Enschede (NL)
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de


From nicolas.bories at orange.fr  Tue Jun 18 12:24:58 2013
From: nicolas.bories at orange.fr (Nicolas Bories)
Date: Tue, 18 Jun 2013 12:24:58 +0200
Subject: [R-sig-Geo] Adaptive Savitzky Golay Filter function
In-Reply-To: <51B8705C020000270001AC9F@gwia2.boku.ac.at>
References: <51B1EE0E.2080507@orange.fr>
	<51B21769020000270001AAD8@gwia2.boku.ac.at>
	<51B660C0.20504@orange.fr>
	<51B753F6020000270001ABD8@gwia2.boku.ac.at>
	<51B7558E.9080505@orange.fr>
	<51B8705C020000270001AC9F@gwia2.boku.ac.at>
Message-ID: <51C0357A.9070403@orange.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130618/5b09d7e0/attachment.pl>

From d.g.rossiter at utwente.nl  Tue Jun 18 16:16:35 2013
From: d.g.rossiter at utwente.nl (d.g.rossiter at utwente.nl)
Date: Tue, 18 Jun 2013 14:16:35 +0000
Subject: [R-sig-Geo] Broken conversion from sp to spatstat ppp
In-Reply-To: <mailman.11.1371549603.15321.r-sig-geo@r-project.org>
References: <mailman.11.1371549603.15321.r-sig-geo@r-project.org>
Message-ID: <2BB4CAA243815F4BA16E205054AA61D116731386@EXMBX22.ad.utwente.nl>

Edzer,

Aargh! A stupid mistake on my part. Indeed, in the past I had also loaded maptools, I did it now and indeed the conversion works.

I was misled by the thought that the type conversion would be by the packages that defined of the class(es) in question, in this case sp and spatstat. Of course there is no reason why another package can not read both those classes and do the conversion.

Again, apologies for cluttering the list, but maybe someone searching the archives will have made a similar oversight.


D G Rossiter
Senior University Lecturer
Faculty of Geoinformation and Earth   Observation Science
Universiteit Twente.
Enschede (NL)


> 
> ------------------------------
> 
> Message: 15
> Date: Tue, 18 Jun 2013 08:47:04 +0200
> From: Edzer Pebesma <edzer.pebesma at uni-muenster.de>
> To: r-sig-geo at r-project.org
> Subject: Re: [R-sig-Geo] Broken conversion from sp to spatstat ppp
> Message-ID: <51C00268.4020208 at uni-muenster.de>
> Content-Type: text/plain; charset=windows-1252
> 
> David, iirc these conversion methods are in package maptools.
> 
> On 06/18/2013 08:40 AM, d.g.rossiter at utwente.nl wrote:
>> Since upgrading to R 3.0.1 and the latest version of packages sp 1.0.9, gstat 1.0.16, spatstat 1.31-13 the following conversion no longer works:
>> 
>>> require(gstat)
>>> data(meuse)
>>> coordinates(meuse) <- ~x + y
>>> meuse.ppp <- as(meuse, "ppp")
>> 
>> Error message:
>> 
>> Error in as(ds, "ppp") : 
>>  no method or default for coercing "SpatialPointsDataFrame" to "ppp"
>> 
>> Trying another way:
>> 
>> ?
>>> meuse.ppp <- as.ppp(meuse)
>> 
>> Gives a different error message:
>> 
>> Error in as.ppp.default(ds) : Can't interpret X as a point pattern
>> 
>> But I suppose these are at root the same problem.
>> 
>> I can get around this with:
>> 
>>> x <- coordinates(meuse)[,1]
>>> y <- coordinates(meuse)[,2]
>>> l1 <- bbox(meuse)[1,1]
>>> l2 <- bbox(meuse)[1,2]
>>> l3 <- bbox(meuse)[2,1]
>>> l4 <- bbox(meuse)[2,2]
>>> win <- owin(xrange=c(l1,l2), yrange=c(l3,l4))
>>> class(win)
>> [1] "owin"
>>> win
>> window: rectangle = [178605, 181390] x [329714, 333611] units  
>>> meuse.ppp <- ppp(x, y, window=win, marks=meuse at data)
>>> plot(meuse.ppp, which.marks="ffreq")
>> 
>> So it seems the conversion routine should be easy to implement or adjust to whatever has changed in R 3.0.
>> 
>> D G Rossiter
>> Senior University Lecturer
>> Faculty of Geoinformation and Earth   Observation Science
>> Universiteit Twente.
>> Enschede (NL)
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
> 
> -- 
> Edzer Pebesma
> Institute for Geoinformatics (ifgi), University of M?nster
> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
> 83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de
> 


From b.rowlingson at lancaster.ac.uk  Tue Jun 18 19:09:31 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 18 Jun 2013 18:09:31 +0100
Subject: [R-sig-Geo] MacOS spatial packages installation
Message-ID: <CANVKczMY3d96Y044Q8PKV3cW+DJGPM-tLSpBpuODRtEWfp-T_Q@mail.gmail.com>

Hi there

 what's the current best-practice method for installing all our
favourite spatial packages on a Mac?

 Is there anything simpler or more recent than:

http://codealamode.blogspot.co.uk/2012/08/installing-rgdal-for-r-on-mac.html

I'm after installing rgdal, raster, maptools, rgeos, but unfortunately
I don't have a Mac to try it on - I'm trying to get instructions for
distributing to people before a workshop.

The easiest way for Ubuntu/Linux at the moment appears to be to
install R from CRAN's ubuntu packaging and then add Michael Rutter's
PPA "ppa:marutter/c2d4u" to your sources. This then lets you get rgdal
with "apt-get install r-cran-rgdal" (or a similar one-liner) which
gets all the gdal library dependencies.

But when I have to do this on Macs I find the instructions have always
changed since last time.


Thanks

Barry


From Roger.Bivand at nhh.no  Tue Jun 18 19:22:27 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 18 Jun 2013 19:22:27 +0200
Subject: [R-sig-Geo] MacOS spatial packages installation
In-Reply-To: <CANVKczMY3d96Y044Q8PKV3cW+DJGPM-tLSpBpuODRtEWfp-T_Q@mail.gmail.com>
References: <CANVKczMY3d96Y044Q8PKV3cW+DJGPM-tLSpBpuODRtEWfp-T_Q@mail.gmail.com>
Message-ID: <alpine.LRH.2.03.1306181917090.6584@reclus.nhh.no>

On Tue, 18 Jun 2013, Barry Rowlingson wrote:

> Hi there
>
> what's the current best-practice method for installing all our
> favourite spatial packages on a Mac?
>
> Is there anything simpler or more recent than:
>
> http://codealamode.blogspot.co.uk/2012/08/installing-rgdal-for-r-on-mac.html

Yes, and there probably was then too, unless extra drivers were needed for 
GDAL or OGR, or where the latest GDAL or GEOS are needed. The OSX CRAN 
binaries are up to date on rgdal and rgeos, and not too far behind on the 
external dependencies, which are included statically built to remove the 
risk of complication - all thanks to Brian Ripley for starting the 
build process and Simon Urbanek for keeping it running. I don't have 
access to such a platform, so comments from those using it would be 
helpful. If the target users already have GEOS, GDAL, etc, installing from 
source should be OK if their machines are set up to install from source, 
but is obviously more demanding.

Hope this helps,

Roger

>
> I'm after installing rgdal, raster, maptools, rgeos, but unfortunately
> I don't have a Mac to try it on - I'm trying to get instructions for
> distributing to people before a workshop.
>
> The easiest way for Ubuntu/Linux at the moment appears to be to
> install R from CRAN's ubuntu packaging and then add Michael Rutter's
> PPA "ppa:marutter/c2d4u" to your sources. This then lets you get rgdal
> with "apt-get install r-cran-rgdal" (or a similar one-liner) which
> gets all the gdal library dependencies.
>
> But when I have to do this on Macs I find the instructions have always
> changed since last time.
>
>
> Thanks
>
> Barry
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From b.rowlingson at lancaster.ac.uk  Tue Jun 18 23:31:55 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 18 Jun 2013 22:31:55 +0100
Subject: [R-sig-Geo] MacOS spatial packages installation
In-Reply-To: <43b19fcfb2de4ae7b9f9605b034660d0@EX-0-HT0.lancs.local>
References: <CANVKczMY3d96Y044Q8PKV3cW+DJGPM-tLSpBpuODRtEWfp-T_Q@mail.gmail.com>
	<43b19fcfb2de4ae7b9f9605b034660d0@EX-0-HT0.lancs.local>
Message-ID: <CANVKczPUK7Wk-EcaVoVJ=Lr3jussjwWyrA2KYsn_DLNrrBT8Zw@mail.gmail.com>

On Tue, Jun 18, 2013 at 6:22 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:

> Yes, and there probably was then too, unless extra drivers were needed for
> GDAL or OGR, or where the latest GDAL or GEOS are needed. The OSX CRAN
> binaries are up to date on rgdal and rgeos, and not too far behind on the
> external dependencies, which are included statically built to remove the
> risk of complication - all thanks to Brian Ripley for starting the
> build process and Simon Urbanek for keeping it running.

So on a fresh OSX install, a Mac user can install R from CRAN via the
.pkg download, and then do install.packages("rgdal") to get a binary
without having to configure or download anything else? Same as
Windows? Nice.

That leaves Linux users fiddling with either needing root privs and
adding PPAs or installing from scratch with the libgdal-dev and
friends requirements....

> I don't have
> access to such a platform, so comments from those using it would be
> helpful. If the target users already have GEOS, GDAL, etc, installing from
> source should be OK if their machines are set up to install from source,
> but is obviously more demanding.

The binary approach should be ideal for my new workshop users.

I'll see if I can find a clean Mac later this week... Thanks!

Barry


From bakare at ualberta.ca  Tue Jun 18 23:52:35 2013
From: bakare at ualberta.ca (Moshood Agba Bakare)
Date: Tue, 18 Jun 2013 15:52:35 -0600
Subject: [R-sig-Geo] trend analyis/spatial modeling
Message-ID: <CAJRR3XOWF3Kb_U4VRFoXBTd3iD+GPUbn39fLTtzZziy2tDrhpg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130618/73761113/attachment.pl>

From HodgessE at uhd.edu  Wed Jun 19 00:08:28 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Tue, 18 Jun 2013 22:08:28 +0000
Subject: [R-sig-Geo] trend analyis/spatial modeling
In-Reply-To: <CAJRR3XOWF3Kb_U4VRFoXBTd3iD+GPUbn39fLTtzZziy2tDrhpg@mail.gmail.com>
References: <CAJRR3XOWF3Kb_U4VRFoXBTd3iD+GPUbn39fLTtzZziy2tDrhpg@mail.gmail.com>
Message-ID: <FF9DB805FC41CC4E95825A50F680630217A0075F@challenger.uhd.campus>

Hello Moshood:

I am probably oversimplifying, but I think if you just do:  krige(yield~easting+northing)
You should be ok.

Thanks,
Erin


-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Moshood Agba Bakare
Sent: Tuesday, June 18, 2013 4:53 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] trend analyis/spatial modeling

Dear All,
I intend to fit spatial covariance structure to yield response georeferenced with geographical coordinates (latitude and longitude) using the model
Z(s) =u(s) +e(s). I have converted to projected coordinates i.e. easting and northing in meters.
I would like to find out if it is necessary to carry out trend surface analysis by regressing the yield on the coordinates before proceeding with fitting the spatial covariance models.
That is yield ~easting + northing

Thank you while looking forward to your response.

Best regards
Moshood

	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From mdsumner at gmail.com  Wed Jun 19 00:53:55 2013
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 19 Jun 2013 08:53:55 +1000
Subject: [R-sig-Geo] Create a mask with 1 deg latitudinal bands
In-Reply-To: <C3A65516E00A294DA9B1DBF9474A0EA64EA91C17@CH1PRD0310MB356.namprd03.prod.outlook.com>
References: <1371481827567-7583803.post@n2.nabble.com>
	<CAAcGz9_AXg=osrNsLx7Lj3oNOEAnyt9L16VZ88zFmyvq+Tm7Yw@mail.gmail.com>
	<C3A65516E00A294DA9B1DBF9474A0EA64EA91C17@CH1PRD0310MB356.namprd03.prod.outlook.com>
Message-ID: <CAAcGz9_ywA+UJ-QOczqNss4RF7TDzsK0eC+50mVr9sYShN2ahg@mail.gmail.com>

On Tue, Jun 18, 2013 at 10:54 PM, Panday, Prajjwal <PPanday at clarku.edu> wrote:
> Thanks Mike. It works great. Could you explain what the second command does?
>
> Prajjwal


Please keep the discussion on list.

library(raster)
?setValues  "You can use the setValues function to assign values to a
Raster* object"
?rowFromCell "These functions get the row and/or column number from a
cell number of a Raster* object"

Basically, we address the individual rows with rowFromCell by passing
in every cell number, 1:ncell(r) returns a rows*col vector of
1:(rows*col) that identifies every cell, and with this rowFromCell
gives us the index of the row in which each cell lies (that's what we
want).

Then setValues() puts the row index into our raster,
replacing/initializing them (it doesn't matter which) and returns a
new raster with the same extent and resolution of our starting raster.

The raster package provides so many nice helpers like this, but still
it might be worth adding something like
rowIndex(raster)/colIndex(raster) to do all that work for us, and
matching Xvalues(raster)/Yvalues(raster) to put in the native
coordinates instead. Then you could also have
longitudes(raster)/latitudes(raster) to do the same for unprojected
rasters, or reproject on the fly in the obvious way. I'll have a look
at that (or wait to be shown that the functions are already there!).

Cheers, Mike.

> ________________________________________
> From: Michael Sumner [mdsumner at gmail.com]
> Sent: Monday, June 17, 2013 8:41 PM
> To: Panday, Prajjwal
> Cc: r-sig-geo at r-project.org
> Subject: Re: [R-sig-Geo] Create a mask with 1 deg latitudinal bands
>
> How about this?
>
> library(raster)
>
> ## quick way to get 1-degree raster with your extents
> r <- crop(raster(), extent(-58,-48,-17,-2))
> r2 <- setValues(r, rowFromCell(r, 1:ncell(r)))
> plot(r2)
>
>
>
> On Tue, Jun 18, 2013 at 1:10 AM, ppanday <ppanday at clarku.edu> wrote:
>> Hi, I am trying to create a mask within a specified extent [ext <-
>> extent(-58,-48,-17,-2)] that has 1 degree latitudinal band masks. So every 1
>> degree is a different number category. Eventually, I want to use it in zonal
>> (as a mask) to obtain zonal statistics.
>>
>> I have a way that is a bit roundabout and I was trying to see if there is a
>> more straightforward option.
>>
>> Sincerely
>> Prajjwal
>>
>>
>>
>> --
>> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Create-a-mask-with-1-deg-latitudinal-bands-tp7583803.html
>> Sent from the R-sig-geo mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
> --
> Michael Sumner
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
>



-- 
Michael Sumner
Hobart, Australia
e-mail: mdsumner at gmail.com


From Rainer at krugs.de  Wed Jun 19 10:13:33 2013
From: Rainer at krugs.de (Rainer M Krug)
Date: Wed, 19 Jun 2013 10:13:33 +0200
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
Message-ID: <87txkuy0uq.fsf@krugs.de>

Hi

I finally received my new computer - a Mac Powerbook Retina.

I am a Linux / Ubuntu user, but I am thinking about possibly using OS
X. How does OS X play with these spatial applicatios, mainly R (and
associated packages), gdal, proj4, GRASS? Are there problems /
complications with using spgrass6 under OS X?

Any experiences, things to be wary about?

Thanks,

Rainer

-- 
Rainer M. Krug

email: RMKrug<at>gmail<dot>com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 489 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130619/18e85eee/attachment.bin>

From b.rowlingson at lancaster.ac.uk  Wed Jun 19 10:54:02 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 19 Jun 2013 09:54:02 +0100
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
In-Reply-To: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
References: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
Message-ID: <CANVKczMyk1HQEPhJ2czYFnPh=orZeF+1AbCeW_vGwJ5Q7eOULQ@mail.gmail.com>

On Wed, Jun 19, 2013 at 9:13 AM, Rainer M Krug <Rainer at krugs.de> wrote:
> Hi
>
> I finally received my new computer - a Mac Powerbook Retina.
>
> I am a Linux / Ubuntu user, but I am thinking about possibly using OS
> X. How does OS X play with these spatial applicatios, mainly R (and
> associated packages), gdal, proj4, GRASS? Are there problems /
> complications with using spgrass6 under OS X?
>
> Any experiences, things to be wary about?

 Go back about two messages on this mailing list and I asked a similar
question, only without a Mac to play on!

 Roger's answer is that for most people you can just do
install.packages and get binary versions of those packages with static
linking so all dependencies are resolved and there's no need to go
hunting for source code and development packages.

 If you can try that and it all works, please let me know - I'm trying
to write some instructions for new users for a workshop, and I guess
it will be 60% windows, 35% mac, 5% linux...

Barry


From Rainer at krugs.de  Wed Jun 19 11:24:46 2013
From: Rainer at krugs.de (Rainer M Krug)
Date: Wed, 19 Jun 2013 11:24:46 +0200
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
References: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
	<CANVKczMyk1HQEPhJ2czYFnPh=orZeF+1AbCeW_vGwJ5Q7eOULQ@mail.gmail.com>
Message-ID: <87ehbyxxk1.fsf@krugs.de>


Barry Rowlingson <b.rowlingson at lancaster.ac.uk> writes:

> On Wed, Jun 19, 2013 at 9:13 AM, Rainer M Krug <Rainer at krugs.de> wrote:
>> Hi
>>
>> I finally received my new computer - a Mac Powerbook Retina.

Sorry - Macbook Pro Retina

>>
>> I am a Linux / Ubuntu user, but I am thinking about possibly using OS
>> X. How does OS X play with these spatial applicatios, mainly R (and
>> associated packages), gdal, proj4, GRASS? Are there problems /
>> complications with using spgrass6 under OS X?
>>
>> Any experiences, things to be wary about?
>
>  Go back about two messages on this mailing list and I asked a similar
> question, only without a Mac to play on!

True - I have seen that one. But apart from these, I am looking for some
more insight from actual users of OS X.

>
>  Roger's answer is that for most people you can just do
> install.packages and get binary versions of those packages with static
> linking so all dependencies are resolved and there's no need to go
> hunting for source code and development packages.

That is most definitely very useful.

>
>  If you can try that and it all works, please let me know - I'm trying
> to write some instructions for new users for a workshop, and I guess
> it will be 60% windows, 35% mac, 5% linux...

OK - I will see.

Thanks,

Rainer

>
> Barry


-- 
Rainer M. Krug

email: RMKrug<at>gmail<dot>com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 489 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130619/1ff5b1a2/attachment.bin>

From michela.giusti at isprambiente.it  Wed Jun 19 11:30:13 2013
From: michela.giusti at isprambiente.it (Michela Giusti)
Date: Wed, 19 Jun 2013 11:30:13 +0200
Subject: [R-sig-Geo] ENFA scatter plot and SpatialPixelsDataFrame problem
Message-ID: <51C17A25.2070403@isprambiente.it>

Hi,
I have a problem with my ENFA scatter plot. You can find it below.

What did I do wrong?

I also have a problem with a SpatialPixelsDataFrame:

>SPDF_TOT_CR<-rbind.SpatialPixelsDataFrame(SPDF_monte_tuna,SPDF_isuela)
Error in if (max(object at grid.index) > .NumberOfCells(object at grid)) stop("grid.index max value too large") :
   missing value where TRUE/FALSE needed
In addition:Warning messages:
1: In points2grid(points, tolerance, round) :
   grid has empty column/rows in dimension 1
2: In points2grid(points, tolerance, round) :
   grid has empty column/rows in dimension 2
3: In getGridIndex(coordinates(points), grid) : NAs introduced by coercion



Thank you very much for your help.
Bye,
Michela


>enfa_CR_TOT$co

                           Mar           Spe1

aspect             -0.15611790 -2.364093e-04

BPI                -0.26189379   7.696597e-06

curvature           0.07022979   7.875935e-01

plan curvature      0.17703567 -3.891006e-01

profile curvature -0.02840416 -4.778044e-01

depth               0.47498377 -1.031100e-04

slope               0.48563437   6.090404e-05

TRI                 0.63914621 -2.342323e-05



scatter(enfa_CR_TOT, percent = 100, pts = F , clabel = 0.8)




>(randtestenfa_CR_TOT <- randtest(enfa_CR_TOT, nrepet = 500))

Monte-Carlo test

Call: randtest.enfa(xtest = enfa_CR_TOT, nrepet = 500)

  

Observation: 3.720003

  

Based on 500 replicates

Simulated p-value: 0.001996008

Alternative hypothesis: greater

  

     Std.Obs Expectation     Variance

  7.03676906   1.58379866   0.09215922





-- 
*****************************************************************
Dr. Michela Giusti
ISPRA
Istituto Superiore per la Protezione e la Ricerca Ambientale
Via Brancati, 60
00144 Roma
Tel. +390650074746
michela.giusti at isprambiente.it
*****************************************************************

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130619/02b13034/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 14270 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130619/02b13034/attachment.jpe>

From Roger.Bivand at nhh.no  Wed Jun 19 11:54:23 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 19 Jun 2013 11:54:23 +0200
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
In-Reply-To: <87ehbyxxk1.fsf@krugs.de>
References: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
	<CANVKczMyk1HQEPhJ2czYFnPh=orZeF+1AbCeW_vGwJ5Q7eOULQ@mail.gmail.com>
	<87ehbyxxk1.fsf@krugs.de>
Message-ID: <alpine.LRH.2.03.1306191143160.9353@reclus.nhh.no>

On Wed, 19 Jun 2013, Rainer M Krug wrote:

>
> Barry Rowlingson <b.rowlingson at lancaster.ac.uk> writes:
>
>> On Wed, Jun 19, 2013 at 9:13 AM, Rainer M Krug <Rainer at krugs.de> wrote:
>>> Hi
>>>
>>> I finally received my new computer - a Mac Powerbook Retina.
>
> Sorry - Macbook Pro Retina
>
>>>
>>> I am a Linux / Ubuntu user, but I am thinking about possibly using OS
>>> X. How does OS X play with these spatial applicatios, mainly R (and
>>> associated packages), gdal, proj4, GRASS? Are there problems /
>>> complications with using spgrass6 under OS X?
>>>
>>> Any experiences, things to be wary about?
>>
>>  Go back about two messages on this mailing list and I asked a similar
>> question, only without a Mac to play on!
>
> True - I have seen that one. But apart from these, I am looking for some
> more insight from actual users of OS X.

Although I'm not an actual user, I think that it will be important to 
install GRASS and its dependencies first, then the R packages using those 
components (rgdal, rgeos, etc) from source, linking dynamically to the 
underlying dylibs, as one would typically do on Linux. One reason for this 
is to maintain consistency in the PROJ and GDAL metadata (things like 
EPSG), which differ for different versions of say PROJ. Both GRASS and R 
developers often use OSX as Unix, but they expect to build more components 
from source where sensible.

Roger

>
>>
>>  Roger's answer is that for most people you can just do
>> install.packages and get binary versions of those packages with static
>> linking so all dependencies are resolved and there's no need to go
>> hunting for source code and development packages.
>
> That is most definitely very useful.
>
>>
>>  If you can try that and it all works, please let me know - I'm trying
>> to write some instructions for new users for a workshop, and I guess
>> it will be 60% windows, 35% mac, 5% linux...
>
> OK - I will see.
>
> Thanks,
>
> Rainer
>
>>
>> Barry
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From alxcart at gmail.com  Wed Jun 19 12:42:51 2013
From: alxcart at gmail.com (Alex)
Date: Wed, 19 Jun 2013 07:42:51 -0300
Subject: [R-sig-Geo]  How to extract the index (i,
	j) row and column from a raster?
Message-ID: <CABNfh=PC1NjzcYYZvT1swrAyQqKMdA_sgHAp6b1roZZg72u4OQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130619/9cd22c9a/attachment.pl>

From s6lihert at uni-bonn.de  Wed Jun 19 13:00:01 2013
From: s6lihert at uni-bonn.de (Lionel Hertzog)
Date: Wed, 19 Jun 2013 13:00:01 +0200
Subject: [R-sig-Geo] How to extract the index (i,
 j) row and column from a raster?
In-Reply-To: <CABNfh=PC1NjzcYYZvT1swrAyQqKMdA_sgHAp6b1roZZg72u4OQ@mail.gmail.com>
References: <CABNfh=PC1NjzcYYZvT1swrAyQqKMdA_sgHAp6b1roZZg72u4OQ@mail.gmail.com>
Message-ID: <51C18F31.10406@uni-bonn.de>

The easiest way is to use the function 'values' which return the values 
of a raster row by row:

r<-raster(nrows=10,ncols=10)
r[]<-rnorm(100)
data<-data.frame(X=rep(1:10,each=10),Y=rep(1:10,10),Z=values(r))
head(data)

Cheers,
Lionel

On 19/06/2013 12:42, Alex wrote:
> Please, I would like to create a file with the following information from a
> raster:
> - The position (i, j) of each cell, and the value represented in pixel.
> Composing a matrix X, Y, Z.
> At the end, I have the intention to turn this array into a polygon
> shapefile.
> Is there any function for this in R?
> I thank you,
> Alex Santos
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From Rainer at krugs.de  Wed Jun 19 13:11:01 2013
From: Rainer at krugs.de (Rainer M Krug)
Date: Wed, 19 Jun 2013 13:11:01 +0200
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
In-Reply-To: <alpine.LRH.2.03.1306191143160.9353@reclus.nhh.no> (Roger
	Bivand's message of "Wed, 19 Jun 2013 11:54:23 +0200")
References: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
	<CANVKczMyk1HQEPhJ2czYFnPh=orZeF+1AbCeW_vGwJ5Q7eOULQ@mail.gmail.com>
	<87ehbyxxk1.fsf@krugs.de>
	<alpine.LRH.2.03.1306191143160.9353@reclus.nhh.no>
Message-ID: <87y5a6we2i.fsf@krugs.de>

Roger Bivand <Roger.Bivand at nhh.no> writes:

> On Wed, 19 Jun 2013, Rainer M Krug wrote:
>
>>
>> Barry Rowlingson <b.rowlingson at lancaster.ac.uk> writes:
>>
>>> On Wed, Jun 19, 2013 at 9:13 AM, Rainer M Krug <Rainer at krugs.de> wrote:
>>>> Hi
>>>>
>>>> I finally received my new computer - a Mac Powerbook Retina.
>>
>> Sorry - Macbook Pro Retina
>>
>>>>
>>>> I am a Linux / Ubuntu user, but I am thinking about possibly using OS
>>>> X. How does OS X play with these spatial applicatios, mainly R (and
>>>> associated packages), gdal, proj4, GRASS? Are there problems /
>>>> complications with using spgrass6 under OS X?
>>>>
>>>> Any experiences, things to be wary about?
>>>
>>>  Go back about two messages on this mailing list and I asked a similar
>>> question, only without a Mac to play on!
>>
>> True - I have seen that one. But apart from these, I am looking for some
>> more insight from actual users of OS X.
>
> Although I'm not an actual user, I think that it will be important to
> install GRASS and its dependencies first, then the R packages using
> those components (rgdal, rgeos, etc) from source, linking dynamically
> to the underlying dylibs, as one would typically do on Linux. One
> reason for this is to maintain consistency in the PROJ and GDAL
> metadata (things like EPSG), which differ for different versions of
> say PROJ. 

That makes sense - so to install e.g. rgdal, I would use

,----
| install.packages("rgdal, type="source")
`----

after before installing the dependencies. I will try it out by
installing the dependencies vie Macports, which makes it quite
easy.

Cheers,

Rainer


>Both GRASS and R developers often use OSX as Unix, but they
> expect to build more components from source where sensible.
>
> Roger
>
>>
>>>
>>>  Roger's answer is that for most people you can just do
>>> install.packages and get binary versions of those packages with static
>>> linking so all dependencies are resolved and there's no need to go
>>> hunting for source code and development packages.
>>
>> That is most definitely very useful.
>>
>>>
>>>  If you can try that and it all works, please let me know - I'm trying
>>> to write some instructions for new users for a workshop, and I guess
>>> it will be 60% windows, 35% mac, 5% linux...
>>
>> OK - I will see.
>>
>> Thanks,
>>
>> Rainer
>>
>>>
>>> Barry
>>
>>
>>
<#secure method=pgpmime mode=sign>

-- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug


From andre.vanproosdij at wur.nl  Wed Jun 19 14:14:29 2013
From: andre.vanproosdij at wur.nl (Proosdij, Andre van)
Date: Wed, 19 Jun 2013 12:14:29 +0000
Subject: [R-sig-Geo] Reading latitude longitude data from geotags
In-Reply-To: <BAY167-W4078CACE99B783A3AAFCCBA6870@phx.gbl>
References: <mailman.19.1371117606.3499.r-sig-geo@r-project.org>
	<BAY167-W4078CACE99B783A3AAFCCBA6870@phx.gbl>
Message-ID: <84D737939C16114590DCDD4F003E013B1FE3897F@SCOMP0936.wurnet.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130619/758b329b/attachment.pl>

From rafael.wueest at wsl.ch  Wed Jun 19 14:30:55 2013
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Wed, 19 Jun 2013 14:30:55 +0200
Subject: [R-sig-Geo] How to extract the index (i,
	j) row and column from a raster?
In-Reply-To: <51C18F31.10406@uni-bonn.de>
References: <CABNfh=PC1NjzcYYZvT1swrAyQqKMdA_sgHAp6b1roZZg72u4OQ@mail.gmail.com>
	<51C18F31.10406@uni-bonn.de>
Message-ID: <84B79210-CE5C-4527-8F5C-D0990B343ECF@wsl.ch>

Well, if the ultimate aim is to build a polygon from a raster, I suggest you look at

library(raster)
?rasterToPolygons

Rafael

On 19.06.2013, at 13:00, Lionel Hertzog <s6lihert at uni-bonn.de> wrote:

> The easiest way is to use the function 'values' which return the values of a raster row by row:
> 
> r<-raster(nrows=10,ncols=10)
> r[]<-rnorm(100)
> data<-data.frame(X=rep(1:10,each=10),Y=rep(1:10,10),Z=values(r))
> head(data)
> 
> Cheers,
> Lionel
> 
> On 19/06/2013 12:42, Alex wrote:
>> Please, I would like to create a file with the following information from a
>> raster:
>> - The position (i, j) of each cell, and the value represented in pixel.
>> Composing a matrix X, Y, Z.
>> At the end, I have the intention to turn this array into a polygon
>> shapefile.
>> Is there any function for this in R?
>> I thank you,
>> Alex Santos
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest/index_EN


From Roger.Bivand at nhh.no  Wed Jun 19 14:39:17 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 19 Jun 2013 14:39:17 +0200
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
In-Reply-To: <87y5a6we2i.fsf@krugs.de>
References: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
	<CANVKczMyk1HQEPhJ2czYFnPh=orZeF+1AbCeW_vGwJ5Q7eOULQ@mail.gmail.com>
	<87ehbyxxk1.fsf@krugs.de>
	<alpine.LRH.2.03.1306191143160.9353@reclus.nhh.no>
	<87y5a6we2i.fsf@krugs.de>
Message-ID: <alpine.LRH.2.03.1306191434410.9353@reclus.nhh.no>

On Wed, 19 Jun 2013, Rainer M Krug wrote:

> Roger Bivand <Roger.Bivand at nhh.no> writes:
>
>> On Wed, 19 Jun 2013, Rainer M Krug wrote:
>>
>>>
>>> Barry Rowlingson <b.rowlingson at lancaster.ac.uk> writes:
>>>
>>>> On Wed, Jun 19, 2013 at 9:13 AM, Rainer M Krug <Rainer at krugs.de> wrote:
>>>>> Hi
>>>>>
>>>>> I finally received my new computer - a Mac Powerbook Retina.
>>>
>>> Sorry - Macbook Pro Retina
>>>
>>>>>
>>>>> I am a Linux / Ubuntu user, but I am thinking about possibly using OS
>>>>> X. How does OS X play with these spatial applicatios, mainly R (and
>>>>> associated packages), gdal, proj4, GRASS? Are there problems /
>>>>> complications with using spgrass6 under OS X?
>>>>>
>>>>> Any experiences, things to be wary about?
>>>>
>>>>  Go back about two messages on this mailing list and I asked a similar
>>>> question, only without a Mac to play on!
>>>
>>> True - I have seen that one. But apart from these, I am looking for some
>>> more insight from actual users of OS X.
>>
>> Although I'm not an actual user, I think that it will be important to
>> install GRASS and its dependencies first, then the R packages using
>> those components (rgdal, rgeos, etc) from source, linking dynamically
>> to the underlying dylibs, as one would typically do on Linux. One
>> reason for this is to maintain consistency in the PROJ and GDAL
>> metadata (things like EPSG), which differ for different versions of
>> say PROJ.
>
> That makes sense - so to install e.g. rgdal, I would use
>
> ,----
> | install.packages("rgdal, type="source")
> `----

You will need to specify the configure arguments, I think - rather as in 
Barry's description, or in file.show(system.file("README", 
package="rgdal")) - to avoid recursion, on a machine with rgdal already 
installed! Or:

https://r-forge.r-project.org/scm/viewvc.php/pkg/inst/README?view=markup&root=rgdal

>
> after before installing the dependencies. I will try it out by
> installing the dependencies vie Macports, which makes it quite
> easy.

The Kyngchaos frameworks are also well-regarded, and also provide an rgdal 
binary package built against the frameworks.

Roger

>
> Cheers,
>
> Rainer
>
>
>> Both GRASS and R developers often use OSX as Unix, but they
>> expect to build more components from source where sensible.
>>
>> Roger
>>
>>>
>>>>
>>>>  Roger's answer is that for most people you can just do
>>>> install.packages and get binary versions of those packages with static
>>>> linking so all dependencies are resolved and there's no need to go
>>>> hunting for source code and development packages.
>>>
>>> That is most definitely very useful.
>>>
>>>>
>>>>  If you can try that and it all works, please let me know - I'm trying
>>>> to write some instructions for new users for a workshop, and I guess
>>>> it will be 60% windows, 35% mac, 5% linux...
>>>
>>> OK - I will see.
>>>
>>> Thanks,
>>>
>>> Rainer
>>>
>>>>
>>>> Barry
>>>
>>>
>>>
> <#secure method=pgpmime mode=sign>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From h.wickham at gmail.com  Wed Jun 19 15:08:41 2013
From: h.wickham at gmail.com (Hadley Wickham)
Date: Wed, 19 Jun 2013 08:08:41 -0500
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
In-Reply-To: <87y5a6we2i.fsf@krugs.de>
References: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
	<CANVKczMyk1HQEPhJ2czYFnPh=orZeF+1AbCeW_vGwJ5Q7eOULQ@mail.gmail.com>
	<87ehbyxxk1.fsf@krugs.de>
	<alpine.LRH.2.03.1306191143160.9353@reclus.nhh.no>
	<87y5a6we2i.fsf@krugs.de>
Message-ID: <CABdHhvH88jn-aed8MYqDqFMWAOUCT=xxA4O1wzzw8YKM4BN17g@mail.gmail.com>

>> Although I'm not an actual user, I think that it will be important to
>> install GRASS and its dependencies first, then the R packages using
>> those components (rgdal, rgeos, etc) from source, linking dynamically
>> to the underlying dylibs, as one would typically do on Linux. One
>> reason for this is to maintain consistency in the PROJ and GDAL
>> metadata (things like EPSG), which differ for different versions of
>> say PROJ.
>
> That makes sense - so to install e.g. rgdal, I would use
>
> ,----
> | install.packages("rgdal, type="source")
> `----
>
> after before installing the dependencies. I will try it out by
> installing the dependencies vie Macports, which makes it quite
> easy.

Use homebrew, not macports.  It's much better written.

This should just work without further config (at least it has for me
in the past):

brew install rgdal
R
install.packages("rgdal", type = "source")

Hadley

--
Chief Scientist, RStudio
http://had.co.nz/


From b.rowlingson at lancaster.ac.uk  Wed Jun 19 15:30:35 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 19 Jun 2013 14:30:35 +0100
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
In-Reply-To: <7e330cc7cb2d4842b8cd692be691ee73@EX-0-HT0.lancs.local>
References: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
	<CANVKczMyk1HQEPhJ2czYFnPh=orZeF+1AbCeW_vGwJ5Q7eOULQ@mail.gmail.com>
	<87ehbyxxk1.fsf@krugs.de>
	<alpine.LRH.2.03.1306191143160.9353@reclus.nhh.no>
	<87y5a6we2i.fsf@krugs.de>
	<7e330cc7cb2d4842b8cd692be691ee73@EX-0-HT0.lancs.local>
Message-ID: <CANVKczM7h_FNCE0GPckpiBjQ8OidFqtg5r4ebwERsnA--yJPXg@mail.gmail.com>

On Wed, Jun 19, 2013 at 2:08 PM, Hadley Wickham <h.wickham at gmail.com> wrote:

> Use homebrew, not macports.  It's much better written.
>
> This should just work without further config (at least it has for me
> in the past):
>
> brew install rgdal
> R
> install.packages("rgdal", type = "source")

 Where does a Maccer get the 'brew' command from? Reading these docs:

http://mxcl.github.io/homebrew/

seems to imply you first need Ruby. Is that installed on every Mac?


does that brew command require an rgdal 'formula' somewhere? I cant
find one here:

https://github.com/mxcl/homebrew/blob/master/Library/Formula

or is it a case of installing R from homebrew and then 'gdal' for the
libraries and then the rgdal package via install.packages from source?

1. install Ruby
2. install homebrew
3. start a Terminal
3.1  brew install r
3.2  brew install gdal
4. run R
4.1 install.packages("rgdal",type="source")

?


From h.wickham at gmail.com  Wed Jun 19 15:40:30 2013
From: h.wickham at gmail.com (Hadley Wickham)
Date: Wed, 19 Jun 2013 08:40:30 -0500
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
In-Reply-To: <CANVKczM7h_FNCE0GPckpiBjQ8OidFqtg5r4ebwERsnA--yJPXg@mail.gmail.com>
References: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
	<CANVKczMyk1HQEPhJ2czYFnPh=orZeF+1AbCeW_vGwJ5Q7eOULQ@mail.gmail.com>
	<87ehbyxxk1.fsf@krugs.de>
	<alpine.LRH.2.03.1306191143160.9353@reclus.nhh.no>
	<87y5a6we2i.fsf@krugs.de>
	<7e330cc7cb2d4842b8cd692be691ee73@EX-0-HT0.lancs.local>
	<CANVKczM7h_FNCE0GPckpiBjQ8OidFqtg5r4ebwERsnA--yJPXg@mail.gmail.com>
Message-ID: <CABdHhvEnOhorfqnoN9LERqpSgyknqvkVLco3ELg9qBVFb+hJLQ@mail.gmail.com>

>  Where does a Maccer get the 'brew' command from? Reading these docs:
>
> http://mxcl.github.io/homebrew/
>
> seems to imply you first need Ruby. Is that installed on every Mac?

Yes, you just run:

ruby -e "$(curl -fsSL https://raw.github.com/mxcl/homebrew/go)"

all macs have ruby on them already.

> does that brew command require an rgdal 'formula' somewhere? I cant
> find one here:
>
> https://github.com/mxcl/homebrew/blob/master/Library/Formula

You want rgdal from brew, and then rgdal from CRAN.

> or is it a case of installing R from homebrew and then 'gdal' for the
> libraries and then the rgdal package via install.packages from source?
>
> 1. install Ruby
> 2. install homebrew
> 3. start a Terminal
> 3.1  brew install r
> 3.2  brew install gdal
> 4. run R
> 4.1 install.packages("rgdal",type="source")

Yes, except I usually just install the binary R distro from CRAN (and
3 needs to come before 1).

Hadley

--
Chief Scientist, RStudio
http://had.co.nz/


From lestes at princeton.edu  Wed Jun 19 15:50:24 2013
From: lestes at princeton.edu (Lyndon Estes)
Date: Wed, 19 Jun 2013 09:50:24 -0400
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
In-Reply-To: <CANVKczM7h_FNCE0GPckpiBjQ8OidFqtg5r4ebwERsnA--yJPXg@mail.gmail.com>
References: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
	<CANVKczMyk1HQEPhJ2czYFnPh=orZeF+1AbCeW_vGwJ5Q7eOULQ@mail.gmail.com>
	<87ehbyxxk1.fsf@krugs.de>
	<alpine.LRH.2.03.1306191143160.9353@reclus.nhh.no>
	<87y5a6we2i.fsf@krugs.de>
	<7e330cc7cb2d4842b8cd692be691ee73@EX-0-HT0.lancs.local>
	<CANVKczM7h_FNCE0GPckpiBjQ8OidFqtg5r4ebwERsnA--yJPXg@mail.gmail.com>
Message-ID: <CALuVVaabnRWOrvK70PPS_EiYy6VdBHX0hokpy7WPJZF5tXNVcA@mail.gmail.com>

Hi Rainier,

I used R on Macbook Pros (as well as linux clusters), first with
Leopard and now Lion, and used the frameworks from
http://www.kyngchaos.com (which you probably know).  I did that a
while ago (>1 year), so maybe that route isn't necessary anymore, but
the installs went fairly smoothly and worked pretty well and I haven't
had any problems with things not working.

So I have gdal complete, proj4, spgrass6 (although rarely use it),
QGIS, all installed and functioning nicely on my machine.  I use
system calls to gdal functions from R fairly frequently, and they work
nicely. The only thing I have not been able to sort out properly on
the mac is Rpy2 for using the R-QGIS interface, but I haven't tried
that in a while and don't have much cause for using it.

I am sorry I don't have any install notes to share.

Cheers, Lyndon


On Wed, Jun 19, 2013 at 9:30 AM, Barry Rowlingson
<b.rowlingson at lancaster.ac.uk> wrote:
> On Wed, Jun 19, 2013 at 2:08 PM, Hadley Wickham <h.wickham at gmail.com> wrote:
>
>> Use homebrew, not macports.  It's much better written.
>>
>> This should just work without further config (at least it has for me
>> in the past):
>>
>> brew install rgdal
>> R
>> install.packages("rgdal", type = "source")
>
>  Where does a Maccer get the 'brew' command from? Reading these docs:
>
> http://mxcl.github.io/homebrew/
>
> seems to imply you first need Ruby. Is that installed on every Mac?
>
>
> does that brew command require an rgdal 'formula' somewhere? I cant
> find one here:
>
> https://github.com/mxcl/homebrew/blob/master/Library/Formula
>
> or is it a case of installing R from homebrew and then 'gdal' for the
> libraries and then the rgdal package via install.packages from source?
>
> 1. install Ruby
> 2. install homebrew
> 3. start a Terminal
> 3.1  brew install r
> 3.2  brew install gdal
> 4. run R
> 4.1 install.packages("rgdal",type="source")
>
> ?
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Lyndon Estes
Associate Research Scholar
Princeton University
+1-609-258-8308 (o)
+1-609-258-2799 (f)
+1-202-431-0496 (m)
lestes at princeton.edu
www.princeton.edu/~lestes


From Rainer at krugs.de  Wed Jun 19 15:51:51 2013
From: Rainer at krugs.de (Rainer M Krug)
Date: Wed, 19 Jun 2013 15:51:51 +0200
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
References: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
	<CANVKczMyk1HQEPhJ2czYFnPh=orZeF+1AbCeW_vGwJ5Q7eOULQ@mail.gmail.com>
	<87ehbyxxk1.fsf@krugs.de>
	<alpine.LRH.2.03.1306191143160.9353@reclus.nhh.no>
	<87y5a6we2i.fsf@krugs.de>
	<alpine.LRH.2.03.1306191434410.9353@reclus.nhh.no>
Message-ID: <87li66w6mg.fsf@krugs.de>

Roger Bivand <Roger.Bivand at nhh.no> writes:

> On Wed, 19 Jun 2013, Rainer M Krug wrote:
>
>> Roger Bivand <Roger.Bivand at nhh.no> writes:
>>
>>> On Wed, 19 Jun 2013, Rainer M Krug wrote:
>>>
>>>>
>>>> Barry Rowlingson <b.rowlingson at lancaster.ac.uk> writes:
>>>>
>>>>> On Wed, Jun 19, 2013 at 9:13 AM, Rainer M Krug <Rainer at krugs.de> wrote:
>>>>>> Hi
>>>>>>
>>>>>> I finally received my new computer - a Mac Powerbook Retina.
>>>>
>>>> Sorry - Macbook Pro Retina
>>>>
>>>>>>
>>>>>> I am a Linux / Ubuntu user, but I am thinking about possibly using OS
>>>>>> X. How does OS X play with these spatial applicatios, mainly R (and
>>>>>> associated packages), gdal, proj4, GRASS? Are there problems /
>>>>>> complications with using spgrass6 under OS X?
>>>>>>
>>>>>> Any experiences, things to be wary about?
>>>>>
>>>>>  Go back about two messages on this mailing list and I asked a similar
>>>>> question, only without a Mac to play on!
>>>>
>>>> True - I have seen that one. But apart from these, I am looking for some
>>>> more insight from actual users of OS X.
>>>
>>> Although I'm not an actual user, I think that it will be important to
>>> install GRASS and its dependencies first, then the R packages using
>>> those components (rgdal, rgeos, etc) from source, linking dynamically
>>> to the underlying dylibs, as one would typically do on Linux. One
>>> reason for this is to maintain consistency in the PROJ and GDAL
>>> metadata (things like EPSG), which differ for different versions of
>>> say PROJ.
>>
>> That makes sense - so to install e.g. rgdal, I would use
>>
>> ,----
>> | install.packages("rgdal, type="source")
>> `----
>
> You will need to specify the configure arguments, I think - rather as
> in Barry's description, or in file.show(system.file("README",
> package="rgdal")) - to avoid recursion, on a machine with rgdal
> already installed! Or:
>
> https://r-forge.r-project.org/scm/viewvc.php/pkg/inst/README?view=markup&root=rgdal

Makes sense - I will read through this.

>
>>
>> after before installing the dependencies. I will try it out by
>> installing the dependencies vie Macports, which makes it quite
>> easy.
>
> The Kyngchaos frameworks are also well-regarded, and also provide an
> rgdal binary package built against the frameworks.

OK - I will look into these options. 

So it is possible, but as under Linux, there are things to consider.
Thanks a lot,


Rainer

>
> Roger
>
>>
>> Cheers,
>>
>> Rainer
>>
>>
>>> Both GRASS and R developers often use OSX as Unix, but they
>>> expect to build more components from source where sensible.
>>>
>>> Roger
>>>
>>>>
>>>>>
>>>>>  Roger's answer is that for most people you can just do
>>>>> install.packages and get binary versions of those packages with static
>>>>> linking so all dependencies are resolved and there's no need to go
>>>>> hunting for source code and development packages.
>>>>
>>>> That is most definitely very useful.
>>>>
>>>>>
>>>>>  If you can try that and it all works, please let me know - I'm trying
>>>>> to write some instructions for new users for a workshop, and I guess
>>>>> it will be 60% windows, 35% mac, 5% linux...
>>>>
>>>> OK - I will see.
>>>>
>>>> Thanks,
>>>>
>>>> Rainer
>>>>
>>>>>
>>>>> Barry
>>>>
>>>>
>>>>
>> <#secure method=pgpmime mode=sign>
>>
>>
>
<#secure method=pgpmime mode=sign>

-- 
Rainer M. Krug

email: RMKrug<at>gmail<dot>com


From Rainer at krugs.de  Wed Jun 19 15:57:40 2013
From: Rainer at krugs.de (Rainer M Krug)
Date: Wed, 19 Jun 2013 15:57:40 +0200
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
References: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
	<CANVKczMyk1HQEPhJ2czYFnPh=orZeF+1AbCeW_vGwJ5Q7eOULQ@mail.gmail.com>
	<87ehbyxxk1.fsf@krugs.de>
	<alpine.LRH.2.03.1306191143160.9353@reclus.nhh.no>
	<87y5a6we2i.fsf@krugs.de>
	<CABdHhvH88jn-aed8MYqDqFMWAOUCT=xxA4O1wzzw8YKM4BN17g@mail.gmail.com>
Message-ID: <87haguw6cr.fsf@krugs.de>


Hadley Wickham <h.wickham at gmail.com> writes:

>>> Although I'm not an actual user, I think that it will be important to
>>> install GRASS and its dependencies first, then the R packages using
>>> those components (rgdal, rgeos, etc) from source, linking dynamically
>>> to the underlying dylibs, as one would typically do on Linux. One
>>> reason for this is to maintain consistency in the PROJ and GDAL
>>> metadata (things like EPSG), which differ for different versions of
>>> say PROJ.
>>
>> That makes sense - so to install e.g. rgdal, I would use
>>
>> ,----
>> | install.packages("rgdal, type="source")
>> `----
>>
>> after before installing the dependencies. I will try it out by
>> installing the dependencies vie Macports, which makes it quite
>> easy.
>
> Use homebrew, not macports.  It's much better written.

I read this already in a question on stackexchange [1], but I guess I
understand not enough about these ports and what they are actually
doing. But if you also share this sentiment, I will then uninstall
macports, and try homebrew. 

>
> This should just work without further config (at least it has for me
> in the past):
>
> brew install rgdal
> R
> install.packages("rgdal", type = "source")

This looks really tempting.

I will try it out then,

Rainer

>
> Hadley
>
> --
> Chief Scientist, RStudio
> http://had.co.nz/



Footnotes: 
[1]  http://apple.stackexchange.com/questions/32724/what-are-pros-and-cons-for-macports-fink-and-homebrew

-- 
Rainer M. Krug

email: RMKrug<at>gmail<dot>com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 489 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130619/9c69991b/attachment.bin>

From thi_veloso at yahoo.com.br  Wed Jun 19 16:15:22 2013
From: thi_veloso at yahoo.com.br (Thiago V. dos Santos)
Date: Wed, 19 Jun 2013 07:15:22 -0700 (PDT)
Subject: [R-sig-Geo] MacOS spatial packages installation
In-Reply-To: <CANVKczPUK7Wk-EcaVoVJ=Lr3jussjwWyrA2KYsn_DLNrrBT8Zw@mail.gmail.com>
References: <CANVKczMY3d96Y044Q8PKV3cW+DJGPM-tLSpBpuODRtEWfp-T_Q@mail.gmail.com>
	<43b19fcfb2de4ae7b9f9605b034660d0@EX-0-HT0.lancs.local>
	<CANVKczPUK7Wk-EcaVoVJ=Lr3jussjwWyrA2KYsn_DLNrrBT8Zw@mail.gmail.com>
Message-ID: <1371651322.14063.YahooMailNeo@web121904.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130619/c8fb8909/attachment.pl>

From Lee.Hachadoorian+L at gmail.com  Wed Jun 19 16:58:01 2013
From: Lee.Hachadoorian+L at gmail.com (Lee Hachadoorian)
Date: Wed, 19 Jun 2013 10:58:01 -0400
Subject: [R-sig-Geo] Adjust polygon border in legend?
Message-ID: <51C1C6F9.6010606@gmail.com>

Is there a setting to control the line width of the border of the 
polygon patch in a legend? I have plotted a SPDF using lwd=3. But in the 
legend lwd doesn't affect polygon symbols, only line symbols, so the 
symbol in the legend looks a little different from what is on the map.

I tried cex, but that scales the polygon patch without scaling the 
border. I don't see any other parameters that could control this. Am I 
overlooking something?

Best,
--Lee

-- 
Lee Hachadoorian
Assistant Professor in Geography, Dartmouth College
http://freecity.commons.gc.cuny.edu


From forrest at ufl.edu  Wed Jun 19 17:36:41 2013
From: forrest at ufl.edu (Forrest Stevens)
Date: Wed, 19 Jun 2013 11:36:41 -0400
Subject: [R-sig-Geo] How to extract the index (i,
	j) row and column from a raster?
In-Reply-To: <CABNfh=PC1NjzcYYZvT1swrAyQqKMdA_sgHAp6b1roZZg72u4OQ@mail.gmail.com>
References: <CABNfh=PC1NjzcYYZvT1swrAyQqKMdA_sgHAp6b1roZZg72u4OQ@mail.gmail.com>
Message-ID: <CAEBQMM=iQmM4NvOy9rG3c_SODrXVpJkhP8tORzzChgWyw9DLWA@mail.gmail.com>

I think the first part of what you're looking for is in the raster
package.  You can load your raster file using the raster() function
(instead of creating one from scratch as in the example below).  Then
use the rasterToPoints() function to convert to a matrix object:

require(raster)
r <- raster(nrow=10, ncol=10, xmn=0, xmx=10, ymn=0, ymx=10, crs=NA)
r[] <- runif(ncell(r))
r[r<0.5] <- NA

xyz <- rasterToPoints(r)


>From there it's relatively trivial to extract a subset of points and
convert to polygons via a variety of paths.  But if it's just a subset
of values you're looking to convert you might look at the
rasterToPolygons() function as well, it may do what you need.

Sincerely,
Forrest

On Wed, Jun 19, 2013 at 6:42 AM, Alex <alxcart at gmail.com> wrote:
> Please, I would like to create a file with the following information from a
> raster:
> - The position (i, j) of each cell, and the value represented in pixel.
> Composing a matrix X, Y, Z.
> At the end, I have the intention to turn this array into a polygon
> shapefile.
> Is there any function for this in R?
> I thank you,
> Alex Santos
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Forrest R. Stevens
Ph.D. Candidate, QSE3 IGERT Fellow
Department of Geography
Land Use and Environmental Change Institute
University of Florida
www.clas.ufl.edu/users/forrest


From sa.cizmeli at usherbrooke.ca  Wed Jun 19 18:55:32 2013
From: sa.cizmeli at usherbrooke.ca (scizmeli)
Date: Wed, 19 Jun 2013 09:55:32 -0700 (PDT)
Subject: [R-sig-Geo] Extending STIDF class : cannot creat an empty STIDF
	object
Message-ID: <1371660932702-7583841.post@n2.nabble.com>

Hello everyone,

Greetings to the r-sig-geo community.

I would like to extend the STIDF class :
setClass("newClass1",contains="STIDF",
representation(myslot="numeric"),prototype=prototype(myslot=numeric()))
setClass("newClass2",representation(first="newClass1",second="newClass1",third="newClass1"))

But a new empty newClass1 class created with the new() function does not
pass the validObject() test:
validObject(new("newClass1"))
Error in checkSlotAssignment(object, name, value) : 
		assignment of an object of class ?NULL? is not valid for slot ?time? in an
object of class ?STIDF?; is(value, "xts") is not TRUE

Tracking down the error, I could come to :
validObject(new("STIDF"))
Error in checkSlotAssignment(object, name, value) : 
		assignment of an object of class ?NULL? is not valid for slot ?time? in an
object of class ?STI?; is(value, "xts") is not TRUE

I need to be able to pass the test validObject(new("STIDF")) because my
newClass2 should be able to contain empty newClass1 slots. For now, it is
not possible!

Is this a bug?
Servet



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Extending-STIDF-class-cannot-creat-an-empty-STIDF-object-tp7583841.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From edzer.pebesma at uni-muenster.de  Wed Jun 19 19:10:35 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 19 Jun 2013 19:10:35 +0200
Subject: [R-sig-Geo] Extending STIDF class : cannot creat an empty STIDF
 object
In-Reply-To: <1371660932702-7583841.post@n2.nabble.com>
References: <1371660932702-7583841.post@n2.nabble.com>
Message-ID: <51C1E60B.9070200@uni-muenster.de>



On 06/19/2013 06:55 PM, scizmeli wrote:
> Hello everyone,
> 
> Greetings to the r-sig-geo community.
> 
> I would like to extend the STIDF class :
> setClass("newClass1",contains="STIDF",
> representation(myslot="numeric"),prototype=prototype(myslot=numeric()))
> setClass("newClass2",representation(first="newClass1",second="newClass1",third="newClass1"))
> 
> But a new empty newClass1 class created with the new() function does not
> pass the validObject() test:
> validObject(new("newClass1"))
> Error in checkSlotAssignment(object, name, value) : 
> 		assignment of an object of class ?NULL? is not valid for slot ?time? in an
> object of class ?STIDF?; is(value, "xts") is not TRUE
> 
> Tracking down the error, I could come to :
> validObject(new("STIDF"))
> Error in checkSlotAssignment(object, name, value) : 
> 		assignment of an object of class ?NULL? is not valid for slot ?time? in an
> object of class ?STI?; is(value, "xts") is not TRUE
> 
> I need to be able to pass the test validObject(new("STIDF")) because my
> newClass2 should be able to contain empty newClass1 slots. For now, it is
> not possible!
> 
> Is this a bug?

No, this is intentional.

> Servet
> 
> 
> 
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Extending-STIDF-class-cannot-creat-an-empty-STIDF-object-tp7583841.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de


From sa.cizmeli at usherbrooke.ca  Wed Jun 19 19:20:15 2013
From: sa.cizmeli at usherbrooke.ca (scizmeli)
Date: Wed, 19 Jun 2013 10:20:15 -0700 (PDT)
Subject: [R-sig-Geo] Extending STIDF class : cannot creat an empty STIDF
	object
In-Reply-To: <51C1E60B.9070200@uni-muenster.de>
References: <1371660932702-7583841.post@n2.nabble.com>
	<51C1E60B.9070200@uni-muenster.de>
Message-ID: <1371662415627-7583843.post@n2.nabble.com>

Thank you for your reply, Edzer,

I am not very profficient at R OO programming so If you don't mind, can you
then suggest me a way to deal with the situation? My second class sometimes
does not have data, I need to be able to create objects inherited from an
emtpy STIDF class.

any suggestions?



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Extending-STIDF-class-cannot-creat-an-empty-STIDF-object-tp7583841p7583843.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From groo_jgroo at yahoo.com  Wed Jun 19 20:32:49 2013
From: groo_jgroo at yahoo.com (ROKHANA dwi bekti)
Date: Thu, 20 Jun 2013 02:32:49 +0800 (SGT)
Subject: [R-sig-Geo] damping parameter on minpack.lm
In-Reply-To: <mailman.11.1371549603.15321.r-sig-geo@r-project.org>
References: <mailman.11.1371549603.15321.r-sig-geo@r-project.org>
Message-ID: <1371666769.72371.YahooMailNeo@web194701.mail.sg3.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130620/7d2165a5/attachment.pl>

From macqueen1 at llnl.gov  Wed Jun 19 21:42:01 2013
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Wed, 19 Jun 2013 19:42:01 +0000
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
In-Reply-To: <87txkuy0uq.fsf@krugs.de>
Message-ID: <5E1B812FAC2C4A49B3D99593B5A5219145C033@PRDEXMBX-08.the-lab.llnl.gov>

I have used all of these except spgrass6 on Mac OS X for quite a few years
now.

I use the kyngchaos framework builds of the supporting libraries (proj4,
gdal, an others), and also his builds of QGIS and GRASS.
I have never used macports or homebrew for these (I do use macports to get
an X11-aware version of emacs).

In some circles, people advise against using macports, I guess mostly to
avoid confusion with their versions of things, and the versions that come
with the OS. I neither agree nor disagree with that position. I suppose
that reasoning might apply to homebrew. I'm more inclined to say, if I
don't need those systems I don't use them, and I haven't needed them for
GIS work in Mac OS.

The caveat is that I haven't updated to R 3.x.x yet, nor OS to OS X 10.8

-Don

-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062





On 6/19/13 1:13 AM, "Rainer M Krug" <Rainer at krugs.de> wrote:

>Hi
>
>I finally received my new computer - a Mac Powerbook Retina.
>
>I am a Linux / Ubuntu user, but I am thinking about possibly using OS
>X. How does OS X play with these spatial applicatios, mainly R (and
>associated packages), gdal, proj4, GRASS? Are there problems /
>complications with using spgrass6 under OS X?
>
>Any experiences, things to be wary about?
>
>Thanks,
>
>Rainer
>
>-- 
>Rainer M. Krug
>
>email: RMKrug<at>gmail<dot>com


From h.wickham at gmail.com  Wed Jun 19 21:57:28 2013
From: h.wickham at gmail.com (Hadley Wickham)
Date: Wed, 19 Jun 2013 14:57:28 -0500
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
In-Reply-To: <5E1B812FAC2C4A49B3D99593B5A5219145C033@PRDEXMBX-08.the-lab.llnl.gov>
References: <87txkuy0uq.fsf@krugs.de>
	<5E1B812FAC2C4A49B3D99593B5A5219145C033@PRDEXMBX-08.the-lab.llnl.gov>
Message-ID: <CABdHhvG6XH08GXB7bDFLThNbUYMczbLR7cPUH=Lg6UKT=2TAcw@mail.gmail.com>

> In some circles, people advise against using macports, I guess mostly to
> avoid confusion with their versions of things, and the versions that come
> with the OS. I neither agree nor disagree with that position. I suppose
> that reasoning might apply to homebrew. I'm more inclined to say, if I
> don't need those systems I don't use them, and I haven't needed them for
> GIS work in Mac OS.

I've used fink, macports and homebrew, and homebrew is clearly the
most robust, and has continued to work for me without problems for the
last two or three years (I had to fairly regularly reinstall fink and
macports from scratch when I used to use them).

Certainly, if you can get away with only using binary installations,
you could do that. But with a little extra effort, you can learn brew,
and instantly have a your fingers a huge range of tools that are
otherwise hard to get.  The other big advantage of brew over hand
installing binaries is that you can easily update packages installed
with brew to the latest version:

brew update
brew outdated
brew upgrade gdal
# or if you want to update everything
brew upgrade

Hadley

--
Chief Scientist, RStudio
http://had.co.nz/


From ppanday at clarku.edu  Thu Jun 20 17:28:13 2013
From: ppanday at clarku.edu (ppanday)
Date: Thu, 20 Jun 2013 08:28:13 -0700 (PDT)
Subject: [R-sig-Geo] read *.h5 data in R
Message-ID: <1371742093735-7583847.post@n2.nabble.com>

Hello, 

I am trying to use the 'h5r' package for reading HDF5 files. Can anyone show
me what the best way to read the data in these files?
Sample data is lcoated here:http://www.ntsg.umt.edu/project/et

Thanks,
Prajjwal



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/read-h5-data-in-R-tp7583847.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Dominik.Schneider at colorado.edu  Thu Jun 20 21:57:14 2013
From: Dominik.Schneider at colorado.edu (Dominik Schneider)
Date: Thu, 20 Jun 2013 13:57:14 -0600
Subject: [R-sig-Geo] Trouble with universal kriging
Message-ID: <CAHYDKLatXrvssCFUbLK_5WjSDCLX+Pyb_bRiQ04vn1vYAfQk_g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130620/8f5ea8c2/attachment.pl>

From edzer.pebesma at uni-muenster.de  Thu Jun 20 23:05:36 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 20 Jun 2013 23:05:36 +0200
Subject: [R-sig-Geo] Trouble with universal kriging
In-Reply-To: <CAHYDKLatXrvssCFUbLK_5WjSDCLX+Pyb_bRiQ04vn1vYAfQk_g@mail.gmail.com>
References: <CAHYDKLatXrvssCFUbLK_5WjSDCLX+Pyb_bRiQ04vn1vYAfQk_g@mail.gmail.com>
Message-ID: <51C36EA0.4020301@uni-muenster.de>

Dominik, if you want to receive help, please explain why you are
frustrated, and instead of claims of "won't work", explain in detail
what you did and what happened, preferably with a well-prepared example
that people on the list can reproduce without downloading data first.


On 06/20/2013 09:57 PM, Dominik Schneider wrote:
> Hi, I am trying to follow the examples in  Bivand et al 'Applied Spatial
> Data Analysis' and the examples at
> http://casoilresource.lawr.ucdavis.edu/drupal/node/442 but I am frustrated.
> I finally managed an ordinary kriging example to work but with little
> understanding of why/when it should work.
> I posted some data: https://www.dropbox.com/s/rtg7gh67ziai3ec/mar2011.RData
> Another item I've noticed, if I  define the projection with
> projection(object)='+proj=lonlat +datum=NAD83'  for any of my spatial
> objects it won't work.  It only works with an defined projection. any help
> would be appreciated. Thanks.
> 
> load('mar2011.RData')
> 
> vt=variogram(snotel~recon,data=mar2011)
> 
> vt.fit=fit.variogram(vt,vgm(psill=0.025,nugget=0.015,model='Sph',range=2))
> 
> #plot(vt,vt.fit)
> 
> ok<-krige(snotel~1,locations=mar2011,newdata=swe.grid,model=vt.fit)
> 
> uk<-krige(snotel~mar2011$recon,locations=mar2011,newdata=swe.grid,model=
> vt.fit)
> 
> #spplot(ok)
> Dominik
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de


From Rainer at krugs.de  Thu Jun 20 23:25:05 2013
From: Rainer at krugs.de (Rainer M Krug)
Date: Thu, 20 Jun 2013 23:25:05 +0200
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
In-Reply-To: <CABdHhvEnOhorfqnoN9LERqpSgyknqvkVLco3ELg9qBVFb+hJLQ@mail.gmail.com>
References: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
	<CANVKczMyk1HQEPhJ2czYFnPh=orZeF+1AbCeW_vGwJ5Q7eOULQ@mail.gmail.com>
	<87ehbyxxk1.fsf@krugs.de>
	<alpine.LRH.2.03.1306191143160.9353@reclus.nhh.no>
	<87y5a6we2i.fsf@krugs.de>
	<7e330cc7cb2d4842b8cd692be691ee73@EX-0-HT0.lancs.local>
	<CANVKczM7h_FNCE0GPckpiBjQ8OidFqtg5r4ebwERsnA--yJPXg@mail.gmail.com>
	<CABdHhvEnOhorfqnoN9LERqpSgyknqvkVLco3ELg9qBVFb+hJLQ@mail.gmail.com>
Message-ID: <CAGhLh6FCOdMbNyCOLhH71NSM4vs84ZUU10L1Ufwk+amrsiNMiQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130620/e2cac23f/attachment.pl>

From gerardommc at gmail.com  Fri Jun 21 01:53:16 2013
From: gerardommc at gmail.com (Gerardo)
Date: Fri, 21 Jun 2013 09:53:16 +1000
Subject: [R-sig-Geo] Problems generating RasterStack object
Message-ID: <51C395EC.5030407@gmail.com>

Hi all. I have a set of Raster layers I want to use to generate species 
distribution models. Initially the files had all different projections, 
resolution and extent. So i resampled and cropped them with a mask layer 
with the extent I wanted. All was done in R. After the processing only a 
few of the layers had the same extent and so they couldn't be stacked 
with stack(files). I also tried creating an extent object with the exact 
extension I wanted, but nothing worked, most files ended up with some 
degree of error. The quick=T argument returned another error that said 
the a character string was expected. Is there a function or a procedure 
to equalise the extent of all the layers?

Regards
Gerardo Martin


From jdm at novavia.us  Fri Jun 21 02:40:33 2013
From: jdm at novavia.us (JD Margulici)
Date: Thu, 20 Jun 2013 17:40:33 -0700
Subject: [R-sig-Geo] Lead Data Scientist at Geospatial Startup
Message-ID: <CAGdLAAvhNUSYre3gtWLpDdE3zHhY+A8mVv=mGLV0D7S-gGASTw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130620/85347b97/attachment.pl>

From h.wickham at gmail.com  Fri Jun 21 02:55:49 2013
From: h.wickham at gmail.com (Hadley Wickham)
Date: Thu, 20 Jun 2013 19:55:49 -0500
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
In-Reply-To: <CAGhLh6FCOdMbNyCOLhH71NSM4vs84ZUU10L1Ufwk+amrsiNMiQ@mail.gmail.com>
References: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
	<CANVKczMyk1HQEPhJ2czYFnPh=orZeF+1AbCeW_vGwJ5Q7eOULQ@mail.gmail.com>
	<87ehbyxxk1.fsf@krugs.de>
	<alpine.LRH.2.03.1306191143160.9353@reclus.nhh.no>
	<87y5a6we2i.fsf@krugs.de>
	<7e330cc7cb2d4842b8cd692be691ee73@EX-0-HT0.lancs.local>
	<CANVKczM7h_FNCE0GPckpiBjQ8OidFqtg5r4ebwERsnA--yJPXg@mail.gmail.com>
	<CABdHhvEnOhorfqnoN9LERqpSgyknqvkVLco3ELg9qBVFb+hJLQ@mail.gmail.com>
	<CAGhLh6FCOdMbNyCOLhH71NSM4vs84ZUU10L1Ufwk+amrsiNMiQ@mail.gmail.com>
Message-ID: <CABdHhvGVMW5HZosXCEdsqfkX7P2Bt6Vqbodg1Fd6MGuBC2eMGQ@mail.gmail.com>

>> > does that brew command require an rgdal 'formula' somewhere? I cant
>> > find one here:
>> >
>> > https://github.com/mxcl/homebrew/blob/master/Library/Formula
>>
>> You want rgdal from brew, and then rgdal from CRAN.
>
> I assume you mean gdal from brew? That's what I installed.

Yes, right.

> Following gdal, I also need GRASS 7.0 - I couldn't find a recipe for GRASSx
> - do you know if there is one? Otherwise I would just try my luck and write
> my first one...

Is the grass recipe not what you want?

Hadley

--
Chief Scientist, RStudio
http://had.co.nz/


From HodgessE at uhd.edu  Fri Jun 21 07:13:25 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Fri, 21 Jun 2013 05:13:25 +0000
Subject: [R-sig-Geo] trouble with rgdal and Rstudio
Message-ID: <FF9DB805FC41CC4E95825A50F680630217A01C84@challenger.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130621/b1d6f9c3/attachment.pl>

From kridox at ymail.com  Fri Jun 21 08:00:42 2013
From: kridox at ymail.com (Pascal Oettli)
Date: Fri, 21 Jun 2013 15:00:42 +0900
Subject: [R-sig-Geo] trouble with rgdal and Rstudio
In-Reply-To: <FF9DB805FC41CC4E95825A50F680630217A01C84@challenger.uhd.campus>
References: <FF9DB805FC41CC4E95825A50F680630217A01C84@challenger.uhd.campus>
Message-ID: <CAAcyNCy8kgrctyqg12VZkLx+zwFGaQF5f8Fzj5irMgWzqMFNtA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130621/a9a2769e/attachment.pl>

From HodgessE at uhd.edu  Fri Jun 21 08:03:39 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Fri, 21 Jun 2013 06:03:39 +0000
Subject: [R-sig-Geo] trouble with rgdal and Rstudio
In-Reply-To: <CAAcyNCy8kgrctyqg12VZkLx+zwFGaQF5f8Fzj5irMgWzqMFNtA@mail.gmail.com>
References: <FF9DB805FC41CC4E95825A50F680630217A01C84@challenger.uhd.campus>,
	<CAAcyNCy8kgrctyqg12VZkLx+zwFGaQF5f8Fzj5irMgWzqMFNtA@mail.gmail.com>
Message-ID: <FF9DB805FC41CC4E95825A50F680630217A01CB9@challenger.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130621/896f9251/attachment.pl>

From kridox at ymail.com  Fri Jun 21 08:07:02 2013
From: kridox at ymail.com (Pascal Oettli)
Date: Fri, 21 Jun 2013 15:07:02 +0900
Subject: [R-sig-Geo] trouble with rgdal and Rstudio
In-Reply-To: <FF9DB805FC41CC4E95825A50F680630217A01CB9@challenger.uhd.campus>
References: <FF9DB805FC41CC4E95825A50F680630217A01C84@challenger.uhd.campus>,
	<CAAcyNCy8kgrctyqg12VZkLx+zwFGaQF5f8Fzj5irMgWzqMFNtA@mail.gmail.com>
	<FF9DB805FC41CC4E95825A50F680630217A01CB9@challenger.uhd.campus>
Message-ID: <51C3ED86.3070405@ymail.com>

Hi,

I had once a problem with Rstudio, which didn't correctly source a 
modified .bashrc. After restarting my session on Linux, all went fine. 
Maybe one reason.

Regards,
Pascal


On 21/06/13 15:03, Hodgess, Erin wrote:
> I've updated the $PATH via .bashrc and .Renviron.
>
> I had trouble with compilation yesterday, but that was a problem with
> permissions on "as".  It's fixed now.
>
> ------------------------------------------------------------------------
> *From:* skalp.oettli at gmail.com [skalp.oettli at gmail.com] on behalf of
> Pascal Oettli [kridox at ymail.com]
> *Sent:* Friday, June 21, 2013 1:00 AM
> *To:* Hodgess, Erin
> *Cc:* r-sig-geo at r-project.org
> *Subject:* Re: [R-sig-Geo] trouble with rgdal and Rstudio
>
> Hello,
>
> Problem of paths definition ($PATH) and permissions for your account?
>
> Regards,
> Pascal
>
>
>
>
> 2013/6/21 Hodgess, Erin <HodgessE at uhd.edu <mailto:HodgessE at uhd.edu>>
>
>     Hi everyone!
>
>     I have set up Rstudio on a Centos 5 server.  When I try to bring in
>     rgdal, this is what happens:
>
>      > library(rgdal)
>     Loading required package: sp
>     Error in dyn.load(file, DLLpath = DLLpath, ...) :
>        unable to load shared object
>     '/home/erin1/R/x86_64-unknown-linux-gnu-library/3.0/rgdal/libs/rgdal.so':
>        libgdal.so.1: cannot open shared object file: No such file or
>     directory
>     Error: package or namespace load failed for ?rgdal?
>
>     I have tried removing gdalplugins, have re-installed gdal, have put
>     together an Renviron.site, and changed .Renviron.
>
>     It works fine when I'm not on Rstudio.
>
>     Any suggestions, please?
>
>     I did try the items mentioned in the google article from Drs. Bivand
>     and Rowlingson
>
>
>     Thanks,
>     Erin
>
>
>              [[alternative HTML version deleted]]
>
>
>     _______________________________________________
>     R-sig-Geo mailing list
>     R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>     https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>


From Rainer at krugs.de  Fri Jun 21 09:15:47 2013
From: Rainer at krugs.de (Rainer M Krug)
Date: Fri, 21 Jun 2013 09:15:47 +0200
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
In-Reply-To: <CABdHhvGVMW5HZosXCEdsqfkX7P2Bt6Vqbodg1Fd6MGuBC2eMGQ@mail.gmail.com>
	(Hadley Wickham's message of "Thu, 20 Jun 2013 19:55:49 -0500")
References: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
	<CANVKczMyk1HQEPhJ2czYFnPh=orZeF+1AbCeW_vGwJ5Q7eOULQ@mail.gmail.com>
	<87ehbyxxk1.fsf@krugs.de>
	<alpine.LRH.2.03.1306191143160.9353@reclus.nhh.no>
	<87y5a6we2i.fsf@krugs.de>
	<7e330cc7cb2d4842b8cd692be691ee73@EX-0-HT0.lancs.local>
	<CANVKczM7h_FNCE0GPckpiBjQ8OidFqtg5r4ebwERsnA--yJPXg@mail.gmail.com>
	<CABdHhvEnOhorfqnoN9LERqpSgyknqvkVLco3ELg9qBVFb+hJLQ@mail.gmail.com>
	<CAGhLh6FCOdMbNyCOLhH71NSM4vs84ZUU10L1Ufwk+amrsiNMiQ@mail.gmail.com>
	<CABdHhvGVMW5HZosXCEdsqfkX7P2Bt6Vqbodg1Fd6MGuBC2eMGQ@mail.gmail.com>
Message-ID: <8761x8ue70.fsf@krugs.de>

Hadley Wickham <h.wickham at gmail.com> writes:

>>> > does that brew command require an rgdal 'formula' somewhere? I cant
>>> > find one here:
>>> >
>>> > https://github.com/mxcl/homebrew/blob/master/Library/Formula
>>>
>>> You want rgdal from brew, and then rgdal from CRAN.
>>
>> I assume you mean gdal from brew? That's what I installed.
>
> Yes, right.
>
>> Following gdal, I also need GRASS 7.0 - I couldn't find a recipe for GRASSx
>> - do you know if there is one? Otherwise I would just try my luck and write
>> my first one...
>
> Is the grass recipe not what you want?

It is - how could I have missed this? I thought I tried

,----
| brew install grass
`----

but I might have not.

Thanks,

Rainer

>
> Hadley
>
> --
> Chief Scientist, RStudio
> http://had.co.nz/
<#secure method=pgpmime mode=sign>

-- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug


From Roger.Bivand at nhh.no  Fri Jun 21 09:48:40 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 21 Jun 2013 09:48:40 +0200
Subject: [R-sig-Geo] Trouble with universal kriging
In-Reply-To: <51C36EA0.4020301@uni-muenster.de>
References: <CAHYDKLatXrvssCFUbLK_5WjSDCLX+Pyb_bRiQ04vn1vYAfQk_g@mail.gmail.com>
	<51C36EA0.4020301@uni-muenster.de>
Message-ID: <alpine.LRH.2.03.1306210934120.19851@reclus.nhh.no>

On Thu, 20 Jun 2013, Edzer Pebesma wrote:

> Dominik, if you want to receive help, please explain why you are
> frustrated, and instead of claims of "won't work", explain in detail
> what you did and what happened, preferably with a well-prepared example
> that people on the list can reproduce without downloading data first.
>
>
> On 06/20/2013 09:57 PM, Dominik Schneider wrote:
>> Hi, I am trying to follow the examples in  Bivand et al 'Applied Spatial
>> Data Analysis' and the examples at
>> http://casoilresource.lawr.ucdavis.edu/drupal/node/442 but I am frustrated.
>> I finally managed an ordinary kriging example to work but with little
>> understanding of why/when it should work.

Well, if you read chapter 8, you should gain sufficient understanding, 
right? The online examples are not intended to be self-explanatory; they 
all work, because they are tested nightly on a fully updated system; the 
online versions have been modified to keep up with successive changes in 
R and the packages used.

>> I posted some data: https://www.dropbox.com/s/rtg7gh67ziai3ec/mar2011.RData
>> Another item I've noticed, if I  define the projection with
>> projection(object)='+proj=lonlat +datum=NAD83'  for any of my spatial
>> objects it won't work.  It only works with an defined projection. any help
>> would be appreciated. Thanks.

Do also pay attention to details:

"+proj=lonlat +datum=NAD83"

is valid PROJ.4, but not recognised in the CRS class, it should be:

"+proj=longlat +datum=NAD83"

All of "latlon, "latlong", "lonlat", and "longlat" are valid PROJ.4, but 
the first two imply northings before eastings, and we decided ten years 
ago to use only "longlat". The documentation is in ?proj4string in sp, but 
the detail is not repeated in ?projection in raster, which does link to 
?"CRS-class" in sp and "spTransform-methods" in rgdal. We will try to make 
sure that use of anything other than "longlat" is an error.

Always include your sessionInfo(), which gives details of your platform 
and the versions of installed packages.

Hope this clarifies,

Roger

>>
>> load('mar2011.RData')
>>
>> vt=variogram(snotel~recon,data=mar2011)
>>
>> vt.fit=fit.variogram(vt,vgm(psill=0.025,nugget=0.015,model='Sph',range=2))
>>
>> #plot(vt,vt.fit)
>>
>> ok<-krige(snotel~1,locations=mar2011,newdata=swe.grid,model=vt.fit)
>>
>> uk<-krige(snotel~mar2011$recon,locations=mar2011,newdata=swe.grid,model=
>> vt.fit)
>>
>> #spplot(ok)
>> Dominik
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From renaud.lancelot at cirad.fr  Fri Jun 21 11:35:03 2013
From: renaud.lancelot at cirad.fr (lancelot)
Date: Fri, 21 Jun 2013 11:35:03 +0200
Subject: [R-sig-Geo] Number of polygons between 2 points
Message-ID: <51C41E47.2030602@cirad.fr>

Dear all,

I have a large layer of many spatial polygons (several thousands): class 
SpatialPolygons.

I have another layer of spatial points (several tenths): class 
SpatialPoints.

I would like to count the number of these polygons crossed by a straight 
line joining each pair of points.

Any hint?

Thank you very much in advance.

All the best,

Renaud

-- 
Renaud Lancelot
Directeur adjoint / Deputy director
CIRAD, UMR CMAEE, Campus International de Baillarguet TA A-DIR / B
F34398 Montpellier - http://umr-cmaee.cirad.fr/

Head of epidemiology team
EDENext Project, coordinator: http://www.edenext.eu/

Tel.  +33 4 67 59 37 17  -  Fax  +33 4 67 59 37 98
Secr. +33 4 67 59 37 37  - Cell. +33 6 77 52 08 69


From roman.lustrik at gmail.com  Fri Jun 21 11:39:42 2013
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Fri, 21 Jun 2013 11:39:42 +0200
Subject: [R-sig-Geo] Number of polygons between 2 points
In-Reply-To: <51C41E47.2030602@cirad.fr>
References: <51C41E47.2030602@cirad.fr>
Message-ID: <CAHT1vpiVGnCEeV-PvdHfu+PXqur625i0p8fsmfznPAby8AdwEQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130621/5bb50915/attachment.pl>

From f.rodriguez.sanc at gmail.com  Fri Jun 21 11:56:09 2013
From: f.rodriguez.sanc at gmail.com (Francisco Rodriguez Sanchez)
Date: Fri, 21 Jun 2013 10:56:09 +0100
Subject: [R-sig-Geo] Problems generating RasterStack object
In-Reply-To: <51C395EC.5030407@gmail.com>
References: <51C395EC.5030407@gmail.com>
Message-ID: <51C42339.3050107@gmail.com>

Hi Gerardo,

It would help if you could provide a reproducible example to spot the 
problem... Anyway, try the spatial_sync_raster function in the 
spatial.tools package 
(http://cran.at.r-project.org/web/packages/spatial.tools/index.html). It 
will easily match the projection, resolution and extent of your rasters 
to a reference raster

Hope it helps

Paco


El 21/06/2013 00:53, Gerardo escribi?:
> Hi all. I have a set of Raster layers I want to use to generate 
> species distribution models. Initially the files had all different 
> projections, resolution and extent. So i resampled and cropped them 
> with a mask layer with the extent I wanted. All was done in R. After 
> the processing only a few of the layers had the same extent and so 
> they couldn't be stacked with stack(files). I also tried creating an 
> extent object with the exact extension I wanted, but nothing worked, 
> most files ended up with some degree of error. The quick=T argument 
> returned another error that said the a character string was expected. 
> Is there a function or a procedure to equalise the extent of all the 
> layers?
>
> Regards
> Gerardo Martin
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Dr Francisco Rodriguez-Sanchez
Forest Ecology and Conservation Group
Department of Plant Sciences
University of Cambridge
Downing Street
Cambridge CB2 3EA
United Kingdom
http://sites.google.com/site/rodriguezsanchezf


From Rainer at krugs.de  Fri Jun 21 12:51:13 2013
From: Rainer at krugs.de (Rainer M Krug)
Date: Fri, 21 Jun 2013 12:51:13 +0200
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
In-Reply-To: <8761x8ue70.fsf@krugs.de>
References: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
	<CANVKczMyk1HQEPhJ2czYFnPh=orZeF+1AbCeW_vGwJ5Q7eOULQ@mail.gmail.com>
	<87ehbyxxk1.fsf@krugs.de>
	<alpine.LRH.2.03.1306191143160.9353@reclus.nhh.no>
	<87y5a6we2i.fsf@krugs.de>
	<7e330cc7cb2d4842b8cd692be691ee73@EX-0-HT0.lancs.local>
	<CANVKczM7h_FNCE0GPckpiBjQ8OidFqtg5r4ebwERsnA--yJPXg@mail.gmail.com>
	<CABdHhvEnOhorfqnoN9LERqpSgyknqvkVLco3ELg9qBVFb+hJLQ@mail.gmail.com>
	<CAGhLh6FCOdMbNyCOLhH71NSM4vs84ZUU10L1Ufwk+amrsiNMiQ@mail.gmail.com>
	<CABdHhvGVMW5HZosXCEdsqfkX7P2Bt6Vqbodg1Fd6MGuBC2eMGQ@mail.gmail.com>
	<8761x8ue70.fsf@krugs.de>
Message-ID: <CAGhLh6F9z3j58Yh+MkW2bqQOdGsBpXqFZqUDR40qfOW6wCEn-g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130621/c740cbfd/attachment.pl>

From engin_bkr at hotmail.com  Fri Jun 21 13:42:53 2013
From: engin_bkr at hotmail.com (engin _b)
Date: Fri, 21 Jun 2013 14:42:53 +0300
Subject: [R-sig-Geo] a problem about spatial weights
Message-ID: <DUB120-W97C8B22C4AF2DE2E56618808F0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130621/667eaa26/attachment.pl>

From alobolistas at gmail.com  Fri Jun 21 15:02:24 2013
From: alobolistas at gmail.com (Agustin Lobo)
Date: Fri, 21 Jun 2013 15:02:24 +0200
Subject: [R-sig-Geo] Import nmea files?
Message-ID: <CAG4NRe+mk2rWB7wP7qvaqm5e=TGHKSrQGb4Eko5RA6BCL3wLag@mail.gmail.com>

I have nmea files with decimal seconds:
$GPRMC,100406.7,A,4132.98525,N,00039.14528,E,000.05,196.5,140613,000.2,W,D*2C
$GPGGA,100406.7,4132.98525,N,00039.14528,E,2,18,0.6,211.6,M,52.2,M,,*52
$GPVTG,196.5,T,196.8,M,000.05,N,0000.10,K,D*1F

I use the following to convert to gpx:
gpsbabel -i nmea -f 2013-06-14_120409_Lleida.txt -o gpx -F
2013-06-14_120409_LleidaNMEA.gpx
and the use readOGR() to import the gpx,
but the times in the gpx are rounded to nearest integer.
I've asked in the gpsbabel list if there is any way to convert while
keeping the precision, but I'm pessimistic.

Is there a function to import the nmea files? Just asking before making one.

Thanks,
Agus


From h.wickham at gmail.com  Fri Jun 21 15:19:20 2013
From: h.wickham at gmail.com (Hadley Wickham)
Date: Fri, 21 Jun 2013 08:19:20 -0500
Subject: [R-sig-Geo] Linux or OS X on Macbook Pro Retina?
In-Reply-To: <CAGhLh6F9z3j58Yh+MkW2bqQOdGsBpXqFZqUDR40qfOW6wCEn-g@mail.gmail.com>
References: <072b74aa0c35462b9294ea6d20ba9641@EX-1-HT0.lancs.local>
	<CANVKczMyk1HQEPhJ2czYFnPh=orZeF+1AbCeW_vGwJ5Q7eOULQ@mail.gmail.com>
	<87ehbyxxk1.fsf@krugs.de>
	<alpine.LRH.2.03.1306191143160.9353@reclus.nhh.no>
	<87y5a6we2i.fsf@krugs.de>
	<7e330cc7cb2d4842b8cd692be691ee73@EX-0-HT0.lancs.local>
	<CANVKczM7h_FNCE0GPckpiBjQ8OidFqtg5r4ebwERsnA--yJPXg@mail.gmail.com>
	<CABdHhvEnOhorfqnoN9LERqpSgyknqvkVLco3ELg9qBVFb+hJLQ@mail.gmail.com>
	<CAGhLh6FCOdMbNyCOLhH71NSM4vs84ZUU10L1Ufwk+amrsiNMiQ@mail.gmail.com>
	<CABdHhvGVMW5HZosXCEdsqfkX7P2Bt6Vqbodg1Fd6MGuBC2eMGQ@mail.gmail.com>
	<8761x8ue70.fsf@krugs.de>
	<CAGhLh6F9z3j58Yh+MkW2bqQOdGsBpXqFZqUDR40qfOW6wCEn-g@mail.gmail.com>
Message-ID: <CABdHhvF8YNsNZnzVh+vasG1uhM01OsQRSz_Bcn4e0EWCBAVABA@mail.gmail.com>

>> It is - how could I have missed this? I thought I tried
>>
>> ,----
>> | brew install grass
>> `----
>>
>> but I might have not.
>
>
> Ok - this installs grass 6.4, but I am also looking for 7. Any suggestions?


Take a look at https://github.com/mxcl/homebrew/commits/master/Library/Formula/grass.rb
and then contact one of the active developers of the grass formula?

Hadley

--
Chief Scientist, RStudio
http://had.co.nz/


From vitale232 at gmail.com  Fri Jun 21 16:48:41 2013
From: vitale232 at gmail.com (Andrew Vitale)
Date: Fri, 21 Jun 2013 07:48:41 -0700
Subject: [R-sig-Geo] Problems generating RasterStack object
In-Reply-To: <51C42339.3050107@gmail.com>
References: <51C395EC.5030407@gmail.com>
	<51C42339.3050107@gmail.com>
Message-ID: <CAFTcopeT_b1qyQ9zoNt7sEdTad3WBvDUOP=UQL5x1yeYXJGwsw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130621/120b3460/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Fri Jun 21 16:50:49 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 21 Jun 2013 15:50:49 +0100
Subject: [R-sig-Geo] Import nmea files?
In-Reply-To: <7010c5e55a5046d58c0393b63b7e587e@EX-1-HT0.lancs.local>
References: <7010c5e55a5046d58c0393b63b7e587e@EX-1-HT0.lancs.local>
Message-ID: <CANVKczMwgO9S_XyG2i29Sdac1KnDwx0gfgLCH1wqPCTk7Bps=Q@mail.gmail.com>

On Fri, Jun 21, 2013 at 2:02 PM, Agustin Lobo <alobolistas at gmail.com> wrote:
> I have nmea files with decimal seconds:
> $GPRMC,100406.7,A,4132.98525,N,00039.14528,E,000.05,196.5,140613,000.2,W,D*2C
> $GPGGA,100406.7,4132.98525,N,00039.14528,E,2,18,0.6,211.6,M,52.2,M,,*52
> $GPVTG,196.5,T,196.8,M,000.05,N,0000.10,K,D*1F
>
> I use the following to convert to gpx:
> gpsbabel -i nmea -f 2013-06-14_120409_Lleida.txt -o gpx -F
> 2013-06-14_120409_LleidaNMEA.gpx
> and the use readOGR() to import the gpx,
> but the times in the gpx are rounded to nearest integer.

 The times in the gpx file? I get the following if I convert those
three lines using gpsbabel (1.3.6)

<trkpt lat="41.549754167" lon="0.652421333">
  <time>2013-06-14T10:04:06.699Z</time>
  <course>196.500000</course>
  <speed>0.025722</speed>
</trkpt>

which is a very non-integer time.


From alobolistas at gmail.com  Fri Jun 21 17:21:18 2013
From: alobolistas at gmail.com (Agustin Lobo)
Date: Fri, 21 Jun 2013 17:21:18 +0200
Subject: [R-sig-Geo] Import nmea files?
In-Reply-To: <CANVKczMwgO9S_XyG2i29Sdac1KnDwx0gfgLCH1wqPCTk7Bps=Q@mail.gmail.com>
References: <7010c5e55a5046d58c0393b63b7e587e@EX-1-HT0.lancs.local>
	<CANVKczMwgO9S_XyG2i29Sdac1KnDwx0gfgLCH1wqPCTk7Bps=Q@mail.gmail.com>
Message-ID: <CAG4NReKjPmmJXN0KEKy7j7Xi=fTPYHP7gYXXE-OGX7cVbZHM+w@mail.gmail.com>

You are right, my guess was hasty: I also have
<trkpt lat="41.549754167" lon="0.652421333">
  <time>2013-06-14T10:04:06.699Z</time>
  <course>196.500000</course>
  <speed>0.025722</speed>

in the gpx, but then after readOGR():
gpstracknmea <-
readOGR(dsn=file.path(dirgpsin,"2013-06-14_120409_LleidaNMEA.gpx"),layer="track_points",stringsAsFactors=FALSE)
I get:
> gpstracknmea at data$time[1]
[1] "2013/06/14 10:04:07+00"
> class(gpstracknmea at data$time)
[1] "character"

so it seems that readOGR() is the one rounding to the nearest integer.
http://www.gdal.org/ogr/drv_gpx.html  does not mention any rounding.

Agus

On Fri, Jun 21, 2013 at 4:50 PM, Barry Rowlingson
<b.rowlingson at lancaster.ac.uk> wrote:
> On Fri, Jun 21, 2013 at 2:02 PM, Agustin Lobo <alobolistas at gmail.com> wrote:
>> I have nmea files with decimal seconds:
>> $GPRMC,100406.7,A,4132.98525,N,00039.14528,E,000.05,196.5,140613,000.2,W,D*2C
>> $GPGGA,100406.7,4132.98525,N,00039.14528,E,2,18,0.6,211.6,M,52.2,M,,*52
>> $GPVTG,196.5,T,196.8,M,000.05,N,0000.10,K,D*1F
>>
>> I use the following to convert to gpx:
>> gpsbabel -i nmea -f 2013-06-14_120409_Lleida.txt -o gpx -F
>> 2013-06-14_120409_LleidaNMEA.gpx
>> and the use readOGR() to import the gpx,
>> but the times in the gpx are rounded to nearest integer.
>
>  The times in the gpx file? I get the following if I convert those
> three lines using gpsbabel (1.3.6)
>
> <trkpt lat="41.549754167" lon="0.652421333">
>   <time>2013-06-14T10:04:06.699Z</time>
>   <course>196.500000</course>
>   <speed>0.025722</speed>
> </trkpt>
>
> which is a very non-integer time.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From b.rowlingson at lancaster.ac.uk  Fri Jun 21 17:44:57 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 21 Jun 2013 16:44:57 +0100
Subject: [R-sig-Geo] Import nmea files?
In-Reply-To: <46d83fd4857b49b59ef774dcc8b131a3@EX-0-HT0.lancs.local>
References: <7010c5e55a5046d58c0393b63b7e587e@EX-1-HT0.lancs.local>
	<CANVKczMwgO9S_XyG2i29Sdac1KnDwx0gfgLCH1wqPCTk7Bps=Q@mail.gmail.com>
	<46d83fd4857b49b59ef774dcc8b131a3@EX-0-HT0.lancs.local>
Message-ID: <CANVKczP3VzHKFTCs1WRwTD3W2Vds5-SX3M_th1_+X8p+u5e2_Q@mail.gmail.com>

On Fri, Jun 21, 2013 at 4:21 PM, Agustin Lobo <alobolistas at gmail.com> wrote:
> You are right, my guess was hasty: I also have
> <trkpt lat="41.549754167" lon="0.652421333">
>   <time>2013-06-14T10:04:06.699Z</time>
>   <course>196.500000</course>
>   <speed>0.025722</speed>
>
> in the gpx, but then after readOGR():
> gpstracknmea <-
> readOGR(dsn=file.path(dirgpsin,"2013-06-14_120409_LleidaNMEA.gpx"),layer="track_points",stringsAsFactors=FALSE)
> I get:
>> gpstracknmea at data$time[1]
> [1] "2013/06/14 10:04:07+00"
>> class(gpstracknmea at data$time)
> [1] "character"
>
> so it seems that readOGR() is the one rounding to the nearest integer.
> http://www.gdal.org/ogr/drv_gpx.html  does not mention any rounding.

There's a five-year-old gdal/ogr bug report that might be relevant:

http://trac.osgeo.org/gdal/ticket/2680

perhaps you might try bumping that? I suspect the precision is lost
when ogr reads in the gpx file, so no amount of fiddling with the
output format as string will help.

Barry


From b.rowlingson at lancaster.ac.uk  Fri Jun 21 18:03:43 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 21 Jun 2013 17:03:43 +0100
Subject: [R-sig-Geo] Import nmea files?
In-Reply-To: <46d83fd4857b49b59ef774dcc8b131a3@EX-0-HT0.lancs.local>
References: <7010c5e55a5046d58c0393b63b7e587e@EX-1-HT0.lancs.local>
	<CANVKczMwgO9S_XyG2i29Sdac1KnDwx0gfgLCH1wqPCTk7Bps=Q@mail.gmail.com>
	<46d83fd4857b49b59ef774dcc8b131a3@EX-0-HT0.lancs.local>
Message-ID: <CANVKczNBZpN5p5wbq+S0Lqg+XArSFzCwAiDumvQXFPmOH2fr=w@mail.gmail.com>

On Fri, Jun 21, 2013 at 4:21 PM, Agustin Lobo <alobolistas at gmail.com> wrote:

> so it seems that readOGR() is the one rounding to the nearest integer.
> http://www.gdal.org/ogr/drv_gpx.html  does not mention any rounding.

 If you convert from nmea to KML, then you can read this with readOGR
and then get the exact time from the Description data:

gpsbabel -i nmea -f test.nmea -o kml -F out.kml
 > t=readOGR("out.kml","Points")
OGR data source with driver: KML
Source: "out.kml", layer: "Points"
with 1 features and 2 fields
Feature type: wkbPoint with 3 dimensions
 > t
             coordinates Name
1 (0.652421, 41.5498, 0)   -0


                                                           Description
1 <table> <tr><td>Longitude: 0.652421 </td></tr> <tr><td>Latitude:
41.549754 </td></tr> <tr><td>Speed: 0.0 mph </td></tr>
<tr><td>Heading: 0.7 </td></tr> <tr><td>Time: 2013-06-14T10:04:06.699Z
</td></tr> </table>
> t$Description
[1] <table> <tr><td>Longitude: 0.652421 </td></tr> <tr><td>Latitude:
41.549754 </td></tr> <tr><td>Speed: 0.0 mph </td></tr>
<tr><td>Heading: 0.7 </td></tr> <tr><td>Time: 2013-06-14T10:04:06.699Z
</td></tr> </table>
Levels: <table> <tr><td>Longitude: 0.652421 </td></tr>
<tr><td>Latitude: 41.549754 </td></tr> <tr><td>Speed: 0.0 mph
</td></tr> <tr><td>Heading: 0.7 </td></tr> <tr><td>Time:
2013-06-14T10:04:06.699Z </td></tr> </table>

You will have to do a bit of string gymnastics with the Description though....

Its possible other gpsbabel output formats might make this easier - I
couldn't get the csv output to do more than the spatial coordinates.

Barry


From b.rowlingson at lancaster.ac.uk  Fri Jun 21 18:09:37 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 21 Jun 2013 17:09:37 +0100
Subject: [R-sig-Geo] Import nmea files?
In-Reply-To: <c0ffb9c96f604c3692c11b6b9a93f391@EX-1-HT0.lancs.local>
References: <7010c5e55a5046d58c0393b63b7e587e@EX-1-HT0.lancs.local>
	<CANVKczMwgO9S_XyG2i29Sdac1KnDwx0gfgLCH1wqPCTk7Bps=Q@mail.gmail.com>
	<46d83fd4857b49b59ef774dcc8b131a3@EX-0-HT0.lancs.local>
	<c0ffb9c96f604c3692c11b6b9a93f391@EX-1-HT0.lancs.local>
Message-ID: <CANVKczOkoms6Y-V039PCk-RJzMBi7Db3jXEUijBKVLv9J3y4Nw@mail.gmail.com>

And then I discovered the unicsv format:

$ gpsbabel -t -i nmea -f test.nmea -o unicsv  -F out.csv
$ more out.csv
No,Latitude,Longitude,Speed,Course,Date,Time
1,41.549754,0.652421,0.0,196.5,2013/06/14,11:04:06.699999

Read that in with read.table or read.csv, parse the date and time, set
coordinates, set CRS...

Barry


From renaud.lancelot at cirad.fr  Fri Jun 21 19:07:48 2013
From: renaud.lancelot at cirad.fr (lancelot)
Date: Fri, 21 Jun 2013 19:07:48 +0200
Subject: [R-sig-Geo] Number of polygons between 2 points
In-Reply-To: <CAHT1vpiVGnCEeV-PvdHfu+PXqur625i0p8fsmfznPAby8AdwEQ@mail.gmail.com>
References: <51C41E47.2030602@cirad.fr>
	<CAHT1vpiVGnCEeV-PvdHfu+PXqur625i0p8fsmfznPAby8AdwEQ@mail.gmail.com>
Message-ID: <51C48864.4060303@cirad.fr>

Thank you Roman: gIntersects is what I need.

All the best,

Renaud

Le 21/06/2013 11:39, Roman Lu?trik a ?crit :
> Have you tried functions in `rgeos`, gIntersects` for example? It will
> count the number of features that have at least one point in common.
>
> Cheers,
> Roman
>
>
>
> On Fri, Jun 21, 2013 at 11:35 AM, lancelot <renaud.lancelot at cirad.fr
> <mailto:renaud.lancelot at cirad.fr>> wrote:
>
>     Dear all,
>
>     I have a large layer of many spatial polygons (several thousands):
>     class SpatialPolygons.
>
>     I have another layer of spatial points (several tenths): class
>     SpatialPoints.
>
>     I would like to count the number of these polygons crossed by a
>     straight line joining each pair of points.
>
>     Any hint?
>
>     Thank you very much in advance.
>
>     All the best,
>
>     Renaud
>
>     --
>     Renaud Lancelot
>     Directeur adjoint / Deputy director
>     CIRAD, UMR CMAEE, Campus International de Baillarguet TA A-DIR / B
>     F34398 Montpellier - http://umr-cmaee.cirad.fr/
>
>     Head of epidemiology team
>     EDENext Project, coordinator: http://www.edenext.eu/
>
>     Tel.  +33 4 67 59 37 17  -  Fax  +33 4 67 59 37 98
>     Secr. +33 4 67 59 37 37  - Cell. +33 6 77 52 08 69
>
>     _________________________________________________
>     R-sig-Geo mailing list
>     R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>     https://stat.ethz.ch/mailman/__listinfo/r-sig-geo
>     <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>
>
>
>
> --
> In God we trust, all others bring data.

-- 
Renaud Lancelot
Directeur adjoint / Deputy director
CIRAD, UMR CMAEE, Campus International de Baillarguet TA A-DIR / B
F34398 Montpellier - http://umr-cmaee.cirad.fr/

Head of epidemiology team
EDENext Project, coordinator: http://www.edenext.eu/

Tel.  +33 4 67 59 37 17  -  Fax  +33 4 67 59 37 98
Secr. +33 4 67 59 37 37  - Cell. +33 6 77 52 08 69


From b.rowlingson at lancaster.ac.uk  Fri Jun 21 19:55:04 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 21 Jun 2013 18:55:04 +0100
Subject: [R-sig-Geo] identify methods for sp-class objects
Message-ID: <CANVKczPnRvn1gvKw_o_74frrsNmQJGvvv3rWnWS9K8jb3APDFw@mail.gmail.com>

Has anyone written a set of 'identify' methods for sp-class objects?

For example, given a spatial polygons data frame, I want to do:

plot(spdf)
identify()

 [click click click]

[1] 23 NA 5

showing my mouse clicks were over polygon 23, no polygon, polygon 5.

For overlapping spdfs, an option might be:

identify(multi=TRUE)

which would return a list of polygon indices under each click.

For spatial line structures, a similar function would either return
the nearest line feature, or all line features within a tolerance.

Similarly for SpatialPoints.

If these don't exist in some package, then I have a job for the weekend...

Barry


From Dominik.Schneider at colorado.edu  Fri Jun 21 22:03:48 2013
From: Dominik.Schneider at colorado.edu (dschneiderch)
Date: Fri, 21 Jun 2013 13:03:48 -0700 (PDT)
Subject: [R-sig-Geo] Trouble with universal kriging
In-Reply-To: <alpine.LRH.2.03.1306210934120.19851@reclus.nhh.no>
References: <CAHYDKLatXrvssCFUbLK_5WjSDCLX+Pyb_bRiQ04vn1vYAfQk_g@mail.gmail.com>
	<51C36EA0.4020301@uni-muenster.de>
	<alpine.LRH.2.03.1306210934120.19851@reclus.nhh.no>
Message-ID: <1371845028950-7583875.post@n2.nabble.com>

Thanks for the heads up on +proj. I had not noticed that difference.

I read chapter 8, twice now.  It is not clear to me what the error message
I'm getting means:
Error in gstat.formula.predict(d$formula, newdata, na.action = na.action,  : 
  NROW(locs) != NROW(X): this should not occur
In addition: Warning messages:
1: 'newdata' had 5742 rows but variable(s) found have 200 rows 
2: 'newdata' had 5742 rows but variable(s) found have 200 rows

I thought newdata was supposed to be the new grid on which to predict.

Here is code for working data.
snotel=runif(200,0,3)
recon=sample(snotel,200)
recon[1:50]=snotel[1:50] # i'm not sure how to introduce spatial correlation
in this random data.
x=runif(200,-112.25,-104.125)
y=runif(200,33,43.75)

m2=data.frame(x,y,snotel,recon)
coordinates(m2)=~x+y
projection(m2)='+proj=longlat +datum=NAD83'

swe.grid=expand.grid(x=seq(-112.25,-104.125,0.125),y=seq(33,43.75,0.125))
coordinates(swe.grid) <- ~ x+y
projection(swe.grid)='+proj=longlat +datum=NAD83'
gridded(swe.grid) <- TRUE


#SessionInfo()
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] grid      stats     graphics  grDevices utils     datasets  methods  
base     

other attached packages:
[1] raster_2.1-25   maptools_0.8-23 lattice_0.20-13 foreign_0.8-52 
gstat_1.0-16   
[6] sp_1.0-8       

loaded via a namespace (and not attached):
[1] intervals_0.14.0 spacetime_1.0-4  tools_2.15.2     xts_0.9-3       
[5] zoo_1.7-9   




--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Trouble-with-universal-kriging-tp7583848p7583875.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From r.hijmans at gmail.com  Sat Jun 22 03:25:47 2013
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 21 Jun 2013 18:25:47 -0700
Subject: [R-sig-Geo] identify methods for sp-class objects
In-Reply-To: <CANVKczPnRvn1gvKw_o_74frrsNmQJGvvv3rWnWS9K8jb3APDFw@mail.gmail.com>
References: <CANVKczPnRvn1gvKw_o_74frrsNmQJGvvv3rWnWS9K8jb3APDFw@mail.gmail.com>
Message-ID: <CANtt_hxq-a-EnvGcoW=kjqawWQoFWSPDk7Ph5t6OdPPMz8-UAg@mail.gmail.com>

Barry

See:
library(raster)
?click
?select

identity could be a better name than click. And I am sure you can
improve these functions.
Robert



On Fri, Jun 21, 2013 at 10:55 AM, Barry Rowlingson
<b.rowlingson at lancaster.ac.uk> wrote:
> Has anyone written a set of 'identify' methods for sp-class objects?
>
> For example, given a spatial polygons data frame, I want to do:
>
> plot(spdf)
> identify()
>
>  [click click click]
>
> [1] 23 NA 5
>
> showing my mouse clicks were over polygon 23, no polygon, polygon 5.
>
> For overlapping spdfs, an option might be:
>
> identify(multi=TRUE)
>
> which would return a list of polygon indices under each click.
>
> For spatial line structures, a similar function would either return
> the nearest line feature, or all line features within a tolerance.
>
> Similarly for SpatialPoints.
>
> If these don't exist in some package, then I have a job for the weekend...
>
> Barry
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From alobolistas at gmail.com  Sat Jun 22 09:32:51 2013
From: alobolistas at gmail.com (Agustin Lobo)
Date: Sat, 22 Jun 2013 09:32:51 +0200
Subject: [R-sig-Geo] Import nmea files?
In-Reply-To: <CANVKczOkoms6Y-V039PCk-RJzMBi7Db3jXEUijBKVLv9J3y4Nw@mail.gmail.com>
References: <7010c5e55a5046d58c0393b63b7e587e@EX-1-HT0.lancs.local>
	<CANVKczMwgO9S_XyG2i29Sdac1KnDwx0gfgLCH1wqPCTk7Bps=Q@mail.gmail.com>
	<46d83fd4857b49b59ef774dcc8b131a3@EX-0-HT0.lancs.local>
	<c0ffb9c96f604c3692c11b6b9a93f391@EX-1-HT0.lancs.local>
	<CANVKczOkoms6Y-V039PCk-RJzMBi7Db3jXEUijBKVLv9J3y4Nw@mail.gmail.com>
Message-ID: <CAG4NRe+9TTreb3=qs3xR4Aj3BcW+gPjZ7oQu6cCUh2NYzZ3TbA@mail.gmail.com>

Thanks for your answers, which are shorter that what I ended up doing,
a mireadNMEA() function.
I think that mentioning the rounding problem at importing gps files in
the readOGR() help page would be useful.

"mireadNMEA" <- function(nmeafile,skip=0)
{
  #info http://aprs.gids.nl/nmea/
  #by now I select $GPGGA sentences only.
  require(sp)
  a <- read.csv(nmeafile,skip=skip,header=FALSE,sep=",",stringsAsFactors=FALSE)
  a <- a[a[,1]=="$GPGGA",]
  names(a) <- c("Sentence","UTC","Lat","N/S","Lon","E/W","Fix","NbSat","HDOP","Alt","m/f","HGeoid","TDGPS","DGPSID","Checks")
  for (i in c(7,8,9,10,12))  a[,i] <- as.numeric(a[,i])
  a[,3] <- as.numeric(substr(a[,3],1,2)) + as.numeric(substring(a[,3],3))/60
  a[a[,4]=="S",3] <- -a[a[,4]=="S",3]
  a[,5] <- as.numeric(substr(a[,5],1,3)) + as.numeric(substring(a[,5],4))/60
  a[a[,6]=="W",5] <- -a[a[,6]=="W",5]
  h <- substring(a[,2],1,2)
  m <- substring(a[,2],3,4)
  s <- substring(a[,2],5)
  a[,2] <- paste(h,m,s,sep=":")
  a <- a[,-c(1,4,6,11,13:15)]#useless variables
  a <- a[c(1,3,2,7,8,4:6)]
  coordinates(a) <- cbind(x=gpstracknmea$Lon,y=gpstracknmea$Lat)
  proj4string(a) <- CRS("+proj=longlat +datum=WGS84")#NMEA is always
lonlat WGS84
  a
}

On Fri, Jun 21, 2013 at 6:09 PM, Barry Rowlingson
<b.rowlingson at lancaster.ac.uk> wrote:
> And then I discovered the unicsv format:
>
> $ gpsbabel -t -i nmea -f test.nmea -o unicsv  -F out.csv
> $ more out.csv
> No,Latitude,Longitude,Speed,Course,Date,Time
> 1,41.549754,0.652421,0.0,196.5,2013/06/14,11:04:06.699999
>
> Read that in with read.table or read.csv, parse the date and time, set
> coordinates, set CRS...
>
> Barry
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From edzer.pebesma at uni-muenster.de  Sat Jun 22 11:13:32 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sat, 22 Jun 2013 11:13:32 +0200
Subject: [R-sig-Geo] identify methods for sp-class objects
In-Reply-To: <CANtt_hxq-a-EnvGcoW=kjqawWQoFWSPDk7Ph5t6OdPPMz8-UAg@mail.gmail.com>
References: <CANVKczPnRvn1gvKw_o_74frrsNmQJGvvv3rWnWS9K8jb3APDFw@mail.gmail.com>
	<CANtt_hxq-a-EnvGcoW=kjqawWQoFWSPDk7Ph5t6OdPPMz8-UAg@mail.gmail.com>
Message-ID: <51C56ABC.2070203@uni-muenster.de>

sp::spplot has an identify argument that, what TRUE, returns the points
identified; does not work for lines, polygons, grids.

sp::bubble() has the same functionality.

Have a nice weekend!

On 06/22/2013 03:25 AM, Robert J. Hijmans wrote:
> Barry
> 
> See:
> library(raster)
> ?click
> ?select
> 
> identity could be a better name than click. And I am sure you can
> improve these functions.
> Robert
> 
> 
> 
> On Fri, Jun 21, 2013 at 10:55 AM, Barry Rowlingson
> <b.rowlingson at lancaster.ac.uk> wrote:
>> Has anyone written a set of 'identify' methods for sp-class objects?
>>
>> For example, given a spatial polygons data frame, I want to do:
>>
>> plot(spdf)
>> identify()

If you do this, I'm not sure whether identify() can still find out that
it was spdf that was plotted.

>>
>>  [click click click]
>>
>> [1] 23 NA 5
>>
>> showing my mouse clicks were over polygon 23, no polygon, polygon 5.
>>
>> For overlapping spdfs, an option might be:
>>
>> identify(multi=TRUE)
>>
>> which would return a list of polygon indices under each click.
>>
>> For spatial line structures, a similar function would either return
>> the nearest line feature, or all line features within a tolerance.
>>
>> Similarly for SpatialPoints.
>>
>> If these don't exist in some package, then I have a job for the weekend...
>>
>> Barry
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de


From markpayneatwork at gmail.com  Sat Jun 22 15:24:58 2013
From: markpayneatwork at gmail.com (Mark Payne)
Date: Sat, 22 Jun 2013 15:24:58 +0200
Subject: [R-sig-Geo] Crop / clip a SpatialPixels* object
Message-ID: <CAGBzUO_FX8BjoPsNW2sbFMpw0mXHZjFXPpdPpfCLf38g4aNgkQ@mail.gmail.com>

Hi,

This should be simple, but I simply can't find an "elegant" solution.

I have a SpatialPixelsDataFrame that I would like to clip (crop) to a
smaller object. For example,

> data(meuse.grid)
> m = SpatialPixelsDataFrame(points = meuse.grid[c("x", "y")], data = meuse.grid)
>
> bbox(m)
     min    max
x 178440 181560
y 329600 333760
>

I would like to constrain m, to all y > 331000 and x >180000. What is
the most efficient way to do this (and have the other functionality
e.g bbox and plotting) reflect this reduced data set.

Mark


From j.m.signer at gmail.com  Sat Jun 22 15:56:39 2013
From: j.m.signer at gmail.com (Johannes Signer)
Date: Sat, 22 Jun 2013 15:56:39 +0200
Subject: [R-sig-Geo] Crop / clip a SpatialPixels* object
In-Reply-To: <CAGBzUO_FX8BjoPsNW2sbFMpw0mXHZjFXPpdPpfCLf38g4aNgkQ@mail.gmail.com>
References: <CAGBzUO_FX8BjoPsNW2sbFMpw0mXHZjFXPpdPpfCLf38g4aNgkQ@mail.gmail.com>
Message-ID: <CAC8qavvSeWyyDfiiVUL52y=7yCHiaCDaCTTFfjuyD8rmyKpLwQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130622/7bbe68ab/attachment.pl>

From s6lihert at uni-bonn.de  Sat Jun 22 16:06:17 2013
From: s6lihert at uni-bonn.de (Lionel Hertzog)
Date: Sat, 22 Jun 2013 16:06:17 +0200
Subject: [R-sig-Geo] Crop / clip a SpatialPixels* object
In-Reply-To: <CAGBzUO_FX8BjoPsNW2sbFMpw0mXHZjFXPpdPpfCLf38g4aNgkQ@mail.gmail.com>
References: <CAGBzUO_FX8BjoPsNW2sbFMpw0mXHZjFXPpdPpfCLf38g4aNgkQ@mail.gmail.com>
Message-ID: <51C5AF59.3000206@uni-bonn.de>

In this example it is pretty straightforward using the subset function:

m1<-subset(m,y>331000 & x>180000)
bbox(m1)

See this link for another way to do this using rgeos:
http://stackoverflow.com/questions/13982773/crop-for-spatialpolygonsdataframe

Cheers,
Lionel


On 22/06/2013 15:24, Mark Payne wrote:
> Hi,
>
> This should be simple, but I simply can't find an "elegant" solution.
>
> I have a SpatialPixelsDataFrame that I would like to clip (crop) to a
> smaller object. For example,
>
>> data(meuse.grid)
>> m = SpatialPixelsDataFrame(points = meuse.grid[c("x", "y")], data = meuse.grid)
>>
>> bbox(m)
>       min    max
> x 178440 181560
> y 329600 333760
> I would like to constrain m, to all y > 331000 and x >180000. What is
> the most efficient way to do this (and have the other functionality
> e.g bbox and plotting) reflect this reduced data set.
>
> Mark
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From edzer.pebesma at uni-muenster.de  Sat Jun 22 16:28:37 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sat, 22 Jun 2013 16:28:37 +0200
Subject: [R-sig-Geo] Crop / clip a SpatialPixels* object
In-Reply-To: <51C5AF59.3000206@uni-bonn.de>
References: <CAGBzUO_FX8BjoPsNW2sbFMpw0mXHZjFXPpdPpfCLf38g4aNgkQ@mail.gmail.com>
	<51C5AF59.3000206@uni-bonn.de>
Message-ID: <51C5B495.4030107@uni-muenster.de>

The way you specified the SpatialPixelsDataFrame preserves x and y as
attributes, which is good for this purpose; when e.g. built with

gridded(meuse.grid) = ~x+y

they are removed as attributes, and meuse.grid$x no longer gives the x
coordinate (we might correct this at some stage).

As an alternative to subset you can use subsetting by [, as in:

plot(m[m$x > 180000 & m$y > 332000,])

Alternatively, if you have some spatial object x denoting a clipping
region, e.g. created by

x = as(m[m$x > 180000 & m$y > 332000,], "SpatialPolygons")

you can use

m[x,]

to do the clipping. This latter statement is short for

m[!is.na(over(x,geometry(m))),]

On 06/22/2013 04:06 PM, Lionel Hertzog wrote:
> In this example it is pretty straightforward using the subset function:
> 
> m1<-subset(m,y>331000 & x>180000)
> bbox(m1)
> 
> See this link for another way to do this using rgeos:
> http://stackoverflow.com/questions/13982773/crop-for-spatialpolygonsdataframe
> 
> 
> Cheers,
> Lionel
> 
> 
> On 22/06/2013 15:24, Mark Payne wrote:
>> Hi,
>>
>> This should be simple, but I simply can't find an "elegant" solution.
>>
>> I have a SpatialPixelsDataFrame that I would like to clip (crop) to a
>> smaller object. For example,
>>
>>> data(meuse.grid)
>>> m = SpatialPixelsDataFrame(points = meuse.grid[c("x", "y")], data =
>>> meuse.grid)
>>>
>>> bbox(m)
>>       min    max
>> x 178440 181560
>> y 329600 333760
>> I would like to constrain m, to all y > 331000 and x >180000. What is
>> the most efficient way to do this (and have the other functionality
>> e.g bbox and plotting) reflect this reduced data set.
>>
>> Mark
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de


From benno.dillinger at gmail.com  Sat Jun 22 18:13:42 2013
From: benno.dillinger at gmail.com (Benno N. Dillinger)
Date: Sat, 22 Jun 2013 18:13:42 +0200
Subject: [R-sig-Geo] package 'raster' function 'clump'
Message-ID: <51C5CD36.2090401@gmail.com>

Dear all,

are there any issues related to function 'clump', eg due to the update 
to the 3.0 version of R?

I tried to apply the function on a RasterLayer containing values 1-5. As 
a result it returns a RasterLayer containing value 1, only.

Thanks in advance.

example:

r <- raster(ncol = 10, nrow = 10)
r[] <- sample(x, size = 100, replace = TRUE)#1:ncell(r)
as.raster(r)
summary(r)


k <- clump(r, directions = 4, gaps = FALSE)
k

-- 

B. N. Dillinger, Bakk.techn.

Tel.: +43 (0)680 - 2328849


From jacobvanetten at yahoo.com  Sat Jun 22 19:29:40 2013
From: jacobvanetten at yahoo.com (Jacob van Etten)
Date: Sat, 22 Jun 2013 18:29:40 +0100 (BST)
Subject: [R-sig-Geo] package 'raster' function 'clump'
In-Reply-To: <51C5CD36.2090401@gmail.com>
References: <51C5CD36.2090401@gmail.com>
Message-ID: <1371922180.223.YahooMailNeo@web133201.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130622/551bd1ab/attachment.pl>

From hengl at spatial-analyst.net  Sun Jun 23 11:51:18 2013
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Sun, 23 Jun 2013 11:51:18 +0200
Subject: [R-sig-Geo] Prediction variance (map) for predictions derived using
 RandomForest package
Message-ID: <51C6C516.3090504@spatial-analyst.net>


Dear list,

I have a question about the randomForest models. I'm trying to figure 
out a way to estimate the prediction variance (spatially) for the 
randomForest function 
(http://cran.r-project.org/web/packages/randomForest/).

If I run a GLM I can also derive the prediction variance using:

 > demo(meuse, echo=FALSE)
 > meuse.ov <- over(meuse, meuse.grid)
 > meuse.ov <- cbind(meuse.ov, meuse at data)
 > omm0 <- glm(log1p(om)~dist+ffreq, meuse.ov, family=gaussian())
 > om.glm <- predict.glm(omm0, meuse.grid, se.fit=TRUE)
 > str(om.glm)
List of 3
  $ fit           : Named num [1:3103] 2.34 2.34 2.32 2.29 2.34 ...
   ..- attr(*, "names")= chr [1:3103] "1" "2" "3" "4" ...
  $ se.fit        : Named num [1:3103] 0.0491 0.0491 0.0481 0.046 0.0491 ...
   ..- attr(*, "names")= chr [1:3103] "1" "2" "3" "4" ...
  $ residual.scale: num 0.357

when I fit a randomForest model, I do not get any estimate of the model 
uncertainty (for each pixel) but just the predictions:

 > meuse.ov <- meuse.ov[-omm0$na.action,]
 > x <- randomForest(log1p(om)~dist+ffreq, meuse.ov)
 > om.rf <- predict(x, meuse.grid)
 > str(om.rf)
  Named num [1:3103] 2.49 2.49 2.51 2.44 2.49 ...
  - attr(*, "names")= chr [1:3103] "1" "2" "3" "4" ...

Does anyone has an idea how to map the prediction variance (i.e. 
estimated or propagated error) for the randomForest models spatially?

I've tried deriving a propagated error for the randomForest models 
(every fit gives another model due to random component):

 > l.rfk <- data.frame(om_1 = rep(NA, nrow(meuse.grid)))
 > for(i in 1:50){
+   suppressWarnings(suppressMessages(x <- 
randomForest(log1p(om)~dist+ffreq, meuse.ov)))
+   l.rfk[,paste("om",i,sep="_")] <- predict(x, meuse.grid)
+ } ## takes ca 1 minute
 > meuse.grid$om.rfkvar <- om.rfk at predicted$var1.var + apply(l.rfk, 1, var)

but the prediction variance I get is rather small (much smaller than 
e.g. the GLM variance). Here is the complete code with some plots:

R code:
https://code.google.com/p/gsif/source/browse/trunk/meuse/RK_vs_RandomForestK.R

Predictions UK vs randomForest-kriging:
https://gsif.googlecode.com/svn/trunk/meuse/Fig_meuse_RK_vs_RFK.png

thanx,

T. (Tom) Hengl
Url: http://www.wageningenur.nl/en/Persons/dr.-T-Tom-Hengl.htm
Network: http://profiles.google.com/tom.hengl
Publications: http://scholar.google.com/citations?user=2oYU7S8AAAAJ


From engin_bkr at hotmail.com  Sun Jun 23 12:35:31 2013
From: engin_bkr at hotmail.com (engin _b)
Date: Sun, 23 Jun 2013 13:35:31 +0300
Subject: [R-sig-Geo] a problem about spatial weights
Message-ID: <DUB120-W6E5A9A3D88DC5E00F852580890@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130623/a91bd510/attachment.pl>

From forrest at ufl.edu  Sun Jun 23 15:08:35 2013
From: forrest at ufl.edu (Forrest Stevens)
Date: Sun, 23 Jun 2013 09:08:35 -0400
Subject: [R-sig-Geo] Prediction variance (map) for predictions derived
 using RandomForest package
In-Reply-To: <51C6C516.3090504@spatial-analyst.net>
References: <51C6C516.3090504@spatial-analyst.net>
Message-ID: <CAEBQMM=p9zNezgYMddyEhQHQtkPybfCRyEL-0DVcFM+j-zPBDw@mail.gmail.com>

Hi Tom, I've done something similar in the past to visualize the
distribution of the predictions attained for each observation across
the many trees within a random forest while looking at various aspects
of those ranges and correlating that with cross-validated prediction
errors.  It's relatively easy to generate and keep the predictions for
every tree for each observation (pixel in your case) using the
predict.all=TRUE argument:

predictions <- predict(random_forest, newdata=x_data_new, predict.all=TRUE)

Then to extract all of the individual trees' predictions for the first
observation:

predictions$individual[1]

You can do this to get the mean and SD for each observation (note the
mean should match the value in predictions$aggregate:

y_data$rf_mean <- apply(predictions$individual, MARGIN=1, mean)
y_data$rf_sd <- apply(predictions$individual, MARGIN=1, sd)
y_data$rf_cv <- apply(predictions$individual, MARGIN=1, sd)


In practice I've found during testing that the distribution of values
(assuming the continuous regression case since you're looking at SD in
the first place) is highly skewed.  The range, SD, CV and other
measures of distribution of the individual trees does not correlate
well at all with prediction errors in my work. I kind of makes
intuitive sense since the power of the random forest algorithm relies
in the ensemble nature of the technique, and the randomness injected
via variable sampling at each node and those measures of variation in
the predictions I've looked at quickly become irrelevant as you scale
up the number of trees in the forest.  So your mileage may vary but
I'd be interested to know what you find.

You may also want to look at the excellent quantregForest package as
it produces a randomForest object but also produces information on the
quantiles and quantile range for each observation's prediction for
you, including some nice plots that I've found useful.

Sincerely,
Forrest

On Sun, Jun 23, 2013 at 5:51 AM, Tomislav Hengl
<hengl at spatial-analyst.net> wrote:
>
> Dear list,
>
> I have a question about the randomForest models. I'm trying to figure out a
> way to estimate the prediction variance (spatially) for the randomForest
> function (http://cran.r-project.org/web/packages/randomForest/).
>
> If I run a GLM I can also derive the prediction variance using:
>
>> demo(meuse, echo=FALSE)
>> meuse.ov <- over(meuse, meuse.grid)
>> meuse.ov <- cbind(meuse.ov, meuse at data)
>> omm0 <- glm(log1p(om)~dist+ffreq, meuse.ov, family=gaussian())
>> om.glm <- predict.glm(omm0, meuse.grid, se.fit=TRUE)
>> str(om.glm)
> List of 3
>  $ fit           : Named num [1:3103] 2.34 2.34 2.32 2.29 2.34 ...
>   ..- attr(*, "names")= chr [1:3103] "1" "2" "3" "4" ...
>  $ se.fit        : Named num [1:3103] 0.0491 0.0491 0.0481 0.046 0.0491 ...
>   ..- attr(*, "names")= chr [1:3103] "1" "2" "3" "4" ...
>  $ residual.scale: num 0.357
>
> when I fit a randomForest model, I do not get any estimate of the model
> uncertainty (for each pixel) but just the predictions:
>
>> meuse.ov <- meuse.ov[-omm0$na.action,]
>> x <- randomForest(log1p(om)~dist+ffreq, meuse.ov)
>> om.rf <- predict(x, meuse.grid)
>> str(om.rf)
>  Named num [1:3103] 2.49 2.49 2.51 2.44 2.49 ...
>  - attr(*, "names")= chr [1:3103] "1" "2" "3" "4" ...
>
> Does anyone has an idea how to map the prediction variance (i.e. estimated
> or propagated error) for the randomForest models spatially?
>
> I've tried deriving a propagated error for the randomForest models (every
> fit gives another model due to random component):
>
>> l.rfk <- data.frame(om_1 = rep(NA, nrow(meuse.grid)))
>> for(i in 1:50){
> +   suppressWarnings(suppressMessages(x <-
> randomForest(log1p(om)~dist+ffreq, meuse.ov)))
> +   l.rfk[,paste("om",i,sep="_")] <- predict(x, meuse.grid)
> + } ## takes ca 1 minute
>> meuse.grid$om.rfkvar <- om.rfk at predicted$var1.var + apply(l.rfk, 1, var)
>
> but the prediction variance I get is rather small (much smaller than e.g.
> the GLM variance). Here is the complete code with some plots:
>
> R code:
> https://code.google.com/p/gsif/source/browse/trunk/meuse/RK_vs_RandomForestK.R
>
> Predictions UK vs randomForest-kriging:
> https://gsif.googlecode.com/svn/trunk/meuse/Fig_meuse_RK_vs_RFK.png
>
> thanx,
>
> T. (Tom) Hengl
> Url: http://www.wageningenur.nl/en/Persons/dr.-T-Tom-Hengl.htm
> Network: http://profiles.google.com/tom.hengl
> Publications: http://scholar.google.com/citations?user=2oYU7S8AAAAJ
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Forrest R. Stevens
Ph.D. Candidate, QSE3 IGERT Fellow
Department of Geography
Land Use and Environmental Change Institute
University of Florida
www.clas.ufl.edu/users/forrest


From forrest at ufl.edu  Sun Jun 23 15:15:19 2013
From: forrest at ufl.edu (Forrest Stevens)
Date: Sun, 23 Jun 2013 09:15:19 -0400
Subject: [R-sig-Geo] Prediction variance (map) for predictions derived
 using RandomForest package
In-Reply-To: <CAEBQMM=p9zNezgYMddyEhQHQtkPybfCRyEL-0DVcFM+j-zPBDw@mail.gmail.com>
References: <51C6C516.3090504@spatial-analyst.net>
	<CAEBQMM=p9zNezgYMddyEhQHQtkPybfCRyEL-0DVcFM+j-zPBDw@mail.gmail.com>
Message-ID: <CAEBQMMkUhB2H0Po9DB_1aAYRARbYa70Mm+_Q+zsctG=ouEfy8g@mail.gmail.com>

> You can do this to get the mean and SD for each observation (note the
> mean should match the value in predictions$aggregate:
>
> y_data$rf_mean <- apply(predictions$individual, MARGIN=1, mean)
> y_data$rf_sd <- apply(predictions$individual, MARGIN=1, sd)
> y_data$rf_cv <- apply(predictions$individual, MARGIN=1, sd)
>

Oops, sorry, that third calculation for the CV was a mis-paste,
obviously to calculate it you could do something like the following:

y_data$rf_cv <- (y_data$rf_sd / y_data$rf_mean) * 100


Sincerely,
Forrest


>
> On Sun, Jun 23, 2013 at 5:51 AM, Tomislav Hengl
> <hengl at spatial-analyst.net> wrote:
>>
>> Dear list,
>>
>> I have a question about the randomForest models. I'm trying to figure out a
>> way to estimate the prediction variance (spatially) for the randomForest
>> function (http://cran.r-project.org/web/packages/randomForest/).
>>
>> If I run a GLM I can also derive the prediction variance using:
>>
>>> demo(meuse, echo=FALSE)
>>> meuse.ov <- over(meuse, meuse.grid)
>>> meuse.ov <- cbind(meuse.ov, meuse at data)
>>> omm0 <- glm(log1p(om)~dist+ffreq, meuse.ov, family=gaussian())
>>> om.glm <- predict.glm(omm0, meuse.grid, se.fit=TRUE)
>>> str(om.glm)
>> List of 3
>>  $ fit           : Named num [1:3103] 2.34 2.34 2.32 2.29 2.34 ...
>>   ..- attr(*, "names")= chr [1:3103] "1" "2" "3" "4" ...
>>  $ se.fit        : Named num [1:3103] 0.0491 0.0491 0.0481 0.046 0.0491 ...
>>   ..- attr(*, "names")= chr [1:3103] "1" "2" "3" "4" ...
>>  $ residual.scale: num 0.357
>>
>> when I fit a randomForest model, I do not get any estimate of the model
>> uncertainty (for each pixel) but just the predictions:
>>
>>> meuse.ov <- meuse.ov[-omm0$na.action,]
>>> x <- randomForest(log1p(om)~dist+ffreq, meuse.ov)
>>> om.rf <- predict(x, meuse.grid)
>>> str(om.rf)
>>  Named num [1:3103] 2.49 2.49 2.51 2.44 2.49 ...
>>  - attr(*, "names")= chr [1:3103] "1" "2" "3" "4" ...
>>
>> Does anyone has an idea how to map the prediction variance (i.e. estimated
>> or propagated error) for the randomForest models spatially?
>>
>> I've tried deriving a propagated error for the randomForest models (every
>> fit gives another model due to random component):
>>
>>> l.rfk <- data.frame(om_1 = rep(NA, nrow(meuse.grid)))
>>> for(i in 1:50){
>> +   suppressWarnings(suppressMessages(x <-
>> randomForest(log1p(om)~dist+ffreq, meuse.ov)))
>> +   l.rfk[,paste("om",i,sep="_")] <- predict(x, meuse.grid)
>> + } ## takes ca 1 minute
>>> meuse.grid$om.rfkvar <- om.rfk at predicted$var1.var + apply(l.rfk, 1, var)
>>
>> but the prediction variance I get is rather small (much smaller than e.g.
>> the GLM variance). Here is the complete code with some plots:
>>
>> R code:
>> https://code.google.com/p/gsif/source/browse/trunk/meuse/RK_vs_RandomForestK.R
>>
>> Predictions UK vs randomForest-kriging:
>> https://gsif.googlecode.com/svn/trunk/meuse/Fig_meuse_RK_vs_RFK.png
>>
>> thanx,
>>
>> T. (Tom) Hengl
>> Url: http://www.wageningenur.nl/en/Persons/dr.-T-Tom-Hengl.htm
>> Network: http://profiles.google.com/tom.hengl
>> Publications: http://scholar.google.com/citations?user=2oYU7S8AAAAJ
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

--
Forrest R. Stevens
Ph.D. Candidate, QSE3 IGERT Fellow
Department of Geography
Land Use and Environmental Change Institute
University of Florida
www.clas.ufl.edu/users/forrest


From sjmyers3142 at gmail.com  Sun Jun 23 15:27:30 2013
From: sjmyers3142 at gmail.com (Seth Myers)
Date: Sun, 23 Jun 2013 09:27:30 -0400
Subject: [R-sig-Geo] how do I properly reply if in digest mode? and re:
 Prediction variance (map) for predictions derived using RandomForest
 package
Message-ID: <CAO-WCxeyMeK-63arCnyQjru1tXc=mJAy9Bn1ydGDdh1YtqJOhA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130623/372b6838/attachment.pl>

From Roger.Bivand at nhh.no  Sun Jun 23 15:40:56 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 23 Jun 2013 15:40:56 +0200
Subject: [R-sig-Geo] how do I properly reply if in digest mode? and re:
 Prediction variance (map) for predictions derived using RandomForest
 package
In-Reply-To: <CAO-WCxeyMeK-63arCnyQjru1tXc=mJAy9Bn1ydGDdh1YtqJOhA@mail.gmail.com>
References: <CAO-WCxeyMeK-63arCnyQjru1tXc=mJAy9Bn1ydGDdh1YtqJOhA@mail.gmail.com>
Message-ID: <alpine.LRH.2.03.1306231531100.29557@reclus.nhh.no>

On Sun, 23 Jun 2013, Seth Myers wrote:

> 1. what is the best method to reply to single message if in digest mode?  I
> just send an email to r-sig-geo at r-project.org and use the original title
> with an re: in front.  Am I missing the obvious here or is this fine?

Seth:

All helpful contributions are always welcome!

I use Gmane to reply in-thread when I'm using digest-mode, as it is 
generally beneficial for those searching the archives to have follow-ups 
in-thread (your comments would benefit others with the same question as 
Tom's):

http://dir.gmane.org/gmane.comp.lang.r.geo

It is a bit picky, because Gmane requires you to reply in the text, not at 
its head, and protests if you add little in proportion to the length of 
the posting you are following-up. I usually delete all but the essential 
parts of the posting; patience helps. Nabble is also an alternative, but 
there you have to log in to post, and nabble postings appear to be more 
open to abuse, so the filters work harder on them. Gmane posts in-thread 
from you to the list, so you simply provide your subscribed email address 
in the header of the form.

Hope this helps,

Roger

>
> 2.  It appears Tom is trying to bootstrap a random forest model to get a 
> range of predictions so as to determine the variance or uncertainty of 
> the predictions.  I have used random forest before for predictive work 
> before. I do not understand the theory behind it extremely well (such as 
> the proofs of it not overfitting), but I know the flow of operations 
> within the algorithm well enough.  The algorithm resamples the data 
> already.  There are two random components for each tree grown in the 
> forest.  First, the data points are randomly selected and then at each 
> node in the tree a subset of the possible predictor variables are 
> randomly selected (if you have it set up that way and the argument that 
> controls that is a relatively important tuning variable).  So, I believe 
> this is why you are seeing little variance in your predictions, you are 
> just creating a "shell" in a sense that pre-does what the algorithm does 
> anyway.  Plus, given that random forest really isn't a statistical 
> technique let alone a parametric one, I would be a bit uncomfortable 
> applying standard statistical reasoning to it and shoehorning it into a 
> bootstrap technique (which is admittedly rather general).  The 
> literature on random forest is rather large.  I would look there for any 
> methods that have been published that do what you would ultimately like 
> to accomplish.
>
> Seth Myers
> FSU
>
> Message: 7
> Date: Sun, 23 Jun 2013 11:51:18 +0200
> From: Tomislav Hengl <hengl at spatial-analyst.net>
> To: R-sig-Geo at r-project.org
> Cc: andy_liaw at merck.com
> Subject: [R-sig-Geo] Prediction variance (map) for predictions derived
>        using RandomForest package
> Message-ID: <51C6C516.3090504 at spatial-analyst.net>
> Content-Type: text/plain; charset=UTF-8; format=flowed
>
>
> Dear list,
>
> I have a question about the randomForest models. I'm trying to figure
> out a way to estimate the prediction variance (spatially) for the
> randomForest function
> (http://cran.r-project.org/web/packages/randomForest/).
>
> If I run a GLM I can also derive the prediction variance using:
>
> > demo(meuse, echo=FALSE)
> > meuse.ov <- over(meuse, meuse.grid)
> > meuse.ov <- cbind(meuse.ov, meuse at data)
> > omm0 <- glm(log1p(om)~dist+ffreq, meuse.ov, family=gaussian())
> > om.glm <- predict.glm(omm0, meuse.grid, se.fit=TRUE)
> > str(om.glm)
> List of 3
>  $ fit           : Named num [1:3103] 2.34 2.34 2.32 2.29 2.34 ...
>   ..- attr(*, "names")= chr [1:3103] "1" "2" "3" "4" ...
>  $ se.fit        : Named num [1:3103] 0.0491 0.0491 0.0481 0.046 0.0491 ...
>   ..- attr(*, "names")= chr [1:3103] "1" "2" "3" "4" ...
>  $ residual.scale: num 0.357
>
> when I fit a randomForest model, I do not get any estimate of the model
> uncertainty (for each pixel) but just the predictions:
>
> > meuse.ov <- meuse.ov[-omm0$na.action,]
> > x <- randomForest(log1p(om)~dist+ffreq, meuse.ov)
> > om.rf <- predict(x, meuse.grid)
> > str(om.rf)
>  Named num [1:3103] 2.49 2.49 2.51 2.44 2.49 ...
>  - attr(*, "names")= chr [1:3103] "1" "2" "3" "4" ...
>
> Does anyone has an idea how to map the prediction variance (i.e.
> estimated or propagated error) for the randomForest models spatially?
>
> I've tried deriving a propagated error for the randomForest models
> (every fit gives another model due to random component):
>
> > l.rfk <- data.frame(om_1 = rep(NA, nrow(meuse.grid)))
> > for(i in 1:50){
> +   suppressWarnings(suppressMessages(x <-
> randomForest(log1p(om)~dist+ffreq, meuse.ov)))
> +   l.rfk[,paste("om",i,sep="_")] <- predict(x, meuse.grid)
> + } ## takes ca 1 minute
> > meuse.grid$om.rfkvar <- om.rfk at predicted$var1.var + apply(l.rfk, 1, var)
>
> but the prediction variance I get is rather small (much smaller than
> e.g. the GLM variance). Here is the complete code with some plots:
>
> R code:
> https://code.google.com/p/gsif/source/browse/trunk/meuse/RK_vs_RandomForestK.R
>
> Predictions UK vs randomForest-kriging:
> https://gsif.googlecode.com/svn/trunk/meuse/Fig_meuse_RK_vs_RFK.png
>
> thanx,
>
> T. (Tom) Hengl
> Url: http://www.wageningenur.nl/en/Persons/dr.-T-Tom-Hengl.htm
> Network: http://profiles.google.com/tom.hengl
> Publications: http://scholar.google.com/citations?user=2oYU7S8AAAAJ
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From juantomas.sayago at gmail.com  Sun Jun 23 16:43:21 2013
From: juantomas.sayago at gmail.com (Juan Tomas Sayago Gomez)
Date: Sun, 23 Jun 2013 10:43:21 -0400
Subject: [R-sig-Geo] a problem about spatial weights
In-Reply-To: <DUB120-W6E5A9A3D88DC5E00F852580890@phx.gbl>
References: <DUB120-W6E5A9A3D88DC5E00F852580890@phx.gbl>
Message-ID: <CAEOXpNBCXQS2efhsAHojijFEBMJmsiQeaBgT=Ce0=_0w2=sskg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130623/a24679c7/attachment.pl>

From alexandresantosbr at yahoo.com.br  Sun Jun 23 17:36:08 2013
From: alexandresantosbr at yahoo.com.br (Alexandre Santos)
Date: Sun, 23 Jun 2013 08:36:08 -0700 (PDT)
Subject: [R-sig-Geo] Problem with NDVI difference with subset image
Message-ID: <1372001768.36866.YahooMailNeo@web120101.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130623/1de15b43/attachment.pl>

From sarah.goslee at gmail.com  Sun Jun 23 18:59:56 2013
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Sun, 23 Jun 2013 12:59:56 -0400
Subject: [R-sig-Geo] Problem with NDVI difference with subset image
In-Reply-To: <1372001768.36866.YahooMailNeo@web120101.mail.ne1.yahoo.com>
References: <1372001768.36866.YahooMailNeo@web120101.mail.ne1.yahoo.com>
Message-ID: <CAM_vjuna43fAG+UeE2mep3XrK1nYbM4xstJAR1f8VO983k=1MA@mail.gmail.com>

Hi,

What happens?

Do you get an error? Where?

What is your sessionInfo()?

As it says in the lssub() help, this function was written for a
particular purpose, is only known to work on linux, and may not be
widely applicable.

It's a "use at your own risk" kind of function, and you may well be
better off using one of the many other methods available for
subsetting raster data, which would save you the whole "export as
GeoTIFF, subset, reimport" sequence.

Sarah

On Sun, Jun 23, 2013 at 11:36 AM, Alexandre Santos
<alexandresantosbr at yahoo.com.br> wrote:
> Dear Members,
>
>
> I'm having trouble calculating NDVI difference, first the images Geotiff can not view using Ubuntu 4.12 64-bit and therefore can not get to the NDVI, follow an example:
>
> require(raster)
> require(sp)
> require(rgdal)
> require(landsat)
> #
> #Create raster
> r <- raster(nc=1000, nr=1000)
> set.seed(20130622)
> stackIm1 <- stack(lapply(1, function(x) setValues(r, round(runif(ncell(r))* 255))))## Simulation red band
> stackIm2 <- stack(lapply(1, function(x) setValues(r, round(runif(ncell(r))* 255))))## Simulation nir
>
> # define projection system
> r.geo <- CRS("+proj=utm +zone=23 +south +datum=WGS84 +units=m +no_defs")    # geographical datum WGS84
> proj4string(stackIm1) <- r.geo
> proj4string(stackIm2) <- r.geo
> #
>
> #Create geotiff
> writeRaster(stackIm1, filename="stackIm1.tif", format="GTiff",overwrite=TRUE)
> writeRaster(stackIm2, filename="stackIm2.tif", format="GTiff",overwrite=TRUE)
> #
>
> #Subset a geotiff image 50 x 50 pixels
> stackIm1.sample<-lssub("stackIm1.tif", "stackIm1.sample.tif", centerx = 0, centery = 0, widthx = 50, widthy = 50)
> stackIm2.sample<-lssub("stackIm1.tif", "sstackIm2.sample.tif", centerx = 0, centery = 0, widthx = 50, widthy = 50)
> #
>
> #Calculate NDVI difference
>
> multi.espc<-stack(c("stackIm1.sample.tif","stackIm2.sample.tif"))
>
> band3<-raster(multi.espc,1)
> band4<-raster(multi.espc,2)
>
> ndvi<-(band4-band3)/(band4+band3)
>
> #
>
>
>

-- 
Sarah Goslee
http://www.functionaldiversity.org


From alexandresantosbr at yahoo.com.br  Sun Jun 23 22:08:17 2013
From: alexandresantosbr at yahoo.com.br (ASANTOS)
Date: Sun, 23 Jun 2013 16:08:17 -0400
Subject: [R-sig-Geo] Problem with NDVI difference with subset image
In-Reply-To: <CAM_vjuna43fAG+UeE2mep3XrK1nYbM4xstJAR1f8VO983k=1MA@mail.gmail.com>
References: <1372001768.36866.YahooMailNeo@web120101.mail.ne1.yahoo.com>
	<CAM_vjuna43fAG+UeE2mep3XrK1nYbM4xstJAR1f8VO983k=1MA@mail.gmail.com>
Message-ID: <51C755B1.8080603@yahoo.com.br>

Hi Dra. Goslee,

             I work in OS linux and I like very much your lssub 
function, despites your notice. I think that the problems are in linux 
system, because:

 > landc<- stack(c("stackIm1.sample.tif","tackIm2.sample.tif"))
Error in .local(.Object, ...) :
   `/home/asantos/Documentos/Sensoriamento remoto percevejo 
bronzeador/Contornos/tackIm2.sample.tif' does not exist in the file system,
and is not recognised as a supported dataset name.

Error in .rasterObjectFromFile(x, band = band, objecttype = 
"RasterLayer",  :
   Cannot create a RasterLayer object from this file. (file does not exist)


              When I try to look the geotiff created 
(stackIm1.sample.tif) there are something wrong, because the pictures 
doesn't open (complete example below).

Thanks for your attention,

Alexandre

require(raster)
require(sp)
require(rgdal)
require(landsat)
#
#Create raster
r <- raster(nc=1000, nr=1000)
set.seed(20130622)
stackIm1 <- stack(lapply(1, function(x) setValues(r, round(runif(ncell(r))* 255))))## Simulation red band
stackIm2 <- stack(lapply(1, function(x) setValues(r, round(runif(ncell(r))* 255))))## Simulation nir

# define projection system
r.geo <- CRS("+proj=utm +zone=23 +south +datum=WGS84 +units=m +no_defs")    # geographical datum WGS84
proj4string(stackIm1) <- r.geo
proj4string(stackIm2) <- r.geo
#

#Create geotiff
writeRaster(stackIm1, filename="stackIm1.tif", format="GTiff",overwrite=TRUE)
writeRaster(stackIm2, filename="stackIm2.tif", format="GTiff",overwrite=TRUE)
#

#Subset a geotiff image 50 x 50 pixels
stackIm1.sample<-lssub("stackIm1.tif", "stackIm1.sample.tif", centerx = 0, centery = 0, widthx = 50, widthy = 50)
stackIm2.sample<-lssub("stackIm1.tif", "sstackIm2.sample.tif", centerx = 0, centery = 0, widthx = 50, widthy = 50)
#
landc<- stack(c("stackIm1.sample.tif","tackIm2.sample.tif"))





Em 23/06/2013 12:59, Sarah Goslee escreveu:
> Hi,
>
> What happens?
>
> Do you get an error? Where?
>
> What is your sessionInfo()?
>
> As it says in the lssub() help, this function was written for a
> particular purpose, is only known to work on linux, and may not be
> widely applicable.
>
> It's a "use at your own risk" kind of function, and you may well be
> better off using one of the many other methods available for
> subsetting raster data, which would save you the whole "export as
> GeoTIFF, subset, reimport" sequence.
>
> Sarah
>
> On Sun, Jun 23, 2013 at 11:36 AM, Alexandre Santos
> <alexandresantosbr at yahoo.com.br> wrote:
>> Dear Members,
>>
>>
>> I'm having trouble calculating NDVI difference, first the images Geotiff can not view using Ubuntu 4.12 64-bit and therefore can not get to the NDVI, follow an example:
>>
>> require(raster)
>> require(sp)
>> require(rgdal)
>> require(landsat)
>> #
>> #Create raster
>> r <- raster(nc=1000, nr=1000)
>> set.seed(20130622)
>> stackIm1 <- stack(lapply(1, function(x) setValues(r, round(runif(ncell(r))* 255))))## Simulation red band
>> stackIm2 <- stack(lapply(1, function(x) setValues(r, round(runif(ncell(r))* 255))))## Simulation nir
>>
>> # define projection system
>> r.geo <- CRS("+proj=utm +zone=23 +south +datum=WGS84 +units=m +no_defs")    # geographical datum WGS84
>> proj4string(stackIm1) <- r.geo
>> proj4string(stackIm2) <- r.geo
>> #
>>
>> #Create geotiff
>> writeRaster(stackIm1, filename="stackIm1.tif", format="GTiff",overwrite=TRUE)
>> writeRaster(stackIm2, filename="stackIm2.tif", format="GTiff",overwrite=TRUE)
>> #
>>
>> #Subset a geotiff image 50 x 50 pixels
>> stackIm1.sample<-lssub("stackIm1.tif", "stackIm1.sample.tif", centerx = 0, centery = 0, widthx = 50, widthy = 50)
>> stackIm2.sample<-lssub("stackIm1.tif", "sstackIm2.sample.tif", centerx = 0, centery = 0, widthx = 50, widthy = 50)
>> #
>>
>> #Calculate NDVI difference
>>
>> multi.espc<-stack(c("stackIm1.sample.tif","stackIm2.sample.tif"))
>>
>> band3<-raster(multi.espc,1)
>> band4<-raster(multi.espc,2)
>>
>> ndvi<-(band4-band3)/(band4+band3)
>>
>> #
>>
>>
>>

-- 
======================================================================
Alexandre dos Santos
Prote??o Florestal
Coordenador do curso T?cnico em Florestas
Vice Coordenador do curso de Engenharia Florestal
IFMT - Instituto Federal de Educa??o, Ci?ncia e Tecnologia de Mato Grosso
Campus C?ceres
Caixa Postal 244
Avenida dos Ramires, s/n
Bairro: Distrito Industrial
C?ceres - MT                      CEP: 78.200-000
Fone: (+55) 65 8132-8112 (TIM)   (+55) 65 9686-6970 (VIVO)

         alexandre.santos at cas.ifmt.edu.br


From edzer.pebesma at uni-muenster.de  Sun Jun 23 23:57:37 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 23 Jun 2013 23:57:37 +0200
Subject: [R-sig-Geo] spatial networks
Message-ID: <51C76F51.6010707@uni-muenster.de>

I did some simple things trying to combine sp and igraph objects to
create spatial networks, and published this at:

http://rpubs.com/edzer/spatialnetworks

I'd be happy to share the markdown document with you; it seems to me
that the rpubs don't allow you to simply download & run all the commands
in the html.

Anyway, comments & discussion welcome, as usual.
-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de


From tea3rd at gmail.com  Mon Jun 24 04:20:02 2013
From: tea3rd at gmail.com (Thomas Adams)
Date: Sun, 23 Jun 2013 22:20:02 -0400
Subject: [R-sig-Geo] spatial networks
In-Reply-To: <51C76F51.6010707@uni-muenster.de>
References: <51C76F51.6010707@uni-muenster.de>
Message-ID: <CAGxgkWixEWduu6z+V3ydXtk6kwR-=Lb8Z4wuRjP1SKsxOAKjiw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130623/724be1fe/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Mon Jun 24 11:11:19 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 24 Jun 2013 10:11:19 +0100
Subject: [R-sig-Geo] spatial networks
In-Reply-To: <810960deb0ed47088da1e3cbdcc31135@EX-1-HT0.lancs.local>
References: <51C76F51.6010707@uni-muenster.de>
	<810960deb0ed47088da1e3cbdcc31135@EX-1-HT0.lancs.local>
Message-ID: <CANVKczPUJ8+wL_8n0qgta0iOAhPLRWP-rgO6gvY9Lbyuu94eMA@mail.gmail.com>

Now combine all that with the d3Network package:

http://christophergandrud.github.io/d3Network/

- although I guess your node locations are fixed, so a whizzy draggy
graph interface isn't appropriate here.

I'm surprised it doesn't use package:igraph.


On Mon, Jun 24, 2013 at 3:20 AM, Thomas Adams <tea3rd at gmail.com> wrote:
> Edzer,
>
> That's really pretty cool stuff; I think I can find some applications for
> it!
>
> Cheers!
> Tom
>
>
> On Sun, Jun 23, 2013 at 5:57 PM, Edzer Pebesma <
> edzer.pebesma at uni-muenster.de> wrote:
>
>> I did some simple things trying to combine sp and igraph objects to
>> create spatial networks, and published this at:
>>
>> http://rpubs.com/edzer/spatialnetworks
>>
>> I'd be happy to share the markdown document with you; it seems to me
>> that the rpubs don't allow you to simply download & run all the commands
>> in the html.
>>
>> Anyway, comments & discussion welcome, as usual.
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics (ifgi), University of M?nster
>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>> 83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>         [[alternative HTML version deleted]]
>


From marcia.n.macedo at gmail.com  Mon Jun 24 15:00:28 2013
From: marcia.n.macedo at gmail.com (Marcia Macedo)
Date: Mon, 24 Jun 2013 09:00:28 -0400
Subject: [R-sig-Geo] trouble with the 'focal' function in 'raster'
Message-ID: <CAP0b_6DDEZN0P30ZsAzVzx5xRR6u88v7jMWc2_hcxsDp-bGwww@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130624/b90a491d/attachment.pl>

From sarah.goslee at gmail.com  Mon Jun 24 15:51:26 2013
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Mon, 24 Jun 2013 09:51:26 -0400
Subject: [R-sig-Geo] Problem with NDVI difference with subset image
In-Reply-To: <51C755B1.8080603@yahoo.com.br>
References: <1372001768.36866.YahooMailNeo@web120101.mail.ne1.yahoo.com>
	<CAM_vjuna43fAG+UeE2mep3XrK1nYbM4xstJAR1f8VO983k=1MA@mail.gmail.com>
	<51C755B1.8080603@yahoo.com.br>
Message-ID: <CAM_vjumD49dMsv17=Oan+kmv1dbxNLw8a2cveUKibtvkfB95pA@mail.gmail.com>

Hi,

On my system, it's a writeRASTER() options issue. I don't use raster
very often, but I played with the options enough to come up with a
working solution.



## this doesn't work in the right way - something about the format
## used by writeRaster isn't compatible with lssub()
#Create geotiff
writeRaster(stackIm1, filename="stackIm1.tif", format="GTiff",overwrite=TRUE)
## also, lssub() creates a file but does not return anything, so no
## need to assign it to an object
stackIm1.sample<-lssub("stackIm1.tif", "stackIm1.sample.tif", centerx
= 0, centery = 0, widthx = 50, widthy = 50)

## this works, confirming that it's a writeRaster issue
stackIm1a <- readGDAL("stackIm1.tif")
writeGDAL(stackIm1a, "stackIm1a.tif")
lssub("stackIm1a.tif", "stackIm1a.sample.tif", centerx = 0, centery =
0, widthx = 50, widthy = 50)

## This also works, but note the name of the output file
writeRaster(stackIm1, filename="stackIm1b.tif",
format="GTiff",overwrite=TRUE, bylayer=TRUE)
lssub("stackIm1b_1.tif", "stackIm1b.sample.tif", centerx = 0, centery
= 0, widthx = 50, widthy = 50)

Sarah

On Sun, Jun 23, 2013 at 4:08 PM, ASANTOS <alexandresantosbr at yahoo.com.br> wrote:
> Hi Dra. Goslee,
>
>             I work in OS linux and I like very much your lssub function,
> despites your notice. I think that the problems are in linux system,
> because:
>
>> landc<- stack(c("stackIm1.sample.tif","tackIm2.sample.tif"))
> Error in .local(.Object, ...) :
>   `/home/asantos/Documentos/Sensoriamento remoto percevejo
> bronzeador/Contornos/tackIm2.sample.tif' does not exist in the file system,
> and is not recognised as a supported dataset name.
>
> Error in .rasterObjectFromFile(x, band = band, objecttype = "RasterLayer",
> :
>   Cannot create a RasterLayer object from this file. (file does not exist)
>
>
>              When I try to look the geotiff created (stackIm1.sample.tif)
> there are something wrong, because the pictures doesn't open (complete
> example below).
>
> Thanks for your attention,
>
> Alexandre
>
>
> require(raster)
> require(sp)
> require(rgdal)
> require(landsat)
> #
> #Create raster
> r <- raster(nc=1000, nr=1000)
> set.seed(20130622)
> stackIm1 <- stack(lapply(1, function(x) setValues(r, round(runif(ncell(r))*
> 255))))## Simulation red band
> stackIm2 <- stack(lapply(1, function(x) setValues(r, round(runif(ncell(r))*
> 255))))## Simulation nir
>
> # define projection system
> r.geo <- CRS("+proj=utm +zone=23 +south +datum=WGS84 +units=m +no_defs")
> # geographical datum WGS84
> proj4string(stackIm1) <- r.geo
> proj4string(stackIm2) <- r.geo
> #
>
> #Create geotiff
> writeRaster(stackIm1, filename="stackIm1.tif",
> format="GTiff",overwrite=TRUE)
> writeRaster(stackIm2, filename="stackIm2.tif",
> format="GTiff",overwrite=TRUE)
> #
>
> #Subset a geotiff image 50 x 50 pixels
> stackIm1.sample<-lssub("stackIm1.tif", "stackIm1.sample.tif", centerx = 0,
> centery = 0, widthx = 50, widthy = 50)
> stackIm2.sample<-lssub("stackIm1.tif", "sstackIm2.sample.tif", centerx = 0,
> centery = 0, widthx = 50, widthy = 50)
> #
> landc<- stack(c("stackIm1.sample.tif","tackIm2.sample.tif"))
>
>
>
>
>
> Em 23/06/2013 12:59, Sarah Goslee escreveu:
>
>> Hi,
>>
>> What happens?
>>
>> Do you get an error? Where?
>>
>> What is your sessionInfo()?
>>
>> As it says in the lssub() help, this function was written for a
>> particular purpose, is only known to work on linux, and may not be
>> widely applicable.
>>
>> It's a "use at your own risk" kind of function, and you may well be
>> better off using one of the many other methods available for
>> subsetting raster data, which would save you the whole "export as
>> GeoTIFF, subset, reimport" sequence.
>>
>> Sarah
>>
>> On Sun, Jun 23, 2013 at 11:36 AM, Alexandre Santos
>> <alexandresantosbr at yahoo.com.br> wrote:
>>>
>>> Dear Members,
>>>
>>>
>>> I'm having trouble calculating NDVI difference, first the images Geotiff
>>> can not view using Ubuntu 4.12 64-bit and therefore can not get to the NDVI,
>>> follow an example:
>>>
>>> require(raster)
>>> require(sp)
>>> require(rgdal)
>>> require(landsat)
>>> #
>>> #Create raster
>>> r <- raster(nc=1000, nr=1000)
>>> set.seed(20130622)
>>> stackIm1 <- stack(lapply(1, function(x) setValues(r,
>>> round(runif(ncell(r))* 255))))## Simulation red band
>>> stackIm2 <- stack(lapply(1, function(x) setValues(r,
>>> round(runif(ncell(r))* 255))))## Simulation nir
>>>
>>> # define projection system
>>> r.geo <- CRS("+proj=utm +zone=23 +south +datum=WGS84 +units=m +no_defs")
>>> # geographical datum WGS84
>>> proj4string(stackIm1) <- r.geo
>>> proj4string(stackIm2) <- r.geo
>>> #
>>>
>>> #Create geotiff
>>> writeRaster(stackIm1, filename="stackIm1.tif",
>>> format="GTiff",overwrite=TRUE)
>>> writeRaster(stackIm2, filename="stackIm2.tif",
>>> format="GTiff",overwrite=TRUE)
>>> #
>>>
>>> #Subset a geotiff image 50 x 50 pixels
>>> stackIm1.sample<-lssub("stackIm1.tif", "stackIm1.sample.tif", centerx =
>>> 0, centery = 0, widthx = 50, widthy = 50)
>>> stackIm2.sample<-lssub("stackIm1.tif", "sstackIm2.sample.tif", centerx =
>>> 0, centery = 0, widthx = 50, widthy = 50)
>>> #
>>>
>>> #Calculate NDVI difference
>>>
>>> multi.espc<-stack(c("stackIm1.sample.tif","stackIm2.sample.tif"))
>>>
>>> band3<-raster(multi.espc,1)
>>> band4<-raster(multi.espc,2)
>>>
>>> ndvi<-(band4-band3)/(band4+band3)
>>>
>>> #
>>>

-- 
Sarah Goslee
http://www.functionaldiversity.org


From koen.hufkens at gmail.com  Mon Jun 24 16:14:13 2013
From: koen.hufkens at gmail.com (Koen Hufkens)
Date: Mon, 24 Jun 2013 16:14:13 +0200
Subject: [R-sig-Geo] trouble with the 'focal' function in 'raster'
In-Reply-To: <CAP0b_6DDEZN0P30ZsAzVzx5xRR6u88v7jMWc2_hcxsDp-bGwww@mail.gmail.com>
References: <CAP0b_6DDEZN0P30ZsAzVzx5xRR6u88v7jMWc2_hcxsDp-bGwww@mail.gmail.com>
Message-ID: <CAHDtqqmMCsrO+JcEcsJ+3vX3vWu3W_q5rvME6Fq1diwcV5XJiA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130624/4d7965a1/attachment.pl>

From hengl at spatial-analyst.net  Mon Jun 24 18:44:48 2013
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Mon, 24 Jun 2013 18:44:48 +0200
Subject: [R-sig-Geo] Prediction variance (map) for predictions derived
 using RandomForest package
In-Reply-To: <CAEBQMM=p9zNezgYMddyEhQHQtkPybfCRyEL-0DVcFM+j-zPBDw@mail.gmail.com>
References: <51C6C516.3090504@spatial-analyst.net>
	<CAEBQMM=p9zNezgYMddyEhQHQtkPybfCRyEL-0DVcFM+j-zPBDw@mail.gmail.com>
Message-ID: <51C87780.9020509@spatial-analyst.net>


Dear Forrest,

Thanks a lot for your tip. I think quantregForest is what we were 
looking for. It takes much more time to compute, but the method looks 
sound 
(http://jmlr.org/papers/volume7/meinshausen06a/meinshausen06a.pdf). I do 
simplify everything on the end and assume that I can derive upper and 
lower confidence limits for +/- 1 s.d. (0.15866, 1-0.15866) and then use 
this as the prediction variance, but this is probably as good as it 
goes. Here is the revised code:

https://code.google.com/p/gsif/source/browse/trunk/meuse/RK_vs_RandomForestK.R

Thank you all for your suggestions / opinions (very useful as usual).

cheers,

T. (Tom) Hengl
Url: http://www.wageningenur.nl/en/Persons/dr.-T-Tom-Hengl.htm
Network: http://profiles.google.com/tom.hengl
Publications: http://scholar.google.com/citations?user=2oYU7S8AAAAJ


On 23/06/2013 15:08, Forrest Stevens wrote:
> Hi Tom, I've done something similar in the past to visualize the
> distribution of the predictions attained for each observation across
> the many trees within a random forest while looking at various aspects
> of those ranges and correlating that with cross-validated prediction
> errors.  It's relatively easy to generate and keep the predictions for
> every tree for each observation (pixel in your case) using the
> predict.all=TRUE argument:
>
> predictions <- predict(random_forest, newdata=x_data_new, predict.all=TRUE)
>
> Then to extract all of the individual trees' predictions for the first
> observation:
>
> predictions$individual[1]
>
> You can do this to get the mean and SD for each observation (note the
> mean should match the value in predictions$aggregate:
>
> y_data$rf_mean <- apply(predictions$individual, MARGIN=1, mean)
> y_data$rf_sd <- apply(predictions$individual, MARGIN=1, sd)
> y_data$rf_cv <- apply(predictions$individual, MARGIN=1, sd)
>
>
> In practice I've found during testing that the distribution of values
> (assuming the continuous regression case since you're looking at SD in
> the first place) is highly skewed.  The range, SD, CV and other
> measures of distribution of the individual trees does not correlate
> well at all with prediction errors in my work. I kind of makes
> intuitive sense since the power of the random forest algorithm relies
> in the ensemble nature of the technique, and the randomness injected
> via variable sampling at each node and those measures of variation in
> the predictions I've looked at quickly become irrelevant as you scale
> up the number of trees in the forest.  So your mileage may vary but
> I'd be interested to know what you find.
>
> You may also want to look at the excellent quantregForest package as
> it produces a randomForest object but also produces information on the
> quantiles and quantile range for each observation's prediction for
> you, including some nice plots that I've found useful.
>
> Sincerely,
> Forrest
>
> On Sun, Jun 23, 2013 at 5:51 AM, Tomislav Hengl
> <hengl at spatial-analyst.net> wrote:
>>
>> Dear list,
>>
>> I have a question about the randomForest models. I'm trying to figure out a
>> way to estimate the prediction variance (spatially) for the randomForest
>> function (http://cran.r-project.org/web/packages/randomForest/).
>>
>> If I run a GLM I can also derive the prediction variance using:
>>
>>> demo(meuse, echo=FALSE)
>>> meuse.ov <- over(meuse, meuse.grid)
>>> meuse.ov <- cbind(meuse.ov, meuse at data)
>>> omm0 <- glm(log1p(om)~dist+ffreq, meuse.ov, family=gaussian())
>>> om.glm <- predict.glm(omm0, meuse.grid, se.fit=TRUE)
>>> str(om.glm)
>> List of 3
>>   $ fit           : Named num [1:3103] 2.34 2.34 2.32 2.29 2.34 ...
>>    ..- attr(*, "names")= chr [1:3103] "1" "2" "3" "4" ...
>>   $ se.fit        : Named num [1:3103] 0.0491 0.0491 0.0481 0.046 0.0491 ...
>>    ..- attr(*, "names")= chr [1:3103] "1" "2" "3" "4" ...
>>   $ residual.scale: num 0.357
>>
>> when I fit a randomForest model, I do not get any estimate of the model
>> uncertainty (for each pixel) but just the predictions:
>>
>>> meuse.ov <- meuse.ov[-omm0$na.action,]
>>> x <- randomForest(log1p(om)~dist+ffreq, meuse.ov)
>>> om.rf <- predict(x, meuse.grid)
>>> str(om.rf)
>>   Named num [1:3103] 2.49 2.49 2.51 2.44 2.49 ...
>>   - attr(*, "names")= chr [1:3103] "1" "2" "3" "4" ...
>>
>> Does anyone has an idea how to map the prediction variance (i.e. estimated
>> or propagated error) for the randomForest models spatially?
>>
>> I've tried deriving a propagated error for the randomForest models (every
>> fit gives another model due to random component):
>>
>>> l.rfk <- data.frame(om_1 = rep(NA, nrow(meuse.grid)))
>>> for(i in 1:50){
>> +   suppressWarnings(suppressMessages(x <-
>> randomForest(log1p(om)~dist+ffreq, meuse.ov)))
>> +   l.rfk[,paste("om",i,sep="_")] <- predict(x, meuse.grid)
>> + } ## takes ca 1 minute
>>> meuse.grid$om.rfkvar <- om.rfk at predicted$var1.var + apply(l.rfk, 1, var)
>>
>> but the prediction variance I get is rather small (much smaller than e.g.
>> the GLM variance). Here is the complete code with some plots:
>>
>> R code:
>> https://code.google.com/p/gsif/source/browse/trunk/meuse/RK_vs_RandomForestK.R
>>
>> Predictions UK vs randomForest-kriging:
>> https://gsif.googlecode.com/svn/trunk/meuse/Fig_meuse_RK_vs_RFK.png
>>
>> thanx,
>>
>> T. (Tom) Hengl
>> Url: http://www.wageningenur.nl/en/Persons/dr.-T-Tom-Hengl.htm
>> Network: http://profiles.google.com/tom.hengl
>> Publications: http://scholar.google.com/citations?user=2oYU7S8AAAAJ
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>


From HodgessE at uhd.edu  Mon Jun 24 22:14:17 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Mon, 24 Jun 2013 20:14:17 +0000
Subject: [R-sig-Geo] citation for gstat
Message-ID: <FF9DB805FC41CC4E95825A50F680630217A0440B@challenger.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130624/f7076604/attachment.pl>

From ppanday at clarku.edu  Mon Jun 24 22:15:48 2013
From: ppanday at clarku.edu (ppanday)
Date: Mon, 24 Jun 2013 13:15:48 -0700 (PDT)
Subject: [R-sig-Geo] questions on RasterStack/Brick
In-Reply-To: <1311979995877-6635224.post@n2.nabble.com>
References: <1285055383938-5553580.post@n2.nabble.com>
	<AANLkTi=3=VVyC26hu5vtBgekbfg_vTZ6tZSy8m7HO-HM@mail.gmail.com>
	<1311711676166-6623580.post@n2.nabble.com>
	<1311972527202-6634917.post@n2.nabble.com>
	<1311979995877-6635224.post@n2.nabble.com>
Message-ID: <1372104948481-7583903.post@n2.nabble.com>

Hi Robert

To create a map of significance of the correlation, I tried substituing the
command cor with

cor.test(x,y, method=method)$p.value

However, I get an error asying "Error in .calcTest(x[1:5], fun, na.rm,
forcefun, forceapply) : 
  cannot use this function"

Is it possible to use this function to do that so I get a significance of
each pixel correlation?

Prajjwal



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/questions-on-RasterStack-Brick-tp5553580p7583903.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From HodgessE at uhd.edu  Mon Jun 24 22:16:10 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Mon, 24 Jun 2013 20:16:10 +0000
Subject: [R-sig-Geo] citation for gstat
In-Reply-To: <FF9DB805FC41CC4E95825A50F680630217A0440B@challenger.uhd.campus>
References: <FF9DB805FC41CC4E95825A50F680630217A0440B@challenger.uhd.campus>
Message-ID: <FF9DB805FC41CC4E95825A50F680630217A0441D@challenger.uhd.campus>

Sorry:  left out the quotes.

I have it now.

Thanks,
Erin


-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Hodgess, Erin
Sent: Monday, June 24, 2013 3:14 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] citation for gstat

Hello everyone!

What is the correction citation for the gstat package, please?

Here is what I did:

> library(gstat)
> citation(gstat)
Error in match(x, table, nomatch = 0L) :
  'match' requires vector arguments
>

I would like to cite it correctly.

Thanks so much!
Sincerely,
Erin


Erin M. Hodgess, Ph.D.
Associate Professor
Department of Computer and Mathematical Sciences University of Houston - Downtown
mailto: hodgesse at uhd.edu<mailto:hodgesse at uhd.edu>


	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From bakare at ualberta.ca  Mon Jun 24 22:38:22 2013
From: bakare at ualberta.ca (Moshood Agba Bakare)
Date: Mon, 24 Jun 2013 14:38:22 -0600
Subject: [R-sig-Geo] Area of Spatial Domain
Message-ID: <CAJRR3XMb=w8mgBJ4jE1bvzDNyXhWks6uzZv6dbLZDz0QgeeZww@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130624/fe1d0d91/attachment.pl>

From israedt at gmail.com  Tue Jun 25 02:03:57 2013
From: israedt at gmail.com (ideltoro)
Date: Mon, 24 Jun 2013 17:03:57 -0700 (PDT)
Subject: [R-sig-Geo] Failure during raster IO
In-Reply-To: <CANtt_hzt3Lt_p9nsF6ro=u8L-Uf5BMkOT2Cj9ufAsMSuZV51mA@mail.gmail.com>
References: <CAPD=AxpFNas=+yxg_cUK9-+GXT6s4ED6GBaswKtah-WiRmRmhQ@mail.gmail.com>
	<CANtt_hxEcK7FPxrjDUQXTO4vFQHsKsDW6JfDmkD+jjOVs_VfrA@mail.gmail.com>
	<1359672082466-7582447.post@n2.nabble.com>
	<CANtt_hzt3Lt_p9nsF6ro=u8L-Uf5BMkOT2Cj9ufAsMSuZV51mA@mail.gmail.com>
Message-ID: <1372118637340-7583906.post@n2.nabble.com>

Hello Robert and Kathi, 
I am getting the same "Failure during raster IO" error when I use the
extract function in the raster package. 
Any ideas why this might be happening. I am also using Robert's SDM guide
and trying to build a GLM. 

train <-      rbind(pres_train, backg_train)                                           
pb_train <-   c(rep(1, nrow(pres_train)), rep(0, nrow(backg_train)))                   
envtrain <-   extract(predictors, train)                    

where "predictors" is my raster stack of BioClim variables and "train" is
the set of coordinates for the training and background points. 

Any thoughts on why thing might be happening at this stage? 

Cheers!                             



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Failure-during-raster-IO-tp7582421p7583906.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From andreas.papritz at env.ethz.ch  Tue Jun 25 10:20:41 2013
From: andreas.papritz at env.ethz.ch (=?iso-8859-1?Q?Papritz__Andreas_J=FCrg?=)
Date: Tue, 25 Jun 2013 08:20:41 +0000
Subject: [R-sig-Geo] georob: a package for robust analyses of geostatistical
	data on CRAN
Message-ID: <C2FBFDAD-CCB8-463D-B7D2-AAD2E8C64448@env.ethz.ch>

dear all,

I'm happy to announce a new package georob for robust geostatistical analysis that is now on CRAN.  georob provides functions for fitting linear models with spatially correlated errors by robust and Gaussian Restricted Maximum Likelihood and for computing robust and customary point 
and block kriging predictions, along with utility functions for cross-validation and for unbiased back-transformation of kriging predictions of log-transformed data. 

With best regards

Andreas Papritz

-------------------------------------------
ETH Zurich
Andreas Papritz
Institute of Terrestrial Ecosystems
Soil and Terrestrial Environmental Physics
CHN E 35.2
Universitaetstrasse 16
8092 Zurich, Switzerland

andreas.papritz at env.ethz.ch
http://www.step.ethz.ch/

+41 44 633 60 72 phone
+41 44 633 10 31 fax


From michela.giusti at isprambiente.it  Tue Jun 25 11:36:03 2013
From: michela.giusti at isprambiente.it (Michela Giusti)
Date: Tue, 25 Jun 2013 11:36:03 +0200
Subject: [R-sig-Geo] Is it possible to merge togheter different ENFA results?
Message-ID: <51C96483.40800@isprambiente.it>

Hello everybody ,

I have a question regarding ENFA process.

I have 3 sites far from one another along the Mediterranean Sea.
I performed 3 different ENFA (one for each site; the species is the same 
for each site).

Now I would like to merge togheter the 3 ENFA results to have the final 
result and to perform the final MADIFA on it.

Is it possible to do that? I tryed also to do a single ENFA on the 3 
sites from the beginning of my analysis , but I had problems with the 
extents of the rasters.

Thank you very much for your help.

Bye,

Michela

-- 
*****************************************************************
Dr. Michela Giusti
ISPRA
Istituto Superiore per la Protezione e la Ricerca Ambientale
Via Brancati, 60
00144 Roma
Tel. +390650074746
michela.giusti at isprambiente.it


From forrest at ufl.edu  Tue Jun 25 15:17:36 2013
From: forrest at ufl.edu (Forrest Stevens)
Date: Tue, 25 Jun 2013 09:17:36 -0400
Subject: [R-sig-Geo] spatial networks
In-Reply-To: <CAGxgkWixEWduu6z+V3ydXtk6kwR-=Lb8Z4wuRjP1SKsxOAKjiw@mail.gmail.com>
References: <51C76F51.6010707@uni-muenster.de>
	<CAGxgkWixEWduu6z+V3ydXtk6kwR-=Lb8Z4wuRjP1SKsxOAKjiw@mail.gmail.com>
Message-ID: <CAEBQMM=PrKEYQKL=ViksG+oBYGd6J4-0KtKe44EWX0Vdt6Vojw@mail.gmail.com>

Hi Edzer, this is definitely very cool.  This may make some recent
work I've been doing on spatial and social network analyses of
academic co-authorship easier (early code is here if you're
interested:  http://refnet.r-forge.r-project.org/ ).  Thanks for
providing this to the community!

Sincerely,
Forrest

On Sun, Jun 23, 2013 at 10:20 PM, Thomas Adams <tea3rd at gmail.com> wrote:
> Edzer,
>
> That's really pretty cool stuff; I think I can find some applications for
> it!
>
> Cheers!
> Tom
>
>
> On Sun, Jun 23, 2013 at 5:57 PM, Edzer Pebesma <
> edzer.pebesma at uni-muenster.de> wrote:
>
>> I did some simple things trying to combine sp and igraph objects to
>> create spatial networks, and published this at:
>>
>> http://rpubs.com/edzer/spatialnetworks
>>
>> I'd be happy to share the markdown document with you; it seems to me
>> that the rpubs don't allow you to simply download & run all the commands
>> in the html.
>>
>> Anyway, comments & discussion welcome, as usual.
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics (ifgi), University of M?nster
>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>> 83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>         [[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



--
Forrest R. Stevens
Ph.D. Candidate, QSE3 IGERT Fellow
Department of Geography
Land Use and Environmental Change Institute
University of Florida
www.clas.ufl.edu/users/forrest


From jsf2fa at mail.missouri.edu  Tue Jun 25 19:53:41 2013
From: jsf2fa at mail.missouri.edu (JacobF)
Date: Tue, 25 Jun 2013 10:53:41 -0700 (PDT)
Subject: [R-sig-Geo] NetCDF to Brick
Message-ID: <1372182821195-7583910.post@n2.nabble.com>

I'm having an issue with creating a raster brick from a NetCDF. Normally this
works fine but for a file I recently downloaded the time and X dimensions
are getting swapped so I get a brick with dimensions 72, 7300, 525600, 110 
(nrow, ncol, ncell, nlayers), when it should be 72, 110, 7920, 7300  (nrow,
ncol, ncell, nlayers). I haven't seen any documentation for setting the x, y
and z variables when creating a brick, only when outputting one as a NetCDF.



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/NetCDF-to-Brick-tp7583910.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From basille.web at ase-research.org  Tue Jun 25 20:55:26 2013
From: basille.web at ase-research.org (Mathieu Basille)
Date: Tue, 25 Jun 2013 14:55:26 -0400
Subject: [R-sig-Geo] Is it possible to merge togheter different ENFA
	results?
In-Reply-To: <51C96483.40800@isprambiente.it>
References: <51C96483.40800@isprambiente.it>
Message-ID: <51C9E79E.1060704@ase-research.org>

Dear Michela,

I'm not quite sure to understand what you really intend to do. I can see 
that you performed individual ENFAs for each of your study site. This is 
fair, although you might be interested in the OMI for that multi-niche 
comparison (see ?niche in package ade4, and reference [1]).

But now, you want to perform a MADIFA on top of this? It does not make 
sense to me... Here, I'm really not sure what you want to do.

Finally, a single analysis for the 3 sites at once might also make sense, 
and this is largely feasible with R. It will need a little bit of tweaking 
though. All you have to do is to combine the results after the extraction 
of the environmental characteristics and the vector of presence (before the 
PCA).

Hope this helps,
Mathieu Basille.


[1] Doledec, S.; Chessel, D. & Gimaret Carpentier, C. (2000) Niche 
separation in community analysis: A new method. Ecology, 81: 2914-2927 doi 
10.1890/0012-9658(2000)081[2914:NSICAA]2.0.CO;2


Le 06/25/2013 05:36 AM, Michela Giusti a ?crit :
> Hello everybody ,
>
> I have a question regarding ENFA process.
>
> I have 3 sites far from one another along the Mediterranean Sea.
> I performed 3 different ENFA (one for each site; the species is the same
> for each site).
>
> Now I would like to merge togheter the 3 ENFA results to have the final
> result and to perform the final MADIFA on it.
>
> Is it possible to do that? I tryed also to do a single ENFA on the 3 sites
> from the beginning of my analysis , but I had problems with the extents of
> the rasters.
>
> Thank you very much for your help.
>
> Bye,
>
> Michela
>

-- 

~$ whoami
Mathieu Basille, PhD

~$ locate --details
University of Florida \\
Fort Lauderdale Research and Education Center
(+1) 954-577-6314
http://ase-research.org/basille

~$ fortune
? Le tout est de tout dire, et je manque de mots
Et je manque de temps, et je manque d'audace. ?
  -- Paul ?luard


From renger at vannieuwkoop.ch  Wed Jun 26 11:16:39 2013
From: renger at vannieuwkoop.ch (Renger van Nieuwkoop)
Date: Wed, 26 Jun 2013 09:16:39 +0000
Subject: [R-sig-Geo] Problems with readOGR
Message-ID: <5E17CCD4AACE3A4C8CFF411186AE81903195E59C@ExDAG30-N1.hostallapps.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130626/8c40b46e/attachment.pl>

From mathieu.rajerison at gmail.com  Wed Jun 26 13:13:00 2013
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Wed, 26 Jun 2013 13:13:00 +0200
Subject: [R-sig-Geo] spatial networks
In-Reply-To: <CAEBQMM=PrKEYQKL=ViksG+oBYGd6J4-0KtKe44EWX0Vdt6Vojw@mail.gmail.com>
References: <51C76F51.6010707@uni-muenster.de>
	<CAGxgkWixEWduu6z+V3ydXtk6kwR-=Lb8Z4wuRjP1SKsxOAKjiw@mail.gmail.com>
	<CAEBQMM=PrKEYQKL=ViksG+oBYGd6J4-0KtKe44EWX0Vdt6Vojw@mail.gmail.com>
Message-ID: <CAGfc75kKWyEkR7p2F=eEq__3D-zFq1jitavVWNPfHf4wEkFspw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130626/b66ed949/attachment.pl>

From samanmonfared1 at gmail.com  Wed Jun 26 13:44:37 2013
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Wed, 26 Jun 2013 16:14:37 +0430
Subject: [R-sig-Geo] help for show.vgms
Message-ID: <CAOytA4ZBvTKkTAqxtB5asakSpxNkfG+_aEnd7HhOCbdE0xButg@mail.gmail.com>

Dear All,
I  try to plot some variogram models in a panel by show.vgms in gstat.
my program is:

show.vgms(min =0, max =200000, n = 50, sill =c(v.ols$psill[2],v.wls$psill[2],
v.gls$psill[2],v.rml$sigmasq,v.reml$sigmasq,v.opvme$psill[2],v.opv$psill[2],
v.opvab$psill[2],v.opvlin$psill[2]/3),range =c(v.ols$range[2],v.wls$range[2],
v.gls$range[2],v.rml$phi,v.reml$phi,v.opvme$range[2],v.opv$range[2]
,v.opvab$range[2],v.opvlin$range[2]),models ="Sph",nugget=c(v.ols$psill[1],
v.wls$psill[1],v.gls$psill[1],0,0,v.opvme$psill[1],v.opv$psill[1],
v.opvab$psill[1],v.opvlin$psill[1]/3),plot =T,as.groups =F)
I have some problem:
1-How can I replace my desired name
c("OLS","WLS","GLS","ML","REML",,.....)instead of model names?
2- How can I  create a legend with names:
c("OLS","WLS","GLS","ML","REML",,.....)?
3- How can I change lines to points and change pch?

Best.
-- 
Saman Monfared
Msc, Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167


From onos2god at yahoo.com  Wed Jun 26 13:44:16 2013
From: onos2god at yahoo.com (Israel Ikoyi)
Date: Wed, 26 Jun 2013 04:44:16 -0700 (PDT)
Subject: [R-sig-Geo] R-sig-Geo Digest, Vol 118, Issue 25
In-Reply-To: <mailman.15.1372240804.631.r-sig-geo@r-project.org>
References: <mailman.15.1372240804.631.r-sig-geo@r-project.org>
Message-ID: <1372247056.58287.YahooMailNeo@web160602.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130626/2d69b978/attachment.pl>

From mdsumner at gmail.com  Wed Jun 26 13:49:20 2013
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 26 Jun 2013 21:49:20 +1000
Subject: [R-sig-Geo] Area of Spatial Domain
In-Reply-To: <CAJRR3XMb=w8mgBJ4jE1bvzDNyXhWks6uzZv6dbLZDz0QgeeZww@mail.gmail.com>
References: <CAJRR3XMb=w8mgBJ4jE1bvzDNyXhWks6uzZv6dbLZDz0QgeeZww@mail.gmail.com>
Message-ID: <CAAcGz9_nXyMbUKhg2AMySE-BeAiD3_+Q064WdRbZXw7nXQdemQ@mail.gmail.com>

In general, no you cannot say that this would be correct. It depends
on where and how extensive the region is, so if you can tell us that I
could put together something to show how valid it would be. You should
reproject to a local equal area projection and then it's going to be
valid, but even then you'd want to do some checks, depending, again on
where and for what.

Within 100s of kilometres is probably ok, but then it depends on the
latitude you are at, *and* which zone you are using (it's easy to get
this wrong believe it or not and UTM is one of those *defaults* that
can cause problems because it is a default - there's no good technical
reason to use it if you can help it. Each zone is only 6 degrees wide,
and if you are near a transition it's better to use a local one rather
than a standard zone, which again begs the question of why it would be
used).

This also has relevance downstream if you are using a projection
incorrectly so it's worth understanding well. There are plenty of
resources on this out there.

Cheers, Mike.





It's safest to reproject to an appropriate equal area projection, and then

On Tue, Jun 25, 2013 at 6:38 AM, Moshood Agba Bakare <bakare at ualberta.ca> wrote:
> Dear All,
> Am I right to calculate the spatial region or domain by multiplying the
> range of easting and northing coordinates? That is, I intend to find the
> difference between the minimum and maximum values in meters for each of the
> UTM coordinates (easting and northing) and get the product of the range as
> area of spatial domain in square meters.
>
> Please let me know if I am right or wrong.
>
> Thank you.
> Moshood
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Michael Sumner
Hobart, Australia
e-mail: mdsumner at gmail.com


From Roger.Bivand at nhh.no  Wed Jun 26 14:05:32 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 26 Jun 2013 14:05:32 +0200
Subject: [R-sig-Geo] Problems with readOGR
In-Reply-To: <5E17CCD4AACE3A4C8CFF411186AE81903195E59C@ExDAG30-N1.hostallapps.net>
References: <5E17CCD4AACE3A4C8CFF411186AE81903195E59C@ExDAG30-N1.hostallapps.net>
Message-ID: <alpine.LRH.2.03.1306261354490.24217@reclus.nhh.no>

On Wed, 26 Jun 2013, Renger van Nieuwkoop wrote:

> Hi
>
> I tried running the following code using the shapefiles for the city of 
> Zurich
>
> require("rgdal") # requires sp, will use proj.4 if installed
> require("maptools")
>
> zh = readOGR(".",layer="Zurich")
> and got following error:
> OGR data source with driver: ESRI Shapefile
> Source: ".", layer: "Zurich"
> with 34 features and 6 fields
> Feature type: wkbPolygon with 2 dimensions
> Fehler in CRS(p4s) : lat_0 = 0 or 90 or alpha = 90
>

See:

http://osgeo-org.1560.x6.nabble.com/Re-Swiss-CORINE-Bessel-1841-Hotine-Oblique-Mercator-Azimuth-Natural-Origin-td3842640.html

Here alpha = 90,

http://trac.osgeo.org/proj/wiki/GenParms#Parameterlist

+alpha     ? Used with Oblique Mercator and possibly a few others

The resolution in the thread:

ogr2ogr shp_dir/ -s_srs epsg:21781 -t_srs epsg:3035 clcbn85p.shp

gets from an alternative encoding to LAEA, you may rather need to impose 
the CRS (delete the offending *.prj file, and impose after reading - but 
be sure to impose the right CRS). Read the whole thread on the PROJ.4 
list, and go back to Cliff Mugnier's Grids & Datums piece in 2001 too. 
This is a particularly contentious set of projection arguments, and there 
are many other Oblique Mercator threads on that list.

Hope this helps,

Roger

>
> ogrInfo gives me this:
>
> ogrInfo(".","Zurich")
>
> Source: ".", layer: "Zurich"
>
> Driver: ESRI Shapefile number of rows 34
>
> Feature type: wkbPolygon with 2 dimensions
>
> Extent: (676227 241585) - (689671 254305.7)
>
> CRS: +proj=omerc +lat_0=46.95240555555556 +lonc=7.439583333333333 +alpha=90 +k=1 +x_0=-9419820.590700001 +y_0=200000 +ellps=bessel +units=m +no_defs
>
> LDID: 87
>
> Number of fields: 6
>
>        name type length typeName
>
> 1    GMDEQNR    0      7  Integer
>
> 2         NR    0      9  Integer
>
> 3       NAME    4     45   String
>
> 4       GMDE    0      9  Integer
>
> 5 FLAECHE_HA    0      9  Integer
>
> 6   Quartier    0      4  Integer
>
>
> I can see that lat_0 is not equal to zero, but don't know how to resolve 
> this issue.
>
> Thanks in advance for help
>
> Renger
>
>
> _________________________________________
> Renger van Nieuwkoop
> Centre for Energy Policy and Economics, ETH
> Z?richbergstrasse 18 (ZUE)
> CH - 8032 Z?rich
> +41 44 632 02 63
> mailto: rengerv at etzh.ch<mailto:rengerv at etzh.ch>
> blog.modelworks.ch
>
>
> 	[[alternative HTML version deleted]]
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From a.mosnier at gmail.com  Wed Jun 26 15:49:49 2013
From: a.mosnier at gmail.com (Arnaud Mosnier)
Date: Wed, 26 Jun 2013 09:49:49 -0400
Subject: [R-sig-Geo] Area calculation error ?
Message-ID: <CANkFkEf5taFAzHJXn5DtrA52Pq0Xt0tmReA0+WqanDZXt+zCbg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130626/b5bc37ef/attachment.pl>

From a.mosnier at gmail.com  Wed Jun 26 16:27:17 2013
From: a.mosnier at gmail.com (Arnaud Mosnier)
Date: Wed, 26 Jun 2013 10:27:17 -0400
Subject: [R-sig-Geo] Area calculation error ?
In-Reply-To: <CANkFkEf5taFAzHJXn5DtrA52Pq0Xt0tmReA0+WqanDZXt+zCbg@mail.gmail.com>
References: <CANkFkEf5taFAzHJXn5DtrA52Pq0Xt0tmReA0+WqanDZXt+zCbg@mail.gmail.com>
Message-ID: <CANkFkEefCNUaj4Q0wj3Y6mS7QYP+Gu77uuK7O5+hUFst+49Asw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130626/602ad3a2/attachment.pl>

From Mauricio.Parra at fao.org  Thu Jun 27 05:17:26 2013
From: Mauricio.Parra at fao.org (Parra, Mauricio (AGPM))
Date: Thu, 27 Jun 2013 05:17:26 +0200
Subject: [R-sig-Geo] distance units in "zerodist" function (sp)
Message-ID: <7FAA73D70AEE6B4BA5BE48F8BD97BC9A05F5B59398@HQEXDB02.hq.un.fao.org>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130627/17887731/attachment.html>

From edzer.pebesma at uni-muenster.de  Thu Jun 27 07:35:10 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 27 Jun 2013 07:35:10 +0200
Subject: [R-sig-Geo] distance units in "zerodist" function (sp)
In-Reply-To: <7FAA73D70AEE6B4BA5BE48F8BD97BC9A05F5B59398@HQEXDB02.hq.un.fao.org>
References: <7FAA73D70AEE6B4BA5BE48F8BD97BC9A05F5B59398@HQEXDB02.hq.un.fao.org>
Message-ID: <51CBCF0E.3000108@uni-muenster.de>

Good point, thanks!

zerodist computes Euclidian distances, meaning you should use have
projected coordinates to do something useful at the poles.

I'll put it on the TODO list to compute great circle distances when data
are in long lat, hopefully for the next sp, which might come out pretty
soon.

Best regards,

On 06/27/2013 05:17 AM, Parra, Mauricio (AGPM) wrote:
> Hi everyone,
> I would like to know how the distance for "zero" parameter in 
> zerodist/remove.duplicates function (sp package) should be entered when 
> coordinates for SpatialPoints are in lat/long. Function documentation has 
> no mention about you have to use either map units (decimal degrees for lat/long) 
> or in all cases meters.
> Thanks in advance,
> Sincerely,
> Mauricio
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de


From mauriziomarchi85 at gmail.com  Thu Jun 27 08:34:51 2013
From: mauriziomarchi85 at gmail.com (Maurizio Marchi)
Date: Thu, 27 Jun 2013 08:34:51 +0200
Subject: [R-sig-Geo] Variance of prediction in Kriging with raster package
Message-ID: <CANJhsN1VM9dRQZHptHDF6F9W9wn01Lt9=xvq1EVn9ueqXu5qTQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130627/6a8d58a0/attachment.pl>

From mauriziomarchi85 at gmail.com  Thu Jun 27 08:34:57 2013
From: mauriziomarchi85 at gmail.com (Maurizio Marchi)
Date: Thu, 27 Jun 2013 08:34:57 +0200
Subject: [R-sig-Geo] Variance of prediction in Kriging
Message-ID: <CANJhsN03egawdenX8nL9UP+M=7PcE6mYgm89AmO48mhg5eszbg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130627/4b8ae691/attachment.pl>

From koen.hufkens at gmail.com  Thu Jun 27 10:21:45 2013
From: koen.hufkens at gmail.com (Koen Hufkens)
Date: Thu, 27 Jun 2013 10:21:45 +0200
Subject: [R-sig-Geo] reclassify() on large files
Message-ID: <CAHDtqqmmA=eacEXxKsqYV0vsH-Vg=RDTV0CsN6ArcE6UBpE2Cg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130627/c99f6d2e/attachment.pl>

From mdsumner at gmail.com  Thu Jun 27 10:50:47 2013
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 27 Jun 2013 18:50:47 +1000
Subject: [R-sig-Geo] NetCDF to Brick
In-Reply-To: <1372182821195-7583910.post@n2.nabble.com>
References: <1372182821195-7583910.post@n2.nabble.com>
Message-ID: <CAAcGz98VKdYpd-M6AGhWpXYNH2Z4GeOONqEUTPC_LctDb_2QBA@mail.gmail.com>

this is hard to generalize for something like raster (though no doubt
the authors will get to it eventually), I would suggest just using
ncdf4, RNetCDF, or ncdf packages to open, read and manipulate this
more directly in R. It's not difficult and you could report back your
pathway to raster objects to inspire others.

(I prefer RNetCDF only because I'm more familiar with it, but since
raster uses ncdf or preferentially ncdf4 it's probably best to start
there).





On Wed, Jun 26, 2013 at 3:53 AM, JacobF <jsf2fa at mail.missouri.edu> wrote:
> I'm having an issue with creating a raster brick from a NetCDF. Normally this
> works fine but for a file I recently downloaded the time and X dimensions
> are getting swapped so I get a brick with dimensions 72, 7300, 525600, 110
> (nrow, ncol, ncell, nlayers), when it should be 72, 110, 7920, 7300  (nrow,
> ncol, ncell, nlayers). I haven't seen any documentation for setting the x, y
> and z variables when creating a brick, only when outputting one as a NetCDF.
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/NetCDF-to-Brick-tp7583910.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Michael Sumner
Hobart, Australia
e-mail: mdsumner at gmail.com


From nicolas.bories at orange.fr  Thu Jun 27 10:56:17 2013
From: nicolas.bories at orange.fr (Nicolas Bories)
Date: Thu, 27 Jun 2013 10:56:17 +0200
Subject: [R-sig-Geo] How to compute an average year on time series ?
Message-ID: <51CBFE31.2070004@orange.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130627/a094ef94/attachment.pl>

From edzer.pebesma at uni-muenster.de  Thu Jun 27 12:34:10 2013
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 27 Jun 2013 12:34:10 +0200
Subject: [R-sig-Geo] How to compute an average year on time series ?
In-Reply-To: <51CBFE31.2070004@orange.fr>
References: <51CBFE31.2070004@orange.fr>
Message-ID: <51CC1522.5030302@uni-muenster.de>

Given your data are in obj, did you try

mean.yrs = aggregate(obj, "year", mean)

?

On 06/27/2013 10:56 AM, Nicolas Bories wrote:
> Dear all,
> 
> I'm working on EVI-MODIS time series with the R package spacetime.
> I have 10 years of data. I want to compute an average year for each pixel.
> How can I do this ?
> The goal is to compare for each pixel and for specific years the 
> EVI-MODIS variations and average year variations.
> I saw the method aggregate(x, by, FUN = mean, ..., simplify = TRUE) but 
> I didn't manage to get an average year.
> 
> Thanks in advance for any suggestions !
> 
> Nicolas.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de


From carstennh at aol.com  Thu Jun 27 13:40:19 2013
From: carstennh at aol.com (Carsten Neumann)
Date: Thu, 27 Jun 2013 13:40:19 +0200
Subject: [R-sig-Geo] nearest neighbor 3d point pattern
Message-ID: <51CC24A3.3000802@aol.com>

Dear list members,

after searching R mailing lists, I wonder if there is a R function that
can find the nearest neighbor/or just euclidean distance of points in
one 3D coordinate system to points in another 3D coordinate system. The
function nncross {spatstat} can only deal with 2D point pattern. Any
idea or experiences with such procedures?

######################Test Data############################
point1<-array(c(seq(0,1,0.1),seq(0,1,0.1),seq(0,1,0.1)),dim=c(11,11,11))
point2<-array(c(0.8,0.3,0.5),dim=c(1,1,1))
#########################################################
question: where is point2 in point1?


Thanks in advance

Carsten

-- 

Carsten Neumann
Telegrafenberg, A 17 01.13
14473 Potsdam
-------------------------------------------------------
Helmholtz Centre Potsdam
GFZ German Research Centre for Geosciences
Department 1 - Section 1.4 - Remote Sensing
-------------------------------------------------------
Tel.: +49 (0) 331 288 1766
e-mail: carstenn at gfz-potsdam.de


From michela.giusti at isprambiente.it  Thu Jun 27 13:56:03 2013
From: michela.giusti at isprambiente.it (Michela Giusti)
Date: Thu, 27 Jun 2013 13:56:03 +0200
Subject: [R-sig-Geo] ENFA scatter plot problem & habitat suitability map
	question
In-Reply-To: <51C1662F.6020605@isprambiente.it>
References: <51C1662F.6020605@isprambiente.it>
Message-ID: <51CC2853.5000000@isprambiente.it>


Hello,

I have a problem with my ENFA scatter plot. Data are from three 
different sites far from one another along the Mediterranean Sea.
You can find it in the atteched file.
The first scatter is made with the line command :

scatter(enfa_TOT,pts = FALSE, nc = TRUE, percent = 100)


After many tests I realized that the habitat used is not visible because 
it coincides with the x-axis. Do you have an idea about that?

I did the same scatter with the line command:

scatter(enfa_TOT,pts = T, nc = TRUE, percent = 100)....the result is 
below... Any idea about it?




Another question is about the habitat prediction map that I would like 
to do after the ENFA analysis. What method do you saggest to use to do that?


Thank you very much for your help.

Michela





-- 
*****************************************************************
Dr. Michela Giusti
ISPRA
Istituto Superiore per la Protezione e la Ricerca Ambientale
Via Brancati, 60
00144 Roma
Tel. +390650074746
michela.giusti at isprambiente.it
*****************************************************************



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130627/8e81c5e3/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 14270 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130627/8e81c5e3/attachment.jpe>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 17100 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130627/8e81c5e3/attachment-0001.jpe>

From onos2god at yahoo.com  Thu Jun 27 14:49:49 2013
From: onos2god at yahoo.com (ISRAEL IKOYI)
Date: Thu, 27 Jun 2013 14:49:49 +0200
Subject: [R-sig-Geo] Boxcox transformation of explanatory variables
Message-ID: <pptn8nii96nvd6ukrkni7a25.1372337257727@email.android.com>

Can someone help me with commands on how to do boxcox transformations on explanatory variables?

r-sig-geo-request at r-project.org wrote:

>Send R-sig-Geo mailing list submissions to
>	r-sig-geo at r-project.org
>
>To subscribe or unsubscribe via the World Wide Web, visit
>	https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>or, via email, send a message with subject or body 'help' to
>	r-sig-geo-request at r-project.org
>
>You can reach the person managing the list at
>	r-sig-geo-owner at r-project.org
>
>When replying, please edit your Subject line so it is more specific
>than "Re: Contents of R-sig-Geo digest..."
>
>
>Today's Topics:
>
>   1. Re: spatial networks (Mathieu Rajerison)
>   2. help for show.vgms (Saman Monfared)
>   3. Re: R-sig-Geo Digest, Vol 118, Issue 25 (Israel Ikoyi)
>   4. Re: Area of Spatial Domain (Michael Sumner)
>   5. Re: Problems with readOGR (Roger Bivand)
>   6. Area calculation error ? (Arnaud Mosnier)
>   7. Re: Area calculation error ? (Arnaud Mosnier)
>   8. distance units in "zerodist" function (sp)
>      (Parra, Mauricio (AGPM))
>   9. Re: distance units in "zerodist" function (sp) (Edzer Pebesma)
>  10. Variance of prediction in Kriging with raster package
>      (Maurizio Marchi)
>  11. Variance of prediction in Kriging (Maurizio Marchi)
>  12. reclassify() on large files (Koen Hufkens)
>  13. Re: NetCDF to Brick (Michael Sumner)
>  14. How to compute an average year on time series ? (Nicolas Bories)
>
>
>----------------------------------------------------------------------
>
>Message: 1
>Date: Wed, 26 Jun 2013 13:13:00 +0200
>From: Mathieu Rajerison <mathieu.rajerison at gmail.com>
>To: Forrest Stevens <forrest at ufl.edu>
>Cc: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
>Subject: Re: [R-sig-Geo] spatial networks
>Message-ID:
>	<CAGfc75kKWyEkR7p2F=eEq__3D-zFq1jitavVWNPfHf4wEkFspw at mail.gmail.com>
>Content-Type: text/plain
>
>Hi,
>
>Good news.
>
>For me, what was missing for the moment with spatial tasks was something
>that could coerce linear spatial objects to (i)graph objects so as to pull
>out all the potentiel of igraph package.
>
>I can remember some attempts by Barry Rownlingson with a buildTopo function
>http://rpubs.com/geospacedman/routing
>
>What I find constraining in the SpatialLinesNetwork function is that it
>only accepts singleLine SpatialLines objects, althoug the fact is that the
>spatial data we'll use will mainly be composed of roads, rivers, etc...that
>aren't, natively, single lines
>
>Maybe we could suggest a function that "explodes" multi-line SpatialLines
>objects while preserving the attributes (since the attributes can drive
>some graph analysises)
>
>Also, one more thing I think of is snapping: let's suppose I have two
>points representing buildings and I'd like to compute the shortest path
>between them. With spatstat, we can get the edge connecting the node (the
>building) to the network, so we're not far from executing the graph stats.
>
>To sum up, I'd sugget:
>- accepting multi-line SpatialLines objects
>- building a new network given extra/outer nodes
>
>For the moment, to do the basic graph stats, I'd still use GRASS . I would
>be happy to do all this stuff with R. And I think we're really not that far
>from that..
>
>
>
>2013/6/25 Forrest Stevens <forrest at ufl.edu>
>
>> Hi Edzer, this is definitely very cool.  This may make some recent
>> work I've been doing on spatial and social network analyses of
>> academic co-authorship easier (early code is here if you're
>> interested:  http://refnet.r-forge.r-project.org/ ).  Thanks for
>> providing this to the community!
>>
>> Sincerely,
>> Forrest
>>
>> On Sun, Jun 23, 2013 at 10:20 PM, Thomas Adams <tea3rd at gmail.com> wrote:
>> > Edzer,
>> >
>> > That's really pretty cool stuff; I think I can find some applications for
>> > it!
>> >
>> > Cheers!
>> > Tom
>> >
>> >
>> > On Sun, Jun 23, 2013 at 5:57 PM, Edzer Pebesma <
>> > edzer.pebesma at uni-muenster.de> wrote:
>> >
>> >> I did some simple things trying to combine sp and igraph objects to
>> >> create spatial networks, and published this at:
>> >>
>> >> http://rpubs.com/edzer/spatialnetworks
>> >>
>> >> I'd be happy to share the markdown document with you; it seems to me
>> >> that the rpubs don't allow you to simply download & run all the commands
>> >> in the html.
>> >>
>> >> Anyway, comments & discussion welcome, as usual.
>> >> --
>> >> Edzer Pebesma
>> >> Institute for Geoinformatics (ifgi), University of M?nster
>> >> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>> >> 83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de
>> >>
>> >> _______________________________________________
>> >> R-sig-Geo mailing list
>> >> R-sig-Geo at r-project.org
>> >> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> >>
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> >
>> > _______________________________________________
>> > R-sig-Geo mailing list
>> > R-sig-Geo at r-project.org
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> >
>>
>>
>>
>> --
>> Forrest R. Stevens
>> Ph.D. Candidate, QSE3 IGERT Fellow
>> Department of Geography
>> Land Use and Environmental Change Institute
>> University of Florida
>> www.clas.ufl.edu/users/forrest
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>	[[alternative HTML version deleted]]
>
>
>
>------------------------------
>
>Message: 2
>Date: Wed, 26 Jun 2013 16:14:37 +0430
>From: Saman Monfared <samanmonfared1 at gmail.com>
>To: r-sig-geo <r-sig-geo at r-project.org>
>Subject: [R-sig-Geo] help for show.vgms
>Message-ID:
>	<CAOytA4ZBvTKkTAqxtB5asakSpxNkfG+_aEnd7HhOCbdE0xButg at mail.gmail.com>
>Content-Type: text/plain; charset=ISO-8859-1
>
>Dear All,
>I  try to plot some variogram models in a panel by show.vgms in gstat.
>my program is:
>
>show.vgms(min =0, max =200000, n = 50, sill =c(v.ols$psill[2],v.wls$psill[2],
>v.gls$psill[2],v.rml$sigmasq,v.reml$sigmasq,v.opvme$psill[2],v.opv$psill[2],
>v.opvab$psill[2],v.opvlin$psill[2]/3),range =c(v.ols$range[2],v.wls$range[2],
>v.gls$range[2],v.rml$phi,v.reml$phi,v.opvme$range[2],v.opv$range[2]
>,v.opvab$range[2],v.opvlin$range[2]),models ="Sph",nugget=c(v.ols$psill[1],
>v.wls$psill[1],v.gls$psill[1],0,0,v.opvme$psill[1],v.opv$psill[1],
>v.opvab$psill[1],v.opvlin$psill[1]/3),plot =T,as.groups =F)
>I have some problem:
>1-How can I replace my desired name
>c("OLS","WLS","GLS","ML","REML",,.....)instead of model names?
>2- How can I  create a legend with names:
>c("OLS","WLS","GLS","ML","REML",,.....)?
>3- How can I change lines to points and change pch?
>
>Best.
>-- 
>Saman Monfared
>Msc, Department of Statistics, Shiraz University,
>Shiraz 71454, Iran
>Email: Samanmonfared1 at gmail.com
>
>Tel: +98 917 5305167
>
>
>
>------------------------------
>
>Message: 3
>Date: Wed, 26 Jun 2013 04:44:16 -0700 (PDT)
>From: Israel Ikoyi <onos2god at yahoo.com>
>To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
>Subject: Re: [R-sig-Geo] R-sig-Geo Digest, Vol 118, Issue 25
>Message-ID:
>	<1372247056.58287.YahooMailNeo at web160602.mail.bf1.yahoo.com>
>Content-Type: text/plain
>
>How can I do boxcox transformation for explanatory variables and use it in a multiple linear regression?
>
>
>?
>Kind regards,
>
>ISRAEL O. IKOYI
>MSc. Thesis Research Student
>Wageningen University?
>Department of Soil Quality?
>P.O. Box 47?
>NL-6700 AA Wageningen?
>The?Netherlands
>
>
>
>________________________________
> From: "r-sig-geo-request at r-project.org" <r-sig-geo-request at r-project.org>
>To: r-sig-geo at r-project.org 
>Sent: Wednesday, June 26, 2013 12:00 PM
>Subject: R-sig-Geo Digest, Vol 118, Issue 25
>
>
>Send R-sig-Geo mailing list submissions to
>??? r-sig-geo at r-project.org
>
>To subscribe or unsubscribe via the World Wide Web, visit
>??? https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>or, via email, send a message with subject or body 'help' to
>??? r-sig-geo-request at r-project.org
>
>You can reach the person managing the list at
>??? r-sig-geo-owner at r-project.org
>
>When replying, please edit your Subject line so it is more specific
>than "Re: Contents of R-sig-Geo digest..."
>
>
>Today's Topics:
>
>?  1. Re: spatial networks (Forrest Stevens)
>?  2. NetCDF to Brick (JacobF)
>?  3. Re: Is it possible to merge togheter different ENFA??? results?
>? ? ? (Mathieu Basille)
>?  4. Problems with readOGR (Renger van Nieuwkoop)
>
>
>----------------------------------------------------------------------
>
>Message: 1
>Date: Tue, 25 Jun 2013 09:17:36 -0400
>From: Forrest Stevens <forrest at ufl.edu>
>To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
>Subject: Re: [R-sig-Geo] spatial networks
>Message-ID:
>??? <CAEBQMM=PrKEYQKL=ViksG+oBYGd6J4-0KtKe44EWX0Vdt6Vojw at mail.gmail.com>
>Content-Type: text/plain; charset=ISO-8859-1
>
>Hi Edzer, this is definitely very cool.? This may make some recent
>work I've been doing on spatial and social network analyses of
>academic co-authorship easier (early code is here if you're
>interested:? http://refnet.r-forge.r-project.org/ ).? Thanks for
>[[elided Yahoo spam]]
>
>Sincerely,
>Forrest
>
>On Sun, Jun 23, 2013 at 10:20 PM, Thomas Adams <tea3rd at gmail.com> wrote:
>> Edzer,
>>
>> That's really pretty cool stuff; I think I can find some applications for
>> it!
>>
>> Cheers!
>> Tom
>>
>>
>> On Sun, Jun 23, 2013 at 5:57 PM, Edzer Pebesma <
>> edzer.pebesma at uni-muenster.de> wrote:
>>
>>> I did some simple things trying to combine sp and igraph objects to
>>> create spatial networks, and published this at:
>>>
>>> http://rpubs.com/edzer/spatialnetworks
>>>
>>> I'd be happy to share the markdown document with you; it seems to me
>>> that the rpubs don't allow you to simply download & run all the commands
>>> in the html.
>>>
>>> Anyway, comments & discussion welcome, as usual.
>>> --
>>> Edzer Pebesma
>>> Institute for Geoinformatics (ifgi), University of M?nster
>>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>>> 83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>>? ? ? ?  [[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>
>
>--
>Forrest R. Stevens
>Ph.D. Candidate, QSE3 IGERT Fellow
>Department of Geography
>Land Use and Environmental Change Institute
>University of Florida
>www.clas.ufl.edu/users/forrest
>
>
>
>------------------------------
>
>Message: 2
>Date: Tue, 25 Jun 2013 10:53:41 -0700 (PDT)
>From: JacobF <jsf2fa at mail.missouri.edu>
>To: r-sig-geo at r-project.org
>Subject: [R-sig-Geo] NetCDF to Brick
>Message-ID: <1372182821195-7583910.post at n2.nabble.com>
>Content-Type: text/plain; charset=us-ascii
>
>I'm having an issue with creating a raster brick from a NetCDF. Normally this
>works fine but for a file I recently downloaded the time and X dimensions
>are getting swapped so I get a brick with dimensions 72, 7300, 525600, 110
>(nrow, ncol, ncell, nlayers), when it should be 72, 110, 7920, 7300? (nrow,
>ncol, ncell, nlayers). I haven't seen any documentation for setting the x, y
>and z variables when creating a brick, only when outputting one as a NetCDF.
>
>
>
>--
>View this message in context: http://r-sig-geo.2731867.n2.nabble.com/NetCDF-to-Brick-tp7583910.html
>Sent from the R-sig-geo mailing list archive at Nabble.com.
>
>
>
>------------------------------
>
>Message: 3
>Date: Tue, 25 Jun 2013 14:55:26 -0400
>From: Mathieu Basille <basille.web at ase-research.org>
>To: Michela Giusti <michela.giusti at isprambiente.it>
>Cc: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
>Subject: Re: [R-sig-Geo] Is it possible to merge togheter different
>??? ENFA??? results?
>Message-ID: <51C9E79E.1060704 at ase-research.org>
>Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
>Dear Michela,
>
>I'm not quite sure to understand what you really intend to do. I can see 
>that you performed individual ENFAs for each of your study site. This is 
>fair, although you might be interested in the OMI for that multi-niche 
>comparison (see ?niche in package ade4, and reference [1]).
>
>But now, you want to perform a MADIFA on top of this? It does not make 
>sense to me... Here, I'm really not sure what you want to do.
>
>Finally, a single analysis for the 3 sites at once might also make sense, 
>and this is largely feasible with R. It will need a little bit of tweaking
>though. All you have to do is to combine the results after the extraction 
>of the environmental characteristics and the vector of presence (before the
>PCA).
>
>Hope this helps,
>Mathieu Basille.
>
>
>[1] Doledec, S.; Chessel, D. & Gimaret Carpentier, C. (2000) Niche 
>separation in community analysis: A new method. Ecology, 81: 2914-2927 doi
>10.1890/0012-9658(2000)081[2914:NSICAA]2.0.CO;2
>
>
>Le 06/25/2013 05:36 AM, Michela Giusti a ?crit :
>> Hello everybody ,
>>
>> I have a question regarding ENFA process.
>>
>> I have 3 sites far from one another along the Mediterranean Sea.
>> I performed 3 different ENFA (one for each site; the species is the same
>> for each site).
>>
>> Now I would like to merge togheter the 3 ENFA results to have the final
>> result and to perform the final MADIFA on it.
>>
>> Is it possible to do that? I tryed also to do a single ENFA on the 3 sites
>> from the beginning of my analysis , but I had problems with the extents of
>> the rasters.
>>
>> Thank you very much for your help.
>>
>> Bye,
>>
>> Michela
>>
>
>-- 
>
>~$ whoami
>Mathieu Basille, PhD
>
>~$ locate --details
>University of Florida \\
>Fort Lauderdale Research and Education Center
>(+1) 954-577-6314
>http://ase-research.org/basille
>
>~$ fortune
>? Le tout est de tout dire, et je manque de mots
>Et je manque de temps, et je manque d'audace. ?
>? -- Paul ?luard
>
>
>
>------------------------------
>
>Message: 4
>Date: Wed, 26 Jun 2013 09:16:39 +0000
>From: Renger van Nieuwkoop <renger at vannieuwkoop.ch>
>To: "R-sig-Geo at r-project.org" <R-sig-Geo at r-project.org>
>Subject: [R-sig-Geo] Problems with readOGR
>Message-ID:
>??? <5E17CCD4AACE3A4C8CFF411186AE81903195E59C at ExDAG30-N1.hostallapps.net>
>Content-Type: text/plain
>
>Hi
>
>I tried running the following code using the shapefiles for the city of Zurich
>
>require("rgdal") # requires sp, will use proj.4 if installed
>require("maptools")
>
>zh = readOGR(".",layer="Zurich")
>and got following error:
>OGR data source with driver: ESRI Shapefile
>Source: ".", layer: "Zurich"
>with 34 features and 6 fields
>Feature type: wkbPolygon with 2 dimensions
>Fehler in CRS(p4s) : lat_0 = 0 or 90 or alpha = 90
>
>
>ogrInfo gives me this:
>
>ogrInfo(".","Zurich")
>
>Source: ".", layer: "Zurich"
>
>Driver: ESRI Shapefile number of rows 34
>
>Feature type: wkbPolygon with 2 dimensions
>
>Extent: (676227 241585) - (689671 254305.7)
>
>CRS: +proj=omerc +lat_0=46.95240555555556 +lonc=7.439583333333333 +alpha=90 +k=1 +x_0=-9419820.590700001 +y_0=200000 +ellps=bessel +units=m +no_defs
>
>LDID: 87
>
>Number of fields: 6
>
>? ? ? ? name type length typeName
>
>1? ? GMDEQNR? ? 0? ? ? 7? Integer
>
>2? ? ? ?  NR? ? 0? ? ? 9? Integer
>
>3? ? ?  NAME? ? 4? ?  45?  String
>
>4? ? ?  GMDE? ? 0? ? ? 9? Integer
>
>5 FLAECHE_HA? ? 0? ? ? 9? Integer
>
>6?  Quartier? ? 0? ? ? 4? Integer
>
>
>I can see that lat_0 is not equal to zero, but don't know how to resolve this issue.
>
>Thanks in advance for help
>
>Renger
>
>
>_________________________________________
>Renger van Nieuwkoop
>Centre for Energy Policy and Economics, ETH
>Z?richbergstrasse 18 (ZUE)
>CH - 8032 Z?rich
>+41 44 632 02 63
>mailto: rengerv at etzh.ch<mailto:rengerv at etzh.ch>
>blog.modelworks.ch
>
>
>??? [[alternative HTML version deleted]]
>
>
>
>------------------------------
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>End of R-sig-Geo Digest, Vol 118, Issue 25
>******************************************
>	[[alternative HTML version deleted]]
>
>
>
>------------------------------
>
>Message: 4
>Date: Wed, 26 Jun 2013 21:49:20 +1000
>From: Michael Sumner <mdsumner at gmail.com>
>To: Moshood Agba Bakare <bakare at ualberta.ca>
>Cc: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
>Subject: Re: [R-sig-Geo] Area of Spatial Domain
>Message-ID:
>	<CAAcGz9_nXyMbUKhg2AMySE-BeAiD3_+Q064WdRbZXw7nXQdemQ at mail.gmail.com>
>Content-Type: text/plain; charset=UTF-8
>
>In general, no you cannot say that this would be correct. It depends
>on where and how extensive the region is, so if you can tell us that I
>could put together something to show how valid it would be. You should
>reproject to a local equal area projection and then it's going to be
>valid, but even then you'd want to do some checks, depending, again on
>where and for what.
>
>Within 100s of kilometres is probably ok, but then it depends on the
>latitude you are at, *and* which zone you are using (it's easy to get
>this wrong believe it or not and UTM is one of those *defaults* that
>can cause problems because it is a default - there's no good technical
>reason to use it if you can help it. Each zone is only 6 degrees wide,
>and if you are near a transition it's better to use a local one rather
>than a standard zone, which again begs the question of why it would be
>used).
>
>This also has relevance downstream if you are using a projection
>incorrectly so it's worth understanding well. There are plenty of
>resources on this out there.
>
>Cheers, Mike.
>
>
>
>
>
>It's safest to reproject to an appropriate equal area projection, and then
>
>On Tue, Jun 25, 2013 at 6:38 AM, Moshood Agba Bakare <bakare at ualberta.ca> wrote:
>> Dear All,
>> Am I right to calculate the spatial region or domain by multiplying the
>> range of easting and northing coordinates? That is, I intend to find the
>> difference between the minimum and maximum values in meters for each of the
>> UTM coordinates (easting and northing) and get the product of the range as
>> area of spatial domain in square meters.
>>
>> Please let me know if I am right or wrong.
>>
>> Thank you.
>> Moshood
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
>-- 
>Michael Sumner
>Hobart, Australia
>e-mail: mdsumner at gmail.com
>
>
>
>------------------------------
>
>Message: 5
>Date: Wed, 26 Jun 2013 14:05:32 +0200
>From: Roger Bivand <Roger.Bivand at nhh.no>
>To: Renger van Nieuwkoop <renger at vannieuwkoop.ch>
>Cc: "R-sig-Geo at r-project.org" <R-sig-Geo at r-project.org>
>Subject: Re: [R-sig-Geo] Problems with readOGR
>Message-ID: <alpine.LRH.2.03.1306261354490.24217 at reclus.nhh.no>
>Content-Type: text/plain; format=flowed; charset="US-ASCII"
>
>On Wed, 26 Jun 2013, Renger van Nieuwkoop wrote:
>
>> Hi
>>
>> I tried running the following code using the shapefiles for the city of 
>> Zurich
>>
>> require("rgdal") # requires sp, will use proj.4 if installed
>> require("maptools")
>>
>> zh = readOGR(".",layer="Zurich")
>> and got following error:
>> OGR data source with driver: ESRI Shapefile
>> Source: ".", layer: "Zurich"
>> with 34 features and 6 fields
>> Feature type: wkbPolygon with 2 dimensions
>> Fehler in CRS(p4s) : lat_0 = 0 or 90 or alpha = 90
>>
>
>See:
>
>http://osgeo-org.1560.x6.nabble.com/Re-Swiss-CORINE-Bessel-1841-Hotine-Oblique-Mercator-Azimuth-Natural-Origin-td3842640.html
>
>Here alpha = 90,
>
>http://trac.osgeo.org/proj/wiki/GenParms#Parameterlist
>
>+alpha     ? Used with Oblique Mercator and possibly a few others
>
>The resolution in the thread:
>
>ogr2ogr shp_dir/ -s_srs epsg:21781 -t_srs epsg:3035 clcbn85p.shp
>
>gets from an alternative encoding to LAEA, you may rather need to impose 
>the CRS (delete the offending *.prj file, and impose after reading - but 
>be sure to impose the right CRS). Read the whole thread on the PROJ.4 
>list, and go back to Cliff Mugnier's Grids & Datums piece in 2001 too. 
>This is a particularly contentious set of projection arguments, and there 
>are many other Oblique Mercator threads on that list.
>
>Hope this helps,
>
>Roger
>
>>
>> ogrInfo gives me this:
>>
>> ogrInfo(".","Zurich")
>>
>> Source: ".", layer: "Zurich"
>>
>> Driver: ESRI Shapefile number of rows 34
>>
>> Feature type: wkbPolygon with 2 dimensions
>>
>> Extent: (676227 241585) - (689671 254305.7)
>>
>> CRS: +proj=omerc +lat_0=46.95240555555556 +lonc=7.439583333333333 +alpha=90 +k=1 +x_0=-9419820.590700001 +y_0=200000 +ellps=bessel +units=m +no_defs
>>
>> LDID: 87
>>
>> Number of fields: 6
>>
>>        name type length typeName
>>
>> 1    GMDEQNR    0      7  Integer
>>
>> 2         NR    0      9  Integer
>>
>> 3       NAME    4     45   String
>>
>> 4       GMDE    0      9  Integer
>>
>> 5 FLAECHE_HA    0      9  Integer
>>
>> 6   Quartier    0      4  Integer
>>
>>
>> I can see that lat_0 is not equal to zero, but don't know how to resolve 
>> this issue.
>>
>> Thanks in advance for help
>>
>> Renger
>>
>>
>> _________________________________________
>> Renger van Nieuwkoop
>> Centre for Energy Policy and Economics, ETH
>> Z?richbergstrasse 18 (ZUE)
>> CH - 8032 Z?rich
>> +41 44 632 02 63
>> mailto: rengerv at etzh.ch<mailto:rengerv at etzh.ch>
>> blog.modelworks.ch
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>>
>
>-- 
>Roger Bivand
>Department of Economics, NHH Norwegian School of Economics,
>Helleveien 30, N-5045 Bergen, Norway.
>voice: +47 55 95 93 55; fax +47 55 95 95 43
>e-mail: Roger.Bivand at nhh.no
>
>
>
>------------------------------
>
>Message: 6
>Date: Wed, 26 Jun 2013 09:49:49 -0400
>From: Arnaud Mosnier <a.mosnier at gmail.com>
>To: r-sig-geo at r-project.org
>Subject: [R-sig-Geo] Area calculation error ?
>Message-ID:
>	<CANkFkEf5taFAzHJXn5DtrA52Pq0Xt0tmReA0+WqanDZXt+zCbg at mail.gmail.com>
>Content-Type: text/plain
>
>Hi,
>
>Maybe I made an error somewhere, but I can't find where !
>There is differences when I calculated the area of a rectangular polygon
>and the value calculated by the function Polygon.
>
>Sorry for the large precision numbers, but I tested if it was due to a
>rounding error.
>
>Hope you can enlighten me.
>
>Thanks.
>
>Arnaud
>
>##########################################
>
>Sr1 = Polygon(cbind(c(526253.713768354034983, 526248.093571954057552,
>    526458.286270954064094 , 526463.906467354041524,
>526253.713768354034983),
>    c(5242206.17401464004070,5242528.15709813963622,5242531.82599973957986,
>    5242209.84291623998433, 5242206.17401464004070)))
>
># Area indicated in Sr1 = 67699.11
>
>Width <- abs(526253.713768354034983 - 526463.906467354041524)
>Length <- abs(5242206.17401464004070 - 5242528.15709813963622)
>
>Width * Length
>
># Area calculated (rectangular area) = 67678.49
>
>	[[alternative HTML version deleted]]
>
>
>
>------------------------------
>
>Message: 7
>Date: Wed, 26 Jun 2013 10:27:17 -0400
>From: Arnaud Mosnier <a.mosnier at gmail.com>
>To: r-sig-geo at r-project.org
>Subject: Re: [R-sig-Geo] Area calculation error ?
>Message-ID:
>	<CANkFkEefCNUaj4Q0wj3Y6mS7QYP+Gu77uuK7O5+hUFst+49Asw at mail.gmail.com>
>Content-Type: text/plain
>
>Sorry ... my mistake ... the rectangle is slightly rotated ... here is the
>difference.
>
>Arnaud
>
>
>2013/6/26 Arnaud Mosnier <a.mosnier at gmail.com>
>
>> Hi,
>>
>> Maybe I made an error somewhere, but I can't find where !
>> There is differences when I calculated the area of a rectangular polygon
>> and the value calculated by the function Polygon.
>>
>> Sorry for the large precision numbers, but I tested if it was due to a
>> rounding error.
>>
>> Hope you can enlighten me.
>>
>> Thanks.
>>
>> Arnaud
>>
>> ##########################################
>>
>> Sr1 = Polygon(cbind(c(526253.713768354034983, 526248.093571954057552,
>>     526458.286270954064094 , 526463.906467354041524,
>> 526253.713768354034983),
>>     c(5242206.17401464004070,5242528.15709813963622,5242531.82599973957986,
>>     5242209.84291623998433, 5242206.17401464004070)))
>>
>> # Area indicated in Sr1 = 67699.11
>>
>> Width <- abs(526253.713768354034983 - 526463.906467354041524)
>> Length <- abs(5242206.17401464004070 - 5242528.15709813963622)
>>
>> Width * Length
>>
>> # Area calculated (rectangular area) = 67678.49
>>
>>
>>
>
>	[[alternative HTML version deleted]]
>
>
>
>------------------------------
>
>Message: 8
>Date: Thu, 27 Jun 2013 05:17:26 +0200
>From: "Parra, Mauricio (AGPM)" <Mauricio.Parra at fao.org>
>To: "R-sig-Geo at r-project.org" <R-sig-Geo at r-project.org>
>Subject: [R-sig-Geo] distance units in "zerodist" function (sp)
>Message-ID:
>	<7FAA73D70AEE6B4BA5BE48F8BD97BC9A05F5B59398 at HQEXDB02.hq.un.fao.org>
>Content-Type: text/plain; charset="us-ascii"
>
>An HTML attachment was scrubbed...
>URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130627/17887731/attachment-0001.html>
>
>------------------------------
>
>Message: 9
>Date: Thu, 27 Jun 2013 07:35:10 +0200
>From: Edzer Pebesma <edzer.pebesma at uni-muenster.de>
>To: "Parra, Mauricio (AGPM)" <Mauricio.Parra at fao.org>,
>	"r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
>Subject: Re: [R-sig-Geo] distance units in "zerodist" function (sp)
>Message-ID: <51CBCF0E.3000108 at uni-muenster.de>
>Content-Type: text/plain; charset=ISO-8859-1
>
>Good point, thanks!
>
>zerodist computes Euclidian distances, meaning you should use have
>projected coordinates to do something useful at the poles.
>
>I'll put it on the TODO list to compute great circle distances when data
>are in long lat, hopefully for the next sp, which might come out pretty
>soon.
>
>Best regards,
>
>On 06/27/2013 05:17 AM, Parra, Mauricio (AGPM) wrote:
>> Hi everyone,
>> I would like to know how the distance for "zero" parameter in 
>> zerodist/remove.duplicates function (sp package) should be entered when 
>> coordinates for SpatialPoints are in lat/long. Function documentation has 
>> no mention about you have to use either map units (decimal degrees for lat/long) 
>> or in all cases meters.
>> Thanks in advance,
>> Sincerely,
>> Mauricio
>> 
>> 
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
>
>-- 
>Edzer Pebesma
>Institute for Geoinformatics (ifgi), University of M?nster
>Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>83 33081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de
>
>
>
>------------------------------
>
>Message: 10
>Date: Thu, 27 Jun 2013 08:34:51 +0200
>From: Maurizio Marchi <mauriziomarchi85 at gmail.com>
>To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
>Subject: [R-sig-Geo] Variance of prediction in Kriging with raster
>	package
>Message-ID:
>	<CANJhsN1VM9dRQZHptHDF6F9W9wn01Lt9=xvq1EVn9ueqXu5qTQ at mail.gmail.com>
>Content-Type: text/plain
>
>Hallo everybody.
>Using the krige() function of the gstat package for ordinary and universal
>kriging and the predict() function of the same package for ordinary and
>universal cokriging I obtain the prediction of the variable and also the
>variance of prediction. Is possible to do the same with the raster package,
>maybe with an option of the interpolate() function?
>Thanks,
>
>Maurizio Marchi
>Forestry Ph.D student
>
>
>-- 
>Maurizio Marchi
>ID skype: maurizioxyz
>*Ubuntu 12.04 (Precise Pangolin)*
>*"Il bello dell'open-source ? che le domande possono essere poste alla
>fonte"*
>*utente linux 552.742*
>
>	[[alternative HTML version deleted]]
>
>
>
>------------------------------
>
>Message: 11
>Date: Thu, 27 Jun 2013 08:34:57 +0200
>From: Maurizio Marchi <mauriziomarchi85 at gmail.com>
>To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
>Subject: [R-sig-Geo] Variance of prediction in Kriging
>Message-ID:
>	<CANJhsN03egawdenX8nL9UP+M=7PcE6mYgm89AmO48mhg5eszbg at mail.gmail.com>
>Content-Type: text/plain
>
>Hallo everybody.
>Using the krige() function of the gstat package for ordinary and universal
>kriging and the predict() function of the same package for ordinary and
>universal cokriging I obtain the prediction of the variable and also the
>variance of prediction. Is possible to do the same with the raster package,
>maybe with an option of the interpolate() function?
>Thanks,
>
>Maurizio Marchi
>Ph.D student
>
>
>-- 
>Maurizio Marchi
>ID skype: maurizioxyz
>*Ubuntu 12.04 (Precise Pangolin)*
>*"Il bello dell'open-source ? che le domande possono essere poste alla
>fonte"*
>*utente linux 552.742*
>
>	[[alternative HTML version deleted]]
>
>
>
>------------------------------
>
>Message: 12
>Date: Thu, 27 Jun 2013 10:21:45 +0200
>From: Koen Hufkens <koen.hufkens at gmail.com>
>To: r-sig-geo <r-sig-geo at r-project.org>
>Subject: [R-sig-Geo] reclassify() on large files
>Message-ID:
>	<CAHDtqqmmA=eacEXxKsqYV0vsH-Vg=RDTV0CsN6ArcE6UBpE2Cg at mail.gmail.com>
>Content-Type: text/plain
>
>Hi all,
>
>I'm trying reclassify an image but I keep hitting upon the error:
>
>R <- reclassify(zones,rcl.r)
>
>Error in setValues(out, .Call("reclass", values(x), rcl, include.lowest,  :
>  length(values) is not equal to ncell(x), or to 1
>
>If I plot the 'zones' RasterLayer I also get this error:
>
>plot(zones)
>
>Warning message:
>In matrix(x, ncol = cr[1], nrow = cr[2], byrow = TRUE) :
>  data length [25740] is not a sub-multiple or multiple of the number of
>rows [159]
>
>where 'zones' is the output of the aggregate() function.
>
>Both are related as it does not occur if I use a smaller image although the
>procedure is exactly the same.
>
>Any clues on why this is, and how to solve it?
>
>Thanks in advance,
>Koen
>
>	[[alternative HTML version deleted]]
>
>
>
>------------------------------
>
>Message: 13
>Date: Thu, 27 Jun 2013 18:50:47 +1000
>From: Michael Sumner <mdsumner at gmail.com>
>To: JacobF <jsf2fa at mail.missouri.edu>
>Cc: r-sig-geo at r-project.org
>Subject: Re: [R-sig-Geo] NetCDF to Brick
>Message-ID:
>	<CAAcGz98VKdYpd-M6AGhWpXYNH2Z4GeOONqEUTPC_LctDb_2QBA at mail.gmail.com>
>Content-Type: text/plain; charset=UTF-8
>
>this is hard to generalize for something like raster (though no doubt
>the authors will get to it eventually), I would suggest just using
>ncdf4, RNetCDF, or ncdf packages to open, read and manipulate this
>more directly in R. It's not difficult and you could report back your
>pathway to raster objects to inspire others.
>
>(I prefer RNetCDF only because I'm more familiar with it, but since
>raster uses ncdf or preferentially ncdf4 it's probably best to start
>there).
>
>
>
>
>
>On Wed, Jun 26, 2013 at 3:53 AM, JacobF <jsf2fa at mail.missouri.edu> wrote:
>> I'm having an issue with creating a raster brick from a NetCDF. Normally this
>> works fine but for a file I recently downloaded the time and X dimensions
>> are getting swapped so I get a brick with dimensions 72, 7300, 525600, 110
>> (nrow, ncol, ncell, nlayers), when it should be 72, 110, 7920, 7300  (nrow,
>> ncol, ncell, nlayers). I haven't seen any documentation for setting the x, y
>> and z variables when creating a brick, only when outputting one as a NetCDF.
>>
>>
>>
>> --
>> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/NetCDF-to-Brick-tp7583910.html
>> Sent from the R-sig-geo mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
>-- 
>Michael Sumner
>Hobart, Australia
>e-mail: mdsumner at gmail.com
>
>
>
>------------------------------
>
>Message: 14
>Date: Thu, 27 Jun 2013 10:56:17 +0200
>From: Nicolas Bories <nicolas.bories at orange.fr>
>To: r-sig-geo at r-project.org
>Subject: [R-sig-Geo] How to compute an average year on time series ?
>Message-ID: <51CBFE31.2070004 at orange.fr>
>Content-Type: text/plain
>
>Dear all,
>
>I'm working on EVI-MODIS time series with the R package spacetime.
>I have 10 years of data. I want to compute an average year for each pixel.
>How can I do this ?
>The goal is to compare for each pixel and for specific years the 
>EVI-MODIS variations and average year variations.
>I saw the method aggregate(x, by, FUN = mean, ..., simplify = TRUE) but 
>I didn't manage to get an average year.
>
>Thanks in advance for any suggestions !
>
>Nicolas.
>
>
>	[[alternative HTML version deleted]]
>
>
>
>------------------------------
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>End of R-sig-Geo Digest, Vol 118, Issue 26
>******************************************

From pbeck at whrc.org  Thu Jun 27 15:43:41 2013
From: pbeck at whrc.org (Pieter Beck)
Date: Thu, 27 Jun 2013 09:43:41 -0400
Subject: [R-sig-Geo] 'crop' function kills z values of layers in raster
	object
Message-ID: <CAKtCXj_DyxCYjrMOcjG746Gg8WSvn9104F7H7tbex8NRy53qiA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130627/8b1776c3/attachment.pl>

From Yan.Boulanger at RNCan-NRCan.gc.ca  Thu Jun 27 17:09:08 2013
From: Yan.Boulanger at RNCan-NRCan.gc.ca (Boulanger, Yan)
Date: Thu, 27 Jun 2013 15:09:08 +0000
Subject: [R-sig-Geo] pqR ?
Message-ID: <D3557409FD94BA41AE028A1E573716D646FC5B71@S-BSC-MBX2.nrn.nrcan.gc.ca>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130627/174240a4/attachment.pl>

From villers.alexandre at gmail.com  Thu Jun 27 17:13:31 2013
From: villers.alexandre at gmail.com (Alexandre Villers)
Date: Thu, 27 Jun 2013 18:13:31 +0300
Subject: [R-sig-Geo] ENFA scatter plot problem & habitat suitability map
 question
In-Reply-To: <51CC2853.5000000@isprambiente.it>
References: <51C1662F.6020605@isprambiente.it>
	<51CC2853.5000000@isprambiente.it>
Message-ID: <51CC569B.5090202@gmail.com>

Hello,

Regarding what you call "habitat prediction map", which I guess is 
habitat suitability (if this term is more suited), you can have a look 
at the spatial analyst page 
http://spatial-analyst.net/wiki/index.php?title=Species_Distribution_Modelling
HTH

Alex


P.S.: by the way, you should avoid including images in your messages but 
rather provide a link to it/them...


From b.rowlingson at lancaster.ac.uk  Thu Jun 27 18:39:34 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Thu, 27 Jun 2013 17:39:34 +0100
Subject: [R-sig-Geo] pqR ?
In-Reply-To: <9bdee67c285c49f2b148b7b261a196f9@EX-1-HT0.lancs.local>
References: <9bdee67c285c49f2b148b7b261a196f9@EX-1-HT0.lancs.local>
Message-ID: <CANVKczPd1-U=iP-b_LeFmX-_w372U=FiqFHe0OkKFyk6RFmxKA@mail.gmail.com>

Step 1 - write some spatial benchmarks.

 I would benchmark: spatial object creation from files (shapefiles,
typically, but this probably more an I/O benchmark), spatial object
creation from primitive objects (the
SpatialPolygons(list(Polygons(list(matrix))))) stuff), over, and
everything in rgeos, as many kriging packages as you can find, and as
much of raster as you can think of. Quite a bit of that is already in
C so might not get any faster in pqR. But a spatial benchmark suite
would be nice anyway.

I've just benchmarked my time and I have 0s to do this.



On Thu, Jun 27, 2013 at 4:09 PM, Boulanger, Yan
<Yan.Boulanger at rncan-nrcan.gc.ca> wrote:
> Dear forumities,
>
> Did anyone tried pqR for spatial analyses ? I don't know if the worth the case (I will have to try myself) but it seems that pqR (which was released last week) is able to perform operations in parallel, especially on matrices so I guess it could substantially reduce the computation time when e.g., doing simple mathematical operations on rasters.
>
>
> "One notable improvement is that pqR is able to do some numeric computations in parallel with each other, and with other operations of the interpreter, on systems with multiple processors or processor cores" (http://radfordneal.wordpress.com/2013/06/22/announcing-pqr-a-faster-version-of-r/)
> The program is only available for the moment, for UNIX and Linux platforms although it seems to run correctly on Mac.
> Any thoughts?
> Yan
>
> Yan Boulanger, Postdoctoral Visiting Fellow
> Ressources Naturelles Canada, Canadian Forest Service
> Centre de Foresterie des Laurentides
> 1055, rue du P.E.P.S.
> C.P. 10380, succ. Sainte-Foy
> Qu?bec (Qu?bec) Canada
> G1V 4C7
> Tel. : +1 418 649-6859
>
>
>
>         [[alternative HTML version deleted]]
>


From bakare at ualberta.ca  Thu Jun 27 20:28:16 2013
From: bakare at ualberta.ca (Moshood Agba Bakare)
Date: Thu, 27 Jun 2013 12:28:16 -0600
Subject: [R-sig-Geo] Visualizing the surface trends
Message-ID: <CAJRR3XOuoNsg24QQKEBu8gPtGp73=85Ddn70qLA-V5rFfHAJ8A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130627/988eb2b3/attachment.pl>

From r.turner at auckland.ac.nz  Fri Jun 28 01:34:39 2013
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Fri, 28 Jun 2013 11:34:39 +1200
Subject: [R-sig-Geo] nearest neighbor 3d point pattern
In-Reply-To: <51CC24A3.3000802@aol.com>
References: <51CC24A3.3000802@aol.com>
Message-ID: <51CCCC0F.1000600@auckland.ac.nz>

On 27/06/13 23:40, Carsten Neumann wrote:
> Dear list members,
>
> after searching R mailing lists, I wonder if there is a R function that
> can find the nearest neighbor/or just euclidean distance of points in
> one 3D coordinate system to points in another 3D coordinate system. The
> function nncross {spatstat} can only deal with 2D point pattern. Any
> idea or experiences with such procedures?
>
> ######################Test Data############################
> point1<-array(c(seq(0,1,0.1),seq(0,1,0.1),seq(0,1,0.1)),dim=c(11,11,11))
> point2<-array(c(0.8,0.3,0.5),dim=c(1,1,1))
> #########################################################
> question: where is point2 in point1?

You are correct in that nncross() has not (yet) been extended to three
dimensional point patterns.  However a workaround can be found by
using crossdist.pp3().

E.g.:

     set.seed(42)
     X     <- ppx(data.frame(x=rnorm(20),y=rnorm(20),z=rnorm(20)))
     Y      <- ppx(data.frame(x=0,y=0,z=0))
     M     <- crossdist(Y,X)
     min(M)
     which.min(M)

This will tell you that the nearest point in X to c(0,0,0) is point 
number 15
and the distance from c(0,0,0) to this point is 0.5299162.

I'm afraid I could not comprehend your example.  The object point1 is
a 3-dimensional array (11 x 11 x 11).  How is this to be interpreted as
a 3-dimensional *point pattern*?  And point2 is a single number --- 0.8,
and not actually a point in 3-space.

Furthermore what does the question "where is point2 in point1?" mean?
I cannot parse this question.

Perhaps (quite possibly) I am just being stupid.  If so, please 
enlighten me.

     cheers,

         Rolf Turner


From adrian.baddeley at uwa.edu.au  Fri Jun 28 02:45:53 2013
From: adrian.baddeley at uwa.edu.au (Adrian Baddeley)
Date: Fri, 28 Jun 2013 08:45:53 +0800
Subject: [R-sig-Geo]  nearest neighbor 3d point pattern
In-Reply-To: <1CEF56CFF7118748AE0FA6C0186D3A31278BE93E@IS-WIN-172.staffad.uwa.edu.au>
References: <51CC24A3.3000802@aol.com>, <51CCCC0F.1000600@auckland.ac.nz>,
	<1CEF56CFF7118748AE0FA6C0186D3A31278BE93E@IS-WIN-172.staffad.uwa.edu.au>
Message-ID: <1CEF56CFF7118748AE0FA6C0186D3A31278BE940@IS-WIN-172.staffad.uwa.edu.au>


Further to Rolf's comment:

The next release of spatstat (1.32-0) will include new methods nncross.pp3 and nncross.ppx
for this purpose.

(spatstat already contains the C code routines for nearest neighbours in arbitrary dimensions,
so it is only necessary to write the R interface.)

Adrian

Prof Adrian Baddeley FAA
University of Western Australia  /and/ CSIRO Mathematics, Informatics & Statistics
Mail: <cet.uwa.edu.au>             Skype: adrian.baddeley
________________________________________
From: Rolf Turner [r.turner at auckland.ac.nz]
Sent: Friday, 28 June 2013 7:34 AM
To: Carsten Neumann
Cc: r-sig-geo at r-project.org; Adrian Baddeley
Subject: Re: [R-sig-Geo] nearest neighbor 3d point pattern

On 27/06/13 23:40, Carsten Neumann wrote:
> Dear list members,
>
> after searching R mailing lists, I wonder if there is a R function that
> can find the nearest neighbor/or just euclidean distance of points in
> one 3D coordinate system to points in another 3D coordinate system. The
> function nncross {spatstat} can only deal with 2D point pattern. Any
> idea or experiences with such procedures?
>
> ######################Test Data############################
> point1<-array(c(seq(0,1,0.1),seq(0,1,0.1),seq(0,1,0.1)),dim=c(11,11,11))
> point2<-array(c(0.8,0.3,0.5),dim=c(1,1,1))
> #########################################################
> question: where is point2 in point1?

You are correct in that nncross() has not (yet) been extended to three
dimensional point patterns.  However a workaround can be found by
using crossdist.pp3().

E.g.:

     set.seed(42)
     X     <- ppx(data.frame(x=rnorm(20),y=rnorm(20),z=rnorm(20)))
     Y      <- ppx(data.frame(x=0,y=0,z=0))
     M     <- crossdist(Y,X)
     min(M)
     which.min(M)

This will tell you that the nearest point in X to c(0,0,0) is point
number 15
and the distance from c(0,0,0) to this point is 0.5299162.

I'm afraid I could not comprehend your example.  The object point1 is
a 3-dimensional array (11 x 11 x 11).  How is this to be interpreted as
a 3-dimensional *point pattern*?  And point2 is a single number --- 0.8,
and not actually a point in 3-space.

Furthermore what does the question "where is point2 in point1?" mean?
I cannot parse this question.

Perhaps (quite possibly) I am just being stupid.  If so, please
enlighten me.

     cheers,

         Rolf Turner


From carstennh at aol.com  Fri Jun 28 13:29:24 2013
From: carstennh at aol.com (Carsten Neumann)
Date: Fri, 28 Jun 2013 13:29:24 +0200
Subject: [R-sig-Geo] nearest neighbor 3d point pattern
In-Reply-To: <51CCCC0F.1000600@auckland.ac.nz>
References: <51CC24A3.3000802@aol.com> <51CCCC0F.1000600@auckland.ac.nz>
Message-ID: <51CD7394.60802@aol.com>

Thank you very much Rolf,

an enlightening example for me! To my example: the 3D array should be
interpreted as a regular point pattern just as a reproducible example
(number of points = 11*11*11 / 1. coordinate = 0,0,0.1 / 2. coordinate =
0,0,0.2 etc.). The second point has the same structure than the first
(number of points = 1*1*1 coordinates = 0.8,0.3,0.5). Maybe this type of
example depiction is some kind of confusing!? So my question was meant,
which coordinates of points 2 are closest to coordinates of point 1. I
know, for a regular Grid pattern like my array example no big question.
But in case of real irregular geographic point pattern your example is a
beginning (I need to translate this for 23 billion points).

Best

Carsten

On 06/28/2013 01:34 AM, Rolf Turner wrote:
> On 27/06/13 23:40, Carsten Neumann wrote:
>> Dear list members,
>>
>> after searching R mailing lists, I wonder if there is a R function that
>> can find the nearest neighbor/or just euclidean distance of points in
>> one 3D coordinate system to points in another 3D coordinate system. The
>> function nncross {spatstat} can only deal with 2D point pattern. Any
>> idea or experiences with such procedures?
>>
>> ######################Test Data############################
>> point1<-array(c(seq(0,1,0.1),seq(0,1,0.1),seq(0,1,0.1)),dim=c(11,11,11))
>> point2<-array(c(0.8,0.3,0.5),dim=c(1,1,1))
>> #########################################################
>> question: where is point2 in point1?
>
> You are correct in that nncross() has not (yet) been extended to three
> dimensional point patterns.  However a workaround can be found by
> using crossdist.pp3().
>
> E.g.:
>
>     set.seed(42)
>     X     <- ppx(data.frame(x=rnorm(20),y=rnorm(20),z=rnorm(20)))
>     Y      <- ppx(data.frame(x=0,y=0,z=0))
>     M     <- crossdist(Y,X)
>     min(M)
>     which.min(M)
>
> This will tell you that the nearest point in X to c(0,0,0) is point
> number 15
> and the distance from c(0,0,0) to this point is 0.5299162.
>
> I'm afraid I could not comprehend your example.  The object point1 is
> a 3-dimensional array (11 x 11 x 11).  How is this to be interpreted as
> a 3-dimensional *point pattern*?  And point2 is a single number --- 0.8,
> and not actually a point in 3-space.
>
> Furthermore what does the question "where is point2 in point1?" mean?
> I cannot parse this question.
>
> Perhaps (quite possibly) I am just being stupid.  If so, please
> enlighten me.
>
>     cheers,
>
>         Rolf Turner
>
>

-- 

Carsten Neumann
Telegrafenberg, A 17 01.13
14473 Potsdam
-------------------------------------------------------
Helmholtz Centre Potsdam
GFZ German Research Centre for Geosciences
Department 1 - Section 1.4 - Remote Sensing
-------------------------------------------------------
Tel.: +49 (0) 331 288 1766
e-mail: carstenn at gfz-potsdam.de


From juantomas.sayago at gmail.com  Fri Jun 28 16:40:22 2013
From: juantomas.sayago at gmail.com (Juan Tomas Sayago Gomez)
Date: Fri, 28 Jun 2013 10:40:22 -0400
Subject: [R-sig-Geo] WG: Endogenous explanatory variables in sphet
In-Reply-To: <CCD7DE7E72D4B341896DB1CE20AEB805373F157C@BADWLRZ-SWMBX11.ads.mwn.de>
References: <CCD7DE7E72D4B341896DB1CE20AEB805373F157C@BADWLRZ-SWMBX11.ads.mwn.de>
Message-ID: <CAEOXpNCROwt+DcxNphxLdSUh+xjUrzpygX0BGqnJRKprtCABaA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130628/5f17878e/attachment.pl>

From agg18 at pitt.edu  Fri Jun 28 19:35:26 2013
From: agg18 at pitt.edu (alannie)
Date: Fri, 28 Jun 2013 10:35:26 -0700 (PDT)
Subject: [R-sig-Geo] ENFA in Linx
Message-ID: <1372440926571-7583942.post@n2.nabble.com>

Hi R-Sig-Geo community!

I was recently trying to run ADEHabitat ecological niche factor analysis
(ENFA) using R in Linux. I did not get very far and would like some
assistance on how to make it work in the future.

I did the following commands: 

I installed both ade4 and ADEHabitat on to R in Linux

Imported 26 .asc maps into R using this general syntax:
bio2<-import.asc("ASCII Envi Variables//caorwa//bio2.asc")

I added location data:

locs<-read.table("XYconcolorsp.csv",head=TRUE,sep=",")

added the libraries for ade4/adehaitat

I compiled the .asc maps into "maps" using: 

maps<-as.kasc(list(bio1=bio1,bio2=bio2,bio3=bio3,........etc)) 

Then I tried to prepare the data for the ENFA:

(dataenfa1<-data2enfa(maps,locs))

After this step I received an error message:

Error in cut.default(x, xc) : 'x' must be numeric
Error: unexpected 'in' in "Error in"
data2enfa(maps,locs)


I have done the exact same thing in just windows many times and have not
received an error like this. In fact, it worked perfectly until the end of
the enfa. I had to switch to Linux because Windows ran out of memory for the
large area based analyses.

What would be causing the error? 

Is there something that needs to be configured differently in Linux?

Please let me know your suggestions! 

Linux Specifications:

adehabitat version 1.8.12 on R version 2.15.3 (2013-03-01) running on 64-bit
Ubuntu
Linux 12.04.2 


Thank you, Community!

Alannie



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/ENFA-in-Linx-tp7583942.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From basille.web at ase-research.org  Fri Jun 28 19:44:52 2013
From: basille.web at ase-research.org (Mathieu Basille)
Date: Fri, 28 Jun 2013 13:44:52 -0400
Subject: [R-sig-Geo] ENFA in Linux
In-Reply-To: <1372440926571-7583942.post@n2.nabble.com>
References: <1372440926571-7583942.post@n2.nabble.com>
Message-ID: <51CDCB94.5020500@ase-research.org>

Dear Alannie,

I'm surprised that you have any difference from Windows to Linux, apart of 
the memory problem... This said, you should consider switching to the new 
version of adehabitat: adehabitatHS [1], which uses sp classes instead of 
the old kasc. I wouldn't be too surprised if your problem would be solved 
with this. See the vignette that comes with the package for more details on 
the procedure with the new spatial classes:

vignette("adehabitatHS")

Hope this helps,
Mathieu.


[1] http://cran.r-project.org/web/packages/adehabitatHS/index.html


Le 06/28/2013 01:35 PM, alannie a ?crit :
> Hi R-Sig-Geo community!
>
> I was recently trying to run ADEHabitat ecological niche factor analysis
> (ENFA) using R in Linux. I did not get very far and would like some
> assistance on how to make it work in the future.
>
> I did the following commands:
>
> I installed both ade4 and ADEHabitat on to R in Linux
>
> Imported 26 .asc maps into R using this general syntax:
> bio2<-import.asc("ASCII Envi Variables//caorwa//bio2.asc")
>
> I added location data:
>
> locs<-read.table("XYconcolorsp.csv",head=TRUE,sep=",")
>
> added the libraries for ade4/adehaitat
>
> I compiled the .asc maps into "maps" using:
>
> maps<-as.kasc(list(bio1=bio1,bio2=bio2,bio3=bio3,........etc))
>
> Then I tried to prepare the data for the ENFA:
>
> (dataenfa1<-data2enfa(maps,locs))
>
> After this step I received an error message:
>
> Error in cut.default(x, xc) : 'x' must be numeric
> Error: unexpected 'in' in "Error in"
> data2enfa(maps,locs)
>
>
> I have done the exact same thing in just windows many times and have not
> received an error like this. In fact, it worked perfectly until the end of
> the enfa. I had to switch to Linux because Windows ran out of memory for the
> large area based analyses.
>
> What would be causing the error?
>
> Is there something that needs to be configured differently in Linux?
>
> Please let me know your suggestions!
>
> Linux Specifications:
>
> adehabitat version 1.8.12 on R version 2.15.3 (2013-03-01) running on 64-bit
> Ubuntu
> Linux 12.04.2
>
>
> Thank you, Community!
>
> Alannie
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/ENFA-in-Linx-tp7583942.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 

~$ whoami
Mathieu Basille, PhD

~$ locate --details
University of Florida \\
Fort Lauderdale Research and Education Center
(+1) 954-577-6314
http://ase-research.org/basille

~$ fortune
? Le tout est de tout dire, et je manque de mots
Et je manque de temps, et je manque d'audace. ?
  -- Paul ?luard


From basille.web at ase-research.org  Fri Jun 28 19:52:36 2013
From: basille.web at ase-research.org (Mathieu Basille)
Date: Fri, 28 Jun 2013 13:52:36 -0400
Subject: [R-sig-Geo] ENFA scatter plot problem & habitat suitability map
 question
In-Reply-To: <51CC569B.5090202@gmail.com>
References: <51C1662F.6020605@isprambiente.it>
	<51CC2853.5000000@isprambiente.it> <51CC569B.5090202@gmail.com>
Message-ID: <51CDCD64.3080601@ase-research.org>

Dear Michela,

In addition to Alexandre answer, it is not advised to use the ENFA to 
produce suitability maps. You might be interested in the MADIFA instead, 
also available in adehabitatHS. See [1].

As for your scatter plot, you should investigate your variables 
individually, e.g. with ?hist.enfa (see the parameter 'score'). You may 
have a categorical variable, with only one level used, or something similar.

Hope this helps,
Mathieu.


[1] Calenge, C.; Darmon, G.; Basille, M.; Loison, A. & Jullien, J.-M. 
(2008) The factorial decomposition of the Mahalanobis distances in habitat 
selection studies. Ecology, 89: 555-566 doi 10.1890/06-1750.1


Le 06/27/2013 11:13 AM, Alexandre Villers a ?crit :
> Hello,
>
> Regarding what you call "habitat prediction map", which I guess is habitat
> suitability (if this term is more suited), you can have a look at the
> spatial analyst page
> http://spatial-analyst.net/wiki/index.php?title=Species_Distribution_Modelling
> HTH
>
> Alex
>
>
> P.S.: by the way, you should avoid including images in your messages but
> rather provide a link to it/them...
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 

~$ whoami
Mathieu Basille, PhD

~$ locate --details
University of Florida \\
Fort Lauderdale Research and Education Center
(+1) 954-577-6314
http://ase-research.org/basille

~$ fortune
? Le tout est de tout dire, et je manque de mots
Et je manque de temps, et je manque d'audace. ?
  -- Paul ?luard


From HodgessE at uhd.edu  Fri Jun 28 21:05:19 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Fri, 28 Jun 2013 19:05:19 +0000
Subject: [R-sig-Geo] pqR ?
In-Reply-To: <CANVKczPd1-U=iP-b_LeFmX-_w372U=FiqFHe0OkKFyk6RFmxKA@mail.gmail.com>
References: <9bdee67c285c49f2b148b7b261a196f9@EX-1-HT0.lancs.local>,
	<CANVKczPd1-U=iP-b_LeFmX-_w372U=FiqFHe0OkKFyk6RFmxKA@mail.gmail.com>
Message-ID: <FF9DB805FC41CC4E95825A50F680630217A0CE10@columbia.uhd.campus>

bSomething interesting with pqR:  I was working through the ASDAR book in Chapter 2.  In the accompanying code, one of the chunks said, "this takes a long time".  I timed it with R-3.0.1 and got 17.28 elapsed time.  In pqR, it only took 8.513 in elapsed time.

Not too shabby!

Thanks,
Erin

________________________________________
From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Barry Rowlingson [b.rowlingson at lancaster.ac.uk]
Sent: Thursday, June 27, 2013 11:39 AM
To: Boulanger, Yan
Cc: St-Amant, R?mi; r-sig-geo at r-project.org; Guindon,   Luc; Villemaire,        Philippe
Subject: Re: [R-sig-Geo] pqR ?

Step 1 - write some spatial benchmarks.

 I would benchmark: spatial object creation from files (shapefiles,
typically, but this probably more an I/O benchmark), spatial object
creation from primitive objects (the
SpatialPolygons(list(Polygons(list(matrix))))) stuff), over, and
everything in rgeos, as many kriging packages as you can find, and as
much of raster as you can think of. Quite a bit of that is already in
C so might not get any faster in pqR. But a spatial benchmark suite
would be nice anyway.

I've just benchmarked my time and I have 0s to do this.



On Thu, Jun 27, 2013 at 4:09 PM, Boulanger, Yan
<Yan.Boulanger at rncan-nrcan.gc.ca> wrote:
> Dear forumities,
>
> Did anyone tried pqR for spatial analyses ? I don't know if the worth the case (I will have to try myself) but it seems that pqR (which was released last week) is able to perform operations in parallel, especially on matrices so I guess it could substantially reduce the computation time when e.g., doing simple mathematical operations on rasters.
>
>
> "One notable improvement is that pqR is able to do some numeric computations in parallel with each other, and with other operations of the interpreter, on systems with multiple processors or processor cores" (http://radfordneal.wordpress.com/2013/06/22/announcing-pqr-a-faster-version-of-r/)
> The program is only available for the moment, for UNIX and Linux platforms although it seems to run correctly on Mac.
> Any thoughts?
> Yan
>
> Yan Boulanger, Postdoctoral Visiting Fellow
> Ressources Naturelles Canada, Canadian Forest Service
> Centre de Foresterie des Laurentides
> 1055, rue du P.E.P.S.
> C.P. 10380, succ. Sainte-Foy
> Qu?bec (Qu?bec) Canada
> G1V 4C7
> Tel. : +1 418 649-6859
>
>
>
>         [[alternative HTML version deleted]]
>

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From rrasterr at gmail.com  Sat Jun 29 00:49:57 2013
From: rrasterr at gmail.com (Ana)
Date: Fri, 28 Jun 2013 15:49:57 -0700 (PDT)
Subject: [R-sig-Geo] polygons - spatial query
Message-ID: <1372459797748-7583946.post@n2.nabble.com>

Hi!
I am searching for a spatial package that will let me do spatial queries
between polygons (if they overlay, if they are at a certain distance). Can
anyone point me to a R package that will let me do this type of operations?
Many thanks.



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/polygons-spatial-query-tp7583946.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From mohsensaber68 at gmail.com  Sat Jun 29 09:18:17 2013
From: mohsensaber68 at gmail.com (mohsen saber)
Date: Sat, 29 Jun 2013 11:48:17 +0430
Subject: [R-sig-Geo] raster package customized focal function
Message-ID: <CAJ1paNuAnAqrL7eWwKiVvxFCYqUxi9dqeqZsuFOnAijaBkkHew@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130629/963d9c04/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Sat Jun 29 09:42:33 2013
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sat, 29 Jun 2013 08:42:33 +0100
Subject: [R-sig-Geo] polygons - spatial query
In-Reply-To: <89410b629a8a43afb6eb62bc85c9f165@EX-1-HT0.lancs.local>
References: <89410b629a8a43afb6eb62bc85c9f165@EX-1-HT0.lancs.local>
Message-ID: <CANVKczNSWQO8mEXSs0Bb9ja=h4tSxcQcs9RnQoMq0+gYr4BuVQ@mail.gmail.com>

On Fri, Jun 28, 2013 at 11:49 PM, Ana <rrasterr at gmail.com> wrote:
> Hi!
> I am searching for a spatial package that will let me do spatial queries
> between polygons (if they overlay, if they are at a certain distance). Can
> anyone point me to a R package that will let me do this type of operations?
> Many thanks.

 rgeos

 it's mentioned in the R Spatial Task View:

http://cran.r-project.org/web/views/Spatial.html

but maybe:

"The rgeos package provides an interface to topology functions for sp
objects using GEOS . "

isn't obvious enough for some people to realise 'topology functions'
are what you are looking for, or are what some GIS people call
'spatial analysis' ....

The words 'overlay', 'intersect' and 'point in polygon' don't exist in
that task view...

Barry


From sjmyers3142 at gmail.com  Sat Jun 29 13:30:23 2013
From: sjmyers3142 at gmail.com (Seth Myers)
Date: Sat, 29 Jun 2013 04:30:23 -0700 (PDT)
Subject: [R-sig-Geo] nearest neighbor 3d point pattern
In-Reply-To: <51CC24A3.3000802@aol.com>
References: <51CC24A3.3000802@aol.com>
Message-ID: <1372505423258-7583949.post@n2.nabble.com>

I am having a problem understanding the question fully due to text
formatting, etc.

Is this what you are after?

You have a list (List1) of points and each point has an x,y, and z value
that places it somewhere in that 3-D coordinate system.  You also have a
second list of points (List2), also with x,y,Z values.  For the points in
List1, you would like to know the closest point in List2.  Is this the case? 
Now, is it the case that the coordinate system for List1 and List2 are the
same?  By the same, I mean that the origin (where x,y, and z values are all
equal to zero) is in the same location and the dimensions extend
identically.

Unless you are worried about time of execution and need a clever way to
speed up execution, this seems like the type of function that you could
write in a few hours or less.

Have you tried writing a function utilizing a simple nested for loop
structure and this was somehow not sufficient?  I imagine with several
billion points that the obvious way of doing what you'd like would take
quite a while and use of a large amount of computer resources.



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/nearest-neighbor-3d-point-pattern-tp7583927p7583949.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From HodgessE at uhd.edu  Sun Jun 30 00:11:13 2013
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Sat, 29 Jun 2013 22:11:13 +0000
Subject: [R-sig-Geo] Chapter 4 in ASDAR book GeoTiff question
Message-ID: <FF9DB805FC41CC4E95825A50F680630217A0D389@columbia.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130629/20c1ff9e/attachment.pl>

From carotenuto_francesco at yahoo.it  Sun Jun 30 08:34:02 2013
From: carotenuto_francesco at yahoo.it (Francesco Carotenuto)
Date: Sun, 30 Jun 2013 07:34:02 +0100 (BST)
Subject: [R-sig-Geo] Regression kriging or kriging with external drift
Message-ID: <1372574042.54540.BPMail_high_noncarrier@web133003.mail.ir2.yahoo.com>


Hi to all. Is there a way to perform regression kriging (kriging with external drift) by using the intamap package? If yes, how to set the covariate? Thanks.


From tea3rd at gmail.com  Sun Jun 30 18:11:02 2013
From: tea3rd at gmail.com (Thomas Adams)
Date: Sun, 30 Jun 2013 12:11:02 -0400
Subject: [R-sig-Geo] Chapter 4 in ASDAR book GeoTiff question
In-Reply-To: <FF9DB805FC41CC4E95825A50F680630217A0D389@columbia.uhd.campus>
References: <FF9DB805FC41CC4E95825A50F680630217A0D389@columbia.uhd.campus>
Message-ID: <CAGxgkWjSU3F4LjsdKvd2bzhrFw9+=YqQOp9uBHRFB84oyoJi4g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130630/5fd6576a/attachment.pl>

From losedaghat at gmail.com  Sun Jun 30 19:43:52 2013
From: losedaghat at gmail.com (L S)
Date: Sun, 30 Jun 2013 13:43:52 -0400
Subject: [R-sig-Geo] Is it possible to "bin" or grid ppp objects?
Message-ID: <CAMgNocvdifBVqkQtMaWfVjP4HvDtRi21qLCEGENxaQBDOufzKw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20130630/cee4616b/attachment.pl>

From marcelino.delacruz at upm.es  Sun Jun 30 22:07:17 2013
From: marcelino.delacruz at upm.es (Marcelino de la Cruz)
Date: Sun, 30 Jun 2013 22:07:17 +0200
Subject: [R-sig-Geo] Is it possible to "bin" or grid ppp objects?
In-Reply-To: <CAMgNocvdifBVqkQtMaWfVjP4HvDtRi21qLCEGENxaQBDOufzKw@mail.gmail.com>
References: <CAMgNocvdifBVqkQtMaWfVjP4HvDtRi21qLCEGENxaQBDOufzKw@mail.gmail.com>
Message-ID: <51D08FF5.2030709@upm.es>

Hi LS,
you can us function tess to create a tesselation and then split your ppp 
with it. See this example:

data(lansing)
lansing
gridA<- tess(xgrid=seq(0,1, by=0.1), ygrid=seq(0,1,by=0.1))
gridA
plot(lansing)
plot(gridA, add=T)
lansing.g=split(lansing, gridA)
lansing.g
length(lansing.g)

lansing.g[[1]]
lansing.g[[1]]$n

Kest(lansing.g[[1]])
Kest(lansing.g[[2]])
...
Kest(lansing.g[[100]])



HTH,

Marcelino

El 30/06/2013 19:43, L S escribi?:
> Hi,
>
> I am not very savvy with spatial data analysis (though I am doing my best
> to learn).  I have embarked on a spatial analysis project and am not sure
> whether what I would like to do is possible.
>
> My dataset is over 500,000 points (with lat, long attributes as well as a
> single numerical attribute).  The data was not collected in a spatially
> regular or predictable way--the points are all over the place, with some
> areas having greater concentration of points.
>
> I created a point process object with my data, using a shape file as the
> observation window (owin).  I have been trying, with no success, to divide
> this owin into a regular grid.  For example, could I create 0.5 x 0.5
> degree (or in any other measurement) gridded squares over the owin and then
> access the points in each square?  The purpose is to be able to analyze the
> points in each grid independently and to be able to visualize the data
> using the grids (such plotting the mean of points within the grid cell
> instead of each individual point).
>
> The most promising r function I have found thus far is the quadrantcount
> function in spatstat where the owin is divided into grid cells and the
> number of points in each cell is counted.  However, I am unable to access
> the points in each cell created by quadrantcount--is this possible at all?
>   For example, one cell may have 2000 points...can I then put those points
> in a data frame and do data analysis on just those?  Or, alternatively, to
> use those cells for plotting the mean value of the points?
>
> Any advice would be greatly appreciated.  I look forward to hearing your
> feedback and guidance.
>
> Thanks,
> LS
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


