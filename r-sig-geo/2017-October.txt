From sergio.estay at uach.cl  Sun Oct  1 23:32:00 2017
From: sergio.estay at uach.cl (Sergio A Estay)
Date: Sun, 1 Oct 2017 18:32:00 -0300
Subject: [R-sig-Geo] buffer from dismo package error
Message-ID: <c8e11297-e06e-0652-0931-fa9c295e3b1c@uach.cl>

Hi everybody,

I am trying to create a buffer around several points using the function 
circles in the R package dismo. The problem arises with points that are 
close to the 180 or -180 longitude. In these cases the buffer is not a 
circle but a band that connect both sides of the map extension. Probably 
I am missing some basic option, but I am wondering if there is any way 
to avoid this issue. Below an example code and its result.

library(dismo)

library(rgdal)

xx<-cbind(c(-175.20, -106.65,-103.97,-17.76),c(-21.13,35.08,36.78,28.65))

pp<-as.data.frame(rep(1,4))

zz<-SpatialPointsDataFrame(xx,pp)

cc<-circles(zz,1000000,lonlat=TRUE)

plot(cc)


Thanks

Sergio A Estay

-- 
Ejemplo 9

Sergio A. Estay
Inst. Ciencias Ambientales y Evolutivas
Universidad Austral de Chile
Casilla 567, Valdivia, Chile
Phone: 5663-2293913
Web Pages: Department <http://icaev.cl/academicos/sergio-estay/>, 
Scholar 
<http://scholar.google.cl/citations?user=94JOMYcAAAAJ&hl=en&oi=ao>, 
Researchgate 
<https://www.researchgate.net/profile/Sergio_Estay2/?ev=hdr_xprf>


	[[alternative HTML version deleted]]


From b.rowlingson at lancaster.ac.uk  Mon Oct  2 00:23:38 2017
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sun, 1 Oct 2017 23:23:38 +0100
Subject: [R-sig-Geo] buffer from dismo package error
In-Reply-To: <c8e11297-e06e-0652-0931-fa9c295e3b1c@uach.cl>
References: <c8e11297-e06e-0652-0931-fa9c295e3b1c@uach.cl>
Message-ID: <CANVKczO57HOczk=JL1ZvjeWBXViPes_5d30Az55fou62n32+6w@mail.gmail.com>

This has been cross-posted to gis.stackexchange.com if people want to
tackle it there:


https://gis.stackexchange.com/questions/257175/buffer-from-points-using-dismo-r

Barry


On Sun, Oct 1, 2017 at 10:32 PM, Sergio A Estay <sergio.estay at uach.cl>
wrote:

> Hi everybody,
>
> I am trying to create a buffer around several points using the function
> circles in the R package dismo. The problem arises with points that are
> close to the 180 or -180 longitude. In these cases the buffer is not a
> circle but a band that connect both sides of the map extension. Probably
> I am missing some basic option, but I am wondering if there is any way
> to avoid this issue. Below an example code and its result.
>
> library(dismo)
>
> library(rgdal)
>
> xx<-cbind(c(-175.20, -106.65,-103.97,-17.76),c(-21.13,35.08,36.78,28.65))
>
> pp<-as.data.frame(rep(1,4))
>
> zz<-SpatialPointsDataFrame(xx,pp)
>
> cc<-circles(zz,1000000,lonlat=TRUE)
>
> plot(cc)
>
>
> Thanks
>
> Sergio A Estay
>
> --
> Ejemplo 9
>
> Sergio A. Estay
> Inst. Ciencias Ambientales y Evolutivas
> Universidad Austral de Chile
> Casilla 567, Valdivia, Chile
> Phone: 5663-2293913
> Web Pages: Department <http://icaev.cl/academicos/sergio-estay/>,
> Scholar
> <http://scholar.google.cl/citations?user=94JOMYcAAAAJ&hl=en&oi=ao>,
> Researchgate
> <https://www.researchgate.net/profile/Sergio_Estay2/?ev=hdr_xprf>
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From sarosama at feps.edu.eg  Mon Oct  2 10:31:05 2017
From: sarosama at feps.edu.eg (sara osama)
Date: Mon, 2 Oct 2017 11:31:05 +0300
Subject: [R-sig-Geo] Question about the anisotropy factor in the sum metric
 spatiotemporalcovariance gstat
In-Reply-To: <CAJsLiQTz65eyRRkXumry9acAzO62vv9g__4tqcwdKOfnGHNtfg@mail.gmail.com>
References: <CAJsLiQS8P54Gd0pSs0-UpsBPnH7yreQr4J1esaTYSfQftfVZtQ@mail.gmail.com>
 <CAJsLiQSU=CDnvGs0EW5bK7iNGoieBY4vp49_gNfRhLZQyNGNFg@mail.gmail.com>
 <CAJsLiQRUQM06V9bxCxTYsx-UaO2fKi-MrfTWpWqAcAGBuJm8+A@mail.gmail.com>
 <CAJsLiQTz65eyRRkXumry9acAzO62vv9g__4tqcwdKOfnGHNtfg@mail.gmail.com>
Message-ID: <CAJsLiQQKPzg=sOB2LMFNuLinA3yUciYNptJ3JSBWCLRLixmFQQ@mail.gmail.com>

Dear all.
I have a question about the sum metric spatiotemporalcovariance function in
gstat. I need to understand the theoretical background and the meaning of
the anisotropy (Anis) in it.
If anyone can help me in this I will be deeply appreciated
Best regards
Sara

	[[alternative HTML version deleted]]


From Katherine.Wheeler-Martin at nyumc.org  Mon Oct  2 21:49:11 2017
From: Katherine.Wheeler-Martin at nyumc.org (Wheeler-Martin, Katherine)
Date: Mon, 2 Oct 2017 19:49:11 +0000
Subject: [R-sig-Geo] edit.nb problem with an island
Message-ID: <3f1337807f4c41e6a9cf55a40fe5ccd0@nyumc.org>

Dear all,

I am encountering an issue related to an old thread from 2011 (pasted below), and would like to know if someone could provide sample code for when one wishes to manually delete contiguity between two points, while retaining all other contiguities for those points.

I am relatively new with R, so I apologize if this is obvious!

Thank you,

Katie



Dear Alexander,



Following your suggestion I have used this syntax and works perfectly:



x.nb[[67]] = as.integer(sort(c(43,53)))

x.nb[[43]] = as.integer(sort(c(x.nb[[43]],67)))

x.nb[[53]] = as.integer(sort(c(x.nb[[53]],67)))



Thank you very much for your help!



Marc



2011/5/17 Alexander Werner <werner at wirtschaft.uni-kassel.de<https://stat.ethz.ch/mailman/listinfo/r-sig-geo>>:

> Dear Marc,

>

> facing a similar problem I choose to correct the NB object manually:

>

> NBDKR439[[350]]= as.integer(sort(c(NBDKR439[[350]],362)))

> NBDKR439[[362]]= as.integer(350)

>

> Hope this helps,

> Alexander

>

>

>

> Am 16.05.2011 19:01, schrieb Marc Mar? Dell'Olmo:

>>

>> Dear all,

>>

>> I have a cartography with an island, i.e. a polygon that doesn't share

>> border with other polygons (CODIGO=3120104012). I would like to

>> manually assign two areas (CODIGO=3120103024 and CODIGO=3120103014) as

>> a neighborhood areas of this island with the edit.nb function, and

>> after that to obtain the neighborhood matrix. I have followed this

>> syntax and I don't understand why the summary(x.nb2) still shows one

>> region with no link...

>>

>> If it helps, you can download the map at:

>> http://dl.dropbox.com/u/14934021/map.zip

>>

>>

>> Thank you very much,

>>

>> Marc

>>

>> map<-readShapePoly("F:/map/map.shp")

>> map<-map[order(map$CODIGO),]

>>

>>

>> x.nb<-poly2nb(map)

>> summary(x.nb)

>>

>> #Neighbour list object:

>> #Number of regions: 122

>> #Number of nonzero links: 724

>> #Percentage nonzero weights: 4.864284

>> #Average number of links: 5.934426

>> #1 region with no links:

>> #66

>> #Link number distribution:

>>

>>  #0  2  3  4  5  6  7  8  9 10 11 12 14

>>  #1  1  7 19 22 31 21 12  2  2  2  1  1

>> #1 least connected region:

>> #101 with 2 links

>> #1 most connected region:

>> #29 with 14 links

>>

>> nb<- x.nb

>> which(card(nb) == 0)

>> attr(nb, "region.id")[which(card(nb) == 0)]

>>

>>

>> x.nb2<- edit.nb(x.nb,polys=map)

>>

>> #>  x.nb2<- edit.nb(x.nb,polys=map)

>> #Identifying contiguity for deletion ...

>> #No contiguity between chosen points

>> #Add contiguity? (y/n) y

>> #added contiguity between point 53 and 67

>> #Options: quit[q] refresh[r] continue[c] c

>> #Identifying contiguity for deletion ...

>> #No contiguity between chosen points

>> #Add contiguity? (y/n) y

>> #added contiguity between point 43 and 67

>> #Options: quit[q] refresh[r] continue[c] q

>>

>>

>> summary(x.nb2)

>>

>> #Neighbour list object:

>> #Number of regions: 122

>> #Number of nonzero links: 726

>> #Percentage nonzero weights: 4.877721

>> #Average number of links: 5.95082

>> #1 region with no links:

>> #66

>> #Non-symmetric neighbours list

>> #Link number distribution:

>>

>>  #0  2  3  4  5  6  7  8  9 10 11 12 14

>>  #1  1  7 18 22 32 21 12  2  2  2  1  1

>> #1 least connected region:

>> #101 with 2 links

>> #1 most connected region:

>> #29 with 14 links

>>

>> _______________________________________________

>> R-sig-Geo mailing list

>> R-sig-Geo at r-project.org<https://stat.ethz.ch/mailman/listinfo/r-sig-geo>

>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

>>

>

> --

> Dipl.-?k. Alexander Werner

> _______________________________________________

> Universit?t Kassel

> Fachbereich Wirtschaftswissenschaften

> Fachgebiet Empirische Wirtschaftsforschung

> Nora-Platiel-Str. 4

> 34109 Kassel

>

> Tel.: 0561 / 804 - 3044

> werner at wirtschaft.uni-kassel.de<https://stat.ethz.ch/mailman/listinfo/r-sig-geo>

> http://cms.uni-kassel.de/unicms/index.php?id=31247

> _______________________________________________

>

>



Katie Wheeler-Martin, MPH
Senior Data Analyst
Department of Surgery
New York University School of Medicine
550 First Avenue
New York, NY 10016
Office: 1.212.263.6308
katherine.wheeler-martin at nyumc.org<mailto:katherine.wheeler-martin at nyumc.org>


------------------------------------------------------------
This email message, including any attachments, is for th...{{dropped:14}}


From Roger.Bivand at nhh.no  Mon Oct  2 22:02:16 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 2 Oct 2017 20:02:16 +0000
Subject: [R-sig-Geo] edit.nb problem with an island
In-Reply-To: <3f1337807f4c41e6a9cf55a40fe5ccd0@nyumc.org>
References: <3f1337807f4c41e6a9cf55a40fe5ccd0@nyumc.org>
Message-ID: <E7824B12CF1B784E.e2190d4a-a775-4891-a28b-0429f574fb37@mail.outlook.com>

How many observations in total? If not to many, edit.nb() should still work, but I doubt that it will work in an IDE like Rstudio.

Roger Bivand
Norwegian School of Economics
Bergen, Norway



Fra: Wheeler-Martin, Katherine
Sendt: mandag 2. oktober, 21.49
Emne: Re: [R-sig-Geo] edit.nb problem with an island
Til: r-sig-geo at r-project.org


Dear all, I am encountering an issue related to an old thread from 2011 (pasted below), and would like to know if someone could provide sample code for when one wishes to manually delete contiguity between two points, while retaining all other contiguities for those points. I am relatively new with R, so I apologize if this is obvious! Thank you, Katie Dear Alexander, Following your suggestion I have used this syntax and works perfectly: x.nb[[67]] = as.integer(sort(c(43,53))) x.nb[[43]] = as.integer(sort(c(x.nb[[43]],67))) x.nb[[53]] = as.integer(sort(c(x.nb[[53]],67))) Thank you very much for your help! Marc 2011/5/17 Alexander Werner >: > Dear Marc, > > facing a similar problem I choose to correct the NB object manually: > > NBDKR439[[350]]= as.integer(sort(c(NBDKR439[[350]],362))) > NBDKR439[[362]]= as.integer(350) > > Hope this helps, > Alexander > > > > Am 16.05.2011 19:01, schrieb Marc Mar? Dell'Olmo: >> >> Dear all, >> >> I have a cartography with an island, i.e. a polygon that doesn't share >> border with other polygons (CODIGO=3120104012). I would like to >> manually assign two areas (CODIGO=3120103024 and CODIGO=3120103014) as >> a neighborhood areas of this island with the edit.nb function, and >> after that to obtain the neighborhood matrix. I have followed this >> syntax and I don't understand why the summary(x.nb2) still shows one >> region with no link... >> >> If it helps, you can download the map at: >> http://dl.dropbox.com/u/14934021/map.zip >> >> >> Thank you very much, >> >> Marc >> >> map> map> >> >> x.nb> summary(x.nb) >> >> #Neighbour list object: >> #Number of regions: 122 >> #Number of nonzero links: 724 >> #Percentage nonzero weights: 4.864284 >> #Average number of links: 5.934426 >> #1 region with no links: >> #66 >> #Link number distribution: >> >> #0 2 3 4 5 6 7 8 9 10 11 12 14 >> #1 1 7 19 22 31 21 12 2 2 2 1 1 >> #1 least connected region: >> #101 with 2 links >> #1 most connected region: >> #29 with 14 links >> >> nb> which(card(nb) == 0) >> attr(nb, "region.id")[which(card(nb) == 0)] >> >> >> x.nb2> >> #> x.nb2> #Identifying contiguity for deletion ... >> #No contiguity between chosen points >> #Add contiguity? (y/n) y >> #added contiguity between point 53 and 67 >> #Options: quit[q] refresh[r] continue[c] c >> #Identifying contiguity for deletion ... >> #No contiguity between chosen points >> #Add contiguity? (y/n) y >> #added contiguity between point 43 and 67 >> #Options: quit[q] refresh[r] continue[c] q >> >> >> summary(x.nb2) >> >> #Neighbour list object: >> #Number of regions: 122 >> #Number of nonzero links: 726 >> #Percentage nonzero weights: 4.877721 >> #Average number of links: 5.95082 >> #1 region with no links: >> #66 >> #Non-symmetric neighbours list >> #Link number distribution: >> >> #0 2 3 4 5 6 7 8 9 10 11 12 14 >> #1 1 7 18 22 32 21 12 2 2 2 1 1 >> #1 least connected region: >> #101 with 2 links >> #1 most connected region: >> #29 with 14 links >> >> _______________________________________________ >> R-sig-Geo mailing list >> R-sig-Geo at r-project.org >> https://stat.ethz.ch/mailman/listinfo/r-sig-geo >> > > -- > Dipl.-?k. Alexander Werner > _______________________________________________ > Universit?t Kassel > Fachbereich Wirtschaftswissenschaften > Fachgebiet Empirische Wirtschaftsforschung > Nora-Platiel-Str. 4 > 34109 Kassel > > Tel.: 0561 / 804 - 3044 > werner at wirtschaft.uni-kassel.de > http://cms.uni-kassel.de/unicms/index.php?id=31247 > _______________________________________________ > > Katie Wheeler-Martin, MPH Senior Data Analyst Department of Surgery New York University School of Medicine 550 First Avenue New York, NY 10016 Office: 1.212.263.6308 katherine.wheeler-martin at nyumc.org ------------------------------------------------------------ This email message, including any attachments, is for th...{{dropped:14}}


	[[alternative HTML version deleted]]


From kmccaffrey2011 at my.fit.edu  Tue Oct  3 23:41:22 2017
From: kmccaffrey2011 at my.fit.edu (Kelly McCaffrey)
Date: Tue, 3 Oct 2017 17:41:22 -0400
Subject: [R-sig-Geo] sdm package gam model smoothing
Message-ID: <CACT55_-8u-jrcqqJzHbSnHDo=9H57p0xhVSx+cY1qs9QuHwEuA@mail.gmail.com>

Hello everyone,
I'm working on some species distribution models using the package 'sdm' to
perform the multiple-model k-fold cross validation. But, upon viewing the
results, I'm concerned that smoothing parameters are not being applied to
the gam model formula. Unfortunately, I'm not able to provide you with the
example data, but here's the piece of code I'm working with:

data<-sdmData(pa~SBT+Chla+PAR+Kd+Wave+Depth,train=new_sdmdata)
model1<-sdm(pa~SBT+Chla+PAR+Kd+Wave+Depth, data=data,
family=gaussian(link="logit"),
            methods=c("glm", "gam"),
            replication="sub", test.percent=25, n=5)
getModelInfo(model1)
model1
##This code functions, but does not seem to apply smoothing parameters to
the gam model

model1<-sdm(pa~s(SBT)+s(Chla)+s(PAR)+s(Kd)+s(Wave)+s(Depth), data=data,
            family=gaussian(link="logit"), methods=c("glm", "gam"),
            replication="sub", test.percent=25, n=5)
getModelInfo(model1)
model1
##This piece of code returns: Error in u[[i]] <- list() :
 ## attempt to select less than one element in OneIndex

Does anyone know of the proper way to specify that smoothing parameters be
applied to gam models?
Thank you!
Kelly McCaffrey

-- 

*Kelly McCaffrey*
Graduate Student
Department of Biological Sciences
Florida Institute of Technology
150 W. University Blvd.
Melbourne, FL, 32901

	[[alternative HTML version deleted]]


From saubhagya at gatech.edu  Wed Oct  4 13:03:37 2017
From: saubhagya at gatech.edu (Rathore, Saubhagya Singh)
Date: Wed, 4 Oct 2017 11:03:37 +0000
Subject: [R-sig-Geo] R version 3.3.2,
 Windows 10: gstat package: Error in fitting a variogram model using
 'fit.variogram' function
Message-ID: <DM5PR07MB3179E79F528667ACF2C86440CF730@DM5PR07MB3179.namprd07.prod.outlook.com>

Hello Everyone,

I am having some problem with fit.variogram  function of the gstat package.  My code, data, error message and traceback() message can be found below. Any suggestion to approach this problem would be appreciated.
# Code Starts---------------------------------------------------------------------------------------------------------------------------------------------------
library(gstat)
mydf<-as.data.frame(read.table("Sample_data.xlsx",header = TRUE,sep = ",",na.strings = "EMPTY"))
coordinates(mydf) = ~x+y
c.vgm.exp<-variogram(z~1,data=mydf,cutoff=60000, width = 60000/15)
c.vgm.fit<-fit.variogram(c.vgm.exp,vgm(nugget=1000000,psill=6000000,model ="Exp",range = 40000),fit.method = 7)
# Code End--------------------------------------------------------------------------------------------------------------------------------------------------------

Data file can be obtained from:
https://gtvault-my.sharepoint.com/personal/srathore6_gatech_edu/_layouts/15/guestaccess.aspx?docid=0b5983d45c9544203a5081cd501c64de4&authkey=AYhC8_ZVvGFG18JHHWMgUa4&expiration=2017-12-01T19%3a45%3a23.000Z

Error Message:
> c.vgm.fit<-fit.variogram(c.vgm.exp,vgm(nugget=1000000,psill=6000000,model ="Exp",range = 40000),fit.method = 7)
Error in switch(model, exponential = fit.exponential(v.object, c0 = nugget,  :
  EXPR must be a length 1 vector
> traceback()
1: fit.variogram(c.vgm.exp, vgm(nugget = 1e+06, psill = 6e+06, model = "Exp",
       range = 40000), fit.method = 7)



Thanks and Regards,

Saubhagya Singh Rathore
1st Year Graduate Student
Civil and Environmental Engineering
Georgia Instutute of Technology


	[[alternative HTML version deleted]]


From b.graeler at 52north.org  Wed Oct  4 13:44:44 2017
From: b.graeler at 52north.org (=?UTF-8?Q?Dr._Benedikt_Gr=c3=a4ler?=)
Date: Wed, 4 Oct 2017 13:44:44 +0200
Subject: [R-sig-Geo] Question about the anisotropy factor in the sum
 metric spatiotemporalcovariance gstat
In-Reply-To: <CAJsLiQQKPzg=sOB2LMFNuLinA3yUciYNptJ3JSBWCLRLixmFQQ@mail.gmail.com>
References: <CAJsLiQS8P54Gd0pSs0-UpsBPnH7yreQr4J1esaTYSfQftfVZtQ@mail.gmail.com>
 <CAJsLiQSU=CDnvGs0EW5bK7iNGoieBY4vp49_gNfRhLZQyNGNFg@mail.gmail.com>
 <CAJsLiQRUQM06V9bxCxTYsx-UaO2fKi-MrfTWpWqAcAGBuJm8+A@mail.gmail.com>
 <CAJsLiQTz65eyRRkXumry9acAzO62vv9g__4tqcwdKOfnGHNtfg@mail.gmail.com>
 <CAJsLiQQKPzg=sOB2LMFNuLinA3yUciYNptJ3JSBWCLRLixmFQQ@mail.gmail.com>
Message-ID: <ffdfd137-9462-6aca-6248-644ad618feaa@52north.org>

Dear Sara,

the anisotropy in the metric spatio-temporal covariance models describes 
how spatial distances relate to temporal distance (i.e. to answer the 
question: At which temporal separation (x hours/days/weeks/...) do have 
two locations 1 m/km/... apart the same correlation?). Every model that 
includes the metric model has to have a spatio-temporal anisotropy 
parameter. For more details, please refer to the vignette of gstat [1].

HTH,

  Ben

[1] 
https://cran.r-project.org/web/packages/gstat/vignettes/spatio-temporal-kriging.pdf



On 02/10/2017 10:31, sara osama wrote:
> Dear all.
> I have a question about the sum metric spatiotemporalcovariance function in
> gstat. I need to understand the theoretical background and the meaning of
> the anisotropy (Anis) in it.
> If anyone can help me in this I will be deeply appreciated
> Best regards
> Sara
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Dr. Benedikt Gr?ler
52?North Initiative for Geospatial Open Source Software GmbH
Martin-Luther-King-Weg 24
48155 Muenster, Germany

E-Mail: b.graeler at 52north.org
Fon: +49-(0)-251/396371-39
Fax: +49-(0)-251/396371-11

http://52north.org/
Twitter: @FiveTwoN

General Managers: Dr. Albert Remke, Dr. Andreas Wytzisk
Local Court Muenster HRB 10849
-------------- next part --------------
A non-text attachment was scrubbed...
Name: b_graeler.vcf
Type: text/x-vcard
Size: 445 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20171004/d0afb0da/attachment.vcf>

From mirzaceng at gmail.com  Wed Oct  4 19:32:07 2017
From: mirzaceng at gmail.com (Mirza Cengic)
Date: Wed, 4 Oct 2017 19:32:07 +0200
Subject: [R-sig-Geo] WorldClim Version2
In-Reply-To: <CAJAunffdBCqiV6qXhFuGB4No_gkzFxZzrPNMU2tE3g72-pS3gQ@mail.gmail.com>
References: <D5EE8B18.715A0%andy.bunn@wwu.edu>
 <f2f0c0c6-357c-a893-5577-2e2aca89e56b@urjc.es>
 <D5EEBF24.71642%andy.bunn@wwu.edu>
 <a4106a43-9c5b-d7fc-db4f-e0c33537a2ce@mbacou.com>
 <212df301-09cb-88a8-7ebb-985f4fbca04d@urjc.es>
 <CAJAunffdBCqiV6qXhFuGB4No_gkzFxZzrPNMU2tE3g72-pS3gQ@mail.gmail.com>
Message-ID: <CAJAunfc9TB2i3WHYCekuCqr9Os6znsbQB0wqsF0wRjV7_p4jbg@mail.gmail.com>

Hi Andy,

for quick and dirty solution you can replace the url that the getData()
function reads for bioclim data. You can find the source code of the
function here https://github.com/cran/raster/blob/master/R/getData.R#L277
(note
that there's if/else flow for different resolutions of climate data). From
there you can make a custom function, or recompile the package if you
prefer it that way.

URL for the bioclimatic layers is
http://biogeo.ucdavis.edu/data/worldclim/v2.0/tif/base/wc2.0_RES_bio.zip,
where "RES" can be 10m, 5m, 2.5m, or 30s, and you'll need to play around a
bit with how the theurl string is being created in relation with the
resolution.

M

On Wed, Oct 4, 2017 at 2:00 PM, Mirza Cengic <m.cengic at science.ru.nl> wrote:

> Hi Andy,
>
> for quick and dirty solution you can replace the url that the getData()
> function reads for bioclim data. You can find the source code of the
> function here
> <https://github.com/cran/raster/blob/master/R/getData.R#L277>(note that
> there's if/else flow for different resolutions of climate data). From there
> you can make a custom function, or recompile the package if you prefer it
> that way.
>
> URL for the bioclimatic layers is http://biogeo.ucdavis.edu/
> data/worldclim/v2.0/tif/base/wc2.0_RES_bio.zip, where "RES" can be 10m,
> 5m, 2.5m, or 30s, and you'll need to play around a bit with how the theurl
> string is being created in relation with the resolution.
>
> M
>
> On Thu, Sep 28, 2017 at 9:44 AM, Marcelino de la Cruz Rot <
> marcelino.delacruz at urjc.es> wrote:
>
>> I'm afraid it don't.
>>
>> At least in version 2.5.8, as it  appears from  this line in .wordclim():
>>
>>  theurl <- paste("http://biogeo.ucdavis.edu/data/climate/worldclim/1_4/
>> grid/cur/",
>>             zip, sep = "")
>>
>> Marcelino
>>
>>
>>
>> El 28/09/2017 a las 4:31, Bacou, Melanie escribi?:
>>
>>>
>>> I would assume `raster::getData("worldclim", ...)` uses WorldClim
>>> version 2?
>>>
>>> --Mel.
>>>
>>>
>>> On 09/25/2017 05:14 PM, Andy Bunn wrote:
>>>
>>>> Great. Thanks Marcelino. I have all the data dowloaded. I'm surprised
>>>> that
>>>> there isn't a dedicated package for worldclim yet ? making one that ties
>>>> in with packages like BIEN would be great. Perhaps I'll work on it
>>>> someday.
>>>>
>>>> -A
>>>>
>>>> On 9/25/17, 11:32 AM, "Marcelino de la Cruz Rot"
>>>> <marcelino.delacruz at urjc.es>  wrote:
>>>>
>>>> Hello Andy,
>>>>>
>>>>> I've been using raster to play with WordlClim 2.0 and it works fine.
>>>>> For
>>>>> example:
>>>>>
>>>>> # Download 2.5' arc P data of worldclim 2.0
>>>>> # The file is 68.5 MB so it takes some time to download
>>>>> P_url<-
>>>>> "http://biogeo.ucdavis.edu/data/worldclim/v2.0/tif/base/wc2.
>>>>> 0_2.5m_prec.zi p"
>>>>> download.file(P_url, destfile="wc2.0_2.5m_prec.zip")
>>>>> unzip("wc2.0_2.5m_prec.zip")
>>>>>
>>>>> #  Generate a stack object  with all monthly precipitation layers
>>>>> P_filenames<- paste("wc2.0_2.5m_prec_", c(paste(0,1:9, sep=""), 11,12),
>>>>> ".tif",sep="")
>>>>>
>>>>> prec2.5<- stack(P_filenames)
>>>>>
>>>>> # Compute annual precipitation as a raster layer
>>>>> P2.5<- sum(prec2.5)
>>>>>
>>>>> # etc.
>>>>>
>>>>> Cheers,
>>>>>
>>>>> Marcelino
>>>>>
>>>>>
>>>>> El 25/09/2017 a las 19:42, Andy Bunn escribi?:
>>>>>
>>>>>> Hello all, is anybody aware of a R package that gracefully works with
>>>>>> version 2 of the WorldClim data?
>>>>>>
>>>>>> http://worldclim.org/version2
>>>>>>
>>>>>>
>>>>>> I have all the data extracted locally but I'm wondering if there is
>>>>>> something akin to getData in raster that will work with version 2 and
>>>>>> not
>>>>>> 1.4 as (the brilliant) raster package currently does.
>>>>>>
>>>>>> Many thanks, Andy
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>> .
>>>>>>
>>>>>> --
>>>>> Marcelino de la Cruz Rot
>>>>> Depto. de Biolog?a y Geolog?a
>>>>> F?sica y Qu?mica Inorg?nica
>>>>> Universidad Rey Juan Carlos
>>>>> M?stoles Espa?a
>>>>>
>>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>
>>> .
>>>
>>
>>
>> --
>> Marcelino de la Cruz Rot
>> Depto. de Biolog?a y Geolog?a
>> F?sica y Qu?mica Inorg?nica
>> Universidad Rey Juan Carlos
>> M?stoles Espa?a
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>
>
> --
> *Mirza ?engi?*
>
> *Junior Researcher | Department of Environmental Science*
> Radboud University | Heyendaalseweg 135
> 6525 AJ Nijmegen | The Netherlands
>
> +31 657020823 <+31%206%2057020823> | +38761908392 <+387%2061%20908%20392>
> Skype: mirzacengic
> <https://www.linkedin.com/in/mirzacengic>
>



-- 
*Mirza ?engi?*

*Junior Researcher | Department of Environmental Science*
Radboud University | Heyendaalseweg 135
6525 AJ Nijmegen | The Netherlands

+31 657020823 | +38761908392
Skype: mirzacengic
<https://www.linkedin.com/in/mirzacengic>

	[[alternative HTML version deleted]]


From Andy.Bunn at wwu.edu  Thu Oct  5 19:11:55 2017
From: Andy.Bunn at wwu.edu (Andy Bunn)
Date: Thu, 5 Oct 2017 17:11:55 +0000
Subject: [R-sig-Geo] WorldClim Version2
In-Reply-To: <CAJAunfc9TB2i3WHYCekuCqr9Os6znsbQB0wqsF0wRjV7_p4jbg@mail.gmail.com>
References: <D5EE8B18.715A0%andy.bunn@wwu.edu>
 <f2f0c0c6-357c-a893-5577-2e2aca89e56b@urjc.es>
 <D5EEBF24.71642%andy.bunn@wwu.edu>
 <a4106a43-9c5b-d7fc-db4f-e0c33537a2ce@mbacou.com>
 <212df301-09cb-88a8-7ebb-985f4fbca04d@urjc.es>
 <CAJAunffdBCqiV6qXhFuGB4No_gkzFxZzrPNMU2tE3g72-pS3gQ@mail.gmail.com>
 <CAJAunfc9TB2i3WHYCekuCqr9Os6znsbQB0wqsF0wRjV7_p4jbg@mail.gmail.com>
Message-ID: <D5FBB5D6.71C2D%andy.bunn@wwu.edu>

Clever! Thanks.

From: Mirza Cengic <mirzaceng at gmail.com<mailto:mirzaceng at gmail.com>>
Date: Wednesday, October 4, 2017 at 10:32 AM
To: Marcelino de la Cruz Rot <marcelino.delacruz at urjc.es<mailto:marcelino.delacruz at urjc.es>>
Cc: Melanie Bacou <mel at mbacou.com<mailto:mel at mbacou.com>>, Andy Bunn <andy.bunn at wwu.edu<mailto:andy.bunn at wwu.edu>>, R-sig-Geo <r-sig-geo at r-project.org<mailto:r-sig-geo at r-project.org>>
Subject: Re: [R-sig-Geo] WorldClim Version2

Hi Andy,

for quick and dirty solution you can replace the url that the getData()
function reads for bioclim data. You can find the source code of the
function here https://github.com/cran/raster/blob/master/R/getData.R#L277 (note
that there's if/else flow for different resolutions of climate data). From
there you can make a custom function, or recompile the package if you
prefer it that way.

URL for the bioclimatic layers is
http://biogeo.ucdavis.edu/data/worldclim/v2.0/tif/base/wc2.0_RES_bio.zip,
where "RES" can be 10m, 5m, 2.5m, or 30s, and you'll need to play around a
bit with how the theurl string is being created in relation with the
resolution.

M

On Wed, Oct 4, 2017 at 2:00 PM, Mirza Cengic <m.cengic at science.ru.nl<mailto:m.cengic at science.ru.nl>> wrote:
Hi Andy,

for quick and dirty solution you can replace the url that the getData() function reads for bioclim data. You can find the source code of the function here <https://github.com/cran/raster/blob/master/R/getData.R#L277> (note that there's if/else flow for different resolutions of climate data). From there you can make a custom function, or recompile the package if you prefer it that way.

URL for the bioclimatic layers is http://biogeo.ucdavis.edu/data/worldclim/v2.0/tif/base/wc2.0_RES_bio.zip, where "RES" can be 10m, 5m, 2.5m, or 30s, and you'll need to play around a bit with how the theurl string is being created in relation with the resolution.

M

On Thu, Sep 28, 2017 at 9:44 AM, Marcelino de la Cruz Rot <marcelino.delacruz at urjc.es<mailto:marcelino.delacruz at urjc.es>> wrote:
I'm afraid it don't.

At least in version 2.5.8, as it  appears from  this line in .wordclim():

 theurl <- paste("http://biogeo.ucdavis.edu/data/climate/worldclim/1_4/grid/cur/",
            zip, sep = "")

Marcelino



El 28/09/2017 a las 4:31, Bacou, Melanie escribi?:

I would assume `raster::getData("worldclim", ...)` uses WorldClim version 2?

--Mel.


On 09/25/2017 05:14 PM, Andy Bunn wrote:
Great. Thanks Marcelino. I have all the data dowloaded. I'm surprised that
there isn't a dedicated package for worldclim yet ? making one that ties
in with packages like BIEN would be great. Perhaps I'll work on it someday.

-A

On 9/25/17, 11:32 AM, "Marcelino de la Cruz Rot"
<marcelino.delacruz at urjc.es<mailto:marcelino.delacruz at urjc.es>>  wrote:

Hello Andy,

I've been using raster to play with WordlClim 2.0 and it works fine. For
example:

# Download 2.5' arc P data of worldclim 2.0
# The file is 68.5 MB so it takes some time to download
P_url<-
"http://biogeo.ucdavis.edu/data/worldclim/v2.0/tif/base/wc2.0_2.5m_prec.zi p"
download.file(P_url, destfile="wc2.0_2.5m_prec.zip")
unzip("wc2.0_2.5m_prec.zip")

#  Generate a stack object  with all monthly precipitation layers
P_filenames<- paste("wc2.0_2.5m_prec_", c(paste(0,1:9, sep=""), 11,12),
".tif",sep="")

prec2.5<- stack(P_filenames)

# Compute annual precipitation as a raster layer
P2.5<- sum(prec2.5)

# etc.

Cheers,

Marcelino


El 25/09/2017 a las 19:42, Andy Bunn escribi?:
Hello all, is anybody aware of a R package that gracefully works with
version 2 of the WorldClim data?

http://worldclim.org/version2


I have all the data extracted locally but I'm wondering if there is
something akin to getData in raster that will work with version 2 and
not
1.4 as (the brilliant) raster package currently does.

Many thanks, Andy

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo
.

--
Marcelino de la Cruz Rot
Depto. de Biolog?a y Geolog?a
F?sica y Qu?mica Inorg?nica
Universidad Rey Juan Carlos
M?stoles Espa?a

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

.


--
Marcelino de la Cruz Rot
Depto. de Biolog?a y Geolog?a
F?sica y Qu?mica Inorg?nica
Universidad Rey Juan Carlos
M?stoles Espa?a

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo



--
Mirza ?engi?

Junior Researcher | Department of Environmental Science
Radboud University | Heyendaalseweg 135
6525 AJ Nijmegen | The Netherlands

+31 657020823<tel:+31%206%2057020823> | +38761908392<tel:+387%2061%20908%20392>
Skype: mirzacengic
[http://tecd.client.shareholder.com/common/images/share/linkedin_icon.gif]<https://www.linkedin.com/in/mirzacengic>



--
Mirza ?engi?

Junior Researcher | Department of Environmental Science
Radboud University | Heyendaalseweg 135
6525 AJ Nijmegen | The Netherlands

+31 657020823 | +38761908392
Skype: mirzacengic
[http://tecd.client.shareholder.com/common/images/share/linkedin_icon.gif]<https://www.linkedin.com/in/mirzacengic>

	[[alternative HTML version deleted]]


From CQuiner at bloodsystems.org  Sat Oct  7 01:28:30 2017
From: CQuiner at bloodsystems.org (Quiner, Claire)
Date: Fri, 6 Oct 2017 23:28:30 +0000
Subject: [R-sig-Geo] Basic questions about Bayesian Spatio-temporal
	Analysis-INLA
Message-ID: <6eb5ce1c55904a52b55b465d33a2e834@bloodsystems.org>

Greetings,
I am in the process of trying to teach myself how to perform a Bayesian spatio-temporal analysis using INLA in R. I am reading papers and following a number of tutorials but there is one, somewhat basic thing that I can't seem to figure out from my readings.
I have a series of raster stacks of a variety of climatic data, each layer of a stack represents the value from a week in a year. These data will become the prior distributions in my analysis, as I understand it. I was originally under the impression that INLA would read these raster files but I see that the program actually requires tabular data. I can easily transform these raster stacks, getting summary values over each county, by week. However, it is unclear to me what part of the analysis that I should do that in. I would like to prepare a correlation matrix to address multicollinearity, followed by PCA to further eliminate redundant variables. My understanding is that both of these analyses can be done on either raster files or from tabular data. For these preliminary analyses to Bayesian analysis, should I opt for spatial data? Also, how do I handle the temporal nature of this data, which will obviously be correlated, but still may be necessary to maintain?
Any advice would be appreciated.
Thank you,

Claire


	[[alternative HTML version deleted]]


From Virgilio.Gomez at uclm.es  Sun Oct  8 09:18:16 2017
From: Virgilio.Gomez at uclm.es (VIRGILIO GOMEZ RUBIO)
Date: Sun, 8 Oct 2017 07:18:16 +0000
Subject: [R-sig-Geo] Basic questions about Bayesian Spatio-temporal
 Analysis-INLA
In-Reply-To: <6eb5ce1c55904a52b55b465d33a2e834@bloodsystems.org>
References: <6eb5ce1c55904a52b55b465d33a2e834@bloodsystems.org>
Message-ID: <06A9B335-E407-4F74-B4E0-1E75FCF39B89@uclm.es>

Hi Claire,


Not sure what type of model or data you are trying to fit. If you have raster data, it would make sense to use them as covariates and not as priors. If you definitely want to fit a spatio-temporal model with INLA  you should check this book:

http://eu.wiley.com/WileyCDA/WileyTitle/productCd-1118326555.html

Also, please check these course materials that I prepared for the GEOSTAT 2017 summer school about spatial model fitting with INLA:

https://www.dropbox.com/s/lb9f7eagmmzou5k/materials.zip?dl=0


In a nutshell, the inla() function works similarly as the glm() or gam() functions: you define your model in a formula (which may include random effects) and use a data.frame to pass the data.

Hope this helps.

Virgilio

From CQuiner at bloodsystems.org  Tue Oct 10 01:35:30 2017
From: CQuiner at bloodsystems.org (Quiner, Claire)
Date: Mon, 9 Oct 2017 23:35:30 +0000
Subject: [R-sig-Geo] Basic questions about Bayesian Spatio-temporal
 Analysis-INLA
In-Reply-To: <06A9B335-E407-4F74-B4E0-1E75FCF39B89@uclm.es>
References: <6eb5ce1c55904a52b55b465d33a2e834@bloodsystems.org>
 <06A9B335-E407-4F74-B4E0-1E75FCF39B89@uclm.es>
Message-ID: <d91597c52765463fb68078ebc02cbc30@bloodsystems.org>

Hi Virgilio,
Thank you for your response and wealth of resources that you sent!
I had originally planned on using the raster files as covariates (went to great pains to get them!) but was swayed away from that approach at some point.

Here is what I have: a number raster stacks of various climatic and geophysical data across a country. Each stack is in the same resolution and each layer represents either the mean, min, max or median of that variable, for a given week. There is a layer for each week of the year, for each variable. As the outcome, I have weekly counts of an infectious disease, aggregated across each county (admin 2) of that country, in each week of the year (weeks that disease counts are aggregated into match the weeks that climatic data is assembled into).
I want my model to predict if there is an association of these climatic variables and the risk of the disease (disease count normalized by the number of residents in that county) and if this association various by different parts of the country...ie different climatic predictors for coastal vs inland. Further, I am interested in measuring if there is a time lag that is predictive of risk increase: i.e. x mm of precipitation predicts an increase in risk of disease 2 weeks later.  

Based on your resources, I believe that a space time geostatistical model would help me to answer these questions- although it is unclear to me if this would work since my outcome is aggregated counties and not points.
Any thoughts on this?
Thank you!
Claire.


-----Original Message-----
From: VIRGILIO GOMEZ RUBIO [mailto:Virgilio.Gomez at uclm.es] 
Sent: Sunday, October 08, 2017 12:18 AM
To: Quiner, Claire
Cc: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] Basic questions about Bayesian Spatio-temporal Analysis-INLA

Hi Claire,


Not sure what type of model or data you are trying to fit. If you have raster data, it would make sense to use them as covariates and not as priors. If you definitely want to fit a spatio-temporal model with INLA  you should check this book:

http://eu.wiley.com/WileyCDA/WileyTitle/productCd-1118326555.html

Also, please check these course materials that I prepared for the GEOSTAT 2017 summer school about spatial model fitting with INLA:

https://www.dropbox.com/s/lb9f7eagmmzou5k/materials.zip?dl=0


In a nutshell, the inla() function works similarly as the glm() or gam() functions: you define your model in a formula (which may include random effects) and use a data.frame to pass the data.

Hope this helps.

Virgilio


From Virgilio.Gomez at uclm.es  Tue Oct 10 12:09:32 2017
From: Virgilio.Gomez at uclm.es (Virgilio Gomez Rubio)
Date: Tue, 10 Oct 2017 10:09:32 +0000
Subject: [R-sig-Geo] Basic questions about Bayesian Spatio-temporal
 Analysis-INLA
In-Reply-To: <d91597c52765463fb68078ebc02cbc30@bloodsystems.org>
References: <6eb5ce1c55904a52b55b465d33a2e834@bloodsystems.org>
 <06A9B335-E407-4F74-B4E0-1E75FCF39B89@uclm.es>
 <d91597c52765463fb68078ebc02cbc30@bloodsystems.org>
Message-ID: <008BE47D-CEE3-4B98-88D5-4717724C3EA7@uclm.es>

Hi,


I think that these model is covered in the book by Michela and Marta. You can also check the book by Banerjee et al. on Bayesian spatial models. I think that this will give a better idea of the different models that you could use.

Best,
Virgilio


From mpnelsen at gmail.com  Tue Oct 10 22:04:34 2017
From: mpnelsen at gmail.com (Matthew Nelsen)
Date: Tue, 10 Oct 2017 15:04:34 -0500
Subject: [R-sig-Geo] Unexpected elevation value when using extract() on
	RasterLayer
Message-ID: <CABYdB-7jtGqrmKLLt1MNDXp_97WEXVKOBYqzaQL24wPzPpw-VQ@mail.gmail.com>

Hi Everyone,

I'm fairly new to using R to analyze geo data and am getting some
unexpected values when I try to extract elevation data from a RasterLayer
using lat/long.  I've downloaded some global elevation data (ESRI ArcView
Format) from here:

http://nelson.wisc.edu/sage/data-and-models/atlas/maps.php?datasetid=28&includerelatedlinks=1&dataset=28

And have read it in using raster and rgdal.  I then am trying to extract()
the elevation at specific lat/longs and have been getting some strange
values.  For instance, I try to get the elevation for a point in Samoa
(-13.86472, -171.77.06), and an elevation of -129m is returned, which is
incorrect.  Any idea why this might be?  I'm not sure where I'm going wrong
(or if this specific RasterLayer does not deal well with smaller land
masses and truly does say it is -129m)? I've tried it two different ways
(below).

Thanks very much for any help.

All the best,

-Matt.


#download elevation data from:
http://nelson.wisc.edu/sage/data-and-models/atlas/maps.php?datasetid=28&includerelatedlinks=1&dataset=28

#click Download a GIS grid of this data (ESRI ArcView Format)


ll<-cbind(-171.7706,-13.86472)

#coordinates are inland in Samoa

#https://www.google.com/maps/place/13
?51'53.0%22S+171?46'14.2%22W/@-13.86472,-171.8034302,13z/data=!4m5!3m4!1s0x0:0x0!8m2!3d-13.86472!4d-171.7706


require(raster)

#read hdr.adf file

elev<-raster("/...PATH.../elevation/elevation/hdr.adf")

elev


#class       : RasterLayer

#dimensions  : 2160, 4320, 9331200  (nrow, ncol, ncell)

#resolution  : 0.08333333, 0.08333333  (x, y)

#extent      : -180, 180, -90, 89.99999  (xmin, xmax, ymin, ymax)

#coord. ref. : NA

#data source :
/...PATH.../atlas_of_the_biosphere_13sep2017/elevation/elevation/hdr.adf

#names       : hdr

#values      : -10376, 7320  (min, max)

#attributes  :

#           ID COUNT

# from: -10376     1

# to  :   7320     1



extract(elev,ll)

#-129


####Alternatively, read in...

require(rgdal)

#from
https://gis.stackexchange.com/questions/132403/how-to-read-adf-files-into-r

dpath<-"/...PATH.../elevation/elevation"

x<-new("GDALReadOnlyDataset",dpath)

getDriver(x)

#An object of class "GDALDriver"

#Slot "handle":

#<pointer: 0x60000032ac80>


getDriverLongName(getDriver(x))

#[1] "Arc/Info Binary Grid"


xx<-asSGDF_GROD(x)

elevation <- raster(xx)

elevation


#class       : RasterLayer

#dimensions  : 2160, 4320, 9331200  (nrow, ncol, ncell)

#resolution  : 0.08333333, 0.08333333  (x, y)

#extent      : -180, 180, -90, 89.99999  (xmin, xmax, ymin, ymax)

#coord. ref. : NA

#data source : in memory

#names       : band1

#values      : -10376, 7320  (min, max)


extract(elevation,ll)


#-129

	[[alternative HTML version deleted]]


From konno_kazuma at mailplus.pl  Wed Oct 11 07:45:22 2017
From: konno_kazuma at mailplus.pl (=?UTF-8?Q?Kamil_Konowalik?=)
Date: Wed, 11 Oct 2017 07:45:22 +0200
Subject: [R-sig-Geo] =?utf-8?q?Odp=3A__Unexpected_elevation_value_when_usi?=
	=?utf-8?q?ng_extract=28=29_on_RasterLayer?=
In-Reply-To: <CABYdB-7jtGqrmKLLt1MNDXp_97WEXVKOBYqzaQL24wPzPpw-VQ@mail.gmail.com>
References: <CABYdB-7jtGqrmKLLt1MNDXp_97WEXVKOBYqzaQL24wPzPpw-VQ@mail.gmail.com>
Message-ID: <65d619dfb3a1461c9aa2c77c10a38801@grupawp.pl>

Hi Matt,  the result
you got is correct according to your dataset. You can check it quickly for
example in QGis. You need to change the source - the map you are using is in a
very coarse resolution (you can see its accurracy by looking at the
highest point which should be around 8848 m and in your map is 7320 m). You
should look for a more detailed map like for example SRTM data (I think there are multiple sources to download it). Otherwise you may also try
&#34;elevatr&#34; package in R.   Good luck!  Kamil  ?  Dnia 10 pa?dziernika 2017 22:04 Matthew Nelsen &lt;mpnelsen at gmail.com&gt; napisa?(a):  Hi Everyone,   I&#39;m fairly new to using R to analyze geo data and am getting some  unexpected values when I try to extract elevation data from a RasterLayer  using lat/long. ?I&#39;ve downloaded some global elevation data (ESRI ArcView  Format) from here:   nelson.wisc.edu nelson.wisc.edu   And have read it in using raster and rgdal. ?I then am trying to extract()  the elevation at specific lat/longs and have been getting some strange  values. ?For instance, I try to get the elevation for a point in Samoa  (-13.86472, -171.77.06), and an elevation of -129m is returned, which is  incorrect. ?Any idea why this might be? ?I&#39;m not sure where I&#39;m going wrong  (or if this specific RasterLayer does not deal well with smaller land  masses and truly does say it is -129m)? I&#39;ve tried it two different ways  (below).   Thanks very much for any help.   All the best,   -Matt.    #download elevation data from:  nelson.wisc.edu nelson.wisc.edu   #click Download a GIS grid of this data (ESRI ArcView Format)    ll&lt;-cbind(-171.7706,-13.86472)   #coordinates are inland in Samoa   # www.google.com www.google.com  ?51&#39;53.0%22S+171?46&#39;14.2%22W    require(raster)   #read hdr.adf file   elev&lt;-raster(&#34;/...PATH.../elev   elev    #class ??????: RasterLayer   #dimensions ?: 2160, 4320, 9331200 ?(nrow, ncol, ncell)   #resolution ?: 0.08333333, 0.08333333 ?(x, y)   #extent ?????: -180, 180, -90, 89.99999 ?(xmin, xmax, ymin, ymax)   #coord. ref. : NA   #data source :  /...PATH.../atlas_of_the_biosp   #names ??????: hdr   #values ?????: -10376, 7320 ?(min, max)   #attributes ?:   # ??????????ID COUNT   # from: -10376 ????1   # to ?: ??7320 ????1     extract(elev,ll)   #-129    ####Alternatively, read in...   require(rgdal)   #from  gis.stackexchange.com gis.stackexchange.com   dpath&lt;-&#34;/...PATH.../elevation/   x&lt;-new(&#34;GDALReadOnlyDataset&#34;,d   getDriver(x)   #An object of class &#34;GDALDriver&#34;   #Slot &#34;handle&#34;:   #&lt;pointer: 0x60000032ac80&gt;    getDriverLongName(getDriver(x)   #[1] &#34;Arc/Info Binary Grid&#34;    xx&lt;-asSGDF_GROD(x)   elevation &lt;- raster(xx)   elevation    #class ??????: RasterLayer   #dimensions ?: 2160, 4320, 9331200 ?(nrow, ncol, ncell)   #resolution ?: 0.08333333, 0.08333333 ?(x, y)   #extent ?????: -180, 180, -90, 89.99999 ?(xmin, xmax, ymin, ymax)   #coord. ref. : NA   #data source : in memory   #names ??????: band1   #values ?????: -10376, 7320 ?(min, max)    extract(elevation,ll)    #-129   [[alternative HTML version deleted]]   ______________________________  R-sig-Geo mailing list   R-sig-Geo at r-project.org  stat.ethz.ch stat.ethz.ch

	[[alternative HTML version deleted]]


From mpnelsen at gmail.com  Wed Oct 11 18:59:57 2017
From: mpnelsen at gmail.com (Matthew Nelsen)
Date: Wed, 11 Oct 2017 11:59:57 -0500
Subject: [R-sig-Geo] Unexpected elevation value when using extract() on
	RasterLayer
In-Reply-To: <65d619dfb3a1461c9aa2c77c10a38801@grupawp.pl>
References: <CABYdB-7jtGqrmKLLt1MNDXp_97WEXVKOBYqzaQL24wPzPpw-VQ@mail.gmail.com>
 <65d619dfb3a1461c9aa2c77c10a38801@grupawp.pl>
Message-ID: <CABYdB-7A_g9sV_nnN+DLhXK-m+Nxz7dL+HuPc7L6keUO-e-CVA@mail.gmail.com>

Thanks a lot, Kamil!  That makes a lot of sense.  I really appreciate your
help!

Best,

-Matt.

On Wed, Oct 11, 2017 at 12:45 AM, Kamil Konowalik <konno_kazuma at mailplus.pl>
wrote:

> Hi Matt,
>
> the result you got is correct according to your dataset. You can check it
> quickly for example in QGis. You need to change the source - the map you
> are using is in a very coarse resolution (you can see its accurracy by
> looking at the highest point which should be around 8848 m and in your map
> is 7320 m). You should look for a more detailed map like for example SRTM
> data (I think there are multiple sources to download it). Otherwise you may
> also try "elevatr" package in R.
>
> Good luck!
>
> Kamil
>
>
>
> Dnia 10 pa?dziernika 2017 22:04 Matthew Nelsen <mpnelsen at gmail.com>
> napisa?(a):
>
> Hi Everyone,
>
> I'm fairly new to using R to analyze geo data and am getting some
> unexpected values when I try to extract elevation data from a RasterLayer
> using lat/long.  I've downloaded some global elevation data (ESRI ArcView
> Format) from here:
>
> http://nelson.wisc.edu/sage/data-and-models/atlas/maps.php?datasetid=28&
> includerelatedlinks=1&dataset=28
>
> And have read it in using raster and rgdal.  I then am trying to extract()
> the elevation at specific lat/longs and have been getting some strange
> values.  For instance, I try to get the elevation for a point in Samoa
> (-13.86472, -171.77.06), and an elevation of -129m is returned, which is
> incorrect.  Any idea why this might be?  I'm not sure where I'm going wrong
> (or if this specific RasterLayer does not deal well with smaller land
> masses and truly does say it is -129m)? I've tried it two different ways
> (below).
>
> Thanks very much for any help.
>
> All the best,
>
> -Matt.
>
>
> #download elevation data from:
> http://nelson.wisc.edu/sage/data-and-models/atlas/maps.php?datasetid=28&
> includerelatedlinks=1&dataset=28
>
> #click Download a GIS grid of this data (ESRI ArcView Format)
>
>
> ll<-cbind(-171.7706,-13.86472)
>
> #coordinates are inland in Samoa
>
> #https://www.google.com/maps/place/13
> ?51'53.0%22S+171?46'14.2%22W/@-13.86472,-171.8034302,13z/
> data=!4m5!3m4!1s0x0:0x0!8m2!3d-13.86472!4d-171.7706
>
>
> require(raster)
>
> #read hdr.adf file
>
> elev<-raster("/...PATH.../elevation/elevation/hdr.adf")
>
> elev
>
>
> #class       : RasterLayer
>
> #dimensions  : 2160, 4320, 9331200  (nrow, ncol, ncell)
>
> #resolution  : 0.08333333, 0.08333333  (x, y)
>
> #extent      : -180, 180, -90, 89.99999  (xmin, xmax, ymin, ymax)
>
> #coord. ref. : NA
>
> #data source :
> /...PATH.../atlas_of_the_biosphere_13sep2017/elevation/elevation/hdr.adf
>
> #names       : hdr
>
> #values      : -10376, 7320  (min, max)
>
> #attributes  :
>
> #           ID COUNT
>
> # from: -10376     1
>
> # to  :   7320     1
>
>
>
> extract(elev,ll)
>
> #-129
>
>
> ####Alternatively, read in...
>
> require(rgdal)
>
> #from
> https://gis.stackexchange.com/questions/132403/how-to-read-
> adf-files-into-r
>
> dpath<-"/...PATH.../elevation/elevation"
>
> x<-new("GDALReadOnlyDataset",dpath)
>
> getDriver(x)
>
> #An object of class "GDALDriver"
>
> #Slot "handle":
>
> #<pointer: 0x60000032ac80>
>
>
> getDriverLongName(getDriver(x))
>
> #[1] "Arc/Info Binary Grid"
>
>
> xx<-asSGDF_GROD(x)
>
> elevation <- raster(xx)
>
> elevation
>
>
> #class       : RasterLayer
>
> #dimensions  : 2160, 4320, 9331200  (nrow, ncol, ncell)
>
> #resolution  : 0.08333333, 0.08333333  (x, y)
>
> #extent      : -180, 180, -90, 89.99999  (xmin, xmax, ymin, ymax)
>
> #coord. ref. : NA
>
> #data source : in memory
>
> #names       : band1
>
> #values      : -10376, 7320  (min, max)
>
>
> extract(elevation,ll)
>
>
> #-129
>
> [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>

	[[alternative HTML version deleted]]


From tech_dev at wildintellect.com  Wed Oct 11 19:30:52 2017
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Wed, 11 Oct 2017 10:30:52 -0700
Subject: [R-sig-Geo] WorldClim Version2
In-Reply-To: <212df301-09cb-88a8-7ebb-985f4fbca04d@urjc.es>
References: <D5EE8B18.715A0%andy.bunn@wwu.edu>
 <f2f0c0c6-357c-a893-5577-2e2aca89e56b@urjc.es>
 <D5EEBF24.71642%andy.bunn@wwu.edu>
 <a4106a43-9c5b-d7fc-db4f-e0c33537a2ce@mbacou.com>
 <212df301-09cb-88a8-7ebb-985f4fbca04d@urjc.es>
Message-ID: <a01a42aa-6be6-7033-456b-43c57a7a22f6@wildintellect.com>

It uses WorldClim 1.4

The paper for WorldClim 2 was recently published and we are still
working on adding more additional variables and refinements. I expect
the getData function to be updated in the near future.

Thanks,
Alex

On 09/28/2017 12:44 AM, Marcelino de la Cruz Rot wrote:
> I'm afraid it don't.
> 
> At least in version 2.5.8, as it? appears from? this line in .wordclim():
> 
> ?theurl <-
> paste("http://biogeo.ucdavis.edu/data/climate/worldclim/1_4/grid/cur/",
> ??????????? zip, sep = "")
> 
> Marcelino
> 
> 
> El 28/09/2017 a las 4:31, Bacou, Melanie escribi?:
>>
>> I would assume `raster::getData("worldclim", ...)` uses WorldClim
>> version 2?
>>
>> --Mel.
>>
>>
>> On 09/25/2017 05:14 PM, Andy Bunn wrote:
>>> Great. Thanks Marcelino. I have all the data dowloaded. I'm surprised
>>> that
>>> there isn't a dedicated package for worldclim yet ? making one that ties
>>> in with packages like BIEN would be great. Perhaps I'll work on it
>>> someday.
>>>
>>> -A
>>>
>>> On 9/25/17, 11:32 AM, "Marcelino de la Cruz Rot"
>>> <marcelino.delacruz at urjc.es>? wrote:
>>>
>>>> Hello Andy,
>>>>
>>>> I've been using raster to play with WordlClim 2.0 and it works fine.
>>>> For
>>>> example:
>>>>
>>>> # Download 2.5' arc P data of worldclim 2.0
>>>> # The file is 68.5 MB so it takes some time to download
>>>> P_url<-
>>>> "http://biogeo.ucdavis.edu/data/worldclim/v2.0/tif/base/wc2.0_2.5m_prec.zi
>>>> p"
>>>> download.file(P_url, destfile="wc2.0_2.5m_prec.zip")
>>>> unzip("wc2.0_2.5m_prec.zip")
>>>>
>>>> #? Generate a stack object? with all monthly precipitation layers
>>>> P_filenames<- paste("wc2.0_2.5m_prec_", c(paste(0,1:9, sep=""), 11,12),
>>>> ".tif",sep="")
>>>>
>>>> prec2.5<- stack(P_filenames)
>>>>
>>>> # Compute annual precipitation as a raster layer
>>>> P2.5<- sum(prec2.5)
>>>>
>>>> # etc.
>>>>
>>>> Cheers,
>>>>
>>>> Marcelino
>>>>
>>>>
>>>> El 25/09/2017 a las 19:42, Andy Bunn escribi?:
>>>>> Hello all, is anybody aware of a R package that gracefully works with
>>>>> version 2 of the WorldClim data?
>>>>>
>>>>> http://worldclim.org/version2
>>>>>
>>>>>
>>>>> I have all the data extracted locally but I'm wondering if there is
>>>>> something akin to getData in raster that will work with version 2 and
>>>>> not
>>>>> 1.4 as (the brilliant) raster package currently does.
>>>>>
>>>>> Many thanks, Andy
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>> .
>>>>>
>>>> --?
>>>> Marcelino de la Cruz Rot
>>>> Depto. de Biolog?a y Geolog?a
>>>> F?sica y Qu?mica Inorg?nica
>>>> Universidad Rey Juan Carlos
>>>> M?stoles Espa?a
>>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> . 
> 
>


From Andy.Bunn at wwu.edu  Thu Oct 12 02:04:22 2017
From: Andy.Bunn at wwu.edu (Andy Bunn)
Date: Thu, 12 Oct 2017 00:04:22 +0000
Subject: [R-sig-Geo] WorldClim Version2
In-Reply-To: <a01a42aa-6be6-7033-456b-43c57a7a22f6@wildintellect.com>
References: <D5EE8B18.715A0%andy.bunn@wwu.edu>
 <f2f0c0c6-357c-a893-5577-2e2aca89e56b@urjc.es>
 <D5EEBF24.71642%andy.bunn@wwu.edu>
 <a4106a43-9c5b-d7fc-db4f-e0c33537a2ce@mbacou.com>
 <212df301-09cb-88a8-7ebb-985f4fbca04d@urjc.es>
 <a01a42aa-6be6-7033-456b-43c57a7a22f6@wildintellect.com>
Message-ID: <82512229-C04E-495E-8A35-77F288A3B0A1@wwu.edu>

Wonderful. Thanks.

On 10/11/17, 10:31 AM, "Alex Mandel" <tech_dev at wildintellect.com> wrote:

    It uses WorldClim 1.4
    
    The paper for WorldClim 2 was recently published and we are still
    working on adding more additional variables and refinements. I expect
    the getData function to be updated in the near future.
    
    Thanks,
    Alex
    
    On 09/28/2017 12:44 AM, Marcelino de la Cruz Rot wrote:
    > I'm afraid it don't.
    > 
    > At least in version 2.5.8, as it  appears from  this line in .wordclim():
    > 
    >  theurl <-
    > paste("http://biogeo.ucdavis.edu/data/climate/worldclim/1_4/grid/cur/",
    >             zip, sep = "")
    > 
    > Marcelino
    > 
    > 
    > El 28/09/2017 a las 4:31, Bacou, Melanie escribi?:
    >>
    >> I would assume `raster::getData("worldclim", ...)` uses WorldClim
    >> version 2?
    >>
    >> --Mel.
    >>
    >>
    >> On 09/25/2017 05:14 PM, Andy Bunn wrote:
    >>> Great. Thanks Marcelino. I have all the data dowloaded. I'm surprised
    >>> that
    >>> there isn't a dedicated package for worldclim yet ? making one that ties
    >>> in with packages like BIEN would be great. Perhaps I'll work on it
    >>> someday.
    >>>
    >>> -A
    >>>
    >>> On 9/25/17, 11:32 AM, "Marcelino de la Cruz Rot"
    >>> <marcelino.delacruz at urjc.es>  wrote:
    >>>
    >>>> Hello Andy,
    >>>>
    >>>> I've been using raster to play with WordlClim 2.0 and it works fine.
    >>>> For
    >>>> example:
    >>>>
    >>>> # Download 2.5' arc P data of worldclim 2.0
    >>>> # The file is 68.5 MB so it takes some time to download
    >>>> P_url<-
    >>>> "http://biogeo.ucdavis.edu/data/worldclim/v2.0/tif/base/wc2.0_2.5m_prec.zi
    >>>> p"
    >>>> download.file(P_url, destfile="wc2.0_2.5m_prec.zip")
    >>>> unzip("wc2.0_2.5m_prec.zip")
    >>>>
    >>>> #  Generate a stack object  with all monthly precipitation layers
    >>>> P_filenames<- paste("wc2.0_2.5m_prec_", c(paste(0,1:9, sep=""), 11,12),
    >>>> ".tif",sep="")
    >>>>
    >>>> prec2.5<- stack(P_filenames)
    >>>>
    >>>> # Compute annual precipitation as a raster layer
    >>>> P2.5<- sum(prec2.5)
    >>>>
    >>>> # etc.
    >>>>
    >>>> Cheers,
    >>>>
    >>>> Marcelino
    >>>>
    >>>>
    >>>> El 25/09/2017 a las 19:42, Andy Bunn escribi?:
    >>>>> Hello all, is anybody aware of a R package that gracefully works with
    >>>>> version 2 of the WorldClim data?
    >>>>>
    >>>>> http://worldclim.org/version2
    >>>>>
    >>>>>
    >>>>> I have all the data extracted locally but I'm wondering if there is
    >>>>> something akin to getData in raster that will work with version 2 and
    >>>>> not
    >>>>> 1.4 as (the brilliant) raster package currently does.
    >>>>>
    >>>>> Many thanks, Andy
    >>>>>
    >>>>> _______________________________________________
    >>>>> R-sig-Geo mailing list
    >>>>> R-sig-Geo at r-project.org
    >>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
    >>>>> .
    >>>>>
    >>>> -- 
    >>>> Marcelino de la Cruz Rot
    >>>> Depto. de Biolog?a y Geolog?a
    >>>> F?sica y Qu?mica Inorg?nica
    >>>> Universidad Rey Juan Carlos
    >>>> M?stoles Espa?a
    >>>>
    >>> _______________________________________________
    >>> R-sig-Geo mailing list
    >>> R-sig-Geo at r-project.org
    >>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
    >>
    >> . 
    > 
    > 
    
    


From manuel.ribeiro at tecnico.ulisboa.pt  Sat Oct 14 12:32:23 2017
From: manuel.ribeiro at tecnico.ulisboa.pt (Manuel Ribeiro)
Date: Sat, 14 Oct 2017 11:32:23 +0100
Subject: [R-sig-Geo] Help to interpret optimal bandwidth in ggwr.sel (spgwr
	package)
Message-ID: <009101d344d7$b8e26ae0$2aa740a0$@tecnico.ulisboa.pt>

Dear list, i am using spgwr as an exploratory tool in the analysis of
environment-health associations.

The study area is square, with dimensions 100x100 m.

 

In one of the results of my analysis, i found an optimal bandwidth
(optimizing the CV score) of 507 m.

And I interpret this bandwidth as a buffer distance where CV is the
smallest.

However, maximum (Euclidean) distance between any 2 points in the grid
(100x100) is 141,42 m, so I would expect an optimal bandwidth varying
between zero and 141 m. I am missing something in the interpretation of this
result, since the optimal bandwidth is 507 m.

If anyone can help me interpreting this correctly I will be deeply
appreciated

Kind regards

Manuel

 

Manuel C Ribeiro

Cerena - Centro de Recursos Naturais e Ambiente
Instituto Superior T?cnico
Av. Rovisco Pais  1049-001 Lisboa Portugal
Tel:  (+351) 21 841 74 41
Fax: (+351) 21 841 73 89

 


	[[alternative HTML version deleted]]


From stacy.johannes at gmail.com  Sun Oct 15 11:39:06 2017
From: stacy.johannes at gmail.com (Anastasia Johannes)
Date: Sun, 15 Oct 2017 11:39:06 +0200
Subject: [R-sig-Geo] DataGrid
Message-ID: <CAN7Vh-fnsqoyQq0ZBv2i6N8BVdhC-wUVkN-LnnrF-WbTY+x4_g@mail.gmail.com>

I am trying to create DataGrid but I am failing to do so

Below find my code and see how my grid dataset just end up with no data.

> library(sp)

> library(gstat)

> coordinates(cor)=~x+y

> str(cor)

Formal class 'SpatialPointsDataFrame' [package "sp"] with 5 slots

  ..@ data       :'data.frame': 550 obs. of  28 variables:

  .. ..$ F         : num [1:550] 22.2 65 44.4 30 88.2 ...

  .. ..$ Poor        : num [1:550] 0 85 0 65 35.3 ...

  .. ..$ Middle      : num [1:550] 0 15 0 30 58.8 ...

  .. ..$ NoEdu       : num [1:550] 0 35 0 5 17.6 ...

  .. ..$ Prim        : num [1:550] 0 25 5.56 65 47.06 ..



> gridded(cor)<-TRUE

> str(cor)

Formal class 'SpatialPixelsDataFrame' [package "sp"] with 7 slots

  ..@ data       :'data.frame': 550 obs. of  28 variables:

  .. ..$ F         : num [1:550] 22.2 65 44.4 30 88.2 ...

  .. ..$ Poor        : num [1:550] 0 85 0 65 35.3 ...

  .. ..$ Middle      : num [1:550] 0 15 0 30 58.8 ...

  .. ..$ NoEdu       : num [1:550] 0 35 0 5 17.6 ...

  .. ..$ Prim        : num [1:550] 0 25 5.56 65 47.06 ...

  .. ..$ Sec         : num [1:550] 88.9 40 22.2 25 35.3 ...



*But when I transform to spatialGrid, the data disappear and this cause NA
in the calculation of var1.pred and var.var*

> fullgrid(cor)<-TRUE

> str(cor)

Formal class 'SpatialGridDataFrame' [package "sp"] with 4 slots

  ..@ data       :'data.frame': 1372406 obs. of  28 variables:

  .. ..$ HH         : num [1:1372406] NA NA NA NA NA NA NA NA NA NA ...

  .. ..$ Poor        : num [1:1372406] NA NA NA NA NA NA NA NA NA NA ...

  .. ..$ Middle      : num [1:1372406] NA NA NA NA NA NA NA NA NA NA ...

  .. ..$ NoEdu       : num [1:1372406] NA NA NA NA NA NA NA NA NA NA ...

  .. ..$ Prim        : num [1:1372406] NA NA NA NA NA NA NA NA NA NA ...

	[[alternative HTML version deleted]]


From sarah.goslee at gmail.com  Sun Oct 15 13:12:39 2017
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Sun, 15 Oct 2017 11:12:39 +0000
Subject: [R-sig-Geo] DataGrid
In-Reply-To: <CAN7Vh-fnsqoyQq0ZBv2i6N8BVdhC-wUVkN-LnnrF-WbTY+x4_g@mail.gmail.com>
References: <CAN7Vh-fnsqoyQq0ZBv2i6N8BVdhC-wUVkN-LnnrF-WbTY+x4_g@mail.gmail.com>
Message-ID: <CAM_vjunMq_wpgJ0oExTxkkX7cFRZe8Ft6MVi-rnyZHs1mttExA@mail.gmail.com>

When you create a full grid, there will be many NA values in your data for
grid coordinates that you didn't provide data for.

str() is only showing you the first few elements: unless your dataset has
values in that corner, NA is the expected return.

Use summary() or image() to investigate the whole dataset. I think you will
find that you have non-missing values where appropriate. You need to then
use na.rm=TRUE in many functions.

Sarah

On Sun, Oct 15, 2017 at 5:39 AM Anastasia Johannes <stacy.johannes at gmail.com>
wrote:

> I am trying to create DataGrid but I am failing to do so
>
> Below find my code and see how my grid dataset just end up with no data.
>
> > library(sp)
>
> > library(gstat)
>
> > coordinates(cor)=~x+y
>
> > str(cor)
>
> Formal class 'SpatialPointsDataFrame' [package "sp"] with 5 slots
>
>   ..@ data       :'data.frame': 550 obs. of  28 variables:
>
>   .. ..$ F         : num [1:550] 22.2 65 44.4 30 88.2 ...
>
>   .. ..$ Poor        : num [1:550] 0 85 0 65 35.3 ...
>
>   .. ..$ Middle      : num [1:550] 0 15 0 30 58.8 ...
>
>   .. ..$ NoEdu       : num [1:550] 0 35 0 5 17.6 ...
>
>   .. ..$ Prim        : num [1:550] 0 25 5.56 65 47.06 ..
>
>
>
> > gridded(cor)<-TRUE
>
> > str(cor)
>
> Formal class 'SpatialPixelsDataFrame' [package "sp"] with 7 slots
>
>   ..@ data       :'data.frame': 550 obs. of  28 variables:
>
>   .. ..$ F         : num [1:550] 22.2 65 44.4 30 88.2 ...
>
>   .. ..$ Poor        : num [1:550] 0 85 0 65 35.3 ...
>
>   .. ..$ Middle      : num [1:550] 0 15 0 30 58.8 ...
>
>   .. ..$ NoEdu       : num [1:550] 0 35 0 5 17.6 ...
>
>   .. ..$ Prim        : num [1:550] 0 25 5.56 65 47.06 ...
>
>   .. ..$ Sec         : num [1:550] 88.9 40 22.2 25 35.3 ...
>
>
>
> *But when I transform to spatialGrid, the data disappear and this cause NA
> in the calculation of var1.pred and var.var*
>
> > fullgrid(cor)<-TRUE
>
> > str(cor)
>
> Formal class 'SpatialGridDataFrame' [package "sp"] with 4 slots
>
>   ..@ data       :'data.frame': 1372406 obs. of  28 variables:
>
>   .. ..$ HH         : num [1:1372406] NA NA NA NA NA NA NA NA NA NA ...
>
>   .. ..$ Poor        : num [1:1372406] NA NA NA NA NA NA NA NA NA NA ...
>
>   .. ..$ Middle      : num [1:1372406] NA NA NA NA NA NA NA NA NA NA ...
>
>   .. ..$ NoEdu       : num [1:1372406] NA NA NA NA NA NA NA NA NA NA ...
>
>   .. ..$ Prim        : num [1:1372406] NA NA NA NA NA NA NA NA NA NA ...
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Sarah Goslee
http://www.stringpage.com
http://www.sarahgoslee.com
http://www.functionaldiversity.org

	[[alternative HTML version deleted]]


From mahsasameti1384 at gmail.com  Mon Oct 16 17:59:32 2017
From: mahsasameti1384 at gmail.com (Mahsa Sameti)
Date: Mon, 16 Oct 2017 19:29:32 +0330
Subject: [R-sig-Geo] creating xts object
Message-ID: <CADN=v_xJcCA7LJMA03PH8R-AuPY3LRd6K0qJJzB3crBPWerDig@mail.gmail.com>

Dear all

I?m working with monthly spatio-temporal data. I have a question about
creating spatio-temporal object.

When I wanted to create time series, I used as.yearmon function. After that
when i create purely spatial variogram from empirical spatio-temporal
variogram (spEmpVgm <- empVgm[empVgm$timelag == 0,]) , it shows only
January in time lag==0. Is it true or not?

Should I change the method of creating xts object?


Thanks alot

	[[alternative HTML version deleted]]


From nivdemalach at gmail.com  Wed Oct 18 11:25:15 2017
From: nivdemalach at gmail.com (niv de malach)
Date: Wed, 18 Oct 2017 12:25:15 +0300
Subject: [R-sig-Geo] convert "errorsarlm" to "lm"
Message-ID: <CAHxNAtnJXZqNT7scN-wjmaBUNKXp4mimnbZ0o1aa09gimyvUQA@mail.gmail.com>

Hi all,
I need to convert an "errorsarlm" object into a simple "lm" object because
the package I use ("piecewiseSEM") could not deal with "errorsarlm". Is
there a way to transform the object?

Thanks,
Niv
?

	[[alternative HTML version deleted]]


From thi_veloso at yahoo.com.br  Fri Oct 20 00:33:53 2017
From: thi_veloso at yahoo.com.br (Thiago V. dos Santos)
Date: Thu, 19 Oct 2017 22:33:53 +0000 (UTC)
Subject: [R-sig-Geo] Multi-file raster stack from netcdf specifying levels
References: <1724737785.601975.1508452433137.ref@mail.yahoo.com>
Message-ID: <1724737785.601975.1508452433137@mail.yahoo.com>

Dear all,

I am working with several netcdf files that contain soil moisture in 15 soil layers.

I am trying to create raster stacks of individual layers, but I am getting a strange error.

# Get list of files
files <- list.files('~/Downloads', pattern='.nc', full.names=T)

# Stack all the files
h2osoil.l1 <- stack(files, varname='H2OSOI', level=1) # this would be the first layer
h2osoil.l2 <- stack(files, varname='H2OSOI', level=2) # this would be the second layer

And this is the error I get:

Error in (function (classes, fdef, mtable)  : 
unable to find an inherited method for function ?raster? for signature ?"numeric"?
In addition: Warning messages:
1: In .rasterObjectFromCDF(x, type = objecttype, band = band, ...) :
"level" set to 1 (there are 15 levels)
2: In .rasterObjectFromCDF(x, type = objecttype, band = band, ...) :
"level" set to 1 (there are 15 levels)
3: In .rasterObjectFromCDF(x, type = objecttype, band = band, ...) :
"level" set to 1 (there are 15 levels)

Here are some files to reproduce this issue (3 MB each file):

https://www.dropbox.com/s/9z3fnadqdf1rzuz/cam5clm45_ctl.clm2.h0.1980-01.nc?dl=0
https://www.dropbox.com/s/0snz58au8ic196p/cam5clm45_ctl.clm2.h0.1980-02.nc?dl=0
https://www.dropbox.com/s/v5ps5bkyrkflki7/cam5clm45_ctl.clm2.h0.1980-03.nc?dl=0


I know netcdf files can be quite tricky to work with, but is there any way to get this file read in the right way using the raster package? Any other option?

 
Greetings,
 -- Thiago V. dos Santos

Postdoctoral Research Fellow
Department of Climate and Space Science and Engineering
University of Michigan


From vijaylulla at gmail.com  Fri Oct 20 01:09:58 2017
From: vijaylulla at gmail.com (Vijay Lulla)
Date: Thu, 19 Oct 2017 19:09:58 -0400
Subject: [R-sig-Geo] Multi-file raster stack from netcdf specifying
	levels
In-Reply-To: <1724737785.601975.1508452433137@mail.yahoo.com>
References: <1724737785.601975.1508452433137.ref@mail.yahoo.com>
 <1724737785.601975.1508452433137@mail.yahoo.com>
Message-ID: <CAKkiGbv97QGQCvQkwMbynZnGSQtDz_Rz+L_0mO3pVd0i-ymhzA@mail.gmail.com>

Maybe you can try something like this?

h2osoil.l1 <- do.call(stack, lapply(files, function(file) raster(file,
varname='H2OSOI', level=1)))
h2osoil.l2 <- do.call(stack, lapply(files, function(file) raster(file,
varname='H2OSOI', level=2)))
...
h2osoil.l15 <- do.call(stack, lapply(files, function(file) raster(file,
varname='H2OSOI', level=15)))


On Thu, Oct 19, 2017 at 6:33 PM, Thiago V. dos Santos via R-sig-Geo <
r-sig-geo at r-project.org> wrote:

> Dear all,
>
> I am working with several netcdf files that contain soil moisture in 15
> soil layers.
>
> I am trying to create raster stacks of individual layers, but I am getting
> a strange error.
>
> # Get list of files
> files <- list.files('~/Downloads', pattern='.nc', full.names=T)
>
> # Stack all the files
> h2osoil.l1 <- stack(files, varname='H2OSOI', level=1) # this would be the
> first layer
> h2osoil.l2 <- stack(files, varname='H2OSOI', level=2) # this would be the
> second layer
>
> And this is the error I get:
>
> Error in (function (classes, fdef, mtable)  :
> unable to find an inherited method for function ?raster? for signature
> ?"numeric"?
> In addition: Warning messages:
> 1: In .rasterObjectFromCDF(x, type = objecttype, band = band, ...) :
> "level" set to 1 (there are 15 levels)
> 2: In .rasterObjectFromCDF(x, type = objecttype, band = band, ...) :
> "level" set to 1 (there are 15 levels)
> 3: In .rasterObjectFromCDF(x, type = objecttype, band = band, ...) :
> "level" set to 1 (there are 15 levels)
>
> Here are some files to reproduce this issue (3 MB each file):
>
> https://www.dropbox.com/s/9z3fnadqdf1rzuz/cam5clm45_ctl.
> clm2.h0.1980-01.nc?dl=0
> https://www.dropbox.com/s/0snz58au8ic196p/cam5clm45_ctl.
> clm2.h0.1980-02.nc?dl=0
> https://www.dropbox.com/s/v5ps5bkyrkflki7/cam5clm45_ctl.
> clm2.h0.1980-03.nc?dl=0
>
>
> I know netcdf files can be quite tricky to work with, but is there any way
> to get this file read in the right way using the raster package? Any other
> option?
>
>
> Greetings,
>  -- Thiago V. dos Santos
>
> Postdoctoral Research Fellow
> Department of Climate and Space Science and Engineering
> University of Michigan
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo




-- 
Vijay Lulla, Ph.D.

Assistant Professor,
Dept. of Geography,
Indiana University Purdue University Indianapolis (IUPUI)
425 University Blvd, CA-207C.
Indianapolis, IN-46202
vlulla at iupui.edu

<http://vijaylulla.com>
http://vijaylulla.com

	[[alternative HTML version deleted]]


From thi_veloso at yahoo.com.br  Fri Oct 20 01:36:02 2017
From: thi_veloso at yahoo.com.br (Thiago V. dos Santos)
Date: Thu, 19 Oct 2017 23:36:02 +0000 (UTC)
Subject: [R-sig-Geo] Multi-file raster stack from netcdf specifying
 levels
In-Reply-To: <CAKkiGbv97QGQCvQkwMbynZnGSQtDz_Rz+L_0mO3pVd0i-ymhzA@mail.gmail.com>
References: <1724737785.601975.1508452433137.ref@mail.yahoo.com>
 <1724737785.601975.1508452433137@mail.yahoo.com>
 <CAKkiGbv97QGQCvQkwMbynZnGSQtDz_Rz+L_0mO3pVd0i-ymhzA@mail.gmail.com>
Message-ID: <2029549442.637062.1508456162431@mail.yahoo.com>

Yes, it works!
Thank you very much for the alternative!?Greetings,?-- Thiago V. dos Santos
Postdoctoral Research FellowDepartment of Climate and Space Science and EngineeringUniversity of Michigan 

    On Thursday, October 19, 2017 7:10 PM, Vijay Lulla <vijaylulla at gmail.com> wrote:
 

 Maybe you can try something like this?

h2osoil.l1 <- do.call(stack, lapply(files, function(file) raster(file, varname='H2OSOI', level=1)))
h2osoil.l2 <- do.call(stack, lapply(files, function(file) raster(file, varname='H2OSOI', level=2)))
...
h2osoil.l15 <- do.call(stack, lapply(files, function(file) raster(file, varname='H2OSOI', level=15)))


On Thu, Oct 19, 2017 at 6:33 PM, Thiago V. dos Santos via R-sig-Geo <r-sig-geo at r-project.org> wrote:

Dear all,

I am working with several netcdf files that contain soil moisture in 15 soil layers.

I am trying to create raster stacks of individual layers, but I am getting a strange error.

# Get list of files
files <- list.files('~/Downloads', pattern='.nc', full.names=T)

# Stack all the files
h2osoil.l1 <- stack(files, varname='H2OSOI', level=1) # this would be the first layer
h2osoil.l2 <- stack(files, varname='H2OSOI', level=2) # this would be the second layer

And this is the error I get:

Error in (function (classes, fdef, mtable)? :
unable to find an inherited method for function ?raster? for signature ?"numeric"?
In addition: Warning messages:
1: In .rasterObjectFromCDF(x, type = objecttype, band = band, ...) :
"level" set to 1 (there are 15 levels)
2: In .rasterObjectFromCDF(x, type = objecttype, band = band, ...) :
"level" set to 1 (there are 15 levels)
3: In .rasterObjectFromCDF(x, type = objecttype, band = band, ...) :
"level" set to 1 (there are 15 levels)

Here are some files to reproduce this issue (3 MB each file):

https://www.dropbox.com/s/ 9z3fnadqdf1rzuz/cam5clm45_ctl. clm2.h0.1980-01.nc?dl=0
https://www.dropbox.com/s/ 0snz58au8ic196p/cam5clm45_ctl. clm2.h0.1980-02.nc?dl=0
https://www.dropbox.com/s/ v5ps5bkyrkflki7/cam5clm45_ctl. clm2.h0.1980-03.nc?dl=0


I know netcdf files can be quite tricky to work with, but is there any way to get this file read in the right way using the raster package? Any other option?


Greetings,
?-- Thiago V. dos Santos

Postdoctoral Research Fellow
Department of Climate and Space Science and Engineering
University of Michigan

______________________________ _________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/ listinfo/r-sig-geo



-- 
Vijay Lulla, Ph.D.
Assistant Professor,Dept. of Geography,Indiana University Purdue University Indianapolis (IUPUI)425 University Blvd, CA-207C.Indianapolis, IN-46202vlulla at iupui.edu

http://vijaylulla.com

   
	[[alternative HTML version deleted]]


From sarosama at feps.edu.eg  Wed Oct 18 09:33:12 2017
From: sarosama at feps.edu.eg (sara osama)
Date: Wed, 18 Oct 2017 10:33:12 +0300
Subject: [R-sig-Geo] spatial distance in sum metric spatiotemporal variogram
Message-ID: <CAJsLiQT=cCORf8oAt2ko7JMbJo5pnGg0GMetiKoSNY-RuAyeCw@mail.gmail.com>

Dear All,
I have fitted the attached sum-metric variogram using the following command:
varpm10 <-
variogramST(lnpm10only~1,data=lnpm10_stfdf,assumeRegular=F,na.omit=T)

and the distance in the figure are in decimals. I want to know how this
distances are calculated and what is the unit of measurement used. this is
the coordinates of the first 5 observations my data

> coords
     longitude latitude
1     30.92500 29.95300
61    31.36000 30.26000
121   31.33300 29.84720
181   31.29800 29.90500
241   31.20416 30.04278
301   31.32000 30.06000
361   31.23900 30.09470

by the way the data consists of only 26 stations where the max distance is
about 200 km.

Any help will be highly appreciated

Best regards
Sara

-- 
Best Regards

Faculty of Economics & Political Science
Cairo University
Tel:(202)35728055-(202)35728116-(202)35736608-(202)35736605
Fax:(202)35711020
Follow us on twitter:https://twitter.com/fepsnews
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20171018/9b59f59b/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sum metric variogram.docx
Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document
Size: 44388 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20171018/9b59f59b/attachment.docx>

From groemping at beuth-hochschule.de  Fri Oct 20 10:23:07 2017
From: groemping at beuth-hochschule.de (=?UTF-8?Q?Ulrike_Gr=c3=b6mping?=)
Date: Fri, 20 Oct 2017 10:23:07 +0200
Subject: [R-sig-Geo] Custom legend with tmap
Message-ID: <60faa186-e8d9-1df2-bcf1-003936619ff5@beuth-hochschule.de>

Dear all,

I have a question on custom legends with tmap: the code below places 
small charts which have been previously stored as png files (file names 
in named character vector fns) on a map. The colors in these charts 
(stored in the vector farben) need a legend. Adding the legend with 
"tm_add_legend" works in the plot mode, but not in the view mode. The 
only way I found to get a legend in the view mode is to create a png 
with the legend included and place it on the legend with tm_markers 
(this is ignored in plot mode).

Is this indeed the only/best way, or (how) could I do this with less effort?

Best, Ulrike

#################
tm_shape(geo, is.master=TRUE) +
   tm_polygons(col = "grey", alpha=0, border.col 
="grey20",popup.vars=FALSE) +
   tm_symbols(shape="NAMEshort",
              shapes=tmap_icons(fns[sort(geo$NAMEshort)], width=96, 
height=96),
              shapes.legend=22,
              shapes.legend.fill=farben,
              shapes.labels=(10:40)/10,
              border.lwd=1,
              sizes.legend=c(.5, 1,3)*1e6,
              legend.shape.show = FALSE,
              legend.size.is.portrait = TRUE,
              id="NAMEshort",
              popup.vars = c("NAME_1"),
              icon.scale = 5, xmod="Xadj", ymod="Yadj") +
   tm_add_legend(type="fill",labels=(10:40)/10, col=farben)+
   tm_layout(main.title="Distribution of Abitur grades over time",
                title="2006 to 2015 from left to right",
                title.position = c("left","TOP"), title.size = 0.5,
                legend.outside.position = "right", legend.outside = TRUE,
             title.snap.to.legend = FALSE)+
tm_shape(legloc)+
   tm_markers(shape=tmap_icons("mosaiclegend.png",
          width=120, height=1800), size=0.1 )


-- 
##############################################
## Prof. Ulrike Groemping
## FB II
## Beuth University of Applied Sciences Berlin
##############################################
## prof.beuth-hochschule.de/groemping
## Phone: +49(0)30 4504 5127
## Fax:   +49(0)30 4504 66 5127
## Home office: +49(0)30 394 04 863
##############################################


From Roger.Bivand at nhh.no  Fri Oct 20 13:06:05 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 20 Oct 2017 13:06:05 +0200
Subject: [R-sig-Geo] convert "errorsarlm" to "lm"
In-Reply-To: <CAHxNAtnJXZqNT7scN-wjmaBUNKXp4mimnbZ0o1aa09gimyvUQA@mail.gmail.com>
References: <CAHxNAtnJXZqNT7scN-wjmaBUNKXp4mimnbZ0o1aa09gimyvUQA@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1710201259440.2685@reclus.nhh.no>

On Wed, 18 Oct 2017, niv de malach wrote:

> Hi all,
> I need to convert an "errorsarlm" object into a simple "lm" object because
> the package I use ("piecewiseSEM") could not deal with "errorsarlm". Is
> there a way to transform the object?

Please give a reproducible example [1] showing what you are doing, 
preferably with a built-in data set. In any case, an lm object made from a 
sarlm object will fix the spatial coefficient and loose its uncertainty.

[1] 
https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

Can you use an model class accepted in piecewiseSEM that fits an MRF 
random effect?

Roger

>
> Thanks,
> Niv
> ?
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From b.graeler at 52north.org  Fri Oct 20 15:40:08 2017
From: b.graeler at 52north.org (=?UTF-8?Q?Dr._Benedikt_Gr=c3=a4ler?=)
Date: Fri, 20 Oct 2017 15:40:08 +0200
Subject: [R-sig-Geo] creating xts object
In-Reply-To: <CADN=v_xJcCA7LJMA03PH8R-AuPY3LRd6K0qJJzB3crBPWerDig@mail.gmail.com>
References: <CADN=v_xJcCA7LJMA03PH8R-AuPY3LRd6K0qJJzB3crBPWerDig@mail.gmail.com>
Message-ID: <97a41939-c888-678b-e08a-fb35e52e7df0@52north.org>

I tried to re-build the issue with a small toy example (see below). Like 
you, I also observe that the "timelag" column only denotes Jan 0000. But 
this is due to the fact that yearmon of "0" difference is Jan 0000. 
Checking also the values of empVgm and the wireframe plot indicates that 
sensible temporal differences have been calculated in this toy example 
(multiples of the fraction 1/12: yearmon(0/12) = Jan 0000, yearmon(1/12) 
= Feb 0000, ...). I suggest to also double check your empirical 
spatiotemporal variogram.

HTH,

  Ben

-/R-Script/-

library(xts)
library(spacetime)
library(gstat)

stfdf <- STFDF(SpatialPoints(cbind(runif(10), runif(10))),
                yearmon(x = 0:23/12+2015),
                data.frame(var=rnorm(10*24)))

empVgm <- variogramST(var~1, stfdf, tlags = 0:5, boundaries = 1:5/10)
empVgm
plot(empVgm, wireframe=T, scales=list(arrows=F))

spEmpVgm <- empVgm[empVgm$timelag == 0, ]
class(spEmpVgm) <- c("gstatVariogram", "data.frame")
spEmpVgm
plot(spEmpVgm)

yearmon(0)




On 16/10/2017 17:59, Mahsa Sameti wrote:
> Dear all
> 
> I?m working with monthly spatio-temporal data. I have a question about
> creating spatio-temporal object.
> 
> When I wanted to create time series, I used as.yearmon function. After that
> when i create purely spatial variogram from empirical spatio-temporal
> variogram (spEmpVgm <- empVgm[empVgm$timelag == 0,]) , it shows only
> January in time lag==0. Is it true or not?
> 
> Should I change the method of creating xts object?
> 
> 
> Thanks alot
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Dr. Benedikt Gr?ler
52?North Initiative for Geospatial Open Source Software GmbH
Martin-Luther-King-Weg 24
48155 Muenster, Germany

E-Mail: b.graeler at 52north.org
Fon: +49-(0)-251/396371-39
Fax: +49-(0)-251/396371-11

http://52north.org/
Twitter: @FiveTwoN

General Managers: Dr. Albert Remke, Dr. Andreas Wytzisk
Local Court Muenster HRB 10849
-------------- next part --------------
A non-text attachment was scrubbed...
Name: b_graeler.vcf
Type: text/x-vcard
Size: 445 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20171020/d38275b3/attachment.vcf>

From b.graeler at 52north.org  Fri Oct 20 16:07:11 2017
From: b.graeler at 52north.org (=?UTF-8?Q?Dr._Benedikt_Gr=c3=a4ler?=)
Date: Fri, 20 Oct 2017 16:07:11 +0200
Subject: [R-sig-Geo] spatial distance in sum metric spatiotemporal
 variogram
In-Reply-To: <CAJsLiQT=cCORf8oAt2ko7JMbJo5pnGg0GMetiKoSNY-RuAyeCw@mail.gmail.com>
References: <CAJsLiQT=cCORf8oAt2ko7JMbJo5pnGg0GMetiKoSNY-RuAyeCw@mail.gmail.com>
Message-ID: <b6b1b55c-670f-7efe-665a-dbb6a348317d@52north.org>

Dear Sara,

if you provide information about the coordinate reference system in your 
object lnpm10_stfdf at sp@proj4string (e.g. if your data is recorded as 
WGS84 geographic coordinates: lnpm10_stfdf at sp@proj4string <- 
CRS("+init=epsg:4326") ), distances are calculated as great-circle 
distances in "km" for geographic CRS, as straight line distances in m 
for projected CRS and if no CRS is defined, the distances will be the 
simple euclidean distance of the coordinates.

In your example, there does not seem to be any information about the CRS 
and the values are then euclidean distances between latitudes and 
longitudes (quite miss-leading in most parts of the world, i.e. 1? N-S 
might strongly deviate from 1? E-W).

Furthermore - just to clarify - what you present is the empirical 
spatiotemporal variogram. No assumptions about a model (metric, 
sum-metric, ...) nor any fit of model parameters have been made.

HTH,

  Ben


On 18/10/2017 09:33, sara osama wrote:
> 
> Dear All,
> I have fitted the attached sum-metric variogram using the following command:
> varpm10 <- 
> variogramST(lnpm10only~1,data=lnpm10_stfdf,assumeRegular=F,na.omit=T)
> 
> and the distance in the figure are in decimals. I want to know how this 
> distances are calculated and what is the unit of measurement used. this 
> is the coordinates of the first 5 observations my data
> 
>  > coords
>  ? ? ?longitude latitude
> 1? ? ?30.92500 29.95300
> 61? ? 31.36000 30.26000
> 121? ?31.33300 29.84720
> 181? ?31.29800 29.90500
> 241? ?31.20416 30.04278
> 301? ?31.32000 30.06000
> 361? ?31.23900 30.09470
> by the way the data consists of only 26 stations where the max distance 
> is about 200 km.
> 
> Any help will be highly appreciated
> 
> Best regards
> Sara
> 
> -- 
> Best Regards
> 
> 	Faculty of Economics & Political Science
> Cairo University
> 
> 
> Tel:(202)35728055-(202)35728116-(202)35736608-(202)35736605
> Fax:(202)35711020
> Follow us on twitter:https://twitter.com/fepsnews
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Dr. Benedikt Gr?ler
52?North Initiative for Geospatial Open Source Software GmbH
Martin-Luther-King-Weg 24
48155 Muenster, Germany

E-Mail: b.graeler at 52north.org
Fon: +49-(0)-251/396371-39
Fax: +49-(0)-251/396371-11

http://52north.org/
Twitter: @FiveTwoN

General Managers: Dr. Albert Remke, Dr. Andreas Wytzisk
Local Court Muenster HRB 10849
-------------- next part --------------
A non-text attachment was scrubbed...
Name: b_graeler.vcf
Type: text/x-vcard
Size: 445 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20171020/f95c21a9/attachment.vcf>

From thi_veloso at yahoo.com.br  Fri Oct 20 17:00:58 2017
From: thi_veloso at yahoo.com.br (Thiago V. dos Santos)
Date: Fri, 20 Oct 2017 15:00:58 +0000 (UTC)
Subject: [R-sig-Geo] Is the raster package still receiving updates?
References: <1520364990.1033649.1508511658722.ref@mail.yahoo.com>
Message-ID: <1520364990.1033649.1508511658722@mail.yahoo.com>

Dear list,

I realized that the latest version of the raster package was released on CRAN over a year ago.

I also noticed that Robert's participation in this list has become rather scarce.

I was just wondering whether the raster package is still receiving updates? 
 
Greetings,
 -- Thiago V. dos Santos

Postdoctoral Research Fellow
Department of Climate and Space Science and Engineering
University of Michigan


From mdsumner at gmail.com  Sat Oct 21 03:05:35 2017
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 21 Oct 2017 01:05:35 +0000
Subject: [R-sig-Geo] Is the raster package still receiving updates?
In-Reply-To: <1520364990.1033649.1508511658722@mail.yahoo.com>
References: <1520364990.1033649.1508511658722.ref@mail.yahoo.com>
 <1520364990.1033649.1508511658722@mail.yahoo.com>
Message-ID: <CAAcGz98p=378aWyX=hb7Ro6Myjg9iFp5dtM=jvprFXimJ7JLUg@mail.gmail.com>

No,  it's effectively abandoned. No concrete plans known.

I'm interested to keep it going and have kept a list of fixes needed, but
not sure when or if I'll get to it.

I'd support any efforts in this,  I'll rely on raster for many years still.

Cheers,  Mike

On Sat, 21 Oct 2017, 02:05 Thiago V. dos Santos via R-sig-Geo, <
r-sig-geo at r-project.org> wrote:

> Dear list,
>
> I realized that the latest version of the raster package was released on
> CRAN over a year ago.
>
> I also noticed that Robert's participation in this list has become rather
> scarce.
>
> I was just wondering whether the raster package is still receiving updates?
>
> Greetings,
>  -- Thiago V. dos Santos
>
> Postdoctoral Research Fellow
> Department of Climate and Space Science and Engineering
> University of Michigan
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From marvinsharma at yahoo.com  Sat Oct 21 03:29:11 2017
From: marvinsharma at yahoo.com (Marvin Sharma)
Date: Sat, 21 Oct 2017 01:29:11 +0000 (UTC)
Subject: [R-sig-Geo] spplot  help, please
References: <506849834.1542964.1508549351755.ref@mail.yahoo.com>
Message-ID: <506849834.1542964.1508549351755@mail.yahoo.com>

Hi,I wanted to plot the spplot of my model residuals. The plot works fine, but the state map does not appear. Code is given below and the data are attached. I would greatly appreciate any help in this.
Marvin

library(spgwr)library(spdep)library(maps)library(maptools)data<-read.csv("try.csv",header=TRUE)coords=cbind(data$Longitude,data$Latitude)g.adapt.gauss <- gwr.sel(y~x, data,coords,adapt=TRUE)res.adpt <- gwr(y~x, data,coords, adapt=g.adapt.gauss)brks <- c(-0.25, 0, 0.01, 0.025, 0.075)cols <- grey(5:2/6)res.adpt$SDF$ols.e <- residuals(lm(y~x, data))spplot(res.adpt$SDF, c("ols.e","gwr.e"),main="Residuals")
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20171021/39cd3667/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: try.csv
Type: application/vnd.ms-excel
Size: 8724 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20171021/39cd3667/attachment.xlb>

From HodgessE at uhd.edu  Sat Oct 21 03:58:49 2017
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Sat, 21 Oct 2017 01:58:49 +0000
Subject: [R-sig-Geo] Is the raster package still receiving updates?
In-Reply-To: <CAAcGz98p=378aWyX=hb7Ro6Myjg9iFp5dtM=jvprFXimJ7JLUg@mail.gmail.com>
References: <1520364990.1033649.1508511658722.ref@mail.yahoo.com>
 <1520364990.1033649.1508511658722@mail.yahoo.com>,
 <CAAcGz98p=378aWyX=hb7Ro6Myjg9iFp5dtM=jvprFXimJ7JLUg@mail.gmail.com>
Message-ID: <1508551128926.11865@uhd.edu>

I could take a swat at it, if you wish.  Please do send me the list of fixes.  I could start in about a week, if that would work.
Sincerely,
Erin


Erin M. Hodgess
Associate Professor
Department of Mathematics and Statistics
University of Houston - Downtown
mailto: hodgesse at uhd.edu

________________________________________
From: R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of Michael Sumner <mdsumner at gmail.com>
Sent: Friday, October 20, 2017 8:05 PM
To: Thiago V. dos Santos
Cc: R-sig-geo Mailing List
Subject: Re: [R-sig-Geo] Is the raster package still receiving updates?

No,  it's effectively abandoned. No concrete plans known.

I'm interested to keep it going and have kept a list of fixes needed, but
not sure when or if I'll get to it.

I'd support any efforts in this,  I'll rely on raster for many years still.

Cheers,  Mike

On Sat, 21 Oct 2017, 02:05 Thiago V. dos Santos via R-sig-Geo, <
r-sig-geo at r-project.org> wrote:

> Dear list,
>
> I realized that the latest version of the raster package was released on
> CRAN over a year ago.
>
> I also noticed that Robert's participation in this list has become rather
> scarce.
>
> I was just wondering whether the raster package is still receiving updates?
>
> Greetings,
>  -- Thiago V. dos Santos
>
> Postdoctoral Research Fellow
> Department of Climate and Space Science and Engineering
> University of Michigan
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
--
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From mdsumner at gmail.com  Sat Oct 21 06:28:11 2017
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 21 Oct 2017 04:28:11 +0000
Subject: [R-sig-Geo] Is the raster package still receiving updates?
In-Reply-To: <1508551128926.11865@uhd.edu>
References: <1520364990.1033649.1508511658722.ref@mail.yahoo.com>
 <1520364990.1033649.1508511658722@mail.yahoo.com>
 <CAAcGz98p=378aWyX=hb7Ro6Myjg9iFp5dtM=jvprFXimJ7JLUg@mail.gmail.com>
 <1508551128926.11865@uhd.edu>
Message-ID: <CAAcGz9_-qUYEpwDMQU=qmTnqVemGvSq63tEyJGf=8ApkTG+_ZQ@mail.gmail.com>

Great! I'm keen, but haven't done the work needed to flesh this out
properly:

https://github.com/mdsumner/raster-rforge/issues

I have not checked if there's been any commits to r-forge since I cloned
this.

Cheers, Mike

On Sat, 21 Oct 2017, 12:58 Hodgess, Erin, <HodgessE at uhd.edu> wrote:

> I could take a swat at it, if you wish.  Please do send me the list of
> fixes.  I could start in about a week, if that would work.
> Sincerely,
> Erin
>
>
> Erin M. Hodgess
> Associate Professor
> Department of Mathematics and Statistics
> University of Houston - Downtown
> mailto: hodgesse at uhd.edu
>
> ________________________________________
> From: R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of Michael
> Sumner <mdsumner at gmail.com>
> Sent: Friday, October 20, 2017 8:05 PM
> To: Thiago V. dos Santos
> Cc: R-sig-geo Mailing List
> Subject: Re: [R-sig-Geo] Is the raster package still receiving updates?
>
> No,  it's effectively abandoned. No concrete plans known.
>
> I'm interested to keep it going and have kept a list of fixes needed, but
> not sure when or if I'll get to it.
>
> I'd support any efforts in this,  I'll rely on raster for many years still.
>
> Cheers,  Mike
>
> On Sat, 21 Oct 2017, 02:05 Thiago V. dos Santos via R-sig-Geo, <
> r-sig-geo at r-project.org> wrote:
>
> > Dear list,
> >
> > I realized that the latest version of the raster package was released on
> > CRAN over a year ago.
> >
> > I also noticed that Robert's participation in this list has become rather
> > scarce.
> >
> > I was just wondering whether the raster package is still receiving
> updates?
> >
> > Greetings,
> >  -- Thiago V. dos Santos
> >
> > Postdoctoral Research Fellow
> > Department of Climate and Space Science and Engineering
> > University of Michigan
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> --
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> Kingston Tasmania 7050 Australia
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Sat Oct 21 06:52:57 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 21 Oct 2017 04:52:57 +0000
Subject: [R-sig-Geo] Is the raster package still receiving updates?
In-Reply-To: <CAAcGz9_-qUYEpwDMQU=qmTnqVemGvSq63tEyJGf=8ApkTG+_ZQ@mail.gmail.com>
References: <1520364990.1033649.1508511658722.ref@mail.yahoo.com>
 <1520364990.1033649.1508511658722@mail.yahoo.com>
 <CAAcGz98p=378aWyX=hb7Ro6Myjg9iFp5dtM=jvprFXimJ7JLUg@mail.gmail.com>
 <1508551128926.11865@uhd.edu>,
 <CAAcGz9_-qUYEpwDMQU=qmTnqVemGvSq63tEyJGf=8ApkTG+_ZQ@mail.gmail.com>
Message-ID: <E7824B12CF1B784E.e319c03c-61a4-4b29-b62c-31fe5bfe31de@mail.outlook.com>

The CRAN raster package has not been abandoned, if it had, it would have been reclassified as orphaned. Its test results have notes but no warnings or errors. It would be orphaned if the maintainer did not respond to CRAN requests to resolve test errors. Consequently, you are suggesting a fork, and should rename any package. Only the maintainer may update existing CRAN packages. I would not think that forking an existing CRAN package is the most productive way of contributing to the community. The package has many reverse dependencies, so setting up a test framework to find backwards incompatibilities would be crucial.

Of course, all contributions are welcome.

Roger

Roger Bivand
Norwegian School of Economics
Bergen, Norway



Fra: Michael Sumner
Sendt: l?rdag 21. oktober, 06.28
Emne: Re: [R-sig-Geo] Is the raster package still receiving updates?
Til: Hodgess, Erin
Kopi: R-sig-geo Mailing List


Great! I'm keen, but haven't done the work needed to flesh this out properly: https://github.com/mdsumner/raster-rforge/issues I have not checked if there's been any commits to r-forge since I cloned this. Cheers, Mike On Sat, 21 Oct 2017, 12:58 Hodgess, Erin, wrote: > I could take a swat at it, if you wish. Please do send me the list of > fixes. I could start in about a week, if that would work. > Sincerely, > Erin > > > Erin M. Hodgess > Associate Professor > Department of Mathematics and Statistics > University of Houston - Downtown > mailto: hodgesse at uhd.edu > > ________________________________________ > From: R-sig-Geo on behalf of Michael > Sumner > Sent: Friday, October 20, 2017 8:05 PM > To: Thiago V. dos Santos > Cc: R-sig-geo Mailing List > Subject: Re: [R-sig-Geo] Is the raster package still receiving updates? > > No, it's effectively abandoned. No concrete plans known. > > I'm interested to keep it going and have kept a list of fixes needed, but > not sure when or if I'll get to it. > > I'd support any efforts in this, I'll rely on raster for many years still. > > Cheers, Mike > > On Sat, 21 Oct 2017, 02:05 Thiago V. dos Santos via R-sig-Geo, < > r-sig-geo at r-project.org> wrote: > > > Dear list, > > > > I realized that the latest version of the raster package was released on > > CRAN over a year ago. > > > > I also noticed that Robert's participation in this list has become rather > > scarce. > > > > I was just wondering whether the raster package is still receiving > updates? > > > > Greetings, > > -- Thiago V. dos Santos > > > > Postdoctoral Research Fellow > > Department of Climate and Space Science and Engineering > > University of Michigan > > > > _______________________________________________ > > R-sig-Geo mailing list > > R-sig-Geo at r-project.org > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > -- > Dr. Michael Sumner > Software and Database Engineer > Australian Antarctic Division > 203 Channel Highway > Kingston Tasmania 7050 Australia > > [[alternative HTML version deleted]] > > _______________________________________________ > R-sig-Geo mailing list > R-sig-Geo at r-project.org > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr. Michael Sumner Software and Database Engineer Australian Antarctic Division 203 Channel Highway Kingston Tasmania 7050 Australia [[alternative HTML version deleted]] _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From bfalevlist at gmail.com  Sat Oct 21 07:53:27 2017
From: bfalevlist at gmail.com (=?UTF-8?Q?Bede-Fazekas_=c3=81kos?=)
Date: Sat, 21 Oct 2017 07:53:27 +0200
Subject: [R-sig-Geo] spplot help, please
In-Reply-To: <506849834.1542964.1508549351755@mail.yahoo.com>
References: <506849834.1542964.1508549351755.ref@mail.yahoo.com>
 <506849834.1542964.1508549351755@mail.yahoo.com>
Message-ID: <ec7e9820-e5f9-5b34-d81b-a30870acdc1c@gmail.com>

Hi Marvin,

this code works fine just as it should work. Which "state map" you need? 
A basemap with terrain/roads/cities/borders? In this case there are 
several possibilities to do that. Have a look at these links, they may 
solve your problem:
https://pakillo.github.io/R-GIS-tutorial/#gmap
http://www.nickeubank.com/wp-content/uploads/2015/10/RGIS3_MakingMaps_part1_mappingVectorData.html 
(Section "4.2 Basemaps with spplot")

HTH,
?kos Bede-Fazekas
Hungarian Academy of Sciences


2017.10.21. 3:29 keltez?ssel, Marvin Sharma via R-sig-Geo ?rta:
> Hi,
> I wanted to plot the spplot of my model residuals. The plot works 
> fine, but the state map does not appear. Code is given below and the 
> data are attached. I would greatly appreciate any help in this.
>
> Marvin
>
>
> library(spgwr)
> library(spdep)
> library(maps)
> library(maptools)
> data<-read.csv("try.csv",header=TRUE)
> coords=cbind(data$Longitude,data$Latitude)
> g.adapt.gauss <- gwr.sel(y~x, data,coords,adapt=TRUE)
> res.adpt <- gwr(y~x, data,coords, adapt=g.adapt.gauss)
> brks <- c(-0.25, 0, 0.01, 0.025, 0.075)
> cols <- grey(5:2/6)
> res.adpt$SDF$ols.e <- residuals(lm(y~x, data))
> spplot(res.adpt$SDF, c("ols.e","gwr.e"),main="Residuals")
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From reudenbach at uni-marburg.de  Sat Oct 21 09:01:17 2017
From: reudenbach at uni-marburg.de (Chris Reudenbach)
Date: Sat, 21 Oct 2017 09:01:17 +0200
Subject: [R-sig-Geo] Is the raster package still receiving updates?
In-Reply-To: <E7824B12CF1B784E.e319c03c-61a4-4b29-b62c-31fe5bfe31de@mail.outlook.com>
References: <1520364990.1033649.1508511658722.ref@mail.yahoo.com>
 <1520364990.1033649.1508511658722@mail.yahoo.com>
 <CAAcGz98p=378aWyX=hb7Ro6Myjg9iFp5dtM=jvprFXimJ7JLUg@mail.gmail.com>
 <1508551128926.11865@uhd.edu>
 <CAAcGz9_-qUYEpwDMQU=qmTnqVemGvSq63tEyJGf=8ApkTG+_ZQ@mail.gmail.com>
 <E7824B12CF1B784E.e319c03c-61a4-4b29-b62c-31fe5bfe31de@mail.outlook.com>
Message-ID: <f458d17f-f923-e7bb-5243-7ec0a83af0e1@uni-marburg.de>

Many of us rely on the raster package as a crucial basis for their work. 
Big thank to Robert.? Nevertheless to contribute needs to focus needs 
and ressources.? Maybe an information exchange/discussion with Robert 
about options such as if/how the interested community can support would 
be more productive.

cheers Chris

Am 21.10.2017 um 06:52 schrieb Roger Bivand:
> The CRAN raster package has not been abandoned, if it had, it would have been reclassified as orphaned. Its test results have notes but no warnings or errors. It would be orphaned if the maintainer did not respond to CRAN requests to resolve test errors. Consequently, you are suggesting a fork, and should rename any package. Only the maintainer may update existing CRAN packages. I would not think that forking an existing CRAN package is the most productive way of contributing to the community. The package has many reverse dependencies, so setting up a test framework to find backwards incompatibilities would be crucial.
>
> Of course, all contributions are welcome.
>
> Roger
>
> Roger Bivand
> Norwegian School of Economics
> Bergen, Norway
>
>
>
> Fra: Michael Sumner
> Sendt: l?rdag 21. oktober, 06.28
> Emne: Re: [R-sig-Geo] Is the raster package still receiving updates?
> Til: Hodgess, Erin
> Kopi: R-sig-geo Mailing List
>
>
> Great! I'm keen, but haven't done the work needed to flesh this out properly: https://github.com/mdsumner/raster-rforge/issues I have not checked if there's been any commits to r-forge since I cloned this. Cheers, Mike On Sat, 21 Oct 2017, 12:58 Hodgess, Erin, wrote: > I could take a swat at it, if you wish. Please do send me the list of > fixes. I could start in about a week, if that would work. > Sincerely, > Erin > > > Erin M. Hodgess > Associate Professor > Department of Mathematics and Statistics > University of Houston - Downtown > mailto: hodgesse at uhd.edu > > ________________________________________ > From: R-sig-Geo on behalf of Michael > Sumner > Sent: Friday, October 20, 2017 8:05 PM > To: Thiago V. dos Santos > Cc: R-sig-geo Mailing List > Subject: Re: [R-sig-Geo] Is the raster package still receiving updates? > > No, it's effectively abandoned. No concrete plans known. > > I'm interested to keep it going and have kept a list of fixes needed, but > not sure when or if I'll get to it. > > I'd support any efforts in this, I'll rely on raster for many years still. > > Cheers, Mike > > On Sat, 21 Oct 2017, 02:05 Thiago V. dos Santos via R-sig-Geo, < > r-sig-geo at r-project.org> wrote: > > > Dear list, > > > > I realized that the latest version of the raster package was released on > > CRAN over a year ago. > > > > I also noticed that Robert's participation in this list has become rather > > scarce. > > > > I was just wondering whether the raster package is still receiving > updates? > > > > Greetings, > > -- Thiago V. dos Santos > > > > Postdoctoral Research Fellow > > Department of Climate and Space Science and Engineering > > University of Michigan > > > > _______________________________________________ > > R-sig-Geo mailing list > > R-sig-Geo at r-project.org > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > -- > Dr. Michael Sumner > Software and Database Engineer > Australian Antarctic Division > 203 Channel Highway > Kingston Tasmania 7050 Australia > > [[alternative HTML version deleted]] > > ____
> ___________________________________________ > R-sig-Geo mailing list > R-sig-Geo at r-project.org > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr. Michael Sumner Software and Database Engineer Australian Antarctic Division 203 Channel Highway Kingston Tasmania 7050 Australia [[alternative HTML version deleted]] _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Dr Christoph Reudenbach, Philipps-University of Marburg, Faculty of Geography, GIS and Environmental Modeling, Deutschhausstr. 10, D-35032 Marburg, fon: ++49.(0)6421.2824296, fax: ++49.(0)6421.2828950, web: gis-ma.org, giswerk.org, moc.environmentalinformatics-marburg.de


From Roger.Bivand at nhh.no  Sat Oct 21 10:41:40 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 21 Oct 2017 08:41:40 +0000
Subject: [R-sig-Geo] Is the raster package still receiving updates?
In-Reply-To: <f458d17f-f923-e7bb-5243-7ec0a83af0e1@uni-marburg.de>
References: <1520364990.1033649.1508511658722.ref@mail.yahoo.com>
 <1520364990.1033649.1508511658722@mail.yahoo.com>
 <CAAcGz98p=378aWyX=hb7Ro6Myjg9iFp5dtM=jvprFXimJ7JLUg@mail.gmail.com>
 <1508551128926.11865@uhd.edu>
 <CAAcGz9_-qUYEpwDMQU=qmTnqVemGvSq63tEyJGf=8ApkTG+_ZQ@mail.gmail.com>
 <E7824B12CF1B784E.e319c03c-61a4-4b29-b62c-31fe5bfe31de@mail.outlook.com>,
 <f458d17f-f923-e7bb-5243-7ec0a83af0e1@uni-marburg.de>
Message-ID: <E7824B12CF1B784E.03827277-398b-4e71-ba14-e87242a4897e@mail.outlook.com>

Yes, this sounds fruitful. For now, I suggest that those wishing to enhance raster do so in an additional package enhancing raster and depending on it. Immediately, we should help Robert resolve the notes in the tests, they do not affect functionality now, but deserve attention to bring the package into full CRAN compliance. I can help with this.

Roger

Roger Bivand
Norwegian School of Economics
Bergen, Norway



Fra: Chris Reudenbach
Sendt: l?rdag 21. oktober, 09.01
Emne: Re: [R-sig-Geo] Is the raster package still receiving updates?
Til: r-sig-geo at r-project.org


Many of us rely on the raster package as a crucial basis for their work. Big thank to Robert.  Nevertheless to contribute needs to focus needs and ressources.  Maybe an information exchange/discussion with Robert about options such as if/how the interested community can support would be more productive. cheers Chris Am 21.10.2017 um 06:52 schrieb Roger Bivand: > The CRAN raster package has not been abandoned, if it had, it would have been reclassified as orphaned. Its test results have notes but no warnings or errors. It would be orphaned if the maintainer did not respond to CRAN requests to resolve test errors. Consequently, you are suggesting a fork, and should rename any package. Only the maintainer may update existing CRAN packages. I would not think that forking an existing CRAN package is the most productive way of contributing to the community. The package has many reverse dependencies, so setting up a test framework to find backwards incompatibilities would be crucial. > > Of course, all contributions are welcome. > > Roger > > Roger Bivand > Norwegian School of Economics > Bergen, Norway > > > > Fra: Michael Sumner > Sendt: l?rdag 21. oktober, 06.28 > Emne: Re: [R-sig-Geo] Is the raster package still receiving updates? > Til: Hodgess, Erin > Kopi: R-sig-geo Mailing List > > > Great! I'm keen, but haven't done the work needed to flesh this out properly: https://github.com/mdsumner/raster-rforge/issues I have not checked if there's been any commits to r-forge since I cloned this. Cheers, Mike On Sat, 21 Oct 2017, 12:58 Hodgess, Erin, wrote: > I could take a swat at it, if you wish. Please do send me the list of > fixes. I could start in about a week, if that would work. > Sincerely, > Erin > > > Erin M. Hodgess > Associate Professor > Department of Mathematics and Statistics > University of Houston - Downtown > mailto: hodgesse at uhd.edu > > ________________________________________ > From: R-sig-Geo on behalf of Michael > Sumner > Sent: Friday, October 20, 2017 8:05 PM > To: Thiago V. dos Santos > Cc: R-sig-geo Mailing List > Subject: Re: [R-sig-Geo] Is the raster package still receiving updates? > > No, it's effectively abandoned. No concrete plans known. > > I'm interested to keep it going and have kept a list of fixes needed, but > not sure when or if I'll get to it. > > I'd support any efforts in this, I'll rely on raster for many years still. > > Cheers, Mike > > On Sat, 21 Oct 2017, 02:05 Thiago V. dos Santos via R-sig-Geo, < > r-sig-geo at r-project.org> wrote: > > > Dear list, > > > > I realized that the latest version of the raster package was released on > > CRAN over a year ago. > > > > I also noticed that Robert's participation in this list has become rather > > scarce. > > > > I was just wondering whether the raster package is still receiving > updates? > > > > Greetings, > > -- Thiago V. dos Santos > > > > Postdoctoral Research Fellow > > Department of Climate and Space Science and Engineering > > University of Michigan > > > > _______________________________________________ > > R-sig-Geo mailing list > > R-sig-Geo at r-project.org > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > -- > Dr. Michael Sumner > Software and Database Engineer > Australian Antarctic Division > 203 Channel Highway > Kingston Tasmania 7050 Australia > > [[alternative HTML version deleted]] > > ____ > ___________________________________________ > R-sig-Geo mailing list > R-sig-Geo at r-project.org > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr. Michael Sumner Software and Database Engineer Australian Antarctic Division 203 Channel Highway Kingston Tasmania 7050 Australia [[alternative HTML version deleted]] _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > [[alternative HTML version deleted]] > > _______________________________________________ > R-sig-Geo mailing list > R-sig-Geo at r-project.org > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr Christoph Reudenbach, Philipps-University of Marburg, Faculty of Geography, GIS and Environmental Modeling, Deutschhausstr. 10, D-35032 Marburg, fon: ++49.(0)6421.2824296, fax: ++49.(0)6421.2828950, web: gis-ma.org, giswerk.org, moc.environmentalinformatics-marburg.de _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From edzer.pebesma at uni-muenster.de  Sat Oct 21 10:58:55 2017
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sat, 21 Oct 2017 10:58:55 +0200
Subject: [R-sig-Geo] spplot help, please
In-Reply-To: <506849834.1542964.1508549351755@mail.yahoo.com>
References: <506849834.1542964.1508549351755.ref@mail.yahoo.com>
 <506849834.1542964.1508549351755@mail.yahoo.com>
Message-ID: <bc19783d-f2f1-2784-19c7-749307860463@uni-muenster.de>



On 10/21/2017 03:29 AM, Marvin Sharma via R-sig-Geo wrote:
> Hi,
> I wanted to plot the spplot of my model residuals. The plot works fine,
> but the state map does not appear. Code is given below and the data are
> attached. I would greatly appreciate any help in this.

I can't see where you're trying to plot/add a state map, in the example
below.

> 
> Marvin
> 
> 
> library(spgwr)
> library(spdep)
> library(maps)
> library(maptools)
> data<-read.csv("try.csv",header=TRUE)
> coords=cbind(data$Longitude,data$Latitude)
> g.adapt.gauss <- gwr.sel(y~x, data,coords,adapt=TRUE)
> res.adpt <- gwr(y~x, data,coords, adapt=g.adapt.gauss)
> brks <- c(-0.25, 0, 0.01, 0.025, 0.075)
> cols <- grey(5:2/6)
> res.adpt$SDF$ols.e <- residuals(lm(y~x, data))
> spplot(res.adpt$SDF, c("ols.e","gwr.e"),main="Residuals")
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From florian.detsch at staff.uni-marburg.de  Sat Oct 21 11:09:01 2017
From: florian.detsch at staff.uni-marburg.de (Florian Detsch)
Date: Sat, 21 Oct 2017 11:09:01 +0200
Subject: [R-sig-Geo] spplot help, please
In-Reply-To: <bc19783d-f2f1-2784-19c7-749307860463@uni-muenster.de>
References: <506849834.1542964.1508549351755.ref@mail.yahoo.com>
 <506849834.1542964.1508549351755@mail.yahoo.com>
 <bc19783d-f2f1-2784-19c7-749307860463@uni-muenster.de>
Message-ID: <36e49111-5bbe-35d0-12d5-53f63c8c3f83@staff.uni-marburg.de>

The others are right, there is no state map in your code that you might 
add to the points plot.

After a quick inspection of which geographic area we are dealing with, 
here is one possible - and quite basic - solution on how to add state 
polygons of the US (if that is what you intend to do) to your plot:

## download state polygons for the us
library(raster)
usa = getData("GADM", country = "USA", level = 1)

## create subset of state polygons (otherwise spplot() will take quite 
long)
proj4string(res.adpt$SDF) = "+init=epsg:4326"

ext = extend(extent(res.adpt$SDF), 2.5)
states = crop(usa, ext)

## add state boundaries using 'sp.layout'
p = spplot(res.adpt$SDF, c("ols.e","gwr.e"), main = "Residuals",
 ?????????? sp.layout = list("sp.polygons", states))
p

Alternatively, you could also use latticeExtra::layer() instead of 
'sp.layout'. Simply have a look at the help pages for further details.

Cheers,
Florian


Am 21.10.2017 um 10:58 schrieb Edzer Pebesma:
>
> On 10/21/2017 03:29 AM, Marvin Sharma via R-sig-Geo wrote:
>> Hi,
>> I wanted to plot the spplot of my model residuals. The plot works fine,
>> but the state map does not appear. Code is given below and the data are
>> attached. I would greatly appreciate any help in this.
> I can't see where you're trying to plot/add a state map, in the example
> below.
>
>> Marvin
>>
>>
>> library(spgwr)
>> library(spdep)
>> library(maps)
>> library(maptools)
>> data<-read.csv("try.csv",header=TRUE)
>> coords=cbind(data$Longitude,data$Latitude)
>> g.adapt.gauss <- gwr.sel(y~x, data,coords,adapt=TRUE)
>> res.adpt <- gwr(y~x, data,coords, adapt=g.adapt.gauss)
>> brks <- c(-0.25, 0, 0.01, 0.025, 0.075)
>> cols <- grey(5:2/6)
>> res.adpt$SDF$ols.e <- residuals(lm(y~x, data))
>> spplot(res.adpt$SDF, c("ols.e","gwr.e"),main="Residuals")
>>
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>

-- 
Dr. Florian Detsch
Environmental Informatics
Department of Geography
Philipps-Universit?t Marburg
Deutschhausstra?e 12
35032 (parcel post: 35037) Marburg, Germany

Phone: +49 (0) 6421 28-25323
Web: http://www.uni-marburg.de/fb19/fachgebiete/umweltinformatik/detschf/index.html


From edzer.pebesma at uni-muenster.de  Sat Oct 21 11:32:33 2017
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sat, 21 Oct 2017 11:32:33 +0200
Subject: [R-sig-Geo] Is the raster package still receiving updates?
In-Reply-To: <E7824B12CF1B784E.03827277-398b-4e71-ba14-e87242a4897e@mail.outlook.com>
References: <1520364990.1033649.1508511658722.ref@mail.yahoo.com>
 <1520364990.1033649.1508511658722@mail.yahoo.com>
 <CAAcGz98p=378aWyX=hb7Ro6Myjg9iFp5dtM=jvprFXimJ7JLUg@mail.gmail.com>
 <1508551128926.11865@uhd.edu>
 <CAAcGz9_-qUYEpwDMQU=qmTnqVemGvSq63tEyJGf=8ApkTG+_ZQ@mail.gmail.com>
 <E7824B12CF1B784E.e319c03c-61a4-4b29-b62c-31fe5bfe31de@mail.outlook.com>
 <f458d17f-f923-e7bb-5243-7ec0a83af0e1@uni-marburg.de>
 <E7824B12CF1B784E.03827277-398b-4e71-ba14-e87242a4897e@mail.outlook.com>
Message-ID: <6912309e-7558-0ffe-41f7-dd289dd34dfe@uni-muenster.de>

The the NOTEs on CRAN and the issues raised on Mike's raster-rforge GH
repo to me suggest that raster has, for a while now, reached a mature
state. Of course, you'd wish that raster development, in terms of
extending its power and features, would continue the pace it did 10
years ago, but that's a different issue. Mike has write access to the
raster r-forge sources, it shouldn't be hard to support Robert with
current issues.

Right after rstudio::conf (Feb 4/5) I'm meeting with Robert Hijmans and
Etienne Racine, to discuss, and work on raster future and integration of
rasters and stars. Anyone interested, feel free to join.

Stars has the ambition to jump over raster, in the sense that it doesn't
want to have the local hard drive as a limitation. That calls for
rethinking quite a few things. So far, things are still all in main
memory but it already integrates with sf:

https://gist.github.com/edzer/381dac079ddcd5174be31209675b3822

and handles time stacks of different attributes in single objects. Feed
back welcome as always; will write up the first blog in a few weeks.


On 10/21/2017 10:41 AM, Roger Bivand wrote:
> Yes, this sounds fruitful. For now, I suggest that those wishing to enhance raster do so in an additional package enhancing raster and depending on it. Immediately, we should help Robert resolve the notes in the tests, they do not affect functionality now, but deserve attention to bring the package into full CRAN compliance. I can help with this.
> 
> Roger
> 
> Roger Bivand
> Norwegian School of Economics
> Bergen, Norway
> 
> 
> 
> Fra: Chris Reudenbach
> Sendt: l?rdag 21. oktober, 09.01
> Emne: Re: [R-sig-Geo] Is the raster package still receiving updates?
> Til: r-sig-geo at r-project.org
> 
> 
> Many of us rely on the raster package as a crucial basis for their work. Big thank to Robert.  Nevertheless to contribute needs to focus needs and ressources.  Maybe an information exchange/discussion with Robert about options such as if/how the interested community can support would be more productive. cheers Chris Am 21.10.2017 um 06:52 schrieb Roger Bivand: > The CRAN raster package has not been abandoned, if it had, it would have been reclassified as orphaned. Its test results have notes but no warnings or errors. It would be orphaned if the maintainer did not respond to CRAN requests to resolve test errors. Consequently, you are suggesting a fork, and should rename any package. Only the maintainer may update existing CRAN packages. I would not think that forking an existing CRAN package is the most productive way of contributing to the community. The package has many reverse dependencies, so setting up a test framework to find backwards incompatibilities would be crucial. > > Of course, all contributions are welcome. > > Roger > > Roger Bivand > Norwegian School of Economics > Bergen, Norway > > > > Fra: Michael Sumner > Sendt: l?rdag 21. oktober, 06.28 > Emne: Re: [R-sig-Geo] Is the raster package still receiving updates? > Til: Hodgess, Erin > Kopi: R-sig-geo Mailing List > > > Great! I'm keen, but haven't done the work needed to flesh this out properly: https://github.com/mdsumner/raster-rforge/issues I have not checked if there's been any commits to r-forge since I cloned this. Cheers, Mike On Sat, 21 Oct 2017, 12:58 Hodgess, Erin, wrote: > I could take a swat at it, if you wish. Please do send me the list of > fixes. I could start in about a week, if that would work. > Sincerely, > Erin > > > Erin M. Hodgess > Associate Professor > Department of Mathematics and Statistics > University of Houston - Downtown > mailto: hodgesse at uhd.edu > > ________________________________________ > From: R-sig-Geo on behalf of Michael > Sumner > Sent: Friday, October 20, 2017 8:05 PM > To: Thiago V. dos Santos > Cc: R-sig-geo Mailing List > Subject: Re: [R-sig-Geo] Is the raster package still receiving updates? > > No, it's effectively abandoned. No concrete plans known. > > I'm interested to keep it going and have kept a list of fixes needed, but > not sure when or if I'll get to it. > > I'd support any efforts in this, I'll rely on raster for many years still. > > Cheers, Mike > > On Sat, 21 Oct 2017, 02:05 Thiago V. dos Santos via R-sig-Geo, < > r-sig-geo at r-project.org> wrote: > > > Dear list, > > > > I realized that the latest version of the raster package was released on > > CRAN over a year ago. > > > > I also noticed that Robert's participation in this list has become rather > > scarce. > > > > I was just wondering whether the raster package is still receiving > updates? > > > > Greetings, > > -- Thiago V. dos Santos > > > > Postdoctoral Research Fellow > > Department of Climate and Space Science and Engineering > > University of Michigan > > > > _______________________________________________ > > R-sig-Geo mailing list > > R-sig-Geo at r-project.org > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > -- > Dr. Michael Sumner > Software and Database Engineer > Australian Antarctic Division > 203 Channel Highway > Kingston Tasmania 7050 Australia > > [[alternative HTML version deleted]] > > ____ > ___________________________________________ > R-sig-Geo mailing list > R-sig-Geo at r-project.org > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr. Michael Sumner Software and Database Engineer Australian Antarctic Division 203 Channel Highway Kingston Tasmania 7050 Australia [[alternative HTML version deleted]] _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > [[alternative HTML version deleted]] > > _______________________________________________ > R-sig-Geo mailing list > R-sig-Geo at r-project.org > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr Christoph Reudenbach, Philipps-University of Marburg, Faculty of Geography, GIS and Environmental Modeling, Deutschhausstr. 10, D-35032 Marburg, fon: ++49.(0)6421.2824296, fax: ++49.(0)6421.2828950, web: gis-ma.org, giswerk.org, moc.environmentalinformatics-marburg.de _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081

From vijaylulla at gmail.com  Sat Oct 21 18:54:30 2017
From: vijaylulla at gmail.com (Vijay Lulla)
Date: Sat, 21 Oct 2017 12:54:30 -0400
Subject: [R-sig-Geo] Is the raster package still receiving updates?
In-Reply-To: <6912309e-7558-0ffe-41f7-dd289dd34dfe@uni-muenster.de>
References: <1520364990.1033649.1508511658722.ref@mail.yahoo.com>
 <1520364990.1033649.1508511658722@mail.yahoo.com>
 <CAAcGz98p=378aWyX=hb7Ro6Myjg9iFp5dtM=jvprFXimJ7JLUg@mail.gmail.com>
 <1508551128926.11865@uhd.edu>
 <CAAcGz9_-qUYEpwDMQU=qmTnqVemGvSq63tEyJGf=8ApkTG+_ZQ@mail.gmail.com>
 <E7824B12CF1B784E.e319c03c-61a4-4b29-b62c-31fe5bfe31de@mail.outlook.com>
 <f458d17f-f923-e7bb-5243-7ec0a83af0e1@uni-marburg.de>
 <E7824B12CF1B784E.03827277-398b-4e71-ba14-e87242a4897e@mail.outlook.com>
 <6912309e-7558-0ffe-41f7-dd289dd34dfe@uni-muenster.de>
Message-ID: <CAKkiGbvmgSxHA1vKCZomNab-uAFFJ3wWJJEe-nG4ytHjZaE8cg@mail.gmail.com>

Just like Mike I too will rely on raster for many years still and I will be
very happy to support efforts on this or whatever else the community
leaders (Edzer, Roger, and others) decide is the best way for us to move
forward.

Thanks,
Vijay.

On Sat, Oct 21, 2017 at 5:32 AM, Edzer Pebesma <
edzer.pebesma at uni-muenster.de> wrote:

> The the NOTEs on CRAN and the issues raised on Mike's raster-rforge GH
> repo to me suggest that raster has, for a while now, reached a mature
> state. Of course, you'd wish that raster development, in terms of
> extending its power and features, would continue the pace it did 10
> years ago, but that's a different issue. Mike has write access to the
> raster r-forge sources, it shouldn't be hard to support Robert with
> current issues.
>
> Right after rstudio::conf (Feb 4/5) I'm meeting with Robert Hijmans and
> Etienne Racine, to discuss, and work on raster future and integration of
> rasters and stars. Anyone interested, feel free to join.
>
> Stars has the ambition to jump over raster, in the sense that it doesn't
> want to have the local hard drive as a limitation. That calls for
> rethinking quite a few things. So far, things are still all in main
> memory but it already integrates with sf:
>
> https://gist.github.com/edzer/381dac079ddcd5174be31209675b3822
>
> and handles time stacks of different attributes in single objects. Feed
> back welcome as always; will write up the first blog in a few weeks.
>
>
> On 10/21/2017 10:41 AM, Roger Bivand wrote:
> > Yes, this sounds fruitful. For now, I suggest that those wishing to
> enhance raster do so in an additional package enhancing raster and
> depending on it. Immediately, we should help Robert resolve the notes in
> the tests, they do not affect functionality now, but deserve attention to
> bring the package into full CRAN compliance. I can help with this.
> >
> > Roger
> >
> > Roger Bivand
> > Norwegian School of Economics
> > Bergen, Norway
> >
> >
> >
> > Fra: Chris Reudenbach
> > Sendt: l?rdag 21. oktober, 09.01
> > Emne: Re: [R-sig-Geo] Is the raster package still receiving updates?
> > Til: r-sig-geo at r-project.org
> >
> >
> > Many of us rely on the raster package as a crucial basis for their work.
> Big thank to Robert.  Nevertheless to contribute needs to focus needs and
> ressources.  Maybe an information exchange/discussion with Robert about
> options such as if/how the interested community can support would be more
> productive. cheers Chris Am 21.10.2017 um 06:52 schrieb Roger Bivand: > The
> CRAN raster package has not been abandoned, if it had, it would have been
> reclassified as orphaned. Its test results have notes but no warnings or
> errors. It would be orphaned if the maintainer did not respond to CRAN
> requests to resolve test errors. Consequently, you are suggesting a fork,
> and should rename any package. Only the maintainer may update existing CRAN
> packages. I would not think that forking an existing CRAN package is the
> most productive way of contributing to the community. The package has many
> reverse dependencies, so setting up a test framework to find backwards
> incompatibilities would be crucial. > > Of course, all contributions are
> welcome. > > Roger > > Roger Bivand > Norwegian School of Economics >
> Bergen, Norway > > > > Fra: Michael Sumner > Sendt: l?rdag 21. oktober,
> 06.28 > Emne: Re: [R-sig-Geo] Is the raster package still receiving
> updates? > Til: Hodgess, Erin > Kopi: R-sig-geo Mailing List > > > Great!
> I'm keen, but haven't done the work needed to flesh this out properly:
> https://github.com/mdsumner/raster-rforge/issues I have not checked if
> there's been any commits to r-forge since I cloned this. Cheers, Mike On
> Sat, 21 Oct 2017, 12:58 Hodgess, Erin, wrote: > I could take a swat at it,
> if you wish. Please do send me the list of > fixes. I could start in about
> a week, if that would work. > Sincerely, > Erin > > > Erin M. Hodgess >
> Associate Professor > Department of Mathematics and Statistics > University
> of Houston - Downtown > mailto: hodgesse at uhd.edu > >
> ________________________________________ > From: R-sig-Geo on behalf of
> Michael > Sumner > Sent: Friday, October 20, 2017 8:05 PM > To: Thiago V.
> dos Santos > Cc: R-sig-geo Mailing List > Subject: Re: [R-sig-Geo] Is the
> raster package still receiving updates? > > No, it's effectively abandoned.
> No concrete plans known. > > I'm interested to keep it going and have kept
> a list of fixes needed, but > not sure when or if I'll get to it. > > I'd
> support any efforts in this, I'll rely on raster for many years still. > >
> Cheers, Mike > > On Sat, 21 Oct 2017, 02:05 Thiago V. dos Santos via
> R-sig-Geo, < > r-sig-geo at r-project.org> wrote: > > > Dear list, > > > > I
> realized that the latest version of the raster package was released on > >
> CRAN over a year ago. > > > > I also noticed that Robert's participation in
> this list has become rather > > scarce. > > > > I was just wondering
> whether the raster package is still receiving > updates? > > > > Greetings,
> > > -- Thiago V. dos Santos > > > > Postdoctoral Research Fellow > >
> Department of Climate and Space Science and Engineering > > University of
> Michigan > > > > _______________________________________________ > >
> R-sig-Geo mailing list > > R-sig-Geo at r-project.org > >
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > -- > Dr. Michael
> Sumner > Software and Database Engineer > Australian Antarctic Division >
> 203 Channel Highway > Kingston Tasmania 7050 Australia > > [[alternative
> HTML version deleted]] > > ____ > ___________________________________________
> > R-sig-Geo mailing list > R-sig-Geo at r-project.org >
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr. Michael Sumner
> Software and Database Engineer Australian Antarctic Division 203 Channel
> Highway Kingston Tasmania 7050 Australia [[alternative HTML version
> deleted]] _______________________________________________ R-sig-Geo
> mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/
> listinfo/r-sig-geo > > > [[alternative HTML version deleted]] > >
> _______________________________________________ > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org > https://stat.ethz.ch/mailman/
> listinfo/r-sig-geo > -- Dr Christoph Reudenbach, Philipps-University of
> Marburg, Faculty of Geography, GIS and Environmental Modeling,
> Deutschhausstr. 10, D-35032 Marburg, fon: ++49.(0)6421.2824296, fax:
> ++49.(0)6421.2828950, web: gis-ma.org, giswerk.org,
> moc.environmentalinformatics-marburg.de _______________________________________________
> R-sig-Geo mailing list R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
> --
> Edzer Pebesma
> Institute for Geoinformatics
> Heisenbergstrasse 2, 48151 Muenster, Germany
> Phone: +49 251 8333081
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Vijay Lulla, Ph.D.

Assistant Professor,
Dept. of Geography,
Indiana University Purdue University Indianapolis (IUPUI)
425 University Blvd, CA-207C.
Indianapolis, IN-46202
vlulla at iupui.edu

<http://vijaylulla.com>
http://vijaylulla.com

	[[alternative HTML version deleted]]


From a.brown at ieee.org  Sun Oct 22 02:16:22 2017
From: a.brown at ieee.org (Alexander Brown)
Date: Sat, 21 Oct 2017 20:16:22 -0400
Subject: [R-sig-Geo] Is the raster package still receiving updates?
In-Reply-To: <CAKkiGbvmgSxHA1vKCZomNab-uAFFJ3wWJJEe-nG4ytHjZaE8cg@mail.gmail.com>
References: <1520364990.1033649.1508511658722.ref@mail.yahoo.com>
 <1520364990.1033649.1508511658722@mail.yahoo.com>
 <CAAcGz98p=378aWyX=hb7Ro6Myjg9iFp5dtM=jvprFXimJ7JLUg@mail.gmail.com>
 <1508551128926.11865@uhd.edu>
 <CAAcGz9_-qUYEpwDMQU=qmTnqVemGvSq63tEyJGf=8ApkTG+_ZQ@mail.gmail.com>
 <E7824B12CF1B784E.e319c03c-61a4-4b29-b62c-31fe5bfe31de@mail.outlook.com>
 <f458d17f-f923-e7bb-5243-7ec0a83af0e1@uni-marburg.de>
 <E7824B12CF1B784E.03827277-398b-4e71-ba14-e87242a4897e@mail.outlook.com>
 <6912309e-7558-0ffe-41f7-dd289dd34dfe@uni-muenster.de>
 <CAKkiGbvmgSxHA1vKCZomNab-uAFFJ3wWJJEe-nG4ytHjZaE8cg@mail.gmail.com>
Message-ID: <CAAp_v851BWU57sa0eEsgLWLo10Rpy8NEHOedA6ojnqOiCYfpRg@mail.gmail.com>

I too expect to rely on the raster package for years, and would be willing
to help to the extent of my ability and resources.

Alex Brown (a.brown at ieee.org)
http://faculty.uml.edu/abrown  -->
https://sites.google.com/site/alexbrownuml


On Sat, Oct 21, 2017 at 12:54 PM, Vijay Lulla <vijaylulla at gmail.com> wrote:

> Just like Mike I too will rely on raster for many years still and I will be
> very happy to support efforts on this or whatever else the community
> leaders (Edzer, Roger, and others) decide is the best way for us to move
> forward.
>
> Thanks,
> Vijay.
>
> On Sat, Oct 21, 2017 at 5:32 AM, Edzer Pebesma <
> edzer.pebesma at uni-muenster.de> wrote:
>
> > The the NOTEs on CRAN and the issues raised on Mike's raster-rforge GH
> > repo to me suggest that raster has, for a while now, reached a mature
> > state. Of course, you'd wish that raster development, in terms of
> > extending its power and features, would continue the pace it did 10
> > years ago, but that's a different issue. Mike has write access to the
> > raster r-forge sources, it shouldn't be hard to support Robert with
> > current issues.
> >
> > Right after rstudio::conf (Feb 4/5) I'm meeting with Robert Hijmans and
> > Etienne Racine, to discuss, and work on raster future and integration of
> > rasters and stars. Anyone interested, feel free to join.
> >
> > Stars has the ambition to jump over raster, in the sense that it doesn't
> > want to have the local hard drive as a limitation. That calls for
> > rethinking quite a few things. So far, things are still all in main
> > memory but it already integrates with sf:
> >
> > https://gist.github.com/edzer/381dac079ddcd5174be31209675b3822
> >
> > and handles time stacks of different attributes in single objects. Feed
> > back welcome as always; will write up the first blog in a few weeks.
> >
> >
> > On 10/21/2017 10:41 AM, Roger Bivand wrote:
> > > Yes, this sounds fruitful. For now, I suggest that those wishing to
> > enhance raster do so in an additional package enhancing raster and
> > depending on it. Immediately, we should help Robert resolve the notes in
> > the tests, they do not affect functionality now, but deserve attention to
> > bring the package into full CRAN compliance. I can help with this.
> > >
> > > Roger
> > >
> > > Roger Bivand
> > > Norwegian School of Economics
> > > Bergen, Norway
> > >
> > >
> > >
> > > Fra: Chris Reudenbach
> > > Sendt: l?rdag 21. oktober, 09.01
> > > Emne: Re: [R-sig-Geo] Is the raster package still receiving updates?
> > > Til: r-sig-geo at r-project.org
> > >
> > >
> > > Many of us rely on the raster package as a crucial basis for their
> work.
> > Big thank to Robert.  Nevertheless to contribute needs to focus needs and
> > ressources.  Maybe an information exchange/discussion with Robert about
> > options such as if/how the interested community can support would be more
> > productive. cheers Chris Am 21.10.2017 um 06:52 schrieb Roger Bivand: >
> The
> > CRAN raster package has not been abandoned, if it had, it would have been
> > reclassified as orphaned. Its test results have notes but no warnings or
> > errors. It would be orphaned if the maintainer did not respond to CRAN
> > requests to resolve test errors. Consequently, you are suggesting a fork,
> > and should rename any package. Only the maintainer may update existing
> CRAN
> > packages. I would not think that forking an existing CRAN package is the
> > most productive way of contributing to the community. The package has
> many
> > reverse dependencies, so setting up a test framework to find backwards
> > incompatibilities would be crucial. > > Of course, all contributions are
> > welcome. > > Roger > > Roger Bivand > Norwegian School of Economics >
> > Bergen, Norway > > > > Fra: Michael Sumner > Sendt: l?rdag 21. oktober,
> > 06.28 > Emne: Re: [R-sig-Geo] Is the raster package still receiving
> > updates? > Til: Hodgess, Erin > Kopi: R-sig-geo Mailing List > > > Great!
> > I'm keen, but haven't done the work needed to flesh this out properly:
> > https://github.com/mdsumner/raster-rforge/issues I have not checked if
> > there's been any commits to r-forge since I cloned this. Cheers, Mike On
> > Sat, 21 Oct 2017, 12:58 Hodgess, Erin, wrote: > I could take a swat at
> it,
> > if you wish. Please do send me the list of > fixes. I could start in
> about
> > a week, if that would work. > Sincerely, > Erin > > > Erin M. Hodgess >
> > Associate Professor > Department of Mathematics and Statistics >
> University
> > of Houston - Downtown > mailto: hodgesse at uhd.edu > >
> > ________________________________________ > From: R-sig-Geo on behalf of
> > Michael > Sumner > Sent: Friday, October 20, 2017 8:05 PM > To: Thiago V.
> > dos Santos > Cc: R-sig-geo Mailing List > Subject: Re: [R-sig-Geo] Is the
> > raster package still receiving updates? > > No, it's effectively
> abandoned.
> > No concrete plans known. > > I'm interested to keep it going and have
> kept
> > a list of fixes needed, but > not sure when or if I'll get to it. > > I'd
> > support any efforts in this, I'll rely on raster for many years still. >
> >
> > Cheers, Mike > > On Sat, 21 Oct 2017, 02:05 Thiago V. dos Santos via
> > R-sig-Geo, < > r-sig-geo at r-project.org> wrote: > > > Dear list, > > > >
> I
> > realized that the latest version of the raster package was released on >
> >
> > CRAN over a year ago. > > > > I also noticed that Robert's participation
> in
> > this list has become rather > > scarce. > > > > I was just wondering
> > whether the raster package is still receiving > updates? > > > >
> Greetings,
> > > > -- Thiago V. dos Santos > > > > Postdoctoral Research Fellow > >
> > Department of Climate and Space Science and Engineering > > University of
> > Michigan > > > > _______________________________________________ > >
> > R-sig-Geo mailing list > > R-sig-Geo at r-project.org > >
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > -- > Dr. Michael
> > Sumner > Software and Database Engineer > Australian Antarctic Division >
> > 203 Channel Highway > Kingston Tasmania 7050 Australia > > [[alternative
> > HTML version deleted]] > > ____ > ______________________________
> _____________
> > > R-sig-Geo mailing list > R-sig-Geo at r-project.org >
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr. Michael Sumner
> > Software and Database Engineer Australian Antarctic Division 203 Channel
> > Highway Kingston Tasmania 7050 Australia [[alternative HTML version
> > deleted]] _______________________________________________ R-sig-Geo
> > mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/
> > listinfo/r-sig-geo > > > [[alternative HTML version deleted]] > >
> > _______________________________________________ > R-sig-Geo mailing list
> > > R-sig-Geo at r-project.org > https://stat.ethz.ch/mailman/
> > listinfo/r-sig-geo > -- Dr Christoph Reudenbach, Philipps-University of
> > Marburg, Faculty of Geography, GIS and Environmental Modeling,
> > Deutschhausstr. 10, D-35032 Marburg, fon: ++49.(0)6421.2824296, fax:
> > ++49.(0)6421.2828950, web: gis-ma.org, giswerk.org,
> > moc.environmentalinformatics-marburg.de ______________________________
> _________________
> > R-sig-Geo mailing list R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> > >
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > _______________________________________________
> > > R-sig-Geo mailing list
> > > R-sig-Geo at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> > >
> >
> > --
> > Edzer Pebesma
> > Institute for Geoinformatics
> > Heisenbergstrasse 2, 48151 Muenster, Germany
> > Phone: +49 251 8333081
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
>
>
> --
> Vijay Lulla, Ph.D.
>
> Assistant Professor,
> Dept. of Geography,
> Indiana University Purdue University Indianapolis (IUPUI)
> 425 University Blvd, CA-207C.
> Indianapolis, IN-46202
> vlulla at iupui.edu
>
> <http://vijaylulla.com>
> http://vijaylulla.com
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From nivdemalach at gmail.com  Sun Oct 22 07:28:16 2017
From: nivdemalach at gmail.com (niv de malach)
Date: Sun, 22 Oct 2017 08:28:16 +0300
Subject: [R-sig-Geo] convert "errorsarlm" to "lm"
In-Reply-To: <alpine.LFD.2.21.1710201259440.2685@reclus.nhh.no>
References: <CAHxNAtnJXZqNT7scN-wjmaBUNKXp4mimnbZ0o1aa09gimyvUQA@mail.gmail.com>
 <alpine.LFD.2.21.1710201259440.2685@reclus.nhh.no>
Message-ID: <CAHxNAt=kckVK7Zs318=d6dJfTuTeuyQ4BpZ95756=ye-=Jjb+A@mail.gmail.com>

Regarding your question about MRF, I don't know what it is...

I know that the package piecewiseSEM accept the following object types:

?lm?, ?rq?, ?glm?, ?glm.nb?, ?gls?, ?pgls?, ?merMod?, ?merModLmerTest?,
?lme?, ?glmmPQL?, ?glmmadmb?, and ?glmmTMB?.

so  "transformation" of errorsarlm to any of these object should solve the
problem.


Below there is a code where a dataset is simulated and analyzed using 'lm'
and 'errorsarlm'. Only 'lm' is accepted for
SEM analysis.

Thanks,
Niv


#################### creating a simulated dataset
##############################

set.seed(1)
sample=50 # sample size (number of points)

# spatial location
Lattitude=rnorm(sample, mean = 0, sd = 4)
Longitude=rnorm(sample, mean = 0, sd = 4

# creating exploratory variables
x1=rnorm(sample, mean = 30, sd = 20)
x2=rnorm(sample, mean = -20, sd = 10)
x3=rnorm(sample, mean = 5, sd = 3)
x4=rnorm(sample, mean = 25, sd = 5)
x5=rnorm(sample, mean = -10, sd = 10)
x6=rnorm(sample, mean = 50, sd = 30)

# response variables
y1=10*x1+5*x2+2*x3+30*Lattitude+rnorm(sample, mean = 0, sd = 20) # y1 is
function of x1-x3 +location+random error
y2=10*x4+5*x5+2*x6+10*Longitude+rnorm(sample, mean = 0, sd = 20) # y1 is
function of x4-x5 +location+random error

mydata=data.frame(x1,x2,x3,x4,x5,x6,y1,y2,Lattitude,Longitude)

################# building errorsarlm objects and lm objects
####################################

library(spdep)

# creating neighbors for errorsarlm function
xy=SpatialPoints(as.matrix(mydata[,c(9,10)]))
myneighbors=dnearneigh(as.matrix(mydata[,c(9,10)]), 0, 1000, row.names =
NULL, longlat = TRUE)# 1000 kilometer distance
myweight=nb2listw(myneighbors,style="W") #

# two errorsarlm objects
sar1=errorsarlm(y1~x1+x2+x3,data=mydata,myweight)
sar2=errorsarlm(y2~x4+x5+x6,data=mydata,myweight)

# two lm objects
lm1=lm(y1~x1+x2+x3,data=mydata)
lm2=lm(y2~x4+x5+x6,data=mydata)

############### trying to use sarlm and lm in "piecewiseSEM"
####################

library(piecewiseSEM) # package for structural equation modeling
SEM_LM=sem.fit(list(lm1,lm2),data=mydata) # the package accept lm objects
(and random models such as lme)
SEM_errorsarLM=sem.fit(list(sar1,sar2),data=mydata) # the package does not
accept errprsarlm objects

# Error in nobs.default(x) : no 'nobs' method is available #




?

On Fri, Oct 20, 2017 at 2:06 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:

> On Wed, 18 Oct 2017, niv de malach wrote:
>
> Hi all,
>> I need to convert an "errorsarlm" object into a simple "lm" object because
>> the package I use ("piecewiseSEM") could not deal with "errorsarlm". Is
>> there a way to transform the object?
>>
>
> Please give a reproducible example [1] showing what you are doing,
> preferably with a built-in data set. In any case, an lm object made from a
> sarlm object will fix the spatial coefficient and loose its uncertainty.
>
> [1] https://stackoverflow.com/questions/5963269/how-to-make-a-
> great-r-reproducible-example
>
> Can you use an model class accepted in piecewiseSEM that fits an MRF
> random effect?
>
> Roger
>
>
>> Thanks,
>> Niv
>> ?
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Roger Bivand
> Department of Economics, Norwegian School of
> <https://maps.google.com/?q=an+School+of&entry=gmail&source=g>Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

	[[alternative HTML version deleted]]


From bfalevlist at gmail.com  Sun Oct 22 11:01:03 2017
From: bfalevlist at gmail.com (=?UTF-8?Q?Bede-Fazekas_=c3=81kos?=)
Date: Sun, 22 Oct 2017 11:01:03 +0200
Subject: [R-sig-Geo] Fwd: Re:  spplot help, please
In-Reply-To: <692990790.1702984.1508594224093@mail.yahoo.com>
References: <692990790.1702984.1508594224093@mail.yahoo.com>
Message-ID: <0dabedc4-c092-f7d3-375e-743959113a60@gmail.com>

E-mail of Marvin Sharva, accidentally addressed only to me, is forwarded 
below.
?kos


-------- Tov?bb?tott ?zenet --------
T?rgy: 	Re: [R-sig-Geo] spplot help, please
D?tum: 	Sat, 21 Oct 2017 13:57:04 +0000 (UTC)
Felad?: 	Marvin Sharma <marvinsharma at yahoo.com>
V?laszc?m: 	Marvin Sharma <marvinsharma at yahoo.com>
C?mzett: 	Bede-Fazekas ?kos <bfalevlist at gmail.com>



Dear Bede-Fazekas, Edzer, and Florian, and the list,

The following code produces the plot without the state map of georgia. I 
got some help from the old thread answered few years ago, but could not? 
 ? match the state names and counties names, see code below.

library(spgwr)
library(spdep)
library(maps)
library(maptools)
data<-read.csv("C:/Users/md_sh/Desktop/try.csv",header=TRUE)
map = SpatialPointsDataFrame(data=data, 
coords=cbind(data$Longitude,data$Latitude))
GA.adapt.gauss <- gwr.sel(y~x,data=map,adapt=TRUE)
res.adpt <- gwr(y~x,data=map,adapt=GA.adapt.gauss)
res.adpt$SDF$ols.e <- residuals(lm(y~x,data=map))
spplot(res.adpt$SDF, c("ols.e", "gwr.e"),main="Residuals from OLS and GWR")
#This provides plot without the state map! sorry!
GA <- map("county", "georgia", plot=FALSE, fill=TRUE)
cntys <- tolower(as.character(data$county))
GA$names <- substring(GA$names, 14, nchar(GA$names))
match(cntys, GA$names)##It does not match!

Thanks much,
Marvin



On Saturday, October 21, 2017 9:39 AM, Marvin Sharma 
<marvinsharma at yahoo.com> wrote:


Hello Bede-Fazekas,
This code provides the residuals, and residual plot without the state 
map I want the residuals withing the Georgia state map.

Could you see where I need to make change?

Marvin


On Saturday, October 21, 2017 1:53 AM, Bede-Fazekas ?kos 
<bfalevlist at gmail.com> wrote:


Hi Marvin,

this code works fine just as it should work. Which "state map" you need?
A basemap with terrain/roads/cities/borders? In this case there are
several possibilities to do that. Have a look at these links, they may
solve your problem:
https://pakillo.github.io/R-GIS-tutorial/#gmap
http://www.nickeubank.com/wp-content/uploads/2015/10/RGIS3_MakingMaps_part1_mappingVectorData.html 

(Section "4.2 Basemaps with spplot")

HTH,
?kos Bede-Fazekas
Hungarian Academy of Sciences


2017.10.21. 3:29 keltez?ssel, Marvin Sharma via R-sig-Geo ?rta:
 > Hi,
 > I wanted to plot the spplot of my model residuals. The plot works
 > fine, but the state map does not appear. Code is given below and the
 > data are attached. I would greatly appreciate any help in this.
 >
 > Marvin
 >
 >
 > library(spgwr)
 > library(spdep)
 > library(maps)
 > library(maptools)
 > data<-read.csv("try.csv",header=TRUE)
 > coords=cbind(data$Longitude,data$Latitude)
 > g.adapt.gauss <- gwr.sel(y~x, data,coords,adapt=TRUE)
 > res.adpt <- gwr(y~x, data,coords, adapt=g.adapt.gauss)
 > brks <- c(-0.25, 0, 0.01, 0.025, 0.075)
 > cols <- grey(5:2/6)
 > res.adpt$SDF$ols.e <- residuals(lm(y~x, data))
 > spplot(res.adpt$SDF, c("ols.e","gwr.e"),main="Residuals")
 >
 >
 >
 > _______________________________________________
 > R-sig-Geo mailing list
 > R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
 > https://stat.ethz.ch/mailman/listinfo/r-sig-geo


 ??? [[alternative HTML version deleted]]


_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo





	[[alternative HTML version deleted]]


From bfalevlist at gmail.com  Sun Oct 22 11:14:42 2017
From: bfalevlist at gmail.com (=?UTF-8?B?w4Frb3MgQmVkZS1GYXpla2Fz?=)
Date: Sun, 22 Oct 2017 11:14:42 +0200
Subject: [R-sig-Geo] spplot help, please
In-Reply-To: <0dabedc4-c092-f7d3-375e-743959113a60@gmail.com>
References: <692990790.1702984.1508594224093@mail.yahoo.com>
 <0dabedc4-c092-f7d3-375e-743959113a60@gmail.com>
Message-ID: <CANAJmKPwcJDJp7f99qdbpxrT73zkUvgYe15x2TSt6oxEZa4PJw@mail.gmail.com>

Dear Marvin,
second argument of substring() is wrong. Change it from 14 to 9:
> GA$names <- substring(GA$names, 9, nchar(GA$names))
> match(cntys, GA$names)
  [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17
18
 [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35
36
 [37]  37  38  39  40  41  42  43  NA  45  46  47  48  49  50  51  52  53
54
 [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71
72
 [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89
90
 [91]  91  92  93  96  97  98  94  95  99 100 101 102 103 104 105 106 107
108
[109] 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125
126
[127] 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143
144
[145] 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159

HTH,
?kos Bede-Fazekas

2017-10-22 11:01 GMT+02:00 Bede-Fazekas ?kos <bfalevlist at gmail.com>:

> E-mail of Marvin Sharva, accidentally addressed only to me, is forwarded
> below.
> ?kos
>
>
> -------- Tov?bb?tott ?zenet --------
> T?rgy: Re: [R-sig-Geo] spplot help, please
> D?tum: Sat, 21 Oct 2017 13:57:04 +0000 (UTC)
> Felad?: Marvin Sharma <marvinsharma at yahoo.com> <marvinsharma at yahoo.com>
> V?laszc?m: Marvin Sharma <marvinsharma at yahoo.com> <marvinsharma at yahoo.com>
> C?mzett: Bede-Fazekas ?kos <bfalevlist at gmail.com> <bfalevlist at gmail.com>
>
> Dear Bede-Fazekas, Edzer, and Florian, and the list,
>
> The following code produces the plot without the state map of georgia. I
> got some help from the old thread answered few years ago, but could not
> match the state names and counties names, see code below.
>
> library(spgwr)
> library(spdep)
> library(maps)
> library(maptools)
> data<-read.csv("C:/Users/md_sh/Desktop/try.csv",header=TRUE)
> map = SpatialPointsDataFrame(data=data, coords=cbind(data$Longitude,
> data$Latitude))
> GA.adapt.gauss <- gwr.sel(y~x,data=map,adapt=TRUE)
> res.adpt <- gwr(y~x,data=map,adapt=GA.adapt.gauss)
> res.adpt$SDF$ols.e <- residuals(lm(y~x,data=map))
> spplot(res.adpt$SDF, c("ols.e", "gwr.e"),main="Residuals from OLS and GWR")
> #This provides plot without the state map! sorry!
> GA <- map("county", "georgia", plot=FALSE, fill=TRUE)
> cntys <- tolower(as.character(data$county))
> GA$names <- substring(GA$names, 14, nchar(GA$names))
> match(cntys, GA$names)##It does not match!
>
> Thanks much,
> Marvin
>
>
>
> On Saturday, October 21, 2017 9:39 AM, Marvin Sharma
> <marvinsharma at yahoo.com> <marvinsharma at yahoo.com> wrote:
>
>
> Hello Bede-Fazekas,
> This code provides the residuals, and residual plot without the state map
> I want the residuals withing the Georgia state map.
>
> Could you see where I need to make change?
>
> Marvin
>
>
> On Saturday, October 21, 2017 1:53 AM, Bede-Fazekas ?kos
> <bfalevlist at gmail.com> <bfalevlist at gmail.com> wrote:
>
>
> Hi Marvin,
>
> this code works fine just as it should work. Which "state map" you need?
> A basemap with terrain/roads/cities/borders? In this case there are
> several possibilities to do that. Have a look at these links, they may
> solve your problem:
> https://pakillo.github.io/R-GIS-tutorial/#gmap
> http://www.nickeubank.com/wp-content/uploads/2015/10/RGIS3_
> MakingMaps_part1_mappingVectorData.html
> (Section "4.2 Basemaps with spplot")
>
> HTH,
> ?kos Bede-Fazekas
> Hungarian Academy of Sciences
>
>
> 2017.10.21. 3:29 keltez?ssel, Marvin Sharma via R-sig-Geo ?rta:
> > Hi,
> > I wanted to plot the spplot of my model residuals. The plot works
> > fine, but the state map does not appear. Code is given below and the
> > data are attached. I would greatly appreciate any help in this.
> >
> > Marvin
> >
> >
> > library(spgwr)
> > library(spdep)
> > library(maps)
> > library(maptools)
> > data<-read.csv("try.csv",header=TRUE)
> > coords=cbind(data$Longitude,data$Latitude)
> > g.adapt.gauss <- gwr.sel(y~x, data,coords,adapt=TRUE)
> > res.adpt <- gwr(y~x, data,coords, adapt=g.adapt.gauss)
> > brks <- c(-0.25, 0, 0.01, 0.025, 0.075)
> > cols <- grey(5:2/6)
> > res.adpt$SDF$ols.e <- residuals(lm(y~x, data))
> > spplot(res.adpt$SDF, c("ols.e","gwr.e"),main="Residuals")
> >
> >
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>     [[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
>
>

	[[alternative HTML version deleted]]


From marvinsharma at yahoo.com  Sun Oct 22 14:48:20 2017
From: marvinsharma at yahoo.com (Marvin Sharma)
Date: Sun, 22 Oct 2017 12:48:20 +0000 (UTC)
Subject: [R-sig-Geo] Error in spCbind(GA0, data) : row names not identical
References: <1244899098.2098699.1508676500681.ref@mail.yahoo.com>
Message-ID: <1244899098.2098699.1508676500681@mail.yahoo.com>

HI,Could some one help? this newbie in fixing the spCbind problem encountered below?>names(data)?"county"? ? "y"? ? ? ? ?"x"? ? ? ? ?"Latitude"? "Longitude"
GA <- map("county", "georgia", plot=FALSE, fill=TRUE)
cntys <- tolower(as.character(data$county))GA$names <- substring(GA$names, 9, nchar(GA$names))match(cntys, GA$names)##It does? match!#######################################GA <- map2SpatialPolygons(GA, GA$names)proj4string(GA) <- CRS("+proj=longlat")row.names(data) <- cntysGA0 <- SpatialPolygonsDataFrame(GA, data=data.frame(ID=1:159,row.names=row.names(GA)))GA1 <- spCbind(GA0, data)> GA1 <- spCbind(GA0, data)Error in spCbind(GA0, data) : row names not identical>?Thanks n advance,
Marvin
	[[alternative HTML version deleted]]


From b.rowlingson at lancaster.ac.uk  Sun Oct 22 15:36:17 2017
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sun, 22 Oct 2017 14:36:17 +0100
Subject: [R-sig-Geo] Is the raster package still receiving updates?
In-Reply-To: <CAAp_v851BWU57sa0eEsgLWLo10Rpy8NEHOedA6ojnqOiCYfpRg@mail.gmail.com>
References: <1520364990.1033649.1508511658722.ref@mail.yahoo.com>
 <1520364990.1033649.1508511658722@mail.yahoo.com>
 <CAAcGz98p=378aWyX=hb7Ro6Myjg9iFp5dtM=jvprFXimJ7JLUg@mail.gmail.com>
 <1508551128926.11865@uhd.edu>
 <CAAcGz9_-qUYEpwDMQU=qmTnqVemGvSq63tEyJGf=8ApkTG+_ZQ@mail.gmail.com>
 <E7824B12CF1B784E.e319c03c-61a4-4b29-b62c-31fe5bfe31de@mail.outlook.com>
 <f458d17f-f923-e7bb-5243-7ec0a83af0e1@uni-marburg.de>
 <E7824B12CF1B784E.03827277-398b-4e71-ba14-e87242a4897e@mail.outlook.com>
 <6912309e-7558-0ffe-41f7-dd289dd34dfe@uni-muenster.de>
 <CAKkiGbvmgSxHA1vKCZomNab-uAFFJ3wWJJEe-nG4ytHjZaE8cg@mail.gmail.com>
 <CAAp_v851BWU57sa0eEsgLWLo10Rpy8NEHOedA6ojnqOiCYfpRg@mail.gmail.com>
Message-ID: <CANVKczOBF1LVyAiOfspKa7Gwv1wrAK=n0MSc8RrxU5yXj_+xMg@mail.gmail.com>

Here's what I think should happen:

 Robert Hijmans lets us know what his vision of raster is, and how he plans
to support it.

 He should say if he wishes to carry on as maintainer or not. If not, we
need a new maintainer and then we can think about moving development to
gitlab, or whatever.

Barry





On Sun, Oct 22, 2017 at 1:16 AM, Alexander Brown <a.brown at ieee.org> wrote:

> I too expect to rely on the raster package for years, and would be willing
> to help to the extent of my ability and resources.
>
> Alex Brown (a.brown at ieee.org)
> http://faculty.uml.edu/abrown  -->
> https://sites.google.com/site/alexbrownuml
>
>
> On Sat, Oct 21, 2017 at 12:54 PM, Vijay Lulla <vijaylulla at gmail.com>
> wrote:
>
> > Just like Mike I too will rely on raster for many years still and I will
> be
> > very happy to support efforts on this or whatever else the community
> > leaders (Edzer, Roger, and others) decide is the best way for us to move
> > forward.
> >
> > Thanks,
> > Vijay.
> >
> > On Sat, Oct 21, 2017 at 5:32 AM, Edzer Pebesma <
> > edzer.pebesma at uni-muenster.de> wrote:
> >
> > > The the NOTEs on CRAN and the issues raised on Mike's raster-rforge GH
> > > repo to me suggest that raster has, for a while now, reached a mature
> > > state. Of course, you'd wish that raster development, in terms of
> > > extending its power and features, would continue the pace it did 10
> > > years ago, but that's a different issue. Mike has write access to the
> > > raster r-forge sources, it shouldn't be hard to support Robert with
> > > current issues.
> > >
> > > Right after rstudio::conf (Feb 4/5) I'm meeting with Robert Hijmans and
> > > Etienne Racine, to discuss, and work on raster future and integration
> of
> > > rasters and stars. Anyone interested, feel free to join.
> > >
> > > Stars has the ambition to jump over raster, in the sense that it
> doesn't
> > > want to have the local hard drive as a limitation. That calls for
> > > rethinking quite a few things. So far, things are still all in main
> > > memory but it already integrates with sf:
> > >
> > > https://gist.github.com/edzer/381dac079ddcd5174be31209675b3822
> > >
> > > and handles time stacks of different attributes in single objects. Feed
> > > back welcome as always; will write up the first blog in a few weeks.
> > >
> > >
> > > On 10/21/2017 10:41 AM, Roger Bivand wrote:
> > > > Yes, this sounds fruitful. For now, I suggest that those wishing to
> > > enhance raster do so in an additional package enhancing raster and
> > > depending on it. Immediately, we should help Robert resolve the notes
> in
> > > the tests, they do not affect functionality now, but deserve attention
> to
> > > bring the package into full CRAN compliance. I can help with this.
> > > >
> > > > Roger
> > > >
> > > > Roger Bivand
> > > > Norwegian School of Economics
> > > > Bergen, Norway
> > > >
> > > >
> > > >
> > > > Fra: Chris Reudenbach
> > > > Sendt: l?rdag 21. oktober, 09.01
> > > > Emne: Re: [R-sig-Geo] Is the raster package still receiving updates?
> > > > Til: r-sig-geo at r-project.org
> > > >
> > > >
> > > > Many of us rely on the raster package as a crucial basis for their
> > work.
> > > Big thank to Robert.  Nevertheless to contribute needs to focus needs
> and
> > > ressources.  Maybe an information exchange/discussion with Robert about
> > > options such as if/how the interested community can support would be
> more
> > > productive. cheers Chris Am 21.10.2017 um 06:52 schrieb Roger Bivand: >
> > The
> > > CRAN raster package has not been abandoned, if it had, it would have
> been
> > > reclassified as orphaned. Its test results have notes but no warnings
> or
> > > errors. It would be orphaned if the maintainer did not respond to CRAN
> > > requests to resolve test errors. Consequently, you are suggesting a
> fork,
> > > and should rename any package. Only the maintainer may update existing
> > CRAN
> > > packages. I would not think that forking an existing CRAN package is
> the
> > > most productive way of contributing to the community. The package has
> > many
> > > reverse dependencies, so setting up a test framework to find backwards
> > > incompatibilities would be crucial. > > Of course, all contributions
> are
> > > welcome. > > Roger > > Roger Bivand > Norwegian School of Economics >
> > > Bergen, Norway > > > > Fra: Michael Sumner > Sendt: l?rdag 21. oktober,
> > > 06.28 > Emne: Re: [R-sig-Geo] Is the raster package still receiving
> > > updates? > Til: Hodgess, Erin > Kopi: R-sig-geo Mailing List > > >
> Great!
> > > I'm keen, but haven't done the work needed to flesh this out properly:
> > > https://github.com/mdsumner/raster-rforge/issues I have not checked if
> > > there's been any commits to r-forge since I cloned this. Cheers, Mike
> On
> > > Sat, 21 Oct 2017, 12:58 Hodgess, Erin, wrote: > I could take a swat at
> > it,
> > > if you wish. Please do send me the list of > fixes. I could start in
> > about
> > > a week, if that would work. > Sincerely, > Erin > > > Erin M. Hodgess >
> > > Associate Professor > Department of Mathematics and Statistics >
> > University
> > > of Houston - Downtown > mailto: hodgesse at uhd.edu > >
> > > ________________________________________ > From: R-sig-Geo on behalf
> of
> > > Michael > Sumner > Sent: Friday, October 20, 2017 8:05 PM > To: Thiago
> V.
> > > dos Santos > Cc: R-sig-geo Mailing List > Subject: Re: [R-sig-Geo] Is
> the
> > > raster package still receiving updates? > > No, it's effectively
> > abandoned.
> > > No concrete plans known. > > I'm interested to keep it going and have
> > kept
> > > a list of fixes needed, but > not sure when or if I'll get to it. > >
> I'd
> > > support any efforts in this, I'll rely on raster for many years still.
> >
> > >
> > > Cheers, Mike > > On Sat, 21 Oct 2017, 02:05 Thiago V. dos Santos via
> > > R-sig-Geo, < > r-sig-geo at r-project.org> wrote: > > > Dear list, > > >
> >
> > I
> > > realized that the latest version of the raster package was released on
> >
> > >
> > > CRAN over a year ago. > > > > I also noticed that Robert's
> participation
> > in
> > > this list has become rather > > scarce. > > > > I was just wondering
> > > whether the raster package is still receiving > updates? > > > >
> > Greetings,
> > > > > -- Thiago V. dos Santos > > > > Postdoctoral Research Fellow > >
> > > Department of Climate and Space Science and Engineering > > University
> of
> > > Michigan > > > > _______________________________________________ > >
> > > R-sig-Geo mailing list > > R-sig-Geo at r-project.org > >
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > -- > Dr. Michael
> > > Sumner > Software and Database Engineer > Australian Antarctic
> Division >
> > > 203 Channel Highway > Kingston Tasmania 7050 Australia > >
> [[alternative
> > > HTML version deleted]] > > ____ > ______________________________
> > _____________
> > > > R-sig-Geo mailing list > R-sig-Geo at r-project.org >
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr. Michael
> Sumner
> > > Software and Database Engineer Australian Antarctic Division 203
> Channel
> > > Highway Kingston Tasmania 7050 Australia [[alternative HTML version
> > > deleted]] _______________________________________________ R-sig-Geo
> > > mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/
> > > listinfo/r-sig-geo > > > [[alternative HTML version deleted]] > >
> > > _______________________________________________ > R-sig-Geo mailing
> list
> > > > R-sig-Geo at r-project.org > https://stat.ethz.ch/mailman/
> > > listinfo/r-sig-geo > -- Dr Christoph Reudenbach, Philipps-University of
> > > Marburg, Faculty of Geography, GIS and Environmental Modeling,
> > > Deutschhausstr. 10, D-35032 Marburg, fon: ++49.(0)6421.2824296, fax:
> > > ++49.(0)6421.2828950, web: gis-ma.org, giswerk.org,
> > > moc.environmentalinformatics-marburg.de ______________________________
> > _________________
> > > R-sig-Geo mailing list R-sig-Geo at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> > > >
> > > >
> > > >       [[alternative HTML version deleted]]
> > > >
> > > > _______________________________________________
> > > > R-sig-Geo mailing list
> > > > R-sig-Geo at r-project.org
> > > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> > > >
> > >
> > > --
> > > Edzer Pebesma
> > > Institute for Geoinformatics
> > > Heisenbergstrasse 2, 48151 Muenster, Germany
> > > Phone: +49 251 8333081
> > > _______________________________________________
> > > R-sig-Geo mailing list
> > > R-sig-Geo at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> > >
> >
> >
> >
> > --
> > Vijay Lulla, Ph.D.
> >
> > Assistant Professor,
> > Dept. of Geography,
> > Indiana University Purdue University Indianapolis (IUPUI)
> > 425 University Blvd, CA-207C.
> > Indianapolis, IN-46202
> > vlulla at iupui.edu
> >
> > <http://vijaylulla.com>
> > http://vijaylulla.com
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Sun Oct 22 20:01:35 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 22 Oct 2017 20:01:35 +0200
Subject: [R-sig-Geo] Is the raster package still receiving updates?
In-Reply-To: <CANVKczOBF1LVyAiOfspKa7Gwv1wrAK=n0MSc8RrxU5yXj_+xMg@mail.gmail.com>
References: <1520364990.1033649.1508511658722.ref@mail.yahoo.com>
 <1520364990.1033649.1508511658722@mail.yahoo.com>
 <CAAcGz98p=378aWyX=hb7Ro6Myjg9iFp5dtM=jvprFXimJ7JLUg@mail.gmail.com>
 <1508551128926.11865@uhd.edu>
 <CAAcGz9_-qUYEpwDMQU=qmTnqVemGvSq63tEyJGf=8ApkTG+_ZQ@mail.gmail.com>
 <E7824B12CF1B784E.e319c03c-61a4-4b29-b62c-31fe5bfe31de@mail.outlook.com>
 <f458d17f-f923-e7bb-5243-7ec0a83af0e1@uni-marburg.de>
 <E7824B12CF1B784E.03827277-398b-4e71-ba14-e87242a4897e@mail.outlook.com>
 <6912309e-7558-0ffe-41f7-dd289dd34dfe@uni-muenster.de>
 <CAKkiGbvmgSxHA1vKCZomNab-uAFFJ3wWJJEe-nG4ytHjZaE8cg@mail.gmail.com>
 <CAAp_v851BWU57sa0eEsgLWLo10Rpy8NEHOedA6ojnqOiCYfpRg@mail.gmail.com>
 <CANVKczOBF1LVyAiOfspKa7Gwv1wrAK=n0MSc8RrxU5yXj_+xMg@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1710221948380.11884@reclus.nhh.no>

On Sun, 22 Oct 2017, Barry Rowlingson wrote:

> Here's what I think should happen:
>
> Robert Hijmans lets us know what his vision of raster is, and how he plans
> to support it.

Right, this is essential, and is planned for the meeting Edzer mentioned 
in February 2018.

I've added an issue to r-spatial/discuss:

https://github.com/r-spatial/discuss/issues/17

simply to have a place to talk. This is the place (for now) to look for 
information as it accrues. The raster repo is under SVN on R-Forge, of 
course.

I'll be writing to Robert and others directly about this.

Roger

>
> He should say if he wishes to carry on as maintainer or not. If not, we
> need a new maintainer and then we can think about moving development to
> gitlab, or whatever.
>
> Barry
>
>
>
>
>
> On Sun, Oct 22, 2017 at 1:16 AM, Alexander Brown <a.brown at ieee.org> wrote:
>
>> I too expect to rely on the raster package for years, and would be willing
>> to help to the extent of my ability and resources.
>>
>> Alex Brown (a.brown at ieee.org)
>> http://faculty.uml.edu/abrown  -->
>> https://sites.google.com/site/alexbrownuml
>>
>>
>> On Sat, Oct 21, 2017 at 12:54 PM, Vijay Lulla <vijaylulla at gmail.com>
>> wrote:
>>
>> > Just like Mike I too will rely on raster for many years still and I will
>> be
>> > very happy to support efforts on this or whatever else the community
>> > leaders (Edzer, Roger, and others) decide is the best way for us to move
>> > forward.
>> >
>> > Thanks,
>> > Vijay.
>> >
>> > On Sat, Oct 21, 2017 at 5:32 AM, Edzer Pebesma <
>> > edzer.pebesma at uni-muenster.de> wrote:
>> >
>> > > The the NOTEs on CRAN and the issues raised on Mike's raster-rforge GH
>> > > repo to me suggest that raster has, for a while now, reached a mature
>> > > state. Of course, you'd wish that raster development, in terms of
>> > > extending its power and features, would continue the pace it did 10
>> > > years ago, but that's a different issue. Mike has write access to the
>> > > raster r-forge sources, it shouldn't be hard to support Robert with
>> > > current issues.
>> > >
>> > > Right after rstudio::conf (Feb 4/5) I'm meeting with Robert Hijmans and
>> > > Etienne Racine, to discuss, and work on raster future and integration
>> of
>> > > rasters and stars. Anyone interested, feel free to join.
>> > >
>> > > Stars has the ambition to jump over raster, in the sense that it
>> doesn't
>> > > want to have the local hard drive as a limitation. That calls for
>> > > rethinking quite a few things. So far, things are still all in main
>> > > memory but it already integrates with sf:
>> > >
>> > > https://gist.github.com/edzer/381dac079ddcd5174be31209675b3822
>> > >
>> > > and handles time stacks of different attributes in single objects. Feed
>> > > back welcome as always; will write up the first blog in a few weeks.
>> > >
>> > >
>> > > On 10/21/2017 10:41 AM, Roger Bivand wrote:
>> > > > Yes, this sounds fruitful. For now, I suggest that those wishing to
>> > > enhance raster do so in an additional package enhancing raster and
>> > > depending on it. Immediately, we should help Robert resolve the notes
>> in
>> > > the tests, they do not affect functionality now, but deserve attention
>> to
>> > > bring the package into full CRAN compliance. I can help with this.
>> > > >
>> > > > Roger
>> > > >
>> > > > Roger Bivand
>> > > > Norwegian School of Economics
>> > > > Bergen, Norway
>> > > >
>> > > >
>> > > >
>> > > > Fra: Chris Reudenbach
>> > > > Sendt: l?rdag 21. oktober, 09.01
>> > > > Emne: Re: [R-sig-Geo] Is the raster package still receiving updates?
>> > > > Til: r-sig-geo at r-project.org
>> > > >
>> > > >
>> > > > Many of us rely on the raster package as a crucial basis for their
>> > work.
>> > > Big thank to Robert.  Nevertheless to contribute needs to focus needs
>> and
>> > > ressources.  Maybe an information exchange/discussion with Robert about
>> > > options such as if/how the interested community can support would be
>> more
>> > > productive. cheers Chris Am 21.10.2017 um 06:52 schrieb Roger Bivand: >
>> > The
>> > > CRAN raster package has not been abandoned, if it had, it would have
>> been
>> > > reclassified as orphaned. Its test results have notes but no warnings
>> or
>> > > errors. It would be orphaned if the maintainer did not respond to CRAN
>> > > requests to resolve test errors. Consequently, you are suggesting a
>> fork,
>> > > and should rename any package. Only the maintainer may update existing
>> > CRAN
>> > > packages. I would not think that forking an existing CRAN package is
>> the
>> > > most productive way of contributing to the community. The package has
>> > many
>> > > reverse dependencies, so setting up a test framework to find backwards
>> > > incompatibilities would be crucial. > > Of course, all contributions
>> are
>> > > welcome. > > Roger > > Roger Bivand > Norwegian School of Economics >
>> > > Bergen, Norway > > > > Fra: Michael Sumner > Sendt: l?rdag 21. oktober,
>> > > 06.28 > Emne: Re: [R-sig-Geo] Is the raster package still receiving
>> > > updates? > Til: Hodgess, Erin > Kopi: R-sig-geo Mailing List > > >
>> Great!
>> > > I'm keen, but haven't done the work needed to flesh this out properly:
>> > > https://github.com/mdsumner/raster-rforge/issues I have not checked if
>> > > there's been any commits to r-forge since I cloned this. Cheers, Mike
>> On
>> > > Sat, 21 Oct 2017, 12:58 Hodgess, Erin, wrote: > I could take a swat at
>> > it,
>> > > if you wish. Please do send me the list of > fixes. I could start in
>> > about
>> > > a week, if that would work. > Sincerely, > Erin > > > Erin M. Hodgess >
>> > > Associate Professor > Department of Mathematics and Statistics >
>> > University
>> > > of Houston - Downtown > mailto: hodgesse at uhd.edu > >
>> > > ________________________________________ > From: R-sig-Geo on behalf
>> of
>> > > Michael > Sumner > Sent: Friday, October 20, 2017 8:05 PM > To: Thiago
>> V.
>> > > dos Santos > Cc: R-sig-geo Mailing List > Subject: Re: [R-sig-Geo] Is
>> the
>> > > raster package still receiving updates? > > No, it's effectively
>> > abandoned.
>> > > No concrete plans known. > > I'm interested to keep it going and have
>> > kept
>> > > a list of fixes needed, but > not sure when or if I'll get to it. > >
>> I'd
>> > > support any efforts in this, I'll rely on raster for many years still.
>> >
>> > >
>> > > Cheers, Mike > > On Sat, 21 Oct 2017, 02:05 Thiago V. dos Santos via
>> > > R-sig-Geo, < > r-sig-geo at r-project.org> wrote: > > > Dear list, > > >
>> >
>> > I
>> > > realized that the latest version of the raster package was released on
>> >
>> > >
>> > > CRAN over a year ago. > > > > I also noticed that Robert's
>> participation
>> > in
>> > > this list has become rather > > scarce. > > > > I was just wondering
>> > > whether the raster package is still receiving > updates? > > > >
>> > Greetings,
>> > > > > -- Thiago V. dos Santos > > > > Postdoctoral Research Fellow > >
>> > > Department of Climate and Space Science and Engineering > > University
>> of
>> > > Michigan > > > > _______________________________________________ > >
>> > > R-sig-Geo mailing list > > R-sig-Geo at r-project.org > >
>> > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > -- > Dr. Michael
>> > > Sumner > Software and Database Engineer > Australian Antarctic
>> Division >
>> > > 203 Channel Highway > Kingston Tasmania 7050 Australia > >
>> [[alternative
>> > > HTML version deleted]] > > ____ > ______________________________
>> > _____________
>> > > > R-sig-Geo mailing list > R-sig-Geo at r-project.org >
>> > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr. Michael
>> Sumner
>> > > Software and Database Engineer Australian Antarctic Division 203
>> Channel
>> > > Highway Kingston Tasmania 7050 Australia [[alternative HTML version
>> > > deleted]] _______________________________________________ R-sig-Geo
>> > > mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/
>> > > listinfo/r-sig-geo > > > [[alternative HTML version deleted]] > >
>> > > _______________________________________________ > R-sig-Geo mailing
>> list
>> > > > R-sig-Geo at r-project.org > https://stat.ethz.ch/mailman/
>> > > listinfo/r-sig-geo > -- Dr Christoph Reudenbach, Philipps-University of
>> > > Marburg, Faculty of Geography, GIS and Environmental Modeling,
>> > > Deutschhausstr. 10, D-35032 Marburg, fon: ++49.(0)6421.2824296, fax:
>> > > ++49.(0)6421.2828950, web: gis-ma.org, giswerk.org,
>> > > moc.environmentalinformatics-marburg.de ______________________________
>> > _________________
>> > > R-sig-Geo mailing list R-sig-Geo at r-project.org
>> > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> > > >
>> > > >
>> > > >       [[alternative HTML version deleted]]
>> > > >
>> > > > _______________________________________________
>> > > > R-sig-Geo mailing list
>> > > > R-sig-Geo at r-project.org
>> > > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> > > >
>> > >
>> > > --
>> > > Edzer Pebesma
>> > > Institute for Geoinformatics
>> > > Heisenbergstrasse 2, 48151 Muenster, Germany
>> > > Phone: +49 251 8333081
>> > > _______________________________________________
>> > > R-sig-Geo mailing list
>> > > R-sig-Geo at r-project.org
>> > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> > >
>> >
>> >
>> >
>> > --
>> > Vijay Lulla, Ph.D.
>> >
>> > Assistant Professor,
>> > Dept. of Geography,
>> > Indiana University Purdue University Indianapolis (IUPUI)
>> > 425 University Blvd, CA-207C.
>> > Indianapolis, IN-46202
>> > vlulla at iupui.edu
>> >
>> > <http://vijaylulla.com>
>> > http://vijaylulla.com
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-sig-Geo mailing list
>> > R-sig-Geo at r-project.org
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From Roger.Bivand at nhh.no  Sun Oct 22 21:23:53 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 22 Oct 2017 21:23:53 +0200
Subject: [R-sig-Geo] convert "errorsarlm" to "lm"
In-Reply-To: <CAHxNAt=kckVK7Zs318=d6dJfTuTeuyQ4BpZ95756=ye-=Jjb+A@mail.gmail.com>
References: <CAHxNAtnJXZqNT7scN-wjmaBUNKXp4mimnbZ0o1aa09gimyvUQA@mail.gmail.com>
 <alpine.LFD.2.21.1710201259440.2685@reclus.nhh.no>
 <CAHxNAt=kckVK7Zs318=d6dJfTuTeuyQ4BpZ95756=ye-=Jjb+A@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1710222111380.11884@reclus.nhh.no>

On Sun, 22 Oct 2017, niv de malach wrote:

> Regarding your question about MRF, I don't know what it is...

see for example:

http://www.fromthebottomoftheheap.net/2017/10/19/first-steps-with-mrf-smooths/

here using mgcv::gam() to fit a model with an MRF smooth. In effect, 
errorsarlm() is fitting something similar,

>
> I know that the package piecewiseSEM accept the following object types:
>
> ?lm?, ?rq?, ?glm?, ?glm.nb?, ?gls?, ?pgls?, ?merMod?, ?merModLmerTest?,
> ?lme?, ?glmmPQL?, ?glmmadmb?, and ?glmmTMB?.
>
> so  "transformation" of errorsarlm to any of these object should solve the
> problem.
>

No! You have to pass through the uncertainty associated with fitting the 
spatial regression coefficient. The same would apply with any other 
MRF-based approach. It is possible to pretend that this coefficient is 
fixed (I'll return to the example tomorrow). I don't think that any of the 
listed object types come from fitting functions supporting MRF, though. 
You would likely need to re-fit your piecewiseSEM over samples from the 
coefficients, to check that the path outcomes were robust (just a 
speculation). Any Bayesians who could help?

Roger

>
> Below there is a code where a dataset is simulated and analyzed using 'lm'
> and 'errorsarlm'. Only 'lm' is accepted for
> SEM analysis.
>
> Thanks,
> Niv
>
>
> #################### creating a simulated dataset
> ##############################
>
> set.seed(1)
> sample=50 # sample size (number of points)
>
> # spatial location
> Lattitude=rnorm(sample, mean = 0, sd = 4)
> Longitude=rnorm(sample, mean = 0, sd = 4
>
> # creating exploratory variables
> x1=rnorm(sample, mean = 30, sd = 20)
> x2=rnorm(sample, mean = -20, sd = 10)
> x3=rnorm(sample, mean = 5, sd = 3)
> x4=rnorm(sample, mean = 25, sd = 5)
> x5=rnorm(sample, mean = -10, sd = 10)
> x6=rnorm(sample, mean = 50, sd = 30)
>
> # response variables
> y1=10*x1+5*x2+2*x3+30*Lattitude+rnorm(sample, mean = 0, sd = 20) # y1 is
> function of x1-x3 +location+random error
> y2=10*x4+5*x5+2*x6+10*Longitude+rnorm(sample, mean = 0, sd = 20) # y1 is
> function of x4-x5 +location+random error
>
> mydata=data.frame(x1,x2,x3,x4,x5,x6,y1,y2,Lattitude,Longitude)
>
> ################# building errorsarlm objects and lm objects
> ####################################
>
> library(spdep)
>
> # creating neighbors for errorsarlm function
> xy=SpatialPoints(as.matrix(mydata[,c(9,10)]))
> myneighbors=dnearneigh(as.matrix(mydata[,c(9,10)]), 0, 1000, row.names =
> NULL, longlat = TRUE)# 1000 kilometer distance
> myweight=nb2listw(myneighbors,style="W") #
>
> # two errorsarlm objects
> sar1=errorsarlm(y1~x1+x2+x3,data=mydata,myweight)
> sar2=errorsarlm(y2~x4+x5+x6,data=mydata,myweight)
>
> # two lm objects
> lm1=lm(y1~x1+x2+x3,data=mydata)
> lm2=lm(y2~x4+x5+x6,data=mydata)
>
> ############### trying to use sarlm and lm in "piecewiseSEM"
> ####################
>
> library(piecewiseSEM) # package for structural equation modeling
> SEM_LM=sem.fit(list(lm1,lm2),data=mydata) # the package accept lm objects
> (and random models such as lme)
> SEM_errorsarLM=sem.fit(list(sar1,sar2),data=mydata) # the package does not
> accept errprsarlm objects
>
> # Error in nobs.default(x) : no 'nobs' method is available #
>
>
>
>
> ?
>
> On Fri, Oct 20, 2017 at 2:06 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
>> On Wed, 18 Oct 2017, niv de malach wrote:
>>
>> Hi all,
>>> I need to convert an "errorsarlm" object into a simple "lm" object because
>>> the package I use ("piecewiseSEM") could not deal with "errorsarlm". Is
>>> there a way to transform the object?
>>>
>>
>> Please give a reproducible example [1] showing what you are doing,
>> preferably with a built-in data set. In any case, an lm object made from a
>> sarlm object will fix the spatial coefficient and loose its uncertainty.
>>
>> [1] https://stackoverflow.com/questions/5963269/how-to-make-a-
>> great-r-reproducible-example
>>
>> Can you use an model class accepted in piecewiseSEM that fits an MRF
>> random effect?
>>
>> Roger
>>
>>
>>> Thanks,
>>> Niv
>>> ?
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of
>> <https://maps.google.com/?q=an+School+of&entry=gmail&source=g>Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From rowena.hamer at utas.edu.au  Mon Oct 23 05:01:17 2017
From: rowena.hamer at utas.edu.au (Rowena Hamer)
Date: Mon, 23 Oct 2017 03:01:17 +0000
Subject: [R-sig-Geo] AdehabitatHR: interpreting biased random bridge RD and
	ID output
Message-ID: <847373c4d96345f592568b4c56a6f022@MBX6.utas.ad.internal>

Hi,

I am using the biased random bridges function within the adehabitatHR package to analyse home ranges, and am interested in breaking the utilisation distribution down into recursion and intensity of use, as outlined in the vignette. I have successfully run the analyses as per the vignette example (code below), and can happily plot the UD, ID and RD and pull out areas of high visitation using the isopleths etc.

What I can't understand is how the output of the BRB function relates to 'real' values of the number of visits per site, and the average length of time spent in these areas. The raw pixel values range between 0 and ~0.0000006 (as in example below): I can't find any explanation of the units used in these outputs, and whether there is a way to translate them into more readily interpreted values.

For example, in Benhamou and Riotte-Lambert 2012, they describe further analyses of the distributions:
"For instance, the minimum area accounting for 20% of the visits (red and orange area in the bottom right panel of Fig. 2) was visited 36 times (ignoring numerous short (<1 h) movement bouts inside or outside the area due to movements close to the area edges). The mean visit duration was about 5 h (this area thus was exploited for 27% of the total period whereas it encompassed only about 5% of the home range area), and the mean duration spent outside the area between one exit and the consecutive entry was about 13 h."

Is there a built in way to translate the ID and RD outputs into this kind of data, or do you have to calculate it separately (e.g. by overlaying the ID/ RD over the original data and summarising the number of visits manually?).

Thanks for any help you can give!

Rowena


Buffalo example from adehabitatHR vignette:

> data(buffalo)
> id <- BRB(buffalo$traj, D = 440/60, Tmax = 3*3600, Lmin = 50, type = "ID",
+           hmin=100, radius = 300, maxt = 2*3600, activity="act", filtershort=FALSE,
+           grid = 200, extent=0.1)
> rd <- BRB(buffalo$traj, D = 440/60, Tmax = 3*3600, Lmin = 50, type = "RD",
+           hmin=100, radius = 300, maxt = 2*3600, activity="act", filtershort=FALSE,
+           grid = 200, extent=0.1)
> ud <- BRB(buffalo$traj, D = 440/60, Tmax = 3*3600, Lmin = 50,
+           hmin=100, radius = 300, maxt = 2*3600, activity="act", filtershort=FALSE,
+           grid = 200, extent=0.1)
> range(ud at data)
[1] 0.000000e+00 5.660811e-07
> range(id at data)
[1] 0.000000e+00 6.552115e-07
> range(rd at data)
[1] 0.000000e+00 3.774331e-07



University of Tasmania Electronic Communications Policy (December, 2014).
This email is confidential, and is for the intended recipient only. Access, disclosure, copying, distribution, or reliance on any of it by anyone outside the intended recipient organisation is prohibited and may be a criminal offence. Please delete if obtained in error and email confirmation to the sender. The views expressed in this email are not necessarily the views of the University of Tasmania, unless clearly intended otherwise.

	[[alternative HTML version deleted]]


From nivdemalach at gmail.com  Mon Oct 23 07:47:59 2017
From: nivdemalach at gmail.com (niv de malach)
Date: Mon, 23 Oct 2017 08:47:59 +0300
Subject: [R-sig-Geo] convert "errorsarlm" to "lm"
In-Reply-To: <alpine.LFD.2.21.1710222111380.11884@reclus.nhh.no>
References: <CAHxNAtnJXZqNT7scN-wjmaBUNKXp4mimnbZ0o1aa09gimyvUQA@mail.gmail.com>
 <alpine.LFD.2.21.1710201259440.2685@reclus.nhh.no>
 <CAHxNAt=kckVK7Zs318=d6dJfTuTeuyQ4BpZ95756=ye-=Jjb+A@mail.gmail.com>
 <alpine.LFD.2.21.1710222111380.11884@reclus.nhh.no>
Message-ID: <CAHxNAtkiUKe66VQJBcj+ROG7SpoTwkevZJOGJXazn=r7DMqUSQ@mail.gmail.com>

I am not sure that I fully understand you... I Appologize for my ignorance

1. Do you have some approach of transferring the object coefficients into
"lm" assuming that they are fixed? (if so let me know how...)

2. I am not sure what do you mean by uncertainty (confidence intervals?
significance tests? AIC\BIC scores?something totally different?). You
suggested to use bayesian methods but I am not sure why. In this SEM type
(local estimation approach) I can use the equation (before transformation)
for inference (with all their "uncertainty" whatever that be). Putting them
together as "SEM" is used mainly for testing whether there is a correlation
between some variables and the residuals of equation describing other (non
linked) variables . Using a special test this package test what is the
probability that the model is "wrong" based on the "missing links".
In general it would be better to get also an AIC\BIC for the total SEM
model  (which is possible when regular lm objects are used) but my main
goal in this analysis is parameter estimation rather than model selection
(so the SEM is used only as a "sanity check" that
there wasn't any important missing link)

Thanks

On Sun, Oct 22, 2017 at 10:23 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:

> On Sun, 22 Oct 2017, niv de malach wrote:
>
> Regarding your question about MRF, I don't know what it is...
>>
>
> see for example:
>
> http://www.fromthebottomoftheheap.net/2017/10/19/first-
> steps-with-mrf-smooths/
>
> here using mgcv::gam() to fit a model with an MRF smooth. In effect,
> errorsarlm() is fitting something similar,
>
>
>> I know that the package piecewiseSEM accept the following object types:
>>
>> ?lm?, ?rq?, ?glm?, ?glm.nb?, ?gls?, ?pgls?, ?merMod?, ?merModLmerTest?,
>> ?lme?, ?glmmPQL?, ?glmmadmb?, and ?glmmTMB?.
>>
>> so  "transformation" of errorsarlm to any of these object should solve the
>> problem.
>>
>>
> No! You have to pass through the uncertainty associated with fitting the
> spatial regression coefficient. The same would apply with any other
> MRF-based approach. It is possible to pretend that this coefficient is
> fixed (I'll return to the example tomorrow). I don't think that any of the
> listed object types come from fitting functions supporting MRF, though. You
> would likely need to re-fit your piecewiseSEM over samples from the
> coefficients, to check that the path outcomes were robust (just a
> speculation). Any Bayesians who could help?
>
> Roger
>
>
>> Below there is a code where a dataset is simulated and analyzed using 'lm'
>> and 'errorsarlm'. Only 'lm' is accepted for
>> SEM analysis.
>>
>> Thanks,
>> Niv
>>
>>
>> #################### creating a simulated dataset
>> ##############################
>>
>> set.seed(1)
>> sample=50 # sample size (number of points)
>>
>> # spatial location
>> Lattitude=rnorm(sample, mean = 0, sd = 4)
>> Longitude=rnorm(sample, mean = 0, sd = 4
>>
>> # creating exploratory variable
>> <https://maps.google.com/?q=ry+variable&entry=gmail&source=g>s
>> x1=rnorm(sample, mean = 30, sd = 2
>> <https://maps.google.com/?q=30,+sd+%3D+2&entry=gmail&source=g>0)
>> x2=rnorm(sample, mean = -20, sd = 10)
>> x3=rnorm(sample, mean = 5, sd = 3)
>> x4=rnorm(sample, mean = 25,
>> <https://maps.google.com/?q=mean+%3D+25,&entry=gmail&source=g> sd = 5)
>> x5=rnorm(sample, mean = -10, sd = 10)
>> x6=rnorm(sample, mean = 50, sd = 30)
>>
>> # response variables
>> y1=10*x1+5*x2+2*x3+30*Lattitude+rnorm(sample, mean = 0, sd = 20) # y1 is
>> function of x1-x3 +location+random error
>> y2=10*x4+5*x5+2*x6+10*Longitude+rnorm(sample, mean = 0, sd = 20) # y1 is
>> function of x4-x5 +location+random error
>>
>> mydata=data.frame(x1,x2,x3,x4,x5,x6,y1,y2,Lattitude,Longitude)
>>
>> ################# building errorsarlm objects and lm objects
>> ####################################
>>
>> library(spdep)
>>
>> # creating neighbors for errorsarlm function
>> xy=SpatialPoints(as.matrix(mydata[,c(9,10)]))
>> myneighbors=dnearneigh(as.matrix(mydata[,c(9,10)]), 0, 1000, row.names =
>> NULL, longlat = TRUE)# 1000 kilometer distance
>> myweight=nb2listw(myneighbors,style="W") #
>>
>> # two errorsarlm objects
>> sar1=errorsarlm(y1~x1+x2+x3,data=mydata,myweight)
>> sar2=errorsarlm(y2~x4+x5+x6,data=mydata,myweight)
>>
>> # two lm objects
>> lm1=lm(y1~x1+x2+x3,data=mydata)
>> lm2=lm(y2~x4+x5+x6,data=mydata)
>>
>> ############### trying to use sarlm and lm in "piecewiseSEM"
>> ####################
>>
>> library(piecewiseSEM) # package for structural equation modeling
>> SEM_LM=sem.fit(list(lm1,lm2),data=mydata) # the package accept lm objects
>> (and random models such as lme)
>> SEM_errorsarLM=sem.fit(list(sar1,sar2),data=mydata) # the package does
>> not
>> accept errprsarlm objects
>>
>> # Error in nobs.default(x) : no 'nobs' method is available #
>>
>>
>>
>>
>> ?
>>
>> On Fri, Oct 20, 2017 at 2:06 PM, Roger Bivand <Roger.Bivand at nhh.no>
>> wrote:
>>
>> On Wed, 18 Oct 2017, niv de malach wrote:
>>>
>>> Hi all,
>>>
>>>> I need to convert an "errorsarlm" object into a simple "lm" object
>>>> because
>>>> the package I use ("piecewiseSEM") could not deal with "errorsarlm". Is
>>>> there a way to transform the object?
>>>>
>>>>
>>> Please give a reproducible example [1] showing what you are doing,
>>> preferably with a built-in data set. In any case, an lm object made from
>>> a
>>> sarlm object will fix the spatial coefficient and loose its uncertainty.
>>>
>>> [1] https://stackoverflow.com/questions/5963269/how-to-make-a-
>>> great-r-reproducible-example
>>>
>>> Can you use an model class accepted in piecewiseSEM that fits an MRF
>>> random effect?
>>>
>>> Roger
>>>
>>>
>>> Thanks,
>>>> Niv
>>>> ?
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>
>>> --
>>> Roger Bivand
>>> Department of Economics, Norwegian School of
>>> <https://maps.google.com/?q=an+School+of&entry=gmail&source=g>Economics,
>>> Helleveien 30, N-5045 Bergen, Norway.
>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>> Editor-in-Chief of The R Journal, https://journal.r-project.org/
>>> index.html
>>> http://orcid.org/0000-0003-2392-6140
>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>
>>
>>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>

?

	[[alternative HTML version deleted]]


From r.hijmans at gmail.com  Mon Oct 23 08:51:27 2017
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sun, 22 Oct 2017 23:51:27 -0700
Subject: [R-sig-Geo]  Is the raster package still receiving updates?
In-Reply-To: <CANVKczOBF1LVyAiOfspKa7Gwv1wrAK=n0MSc8RrxU5yXj_+xMg@mail.gmail.com>
References: <1520364990.1033649.1508511658722.ref@mail.yahoo.com>
 <1520364990.1033649.1508511658722@mail.yahoo.com>
 <CAAcGz98p=378aWyX=hb7Ro6Myjg9iFp5dtM=jvprFXimJ7JLUg@mail.gmail.com>
 <1508551128926.11865@uhd.edu>
 <CAAcGz9_-qUYEpwDMQU=qmTnqVemGvSq63tEyJGf=8ApkTG+_ZQ@mail.gmail.com>
 <E7824B12CF1B784E.e319c03c-61a4-4b29-b62c-31fe5bfe31de@mail.outlook.com>
 <f458d17f-f923-e7bb-5243-7ec0a83af0e1@uni-marburg.de>
 <E7824B12CF1B784E.03827277-398b-4e71-ba14-e87242a4897e@mail.outlook.com>
 <6912309e-7558-0ffe-41f7-dd289dd34dfe@uni-muenster.de>
 <CAKkiGbvmgSxHA1vKCZomNab-uAFFJ3wWJJEe-nG4ytHjZaE8cg@mail.gmail.com>
 <CAAp_v851BWU57sa0eEsgLWLo10Rpy8NEHOedA6ojnqOiCYfpRg@mail.gmail.com>
 <CANVKczOBF1LVyAiOfspKa7Gwv1wrAK=n0MSc8RrxU5yXj_+xMg@mail.gmail.com>
Message-ID: <CANtt_hzwEf5B4+qwKw00EhjnWQn=8VwiDzfi54ftM8GV=ieDAA@mail.gmail.com>

For a variety of reasons, I have not been able to do much work on raster
for the past year. And most of my thinking about it, and some work, has
been around a next generation replacement that is simpler in use and much
faster.
But for now, over the coming months, I will make sure that it gets updated
and bugs get fixed.

Best, Robert


On Sunday, October 22, 2017, Barry Rowlingson <b.rowlingson at lancaster.ac.uk
<javascript:_e(%7B%7D,'cvml','b.rowlingson at lancaster.ac.uk');>> wrote:

> Here's what I think should happen:
>
>  Robert Hijmans lets us know what his vision of raster is, and how he plans
> to support it.
>
>  He should say if he wishes to carry on as maintainer or not. If not, we
> need a new maintainer and then we can think about moving development to
> gitlab, or whatever.
>
> Barry
>
>
>
>
>
> On Sun, Oct 22, 2017 at 1:16 AM, Alexander Brown <a.brown at ieee.org> wrote:
>
> > I too expect to rely on the raster package for years, and would be
> willing
> > to help to the extent of my ability and resources.
> >
> > Alex Brown (a.brown at ieee.org)
> > http://faculty.uml.edu/abrown  -->
> > https://sites.google.com/site/alexbrownuml
> >
> >
> > On Sat, Oct 21, 2017 at 12:54 PM, Vijay Lulla <vijaylulla at gmail.com>
> > wrote:
> >
> > > Just like Mike I too will rely on raster for many years still and I
> will
> > be
> > > very happy to support efforts on this or whatever else the community
> > > leaders (Edzer, Roger, and others) decide is the best way for us to
> move
> > > forward.
> > >
> > > Thanks,
> > > Vijay.
> > >
> > > On Sat, Oct 21, 2017 at 5:32 AM, Edzer Pebesma <
> > > edzer.pebesma at uni-muenster.de> wrote:
> > >
> > > > The the NOTEs on CRAN and the issues raised on Mike's raster-rforge
> GH
> > > > repo to me suggest that raster has, for a while now, reached a mature
> > > > state. Of course, you'd wish that raster development, in terms of
> > > > extending its power and features, would continue the pace it did 10
> > > > years ago, but that's a different issue. Mike has write access to the
> > > > raster r-forge sources, it shouldn't be hard to support Robert with
> > > > current issues.
> > > >
> > > > Right after rstudio::conf (Feb 4/5) I'm meeting with Robert Hijmans
> and
> > > > Etienne Racine, to discuss, and work on raster future and integration
> > of
> > > > rasters and stars. Anyone interested, feel free to join.
> > > >
> > > > Stars has the ambition to jump over raster, in the sense that it
> > doesn't
> > > > want to have the local hard drive as a limitation. That calls for
> > > > rethinking quite a few things. So far, things are still all in main
> > > > memory but it already integrates with sf:
> > > >
> > > > https://gist.github.com/edzer/381dac079ddcd5174be31209675b3822
> > > >
> > > > and handles time stacks of different attributes in single objects.
> Feed
> > > > back welcome as always; will write up the first blog in a few weeks.
> > > >
> > > >
> > > > On 10/21/2017 10:41 AM, Roger Bivand wrote:
> > > > > Yes, this sounds fruitful. For now, I suggest that those wishing to
> > > > enhance raster do so in an additional package enhancing raster and
> > > > depending on it. Immediately, we should help Robert resolve the notes
> > in
> > > > the tests, they do not affect functionality now, but deserve
> attention
> > to
> > > > bring the package into full CRAN compliance. I can help with this.
> > > > >
> > > > > Roger
> > > > >
> > > > > Roger Bivand
> > > > > Norwegian School of Economics
> > > > > Bergen, Norway
> > > > >
> > > > >
> > > > >
> > > > > Fra: Chris Reudenbach
> > > > > Sendt: l?rdag 21. oktober, 09.01
> > > > > Emne: Re: [R-sig-Geo] Is the raster package still receiving
> updates?
> > > > > Til: r-sig-geo at r-project.org
> > > > >
> > > > >
> > > > > Many of us rely on the raster package as a crucial basis for their
> > > work.
> > > > Big thank to Robert.  Nevertheless to contribute needs to focus needs
> > and
> > > > ressources.  Maybe an information exchange/discussion with Robert
> about
> > > > options such as if/how the interested community can support would be
> > more
> > > > productive. cheers Chris Am 21.10.2017 um 06:52 schrieb Roger
> Bivand: >
> > > The
> > > > CRAN raster package has not been abandoned, if it had, it would have
> > been
> > > > reclassified as orphaned. Its test results have notes but no warnings
> > or
> > > > errors. It would be orphaned if the maintainer did not respond to
> CRAN
> > > > requests to resolve test errors. Consequently, you are suggesting a
> > fork,
> > > > and should rename any package. Only the maintainer may update
> existing
> > > CRAN
> > > > packages. I would not think that forking an existing CRAN package is
> > the
> > > > most productive way of contributing to the community. The package has
> > > many
> > > > reverse dependencies, so setting up a test framework to find
> backwards
> > > > incompatibilities would be crucial. > > Of course, all contributions
> > are
> > > > welcome. > > Roger > > Roger Bivand > Norwegian School of Economics >
> > > > Bergen, Norway > > > > Fra: Michael Sumner > Sendt: l?rdag 21.
> oktober,
> > > > 06.28 > Emne: Re: [R-sig-Geo] Is the raster package still receiving
> > > > updates? > Til: Hodgess, Erin > Kopi: R-sig-geo Mailing List > > >
> > Great!
> > > > I'm keen, but haven't done the work needed to flesh this out
> properly:
> > > > https://github.com/mdsumner/raster-rforge/issues I have not checked
> if
> > > > there's been any commits to r-forge since I cloned this. Cheers, Mike
> > On
> > > > Sat, 21 Oct 2017, 12:58 Hodgess, Erin, wrote: > I could take a swat
> at
> > > it,
> > > > if you wish. Please do send me the list of > fixes. I could start in
> > > about
> > > > a week, if that would work. > Sincerely, > Erin > > > Erin M.
> Hodgess >
> > > > Associate Professor > Department of Mathematics and Statistics >
> > > University
> > > > of Houston - Downtown > mailto: hodgesse at uhd.edu > >
> > > > ________________________________________ > From: R-sig-Geo on behalf
> > of
> > > > Michael > Sumner > Sent: Friday, October 20, 2017 8:05 PM > To:
> Thiago
> > V.
> > > > dos Santos > Cc: R-sig-geo Mailing List > Subject: Re: [R-sig-Geo] Is
> > the
> > > > raster package still receiving updates? > > No, it's effectively
> > > abandoned.
> > > > No concrete plans known. > > I'm interested to keep it going and have
> > > kept
> > > > a list of fixes needed, but > not sure when or if I'll get to it. > >
> > I'd
> > > > support any efforts in this, I'll rely on raster for many years
> still.
> > >
> > > >
> > > > Cheers, Mike > > On Sat, 21 Oct 2017, 02:05 Thiago V. dos Santos via
> > > > R-sig-Geo, < > r-sig-geo at r-project.org> wrote: > > > Dear list, > >
> >
> > >
> > > I
> > > > realized that the latest version of the raster package was released
> on
> > >
> > > >
> > > > CRAN over a year ago. > > > > I also noticed that Robert's
> > participation
> > > in
> > > > this list has become rather > > scarce. > > > > I was just wondering
> > > > whether the raster package is still receiving > updates? > > > >
> > > Greetings,
> > > > > > -- Thiago V. dos Santos > > > > Postdoctoral Research Fellow > >
> > > > Department of Climate and Space Science and Engineering > >
> University
> > of
> > > > Michigan > > > > _______________________________________________ > >
> > > > R-sig-Geo mailing list > > R-sig-Geo at r-project.org > >
> > > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > -- > Dr.
> Michael
> > > > Sumner > Software and Database Engineer > Australian Antarctic
> > Division >
> > > > 203 Channel Highway > Kingston Tasmania 7050 Australia > >
> > [[alternative
> > > > HTML version deleted]] > > ____ > ______________________________
> > > _____________
> > > > > R-sig-Geo mailing list > R-sig-Geo at r-project.org >
> > > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr. Michael
> > Sumner
> > > > Software and Database Engineer Australian Antarctic Division 203
> > Channel
> > > > Highway Kingston Tasmania 7050 Australia [[alternative HTML version
> > > > deleted]] _______________________________________________ R-sig-Geo
> > > > mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/
> > > > listinfo/r-sig-geo > > > [[alternative HTML version deleted]] > >
> > > > _______________________________________________ > R-sig-Geo mailing
> > list
> > > > > R-sig-Geo at r-project.org > https://stat.ethz.ch/mailman/
> > > > listinfo/r-sig-geo > -- Dr Christoph Reudenbach, Philipps-University
> of
> > > > Marburg, Faculty of Geography, GIS and Environmental Modeling,
> > > > Deutschhausstr. 10, D-35032 Marburg, fon: ++49.(0)6421.2824296, fax:
> > > > ++49.(0)6421.2828950, web: gis-ma.org, giswerk.org,
> > > > moc.environmentalinformatics-marburg.de
> ______________________________
> > > _________________
> > > > R-sig-Geo mailing list R-sig-Geo at r-project.org
> > > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> > > > >
> > > > >
> > > > >       [[alternative HTML version deleted]]
> > > > >
> > > > > _______________________________________________
> > > > > R-sig-Geo mailing list
> > > > > R-sig-Geo at r-project.org
> > > > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> > > > >
> > > >
> > > > --
> > > > Edzer Pebesma
> > > > Institute for Geoinformatics
> > > > Heisenbergstrasse 2, 48151 Muenster, Germany
> > > > Phone: +49 251 8333081
> > > > _______________________________________________
> > > > R-sig-Geo mailing list
> > > > R-sig-Geo at r-project.org
> > > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> > > >
> > >
> > >
> > >
> > > --
> > > Vijay Lulla, Ph.D.
> > >
> > > Assistant Professor,
> > > Dept. of Geography,
> > > Indiana University Purdue University Indianapolis (IUPUI)
> > > 425 University Blvd, CA-207C.
> > > Indianapolis, IN-46202
> > > vlulla at iupui.edu
> > >
> > > <http://vijaylulla.com>
> > > http://vijaylulla.com
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > _______________________________________________
> > > R-sig-Geo mailing list
> > > R-sig-Geo at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

	[[alternative HTML version deleted]]


From bfalevlist at gmail.com  Mon Oct 23 09:50:24 2017
From: bfalevlist at gmail.com (=?UTF-8?Q?Bede-Fazekas_=c3=81kos?=)
Date: Mon, 23 Oct 2017 09:50:24 +0200
Subject: [R-sig-Geo] Error in spCbind(GA0,
	data) : row names not identical
In-Reply-To: <1244899098.2098699.1508676500681@mail.yahoo.com>
References: <1244899098.2098699.1508676500681.ref@mail.yahoo.com>
 <1244899098.2098699.1508676500681@mail.yahoo.com>
Message-ID: <c986242a-e155-05ad-433b-45c76d269831@gmail.com>

Hi Marvin,

I think it should be better to post more information on the error, which 
could help us to help you. And while you try to get these additional 
infos, you might find the solution to your problem. I think, running
row.names(GA0)
row.names(data)
all.equal(row.names(GA0), row.names(data))
row.names(GA0)[row.names(GA0) != row.names(data)]
row.names(data)[row.names(GA0) != row.names(data)]
may help you to start searching the cause of the error. (Which is simply 
connected to the spelling of "De Kalb", and has nothing to do with 
spatial data and R...)
 > row.names(GA0)[row.names(GA0) != row.names(data)]
[1] "de kalb" "decatur"
 > row.names(data)[row.names(GA0) != row.names(data)]
[1] "decatur" "dekalb"

Have a nice day,
?kos


2017.10.22. 14:48 keltez?ssel, Marvin Sharma ?rta:
> HI,
> Could some one help? this newbie in fixing the spCbind problem 
> encountered below?
> >names(data)
> ?"county"? ? "y" ? ? ? ?"x"? ? ? ? ?"Latitude"? "Longitude"
>
> GA <- map("county", "georgia", plot=FALSE, fill=TRUE)
> cntys <- tolower(as.character(data$county))
> GA$names <- substring(GA$names, 9, nchar(GA$names))
> match(cntys, GA$names)##It does? match!
> #######################################
> GA <- map2SpatialPolygons(GA, GA$names)
> proj4string(GA) <- CRS("+proj=longlat")
> row.names(data) <- cntys
> GA0 <- SpatialPolygonsDataFrame(GA, 
> data=data.frame(ID=1:159,row.names=row.names(GA)))
> GA1 <- spCbind(GA0, data)
> > GA1 <- spCbind(GA0, data)
> Error in spCbind(GA0, data) : row names not identical
> >
> Thanks n advance,
>
> Marvin


	[[alternative HTML version deleted]]


From jed.long at st-andrews.ac.uk  Mon Oct 23 10:42:46 2017
From: jed.long at st-andrews.ac.uk (Jed Long)
Date: Mon, 23 Oct 2017 08:42:46 +0000
Subject: [R-sig-Geo] AdehabitatHR: interpreting biased random bridge RD
 and	ID output
In-Reply-To: <847373c4d96345f592568b4c56a6f022@MBX6.utas.ad.internal>
References: <847373c4d96345f592568b4c56a6f022@MBX6.utas.ad.internal>
Message-ID: <AM5PR0601MB2241A053CA326385C51DA03EFB460@AM5PR0601MB2241.eurprd06.prod.outlook.com>


Hi Rowena,

 You can use the getverticeshr to compute the say 20% volume contour. But I know of no tools to automatically compute the number of visits or the visit time associated with different areas. The output values in UD, ID, and RD are typically very difficult to interpret, check that the entire UD sums to 1 for example. If so you can interpret the values as relative use (associated with each of UD, ID, RD).

Sorry not of more help,
Jed


-----Original Message-----
From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Rowena Hamer
Sent: 23 October 2017 04:01
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] AdehabitatHR: interpreting biased random bridge RD and ID output

Hi,

I am using the biased random bridges function within the adehabitatHR package to analyse home ranges, and am interested in breaking the utilisation distribution down into recursion and intensity of use, as outlined in the vignette. I have successfully run the analyses as per the vignette example (code below), and can happily plot the UD, ID and RD and pull out areas of high visitation using the isopleths etc.

What I can't understand is how the output of the BRB function relates to 'real' values of the number of visits per site, and the average length of time spent in these areas. The raw pixel values range between 0 and ~0.0000006 (as in example below): I can't find any explanation of the units used in these outputs, and whether there is a way to translate them into more readily interpreted values.

For example, in Benhamou and Riotte-Lambert 2012, they describe further analyses of the distributions:
"For instance, the minimum area accounting for 20% of the visits (red and orange area in the bottom right panel of Fig. 2) was visited 36 times (ignoring numerous short (<1 h) movement bouts inside or outside the area due to movements close to the area edges). The mean visit duration was about 5 h (this area thus was exploited for 27% of the total period whereas it encompassed only about 5% of the home range area), and the mean duration spent outside the area between one exit and the consecutive entry was about 13 h."

Is there a built in way to translate the ID and RD outputs into this kind of data, or do you have to calculate it separately (e.g. by overlaying the ID/ RD over the original data and summarising the number of visits manually?).

Thanks for any help you can give!

Rowena


Buffalo example from adehabitatHR vignette:

> data(buffalo)
> id <- BRB(buffalo$traj, D = 440/60, Tmax = 3*3600, Lmin = 50, type = "ID",
+           hmin=100, radius = 300, maxt = 2*3600, activity="act", filtershort=FALSE,
+           grid = 200, extent=0.1)
> rd <- BRB(buffalo$traj, D = 440/60, Tmax = 3*3600, Lmin = 50, type = "RD",
+           hmin=100, radius = 300, maxt = 2*3600, activity="act", filtershort=FALSE,
+           grid = 200, extent=0.1)
> ud <- BRB(buffalo$traj, D = 440/60, Tmax = 3*3600, Lmin = 50,
+           hmin=100, radius = 300, maxt = 2*3600, activity="act", filtershort=FALSE,
+           grid = 200, extent=0.1)
> range(ud at data)
[1] 0.000000e+00 5.660811e-07
> range(id at data)
[1] 0.000000e+00 6.552115e-07
> range(rd at data)
[1] 0.000000e+00 3.774331e-07



University of Tasmania Electronic Communications Policy (December, 2014).
This email is confidential, and is for the intended recipient only. Access, disclosure, copying, distribution, or reliance on any of it by anyone outside the intended recipient organisation is prohibited and may be a criminal offence. Please delete if obtained in error and email confirmation to the sender. The views expressed in this email are not necessarily the views of the University of Tasmania, unless clearly intended otherwise.

	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Mon Oct 23 10:48:07 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 23 Oct 2017 10:48:07 +0200
Subject: [R-sig-Geo] convert "errorsarlm" to "lm"
In-Reply-To: <CAHxNAtkiUKe66VQJBcj+ROG7SpoTwkevZJOGJXazn=r7DMqUSQ@mail.gmail.com>
References: <CAHxNAtnJXZqNT7scN-wjmaBUNKXp4mimnbZ0o1aa09gimyvUQA@mail.gmail.com>
 <alpine.LFD.2.21.1710201259440.2685@reclus.nhh.no>
 <CAHxNAt=kckVK7Zs318=d6dJfTuTeuyQ4BpZ95756=ye-=Jjb+A@mail.gmail.com>
 <alpine.LFD.2.21.1710222111380.11884@reclus.nhh.no>
 <CAHxNAtkiUKe66VQJBcj+ROG7SpoTwkevZJOGJXazn=r7DMqUSQ@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1710231019041.2470@reclus.nhh.no>

On Mon, 23 Oct 2017, niv de malach wrote:

> I am not sure that I fully understand you... I Appologize for my ignorance

Even though piecewiseSEM uses a spatial example, I would argue that, 
unless we know with certainty that the multivariate observations are not 
in any way autocorrelated, we should assume that they are autocorrelated, 
and may also be coorrelated through missing covariates and/or 
inappropriate functional form. This will potentially affect the inferences 
we draw from correlations, as any unmodelled spatial autocorrelation will 
affect the count of "independent" observations, so that the effective df 
will be smaller than the df assumed if observations are independent. In 
path modelling (unlike simultaneous equation models, which feed back 
between equations), we are dealing with unidirectional causality, but 
inferences depend on assumptions about the number of independent 
observations. MRF fit a plausible spatially structured random effect (but 
by each equation separately - there are spatial econometrics approaches to 
SEM which model a multivariate error process).

As a speculation, you might be able to look at an ade4::multispati 
approach, packages ade4 or adespatial (using Moran eigenvectors instead of 
ML SAR - errorsarlm). See for example DOI: 10.1890/11-1183.1. I suspect 
that the union of sets of eigenvalues chosen for your lm() fits, added to 
the covariates, might account for the spatial patterning present in 
residuals (a PCNM-Moran eigenvector-spatial filtering approach).

>
> 1. Do you have some approach of transferring the object coefficients into
> "lm" assuming that they are fixed? (if so let me know how...)
>

If you read ?errorsalm, you see that tarX and tary are returned. They are 
(I - \lambda W) X and (I - \lambda W) y respectively. In ?bptest.sarlm, 
you see a sneaky and really untested example of their use - not 
recommended!!

> 2. I am not sure what do you mean by uncertainty (confidence intervals?
> significance tests? AIC\BIC scores?something totally different?). You
> suggested to use bayesian methods but I am not sure why. In this SEM type
> (local estimation approach) I can use the equation (before transformation)
> for inference (with all their "uncertainty" whatever that be). Putting them
> together as "SEM" is used mainly for testing whether there is a correlation
> between some variables and the residuals of equation describing other (non
> linked) variables . Using a special test this package test what is the
> probability that the model is "wrong" based on the "missing links".
> In general it would be better to get also an AIC\BIC for the total SEM
> model  (which is possible when regular lm objects are used) but my main
> goal in this analysis is parameter estimation rather than model selection
> (so the SEM is used only as a "sanity check" that
> there wasn't any important missing link)
>

Using the distribution of \lambda as something like N(lambda, se.lambda), 
sample many lambda values and re-generate tarX and tary. Re-fit your lm(), 
and examine the outcomes of piecewiseSEM for these possible values of 
\lambda (you have a joint situation with several equations, so treating 
each equation separately is not ideal - a PCNM approach would accommodate 
the shared spatial autocorrelation.

Assuming that issues of this kind only need technical fixes may lead to 
very erroneous inference. I'd guess that there is a viable paper in 
extending PCNM to path modelling, and that is a better way to go than an 
ad-hoc kludge.

Roger

> Thanks
>
> On Sun, Oct 22, 2017 at 10:23 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
>> On Sun, 22 Oct 2017, niv de malach wrote:
>>
>> Regarding your question about MRF, I don't know what it is...
>>>
>>
>> see for example:
>>
>> http://www.fromthebottomoftheheap.net/2017/10/19/first-
>> steps-with-mrf-smooths/
>>
>> here using mgcv::gam() to fit a model with an MRF smooth. In effect,
>> errorsarlm() is fitting something similar,
>>
>>
>>> I know that the package piecewiseSEM accept the following object types:
>>>
>>> ?lm?, ?rq?, ?glm?, ?glm.nb?, ?gls?, ?pgls?, ?merMod?, ?merModLmerTest?,
>>> ?lme?, ?glmmPQL?, ?glmmadmb?, and ?glmmTMB?.
>>>
>>> so  "transformation" of errorsarlm to any of these object should solve the
>>> problem.
>>>
>>>
>> No! You have to pass through the uncertainty associated with fitting the
>> spatial regression coefficient. The same would apply with any other
>> MRF-based approach. It is possible to pretend that this coefficient is
>> fixed (I'll return to the example tomorrow). I don't think that any of the
>> listed object types come from fitting functions supporting MRF, though. You
>> would likely need to re-fit your piecewiseSEM over samples from the
>> coefficients, to check that the path outcomes were robust (just a
>> speculation). Any Bayesians who could help?
>>
>> Roger
>>
>>
>>> Below there is a code where a dataset is simulated and analyzed using 'lm'
>>> and 'errorsarlm'. Only 'lm' is accepted for
>>> SEM analysis.
>>>
>>> Thanks,
>>> Niv
>>>
>>>
>>> #################### creating a simulated dataset
>>> ##############################
>>>
>>> set.seed(1)
>>> sample=50 # sample size (number of points)
>>>
>>> # spatial location
>>> Lattitude=rnorm(sample, mean = 0, sd = 4)
>>> Longitude=rnorm(sample, mean = 0, sd = 4
>>>
>>> # creating exploratory variable
>>> <https://maps.google.com/?q=ry+variable&entry=gmail&source=g>s
>>> x1=rnorm(sample, mean = 30, sd = 2
>>> <https://maps.google.com/?q=30,+sd+%3D+2&entry=gmail&source=g>0)
>>> x2=rnorm(sample, mean = -20, sd = 10)
>>> x3=rnorm(sample, mean = 5, sd = 3)
>>> x4=rnorm(sample, mean = 25,
>>> <https://maps.google.com/?q=mean+%3D+25,&entry=gmail&source=g> sd = 5)
>>> x5=rnorm(sample, mean = -10, sd = 10)
>>> x6=rnorm(sample, mean = 50, sd = 30)
>>>
>>> # response variables
>>> y1=10*x1+5*x2+2*x3+30*Lattitude+rnorm(sample, mean = 0, sd = 20) # y1 is
>>> function of x1-x3 +location+random error
>>> y2=10*x4+5*x5+2*x6+10*Longitude+rnorm(sample, mean = 0, sd = 20) # y1 is
>>> function of x4-x5 +location+random error
>>>
>>> mydata=data.frame(x1,x2,x3,x4,x5,x6,y1,y2,Lattitude,Longitude)
>>>
>>> ################# building errorsarlm objects and lm objects
>>> ####################################
>>>
>>> library(spdep)
>>>
>>> # creating neighbors for errorsarlm function
>>> xy=SpatialPoints(as.matrix(mydata[,c(9,10)]))
>>> myneighbors=dnearneigh(as.matrix(mydata[,c(9,10)]), 0, 1000, row.names =
>>> NULL, longlat = TRUE)# 1000 kilometer distance
>>> myweight=nb2listw(myneighbors,style="W") #
>>>
>>> # two errorsarlm objects
>>> sar1=errorsarlm(y1~x1+x2+x3,data=mydata,myweight)
>>> sar2=errorsarlm(y2~x4+x5+x6,data=mydata,myweight)
>>>
>>> # two lm objects
>>> lm1=lm(y1~x1+x2+x3,data=mydata)
>>> lm2=lm(y2~x4+x5+x6,data=mydata)
>>>
>>> ############### trying to use sarlm and lm in "piecewiseSEM"
>>> ####################
>>>
>>> library(piecewiseSEM) # package for structural equation modeling
>>> SEM_LM=sem.fit(list(lm1,lm2),data=mydata) # the package accept lm objects
>>> (and random models such as lme)
>>> SEM_errorsarLM=sem.fit(list(sar1,sar2),data=mydata) # the package does
>>> not
>>> accept errprsarlm objects
>>>
>>> # Error in nobs.default(x) : no 'nobs' method is available #
>>>
>>>
>>>
>>>
>>> ?
>>>
>>> On Fri, Oct 20, 2017 at 2:06 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>> wrote:
>>>
>>> On Wed, 18 Oct 2017, niv de malach wrote:
>>>>
>>>> Hi all,
>>>>
>>>>> I need to convert an "errorsarlm" object into a simple "lm" object
>>>>> because
>>>>> the package I use ("piecewiseSEM") could not deal with "errorsarlm". Is
>>>>> there a way to transform the object?
>>>>>
>>>>>
>>>> Please give a reproducible example [1] showing what you are doing,
>>>> preferably with a built-in data set. In any case, an lm object made from
>>>> a
>>>> sarlm object will fix the spatial coefficient and loose its uncertainty.
>>>>
>>>> [1] https://stackoverflow.com/questions/5963269/how-to-make-a-
>>>> great-r-reproducible-example
>>>>
>>>> Can you use an model class accepted in piecewiseSEM that fits an MRF
>>>> random effect?
>>>>
>>>> Roger
>>>>
>>>>
>>>> Thanks,
>>>>> Niv
>>>>> ?
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>>
>>>> --
>>>> Roger Bivand
>>>> Department of Economics, Norwegian School of
>>>> <https://maps.google.com/?q=an+School+of&entry=gmail&source=g>Economics,
>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>> Editor-in-Chief of The R Journal, https://journal.r-project.org/
>>>> index.html
>>>> http://orcid.org/0000-0003-2392-6140
>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>
>>>
>>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>
>
> ?
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From l.mortimer.14 at aberdeen.ac.uk  Mon Oct 23 18:42:43 2017
From: l.mortimer.14 at aberdeen.ac.uk (Mortimer, Linsey Anne)
Date: Mon, 23 Oct 2017 16:42:43 +0000
Subject: [R-sig-Geo] Plotting GPS Coordinates on a Polar Projection Using
	rgdal
Message-ID: <DB6PR0101MB23128DB37806CD8471A0D54886460@DB6PR0101MB2312.eurprd01.prod.exchangelabs.com>

Hello,

I am new to R and attempting to plot a map of Antarctica with the GPS coordinates from a circumpolar navigation of the Southern Ocean. I have searched the archives and rgdal-related manuals/blogs/papers to find variations of the code below. I have two issues: firstly, removing the vertical line at -90 degrees on the plot of Antarctica. Secondly, adding the coordinates to this plot using points(). I have tried transforming the coordinates of the points to fit the projection but every time the output is a single point plotted at the end of the vertical line on the Antarctica map, a separate plot of points in a world map projection (stretched) rather than polar projection, or simply an error about coercing an S4 class to a vector. Any advice on how to correct the code or a point in the direction of a guide to this kind of mapping and spatial analysis would be of great help.

An idea of what my dataset looks like (10774579 obs. of 9 variables):

> head(GPS)

?..GPS_fix    GPS_date  GPS_time GPS_milliseconds  Latitude Longitude GPS_status

1          0  2016-12-24  14:26:03              878 -44.76846  35.36859          2

2          1  2016-12-24  14:26:04              309 -44.76846  35.36859          2

3          2  2016-12-24  14:26:04              878 -44.76849  35.36866          1

4          3  2016-12-24  14:26:05              309 -44.76849  35.36866          2

5          4  2016-12-24  14:26:05              878 -44.76852  35.36873          1

6          5  2016-12-24  14:26:06              305 -44.76852  35.36873          2

GPS_filename    Distance

1  D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.000000000

2  D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.000000000

3  D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw          NA

4  D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.003509715

5  D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw          NA

6  D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.007045702




The code I?m using:

> install.packages(c("sp", "raster", ?crs?))

> library(maptools)

> gpclibPermit()

> data(wrld_simpl)

> antarctica <- wrld_simpl[wrld_simpl$NAME == "Antarctica", ]

> library(rgdal)

> pr <- "+proj=laea +lat_0=-90 +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0" #define projection

> antarctica.laea <- spTransform(antarctica, CRS(pr))

> plot(antarctica.laea)

> ## Now I attempt to make the GPS table into a spatial object and plot the coordinates

> attach(GPS)

> coordinates(GPS) <- c("Longitude","Latitude")

> points(Longitude, Latitude, pch=19, col="red", cex=0.5) #This only plots a singular point at the end of vertical line on the map

> ## Also tried to transform the coordinates but receive an error

>proj4string(GPS) <- CRS("+proj=laea +lat_0=-90 +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0")

> gps.ant <- spTransform(GPS, CRS(antarctica.laea))

Error in CRS(antarctica.laea) :

  no method for coercing this S4 class to a vector

In addition: Warning message:

In is.na(projargs) : is.na() applied to non-(list or vector) of type 'S4'

> sessionInfo()

R version 3.4.2 (2017-09-28)

Platform: x86_64-w64-mingw32/x64 (64-bit)

Running under: Windows >= 8 x64 (build 9200)



Matrix products: default



locale:

[1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United Kingdom.1252

[3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C

[5] LC_TIME=English_United Kingdom.1252



attached base packages:

[1] stats     graphics  grDevices utils     datasets  methods   base



other attached packages:

[1] maptools_0.9-2 rgdal_1.2-13   sp_1.2-5



loaded via a namespace (and not attached):

[1] compiler_3.4.2  tools_3.4.2     foreign_0.8-69  grid_3.4.2      lattice_0.20-35



Many thanks,



Linsey Mortimer



	[[alternative HTML version deleted]]


From Andy.Bunn at wwu.edu  Mon Oct 23 18:57:46 2017
From: Andy.Bunn at wwu.edu (Andy Bunn)
Date: Mon, 23 Oct 2017 16:57:46 +0000
Subject: [R-sig-Geo] sampling a raster within a polygon
Message-ID: <82F6A4C1-CBF3-4AE7-823B-0718C9F2AC9D@wwu.edu>

Hi all, I?ve followed the thread on the updates to raster and would like to acknowledge the wonderful work done by Robert and others in making raster. It is an amazing piece of software. Thanks to all who help people like me do my job using the fruits of your labors!

Anyways, I?m working with some largish rasters and running into a step that is more computationally intensive than I would like. I?m trying to randomly sample a raster within the bounds of a polygon. E.g., in the example below I?d like to apply sampleRandom() on the raster r but constrain the sample to points within the polygons defined by xy.sp.


    require(raster)
    
    xy = cbind(
      x = c(13.4, 13.4, 13.6, 13.6, 13.4),
      y = c(48.9, 49, 49, 48.9, 48.9)
    )
    hole.xy <- cbind(
      x = c(13.5, 13.5, 13.45, 13.45, 13.5),
      y = c(48.98, 48.92, 48.92, 48.98, 48.98)
    )
    
    xy.sp <- SpatialPolygons(list(
      Polygons(list(Polygon(xy),
                    Polygon(hole.xy, hole = TRUE)), "1"),
      Polygons(list(Polygon(xy + 0.2),
                    Polygon(xy + 0.35),
                    Polygon(hole.xy + 0.2, hole = TRUE)), "2")
    ))
    
    r <- raster(nrow=100, ncol=100, ext=extent(xy.sp), resolution=0.01)
    r[] <- runif(ncell(r))
    
    plot(xy.sp,col="grey")
    plot(r,add=T,alpha=0.5)



I can accomplish this with a mask  via: 
    sampleRandom(mask(r, xy.sp),size = 10)
    
However, I have many different polygons to apply over a big raster and the mask() is taking a long time. Is there a better way to go about this?

Thanks in advance, A     



From mdsumner at gmail.com  Mon Oct 23 22:35:53 2017
From: mdsumner at gmail.com (Michael Sumner)
Date: Mon, 23 Oct 2017 20:35:53 +0000
Subject: [R-sig-Geo] Plotting GPS Coordinates on a Polar Projection
	Using rgdal
In-Reply-To: <DB6PR0101MB23128DB37806CD8471A0D54886460@DB6PR0101MB2312.eurprd01.prod.exchangelabs.com>
References: <DB6PR0101MB23128DB37806CD8471A0D54886460@DB6PR0101MB2312.eurprd01.prod.exchangelabs.com>
Message-ID: <CAAcGz98j3HSd41vEC78AXG9Kv0KszYuekDy9rSVU4yKVjzUEbw@mail.gmail.com>

On Tue, 24 Oct 2017 at 03:42 Mortimer, Linsey Anne <
l.mortimer.14 at aberdeen.ac.uk> wrote:

> Hello,
>
> I am new to R and attempting to plot a map of Antarctica with the GPS
> coordinates from a circumpolar navigation of the Southern Ocean. I have
> searched the archives and rgdal-related manuals/blogs/papers to find
> variations of the code below. I have two issues: firstly, removing the
> vertical line at -90 degrees on the plot of Antarctica. Secondly, adding
> the coordinates to this plot using points(). I have tried transforming the
> coordinates of the points to fit the projection but every time the output
> is a single point plotted at the end of the vertical line on the Antarctica
> map, a separate plot of points in a world map projection (stretched) rather
> than polar projection, or simply an error about coercing an S4 class to a
> vector. Any advice on how to correct the code or a point in the direction
> of a guide to this kind of mapping and spatial analysis would be of great
> help.
>
>

You can remove the dummy seam at the south pole by decomposing to raw
coordinates and reconstructing with spbabel:

data("wrld_simpl", package = "maptools")
crs <- sp::proj4string(wrld_simpl)
antarctica0 <- wrld_simpl[wrld_simpl$NAME == "Antarctica", ]
library(spbabel)
library(dplyr)
ant <- spbabel::sptable(antarctica0) %>%
  dplyr::filter(y_ > -90) %>%
  spbabel::sp(crs = crs)

pr <- "+proj=laea +lat_0=-90 +ellps=WGS84 +datum=WGS84 +no_defs
+towgs84=0,0,0"
antarctica <- sp::spTransform(ant, sp::CRS(pr))


That makes sense when plotted in polar form, but will wrap improperly in
native longitude/latitude form.


> An idea of what my dataset looks like (10774579 obs. of 9 variables):
>
> > head(GPS)
>
> ?..GPS_fix    GPS_date  GPS_time GPS_milliseconds  Latitude Longitude
> GPS_status
>
> 1          0  2016-12-24  14:26:03              878 -44.76846  35.36859
>       2
>
> 2          1  2016-12-24  14:26:04              309 -44.76846  35.36859
>       2
>
> 3          2  2016-12-24  14:26:04              878 -44.76849  35.36866
>       1
>
> 4          3  2016-12-24  14:26:05              309 -44.76849  35.36866
>       2
>
> 5          4  2016-12-24  14:26:05              878 -44.76852  35.36873
>       1
>
> 6          5  2016-12-24  14:26:06              305 -44.76852  35.36873
>       2
>
> GPS_filename    Distance
>
> 1  D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.000000000
>
> 2  D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.000000000
>
> 3  D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw          NA
>
> 4  D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.003509715
>
> 5  D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw          NA
>
> 6  D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.007045702
>
>
>
>
> The code I?m using:
>
> > install.packages(c("sp", "raster", ?crs?))
>
> > library(maptools)
>
> > gpclibPermit()
>
> > data(wrld_simpl)
>
> > antarctica <- wrld_simpl[wrld_simpl$NAME == "Antarctica", ]
>
> > library(rgdal)
>
> > pr <- "+proj=laea +lat_0=-90 +ellps=WGS84 +datum=WGS84 +no_defs
> +towgs84=0,0,0" #define projection
>
> > antarctica.laea <- spTransform(antarctica, CRS(pr))
>
> > plot(antarctica.laea)
>
> > ## Now I attempt to make the GPS table into a spatial object and plot
> the coordinates
>
> > attach(GPS)
>
> > coordinates(GPS) <- c("Longitude","Latitude")
>
> > points(Longitude, Latitude, pch=19, col="red", cex=0.5) #This only plots
> a singular point at the end of vertical line on the map
>
>
Here you are mixing old attach() idiom with more modern sp idiom to assign
the coordinates, it's probably best to not use attach at all.

coordinates(GPS) <- c("Longitude","Latitude")
## despite the name of the coordinates, we don't
## otherwise know the coordinate system in use,
## so assign is here:
proj4string(GPS) <- sp::CRS("+init=epsg:4326")

## now we can transform to the projection in use
gps.ant <- sp::spTransform(GPS, sp::CRS(pr))


You might find the sf package easier to use now, though there are dozens of
tracking-specific packages with some other improvements. I find generally
that ggplot2 provides the best overall approach to plotting, but it
requires specific handling of the coordinate systems for each data set, as
done here.

The trip package has some methods to generate SpatialLinesDataFrame (and
other high level classes), but to do this by removing track-information to
get to GIS-friendly form. (It's also really painful to use and is in
desperate need of a user-friendly update.) There's no real stand out good
approach for this general problem, so feel free to ask more specifics.
There are a huge number of disparate tracking-packages listed on CRAN so
you might explore them for your needs:

https://cran.r-project.org/web/views/SpatioTemporal.html
(sere under "Moving objects, trajectories")

Cheers, Mike.


> ## Also tried to transform the coordinates but receive an error
>
> >proj4string(GPS) <- CRS("+proj=laea +lat_0=-90 +ellps=WGS84 +datum=WGS84
> +no_defs +towgs84=0,0,0")
>
> > gps.ant <- spTransform(GPS, CRS(antarctica.laea))
>
> Error in CRS(antarctica.laea) :
>
>   no method for coercing this S4 class to a vector
>
> In addition: Warning message:
>
> In is.na(projargs) : is.na() applied to non-(list or vector) of type 'S4'
>
> > sessionInfo()
>
> R version 3.4.2 (2017-09-28)
>
> Platform: x86_64-w64-mingw32/x64 (64-bit)
>
> Running under: Windows >= 8 x64 (build 9200)
>
>
>
> Matrix products: default
>
>
>
> locale:
>
> [1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United
> Kingdom.1252
>
> [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C
>
> [5] LC_TIME=English_United Kingdom.1252
>
>
>
> attached base packages:
>
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
>
>
> other attached packages:
>
> [1] maptools_0.9-2 rgdal_1.2-13   sp_1.2-5
>
>
>
> loaded via a namespace (and not attached):
>
> [1] compiler_3.4.2  tools_3.4.2     foreign_0.8-69  grid_3.4.2
> lattice_0.20-35
>
>
>
> Many thanks,
>
>
>
> Linsey Mortimer
>
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From l.mortimer.14 at aberdeen.ac.uk  Tue Oct 24 00:53:22 2017
From: l.mortimer.14 at aberdeen.ac.uk (Mortimer, Linsey Anne)
Date: Mon, 23 Oct 2017 22:53:22 +0000
Subject: [R-sig-Geo] Plotting GPS Coordinates on a Polar Projection
 Using rgdal
In-Reply-To: <CAAcGz98j3HSd41vEC78AXG9Kv0KszYuekDy9rSVU4yKVjzUEbw@mail.gmail.com>
References: <DB6PR0101MB23128DB37806CD8471A0D54886460@DB6PR0101MB2312.eurprd01.prod.exchangelabs.com>,
 <CAAcGz98j3HSd41vEC78AXG9Kv0KszYuekDy9rSVU4yKVjzUEbw@mail.gmail.com>
Message-ID: <VI1PR0101MB23173329C1E17653F09ECC8086460@VI1PR0101MB2317.eurprd01.prod.exchangelabs.com>

This was a big help, thank you. The coordinates are plotted and look good except some of my GPS coordinates are outside of the plot - I should have check this beforehand. Is there a way to produce a plot using spbabel similar to this:?


library(ggplot2)
world <- map_data("world")
worldmap <- ggplot(world, aes(x=long, y=lat, group=group)) +
? geom_path() +
? scale_y_continuous(breaks=(-2:2) * 30) +
? scale_x_continuous(breaks=(-4:4) * 45)
worldmap + coord_map("ortho", orientation=c(-90, 0, 0))


or would it be better to simply use ggplot for this?


Many thanks,

Linsey


From: Michael Sumner <mdsumner at gmail.com>
Sent: 23 October 2017 21:35
To: Mortimer, Linsey Anne
Cc: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] Plotting GPS Coordinates on a Polar Projection Using rgdal
? 



On Tue, 24 Oct 2017 at 03:42 Mortimer, Linsey Anne <l.mortimer.14 at aberdeen.ac.uk> wrote:
  Hello,

I am new to R and attempting to plot a map of Antarctica with the GPS coordinates from a circumpolar navigation of the Southern Ocean. I have searched the archives and rgdal-related manuals/blogs/papers to find variations of the code below. I have two issues:  firstly, removing the vertical line at -90 degrees on the plot of Antarctica. Secondly, adding the coordinates to this plot using points(). I have tried transforming the coordinates of the points to fit the projection but every time the output is a single  point plotted at the end of the vertical line on the Antarctica map, a separate plot of points in a world map projection (stretched) rather than polar projection, or simply an error about coercing an S4 class to a vector. Any advice on how to correct the code  or a point in the direction of a guide to this kind of mapping and spatial analysis would be of great help.





 


You can remove the dummy seam at the south pole by decomposing to raw coordinates and reconstructing with spbabel:?



data("wrld_simpl", package = "maptools")
crs <- sp::proj4string(wrld_simpl)
antarctica0 <- wrld_simpl[wrld_simpl$NAME == "Antarctica", ]
library(spbabel)
library(dplyr)
ant <- spbabel::sptable(antarctica0) %>%?
? dplyr::filter(y_ > -90) %>%?
? spbabel::sp(crs = crs)   





pr <- "+proj=laea +lat_0=-90 +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0"   



antarctica <- sp::spTransform(ant, sp::CRS(pr)) 




That makes sense when plotted in polar form, but will wrap improperly in native longitude/latitude form.?  


?  An idea of what my dataset looks like (10774579 obs. of 9 variables):

> head(GPS)

?..GPS_fix? ? GPS_date? GPS_time GPS_milliseconds? Latitude Longitude GPS_status

1? ? ? ? ? 0? 2016-12-24? 14:26:03? ? ? ? ? ? ? 878 -44.76846? 35.36859? ? ? ? ? 2

2? ? ? ? ? 1? 2016-12-24? 14:26:04? ? ? ? ? ? ? 309 -44.76846? 35.36859? ? ? ? ? 2

3? ? ? ? ? 2? 2016-12-24? 14:26:04? ? ? ? ? ? ? 878 -44.76849? 35.36866? ? ? ? ? 1

4? ? ? ? ? 3? 2016-12-24? 14:26:05? ? ? ? ? ? ? 309 -44.76849? 35.36866? ? ? ? ? 2

5? ? ? ? ? 4? 2016-12-24? 14:26:05? ? ? ? ? ? ? 878 -44.76852? 35.36873? ? ? ? ? 1

6? ? ? ? ? 5? 2016-12-24? 14:26:06? ? ? ? ? ? ? 305 -44.76852? 35.36873? ? ? ? ? 2

GPS_filename? ? Distance

1? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.000000000

2? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.000000000

3? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw? ? ? ? ? NA

4? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.003509715

5? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw? ? ? ? ? NA

6? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.007045702




The code I?m using:

> install.packages(c("sp", "raster", ?crs?))

> library(maptools)

> gpclibPermit()

> data(wrld_simpl)

> antarctica <- wrld_simpl[wrld_simpl$NAME == "Antarctica", ]

> library(rgdal)

> pr <- "+proj=laea +lat_0=-90 +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0" #define projection

> antarctica.laea <- spTransform(antarctica, CRS(pr))

> plot(antarctica.laea)

> ## Now I attempt to make the GPS table into a spatial object and plot the coordinates

> attach(GPS)

> coordinates(GPS) <- c("Longitude","Latitude")

> points(Longitude, Latitude, pch=19, col="red", cex=0.5) #This only plots a singular point at the end of vertical line on the map



  


Here you are mixing old attach() idiom with more modern sp idiom to assign the coordinates, it's probably best to not use attach at all.?  




coordinates(GPS) <- c("Longitude","Latitude")
  


## despite the name of the coordinates, we don't?
## otherwise know the coordinate system in use,?
## so assign is here:?
proj4string(GPS) <- sp::CRS("+init=epsg:4326")


## now we can transform to the projection in use
gps.ant <- sp::spTransform(GPS, sp::CRS(pr))
?


You might find the sf package easier to use now, though there are dozens of tracking-specific packages with some other improvements. I find generally that ggplot2 provides the best overall approach to plotting, but it requires specific handling of the  coordinate systems for each data set, as done here.?


The trip package has some methods to generate SpatialLinesDataFrame (and other high level classes), but to do this by removing track-information to get to GIS-friendly form. (It's also really painful to use and is in desperate need of a user-friendly update.)  There's no real stand out good approach for this general problem, so feel free to ask more specifics.? There are a huge number of disparate tracking-packages listed on CRAN so you might explore them for your needs:?


https://cran.r-project.org/web/views/SpatioTemporal.html

(sere under "Moving objects, trajectories")


Cheers, Mike.?  





  > ## Also tried to transform the coordinates but receive an error

>proj4string(GPS) <- CRS("+proj=laea +lat_0=-90 +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0")

> gps.ant <- spTransform(GPS, CRS(antarctica.laea))

Error in CRS(antarctica.laea) :

? no method for coercing this S4 class to a vector

In addition: Warning message:

In is.na(projargs) :  is.na() applied to non-(list or vector) of type 'S4'

> sessionInfo()

R version 3.4.2 (2017-09-28)

Platform: x86_64-w64-mingw32/x64 (64-bit)

Running under: Windows >= 8 x64 (build 9200)



Matrix products: default



locale:

[1] LC_COLLATE=English_United Kingdom.1252? LC_CTYPE=English_United Kingdom.1252

[3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C

[5] LC_TIME=English_United Kingdom.1252



attached base packages:

[1] stats? ? ?graphics? grDevices utils? ? ?datasets? methods? ?base



other attached packages:

[1] maptools_0.9-2 rgdal_1.2-13? ?sp_1.2-5



loaded via a namespace (and not attached):

[1] compiler_3.4.2? tools_3.4.2? ? ?foreign_0.8-69? grid_3.4.2? ? ? lattice_0.20-35



Many thanks,



Linsey Mortimer



? ? ? ? [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo  
-- 


Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

      

From obrlsoilau at gmail.com  Tue Oct 24 00:58:22 2017
From: obrlsoilau at gmail.com (obrl soil)
Date: Tue, 24 Oct 2017 08:58:22 +1000
Subject: [R-sig-Geo] sampling a raster within a polygon
In-Reply-To: <82F6A4C1-CBF3-4AE7-823B-0718C9F2AC9D@wwu.edu>
References: <82F6A4C1-CBF3-4AE7-823B-0718C9F2AC9D@wwu.edu>
Message-ID: <CALG31BU1E5UNkcC_nqpp3owYPySM9_qymxwtBgCzgHA2BOZtgA@mail.gmail.com>

Hi Andy,

I've gotten around this before using package 'sf' and list-columns,
here's a workflow using your data:

library(sf)
library(tidyverse)

xy.sf <- st_as_sf(xy.sp) %>%
  mutate(ID = 1:nrow(.)) # need at least one attribute

xy.sf.s <- xy.sf %>%
  # get intersecting cells
  mutate(intersecting_cells =
           # this is my go-to for row-wise functions atm, open to improvements
           split(., 1:nrow(.)) %>%
           map(., function(g) {
             poly_sp <- as(g, 'Spatial') # can we prioritise raster
support for sf pls :P
             cells   <- as.integer(unlist(cellFromPolygon(r, poly_sp)))
             cells   <- if (length(cells) == 0) { NA } else { cells }
             }) %>%
           setNames(., NULL)) %>%
  filter(!(is.na(intersecting_cells))) %>%
  # drop geometry here - its easier. output is just a df with several list cols
  st_set_geometry(., NULL) %>%
  # randomly subsample each polygon's cells
  mutate(sample =
           split(., 1:nrow(.)) %>%
           # you could store desired sample n in another column, but
lets go with 10:
           map(function(row) {
             sample(unlist(row[ , 'intersecting_cells']), size = 10,
replace = FALSE)
           })) %>%
  # get values of those cells
  mutate(values =
          split(., 1:nrow(.)) %>%
          map(function(row) {
            raster::extract(r, y = unlist(row[ , 'sample'])) %>%
              setNames(., NULL)
          }))

# proof that samples are where they should be
samp_1 <- xyFromCell(r, xy.sf.s$sample[[1]]) %>%
  st_multipoint(.) %>%
  st_sfc()
samp_2 <- xyFromCell(r, xy.sf.s$sample[[2]]) %>%
  st_multipoint(.) %>%
  st_sfc()
plot(samp_1, add = T, col = 'red', pch = 19)
plot(samp_2, add = T, col = 'blue', pch = 19)

HTH,
Lauren

On Tue, Oct 24, 2017 at 2:57 AM, Andy Bunn <Andy.Bunn at wwu.edu> wrote:
> Hi all, I?ve followed the thread on the updates to raster and would like to acknowledge the wonderful work done by Robert and others in making raster. It is an amazing piece of software. Thanks to all who help people like me do my job using the fruits of your labors!
>
> Anyways, I?m working with some largish rasters and running into a step that is more computationally intensive than I would like. I?m trying to randomly sample a raster within the bounds of a polygon. E.g., in the example below I?d like to apply sampleRandom() on the raster r but constrain the sample to points within the polygons defined by xy.sp.
>
>
>     require(raster)
>
>     xy = cbind(
>       x = c(13.4, 13.4, 13.6, 13.6, 13.4),
>       y = c(48.9, 49, 49, 48.9, 48.9)
>     )
>     hole.xy <- cbind(
>       x = c(13.5, 13.5, 13.45, 13.45, 13.5),
>       y = c(48.98, 48.92, 48.92, 48.98, 48.98)
>     )
>
>     xy.sp <- SpatialPolygons(list(
>       Polygons(list(Polygon(xy),
>                     Polygon(hole.xy, hole = TRUE)), "1"),
>       Polygons(list(Polygon(xy + 0.2),
>                     Polygon(xy + 0.35),
>                     Polygon(hole.xy + 0.2, hole = TRUE)), "2")
>     ))
>
>     r <- raster(nrow=100, ncol=100, ext=extent(xy.sp), resolution=0.01)
>     r[] <- runif(ncell(r))
>
>     plot(xy.sp,col="grey")
>     plot(r,add=T,alpha=0.5)
>
>
>
> I can accomplish this with a mask  via:
>     sampleRandom(mask(r, xy.sp),size = 10)
>
> However, I have many different polygons to apply over a big raster and the mask() is taking a long time. Is there a better way to go about this?
>
> Thanks in advance, A
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From clark.richards at gmail.com  Tue Oct 24 14:29:16 2017
From: clark.richards at gmail.com (clark richards)
Date: Tue, 24 Oct 2017 09:29:16 -0300
Subject: [R-sig-Geo] Plotting GPS Coordinates on a Polar Projection
	Using rgdal
Message-ID: <CAJx09Akd5G_SryX+42SSLDWNvVpKRvqJ2fCckUqEM3+5oAg_Sw@mail.gmail.com>

I would definitely defer to Michael and the other true "Geo" folks on this
list**, but if you're ok with base graphics (and a much less technical
interface) you could accomplish what you want using the `oce` package:

library(oce)
data(coastlineWorld)
circ <- list(longitude=seq(-180, 180), latitude=-rep(60, 361)) # fake
circumnavigation
## use mapPlot to make a polar stereographic plot of antarctica
mapPlot(coastlineWorld, projection="+proj=stere +lat_0=-90",
latitudelim=c(-90, -45), longitudelim = c(-180, 180), col='grey')
## now add the circumnavigation with mapPoints
mapPoints(circ)

Hope that helps!
Clark

**as you can see mapPlot is using proj/gdal interface under the hood, but
being oceanographers and only partially understanding the details of the
transforms, datums, projections, etc, we tried to write an interface that
will allow us to make pretty maps without getting too far into the details.


Message: 4
> Date: Mon, 23 Oct 2017 22:53:22 +0000
> From: "Mortimer, Linsey Anne" <l.mortimer.14 at aberdeen.ac.uk>
> To: Michael Sumner <mdsumner at gmail.com>
> Cc: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
> Subject: Re: [R-sig-Geo] Plotting GPS Coordinates on a Polar
>         Projection Using rgdal
> Message-ID:
>         <VI1PR0101MB23173329C1E17653F09ECC8086460 at VI1PR0101MB2317.
> eurprd01.prod.exchangelabs.com>
>
> Content-Type: text/plain; charset="Windows-1252"
>
> This was a big help, thank you. The coordinates are plotted and look good
> except some of my GPS coordinates are outside of the plot - I should have
> check this beforehand. Is there a way to produce a plot using spbabel
> similar to this:?
>
>
> library(ggplot2)
> world <- map_data("world")
> worldmap <- ggplot(world, aes(x=long, y=lat, group=group)) +
> ? geom_path() +
> ? scale_y_continuous(breaks=(-2:2) * 30) +
> ? scale_x_continuous(breaks=(-4:4) * 45)
> worldmap + coord_map("ortho", orientation=c(-90, 0, 0))
>
>
> or would it be better to simply use ggplot for this?
>
>
> Many thanks,
>
> Linsey
>
>
> From: Michael Sumner <mdsumner at gmail.com>
> Sent: 23 October 2017 21:35
> To: Mortimer, Linsey Anne
> Cc: r-sig-geo at r-project.org
> Subject: Re: [R-sig-Geo] Plotting GPS Coordinates on a Polar Projection
> Using rgdal
> ?
>
>
>
> On Tue, 24 Oct 2017 at 03:42 Mortimer, Linsey Anne <
> l.mortimer.14 at aberdeen.ac.uk> wrote:
>   Hello,
>
> I am new to R and attempting to plot a map of Antarctica with the GPS
> coordinates from a circumpolar navigation of the Southern Ocean. I have
> searched the archives and rgdal-related manuals/blogs/papers to find
> variations of the code below. I have two issues:  firstly, removing the
> vertical line at -90 degrees on the plot of Antarctica. Secondly, adding
> the coordinates to this plot using points(). I have tried transforming the
> coordinates of the points to fit the projection but every time the output
> is a single  point plotted at the end of the vertical line on the
> Antarctica map, a separate plot of points in a world map projection
> (stretched) rather than polar projection, or simply an error about coercing
> an S4 class to a vector. Any advice on how to correct the code  or a point
> in the direction of a guide to this kind of mapping and spatial analysis
> would be of great help.
>
>
>
>
>
>
>
>
> You can remove the dummy seam at the south pole by decomposing to raw
> coordinates and reconstructing with spbabel:?
>
>
>
> data("wrld_simpl", package = "maptools")
> crs <- sp::proj4string(wrld_simpl)
> antarctica0 <- wrld_simpl[wrld_simpl$NAME == "Antarctica", ]
> library(spbabel)
> library(dplyr)
> ant <- spbabel::sptable(antarctica0) %>%?
> ? dplyr::filter(y_ > -90) %>%?
> ? spbabel::sp(crs = crs)
>
>
>
>
>
> pr <- "+proj=laea +lat_0=-90 +ellps=WGS84 +datum=WGS84 +no_defs
> +towgs84=0,0,0"
>
>
>
> antarctica <- sp::spTransform(ant, sp::CRS(pr))
>
>
>
>
> That makes sense when plotted in polar form, but will wrap improperly in
> native longitude/latitude form.?
>
>
> ?  An idea of what my dataset looks like (10774579 obs. of 9 variables):
>
> > head(GPS)
>
> ?..GPS_fix? ? GPS_date? GPS_time GPS_milliseconds? Latitude Longitude
> GPS_status
>
> 1? ? ? ? ? 0? 2016-12-24? 14:26:03? ? ? ? ? ? ? 878 -44.76846? 35.36859? ?
> ? ? ? 2
>
> 2? ? ? ? ? 1? 2016-12-24? 14:26:04? ? ? ? ? ? ? 309 -44.76846? 35.36859? ?
> ? ? ? 2
>
> 3? ? ? ? ? 2? 2016-12-24? 14:26:04? ? ? ? ? ? ? 878 -44.76849? 35.36866? ?
> ? ? ? 1
>
> 4? ? ? ? ? 3? 2016-12-24? 14:26:05? ? ? ? ? ? ? 309 -44.76849? 35.36866? ?
> ? ? ? 2
>
> 5? ? ? ? ? 4? 2016-12-24? 14:26:05? ? ? ? ? ? ? 878 -44.76852? 35.36873? ?
> ? ? ? 1
>
> 6? ? ? ? ? 5? 2016-12-24? 14:26:06? ? ? ? ? ? ? 305 -44.76852? 35.36873? ?
> ? ? ? 2
>
> GPS_filename? ? Distance
>
> 1? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.000000000
>
> 2? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.000000000
>
> 3? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw? ? ? ? ? NA
>
> 4? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.003509715
>
> 5? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw? ? ? ? ? NA
>
> 6? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.007045702
>
>
>
>
> The code I?m using:
>
> > install.packages(c("sp", "raster", ?crs?))
>
> > library(maptools)
>
> > gpclibPermit()
>
> > data(wrld_simpl)
>
> > antarctica <- wrld_simpl[wrld_simpl$NAME == "Antarctica", ]
>
> > library(rgdal)
>
> > pr <- "+proj=laea +lat_0=-90 +ellps=WGS84 +datum=WGS84 +no_defs
> +towgs84=0,0,0" #define projection
>
> > antarctica.laea <- spTransform(antarctica, CRS(pr))
>
> > plot(antarctica.laea)
>
> > ## Now I attempt to make the GPS table into a spatial object and plot
> the coordinates
>
> > attach(GPS)
>
> > coordinates(GPS) <- c("Longitude","Latitude")
>
> > points(Longitude, Latitude, pch=19, col="red", cex=0.5) #This only plots
> a singular point at the end of vertical line on the map
>
>
>
>
>
>
> Here you are mixing old attach() idiom with more modern sp idiom to assign
> the coordinates, it's probably best to not use attach at all.?
>
>
>
>
> coordinates(GPS) <- c("Longitude","Latitude")
>
>
>
> ## despite the name of the coordinates, we don't?
> ## otherwise know the coordinate system in use,?
> ## so assign is here:?
> proj4string(GPS) <- sp::CRS("+init=epsg:4326")
>
>
> ## now we can transform to the projection in use
> gps.ant <- sp::spTransform(GPS, sp::CRS(pr))
> ?
>
>
> You might find the sf package easier to use now, though there are dozens
> of tracking-specific packages with some other improvements. I find
> generally that ggplot2 provides the best overall approach to plotting, but
> it requires specific handling of the  coordinate systems for each data set,
> as done here.?
>
>
> The trip package has some methods to generate SpatialLinesDataFrame (and
> other high level classes), but to do this by removing track-information to
> get to GIS-friendly form. (It's also really painful to use and is in
> desperate need of a user-friendly update.)  There's no real stand out good
> approach for this general problem, so feel free to ask more specifics.?
> There are a huge number of disparate tracking-packages listed on CRAN so
> you might explore them for your needs:?
>
>
> https://cran.r-project.org/web/views/SpatioTemporal.html
>
> (sere under "Moving objects, trajectories")
>
>
> Cheers, Mike.?
>
>
>
>
>
>   > ## Also tried to transform the coordinates but receive an error
>
> >proj4string(GPS) <- CRS("+proj=laea +lat_0=-90 +ellps=WGS84 +datum=WGS84
> +no_defs +towgs84=0,0,0")
>
> > gps.ant <- spTransform(GPS, CRS(antarctica.laea))
>
> Error in CRS(antarctica.laea) :
>
> ? no method for coercing this S4 class to a vector
>
> In addition: Warning message:
>
> In is.na(projargs) :  is.na() applied to non-(list or vector) of type 'S4'
>
> > sessionInfo()
>
> R version 3.4.2 (2017-09-28)
>
> Platform: x86_64-w64-mingw32/x64 (64-bit)
>
> Running under: Windows >= 8 x64 (build 9200)
>
>
>
> Matrix products: default
>
>
>
> locale:
>
> [1] LC_COLLATE=English_United Kingdom.1252? LC_CTYPE=English_United
> Kingdom.1252
>
> [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C
>
> [5] LC_TIME=English_United Kingdom.1252
>
>
>
> attached base packages:
>
> [1] stats? ? ?graphics? grDevices utils? ? ?datasets? methods? ?base
>
>
>
> other attached packages:
>
> [1] maptools_0.9-2 rgdal_1.2-13? ?sp_1.2-5
>
>
>
> loaded via a namespace (and not attached):
>
> [1] compiler_3.4.2? tools_3.4.2? ? ?foreign_0.8-69? grid_3.4.2? ? ?
> lattice_0.20-35
>
>
>
> Many thanks,
>
>
>
> Linsey Mortimer
>
>
>
> ? ? ? ? [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> --
>
>
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> Kingston Tasmania 7050 Australia
>
>
>
>
>

	[[alternative HTML version deleted]]


From mel at mbacou.com  Tue Oct 24 19:34:55 2017
From: mel at mbacou.com (Bacou, Melanie)
Date: Tue, 24 Oct 2017 13:34:55 -0400
Subject: [R-sig-Geo] sampling a raster within a polygon
In-Reply-To: <82F6A4C1-CBF3-4AE7-823B-0718C9F2AC9D@wwu.edu>
References: <82F6A4C1-CBF3-4AE7-823B-0718C9F2AC9D@wwu.edu>
Message-ID: <bd4cfccf-274b-80d7-73a9-49edff43ea25@mbacou.com>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20171024/7dc6da35/attachment.html>

From mel at mbacou.com  Tue Oct 24 19:37:30 2017
From: mel at mbacou.com (Bacou, Melanie)
Date: Tue, 24 Oct 2017 13:37:30 -0400
Subject: [R-sig-Geo] sampling a raster within a polygon
In-Reply-To: <bd4cfccf-274b-80d7-73a9-49edff43ea25@mbacou.com>
References: <82F6A4C1-CBF3-4AE7-823B-0718C9F2AC9D@wwu.edu>
 <bd4cfccf-274b-80d7-73a9-49edff43ea25@mbacou.com>
Message-ID: <6058f18c-4991-a290-f300-dacb69ea2b9d@mbacou.com>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20171024/48a5b7f3/attachment.html>

From marine.regis at hotmail.fr  Thu Oct 26 00:13:37 2017
From: marine.regis at hotmail.fr (Marine Regis)
Date: Wed, 25 Oct 2017 22:13:37 +0000
Subject: [R-sig-Geo] Function "simm.mou" in the package "adehabitatLT": how
 to modify distance between locations ?
Message-ID: <VI1PR07MB3503A7A3067C2C51B66AA64DE2440@VI1PR07MB3503.eurprd07.prod.outlook.com>

Marine Regis a partag? un fichier OneDrive avec vous. Pour l?afficher, cliquez sur le lien ci-dessous.


<https://1drv.ms/u/s!ArMv0o38inhEbHNJplyIZdV715Q>
[https://r1.res.office365.com/owa/prem/images/dc-generic_20.png]<https://1drv.ms/u/s!ArMv0o38inhEbHNJplyIZdV715Q>

Picture1.tif<https://1drv.ms/u/s!ArMv0o38inhEbHNJplyIZdV715Q>




Hello,


I would like to simulate a bivariate Ornstein-Uhlenbeck process in order to represent animal movement in a landscape raster.

To do this, I am testing the function ?simm.mou? in the package ?adehabitatLT?.

>From this function, how can I simulate a bivariate Ornstein-Uhlenbeck process that generates centroid points

with distance between two points equal to 1 or sqrt(2) within the raster extent ?



Here is the code that generates the raster (or landscape) and draws the start point (in red)

set.seed(1)

r <- squareRaster(extent(0, 10, 0, 10), cells=100)

res(r) <- 1

vals <- sample(1:10, 100, replace = TRUE)

r[] <- vals

plot(r)

points(5.5, 5.5, pch = 16, col = "red")



Here is the code that simulates a bivariate Ornstein-Uhlenbeck process using the function ?simm.mou?

v <- simm.mou(1:50, x0=c(5.5, 5.5), b=c(3.5,3.5))

x0 contains the coordinates of the start point and b contains the coordinates of the attraction point.



I attached an image showing animal movement from the start point (5.5, 5.5) to the attraction point (3.5, 3.5). The attraction point is represented in blue.



Any help is welcome.

Thanks in advance.

Best,

Marine


	[[alternative HTML version deleted]]


From marine.regis at hotmail.fr  Thu Oct 26 00:25:11 2017
From: marine.regis at hotmail.fr (Marine Regis)
Date: Wed, 25 Oct 2017 22:25:11 +0000
Subject: [R-sig-Geo] Function "simm.mou" in the package "adehabitatLT":
 how to modify distance between locations ?
In-Reply-To: <VI1PR07MB3503A7A3067C2C51B66AA64DE2440@VI1PR07MB3503.eurprd07.prod.outlook.com>
References: <VI1PR07MB3503A7A3067C2C51B66AA64DE2440@VI1PR07MB3503.eurprd07.prod.outlook.com>
Message-ID: <VI1PR07MB3503D1AC86334334E0ED8113E2440@VI1PR07MB3503.eurprd07.prod.outlook.com>

Sorry, the link seems to be wrong.


Here is the link:


https://1drv.ms/i/s!ArMv0o38inhEbWv5SSHRYu0lgRo


Marine

[https://ts6guw-dm2305.files.1drv.com/y4m2sjMObmyp-pH0Ss-IaT9koUupvLVJSHqEUUGiPjqlxLVrRH3KYSwb1vaO6B5ZZelGqdrfddHsvkl3aZ0lFIKYq1Lx7a87kSaSVeoMfJhElV8K6Vy20mvHkXLjMOm7Bm3UeX_nXQZlNdx0HNr1MEDVfw-kn5RENmxOxl5A9stm8E] <https://1drv.ms/i/s!ArMv0o38inhEbWv5SSHRYu0lgRo>
[https://ts6guw-dm2305.files.1drv.com/y4m2sjMObmyp-pH0Ss-IaT9koUupvLVJSHqEUUGiPjqlxLVrRH3KYSwb1vaO6B5ZZelGqdrfddHsvkl3aZ0lFIKYq1Lx7a87kSaSVeoMfJhElV8K6Vy20mvHkXLjMOm7Bm3UeX_nXQZlNdx0HNr1MEDVfw-kn5RENmxOxl5A9stm8E]




________________________________
De : R-sig-Geo <r-sig-geo-bounces at r-project.org> de la part de Marine Regis <marine.regis at hotmail.fr>
Envoy? : jeudi 26 octobre 2017 00:13
? : r-sig-geo at r-project.org
Objet : [R-sig-Geo] Function "simm.mou" in the package "adehabitatLT": how to modify distance between locations ?

Marine Regis a partag? un fichier OneDrive avec vous. Pour l?afficher, cliquez sur le lien ci-dessous.


<https://1drv.ms/u/s!ArMv0o38inhEbHNJplyIZdV715Q>
[https://r1.res.office365.com/owa/prem/images/dc-generic_20.png]<https://1drv.ms/u/s!ArMv0o38inhEbHNJplyIZdV715Q>

Picture1.tif<https://1drv.ms/u/s!ArMv0o38inhEbHNJplyIZdV715Q>




Hello,


I would like to simulate a bivariate Ornstein-Uhlenbeck process in order to represent animal movement in a landscape raster.

To do this, I am testing the function ?simm.mou? in the package ?adehabitatLT?.

From this function, how can I simulate a bivariate Ornstein-Uhlenbeck process that generates centroid points

with distance between two points equal to 1 or sqrt(2) within the raster extent ?



Here is the code that generates the raster (or landscape) and draws the start point (in red)

set.seed(1)

r <- squareRaster(extent(0, 10, 0, 10), cells=100)

res(r) <- 1

vals <- sample(1:10, 100, replace = TRUE)

r[] <- vals

plot(r)

points(5.5, 5.5, pch = 16, col = "red")



Here is the code that simulates a bivariate Ornstein-Uhlenbeck process using the function ?simm.mou?

v <- simm.mou(1:50, x0=c(5.5, 5.5), b=c(3.5,3.5))

x0 contains the coordinates of the start point and b contains the coordinates of the attraction point.



I attached an image showing animal movement from the start point (5.5, 5.5) to the attraction point (3.5, 3.5). The attraction point is represented in blue.



Any help is welcome.

Thanks in advance.

Best,

Marine


        [[alternative HTML version deleted]]


	[[alternative HTML version deleted]]


From Andy.Bunn at wwu.edu  Thu Oct 26 17:39:43 2017
From: Andy.Bunn at wwu.edu (Andy Bunn)
Date: Thu, 26 Oct 2017 15:39:43 +0000
Subject: [R-sig-Geo] sampling a raster within a polygon
In-Reply-To: <6058f18c-4991-a290-f300-dacb69ea2b9d@mbacou.com>
References: <82F6A4C1-CBF3-4AE7-823B-0718C9F2AC9D@wwu.edu>
 <bd4cfccf-274b-80d7-73a9-49edff43ea25@mbacou.com>
 <6058f18c-4991-a290-f300-dacb69ea2b9d@mbacou.com>
Message-ID: <819C9855-6619-4B37-9533-164CD579D236@wwu.edu>

Thanks Mel and Lauren for your replies. Very helpful indeed.

From: "Bacou, Melanie" <mel at mbacou.com>
Reply-To: "mel at mbacou.com" <mel at mbacou.com>
Date: Tuesday, October 24, 2017 at 10:37 AM
To: Andy Bunn <Andy.Bunn at wwu.edu>, R-sig-Geo <r-sig-geo at r-project.org>
Subject: Re: [R-sig-Geo] sampling a raster within a polygon


Sorry the exact code is:

xy.r <- extract(r, xy.sp)
xy.r.sample <- lapply(xy.r, sample, 10)

On 10/24/2017 01:34 PM, Bacou, Melanie wrote:

Andy,
Simple use `extract()` instead of `mask()`, and then randomly sample cells in each polygon. Should be much faster, e.g.:

xy.r <- extract(r, xy.sp)
xy.r.sample <- lapply(xy.r, sample.int, n=10)
--Mel.
On 10/23/2017 12:57 PM, Andy Bunn wrote:

Hi all, I?ve followed the thread on the updates to raster and would like to acknowledge the wonderful work done by Robert and others in making raster. It is an amazing piece of software. Thanks to all who help people like me do my job using the fruits of your labors!



Anyways, I?m working with some largish rasters and running into a step that is more computationally intensive than I would like. I?m trying to randomly sample a raster within the bounds of a polygon. E.g., in the example below I?d like to apply sampleRandom() on the raster r but constrain the sample to points within the polygons defined by xy.sp.





    require(raster)



    xy = cbind(

      x = c(13.4, 13.4, 13.6, 13.6, 13.4),

      y = c(48.9, 49, 49, 48.9, 48.9)

    )

    hole.xy <- cbind(

      x = c(13.5, 13.5, 13.45, 13.45, 13.5),

      y = c(48.98, 48.92, 48.92, 48.98, 48.98)

    )



    xy.sp <- SpatialPolygons(list(

      Polygons(list(Polygon(xy),

                    Polygon(hole.xy, hole = TRUE)), "1"),

      Polygons(list(Polygon(xy + 0.2),

                    Polygon(xy + 0.35),

                    Polygon(hole.xy + 0.2, hole = TRUE)), "2")

    ))



    r <- raster(nrow=100, ncol=100, ext=extent(xy.sp), resolution=0.01)

    r[] <- runif(ncell(r))



    plot(xy.sp,col="grey")

    plot(r,add=T,alpha=0.5)







I can accomplish this with a mask  via:

    sampleRandom(mask(r, xy.sp),size = 10)



However, I have many different polygons to apply over a big raster and the mask() is taking a long time. Is there a better way to go about this?



Thanks in advance, A





_______________________________________________

R-sig-Geo mailing list

R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>

https://stat.ethz.ch/mailman/listinfo/r-sig-geo




	[[alternative HTML version deleted]]


From mdsumner at gmail.com  Sat Oct 28 02:31:18 2017
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 28 Oct 2017 00:31:18 +0000
Subject: [R-sig-Geo] Plotting GPS Coordinates on a Polar Projection
	Using rgdal
In-Reply-To: <CAJx09Akd5G_SryX+42SSLDWNvVpKRvqJ2fCckUqEM3+5oAg_Sw@mail.gmail.com>
References: <CAJx09Akd5G_SryX+42SSLDWNvVpKRvqJ2fCckUqEM3+5oAg_Sw@mail.gmail.com>
Message-ID: <CAAcGz99DRDeZon6cok8Pj8FirDnK9jLhtZ77M1EmY6GDeuJ0Jw@mail.gmail.com>

(thanks Clark! oce is excellent)

On Tue, 24 Oct 2017, 23:29 clark richards, <clark.richards at gmail.com> wrote:

> I would definitely defer to Michael and the other true "Geo" folks on this
> list**, but if you're ok with base graphics (and a much less technical
> interface) you could accomplish what you want using the `oce` package:
>
> library(oce)
> data(coastlineWorld)
> circ <- list(longitude=seq(-180, 180), latitude=-rep(60, 361)) # fake
> circumnavigation
> ## use mapPlot to make a polar stereographic plot of antarctica
> mapPlot(coastlineWorld, projection="+proj=stere +lat_0=-90",
> latitudelim=c(-90, -45), longitudelim = c(-180, 180), col='grey')
> ## now add the circumnavigation with mapPoints
> mapPoints(circ)
>
> Hope that helps!
> Clark
>
> **as you can see mapPlot is using proj/gdal interface under the hood, but
> being oceanographers and only partially understanding the details of the
> transforms, datums, projections, etc, we tried to write an interface that
> will allow us to make pretty maps without getting too far into the details.
>
>
> Message: 4
>> Date: Mon, 23 Oct 2017 22:53:22 +0000
>> From: "Mortimer, Linsey Anne" <l.mortimer.14 at aberdeen.ac.uk>
>> To: Michael Sumner <mdsumner at gmail.com>
>> Cc: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
>
>
>> Subject: Re: [R-sig-Geo] Plotting GPS Coordinates on a Polar
>>         Projection Using rgdal
>>
> Message-ID:
>>         <
>> VI1PR0101MB23173329C1E17653F09ECC8086460 at VI1PR0101MB2317.eurprd01.prod.exchangelabs.com
>> >
>>
>> Content-Type: text/plain; charset="Windows-1252"
>>
>> This was a big help, thank you. The coordinates are plotted and look good
>> except some of my GPS coordinates are outside of the plot - I should have
>> check this beforehand. Is there a way to produce a plot using spbabel
>> similar to this:?
>
>
>>
>>
>> library(ggplot2)
>> world <- map_data("world")
>> worldmap <- ggplot(world, aes(x=long, y=lat, group=group)) +
>>
> ? geom_path() +
>> ? scale_y_continuous(breaks=(-2:2) * 30) +
>> ? scale_x_continuous(breaks=(-4:4) * 45)
>
>
>> worldmap + coord_map("ortho", orientation=c(-90, 0, 0))
>>
>>
>> or would it be better to simply use ggplot for this?
>>
>>
>> Many thanks,
>>
>> Linsey
>>
>>
>> From: Michael Sumner <mdsumner at gmail.com>
>> Sent: 23 October 2017 21:35
>> To: Mortimer, Linsey Anne
>> Cc: r-sig-geo at r-project.org
>> Subject: Re: [R-sig-Geo] Plotting GPS Coordinates on a Polar Projection
>> Using rgdal
>>
> ?
>
>
>>
>>
>>
>> On Tue, 24 Oct 2017 at 03:42 Mortimer, Linsey Anne <
>> l.mortimer.14 at aberdeen.ac.uk> wrote:
>>   Hello,
>>
>> I am new to R and attempting to plot a map of Antarctica with the GPS
>> coordinates from a circumpolar navigation of the Southern Ocean. I have
>> searched the archives and rgdal-related manuals/blogs/papers to find
>> variations of the code below. I have two issues:  firstly, removing the
>> vertical line at -90 degrees on the plot of Antarctica. Secondly, adding
>> the coordinates to this plot using points(). I have tried transforming the
>> coordinates of the points to fit the projection but every time the output
>> is a single  point plotted at the end of the vertical line on the
>> Antarctica map, a separate plot of points in a world map projection
>> (stretched) rather than polar projection, or simply an error about coercing
>> an S4 class to a vector. Any advice on how to correct the code  or a point
>> in the direction of a guide to this kind of mapping and spatial analysis
>> would be of great help.
>>
>>
>>
>>
>>
>>
>>
>>
>> You can remove the dummy seam at the south pole by decomposing to raw
>> coordinates and reconstructing with spbabel:?
>
>
>>
>>
>>
>> data("wrld_simpl", package = "maptools")
>> crs <- sp::proj4string(wrld_simpl)
>> antarctica0 <- wrld_simpl[wrld_simpl$NAME == "Antarctica", ]
>> library(spbabel)
>> library(dplyr)
>>
> ant <- spbabel::sptable(antarctica0) %>%?
>> ? dplyr::filter(y_ > -90) %>%?
>> ? spbabel::sp(crs = crs)
>
>
>>
>>
>>
>>
>>
>> pr <- "+proj=laea +lat_0=-90 +ellps=WGS84 +datum=WGS84 +no_defs
>> +towgs84=0,0,0"
>>
>>
>>
>> antarctica <- sp::spTransform(ant, sp::CRS(pr))
>>
>>
>>
>>
>> That makes sense when plotted in polar form, but will wrap improperly in
>> native longitude/latitude form.?
>>
>>
>> ?  An idea of what my dataset looks like (10774579 obs. of 9 variables):
>>
>> > head(GPS)
>>
>> ?..GPS_fix? ? GPS_date? GPS_time GPS_milliseconds? Latitude Longitude
>> GPS_status
>>
>> 1? ? ? ? ? 0? 2016-12-24? 14:26:03? ? ? ? ? ? ? 878 -44.76846? 35.36859?
>> ? ? ? ? 2
>>
>> 2? ? ? ? ? 1? 2016-12-24? 14:26:04? ? ? ? ? ? ? 309 -44.76846? 35.36859?
>> ? ? ? ? 2
>>
>> 3? ? ? ? ? 2? 2016-12-24? 14:26:04? ? ? ? ? ? ? 878 -44.76849? 35.36866?
>> ? ? ? ? 1
>>
>> 4? ? ? ? ? 3? 2016-12-24? 14:26:05? ? ? ? ? ? ? 309 -44.76849? 35.36866?
>> ? ? ? ? 2
>>
>> 5? ? ? ? ? 4? 2016-12-24? 14:26:05? ? ? ? ? ? ? 878 -44.76852? 35.36873?
>> ? ? ? ? 1
>>
>> 6? ? ? ? ? 5? 2016-12-24? 14:26:06? ? ? ? ? ? ? 305 -44.76852? 35.36873?
>> ? ? ? ? 2
>>
>> GPS_filename? ? Distance
>>
>> 1? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.000000000
>>
>> 2? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.000000000
>>
>> 3? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw? ? ? ? ? NA
>>
>> 4? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.003509715
>>
>> 5? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw? ? ? ? ? NA
>>
>> 6? D:\\Leg1\\0 CT to Marion\\12500\\ACE-D20161224-T142556.raw 0.007045702
>>
>>
>>
>>
>> The code I?m using:
>>
>> > install.packages(c("sp", "raster", ?crs?))
>
>
>>
>> > library(maptools)
>>
>> > gpclibPermit()
>>
>> > data(wrld_simpl)
>>
>> > antarctica <- wrld_simpl[wrld_simpl$NAME == "Antarctica", ]
>>
>> > library(rgdal)
>>
>> > pr <- "+proj=laea +lat_0=-90 +ellps=WGS84 +datum=WGS84 +no_defs
>> +towgs84=0,0,0" #define projection
>>
>> > antarctica.laea <- spTransform(antarctica, CRS(pr))
>>
>> > plot(antarctica.laea)
>>
>> > ## Now I attempt to make the GPS table into a spatial object and plot
>> the coordinates
>>
>> > attach(GPS)
>>
>> > coordinates(GPS) <- c("Longitude","Latitude")
>>
>> > points(Longitude, Latitude, pch=19, col="red", cex=0.5) #This only
>> plots a singular point at the end of vertical line on the map
>>
>>
>>
>>
>>
>>
>> Here you are mixing old attach() idiom with more modern sp idiom to
>> assign the coordinates, it's probably best to not use attach at all.?
>
>
>>
>>
>>
>>
>> coordinates(GPS) <- c("Longitude","Latitude")
>>
>>
>>
>> ## despite the name of the coordinates, we don't?
>> ## otherwise know the coordinate system in use,?
>> ## so assign is here:?
>
>
>> proj4string(GPS) <- sp::CRS("+init=epsg:4326")
>>
>>
>> ## now we can transform to the projection in use
>> gps.ant <- sp::spTransform(GPS, sp::CRS(pr))
>>
> ?
>>
>>
>> You might find the sf package easier to use now, though there are dozens
>> of tracking-specific packages with some other improvements. I find
>> generally that ggplot2 provides the best overall approach to plotting, but
>> it requires specific handling of the  coordinate systems for each data set,
>> as done here.?
>>
>>
>> The trip package has some methods to generate SpatialLinesDataFrame (and
>> other high level classes), but to do this by removing track-information to
>> get to GIS-friendly form. (It's also really painful to use and is in
>> desperate need of a user-friendly update.)  There's no real stand out good
>> approach for this general problem, so feel free to ask more specifics.?
>> There are a huge number of disparate tracking-packages listed on CRAN so
>> you might explore them for your needs:?
>
>
>>
>>
>> https://cran.r-project.org/web/views/SpatioTemporal.html
>>
>> (sere under "Moving objects, trajectories")
>>
>>
>> Cheers, Mike.?
>
>
>>
>>
>>
>>
>>
>>   > ## Also tried to transform the coordinates but receive an error
>>
>> >proj4string(GPS) <- CRS("+proj=laea +lat_0=-90 +ellps=WGS84 +datum=WGS84
>> +no_defs +towgs84=0,0,0")
>>
>> > gps.ant <- spTransform(GPS, CRS(antarctica.laea))
>>
>> Error in CRS(antarctica.laea) :
>>
>> ? no method for coercing this S4 class to a vector
>
>
>>
>> In addition: Warning message:
>>
>> In is.na(projargs) :  is.na() applied to non-(list or vector) of type
>> 'S4'
>>
>> > sessionInfo()
>>
>> R version 3.4.2 (2017-09-28)
>>
>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>>
>> Running under: Windows >= 8 x64 (build 9200)
>>
>>
>>
>> Matrix products: default
>>
>>
>>
>> locale:
>>
>> [1] LC_COLLATE=English_United Kingdom.1252? LC_CTYPE=English_United
>> Kingdom.1252
>
>
>>
>> [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C
>>
>> [5] LC_TIME=English_United Kingdom.1252
>>
>>
>>
>> attached base packages:
>>
>> [1] stats? ? ?graphics? grDevices utils? ? ?datasets? methods? ?base
>>
>>
>>
>> other attached packages:
>>
>> [1] maptools_0.9-2 rgdal_1.2-13? ?sp_1.2-5
>
>
>>
>>
>>
>> loaded via a namespace (and not attached):
>>
>> [1] compiler_3.4.2? tools_3.4.2? ? ?foreign_0.8-69? grid_3.4.2? ? ?
>> lattice_0.20-35
>>
>>
>>
>> Many thanks,
>>
>>
>>
>> Linsey Mortimer
>>
>>
>>
>> ? ? ? ? [[alternative HTML version deleted]]
>
>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> --
>>
>>
>> Dr. Michael Sumner
>> Software and Database Engineer
>> Australian Antarctic Division
>> 203 Channel Highway
>> <https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
>> Kingston Tasmania 7050 Australia
>> <https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
>>
>>
>>
>>
>> --
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From mahsasameti1384 at gmail.com  Sun Oct 29 04:04:53 2017
From: mahsasameti1384 at gmail.com (Mahsa Sameti)
Date: Sun, 29 Oct 2017 06:34:53 +0330
Subject: [R-sig-Geo] Spatio temporal anisotropy
Message-ID: <CADN=v_wZ6YtPsLstuD-it_0CqCXpYRGb__QjxNzLw+r7NXUCdg@mail.gmail.com>

Dear list
I'm working on monthly spatio-temporal data. After running emperical
spatiotemporal variogram and fitting purely spatial and temporal
variograms, i wanted to compute spatio-temporal anisotropy. When i run the
function estiStAni(empVgm,interval=spVgmMod$range), this Error will be
appear :
Error: variable 'dist' was fitted with type "numeric" but type "other" was
supplied

I do not know what is the problem.

Thanks alot for any help.

	[[alternative HTML version deleted]]


From zergioibarra at gmail.com  Sun Oct 29 21:55:27 2017
From: zergioibarra at gmail.com (Sergio Ibarra)
Date: Sun, 29 Oct 2017 20:55:27 +0000
Subject: [R-sig-Geo] split lines at vertices with sf
Message-ID: <CABsRJgZN9a9KeBYFqpohTTiaOnpb4cmvirvSxgRg5E69jhCvWA@mail.gmail.com>

Dear list members,

How to split lines at vertices with sf?

Best,

[image: photo]
*Sergio Ibarra Espinosa*
MSc Environment, PhD Meteorology, Departamento de Ci?ncias Atmosf?ricas,
Universidade de S?o Paulo
+ 55 11 3091-4731 | +55 11 974 253 791 | sergio.ibarra at usp.br |
www.sergioibarra.blogspot.com | Skype: sergio_ibarra1 <#> | Rua do Mat?o,
1226 - Cidade Universit?ria S?o Paulo-SP - Brasil - 05508-090
<http://github.com/ibarraespinosa> <http://us.linkedin.com/in/sibarra>
<http://wiseintro.co/sergioibarra> <http://blogger.com/profile/sergioibarra>
Get your own email signature
<https://wisestamp.com/email-install?utm_source=promotion&utm_medium=signature&utm_campaign=get_your_own>
-- 
?Sergio Ibarra Espinosa
Doutorando em Meteorologia
Instituto de Astronomia, Geof?sica e Ci?ncias Atmosf?ricas
Universidade de S?o Paulo
Rua do Mat?o, 1226
Cidade Universit?ria
S?o Paulo-SP - Brasil -
05508-090
+55-11-3091-2833
+55-11-97425-3791
Skype: sergio_ibarra1
Blog: www.sergioibarra.blogspot.com


[image: photo]
*Sergio Ibarra Espinosa*
MSc, Departamento de Ci?ncias Atmosf?ricas, Universidade de S?o Paulo
+ 55 11 3091-4731 <+%2055%2011%203091-4731> | +55 11 974 253 791
<+55%2011%20974%20253%20791> | sergio.ibarra at iag.usp.br |
www.sergioibarra.blogspot.com | Skype: sergio_ibarra1 <#> | Rua do Mat?o,
1226 - Cidade Universit?ria S?o Paulo-SP - Brasil - 05508-090
<http://us.linkedin.com/in/sibarra>  <http://twitter.com/sergio_ibarra>
<http://plus.google.com/+SergioIbarraEspinosa>  <http://github.com/xhie>
<http://wiseintro.co/sergioibarra>
Get a signature like this: Click here!
<http://ws-promos.appspot.com/r?rdata=eyJydXJsIjogImh0dHA6Ly93d3cud2lzZXN0YW1wLmNvbS9lbWFpbC1pbnN0YWxsP3dzX25jaWQ9NjcyMjk0MDA4JnV0bV9zb3VyY2U9ZXh0ZW5zaW9uJnV0bV9tZWRpdW09ZW1haWwmdXRtX2NhbXBhaWduPXByb21vXzU3MzI1Njg1NDg3Njk3OTIiLCAiZSI6ICI1NzMyNTY4NTQ4NzY5NzkyIn0=&u=651454521820988>

	[[alternative HTML version deleted]]


From r.turner at auckland.ac.nz  Sun Oct 29 22:20:26 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Mon, 30 Oct 2017 10:20:26 +1300
Subject: [R-sig-Geo] [FORGED]  split lines at vertices with sf
In-Reply-To: <CABsRJgZN9a9KeBYFqpohTTiaOnpb4cmvirvSxgRg5E69jhCvWA@mail.gmail.com>
References: <CABsRJgZN9a9KeBYFqpohTTiaOnpb4cmvirvSxgRg5E69jhCvWA@mail.gmail.com>
Message-ID: <b5574c32-5c04-34b2-80d9-fe6685f932f6@auckland.ac.nz>


On 30/10/17 09:55, Sergio Ibarra wrote:

> Dear list members,
> 
> How to split lines at vertices with sf?

Huh?

I know they say brevity is the soul of wit, but I think that this 
posting carries that idea a bit too far.

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From macqueen1 at llnl.gov  Mon Oct 30 15:38:32 2017
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Mon, 30 Oct 2017 14:38:32 +0000
Subject: [R-sig-Geo] Change in projection results relative to 3 years ago
Message-ID: <73E1685C-20F0-4045-9113-9CABE488D640@contoso.com>

Three years ago Roger and Hermann Peifer graciously helped me solve a projection issue in R. Something has since changed; results are different now.

I'd once again appreciate assistance... and am more or less hoping that someone will have some idea about what has changed, hence what I can do to return to my previously blissful state.

Thanks in advance,
-Don



My original request is here
   https://stat.ethz.ch/pipermail/r-sig-geo/2014-August/021611.html
and Roger's solution is here
   https://stat.ethz.ch/pipermail/r-sig-geo/2014-August/021623.html
(actually, they did more than help, the pretty much did all the work!)


I recently discovered the coordinates produced by that solution are now
roughly 100m different from what they were then.
(I've done quite a bit of checking to make sure I'm not making some
dumb mistake, and feel confident I haven't. Hopefully I'm right!)

A small set of example locations is transformed from long/lat to a local coordinate system using
  (A) a reference method deemed correct
  (B) an R method using sp::spTransform()
The goal was to have B reproduce A. Three years ago, it did. Now it does not.

(The accuracy of method A is not the issue. It uses standard methods implemented in ESRI software.)

The reproducible example below (same one as 3 years ago) does not use the full version of method B, but it does illustrate how something has changed.


##
## reproducible example begins
##

## define two example points in WGS84 long/lat (same as 3 years ago)
locs.xy <- cbind(
  c(-121.524764291826,-121.523480804667),
  c(37.6600366036405,37.6543604613483)
)

locs.ll <- SpatialPoints(locs.xy, proj4string=CRS("+proj=longlat +datum=WGS84") )


## Outside of R, reference method A converts from long/lat
## to a local system, EPSG 26743, which is:
##   California State Plane Zone III, NAD27, feet;
##   http://spatialreference.org/ref/epsg/26743/
## using an ESRI "two-step process" (some detail at the end),
## saved as a shapefile, loaded into R using readOGR().

## Here is the "dput" of those coordinates from three years ago (the example location transformed by method A)
locs.ref <- new(
  "SpatialPoints",
  coords = structure(c(1703671.30566227, 1704020.20113366,
                       424014.398045834, 421943.708664294),
                     .Dim = c(2L, 2L),
                     .Dimnames = list(NULL, c("coords.x1", "coords.x2")))
, bbox = structure(
    c(1703671.30566227, 421943.708664294,
      1704020.20113366, 424014.398045834),
    .Dim = c(2L, 2L),
    .Dimnames = list(c("coords.x1",  "coords.x2"), c("min", "max")))
, proj4string =
    new("CRS",
        projargs = "+proj=lcc +lat_1=37.06666666666667 +lat_2=38.43333333333333 +lat_0=36.5 +lon_0=-120.5 +x_0=609601.2192024384 +y_0=0 +datum=NAD27 +units=us-ft +no_defs +ellps=clrk66 +nadgrids=@conus, at alaska, at ntv2_0.gsb, at ntv1_can.dat"
        )
)

## locs.ref and locs.ll are created as above, the same as they were 3 years ago
## (same reproducible example data as then)

## use spTransform to go from WGS84 directly to the local system
## using spTransform()
locs.26743 <- spTransform(locs.ll, CRS("+init=epsg:26743"))

## distances relative to the reference transformation in August 2014
coordinates(locs.ref)-coordinates(locs.26743)
##      coords.x1 coords.x2
## [1,]  3.746539 -1.876668
## [2,]  3.746607 -1.876466

## distances relative to the reference transformation now
coordinates(locs.ref)-coordinates(locs.26743)
##      coords.x1 coords.x2
## [1,]  309.9325  20.05890
## [2,]  309.9136  20.03086

##
## a transformation that formerly was within a few feet of the example location is now some 300 feet away
##



## the ESRI "two step" starts with the lon/lat,
## Step 1 converts transforms them using what ESRI calls
##     NAD_1983_To_WGS_1984_5       (wkid 1515)
## Step 2 transforms the resulting coordinates using
##     NAD_1927_To_NAD1983_NADCON   (wkid 1241)


--------  Session info now:

library(rgdal)
Loading required package: rgdal
Loading required package: sp
rgdal: version: 1.2-13, (SVN revision 686)
Geospatial Data Abstraction Library extensions to R successfully loaded
Loaded GDAL runtime: GDAL 2.1.3, released 2017/20/01
Path to GDAL shared files: /Users/macqueen1/Library/R/3.4/library/rgdal/gdal
Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493]
Path to PROJ.4 shared files: /Users/macqueen1/Library/R/3.4/library/rgdal/proj
Linking to sp version: 1.2-5

sessionInfo()
R version 3.4.2 (2017-09-28)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: OS X El Capitan 10.11.6

Matrix products: default
BLAS: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRblas.0.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib

locale:
[1] C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base    

other attached packages:
[1] openxlsx_4.0.17 Rkml_1.6-5      mymaps_1.4-2    rmacq_1.3-5     rgdal_1.2-13    sp_1.2-5      

loaded via a namespace (and not attached):
[1] compiler_3.4.2  tools_3.4.2     Rcpp_0.12.13    grid_3.4.2      lattice_0.20-35


------ Session info then:
sessionInfo()
R version 3.1.1 (2014-07-10)
Platform: x86_64-apple-darwin13.1.0 (64-bit)

locale:
[1] C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base    

other attached packages:
[1] sp_1.0-15       rgdal_0.8-16    maptools_0.8-30 xlsx_0.5.5    
[5] xlsxjars_0.6.0  rJava_0.9-6     rmacq_1.3-1    

loaded via a namespace (and not attached):
[1] foreign_0.8-61  grid_3.1.1      lattice_0.20-29 tools_3.1.1    

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509



--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 


From Roger.Bivand at nhh.no  Mon Oct 30 15:54:44 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 30 Oct 2017 15:54:44 +0100
Subject: [R-sig-Geo] Change in projection results relative to 3 years ago
In-Reply-To: <73E1685C-20F0-4045-9113-9CABE488D640@contoso.com>
References: <73E1685C-20F0-4045-9113-9CABE488D640@contoso.com>
Message-ID: <alpine.LFD.2.21.1710301551180.2883@reclus.nhh.no>

On Mon, 30 Oct 2017, MacQueen, Don wrote:

> Three years ago Roger and Hermann Peifer graciously helped me solve a projection issue in R. Something has since changed; results are different now.
>
> I'd once again appreciate assistance... and am more or less hoping that someone will have some idea about what has changed, hence what I can do to return to my previously blissful state.
>
> Thanks in advance,
> -Don
>

Briefly, please check the current contents of:

list.files("/Users/macqueen1/Library/R/3.4/library/rgdal/proj")

I get:

> locs.26743 <- spTransform(locs.ll, CRS("+init=epsg:26743"))
> coordinates(locs.ref)-coordinates(locs.26743)
      coords.x1 coords.x2
[1,]  3.746539 -1.876668
[2,]  3.746607 -1.876466

with

> library(rgdal)
Loading required package: sp
rgdal: version: 1.2-15, (SVN revision 691)
  Geospatial Data Abstraction Library extensions to R successfully loaded
  Loaded GDAL runtime: GDAL 2.2.2, released 2017/09/15
  Path to GDAL shared files: /usr/local/share/gdal
  GDAL binary built with GEOS: TRUE
  Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493]
  Path to PROJ.4 shared files: (autodetected)
  Linking to sp version: 1.2-5

(1.2-15 is the development version, but nothing changed in this respect 
vis. 1.2-13)

and

> list.files("/usr/local/share/proj")
  [1] "alaska"             "CH"                 "conus"
  [4] "epsg"               "esri"               "esri.extra"
  [7] "FL"                 "GL27"               "hawaii"
[10] "IGNF"               "MD"                 "nad.lst"
[13] "nad27"              "nad83"              "ntf_r93.gsb"
[16] "ntv1_can.dat"       "null"               "nzgd2kgrid0005.gsb"
[19] "other.extra"        "proj_def.dat"       "prvi"
[22] "stgeorge"           "stlrnc"             "stpaul"
[25] "TN"                 "WI"                 "WO"
[28] "world"

Maybe you are being thrown back just to the ellipsoid if the NAD grids are 
absent?

Hope this helps,

Roger

>
>
> My original request is here
>   https://stat.ethz.ch/pipermail/r-sig-geo/2014-August/021611.html
> and Roger's solution is here
>   https://stat.ethz.ch/pipermail/r-sig-geo/2014-August/021623.html
> (actually, they did more than help, the pretty much did all the work!)
>
>
> I recently discovered the coordinates produced by that solution are now
> roughly 100m different from what they were then.
> (I've done quite a bit of checking to make sure I'm not making some
> dumb mistake, and feel confident I haven't. Hopefully I'm right!)
>
> A small set of example locations is transformed from long/lat to a local coordinate system using
>  (A) a reference method deemed correct
>  (B) an R method using sp::spTransform()
> The goal was to have B reproduce A. Three years ago, it did. Now it does not.
>
> (The accuracy of method A is not the issue. It uses standard methods implemented in ESRI software.)
>
> The reproducible example below (same one as 3 years ago) does not use the full version of method B, but it does illustrate how something has changed.
>
>
> ##
> ## reproducible example begins
> ##
>
> ## define two example points in WGS84 long/lat (same as 3 years ago)
> locs.xy <- cbind(
>  c(-121.524764291826,-121.523480804667),
>  c(37.6600366036405,37.6543604613483)
> )
>
> locs.ll <- SpatialPoints(locs.xy, proj4string=CRS("+proj=longlat +datum=WGS84") )
>
>
> ## Outside of R, reference method A converts from long/lat
> ## to a local system, EPSG 26743, which is:
> ##   California State Plane Zone III, NAD27, feet;
> ##   http://spatialreference.org/ref/epsg/26743/
> ## using an ESRI "two-step process" (some detail at the end),
> ## saved as a shapefile, loaded into R using readOGR().
>
> ## Here is the "dput" of those coordinates from three years ago (the example location transformed by method A)
> locs.ref <- new(
>  "SpatialPoints",
>  coords = structure(c(1703671.30566227, 1704020.20113366,
>                       424014.398045834, 421943.708664294),
>                     .Dim = c(2L, 2L),
>                     .Dimnames = list(NULL, c("coords.x1", "coords.x2")))
> , bbox = structure(
>    c(1703671.30566227, 421943.708664294,
>      1704020.20113366, 424014.398045834),
>    .Dim = c(2L, 2L),
>    .Dimnames = list(c("coords.x1",  "coords.x2"), c("min", "max")))
> , proj4string =
>    new("CRS",
>        projargs = "+proj=lcc +lat_1=37.06666666666667 +lat_2=38.43333333333333 +lat_0=36.5 +lon_0=-120.5 +x_0=609601.2192024384 +y_0=0 +datum=NAD27 +units=us-ft +no_defs +ellps=clrk66 +nadgrids=@conus, at alaska, at ntv2_0.gsb, at ntv1_can.dat"
>        )
> )
>
> ## locs.ref and locs.ll are created as above, the same as they were 3 years ago
> ## (same reproducible example data as then)
>
> ## use spTransform to go from WGS84 directly to the local system
> ## using spTransform()
> locs.26743 <- spTransform(locs.ll, CRS("+init=epsg:26743"))
>
> ## distances relative to the reference transformation in August 2014
> coordinates(locs.ref)-coordinates(locs.26743)
> ##      coords.x1 coords.x2
> ## [1,]  3.746539 -1.876668
> ## [2,]  3.746607 -1.876466
>
> ## distances relative to the reference transformation now
> coordinates(locs.ref)-coordinates(locs.26743)
> ##      coords.x1 coords.x2
> ## [1,]  309.9325  20.05890
> ## [2,]  309.9136  20.03086
>
> ##
> ## a transformation that formerly was within a few feet of the example location is now some 300 feet away
> ##
>
>
>
> ## the ESRI "two step" starts with the lon/lat,
> ## Step 1 converts transforms them using what ESRI calls
> ##     NAD_1983_To_WGS_1984_5       (wkid 1515)
> ## Step 2 transforms the resulting coordinates using
> ##     NAD_1927_To_NAD1983_NADCON   (wkid 1241)
>
>
> --------  Session info now:
>
> library(rgdal)
> Loading required package: rgdal
> Loading required package: sp
> rgdal: version: 1.2-13, (SVN revision 686)
> Geospatial Data Abstraction Library extensions to R successfully loaded
> Loaded GDAL runtime: GDAL 2.1.3, released 2017/20/01
> Path to GDAL shared files: /Users/macqueen1/Library/R/3.4/library/rgdal/gdal
> Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493]
> Path to PROJ.4 shared files: /Users/macqueen1/Library/R/3.4/library/rgdal/proj
> Linking to sp version: 1.2-5
>
> sessionInfo()
> R version 3.4.2 (2017-09-28)
> Platform: x86_64-apple-darwin15.6.0 (64-bit)
> Running under: OS X El Capitan 10.11.6
>
> Matrix products: default
> BLAS: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRblas.0.dylib
> LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib
>
> locale:
> [1] C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] openxlsx_4.0.17 Rkml_1.6-5      mymaps_1.4-2    rmacq_1.3-5     rgdal_1.2-13    sp_1.2-5
>
> loaded via a namespace (and not attached):
> [1] compiler_3.4.2  tools_3.4.2     Rcpp_0.12.13    grid_3.4.2      lattice_0.20-35
>
>
> ------ Session info then:
> sessionInfo()
> R version 3.1.1 (2014-07-10)
> Platform: x86_64-apple-darwin13.1.0 (64-bit)
>
> locale:
> [1] C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] sp_1.0-15       rgdal_0.8-16    maptools_0.8-30 xlsx_0.5.5
> [5] xlsxjars_0.6.0  rJava_0.9-6     rmacq_1.3-1
>
> loaded via a namespace (and not attached):
> [1] foreign_0.8-61  grid_3.1.1      lattice_0.20-29 tools_3.1.1
>
> --
> Don MacQueen
> Lawrence Livermore National Laboratory
> 7000 East Ave., L-627
> Livermore, CA 94550
> 925-423-1062
> Lab cell 925-724-7509
>
>
>
> --
> Don MacQueen
> Lawrence Livermore National Laboratory
> 7000 East Ave., L-627
> Livermore, CA 94550
> 925-423-1062
> Lab cell 925-724-7509
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From macqueen1 at llnl.gov  Mon Oct 30 16:21:30 2017
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Mon, 30 Oct 2017 15:21:30 +0000
Subject: [R-sig-Geo] Change in projection results relative to 3 years ago
In-Reply-To: <alpine.LFD.2.21.1710301551180.2883@reclus.nhh.no>
References: <73E1685C-20F0-4045-9113-9CABE488D640@contoso.com>
 <alpine.LFD.2.21.1710301551180.2883@reclus.nhh.no>
Message-ID: <C2BC20AF-B07D-4750-97B3-5DDE2A7DF677@llnl.gov>

I get

> list.files("/Users/macqueen1/Library/R/3.4/library/rgdal/proj")
 [1] "CH"           "GL27"         "IGNF"         "epsg"         "esri"        
 [6] "esri.extra"   "nad.lst"      "nad27"        "nad83"        "other.extra" 
[11] "proj_def.dat" "world"       

Considerably different indeed, and conus in particular is missing.

I have a somewhat vague memory of some r-sig-geo traffic some months ago that might be relevant.

Thanks
-Don 

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

On 10/30/17, 7:55 AM, "Roger Bivand" <Roger.Bivand at nhh.no> wrote:

    On Mon, 30 Oct 2017, MacQueen, Don wrote:
    
    > Three years ago Roger and Hermann Peifer graciously helped me solve a projection issue in R. Something has since changed; results are different now.
    >
    > I'd once again appreciate assistance... and am more or less hoping that someone will have some idea about what has changed, hence what I can do to return to my previously blissful state.
    >
    > Thanks in advance,
    > -Don
    >
    
    Briefly, please check the current contents of:
    
    list.files("/Users/macqueen1/Library/R/3.4/library/rgdal/proj")
    
    I get:
    
    > locs.26743 <- spTransform(locs.ll, CRS("+init=epsg:26743"))
    > coordinates(locs.ref)-coordinates(locs.26743)
          coords.x1 coords.x2
    [1,]  3.746539 -1.876668
    [2,]  3.746607 -1.876466
    
    with
    
    > library(rgdal)
    Loading required package: sp
    rgdal: version: 1.2-15, (SVN revision 691)
      Geospatial Data Abstraction Library extensions to R successfully loaded
      Loaded GDAL runtime: GDAL 2.2.2, released 2017/09/15
      Path to GDAL shared files: /usr/local/share/gdal
      GDAL binary built with GEOS: TRUE
      Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493]
      Path to PROJ.4 shared files: (autodetected)
      Linking to sp version: 1.2-5
    
    (1.2-15 is the development version, but nothing changed in this respect 
    vis. 1.2-13)
    
    and
    
    > list.files("/usr/local/share/proj")
      [1] "alaska"             "CH"                 "conus"
      [4] "epsg"               "esri"               "esri.extra"
      [7] "FL"                 "GL27"               "hawaii"
    [10] "IGNF"               "MD"                 "nad.lst"
    [13] "nad27"              "nad83"              "ntf_r93.gsb"
    [16] "ntv1_can.dat"       "null"               "nzgd2kgrid0005.gsb"
    [19] "other.extra"        "proj_def.dat"       "prvi"
    [22] "stgeorge"           "stlrnc"             "stpaul"
    [25] "TN"                 "WI"                 "WO"
    [28] "world"
    
    Maybe you are being thrown back just to the ellipsoid if the NAD grids are 
    absent?
    
    Hope this helps,
    
    Roger
    
    >
    >
    > My original request is here
    >   https://stat.ethz.ch/pipermail/r-sig-geo/2014-August/021611.html
    > and Roger's solution is here
    >   https://stat.ethz.ch/pipermail/r-sig-geo/2014-August/021623.html
    > (actually, they did more than help, the pretty much did all the work!)
    >
    >
    > I recently discovered the coordinates produced by that solution are now
    > roughly 100m different from what they were then.
    > (I've done quite a bit of checking to make sure I'm not making some
    > dumb mistake, and feel confident I haven't. Hopefully I'm right!)
    >
    > A small set of example locations is transformed from long/lat to a local coordinate system using
    >  (A) a reference method deemed correct
    >  (B) an R method using sp::spTransform()
    > The goal was to have B reproduce A. Three years ago, it did. Now it does not.
    >
    > (The accuracy of method A is not the issue. It uses standard methods implemented in ESRI software.)
    >
    > The reproducible example below (same one as 3 years ago) does not use the full version of method B, but it does illustrate how something has changed.
    >
    >
    > ##
    > ## reproducible example begins
    > ##
    >
    > ## define two example points in WGS84 long/lat (same as 3 years ago)
    > locs.xy <- cbind(
    >  c(-121.524764291826,-121.523480804667),
    >  c(37.6600366036405,37.6543604613483)
    > )
    >
    > locs.ll <- SpatialPoints(locs.xy, proj4string=CRS("+proj=longlat +datum=WGS84") )
    >
    >
    > ## Outside of R, reference method A converts from long/lat
    > ## to a local system, EPSG 26743, which is:
    > ##   California State Plane Zone III, NAD27, feet;
    > ##   http://spatialreference.org/ref/epsg/26743/
    > ## using an ESRI "two-step process" (some detail at the end),
    > ## saved as a shapefile, loaded into R using readOGR().
    >
    > ## Here is the "dput" of those coordinates from three years ago (the example location transformed by method A)
    > locs.ref <- new(
    >  "SpatialPoints",
    >  coords = structure(c(1703671.30566227, 1704020.20113366,
    >                       424014.398045834, 421943.708664294),
    >                     .Dim = c(2L, 2L),
    >                     .Dimnames = list(NULL, c("coords.x1", "coords.x2")))
    > , bbox = structure(
    >    c(1703671.30566227, 421943.708664294,
    >      1704020.20113366, 424014.398045834),
    >    .Dim = c(2L, 2L),
    >    .Dimnames = list(c("coords.x1",  "coords.x2"), c("min", "max")))
    > , proj4string =
    >    new("CRS",
    >        projargs = "+proj=lcc +lat_1=37.06666666666667 +lat_2=38.43333333333333 +lat_0=36.5 +lon_0=-120.5 +x_0=609601.2192024384 +y_0=0 +datum=NAD27 +units=us-ft +no_defs +ellps=clrk66 +nadgrids=@conus, at alaska, at ntv2_0.gsb, at ntv1_can.dat"
    >        )
    > )
    >
    > ## locs.ref and locs.ll are created as above, the same as they were 3 years ago
    > ## (same reproducible example data as then)
    >
    > ## use spTransform to go from WGS84 directly to the local system
    > ## using spTransform()
    > locs.26743 <- spTransform(locs.ll, CRS("+init=epsg:26743"))
    >
    > ## distances relative to the reference transformation in August 2014
    > coordinates(locs.ref)-coordinates(locs.26743)
    > ##      coords.x1 coords.x2
    > ## [1,]  3.746539 -1.876668
    > ## [2,]  3.746607 -1.876466
    >
    > ## distances relative to the reference transformation now
    > coordinates(locs.ref)-coordinates(locs.26743)
    > ##      coords.x1 coords.x2
    > ## [1,]  309.9325  20.05890
    > ## [2,]  309.9136  20.03086
    >
    > ##
    > ## a transformation that formerly was within a few feet of the example location is now some 300 feet away
    > ##
    >
    >
    >
    > ## the ESRI "two step" starts with the lon/lat,
    > ## Step 1 converts transforms them using what ESRI calls
    > ##     NAD_1983_To_WGS_1984_5       (wkid 1515)
    > ## Step 2 transforms the resulting coordinates using
    > ##     NAD_1927_To_NAD1983_NADCON   (wkid 1241)
    >
    >
    > --------  Session info now:
    >
    > library(rgdal)
    > Loading required package: rgdal
    > Loading required package: sp
    > rgdal: version: 1.2-13, (SVN revision 686)
    > Geospatial Data Abstraction Library extensions to R successfully loaded
    > Loaded GDAL runtime: GDAL 2.1.3, released 2017/20/01
    > Path to GDAL shared files: /Users/macqueen1/Library/R/3.4/library/rgdal/gdal
    > Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493]
    > Path to PROJ.4 shared files: /Users/macqueen1/Library/R/3.4/library/rgdal/proj
    > Linking to sp version: 1.2-5
    >
    > sessionInfo()
    > R version 3.4.2 (2017-09-28)
    > Platform: x86_64-apple-darwin15.6.0 (64-bit)
    > Running under: OS X El Capitan 10.11.6
    >
    > Matrix products: default
    > BLAS: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRblas.0.dylib
    > LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib
    >
    > locale:
    > [1] C
    >
    > attached base packages:
    > [1] stats     graphics  grDevices utils     datasets  methods   base
    >
    > other attached packages:
    > [1] openxlsx_4.0.17 Rkml_1.6-5      mymaps_1.4-2    rmacq_1.3-5     rgdal_1.2-13    sp_1.2-5
    >
    > loaded via a namespace (and not attached):
    > [1] compiler_3.4.2  tools_3.4.2     Rcpp_0.12.13    grid_3.4.2      lattice_0.20-35
    >
    >
    > ------ Session info then:
    > sessionInfo()
    > R version 3.1.1 (2014-07-10)
    > Platform: x86_64-apple-darwin13.1.0 (64-bit)
    >
    > locale:
    > [1] C
    >
    > attached base packages:
    > [1] stats     graphics  grDevices utils     datasets  methods   base
    >
    > other attached packages:
    > [1] sp_1.0-15       rgdal_0.8-16    maptools_0.8-30 xlsx_0.5.5
    > [5] xlsxjars_0.6.0  rJava_0.9-6     rmacq_1.3-1
    >
    > loaded via a namespace (and not attached):
    > [1] foreign_0.8-61  grid_3.1.1      lattice_0.20-29 tools_3.1.1
    >
    > --
    > Don MacQueen
    > Lawrence Livermore National Laboratory
    > 7000 East Ave., L-627
    > Livermore, CA 94550
    > 925-423-1062
    > Lab cell 925-724-7509
    >
    >
    >
    > --
    > Don MacQueen
    > Lawrence Livermore National Laboratory
    > 7000 East Ave., L-627
    > Livermore, CA 94550
    > 925-423-1062
    > Lab cell 925-724-7509
    >
    >
    >
    > _______________________________________________
    > R-sig-Geo mailing list
    > R-sig-Geo at r-project.org
    > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
    >
    
    -- 
    Roger Bivand
    Department of Economics, Norwegian School of Economics,
    Helleveien 30, N-5045 Bergen, Norway.
    voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
    Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
    http://orcid.org/0000-0003-2392-6140
    https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
    


From macqueen1 at llnl.gov  Mon Oct 30 16:46:39 2017
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Mon, 30 Oct 2017 15:46:39 +0000
Subject: [R-sig-Geo] Change in projection results relative to 3 years ago
In-Reply-To: <alpine.LFD.2.21.1710301551180.2883@reclus.nhh.no>
References: <73E1685C-20F0-4045-9113-9CABE488D640@contoso.com>
 <alpine.LFD.2.21.1710301551180.2883@reclus.nhh.no>
Message-ID: <19D599BC-7232-4065-8C41-983B551B7FB4@llnl.gov>

I should have checked this before my last email:

Since I have the KyngChaos frameworks:

[69]% ls /Library/Frameworks/PROJ.framework/unix/share/proj/
./                      WI                      nad.lst                 proj_def.dat
../                     WO                      nad27                   prvi
CH                      alaska                  nad83                   stgeorge
FL                      conus                   ntf_r93.gsb             stlrnc
GL27                    epsg                    ntv1_can.dat            stpaul
IGNF                    esri                    null                    world
MD                      esri.extra              nzgd2kgrid0005.gsb
TN                      hawaii                  other.extra

If my rgdal was installed from the CRAN binary, which I believe it was, then perhaps if I install from source it will pick up those files.

-Don

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

On 10/30/17, 7:55 AM, "Roger Bivand" <Roger.Bivand at nhh.no> wrote:

    On Mon, 30 Oct 2017, MacQueen, Don wrote:
    
    > Three years ago Roger and Hermann Peifer graciously helped me solve a projection issue in R. Something has since changed; results are different now.
    >
    > I'd once again appreciate assistance... and am more or less hoping that someone will have some idea about what has changed, hence what I can do to return to my previously blissful state.
    >
    > Thanks in advance,
    > -Don
    >
    
    Briefly, please check the current contents of:
    
    list.files("/Users/macqueen1/Library/R/3.4/library/rgdal/proj")
    
    I get:
    
    > locs.26743 <- spTransform(locs.ll, CRS("+init=epsg:26743"))
    > coordinates(locs.ref)-coordinates(locs.26743)
          coords.x1 coords.x2
    [1,]  3.746539 -1.876668
    [2,]  3.746607 -1.876466
    
    with
    
    > library(rgdal)
    Loading required package: sp
    rgdal: version: 1.2-15, (SVN revision 691)
      Geospatial Data Abstraction Library extensions to R successfully loaded
      Loaded GDAL runtime: GDAL 2.2.2, released 2017/09/15
      Path to GDAL shared files: /usr/local/share/gdal
      GDAL binary built with GEOS: TRUE
      Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493]
      Path to PROJ.4 shared files: (autodetected)
      Linking to sp version: 1.2-5
    
    (1.2-15 is the development version, but nothing changed in this respect 
    vis. 1.2-13)
    
    and
    
    > list.files("/usr/local/share/proj")
      [1] "alaska"             "CH"                 "conus"
      [4] "epsg"               "esri"               "esri.extra"
      [7] "FL"                 "GL27"               "hawaii"
    [10] "IGNF"               "MD"                 "nad.lst"
    [13] "nad27"              "nad83"              "ntf_r93.gsb"
    [16] "ntv1_can.dat"       "null"               "nzgd2kgrid0005.gsb"
    [19] "other.extra"        "proj_def.dat"       "prvi"
    [22] "stgeorge"           "stlrnc"             "stpaul"
    [25] "TN"                 "WI"                 "WO"
    [28] "world"
    
    Maybe you are being thrown back just to the ellipsoid if the NAD grids are 
    absent?
    
    Hope this helps,
    
    Roger
    
    >
    >
    > My original request is here
    >   https://stat.ethz.ch/pipermail/r-sig-geo/2014-August/021611.html
    > and Roger's solution is here
    >   https://stat.ethz.ch/pipermail/r-sig-geo/2014-August/021623.html
    > (actually, they did more than help, the pretty much did all the work!)
    >
    >
    > I recently discovered the coordinates produced by that solution are now
    > roughly 100m different from what they were then.
    > (I've done quite a bit of checking to make sure I'm not making some
    > dumb mistake, and feel confident I haven't. Hopefully I'm right!)
    >
    > A small set of example locations is transformed from long/lat to a local coordinate system using
    >  (A) a reference method deemed correct
    >  (B) an R method using sp::spTransform()
    > The goal was to have B reproduce A. Three years ago, it did. Now it does not.
    >
    > (The accuracy of method A is not the issue. It uses standard methods implemented in ESRI software.)
    >
    > The reproducible example below (same one as 3 years ago) does not use the full version of method B, but it does illustrate how something has changed.
    >
    >
    > ##
    > ## reproducible example begins
    > ##
    >
    > ## define two example points in WGS84 long/lat (same as 3 years ago)
    > locs.xy <- cbind(
    >  c(-121.524764291826,-121.523480804667),
    >  c(37.6600366036405,37.6543604613483)
    > )
    >
    > locs.ll <- SpatialPoints(locs.xy, proj4string=CRS("+proj=longlat +datum=WGS84") )
    >
    >
    > ## Outside of R, reference method A converts from long/lat
    > ## to a local system, EPSG 26743, which is:
    > ##   California State Plane Zone III, NAD27, feet;
    > ##   http://spatialreference.org/ref/epsg/26743/
    > ## using an ESRI "two-step process" (some detail at the end),
    > ## saved as a shapefile, loaded into R using readOGR().
    >
    > ## Here is the "dput" of those coordinates from three years ago (the example location transformed by method A)
    > locs.ref <- new(
    >  "SpatialPoints",
    >  coords = structure(c(1703671.30566227, 1704020.20113366,
    >                       424014.398045834, 421943.708664294),
    >                     .Dim = c(2L, 2L),
    >                     .Dimnames = list(NULL, c("coords.x1", "coords.x2")))
    > , bbox = structure(
    >    c(1703671.30566227, 421943.708664294,
    >      1704020.20113366, 424014.398045834),
    >    .Dim = c(2L, 2L),
    >    .Dimnames = list(c("coords.x1",  "coords.x2"), c("min", "max")))
    > , proj4string =
    >    new("CRS",
    >        projargs = "+proj=lcc +lat_1=37.06666666666667 +lat_2=38.43333333333333 +lat_0=36.5 +lon_0=-120.5 +x_0=609601.2192024384 +y_0=0 +datum=NAD27 +units=us-ft +no_defs +ellps=clrk66 +nadgrids=@conus, at alaska, at ntv2_0.gsb, at ntv1_can.dat"
    >        )
    > )
    >
    > ## locs.ref and locs.ll are created as above, the same as they were 3 years ago
    > ## (same reproducible example data as then)
    >
    > ## use spTransform to go from WGS84 directly to the local system
    > ## using spTransform()
    > locs.26743 <- spTransform(locs.ll, CRS("+init=epsg:26743"))
    >
    > ## distances relative to the reference transformation in August 2014
    > coordinates(locs.ref)-coordinates(locs.26743)
    > ##      coords.x1 coords.x2
    > ## [1,]  3.746539 -1.876668
    > ## [2,]  3.746607 -1.876466
    >
    > ## distances relative to the reference transformation now
    > coordinates(locs.ref)-coordinates(locs.26743)
    > ##      coords.x1 coords.x2
    > ## [1,]  309.9325  20.05890
    > ## [2,]  309.9136  20.03086
    >
    > ##
    > ## a transformation that formerly was within a few feet of the example location is now some 300 feet away
    > ##
    >
    >
    >
    > ## the ESRI "two step" starts with the lon/lat,
    > ## Step 1 converts transforms them using what ESRI calls
    > ##     NAD_1983_To_WGS_1984_5       (wkid 1515)
    > ## Step 2 transforms the resulting coordinates using
    > ##     NAD_1927_To_NAD1983_NADCON   (wkid 1241)
    >
    >
    > --------  Session info now:
    >
    > library(rgdal)
    > Loading required package: rgdal
    > Loading required package: sp
    > rgdal: version: 1.2-13, (SVN revision 686)
    > Geospatial Data Abstraction Library extensions to R successfully loaded
    > Loaded GDAL runtime: GDAL 2.1.3, released 2017/20/01
    > Path to GDAL shared files: /Users/macqueen1/Library/R/3.4/library/rgdal/gdal
    > Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493]
    > Path to PROJ.4 shared files: /Users/macqueen1/Library/R/3.4/library/rgdal/proj
    > Linking to sp version: 1.2-5
    >
    > sessionInfo()
    > R version 3.4.2 (2017-09-28)
    > Platform: x86_64-apple-darwin15.6.0 (64-bit)
    > Running under: OS X El Capitan 10.11.6
    >
    > Matrix products: default
    > BLAS: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRblas.0.dylib
    > LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib
    >
    > locale:
    > [1] C
    >
    > attached base packages:
    > [1] stats     graphics  grDevices utils     datasets  methods   base
    >
    > other attached packages:
    > [1] openxlsx_4.0.17 Rkml_1.6-5      mymaps_1.4-2    rmacq_1.3-5     rgdal_1.2-13    sp_1.2-5
    >
    > loaded via a namespace (and not attached):
    > [1] compiler_3.4.2  tools_3.4.2     Rcpp_0.12.13    grid_3.4.2      lattice_0.20-35
    >
    >
    > ------ Session info then:
    > sessionInfo()
    > R version 3.1.1 (2014-07-10)
    > Platform: x86_64-apple-darwin13.1.0 (64-bit)
    >
    > locale:
    > [1] C
    >
    > attached base packages:
    > [1] stats     graphics  grDevices utils     datasets  methods   base
    >
    > other attached packages:
    > [1] sp_1.0-15       rgdal_0.8-16    maptools_0.8-30 xlsx_0.5.5
    > [5] xlsxjars_0.6.0  rJava_0.9-6     rmacq_1.3-1
    >
    > loaded via a namespace (and not attached):
    > [1] foreign_0.8-61  grid_3.1.1      lattice_0.20-29 tools_3.1.1
    >
    > --
    > Don MacQueen
    > Lawrence Livermore National Laboratory
    > 7000 East Ave., L-627
    > Livermore, CA 94550
    > 925-423-1062
    > Lab cell 925-724-7509
    >
    >
    >
    > --
    > Don MacQueen
    > Lawrence Livermore National Laboratory
    > 7000 East Ave., L-627
    > Livermore, CA 94550
    > 925-423-1062
    > Lab cell 925-724-7509
    >
    >
    >
    > _______________________________________________
    > R-sig-Geo mailing list
    > R-sig-Geo at r-project.org
    > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
    >
    
    -- 
    Roger Bivand
    Department of Economics, Norwegian School of Economics,
    Helleveien 30, N-5045 Bergen, Norway.
    voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
    Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
    http://orcid.org/0000-0003-2392-6140
    https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
    


From Roger.Bivand at nhh.no  Mon Oct 30 16:54:07 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 30 Oct 2017 15:54:07 +0000
Subject: [R-sig-Geo] Change in projection results relative to 3 years ago
In-Reply-To: <19D599BC-7232-4065-8C41-983B551B7FB4@llnl.gov>
References: <73E1685C-20F0-4045-9113-9CABE488D640@contoso.com>
 <alpine.LFD.2.21.1710301551180.2883@reclus.nhh.no>,
 <19D599BC-7232-4065-8C41-983B551B7FB4@llnl.gov>
Message-ID: <E7824B12CF1B784E.3a43c013-d9e2-4546-b46e-cf697bd09d4a@mail.outlook.com>

Fill in from http://download.osgeo.org/proj/proj-datumgrid-1.6.zip, this was temporarily missing in the CRAN OSX binary.

Roger

Roger Bivand
Norwegian School of Economics
Bergen, Norway




On Mon, Oct 30, 2017 at 4:46 PM +0100, "MacQueen, Don" <macqueen1 at llnl.gov<mailto:macqueen1 at llnl.gov>> wrote:


I should have checked this before my last email:

Since I have the KyngChaos frameworks:

[69]% ls /Library/Frameworks/PROJ.framework/unix/share/proj/
./                      WI                      nad.lst                 proj_def.dat
../                     WO                      nad27                   prvi
CH                      alaska                  nad83                   stgeorge
FL                      conus                   ntf_r93.gsb             stlrnc
GL27                    epsg                    ntv1_can.dat            stpaul
IGNF                    esri                    null                    world
MD                      esri.extra              nzgd2kgrid0005.gsb
TN                      hawaii                  other.extra

If my rgdal was installed from the CRAN binary, which I believe it was, then perhaps if I install from source it will pick up those files.

-Don

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509



On 10/30/17, 7:55 AM, "Roger Bivand"  wrote:

    On Mon, 30 Oct 2017, MacQueen, Don wrote:

    > Three years ago Roger and Hermann Peifer graciously helped me solve a projection issue in R. Something has since changed; results are different now.
    >
    > I'd once again appreciate assistance... and am more or less hoping that someone will have some idea about what has changed, hence what I can do to return to my previously blissful state.
    >
    > Thanks in advance,
    > -Don
    >

    Briefly, please check the current contents of:

    list.files("/Users/macqueen1/Library/R/3.4/library/rgdal/proj")

    I get:

    > locs.26743 <- spTransform(locs.ll, CRS("+init=epsg:26743"))
    > coordinates(locs.ref)-coordinates(locs.26743)
          coords.x1 coords.x2
    [1,]  3.746539 -1.876668
    [2,]  3.746607 -1.876466

    with

    > library(rgdal)
    Loading required package: sp
    rgdal: version: 1.2-15, (SVN revision 691)
      Geospatial Data Abstraction Library extensions to R successfully loaded
      Loaded GDAL runtime: GDAL 2.2.2, released 2017/09/15
      Path to GDAL shared files: /usr/local/share/gdal
      GDAL binary built with GEOS: TRUE
      Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493]
      Path to PROJ.4 shared files: (autodetected)
      Linking to sp version: 1.2-5

    (1.2-15 is the development version, but nothing changed in this respect
    vis. 1.2-13)

    and

    > list.files("/usr/local/share/proj")
      [1] "alaska"             "CH"                 "conus"
      [4] "epsg"               "esri"               "esri.extra"
      [7] "FL"                 "GL27"               "hawaii"
    [10] "IGNF"               "MD"                 "nad.lst"
    [13] "nad27"              "nad83"              "ntf_r93.gsb"
    [16] "ntv1_can.dat"       "null"               "nzgd2kgrid0005.gsb"
    [19] "other.extra"        "proj_def.dat"       "prvi"
    [22] "stgeorge"           "stlrnc"             "stpaul"
    [25] "TN"                 "WI"                 "WO"
    [28] "world"

    Maybe you are being thrown back just to the ellipsoid if the NAD grids are
    absent?

    Hope this helps,

    Roger

    >
    >
    > My original request is here
    >   https://stat.ethz.ch/pipermail/r-sig-geo/2014-August/021611.html
    > and Roger's solution is here
    >   https://stat.ethz.ch/pipermail/r-sig-geo/2014-August/021623.html
    > (actually, they did more than help, the pretty much did all the work!)
    >
    >
    > I recently discovered the coordinates produced by that solution are now
    > roughly 100m different from what they were then.
    > (I've done quite a bit of checking to make sure I'm not making some
    > dumb mistake, and feel confident I haven't. Hopefully I'm right!)
    >
    > A small set of example locations is transformed from long/lat to a local coordinate system using
    >  (A) a reference method deemed correct
    >  (B) an R method using sp::spTransform()
    > The goal was to have B reproduce A. Three years ago, it did. Now it does not.
    >
    > (The accuracy of method A is not the issue. It uses standard methods implemented in ESRI software.)
    >
    > The reproducible example below (same one as 3 years ago) does not use the full version of method B, but it does illustrate how something has changed.
    >
    >
    > ##
    > ## reproducible example begins
    > ##
    >
    > ## define two example points in WGS84 long/lat (same as 3 years ago)
    > locs.xy <- cbind(
    >  c(-121.524764291826,-121.523480804667),
    >  c(37.6600366036405,37.6543604613483)
    > )
    >
    > locs.ll <- SpatialPoints(locs.xy, proj4string=CRS("+proj=longlat +datum=WGS84") )
    >
    >
    > ## Outside of R, reference method A converts from long/lat
    > ## to a local system, EPSG 26743, which is:
    > ##   California State Plane Zone III, NAD27, feet;
    > ##   http://spatialreference.org/ref/epsg/26743/
    > ## using an ESRI "two-step process" (some detail at the end),
    > ## saved as a shapefile, loaded into R using readOGR().
    >
    > ## Here is the "dput" of those coordinates from three years ago (the example location transformed by method A)
    > locs.ref <- new(
    >  "SpatialPoints",
    >  coords = structure(c(1703671.30566227, 1704020.20113366,
    >                       424014.398045834, 421943.708664294),
    >                     .Dim = c(2L, 2L),
    >                     .Dimnames = list(NULL, c("coords.x1", "coords.x2")))
    > , bbox = structure(
    >    c(1703671.30566227, 421943.708664294,
    >      1704020.20113366, 424014.398045834),
    >    .Dim = c(2L, 2L),
    >    .Dimnames = list(c("coords.x1",  "coords.x2"), c("min", "max")))
    > , proj4string =
    >    new("CRS",
    >        projargs = "+proj=lcc +lat_1=37.06666666666667 +lat_2=38.43333333333333 +lat_0=36.5 +lon_0=-120.5 +x_0=609601.2192024384 +y_0=0 +datum=NAD27 +units=us-ft +no_defs +ellps=clrk66 +nadgrids=@conus, at alaska, at ntv2_0.gsb, at ntv1_can.dat"
    >        )
    > )
    >
    > ## locs.ref and locs.ll are created as above, the same as they were 3 years ago
    > ## (same reproducible example data as then)
    >
    > ## use spTransform to go from WGS84 directly to the local system
    > ## using spTransform()
    > locs.26743 <- spTransform(locs.ll, CRS("+init=epsg:26743"))
    >
    > ## distances relative to the reference transformation in August 2014
    > coordinates(locs.ref)-coordinates(locs.26743)
    > ##      coords.x1 coords.x2
    > ## [1,]  3.746539 -1.876668
    > ## [2,]  3.746607 -1.876466
    >
    > ## distances relative to the reference transformation now
    > coordinates(locs.ref)-coordinates(locs.26743)
    > ##      coords.x1 coords.x2
    > ## [1,]  309.9325  20.05890
    > ## [2,]  309.9136  20.03086
    >
    > ##
    > ## a transformation that formerly was within a few feet of the example location is now some 300 feet away
    > ##
    >
    >
    >
    > ## the ESRI "two step" starts with the lon/lat,
    > ## Step 1 converts transforms them using what ESRI calls
    > ##     NAD_1983_To_WGS_1984_5       (wkid 1515)
    > ## Step 2 transforms the resulting coordinates using
    > ##     NAD_1927_To_NAD1983_NADCON   (wkid 1241)
    >
    >
    > --------  Session info now:
    >
    > library(rgdal)
    > Loading required package: rgdal
    > Loading required package: sp
    > rgdal: version: 1.2-13, (SVN revision 686)
    > Geospatial Data Abstraction Library extensions to R successfully loaded
    > Loaded GDAL runtime: GDAL 2.1.3, released 2017/20/01
    > Path to GDAL shared files: /Users/macqueen1/Library/R/3.4/library/rgdal/gdal
    > Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493]
    > Path to PROJ.4 shared files: /Users/macqueen1/Library/R/3.4/library/rgdal/proj
    > Linking to sp version: 1.2-5
    >
    > sessionInfo()
    > R version 3.4.2 (2017-09-28)
    > Platform: x86_64-apple-darwin15.6.0 (64-bit)
    > Running under: OS X El Capitan 10.11.6
    >
    > Matrix products: default
    > BLAS: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRblas.0.dylib
    > LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib
    >
    > locale:
    > [1] C
    >
    > attached base packages:
    > [1] stats     graphics  grDevices utils     datasets  methods   base
    >
    > other attached packages:
    > [1] openxlsx_4.0.17 Rkml_1.6-5      mymaps_1.4-2    rmacq_1.3-5     rgdal_1.2-13    sp_1.2-5
    >
    > loaded via a namespace (and not attached):
    > [1] compiler_3.4.2  tools_3.4.2     Rcpp_0.12.13    grid_3.4.2      lattice_0.20-35
    >
    >
    > ------ Session info then:
    > sessionInfo()
    > R version 3.1.1 (2014-07-10)
    > Platform: x86_64-apple-darwin13.1.0 (64-bit)
    >
    > locale:
    > [1] C
    >
    > attached base packages:
    > [1] stats     graphics  grDevices utils     datasets  methods   base
    >
    > other attached packages:
    > [1] sp_1.0-15       rgdal_0.8-16    maptools_0.8-30 xlsx_0.5.5
    > [5] xlsxjars_0.6.0  rJava_0.9-6     rmacq_1.3-1
    >
    > loaded via a namespace (and not attached):
    > [1] foreign_0.8-61  grid_3.1.1      lattice_0.20-29 tools_3.1.1
    >
    > --
    > Don MacQueen
    > Lawrence Livermore National Laboratory
    > 7000 East Ave., L-627
    > Livermore, CA 94550
    > 925-423-1062
    > Lab cell 925-724-7509
    >
    >
    >
    > --
    > Don MacQueen
    > Lawrence Livermore National Laboratory
    > 7000 East Ave., L-627
    > Livermore, CA 94550
    > 925-423-1062
    > Lab cell 925-724-7509
    >
    >
    >
    > _______________________________________________
    > R-sig-Geo mailing list
    > R-sig-Geo at r-project.org
    > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
    >

    --
    Roger Bivand
    Department of Economics, Norwegian School of Economics,
    Helleveien 30, N-5045 Bergen, Norway.
    voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
    Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
    http://orcid.org/0000-0003-2392-6140
    https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en




	[[alternative HTML version deleted]]


From macqueen1 at llnl.gov  Mon Oct 30 17:16:14 2017
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Mon, 30 Oct 2017 16:16:14 +0000
Subject: [R-sig-Geo] Change in projection results relative to 3 years ago
In-Reply-To: <E7824B12CF1B784E.3a43c013-d9e2-4546-b46e-cf697bd09d4a@mail.outlook.com>
References: <73E1685C-20F0-4045-9113-9CABE488D640@contoso.com>
 <alpine.LFD.2.21.1710301551180.2883@reclus.nhh.no>
 <19D599BC-7232-4065-8C41-983B551B7FB4@llnl.gov>
 <E7824B12CF1B784E.3a43c013-d9e2-4546-b46e-cf697bd09d4a@mail.outlook.com>
Message-ID: <1596C232-2BEF-4059-8EF6-C158567CE900@llnl.gov>

That solved the problem, thanks!

-Don

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509



From: Roger Bivand <Roger.Bivand at nhh.no>
Date: Monday, October 30, 2017 at 8:54 AM
To: MacQueen_Don <macqueen1 at llnl.gov>
Cc: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
Subject: Re: [R-sig-Geo] Change in projection results relative to 3 years ago

Fill in from http://download.osgeo.org/proj/proj-datumgrid-1.6.zip, this was temporarily missing in the CRAN OSX binary.
Roger
Roger Bivand
Norwegian School of Economics
Bergen, Norway



On Mon, Oct 30, 2017 at 4:46 PM +0100, "MacQueen, Don" <macqueen1 at llnl.gov<mailto:macqueen1 at llnl.gov>> wrote:

I should have checked this before my last email:



Since I have the KyngChaos frameworks:



[69]% ls /Library/Frameworks/PROJ.framework/unix/share/proj/

./                      WI                      nad.lst                 proj_def.dat

../                     WO                      nad27                   prvi

CH                      alaska                  nad83                   stgeorge

FL                      conus                   ntf_r93.gsb             stlrnc

GL27                    epsg                    ntv1_can.dat            stpaul

IGNF                    esri                    null                    world

MD                      esri.extra              nzgd2kgrid0005.gsb

TN                      hawaii                  other.extra



If my rgdal was installed from the CRAN binary, which I believe it was, then perhaps if I install from source it will pick up those files.



-Don



--

Don MacQueen

Lawrence Livermore National Laboratory

7000 East Ave., L-627

Livermore, CA 94550

925-423-1062

Lab cell 925-724-7509







On 10/30/17, 7:55 AM, "Roger Bivand"  wrote:



    On Mon, 30 Oct 2017, MacQueen, Don wrote:



    > Three years ago Roger and Hermann Peifer graciously helped me solve a projection issue in R. Something has since changed; results are different now.

    >

    > I'd once again appreciate assistance... and am more or less hoping that someone will have some idea about what has changed, hence what I can do to return to my previously blissful state.

    >

    > Thanks in advance,

    > -Don

    >



    Briefly, please check the current contents of:



    list.files("/Users/macqueen1/Library/R/3.4/library/rgdal/proj")



    I get:



    > locs.26743 <- spTransform(locs.ll, CRS("+init=epsg:26743"))

    > coordinates(locs.ref)-coordinates(locs.26743)

          coords.x1 coords.x2

    [1,]  3.746539 -1.876668

    [2,]  3.746607 -1.876466



    with



    > library(rgdal)

    Loading required package: sp

    rgdal: version: 1.2-15, (SVN revision 691)

      Geospatial Data Abstraction Library extensions to R successfully loaded

      Loaded GDAL runtime: GDAL 2.2.2, released 2017/09/15

      Path to GDAL shared files: /usr/local/share/gdal

      GDAL binary built with GEOS: TRUE

      Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493]

      Path to PROJ.4 shared files: (autodetected)

      Linking to sp version: 1.2-5



    (1.2-15 is the development version, but nothing changed in this respect

    vis. 1.2-13)



    and



    > list.files("/usr/local/share/proj")

      [1] "alaska"             "CH"                 "conus"

      [4] "epsg"               "esri"               "esri.extra"

      [7] "FL"                 "GL27"               "hawaii"

    [10] "IGNF"               "MD"                 "nad.lst"

    [13] "nad27"              "nad83"              "ntf_r93.gsb"

    [16] "ntv1_can.dat"       "null"               "nzgd2kgrid0005.gsb"

    [19] "other.extra"        "proj_def.dat"       "prvi"

    [22] "stgeorge"           "stlrnc"             "stpaul"

    [25] "TN"                 "WI"                 "WO"

    [28] "world"



    Maybe you are being thrown back just to the ellipsoid if the NAD grids are

    absent?



    Hope this helps,



    Roger



    >

    >

    > My original request is here

    >   https://stat.ethz.ch/pipermail/r-sig-geo/2014-August/021611.html

    > and Roger's solution is here

    >   https://stat.ethz.ch/pipermail/r-sig-geo/2014-August/021623.html

    > (actually, they did more than help, the pretty much did all the work!)

    >

    >

    > I recently discovered the coordinates produced by that solution are now

    > roughly 100m different from what they were then.

    > (I've done quite a bit of checking to make sure I'm not making some

    > dumb mistake, and feel confident I haven't. Hopefully I'm right!)

    >

    > A small set of example locations is transformed from long/lat to a local coordinate system using

    >  (A) a reference method deemed correct

    >  (B) an R method using sp::spTransform()

    > The goal was to have B reproduce A. Three years ago, it did. Now it does not.

    >

    > (The accuracy of method A is not the issue. It uses standard methods implemented in ESRI software.)

    >

    > The reproducible example below (same one as 3 years ago) does not use the full version of method B, but it does illustrate how something has changed.

    >

    >

    > ##

    > ## reproducible example begins

    > ##

    >

    > ## define two example points in WGS84 long/lat (same as 3 years ago)

    > locs.xy <- cbind(

    >  c(-121.524764291826,-121.523480804667),

    >  c(37.6600366036405,37.6543604613483)

    > )

    >

    > locs.ll <- SpatialPoints(locs.xy, proj4string=CRS("+proj=longlat +datum=WGS84") )

    >

    >

    > ## Outside of R, reference method A converts from long/lat

    > ## to a local system, EPSG 26743, which is:

    > ##   California State Plane Zone III, NAD27, feet;

    > ##   http://spatialreference.org/ref/epsg/26743/

    > ## using an ESRI "two-step process" (some detail at the end),

    > ## saved as a shapefile, loaded into R using readOGR().

    >

    > ## Here is the "dput" of those coordinates from three years ago (the example location transformed by method A)

    > locs.ref <- new(

    >  "SpatialPoints",

    >  coords = structure(c(1703671.30566227, 1704020.20113366,

    >                       424014.398045834, 421943.708664294),

    >                     .Dim = c(2L, 2L),

    >                     .Dimnames = list(NULL, c("coords.x1", "coords.x2")))

    > , bbox = structure(

    >    c(1703671.30566227, 421943.708664294,

    >      1704020.20113366, 424014.398045834),

    >    .Dim = c(2L, 2L),

    >    .Dimnames = list(c("coords.x1",  "coords.x2"), c("min", "max")))

    > , proj4string =

    >    new("CRS",

    >        projargs = "+proj=lcc +lat_1=37.06666666666667 +lat_2=38.43333333333333 +lat_0=36.5 +lon_0=-120.5 +x_0=609601.2192024384 +y_0=0 +datum=NAD27 +units=us-ft +no_defs +ellps=clrk66 +nadgrids=@conus, at alaska, at ntv2_0.gsb, at ntv1_can.dat"

    >        )

    > )

    >

    > ## locs.ref and locs.ll are created as above, the same as they were 3 years ago

    > ## (same reproducible example data as then)

    >

    > ## use spTransform to go from WGS84 directly to the local system

    > ## using spTransform()

    > locs.26743 <- spTransform(locs.ll, CRS("+init=epsg:26743"))

    >

    > ## distances relative to the reference transformation in August 2014

    > coordinates(locs.ref)-coordinates(locs.26743)

    > ##      coords.x1 coords.x2

    > ## [1,]  3.746539 -1.876668

    > ## [2,]  3.746607 -1.876466

    >

    > ## distances relative to the reference transformation now

    > coordinates(locs.ref)-coordinates(locs.26743)

    > ##      coords.x1 coords.x2

    > ## [1,]  309.9325  20.05890

    > ## [2,]  309.9136  20.03086

    >

    > ##

    > ## a transformation that formerly was within a few feet of the example location is now some 300 feet away

    > ##

    >

    >

    >

    > ## the ESRI "two step" starts with the lon/lat,

    > ## Step 1 converts transforms them using what ESRI calls

    > ##     NAD_1983_To_WGS_1984_5       (wkid 1515)

    > ## Step 2 transforms the resulting coordinates using

    > ##     NAD_1927_To_NAD1983_NADCON   (wkid 1241)

    >

    >

    > --------  Session info now:

    >

    > library(rgdal)

    > Loading required package: rgdal

    > Loading required package: sp

    > rgdal: version: 1.2-13, (SVN revision 686)

    > Geospatial Data Abstraction Library extensions to R successfully loaded

    > Loaded GDAL runtime: GDAL 2.1.3, released 2017/20/01

    > Path to GDAL shared files: /Users/macqueen1/Library/R/3.4/library/rgdal/gdal

    > Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493]

    > Path to PROJ.4 shared files: /Users/macqueen1/Library/R/3.4/library/rgdal/proj

    > Linking to sp version: 1.2-5

    >

    > sessionInfo()

    > R version 3.4.2 (2017-09-28)

    > Platform: x86_64-apple-darwin15.6.0 (64-bit)

    > Running under: OS X El Capitan 10.11.6

    >

    > Matrix products: default

    > BLAS: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRblas.0.dylib

    > LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib

    >

    > locale:

    > [1] C

    >

    > attached base packages:

    > [1] stats     graphics  grDevices utils     datasets  methods   base

    >

    > other attached packages:

    > [1] openxlsx_4.0.17 Rkml_1.6-5      mymaps_1.4-2    rmacq_1.3-5     rgdal_1.2-13    sp_1.2-5

    >

    > loaded via a namespace (and not attached):

    > [1] compiler_3.4.2  tools_3.4.2     Rcpp_0.12.13    grid_3.4.2      lattice_0.20-35

    >

    >

    > ------ Session info then:

    > sessionInfo()

    > R version 3.1.1 (2014-07-10)

    > Platform: x86_64-apple-darwin13.1.0 (64-bit)

    >

    > locale:

    > [1] C

    >

    > attached base packages:

    > [1] stats     graphics  grDevices utils     datasets  methods   base

    >

    > other attached packages:

    > [1] sp_1.0-15       rgdal_0.8-16    maptools_0.8-30 xlsx_0.5.5

    > [5] xlsxjars_0.6.0  rJava_0.9-6     rmacq_1.3-1

    >

    > loaded via a namespace (and not attached):

    > [1] foreign_0.8-61  grid_3.1.1      lattice_0.20-29 tools_3.1.1

    >

    > --

    > Don MacQueen

    > Lawrence Livermore National Laboratory

    > 7000 East Ave., L-627

    > Livermore, CA 94550

    > 925-423-1062

    > Lab cell 925-724-7509

    >

    >

    >

    > --

    > Don MacQueen

    > Lawrence Livermore National Laboratory

    > 7000 East Ave., L-627

    > Livermore, CA 94550

    > 925-423-1062

    > Lab cell 925-724-7509

    >

    >

    >

    > _______________________________________________

    > R-sig-Geo mailing list

    > R-sig-Geo at r-project.org

    > https://stat.ethz.ch/mailman/listinfo/r-sig-geo

    >



    --

    Roger Bivand

    Department of Economics, Norwegian School of Economics,

    Helleveien 30, N-5045 Bergen, Norway.

    voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no

    Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html

    http://orcid.org/0000-0003-2392-6140

    https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en





	[[alternative HTML version deleted]]


From jschon7 at gmail.com  Mon Oct 30 23:52:41 2017
From: jschon7 at gmail.com (Justin Schon)
Date: Mon, 30 Oct 2017 18:52:41 -0400
Subject: [R-sig-Geo] Substantive interpretation for spatcounts est.sc results
Message-ID: <CAGH4ugLU=8AUDK2yDZva1EWC4ZaqvyA2A_MUy_NmkCQQHKu-fQ@mail.gmail.com>

Dear all,

I am interested in trying out the spatcounts package to estimate event
count models accounting for spatial dependence, but I have been unable to
find an explanation of how to interpret the coefficients that the est.sc
command estimates.

Are there any good tutorials that explain this?

Thank you for any help you can offer,

Justin




-- 
Justin Schon
PhD Candidate
Indiana University Bloomington Department of Political Science
334 Woodburn Hall

	[[alternative HTML version deleted]]


From ashimkapoor at gmail.com  Tue Oct 31 11:27:32 2017
From: ashimkapoor at gmail.com (Ashim Kapoor)
Date: Tue, 31 Oct 2017 15:57:32 +0530
Subject: [R-sig-Geo] kde bandwidth in kilometres in package GISTools
Message-ID: <CAC8=1eqnQ39OsTZkKgOGbCvk2j3A_iD2Bfhv9ePVgDaP3a6cqw@mail.gmail.com>

Dear All,

I want to use the function kde.points where I want the bandwidth to be in
kilometres. How can I do this ? What is the present unit of bandwidth ?

A reproducible example from the package manual is :

data(newhaven)
breach.dens = kde.points(breach,lim = tracts)

Best Regards,
Ashim

	[[alternative HTML version deleted]]


From mauriziomarchi85 at gmail.com  Tue Oct 31 11:57:49 2017
From: mauriziomarchi85 at gmail.com (Maurizio Marchi)
Date: Tue, 31 Oct 2017 11:57:49 +0100
Subject: [R-sig-Geo] Spatial clusters with equal number of objects (2)
Message-ID: <CANJhsN3_35VSf5QgBaLDY8q5u6i-+GYC2v8i6AgvVy5JR70Etg@mail.gmail.com>

Hello everybody,
is there an easy way to cluster spatial objects (polygons in my case, a
grid of 500mx500m cells) with an equal number of objects per cluster?
I tried to attach an example of what I mean but I think the message was
never delivered.
Regards

-- 
Maurizio Marchi
Skype ID: maurizioxyz
linux user 552742

	[[alternative HTML version deleted]]


From marcelino.delacruz at urjc.es  Tue Oct 31 12:16:34 2017
From: marcelino.delacruz at urjc.es (Marcelino de la Cruz Rot)
Date: Tue, 31 Oct 2017 12:16:34 +0100
Subject: [R-sig-Geo] Spatial clusters with equal number of objects (2)
In-Reply-To: <CANJhsN3_35VSf5QgBaLDY8q5u6i-+GYC2v8i6AgvVy5JR70Etg@mail.gmail.com>
References: <CANJhsN3_35VSf5QgBaLDY8q5u6i-+GYC2v8i6AgvVy5JR70Etg@mail.gmail.com>
Message-ID: <bd04fc47-f5c3-4ebd-0fe7-93a3ba875e4e@urjc.es>

Hello Maurizio,

If they are cells in a grid, they are already as much clustered as they 
could be ;-p.

Please, be more specific.

Cheers,

Marcelino


El 31/10/2017 a las 11:57, Maurizio Marchi escribi?:
> Hello everybody,
> is there an easy way to cluster spatial objects (polygons in my case, a
> grid of 500mx500m cells) with an equal number of objects per cluster?
> I tried to attach an example of what I mean but I think the message was
> never delivered.
> Regards
>

-- 
Marcelino de la Cruz Rot
Depto. de Biolog?a y Geolog?a
F?sica y Qu?mica Inorg?nica
Universidad Rey Juan Carlos
M?stoles Espa?a


From tkeitt at utexas.edu  Tue Oct 31 20:17:29 2017
From: tkeitt at utexas.edu (Tim Keitt)
Date: Tue, 31 Oct 2017 14:17:29 -0500
Subject: [R-sig-Geo] Spatial clusters with equal number of objects (2)
In-Reply-To: <CANJhsN3_35VSf5QgBaLDY8q5u6i-+GYC2v8i6AgvVy5JR70Etg@mail.gmail.com>
References: <CANJhsN3_35VSf5QgBaLDY8q5u6i-+GYC2v8i6AgvVy5JR70Etg@mail.gmail.com>
Message-ID: <CANnL8grVQNQGszBDCsraCSRth4Yri+P=1YbkP11=eAyNE3A_bA@mail.gmail.com>

http://www.keittlab.org/

On Tue, Oct 31, 2017 at 5:57 AM, Maurizio Marchi <mauriziomarchi85 at gmail.com
> wrote:

> Hello everybody,
> is there an easy way to cluster spatial objects (polygons in my case, a
> grid of 500mx500m cells) with an equal number of objects per cluster?
>

If you mean maximally compact clusters, that is proven NP complexity, so
you would have to resort to heuristic search or greedy approximations. One
approach is to place points sequentially up to n with each point maximally
distant from all previous points then assign nearest neighbors.

I wonder if igraph has something that would suit the problem?

THK

I tried to attach an example of what I mean but I think the message was
> never delivered.
> Regards
>
> --
> Maurizio Marchi
> Skype ID: maurizioxyz
> linux user 552742
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From levi.john.wolf at gmail.com  Tue Oct 31 21:49:47 2017
From: levi.john.wolf at gmail.com (Levi John Wolf)
Date: Tue, 31 Oct 2017 20:49:47 +0000
Subject: [R-sig-Geo] Spatial clusters with equal number of objects (2)
In-Reply-To: <CANnL8grVQNQGszBDCsraCSRth4Yri+P=1YbkP11=eAyNE3A_bA@mail.gmail.com>
References: <CANJhsN3_35VSf5QgBaLDY8q5u6i-+GYC2v8i6AgvVy5JR70Etg@mail.gmail.com>
 <CANnL8grVQNQGszBDCsraCSRth4Yri+P=1YbkP11=eAyNE3A_bA@mail.gmail.com>
Message-ID: <CAGrcfiF2_szmjrxemk0_fwyTZ7ePztnh7PCjCA8YBfpfTt0yPg@mail.gmail.com>

ClustGeo <https://arxiv.org/pdf/1707.03897.pdf> may be of interest, but
most things I've seen in this space are in Python, like Clusterpy & the
Python Spatial Analysis Library's MaxP algorithm.

You can call it from R using reticulated.

On Tue, Oct 31, 2017 at 7:18 PM Tim Keitt <tkeitt at utexas.edu> wrote:

> http://www.keittlab.org/
>
> On Tue, Oct 31, 2017 at 5:57 AM, Maurizio Marchi <
> mauriziomarchi85 at gmail.com
> > wrote:
>
> > Hello everybody,
> > is there an easy way to cluster spatial objects (polygons in my case, a
> > grid of 500mx500m cells) with an equal number of objects per cluster?
> >
>
> If you mean maximally compact clusters, that is proven NP complexity, so
> you would have to resort to heuristic search or greedy approximations. One
> approach is to place points sequentially up to n with each point maximally
> distant from all previous points then assign nearest neighbors.
>
> I wonder if igraph has something that would suit the problem?
>
> THK
>
> I tried to attach an example of what I mean but I think the message was
> > never delivered.
> > Regards
> >
> > --
> > Maurizio Marchi
> > Skype ID: maurizioxyz
> > linux user 552742
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Levi John Wolf
Lecturer in Quantitatve Human Geography | University of Bristol
Associate Member | Center for Multilevel Modeling, University of Bristol
Visiting Fellow | Center for Spatial Data Science, University of Chicago
ljwolf.org

	[[alternative HTML version deleted]]


From mauriziomarchi85 at gmail.com  Tue Oct 31 21:54:56 2017
From: mauriziomarchi85 at gmail.com (Maurizio Marchi)
Date: Tue, 31 Oct 2017 20:54:56 +0000
Subject: [R-sig-Geo] Spatial clusters with equal number of objects (2)
In-Reply-To: <CAGrcfiF2_szmjrxemk0_fwyTZ7ePztnh7PCjCA8YBfpfTt0yPg@mail.gmail.com>
References: <CANJhsN3_35VSf5QgBaLDY8q5u6i-+GYC2v8i6AgvVy5JR70Etg@mail.gmail.com>
 <CANnL8grVQNQGszBDCsraCSRth4Yri+P=1YbkP11=eAyNE3A_bA@mail.gmail.com>
 <CAGrcfiF2_szmjrxemk0_fwyTZ7ePztnh7PCjCA8YBfpfTt0yPg@mail.gmail.com>
Message-ID: <CANJhsN2zHDwm0tJ4K1gYYsnSgucfaoExxNKW7TXBP3j5b2hUTg@mail.gmail.com>

Thanks, I'll check it out!

On Tue, 31 Oct 2017 at 21:49, Levi John Wolf <levi.john.wolf at gmail.com>
wrote:

> ClustGeo <https://arxiv.org/pdf/1707.03897.pdf> may be of interest, but
> most things I've seen in this space are in Python, like Clusterpy & the
> Python Spatial Analysis Library's MaxP algorithm.
>
> You can call it from R using reticulated.
>
> On Tue, Oct 31, 2017 at 7:18 PM Tim Keitt <tkeitt at utexas.edu> wrote:
>
>> http://www.keittlab.org/
>>
>> On Tue, Oct 31, 2017 at 5:57 AM, Maurizio Marchi <
>> mauriziomarchi85 at gmail.com
>> > wrote:
>>
>> > Hello everybody,
>> > is there an easy way to cluster spatial objects (polygons in my case, a
>> > grid of 500mx500m cells) with an equal number of objects per cluster?
>> >
>>
>> If you mean maximally compact clusters, that is proven NP complexity, so
>> you would have to resort to heuristic search or greedy approximations. One
>> approach is to place points sequentially up to n with each point maximally
>> distant from all previous points then assign nearest neighbors.
>>
>> I wonder if igraph has something that would suit the problem?
>>
>> THK
>>
>> I tried to attach an example of what I mean but I think the message was
>> > never delivered.
>> > Regards
>> >
>> > --
>> > Maurizio Marchi
>> > Skype ID: maurizioxyz
>> > linux user 552742
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-sig-Geo mailing list
>> > R-sig-Geo at r-project.org
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> --
> Levi John Wolf
> Lecturer in Quantitatve Human Geography | University of Bristol
> Associate Member | Center for Multilevel Modeling, University of Bristol
> Visiting Fellow | Center for Spatial Data Science, University of Chicago
> ljwolf.org
>
-- 
Maurizio Marchi
Skype ID: maurizioxyz
linux user 552742

	[[alternative HTML version deleted]]


