From denn2duk @end|ng |rom y@hoo@com  Sun Oct  2 05:07:08 2022
From: denn2duk @end|ng |rom y@hoo@com (Denys Dukhovnov)
Date: Sun, 2 Oct 2022 03:07:08 +0000 (UTC)
Subject: [R-sig-Geo] Fitting hierarchical spatial panel data models
References: <228370573.3450013.1664680028447.ref@mail.yahoo.com>
Message-ID: <228370573.3450013.1664680028447@mail.yahoo.com>

Hello,

I am aiming to run an SLX or and SDEM local spillover type spatial model and I am looking for advice on existing methods and their implementations.?

I have a panel data with about 30 years of observation and nested spatial structure (such as US counties within US states). I would ideally like to account for both the hierarchical structure of the data as well as the time component.?

I understand that hierarchical spatial econometric models are well established (for example, as per Lacombe & McIntyre (2016)), but I struggle to find any prior reference that combines the nested/hierarchical structure with spatial panel data with a longitudinal component.

I am curious if someone could point me to where I might want to look for a solution and any existing software implementation in R. Alternatively, ignoring the temporal component, is it possible to specify a multi-level model within the splm R package for SDEM type process??


Many thanks in advance.

Best,
Denys


From @trev|@@n| @end|ng |rom |u@v@|t  Thu Oct  6 14:56:30 2022
From: @trev|@@n| @end|ng |rom |u@v@|t (Sebastiano Trevisani)
Date: Thu, 6 Oct 2022 14:56:30 +0200
Subject: [R-sig-Geo] simplified geostatistical approach for surface
 roughness and image texture analysis using terra package
Message-ID: <CAC8_bdGXDafL5fXcqMYkAErG8PykTiKt6P89ZaeQSgDpAXU04Q@mail.gmail.com>

Dear litst memmbers

I attach the link to a preprint of a paper and the code (simple R functions
using the terra package) we developed for computing surface roughness
indexes according to a simplified geostatistical approach.

I had no time to develop a full R package, however the developed functions
have been tested and work exactly as the Arcmap version.
If some one is interested on testing the approach, the soruce code for R is
in the folder  "RImplementation". Eventually, I'm available for providing
more information.

https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4223135
https://doi.org/10.5281/zenodo.7132161

By

Sebastiano


*      Sebastiano Trevisani, Ph.D.*
*            Associate Professor*
*Applied and Environmental Geology*


*  https://orcid.org/0000-0001-8436-7798
<https://orcid.org/0000-0001-8436-7798>*
*IUAV University of Venice: www.iuav.it <http://www.iuav.it/>*

*Address: Dorsoduro 2206,  Venice 30123, Italy Tel:    +39. 041. 257
1299Mail:    strevisani at iuav.it <strevisani at iuav.it> *
*"Le opinioni espresse sono riferibili esclusivamente all'autore e non *
* riflettono in alcun modo una posizione ufficiale dello IUAV "*
*"The views expressed are purely those of the writer and may not in
any circumstances be regarded as stating an official position of the IUAV."*

	[[alternative HTML version deleted]]


From @|||ch @end|ng |rom m@||@u@|@edu  Fri Oct  7 18:34:53 2022
From: @|||ch @end|ng |rom m@||@u@|@edu (Alexander Ilich)
Date: Fri, 7 Oct 2022 12:34:53 -0400
Subject: [R-sig-Geo] Raster Data Management Advice
Message-ID: <CABxpgOpeKJkzdTKRamCmQgifuaxJuJbUj7FqLtP3v7sderOXSA@mail.gmail.com>

Hi, I was wondering if anyone has some advice on how to organize raster
data so that it is easily queryable by various attributes (e.g. find me all
the rasters of data type bathymetry, collected by this organization with
10m resolution or finer ). Currently we have data on a server organized
often by when/where it was collected but that can make it difficult to find
specific rasters that meet a certain criteria. I've created a table as a
csv file on github <https://github.com/ailich/WFS_Multibeam_Metadata> where
each row is a raster and it has various column attributes describing it
(e.g. who collected it, what sonar was used, resolution, coordinate system,
etc) and a path to the filename as a temporary solution, but I think some
type of spatial database that would allow for querying and then reading
into R as terra objects, as well as into QGIS and ArcGIS as layers for
visualization would be optimal as multiple project members use these data.
Tools I've come across that seem potentially useful include PostGIS and
Geopackage, but I'm not entirely sure how to properly set them up or if
they'd suit my needs. Any advice would be greatly appreciated.

Thanks,
Alex

	[[alternative HTML version deleted]]


From z|v@n@k@r@m@n @end|ng |rom gm@||@com  Fri Oct  7 18:43:25 2022
From: z|v@n@k@r@m@n @end|ng |rom gm@||@com (Zivan Karaman)
Date: Fri, 7 Oct 2022 18:43:25 +0200
Subject: [R-sig-Geo] Raster Data Management Advice
In-Reply-To: <CABxpgOpeKJkzdTKRamCmQgifuaxJuJbUj7FqLtP3v7sderOXSA@mail.gmail.com>
References: <CABxpgOpeKJkzdTKRamCmQgifuaxJuJbUj7FqLtP3v7sderOXSA@mail.gmail.com>
Message-ID: <CAKtE6yNLjP-0W6WmnNgeOG=sc4sdxQ-mBBFjmBB1+9A-pP2OaQ@mail.gmail.com>

Hi,
Perhaps STAC <https://stacspec.org/en/> could help you?
Best,
Zivan


On Fri, Oct 7, 2022 at 6:35 PM Alexander Ilich <ailich at mail.usf.edu> wrote:
>
> Hi, I was wondering if anyone has some advice on how to organize raster
> data so that it is easily queryable by various attributes (e.g. find me all
> the rasters of data type bathymetry, collected by this organization with
> 10m resolution or finer ). Currently we have data on a server organized
> often by when/where it was collected but that can make it difficult to find
> specific rasters that meet a certain criteria. I've created a table as a
> csv file on github <https://github.com/ailich/WFS_Multibeam_Metadata> where
> each row is a raster and it has various column attributes describing it
> (e.g. who collected it, what sonar was used, resolution, coordinate system,
> etc) and a path to the filename as a temporary solution, but I think some
> type of spatial database that would allow for querying and then reading
> into R as terra objects, as well as into QGIS and ArcGIS as layers for
> visualization would be optimal as multiple project members use these data.
> Tools I've come across that seem potentially useful include PostGIS and
> Geopackage, but I'm not entirely sure how to properly set them up or if
> they'd suit my needs. Any advice would be greatly appreciated.
>
> Thanks,
> Alex
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From edzer@pebe@m@ @end|ng |rom un|-muen@ter@de  Fri Oct  7 21:13:31 2022
From: edzer@pebe@m@ @end|ng |rom un|-muen@ter@de (Edzer Pebesma)
Date: Fri, 7 Oct 2022 21:13:31 +0200
Subject: [R-sig-Geo] Raster Data Management Advice
In-Reply-To: <CAKtE6yNLjP-0W6WmnNgeOG=sc4sdxQ-mBBFjmBB1+9A-pP2OaQ@mail.gmail.com>
References: <CABxpgOpeKJkzdTKRamCmQgifuaxJuJbUj7FqLtP3v7sderOXSA@mail.gmail.com>
 <CAKtE6yNLjP-0W6WmnNgeOG=sc4sdxQ-mBBFjmBB1+9A-pP2OaQ@mail.gmail.com>
Message-ID: <5d7e078d-fa55-7bbf-2dae-7fca65140049@uni-muenster.de>

STAC is clearly the future of catalogues for spatial data, but not 
everyone has gotten there yet. Searching or browsing available STACs is 
helped by stac index, https://stacindex.org/

On 07/10/2022 18:43, Zivan Karaman wrote:
> Hi,
> Perhaps STAC <https://stacspec.org/en/> could help you?
> Best,
> Zivan
> 
> 
> On Fri, Oct 7, 2022 at 6:35 PM Alexander Ilich <ailich at mail.usf.edu> wrote:
>>
>> Hi, I was wondering if anyone has some advice on how to organize raster
>> data so that it is easily queryable by various attributes (e.g. find me all
>> the rasters of data type bathymetry, collected by this organization with
>> 10m resolution or finer ). Currently we have data on a server organized
>> often by when/where it was collected but that can make it difficult to find
>> specific rasters that meet a certain criteria. I've created a table as a
>> csv file on github <https://github.com/ailich/WFS_Multibeam_Metadata> where
>> each row is a raster and it has various column attributes describing it
>> (e.g. who collected it, what sonar was used, resolution, coordinate system,
>> etc) and a path to the filename as a temporary solution, but I think some
>> type of spatial database that would allow for querying and then reading
>> into R as terra objects, as well as into QGIS and ArcGIS as layers for
>> visualization would be optimal as multiple project members use these data.
>> Tools I've come across that seem potentially useful include PostGIS and
>> Geopackage, but I'm not entirely sure how to properly set them up or if
>> they'd suit my needs. Any advice would be greatly appreciated.
>>
>> Thanks,
>> Alex
>>
>>          [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From g||berto@c@m@r@@|npe @end|ng |rom gm@||@com  Fri Oct  7 21:44:11 2022
From: g||berto@c@m@r@@|npe @end|ng |rom gm@||@com (GilbertoCamara)
Date: Fri, 7 Oct 2022 16:44:11 -0300
Subject: [R-sig-Geo] Raster Data Management Advice
In-Reply-To: <5d7e078d-fa55-7bbf-2dae-7fca65140049@uni-muenster.de>
References: <CABxpgOpeKJkzdTKRamCmQgifuaxJuJbUj7FqLtP3v7sderOXSA@mail.gmail.com>
 <CAKtE6yNLjP-0W6WmnNgeOG=sc4sdxQ-mBBFjmBB1+9A-pP2OaQ@mail.gmail.com>
 <5d7e078d-fa55-7bbf-2dae-7fca65140049@uni-muenster.de>
Message-ID: <D5BC404F-E340-41D5-A1EB-3E122C7616ED@inpe.br>

Dear Edzer and Alexander

STAC is rapidly expanding to become a ?de facto? standard. STAC is being adopted by relevant cloud data providers of Earth observation data, such as Microsoft Planetary Computing and Earth on AWS. Its use is gradually replacing the OCG catalogue specification.

The ?rstac? package is able to access STAC endpoints. For examples on how to use the ?rstac? package directly, there is a nice tutorial by Marius Appel (author of the ?gdalcubes? package) that shows how to combine ?rstac? with ?gdalcubes?. It?s available at https://youtu.be/Xlg__2PeTXM?t=3693

For R examples of access to large cloud computing collections using STAC under the hood, please take a look at the following chapter of the ?sits? package documentation: 
https://e-sensing.github.io/sitsbook/earth-observation-data-cubes.html

Hope this helps.

Best
Gilberto
============================
Prof Dr Gilberto Camara
Senior Researcher
National Institute for Space Research (INPE), Brazil
https://gilbertocamara.org/
=============================




> On 7 Oct 2022, at 16:13, Edzer Pebesma <edzer.pebesma at uni-muenster.de> wrote:
> 
> STAC is clearly the future of catalogues for spatial data, but not everyone has gotten there yet. Searching or browsing available STACs is helped by stac index, https://stacindex.org/
> 
> On 07/10/2022 18:43, Zivan Karaman wrote:
>> Hi,
>> Perhaps STAC <https://stacspec.org/en/> could help you?
>> Best,
>> Zivan
>> On Fri, Oct 7, 2022 at 6:35 PM Alexander Ilich <ailich at mail.usf.edu> wrote:
>>> 
>>> Hi, I was wondering if anyone has some advice on how to organize raster
>>> data so that it is easily queryable by various attributes (e.g. find me all
>>> the rasters of data type bathymetry, collected by this organization with
>>> 10m resolution or finer ). Currently we have data on a server organized
>>> often by when/where it was collected but that can make it difficult to find
>>> specific rasters that meet a certain criteria. I've created a table as a
>>> csv file on github <https://github.com/ailich/WFS_Multibeam_Metadata> where
>>> each row is a raster and it has various column attributes describing it
>>> (e.g. who collected it, what sonar was used, resolution, coordinate system,
>>> etc) and a path to the filename as a temporary solution, but I think some
>>> type of spatial database that would allow for querying and then reading
>>> into R as terra objects, as well as into QGIS and ArcGIS as layers for
>>> visualization would be optimal as multiple project members use these data.
>>> Tools I've come across that seem potentially useful include PostGIS and
>>> Geopackage, but I'm not entirely sure how to properly set them up or if
>>> they'd suit my needs. Any advice would be greatly appreciated.
>>> 
>>> Thanks,
>>> Alex
>>> 
>>>         [[alternative HTML version deleted]]
>>> 
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> -- 
> Edzer Pebesma
> Institute for Geoinformatics
> Heisenbergstrasse 2, 48151 Muenster, Germany
> Phone: +49 251 8333081
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From md@umner @end|ng |rom gm@||@com  Sun Oct  9 11:01:12 2022
From: md@umner @end|ng |rom gm@||@com (Michael Sumner)
Date: Sun, 9 Oct 2022 20:01:12 +1100
Subject: [R-sig-Geo] Raster Data Management Advice
In-Reply-To: <CABxpgOpeKJkzdTKRamCmQgifuaxJuJbUj7FqLtP3v7sderOXSA@mail.gmail.com>
References: <CABxpgOpeKJkzdTKRamCmQgifuaxJuJbUj7FqLtP3v7sderOXSA@mail.gmail.com>
Message-ID: <CAAcGz99OABscwD0p_ZHuJNi64fwk-Ls644=z99XWkia8CoRCAg@mail.gmail.com>

I would set up a polygon of the bounding box (in the native projection) of
each raster source, and use fields on those polygons to store the details
of interest: xmin,xmax,ymin,ymax, dimension, resolution, crs, and your
other details. Then hone in a areas of interest for different tasks to see
what set of overlapping data you have for it.

There's a lot of fanfare about STAC, but it's really just a JSON-format
with some of the information you could store on a simple polygon dataset
...with STAC as with so many formats you'd have to shoehorn your data into
that more restrictive form (you can always spit out STAC as a side product
of your own rich summary for less sophisticated uses).

The crux is keeping the details of the source's native
projection independent from the representation you use to query it
spatially IMO, just record what's there. Further, the GDAL warper app-lib
(one level below the gdalwarp.exe) is the right tool for doing general
reads, of any number of sources into one specific window of your choosing
in any projection (you could use your dataset described above to limit
which sources get included). You can easily see what you'd get by merging
any number of sources together, and of course more nuanced situations like
a sensible background with more detailed layers merged over that is very
valuable.

Cheers, Mike



On Sat, Oct 8, 2022 at 3:35 AM Alexander Ilich <ailich at mail.usf.edu> wrote:

> Hi, I was wondering if anyone has some advice on how to organize raster
> data so that it is easily queryable by various attributes (e.g. find me all
> the rasters of data type bathymetry, collected by this organization with
> 10m resolution or finer ). Currently we have data on a server organized
> often by when/where it was collected but that can make it difficult to find
> specific rasters that meet a certain criteria. I've created a table as a
> csv file on github <https://github.com/ailich/WFS_Multibeam_Metadata>
> where
> each row is a raster and it has various column attributes describing it
> (e.g. who collected it, what sonar was used, resolution, coordinate system,
> etc) and a path to the filename as a temporary solution, but I think some
> type of spatial database that would allow for querying and then reading
> into R as terra objects, as well as into QGIS and ArcGIS as layers for
> visualization would be optimal as multiple project members use these data.
> Tools I've come across that seem potentially useful include PostGIS and
> Geopackage, but I'm not entirely sure how to properly set them up or if
> they'd suit my needs. Any advice would be greatly appreciated.
>
> Thanks,
> Alex
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com

	[[alternative HTML version deleted]]


From r@i@1290 m@iii@g oii @im@com  Wed Oct 12 16:44:11 2022
From: r@i@1290 m@iii@g oii @im@com (r@i@1290 m@iii@g oii @im@com)
Date: Wed, 12 Oct 2022 14:44:11 +0000 (UTC)
Subject: [R-sig-Geo] Customizing levelplot coloring scheme in r
References: <1710017014.848068.1665585851506.ref@mail.yahoo.com>
Message-ID: <1710017014.848068.1665585851506@mail.yahoo.com>

I have climate data that I have plotted on a global map using a levelplot map. However, I am trying to adjust the default coloring scheme to allow for only blue and red shades to appear. Ideally, I am trying to showcase blue for the positive values, and red for the negative values, along with a whitish coloring near and at 0. The default coloring scheme isn't bad, but I think a blue-red-white coloring would allow the plot to appear more visually pleasing. Here is the code that I have now to create my current levelplot:

#packages installed


library(raster)
library(ncdf4)
library(maps)
library(maptools)
library(rasterVis)
library(ggplot2)
library(rgdal)
library(sp)
library(gridExtra)
library(grid)
library(RColorBrewer)

#Using levelplot

FPlot10 <- levelplot(FDifference5,margin=F,at=c(seq(-50,150,10)),pretty=TRUE, 
par.settings=mapTheme, main="Higher end")
FM10 <- FPlot10 + latticeExtra::layer(sp.lines(world.outlines.sp))

This yields a range of nice default colors, but I'd like to adopt something with only shades of red and blue (with white at and around 0). I can do it easily in ggplot, but levelplot appears completely different in using color commands (if they exist). Is that even possible in levelplot?
Thank you!
	[[alternative HTML version deleted]]


From edzer@pebe@m@ @end|ng |rom un|-muen@ter@de  Wed Oct 12 23:11:28 2022
From: edzer@pebe@m@ @end|ng |rom un|-muen@ter@de (Edzer Pebesma)
Date: Wed, 12 Oct 2022 23:11:28 +0200
Subject: [R-sig-Geo] Customizing levelplot coloring scheme in r
In-Reply-To: <1710017014.848068.1665585851506@mail.yahoo.com>
References: <1710017014.848068.1665585851506.ref@mail.yahoo.com>
 <1710017014.848068.1665585851506@mail.yahoo.com>
Message-ID: <6af063f9-72c7-a98a-e4d8-c7d0e7b11c35@uni-muenster.de>

Look up the col.regions argument.

On 12/10/2022 16:44, rain1290--- via R-sig-Geo wrote:
> I have climate data that I have plotted on a global map using a levelplot map. However, I am trying to adjust the default coloring scheme to allow for only blue and red shades to appear. Ideally, I am trying to showcase blue for the positive values, and red for the negative values, along with a whitish coloring near and at 0. The default coloring scheme isn't bad, but I think a blue-red-white coloring would allow the plot to appear more visually pleasing. Here is the code that I have now to create my current levelplot:
> 
> #packages installed
> 
> 
> library(raster)
> library(ncdf4)
> library(maps)
> library(maptools)
> library(rasterVis)
> library(ggplot2)
> library(rgdal)
> library(sp)
> library(gridExtra)
> library(grid)
> library(RColorBrewer)
> 
> #Using levelplot
> 
> FPlot10 <- levelplot(FDifference5,margin=F,at=c(seq(-50,150,10)),pretty=TRUE,
> par.settings=mapTheme, main="Higher end")
> FM10 <- FPlot10 + latticeExtra::layer(sp.lines(world.outlines.sp))
> 
> This yields a range of nice default colors, but I'd like to adopt something with only shades of red and blue (with white at and around 0). I can do it easily in ggplot, but levelplot appears completely different in using color commands (if they exist). Is that even possible in levelplot?
> Thank you!
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From @|||ch @end|ng |rom u@|@edu  Thu Oct 13 16:19:55 2022
From: @|||ch @end|ng |rom u@|@edu (Alexander Ilich)
Date: Thu, 13 Oct 2022 14:19:55 +0000
Subject: [R-sig-Geo] Raster Data Management Advice
In-Reply-To: <CAAcGz99OABscwD0p_ZHuJNi64fwk-Ls644=z99XWkia8CoRCAg@mail.gmail.com>
References: <CABxpgOpeKJkzdTKRamCmQgifuaxJuJbUj7FqLtP3v7sderOXSA@mail.gmail.com>
 <CAAcGz99OABscwD0p_ZHuJNi64fwk-Ls644=z99XWkia8CoRCAg@mail.gmail.com>
Message-ID: <DM8PR08MB733679C104C5B1620FBD24E0C6259@DM8PR08MB7336.namprd08.prod.outlook.com>

Thank you everyone for the advice. I have some things to look into.

Thanks,
Alex
________________________________
From: Michael Sumner <mdsumner at gmail.com>
Sent: Sunday, October 9, 2022 5:01 AM
To: Alexander Ilich <ailich at mail.usf.edu>
Cc: r-sig-geo at r-project.org <r-sig-geo at r-project.org>
Subject: Re: [R-sig-Geo] Raster Data Management Advice

I would set up a polygon of the bounding box (in the native projection) of each raster source, and use fields on those polygons to store the details of interest: xmin,xmax,ymin,ymax, dimension, resolution, crs, and your other details. Then hone in a areas of interest for different tasks to see what set of overlapping data you have for it.

There's a lot of fanfare about STAC, but it's really just a JSON-format with some of the information you could store on a simple polygon dataset ...with STAC as with so many formats you'd have to shoehorn your data into that more restrictive form (you can always spit out STAC as a side product of your own rich summary for less sophisticated uses).

The crux is keeping the details of the source's native projection independent from the representation you use to query it spatially IMO, just record what's there. Further, the GDAL warper app-lib (one level below the gdalwarp.exe) is the right tool for doing general reads, of any number of sources into one specific window of your choosing in any projection (you could use your dataset described above to limit which sources get included). You can easily see what you'd get by merging any number of sources together, and of course more nuanced situations like a sensible background with more detailed layers merged over that is very valuable.

Cheers, Mike



On Sat, Oct 8, 2022 at 3:35 AM Alexander Ilich <ailich at mail.usf.edu<mailto:ailich at mail.usf.edu>> wrote:
Hi, I was wondering if anyone has some advice on how to organize raster
data so that it is easily queryable by various attributes (e.g. find me all
the rasters of data type bathymetry, collected by this organization with
10m resolution or finer ). Currently we have data on a server organized
often by when/where it was collected but that can make it difficult to find
specific rasters that meet a certain criteria. I've created a table as a
csv file on github <https://github.com/ailich/WFS_Multibeam_Metadata<https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Failich%2FWFS_Multibeam_Metadata&data=05%7C01%7Cailich%40usf.edu%7Cc45fb8db339c4f5e12eb08daa9d4f41f%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638009029357802723%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=YFHL%2B7tp5i2u6vFxTo5L3zgCu6auS2ttvmttPrNjR9M%3D&reserved=0>> where
each row is a raster and it has various column attributes describing it
(e.g. who collected it, what sonar was used, resolution, coordinate system,
etc) and a path to the filename as a temporary solution, but I think some
type of spatial database that would allow for querying and then reading
into R as terra objects, as well as into QGIS and ArcGIS as layers for
visualization would be optimal as multiple project members use these data.
Tools I've come across that seem potentially useful include PostGIS and
Geopackage, but I'm not entirely sure how to properly set them up or if
they'd suit my needs. Any advice would be greatly appreciated.

Thanks,
Alex

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo<https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&data=05%7C01%7Cailich%40usf.edu%7Cc45fb8db339c4f5e12eb08daa9d4f41f%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638009029357802723%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=z4tucvFujxVkXKkVbv90Wx372fqYdP4VQ5R4qc3ERJ8%3D&reserved=0>


--
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com<mailto:mdsumner at gmail.com>

[EXTERNAL EMAIL] DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.

	[[alternative HTML version deleted]]


From r@i@1290 m@iii@g oii @im@com  Thu Oct 13 18:27:25 2022
From: r@i@1290 m@iii@g oii @im@com (r@i@1290 m@iii@g oii @im@com)
Date: Thu, 13 Oct 2022 16:27:25 +0000 (UTC)
Subject: [R-sig-Geo] Selecting a range of values in a specific column for R
 ggplot
References: <863410464.1448736.1665678445579.ref@mail.yahoo.com>
Message-ID: <863410464.1448736.1665678445579@mail.yahoo.com>

I am trying to select a range of values (i.e. the first 4 values) in a specific column from a table. The column is called "RL45". I tried the following code to create a plot in ggplot:
newplot <- ggplot(data = GEV, aes(x = RL45[1:4])) + geom_density(color = "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location under RCP4.5") + xlim(300, 350)

This results in this strange error:

Error: Aesthetics must be either length 1 or the same as the data (34): x

This is odd, as I selected the first 4 values in that "RL45" column.
Any thoughts would be greatly appreciated!
Thank you,
	[[alternative HTML version deleted]]


From b|@|ev||@t @end|ng |rom gm@||@com  Thu Oct 13 18:37:01 2022
From: b|@|ev||@t @end|ng |rom gm@||@com (=?UTF-8?Q?Bede-Fazekas_=c3=81kos?=)
Date: Thu, 13 Oct 2022 18:37:01 +0200
Subject: [R-sig-Geo] 
 Selecting a range of values in a specific column for R ggplot
In-Reply-To: <863410464.1448736.1665678445579@mail.yahoo.com>
References: <863410464.1448736.1665678445579.ref@mail.yahoo.com>
 <863410464.1448736.1665678445579@mail.yahoo.com>
Message-ID: <ad454955-657d-06c3-42d9-49187b20d398@gmail.com>

Hello,
try
newplot <- ggplot(data = GEV[1:4, ], aes(x = RL45)) + geom_density(color 
= "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location 
under RCP4.5") + xlim(300, 350)
HTH,
?kos
-----------
?kos Bede-Fazekas
Centre for Ecological Research, Hungary

2022.10.13. 18:27 keltez?ssel, rain1290--- via R-sig-Geo ?rta:
> I am trying to select a range of values (i.e. the first 4 values) in a specific column from a table. The column is called "RL45". I tried the following code to create a plot in ggplot:
> newplot <- ggplot(data = GEV, aes(x = RL45[1:4])) + geom_density(color = "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location under RCP4.5") + xlim(300, 350)
>
> This results in this strange error:
>
> Error: Aesthetics must be either length 1 or the same as the data (34): x
>
> This is odd, as I selected the first 4 values in that "RL45" column.
> Any thoughts would be greatly appreciated!
> Thank you,
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From @|||ch @end|ng |rom u@|@edu  Thu Oct 13 18:45:12 2022
From: @|||ch @end|ng |rom u@|@edu (Alexander Ilich)
Date: Thu, 13 Oct 2022 16:45:12 +0000
Subject: [R-sig-Geo] 
 Selecting a range of values in a specific column for R ggplot
In-Reply-To: <863410464.1448736.1665678445579@mail.yahoo.com>
References: <863410464.1448736.1665678445579.ref@mail.yahoo.com>
 <863410464.1448736.1665678445579@mail.yahoo.com>
Message-ID: <DM8PR08MB73361B1801ACC9D089110E29C6259@DM8PR08MB7336.namprd08.prod.outlook.com>

The aesthetic is looking for the name of the variable, so try subsetting the dataframe in the data portion instead.

newplot <- ggplot(data = GEV[1:4,], aes(x = RL45)) + geom_density(color = "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location under RCP4.5") + xlim(300, 350)
________________________________
From: R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of rain1290--- via R-sig-Geo <r-sig-geo at r-project.org>
Sent: Thursday, October 13, 2022 12:27 PM
To: r-sig-geo at r-project.org <r-sig-geo at r-project.org>
Subject: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot

I am trying to select a range of values (i.e. the first 4 values) in a specific column from a table. The column is called "RL45". I tried the following code to create a plot in ggplot:
newplot <- ggplot(data = GEV, aes(x = RL45[1:4])) + geom_density(color = "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location under RCP4.5") + xlim(300, 350)

This results in this strange error:

Error: Aesthetics must be either length 1 or the same as the data (34): x

This is odd, as I selected the first 4 values in that "RL45" column.
Any thoughts would be greatly appreciated!
Thank you,
        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7Cb1a922b685464ea1578208daad37e286%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012752802904543%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=6dbwE4NOy9SeJBqLd52kIv07d1FlRt4Ehj7r4g4R598%3D&amp;reserved=0
[EXTERNAL EMAIL] DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.

	[[alternative HTML version deleted]]


From r@i@1290 m@iii@g oii @im@com  Thu Oct 13 19:08:38 2022
From: r@i@1290 m@iii@g oii @im@com (r@i@1290 m@iii@g oii @im@com)
Date: Thu, 13 Oct 2022 17:08:38 +0000 (UTC)
Subject: [R-sig-Geo] 
 Selecting a range of values in a specific column for R ggplot
In-Reply-To: <ad454955-657d-06c3-42d9-49187b20d398@gmail.com>
References: <863410464.1448736.1665678445579.ref@mail.yahoo.com>
 <863410464.1448736.1665678445579@mail.yahoo.com>
 <ad454955-657d-06c3-42d9-49187b20d398@gmail.com>
Message-ID: <40107445.1471363.1665680919004@mail.yahoo.com>

That you so much! Yes, this stopped the error from appearing.?
>From what I see, though, when I attempt to change the subset from [1:4] to, say, [17:21] or [30:34], I end up with the exact same plots. Why could that be? The idea would be to make different curves on the same plot by changing the subset.


-----Original Message-----
From: Bede-Fazekas ?kos <bfalevlist at gmail.com>
To: r-sig-geo at r-project.org
Sent: Thu, Oct 13, 2022 12:37 pm
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot

Hello,
try
newplot <- ggplot(data = GEV[1:4, ], aes(x = RL45)) + geom_density(color 
= "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location 
under RCP4.5") + xlim(300, 350)
HTH,
?kos
-----------
?kos Bede-Fazekas
Centre for Ecological Research, Hungary

2022.10.13. 18:27 keltez?ssel, rain1290--- via R-sig-Geo ?rta:
> I am trying to select a range of values (i.e. the first 4 values) in a specific column from a table. The column is called "RL45". I tried the following code to create a plot in ggplot:
> newplot <- ggplot(data = GEV, aes(x = RL45[1:4])) + geom_density(color = "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location under RCP4.5") + xlim(300, 350)
>
> This results in this strange error:
>
> Error: Aesthetics must be either length 1 or the same as the data (34): x
>
> This is odd, as I selected the first 4 values in that "RL45" column.
> Any thoughts would be greatly appreciated!
> Thank you,
> ??? [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

	[[alternative HTML version deleted]]


From @|||ch @end|ng |rom u@|@edu  Thu Oct 13 20:07:32 2022
From: @|||ch @end|ng |rom u@|@edu (Alexander Ilich)
Date: Thu, 13 Oct 2022 18:07:32 +0000
Subject: [R-sig-Geo] 
 Selecting a range of values in a specific column for R ggplot
In-Reply-To: <40107445.1471363.1665680919004@mail.yahoo.com>
References: <863410464.1448736.1665678445579.ref@mail.yahoo.com>
 <863410464.1448736.1665678445579@mail.yahoo.com>
 <ad454955-657d-06c3-42d9-49187b20d398@gmail.com>
 <40107445.1471363.1665680919004@mail.yahoo.com>
Message-ID: <DM8PR08MB7336EBD1EF9ED054015DFF84C6259@DM8PR08MB7336.namprd08.prod.outlook.com>

Make sure to include the comma after the numbers so that you're selecting rows x through y and all columns. For example, GEV[17:21,] not GEV[17:21]
________________________________
From: R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of rain1290--- via R-sig-Geo <r-sig-geo at r-project.org>
Sent: Thursday, October 13, 2022 1:08 PM
To: bfalevlist at gmail.com <bfalevlist at gmail.com>; r-sig-geo at r-project.org <r-sig-geo at r-project.org>
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot

That you so much! Yes, this stopped the error from appearing.
>From what I see, though, when I attempt to change the subset from [1:4] to, say, [17:21] or [30:34], I end up with the exact same plots. Why could that be? The idea would be to make different curves on the same plot by changing the subset.


-----Original Message-----
From: Bede-Fazekas ?kos <bfalevlist at gmail.com>
To: r-sig-geo at r-project.org
Sent: Thu, Oct 13, 2022 12:37 pm
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot

Hello,
try
newplot <- ggplot(data = GEV[1:4, ], aes(x = RL45)) + geom_density(color
= "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location
under RCP4.5") + xlim(300, 350)
HTH,
?kos
-----------
?kos Bede-Fazekas
Centre for Ecological Research, Hungary

2022.10.13. 18:27 keltez?ssel, rain1290--- via R-sig-Geo ?rta:
> I am trying to select a range of values (i.e. the first 4 values) in a specific column from a table. The column is called "RL45". I tried the following code to create a plot in ggplot:
> newplot <- ggplot(data = GEV, aes(x = RL45[1:4])) + geom_density(color = "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location under RCP4.5") + xlim(300, 350)
>
> This results in this strange error:
>
> Error: Aesthetics must be either length 1 or the same as the data (34): x
>
> This is odd, as I selected the first 4 values in that "RL45" column.
> Any thoughts would be greatly appreciated!
> Thank you,
>     [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7Cf3a66d57d850475703de08daad3da230%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012777488310075%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=QWh37WcKos58sGkwE6aiccdKPcjlWdcEPBNJ%2FxJDneo%3D&amp;reserved=0

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7Cf3a66d57d850475703de08daad3da230%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012777488466291%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=1jk%2BDyj%2BgAML1JoeJIcsL%2BdwIeBE4eG%2BeR1AU1u5LMM%3D&amp;reserved=0

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7Cf3a66d57d850475703de08daad3da230%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012777488466291%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=1jk%2BDyj%2BgAML1JoeJIcsL%2BdwIeBE4eG%2BeR1AU1u5LMM%3D&amp;reserved=0
[EXTERNAL EMAIL] DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.

	[[alternative HTML version deleted]]


From r@i@1290 m@iii@g oii @im@com  Thu Oct 13 20:13:56 2022
From: r@i@1290 m@iii@g oii @im@com (r@i@1290 m@iii@g oii @im@com)
Date: Thu, 13 Oct 2022 18:13:56 +0000 (UTC)
Subject: [R-sig-Geo] 
 Selecting a range of values in a specific column for R ggplot
In-Reply-To: <DM8PR08MB7336EBD1EF9ED054015DFF84C6259@DM8PR08MB7336.namprd08.prod.outlook.com>
References: <863410464.1448736.1665678445579.ref@mail.yahoo.com>
 <863410464.1448736.1665678445579@mail.yahoo.com>
 <ad454955-657d-06c3-42d9-49187b20d398@gmail.com>
 <40107445.1471363.1665680919004@mail.yahoo.com>
 <DM8PR08MB7336EBD1EF9ED054015DFF84C6259@DM8PR08MB7336.namprd08.prod.outlook.com>
Message-ID: <790892912.1502252.1665684836327@mail.yahoo.com>

That was precisely the problem! Thank you so much!


-----Original Message-----
From: Alexander Ilich <ailich at usf.edu>
To: bfalevlist at gmail.com <bfalevlist at gmail.com>; r-sig-geo at r-project.org <r-sig-geo at r-project.org>; rain1290 at aim.com <rain1290 at aim.com>
Sent: Thu, Oct 13, 2022 2:07 pm
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot

 #yiv4975106143 P {margin-top:0;margin-bottom:0;}Make sure to include the comma after the numbers so that you're selecting rows x through y and all columns. For example,?GEV[17:21,] not?GEV[17:21]From: R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of rain1290--- via R-sig-Geo <r-sig-geo at r-project.org>
Sent: Thursday, October 13, 2022 1:08 PM
To: bfalevlist at gmail.com <bfalevlist at gmail.com>; r-sig-geo at r-project.org <r-sig-geo at r-project.org>
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot?That you so much! Yes, this stopped the error from appearing.
>From what I see, though, when I attempt to change the subset from [1:4] to, say, [17:21] or [30:34], I end up with the exact same plots. Why could that be? The idea would be to make different curves on the same plot by changing the subset.


-----Original Message-----
From: Bede-Fazekas ?kos <bfalevlist at gmail.com>
To: r-sig-geo at r-project.org
Sent: Thu, Oct 13, 2022 12:37 pm
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot

Hello,
try
newplot <- ggplot(data = GEV[1:4, ], aes(x = RL45)) + geom_density(color
= "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location
under RCP4.5") + xlim(300, 350)
HTH,
?kos
-----------
?kos Bede-Fazekas
Centre for Ecological Research, Hungary

2022.10.13. 18:27 keltez?ssel, rain1290--- via R-sig-Geo ?rta:
> I am trying to select a range of values (i.e. the first 4 values) in a specific column from a table. The column is called "RL45". I tried the following code to create a plot in ggplot:
> newplot <- ggplot(data = GEV, aes(x = RL45[1:4])) + geom_density(color = "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location under RCP4.5") + xlim(300, 350)
>
> This results in this strange error:
>
> Error: Aesthetics must be either length 1 or the same as the data (34): x
>
> This is odd, as I selected the first 4 values in that "RL45" column.
> Any thoughts would be greatly appreciated!
> Thank you,
>???? [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7Cf3a66d57d850475703de08daad3da230%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012777488310075%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=QWh37WcKos58sGkwE6aiccdKPcjlWdcEPBNJ%2FxJDneo%3D&amp;reserved=0

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7Cf3a66d57d850475703de08daad3da230%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012777488466291%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=1jk%2BDyj%2BgAML1JoeJIcsL%2BdwIeBE4eG%2BeR1AU1u5LMM%3D&amp;reserved=0

??????? [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7Cf3a66d57d850475703de08daad3da230%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012777488466291%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=1jk%2BDyj%2BgAML1JoeJIcsL%2BdwIeBE4eG%2BeR1AU1u5LMM%3D&amp;reserved=0
[EXTERNAL EMAIL] DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.

	[[alternative HTML version deleted]]


From r@i@1290 m@iii@g oii @im@com  Thu Oct 13 20:21:58 2022
From: r@i@1290 m@iii@g oii @im@com (r@i@1290 m@iii@g oii @im@com)
Date: Thu, 13 Oct 2022 18:21:58 +0000 (UTC)
Subject: [R-sig-Geo] 
 Selecting a range of values in a specific column for R ggplot
In-Reply-To: <DM8PR08MB7336EBD1EF9ED054015DFF84C6259@DM8PR08MB7336.namprd08.prod.outlook.com>
References: <863410464.1448736.1665678445579.ref@mail.yahoo.com>
 <863410464.1448736.1665678445579@mail.yahoo.com>
 <ad454955-657d-06c3-42d9-49187b20d398@gmail.com>
 <40107445.1471363.1665680919004@mail.yahoo.com>
 <DM8PR08MB7336EBD1EF9ED054015DFF84C6259@DM8PR08MB7336.namprd08.prod.outlook.com>
Message-ID: <2037736749.67164.1665685318115@mail.yahoo.com>

Finally, let's say that I wanted to add several lines/curves on the same plot using different subsets, how would we do this? I tried the following:
newplot1 <- ggplot(data=GEV[17:21,], aes(x=RL45)) + geom_density(color="midnightblue") + xlab("One-day max (mm/day)") + ggtitle("Global one-day max Return Level (RCP 4.5)") + xlim(300, 450) + (data=GEV[1:5,], aes(x=RL45)) + geom_density(color="blue")
I receive this error in the process:
Error: unexpected ',' in "newplot1 <- ggplot(data=GEV[17:21,], aes(x=RL45)) + geom_density(color="midnightblue") + xlab("One-day max (mm/day)") + ggtitle("Global one-day max Return Level (RCP 4.5)") + xlim(300, 450) + (d"

Here, I am identifying two different subsets to create two different lines on the same plot, but for some reason, this strange error occurs. Unless, there is a way to specify all of the subsets desired earlier in the command??
Thanks,

-----Original Message-----
From: Alexander Ilich <ailich at usf.edu>
To: bfalevlist at gmail.com <bfalevlist at gmail.com>; r-sig-geo at r-project.org <r-sig-geo at r-project.org>; rain1290 at aim.com <rain1290 at aim.com>
Sent: Thu, Oct 13, 2022 2:07 pm
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot

 #yiv2227645102 P {margin-top:0;margin-bottom:0;}Make sure to include the comma after the numbers so that you're selecting rows x through y and all columns. For example,?GEV[17:21,] not?GEV[17:21]From: R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of rain1290--- via R-sig-Geo <r-sig-geo at r-project.org>
Sent: Thursday, October 13, 2022 1:08 PM
To: bfalevlist at gmail.com <bfalevlist at gmail.com>; r-sig-geo at r-project.org <r-sig-geo at r-project.org>
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot?That you so much! Yes, this stopped the error from appearing.
>From what I see, though, when I attempt to change the subset from [1:4] to, say, [17:21] or [30:34], I end up with the exact same plots. Why could that be? The idea would be to make different curves on the same plot by changing the subset.


-----Original Message-----
From: Bede-Fazekas ?kos <bfalevlist at gmail.com>
To: r-sig-geo at r-project.org
Sent: Thu, Oct 13, 2022 12:37 pm
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot

Hello,
try
newplot <- ggplot(data = GEV[1:4, ], aes(x = RL45)) + geom_density(color
= "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location
under RCP4.5") + xlim(300, 350)
HTH,
?kos
-----------
?kos Bede-Fazekas
Centre for Ecological Research, Hungary

2022.10.13. 18:27 keltez?ssel, rain1290--- via R-sig-Geo ?rta:
> I am trying to select a range of values (i.e. the first 4 values) in a specific column from a table. The column is called "RL45". I tried the following code to create a plot in ggplot:
> newplot <- ggplot(data = GEV, aes(x = RL45[1:4])) + geom_density(color = "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location under RCP4.5") + xlim(300, 350)
>
> This results in this strange error:
>
> Error: Aesthetics must be either length 1 or the same as the data (34): x
>
> This is odd, as I selected the first 4 values in that "RL45" column.
> Any thoughts would be greatly appreciated!
> Thank you,
>???? [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7Cf3a66d57d850475703de08daad3da230%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012777488310075%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=QWh37WcKos58sGkwE6aiccdKPcjlWdcEPBNJ%2FxJDneo%3D&amp;reserved=0

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7Cf3a66d57d850475703de08daad3da230%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012777488466291%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=1jk%2BDyj%2BgAML1JoeJIcsL%2BdwIeBE4eG%2BeR1AU1u5LMM%3D&amp;reserved=0

??????? [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7Cf3a66d57d850475703de08daad3da230%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012777488466291%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=1jk%2BDyj%2BgAML1JoeJIcsL%2BdwIeBE4eG%2BeR1AU1u5LMM%3D&amp;reserved=0
[EXTERNAL EMAIL] DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.

	[[alternative HTML version deleted]]


From @|||ch @end|ng |rom u@|@edu  Thu Oct 13 21:04:47 2022
From: @|||ch @end|ng |rom u@|@edu (Alexander Ilich)
Date: Thu, 13 Oct 2022 19:04:47 +0000
Subject: [R-sig-Geo] 
 Selecting a range of values in a specific column for R ggplot
In-Reply-To: <2037736749.67164.1665685318115@mail.yahoo.com>
References: <863410464.1448736.1665678445579.ref@mail.yahoo.com>
 <863410464.1448736.1665678445579@mail.yahoo.com>
 <ad454955-657d-06c3-42d9-49187b20d398@gmail.com>
 <40107445.1471363.1665680919004@mail.yahoo.com>
 <DM8PR08MB7336EBD1EF9ED054015DFF84C6259@DM8PR08MB7336.namprd08.prod.outlook.com>
 <2037736749.67164.1665685318115@mail.yahoo.com>
Message-ID: <DM8PR08MB7336B2995691BF49CB370104C6259@DM8PR08MB7336.namprd08.prod.outlook.com>

The best way would probably be that you could create a new column indicating which subset each row is in and then set that to the color aesthetic in the aes call. Alternatively, you could call geom_density multiple times and overwrite the data argument and change the color.

For example
GEV$set<-  NA #initialize new column as NA's
# Now create code to fill in the set column appropriately (e.g. as "set1", "set2", "set3", etc)
ggplot(data=GEV[c(1:4, 17:21, 30:34),], aes(x=RL45, color=set)) +
geom_density() +
xlab("One-day max (mm/day)") +
ggtitle("Global one-day max Return Level (RCP 4.5)") +
xlim(300, 450)

OR

ggplot() +
geom_density(data=GEV[1:4,], mapping = aes(x=RL45), color="midnightblue") +
geom_density(data=GEV[17:21,], mapping = aes(x=RL45), color="green")+
geom_density(data=GEV[30:34,], mapping = aes(x=RL45), color="red")+
xlab("One-day max (mm/day)") +
ggtitle("Global one-day max Return Level (RCP 4.5)") +
xlim(300, 450)
________________________________
From: rain1290 at aim.com <rain1290 at aim.com>
Sent: Thursday, October 13, 2022 2:21 PM
To: Alexander Ilich <ailich at usf.edu>; bfalevlist at gmail.com <bfalevlist at gmail.com>; r-sig-geo at r-project.org <r-sig-geo at r-project.org>
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot

Finally, let's say that I wanted to add several lines/curves on the same plot using different subsets, how would we do this? I tried the following:

newplot1 <- ggplot(data=GEV[17:21,], aes(x=RL45)) + geom_density(color="midnightblue") + xlab("One-day max (mm/day)") + ggtitle("Global one-day max Return Level (RCP 4.5)") + xlim(300, 450) + (data=GEV[1:5,], aes(x=RL45)) + geom_density(color="blue")

I receive this error in the process:

Error: unexpected ',' in "newplot1 <- ggplot(data=GEV[17:21,], aes(x=RL45)) + geom_density(color="midnightblue") + xlab("One-day max (mm/day)") + ggtitle("Global one-day max Return Level (RCP 4.5)") + xlim(300, 450) + (d"

Here, I am identifying two different subsets to create two different lines on the same plot, but for some reason, this strange error occurs. Unless, there is a way to specify all of the subsets desired earlier in the command?

Thanks,


-----Original Message-----
From: Alexander Ilich <ailich at usf.edu>
To: bfalevlist at gmail.com <bfalevlist at gmail.com>; r-sig-geo at r-project.org <r-sig-geo at r-project.org>; rain1290 at aim.com <rain1290 at aim.com>
Sent: Thu, Oct 13, 2022 2:07 pm
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot

Make sure to include the comma after the numbers so that you're selecting rows x through y and all columns. For example, GEV[17:21,] not GEV[17:21]
________________________________
From: R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of rain1290--- via R-sig-Geo <r-sig-geo at r-project.org>
Sent: Thursday, October 13, 2022 1:08 PM
To: bfalevlist at gmail.com <bfalevlist at gmail.com>; r-sig-geo at r-project.org <r-sig-geo at r-project.org>
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot

That you so much! Yes, this stopped the error from appearing.
>From what I see, though, when I attempt to change the subset from [1:4] to, say, [17:21] or [30:34], I end up with the exact same plots. Why could that be? The idea would be to make different curves on the same plot by changing the subset.


-----Original Message-----
From: Bede-Fazekas ?kos <bfalevlist at gmail.com>
To: r-sig-geo at r-project.org
Sent: Thu, Oct 13, 2022 12:37 pm
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot

Hello,
try
newplot <- ggplot(data = GEV[1:4, ], aes(x = RL45)) + geom_density(color
= "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location
under RCP4.5") + xlim(300, 350)
HTH,
?kos
-----------
?kos Bede-Fazekas
Centre for Ecological Research, Hungary

2022.10.13. 18:27 keltez?ssel, rain1290--- via R-sig-Geo ?rta:
> I am trying to select a range of values (i.e. the first 4 values) in a specific column from a table. The column is called "RL45". I tried the following code to create a plot in ggplot:
> newplot <- ggplot(data = GEV, aes(x = RL45[1:4])) + geom_density(color = "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location under RCP4.5") + xlim(300, 350)
>
> This results in this strange error:
>
> Error: Aesthetics must be either length 1 or the same as the data (34): x
>
> This is odd, as I selected the first 4 values in that "RL45" column.
> Any thoughts would be greatly appreciated!
> Thank you,
>     [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7Cf3a66d57d850475703de08daad3da230%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012777488310075%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=QWh37WcKos58sGkwE6aiccdKPcjlWdcEPBNJ%2FxJDneo%3D&amp;reserved=0<https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&data=05%7C01%7Cailich%40usf.edu%7C2a4c69288ada463a53f008daad47d19b%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012821228692159%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=1ctTAhqcpFLz4f%2FlXCxq10UkOLa0FY%2FEbWczyhzQP14%3D&reserved=0>

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7Cf3a66d57d850475703de08daad3da230%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012777488466291%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=1jk%2BDyj%2BgAML1JoeJIcsL%2BdwIeBE4eG%2BeR1AU1u5LMM%3D&amp;reserved=0<https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&data=05%7C01%7Cailich%40usf.edu%7C2a4c69288ada463a53f008daad47d19b%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012821228848373%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=FeW7JYUfTBsli%2BA2pIMhbA9AqpWDViNCpL2xxcGpu98%3D&reserved=0>

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7Cf3a66d57d850475703de08daad3da230%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012777488466291%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=1jk%2BDyj%2BgAML1JoeJIcsL%2BdwIeBE4eG%2BeR1AU1u5LMM%3D&amp;reserved=0<https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&data=05%7C01%7Cailich%40usf.edu%7C2a4c69288ada463a53f008daad47d19b%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012821228848373%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=FeW7JYUfTBsli%2BA2pIMhbA9AqpWDViNCpL2xxcGpu98%3D&reserved=0>
[EXTERNAL EMAIL] DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.

[EXTERNAL EMAIL] DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.

	[[alternative HTML version deleted]]


From r@i@1290 m@iii@g oii @im@com  Thu Oct 13 23:16:29 2022
From: r@i@1290 m@iii@g oii @im@com (r@i@1290 m@iii@g oii @im@com)
Date: Thu, 13 Oct 2022 21:16:29 +0000 (UTC)
Subject: [R-sig-Geo] 
 Selecting a range of values in a specific column for R ggplot
In-Reply-To: <DM8PR08MB7336B2995691BF49CB370104C6259@DM8PR08MB7336.namprd08.prod.outlook.com>
References: <863410464.1448736.1665678445579.ref@mail.yahoo.com>
 <863410464.1448736.1665678445579@mail.yahoo.com>
 <ad454955-657d-06c3-42d9-49187b20d398@gmail.com>
 <40107445.1471363.1665680919004@mail.yahoo.com>
 <DM8PR08MB7336EBD1EF9ED054015DFF84C6259@DM8PR08MB7336.namprd08.prod.outlook.com>
 <2037736749.67164.1665685318115@mail.yahoo.com>
 <DM8PR08MB7336B2995691BF49CB370104C6259@DM8PR08MB7336.namprd08.prod.outlook.com>
Message-ID: <682308014.1603605.1665695789231@mail.yahoo.com>

Many, many thanks, Alexander! This is precisely what I wanted to achieve!
Cheers,


-----Original Message-----
From: Alexander Ilich <ailich at usf.edu>
To: bfalevlist at gmail.com <bfalevlist at gmail.com>; r-sig-geo at r-project.org <r-sig-geo at r-project.org>; rain1290 at aim.com <rain1290 at aim.com>
Sent: Thu, Oct 13, 2022 3:04 pm
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot

#yiv5944274138 P {margin-top:0;margin-bottom:0;}The best way would probably be that you could create a new column indicating which subset each row is in and then set that to the color aesthetic in the aes call. Alternatively, you could call geom_density multiple times and overwrite the data argument and change the color.?
For exampleGEV$set<-? NA #initialize new column as NA's# Now create code to fill in the set column appropriately (e.g. as "set1", "set2", "set3", etc)ggplot(data=GEV[c(1:4, 17:21, 30:34),], aes(x=RL45, color=set)) +?geom_density() +?xlab("One-day max (mm/day)") +?ggtitle("Global one-day max Return Level (RCP 4.5)") +?xlim(300, 450)
OR
ggplot() +?geom_density(data=GEV[1:4,], mapping = aes(x=RL45), color="midnightblue") +?geom_density(data=GEV[17:21,], mapping = aes(x=RL45), color="green")+
geom_density(data=GEV[30:34,], mapping = aes(x=RL45), color="red")+
xlab("One-day max (mm/day)") +?ggtitle("Global one-day max Return Level (RCP 4.5)") +?xlim(300, 450)
From: rain1290 at aim.com <rain1290 at aim.com>
Sent: Thursday, October 13, 2022 2:21 PM
To: Alexander Ilich <ailich at usf.edu>; bfalevlist at gmail.com <bfalevlist at gmail.com>; r-sig-geo at r-project.org <r-sig-geo at r-project.org>
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot?Finally, let's say that I wanted to add several lines/curves on the same plot using different subsets, how would we do this? I tried the following:
newplot1 <- ggplot(data=GEV[17:21,], aes(x=RL45)) + geom_density(color="midnightblue") + xlab("One-day max (mm/day)") + ggtitle("Global one-day max Return Level (RCP 4.5)") + xlim(300, 450) + (data=GEV[1:5,], aes(x=RL45)) + geom_density(color="blue")
I receive this error in the process:
Error: unexpected ',' in "newplot1 <- ggplot(data=GEV[17:21,], aes(x=RL45)) + geom_density(color="midnightblue") + xlab("One-day max (mm/day)") + ggtitle("Global one-day max Return Level (RCP 4.5)") + xlim(300, 450) + (d"

Here, I am identifying two different subsets to create two different lines on the same plot, but for some reason, this strange error occurs. Unless, there is a way to specify all of the subsets desired earlier in the command??
Thanks,

-----Original Message-----
From: Alexander Ilich <ailich at usf.edu>
To: bfalevlist at gmail.com <bfalevlist at gmail.com>; r-sig-geo at r-project.org <r-sig-geo at r-project.org>; rain1290 at aim.com <rain1290 at aim.com>
Sent: Thu, Oct 13, 2022 2:07 pm
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot

<!--#yiv5944274138 #yiv5944274138x_yiv2227645102 p {margin-top:0;margin-bottom:0;}-->Make sure to include the comma after the numbers so that you're selecting rows x through y and all columns. For example,?GEV[17:21,] not?GEV[17:21]From: R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of rain1290--- via R-sig-Geo <r-sig-geo at r-project.org>
Sent: Thursday, October 13, 2022 1:08 PM
To: bfalevlist at gmail.com <bfalevlist at gmail.com>; r-sig-geo at r-project.org <r-sig-geo at r-project.org>
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot?That you so much! Yes, this stopped the error from appearing.
>From what I see, though, when I attempt to change the subset from [1:4] to, say, [17:21] or [30:34], I end up with the exact same plots. Why could that be? The idea would be to make different curves on the same plot by changing the subset.


-----Original Message-----
From: Bede-Fazekas ?kos <bfalevlist at gmail.com>
To: r-sig-geo at r-project.org
Sent: Thu, Oct 13, 2022 12:37 pm
Subject: Re: [R-sig-Geo] Selecting a range of values in a specific column for R ggplot

Hello,
try
newplot <- ggplot(data = GEV[1:4, ], aes(x = RL45)) + geom_density(color
= "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location
under RCP4.5") + xlim(300, 350)
HTH,
?kos
-----------
?kos Bede-Fazekas
Centre for Ecological Research, Hungary

2022.10.13. 18:27 keltez?ssel, rain1290--- via R-sig-Geo ?rta:
> I am trying to select a range of values (i.e. the first 4 values) in a specific column from a table. The column is called "RL45". I tried the following code to create a plot in ggplot:
> newplot <- ggplot(data = GEV, aes(x = RL45[1:4])) + geom_density(color = "midnightblue") + xlab("Location (mm/day") + ggtitle("Global Location under RCP4.5") + xlim(300, 350)
>
> This results in this strange error:
>
> Error: Aesthetics must be either length 1 or the same as the data (34): x
>
> This is odd, as I selected the first 4 values in that "RL45" column.
> Any thoughts would be greatly appreciated!
> Thank you,
>???? [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7Cf3a66d57d850475703de08daad3da230%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012777488310075%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=QWh37WcKos58sGkwE6aiccdKPcjlWdcEPBNJ%2FxJDneo%3D&amp;reserved=0

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7Cf3a66d57d850475703de08daad3da230%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012777488466291%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=1jk%2BDyj%2BgAML1JoeJIcsL%2BdwIeBE4eG%2BeR1AU1u5LMM%3D&amp;reserved=0

??????? [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7Cf3a66d57d850475703de08daad3da230%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012777488466291%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=1jk%2BDyj%2BgAML1JoeJIcsL%2BdwIeBE4eG%2BeR1AU1u5LMM%3D&amp;reserved=0
[EXTERNAL EMAIL] DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.
[EXTERNAL EMAIL] DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.
	[[alternative HTML version deleted]]


From g@@@uu| @end|ng |rom gm@||@com  Fri Oct 14 03:28:12 2022
From: g@@@uu| @end|ng |rom gm@||@com (ani jaya)
Date: Fri, 14 Oct 2022 10:28:12 +0900
Subject: [R-sig-Geo] Customizing levelplot coloring scheme in r
In-Reply-To: <6af063f9-72c7-a98a-e4d8-c7d0e7b11c35@uni-muenster.de>
References: <1710017014.848068.1665585851506.ref@mail.yahoo.com>
 <1710017014.848068.1665585851506@mail.yahoo.com>
 <6af063f9-72c7-a98a-e4d8-c7d0e7b11c35@uni-muenster.de>
Message-ID: <CAHXS41zN5j6ZTGHqObHCADJ2Q0iNGP176gFurC=NtJtsqzUNLA@mail.gmail.com>

my suggestion is:

colfunc<-colorRampPalette(c("blue","white","red"))

FPlot10 <- levelplot(FDifference5,margin=F,at=c(seq(-50,150,10)),pretty=TRUE,
col.regions=colfunc(200),...)

Adding a col.regions argument maybe solve the problem.

On Thu, Oct 13, 2022 at 6:11 AM Edzer Pebesma
<edzer.pebesma at uni-muenster.de> wrote:
>
> Look up the col.regions argument.
>
> On 12/10/2022 16:44, rain1290--- via R-sig-Geo wrote:
> > I have climate data that I have plotted on a global map using a levelplot map. However, I am trying to adjust the default coloring scheme to allow for only blue and red shades to appear. Ideally, I am trying to showcase blue for the positive values, and red for the negative values, along with a whitish coloring near and at 0. The default coloring scheme isn't bad, but I think a blue-red-white coloring would allow the plot to appear more visually pleasing. Here is the code that I have now to create my current levelplot:
> >
> > #packages installed
> >
> >
> > library(raster)
> > library(ncdf4)
> > library(maps)
> > library(maptools)
> > library(rasterVis)
> > library(ggplot2)
> > library(rgdal)
> > library(sp)
> > library(gridExtra)
> > library(grid)
> > library(RColorBrewer)
> >
> > #Using levelplot
> >
> > FPlot10 <- levelplot(FDifference5,margin=F,at=c(seq(-50,150,10)),pretty=TRUE,
> > par.settings=mapTheme, main="Higher end")
> > FM10 <- FPlot10 + latticeExtra::layer(sp.lines(world.outlines.sp))
> >
> > This yields a range of nice default colors, but I'd like to adopt something with only shades of red and blue (with white at and around 0). I can do it easily in ggplot, but levelplot appears completely different in using color commands (if they exist). Is that even possible in levelplot?
> > Thank you!
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> --
> Edzer Pebesma
> Institute for Geoinformatics
> Heisenbergstrasse 2, 48151 Muenster, Germany
> Phone: +49 251 8333081
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From johnb@um@ @end|ng |rom gm@||@com  Tue Oct 18 22:06:14 2022
From: johnb@um@ @end|ng |rom gm@||@com (John Baumgartner)
Date: Wed, 19 Oct 2022 07:06:14 +1100
Subject: [R-sig-Geo] Customizing levelplot coloring scheme in r
In-Reply-To: <CAHXS41zN5j6ZTGHqObHCADJ2Q0iNGP176gFurC=NtJtsqzUNLA@mail.gmail.com>
References: <1710017014.848068.1665585851506.ref@mail.yahoo.com>
 <1710017014.848068.1665585851506@mail.yahoo.com>
 <6af063f9-72c7-a98a-e4d8-c7d0e7b11c35@uni-muenster.de>
 <CAHXS41zN5j6ZTGHqObHCADJ2Q0iNGP176gFurC=NtJtsqzUNLA@mail.gmail.com>
Message-ID: <CACpmSOtMkNWbB39Bq1gwTemTpq+W45Um3Hoc0v5-+9YV3Ko1ZQ@mail.gmail.com>

To have the color ramp diverge around 0 (with uneven positive/negative
color ramp extents) you can use
https://gist.github.com/johnbaums/306e4b7e69c87b1826db

devtools::source_gist('306e4b7e69c87b1826db')
diverge0(FPlot10, 'RdBu') + latticeExtra::layer(sp.lines(world.outlines.sp))


On Fri, 14 Oct 2022 at 12:28, ani jaya <gaaauul at gmail.com> wrote:
>
> my suggestion is:
>
> colfunc<-colorRampPalette(c("blue","white","red"))
>
> FPlot10 <- levelplot(FDifference5,margin=F,at=c(seq(-50,150,10)),pretty=TRUE,
> col.regions=colfunc(200),...)
>
> Adding a col.regions argument maybe solve the problem.
>
> On Thu, Oct 13, 2022 at 6:11 AM Edzer Pebesma
> <edzer.pebesma at uni-muenster.de> wrote:
> >
> > Look up the col.regions argument.
> >
> > On 12/10/2022 16:44, rain1290--- via R-sig-Geo wrote:
> > > I have climate data that I have plotted on a global map using a levelplot map. However, I am trying to adjust the default coloring scheme to allow for only blue and red shades to appear. Ideally, I am trying to showcase blue for the positive values, and red for the negative values, along with a whitish coloring near and at 0. The default coloring scheme isn't bad, but I think a blue-red-white coloring would allow the plot to appear more visually pleasing. Here is the code that I have now to create my current levelplot:
> > >
> > > #packages installed
> > >
> > >
> > > library(raster)
> > > library(ncdf4)
> > > library(maps)
> > > library(maptools)
> > > library(rasterVis)
> > > library(ggplot2)
> > > library(rgdal)
> > > library(sp)
> > > library(gridExtra)
> > > library(grid)
> > > library(RColorBrewer)
> > >
> > > #Using levelplot
> > >
> > > FPlot10 <- levelplot(FDifference5,margin=F,at=c(seq(-50,150,10)),pretty=TRUE,
> > > par.settings=mapTheme, main="Higher end")
> > > FM10 <- FPlot10 + latticeExtra::layer(sp.lines(world.outlines.sp))
> > >
> > > This yields a range of nice default colors, but I'd like to adopt something with only shades of red and blue (with white at and around 0). I can do it easily in ggplot, but levelplot appears completely different in using color commands (if they exist). Is that even possible in levelplot?
> > > Thank you!
> > >       [[alternative HTML version deleted]]
> > >
> > > _______________________________________________
> > > R-sig-Geo mailing list
> > > R-sig-Geo at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> > --
> > Edzer Pebesma
> > Institute for Geoinformatics
> > Heisenbergstrasse 2, 48151 Muenster, Germany
> > Phone: +49 251 8333081
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From @|||ch @end|ng |rom u@|@edu  Wed Oct 19 16:40:16 2022
From: @|||ch @end|ng |rom u@|@edu (Alexander Ilich)
Date: Wed, 19 Oct 2022 14:40:16 +0000
Subject: [R-sig-Geo] Customizing levelplot coloring scheme in r
In-Reply-To: <1710017014.848068.1665585851506@mail.yahoo.com>
References: <1710017014.848068.1665585851506.ref@mail.yahoo.com>
 <1710017014.848068.1665585851506@mail.yahoo.com>
Message-ID: <BN0PR08MB73416F5985E0C25602EFD5E5C62B9@BN0PR08MB7341.namprd08.prod.outlook.com>

You could also try using tmap. Within the tm_raster function you can specify a color palette, what value the midpoint of the color palette should be, and even set the breaks so that you have different ranges on each side of zero (e.g go from -5 to +10 instead of -10 to +10).
________________________________
From: R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of rain1290--- via R-sig-Geo <r-sig-geo at r-project.org>
Sent: Wednesday, October 12, 2022 10:44 AM
To: r-sig-geo at r-project.org <r-sig-geo at r-project.org>
Subject: [R-sig-Geo] Customizing levelplot coloring scheme in r

I have climate data that I have plotted on a global map using a levelplot map. However, I am trying to adjust the default coloring scheme to allow for only blue and red shades to appear. Ideally, I am trying to showcase blue for the positive values, and red for the negative values, along with a whitish coloring near and at 0. The default coloring scheme isn't bad, but I think a blue-red-white coloring would allow the plot to appear more visually pleasing. Here is the code that I have now to create my current levelplot:

#packages installed


library(raster)
library(ncdf4)
library(maps)
library(maptools)
library(rasterVis)
library(ggplot2)
library(rgdal)
library(sp)
library(gridExtra)
library(grid)
library(RColorBrewer)

#Using levelplot

FPlot10 <- levelplot(FDifference5,margin=F,at=c(seq(-50,150,10)),pretty=TRUE,
par.settings=mapTheme, main="Higher end")
FM10 <- FPlot10 + latticeExtra::layer(sp.lines(world.outlines.sp))

This yields a range of nice default colors, but I'd like to adopt something with only shades of red and blue (with white at and around 0). I can do it easily in ggplot, but levelplot appears completely different in using color commands (if they exist). Is that even possible in levelplot?
Thank you!
        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7C4cbfb9fce68b4842fec308daac604d98%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012598934423717%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=KMXznsbBZW4onMZbbXkfGscLqIGtITpsO8eoi7c9exo%3D&amp;reserved=0
[EXTERNAL EMAIL] DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.

	[[alternative HTML version deleted]]


From n|ckmwr@y @end|ng |rom gm@||@com  Sat Oct 22 13:06:59 2022
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Sat, 22 Oct 2022 12:06:59 +0100
Subject: [R-sig-Geo] LINESTRING to vector in R
Message-ID: <CABxY9BMvMQesois49wxkcWvJ1=E+XBmZPbwJxQv=q+6Yqa+UHA@mail.gmail.com>

Hello I have downloaded a large shapefile dataset of UK rivers and I want
to isolate (as an ordinary R string) the LINESTRING values for particular
lines, corresponding to rivers
Looking at the first line I can isolate the geometry by

Hello I have downloaded a large shapefile dataset of UK rivers and I want
to isolate (as an ordinary R string) the LINESTRING values for particular
lines, corresponding to rivers

Looking at the first line I can isolate the geometry by



st_geometry(rivers[1,8])



Geometry set for 1 feature
Geometry type: LINESTRING
Dimension:     XYZ
Bounding box:  xmin: 462010.6 ymin: 1213039 xmax: 462306.5 ymax: 1213199
z_range:       zmin: 0 zmax: 0
Projected CRS: OSGB 1936 / British National Grid

LINESTRING Z (462306.5 1213048 0, 462275.4 1213...


What I need is all the values in the LINESTRING as a common or garden R
vector, but I cannot find a way to do this.

 Does anyone know how?  Thanks, Nick Wray

	[[alternative HTML version deleted]]


From t@v|b@r @end|ng |rom gm@||@com  Sat Oct 22 13:29:51 2022
From: t@v|b@r @end|ng |rom gm@||@com (Micha Silver)
Date: Sat, 22 Oct 2022 14:29:51 +0300
Subject: [R-sig-Geo] [R] Opening shapefiles in R
In-Reply-To: <CABxY9BPCOiQjJskYY86qqehOCy8OLQRRkKg_yqeNKE6oEHy25Q@mail.gmail.com>
References: <CABxY9BPCaQT3V4BUHruL5Sj+Y351gmPTYTDOFUmoGWyXF5Ysvg@mail.gmail.com>
 <d0534f85-2115-1bb4-1973-bcab678b1964@gmail.com>
 <CABxY9BPCOiQjJskYY86qqehOCy8OLQRRkKg_yqeNKE6oEHy25Q@mail.gmail.com>
Message-ID: <5f244325-bef1-d733-f724-1de536f96dce@gmail.com>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20221022/3b11e75f/attachment.html>

From edzer@pebe@m@ @end|ng |rom un|-muen@ter@de  Sat Oct 22 18:52:05 2022
From: edzer@pebe@m@ @end|ng |rom un|-muen@ter@de (Edzer Pebesma)
Date: Sat, 22 Oct 2022 18:52:05 +0200
Subject: [R-sig-Geo] LINESTRING to vector in R
In-Reply-To: <CABxY9BMvMQesois49wxkcWvJ1=E+XBmZPbwJxQv=q+6Yqa+UHA@mail.gmail.com>
References: <CABxY9BMvMQesois49wxkcWvJ1=E+XBmZPbwJxQv=q+6Yqa+UHA@mail.gmail.com>
Message-ID: <d821bed3-f63f-2fc7-aabc-5e2550b0d120@uni-muenster.de>

st_as_text(st_geometry(rivers[1,]))

On 22/10/2022 13:06, Nick Wray wrote:
> Hello I have downloaded a large shapefile dataset of UK rivers and I want
> to isolate (as an ordinary R string) the LINESTRING values for particular
> lines, corresponding to rivers
> Looking at the first line I can isolate the geometry by
> 
> Hello I have downloaded a large shapefile dataset of UK rivers and I want
> to isolate (as an ordinary R string) the LINESTRING values for particular
> lines, corresponding to rivers
> 
> Looking at the first line I can isolate the geometry by
> 
> 
> 
> st_geometry(rivers[1,8])
> 
> 
> 
> Geometry set for 1 feature
> Geometry type: LINESTRING
> Dimension:     XYZ
> Bounding box:  xmin: 462010.6 ymin: 1213039 xmax: 462306.5 ymax: 1213199
> z_range:       zmin: 0 zmax: 0
> Projected CRS: OSGB 1936 / British National Grid
> 
> LINESTRING Z (462306.5 1213048 0, 462275.4 1213...
> 
> 
> What I need is all the values in the LINESTRING as a common or garden R
> vector, but I cannot find a way to do this.
> 
>   Does anyone know how?  Thanks, Nick Wray
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From n|ckmwr@y @end|ng |rom gm@||@com  Sun Oct 23 11:08:51 2022
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Sun, 23 Oct 2022 10:08:51 +0100
Subject: [R-sig-Geo] Converting longitude and latitude to UK OS references
Message-ID: <CABxY9BPYwHZf0=qhZMuCWXauC+mYffn9+FiU0B6wj9Qa0__G7w@mail.gmail.com>

I am trying to convert longitude and latitude values for UK weather
stations to UK Ordnance Survey National Grid References.  There are sites
where one can do them one at a time but I have a large number.  I have
found some code which does the conversion and include the first three
points which I want to convert as an example

library(sp)
xy<-as.data.frame(cbind(c(55.8533,55.8551,55.8473),c(-2.38588,-2.39620,-2.11304)))
colnames(xy)<-c("lon","lat")
xy
coordinates(xy)<-~lon+lat
## see site in jounral convert llon lat
proj4string(xy)<-CRS("+init=epsg:4326")
ptsOS<-spTransform(xy,CRS("+init=epsg:27700"))
ptsOS

but it doesn't give the right answers - the output doesn't correspond to
either what I get whn I put an individual point into a conversion site nor
with other points in the same region which I have got from other sources
and are mutually compatible

Can anyone explain where I'm going wrong and how I can fix this?  Thanks
Nick Wray

	[[alternative HTML version deleted]]


From Roger@B|v@nd @end|ng |rom nhh@no  Sun Oct 23 11:37:17 2022
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Sun, 23 Oct 2022 09:37:17 +0000
Subject: [R-sig-Geo] 
 Converting longitude and latitude to UK OS references
In-Reply-To: <CABxY9BPYwHZf0=qhZMuCWXauC+mYffn9+FiU0B6wj9Qa0__G7w@mail.gmail.com>
References: <CABxY9BPYwHZf0=qhZMuCWXauC+mYffn9+FiU0B6wj9Qa0__G7w@mail.gmail.com>
Message-ID: <SV0P279MB0475ECF4425A665347BE16D7EE2F9@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>

Please see https://doi.org/10.1007/s10109-020-00336-0 for the details, and/or
https://cran.r-project.org/web/packages/rgdal/vignettes/CRS_projections_transformations.html. Please try to use sf rather than sp, but both need the proj CDN turned on to access transformation grids. Without the grid(s), the transformation will be off by 1.5m or 120m if only ballpark accuracy.
https://r-spatial.org/book/02-Spaces.html and subsequent sections may also help.

Please report back with progress or questions.

Roger


---
Roger Bivand
Emeritus Professor
Department of Economics
Norwegian School of Economics, Bergen, Norway

________________________________
Fra: R-sig-Geo <r-sig-geo-bounces at r-project.org> p? vegne av Nick Wray <nickmwray at gmail.com>
Sendt: s?ndag 23. oktober 2022, 11:09
Til: r-sig-geo at r-project.org <r-sig-geo at r-project.org>
Emne: [R-sig-Geo] Converting longitude and latitude to UK OS references

I am trying to convert longitude and latitude values for UK weather
stations to UK Ordnance Survey National Grid References.  There are sites
where one can do them one at a time but I have a large number.  I have
found some code which does the conversion and include the first three
points which I want to convert as an example

library(sp)
xy<-as.data.frame(cbind(c(55.8533,55.8551,55.8473),c(-2.38588,-2.39620,-2.11304)))
colnames(xy)<-c("lon","lat")
xy
coordinates(xy)<-~lon+lat
## see site in jounral convert llon lat
proj4string(xy)<-CRS("+init=epsg:4326")
ptsOS<-spTransform(xy,CRS("+init=epsg:27700"))
ptsOS

but it doesn't give the right answers - the output doesn't correspond to
either what I get whn I put an individual point into a conversion site nor
with other points in the same region which I have got from other sources
and are mutually compatible

Can anyone explain where I'm going wrong and how I can fix this?  Thanks
Nick Wray

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7CRoger.Bivand%40nhh.no%7C19c396cda2a44a1b3b8008dab4d64ad0%7C33a15b2f849941998d56f20b5aa91af2%7C0%7C0%7C638021129721378036%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=rJYOSr6oi6lBO0WGc7BVFuyj9ZMkpbt8NK3xR0L2O28%3D&amp;reserved=0


	[[alternative HTML version deleted]]


From rob@rob|n@on @end|ng |rom bto@org  Sun Oct 23 11:43:25 2022
From: rob@rob|n@on @end|ng |rom bto@org (Rob Robinson)
Date: Sun, 23 Oct 2022 10:43:25 +0100
Subject: [R-sig-Geo] 
 Converting longitude and latitude to UK OS references
In-Reply-To: <CABxY9BPYwHZf0=qhZMuCWXauC+mYffn9+FiU0B6wj9Qa0__G7w@mail.gmail.com>
References: <CABxY9BPYwHZf0=qhZMuCWXauC+mYffn9+FiU0B6wj9Qa0__G7w@mail.gmail.com>
Message-ID: <CAGcXcEbj3BDV2nnBxqH6qP47e0Ah2pP-ZcO7k7TZFDXY37pFVQ@mail.gmail.com>

Ummm... If you reverse lon, lat in your colnames() you might be a bit
closer?
Cheers
Rob

*************** Learn about Britain's Birds at www.bto.org/birdfacts
  ******************

Dr Rob Robinson, Associate Director - Research (he/him)
Hon Reader: Univ East Anglia | Visiting Researcher: Swiss Ornithological
Institute
British Trust for Ornithology, The Nunnery, Thetford, Norfolk, IP24 2PU
Ph: +44 (0)1842 750050       T: @btorobrob
E: rob.robinson at bto.org      W: www.bto.org/about-bto/our-staff/rob-robinson

======== "How can anyone be enlightened, when truth is so poorly lit"
========


On Sun, 23 Oct 2022 at 10:09, Nick Wray <nickmwray at gmail.com> wrote:

> I am trying to convert longitude and latitude values for UK weather
> stations to UK Ordnance Survey National Grid References.  There are sites
> where one can do them one at a time but I have a large number.  I have
> found some code which does the conversion and include the first three
> points which I want to convert as an example
>
> library(sp)
>
> xy<-as.data.frame(cbind(c(55.8533,55.8551,55.8473),c(-2.38588,-2.39620,-2.11304)))
> colnames(xy)<-c("lon","lat")
> xy
> coordinates(xy)<-~lon+lat
> ## see site in jounral convert llon lat
> proj4string(xy)<-CRS("+init=epsg:4326")
> ptsOS<-spTransform(xy,CRS("+init=epsg:27700"))
> ptsOS
>
> but it doesn't give the right answers - the output doesn't correspond to
> either what I get whn I put an individual point into a conversion site nor
> with other points in the same region which I have got from other sources
> and are mutually compatible
>
> Can anyone explain where I'm going wrong and how I can fix this?  Thanks
> Nick Wray
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From t@v|b@r @end|ng |rom gm@||@com  Sun Oct 23 13:58:21 2022
From: t@v|b@r @end|ng |rom gm@||@com (Micha Silver)
Date: Sun, 23 Oct 2022 14:58:21 +0300
Subject: [R-sig-Geo] 
 Converting longitude and latitude to UK OS references
In-Reply-To: <CABxY9BPYwHZf0=qhZMuCWXauC+mYffn9+FiU0B6wj9Qa0__G7w@mail.gmail.com>
References: <CABxY9BPYwHZf0=qhZMuCWXauC+mYffn9+FiU0B6wj9Qa0__G7w@mail.gmail.com>
Message-ID: <88986ad6-926e-144b-ba5a-83ee69821314@gmail.com>

Just to combine Rob's and Roger's responses:


library(sf)


# Create a data.frame from text

station_pts<-read.csv(text="Station_ID, Lat, Lon
+ 1, 55.8533, -2.38588
+ 2, 55.8551, -2.39620
+ 3, 55.8473, -2.11304")


# Make an sf object from the DF

# Careful about the order of Lon/Lat

stations<-st_as_sf(station_pts, coords=c("Lon", "Lat"), crs=4326)


# CRS transform

stations_OS <- st_transform(stations, 27700)


str(stations_OS)
Classes ?sf? and 'data.frame':? 3 obs. of? 2 variables:
 ?$ Station_ID: int? 1 2 3
 ?$ geometry? :sfc_POINT of length 3; first list element:? 'XY' num? 
375940 662301
 ?- attr(*, "sf_column")= chr "geometry"
 ?- attr(*, "agr")= Factor w/ 3 levels "constant","aggregate",..: NA
 ? ..- attr(*, "names")= chr "Station_ID"


# Just to be sure, display CRS:

st_crs(stations_OS)
Coordinate Reference System:
 ? User input: EPSG:27700
 ? wkt:
PROJCRS["OSGB 1936 / British National Grid",
 ??? BASEGEOGCRS["OSGB 1936",
 ??????? DATUM["OSGB 1936",
 ??????????? ELLIPSOID["Airy 1830",6377563.396,299.3249646,
 ??????????????? LENGTHUNIT["metre",1]]],
 ??????? PRIMEM["Greenwich",0,
 ??????????? ANGLEUNIT["degree",0.0174532925199433]],
 ??????? ID["EPSG",4277]],
 ??? CONVERSION["British National Grid",
 ??????? METHOD["Transverse Mercator",
 ??????????? ID["EPSG",9807]],
 ??????? PARAMETER["Latitude of natural origin",49,
 ??????????? ANGLEUNIT["degree",0.0174532925199433],
 ??????????? ID["EPSG",8801]],
 ??????? PARAMETER["Longitude of natural origin",-2,
 ??????????? ANGLEUNIT["degree",0.0174532925199433],
 ??????????? ID["EPSG",8802]],
 ??????? PARAMETER["Scale factor at natural origin",0.9996012717,
 ??????????? SCALEUNIT["unity",1],
 ??????????? ID["EPSG",8805]],
 ??????? PARAMETER["False easting",400000,
 ??????????? LENGTHUNIT["metre",1],
 ??????????? ID["EPSG",8806]],
 ??????? PARAMETER["False northing",-100000,
 ??????????? LENGTHUNIT["metre",1],
 ??????????? ID["EPSG",8807]]],
 ??? CS[Cartesian,2],
 ??????? AXIS["(E)",east,
 ??????????? ORDER[1],
 ??????????? LENGTHUNIT["metre",1]],
 ??????? AXIS["(N)",north,
 ??????????? ORDER[2],
 ??????????? LENGTHUNIT["metre",1]],
 ??? USAGE[
 ??????? SCOPE["Engineering survey, topographic mapping."],
 ??????? AREA["United Kingdom (UK) - offshore to boundary of UKCS within 
49?45'N to 61?N and 9?W to 2?E; onshore Great Britain (England, Wales 
and Scotland). Isle of Man onshore."],
 ??????? BBOX[49.75,-9,61.01,2.01]],
 ??? ID["EPSG",27700]]


If you have your station Long/Lat coordinates in a CSV file, then 
`st_read()` will read directly into an sf object.


On 23/10/2022 12:08, Nick Wray wrote:
> I am trying to convert longitude and latitude values for UK weather
> stations to UK Ordnance Survey National Grid References.  There are sites
> where one can do them one at a time but I have a large number.  I have
> found some code which does the conversion and include the first three
> points which I want to convert as an example
>
> library(sp)
> xy<-as.data.frame(cbind(c(55.8533,55.8551,55.8473),c(-2.38588,-2.39620,-2.11304)))
> colnames(xy)<-c("lon","lat")
> xy
> coordinates(xy)<-~lon+lat
> ## see site in jounral convert llon lat
> proj4string(xy)<-CRS("+init=epsg:4326")
> ptsOS<-spTransform(xy,CRS("+init=epsg:27700"))
> ptsOS
>
> but it doesn't give the right answers - the output doesn't correspond to
> either what I get whn I put an individual point into a conversion site nor
> with other points in the same region which I have got from other sources
> and are mutually compatible
>
> Can anyone explain where I'm going wrong and how I can fix this?  Thanks
> Nick Wray
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Micha Silver
Ben Gurion Univ.
Sde Boker, Remote Sensing Lab
cell: +972-523-665918
https://orcid.org/0000-0002-1128-1325


From Roger@B|v@nd @end|ng |rom nhh@no  Sun Oct 23 16:33:49 2022
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Sun, 23 Oct 2022 14:33:49 +0000
Subject: [R-sig-Geo] 
 Converting longitude and latitude to UK OS references
In-Reply-To: <88986ad6-926e-144b-ba5a-83ee69821314@gmail.com>
References: <CABxY9BPYwHZf0=qhZMuCWXauC+mYffn9+FiU0B6wj9Qa0__G7w@mail.gmail.com>
 <88986ad6-926e-144b-ba5a-83ee69821314@gmail.com>
Message-ID: <SV0P279MB0475C531DEFB849E43F1E65CEE2F9@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>

Sorry for top-posting, travelling:

Set the environment variable PROJ_NETWORK=ON, and start R, or Sys.setenv("PROJ_NETWORK"="ON") before loading sf:

library(sf)
station_pts<-read.csv(text="Station_ID, Lat, Lon
1, 55.8533, -2.38588
2, 55.8551, -2.39620
3, 55.8473, -2.11304")
stations<-st_as_sf(station_pts, coords=c("Lon", "Lat"), crs="OGC:CRS84")
sf_proj_network()
sf_proj_network(FALSE)
o <- sf_proj_pipelines("OGC:CRS84", "EPSG:27700")
o$definition
o$accuracy
stations_OS_no_cdn <- st_transform(stations, "EPSG:27700", pipeline=o$definition[1])
stations_OS_no_cdn
sf_proj_network(TRUE)
stations_OS <- st_transform(stations, "EPSG:27700")
stations_OS

There is about a 1m difference between the transformation using a grid and the best Helmert transformation. My guess is that even after other corrections, the online point-at-a-time transformation pages use a grid rather than a Helmert transformation. There is usually a reason for observed differences, and https://cdn.proj.org is a very useful resource where mapping agencies have contributed grids.

Roger

--
Roger Bivand
Emeritus Professor
Norwegian School of Economics
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
Roger.Bivand at nhh.no

________________________________________
From: R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of Micha Silver <tsvibar at gmail.com>
Sent: 23 October 2022 13:58
To: Nick Wray; r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo]  Converting longitude and latitude to UK OS references

Just to combine Rob's and Roger's responses:


library(sf)


# Create a data.frame from text

station_pts<-read.csv(text="Station_ID, Lat, Lon
+ 1, 55.8533, -2.38588
+ 2, 55.8551, -2.39620
+ 3, 55.8473, -2.11304")


# Make an sf object from the DF

# Careful about the order of Lon/Lat

stations<-st_as_sf(station_pts, coords=c("Lon", "Lat"), crs=4326)


# CRS transform

stations_OS <- st_transform(stations, 27700)


str(stations_OS)
Classes ?sf? and 'data.frame':  3 obs. of  2 variables:
  $ Station_ID: int  1 2 3
  $ geometry  :sfc_POINT of length 3; first list element:  'XY' num
375940 662301
  - attr(*, "sf_column")= chr "geometry"
  - attr(*, "agr")= Factor w/ 3 levels "constant","aggregate",..: NA
   ..- attr(*, "names")= chr "Station_ID"


# Just to be sure, display CRS:

st_crs(stations_OS)
Coordinate Reference System:
   User input: EPSG:27700
   wkt:
PROJCRS["OSGB 1936 / British National Grid",
     BASEGEOGCRS["OSGB 1936",
         DATUM["OSGB 1936",
             ELLIPSOID["Airy 1830",6377563.396,299.3249646,
                 LENGTHUNIT["metre",1]]],
         PRIMEM["Greenwich",0,
             ANGLEUNIT["degree",0.0174532925199433]],
         ID["EPSG",4277]],
     CONVERSION["British National Grid",
         METHOD["Transverse Mercator",
             ID["EPSG",9807]],
         PARAMETER["Latitude of natural origin",49,
             ANGLEUNIT["degree",0.0174532925199433],
             ID["EPSG",8801]],
         PARAMETER["Longitude of natural origin",-2,
             ANGLEUNIT["degree",0.0174532925199433],
             ID["EPSG",8802]],
         PARAMETER["Scale factor at natural origin",0.9996012717,
             SCALEUNIT["unity",1],
             ID["EPSG",8805]],
         PARAMETER["False easting",400000,
             LENGTHUNIT["metre",1],
             ID["EPSG",8806]],
         PARAMETER["False northing",-100000,
             LENGTHUNIT["metre",1],
             ID["EPSG",8807]]],
     CS[Cartesian,2],
         AXIS["(E)",east,
             ORDER[1],
             LENGTHUNIT["metre",1]],
         AXIS["(N)",north,
             ORDER[2],
             LENGTHUNIT["metre",1]],
     USAGE[
         SCOPE["Engineering survey, topographic mapping."],
         AREA["United Kingdom (UK) - offshore to boundary of UKCS within
49?45'N to 61?N and 9?W to 2?E; onshore Great Britain (England, Wales
and Scotland). Isle of Man onshore."],
         BBOX[49.75,-9,61.01,2.01]],
     ID["EPSG",27700]]


If you have your station Long/Lat coordinates in a CSV file, then
`st_read()` will read directly into an sf object.


On 23/10/2022 12:08, Nick Wray wrote:
> I am trying to convert longitude and latitude values for UK weather
> stations to UK Ordnance Survey National Grid References.  There are sites
> where one can do them one at a time but I have a large number.  I have
> found some code which does the conversion and include the first three
> points which I want to convert as an example
>
> library(sp)
> xy<-as.data.frame(cbind(c(55.8533,55.8551,55.8473),c(-2.38588,-2.39620,-2.11304)))
> colnames(xy)<-c("lon","lat")
> xy
> coordinates(xy)<-~lon+lat
> ## see site in jounral convert llon lat
> proj4string(xy)<-CRS("+init=epsg:4326")
> ptsOS<-spTransform(xy,CRS("+init=epsg:27700"))
> ptsOS
>
> but it doesn't give the right answers - the output doesn't correspond to
> either what I get whn I put an individual point into a conversion site nor
> with other points in the same region which I have got from other sources
> and are mutually compatible
>
> Can anyone explain where I'm going wrong and how I can fix this?  Thanks
> Nick Wray
>
>       [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7CRoger.Bivand%40nhh.no%7C68be57c5516345d3e61a08dab4edf0ee%7C33a15b2f849941998d56f20b5aa91af2%7C0%7C0%7C638021231300728219%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=mqCLcKYV2K%2FuxI3wmkhC6QMbALy5Y7uuVXBHkVoyAxE%3D&amp;reserved=0

--
Micha Silver
Ben Gurion Univ.
Sde Boker, Remote Sensing Lab
cell: +972-523-665918
https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Forcid.org%2F0000-0002-1128-1325&amp;data=05%7C01%7CRoger.Bivand%40nhh.no%7C68be57c5516345d3e61a08dab4edf0ee%7C33a15b2f849941998d56f20b5aa91af2%7C0%7C0%7C638021231300728219%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=5IJ6yY1pJaYtRglQLNV%2FJY3SfktRn0864FPres66CSI%3D&amp;reserved=0

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7CRoger.Bivand%40nhh.no%7C68be57c5516345d3e61a08dab4edf0ee%7C33a15b2f849941998d56f20b5aa91af2%7C0%7C0%7C638021231300728219%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=mqCLcKYV2K%2FuxI3wmkhC6QMbALy5Y7uuVXBHkVoyAxE%3D&amp;reserved=0


From r@i@1290 m@iii@g oii @im@com  Sun Oct 23 17:37:30 2022
From: r@i@1290 m@iii@g oii @im@com (r@i@1290 m@iii@g oii @im@com)
Date: Sun, 23 Oct 2022 15:37:30 +0000 (UTC)
Subject: [R-sig-Geo] Customizing levelplot coloring scheme in r
In-Reply-To: <BN0PR08MB73416F5985E0C25602EFD5E5C62B9@BN0PR08MB7341.namprd08.prod.outlook.com>
References: <1710017014.848068.1665585851506.ref@mail.yahoo.com>
 <1710017014.848068.1665585851506@mail.yahoo.com>
 <BN0PR08MB73416F5985E0C25602EFD5E5C62B9@BN0PR08MB7341.namprd08.prod.outlook.com>
Message-ID: <627209605.2124707.1666539450110@mail.yahoo.com>

Thank you for this suggestion! This worked well, too!

-----Original Message-----
From: Alexander Ilich <ailich at usf.edu>
To: r-sig-geo at r-project.org <r-sig-geo at r-project.org>; rain1290 at aim.com <rain1290 at aim.com>
Sent: Wed, Oct 19, 2022 10:40 am
Subject: Re: [R-sig-Geo] Customizing levelplot coloring scheme in r

 #yiv3333564620 P {margin-top:0;margin-bottom:0;}You could also try using tmap. Within the tm_raster function you can specify a color palette, what value the midpoint of the color palette should be, and even set the breaks so that you have different ranges on each side of zero (e.g go from -5 to +10 instead of -10 to +10).From: R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of rain1290--- via R-sig-Geo <r-sig-geo at r-project.org>
Sent: Wednesday, October 12, 2022 10:44 AM
To: r-sig-geo at r-project.org <r-sig-geo at r-project.org>
Subject: [R-sig-Geo] Customizing levelplot coloring scheme in r?I have climate data that I have plotted on a global map using a levelplot map. However, I am trying to adjust the default coloring scheme to allow for only blue and red shades to appear. Ideally, I am trying to showcase blue for the positive values, and red for the negative values, along with a whitish coloring near and at 0. The default coloring scheme isn't bad, but I think a blue-red-white coloring would allow the plot to appear more visually pleasing. Here is the code that I have now to create my current levelplot:

#packages installed


library(raster)
library(ncdf4)
library(maps)
library(maptools)
library(rasterVis)
library(ggplot2)
library(rgdal)
library(sp)
library(gridExtra)
library(grid)
library(RColorBrewer)

#Using levelplot

FPlot10 <- levelplot(FDifference5,margin=F,at=c(seq(-50,150,10)),pretty=TRUE,
par.settings=mapTheme, main="Higher end")
FM10 <- FPlot10 + latticeExtra::layer(sp.lines(world.outlines.sp))

This yields a range of nice default colors, but I'd like to adopt something with only shades of red and blue (with white at and around 0). I can do it easily in ggplot, but levelplot appears completely different in using color commands (if they exist). Is that even possible in levelplot?
Thank you!
??????? [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&amp;data=05%7C01%7Cailich%40usf.edu%7C4cbfb9fce68b4842fec308daac604d98%7C741bf7dee2e546df8d6782607df9deaa%7C0%7C0%7C638012598934423717%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=KMXznsbBZW4onMZbbXkfGscLqIGtITpsO8eoi7c9exo%3D&amp;reserved=0
[EXTERNAL EMAIL] DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.

	[[alternative HTML version deleted]]


From P|etro_te|@to @end|ng |rom hotm@||@com  Mon Oct 24 15:52:53 2022
From: P|etro_te|@to @end|ng |rom hotm@||@com (Pietro Andre Telatin Paschoalino)
Date: Mon, 24 Oct 2022 13:52:53 +0000
Subject: [R-sig-Geo] Extracting Temperature by exactextractr
Message-ID: <SJ0PR06MB708308BC359290BC7227D8BA822E9@SJ0PR06MB7083.namprd06.prod.outlook.com>

Hello everyone, I am getting the year 2016 monthly average temperature for my shapefile polygons.

My data is cru_ts4.05.2011.2020.tmp.dat.nc

Follow my code. And at the end of the code my questions, if you can help.

Rasterdata <- cruts2raster("cru_ts4.05.2011.2020.tmp.dat.nc",
                      timeRange=c("2016-01-01","2017-01-01"))

rasterdata

# # checking raster crs
cat(wkt(crs(rasterdata)), "\n")

# getting shapefile

datasets <- list_geobr()

print(datasets)

micro <- read_micro_region(year=2013)

options(max.print = 9999)

print(micro[3:4],n=558)

sf::sf_use_s2(TRUE)
sf::st_is_longlat(micro)

#  checking CRS Shapefile.

st_crs(micro)

#switching to the same CRS as the raster to do extraction.

shape<-st_transform(micro, crs(rasterdata))

st_crs(shape)
#same.

#doing extraction through exact_extract.

weath_dt = as.data.frame(matrix(NA,nrow(micro),14))
weath_dt[,1] = shape$code_micro
weath_dt[,2] = shape$name_micro

for (i in 1:length(rasterdata at layers)) {
  weath_dt[,2+i] = exactextractr::exact_extract(rasterdata[[i]], shape, 'mean')
}

#generating average

#checking for Na

apply(weath_dt, 2, function(x) {sum(is.na(x))})

#all very well.

library(dplyr)

weath_dt[,15] <- rowMeans(weath_dt[,3:14])

shape$avetemp <- weath_dt[,15]

print(shape[6:7],n=558)

st_write(shape, dsn = ".", layer = "SHAPE.shp", driver = "ESRI Shapefile")

My questions:

#Code is OK?
#Any problem with the resolution or size of the polygons to the result of the extraction?
# From what I've seen the algorithm already considers the weighted average by the fraction of the cell that covers the polygon. I think it would be better than the simple average, right?
#result generated are in shapefile ID order?
#how to put raster CRS in 4326 before extraction? So, the shapefile's CRS would also end up in 4326. I believe they are in WGS 84 would this generate the same result for my extractions if they were in EPSG 4326?

Thanks.

Pietro Andre Telatin Paschoalino
Doutor em Ci?ncias Econ?micas pela Universidade Estadual de Maring? - PCE.
Professor tempor?rio do departamento de Economia da UEM.

	[[alternative HTML version deleted]]


From p|etro_te|@to @end|ng |rom hotm@||@com  Wed Oct 26 15:54:15 2022
From: p|etro_te|@to @end|ng |rom hotm@||@com (Pietro Andre Telatin Paschoalino)
Date: Wed, 26 Oct 2022 13:54:15 +0000
Subject: [R-sig-Geo] Extracting Temperature by exactextractr
In-Reply-To: <SJ0PR06MB708308BC359290BC7227D8BA822E9@SJ0PR06MB7083.namprd06.prod.outlook.com>
References: <SJ0PR06MB708308BC359290BC7227D8BA822E9@SJ0PR06MB7083.namprd06.prod.outlook.com>
Message-ID: <SJ0PR06MB708373C5658C975F0F3CAB1082309@SJ0PR06MB7083.namprd06.prod.outlook.com>

Sorry, forgot the packages:

library(raster)
library(sp)
library(geobr)
library(sf)
library(cruts)
library(exactextractr)

Pietro Andre Telatin Paschoalino
Doutor em Ci?ncias Econ?micas pela Universidade Estadual de Maring? - PCE.
Professor tempor?rio do departamento de Economia da UEM.
________________________________
De: R-sig-Geo <r-sig-geo-bounces at r-project.org> em nome de Pietro Andre Telatin Paschoalino <Pietro_telato at hotmail.com>
Enviado: segunda-feira, 24 de outubro de 2022 10:52
Para: r-sig-geo at r-project.org <r-sig-geo at r-project.org>
Assunto: [R-sig-Geo] Extracting Temperature by exactextractr

Hello everyone, I am getting the year 2016 monthly average temperature for my shapefile polygons.

My data is cru_ts4.05.2011.2020.tmp.dat.nc

Follow my code. And at the end of the code my questions, if you can help.

Rasterdata <- cruts2raster("cru_ts4.05.2011.2020.tmp.dat.nc",
                      timeRange=c("2016-01-01","2017-01-01"))

rasterdata

# # checking raster crs
cat(wkt(crs(rasterdata)), "\n")

# getting shapefile

datasets <- list_geobr()

print(datasets)

micro <- read_micro_region(year=2013)

options(max.print = 9999)

print(micro[3:4],n=558)

sf::sf_use_s2(TRUE)
sf::st_is_longlat(micro)

#  checking CRS Shapefile.

st_crs(micro)

#switching to the same CRS as the raster to do extraction.

shape<-st_transform(micro, crs(rasterdata))

st_crs(shape)
#same.

#doing extraction through exact_extract.

weath_dt = as.data.frame(matrix(NA,nrow(micro),14))
weath_dt[,1] = shape$code_micro
weath_dt[,2] = shape$name_micro

for (i in 1:length(rasterdata at layers)) {
  weath_dt[,2+i] = exactextractr::exact_extract(rasterdata[[i]], shape, 'mean')
}

#generating average

#checking for Na

apply(weath_dt, 2, function(x) {sum(is.na(x))})

#all very well.

library(dplyr)

weath_dt[,15] <- rowMeans(weath_dt[,3:14])

shape$avetemp <- weath_dt[,15]

print(shape[6:7],n=558)

st_write(shape, dsn = ".", layer = "SHAPE.shp", driver = "ESRI Shapefile")

My questions:

#Code is OK?
#Any problem with the resolution or size of the polygons to the result of the extraction?
# From what I've seen the algorithm already considers the weighted average by the fraction of the cell that covers the polygon. I think it would be better than the simple average, right?
#result generated are in shapefile ID order?
#how to put raster CRS in 4326 before extraction? So, the shapefile's CRS would also end up in 4326. I believe they are in WGS 84 would this generate the same result for my extractions if they were in EPSG 4326?

Thanks.

Pietro Andre Telatin Paschoalino
Doutor em Ci?ncias Econ?micas pela Universidade Estadual de Maring? - PCE.
Professor tempor?rio do departamento de Economia da UEM.

        [[alternative HTML version deleted]]


	[[alternative HTML version deleted]]


From nev||@@mo@ @end|ng |rom gm@||@com  Thu Oct 27 09:39:37 2022
From: nev||@@mo@ @end|ng |rom gm@||@com (nevil amos)
Date: Thu, 27 Oct 2022 18:39:37 +1100
Subject: [R-sig-Geo] Raster attribute with multiple attribute columns in
 terra
Message-ID: <CAN9eD7m6Fh9oH7ca-Bn5_G-kjqVmxc6MwppsKs3bRgLzjMOxKQ@mail.gmail.com>

Hi,

I have been trying to figure out how to construct a raster attribute table
with multiple columns  in a SpatRaster in terra.

I have the process in raster::raster(), but when attempting in terra only
the first attribute is retained in the table.

I have seen the posting here:
https://gis.stackexchange.com/questions/391215/attribute-table-in-r-terra-package
that deals with one attribute.
I cannot see the mentioned extended workaround ?
Robert Hijmans <https://gis.stackexchange.com/users/8993/robert-hijmans>
 Mar 30, 2021 at 3:59
<https://gis.stackexchange.com/questions/391215/attribute-table-in-r-terra-package#comment642240_392453>
 that may deal with multiple attribute columns .

r<-terra::rast(matrix(sample(1:3,100,replace=T),10,10))
R<-raster::raster(r)

rat<-data.frame(ID=1:3,Val1=letters[1:3],Val2=LETTERS[8:10])

#Assign rat to r
levels(r)<-rat

# r has categories Val1, Val2  but table only shows column for ID and Val1
r
levels(r)

#in package raster full attribute table is attached

R<-raster::ratify(R)
levels(R)<-rat
R
levels(R)

	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Fri Oct 28 22:15:35 2022
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Fri, 28 Oct 2022 14:15:35 -0600
Subject: [R-sig-Geo] Data recommendation
Message-ID: <CACxE24n3Z5=kcew44h+ntSvR0LZaXtDWA2=c7tXX0+R_Do49iA@mail.gmail.com>

Hello!

How are you?

Could someone recommend a spatial data set with about 30000 observations,
please?  I'm hoping for one that can be easily downloaded.

Thank you,
Sincerely,
Erin

Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From jo@|@h@p@rry @end|ng |rom gm@||@com  Fri Oct 28 22:27:29 2022
From: jo@|@h@p@rry @end|ng |rom gm@||@com (Josiah Parry)
Date: Fri, 28 Oct 2022 16:27:29 -0400
Subject: [R-sig-Geo] Data recommendation
In-Reply-To: <CACxE24n3Z5=kcew44h+ntSvR0LZaXtDWA2=c7tXX0+R_Do49iA@mail.gmail.com>
References: <CACxE24n3Z5=kcew44h+ntSvR0LZaXtDWA2=c7tXX0+R_Do49iA@mail.gmail.com>
Message-ID: <CAL3ufUJub8ag_8OjPeSXOpqxshsM57ZcCH6sZ5mNuSBqrvR_rg@mail.gmail.com>

Hey Erin,

You could download 10 years of US census data at the county level. That
will be about 32k observations. Do you have any more constraints than the
number of observations?

On Fri, Oct 28, 2022 at 4:15 PM Erin Hodgess <erinm.hodgess at gmail.com>
wrote:

> Hello!
>
> How are you?
>
> Could someone recommend a spatial data set with about 30000 observations,
> please?  I'm hoping for one that can be easily downloaded.
>
> Thank you,
> Sincerely,
> Erin
>
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Fri Oct 28 22:34:44 2022
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Fri, 28 Oct 2022 14:34:44 -0600
Subject: [R-sig-Geo] Data recommendation
In-Reply-To: <CAL3ufUJub8ag_8OjPeSXOpqxshsM57ZcCH6sZ5mNuSBqrvR_rg@mail.gmail.com>
References: <CACxE24n3Z5=kcew44h+ntSvR0LZaXtDWA2=c7tXX0+R_Do49iA@mail.gmail.com>
 <CAL3ufUJub8ag_8OjPeSXOpqxshsM57ZcCH6sZ5mNuSBqrvR_rg@mail.gmail.com>
Message-ID: <CACxE24kD-BdSZQbkAe3wuupiSLR5Je9ktBx9rTQwXTTzGv7Tgw@mail.gmail.com>

No other constraints, please.

This is great, thank you!

Sincerely,
Erin


On Fri, Oct 28, 2022 at 2:27 PM Josiah Parry <josiah.parry at gmail.com> wrote:

> Hey Erin,
>
> You could download 10 years of US census data at the county level. That
> will be about 32k observations. Do you have any more constraints than the
> number of observations?
>
> On Fri, Oct 28, 2022 at 4:15 PM Erin Hodgess <erinm.hodgess at gmail.com>
> wrote:
>
>> Hello!
>>
>> How are you?
>>
>> Could someone recommend a spatial data set with about 30000 observations,
>> please?  I'm hoping for one that can be easily downloaded.
>>
>> Thank you,
>> Sincerely,
>> Erin
>>
>> Erin Hodgess, PhD
>> mailto: erinm.hodgess at gmail.com
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> --
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From rom@n@|u@tr|k @end|ng |rom gm@||@com  Sat Oct 29 09:17:23 2022
From: rom@n@|u@tr|k @end|ng |rom gm@||@com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Sat, 29 Oct 2022 09:17:23 +0200
Subject: [R-sig-Geo] Data recommendation
In-Reply-To: <CACxE24n3Z5=kcew44h+ntSvR0LZaXtDWA2=c7tXX0+R_Do49iA@mail.gmail.com>
References: <CACxE24n3Z5=kcew44h+ntSvR0LZaXtDWA2=c7tXX0+R_Do49iA@mail.gmail.com>
Message-ID: <CAHT1vpg6ouJP1jkhdBLn25v2ponhT5eFX-6Zi9x8_paBPrcTwQ@mail.gmail.com>

iNaturalist has an exposed API that can be used to download as many data
points as you want.
Granted, it's not trivial to download, but not hard either.

https://www.inaturalist.org/pages/api+reference

Cheers,
Roman

On Fri, Oct 28, 2022 at 10:16 PM Erin Hodgess <erinm.hodgess at gmail.com>
wrote:

> Hello!
>
> How are you?
>
> Could someone recommend a spatial data set with about 30000 observations,
> please?  I'm hoping for one that can be easily downloaded.
>
> Thank you,
> Sincerely,
> Erin
>
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


-- 
In God we trust, all others bring data.

	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Sat Oct 29 11:27:10 2022
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Sat, 29 Oct 2022 03:27:10 -0600
Subject: [R-sig-Geo] Data recommendation
In-Reply-To: <CAHT1vpg6ouJP1jkhdBLn25v2ponhT5eFX-6Zi9x8_paBPrcTwQ@mail.gmail.com>
References: <CACxE24n3Z5=kcew44h+ntSvR0LZaXtDWA2=c7tXX0+R_Do49iA@mail.gmail.com>
 <CAHT1vpg6ouJP1jkhdBLn25v2ponhT5eFX-6Zi9x8_paBPrcTwQ@mail.gmail.com>
Message-ID: <CACxE24kkotbog6LcOeBnYQW-GVHCvVT98Uf2NGp6=W3gGo24Rg@mail.gmail.com>

Great!

Thank you!
Erin

On Sat, Oct 29, 2022 at 1:18 AM Roman Lu?trik <roman.lustrik at gmail.com>
wrote:

> iNaturalist has an exposed API that can be used to download as many data
> points as you want.
> Granted, it's not trivial to download, but not hard either.
>
> https://www.inaturalist.org/pages/api+reference
>
> Cheers,
> Roman
>
> On Fri, Oct 28, 2022 at 10:16 PM Erin Hodgess <erinm.hodgess at gmail.com>
> wrote:
>
>> Hello!
>>
>> How are you?
>>
>> Could someone recommend a spatial data set with about 30000 observations,
>> please?  I'm hoping for one that can be easily downloaded.
>>
>> Thank you,
>> Sincerely,
>> Erin
>>
>> Erin Hodgess, PhD
>> mailto: erinm.hodgess at gmail.com
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>
> --
> In God we trust, all others bring data.
>
-- 
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From n|ko@@tz|ok@@ @end|ng |rom gm@||@com  Sun Oct 30 19:52:13 2022
From: n|ko@@tz|ok@@ @end|ng |rom gm@||@com (Nikolaos Tziokas)
Date: Sun, 30 Oct 2022 18:52:13 +0000
Subject: [R-sig-Geo] Downsample (aggregate) raster by a non-integer factor,
 using a Gaussian filter
Message-ID: <CAGg5H0aNabkWHdct0-UeHXD_tB68V5enBpZ3BzjV=7Sr3Kg3SQ@mail.gmail.com>

I have a fine resolution raster (100m pixel size) and I want to downsample
it (aggregate) to 460m pixel size. The downsampling should be done using a
Gaussian filter (local function). The scale factor is 4.6, so non-integer.
The sigma (std) parameter of the Gaussian filter should be expressed in
cells (pixels) (also the Gaussian filter in this manner).

To put it differently I am trying to simulate coarse data as though they
were measured with a coarse point spread function (PSF). The PSF is assumed
to be a Gaussian filter.

So, in theory, for each coarse pixel I need to go to its center and
calculate the weights (from the PSF/Gaussian filter) needed for each fine
pixel surround it. To do this I need to apply a transfer function (TF;
e.g., Gaussian filter) to the fine data, but with a very large width.

The function aggregate from the terra package does not allow the fact
argument to be non-integer, so I thought to create a template raster (a
raster with no pixel values) from a coarse resolution raster at 460m
spatial scale that I have.

All in all, I need to create a custom function which downsamples a raster
using a Gaussian filter (units in pixels).

So far I created the template raster:

library(terra)

fr = rast("path/tirs.tif") # raster to be upscaled
cr = rast("path/ntl.tif")

# create an empty raster with the same dim, extent and crs as the coarse
res raster
(er <- rast(ext(cr), resolution=res(cr)))
crs(er) <- crs(cr)

The raster layers I am using:

fr = rast(ncols=216, nrows=417, nlyrs=1, xmin=582700, xmax=604300,
ymin=1005700, ymax=1047400, names=c('B10_median'), crs='EPSG:7767')

cr = rast(ncols=48, nrows=91, nlyrs=1, xmin=582360, xmax=604440,
ymin=1005560, ymax=1047420, names=c('avg_rad'), crs='EPSG:7767')
Any recommendations on how I can proceed?

-- 
Tziokas Nikolaos
Cartographer

Tel:(+44)07561120302
LinkedIn <http://linkedin.com/in/nikolaos-tziokas-896081130>

	[[alternative HTML version deleted]]


