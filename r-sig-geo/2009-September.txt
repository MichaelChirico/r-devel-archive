From alexandre.villers at cebc.cnrs.fr  Tue Sep  1 10:35:00 2009
From: alexandre.villers at cebc.cnrs.fr (Alexandre VILLERS)
Date: Tue, 01 Sep 2009 10:35:00 +0200
Subject: [R-sig-Geo] GRASS commands
Message-ID: <4A9CDCB4.4080707@cebc.cnrs.fr>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090901/b98e91d6/attachment.html>

From marco.helbich at gmx.at  Tue Sep  1 13:58:05 2009
From: marco.helbich at gmx.at (Marco Helbich)
Date: Tue, 01 Sep 2009 13:58:05 +0200
Subject: [R-sig-Geo] Spatial correlation for nominal variable
In-Reply-To: <mailman.15.1251799204.32194.r-sig-geo@stat.math.ethz.ch>
References: <mailman.15.1251799204.32194.r-sig-geo@stat.math.ethz.ch>
Message-ID: <20090901115805.133380@gmx.net>

Dear Monir,

perhaps the join count statistic for k coloured factors in the spdep package is a possibility.

best regards
marco
 
> Message: 2
> Date: Mon, 31 Aug 2009 08:26:43 -0500
> From: "Hossain, Md Monir" <Monir.Hossain at uth.tmc.edu>
> Subject: [R-sig-Geo] Spatial correlation for nominal variable
> To: "r-sig-geo at stat.math.ethz.ch" <r-sig-geo at stat.math.ethz.ch>
> Message-ID:
> 	<FE012FDB2E167148A07CBDE554B3F3A1093DCF0AB3 at UTHCMS2.uthouston.edu>
> Content-Type: text/plain
> 
> Dear all,
> I would appreciate much for sharing your thoughts in regard to spatial
> correlation for nominal variable.
> I have a variable named FP_Pattern for FringerPrint Pattern Designation
> for IS6110 to indicate genotype. This is a nominal variable and has 17
> levels. For each TB patient, I also have longitude and latitude. The purpose of
> analyzing this data is to answer the question whether for given level of
> genotype is there any spatial correlation.
> 
> Thanks in advance for your time,
> 
> Monir
> 

-- 
Jetzt kostenlos herunterladen: Internet Explorer 8 und Mozilla Firefox 3 -
sicherer, schneller und einfacher! http://portal.gmx.net/de/go/atbrowser


From Roger.Bivand at nhh.no  Tue Sep  1 14:40:13 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 1 Sep 2009 14:40:13 +0200 (CEST)
Subject: [R-sig-Geo] GRASS commands
In-Reply-To: <4A9CDCB4.4080707@cebc.cnrs.fr>
References: <4A9CDCB4.4080707@cebc.cnrs.fr>
Message-ID: <alpine.LRH.2.00.0909011414510.25549@reclus.nhh.no>

On Tue, 1 Sep 2009, Alexandre VILLERS wrote:

> Goord morning,
> 
> I would like to use v.mkgrid (with spgrass6) and I need to specify box and
> grid parameters, which both require 2 values box=5000,5000 grid=1000,1000
> How do I specify this in my parameters list ?
> parseGRASS6("v.mkgrid") returns
> Command: v.mkgrid
> Extension: .exe
> Description: Creates a GRASS vector map of a user-defined grid.
> Keywords: vector
> Parameters:
> ? name: map, type: string, required: yes, multiple: no
> ?[Name for output vector map]
> ? name: grid, type: integer, required: yes, multiple: no
> ?[Number of rows and columns in grid]
> ? name: position, type: string, required: no, multiple: no
> ?[Where to place the grid]
> ? name: coor, type: float, required: no, multiple: no
> ?[Lower left easting and northing coordinates of map]
> ? name: box, type: float, required: no, multiple: no
> ?[Width and height of boxes in grid]
> ? name: angle, type: float, required: no, multiple: no
> ?[Angle of rotation (in degrees counter-clockwise)]
> Flags:
> ? name: q [Quiet; No chatter]
> ? name: overwrite [Allow output files to overwrite existing files]
> ? name: verbose [Verbose module output]
> ? name: quiet [Quiet module output]
> 
> execGRASS("v.mkgrid", flags="overwrite", 
parameters=list(map="grilleTest",
> grid=c(as.integer(100),as.integer(100)), box=c(5000, 5000),
> position="region"))
> returns
> Erreur dans doGRASS(cmd, flags = flags, parameters = parameters) :
> ? Parameter <grid> has multiple values
> 
> How do I specify the two values when multiple is not allowed. I did not get
> it....

Consider the statsgrass list for use of the interface between R and 
GRASS, in this case there is an interaction between a possible bug in 
v.mkgrid and the parsing of its parameters.

Since v.mkgrid does declare that grid does *not* take multiple values, the 
(current) logic of doGRASS() is defeated, as it checks that the multiple 
attribute if the GRASS parameter is not "NO", see

http://trac.osgeo.org/grass/browser/grass/trunk/vector/v.mkgrid/main.c#L74

The discrepancy between the code and the documentation is obvious.

Please ask on a GRASS list whether other scripted interfaces experience 
the same problem - as far as I can see from the wxpython interface, only a 
single value is accepted, but running the command fails because two are 
required (same problem in reverse). Thw widget used for entering the 
parameter values does not the entry of two values. The work-around for now 
is to use v.mkgrid in system() directly.

Hope this helps,

Roger

> 
> Thanks
> 
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From matthieu.stigler at gmail.com  Tue Sep  1 17:01:50 2009
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Tue, 1 Sep 2009 17:01:50 +0200
Subject: [R-sig-Geo] Problem with Sweave and spplot
Message-ID: <111060c20909010801g3b37d681kf2149050cffd1586@mail.gmail.com>

Hi

I'm facing problems using Sweave with spplot... there is no error
message but the pdf produced has errors and then latex compilation
fails... I really don't know where that come from, did anyone
experience something similar?

I've put the file on the net:
-the Sweave file:
http://s000.tinyupload.com/download.php?file_id=06883775011103568715&t=0688377501110356871533520
-the map data: http://s000.tinyupload.com/download.php?file_id=77859174637181270102&t=7785917463718127010263143

So after downloading oe should just run:
R
Sweave("WorkingPaper2.Rnw.txt")

Would you be so nice to test it and tell further:
-Do you have errors?
-Is Sweave running but not providing pdf not working?

Thanks a lot

Matthieu Stigler


From Monir.Hossain at uth.tmc.edu  Tue Sep  1 17:04:26 2009
From: Monir.Hossain at uth.tmc.edu (Hossain, Md Monir)
Date: Tue, 1 Sep 2009 10:04:26 -0500
Subject: [R-sig-Geo] Spatial correlation for nominal variable
In-Reply-To: <20090901115805.133380@gmx.net>
References: <mailman.15.1251799204.32194.r-sig-geo@stat.math.ethz.ch>
	<20090901115805.133380@gmx.net>
Message-ID: <FE012FDB2E167148A07CBDE554B3F3A1093DCF0CF5@UTHCMS2.uthouston.edu>

Dear Marco,
Thanks for the reference. It seems a possibility, I am checking it more further.
Regards,

Monir

-----Original Message-----
From: Marco Helbich [mailto:marco.helbich at gmx.at] 
Sent: Tuesday, September 01, 2009 6:58 AM
To: Hossain, Md Monir; r-sig-geo at stat.math.ethz.ch
Subject: Re: Spatial correlation for nominal variable

Dear Monir,

perhaps the join count statistic for k coloured factors in the spdep package is a possibility.

best regards
marco
 
> Message: 2
> Date: Mon, 31 Aug 2009 08:26:43 -0500
> From: "Hossain, Md Monir" <Monir.Hossain at uth.tmc.edu>
> Subject: [R-sig-Geo] Spatial correlation for nominal variable
> To: "r-sig-geo at stat.math.ethz.ch" <r-sig-geo at stat.math.ethz.ch>
> Message-ID:
> 	<FE012FDB2E167148A07CBDE554B3F3A1093DCF0AB3 at UTHCMS2.uthouston.edu>
> Content-Type: text/plain
> 
> Dear all,
> I would appreciate much for sharing your thoughts in regard to spatial
> correlation for nominal variable.
> I have a variable named FP_Pattern for FringerPrint Pattern Designation
> for IS6110 to indicate genotype. This is a nominal variable and has 17
> levels. For each TB patient, I also have longitude and latitude. The purpose of
> analyzing this data is to answer the question whether for given level of
> genotype is there any spatial correlation.
> 
> Thanks in advance for your time,
> 
> Monir
> 

-- 
Jetzt kostenlos herunterladen: Internet Explorer 8 und Mozilla Firefox 3 -
sicherer, schneller und einfacher! http://portal.gmx.net/de/go/atbrowser


From Virgilio.Gomez at uclm.es  Tue Sep  1 17:23:10 2009
From: Virgilio.Gomez at uclm.es (Virgilio =?ISO-8859-1?Q?G=F3mez-Rubio?=)
Date: Tue, 01 Sep 2009 17:23:10 +0200
Subject: [R-sig-Geo] Problem with Sweave and spplot
In-Reply-To: <111060c20909010801g3b37d681kf2149050cffd1586@mail.gmail.com>
References: <111060c20909010801g3b37d681kf2149050cffd1586@mail.gmail.com>
Message-ID: <1251818591.9856.17.camel@Virgilio-Gomez>

Hi,

> I'm facing problems using Sweave with spplot... there is no error
> message but the pdf produced has errors and then latex compilation
> fails... I really don't know where that come from, did anyone
> experience something similar?

Have you embedded the spplot() function inside a print() function.
Lattice graphics need to be printed() inside Sweave. Something like:

print(spplot(mymap, "mydata"))

Otherwise I believe that you will get some PDF files but they will be
empty or borken.

Best wishes,

Virgilio


> I've put the file on the net:
> -the Sweave file:
> http://s000.tinyupload.com/download.php?file_id=06883775011103568715&t=0688377501110356871533520
> -the map data: http://s000.tinyupload.com/download.php?file_id=77859174637181270102&t=7785917463718127010263143
> 
> So after downloading oe should just run:
> R
> Sweave("WorkingPaper2.Rnw.txt")
> 
> Would you be so nice to test it and tell further:
> -Do you have errors?
> -Is Sweave running but not providing pdf not working?
> 
> Thanks a lot
> 
> Matthieu Stigler
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From jaimebg27 at gmail.com  Tue Sep  1 17:41:39 2009
From: jaimebg27 at gmail.com (JAIME BURBANO GIRON)
Date: Tue, 1 Sep 2009 10:41:39 -0500
Subject: [R-sig-Geo] Export Kriging
Message-ID: <dcd5c8650909010841m35f2b51dj72a20bcaa7caae65@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090901/e9e1d3c6/attachment.pl>

From jaime.garcia at uni-bonn.de  Tue Sep  1 21:59:58 2009
From: jaime.garcia at uni-bonn.de (Jaime R. Garcia M.)
Date: Tue, 01 Sep 2009 21:59:58 +0200
Subject: [R-sig-Geo] Export Kriging
In-Reply-To: <dcd5c8650909010841m35f2b51dj72a20bcaa7caae65@mail.gmail.com>
References: <dcd5c8650909010841m35f2b51dj72a20bcaa7caae65@mail.gmail.com>
Message-ID: <4A9D7D3E.6060600@uni-bonn.de>

JAIME BURBANO GIRON wrote:
> Hi, I ran a Kriging interpolation using the function *krige (gstat)*, and i
> would like to export the results on a .txt file, for read them after in
> ArcGIS like and ASCII raster. How can i do this? I hope an answer, thanks.
>
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   
Well Jaime, a little more of detail could help giving a you a more 
precise answer. I recently run the /krige /function from *gstat *and my 
result was an object (let's say env) of class "SpatialPixelsDataFrame".
So I had to convert it to a "SpatialGridDataFrame" using the /gridded/ 
and  coercion (/as)/ functions.

 > gridded(env) = TRUE
 > env = as(env, "SpatialGridDataFrame")

And then I used the function write.asciigrid
Check ?write.asciigrid
But you could also use the function readGDAL  and there are others...

Buena Suerte,

Jaime Garcia M.


From neteler at cealp.it  Tue Sep  1 22:22:49 2009
From: neteler at cealp.it (Markus Neteler)
Date: Tue, 01 Sep 2009 22:22:49 +0200
Subject: [R-sig-Geo] [GRASS-stats] Re:  GRASS commands (fwd)
In-Reply-To: <alpine.LRH.2.00.0909011440250.25549@reclus.nhh.no>
References: <alpine.LRH.2.00.0909011440250.25549@reclus.nhh.no>
Message-ID: <4A9D8299.7080809@gmail.com>

2009/9/1 Roger Bivand <Roger.Bivand at nhh.no>:
 > Is this a bug in the interface description of v.mkgrid? It needs
 > grid=rows,columns but sets multiple=NO, so wxpython fails (needing two
 > values but getting one, but only providing an integer entry box).

It needs two values which are treated as one string, so it is correct.
(E.g. r.series accepts multiple input maps which are separate tokens which
required multiple=YES).

...
 >> grid=c(as.integer(100),as.integer(100)), box=c(5000, 5000),
 >> position="region"))
 >> returns
 >> Erreur dans doGRASS(cmd, flags = flags, parameters = parameters) :
 >>   Parameter <grid> has multiple values
 >>
 >> How do I specify the two values when multiple is not allowed. I did not
 >> get it....

You used
 > c(as.integer(100),as.integer(100))
[1] 100 100

 > c(5000, 5000)
[1] 5000 5000

which leads to space separated values. But we want

 > paste(as.integer(100), as.integer(100), sep=",")
[1] "100,100"

 > Consider the statsgrass list for use of the interface between R and 
GRASS,
 > in this case there is an interaction between a possible bug in 
v.mkgrid and
 > the parsing of its parameters.
 >
 > Since v.mkgrid does declare that grid does *not* take multiple 
values, the
 > (current) logic of doGRASS() is defeated, as it checks that the multiple
 > attribute if the GRASS parameter is not "NO", see
 >
 > 
http://trac.osgeo.org/grass/browser/grass/trunk/vector/v.mkgrid/main.c#L74
 >
 > The discrepancy between the code and the documentation is obvious.

There is no real discrepancy...
Hope above comments clarify it.

If not, we would need to see some debug output of doGRASS()...

Markus

-- 
Markus Neteler
Foundation Edmund Mach (FEM) - Research and Innovation Centre
Environment and Natural Resources Area
GIS and Remote Sensing Unit, Trento, Italy
Web:  http://gis.fem-environment.eu/


From alexandre.villers at cebc.cnrs.fr  Tue Sep  1 22:33:23 2009
From: alexandre.villers at cebc.cnrs.fr (alexandre villers)
Date: Tue, 01 Sep 2009 22:33:23 +0200
Subject: [R-sig-Geo] [GRASS-stats] Re:  GRASS commands (fwd)
Message-ID: <1251837203.827df4calexandre.villers@cebc.cnrs.fr>

Good evening,

Thank you for the message. I had already tried this but then got the error message:

 execGRASS("v.mkgrid", flags="overwrite", parameters=list(map="grilleTest", grid=paste(as.integer(100), as.integer(100), sep=","), box=paste(as.integer(5000),",",as.integer(5000),sep=""), position="region")) #cr?er une grille de box1 m?tres sur box2 m?tres sur la r?gion   !!! PB WITH the double argument required for box and grid).
Erreur dans doGRASS(cmd, flags = flags, parameters = parameters) :
  Parameter <grid> does not have integer value

Does this make sense to you ? v.mkgrid is asking for an integer but the paste() has turned integer into character... and list of the 2 integers is also rejected because of the "multiple = NO" argument...

I'm afraid I can't go further...

Best regards

Alex

-----Original Message-----
From: Markus Neteler <neteler at cealp.it>
To: Roger.Bivand at nhh.no
Date: Tue, 01 Sep 2009 22:22:49 +0200
Subject: Re: [GRASS-stats] Re: [R-sig-Geo] GRASS commands (fwd)

2009/9/1 Roger Bivand <Roger.Bivand at nhh.no>:
 > Is this a bug in the interface description of v.mkgrid? It needs
 > grid=rows,columns but sets multiple=NO, so wxpython fails (needing two
 > values but getting one, but only providing an integer entry box).

It needs two values which are treated as one string, so it is correct.
(E.g. r.series accepts multiple input maps which are separate tokens which
required multiple=YES).

...
 >> grid=c(as.integer(100),as.integer(100)), box=c(5000, 5000),
 >> position="region"))
 >> returns
 >> Erreur dans doGRASS(cmd, flags = flags, parameters = parameters) :
 >>   Parameter <grid> has multiple values
 >>
 >> How do I specify the two values when multiple is not allowed. I did not
 >> get it....

You used
 > c(as.integer(100),as.integer(100))
[1] 100 100

 > c(5000, 5000)
[1] 5000 5000

which leads to space separated values. But we want

 > paste(as.integer(100), as.integer(100), sep=",")
[1] "100,100"

 > Consider the statsgrass list for use of the interface between R and 
GRASS,
 > in this case there is an interaction between a possible bug in 
v.mkgrid and
 > the parsing of its parameters.
 >
 > Since v.mkgrid does declare that grid does *not* take multiple 
values, the
 > (current) logic of doGRASS() is defeated, as it checks that the multiple
 > attribute if the GRASS parameter is not "NO", see
 >
 > 
http://trac.osgeo.org/grass/browser/grass/trunk/vector/v.mkgrid/main.c#L74
 >
 > The discrepancy between the code and the documentation is obvious.

There is no real discrepancy...
Hope above comments clarify it.

If not, we would need to see some debug output of doGRASS()...

Markus

-- 
Markus Neteler
Foundation Edmund Mach (FEM) - Research and Innovation Centre
Environment and Natural Resources Area
GIS and Remote Sensing Unit, Trento, Italy
Web:  http://gis.fem-environment.eu/



__________ Information from ESET Mail Security, version of virus signature database 4387 (20090901) __________

The message was checked by ESET Mail Security.
http://www.eset.com




Alexandre Villers
PhD. Student
Team Biodiversity
CEBC CNRS
79360 Beauvoir sur Niort


__________ Information from ESET Mail Security, version of virus signature database 4387 (20090901) __________

The message was checked by ESET Mail Security.
http://www.eset.com


From educheyne at avia-gis.be  Tue Sep  1 22:53:55 2009
From: educheyne at avia-gis.be (Els Ducheyne)
Date: Tue, 1 Sep 2009 22:53:55 +0200
Subject: [R-sig-Geo] Problem with Sweave and spplot
In-Reply-To: <111060c20909010801g3b37d681kf2149050cffd1586@mail.gmail.com>
References: <111060c20909010801g3b37d681kf2149050cffd1586@mail.gmail.com>
Message-ID: <7ED3FAAC-9551-420F-BAD6-3CC148A264DD@avia-gis.be>

Dear all
I faced the same problem, spplot does not create the output that  
sweave will integrate
I solved this by manually saving the spplot outputs and then hard code  
it in the tex file,  but clearly there should be a better way

Els
On 1 Sep 2009, at 17:01, Matthieu Stigler wrote:

> Hi
>
> I'm facing problems using Sweave with spplot... there is no error
> message but the pdf produced has errors and then latex compilation
> fails... I really don't know where that come from, did anyone
> experience something similar?
>
> I've put the file on the net:
> -the Sweave file:
> http://s000.tinyupload.com/download.php?file_id=06883775011103568715&t=0688377501110356871533520
> -the map data: http://s000.tinyupload.com/download.php?file_id=77859174637181270102&t=7785917463718127010263143
>
> So after downloading oe should just run:
> R
> Sweave("WorkingPaper2.Rnw.txt")
>
> Would you be so nice to test it and tell further:
> -Do you have errors?
> -Is Sweave running but not providing pdf not working?
>
> Thanks a lot
>
> Matthieu Stigler
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From edzer.pebesma at uni-muenster.de  Wed Sep  2 08:50:59 2009
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 02 Sep 2009 08:50:59 +0200
Subject: [R-sig-Geo] Problem with Sweave and spplot
In-Reply-To: <7ED3FAAC-9551-420F-BAD6-3CC148A264DD@avia-gis.be>
References: <111060c20909010801g3b37d681kf2149050cffd1586@mail.gmail.com>
	<7ED3FAAC-9551-420F-BAD6-3CC148A264DD@avia-gis.be>
Message-ID: <4A9E15D3.2060200@uni-muenster.de>

I think this is a well-known issue, and a FAQ:
http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-do-lattice_002ftrellis-graphics-not-work_003f

Manual processing is not needed.

I agree that the resulting code with print(spplot(...)) looks ugly; in
the ASDAR book we basically tricked things by having two code sections,
one that is printed but not evaluated, and one that is evaluated but not
printed. Not really nice but ... it worked.
--
Edzer

Els Ducheyne wrote:
> Dear all
> I faced the same problem, spplot does not create the output that
> sweave will integrate
> I solved this by manually saving the spplot outputs and then hard code
> it in the tex file,  but clearly there should be a better way
>
> Els
> On 1 Sep 2009, at 17:01, Matthieu Stigler wrote:
>
>> Hi
>>
>> I'm facing problems using Sweave with spplot... there is no error
>> message but the pdf produced has errors and then latex compilation
>> fails... I really don't know where that come from, did anyone
>> experience something similar?
>>
>> I've put the file on the net:
>> -the Sweave file:
>> http://s000.tinyupload.com/download.php?file_id=06883775011103568715&t=0688377501110356871533520
>>
>> -the map data:
>> http://s000.tinyupload.com/download.php?file_id=77859174637181270102&t=7785917463718127010263143
>>
>>
>> So after downloading oe should just run:
>> R
>> Sweave("WorkingPaper2.Rnw.txt")
>>
>> Would you be so nice to test it and tell further:
>> -Do you have errors?
>> -Is Sweave running but not providing pdf not working?
>>
>> Thanks a lot
>>
>> Matthieu Stigler
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de/
http://www.springer.com/978-0-387-78170-9 e.pebesma at wwu.de


From matthieu.stigler at gmail.com  Wed Sep  2 08:57:37 2009
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Wed, 2 Sep 2009 08:57:37 +0200
Subject: [R-sig-Geo] Problem with Sweave and spplot
In-Reply-To: <4A9E15D3.2060200@uni-muenster.de>
References: <111060c20909010801g3b37d681kf2149050cffd1586@mail.gmail.com>
	<7ED3FAAC-9551-420F-BAD6-3CC148A264DD@avia-gis.be>
	<4A9E15D3.2060200@uni-muenster.de>
Message-ID: <111060c20909012357g226ab999q5533dd73abb8385c@mail.gmail.com>

yes, the print(spplot()) did solve the problem!

thanks!

2009/9/2 Edzer Pebesma <edzer.pebesma at uni-muenster.de>:
> I think this is a well-known issue, and a FAQ:
> http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-do-lattice_002ftrellis-graphics-not-work_003f
>
> Manual processing is not needed.
>
> I agree that the resulting code with print(spplot(...)) looks ugly; in
> the ASDAR book we basically tricked things by having two code sections,
> one that is printed but not evaluated, and one that is evaluated but not
> printed. Not really nice but ... it worked.
> --
> Edzer
>
> Els Ducheyne wrote:
>> Dear all
>> I faced the same problem, spplot does not create the output that
>> sweave will integrate
>> I solved this by manually saving the spplot outputs and then hard code
>> it in the tex file, ?but clearly there should be a better way
>>
>> Els
>> On 1 Sep 2009, at 17:01, Matthieu Stigler wrote:
>>
>>> Hi
>>>
>>> I'm facing problems using Sweave with spplot... there is no error
>>> message but the pdf produced has errors and then latex compilation
>>> fails... I really don't know where that come from, did anyone
>>> experience something similar?
>>>
>>> I've put the file on the net:
>>> -the Sweave file:
>>> http://s000.tinyupload.com/download.php?file_id=06883775011103568715&t=0688377501110356871533520
>>>
>>> -the map data:
>>> http://s000.tinyupload.com/download.php?file_id=77859174637181270102&t=7785917463718127010263143
>>>
>>>
>>> So after downloading oe should just run:
>>> R
>>> Sweave("WorkingPaper2.Rnw.txt")
>>>
>>> Would you be so nice to test it and tell further:
>>> -Do you have errors?
>>> -Is Sweave running but not providing pdf not working?
>>>
>>> Thanks a lot
>>>
>>> Matthieu Stigler
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> --
> Edzer Pebesma
> Institute for Geoinformatics (ifgi), University of M?nster
> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
> 8333081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de/
> http://www.springer.com/978-0-387-78170-9 e.pebesma at wwu.de
>
>


From b.rowlingson at lancaster.ac.uk  Wed Sep  2 09:26:34 2009
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 2 Sep 2009 08:26:34 +0100
Subject: [R-sig-Geo] Problem with Sweave and spplot
In-Reply-To: <4A9E15D3.2060200@uni-muenster.de>
References: <111060c20909010801g3b37d681kf2149050cffd1586@mail.gmail.com>
	<7ED3FAAC-9551-420F-BAD6-3CC148A264DD@avia-gis.be>
	<4A9E15D3.2060200@uni-muenster.de>
Message-ID: <d8ad40b50909020026y3cc552a3j70b2912f0ed524a0@mail.gmail.com>

On Wed, Sep 2, 2009 at 7:50 AM, Edzer
Pebesma<edzer.pebesma at uni-muenster.de> wrote:
> I think this is a well-known issue, and a FAQ:
> http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-do-lattice_002ftrellis-graphics-not-work_003f
>
> Manual processing is not needed.
>
> I agree that the resulting code with print(spplot(...)) looks ugly; in
> the ASDAR book we basically tricked things by having two code sections,
> one that is printed but not evaluated, and one that is evaluated but not
> printed. Not really nice but ... it worked.
> --

 I haven't tried this in an Sweave doc yet, but wouldn't it be neater
to redefine spplot(...) to call print(spplot(...))?

This works interactively:

 > library(sp)
 > spplot.orig=spplot
 > spplot=function(...){print(spplot.orig(...))}

such that

 > z = spplot(meuse) # shows the plot
 > z = spplot.orig(meuse) # doesn't show the plot

If you put the definition in a hidden section in your Sweave code,
then you might be able to just have plain spplot() function calls and
hence only one code section. I *hate* it when I'm writing Sweave docs
and think I need a hidden, executed code block and a visible,
unexecuted and slightly different code block - it seems like a massive
fail in the whole Sweave concept...

Barry


From Roger.Bivand at nhh.no  Wed Sep  2 16:09:13 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 2 Sep 2009 16:09:13 +0200 (CEST)
Subject: [R-sig-Geo] [GRASS-stats] Re:  GRASS commands (fwd)
In-Reply-To: <1251837203.827df4calexandre.villers@cebc.cnrs.fr>
References: <1251837203.827df4calexandre.villers@cebc.cnrs.fr>
Message-ID: <alpine.LRH.2.00.0909021605480.303@reclus.nhh.no>

On Tue, 1 Sep 2009, alexandre villers wrote:

> Good evening,
>
> Thank you for the message. I had already tried this but then got the error message:
>
> execGRASS("v.mkgrid", flags="overwrite", parameters=list(map="grilleTest", grid=paste(as.integer(100), as.integer(100), sep=","), box=paste(as.integer(5000),",",as.integer(5000),sep=""), position="region")) #cr?er une grille de box1 m?tres sur box2 m?tres sur la r?gion   !!! PB WITH the double argument required for box and grid).
> Erreur dans doGRASS(cmd, flags = flags, parameters = parameters) :
>  Parameter <grid> does not have integer value

I've submitted a new version of spgrass6 to CRAN that handles the 
ambiguity inherent in the multiple=no and a keydesc count of greater than 
1. When it gets through, please try. If you like, check out the source 
from r-spatial on sourceforge. I'd be interested to know whether this also 
resolves your earlier r.neighbors problem.

Roger

>
> Does this make sense to you ? v.mkgrid is asking for an integer but the paste() has turned integer into character... and list of the 2 integers is also rejected because of the "multiple = NO" argument...
>
> I'm afraid I can't go further...
>
> Best regards
>
> Alex
>
> -----Original Message-----
> From: Markus Neteler <neteler at cealp.it>
> To: Roger.Bivand at nhh.no
> Date: Tue, 01 Sep 2009 22:22:49 +0200
> Subject: Re: [GRASS-stats] Re: [R-sig-Geo] GRASS commands (fwd)
>
> 2009/9/1 Roger Bivand <Roger.Bivand at nhh.no>:
> > Is this a bug in the interface description of v.mkgrid? It needs
> > grid=rows,columns but sets multiple=NO, so wxpython fails (needing two
> > values but getting one, but only providing an integer entry box).
>
> It needs two values which are treated as one string, so it is correct.
> (E.g. r.series accepts multiple input maps which are separate tokens which
> required multiple=YES).
>
> ...
> >> grid=c(as.integer(100),as.integer(100)), box=c(5000, 5000),
> >> position="region"))
> >> returns
> >> Erreur dans doGRASS(cmd, flags = flags, parameters = parameters) :
> >>   Parameter <grid> has multiple values
> >>
> >> How do I specify the two values when multiple is not allowed. I did not
> >> get it....
>
> You used
> > c(as.integer(100),as.integer(100))
> [1] 100 100
>
> > c(5000, 5000)
> [1] 5000 5000
>
> which leads to space separated values. But we want
>
> > paste(as.integer(100), as.integer(100), sep=",")
> [1] "100,100"
>
> > Consider the statsgrass list for use of the interface between R and
> GRASS,
> > in this case there is an interaction between a possible bug in
> v.mkgrid and
> > the parsing of its parameters.
> >
> > Since v.mkgrid does declare that grid does *not* take multiple
> values, the
> > (current) logic of doGRASS() is defeated, as it checks that the multiple
> > attribute if the GRASS parameter is not "NO", see
> >
> >
> http://trac.osgeo.org/grass/browser/grass/trunk/vector/v.mkgrid/main.c#L74
> >
> > The discrepancy between the code and the documentation is obvious.
>
> There is no real discrepancy...
> Hope above comments clarify it.
>
> If not, we would need to see some debug output of doGRASS()...
>
> Markus
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From debeaudette at ucdavis.edu  Wed Sep  2 19:02:58 2009
From: debeaudette at ucdavis.edu (Dylan Beaudette)
Date: Wed, 2 Sep 2009 10:02:58 -0700
Subject: [R-sig-Geo] Problem with Sweave and spplot
In-Reply-To: <7ED3FAAC-9551-420F-BAD6-3CC148A264DD@avia-gis.be>
References: <111060c20909010801g3b37d681kf2149050cffd1586@mail.gmail.com>
	<7ED3FAAC-9551-420F-BAD6-3CC148A264DD@avia-gis.be>
Message-ID: <200909021002.58755.dylan.beaudette@gmail.com>

Hi,

Could this be an issue with the way in which lattice graphics behave 
when 'sourced' from a script file? If so, then something like this may help:

p <- spplot(...)
print(p)

Cheers,
Dylan

On Tuesday 01 September 2009, Els Ducheyne wrote:
> Dear all
> I faced the same problem, spplot does not create the output that
> sweave will integrate
> I solved this by manually saving the spplot outputs and then hard code
> it in the tex file,  but clearly there should be a better way
>
> Els
>
> On 1 Sep 2009, at 17:01, Matthieu Stigler wrote:
> > Hi
> >
> > I'm facing problems using Sweave with spplot... there is no error
> > message but the pdf produced has errors and then latex compilation
> > fails... I really don't know where that come from, did anyone
> > experience something similar?
> >
> > I've put the file on the net:
> > -the Sweave file:
> > http://s000.tinyupload.com/download.php?file_id=06883775011103568715&t=06
> >88377501110356871533520 -the map data:
> > http://s000.tinyupload.com/download.php?file_id=77859174637181270102&t=77
> >85917463718127010263143
> >
> > So after downloading oe should just run:
> > R
> > Sweave("WorkingPaper2.Rnw.txt")
> >
> > Would you be so nice to test it and tell further:
> > -Do you have errors?
> > -Is Sweave running but not providing pdf not working?
> >
> > Thanks a lot
> >
> > Matthieu Stigler
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at stat.math.ethz.ch
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Dylan Beaudette
Soil Resource Laboratory
http://casoilresource.lawr.ucdavis.edu/
University of California at Davis
530.754.7341


From b.rowlingson at lancaster.ac.uk  Wed Sep  2 19:26:48 2009
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 2 Sep 2009 18:26:48 +0100
Subject: [R-sig-Geo] Problem with Sweave and spplot
In-Reply-To: <d8ad40b50909020026y3cc552a3j70b2912f0ed524a0@mail.gmail.com>
References: <111060c20909010801g3b37d681kf2149050cffd1586@mail.gmail.com>
	<7ED3FAAC-9551-420F-BAD6-3CC148A264DD@avia-gis.be>
	<4A9E15D3.2060200@uni-muenster.de>
	<d8ad40b50909020026y3cc552a3j70b2912f0ed524a0@mail.gmail.com>
Message-ID: <d8ad40b50909021026v2ba14e66l5ea6462c0dbb283c@mail.gmail.com>

On Wed, Sep 2, 2009 at 8:26 AM, Barry
Rowlingson<b.rowlingson at lancaster.ac.uk> wrote:

> ?I haven't tried this in an Sweave doc yet, but wouldn't it be neater
> to redefine spplot(...) to call print(spplot(...))?

 Well, I have now tested it in an Sweave doc, and this works and lets
you do plain spplot(...) in code sections. Whether there's any other
side effects I don't know... Here you go:

<<echo=FALSE, results=hide>>=
library(sp)
spplot.orig = spplot
spplot = function(...){print(spplot.orig(...))}
@

<<fig=TRUE>>=>
data(meuse)
coordinates(meuse)=cbind(meuse$x,meuse$y)
spplot(meuse,"dist")
@


From Roger.Bivand at nhh.no  Wed Sep  2 21:09:54 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 2 Sep 2009 21:09:54 +0200 (CEST)
Subject: [R-sig-Geo] Rgdal and unsigned integers
In-Reply-To: <dc22b2570908201552k57a9d2b8m5655d3eefc7e218b@mail.gmail.com>
References: <4A8DB8B1.9090401@fas.harvard.edu>
	<d8ad40b50908201444x53f0ccd8w4ed0cd75369f4293@mail.gmail.com>
	<dc22b2570908201552k57a9d2b8m5655d3eefc7e218b@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.0909022045100.303@reclus.nhh.no>

On Thu, 20 Aug 2009, Robert J. Hijmans wrote:

> Jonathan,
>
> I used the file you send me. This shows that the problem is already
> present in rgdal (i.e. before it gets passed to raster)


The next release of rgdal will contain some tools to permit the handling 
of signed/unsigned integer conversion (for 8 and 16 bit data so far), 
where GDAL drivers are unhelpful (submitted to CRAN, available for source 
check-out from the sourceforge rgdal repository.

In this case, the LAN/GIS driver assumes 16 bit signed integers when the 
data are 16 bit, and there are no "authorities" to say that signed or 
unsigned are correct. Here, the new helper function toUnSigned(x, 16) (for 
x as the band of interest) will do the conversion.

GDALinfo() now reports band-wise the GDAL Data Type (GDT), and the band 
minimum and maximum values known to the driver (either based on metadata, 
which varies with driver - maybe in an auxiliary file, or on the 
characteristics of the GDT, so just the range of the data representation, 
not the data in the band) It will not read the band to find the values.

The toSigned() helper function may be used for example when the data are 
read as 8 bit unsigned (the only option for GDT Byte), but ought to be 
signed.

Does anyone need conversion for 32 bit integers? This will overflow if 
not coerced to numeric 8-byte representation with storage.mode "double", 
as R integers are signed.

In summary, if the data look de-ranged, use GDALinfo() to see what GDT the 
driver assigned, and if appropriate, convert signed/unsigned to suit.

Hope this helps,

Roger

PS. Don't be thrown if the summary() of the data shows rounded maximum or 
minimum values - summary() takes a digits= argument with a tight default, 
because the output is usually read for its most significant (left) digits, 
not the rightmost digits. If in doubt, use range().

> library(rgdal)
> GDALinfo("stand_bm.gis")
rows        839
columns     1758
bands       1
origin.x        33773.26
origin.y        861578
res.x       100
res.y       100
oblique.x   0
oblique.y   0
driver      LAN
projection  NA
file        stand_bm.gis
apparent band summary:
   GDType   Bmin  Bmax
1  Int16 -32768 32767
> xx <- readGDAL("stand_bm.gis")
stand_bm.gis has GDAL driver LAN
and has 839 rows and 1758 columns
> summary(xx$band1)
    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
  -32140       0       0    8316   19180   29620
> summary(toUnSigned(xx$band1, 16))
    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
       0       0   14250   12830   22230   48500
> summary(toUnSigned(xx$band1, 16), digits=7)
     Min.  1st Qu.   Median     Mean  3rd Qu.     Max.
     0.00     0.00 14247.00 12833.83 22226.00 48499.00
> range(toUnSigned(xx$band1, 16))
[1]     0 48499


>
>> x <- readGDAL("stand_bm.gis")
> stand_bm.gis has GDAL driver LAN
> and has 839 rows and 1758 columns
>> summary(x)
> (...)
> Data attributes:
>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
> -32140       0       0    8316   19180   29620
>>
>
> I opened the file in ArcMap, saved it to a esri grid and read it into R
>
>> stndesri <- raster("esri_stand", values = T)
>
>> stnd <- raster("stand_bm.gis", values = T)
>
> I adjusted the adjustment I send before
>> stnd[stnd < 0] <- stnd[stnd < 0] + 65536
>
> and these look good:
>
>> stnd
> class       : RasterLayer
> filename    :
> nrow        : 839
> ncol        : 1758
> ncells      : 1474962
> min value   : 0
> max value   : 48499   <--- same is gdal
> (...)
>
> the values of the two files are the same:
>> dif <- stnd - stndesri
>
>> summary(dif)
> Values
> Min.    0
> 1st Qu. 0
> Median  0
> Mean    0
> 3rd Qu. 0
> Max.    0
>
>
> The values are still very high in some places, but they should be,
> that's what caused the problem to begin with. Whether these high
> values are meaningful is another matter; but that could be caused by
> LANDIS if that's what you are using.
>
> Apparently something needs to be fixed in rgdal as Barry showed that
> gdal gets the right values; it seems somewhere along the line the
> INT16 is interpreted as signed, whereas it should be unsigned.
>
> Best,
> Robert
>
> On Thu, Aug 20, 2009 at 2:44 PM, Barry
> Rowlingson<b.rowlingson at lancaster.ac.uk> wrote:
>> On Thu, Aug 20, 2009 at 9:57 PM, Jonathan
>> Thompson<jthomps at fas.harvard.edu> wrote:
>>
>>> gdalinfo:
>>> Band 1 Block=1758x1 Type=Int16, ColorInterp=Undefined
>>> ?Min=0.000 Max=48499.000
>>
>>>> Arcgis:
>>>> Pixel Type ?= unsigned integer
>>>> Pixel Depth = 16 bit
>>
>> Arcgis is saying 'unsigned integer' but gdalinfo says 'Int16'. But
>> then gdalinfo says the max is 48499 - which shouldn't be possible with
>> (signed) Int16 values (they go from -32k to +32k).
>>
>> ?So something is very odd...
>>
>> Barry
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From Roger.Bivand at nhh.no  Wed Sep  2 22:16:39 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 2 Sep 2009 22:16:39 +0200 (CEST)
Subject: [R-sig-Geo] Rotate SpatialPointsDataFrame and convert to raster
In-Reply-To: <4A9BAE2D.1050706@u.washington.edu>
References: <4A9BAE2D.1050706@u.washington.edu>
Message-ID: <alpine.LRH.2.00.0909022202360.303@reclus.nhh.no>

On Mon, 31 Aug 2009, Julian Burgos wrote:

> Dear list,
>
> Hopefully this question will not be too basic.  I have a relatively large 
> dataset (~250000 rows) consisting of lat, long and a data value.  The data 
> has been collected in a regular grid, but the grid is "tilted".  In other 
> words, along a row the latitude values increase constantly, and along a 
> column the longitude values do the same.  The tilt is very slight, but large 
> enough to cause problems when trying to convert the SpatialPointsDataFrame 
> object holding the data to a SpatialPixels objects.  My ultimate objective is 
> to convert this data to a raster file and input it to GRASS.
> Any ideas on how to solve this problem?  Is is possible to create raster 
> images with a "tilted" grid?

Given the format of the input data, I don't think that GMT or GDAL will 
help directly. GMT xyz2grd seems to want a non-tilted grid. GDAL's 
gdalwarp could re-orient an input tilted raster file, but this isn't what 
you have. Have you considered using GRASS directly, with v.in.ascii and 
format=point? Then one of the v.surf.* to interpolate to a non-tilted 
raster - there are a few more on the GRASS Addons wiki site.

That might be more direct that doing the interpolation in R, although it 
would come to the same thing.

Hope this helps,

Roger

> Many thanks,
>
> Julian
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From ogbos.okike at gmail.com  Thu Sep  3 08:40:30 2009
From: ogbos.okike at gmail.com (ogbos okike)
Date: Thu, 3 Sep 2009 08:40:30 +0200
Subject: [R-sig-Geo] Spatial grid
Message-ID: <43b418580909022340x6de56037s9468d854f48d82b0@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090903/6ed7a101/attachment.pl>

From matthieu.stigler at gmail.com  Thu Sep  3 13:00:45 2009
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Thu, 3 Sep 2009 13:00:45 +0200
Subject: [R-sig-Geo] Dealing with lakes and NA in
	Moran/SpatialPolygonsDataFrame
Message-ID: <111060c20909030400k2c17508blb83a17a5fbca3e16@mail.gmail.com>

Hi

I'm puzzled hot to deal with NAs and lakes on SpatialPolygonsDataFrame
objects...

My problems (maybe should I post in separated files?):
-spplot does not seem to handle specially NA values...
-neighbors graph seem to make links even to lakes/holes
-moran.test seem to work with NA values... but what about the
neighbors/weights used as input? Are the results biased?
-localmoran does not seem to work with NA

I illustrate each of them below.


Example is based on Syracuse data from ASDAR (data from web-site
http://www.asdar-book.org/bundles/lat1_bundle.zip):
#NA PROBLEM
setwd("H:/Documents/Stats/Book Bivand/Chap 9")
library(sp)
library(rgdal)
NY8 <- readOGR(".", "NY8_utm18")
library(spdep)
Syracuse <- NY8[NY8$AREANAME == "Syracuse city",]
Syracuse2<-Syracuse
Syracuse2$POP8[43]<-NA
spplot(Syracuse2, zcol="POP8")
#it appears as white, similar to other colors which are nevertheless
true values and not NA!

LAKE problem:
#check if lakes:
sapply(sapply(slot(Syracuse, "polygons"),function(x) slot(x,
"Polygons")), function(x) slot(x, "hole"))
#btw, it is pretty complicated, are there some more user-friendly
wrapers for that? kind of isHole, getHole?
slot(slot(slot(Syracuse2, "polygons")[[43]],"Polygons")[[1]], "hole")<-TRUE
plot(poly2nb(Syracuse), coordinates(Syracuse2))

Here it seems that it did not take into account the hole and still
computes neighbors... right?

And if yes... does it affect the results using moran tests?

Thanks a lot!
Matthieu Stigler


From alexandre.villers at cebc.cnrs.fr  Thu Sep  3 16:08:04 2009
From: alexandre.villers at cebc.cnrs.fr (Alexandre VILLERS)
Date: Thu, 03 Sep 2009 16:08:04 +0200
Subject: [R-sig-Geo] spgrass and GRASS 6.4 ORC5
Message-ID: <4A9FCDC4.4030503@cebc.cnrs.fr>

Good afternoon,

Has anyone tried the spgrass6 package with GRASS 6.4 ORC5 and windows XP ?
When launching initGRASS, I got an error message related to UTF-8 format 
(but unfortunately, forgot to write it down). Since I did not have much 
time, I reinstalled GRASS 6.3 but I was wondering if it was a local 
problem or something with GRASS 6.4
I will give it another try soon...

Best regards

Alex
-- 

Alexandre Villers
PhD Student
Team "Biodiversity"
Centre d'Etudes Biologiques de Chiz?-CNRS UPR1934
79360 Beauvoir sur Niort

Phone +33 (0)5 49 09 96 13
Fax   +33 (0)5 49 09 65 26




__________ Information from ESET Mail Security, version of virus signature database 4391 (20090903) __________

The message was checked by ESET Mail Security.
http://www.eset.com


From ssefick at gmail.com  Thu Sep  3 16:09:39 2009
From: ssefick at gmail.com (stephen sefick)
Date: Thu, 3 Sep 2009 09:09:39 -0500
Subject: [R-sig-Geo] spgrass and GRASS 6.4 ORC5
In-Reply-To: <4A9FCDC4.4030503@cebc.cnrs.fr>
References: <4A9FCDC4.4030503@cebc.cnrs.fr>
Message-ID: <c502a9e10909030709x52ec7499vfa03cad5ef96617d@mail.gmail.com>

spgrass6 works fine on both linux and mac os x.  I have not tried it on windows.

On Thu, Sep 3, 2009 at 9:08 AM, Alexandre
VILLERS<alexandre.villers at cebc.cnrs.fr> wrote:
> Good afternoon,
>
> Has anyone tried the spgrass6 package with GRASS 6.4 ORC5 and windows XP ?
> When launching initGRASS, I got an error message related to UTF-8 format
> (but unfortunately, forgot to write it down). Since I did not have much
> time, I reinstalled GRASS 6.3 but I was wondering if it was a local problem
> or something with GRASS 6.4
> I will give it another try soon...
>
> Best regards
>
> Alex
> --
>
> Alexandre Villers
> PhD Student
> Team "Biodiversity"
> Centre d'Etudes Biologiques de Chiz?-CNRS UPR1934
> 79360 Beauvoir sur Niort
>
> Phone +33 (0)5 49 09 96 13
> Fax ? +33 (0)5 49 09 65 26
>
>
>
>
> __________ Information from ESET Mail Security, version of virus signature
> database 4391 (20090903) __________
>
> The message was checked by ESET Mail Security.
> http://www.eset.com
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Stephen Sefick

Let's not spend our time and resources thinking about things that are
so little or so large that all they really do for us is puff us up and
make us feel like gods.  We are mammals, and have not exhausted the
annoying little problems of being mammals.

								-K. Mullis


From ageel_bushara at yahoo.com  Thu Sep  3 17:24:54 2009
From: ageel_bushara at yahoo.com (ageel bushara)
Date: Thu, 3 Sep 2009 08:24:54 -0700 (PDT)
Subject: [R-sig-Geo] Multiple variograms in one graph
Message-ID: <311311.40520.qm@web35801.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090903/c6d7e226/attachment.pl>

From cutberto.paredes at gmail.com  Thu Sep  3 17:47:08 2009
From: cutberto.paredes at gmail.com (=?ISO-8859-1?Q?Cutberto_Uriel_Paredes_Hern=E1ndez?=)
Date: Thu, 3 Sep 2009 16:47:08 +0100
Subject: [R-sig-Geo] Raster to points
Message-ID: <8f1fabf90909030847j34283cfdre2fbd2c4cef81cb3@mail.gmail.com>

Dear list,

Is there a way to convert a raster to points in R
(SpatialGridDataFrame to SpatialPointsDataFrame)? I know I can do this
with ArcGIS but I would like not to use propietary software.

Sorry for posting this basic question but it couldn't find the answer
in the archives.

Thanks a lot for your help.

Kind regards, Cutberto.


From b.rowlingson at lancaster.ac.uk  Thu Sep  3 18:08:12 2009
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Thu, 3 Sep 2009 17:08:12 +0100
Subject: [R-sig-Geo] Raster to points
In-Reply-To: <8f1fabf90909030847j34283cfdre2fbd2c4cef81cb3@mail.gmail.com>
References: <8f1fabf90909030847j34283cfdre2fbd2c4cef81cb3@mail.gmail.com>
Message-ID: <d8ad40b50909030908k8c78e62ld2c668bfbea5a8c0@mail.gmail.com>

2009/9/3 Cutberto Uriel Paredes Hern?ndez <cutberto.paredes at gmail.com>:
> Dear list,
>
> Is there a way to convert a raster to points in R
> (SpatialGridDataFrame to SpatialPointsDataFrame)? I know I can do this
> with ArcGIS but I would like not to use propietary software.

 Just build one from the coordinates and the data:

 >  data(meuse.grid)
 >  m = SpatialPixelsDataFrame(points = meuse.grid[c("x", "y")], data
= meuse.grid)
 > class(m)
 [1] "SpatialPixelsDataFrame"
 > fullgrid(m)=TRUE
 > class(m)
 [1] "SpatialGridDataFrame"

 # now we have a SGDF, so convert to SPDF:
 > mp=SpatialPointsDataFrame(coordinates(m),data=m at data)

 > class(mp)
 [1] "SpatialPointsDataFrame"

 > names(mp at data)
 [1] "x"      "y"      "part.a" "part.b" "dist"   "soil"   "ffreq"

Barry


From edzer.pebesma at uni-muenster.de  Thu Sep  3 18:11:19 2009
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 03 Sep 2009 18:11:19 +0200
Subject: [R-sig-Geo] Multiple variograms in one graph
In-Reply-To: <311311.40520.qm@web35801.mail.mud.yahoo.com>
References: <311311.40520.qm@web35801.mail.mud.yahoo.com>
Message-ID: <4A9FEAA7.9020401@uni-muenster.de>



ageel bushara wrote:
> Dear all,
>
> ? 
>
> I???m a new user of R. I
> have two plots of variograms. Each plot shows the experimental variograms with its
> fitted theoretical variograms. I would like to have the two plots in one graph
> (all experimental and theoretical variograms will be in one graph). How can I
> do it?
>   
easiest to use basic plot:

library(gstat)
data(meuse)
coordinates(meuse)=~x+y
v1 = variogram(log(zinc)~1,meuse)
v2 = variogram(log(cadmium)~1,meuse)
m1 = fit.variogram(v1, vgm(1, "Sph", 800, 1))
m2 = fit.variogram(v2, vgm(1, "Sph", 800, 1))
plot(gamma~dist, v2, ylim = c(0, 1.05*max(v2$gamma)),col='red', ylab =
'semivariance', xlab = 'distance')
lines(variogramLine(m2, 1500), col='red')
points(gamma~dist, v1, col='blue')
lines(variogramLine(m1, 1500), col='blue')

> ? 
>
> Thanks,
>
> Ageel
>
>
>
>
>
>
>
>       
> 	[[alternative HTML version deleted]]
>
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de/
http://www.springer.com/978-0-387-78170-9 e.pebesma at wwu.de


From r.hijmans at gmail.com  Thu Sep  3 18:19:37 2009
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 3 Sep 2009 09:19:37 -0700
Subject: [R-sig-Geo] Spatial grid
In-Reply-To: <43b418580909022340x6de56037s9468d854f48d82b0@mail.gmail.com>
References: <43b418580909022340x6de56037s9468d854f48d82b0@mail.gmail.com>
Message-ID: <dc22b2570909030919j18ab163bi338574172d268287@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090903/1f001e2d/attachment.pl>

From Roger.Bivand at nhh.no  Thu Sep  3 18:23:50 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 3 Sep 2009 18:23:50 +0200 (CEST)
Subject: [R-sig-Geo] spgrass and GRASS 6.4 ORC5
In-Reply-To: <4A9FCDC4.4030503@cebc.cnrs.fr>
References: <4A9FCDC4.4030503@cebc.cnrs.fr>
Message-ID: <alpine.LRH.2.00.0909031818520.4574@reclus.nhh.no>

On Thu, 3 Sep 2009, Alexandre VILLERS wrote:

> Good afternoon,
>
> Has anyone tried the spgrass6 package with GRASS 6.4 ORC5 and windows XP ?
> When launching initGRASS, I got an error message related to UTF-8 format (but 
> unfortunately, forgot to write it down). Since I did not have much time, I 
> reinstalled GRASS 6.3 but I was wondering if it was a local problem or 
> something with GRASS 6.4

I suspect that this will turn out to be a locale problem, possibly in the 
path names, so platform specific. Using winGRASS 6.4.0 RC5 with R 2.9.2, I 
cannot reproduce the problem in locale "Norwegian (Bokm?l)_Norway.1252" 
(and hoping that the aring gets through the mailer).

Seeing both your command verbatim, and any error messages, together with 
sessionInfo() - which says which locale R can see, would help, but 
generally make sure that all paths are only ASCII, preferably with no 
embedded spaces for safety's sake.

Roger

> I will give it another try soon...
>
> Best regards
>
> Alex
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From milton.ruser at gmail.com  Thu Sep  3 18:24:28 2009
From: milton.ruser at gmail.com (milton ruser)
Date: Thu, 3 Sep 2009 12:24:28 -0400
Subject: [R-sig-Geo] Raster to points
In-Reply-To: <d8ad40b50909030908k8c78e62ld2c668bfbea5a8c0@mail.gmail.com>
References: <8f1fabf90909030847j34283cfdre2fbd2c4cef81cb3@mail.gmail.com>
	<d8ad40b50909030908k8c78e62ld2c668bfbea5a8c0@mail.gmail.com>
Message-ID: <3aaf1a030909030924gb30089fj93da5cf80f197001@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090903/8b1e2fc6/attachment.pl>

From milton.ruser at gmail.com  Thu Sep  3 18:23:56 2009
From: milton.ruser at gmail.com (milton ruser)
Date: Thu, 3 Sep 2009 12:23:56 -0400
Subject: [R-sig-Geo] Raster to points
In-Reply-To: <8f1fabf90909030847j34283cfdre2fbd2c4cef81cb3@mail.gmail.com>
References: <8f1fabf90909030847j34283cfdre2fbd2c4cef81cb3@mail.gmail.com>
Message-ID: <3aaf1a030909030923p1d9ba5ecr5bd5f7b000f5b403@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090903/e9277237/attachment.pl>

From p.hiemstra at geo.uu.nl  Thu Sep  3 18:52:43 2009
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Thu, 03 Sep 2009 18:52:43 +0200
Subject: [R-sig-Geo] Raster to points
In-Reply-To: <8f1fabf90909030847j34283cfdre2fbd2c4cef81cb3@mail.gmail.com>
References: <8f1fabf90909030847j34283cfdre2fbd2c4cef81cb3@mail.gmail.com>
Message-ID: <4A9FF45B.2070903@geo.uu.nl>

Cutberto Uriel Paredes Hern?ndez schreef:
> Dear list,
>
> Is there a way to convert a raster to points in R
> (SpatialGridDataFrame to SpatialPointsDataFrame)? I know I can do this
> with ArcGIS but I would like not to use propietary software.
>
> Sorry for posting this basic question but it couldn't find the answer
> in the archives.
>
> Thanks a lot for your help.
>
> Kind regards, Cutberto.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   
Hi,

Look at the gridded command:

gridded(griddataset) = FALSE

cheers,
Paul


From p.hiemstra at geo.uu.nl  Fri Sep  4 09:58:05 2009
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Fri, 04 Sep 2009 09:58:05 +0200
Subject: [R-sig-Geo] Multiple variograms in one graph
In-Reply-To: <4A9FEAA7.9020401@uni-muenster.de>
References: <311311.40520.qm@web35801.mail.mud.yahoo.com>
	<4A9FEAA7.9020401@uni-muenster.de>
Message-ID: <4AA0C88D.2030303@geo.uu.nl>

Hi,

...or alternatively using the trellis plot system:

library(gstat)
library(lattice)
data(meuse)
coordinates(meuse)=~x+y
v1 = variogram(log(zinc)~1,meuse)
v2 = variogram(log(cadmium)~1,meuse)
m1 = fit.variogram(v1, vgm(1, "Sph", 800, 1))
m2 = fit.variogram(v2, vgm(1, "Sph", 800, 1))

# Arrange the data for the trellis plot
# add the semivariance values of v2 to v1
v1$gammaV2 = v2$gamma

# Construct the plot
xyplot(gamma + gammaV2 ~ dist, v1,
    panel = function(...) {
       panel.xyplot(..., col = c("red","blue"))
       # First variogram model
       ret = variogramLine(m1, maxdist = max(v1$dist))
       llines(x = ret$dist, y = ret$gamma, col = "red", lty = 1) 
       # Second variogram model
       ret = variogramLine(m2, maxdist = max(v2$dist))
       llines(x = ret$dist, y = ret$gamma, col = "blue", lty = 1)        
    },
    ylab = "semivariance",
    xlab  = "distance")

This is a bit more work than what Edzer suggested, but this solution is 
much more flexible. For example if you have not only two variograms at 
the same time, but also several times at which there are variograms. In 
addition, xyplot takes care of the x and y limits automatically. Like 
often in R, you can do stuff in several different ways.

cheers,
Paul

Edzer Pebesma wrote:
> ageel bushara wrote:
>   
>> Dear all,
>>
>> ? 
>>
>> I???m a new user of R. I
>> have two plots of variograms. Each plot shows the experimental variograms with its
>> fitted theoretical variograms. I would like to have the two plots in one graph
>> (all experimental and theoretical variograms will be in one graph). How can I
>> do it?
>>   
>>     
> easiest to use basic plot:
>
> library(gstat)
> data(meuse)
> coordinates(meuse)=~x+y
> v1 = variogram(log(zinc)~1,meuse)
> v2 = variogram(log(cadmium)~1,meuse)
> m1 = fit.variogram(v1, vgm(1, "Sph", 800, 1))
> m2 = fit.variogram(v2, vgm(1, "Sph", 800, 1))
> plot(gamma~dist, v2, ylim = c(0, 1.05*max(v2$gamma)),col='red', ylab =
> 'semivariance', xlab = 'distance')
> lines(variogramLine(m2, 1500), col='red')
> points(gamma~dist, v1, col='blue')
> lines(variogramLine(m1, 1500), col='blue')
>
>   
>> ? 
>>
>> Thanks,
>>
>> Ageel
>>
>>
>>
>>
>>
>>
>>
>>       
>> 	[[alternative HTML version deleted]]
>>
>>   
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>   
>>     
>
>   


-- 
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone:  +3130 274 3113 Mon-Tue
Phone:  +3130 253 5773 Wed-Fri
http://intamap.geo.uu.nl/~paul


From alexandre.villers at cebc.cnrs.fr  Fri Sep  4 10:09:38 2009
From: alexandre.villers at cebc.cnrs.fr (alexandre villers)
Date: Fri, 04 Sep 2009 10:09:38 +0200
Subject: [R-sig-Geo] R and GRASS
Message-ID: <1252051778.827c704alexandre.villers@cebc.cnrs.fr>

Dear all,

Thanks to R Bivand, a new version of spgrass6 is available on CRAN mirrors, which should solve many minor problems in the specification of the parameters' list, thanks to a keydesc (string descriptor for key).

For those of you who have always wanted to control a powerfull GIS with R, it's time to start !!!

A Grass Use R






Alexandre Villers
PhD. Student
Team Biodiversity
CEBC CNRS
79360 Beauvoir sur Niort


__________ Information from ESET Mail Security, version of virus signature database 4393 (20090904) __________

The message was checked by ESET Mail Security.
http://www.eset.com


From Thierry.ONKELINX at inbo.be  Fri Sep  4 11:18:16 2009
From: Thierry.ONKELINX at inbo.be (ONKELINX, Thierry)
Date: Fri, 4 Sep 2009 11:18:16 +0200
Subject: [R-sig-Geo] Multiple variograms in one graph
In-Reply-To: <4AA0C88D.2030303@geo.uu.nl>
References: <311311.40520.qm@web35801.mail.mud.yahoo.com><4A9FEAA7.9020401@uni-muenster.de>
	<4AA0C88D.2030303@geo.uu.nl>
Message-ID: <2E9C414912813E4EB981326983E0A10406AEFD26@inboexch.inbo.be>

And here is a solution using the ggplot2 package. Which I find more transparannt than lattice. You have to prepare your data a bit more.

library(gstat)
library(ggplot2)
data(meuse)
coordinates(meuse) <- ~x+y
v1 <- variogram(log(zinc)~1,meuse)
v2 <- variogram(log(cadmium)~1,meuse)
m1 <- fit.variogram(v1, vgm(1, "Sph", 800, 1))
m2 <- fit.variogram(v2, vgm(1, "Sph", 800, 1))

# Arrange the data for the ggplot2 plot
# add the semivariance values of v2 to v1
v1$gammaV2 <- v2$gamma
Fitted <- data.frame(dist = seq(0.01, max(v1$dist), length = 101))
Fitted$gamma <- variogramLine(m1, dist_vector = Fitted$dist)$gamma
Fitted$gammaV2 <- variogramLine(m2, dist_vector = Fitted$dist)$gamma
#convert the dataframes to a long format
Empirical <- melt(v1, id.vars = "dist", measure.vars = c("gamma", "gammaV2"))
Modeled <- melt(Fitted, id.vars = "dist", measure.vars = c("gamma", "gammaV2"))

#one plot for each variogram
ggplot(Empirical, aes(x = dist, y = value)) + 
		geom_point() + 
		geom_line(data = Modeled) + 
		facet_wrap(~variable)

#both variogram on the same plot with different colours
ggplot(Empirical, aes(x = dist, y = value, colour = variable)) + 
		geom_point() + 
		geom_line(data = Modeled)
#same as above but with custom ranges of the X and Y axis
ggplot(Empirical, aes(x = dist, y = value, colour = variable)) + 
		geom_point() + 
		geom_line(data = Modeled) + 
		scale_x_continuous(limits = c(0, max(Empirical$dist))) + 
		scale_y_continuous(limits = c(0, max(c(Empirical$value, Fitted$value))))

HTH,

Thierry 


----------------------------------------------------------------------------
ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and Forest
Cel biometrie, methodologie en kwaliteitszorg / Section biometrics, methodology and quality assurance
Gaverstraat 4
9500 Geraardsbergen
Belgium
tel. + 32 54/436 185
Thierry.Onkelinx at inbo.be
www.inbo.be

To call in the statistician after the experiment is done may be no more than asking him to perform a post-mortem examination: he may be able to say what the experiment died of.
~ Sir Ronald Aylmer Fisher

The plural of anecdote is not data.
~ Roger Brinner

The combination of some data and an aching desire for an answer does not ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
 
-----Oorspronkelijk bericht-----
Van: r-sig-geo-bounces at stat.math.ethz.ch [mailto:r-sig-geo-bounces at stat.math.ethz.ch] Namens Paul Hiemstra
Verzonden: vrijdag 4 september 2009 9:58
Aan: Edzer Pebesma
CC: R-sig-Geo at stat.math.ethz.ch
Onderwerp: Re: [R-sig-Geo] Multiple variograms in one graph

Hi,

...or alternatively using the trellis plot system:

library(gstat)
library(lattice)
data(meuse)
coordinates(meuse)=~x+y
v1 = variogram(log(zinc)~1,meuse)
v2 = variogram(log(cadmium)~1,meuse)
m1 = fit.variogram(v1, vgm(1, "Sph", 800, 1))
m2 = fit.variogram(v2, vgm(1, "Sph", 800, 1))

# Arrange the data for the trellis plot
# add the semivariance values of v2 to v1
v1$gammaV2 = v2$gamma

# Construct the plot
xyplot(gamma + gammaV2 ~ dist, v1,
    panel = function(...) {
       panel.xyplot(..., col = c("red","blue"))
       # First variogram model
       ret = variogramLine(m1, maxdist = max(v1$dist))
       llines(x = ret$dist, y = ret$gamma, col = "red", lty = 1) 
       # Second variogram model
       ret = variogramLine(m2, maxdist = max(v2$dist))
       llines(x = ret$dist, y = ret$gamma, col = "blue", lty = 1)        
    },
    ylab = "semivariance",
    xlab  = "distance")

This is a bit more work than what Edzer suggested, but this solution is much more flexible. For example if you have not only two variograms at the same time, but also several times at which there are variograms. In addition, xyplot takes care of the x and y limits automatically. Like often in R, you can do stuff in several different ways.

cheers,
Paul

Edzer Pebesma wrote:
> ageel bushara wrote:
>   
>> Dear all,
>>
>> ?
>>
>> I???m a new user of R. I
>> have two plots of variograms. Each plot shows the experimental 
>> variograms with its fitted theoretical variograms. I would like to 
>> have the two plots in one graph (all experimental and theoretical 
>> variograms will be in one graph). How can I do it?
>>   
>>     
> easiest to use basic plot:
>
> library(gstat)
> data(meuse)
> coordinates(meuse)=~x+y
> v1 = variogram(log(zinc)~1,meuse)
> v2 = variogram(log(cadmium)~1,meuse)
> m1 = fit.variogram(v1, vgm(1, "Sph", 800, 1))
> m2 = fit.variogram(v2, vgm(1, "Sph", 800, 1)) plot(gamma~dist, v2, 
> ylim = c(0, 1.05*max(v2$gamma)),col='red', ylab = 'semivariance', xlab 
> = 'distance') lines(variogramLine(m2, 1500), col='red') 
> points(gamma~dist, v1, col='blue') lines(variogramLine(m1, 1500), 
> col='blue')
>
>   
>> ?
>>
>> Thanks,
>>
>> Ageel
>>
>>
>>
>>
>>
>>
>>
>>       
>> 	[[alternative HTML version deleted]]
>>
>>   
>> ---------------------------------------------------------------------
>> ---
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>   
>>     
>
>   


--
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone:  +3130 274 3113 Mon-Tue
Phone:  +3130 253 5773 Wed-Fri
http://intamap.geo.uu.nl/~paul

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Druk dit bericht a.u.b. niet onnodig af.
Please do not print this message unnecessarily.

Dit bericht en eventuele bijlagen geven enkel de visie van de schrijver weer 
en binden het INBO onder geen enkel beding, zolang dit bericht niet bevestigd is
door een geldig ondertekend document. The views expressed in  this message 
and any annex are purely those of the writer and may not be regarded as stating 
an official position of INBO, as long as the message is not confirmed by a duly 
signed document.

From matthieu.stigler at gmail.com  Fri Sep  4 11:37:24 2009
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Fri, 4 Sep 2009 11:37:24 +0200
Subject: [R-sig-Geo] Dealing with lakes and NA in
	Moran/SpatialPolygonsDataFrame
In-Reply-To: <111060c20909030400k2c17508blb83a17a5fbca3e16@mail.gmail.com>
References: <111060c20909030400k2c17508blb83a17a5fbca3e16@mail.gmail.com>
Message-ID: <111060c20909040237r48ee03fcj11b5bf42553ac199@mail.gmail.com>

Hi

I have a second problem with NA in SpatialPolygonsDataFrame, it seems
that residuals.spautolm does not work with NA values, returning NULL.

I add to the questions I asked yesterday about dealing with NAs and
I'm very thankful if anyone could give me any advice!

Thanks a lot!!

Matthieu Stigler



2009/9/3 Matthieu Stigler <matthieu.stigler at gmail.com>:
> Hi
>
> I'm puzzled hot to deal with NAs and lakes on SpatialPolygonsDataFrame
> objects...
>
> My problems (maybe should I post in separated files?):
> -spplot does not seem to handle specially NA values...
> -neighbors graph seem to make links even to lakes/holes
> -moran.test seem to work with NA values... but what about the
> neighbors/weights used as input? Are the results biased?
> -localmoran does not seem to work with NA
>
> I illustrate each of them below.
>
>
> Example is based on Syracuse data from ASDAR (data from web-site
> http://www.asdar-book.org/bundles/lat1_bundle.zip):
> #NA PROBLEM
> setwd("H:/Documents/Stats/Book Bivand/Chap 9")
> library(sp)
> library(rgdal)
> NY8 <- readOGR(".", "NY8_utm18")
> library(spdep)
> Syracuse <- NY8[NY8$AREANAME == "Syracuse city",]
> Syracuse2<-Syracuse
> Syracuse2$POP8[43]<-NA
> spplot(Syracuse2, zcol="POP8")
> #it appears as white, similar to other colors which are nevertheless
> true values and not NA!
>
> LAKE problem:
> #check if lakes:
> sapply(sapply(slot(Syracuse, "polygons"),function(x) slot(x,
> "Polygons")), function(x) slot(x, "hole"))
> #btw, it is pretty complicated, are there some more user-friendly
> wrapers for that? kind of isHole, getHole?
> slot(slot(slot(Syracuse2, "polygons")[[43]],"Polygons")[[1]], "hole")<-TRUE
> plot(poly2nb(Syracuse), coordinates(Syracuse2))
>
> Here it seems that it did not take into account the hole and still
> computes neighbors... right?
>
> And if yes... does it affect the results using moran tests?
>

SPAUTOLM residuals problem:

NY8 <- readOGR(".", "NY8_utm18")
library(spdep)
Syracuse <- NY8[NY8$AREANAME == "Syracuse city",]
Syracuse2<-Syracuse
Syracuse2$POP8[43]<-NA
spplot(Syracuse2, zcol="POP8")

NY8$Z[43]<-NA
NY8$PEXPOSURE[43]<-NA
NY8$PCTAGE65P[43]<-NA
NY8$PCTOWNHOME[43]<-NA

NY_nb <- read.gal("NY_nb.gal", region.id=row.names(as(NY8, "data.frame")))
NYlistw<-nb2listw(NY_nb, style = "B")
nysar<-spautolm(Z~PEXPOSURE+PCTAGE65P+PCTOWNHOME , data=NY8, listw=NYlistw)
summary(nysar)
residuals(nysar)


> Thanks a lot!
> Matthieu Stigler
>


From adrian at maths.uwa.edu.au  Fri Sep  4 12:29:09 2009
From: adrian at maths.uwa.edu.au (Adrian Baddeley)
Date: Fri, 04 Sep 2009 18:29:09 +0800
Subject: [R-sig-Geo] Spatial grid
In-Reply-To: <mailman.11.1251972003.22646.r-sig-geo@stat.math.ethz.ch>
References: <mailman.11.1251972003.22646.r-sig-geo@stat.math.ethz.ch>
Message-ID: <4AA0EBF5.5020707@maths.uwa.edu.au>

Ogbos Okike <ogbos.okike at gmail.com> writes:

> My global lightning data is just two columns labeled latitude
> and longitude. Using library(maps), I plotted the world map and plotted
> latitude and latitude as points. However, the frequency of lightning
> occurrence and hence the points is so high that the plot looks more or less
> like a blurred image, and makes it impossible for me to compare the
> lightning flash density of the regions of the earth.

Probably what you want to do is to compute a kernel smoothed density (or intensity) estimate on the sphere. The density or intensity will give you the number of strikes per unit area on the sphere, measured locally. This can be plotted as a colour image where 'hot' colours mean higher densities of lightning.  

You can do this with the function sm.sphere() in the 'sm' package, for example. 

Adrian Baddeley


From ageel_bushara at yahoo.com  Fri Sep  4 14:34:09 2009
From: ageel_bushara at yahoo.com (ageel bushara)
Date: Fri, 4 Sep 2009 05:34:09 -0700 (PDT)
Subject: [R-sig-Geo] Multiple variograms in one graph
In-Reply-To: <2E9C414912813E4EB981326983E0A10406AEFD26@inboexch.inbo.be>
Message-ID: <482773.30186.qm@web35807.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090904/21b12d8a/attachment.pl>

From sdveloz at ucdavis.edu  Fri Sep  4 20:25:19 2009
From: sdveloz at ucdavis.edu (Sam Veloz)
Date: Fri, 04 Sep 2009 13:25:19 -0500
Subject: [R-sig-Geo] netcdf to raster
Message-ID: <4AA15B8F.8000105@ucdavis.edu>

I am working with some climate data in Netcdf format that are available 
here:
http://hydro.engr.scu.edu/files/gridded_obs/monthly/ncfiles/

I can successfully read in the files and plot individual bands:
library(ncdf)
test.nc<-open.ncdf("gridded_obs.monthly.Tmin.1999.nc")
test.1.1999<-get.var.ncdf(test.nc,varid="Tmin",start=c(1,1,1),count=c(462,222,1))
library(raster)
image(test.1.1999) #looks good
test.raster<-raster(test.1.1999)
image(test.raster) #now North America is on its side, east coast of NA 
is now on the south side of the image

Is it possible to convert this file to a raster file without having the 
axes switched? Any guesses what I am doing wrong?

I had a similar problem using gdal_translate where the output was a 
mirror image of what it should have been.
Thanks,
Sam

-- 
****************************************************
Sam Veloz
Postdoctoral Researcher
Department of Environmental Science and Policy
University of California, Davis
sdveloz at ucdavis.edu


From r.hijmans at gmail.com  Fri Sep  4 21:56:39 2009
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 4 Sep 2009 12:56:39 -0700
Subject: [R-sig-Geo] netcdf to raster
In-Reply-To: <4AA15B8F.8000105@ucdavis.edu>
References: <4AA15B8F.8000105@ucdavis.edu>
Message-ID: <dc22b2570909041256k15f4e8e8s285ad0c01befb624@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090904/8669c04b/attachment.pl>

From sdveloz at ucdavis.edu  Fri Sep  4 23:33:04 2009
From: sdveloz at ucdavis.edu (Sam Veloz)
Date: Fri, 04 Sep 2009 16:33:04 -0500
Subject: [R-sig-Geo] netcdf to raster
In-Reply-To: <dc22b2570909041256k15f4e8e8s285ad0c01befb624@mail.gmail.com>
References: <4AA15B8F.8000105@ucdavis.edu>
	<dc22b2570909041256k15f4e8e8s285ad0c01befb624@mail.gmail.com>
Message-ID: <4AA18790.3070409@ucdavis.edu>

Great that works.
Thanks,
Sam

Robert J. Hijmans wrote:
> Hi Sam, 
>
> This should work 
>
> m <- t(test.1.1999)
> m <- m[nrow(m):1,]
> r <- raster(m)
> plot(r)
>
> Robert
>
> On Fri, Sep 4, 2009 at 11:25 AM, Sam Veloz <sdveloz at ucdavis.edu 
> <mailto:sdveloz at ucdavis.edu>> wrote:
>
>     I am working with some climate data in Netcdf format that are
>     available here:
>     http://hydro.engr.scu.edu/files/gridded_obs/monthly/ncfiles/
>
>     I can successfully read in the files and plot individual bands:
>     library(ncdf)
>     test.nc
>     <http://test.nc><-open.ncdf("gridded_obs.monthly.Tmin.1999.nc
>     <http://gridded_obs.monthly.Tmin.1999.nc>")
>     test.1.1999<-get.var.ncdf(test.nc
>     <http://test.nc>,varid="Tmin",start=c(1,1,1),count=c(462,222,1))
>     library(raster)
>     image(test.1.1999) #looks good
>     test.raster<-raster(test.1.1999)
>     image(test.raster) #now North America is on its side, east coast
>     of NA is now on the south side of the image
>
>     Is it possible to convert this file to a raster file without
>     having the axes switched? Any guesses what I am doing wrong?
>
>     I had a similar problem using gdal_translate where the output was
>     a mirror image of what it should have been.
>     Thanks,
>     Sam
>
>     -- 
>     ****************************************************
>     Sam Veloz
>     Postdoctoral Researcher
>     Department of Environmental Science and Policy
>     University of California, Davis
>     sdveloz at ucdavis.edu <mailto:sdveloz at ucdavis.edu>
>
>     _______________________________________________
>     R-sig-Geo mailing list
>     R-sig-Geo at stat.math.ethz.ch <mailto:R-sig-Geo at stat.math.ethz.ch>
>     https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>


-- 
****************************************************
Sam Veloz
Postdoctoral Researcher
Department of Environmental Science and Policy
University of California, Davis
sdveloz at ucdavis.edu


From Roger.Bivand at nhh.no  Sat Sep  5 13:33:25 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 5 Sep 2009 13:33:25 +0200 (CEST)
Subject: [R-sig-Geo] Dealing with lakes and NA in
 Moran/SpatialPolygonsDataFrame
In-Reply-To: <111060c20909030400k2c17508blb83a17a5fbca3e16@mail.gmail.com>
References: <111060c20909030400k2c17508blb83a17a5fbca3e16@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.0909051256580.9377@reclus.nhh.no>

On Thu, 3 Sep 2009, Matthieu Stigler wrote:

> Hi
>
> I'm puzzled hot to deal with NAs and lakes on SpatialPolygonsDataFrame
> objects...
>
> My problems (maybe should I post in separated files?):
> -spplot does not seem to handle specially NA values...
> -neighbors graph seem to make links even to lakes/holes
> -moran.test seem to work with NA values... but what about the
> neighbors/weights used as input? Are the results biased?
> -localmoran does not seem to work with NA
>
> I illustrate each of them below.
>
>
> Example is based on Syracuse data from ASDAR (data from web-site
> http://www.asdar-book.org/bundles/lat1_bundle.zip):
> #NA PROBLEM
> setwd("H:/Documents/Stats/Book Bivand/Chap 9")
> library(sp)
> library(rgdal)
> NY8 <- readOGR(".", "NY8_utm18")
> library(spdep)
> Syracuse <- NY8[NY8$AREANAME == "Syracuse city",]
> Syracuse2<-Syracuse
> Syracuse2$POP8[43]<-NA
> spplot(Syracuse2, zcol="POP8")
> #it appears as white, similar to other colors which are nevertheless
> true values and not NA!

NAs are coded "transparent", which look the same when the background is 
white. In the default divergent palette, white is used. If you do:

library(lattice)
trellis.device(bg="grey")
spplot(Syracuse2, zcol="POP8")

(wrong way to change background but OK to show the point) or

trellis.par.set(sp.theme())
spplot(Syracuse2, zcol="POP8")

where white is not in the palette.

>
> LAKE problem:
> #check if lakes:
> sapply(sapply(slot(Syracuse, "polygons"),function(x) slot(x,
> "Polygons")), function(x) slot(x, "hole"))
> #btw, it is pretty complicated, are there some more user-friendly
> wrapers for that? kind of isHole, getHole?

Holes are easy to fall into, so no wrappers.

> slot(slot(slot(Syracuse2, "polygons")[[43]],"Polygons")[[1]], "hole")<-TRUE
> plot(poly2nb(Syracuse), coordinates(Syracuse2))

poly2nb() uses all the geometries present. The prefered choice is to 
subset the geometries to keep only the ones the user requires, so:


not_holes <- !sapply(sapply(slot(Syracuse2, "polygons"),function(x)
   slot(x, "Polygons")), function(x) slot(x, "hole"))
nb <- poly2nb(Syracuse2[not_holes,])
plot(nb, coordinates(Syracuse2)[not_holes,])

I guess this clarifies things. In principle, a single Polygon object in a 
Polygons object will not be a hole anyway (it is an external ring), so 
your example is rather artificial. Subsetting the geometries with "[" is 
to be prefered.

Hope this helps,

Roger

I guess the same applies to your followup - but spautolm() ought not to 
permit computation on missing data - I'll check this.

>
> Here it seems that it did not take into account the hole and still
> computes neighbors... right?
>
> And if yes... does it affect the results using moran tests?
>
> Thanks a lot!
> Matthieu Stigler
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From matthieu.stigler at gmail.com  Mon Sep  7 08:43:24 2009
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Mon, 7 Sep 2009 08:43:24 +0200
Subject: [R-sig-Geo] Dealing with lakes and NA in
	Moran/SpatialPolygonsDataFrame
In-Reply-To: <alpine.LRH.2.00.0909051256580.9377@reclus.nhh.no>
References: <111060c20909030400k2c17508blb83a17a5fbca3e16@mail.gmail.com>
	<alpine.LRH.2.00.0909051256580.9377@reclus.nhh.no>
Message-ID: <111060c20909062343n6b886cb0hbe8427f31e9b9f36@mail.gmail.com>

2009/9/5 Roger Bivand <Roger.Bivand at nhh.no>:
> On Thu, 3 Sep 2009, Matthieu Stigler wrote:
>
>> Hi
>>
>> I'm puzzled hot to deal with NAs and lakes on SpatialPolygonsDataFrame
>> objects...
>>
>> My problems (maybe should I post in separated files?):
>> -spplot does not seem to handle specially NA values...
>> -neighbors graph seem to make links even to lakes/holes
>> -moran.test seem to work with NA values... but what about the
>> neighbors/weights used as input? Are the results biased?
>> -localmoran does not seem to work with NA
>>
>> I illustrate each of them below.
>>
>>
>> Example is based on Syracuse data from ASDAR (data from web-site
>> http://www.asdar-book.org/bundles/lat1_bundle.zip):
>> #NA PROBLEM
>> setwd("H:/Documents/Stats/Book Bivand/Chap 9")
>> library(sp)
>> library(rgdal)
>> NY8 <- readOGR(".", "NY8_utm18")
>> library(spdep)
>> Syracuse <- NY8[NY8$AREANAME == "Syracuse city",]
>> Syracuse2<-Syracuse
>> Syracuse2$POP8[43]<-NA
>> spplot(Syracuse2, zcol="POP8")
>> #it appears as white, similar to other colors which are nevertheless
>> true values and not NA!
>

Thanks a lot for your help!

For plotting NAs... well changing bg is a little bit radical, as
everything is then different... the problem came actually because I
used heat.col() which looks really pretty but uses white... isn't it a
function in treillis to change only NAs and not all the rest with?
Thanks!

> NAs are coded "transparent", which look the same when the background is
> white. In the default divergent palette, white is used. If you do:
>
> library(lattice)
> trellis.device(bg="grey")
> spplot(Syracuse2, zcol="POP8")
>
> (wrong way to change background but OK to show the point) or
>
> trellis.par.set(sp.theme())
> spplot(Syracuse2, zcol="POP8")
>
> where white is not in the palette.
>
>>
>> LAKE problem:
>> #check if lakes:
>> sapply(sapply(slot(Syracuse, "polygons"),function(x) slot(x,
>> "Polygons")), function(x) slot(x, "hole"))
>> #btw, it is pretty complicated, are there some more user-friendly
>> wrapers for that? kind of isHole, getHole?
>
> Holes are easy to fall into, so no wrappers.
>
>> slot(slot(slot(Syracuse2, "polygons")[[43]],"Polygons")[[1]],
>> "hole")<-TRUE
>> plot(poly2nb(Syracuse), coordinates(Syracuse2))
>
> poly2nb() uses all the geometries present. The prefered choice is to subset
> the geometries to keep only the ones the user requires, so:
>
>
> not_holes <- !sapply(sapply(slot(Syracuse2, "polygons"),function(x)
> ?slot(x, "Polygons")), function(x) slot(x, "hole"))
> nb <- poly2nb(Syracuse2[not_holes,])
> plot(nb, coordinates(Syracuse2)[not_holes,])
>
> I guess this clarifies things. In principle, a single Polygon object in a
> Polygons object will not be a hole anyway (it is an external ring), so your
> example is rather artificial. Subsetting the geometries with "[" is to be
> prefered.

Oh so for the lake, I should rather use ringDir?

And when my dataset contains lakes and NAs, should I do the same as
above also for Nas and then subset? Will Moran values be affected by
that?

Thanks a lot!

>
> Hope this helps,
>
> Roger
>
> I guess the same applies to your followup - but spautolm() ought not to
> permit computation on missing data - I'll check this.
>
>>
>> Here it seems that it did not take into account the hole and still
>> computes neighbors... right?
>>
>> And if yes... does it affect the results using moran tests?
>>
>> Thanks a lot!
>> Matthieu Stigler
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Roger Bivand
> Economic Geography Section, Department of Economics, Norwegian School of
> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
>


From Roger.Bivand at nhh.no  Mon Sep  7 09:22:54 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 7 Sep 2009 09:22:54 +0200 (CEST)
Subject: [R-sig-Geo] Dealing with lakes and NA in
 Moran/SpatialPolygonsDataFrame
In-Reply-To: <111060c20909062343n6b886cb0hbe8427f31e9b9f36@mail.gmail.com>
References: <111060c20909030400k2c17508blb83a17a5fbca3e16@mail.gmail.com>
	<alpine.LRH.2.00.0909051256580.9377@reclus.nhh.no>
	<111060c20909062343n6b886cb0hbe8427f31e9b9f36@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.0909070910310.19391@reclus.nhh.no>

On Mon, 7 Sep 2009, Matthieu Stigler wrote:

> 2009/9/5 Roger Bivand <Roger.Bivand at nhh.no>:
>> On Thu, 3 Sep 2009, Matthieu Stigler wrote:
>>
>>> Hi
>>>
>>> I'm puzzled hot to deal with NAs and lakes on SpatialPolygonsDataFrame
>>> objects...
>>>
>>> My problems (maybe should I post in separated files?):
>>> -spplot does not seem to handle specially NA values...
>>> -neighbors graph seem to make links even to lakes/holes
>>> -moran.test seem to work with NA values... but what about the
>>> neighbors/weights used as input? Are the results biased?
>>> -localmoran does not seem to work with NA
>>>
>>> I illustrate each of them below.
>>>
>>>
>>> Example is based on Syracuse data from ASDAR (data from web-site
>>> http://www.asdar-book.org/bundles/lat1_bundle.zip):
>>> #NA PROBLEM
>>> setwd("H:/Documents/Stats/Book Bivand/Chap 9")
>>> library(sp)
>>> library(rgdal)
>>> NY8 <- readOGR(".", "NY8_utm18")
>>> library(spdep)
>>> Syracuse <- NY8[NY8$AREANAME == "Syracuse city",]
>>> Syracuse2<-Syracuse
>>> Syracuse2$POP8[43]<-NA
>>> spplot(Syracuse2, zcol="POP8")
>>> #it appears as white, similar to other colors which are nevertheless
>>> true values and not NA!
>>
>
> Thanks a lot for your help!
>
> For plotting NAs... well changing bg is a little bit radical, as
> everything is then different... the problem came actually because I
> used heat.col() which looks really pretty but uses white... isn't it a
> function in treillis to change only NAs and not all the rest with?
> Thanks!

Not that I am aware of. If you want this level of control, use the at= and 
col.regions= arguments, and assign an improbable value to the NAs, or use 
base graphics and use hatching for the NAs. I'm travelling and do not have 
Deepayan Sarkar's excellent lattice book with me, perhaps you could check 
what he says?

>
>> NAs are coded "transparent", which look the same when the background is
>> white. In the default divergent palette, white is used. If you do:
>>
>> library(lattice)
>> trellis.device(bg="grey")
>> spplot(Syracuse2, zcol="POP8")
>>
>> (wrong way to change background but OK to show the point) or
>>
>> trellis.par.set(sp.theme())
>> spplot(Syracuse2, zcol="POP8")
>>
>> where white is not in the palette.
>>
>>>
>>> LAKE problem:
>>> #check if lakes:
>>> sapply(sapply(slot(Syracuse, "polygons"),function(x) slot(x,
>>> "Polygons")), function(x) slot(x, "hole"))
>>> #btw, it is pretty complicated, are there some more user-friendly
>>> wrapers for that? kind of isHole, getHole?
>>
>> Holes are easy to fall into, so no wrappers.
>>
>>> slot(slot(slot(Syracuse2, "polygons")[[43]],"Polygons")[[1]],
>>> "hole")<-TRUE
>>> plot(poly2nb(Syracuse), coordinates(Syracuse2))
>>
>> poly2nb() uses all the geometries present. The prefered choice is to subset
>> the geometries to keep only the ones the user requires, so:
>>
>>
>> not_holes <- !sapply(sapply(slot(Syracuse2, "polygons"),function(x)
>> ?slot(x, "Polygons")), function(x) slot(x, "hole"))
>> nb <- poly2nb(Syracuse2[not_holes,])
>> plot(nb, coordinates(Syracuse2)[not_holes,])
>>
>> I guess this clarifies things. In principle, a single Polygon object in a
>> Polygons object will not be a hole anyway (it is an external ring), so your
>> example is rather artificial. Subsetting the geometries with "[" is to be
>> prefered.
>
> Oh so for the lake, I should rather use ringDir?
>
> And when my dataset contains lakes and NAs, should I do the same as
> above also for Nas and then subset? Will Moran values be affected by
> that?

Please do not use the hole= or ringDir= slot as topologically checked. See 
checkPolygonsHoles() in maptools for details. In many representations, the 
entity (here Polygons object) has to have one or more external rings that 
are not holes, so your lake may be turned from hole to non-hole by 
software. If there is "nothing" there, subset it out on an attribute, for 
example a factor describing land cover:

x1 <- x0[x0$landCover != "lake",]

then subset on the NAs. Using the geometry characteristics of entities 
whose topologies have not been built or checked is not robust (may work 
with some data sets, but not with others). A lake isn't a hole, it is an 
entity that is a lake, or it is not an entity at all (subsetted out). In 
this case you need to check your visualization representations.

Confusion with Moran's I will result if your entities are confused, so 
sort them out first.

Hope this helps,

Roger

>
> Thanks a lot!
>
>>
>> Hope this helps,
>>
>> Roger
>>
>> I guess the same applies to your followup - but spautolm() ought not to
>> permit computation on missing data - I'll check this.
>>
>>>
>>> Here it seems that it did not take into account the hole and still
>>> computes neighbors... right?
>>>
>>> And if yes... does it affect the results using moran tests?
>>>
>>> Thanks a lot!
>>> Matthieu Stigler
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Economic Geography Section, Department of Economics, Norwegian School of
>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From alexandre.villers at cebc.cnrs.fr  Mon Sep  7 09:30:42 2009
From: alexandre.villers at cebc.cnrs.fr (Alexandre VILLERS)
Date: Mon, 07 Sep 2009 09:30:42 +0200
Subject: [R-sig-Geo] Producing ENFA derived suitability maps with adehabitat
Message-ID: <4AA4B6A2.7060200@cebc.cnrs.fr>

Dear list(s) 'members,

I have a dataset representing the position of a species over a large 
region for 3 different years (2000, 2004 and 2008) and seven 
ecogeographical variables. Given that the study takes place on an 
agricultural region, the landscape changes every year at fine scale and 
there is a long term trend in crops sowed, leading me to account for 
between years variability.
I would like to use the niche determined by the landscape and location 
of birds in 2000 and then, appply this niche over the landscape in 2004 
and 2008 (this would, I believe, give me a first answer on whether 
changes in birds' location are due to a decrease in habitat suitability 
or birds).
I have already computed ENFA with adehabitat (using the doc provided 
with the package "adehabitat" and the www.spatial-analyst.net of T. 
Hengl) but I don't see how exactly using the result of an ENFA on a 
"new" landscape...

Any link or help would be welcome.

Alex

-- 
Alexandre Villers
PhD Student
Team "Biodiversity"
Centre d'Etudes Biologiques de Chiz?-CNRS UPR1934
79360 Beauvoir sur Niort

Phone +33 (0)5 49 09 96 13
Fax   +33 (0)5 49 09 65 26




__________ Information from ESET Mail Security, version of virus signature database 4401 (20090906) __________

The message was checked by ESET Mail Security.
http://www.eset.com


From ogbos.okike at gmail.com  Mon Sep  7 13:18:53 2009
From: ogbos.okike at gmail.com (ogbos okike)
Date: Mon, 7 Sep 2009 13:18:53 +0200
Subject: [R-sig-Geo] Superposition of two plots
Message-ID: <43b418580909070418n5ce06602l4cdcfd2ba4372241@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090907/e3d34e3b/attachment.pl>

From r.hijmans at gmail.com  Mon Sep  7 18:09:45 2009
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Mon, 7 Sep 2009 09:09:45 -0700
Subject: [R-sig-Geo] Superposition of two plots
In-Reply-To: <43b418580909070418n5ce06602l4cdcfd2ba4372241@mail.gmail.com>
References: <43b418580909070418n5ce06602l4cdcfd2ba4372241@mail.gmail.com>
Message-ID: <dc22b2570909070909q640c515al4a14841b07851803@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090907/e9ea8ba5/attachment.pl>

From shaofei.chen at utdallas.edu  Tue Sep  8 06:39:15 2009
From: shaofei.chen at utdallas.edu (Shaofei Chen)
Date: Mon, 7 Sep 2009 23:39:15 -0500
Subject: [R-sig-Geo] How to achieve the boundary of a polygon?
Message-ID: <262A46E8D59546D4AA192FD6CC8D5C1A@shaofei>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090907/d595f04e/attachment.pl>

From edzer.pebesma at uni-muenster.de  Tue Sep  8 08:09:06 2009
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 08 Sep 2009 08:09:06 +0200
Subject: [R-sig-Geo] How to achieve the boundary of a polygon?
In-Reply-To: <262A46E8D59546D4AA192FD6CC8D5C1A@shaofei>
References: <262A46E8D59546D4AA192FD6CC8D5C1A@shaofei>
Message-ID: <4AA5F502.60507@uni-muenster.de>

Have you had a look at spsample in package sp?

Shaofei Chen wrote:
> Hi,
>
> I want to randomly sample some points within a polygon. After reading the bounday file to the SpatialPolygonsDataFrame, I found that I can only sample them in the rectangular containing the polygon based on bbox.
>
> bound <- readShapePoly("bound.shp") 
> plot(bound)
> rand.points=rpoint(100, win=as.owin(c(bound at bbox[1],bound at bbox[3],bound at bbox[2],bound at bbox[4])))
>
> Can you help me sample them inside the boundary?
> Thanks!
>
> Best,
> Shaofei
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de/
http://www.springer.com/978-0-387-78170-9 e.pebesma at wwu.de


From michael.denslow at gmail.com  Tue Sep  8 17:25:51 2009
From: michael.denslow at gmail.com (Michael Denslow)
Date: Tue, 8 Sep 2009 11:25:51 -0400
Subject: [R-sig-Geo] decimate points from a Lidar file
Message-ID: <b440a3f80909080825q5e9fa42fmabf83a2140e1afe8@mail.gmail.com>

Dear R-sig-geo,

I am posting the following question for one of my professors. I would
appreciate it if you could help me point him in the right direction.

He is looking for a function which could take a lidar point shapefile
and decimate (remove) a selected number of points
from the file. Below is what he asked me. The file of the merged LIDAR
tiles contains roughly 350,000,000 points.

"I am looking for some software to take a shapefile of lidar elevation
points and remove a selected number of points. The shapefile
(with fewer points) would then be used to generate a DEM. A
calculation of the appropriate resolution for a DEM can be made based
on a relationship between the
number of points and extent of the study area. The goal is to create
DEMs at a series of resolutions with the appropriate points to area
relationship. So a
software program with which you could remove a selected number of
lidar points would be helpful."

I imagine that one of the packages that deals with point data (e.g.
sp, spatstat) can do this kind of thing but I am not sure how to get
him started. Can anyone point me to a specify function or make a
suggestion.

Thanks in advance,
Michael

-- 
Michael Denslow

Graduate Student
I.W. Carpenter Jr. Herbarium [BOON]
Department of Biology
Appalachian State University
Boone, North Carolina U.S.A.

-- AND --

Communications Manager
Southeast Regional Network of Expertise and Collections
sernec.org


From debeaudette at ucdavis.edu  Tue Sep  8 18:06:12 2009
From: debeaudette at ucdavis.edu (Dylan Beaudette)
Date: Tue, 8 Sep 2009 09:06:12 -0700
Subject: [R-sig-Geo] decimate points from a Lidar file
In-Reply-To: <b440a3f80909080825q5e9fa42fmabf83a2140e1afe8@mail.gmail.com>
References: <b440a3f80909080825q5e9fa42fmabf83a2140e1afe8@mail.gmail.com>
Message-ID: <200909080906.12965.dylan.beaudette@gmail.com>

On Tuesday 08 September 2009, Michael Denslow wrote:
> Dear R-sig-geo,
>
> I am posting the following question for one of my professors. I would
> appreciate it if you could help me point him in the right direction.
>
> He is looking for a function which could take a lidar point shapefile
> and decimate (remove) a selected number of points
> from the file. Below is what he asked me. The file of the merged LIDAR
> tiles contains roughly 350,000,000 points.
>
> "I am looking for some software to take a shapefile of lidar elevation
> points and remove a selected number of points. The shapefile
> (with fewer points) would then be used to generate a DEM. A
> calculation of the appropriate resolution for a DEM can be made based
> on a relationship between the
> number of points and extent of the study area. The goal is to create
> DEMs at a series of resolutions with the appropriate points to area
> relationship. So a
> software program with which you could remove a selected number of
> lidar points would be helpful."
>
> I imagine that one of the packages that deals with point data (e.g.
> sp, spatstat) can do this kind of thing but I am not sure how to get
> him started. Can anyone point me to a specify function or make a
> suggestion.
>
> Thanks in advance,
> Michael

Hi,

I would recommend the r.in.xyz command within GRASS GIS. It can be used for 
operations very similar to what you are looking for. The resulting file is a 
raster, decimated to some set resolution. Some screen shots:

http://hamish.bowman.googlepages.com/grassfiles#xyz

Cheers,
Dylan

-- 
Dylan Beaudette
Soil Resource Laboratory
http://casoilresource.lawr.ucdavis.edu/
University of California at Davis
530.754.7341


From katakagi at hotmail.com  Tue Sep  8 19:17:26 2009
From: katakagi at hotmail.com (Kenneth Takagi)
Date: Tue, 8 Sep 2009 13:17:26 -0400
Subject: [R-sig-Geo] decimate points from a Lidar file
Message-ID: <BLU113-W92BEBAEE43BC9868EE4EBD4EA0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090908/e9ec84e8/attachment.pl>

From Roger.Bivand at nhh.no  Tue Sep  8 20:36:27 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 8 Sep 2009 20:36:27 +0200 (CEST)
Subject: [R-sig-Geo] decimate points from a Lidar file
In-Reply-To: <200909080906.12965.dylan.beaudette@gmail.com>
References: <b440a3f80909080825q5e9fa42fmabf83a2140e1afe8@mail.gmail.com>
	<200909080906.12965.dylan.beaudette@gmail.com>
Message-ID: <alpine.LRH.2.00.0909082024420.24611@reclus.nhh.no>

On Tue, 8 Sep 2009, Dylan Beaudette wrote:

> On Tuesday 08 September 2009, Michael Denslow wrote:
>> Dear R-sig-geo,
>>
>> I am posting the following question for one of my professors. I would
>> appreciate it if you could help me point him in the right direction.
>>
>> He is looking for a function which could take a lidar point shapefile
>> and decimate (remove) a selected number of points
>> from the file. Below is what he asked me. The file of the merged LIDAR
>> tiles contains roughly 350,000,000 points.
>>
>> "I am looking for some software to take a shapefile of lidar elevation
>> points and remove a selected number of points. The shapefile
>> (with fewer points) would then be used to generate a DEM. A
>> calculation of the appropriate resolution for a DEM can be made based
>> on a relationship between the
>> number of points and extent of the study area. The goal is to create
>> DEMs at a series of resolutions with the appropriate points to area
>> relationship. So a
>> software program with which you could remove a selected number of
>> lidar points would be helpful."
>>
>> I imagine that one of the packages that deals with point data (e.g.
>> sp, spatstat) can do this kind of thing but I am not sure how to get
>> him started. Can anyone point me to a specify function or make a
>> suggestion.
>>
>> Thanks in advance,
>> Michael
>
> Hi,
>
> I would recommend the r.in.xyz command within GRASS GIS. It can be used for
> operations very similar to what you are looking for. The resulting file is a
> raster, decimated to some set resolution. Some screen shots:
>
> http://hamish.bowman.googlepages.com/grassfiles#xyz

Right, it is not possible to read 350 M points into R and do anything with 
them. I would actually suggest using a database as a store directly, 
possibly with some spatial support, but not necessarily. If the data were, 
say, in a database, subsets could be read in by selecting, or sample 
inclusion fields could be added to a table for samples, giving the FID 
values to be chosen. I feel that this would give the flexibility needed. 
Both SQLite and PostgreSQL are supported by OGR, so may also be accessed 
from rgdal functions if the appropriate drivers are present, but dumping 
to CSV files for smaller samples ought to be OK. If you are on Windows, 
see OSGeo4W or FWTools for ideas. The advantage of a database over a flat 
text file is that selection is much easier.

You could also look at the SQLiteMap package, which uses an alternative 
set of spatial extensions for SQLite. Import the data outside R, then 
select from inside (untried).

Hope this helps,

Roger



>
> Cheers,
> Dylan
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From shaofei.chen at utdallas.edu  Tue Sep  8 20:39:22 2009
From: shaofei.chen at utdallas.edu (Shaofei Chen)
Date: Tue, 8 Sep 2009 13:39:22 -0500
Subject: [R-sig-Geo] How to achieve the boundary of a polygon?
In-Reply-To: <4AA5F502.60507@uni-muenster.de>
References: <262A46E8D59546D4AA192FD6CC8D5C1A@shaofei>
	<4AA5F502.60507@uni-muenster.de>
Message-ID: <000e01ca30b3$aeb09dd0$0c11d970$@chen@utdallas.edu>

Thank you very much. It works for me now. Previously I only looked at the
spatstat package.

Shaofei

-----Original Message-----
From: Edzer Pebesma [mailto:edzer.pebesma at uni-muenster.de] 
Sent: Tuesday, September 08, 2009 1:09 AM
To: Shaofei Chen
Cc: r-sig-geo at stat.math.ethz.ch
Subject: Re: [R-sig-Geo] How to achieve the boundary of a polygon?

Have you had a look at spsample in package sp?

Shaofei Chen wrote:
> Hi,
>
> I want to randomly sample some points within a polygon. After reading the
bounday file to the SpatialPolygonsDataFrame, I found that I can only sample
them in the rectangular containing the polygon based on bbox.
>
> bound <- readShapePoly("bound.shp") 
> plot(bound)
> rand.points=rpoint(100,
win=as.owin(c(bound at bbox[1],bound at bbox[3],bound at bbox[2],bound at bbox[4])))
>
> Can you help me sample them inside the boundary?
> Thanks!
>
> Best,
> Shaofei
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de/
http://www.springer.com/978-0-387-78170-9 e.pebesma at wwu.de


From michael.denslow at gmail.com  Wed Sep  9 02:42:40 2009
From: michael.denslow at gmail.com (Michael Denslow)
Date: Tue, 8 Sep 2009 20:42:40 -0400
Subject: [R-sig-Geo] decimate points from a Lidar file
In-Reply-To: <alpine.LRH.2.00.0909082024420.24611@reclus.nhh.no>
References: <b440a3f80909080825q5e9fa42fmabf83a2140e1afe8@mail.gmail.com>
	<200909080906.12965.dylan.beaudette@gmail.com>
	<alpine.LRH.2.00.0909082024420.24611@reclus.nhh.no>
Message-ID: <b440a3f80909081742re34c1av4929ea8ac972544f@mail.gmail.com>

Dylan, Ken & Roger,

Thank you for the suggestions and advice. This gives me a great place to start.

Michael


These are all
On Tue, Sep 8, 2009 at 2:36 PM, Roger Bivand<Roger.Bivand at nhh.no> wrote:
> On Tue, 8 Sep 2009, Dylan Beaudette wrote:
>
>> On Tuesday 08 September 2009, Michael Denslow wrote:
>>>
>>> Dear R-sig-geo,
>>>
>>> I am posting the following question for one of my professors. I would
>>> appreciate it if you could help me point him in the right direction.
>>>
>>> He is looking for a function which could take a lidar point shapefile
>>> and decimate (remove) a selected number of points
>>> from the file. Below is what he asked me. The file of the merged LIDAR
>>> tiles contains roughly 350,000,000 points.
>>>
>>> "I am looking for some software to take a shapefile of lidar elevation
>>> points and remove a selected number of points. The shapefile
>>> (with fewer points) would then be used to generate a DEM. A
>>> calculation of the appropriate resolution for a DEM can be made based
>>> on a relationship between the
>>> number of points and extent of the study area. The goal is to create
>>> DEMs at a series of resolutions with the appropriate points to area
>>> relationship. So a
>>> software program with which you could remove a selected number of
>>> lidar points would be helpful."
>>>
>>> I imagine that one of the packages that deals with point data (e.g.
>>> sp, spatstat) can do this kind of thing but I am not sure how to get
>>> him started. Can anyone point me to a specify function or make a
>>> suggestion.
>>>
>>> Thanks in advance,
>>> Michael
>>
>> Hi,
>>
>> I would recommend the r.in.xyz command within GRASS GIS. It can be used
>> for
>> operations very similar to what you are looking for. The resulting file is
>> a
>> raster, decimated to some set resolution. Some screen shots:
>>
>> http://hamish.bowman.googlepages.com/grassfiles#xyz
>
> Right, it is not possible to read 350 M points into R and do anything with
> them. I would actually suggest using a database as a store directly,
> possibly with some spatial support, but not necessarily. If the data were,
> say, in a database, subsets could be read in by selecting, or sample
> inclusion fields could be added to a table for samples, giving the FID
> values to be chosen. I feel that this would give the flexibility needed.
> Both SQLite and PostgreSQL are supported by OGR, so may also be accessed
> from rgdal functions if the appropriate drivers are present, but dumping to
> CSV files for smaller samples ought to be OK. If you are on Windows, see
> OSGeo4W or FWTools for ideas. The advantage of a database over a flat text
> file is that selection is much easier.
>
> You could also look at the SQLiteMap package, which uses an alternative set
> of spatial extensions for SQLite. Import the data outside R, then select
> from inside (untried).
>
> Hope this helps,
>
> Roger
>
>
>
>>
>> Cheers,
>> Dylan
>>
>>
>
> --
> Roger Bivand
> Economic Geography Section, Department of Economics, Norwegian School of
> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Michael Denslow

Graduate Student
I.W. Carpenter Jr. Herbarium [BOON]
Department of Biology
Appalachian State University
Boone, North Carolina U.S.A.

-- AND --

Communications Manager
Southeast Regional Network of Expertise and Collections
sernec.org


From alexandre.villers at cebc.cnrs.fr  Wed Sep  9 09:49:36 2009
From: alexandre.villers at cebc.cnrs.fr (Alexandre VILLERS)
Date: Wed, 09 Sep 2009 09:49:36 +0200
Subject: [R-sig-Geo] creating a grid from a contour vector shape
Message-ID: <4AA75E10.3070400@cebc.cnrs.fr>

Thank you for your messages. I wasn't very clear in my post but both 
answers will be usefull...
Best regards

Alex

-- 
Alexandre Villers
PhD Student
Team "Biodiversity"
Centre d'Etudes Biologiques de Chiz?-CNRS UPR1934
79360 Beauvoir sur Niort

Phone +33 (0)5 49 09 96 13
Fax   +33 (0)5 49 09 65 26




__________ Information from ESET Mail Security, version of virus signature database 4408 (20090908) __________

The message was checked by ESET Mail Security.
http://www.eset.com


From hengl at spatial-analyst.net  Wed Sep  9 10:27:31 2009
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Wed, 9 Sep 2009 10:27:31 +0200
Subject: [R-sig-Geo] Producing ENFA derived suitability maps with
	adehabitat
In-Reply-To: <4AA4B6A2.7060200@cebc.cnrs.fr>
References: <4AA4B6A2.7060200@cebc.cnrs.fr>
Message-ID: <EDBAFE72F7A34136B989692BBF195C37@pcibed193>


Dear Alexandre,

I think that this should be doable.

Once you run the ENFA to estimate the habitat model, copy the values of new rasters (future habitat)
and replace the original values in the "" object. Then simply re-run the predict.enfa method e.g.:

# prepare the dataset for ENFA:
> beidata <- data2enfa(as.kasc(list(dem=import.asc("dem.asc"), grad=import.asc("grad.asc"),
twi=import.asc("twi.asc"), achan=import.asc("achan.asc"))), bei.sub.pnt at coords)
# run ENFA: 
> enfa.bei <- enfa(dudi.pca(beidata$tab, scannf=FALSE), beidata$pr, scannf=FALSE, nf=2)
# same area, new environmental conditions:
> beidata.new <- data2enfa(as.kasc(list(dem=import.asc("dem_new.asc"),
grad=import.asc("grad_new.asc"), twi=import.asc("twi_new.asc"), achan=import.asc("achan_new.asc"))),
bei.sub.pnt at coords)  # needs to have the same mask!
> enfa.bei.new <- enfa(dudi.pca(beidata.new$tab, scannf=FALSE), beidata.new$pr, scannf=FALSE, nf=2)
# copy the model parameters fitted previously:
> enfa.bei.new$m <- enfa.bei$m
> enfa.bei.new$s <- enfa.bei$s
> enfa.bei.new$lw <- enfa.bei$lw
> enfa.bei.new$li <- enfa.bei$li
> enfa.bei.new$co <- enfa.bei$co
> enfa.bei.new$mar <- enfa.bei$mar
> bei.dist.new <- predict(enfa.bei.new, beidata.new$index, beidata.new$attr)

...something like this (I am not really sure which parameters do you have to copy, but the $tab
data.frame certainly needs to be replaced with new predictors).

Let me know if it works.

cheers,

T. Hengl
http://spatial-analyst.net/wiki/index.php?title=Species_Distribution_Modelling 


> -----Original Message-----
> From: r-sig-geo-bounces at stat.math.ethz.ch [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf
> Of Alexandre VILLERS
> Sent: Monday, September 07, 2009 9:31 AM
> To: Aide R SIG GEO; r-sig-ecology at r-project.org
> Subject: [R-sig-Geo] Producing ENFA derived suitability maps with adehabitat
> 
> Dear list(s) 'members,
> 
> I have a dataset representing the position of a species over a large
> region for 3 different years (2000, 2004 and 2008) and seven
> ecogeographical variables. Given that the study takes place on an
> agricultural region, the landscape changes every year at fine scale and
> there is a long term trend in crops sowed, leading me to account for
> between years variability.
> I would like to use the niche determined by the landscape and location
> of birds in 2000 and then, appply this niche over the landscape in 2004
> and 2008 (this would, I believe, give me a first answer on whether
> changes in birds' location are due to a decrease in habitat suitability
> or birds).
> I have already computed ENFA with adehabitat (using the doc provided
> with the package "adehabitat" and the www.spatial-analyst.net of T.
> Hengl) but I don't see how exactly using the result of an ENFA on a
> "new" landscape...
> 
> Any link or help would be welcome.
> 
> Alex
> 
> --
> Alexandre Villers
> PhD Student
> Team "Biodiversity"
> Centre d'Etudes Biologiques de Chiz?-CNRS UPR1934
> 79360 Beauvoir sur Niort
> 
> Phone +33 (0)5 49 09 96 13
> Fax   +33 (0)5 49 09 65 26
> 
> 
> 
> 
> __________ Information from ESET Mail Security, version of virus signature database 4401
> (20090906) __________
> 
> The message was checked by ESET Mail Security.
> http://www.eset.com
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From jofrecarnicer at yahoo.es  Wed Sep  9 12:46:42 2009
From: jofrecarnicer at yahoo.es (jofre carnicer cols)
Date: Wed, 9 Sep 2009 10:46:42 +0000 (GMT)
Subject: [R-sig-Geo] introducing first order autocorrelation functions in
	GLMM to account for temporal autocorrelation
In-Reply-To: <mailman.13.1252490404.2587.r-sig-geo@stat.math.ethz.ch>
Message-ID: <714868.54723.qm@web26003.mail.ukl.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090909/f84c19ed/attachment.asc>

From alobolistas at gmail.com  Wed Sep  9 13:24:25 2009
From: alobolistas at gmail.com (Agustin Lobo)
Date: Wed, 09 Sep 2009 13:24:25 +0200
Subject: [R-sig-Geo] Errror with gmeta6()
Message-ID: <4AA79069.1010101@gmail.com>

Hi!

I've started spgrass6() with no problems
(I get:
GRASS GIS interface loaded with GRASS version: 6.4.0RC4
and location: carlos

 but then get an error with gmeta6:

 > gmeta6()
g.region: error while loading shared libraries: libgrass_vect.so: cannot 
open shared object file: No such file or directory
Error in if (file.exists(file) == FALSE) if (!missing(asText) && asText 
==  :
  argument is of length zero
Error in parseGRASS(cmd) : g.region not parsed

I'm using R  2.9.1 on ubuntu jaunty and just
made install.packages("spgrass6")

g.region -p  works fine in the grass console, but
 > system("g.region -p")
g.region: error while loading shared libraries: libgrass_vect.so: cannot 
open shared object file: No such file or directory

Any idea on how to fix this problem?
Thanks
Agus
-------------- next part --------------
A non-text attachment was scrubbed...
Name: alobolistas.vcf
Type: text/x-vcard
Size: 251 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090909/a758274b/attachment.vcf>

From Roger.Bivand at nhh.no  Wed Sep  9 13:35:55 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 9 Sep 2009 13:35:55 +0200 (CEST)
Subject: [R-sig-Geo] Errror with gmeta6()
In-Reply-To: <4AA79069.1010101@gmail.com>
References: <4AA79069.1010101@gmail.com>
Message-ID: <alpine.LRH.2.00.0909091328550.28014@reclus.nhh.no>

On Wed, 9 Sep 2009, Agustin Lobo wrote:

> Hi!
>
> I've started spgrass6() with no problems
> (I get:
> GRASS GIS interface loaded with GRASS version: 6.4.0RC4
> and location: carlos
>
> but then get an error with gmeta6:
>
>> gmeta6()
> g.region: error while loading shared libraries: libgrass_vect.so: cannot open 
> shared object file: No such file or directory
> Error in if (file.exists(file) == FALSE) if (!missing(asText) && asText ==  :
> argument is of length zero
> Error in parseGRASS(cmd) : g.region not parsed
>
> I'm using R  2.9.1 on ubuntu jaunty and just
> made install.packages("spgrass6")
>
> g.region -p  works fine in the grass console, but
>> system("g.region -p")
> g.region: error while loading shared libraries: libgrass_vect.so: cannot open 
> shared object file: No such file or directory

This will be a "dependency hell" problem between GDAL and GRASS binaries, 
probably a stale GRASS GDAL plugin somewhere. It has been seen on Debian 
based distributions before, for example:

http://lists.osgeo.org/pipermail/grass-stats/2009-July/001105.html

Most likely you have multiple GDAL and/or GDAL binaries that do not like 
each other, and because of the possible reverse dependence in the GDAL 
GRASS plugin, they get in each others' way. The grass-stats list may be a 
good place to ask too.

Roger

>
> Any idea on how to fix this problem?
> Thanks
> Agus
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From alobolistas at gmail.com  Wed Sep  9 14:27:19 2009
From: alobolistas at gmail.com (Agustin Lobo)
Date: Wed, 09 Sep 2009 14:27:19 +0200
Subject: [R-sig-Geo] Errror with gmeta6()
In-Reply-To: <alpine.LRH.2.00.0909091328550.28014@reclus.nhh.no>
References: <4AA79069.1010101@gmail.com>
	<alpine.LRH.2.00.0909091328550.28014@reclus.nhh.no>
Message-ID: <4AA79F27.5010304@gmail.com>

I've found the problem:
I had both libgdal1-1.5.0-grass and
libgdal1-1.6.0-grass

If I keep libgdal1-1.6.0-grass only and
reinstall rgdal and spgrass6, things go back
to normality.

The problem is that libgdal1-1.5.0-grass is automatically
installed by the qgis grass plugin. So without libgdal1-1.5.0-grass I
cannot use grass from within qgis. The funny thing is that
qgis actually requires libgdal1-1.6.0-grass also,
otherwise you get an error at displaying grass layers.

I'll keep you posted.

Agus

Roger Bivand wrote:
> On Wed, 9 Sep 2009, Agustin Lobo wrote:
> 
>> Hi!
>>
>> I've started spgrass6() with no problems
>> (I get:
>> GRASS GIS interface loaded with GRASS version: 6.4.0RC4
>> and location: carlos
>>
>> but then get an error with gmeta6:
>>
>>> gmeta6()
>> g.region: error while loading shared libraries: libgrass_vect.so: 
>> cannot open shared object file: No such file or directory
>> Error in if (file.exists(file) == FALSE) if (!missing(asText) && 
>> asText ==  :
>> argument is of length zero
>> Error in parseGRASS(cmd) : g.region not parsed
>>
>> I'm using R  2.9.1 on ubuntu jaunty and just
>> made install.packages("spgrass6")
>>
>> g.region -p  works fine in the grass console, but
>>> system("g.region -p")
>> g.region: error while loading shared libraries: libgrass_vect.so: 
>> cannot open shared object file: No such file or directory
> 
> This will be a "dependency hell" problem between GDAL and GRASS 
> binaries, probably a stale GRASS GDAL plugin somewhere. It has been seen 
> on Debian based distributions before, for example:
> 
> http://lists.osgeo.org/pipermail/grass-stats/2009-July/001105.html
> 
> Most likely you have multiple GDAL and/or GDAL binaries that do not like 
> each other, and because of the possible reverse dependence in the GDAL 
> GRASS plugin, they get in each others' way. The grass-stats list may be 
> a good place to ask too.
> 
> Roger
> 
>>
>> Any idea on how to fix this problem?
>> Thanks
>> Agus
>>
> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: alobolistas.vcf
Type: text/x-vcard
Size: 251 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090909/c4133243/attachment.vcf>

From greenberg at ucdavis.edu  Wed Sep  9 18:21:34 2009
From: greenberg at ucdavis.edu (Jonathan Greenberg)
Date: Wed, 09 Sep 2009 09:21:34 -0700
Subject: [R-sig-Geo] decimate points from a Lidar file
In-Reply-To: <b440a3f80909081742re34c1av4929ea8ac972544f@mail.gmail.com>
References: <b440a3f80909080825q5e9fa42fmabf83a2140e1afe8@mail.gmail.com>	<200909080906.12965.dylan.beaudette@gmail.com>	<alpine.LRH.2.00.0909082024420.24611@reclus.nhh.no>
	<b440a3f80909081742re34c1av4929ea8ac972544f@mail.gmail.com>
Message-ID: <4AA7D60E.3040608@ucdavis.edu>

Michael:

    Typically Lidar files come "tiled", e.g. you get a set of point 
clouds pre-subsetted to, say, 1km x 1km window.  These subsetted data 
are usually a LOT easier to write some batch scripts to deal with than 
trying to analyze the entire database at once.  Have you seen if the 
source of the Lidar data has a tiled set (most companies will provide 
the data this way)?  This will expand the number of things you can do 
with the data...

--j

Michael Denslow wrote:
> Dylan, Ken & Roger,
>
> Thank you for the suggestions and advice. This gives me a great place to start.
>
> Michael
>
>
> These are all
> On Tue, Sep 8, 2009 at 2:36 PM, Roger Bivand<Roger.Bivand at nhh.no> wrote:
>   
>> On Tue, 8 Sep 2009, Dylan Beaudette wrote:
>>
>>     
>>> On Tuesday 08 September 2009, Michael Denslow wrote:
>>>       
>>>> Dear R-sig-geo,
>>>>
>>>> I am posting the following question for one of my professors. I would
>>>> appreciate it if you could help me point him in the right direction.
>>>>
>>>> He is looking for a function which could take a lidar point shapefile
>>>> and decimate (remove) a selected number of points
>>>> from the file. Below is what he asked me. The file of the merged LIDAR
>>>> tiles contains roughly 350,000,000 points.
>>>>
>>>> "I am looking for some software to take a shapefile of lidar elevation
>>>> points and remove a selected number of points. The shapefile
>>>> (with fewer points) would then be used to generate a DEM. A
>>>> calculation of the appropriate resolution for a DEM can be made based
>>>> on a relationship between the
>>>> number of points and extent of the study area. The goal is to create
>>>> DEMs at a series of resolutions with the appropriate points to area
>>>> relationship. So a
>>>> software program with which you could remove a selected number of
>>>> lidar points would be helpful."
>>>>
>>>> I imagine that one of the packages that deals with point data (e.g.
>>>> sp, spatstat) can do this kind of thing but I am not sure how to get
>>>> him started. Can anyone point me to a specify function or make a
>>>> suggestion.
>>>>
>>>> Thanks in advance,
>>>> Michael
>>>>         
>>> Hi,
>>>
>>> I would recommend the r.in.xyz command within GRASS GIS. It can be used
>>> for
>>> operations very similar to what you are looking for. The resulting file is
>>> a
>>> raster, decimated to some set resolution. Some screen shots:
>>>
>>> http://hamish.bowman.googlepages.com/grassfiles#xyz
>>>       
>> Right, it is not possible to read 350 M points into R and do anything with
>> them. I would actually suggest using a database as a store directly,
>> possibly with some spatial support, but not necessarily. If the data were,
>> say, in a database, subsets could be read in by selecting, or sample
>> inclusion fields could be added to a table for samples, giving the FID
>> values to be chosen. I feel that this would give the flexibility needed.
>> Both SQLite and PostgreSQL are supported by OGR, so may also be accessed
>> from rgdal functions if the appropriate drivers are present, but dumping to
>> CSV files for smaller samples ought to be OK. If you are on Windows, see
>> OSGeo4W or FWTools for ideas. The advantage of a database over a flat text
>> file is that selection is much easier.
>>
>> You could also look at the SQLiteMap package, which uses an alternative set
>> of spatial extensions for SQLite. Import the data outside R, then select
>> from inside (untried).
>>
>> Hope this helps,
>>
>> Roger
>>
>>
>>
>>     
>>> Cheers,
>>> Dylan
>>>
>>>
>>>       
>> --
>> Roger Bivand
>> Economic Geography Section, Department of Economics, Norwegian School of
>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>     
>
>
>
>   

-- 

Jonathan A. Greenberg, PhD
Postdoctoral Scholar
Center for Spatial Technologies and Remote Sensing (CSTARS)
University of California, Davis
One Shields Avenue
The Barn, Room 250N
Davis, CA 95616
Cell: 415-794-5043
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307


From dmireles at gmail.com  Wed Sep  9 19:19:54 2009
From: dmireles at gmail.com (David Mireles)
Date: Wed, 9 Sep 2009 13:19:54 -0400
Subject: [R-sig-Geo] get raster pixel x,y points from lat/lon?
Message-ID: <aa9af380909091019h34e309bco829fcecca2cd4572@mail.gmail.com>

I'm new to rgdal and gdal--  I have a very large nitf image (too big
to fit in memory) that I would like to extract subset areas of
interest based on a center lat/long coordinate (and possibly an
elevation). I would like to use the getRasterData function extract the
AOI (which requires pixel x,y offsets). How can I get the row/column
(x,y) for a specific lat/long coordinate in an spatial (latlon) image?
 I believe in gdal there is a gdaltransform tool where you supply the
image, specify -i (inverse) and -rpc and it will return the x,y point.
Anyone know how I can do this in rgdal? (Will spTransform do this? Do
I need make a .Call to some GDAL function?)
Thanks in advance,
dm


From milton.ruser at gmail.com  Wed Sep  9 19:35:39 2009
From: milton.ruser at gmail.com (milton ruser)
Date: Wed, 9 Sep 2009 13:35:39 -0400
Subject: [R-sig-Geo] get raster pixel x,y points from lat/lon?
In-Reply-To: <aa9af380909091019h34e309bco829fcecca2cd4572@mail.gmail.com>
References: <aa9af380909091019h34e309bco829fcecca2cd4572@mail.gmail.com>
Message-ID: <3aaf1a030909091035s791c5fd3le9daa4b4c9fde41b@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090909/db78c977/attachment.pl>

From breitbach at uni-mainz.de  Wed Sep  9 20:07:25 2009
From: breitbach at uni-mainz.de (Breitbach, Nils)
Date: Wed, 9 Sep 2009 20:07:25 +0200
Subject: [R-sig-Geo] Intersection of two coordinates (triangulation)
Message-ID: <6634A5A114BA554C927CF724BA504041014C911EB713@EXCHANGE-02.zdv.uni-mainz.de>

Hi Community,

I am new to this forum and I am starting to analyse my telemetry data trying to be independent from commercial software. So far all I wanted to do was possible with R. Now I am looking for a function that is able to do triangulation. The structure of my data is as follows:

- two consecutive rows with coordinates (lat and long in separate columns; at the moment in WGS1984 and decimal degrees) and in a further column a corresponding direction in degrees from 0 to 359
- each of the two consecutive rows has an identifier (T1 and T2)

I now want to calculate the intersection point of these two consecutive rows (T1 and T2) getting one coordinate in long and lat of the intersection point in WGS1984 and decimal degrees.

Do you know of any function/package that is able to perform such a triangulation or at least one that does a similar operation?

Thank you!

Nils

From blair.christian at gmail.com  Wed Sep  9 21:18:55 2009
From: blair.christian at gmail.com (Blair Christian)
Date: Wed, 9 Sep 2009 15:18:55 -0400
Subject: [R-sig-Geo] Classes for spatio-temporal data?
Message-ID: <6c35a4fc0909091218m409cd496m6031b4154de242de@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090909/4514f541/attachment.pl>

From horacio.samaniego at gmail.com  Thu Sep 10 05:56:04 2009
From: horacio.samaniego at gmail.com (Horacio Samaniego)
Date: Wed, 09 Sep 2009 23:56:04 -0400
Subject: [R-sig-Geo] adding ids and df to hexagonal polys ?
Message-ID: <1252554964.3690.22.camel@burque>

Hi, 

I am trying to understand the different data types in the sp package.
However, I do not seem to get the way that spdf are built. 

For example, let say that I can build a hexagonal grid. That work just
fine using 

> regio <- readShapePoly("regions.shp")
> hpts <- spsample(regio,type="hexagonal",cells=30000)
> hpoly = HexPoints2SpatialPolygons(hpts)

I'm unclear about adding a df with IDs to this new SpetialPolygons class

I guess that I'm not understanding how ids are assigned... any hint
would be appreciated

thanks


From Roger.Bivand at nhh.no  Thu Sep 10 09:22:51 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 10 Sep 2009 09:22:51 +0200 (CEST)
Subject: [R-sig-Geo] adding ids and df to hexagonal polys ?
In-Reply-To: <1252554964.3690.22.camel@burque>
References: <1252554964.3690.22.camel@burque>
Message-ID: <alpine.LRH.2.00.0909100919120.11194@reclus.nhh.no>

On Wed, 9 Sep 2009, Horacio Samaniego wrote:

> Hi,
>
> I am trying to understand the different data types in the sp package.
> However, I do not seem to get the way that spdf are built.
>
> For example, let say that I can build a hexagonal grid. That work just
> fine using
>
>> regio <- readShapePoly("regions.shp")
>> hpts <- spsample(regio,type="hexagonal",cells=30000)
>> hpoly = HexPoints2SpatialPolygons(hpts)
>
> I'm unclear about adding a df with IDs to this new SpetialPolygons class

library(maptools)
xx <- readShapePoly(system.file("shapes/sids.shp", package="maptools")[1],
  IDvar="FIPSNO", proj4string=CRS("+proj=longlat +ellps=clrk66"))
hpts <- spsample(xx, type="hexagonal", n=100)
hpoly <- HexPoints2SpatialPolygons(hpts)
o <- overlay(xx, hpts)
row.names(o) <- row.names(hpoly)
hpoly1 <- SpatialPolygonsDataFrame(hpoly, data=o)
summary(hpoly1)
spplot(hpoly1, "BIR74")

After making sure that the IDs agree, just use the constructor for
SpatialPolygonsDataFrame objects.

Hope this helps,

Roger

>
> I guess that I'm not understanding how ids are assigned... any hint
> would be appreciated
>
> thanks
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From edzer.pebesma at uni-muenster.de  Thu Sep 10 09:23:45 2009
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 10 Sep 2009 09:23:45 +0200
Subject: [R-sig-Geo] Classes for spatio-temporal data?
In-Reply-To: <6c35a4fc0909091218m409cd496m6031b4154de242de@mail.gmail.com>
References: <6c35a4fc0909091218m409cd496m6031b4154de242de@mail.gmail.com>
Message-ID: <4AA8A981.50000@uni-muenster.de>

Christian, I'm very interested in both: collaborating and watching.

Some previous work that I'm aware of: package trip (on CRAN) extends
SpatialPointsDataFrames basically in the attributes, by defining two
columns of which one is the time stamp and the other the (animal or
trip) ID. In chapter 6 of "Applied Spatial Data Analysis with R", this
example is discussed, and an example is given for creating a class for
space-time grids by extending SpatialGrid and SpatialGridDataFrame. The
example R code is found at http://asdar-book.org/book/csdacm.R

As with spatial data, you'll be facing the decision whether to make your
spatial dimension regular (discrete, "raster"), or continuous
("vector"). In your example, space is continuous ("Points"), and time is
regular. Will your methods of analysis and visualisation only be
suitable for regular time data, or can/should they handle continuous as
well?

Blair Christian wrote:
> Hi All,
>
> I'm starting to work with spatio temporal data, and wondered if there were
> any extensions to the sp package that include a temporal component. (for
> example, any classes that might contain 3 objects/data frames, one for the
> spatial information, one for the temporal information, and one for the
> data).
>
> My first goals are (1) getting some basic classes together for my own narrow
> set of circumstances (focus on SpatialPointsDataFrames with regular hourly
> time series), and (2) getting some basic visualization together.  So far
> I've used some kriging (in combination with the animation package) for
> making movies of kriging predictions along with some FDA of the temporal
> side (fourier series to examine the strong diurnal pattern).  It would be
> nice to be able to eventually make some visualizations in a way that could
> be shared with others, and I know that kml allows you to share both the raw
> data and use, say, google earth to visualize the time element.
>
> I know it sounds ambitious, but it's something I'll be working on off and on
> over the next year.  I have enough data at the moment that it's worth my
> while to add some structure ( (S4?) classes/methods) to my dusty decks.
>
> If anybody is interested in collaborating or watching, I'll try and put up a
> website at some point, maybe with a skeleton package.
>
> Cheers,
> Blair
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de/
http://www.springer.com/978-0-387-78170-9 e.pebesma at wwu.de


From a.ghisla at gmail.com  Thu Sep 10 11:02:11 2009
From: a.ghisla at gmail.com (Anne Ghisla)
Date: Thu, 10 Sep 2009 11:02:11 +0200
Subject: [R-sig-Geo] Intersection of two coordinates (triangulation)
In-Reply-To: <6634A5A114BA554C927CF724BA504041014C911EB713@EXCHANGE-02.zdv.uni-mainz.de>
References: <6634A5A114BA554C927CF724BA504041014C911EB713@EXCHANGE-02.zdv.uni-mainz.de>
Message-ID: <1252573331.5459.24.camel@galadriel.uagra.net>

Il giorno mer, 09/09/2009 alle 20.07 +0200, Breitbach, Nils ha scritto:
> Hi Community,
> 
> I am new to this forum and I am starting to analyse my telemetry data trying to be independent from commercial software. So far all I wanted to do was possible with R. Now I am looking for a function that is able to do triangulation. The structure of my data is as follows:
> 
> - two consecutive rows with coordinates (lat and long in separate columns; at the moment in WGS1984 and decimal degrees) and in a further column a corresponding direction in degrees from 0 to 359
> - each of the two consecutive rows has an identifier (T1 and T2)
> 
> I now want to calculate the intersection point of these two consecutive rows (T1 and T2) getting one coordinate in long and lat of the intersection point in WGS1984 and decimal degrees.
> 
> Do you know of any function/package that is able to perform such a triangulation or at least one that does a similar operation?

Hello Nils,

a triangulation function has been recently ported to R and is available
on SVN:

svn co svn://home.prea.net/svn/triang/trunk

triang.R is the script containing the algorithm, do.triang.R is a test
based on data in fix.dbf. The code is in a very alpha state, further
testing and hopefully development is welcome :)
For animal movement software in general, keep an eye also on Animove
list (in copy).

Hope this helps,
Anne Ghisla 

> Thank you!
> 
> Nils
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Questa ? una parte del messaggio	firmata digitalmente
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090910/e11812f4/attachment.bin>

From jason at bryer.org  Thu Sep 10 17:16:49 2009
From: jason at bryer.org (Jason Bryer)
Date: Thu, 10 Sep 2009 11:16:49 -0400
Subject: [R-sig-Geo] Looping over spatial data
Message-ID: <71F4AB24-C4E3-4823-BF56-FC161308CBC2@bryer.org>

Sorry for what may be a simple question. I am having an issue looping  
over spatial data. Here is the code:

usa.map = read.shape(file.choose()) #Shape file of the US, 51 records

pt = data.frame(x=-73.793, y=42.857)
shapes = Map2poly(usa.map)
shape = shapes[[35]] #This is New York

pip(pt, shape) #This works, returns the point as I expect since it is  
within NY

for(i in 1:length(shapes)) {
	shape = shapes[[i]]
	pip(pt, shape)
	#This is where the error occurs
}

This is the error I get:

Error in inout(pt, shape) : NA/NaN/Inf in foreign function call (arg 4).

Thanks for any help.

-Jason


From horacio.samaniego at gmail.com  Thu Sep 10 17:46:36 2009
From: horacio.samaniego at gmail.com (Horacio Samaniego)
Date: Thu, 10 Sep 2009 11:46:36 -0400
Subject: [R-sig-Geo] adding ids and df to hexagonal polys ?
In-Reply-To: <alpine.LRH.2.00.0909100919120.11194@reclus.nhh.no>
References: <1252554964.3690.22.camel@burque>
	<alpine.LRH.2.00.0909100919120.11194@reclus.nhh.no>
Message-ID: <1252597597.24190.21.camel@blanes.uach.cl>

Thanks for the hints here... but I'm guessing that there's somethings
missing...

the 5th command line (row.names(o) <- row.names(hpoly)) does not make
sense to me as hpoly is a spatialPolygon which has no row names

> str(hpoly,max.lev=2)
Formal class 'SpatialPolygons' [package "sp"] with 4 slots
  ..@ polygons   :List of 965
  ..@ plotOrder  : int [1:965] 1 2 3 4 5 6 7 8 9 10 ...
  ..@ bbox       : num [1:2, 1:2] 446230 3778428 1331230 8047934
  .. ..- attr(*, "dimnames")=List of 2
  ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots
> summary(row.names(hpoly))
Length  Class   Mode 
     0   NULL   NULL 

I thought, perhaps there's a spelling problem? but no...
> row.names(o) <- row.names(hpoly)
> hpoly1 <- SpatialPolygonsDataFrame(hpoly, data=o)
Error in SpatialPolygonsDataFrame(hpoly, data = o) : 
  row.names of data and Polygons IDs do not match

How is this possible?


So I tried a "brute force" approach, with no success

> row.names(slot(cl,"polygons")) <- 1:length(slot(cl,"polygons"))
Error in `rownames<-`(x, value) : 
  attempt to set rownames on object with no dimensions

I seem to have the concept wrong to begin with here. How are IDs
assigned to a 'SpatialPolygons' class? I should be able to assign them
regardless of the template shape used, right? Which would make the
overlay() step unnecessary?


I guess that I need some clarification on how the class is built..
my apologies if it's too obvious of a  question... I just hope not to be
the only one missing this
 thanks

On Thu, 2009-09-10 at 09:22 +0200, Roger Bivand wrote:
> On Wed, 9 Sep 2009, Horacio Samaniego wrote:
> 
> > Hi,
> >
> > I am trying to understand the different data types in the sp package.
> > However, I do not seem to get the way that spdf are built.
> >
> > For example, let say that I can build a hexagonal grid. That work just
> > fine using
> >
> >> regio <- readShapePoly("regions.shp")
> >> hpts <- spsample(regio,type="hexagonal",cells=30000)
> >> hpoly = HexPoints2SpatialPolygons(hpts)
> >
> > I'm unclear about adding a df with IDs to this new SpetialPolygons class
> 
> library(maptools)
> xx <- readShapePoly(system.file("shapes/sids.shp", package="maptools")[1],
>   IDvar="FIPSNO", proj4string=CRS("+proj=longlat +ellps=clrk66"))
> hpts <- spsample(xx, type="hexagonal", n=100)
> hpoly <- HexPoints2SpatialPolygons(hpts)
> o <- overlay(xx, hpts)
> row.names(o) <- row.names(hpoly)
> hpoly1 <- SpatialPolygonsDataFrame(hpoly, data=o)
> summary(hpoly1)
> spplot(hpoly1, "BIR74")
> 
> After making sure that the IDs agree, just use the constructor for
> SpatialPolygonsDataFrame objects.
> 
> Hope this helps,
> 
> Roger
> 
> >
> > I guess that I'm not understanding how ids are assigned... any hint
> > would be appreciated
> >
> > thanks
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at stat.math.ethz.ch
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>


From Roger.Bivand at nhh.no  Thu Sep 10 18:19:18 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 10 Sep 2009 18:19:18 +0200 (CEST)
Subject: [R-sig-Geo] adding ids and df to hexagonal polys ?
In-Reply-To: <1252597597.24190.21.camel@blanes.uach.cl>
References: <1252554964.3690.22.camel@burque>
	<alpine.LRH.2.00.0909100919120.11194@reclus.nhh.no>
	<1252597597.24190.21.camel@blanes.uach.cl>
Message-ID: <alpine.LRH.2.00.0909101815050.21086@reclus.nhh.no>

On Thu, 10 Sep 2009, Horacio Samaniego wrote:

> Thanks for the hints here... but I'm guessing that there's somethings
> missing...
>
> the 5th command line (row.names(o) <- row.names(hpoly)) does not make
> sense to me as hpoly is a spatialPolygon which has no row names

The overlay() step was just for illustration. Spatial* objects may have 
row.names() methods, but they are not row.names()<- methods. Look for 
spChFIDs() methods in maptools for changing or assigning IDs. However, the 
hexagon polygons do have IDs, just look at them (assuming you have a 
recent sp - you do update regularly?).

Roger


>
>> str(hpoly,max.lev=2)
> Formal class 'SpatialPolygons' [package "sp"] with 4 slots
>  ..@ polygons   :List of 965
>  ..@ plotOrder  : int [1:965] 1 2 3 4 5 6 7 8 9 10 ...
>  ..@ bbox       : num [1:2, 1:2] 446230 3778428 1331230 8047934
>  .. ..- attr(*, "dimnames")=List of 2
>  ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots
>> summary(row.names(hpoly))
> Length  Class   Mode
>     0   NULL   NULL
>
> I thought, perhaps there's a spelling problem? but no...
>> row.names(o) <- row.names(hpoly)
>> hpoly1 <- SpatialPolygonsDataFrame(hpoly, data=o)
> Error in SpatialPolygonsDataFrame(hpoly, data = o) :
>  row.names of data and Polygons IDs do not match
>
> How is this possible?
>
>
> So I tried a "brute force" approach, with no success
>
>> row.names(slot(cl,"polygons")) <- 1:length(slot(cl,"polygons"))
> Error in `rownames<-`(x, value) :
>  attempt to set rownames on object with no dimensions
>
> I seem to have the concept wrong to begin with here. How are IDs
> assigned to a 'SpatialPolygons' class? I should be able to assign them
> regardless of the template shape used, right? Which would make the
> overlay() step unnecessary?
>
>
> I guess that I need some clarification on how the class is built..
> my apologies if it's too obvious of a  question... I just hope not to be
> the only one missing this
> thanks
>
> On Thu, 2009-09-10 at 09:22 +0200, Roger Bivand wrote:
>> On Wed, 9 Sep 2009, Horacio Samaniego wrote:
>>
>>> Hi,
>>>
>>> I am trying to understand the different data types in the sp package.
>>> However, I do not seem to get the way that spdf are built.
>>>
>>> For example, let say that I can build a hexagonal grid. That work just
>>> fine using
>>>
>>>> regio <- readShapePoly("regions.shp")
>>>> hpts <- spsample(regio,type="hexagonal",cells=30000)
>>>> hpoly = HexPoints2SpatialPolygons(hpts)
>>>
>>> I'm unclear about adding a df with IDs to this new SpetialPolygons class
>>
>> library(maptools)
>> xx <- readShapePoly(system.file("shapes/sids.shp", package="maptools")[1],
>>   IDvar="FIPSNO", proj4string=CRS("+proj=longlat +ellps=clrk66"))
>> hpts <- spsample(xx, type="hexagonal", n=100)
>> hpoly <- HexPoints2SpatialPolygons(hpts)
>> o <- overlay(xx, hpts)
>> row.names(o) <- row.names(hpoly)
>> hpoly1 <- SpatialPolygonsDataFrame(hpoly, data=o)
>> summary(hpoly1)
>> spplot(hpoly1, "BIR74")
>>
>> After making sure that the IDs agree, just use the constructor for
>> SpatialPolygonsDataFrame objects.
>>
>> Hope this helps,
>>
>> Roger
>>
>>>
>>> I guess that I'm not understanding how ids are assigned... any hint
>>> would be appreciated
>>>
>>> thanks
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Thu Sep 10 18:23:09 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 10 Sep 2009 18:23:09 +0200 (CEST)
Subject: [R-sig-Geo] Looping over spatial data
In-Reply-To: <71F4AB24-C4E3-4823-BF56-FC161308CBC2@bryer.org>
References: <71F4AB24-C4E3-4823-BF56-FC161308CBC2@bryer.org>
Message-ID: <alpine.LRH.2.00.0909101819340.21086@reclus.nhh.no>

On Thu, 10 Sep 2009, Jason Bryer wrote:

> Sorry for what may be a simple question. I am having an issue looping over 
> spatial data. Here is the code:
>
> usa.map = read.shape(file.choose()) #Shape file of the US, 51 records

There is a reason for read.shape() saying that it is deprecated. Please 
use classes defined in the sp package, and methods to read them, here 
possiblt readShapeSpatial() in maptools.

>
> pt = data.frame(x=-73.793, y=42.857)

If pt is a SpatialPoints object, you just use an overlay() method.

> shapes = Map2poly(usa.map)
> shape = shapes[[35]] #This is New York
>
> pip(pt, shape) #This works, returns the point as I expect since it is within 
> NY
>
> for(i in 1:length(shapes)) {
> 	shape = shapes[[i]]
> 	pip(pt, shape)
> 	#This is where the error occurs
> }
>
> This is the error I get:
>
> Error in inout(pt, shape) : NA/NaN/Inf in foreign function call (arg 4).
>

Almost certainly your assumption that the shape is a single ring is not 
met for some i, leading the splancs functions you are using to fail. Use 
sp classes, they are there to help.

Roger

> Thanks for any help.
>
> -Jason
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From horacio.samaniego at gmail.com  Thu Sep 10 18:43:08 2009
From: horacio.samaniego at gmail.com (Horacio Samaniego)
Date: Thu, 10 Sep 2009 12:43:08 -0400
Subject: [R-sig-Geo] adding ids and df to hexagonal polys ?
In-Reply-To: <alpine.LRH.2.00.0909101815050.21086@reclus.nhh.no>
References: <1252554964.3690.22.camel@burque>
	<alpine.LRH.2.00.0909100919120.11194@reclus.nhh.no>
	<1252597597.24190.21.camel@blanes.uach.cl>
	<alpine.LRH.2.00.0909101815050.21086@reclus.nhh.no>
Message-ID: <1252600989.24190.27.camel@blanes.uach.cl>

Thanks a lot Roger, I had overlooked spChFIDs()

I just run the packages off the repositories in ubuntu jaunty

I have sp = 2.8.1

it seem to be an old version with no rownames for my hexagon polys...
however, this an easy fix.

> # For a simple sequential numbering of freshly created polygons
> hpoly2 <-
spChFIDs(hpoly,as.character(1:length(slot(hpoly,"polygons"))))

did the trick and I now understand better how to create hexagonal
polys, 

thanks again!!


On Thu, 2009-09-10 at 18:19 +0200, Roger Bivand wrote:
> On Thu, 10 Sep 2009, Horacio Samaniego wrote:
> 
> > Thanks for the hints here... but I'm guessing that there's somethings
> > missing...
> >
> > the 5th command line (row.names(o) <- row.names(hpoly)) does not make
> > sense to me as hpoly is a spatialPolygon which has no row names
> 
> The overlay() step was just for illustration. Spatial* objects may have 
> row.names() methods, but they are not row.names()<- methods. Look for 
> spChFIDs() methods in maptools for changing or assigning IDs. However, the 
> hexagon polygons do have IDs, just look at them (assuming you have a 
> recent sp - you do update regularly?).
> 
> Roger
> 
> 
> >
> >> str(hpoly,max.lev=2)
> > Formal class 'SpatialPolygons' [package "sp"] with 4 slots
> >  ..@ polygons   :List of 965
> >  ..@ plotOrder  : int [1:965] 1 2 3 4 5 6 7 8 9 10 ...
> >  ..@ bbox       : num [1:2, 1:2] 446230 3778428 1331230 8047934
> >  .. ..- attr(*, "dimnames")=List of 2
> >  ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots
> >> summary(row.names(hpoly))
> > Length  Class   Mode
> >     0   NULL   NULL
> >
> > I thought, perhaps there's a spelling problem? but no...
> >> row.names(o) <- row.names(hpoly)
> >> hpoly1 <- SpatialPolygonsDataFrame(hpoly, data=o)
> > Error in SpatialPolygonsDataFrame(hpoly, data = o) :
> >  row.names of data and Polygons IDs do not match
> >
> > How is this possible?
> >
> >
> > So I tried a "brute force" approach, with no success
> >
> >> row.names(slot(cl,"polygons")) <- 1:length(slot(cl,"polygons"))
> > Error in `rownames<-`(x, value) :
> >  attempt to set rownames on object with no dimensions
> >
> > I seem to have the concept wrong to begin with here. How are IDs
> > assigned to a 'SpatialPolygons' class? I should be able to assign them
> > regardless of the template shape used, right? Which would make the
> > overlay() step unnecessary?
> >
> >
> > I guess that I need some clarification on how the class is built..
> > my apologies if it's too obvious of a  question... I just hope not to be
> > the only one missing this
> > thanks
> >
> > On Thu, 2009-09-10 at 09:22 +0200, Roger Bivand wrote:
> >> On Wed, 9 Sep 2009, Horacio Samaniego wrote:
> >>
> >>> Hi,
> >>>
> >>> I am trying to understand the different data types in the sp package.
> >>> However, I do not seem to get the way that spdf are built.
> >>>
> >>> For example, let say that I can build a hexagonal grid. That work just
> >>> fine using
> >>>
> >>>> regio <- readShapePoly("regions.shp")
> >>>> hpts <- spsample(regio,type="hexagonal",cells=30000)
> >>>> hpoly = HexPoints2SpatialPolygons(hpts)
> >>>
> >>> I'm unclear about adding a df with IDs to this new SpetialPolygons class
> >>
> >> library(maptools)
> >> xx <- readShapePoly(system.file("shapes/sids.shp", package="maptools")[1],
> >>   IDvar="FIPSNO", proj4string=CRS("+proj=longlat +ellps=clrk66"))
> >> hpts <- spsample(xx, type="hexagonal", n=100)
> >> hpoly <- HexPoints2SpatialPolygons(hpts)
> >> o <- overlay(xx, hpts)
> >> row.names(o) <- row.names(hpoly)
> >> hpoly1 <- SpatialPolygonsDataFrame(hpoly, data=o)
> >> summary(hpoly1)
> >> spplot(hpoly1, "BIR74")
> >>
> >> After making sure that the IDs agree, just use the constructor for
> >> SpatialPolygonsDataFrame objects.
> >>
> >> Hope this helps,
> >>
> >> Roger
> >>
> >>>
> >>> I guess that I'm not understanding how ids are assigned... any hint
> >>> would be appreciated
> >>>
> >>> thanks
> >>>
> >>> _______________________________________________
> >>> R-sig-Geo mailing list
> >>> R-sig-Geo at stat.math.ethz.ch
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>>
> >>
> >
> >
>


From smallacer at msn.com  Thu Sep 10 22:00:19 2009
From: smallacer at msn.com (patrick shaw)
Date: Thu, 10 Sep 2009 13:00:19 -0700
Subject: [R-sig-Geo] Revisiting convUL for different projections
Message-ID: <BAY106-W5290DBF6D51AF79F4207E4AFE80@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090910/efba4f2a/attachment.pl>

From edzer.pebesma at uni-muenster.de  Thu Sep 10 22:16:55 2009
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 10 Sep 2009 22:16:55 +0200
Subject: [R-sig-Geo] Revisiting convUL for different projections
In-Reply-To: <BAY106-W5290DBF6D51AF79F4207E4AFE80@phx.gbl>
References: <BAY106-W5290DBF6D51AF79F4207E4AFE80@phx.gbl>
Message-ID: <4AA95EB7.7000903@uni-muenster.de>

Patrick, you may want to try reading your data with function readOGR in
package rgdal. It's documentation says: It will set the spatial
reference system if the layer has such metadata. The syntax could be
something like:

ice <- readOGR(".", "extent_N_200906_polygon")
--
Edzer

patrick shaw wrote:
> R-geo users,
>
> I am new at posting, please forgive if I err in protocol.  I have searched the archives, but cannot locate the exact fix to this problem:
>
> I am using a shapefile from NSIDC (sea ice data) with a strange projection.  I believe it is in stereographic UTM, so I would like to be able to plot it in lat/lon or alternatively, project existing lat/lon data (e.g. ship tracks) onto the stereographic projection.   I have tried PBSMapping, sp, maptools and gdal, but no single one seems to fix the 'invalid' projection issue. 
>
> ice <- importShapefile("extent_N_200906_polygon.shp", readDBF=TRUE)
> plotMap(ice, projection=TRUE) 
> convUL(ice)
>
>  >> Error in convUL(ice) : Missing or invalid projection attribute.
>
> where the .prj file for the associated .shp file is:
>
> PROJCS["Stereographic_North_Pole",GEOGCS["GCS_WGS_1984",
> DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],
> PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],
> PROJECTION["Stereographic_North_Pole"],PARAMETER["standard_parallel_1",70],
> PARAMETER["central_meridian",-45],PARAMETER["scale_factor",1],PARAMETER["false_easting",0],
> PARAMETER["false_northing",0],UNIT["Meter",1]]
>
>
> Thank you
>
> ~ patrick
>
>
>
>
>
> _________________________________________________________________
>
>
> :ON:WL:en-US:SI_SB_online:082009
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de/
http://www.springer.com/978-0-387-78170-9 e.pebesma at wwu.de


From jaimebg27 at gmail.com  Thu Sep 10 23:52:31 2009
From: jaimebg27 at gmail.com (JAIME BURBANO GIRON)
Date: Thu, 10 Sep 2009 16:52:31 -0500
Subject: [R-sig-Geo] Logist Spatial Regression
Message-ID: <dcd5c8650909101452y612d8b41k4c0b92670f4a3e4b@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090910/60e0a6a5/attachment.pl>

From yud at mail.montclair.edu  Fri Sep 11 01:55:33 2009
From: yud at mail.montclair.edu (Danlin Yu)
Date: Thu, 10 Sep 2009 19:55:33 -0400
Subject: [R-sig-Geo] Logist Spatial Regression
In-Reply-To: <dcd5c8650909101452y612d8b41k4c0b92670f4a3e4b@mail.gmail.com>
References: <dcd5c8650909101452y612d8b41k4c0b92670f4a3e4b@mail.gmail.com>
Message-ID: <4AA991F5.2@mail.montclair.edu>

Jaime:

Which specific function are you used for the logistic spatial
regression? I think the geoRglm package description page
(http://cran.r-project.org/web/packages/geoRglm/geoRglm.pdf) does give
some very detailed explanation of how a specific function is used. If
you need to see the code, simply type the function's name without any
argument in R, and you'll be able to see the codes.

Hope this helps.

Danlin

JAIME BURBANO GIRON ????:
> Hi, i need to calculate a logistic spatial regression, i?ve tried with
> package geoRglm but i don?t find a help that tells me how is the code. Is
> there somebody that can help me with an other package or the code to do it
> in geoRglm. Thanks.
>
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
___________________________________________
Danlin Yu, Ph.D.
Assistant Professor of GIS and Urban Geography
Department of Earth & Environmental Studies
Montclair State University
Montclair, NJ, 07043
Tel: 973-655-4313
Fax: 973-655-4072
email: yud at mail.montclair.edu
webpage: csam.montclair.edu/~yu


From jutesoro at yahoo.com  Fri Sep 11 12:48:29 2009
From: jutesoro at yahoo.com (Julius Tesoro)
Date: Fri, 11 Sep 2009 03:48:29 -0700 (PDT)
Subject: [R-sig-Geo] Spatial clustering of points within a given line
In-Reply-To: <mailman.13.1252663204.14125.r-sig-geo@stat.math.ethz.ch>
Message-ID: <671876.98963.qm@web57605.mail.re1.yahoo.com>

I have a dilemma, Considering I have a number of points and a line (shapefile). How do I compute for the shortest distance between a line and a point? Also how do you identify which points aggregate near the line like in spatial clustering?

Thanks.

Julius Tesoro


From emorway at engr.colostate.edu  Fri Sep 11 18:35:52 2009
From: emorway at engr.colostate.edu (Eric Morway)
Date: Fri, 11 Sep 2009 10:35:52 -0600
Subject: [R-sig-Geo] spplot question
Message-ID: <4AAA7C68.8000802@engr.colostate.edu>

Hello,

I've been working on an image created with spplot and with help have 
gotten it very close to the final product.  One final modification I 
would like to make involves filling in grid cells with values less than 
the minimum value on the legend with the color corresponding to the 
bottom of the legend.  In the attached figure, the minimum legend value 
is 10, but there a few spots with values as low as 0.01. These cells are 
currently blank/white.  I would like to avoid including this value on my 
legend due to the color spread on the plot becoming homologous, that is, 
I would like the color spread to be maximized between 10-1000.  Were I 
to go from 0.01-1000, the range I'm most interested in (10-1000) would 
be confined to a more narrow range of the legend.  I have played around 
with trying to specify a different number of cuts for the legend vs plot 
area, but this causes a disconnect between the legend and the colors 
displayed for the different grid cells.  The spplot line looks like this 
(image attached):

pts<-list("sp.points",K.dat,pch=3,col="black",labels=as.character(K.dat$Kh))
cuts<-c(10,20,30,40,50,60,70,80,90,100,200,300,400,500,600,700,800,900,1000)
spplot(lzm.krige.dir["var1.pred"],at=cuts,colorkey=list(at=log10(cuts),labels=as.character(cuts)),scales=list(draw=TRUE), 
   
xlab="Easting",ylab="Northing",key.space="right",cex=1.1,col.regions=terrain.colors(22),main="Hydraulic 
Conductivity of Layer 2",sp.layout=list(pts))

Respectfully,
Eric Morway
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Image3.png
Type: image/png
Size: 16518 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090911/6f77bf37/attachment.png>

From breitbach at uni-mainz.de  Fri Sep 11 20:43:18 2009
From: breitbach at uni-mainz.de (Breitbach, Nils)
Date: Fri, 11 Sep 2009 20:43:18 +0200
Subject: [R-sig-Geo] Intersection of two coordinates (triangulation)
In-Reply-To: <1252573331.5459.24.camel@galadriel.uagra.net>
References: <6634A5A114BA554C927CF724BA504041014C911EB713@EXCHANGE-02.zdv.uni-mainz.de>,
	<1252573331.5459.24.camel@galadriel.uagra.net>
Message-ID: <6634A5A114BA554C927CF724BA504041014C911EB716@EXCHANGE-02.zdv.uni-mainz.de>

Hi Community,

at the moment I am starting to analyse my telemetry data trying to be independent from commercial software. So far I worked with ESRI's ArcInfo to project data from one system into another. No I want to do this with R and so I am looking for a function that is able to do it. 

My dataset consists of coordinates in longitude and latitude using WGS1984 and decimal degrees. Now I want to project these coordinates a) into UTM zone 32 north coordinates and b) into Gauss Krueger zone 3 coordinates. Is it possible using R functions or do I need to use GRASS GIS for example? If it is possible, how? Since with the pevious software used I did this type of operations by mouse clicks and ticking options, I would probably need a somewhat detailed explanation. ;)

Thank you!

Nils


From edzer.pebesma at uni-muenster.de  Fri Sep 11 21:11:24 2009
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 11 Sep 2009 21:11:24 +0200
Subject: [R-sig-Geo] spplot question
In-Reply-To: <4AAA7C68.8000802@engr.colostate.edu>
References: <4AAA7C68.8000802@engr.colostate.edu>
Message-ID: <4AAAA0DC.1050700@uni-muenster.de>

Eric, I've been reading your email over and over, but cannot understand
what you want. I also could not find a question, despite your subject.
--
Edzer

Eric Morway wrote:
> Hello,
>
> I've been working on an image created with spplot and with help have
> gotten it very close to the final product.  One final modification I
> would like to make involves filling in grid cells with values less
> than the minimum value on the legend with the color corresponding to
> the bottom of the legend.  In the attached figure, the minimum legend
> value is 10, but there a few spots with values as low as 0.01. These
> cells are currently blank/white.  I would like to avoid including this
> value on my legend due to the color spread on the plot becoming
> homologous, that is, I would like the color spread to be maximized
> between 10-1000.  Were I to go from 0.01-1000, the range I'm most
> interested in (10-1000) would be confined to a more narrow range of
> the legend.  I have played around with trying to specify a different
> number of cuts for the legend vs plot area, but this causes a
> disconnect between the legend and the colors displayed for the
> different grid cells.  The spplot line looks like this (image attached):
>
> pts<-list("sp.points",K.dat,pch=3,col="black",labels=as.character(K.dat$Kh))
>
> cuts<-c(10,20,30,40,50,60,70,80,90,100,200,300,400,500,600,700,800,900,1000)
>
> spplot(lzm.krige.dir["var1.pred"],at=cuts,colorkey=list(at=log10(cuts),labels=as.character(cuts)),scales=list(draw=TRUE),
>  
> xlab="Easting",ylab="Northing",key.space="right",cex=1.1,col.regions=terrain.colors(22),main="Hydraulic
> Conductivity of Layer 2",sp.layout=list(pts))
>
> Respectfully,
> Eric Morway
>
> ------------------------------------------------------------------------
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de/
http://www.springer.com/978-0-387-78170-9 e.pebesma at wwu.de


From emorway at engr.colostate.edu  Fri Sep 11 21:22:46 2009
From: emorway at engr.colostate.edu (Eric Morway)
Date: Fri, 11 Sep 2009 13:22:46 -0600
Subject: [R-sig-Geo] spplot question
In-Reply-To: <4AAAA0DC.1050700@uni-muenster.de>
References: <4AAA7C68.8000802@engr.colostate.edu>
	<4AAAA0DC.1050700@uni-muenster.de>
Message-ID: <4AAAA386.5000103@engr.colostate.edu>


Edzer,

I apologize for the confusion.  Is there an option in spplot that fills 
in blank/white cells (I'm assuming they are blank because they have a 
value less than the minimum cut) with the minimum color on the legend 
bar (in this case green)?  About a quarter of the way in from the left 
edge of the image you'll notice a "hole" in the plot due to these cells 
having values less than 10.  I would like to fill these cells in without 
altering the legend, if possible.

Thanks, Eric

Edzer Pebesma wrote:
> Eric, I've been reading your email over and over, but cannot understand
> what you want. I also could not find a question, despite your subject.
> --
> Edzer
>
> Eric Morway wrote:
>   
>> Hello,
>>
>> I've been working on an image created with spplot and with help have
>> gotten it very close to the final product.  One final modification I
>> would like to make involves filling in grid cells with values less
>> than the minimum value on the legend with the color corresponding to
>> the bottom of the legend.  In the attached figure, the minimum legend
>> value is 10, but there a few spots with values as low as 0.01. These
>> cells are currently blank/white.  I would like to avoid including this
>> value on my legend due to the color spread on the plot becoming
>> homologous, that is, I would like the color spread to be maximized
>> between 10-1000.  Were I to go from 0.01-1000, the range I'm most
>> interested in (10-1000) would be confined to a more narrow range of
>> the legend.  I have played around with trying to specify a different
>> number of cuts for the legend vs plot area, but this causes a
>> disconnect between the legend and the colors displayed for the
>> different grid cells.  The spplot line looks like this (image attached):
>>
>> pts<-list("sp.points",K.dat,pch=3,col="black",labels=as.character(K.dat$Kh))
>>
>> cuts<-c(10,20,30,40,50,60,70,80,90,100,200,300,400,500,600,700,800,900,1000)
>>
>> spplot(lzm.krige.dir["var1.pred"],at=cuts,colorkey=list(at=log10(cuts),labels=as.character(cuts)),scales=list(draw=TRUE),
>>  
>> xlab="Easting",ylab="Northing",key.space="right",cex=1.1,col.regions=terrain.colors(22),main="Hydraulic
>> Conductivity of Layer 2",sp.layout=list(pts))
>>
>> Respectfully,
>> Eric Morway
>>
>> ------------------------------------------------------------------------
>>
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>   
>>     
>
>


From Roger.Bivand at nhh.no  Fri Sep 11 21:41:14 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 11 Sep 2009 21:41:14 +0200 (CEST)
Subject: [R-sig-Geo] spplot question
In-Reply-To: <4AAAA386.5000103@engr.colostate.edu>
References: <4AAA7C68.8000802@engr.colostate.edu>
	<4AAAA0DC.1050700@uni-muenster.de>
	<4AAAA386.5000103@engr.colostate.edu>
Message-ID: <alpine.LRH.2.00.0909112138510.2016@reclus.nhh.no>

On Fri, 11 Sep 2009, Eric Morway wrote:

>
> Edzer,
>
> I apologize for the confusion.  Is there an option in spplot that fills in 
> blank/white cells (I'm assuming they are blank because they have a value less 
> than the minimum cut) with the minimum color on the legend bar (in this case 
> green)?  About a quarter of the way in from the left edge of the image you'll 
> notice a "hole" in the plot due to these cells having values less than 10.  I 
> would like to fill these cells in without altering the legend, if possible.

No, please see the help page for levelplot() in lattice, the at= argument 
is describes as follows:

       at: numeric vector giving breakpoints along the range of 'z'.
           Contours (if any) will be drawn at these heights, and the
           regions in between would be colored using 'col.regions'.  In
           the latter case, values outside the range of 'at' will not be
           drawn at all.  This serves as a way to limit the range of the
           data shown, similar to what a 'zlim' argument might have been
           used for.  However, this also means that when supplying 'at'
           explicitly, one has to be careful to include values outside
           the range of 'z' to ensure that all the data are shown.

So you'll need to adjust your at= to accommodate all of the data.

Roger


>
> Thanks, Eric
>
> Edzer Pebesma wrote:
>> Eric, I've been reading your email over and over, but cannot understand
>> what you want. I also could not find a question, despite your subject.
>> --
>> Edzer
>> 
>> Eric Morway wrote:
>> 
>>> Hello,
>>> 
>>> I've been working on an image created with spplot and with help have
>>> gotten it very close to the final product.  One final modification I
>>> would like to make involves filling in grid cells with values less
>>> than the minimum value on the legend with the color corresponding to
>>> the bottom of the legend.  In the attached figure, the minimum legend
>>> value is 10, but there a few spots with values as low as 0.01. These
>>> cells are currently blank/white.  I would like to avoid including this
>>> value on my legend due to the color spread on the plot becoming
>>> homologous, that is, I would like the color spread to be maximized
>>> between 10-1000.  Were I to go from 0.01-1000, the range I'm most
>>> interested in (10-1000) would be confined to a more narrow range of
>>> the legend.  I have played around with trying to specify a different
>>> number of cuts for the legend vs plot area, but this causes a
>>> disconnect between the legend and the colors displayed for the
>>> different grid cells.  The spplot line looks like this (image attached):
>>> 
>>> pts<-list("sp.points",K.dat,pch=3,col="black",labels=as.character(K.dat$Kh))
>>> 
>>> cuts<-c(10,20,30,40,50,60,70,80,90,100,200,300,400,500,600,700,800,900,1000)
>>> 
>>> spplot(lzm.krige.dir["var1.pred"],at=cuts,colorkey=list(at=log10(cuts),labels=as.character(cuts)),scales=list(draw=TRUE),
>>>  xlab="Easting",ylab="Northing",key.space="right",cex=1.1,col.regions=terrain.colors(22),main="Hydraulic
>>> Conductivity of Layer 2",sp.layout=list(pts))
>>> 
>>> Respectfully,
>>> Eric Morway
>>> 
>>> ------------------------------------------------------------------------
>>> 
>>> ------------------------------------------------------------------------
>>> 
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>> 
>> 
>> 
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From edzer.pebesma at uni-muenster.de  Fri Sep 11 21:52:06 2009
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 11 Sep 2009 21:52:06 +0200
Subject: [R-sig-Geo] spplot question
In-Reply-To: <alpine.LRH.2.00.0909112138510.2016@reclus.nhh.no>
References: <4AAA7C68.8000802@engr.colostate.edu>
	<4AAAA0DC.1050700@uni-muenster.de>
	<4AAAA386.5000103@engr.colostate.edu>
	<alpine.LRH.2.00.0909112138510.2016@reclus.nhh.no>
Message-ID: <4AAAAA66.50201@uni-muenster.de>

Ah, I see. Then, if you include the 0.1 in the legend, you will not like
that the range 0.1-10 will cover the same legend space as 10-1000, on
the log-scale. To avoid this, renumber the <10 values e.g. to 9, and
label the 9 as 0.1 -- meaning that labels can not equal
as.character(cuts) anymore.
--
Edzer

Roger Bivand wrote:
> On Fri, 11 Sep 2009, Eric Morway wrote:
>
>>
>> Edzer,
>>
>> I apologize for the confusion.  Is there an option in spplot that
>> fills in blank/white cells (I'm assuming they are blank because they
>> have a value less than the minimum cut) with the minimum color on the
>> legend bar (in this case green)?  About a quarter of the way in from
>> the left edge of the image you'll notice a "hole" in the plot due to
>> these cells having values less than 10.  I would like to fill these
>> cells in without altering the legend, if possible.
>
> No, please see the help page for levelplot() in lattice, the at=
> argument is describes as follows:
>
>       at: numeric vector giving breakpoints along the range of 'z'.
>           Contours (if any) will be drawn at these heights, and the
>           regions in between would be colored using 'col.regions'.  In
>           the latter case, values outside the range of 'at' will not be
>           drawn at all.  This serves as a way to limit the range of the
>           data shown, similar to what a 'zlim' argument might have been
>           used for.  However, this also means that when supplying 'at'
>           explicitly, one has to be careful to include values outside
>           the range of 'z' to ensure that all the data are shown.
>
> So you'll need to adjust your at= to accommodate all of the data.
>
> Roger
>
>
>>
>> Thanks, Eric
>>
>> Edzer Pebesma wrote:
>>> Eric, I've been reading your email over and over, but cannot understand
>>> what you want. I also could not find a question, despite your subject.
>>> -- 
>>> Edzer
>>>
>>> Eric Morway wrote:
>>>
>>>> Hello,
>>>>
>>>> I've been working on an image created with spplot and with help have
>>>> gotten it very close to the final product.  One final modification I
>>>> would like to make involves filling in grid cells with values less
>>>> than the minimum value on the legend with the color corresponding to
>>>> the bottom of the legend.  In the attached figure, the minimum legend
>>>> value is 10, but there a few spots with values as low as 0.01. These
>>>> cells are currently blank/white.  I would like to avoid including this
>>>> value on my legend due to the color spread on the plot becoming
>>>> homologous, that is, I would like the color spread to be maximized
>>>> between 10-1000.  Were I to go from 0.01-1000, the range I'm most
>>>> interested in (10-1000) would be confined to a more narrow range of
>>>> the legend.  I have played around with trying to specify a different
>>>> number of cuts for the legend vs plot area, but this causes a
>>>> disconnect between the legend and the colors displayed for the
>>>> different grid cells.  The spplot line looks like this (image
>>>> attached):
>>>>
>>>> pts<-list("sp.points",K.dat,pch=3,col="black",labels=as.character(K.dat$Kh))
>>>>
>>>>
>>>> cuts<-c(10,20,30,40,50,60,70,80,90,100,200,300,400,500,600,700,800,900,1000)
>>>>
>>>>
>>>> spplot(lzm.krige.dir["var1.pred"],at=cuts,colorkey=list(at=log10(cuts),labels=as.character(cuts)),scales=list(draw=TRUE),
>>>>
>>>>  xlab="Easting",ylab="Northing",key.space="right",cex=1.1,col.regions=terrain.colors(22),main="Hydraulic
>>>>
>>>> Conductivity of Layer 2",sp.layout=list(pts))
>>>>
>>>> Respectfully,
>>>> Eric Morway
>>>>
>>>> ------------------------------------------------------------------------
>>>>
>>>>
>>>> ------------------------------------------------------------------------
>>>>
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>
>>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de/
http://www.springer.com/978-0-387-78170-9 e.pebesma at wwu.de


From b.rowlingson at lancaster.ac.uk  Fri Sep 11 22:32:57 2009
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 11 Sep 2009 21:32:57 +0100
Subject: [R-sig-Geo] Intersection of two coordinates (triangulation)
In-Reply-To: <6634A5A114BA554C927CF724BA504041014C911EB716@EXCHANGE-02.zdv.uni-mainz.de>
References: <6634A5A114BA554C927CF724BA504041014C911EB713@EXCHANGE-02.zdv.uni-mainz.de>
	<1252573331.5459.24.camel@galadriel.uagra.net>
	<6634A5A114BA554C927CF724BA504041014C911EB716@EXCHANGE-02.zdv.uni-mainz.de>
Message-ID: <d8ad40b50909111332t498f4f66j64496540668db77a@mail.gmail.com>

On Fri, Sep 11, 2009 at 7:43 PM, Breitbach, Nils <breitbach at uni-mainz.de> wrote:
> Hi Community,
>
> at the moment I am starting to analyse my telemetry data trying to be independent from commercial software. So far I worked with ESRI's ArcInfo to project data from one system into another. No I want to do this with R and so I am looking for a function that is able to do it.
>
> My dataset consists of coordinates in longitude and latitude using WGS1984 and decimal degrees. Now I want to project these coordinates a) into UTM zone 32 north coordinates and b) into Gauss Krueger zone 3 coordinates. Is it possible using R functions or do I need to use GRASS GIS for example? If it is possible, how? Since with the pevious software used I did this type of operations by mouse clicks and ticking options, I would probably need a somewhat detailed explanation. ;)

 How far have you got at the moment? What form is your data in?
Shapefiles? CSV files?

 The way to do coordinate transforms in R is with the spTransform
function from the rgdal package. Here I'll make some fake data and
show you how it's done:

 map=data.frame(x=runif(100,0,5),y=runif(100,20,22),s=1:100)
 plot(map$x,map$y)

this is just a plain R data frame. We need to make it spatial, so we
give it coordinates:

 coordinates(map)=~x+y
 plot(map)

 now we see a different view - the aspect ratio is now set to 1.
Currently the points don't have a spatial reference. We'll give them
one, by setting its 'proj4string':

  proj4string(map)=CRS("+init=epsg:4326")

 PROJ4 is a library for doing map transformations, and the sp package
uses it. The "epsg:4326" bit is the epsg code for WGS84 (see
www.epsg.org for more info on epsg codes).

 Now do:

 plot(map);axis(1);axis(2)

 to see the coordinates.

So how do we transform? spTransform to a new CRS!

Look up your EPSG code either from www.epsg.org or maybe here:

http://spatialreference.org/ref/epsg/32632/

 and transform....

 map2 = spTransform(map,CRS("+init=epsg:32632"))
 plot(map2);axis(1);axis(2)

 (Note I'm not sure if the numbers I chose are valid in that zone).

Gauss-Krueger zone 3 seems to be 2166:

http://spatialreference.org/ref/epsg/2166/

Hope this helps!

Barry


From lee.kitty at yahoo.com  Sat Sep 12 00:54:05 2009
From: lee.kitty at yahoo.com (Kitty Lee)
Date: Fri, 11 Sep 2009 15:54:05 -0700 (PDT)
Subject: [R-sig-Geo] nb2listw zero.policy
Message-ID: <806541.63496.qm@web36305.mail.mud.yahoo.com>

I tried to use nb2listw to create a weight matrix for spautolm. There are 3 cases with no neighbors. I tried to set zero.policy=TRUE but apparently that function doesn't work---I got the error message and I also can't use the object created in spautolm. 

Any ideas?

Thanks!


 adj1<-poly2nb(datashp)                       
> adjwt<-nb2listw(adj1, zero.policy=TRUE)     
> adjwt
Characteristics of weights list object:
Neighbour list object:
Number of regions: 2173 
Number of nonzero links: 11918 
Percentage nonzero weights: 0.2523968 
Average number of links: 5.484584 
3 regions with no links:
281 1081 1096

Weights style: W 
Weights constants summary:
Error in spweights.constants(x, zero.policy = zero.policy) : 
  regions with no neighbours found
Error in print(data.frame(rbind(unlist(spweights.constants(x, zero.policy = zero.policy))[c(1,  : 
  error in evaluating the argument 'x' in selecting a method for function 'print'


From cavallini at faunalia.it  Sat Sep 12 08:21:06 2009
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sat, 12 Sep 2009 08:21:06 +0200
Subject: [R-sig-Geo] [AniMov] Intersection of two
	coordinates	(triangulation)
In-Reply-To: <6634A5A114BA554C927CF724BA504041014C911EB716@EXCHANGE-02.zdv.uni-mainz.de>
References: <6634A5A114BA554C927CF724BA504041014C911EB713@EXCHANGE-02.zdv.uni-mainz.de>,
	<1252573331.5459.24.camel@galadriel.uagra.net>
	<6634A5A114BA554C927CF724BA504041014C911EB716@EXCHANGE-02.zdv.uni-mainz.de>
Message-ID: <4AAB3DD2.3020607@faunalia.it>

Breitbach, Nils ha scritto:
> at the moment I am starting to analyse my telemetry data trying to be independent from commercial
> software. So far I worked with ESRI's ArcInfo to project data from one system into another. No I
> want to do this with R and so I am looking for a function that is able to do it.

Hi Nils.
You have several options here:
- GRASS always reprojects rasters and vectors, according to current location
- QGIS can reproject your vectors on the fly
- R can also reproject
All the best.
-- 
Paolo Cavallini: http://www.faunalia.it/pc


From p.hiemstra at geo.uu.nl  Sat Sep 12 09:14:33 2009
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Sat, 12 Sep 2009 09:14:33 +0200
Subject: [R-sig-Geo] spplot question
In-Reply-To: <alpine.LRH.2.00.0909112138510.2016@reclus.nhh.no>
References: <4AAA7C68.8000802@engr.colostate.edu>	<4AAAA0DC.1050700@uni-muenster.de>	<4AAAA386.5000103@engr.colostate.edu>
	<alpine.LRH.2.00.0909112138510.2016@reclus.nhh.no>
Message-ID: <4AAB4A59.3000902@geo.uu.nl>

Roger Bivand schreef:
> On Fri, 11 Sep 2009, Eric Morway wrote:
>
>>
>> Edzer,
>>
>> I apologize for the confusion.  Is there an option in spplot that 
>> fills in blank/white cells (I'm assuming they are blank because they 
>> have a value less than the minimum cut) with the minimum color on the 
>> legend bar (in this case green)?  About a quarter of the way in from 
>> the left edge of the image you'll notice a "hole" in the plot due to 
>> these cells having values less than 10.  I would like to fill these 
>> cells in without altering the legend, if possible.
>
> No, please see the help page for levelplot() in lattice, the at= 
> argument is describes as follows:
>
>       at: numeric vector giving breakpoints along the range of 'z'.
>           Contours (if any) will be drawn at these heights, and the
>           regions in between would be colored using 'col.regions'.  In
>           the latter case, values outside the range of 'at' will not be
>           drawn at all.  This serves as a way to limit the range of the
>           data shown, similar to what a 'zlim' argument might have been
>           used for.  However, this also means that when supplying 'at'
>           explicitly, one has to be careful to include values outside
>           the range of 'z' to ensure that all the data are shown.
>
> So you'll need to adjust your at= to accommodate all of the data.
Something along the lines of:

at[1] = min(dataset)
at[length(at)] = max(dataset)

cheers,
Paul
>
> Roger
>
>
>>
>> Thanks, Eric
>>
>> Edzer Pebesma wrote:
>>> Eric, I've been reading your email over and over, but cannot understand
>>> what you want. I also could not find a question, despite your subject.
>>> -- 
>>> Edzer
>>>
>>> Eric Morway wrote:
>>>
>>>> Hello,
>>>>
>>>> I've been working on an image created with spplot and with help have
>>>> gotten it very close to the final product.  One final modification I
>>>> would like to make involves filling in grid cells with values less
>>>> than the minimum value on the legend with the color corresponding to
>>>> the bottom of the legend.  In the attached figure, the minimum legend
>>>> value is 10, but there a few spots with values as low as 0.01. These
>>>> cells are currently blank/white.  I would like to avoid including this
>>>> value on my legend due to the color spread on the plot becoming
>>>> homologous, that is, I would like the color spread to be maximized
>>>> between 10-1000.  Were I to go from 0.01-1000, the range I'm most
>>>> interested in (10-1000) would be confined to a more narrow range of
>>>> the legend.  I have played around with trying to specify a different
>>>> number of cuts for the legend vs plot area, but this causes a
>>>> disconnect between the legend and the colors displayed for the
>>>> different grid cells.  The spplot line looks like this (image 
>>>> attached):
>>>>
>>>> pts<-list("sp.points",K.dat,pch=3,col="black",labels=as.character(K.dat$Kh)) 
>>>>
>>>>
>>>> cuts<-c(10,20,30,40,50,60,70,80,90,100,200,300,400,500,600,700,800,900,1000) 
>>>>
>>>>
>>>> spplot(lzm.krige.dir["var1.pred"],at=cuts,colorkey=list(at=log10(cuts),labels=as.character(cuts)),scales=list(draw=TRUE), 
>>>>
>>>>  xlab="Easting",ylab="Northing",key.space="right",cex=1.1,col.regions=terrain.colors(22),main="Hydraulic 
>>>>
>>>> Conductivity of Layer 2",sp.layout=list(pts))
>>>>
>>>> Respectfully,
>>>> Eric Morway
>>>>
>>>> ------------------------------------------------------------------------ 
>>>>
>>>>
>>>> ------------------------------------------------------------------------ 
>>>>
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>
>>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>


From Roger.Bivand at nhh.no  Sat Sep 12 11:26:19 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 12 Sep 2009 11:26:19 +0200 (CEST)
Subject: [R-sig-Geo] nb2listw zero.policy
In-Reply-To: <806541.63496.qm@web36305.mail.mud.yahoo.com>
References: <806541.63496.qm@web36305.mail.mud.yahoo.com>
Message-ID: <alpine.LRH.2.00.0909121123480.5204@reclus.nhh.no>

On Fri, 11 Sep 2009, Kitty Lee wrote:

> I tried to use nb2listw to create a weight matrix for spautolm. There 
> are 3 cases with no neighbors. I tried to set zero.policy=TRUE but 
> apparently that function doesn't work---I got the error message and I 
> also can't use the object created in spautolm.

zero.policy=TRUE does not propagate, so you need:

print(adjwt, zero.policy=TRUE)

and the same in any function using the listw object (to rub in the point 
that no-neighbour objects are probably not a good idea). Maybe it should 
propagate, but that won't happen before the listw class is re-designed.

Hope this helps,

Roger

>
> Any ideas?
>
> Thanks!
>
>
> adj1<-poly2nb(datashp)
>> adjwt<-nb2listw(adj1, zero.policy=TRUE)
>> adjwt
> Characteristics of weights list object:
> Neighbour list object:
> Number of regions: 2173
> Number of nonzero links: 11918
> Percentage nonzero weights: 0.2523968
> Average number of links: 5.484584
> 3 regions with no links:
> 281 1081 1096
>
> Weights style: W
> Weights constants summary:
> Error in spweights.constants(x, zero.policy = zero.policy) :
>  regions with no neighbours found
> Error in print(data.frame(rbind(unlist(spweights.constants(x, zero.policy = zero.policy))[c(1,  :
>  error in evaluating the argument 'x' in selecting a method for function 'print'
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From abenwoha at gmail.com  Sun Sep 13 21:05:04 2009
From: abenwoha at gmail.com (Aben Woha)
Date: Sun, 13 Sep 2009 14:05:04 -0500
Subject: [R-sig-Geo] DEMs
Message-ID: <a413fd8c0909131205l27d22b23i6741f894ef7222f0@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090913/9dab93e1/attachment.pl>

From basille at biomserv.univ-lyon1.fr  Sun Sep 13 22:50:40 2009
From: basille at biomserv.univ-lyon1.fr (Mathieu Basille)
Date: Sun, 13 Sep 2009 22:50:40 +0200
Subject: [R-sig-Geo] Producing ENFA derived suitability maps
	with	adehabitat
In-Reply-To: <EDBAFE72F7A34136B989692BBF195C37@pcibed193>
References: <4AA4B6A2.7060200@cebc.cnrs.fr>
	<EDBAFE72F7A34136B989692BBF195C37@pcibed193>
Message-ID: <4AAD5B20.1020505@biomserv.univ-lyon1.fr>

Dear all,

The answer Tom gave was actually incorrect. Let me first explain why,
and then give a solution to the problem.

The so-called predictions of the ENFA (function 'predict.enfa') are
based on the row coordinates ($li) and the vector of presence ($pr).
>From the row coordinates, the function computes Mahalanobis distances
from the center of the niche to every pixel (row), given the niche
covariance structure. So that if you copy the $li of the first ENFA
object to the second, considering that the vector of presence $pr
remains the same, then you will have exactly the same predictions, which
is not exactly what we want.

Now, let's try to give a solution to this problem. The row coordinates
gives you the coordinates of every pixel projected into the new space
created by the ENFA. You can compute them by hand by multiplying the
(scaled) table of environmental variables with the columns coordinates.
For example, following the example of the function 'enfa':

## We load the data
data(lynxjura)
map <- lynxjura$map
tmp <- lynxjura$locs[,4]!="D"
locs <- lynxjura$locs[tmp, c("X","Y")]
map[,4] <- sqrt(map[,4])

## We perform the ENFA
dataenfa1 <- data2enfa(map, locs)
pc <- dudi.pca(dataenfa1$tab, scannf = FALSE)
(enfa1 <- enfa(pc, dataenfa1$pr, scannf = FALSE))

## We compute the row coordinates by hand and check that this is
## correct
bla <- as.matrix(enfa1$tab) %*% as.matrix(enfa1$co)
all.equal(bla, as.matrix(enfa1$li))

This means that we can then reproject any new environmental variable
into the space created by the ENFA. Let's say that a second set of
environmental maps is called 'map2'. It can be then projected as follows:

li2 <- as.matrix(scale(kasc2df(map2)$tab)) %*% as.matrix(enfa1$co)

Note that:
1) the table must be scaled, as is the $tab component of an ENFA object
("modified array").
2) for the sake of simplicity, I used here the function 'scale', which
used a N-1 denominator. In the ENFA example, a PCA ('dudi.pca') is ran
first on the data, before we use the scale table. In the 'dudi.pca'
function, the denominator is N, so that it might give slightly different
results (negligible for large N).

Then, to "predict", you must use an adapted 'predict.enfa' function,
with a 'new' argument in which we feed the new maps:

predict.enfa <- function (object, index, attr, nf, new, ...)
{
    if (!inherits(object, "enfa"))
        stop("should be an object of class \"enfa\"")
    warning("the enfa is not mathematically optimal for prediction:\n
please consider the madifa instead")
    if ((missing(nf)) || (nf > object$nf))
        nf <- object$nf
    Zli <- object$li[, 1:(nf + 1)]
    f1 <- function(x) rep(x, object$pr)
    Sli <- apply(Zli, 2, f1)
    m <- apply(Sli, 2, mean)
    cov <- t(as.matrix(Sli)) %*% as.matrix(Sli)/nrow(Sli)
    if (!missing("new"))
        Zli <- as.matrix(dudi.pca(kasc2df(new)$tab, scannf = FALSE,
               nf = 1)$tab) %*% as.matrix(object$co)
    maha <- mahalanobis(Zli, center = m, cov = cov)
    map <- getkasc(df2kasc(data.frame(toto = maha, tutu = maha),
        index, attr), "toto")
    return(invisible(map))
}

And this should work like this:

pred2 <- predict(enfa1, dataenfa1$index, dataenfa1$attr, new = map2)

Note that the two maps have here the same attributes. It still works if
it's not the case, simply by adjusting the index and attr in the predict
call (given by a kasc2df on map2).

Hope this helps,
Mathieu.



Tomislav Hengl a ?crit :
> Dear Alexandre,
> 
> I think that this should be doable.
> 
> Once you run the ENFA to estimate the habitat model, copy the values of new rasters (future habitat)
> and replace the original values in the "" object. Then simply re-run the predict.enfa method e.g.:
> 
> # prepare the dataset for ENFA:
>> beidata <- data2enfa(as.kasc(list(dem=import.asc("dem.asc"), grad=import.asc("grad.asc"),
> twi=import.asc("twi.asc"), achan=import.asc("achan.asc"))), bei.sub.pnt at coords)
> # run ENFA: 
>> enfa.bei <- enfa(dudi.pca(beidata$tab, scannf=FALSE), beidata$pr, scannf=FALSE, nf=2)
> # same area, new environmental conditions:
>> beidata.new <- data2enfa(as.kasc(list(dem=import.asc("dem_new.asc"),
> grad=import.asc("grad_new.asc"), twi=import.asc("twi_new.asc"), achan=import.asc("achan_new.asc"))),
> bei.sub.pnt at coords)  # needs to have the same mask!
>> enfa.bei.new <- enfa(dudi.pca(beidata.new$tab, scannf=FALSE), beidata.new$pr, scannf=FALSE, nf=2)
> # copy the model parameters fitted previously:
>> enfa.bei.new$m <- enfa.bei$m
>> enfa.bei.new$s <- enfa.bei$s
>> enfa.bei.new$lw <- enfa.bei$lw
>> enfa.bei.new$li <- enfa.bei$li
>> enfa.bei.new$co <- enfa.bei$co
>> enfa.bei.new$mar <- enfa.bei$mar
>> bei.dist.new <- predict(enfa.bei.new, beidata.new$index, beidata.new$attr)
> 
> ...something like this (I am not really sure which parameters do you have to copy, but the $tab
> data.frame certainly needs to be replaced with new predictors).
> 
> Let me know if it works.
> 
> cheers,
> 
> T. Hengl
> http://spatial-analyst.net/wiki/index.php?title=Species_Distribution_Modelling 
> 
> 
>> -----Original Message-----
>> From: r-sig-geo-bounces at stat.math.ethz.ch [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf
>> Of Alexandre VILLERS
>> Sent: Monday, September 07, 2009 9:31 AM
>> To: Aide R SIG GEO; r-sig-ecology at r-project.org
>> Subject: [R-sig-Geo] Producing ENFA derived suitability maps with adehabitat
>>
>> Dear list(s) 'members,
>>
>> I have a dataset representing the position of a species over a large
>> region for 3 different years (2000, 2004 and 2008) and seven
>> ecogeographical variables. Given that the study takes place on an
>> agricultural region, the landscape changes every year at fine scale and
>> there is a long term trend in crops sowed, leading me to account for
>> between years variability.
>> I would like to use the niche determined by the landscape and location
>> of birds in 2000 and then, appply this niche over the landscape in 2004
>> and 2008 (this would, I believe, give me a first answer on whether
>> changes in birds' location are due to a decrease in habitat suitability
>> or birds).
>> I have already computed ENFA with adehabitat (using the doc provided
>> with the package "adehabitat" and the www.spatial-analyst.net of T.
>> Hengl) but I don't see how exactly using the result of an ENFA on a
>> "new" landscape...
>>
>> Any link or help would be welcome.
>>
>> Alex
>>
>> --
>> Alexandre Villers
>> PhD Student
>> Team "Biodiversity"
>> Centre d'Etudes Biologiques de Chiz?-CNRS UPR1934
>> 79360 Beauvoir sur Niort
>>
>> Phone +33 (0)5 49 09 96 13
>> Fax   +33 (0)5 49 09 65 26


-- 

~$ whoami
Mathieu Basille, PhD

~$ locate
Laboratoire de Biom?trie et Biologie ?volutive
Universit? Claude Bernard Lyon 1 - France
http://lbbe.univ-lyon1.fr/

~$ info
http://ase-research.org/basille

~$ fortune
``If you can't win by reason, go for volume.''
Calvin, by Bill Watterson.


From ashton at msu.edu  Mon Sep 14 00:13:20 2009
From: ashton at msu.edu (Ashton Shortridge)
Date: Sun, 13 Sep 2009 18:13:20 -0400
Subject: [R-sig-Geo] DEMs
In-Reply-To: <a413fd8c0909131205l27d22b23i6741f894ef7222f0@mail.gmail.com>
References: <a413fd8c0909131205l27d22b23i6741f894ef7222f0@mail.gmail.com>
Message-ID: <200909131813.20614.ashton@msu.edu>

Hello Abe,

my thoughts to your questions are listed inline...

On Sunday 13 September 2009 15:05:04 Aben Woha wrote:
> Hello All,
>
> My questions are regarding the best way to obtain DEMs for the entire
> globe.  I am trying to krige a dataset of global scope.  The dataset has
> points at all latitude/longitude intersects and so there are 64,800 sample
> points.  The problem that I am having is that the DEMs I have been using
> are too large (memory) to be used as R variables.  I also have had trouble
> finding a way to download DEMs for the entire globe.
>
> 1.  Given the size of my sample dataset: What is the maximum resolution of
> DEM that I should be using?  Do I only need values at prediction points or
> will higher res yield higher accuracy?
As coarse as possible, since you only appear to need elevations at each 1x1 
degree interval (note that many of these locations are nearby or identical for 
extremely high and low latitudes, due to convergence of longitudes at the 
poles). This question is more complicated if what you really want are average 
elevations per 1-degree 'chunk', or you want to calculate aspect, slope, or 
some other derivative.

I would check out GTOPO30, a 30-arc second global DEM:
http://eros.usgs.gov/products/elevation/gtopo30/gtopo30.html

The accuracy of this depends on the source data, which is reported at the site 
listed above. There are other possibilities, but I don't know if the sources 
are as recent or whether you'd get much in the way of accuracy statistics, 
etc. See:
http://dss.ucar.edu/catalogs/ranges/range750.html
for more possibilities.

> 2.  Is there a way to programmatically access DEMs using GDAL or R in
> general?  ie. internally or through integration with McIDAS, NetCDF, etc.
>
Yes, check out the rgdal library. You can also use gdal (and maybe the python 
bindings) to preprocess the dataset outside of R - perhaps to thin it to just 
the lat-lons you need - prior to importing. I have used PyGDAL to access (and 
sample from) 10s of gigabytes of tiled (e.g. in separate files) elevation data, 
which I subsequently loaded into R. I think others here have done the same 
from within GIS as well.

> 3. Do I need to break the DEMs and sample dataset into smaller tiles to
> avoid the memory issues?  If so how do I do that in R / GDAL?
GTOPO30 comes in maybe 3 dozen tiles, ranging in size from 5-25 MB zipped. On 
modern hardware it's not really that big, and R can probably load it all 
without problem if you have enough RAM. My personal preference would probably 
be to extract the elevations I wanted in home-brewed Python, write to some 
sort of comma-delimited file, and read that into R - and I have no problems on 
my 2 year old pc loading 64,000 records of xyz data, or actually many times 
that number. There are surely simpler solutions that wouldn't involve much if 
any coding, but I have direct experience with that approach.

Good luck!

Ashton


-- 
Ashton Shortridge
Associate Professor			ashton at msu.edu
Dept of Geography			http://www.msu.edu/~ashton
235 Geography Building		ph (517) 432-3561
Michigan State University		fx (517) 432-1671


From bayesianlogic at acm.org  Mon Sep 14 06:36:00 2009
From: bayesianlogic at acm.org (Jan Theodore Galkowski)
Date: Mon, 14 Sep 2009 00:36:00 -0400
Subject: [R-sig-Geo] Spatial clustering of points within a given line
In-Reply-To: <mailman.11.1252749603.29057.r-sig-geo@stat.math.ethz.ch>
References: <mailman.11.1252749603.29057.r-sig-geo@stat.math.ethz.ch>
Message-ID: <1252902960.6814.1334661913@webmail.messagingengine.com>

On Fri, 11 Sep 2009 03:48:29 -0700 (PDT) Julius Tesoro
<jutesoro at yahoo.com> asked about "Spatial clustering of points within a
given line", saying:
>
> I have a dilemma, Considering I have a number of points and a line
> (shapefile). How do I compute for the shortest distance between a line
> and a point? Also how do you identify which points aggregate near the
> line like in spatial clustering?
>
> Thanks.

Notes by Professor B.K.P.Horn of MIT
(http://dspace.mit.edu/bitstream/handle/1721.1/41068/AI_WP_034.pdf)
are appropriate here.  I've used these in a little illustrative exercise
(
http://my.opera.com/ekzept/blog/2009/09/14/clustering-of-points-for-given-lines).
Given you know where lines are, associating involves classifying a point
based upon the (signed) perpendicular distance to each of the candidate
lines. For two, it looks something like:
http://bilge.pyrate.mailbolt.com/blogBeginningNewtonmas2008/20090913ClassifyPointsBySignedDistance005.png

I provided R code at the blog post.  No doubt more formality is
possible.

 -- Jan Galkowski.


From ogbos.okike at gmail.com  Mon Sep 14 08:21:24 2009
From: ogbos.okike at gmail.com (ogbos okike)
Date: Mon, 14 Sep 2009 08:21:24 +0200
Subject: [R-sig-Geo] Changing of colour scale
Message-ID: <43b418580909132321g3bb9fd91id4bac2a8841abd5c@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090914/c990282c/attachment.pl>

From hengl at spatial-analyst.net  Mon Sep 14 08:38:05 2009
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Mon, 14 Sep 2009 08:38:05 +0200 (CEST)
Subject: [R-sig-Geo] Producing ENFA derived suitability maps
 with	adehabitat
In-Reply-To: <4AAD5AB7.3010902@ase-research.org>
References: <4AA4B6A2.7060200@cebc.cnrs.fr>
	<EDBAFE72F7A34136B989692BBF195C37@pcibed193>
	<4AAD5AB7.3010902@ase-research.org>
Message-ID: <58798.86.80.191.132.1252910285.squirrel@spatial-analyst.net>


Dear Mathieu,

Thanks for the clarification. I have underestimated the complexity, but I
admit - habitat analysis is not really 'my cup of tee' (maybe this
question was more suited for the Environmentrics R-sig).

As least I was correct about the whole concept - it is doable  ;)

I would be interested to learn from Alexandre how did the prediction of
future habitat work and does it satisfies their objectives.

T. Hengl
http://home.medewerker.uva.nl/t.hengl/


> Dear all,
>
> The answer Tom gave was actually incorrect. Let me first explain why,
> and then give a solution to the problem.
>
> The so-called predictions of the ENFA (function 'predict.enfa') are
> based on the row coordinates ($li) and the vector of presence ($pr).
> From the row coordinates, the function computes Mahalanobis distances
> from the center of the niche to every pixel (row), given the niche
> covariance structure. So that if you copy the $li of the first ENFA
> object to the second, considering that the vector of presence $pr
> remains the same, then you will have exactly the same predictions, which
> is not exactly what we want.
>
> Now, let's try to give a solution to this problem. The row coordinates
> gives you the coordinates of every pixel projected into the new space
> created by the ENFA. You can compute them by hand by multiplying the
> (scaled) table of environmental variables with the columns coordinates.
> For example, following the example of the function 'enfa':
>
> ## We load the data
> data(lynxjura)
> map <- lynxjura$map
> tmp <- lynxjura$locs[,4]!="D"
> locs <- lynxjura$locs[tmp, c("X","Y")]
> map[,4] <- sqrt(map[,4])
>
> ## We perform the ENFA
> dataenfa1 <- data2enfa(map, locs)
> pc <- dudi.pca(dataenfa1$tab, scannf = FALSE)
> (enfa1 <- enfa(pc, dataenfa1$pr, scannf = FALSE))
>
> ## We compute the row coordinates by hand and check that this is
> ## correct
> bla <- as.matrix(enfa1$tab) %*% as.matrix(enfa1$co)
> all.equal(bla, as.matrix(enfa1$li))
>
> This means that we can then reproject any new environmental variable
> into the space created by the ENFA. Let's say that a second set of
> environmental maps is called 'map2'. It can be then projected as follows:
>
> li2 <- as.matrix(scale(kasc2df(map2)$tab)) %*% as.matrix(enfa1$co)
>
> Note that:
> 1) the table must be scaled, as is the $tab component of an ENFA object
> ("modified array").
> 2) for the sake of simplicity, I used here the function 'scale', which
> used a N-1 denominator. In the ENFA example, a PCA ('dudi.pca') is ran
> first on the data, before we use the scale table. In the 'dudi.pca'
> function, the denominator is N, so that it might give slightly different
> results (negligible for large N).
>
> Then, to "predict", you must use an adapted 'predict.enfa' function,
> with a 'new' argument in which we feed the new maps:
>
> predict.enfa <- function (object, index, attr, nf, new, ...)
> {
>     if (!inherits(object, "enfa"))
>         stop("should be an object of class \"enfa\"")
>     warning("the enfa is not mathematically optimal for prediction:\n
> please consider the madifa instead")
>     if ((missing(nf)) || (nf > object$nf))
>         nf <- object$nf
>     Zli <- object$li[, 1:(nf + 1)]
>     f1 <- function(x) rep(x, object$pr)
>     Sli <- apply(Zli, 2, f1)
>     m <- apply(Sli, 2, mean)
>     cov <- t(as.matrix(Sli)) %*% as.matrix(Sli)/nrow(Sli)
>     if (!missing("new"))
>         Zli <- as.matrix(dudi.pca(kasc2df(new)$tab, scannf = FALSE,
>                nf = 1)$tab) %*% as.matrix(object$co)
>     maha <- mahalanobis(Zli, center = m, cov = cov)
>     map <- getkasc(df2kasc(data.frame(toto = maha, tutu = maha),
>         index, attr), "toto")
>     return(invisible(map))
> }
>
> And this should work like this:
>
> pred2 <- predict(enfa1, dataenfa1$index, dataenfa1$attr, new = map2)
>
> Note that the two maps have here the same attributes. It still works if
> it's not the case, simply by adjusting the index and attr in the predict
> call (given by a kasc2df on map2).
>
> Hope this helps,
> Mathieu.
>
>
>
> Tomislav Hengl a ?crit :
>> Dear Alexandre,
>>
>> I think that this should be doable.
>>
>> Once you run the ENFA to estimate the habitat model, copy the values of
>> new rasters (future habitat)
>> and replace the original values in the "" object. Then simply re-run the
>> predict.enfa method e.g.:
>>
>> # prepare the dataset for ENFA:
>>> beidata <- data2enfa(as.kasc(list(dem=import.asc("dem.asc"),
>>> grad=import.asc("grad.asc"),
>> twi=import.asc("twi.asc"), achan=import.asc("achan.asc"))),
>> bei.sub.pnt at coords)
>> # run ENFA:
>>> enfa.bei <- enfa(dudi.pca(beidata$tab, scannf=FALSE), beidata$pr,
>>> scannf=FALSE, nf=2)
>> # same area, new environmental conditions:
>>> beidata.new <- data2enfa(as.kasc(list(dem=import.asc("dem_new.asc"),
>> grad=import.asc("grad_new.asc"), twi=import.asc("twi_new.asc"),
>> achan=import.asc("achan_new.asc"))),
>> bei.sub.pnt at coords)  # needs to have the same mask!
>>> enfa.bei.new <- enfa(dudi.pca(beidata.new$tab, scannf=FALSE),
>>> beidata.new$pr, scannf=FALSE, nf=2)
>> # copy the model parameters fitted previously:
>>> enfa.bei.new$m <- enfa.bei$m
>>> enfa.bei.new$s <- enfa.bei$s
>>> enfa.bei.new$lw <- enfa.bei$lw
>>> enfa.bei.new$li <- enfa.bei$li
>>> enfa.bei.new$co <- enfa.bei$co
>>> enfa.bei.new$mar <- enfa.bei$mar
>>> bei.dist.new <- predict(enfa.bei.new, beidata.new$index,
>>> beidata.new$attr)
>>
>> ...something like this (I am not really sure which parameters do you
>> have to copy, but the $tab
>> data.frame certainly needs to be replaced with new predictors).
>>
>> Let me know if it works.
>>
>> cheers,
>>
>> T. Hengl
>> http://spatial-analyst.net/wiki/index.php?title=Species_Distribution_Modelling
>>
>>
>>> -----Original Message-----
>>> From: r-sig-geo-bounces at stat.math.ethz.ch
>>> [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf
>>> Of Alexandre VILLERS
>>> Sent: Monday, September 07, 2009 9:31 AM
>>> To: Aide R SIG GEO; r-sig-ecology at r-project.org
>>> Subject: [R-sig-Geo] Producing ENFA derived suitability maps with
>>> adehabitat
>>>
>>> Dear list(s) 'members,
>>>
>>> I have a dataset representing the position of a species over a large
>>> region for 3 different years (2000, 2004 and 2008) and seven
>>> ecogeographical variables. Given that the study takes place on an
>>> agricultural region, the landscape changes every year at fine scale and
>>> there is a long term trend in crops sowed, leading me to account for
>>> between years variability.
>>> I would like to use the niche determined by the landscape and location
>>> of birds in 2000 and then, appply this niche over the landscape in 2004
>>> and 2008 (this would, I believe, give me a first answer on whether
>>> changes in birds' location are due to a decrease in habitat suitability
>>> or birds).
>>> I have already computed ENFA with adehabitat (using the doc provided
>>> with the package "adehabitat" and the www.spatial-analyst.net of T.
>>> Hengl) but I don't see how exactly using the result of an ENFA on a
>>> "new" landscape...
>>>
>>> Any link or help would be welcome.
>>>
>>> Alex
>>>
>>> --
>>> Alexandre Villers
>>> PhD Student
>>> Team "Biodiversity"
>>> Centre d'Etudes Biologiques de Chiz?-CNRS UPR1934
>>> 79360 Beauvoir sur Niort
>>>
>>> Phone +33 (0)5 49 09 96 13
>>> Fax   +33 (0)5 49 09 65 26
>
>
> --
>
> ~$ whoami
> Mathieu Basille, PhD
>
> ~$ locate
> Laboratoire de Biom?trie et Biologie ?volutive
> Universit? Claude Bernard Lyon 1 - France
> http://lbbe.univ-lyon1.fr/
>
> ~$ info
> http://ase-research.org/basille
>
> ~$ fortune
> ``If you can't win by reason, go for volume.''
> Calvin, by Bill Watterson.
>


From r.hijmans at gmail.com  Mon Sep 14 08:52:19 2009
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sun, 13 Sep 2009 23:52:19 -0700
Subject: [R-sig-Geo] Changing of colour scale
In-Reply-To: <43b418580909132321g3bb9fd91id4bac2a8841abd5c@mail.gmail.com>
References: <43b418580909132321g3bb9fd91id4bac2a8841abd5c@mail.gmail.com>
Message-ID: <dc22b2570909132352m47595d77j42d5e8b842dc43bc@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090913/24276e7a/attachment.pl>

From hengl at spatial-analyst.net  Mon Sep 14 08:58:53 2009
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Mon, 14 Sep 2009 08:58:53 +0200 (CEST)
Subject: [R-sig-Geo] DEMs
In-Reply-To: <a413fd8c0909131205l27d22b23i6741f894ef7222f0@mail.gmail.com>
References: <a413fd8c0909131205l27d22b23i6741f894ef7222f0@mail.gmail.com>
Message-ID: <58890.86.80.191.132.1252911533.squirrel@spatial-analyst.net>


Hi Abe,

Did you try using the ETOPO1? This (0.1 degree) DEM can be well loaded to R:

> URL <- "http://spatial-analyst.net/worldmaps/"
# list of maps:
> map.list <- c("globedem", "chlo08", "dcoast")
# download the zipped maps one by one:
> for(i in 1:length(map.list)) {
>  download.file(paste(URL, map.list[i], ".zip", sep=""),
+   destfile=paste(getwd(), "/", map.list[i], ".zip", sep=""))
>  unzip(zipfile=paste(map.list[i], ".zip", sep=""), exdir=getwd())
>  unlink(paste(map.list[i], ".zip", sep=""))
> }
# read maps to R:
> worldmaps <- readGDAL(paste(map.list[i], ".asc", sep=""))
# fix the layer name:
> names(worldmaps)[1] <- map.list[1]
> for(i in map.list[-1]) {
> worldmaps at data[map.list[i]] <- readGDAL(paste(map.list[i], ".asc",
sep=""))$band1
> }
> proj4string(meuse.grid) <- CRS("+proj=longlat +ellps=WGS84")

I do not think that it will be easy to generate kriging with any global
dataset that is <5 km resolution. You could try using the kriging in SAGA
(it can handle maps up to 2 GB in size; it is exp(2) times faster than R).
Here is an example:

http://spatial-analyst.net/wiki/index.php?title=Interpolation_of_ISRIC-WISE_international_soil_profile_data

T. Hengl

PS: Which variable are you interpolating?

> Hello All,
>
> My questions are regarding the best way to obtain DEMs for the entire
> globe.  I am trying to krige a dataset of global scope.  The dataset has
> points at all latitude/longitude intersects and so there are 64,800 sample
> points.  The problem that I am having is that the DEMs I have been using
> are
> too large (memory) to be used as R variables.  I also have had trouble
> finding a way to download DEMs for the entire globe.
>
> 1.  Given the size of my sample dataset: What is the maximum resolution of
> DEM that I should be using?  Do I only need values at prediction points or
> will higher res yield higher accuracy?
>
> 2.  Is there a way to programmatically access DEMs using GDAL or R in
> general?  ie. internally or through integration with McIDAS, NetCDF, etc.
>
> 3. Do I need to break the DEMs and sample dataset into smaller tiles to
> avoid the memory issues?  If so how do I do that in R / GDAL?
>
> Thanks,
> Abe
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From r.hijmans at gmail.com  Mon Sep 14 09:01:15 2009
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Mon, 14 Sep 2009 00:01:15 -0700
Subject: [R-sig-Geo] DEMs
In-Reply-To: <200909131813.20614.ashton@msu.edu>
References: <a413fd8c0909131205l27d22b23i6741f894ef7222f0@mail.gmail.com>
	<200909131813.20614.ashton@msu.edu>
Message-ID: <dc22b2570909140001g59998ca1yafa5c248656bf01b@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090914/4ee99e73/attachment.pl>

From Adrian.Baddeley at csiro.au  Mon Sep 14 09:14:38 2009
From: Adrian.Baddeley at csiro.au (Adrian.Baddeley at csiro.au)
Date: Mon, 14 Sep 2009 15:14:38 +0800
Subject: [R-sig-Geo] Spatial clustering of points within a given line
In-Reply-To: <mailman.11.1252749603.29057.r-sig-geo@stat.math.ethz.ch>
References: <mailman.11.1252749603.29057.r-sig-geo@stat.math.ethz.ch>
Message-ID: <57DC18C299094D4299F837570C5DF1C502AA3B9586@EXWA-MBX01.nexus.csiro.au>

Julius Tesoro <jutesoro at yahoo.com> writes:

> I have a dilemma, Considering I have a number of points and a line (shapefile). How do > I compute for the shortest distance between a line and a point? 

In package 'spatstat' you would use 
           nncross(X,Y)
or 
           project2segment(X, Y) 
where X is a point pattern (class "ppp") and Y is a line segment pattern (class "psp"). This computes the shortest distance from each point to the nearest line segment, identifies which line segment is closest to each point, and projects each point in X to a point on the nearest line segment. To convert your shapefile data to spatstat data, see the vignette supplied with the spatstat package.

> Also how do you identify which points aggregate near the line 
> like in spatial clustering?

I'm not sure exactly what you want to do. You could simply select all points whose distance to the nearest line segment is smaller than a certain threshold. 

regards
Adrian Baddeley


From alexandre.villers at cebc.cnrs.fr  Mon Sep 14 09:16:13 2009
From: alexandre.villers at cebc.cnrs.fr (Alexandre VILLERS)
Date: Mon, 14 Sep 2009 09:16:13 +0200
Subject: [R-sig-Geo] Producing ENFA derived suitability maps
	with	adehabitat
In-Reply-To: <58798.86.80.191.132.1252910285.squirrel@spatial-analyst.net>
References: <4AA4B6A2.7060200@cebc.cnrs.fr>	<EDBAFE72F7A34136B989692BBF195C37@pcibed193>	<4AAD5AB7.3010902@ase-research.org>
	<58798.86.80.191.132.1252910285.squirrel@spatial-analyst.net>
Message-ID: <4AADEDBD.8020305@cebc.cnrs.fr>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090914/8edb77b0/attachment.html>

From jutesoro at yahoo.com  Mon Sep 14 10:55:55 2009
From: jutesoro at yahoo.com (Julius Tesoro)
Date: Mon, 14 Sep 2009 01:55:55 -0700 (PDT)
Subject: [R-sig-Geo] Spatial clustering of points within a given line
In-Reply-To: <57DC18C299094D4299F837570C5DF1C502AA3B9586@EXWA-MBX01.nexus.csiro.au>
Message-ID: <728443.52644.qm@web57603.mail.re1.yahoo.com>

Thanks for that. Is the distance of the point to this  'line segment' perpendicular?

Also, is there a package where you can do automated spatial clustering?
 

--- On Mon, 9/14/09, Adrian.Baddeley at csiro.au <Adrian.Baddeley at csiro.au> wrote:

> From: Adrian.Baddeley at csiro.au <Adrian.Baddeley at csiro.au>
> Subject: Spatial clustering of points within a given line
> To: r-sig-geo at stat.math.ethz.ch
> Cc: jutesoro at yahoo.com, Adrian.Baddeley at csiro.au, r.turner at auckland.ac.nz
> Date: Monday, September 14, 2009, 3:14 PM
> Julius Tesoro <jutesoro at yahoo.com>
> writes:
> 
> > I have a dilemma, Considering I have a number of
> points and a line (shapefile). How do > I compute for the
> shortest distance between a line and a point? 
> 
> In package 'spatstat' you would use 
> ? ? ? ? ???nncross(X,Y)
> or 
> ? ? ? ?
> ???project2segment(X, Y) 
> where X is a point pattern (class "ppp") and Y is a line
> segment pattern (class "psp"). This computes the shortest
> distance from each point to the nearest line segment,
> identifies which line segment is closest to each point, and
> projects each point in X to a point on the nearest line
> segment. To convert your shapefile data to spatstat data,
> see the vignette supplied with the spatstat package.
> 
> > Also how do you identify which points aggregate near
> the line 
> > like in spatial clustering?
> 
> I'm not sure exactly what you want to do.. You could simply
> select all points whose distance to the nearest line segment
> is smaller than a certain threshold. 
> 
> regards
> Adrian Baddeley
> 
> 





From hzambran.newsgroups at gmail.com  Mon Sep 14 19:21:29 2009
From: hzambran.newsgroups at gmail.com (Mauricio Zambrano)
Date: Mon, 14 Sep 2009 19:21:29 +0200
Subject: [R-sig-Geo] Classes for spatio-temporal data?
In-Reply-To: <4AA8A981.50000@uni-muenster.de>
References: <6c35a4fc0909091218m409cd496m6031b4154de242de@mail.gmail.com>
	<4AA8A981.50000@uni-muenster.de>
Message-ID: <63d616b0909141021k4a6026ela29ea7e9b29856c@mail.gmail.com>

Dear Christian and Edzder,

I'm glad to hear about this, because I'm also thinking about
"extending" in some way the SpatialPointsDataFrames class of the 'sp'
package, for making easier the spatio-temporal interpolations within
R.

So far I'm only working with regular time point data, with
daily/monthly/annual sampling frequency, but I'm very interested in
collaborating in this effort.

I'll be looking forward to hear some news about this.

Kind regards,

Mauricio
----------------------------------------------------
Linux user  #454569 -- Ubuntu user #17469




2009/9/10 Edzer Pebesma <edzer.pebesma at uni-muenster.de>:
> Christian, I'm very interested in both: collaborating and watching.
>
> Some previous work that I'm aware of: package trip (on CRAN) extends
> SpatialPointsDataFrames basically in the attributes, by defining two
> columns of which one is the time stamp and the other the (animal or
> trip) ID. In chapter 6 of "Applied Spatial Data Analysis with R", this
> example is discussed, and an example is given for creating a class for
> space-time grids by extending SpatialGrid and SpatialGridDataFrame. The
> example R code is found at http://asdar-book.org/book/csdacm.R
>
> As with spatial data, you'll be facing the decision whether to make your
> spatial dimension regular (discrete, "raster"), or continuous
> ("vector"). In your example, space is continuous ("Points"), and time is
> regular. Will your methods of analysis and visualisation only be
> suitable for regular time data, or can/should they handle continuous as
> well?
>
> Blair Christian wrote:
>> Hi All,
>>
>> I'm starting to work with spatio temporal data, and wondered if there were
>> any extensions to the sp package that include a temporal component. (for
>> example, any classes that might contain 3 objects/data frames, one for the
>> spatial information, one for the temporal information, and one for the
>> data).
>>
>> My first goals are (1) getting some basic classes together for my own narrow
>> set of circumstances (focus on SpatialPointsDataFrames with regular hourly
>> time series), and (2) getting some basic visualization together. ?So far
>> I've used some kriging (in combination with the animation package) for
>> making movies of kriging predictions along with some FDA of the temporal
>> side (fourier series to examine the strong diurnal pattern). ?It would be
>> nice to be able to eventually make some visualizations in a way that could
>> be shared with others, and I know that kml allows you to share both the raw
>> data and use, say, google earth to visualize the time element.
>>
>> I know it sounds ambitious, but it's something I'll be working on off and on
>> over the next year. ?I have enough data at the moment that it's worth my
>> while to add some structure ( (S4?) classes/methods) to my dusty decks.
>>
>> If anybody is interested in collaborating or watching, I'll try and put up a
>> website at some point, maybe with a skeleton package.
>>
>> Cheers,
>> Blair
>>
>> ? ? ? [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Edzer Pebesma
> Institute for Geoinformatics (ifgi), University of M?nster
> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
> 8333081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de/
> http://www.springer.com/978-0-387-78170-9 e.pebesma at wwu.de
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From abenwoha at gmail.com  Tue Sep 15 07:52:06 2009
From: abenwoha at gmail.com (Aben Woha)
Date: Tue, 15 Sep 2009 00:52:06 -0500
Subject: [R-sig-Geo] DEMs
In-Reply-To: <58890.86.80.191.132.1252911533.squirrel@spatial-analyst.net>
References: <a413fd8c0909131205l27d22b23i6741f894ef7222f0@mail.gmail.com>
	<58890.86.80.191.132.1252911533.squirrel@spatial-analyst.net>
Message-ID: <a413fd8c0909142252u4da48803j75a77add5ef04c13@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090915/467552de/attachment.pl>

From abenwoha at gmail.com  Tue Sep 15 07:52:57 2009
From: abenwoha at gmail.com (Aben Woha)
Date: Tue, 15 Sep 2009 00:52:57 -0500
Subject: [R-sig-Geo] DEMs
In-Reply-To: <dc22b2570909140001g59998ca1yafa5c248656bf01b@mail.gmail.com>
References: <a413fd8c0909131205l27d22b23i6741f894ef7222f0@mail.gmail.com>
	<200909131813.20614.ashton@msu.edu>
	<dc22b2570909140001g59998ca1yafa5c248656bf01b@mail.gmail.com>
Message-ID: <a413fd8c0909142252n3e25f1c5x5804e54192e8d745@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090915/34c0ee98/attachment.pl>

From hengl at spatial-analyst.net  Tue Sep 15 09:45:05 2009
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Tue, 15 Sep 2009 09:45:05 +0200
Subject: [R-sig-Geo] DEMs
In-Reply-To: <a413fd8c0909142252u4da48803j75a77add5ef04c13@mail.gmail.com>
References: <a413fd8c0909131205l27d22b23i6741f894ef7222f0@mail.gmail.com>
	<58890.86.80.191.132.1252911533.squirrel@spatial-analyst.net>
	<a413fd8c0909142252u4da48803j75a77add5ef04c13@mail.gmail.com>
Message-ID: <414CF0B08A4649358A7787E05676E72F@pcibed193>


> -----Original Message-----
> From: Aben Woha [mailto:abenwoha at gmail.com]
> Sent: Tuesday, September 15, 2009 7:52 AM
> To: Tomislav Hengl
> Cc: r-sig-geo at stat.math.ethz.ch
> Subject: Re: [R-sig-Geo] DEMs
> 
> Hi Tomislav,
> 
> Thanks for the detailed response.  I tried to use the globedem.zip from your website, but then
> when I call overlay() with my data, there are many NAs produced in the output: it seems the DEM
> covers  X= -180 to 180 & Y= -65 to 65, my dataset covers X= -180 to 180 & Y= -90 to 90
> So when I call krige, it complains:
> Error: dimensions do not match: locations 129600 and data 47029
> 
> 129600 = (number of sample points) * 2
> 47029 = (number of sample points) - (number of NAs in overlay dem data)
> 
> Any suggestions on how to handle this?  Should I subset the data?  Find a different dem with full
> global coverage?

You should mask the NA values prior to variogram fitting using e.g.:

> sel <- !is.na(point.ov$SOLAR)
> plot(variogram(SOLAR~1, point.ov[sel,]))

SRTM DEM is available only for 56?S to 60?N. The 10 minutes global DEM (GTOPO?) at is probably your
best choice then (it is 2160 x 900 pixels):

http://biogeo.berkeley.edu/worldclim1_4/grid/cur/alt_10m_bil.zip  (metadata missing :( )

> 
> Also when you say a global dataset <5km resolution, is that as measured at the equator?

Yes. The ETOPO1 (10 km) DEM is 3600 x 1300 pixels, which is already on the edge of what R can
handle. There is also the GDEM (ASTER DEM, which has global coverage), but nobody yet produced a
single layer (e.g. at resolution of 1 km).

> 
> The current variable I am working with is solar radiation.  I have plans to work on several other
> variables as well.
> 

But do you need to produce maps of solar radiation for artics/antartica, sea etc? Besides, plenty of
global solar radiation maps already exist e.g.:

1. http://www.meteonorm.com/pages/en/downloads/maps.php
2. http://re.jrc.ec.europa.eu/pvgis/countries/europe.htm 
...

> 
> On Mon, Sep 14, 2009 at 1:58 AM, Tomislav Hengl <hengl at spatial-analyst.net> wrote:
> 
> 
> 
> 	Hi Abe,
> 
> 	Did you try using the ETOPO1? This (0.1 degree) DEM can be well loaded to R:
> 
> 	> URL <- "http://spatial-analyst.net/worldmaps/"
> 	# list of maps:
> 	> map.list <- c("globedem", "chlo08", "dcoast")
> 	# download the zipped maps one by one:
> 	> for(i in 1:length(map.list)) {
> 	>  download.file(paste(URL, map.list[i], ".zip", sep=""),
> 	+   destfile=paste(getwd(), "/", map.list[i], ".zip", sep=""))
> 	>  unzip(zipfile=paste(map.list[i], ".zip", sep=""), exdir=getwd())
> 	>  unlink(paste(map.list[i], ".zip", sep=""))
> 	> }
> 	# read maps to R:
> 	> worldmaps <- readGDAL(paste(map.list[i], ".asc", sep=""))
> 	# fix the layer name:
> 	> names(worldmaps)[1] <- map.list[1]
> 	> for(i in map.list[-1]) {
> 	> worldmaps at data[map.list[i]] <- readGDAL(paste(map.list[i], ".asc",
> 	sep=""))$band1
> 	> }
> 	> proj4string(meuse.grid) <- CRS("+proj=longlat +ellps=WGS84")
> 
> 	I do not think that it will be easy to generate kriging with any global
> 	dataset that is <5 km resolution. You could try using the kriging in SAGA
> 	(it can handle maps up to 2 GB in size; it is exp(2) times faster than R).
> 	Here is an example:
> 
> 	http://spatial-analyst.net/wiki/index.php?title=Interpolation_of_ISRIC-
> WISE_international_soil_profile_data
> 
> 	T. Hengl
> 
> 	PS: Which variable are you interpolating?
> 
> 
> 	> Hello All,
> 	>
> 	> My questions are regarding the best way to obtain DEMs for the entire
> 	> globe.  I am trying to krige a dataset of global scope.  The dataset has
> 	> points at all latitude/longitude intersects and so there are 64,800 sample
> 	> points.  The problem that I am having is that the DEMs I have been using
> 	> are
> 	> too large (memory) to be used as R variables.  I also have had trouble
> 	> finding a way to download DEMs for the entire globe.
> 	>
> 	> 1.  Given the size of my sample dataset: What is the maximum resolution of
> 	> DEM that I should be using?  Do I only need values at prediction points or
> 	> will higher res yield higher accuracy?
> 	>
> 	> 2.  Is there a way to programmatically access DEMs using GDAL or R in
> 	> general?  ie. internally or through integration with McIDAS, NetCDF, etc.
> 	>
> 	> 3. Do I need to break the DEMs and sample dataset into smaller tiles to
> 	> avoid the memory issues?  If so how do I do that in R / GDAL?
> 	>
> 	> Thanks,
> 	> Abe
> 	>
> 
> 	>       [[alternative HTML version deleted]]
> 	>
> 	> _______________________________________________
> 	> R-sig-Geo mailing list
> 	> R-sig-Geo at stat.math.ethz.ch
> 	> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 	>
> 
> 
> 
> 


From alobolistas at gmail.com  Tue Sep 15 18:03:16 2009
From: alobolistas at gmail.com (Agustin Lobo)
Date: Tue, 15 Sep 2009 18:03:16 +0200
Subject: [R-sig-Geo] [Fwd: v.reclass]
Message-ID: <4AAFBAC4.3010202@gmail.com>



-------- Original Message --------
Subject: 	v.reclass
Date: 	Tue, 15 Sep 2009 14:40:28 +0200
From: 	Agustin Lobo <alobolistas at gmail.com>
To: 	grass-stats at lists.osgeo.org



Hi again,

As a result of an R process, I have to reclassify
the input vector layer. Normally, I would do it
in R, but as the vector is huge, I prefer making the
rules file in R and use v.reclass in grass.

My goal is to reclassify field VALUE of vector Montseny07 according
to a table generated in R:
> b3rec[1:3,]
    v         
[1,] "18"  "274"
[2,] "22"  "274"
[3,] "117" "274

so that VALUE 18 would become 274 and so on.

I've made the following in R to create the rules file:
z <- file("delme.txt", "w")
for (i in 1:nrow(b3rec)){
   writeLines(text=paste("VALUE",b3rec[i,2]), con = z, sep = "\n")
   writeLines(text=paste("WHERE VALUE=",b3rec[i,1],sep=""), con=z, sep 
= "\n")
}
close(z)

which creates a file delme.txt such as:
VALUE 274
WHERE VALUE=18
VALUE 274
WHERE VALUE=22
VALUE 274
WHERE VALUE=117
VALUE 274
WHERE VALUE=146
...

My understanding of this rules file was that
where we had VALUE 18, we would have VALUE 274
Nevertheless, when I run v.reclass, I get an error:

> system("v.reclass Montseny07 rules=delme.txt out=Monstseny07b3rec")
ERROR: Unknown rule option: 'VALUE'

So I remade the rules files using
cat 274
WHERE VALUE=18
etc

but then I get a vector object with a table with only one field cat. I 
would prefer
having the same table as in the original vector, just with some of the 
values
in field VALUE modified according to the rules file. Is there a way of 
doing that?

Also, is there the equivalent to "* = *" in r.reclass to get the rest
of values unchanged?

Thanks!

Agus


-------------- next part --------------
A non-text attachment was scrubbed...
Name: alobolistas.vcf
Type: text/x-vcard
Size: 251 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090915/b9801479/attachment.vcf>

From enrico.crema at gmail.com  Wed Sep 16 15:20:57 2009
From: enrico.crema at gmail.com (Enrico R. Crema)
Date: Wed, 16 Sep 2009 14:20:57 +0100
Subject: [R-sig-Geo] Bivariate Inhomogeneous K function?
Message-ID: <5686F11D-6952-4A21-84D9-41D47F8453A6@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090916/229e5a1e/attachment.pl>

From enrico.crema at gmail.com  Wed Sep 16 15:48:58 2009
From: enrico.crema at gmail.com (Enrico R. Crema)
Date: Wed, 16 Sep 2009 14:48:58 +0100
Subject: [R-sig-Geo] Bivariate Inhomogeneous K function?
In-Reply-To: <4AB0E8FD.5070906@yale.edu>
References: <141D0A818175C842AC5577DF2D5A310D6AF913C471@XVS1-CLUSTER.yu.yale.edu>
	<4AB0E8FD.5070906@yale.edu>
Message-ID: <0E2D3A5B-472D-433D-867A-BEEC047B03D8@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090916/1119b2dd/attachment.pl>

From vkepoglu at gmail.com  Wed Sep 16 18:05:58 2009
From: vkepoglu at gmail.com (Volkan Kepoglu)
Date: Wed, 16 Sep 2009 19:05:58 +0300
Subject: [R-sig-Geo] Bivariate Inhomogeneous K function?
In-Reply-To: <5686F11D-6952-4A21-84D9-41D47F8453A6@gmail.com>
References: <5686F11D-6952-4A21-84D9-41D47F8453A6@gmail.com>
Message-ID: <8b5938320909160905g127f28a2x2f85491c8448a7ce@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090916/bbfecd1a/attachment.pl>

From enrico.crema at gmail.com  Wed Sep 16 18:09:56 2009
From: enrico.crema at gmail.com (Enrico R. Crema)
Date: Wed, 16 Sep 2009 17:09:56 +0100
Subject: [R-sig-Geo] Bivariate Inhomogeneous K function?
In-Reply-To: <8b5938320909160905g127f28a2x2f85491c8448a7ce@mail.gmail.com>
References: <5686F11D-6952-4A21-84D9-41D47F8453A6@gmail.com>
	<8b5938320909160905g127f28a2x2f85491c8448a7ce@mail.gmail.com>
Message-ID: <CD9A69F6-BFB3-40FF-8E57-8A442BD42EBC@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090916/83f7af03/attachment.pl>

From enrico.crema at gmail.com  Wed Sep 16 18:13:44 2009
From: enrico.crema at gmail.com (Enrico R. Crema)
Date: Wed, 16 Sep 2009 17:13:44 +0100
Subject: [R-sig-Geo] Bivariate Inhomogeneous K function?
In-Reply-To: <8b5938320909160905g127f28a2x2f85491c8448a7ce@mail.gmail.com>
References: <5686F11D-6952-4A21-84D9-41D47F8453A6@gmail.com>
	<8b5938320909160905g127f28a2x2f85491c8448a7ce@mail.gmail.com>
Message-ID: <E1692B6B-92F5-4729-93E3-8028FFDACC4A@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090916/bfbe108c/attachment.pl>

From a.ghisla at gmail.com  Thu Sep 17 10:54:04 2009
From: a.ghisla at gmail.com (Anne Ghisla)
Date: Thu, 17 Sep 2009 10:54:04 +0200
Subject: [R-sig-Geo] Grid neighbours - cell2nb and size of moving window
Message-ID: <1253177644.5236.27.camel@galadriel.uagra.net>

Hello list, and sorry for cross-posting,

I'm calculating Moran's I on a grid dataset, with z value corresponding
to animal relocations' density in each cell.

On an ecological point of view, according to Prof. Baddeley [0], animal
relocations should be considered as trajectories instead of point
patterns. Anyway, most home range estimators treat datasets as point
patterns, and moreover not all datasets have enough autocorrelation to
be handled as trajectories.

This being said, I know that Moran's I is dependent on size and
resolution of the grid, on choice of neighbours and weights. For the
first point, as I'm comparing home range estimators that draw a grid as
intermediate step, I use that grid as it is. For second and third
points, I'd be grateful for advice - at the moment, I use cell2nb with
type=queen and style weight="W".

Is there a more reliable choice of neighbors and/or weights, without
taking into account ecological motivations? I've thought of encompassing
all cells with a command like dnearneigh(coords, d1=0, d2=max(dists))
and weight them with inverse distance, as shown in "Applied Spatial Data
Analysis in R", pp. 247;253.

Thanks in advance for any hint,

Anne Ghisla

[0] http://www.csiro.au/resources/Spatial-Point-Patterns-in-R.html


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Questa ? una parte del messaggio	firmata digitalmente
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090917/af3a9020/attachment.bin>

From terhi.tormanen at oulu.fi  Thu Sep 17 15:04:42 2009
From: terhi.tormanen at oulu.fi (Terhi Tormanen)
Date: Thu, 17 Sep 2009 16:04:42 +0300
Subject: [R-sig-Geo] Point pattern analysis on a sphere?
Message-ID: <E275D00D-E215-44F4-B47D-C9406A8AE402@oulu.fi>

Dear List,

This is a bit more general question but I'd be very happy about any  
advice.

I have two data sets of geographic (lon, lat) locations covering a  
large area (large continent scale; and also global sets). I'd like to  
perform some basic spatial analyses of the data, i.e. are they  
clustered/dispersed compared to CSR, are there differences between  
the data sets, are there any clusters.

I've tried to look at various spatial packages but so far I've not  
found anything that would have been impelemented on a sphere (i.e.  
with true spherical distances and surface areas).

I know that someone somewhere must have done this before, so I  
started looking at R packages before I try to programme these myself.
(I've done basic reading about the spatial statistcis so (I think) I  
know which statistical methods to try to use). (Also, if someone  
knows about any other available software to use, I'd be very grateful.)

Thank you!


Terhi Tormanen
PhD candidate
Planetary Sciences, Dept. of Physics
Univ. of Oulu, Finland


From massimodisasha at yahoo.it  Fri Sep 18 00:01:10 2009
From: massimodisasha at yahoo.it (Massimo Di Stefano)
Date: Fri, 18 Sep 2009 00:01:10 +0200
Subject: [R-sig-Geo] R packages to performs geospatial analisys.
Message-ID: <B12797AA-CF76-45B5-B994-BB108B6ED107@yahoo.it>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090918/d0bb0c16/attachment.pl>

From jason at bryer.org  Fri Sep 18 00:51:45 2009
From: jason at bryer.org (Jason Bryer)
Date: Thu, 17 Sep 2009 18:51:45 -0400
Subject: [R-sig-Geo] R-Trees
Message-ID: <DC8522C1-7AB0-45CC-BD3C-A98F979FB856@bryer.org>

I'm looking to do some spatial searching and joining of data but  
without an spatial index it seems to take a considerable amount of  
time. For example, I have user data with locations and would like to  
determine what zip code code they are in thereby requiring a lot of  
point-in-polygon calls. Is there either a better way to do this or an  
r-tree implementation somewhere (searching revealed no)? I'm beginning  
to implement an r-tree index but before I invest too much time want to  
ensure I'm not duplicating someone else's work.

Thanks,
Jason


From edzer.pebesma at uni-muenster.de  Fri Sep 18 07:58:41 2009
From: edzer.pebesma at uni-muenster.de (Edzer J. Pebesma)
Date: Fri, 18 Sep 2009 07:58:41 +0200
Subject: [R-sig-Geo] R packages to performs geospatial analisys.
In-Reply-To: <B12797AA-CF76-45B5-B994-BB108B6ED107@yahoo.it>
References: <B12797AA-CF76-45B5-B994-BB108B6ED107@yahoo.it>
Message-ID: <4AB32191.8030209@uni-muenster.de>

Massimo, I would at least include those on the Spatial task view, at 
http://cran.r-project.org/web/views/Spatial.html and merge the full list 
there with your list.

In your list, for instance, geoR and geoRglm are missing.
--
Edzer

Massimo Di Stefano wrote:
> Hi,
>
> i'm working on a live-dvd linux based that will contain some  
> geospatial sofware
> it will be official presented at foss4g 2009 in Sydney. [1]
>
>
>
> I'm adding some R packages into the dvd and i choose to install this  
> packages :
>
> r-base rkward rpy2 (qgis plig-in for R)
>
> and r-packages :
>
> echo 'packagelist <-  
> c("adapt","boot","class","classInt","coda","DCluster","digest","e1071","epitools","foreign","gpclib","graph","gstat","lattice","lmtest","maps","maptools","Matrix","mgcv","nlme","pgirmess","pkgDepTools","R2WinBUGS","RandomFields","RBGL","RColorBrewer","rgdal","Rgraphviz","sandwich","sp","spam","spatialkernel","spatstat","spdep","spgrass6","spgwr","splancs","tripack","xtable","zoo")
> for (i in packagelist) {
>      install.packages(i, repos= "http://cran.r-project.org", lib = "/ 
> usr/local/lib/R/site-library/" , dependencies = TRUE)
> }' > /tmp/installRpackages.r
>
> sudo R CMD BATCH /tmp/installRpackages.r
>
>
> i read the list from the great book dedicated to R and spatial  
> analisys writen by Bivand, Roger S., Pebesma, Edzer J., G?mez-Rubio,  
> Virgilio  [2]
> please check the package list and tell me if i'm missing a package  
> that you should see on the live dvd.
>
> thanks,
>
>
> Massimo Di Stefano.
>
>
>
>
> [1] http://2009.foss4g.org/
> [2] http://www.springer.com/public+health/epidemiology/book/978-0-387-78170-9
> 	[[alternative HTML version deleted]]
>
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From breitbach at uni-mainz.de  Fri Sep 18 08:30:39 2009
From: breitbach at uni-mainz.de (Breitbach, Nils)
Date: Fri, 18 Sep 2009 08:30:39 +0200
Subject: [R-sig-Geo] MultiBuffer, Intersect and Dissolve Tool in R?
Message-ID: <6634A5A114BA554C927CF724BA5040410162413BEC2A@EXCHANGE-02.zdv.uni-mainz.de>

Dear Community,

I am looking for a R-function (or if there is none directly in R in GRASS or QGIS) that works just like the MulitBuffer Tool from the Toolbox in ESRIs ArcGIS. Furthermore I would like to use an equivalent to the ArcGIS Tools Intersect and Dissolve. Since I am just starting to do geographical analyses with R I just do not know where to look for equivalent functions in R (Grass or QGIS).

Cheers,

Nils


From Roger.Bivand at nhh.no  Fri Sep 18 12:04:24 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 18 Sep 2009 12:04:24 +0200 (CEST)
Subject: [R-sig-Geo] R packages to performs geospatial analisys.
In-Reply-To: <4AB32191.8030209@uni-muenster.de>
References: <B12797AA-CF76-45B5-B994-BB108B6ED107@yahoo.it>
	<4AB32191.8030209@uni-muenster.de>
Message-ID: <alpine.LRH.2.00.0909181152170.12122@reclus.nhh.no>

On Fri, 18 Sep 2009, Edzer J. Pebesma wrote:

> Massimo, I would at least include those on the Spatial task view, at 
> http://cran.r-project.org/web/views/Spatial.html and merge the full list 
> there with your list.
>
> In your list, for instance, geoR and geoRglm are missing.

Yes, the task view is more up to date than the book for obvious reasons - 
the book reflects a subset of the packages available in early 2008, and 
more have come in since. Existing packages like spatstat have make big 
advances, for example regarding class coercion, that are not in the book, 
and other packages now have (more) vignettes.

Please do, however, subset out the recommended packages, for instance by:

installed.packages(priority="high")[,"Package"]

from your list, as they should be installed with R-base.

Watch out for possible problems caused by the binary installer for the 
GRASS GDAL plugin in installing Qgis - there have been reports of version 
clashes.

Good luck in Sydney!

Roger

PS. FOSS4G 2010 will be in Barcelona in September.

> --
> Edzer
>
> Massimo Di Stefano wrote:
>> Hi,
>> 
>> i'm working on a live-dvd linux based that will contain some  geospatial 
>> sofware
>> it will be official presented at foss4g 2009 in Sydney. [1]
>> 
>> 
>> 
>> I'm adding some R packages into the dvd and i choose to install this 
>> packages :
>> 
>> r-base rkward rpy2 (qgis plig-in for R)
>> 
>> and r-packages :
>> 
>> echo 'packagelist <-

>> c("adapt","boot","class","classInt","coda","DCluster","digest","e1071",
>> "epitools","foreign","gpclib","graph","gstat","lattice","lmtest","maps",
>> "maptools","Matrix","mgcv","nlme","pgirmess","pkgDepTools","R2WinBUGS",
>> "RandomFields","RBGL","RColorBrewer","rgdal","Rgraphviz","sandwich","sp",
>> "spam","spatialkernel","spatstat","spdep","spgrass6","spgwr","splancs",
>> "tripack","xtable","zoo")

>> for (i in packagelist) {
>>      install.packages(i, repos= "http://cran.r-project.org", lib = "/ 
>> usr/local/lib/R/site-library/" , dependencies = TRUE)
>> }' > /tmp/installRpackages.r
>> 
>> sudo R CMD BATCH /tmp/installRpackages.r
>> 
>> 
>> i read the list from the great book dedicated to R and spatial  analisys 
>> writen by Bivand, Roger S., Pebesma, Edzer J., G?mez-Rubio,  Virgilio  [2]
>> please check the package list and tell me if i'm missing a package  that 
>> you should see on the live dvd.
>> 
>> thanks,
>> 
>> 
>> Massimo Di Stefano.
>> 
>> 
>> 
>> 
>> [1] http://2009.foss4g.org/
>> [2] 
>> http://www.springer.com/public+health/epidemiology/book/978-0-387-78170-9
>> 	[[alternative HTML version deleted]]
>>
>>   ------------------------------------------------------------------------
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From blair.christian at gmail.com  Fri Sep 18 15:15:10 2009
From: blair.christian at gmail.com (Blair Christian)
Date: Fri, 18 Sep 2009 09:15:10 -0400
Subject: [R-sig-Geo] R packages to performs geospatial analisys.
	(Massimo Di Stefano)
Message-ID: <6c35a4fc0909180615l5cc22a57wd87c4228bbb2edf6@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090918/b451abe5/attachment.pl>

From blair.christian at gmail.com  Fri Sep 18 18:20:57 2009
From: blair.christian at gmail.com (Blair Christian)
Date: Fri, 18 Sep 2009 12:20:57 -0400
Subject: [R-sig-Geo] First thoughts on spatio-temporal classes...
Message-ID: <6c35a4fc0909180920m19725f7by566939c877f19c20@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090918/904b3c93/attachment.pl>

From Virgilio.Gomez at uclm.es  Sat Sep 19 00:15:48 2009
From: Virgilio.Gomez at uclm.es (VIRGILIO GOMEZ RUBIO)
Date: Fri, 18 Sep 2009 18:15:48 -0400
Subject: [R-sig-Geo] First thoughts on spatio-temporal classes...
In-Reply-To: <6c35a4fc0909180920m19725f7by566939c877f19c20@mail.gmail.com>
References: <6c35a4fc0909180920m19725f7by566939c877f19c20@mail.gmail.com>
Message-ID: <E52E2CC5-EBD0-4F00-BC78-242A18BECAD1@uclm.es>

Hi Blair,

I am visiting SAMSI this fall and I would like to get involved in  
this. Is there any working group discussing this? If not, perhaps we  
could have a chat with all the people interested in the area (samsi,  
duke, unc, ncsu,...) and talk about this.

Best wishes,

Virgilio

Sent from my iPhone

On 18/09/2009, at 12:25, "Blair Christian" <blair.christian at gmail.com>  
wrote:

> Hi all,
>
> This is in response to an earlier post of mine inquiring about  
> options for
> spatio-temporal classes in R.
>
> Thank you to all who replied for your interest in spatio-temporal data
> classes and methods.  There were many excellent comments in your  
> emails.  I
> have been attending the SAMSI conference on space-time
> analysis<http://www.samsi.info/programs/2009spatialprogram.shtml>this
> week and have put together a summary (a working draft) of some
> thoughts<http://www.isds.duke.edu/%7Ejbc30/SpatioTemporal/workGroupComp.pdf 
> >I
> have about classes.
>
> I also started a bare bones webpage:
> http://www.isds.duke.edu/~jbc30/SpatioTemporal/
>
> A also put up the latex source code and bib file I used if you are
> interested in making additions, corrections, or other.  Please email  
> me any
> changes, and I'll maintain an RCS version of it.
>
> I'll put some plots up there when I have time to give you all an  
> idea of
> what my context is.  Ironically, I can't ssh to the webserver from  
> work (at
> the US EPA), so I can only update it from home.
>
>
> Here are some questions to you all:
>
> - What data do you have interest in analyzing?
>
> - What type of code do you have to contribute?
>
> - Are you interested in writing classes/methods?  If so, what is your
> background?  (I can provide several tutorials on S4 classes on the  
> web that
> I found useful).
>
> I will pass along these related packages as being related to spatio- 
> temporal
> data:
> trip (trip class extends SpatialPointsDataFrame), pastecs,  
> tripEstimation,
> hydrosalinity(?), PBSmapping(?), RadioSonde, STARIMA(?), Bayesian  
> Vector
> Accumulation(?), spBayes(?), INLA (Havard Rue website)
>
> I skimmed a fair number of time related packages (more than just  
> timeDate
> and chron), including xts, zoo, (tseries, timeSeries, ts, its, etc)  
> as well,
> and came to the conclusion that it would best to allow either a time  
> series
> type package (regular or irregular times) as well as a package for
> continuous time (functional data, like paths of animals, in the trip
> library), and I'm a fan of the fda
> library<http://ego.psych.mcgill.ca/misc/fda/>.
> It would be nice to have easy spline/FDA access for datasets where  
> time is
> collected in a continuous manner rather than in the usual arima grid
> setting.
>
> With that information dump, I'll try and get another update out in  
> about two
> weeks depending on my schedule, which should include any progress  
> I've made
> that I'm satisfied with.  I will respond to individual emails as well.
>
>
> Cheers,
> Blair
>
>    [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From mdsumner at gmail.com  Sat Sep 19 06:53:17 2009
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 19 Sep 2009 14:53:17 +1000
Subject: [R-sig-Geo] First thoughts on spatio-temporal classes...
In-Reply-To: <E52E2CC5-EBD0-4F00-BC78-242A18BECAD1@uclm.es>
References: <6c35a4fc0909180920m19725f7by566939c877f19c20@mail.gmail.com>
	<E52E2CC5-EBD0-4F00-BC78-242A18BECAD1@uclm.es>
Message-ID: <522664f80909182153r1a18265fqb306440108d85e41@mail.gmail.com>

Hi, I just want to let you know that I'm hoping to update the trip
(and tripEstimation) packages over the next few months so I'm very
open to suggestions if you are interested.

The main thing I want to do is to ensure that the capacity in sp for
use of 3 or more coordinates (X, Y, Z, T,...) is well supported, and
then simplify the implementation of trip on top of
SpatialPointsDataFrame. It would be nice to make it less of a special
case, and perhaps it would be best to apply it as a multipoint type
(as presented in the ASDAR book). That might be a good way to handle
collections (such as sets of individual trips).


Regards, Mike


On Sat, Sep 19, 2009 at 8:15 AM, VIRGILIO GOMEZ RUBIO
<Virgilio.Gomez at uclm.es> wrote:
> Hi Blair,
>
> I am visiting SAMSI this fall and I would like to get involved in this. Is
> there any working group discussing this? If not, perhaps we could have a
> chat with all the people interested in the area (samsi, duke, unc, ncsu,...)
> and talk about this.
>
> Best wishes,
>
> Virgilio
>
> Sent from my iPhone
>
> On 18/09/2009, at 12:25, "Blair Christian" <blair.christian at gmail.com>
> wrote:
>
>> Hi all,
>>
>> This is in response to an earlier post of mine inquiring about options for
>> spatio-temporal classes in R.
>>
>> Thank you to all who replied for your interest in spatio-temporal data
>> classes and methods. ?There were many excellent comments in your emails.
>> ?I
>> have been attending the SAMSI conference on space-time
>> analysis<http://www.samsi.info/programs/2009spatialprogram.shtml>this
>> week and have put together a summary (a working draft) of some
>>
>> thoughts<http://www.isds.duke.edu/%7Ejbc30/SpatioTemporal/workGroupComp.pdf>I
>> have about classes.
>>
>> I also started a bare bones webpage:
>> http://www.isds.duke.edu/~jbc30/SpatioTemporal/
>>
>> A also put up the latex source code and bib file I used if you are
>> interested in making additions, corrections, or other. ?Please email me
>> any
>> changes, and I'll maintain an RCS version of it.
>>
>> I'll put some plots up there when I have time to give you all an idea of
>> what my context is. ?Ironically, I can't ssh to the webserver from work
>> (at
>> the US EPA), so I can only update it from home.
>>
>>
>> Here are some questions to you all:
>>
>> - What data do you have interest in analyzing?
>>
>> - What type of code do you have to contribute?
>>
>> - Are you interested in writing classes/methods? ?If so, what is your
>> background? ?(I can provide several tutorials on S4 classes on the web
>> that
>> I found useful).
>>
>> I will pass along these related packages as being related to
>> spatio-temporal
>> data:
>> trip (trip class extends SpatialPointsDataFrame), pastecs, tripEstimation,
>> hydrosalinity(?), PBSmapping(?), RadioSonde, STARIMA(?), Bayesian Vector
>> Accumulation(?), spBayes(?), INLA (Havard Rue website)
>>
>> I skimmed a fair number of time related packages (more than just timeDate
>> and chron), including xts, zoo, (tseries, timeSeries, ts, its, etc) as
>> well,
>> and came to the conclusion that it would best to allow either a time
>> series
>> type package (regular or irregular times) as well as a package for
>> continuous time (functional data, like paths of animals, in the trip
>> library), and I'm a fan of the fda
>> library<http://ego.psych.mcgill.ca/misc/fda/>.
>> It would be nice to have easy spline/FDA access for datasets where time is
>> collected in a continuous manner rather than in the usual arima grid
>> setting.
>>
>> With that information dump, I'll try and get another update out in about
>> two
>> weeks depending on my schedule, which should include any progress I've
>> made
>> that I'm satisfied with. ?I will respond to individual emails as well.
>>
>>
>> Cheers,
>> Blair
>>
>> ? [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From alexandre.villers at cebc.cnrs.fr  Sat Sep 19 13:01:09 2009
From: alexandre.villers at cebc.cnrs.fr (Alexandre VILLERS)
Date: Sat, 19 Sep 2009 13:01:09 +0200
Subject: [R-sig-Geo] from vector to raster (2nd try) with R or GRASS (GRASS
	prefered...)
Message-ID: <4AB4B9F5.1090301@cebc.cnrs.fr>

Good morning,

I try to be clearer than I was in my precedent post and also copy this 
to the R SIG GEO.
On the one hand, I have a shape of lines representing roads
On the other, a GRASS region with a given resolution (250 x 250 meters 
pixel)

I would like to create a new raster map identical to my region settings 
(same resolution, extent, etc.) with the length of roads summed in each 
pixel.
Being a beginner, I tried different ways but got stuck quite rapidely.

Any help appreciated.


Alex

-- 
Alexandre Villers
PhD Student
Team "Biodiversity"
Centre d'Etudes Biologiques de Chiz?-CNRS UPR1934
79360 Beauvoir sur Niort

Phone +33 (0)5 49 09 96 13
Fax   +33 (0)5 49 09 65 26




__________ Information from ESET Mail Security, version of virus signature database 4439 (20090918) __________

The message was checked by ESET Mail Security.
http://www.eset.com


From huangykiz at 163.com  Sat Sep 19 15:28:07 2009
From: huangykiz at 163.com (huangykiz)
Date: Sat, 19 Sep 2009 21:28:07 +0800 (CST)
Subject: [R-sig-Geo] Pseudo r squares of the sptial autoregressive models in
	R
In-Reply-To: <alpine.LRH.2.00.0909160847030.25507@reclus.nhh.no>
References: <alpine.LRH.2.00.0909160847030.25507@reclus.nhh.no>
	<alpine.LRH.2.00.0909150919550.21975@reclus.nhh.no>
	<alpine.LRH.2.00.0909131956020.14721@reclus.nhh.no>
	<20177094.155931252834664499.JavaMail.coremail@bj163app22.163.com>
	<13298925.89931252979558931.JavaMail.coremail@app168.163.com>
	<alpine.LRH.2.00.0909150759370.21975@reclus.nhh.no>
	<3042482.1063441253082799482.JavaMail.coremail@bj163app113.163.com>
Message-ID: <33027291.273141253366887535.JavaMail.coremail@bj163app22.163.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090919/08918353/attachment.pl>

From edzer.pebesma at uni-muenster.de  Sat Sep 19 23:25:15 2009
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sat, 19 Sep 2009 23:25:15 +0200
Subject: [R-sig-Geo] First thoughts on spatio-temporal classes...
In-Reply-To: <522664f80909182153r1a18265fqb306440108d85e41@mail.gmail.com>
References: <6c35a4fc0909180920m19725f7by566939c877f19c20@mail.gmail.com>	<E52E2CC5-EBD0-4F00-BC78-242A18BECAD1@uclm.es>
	<522664f80909182153r1a18265fqb306440108d85e41@mail.gmail.com>
Message-ID: <4AB54C3B.8010409@uni-muenster.de>

Michael Sumner wrote:
> Hi, I just want to let you know that I'm hoping to update the trip
> (and tripEstimation) packages over the next few months so I'm very
> open to suggestions if you are interested.
>
> The main thing I want to do is to ensure that the capacity in sp for
> use of 3 or more coordinates (X, Y, Z, T,...) is well supported, and
> then simplify the implementation of trip on top of
> SpatialPointsDataFrame. It would be nice to make it less of a special
> case, and perhaps it would be best to apply it as a multipoint type
> (as presented in the ASDAR book). That might be a good way to handle
> collections (such as sets of individual trips).
>   
Mike, I'm not sure if this would fit your needs. In the multipoint type,
I believe a collection of points corresponds to a single feature,
meaning that the set corresponds to a single record in the attribute
table. This means that if your sensor in addition to x,y,t records e.g.
temperature and pressure, there's no place for that.

Best wishes,
--
Edzer
>
> Regards, Mike
>
>
> On Sat, Sep 19, 2009 at 8:15 AM, VIRGILIO GOMEZ RUBIO
> <Virgilio.Gomez at uclm.es> wrote:
>   
>> Hi Blair,
>>
>> I am visiting SAMSI this fall and I would like to get involved in this. Is
>> there any working group discussing this? If not, perhaps we could have a
>> chat with all the people interested in the area (samsi, duke, unc, ncsu,...)
>> and talk about this.
>>
>> Best wishes,
>>
>> Virgilio
>>
>> Sent from my iPhone
>>
>> On 18/09/2009, at 12:25, "Blair Christian" <blair.christian at gmail.com>
>> wrote:
>>
>>     
>>> Hi all,
>>>
>>> This is in response to an earlier post of mine inquiring about options for
>>> spatio-temporal classes in R.
>>>
>>> Thank you to all who replied for your interest in spatio-temporal data
>>> classes and methods.  There were many excellent comments in your emails.
>>>  I
>>> have been attending the SAMSI conference on space-time
>>> analysis<http://www.samsi.info/programs/2009spatialprogram.shtml>this
>>> week and have put together a summary (a working draft) of some
>>>
>>> thoughts<http://www.isds.duke.edu/%7Ejbc30/SpatioTemporal/workGroupComp.pdf>I
>>> have about classes.
>>>
>>> I also started a bare bones webpage:
>>> http://www.isds.duke.edu/~jbc30/SpatioTemporal/
>>>
>>> A also put up the latex source code and bib file I used if you are
>>> interested in making additions, corrections, or other.  Please email me
>>> any
>>> changes, and I'll maintain an RCS version of it.
>>>
>>> I'll put some plots up there when I have time to give you all an idea of
>>> what my context is.  Ironically, I can't ssh to the webserver from work
>>> (at
>>> the US EPA), so I can only update it from home.
>>>
>>>
>>> Here are some questions to you all:
>>>
>>> - What data do you have interest in analyzing?
>>>
>>> - What type of code do you have to contribute?
>>>
>>> - Are you interested in writing classes/methods?  If so, what is your
>>> background?  (I can provide several tutorials on S4 classes on the web
>>> that
>>> I found useful).
>>>
>>> I will pass along these related packages as being related to
>>> spatio-temporal
>>> data:
>>> trip (trip class extends SpatialPointsDataFrame), pastecs, tripEstimation,
>>> hydrosalinity(?), PBSmapping(?), RadioSonde, STARIMA(?), Bayesian Vector
>>> Accumulation(?), spBayes(?), INLA (Havard Rue website)
>>>
>>> I skimmed a fair number of time related packages (more than just timeDate
>>> and chron), including xts, zoo, (tseries, timeSeries, ts, its, etc) as
>>> well,
>>> and came to the conclusion that it would best to allow either a time
>>> series
>>> type package (regular or irregular times) as well as a package for
>>> continuous time (functional data, like paths of animals, in the trip
>>> library), and I'm a fan of the fda
>>> library<http://ego.psych.mcgill.ca/misc/fda/>.
>>> It would be nice to have easy spline/FDA access for datasets where time is
>>> collected in a continuous manner rather than in the usual arima grid
>>> setting.
>>>
>>> With that information dump, I'll try and get another update out in about
>>> two
>>> weeks depending on my schedule, which should include any progress I've
>>> made
>>> that I'm satisfied with.  I will respond to individual emails as well.
>>>
>>>
>>> Cheers,
>>> Blair
>>>
>>>   [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>       
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>     
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de/
http://www.springer.com/978-0-387-78170-9 e.pebesma at wwu.de


From b.rowlingson at lancaster.ac.uk  Sun Sep 20 00:20:50 2009
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sat, 19 Sep 2009 23:20:50 +0100
Subject: [R-sig-Geo] First thoughts on spatio-temporal classes...
In-Reply-To: <4AB54C3B.8010409@uni-muenster.de>
References: <6c35a4fc0909180920m19725f7by566939c877f19c20@mail.gmail.com>
	<E52E2CC5-EBD0-4F00-BC78-242A18BECAD1@uclm.es>
	<522664f80909182153r1a18265fqb306440108d85e41@mail.gmail.com>
	<4AB54C3B.8010409@uni-muenster.de>
Message-ID: <d8ad40b50909191520g28e81aa9xd3e89af38f9d7f64@mail.gmail.com>

On Sat, Sep 19, 2009 at 10:25 PM, Edzer Pebesma
<edzer.pebesma at uni-muenster.de> wrote:

> Mike, I'm not sure if this would fit your needs. In the multipoint type,
> I believe a collection of points corresponds to a single feature,
> meaning that the set corresponds to a single record in the attribute
> table. This means that if your sensor in addition to x,y,t records e.g.
> temperature and pressure, there's no place for that.
>

 I think you need a special class for a set of trips. It would inherit
from SpatialPointsDataFrame, so each observation is a point at (x,y)
with a T variable and its measurement(s) Z1, Z2, etc, and also a trip
identifier I. Then you could have another data frame object with
per-trip data - perhaps the name of the ship that did the surveys and
so on, or the start/end date of the trip (useful if your data only
records the three days whales were seen out of the 250 people were
looking for them). This data frame could be part of the same object.

 Then you'd have a method that created a SpatialLinesDataFrame object,
with one row per trip, on your trip set object. You'd use this for
plotting tracks, and it would get columns from the trip metadata table
so you could colour it by ship name or trip number. You might also
have some kind of tripApply function for computing per-trip
statistics, such as the total or mean measurements.

 Perhaps what you might want is a Spatial{Lines,Points}List data
structure? Each element having a Line geometry and a number of
measurements (the same number of measurements as points in the Line
geometry). This is a bit of a weird thing that I don't think exists in
the OGC Simple Features system since it's a bit "ragged" and so not a
straightforward thing for a RDBMS to support.

  When thinking about spatial data in R, I consider how it would be
done in PostGIS. I think you'd do as above - have a table of each
measurement with a linking identifier, and then on-the-fly compute
track geometry. It might even be possible to do it as a VIEW in
PostGIS, something like:

CREATE VIEW tracks as select area,MakeLine(the_geom) as the_geom from
(select * from observations order by time) as m group by trip

 - but that's a bit of a guess.... and it's late...

 I think you'd need a different structure if your locations are fixed
(such as fixed sampling stations) and your measurements are taken over
time...

Barry


From mdsumner at gmail.com  Sun Sep 20 01:08:33 2009
From: mdsumner at gmail.com (Michael Sumner)
Date: Sun, 20 Sep 2009 09:08:33 +1000
Subject: [R-sig-Geo] First thoughts on spatio-temporal classes...
In-Reply-To: <d8ad40b50909191520g28e81aa9xd3e89af38f9d7f64@mail.gmail.com>
References: <6c35a4fc0909180920m19725f7by566939c877f19c20@mail.gmail.com>
	<E52E2CC5-EBD0-4F00-BC78-242A18BECAD1@uclm.es>
	<522664f80909182153r1a18265fqb306440108d85e41@mail.gmail.com>
	<4AB54C3B.8010409@uni-muenster.de>
	<d8ad40b50909191520g28e81aa9xd3e89af38f9d7f64@mail.gmail.com>
Message-ID: <522664f80909191608m287979a8h3f602b39badfbb2c@mail.gmail.com>

That's true, mulitpoints require every attribute to be a coordinate,
and the lines aspect is a bit of a red herring. There is an unknown
geometry that underlies the points, and presenting them as if movement
was linear and constant between them is a lie. They really are point
samples from an otherwise unknown continuous process - the functions
in tripEstimation attempt to provide a more realistic representation
by constraining the movements to a region in space - I have some code
in there that handles a set of density estimations as if they were the
points in a trip, but it's not obvious to me how to usefully convert
that to sp objects.

I like Barry's idea of allowing conversion to lines, which could be
used only as an explicit step for visualization or analysis. Trip
currently plots a trip object as a set of lines, and that's probably
not the right thing to do. I think the general rule should be to make
trip as simple an extension as possible, and add helper functions for
conversions to more derived classes.

Thanks for the thoughts!

Regards, Mike.

On Sun, Sep 20, 2009 at 8:20 AM, Barry Rowlingson
<b.rowlingson at lancaster.ac.uk> wrote:
> On Sat, Sep 19, 2009 at 10:25 PM, Edzer Pebesma
> <edzer.pebesma at uni-muenster.de> wrote:
>
>> Mike, I'm not sure if this would fit your needs. In the multipoint type,
>> I believe a collection of points corresponds to a single feature,
>> meaning that the set corresponds to a single record in the attribute
>> table. This means that if your sensor in addition to x,y,t records e.g.
>> temperature and pressure, there's no place for that.
>>
>
> ?I think you need a special class for a set of trips. It would inherit
> from SpatialPointsDataFrame, so each observation is a point at (x,y)
> with a T variable and its measurement(s) Z1, Z2, etc, and also a trip
> identifier I. Then you could have another data frame object with
> per-trip data - perhaps the name of the ship that did the surveys and
> so on, or the start/end date of the trip (useful if your data only
> records the three days whales were seen out of the 250 people were
> looking for them). This data frame could be part of the same object.
>
> ?Then you'd have a method that created a SpatialLinesDataFrame object,
> with one row per trip, on your trip set object. You'd use this for
> plotting tracks, and it would get columns from the trip metadata table
> so you could colour it by ship name or trip number. You might also
> have some kind of tripApply function for computing per-trip
> statistics, such as the total or mean measurements.
>
> ?Perhaps what you might want is a Spatial{Lines,Points}List data
> structure? Each element having a Line geometry and a number of
> measurements (the same number of measurements as points in the Line
> geometry). This is a bit of a weird thing that I don't think exists in
> the OGC Simple Features system since it's a bit "ragged" and so not a
> straightforward thing for a RDBMS to support.
>
> ?When thinking about spatial data in R, I consider how it would be
> done in PostGIS. I think you'd do as above - have a table of each
> measurement with a linking identifier, and then on-the-fly compute
> track geometry. It might even be possible to do it as a VIEW in
> PostGIS, something like:
>
> CREATE VIEW tracks as select area,MakeLine(the_geom) as the_geom from
> (select * from observations order by time) as m group by trip
>
> ?- but that's a bit of a guess.... and it's late...
>
> ?I think you'd need a different structure if your locations are fixed
> (such as fixed sampling stations) and your measurements are taken over
> time...
>
> Barry
>


From Bjarke.Christensen at sydbank.dk  Mon Sep 21 10:09:31 2009
From: Bjarke.Christensen at sydbank.dk (Bjarke Christensen)
Date: Mon, 21 Sep 2009 10:09:31 +0200
Subject: [R-sig-Geo] predict.spautolm
Message-ID: <OFCC0D647C.E994D1F4-ONC1257638.002CAF8C-C1257638.002CE03C@bdpnet.dk>


I am looking for a function to make out of sample predictions using
spautolm. The question has been asked before, two years ago, but with no
response: http://finzi.psych.upenn.edu/R/Rhelp02/archive/113162.html.
Certainly, someone must have needed one since?

Alternatively, does anyone have a reference or any hints wrt making such a
function? Is there perhaps some reason not to do it?

Thanks in advance,
Bjarke Christensen


From Roger.Bivand at nhh.no  Mon Sep 21 11:20:23 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 21 Sep 2009 11:20:23 +0200 (CEST)
Subject: [R-sig-Geo] predict.spautolm
In-Reply-To: <OFCC0D647C.E994D1F4-ONC1257638.002CAF8C-C1257638.002CE03C@bdpnet.dk>
References: <OFCC0D647C.E994D1F4-ONC1257638.002CAF8C-C1257638.002CE03C@bdpnet.dk>
Message-ID: <alpine.LRH.2.00.0909211113460.8279@reclus.nhh.no>

On Mon, 21 Sep 2009, Bjarke Christensen wrote:

>
> I am looking for a function to make out of sample predictions using
> spautolm. The question has been asked before, two years ago, but with no
> response: http://finzi.psych.upenn.edu/R/Rhelp02/archive/113162.html.
> Certainly, someone must have needed one since?

Clearly not. Predict using just the regression coefficients (with 
non-spatial weights if used for fitting). If you want simulations around 
those point estimates, you can introduce spatial autocorrelation with the 
lambda term, but lambda will not impact the predictions unless the model 
was misspecified, I believe.

>
> Alternatively, does anyone have a reference or any hints wrt making such a
> function? Is there perhaps some reason not to do it?
>

It could be done, but isn't a high priority - unless you are using 
non-spatial weights, the speculative predict() method for sarlm objects 
from errorsarlm() will manage OK.

Hope this helps,

Roger

> Thanks in advance,
> Bjarke Christensen
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From zll243_2006 at 163.com  Mon Sep 21 14:44:51 2009
From: zll243_2006 at 163.com (jessica243)
Date: Mon, 21 Sep 2009 20:44:51 +0800
Subject: [R-sig-Geo] Fw: Help
Message-ID: <000f01ca3ab9$5015fee0$0271010a@hpa872dcb4f14f>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090921/651abdd0/attachment.pl>

From yud at mail.montclair.edu  Mon Sep 21 17:21:51 2009
From: yud at mail.montclair.edu (Danlin Yu)
Date: Mon, 21 Sep 2009 11:21:51 -0400
Subject: [R-sig-Geo] Fw: Help
In-Reply-To: <000f01ca3ab9$5015fee0$0271010a@hpa872dcb4f14f>
References: <000f01ca3ab9$5015fee0$0271010a@hpa872dcb4f14f>
Message-ID: <4AB79A0F.1070708@mail.montclair.edu>

Jessica:

Do you mean to load the dataset meuse.grid? If so,

data(meuse.grid)

shall be able to do it.

As for generate the meuse.grid from dataset meuse, the immediate thing 
that comes to my mind is that you might want to obtain the coordinates 
from meuse, and then try to transform the points object to a grid object.

Just some quick thoughts, hope this helps.

Danlin

jessica243 ??:
> ----- Original Message ----- 
> From: jessica243 
> To: r-sig-geo at stat.math.ethz.ch 
> Sent: Monday, September 21, 2009 8:28 PM
> Subject: Help
>
>
> Dear everyone:
> In my study R,I ran into a problem.I do not know how let "meuse" data generate "meuse.grid" data?
>
> Hope this helps,
>
> jessica243
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
___________________________________________
Danlin Yu, Ph.D.
Assistant Professor of GIS and Urban Geography
Department of Earth & Environmental Studies
Montclair State University
Montclair, NJ, 07043
Tel: 973-655-4313
Fax: 973-655-4072
email: yud at mail.montclair.edu
webpage: csam.montclair.edu/~yu


From p.hiemstra at geo.uu.nl  Mon Sep 21 20:45:07 2009
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Mon, 21 Sep 2009 20:45:07 +0200
Subject: [R-sig-Geo] Fw: Help
In-Reply-To: <4AB79A0F.1070708@mail.montclair.edu>
References: <000f01ca3ab9$5015fee0$0271010a@hpa872dcb4f14f>
	<4AB79A0F.1070708@mail.montclair.edu>
Message-ID: <4AB7C9B3.6090000@geo.uu.nl>

Hi,

Loading the meuse.grid dataset is done using:

data(meuse.grid)

to generate meuse.grid from meuse use something like:

data(meuse)
coordinates(meuse) = ~x+y
meuse_grid = spsample(meuse, type = "regular", cellsize = c(40,40))
gridded(meuse_grid) = TRUE

cheers and good luck,
Paul


Danlin Yu schreef:
> Jessica:
>
> Do you mean to load the dataset meuse.grid? If so,
>
> data(meuse.grid)
>
> shall be able to do it.
>
> As for generate the meuse.grid from dataset meuse, the immediate thing 
> that comes to my mind is that you might want to obtain the coordinates 
> from meuse, and then try to transform the points object to a grid object.
>
> Just some quick thoughts, hope this helps.
>
> Danlin
>
> jessica243 ??:
>> ----- Original Message ----- From: jessica243 To: 
>> r-sig-geo at stat.math.ethz.ch Sent: Monday, September 21, 2009 8:28 PM
>> Subject: Help
>>
>>
>> Dear everyone:
>> In my study R,I ran into a problem.I do not know how let "meuse" data 
>> generate "meuse.grid" data?
>>
>> Hope this helps,
>>
>> jessica243
>>
>>     [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>   
>


From tom.gottfried at wzw.tum.de  Tue Sep 22 13:08:00 2009
From: tom.gottfried at wzw.tum.de (Tom Gottfried)
Date: Tue, 22 Sep 2009 13:08:00 +0200
Subject: [R-sig-Geo] spplot without legend
Message-ID: <4AB8B010.4020308@wzw.tum.de>

Hi list,

is there any way to draw a map with spplot() WITHOUT a legend?

By the way: is there any documentation available for the function mapLegendGrob()? I mean besides
the usage and arguments section in the relevant help page. I'm sorry I can't find it.

Thanks in advance!

Tom


From Roger.Bivand at nhh.no  Tue Sep 22 14:48:27 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 22 Sep 2009 14:48:27 +0200 (CEST)
Subject: [R-sig-Geo] spplot without legend
In-Reply-To: <4AB8B010.4020308@wzw.tum.de>
References: <4AB8B010.4020308@wzw.tum.de>
Message-ID: <alpine.LRH.2.00.0909221444180.14075@reclus.nhh.no>

On Tue, 22 Sep 2009, Tom Gottfried wrote:

> Hi list,
>
> is there any way to draw a map with spplot() WITHOUT a legend?

library(sp)
data(meuse.grid)
gridded(meuse.grid)=~x+y
spplot(meuse.grid, "dist")
library(lattice)
?levelplot
spplot(meuse.grid, "dist", colorkey=FALSE)


>
> By the way: is there any documentation available for the function 
> mapLegendGrob()? I mean besides the usage and arguments section in the 
> relevant help page. I'm sorry I can't find it.

http://r-spatial.sourceforge.net/gallery/#fig04.R
http://www.nceas.ucsb.edu/scicomp/GISSeminar/UseCases/MapProdWithRGraphics/OneMapProdWithRGraphics.html

are two examples - the function is for the placing of North arrows and 
similar items.

Roger

>
> Thanks in advance!
>
> Tom
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From tom.gottfried at wzw.tum.de  Tue Sep 22 16:45:41 2009
From: tom.gottfried at wzw.tum.de (Tom Gottfried)
Date: Tue, 22 Sep 2009 16:45:41 +0200
Subject: [R-sig-Geo] spplot without legend
In-Reply-To: <alpine.LRH.2.00.0909221444180.14075@reclus.nhh.no>
References: <4AB8B010.4020308@wzw.tum.de>
	<alpine.LRH.2.00.0909221444180.14075@reclus.nhh.no>
Message-ID: <4AB8E315.7000306@wzw.tum.de>

Thanks for the hint for the "colorkey" argument!

Is there an equivalent for point data?
I tried

data(meuse.grid)
coordinates(meuse.grid) <- ~x+y
?xyplot
spplot(meuse.grid, "dist", auto.key=TRUE)
spplot(meuse.grid, "dist", auto.key=FALSE)

with no effect.

Thanks,
Tom

Roger Bivand schrieb:
> On Tue, 22 Sep 2009, Tom Gottfried wrote:
> 
>> Hi list,
>>
>> is there any way to draw a map with spplot() WITHOUT a legend?
> 
> library(sp)
> data(meuse.grid)
> gridded(meuse.grid)=~x+y
> spplot(meuse.grid, "dist")
> library(lattice)
> ?levelplot
> spplot(meuse.grid, "dist", colorkey=FALSE)
> 
> 
>>
>> By the way: is there any documentation available for the function
>> mapLegendGrob()? I mean besides the usage and arguments section in the
>> relevant help page. I'm sorry I can't find it.
> 
> http://r-spatial.sourceforge.net/gallery/#fig04.R
> http://www.nceas.ucsb.edu/scicomp/GISSeminar/UseCases/MapProdWithRGraphics/OneMapProdWithRGraphics.html
> 
> 
> are two examples - the function is for the placing of North arrows and
> similar items.
> 
> Roger
> 
>>
>> Thanks in advance!
>>
>> Tom
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>


From p.hiemstra at geo.uu.nl  Tue Sep 22 16:51:49 2009
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Tue, 22 Sep 2009 16:51:49 +0200
Subject: [R-sig-Geo] spplot without legend
In-Reply-To: <4AB8B010.4020308@wzw.tum.de>
References: <4AB8B010.4020308@wzw.tum.de>
Message-ID: <4AB8E485.8070709@geo.uu.nl>

Tom Gottfried schreef:
> Hi list,
>
> is there any way to draw a map with spplot() WITHOUT a legend?
>
> By the way: is there any documentation available for the function mapLegendGrob()? I mean besides
> the usage and arguments section in the relevant help page. I'm sorry I can't find it.
>
> Thanks in advance!
>
> Tom
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   
Hi,

See also:

http://wiki.r-project.org/rwiki/doku.php?id=tips:spatial-data:spatial_data_visualization

At the bottom of the page you question is answered.

cheers,
Paul


From enrico.guastaldi at gmail.com  Tue Sep 22 17:40:12 2009
From: enrico.guastaldi at gmail.com (Enrico Guastaldi)
Date: Tue, 22 Sep 2009 17:40:12 +0200
Subject: [R-sig-Geo] [R-sig-geo] Interpolation of measures with measurement
	errors
Message-ID: <7ce8d7d30909220840h63c3b99asfe3f82c588774afa@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090922/99977d79/attachment.pl>

From Roger.Bivand at nhh.no  Tue Sep 22 18:05:48 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 22 Sep 2009 18:05:48 +0200 (CEST)
Subject: [R-sig-Geo] spplot without legend
In-Reply-To: <4AB8E315.7000306@wzw.tum.de>
References: <4AB8B010.4020308@wzw.tum.de>
	<alpine.LRH.2.00.0909221444180.14075@reclus.nhh.no>
	<4AB8E315.7000306@wzw.tum.de>
Message-ID: <alpine.LRH.2.00.0909221748510.14824@reclus.nhh.no>

On Tue, 22 Sep 2009, Tom Gottfried wrote:

> Thanks for the hint for the "colorkey" argument!
>
> Is there an equivalent for point data?
> I tried
>
> data(meuse.grid)
> coordinates(meuse.grid) <- ~x+y
> ?xyplot
> spplot(meuse.grid, "dist", auto.key=TRUE)
> spplot(meuse.grid, "dist", auto.key=FALSE)
>
> with no effect.

As a hack:

spplot(meuse.grid, "dist", key=list(lines=TRUE, col="transparent"))

but you're right that argument passing against the run of the function 
authors' intentions isn't easy (lattice graphics really expect a key or 
legend). auto.key= gets passed through but a key gets generated anyway in 
sp:::fill.call.groups(), if a key isn't passed in the dots arguments, in 
which case it is respected. I've added a condition to 
sp:::fill.call.groups() which will be in the next release, so then 
auto.key=FALSE will work. Committed to r-spatial CVS.

Roger

Roger

>
> Thanks,
> Tom
>
> Roger Bivand schrieb:
>> On Tue, 22 Sep 2009, Tom Gottfried wrote:
>>
>>> Hi list,
>>>
>>> is there any way to draw a map with spplot() WITHOUT a legend?
>>
>> library(sp)
>> data(meuse.grid)
>> gridded(meuse.grid)=~x+y
>> spplot(meuse.grid, "dist")
>> library(lattice)
>> ?levelplot
>> spplot(meuse.grid, "dist", colorkey=FALSE)
>>
>>
>>>
>>> By the way: is there any documentation available for the function
>>> mapLegendGrob()? I mean besides the usage and arguments section in the
>>> relevant help page. I'm sorry I can't find it.
>>
>> http://r-spatial.sourceforge.net/gallery/#fig04.R
>> http://www.nceas.ucsb.edu/scicomp/GISSeminar/UseCases/MapProdWithRGraphics/OneMapProdWithRGraphics.html
>>
>>
>> are two examples - the function is for the placing of North arrows and
>> similar items.
>>
>> Roger
>>
>>>
>>> Thanks in advance!
>>>
>>> Tom
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From horning at amnh.org  Tue Sep 22 20:28:57 2009
From: horning at amnh.org (Ned Horning)
Date: Tue, 22 Sep 2009 14:28:57 -0400
Subject: [R-sig-Geo] Raster package stackFromFiles
Message-ID: <4AB91769.8070807@amnh.org>

Hi - I have a script that uses stackFromFiles that used to be part of 
the Raster package but it's not any more. Ca anyone out there let me 
know the new way to do this:

sat_image <- stackFromFiles(c(inImage), c(bandlist[1]))
for (y in 2:numbands) {
  sat_image <- addFiles(sat_image, c(inImage), c(bandlist[y]))
}

Any help is appreciated.

Ned


From r.hijmans at gmail.com  Tue Sep 22 22:19:14 2009
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 22 Sep 2009 13:19:14 -0700
Subject: [R-sig-Geo] Raster package stackFromFiles
In-Reply-To: <4AB91769.8070807@amnh.org>
References: <4AB91769.8070807@amnh.org>
Message-ID: <dc22b2570909221319x2d2824cfw53249a2e469e78dd@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090922/f08447da/attachment.pl>

From jutesoro at yahoo.com  Wed Sep 23 00:42:28 2009
From: jutesoro at yahoo.com (Julius Tesoro)
Date: Tue, 22 Sep 2009 15:42:28 -0700 (PDT)
Subject: [R-sig-Geo] Zooming into a Specific Area
Message-ID: <306192.48510.qm@web57613.mail.re1.yahoo.com>

Hello

I have three shapefiles loaded in R, say, a line shapefile of faults in New Zealand, the administrative districts of Fiordland (province of New Zealand) and New Zealand earthquakes. I want to zoom into a specific area so that I can select the earthquake points through select.spatial. How do I do zoom into this area? Is there other way where I can select a polygon by clicking and store it in  a vector?


From jutesoro at yahoo.com  Wed Sep 23 00:57:46 2009
From: jutesoro at yahoo.com (Julius Tesoro)
Date: Tue, 22 Sep 2009 15:57:46 -0700 (PDT)
Subject: [R-sig-Geo] Zooming into a specific area
Message-ID: <893383.9021.qm@web57601.mail.re1.yahoo.com>

Hello

I have three shapefiles loaded in R, say, a line shapefile of faults in New Zealand, the administrative districts of Fiordland (province of New Zealand) and New Zealand earthquakes. I want to zoom into a specific area so that I can select the earthquake points through select.spatial. How do I do zoom into this area? Is there other way where I can select a polygon by clicking and store it in  a vector?


From Zhongkui.Luo at csiro.au  Wed Sep 23 02:08:19 2009
From: Zhongkui.Luo at csiro.au (Zhongkui.Luo at csiro.au)
Date: Wed, 23 Sep 2009 10:08:19 +1000
Subject: [R-sig-Geo] FW: interpolation in a map
Message-ID: <3DC072BBBBBEAF4C9E18F52448B44985018C5D44DB@exvic-mbx05.nexus.csiro.au>

Dear all,

Thanks very much for Thibaut's help first!

Dr. Thibaut and Other colleagues have gave a well solution for drawing filled contours in an irregular map (See the following emails).
However, the drawing region looks like must be already in the map database, such as the whole USA  and AUS. 
If the region is not in the initial map, how to use this region's shapefile to get the map with filled contours?

The data might be like this:

Data1: a shapefile call "xxx.shp", e.g., a catchment.
Data2: a txt file with three columns: x, longitude; y,latitude;z, variable (e.g., rainfall).

This work would like be very easy in GIS, but how is it done in R?

Thanks very much for that!

Best,

Zachary



-----Original Message-----
From: Jombart, Thibaut [mailto:t.jombart at imperial.ac.uk] 
Sent: Tuesday, 22 September 2009 11:21 PM
To: Luo, Zhongkui (CLW, Black Mountain)
Subject: RE: interpolation in a map

Hi Zachary (or Zhongkui?), 

I think I would make the proper shapefile in a GIS, then import it in R using maptool and use the same method as for Australia. It it also possible, I guess, to build your polygon by hand in R, but in think much more cumbersome.

Note that a ML is specially dedicated to this kind of issue:
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Best,

Thibaut.
________________________________________
From: prvs=5094c3904=Zhongkui.Luo at csiro.au [prvs=5094c3904=Zhongkui.Luo at csiro.au] On Behalf Of Zhongkui.Luo at csiro.au [Zhongkui.Luo at csiro.au]
Sent: 22 September 2009 10:53
To: Jombart, Thibaut
Subject: RE: interpolation in a map

Dear Thibaut,

Sorry to bother you again!

Your method can work well at whole Australia. That's just I want.
But how can I conduct the similar process at a specific region inside Australia.
It looks like that Australia is not divided into different subregions, such as states or counties, and just a whole map of AUS in the package.
So there are no other locs.

At this situation, the question is:
How to add subregions to a map according to corresponding shapefiles?
Does R has specific function to do this? Or do you have some ideas or information to deal with it?

Thanks very much for that.

Best,

Zachary


-----Original Message-----
From: Jombart, Thibaut [mailto:t.jombart at imperial.ac.uk]
Sent: Sunday, 20 September 2009 10:54 PM
To: Luo, Zhongkui (CLW, Black Mountain); adegenet-forum at lists.r-forge.r-project.org
Subject: RE: interpolation in a map

Zhongkui.Luo at csiro.au wrote:
> Hi,
>
> Sorry for the bother. A R problem looks for your suggestion.
>
> I want to draw a figure with filled contour in an irregular map.
>
> But I found that the contours overlap the boundaries of the map, and also some regions in the map were not filled.
>
> I used the following R code:
>
>
> Map<-readShapeSpatial("data1") # data1, a shapefile, the whole Australian map with boundary.
> plot(Map)
> data2.li<-interp(data2$x,data2$y,data2$z) #data2, txt file with three columns: x, longitude; y, latitude; z, variable (e.g., rainfall)
> filled.contour(data2.li, color=topo.colors, add=TRUE)
>
>
> Are there any R functions can be used to limit the filled contours just inside the map (no overlap and no blank)?
>
> Do you have any ideas to deal with this problem? Thanks very much for that!
>
> Best,
>
>
>
> Zhongkui Luo
>
> PhD candidate
>
> CSIRO Land & Water, Butler Lab.
>
> Clunies Ross Street, Acton
>
> Canberra, ACT 2601, Australia
>
> Ph: +61 2 6246 5594  E_Mail: Zhongkui.luo at csiro.au
>
>
>

Dear Luo,

I am afraid your post is off-topic for this ML. Also note that it is generally considered as impolite to post the same question at the same time to different mailing lists, as you did here. Lastly, you could find your answer in one command line:
RSiteSearch("blank map contour")

which takes you to relevant results found in R mailing lists archives, where the solution has been posted by Duncan Murdoch last year.

However, that kind of issue may occur to people analysing genetic data, for instance when geographically mapping the results of a multivariate analysis. Here is a ready-to-use solution:

##########
library(akima)
library(maps)
library(mapdata)

GRID.RES <- 500

## original values
x <- seq(100,170,le=10) + runif(10,-5,5)
y <- seq(-50,0,le=10) + runif(10,-5,5)
z <- x*y + rnorm(length(x),2)

## interpolation using akima
x0 <- seq(100,170,le=GRID.RES)
y0 <- seq(-50,0,le=GRID.RES)
z.hat <- interp(x,y, z, xo=x0, yo=y0, linear = FALSE, extrap=TRUE)

## find loc in australia, set others to NA
myGrid <- expand.grid(x0, y0)
temp <- map.where(x=myGrid[,1], y=myGrid[,2])
toKeep <- grep("australia",temp, ignore.case=TRUE)
toRemove <- setdiff(1:length(z.hat$z), toKeep)
z.hat$z[toRemove] <- NA

## plot
image(z.hat)
map(add=TRUE, lwd=3)
contour(z.hat,add=TRUE)
############

The quality of the result depends on the grid size (GRID.RES); GRID.RES=1000 takes a few seconds on my computer but provides publication-quality figures. For genetic data analysis, 'z' could be values of a principal component to be mapped, while x and y would be spatial coordinates of samples.

Best,

Thibaut.

--
######################################
Dr Thibaut JOMBART
MRC Centre for Outbreak Analysis and Modelling
Department of Infectious Disease Epidemiology
Imperial College - Faculty of Medicine
St Mary's Campus
Norfolk Place
London W2 1PG
United Kingdom
Tel. : 0044 (0)20 7594 3658
t.jombart at imperial.ac.uk
http://www1.imperial.ac.uk/medicine/people/t.jombart/
http://adegenet.r-forge.r-project.org/


From b.malone at usyd.edu.au  Wed Sep 23 08:57:21 2009
From: b.malone at usyd.edu.au (Brendan Malone)
Date: Wed, 23 Sep 2009 16:57:21 +1000
Subject: [R-sig-Geo] Convert SpatialPointsDataFrame to a SpatialGridDataFrame
Message-ID: <9C8E79CB30164942B62DB784D30718D81A374A@EXPRSV03.mcs.usyd.edu.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090923/c1a97b93/attachment.pl>

From Roger.Bivand at nhh.no  Wed Sep 23 09:22:58 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 23 Sep 2009 09:22:58 +0200 (CEST)
Subject: [R-sig-Geo] Convert SpatialPointsDataFrame to a
 SpatialGridDataFrame
In-Reply-To: <9C8E79CB30164942B62DB784D30718D81A374A@EXPRSV03.mcs.usyd.edu.au>
References: <9C8E79CB30164942B62DB784D30718D81A374A@EXPRSV03.mcs.usyd.edu.au>
Message-ID: <alpine.LRH.2.00.0909230914060.17516@reclus.nhh.no>

On Wed, 23 Sep 2009, Brendan Malone wrote:

> Hi everyone,
>
>
>
> I would like to know a good way in which to convert a
> SpatialPointsDataFrame to a SpatialGridDataFrame.
>
> The reason that I ask is that when I change the CRS of a
> SpatialGridDataFrame, I inadvertently create a point data frame with the
> new CRS.

Your input data are in geographical coordinates, and you are projecting 
(no datum transformation) to UTM. This inevitably means that while the 
input points are evenly spaced, the projected points are not, and do not 
constitute a regular grid (see any introduction to projections). To get a 
regular grid out, you will have to warp, that is interpolate, to a regular 
grid from the irregular points that you have generated.

Either use an interpolator such as idw() in gstat (see the task view for 
more), or use for example gdal_warp externally.

This is getting to be a FAQ, isn't it? Could someone put it in the R-wiki 
under spatial data?

Roger

>
>
>
> To better illustrate my problem:
>
>
>
> I have a grid file
>
>
>
> grid90m <- readGDAL("edgeroi_dem.asc")
>
> names(grid90m) <- "edgeroi_dem"
>
>
>
> I give it a CRS
>
>
>
> proj4string(grid90m)<- CRS("+init=epsg:4283")
>
>
>
> Then I change it to a projected CRS
>
>
>
> grid90.UTM <- spTransform(grid90m, CRS("+init=epsg:32755"))
>
>
>
> Get a summary
>
> summary(grid.UTM)
>
> Object of class SpatialPointsDataFrame
>
> Coordinates:
>
>      min       max
>
> x  738742  790718.3
>
> y 6643860 6679923.8
>
> Is projected: TRUE
>
> proj4string :
>
> [+init=epsg:32755 +proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84
> +units=m +no_defs +towgs84=0,0,0]
>
> Number of points: 220805
>
> Data attributes:
>
>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
>
> 180.2   200.7   225.0   254.1   280.6   988.6
>
>
>
> I have tried various ways to convert this points file to grid via a few
> methods with resultant failure. Essentially I need to input some measure
> of the pixel size.
>
> My original thoughts were that the problem was to do with the
> asymmetrical shape of my DEM layer. This may be true, but it would be
> useful if people could provide some ideas on how to get around this.
>
>
>
> Cheers,
>
>
>
> Brendan Malone
>
> PhD candidate
>
> University of Sydney
>
>
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From p.hiemstra at geo.uu.nl  Wed Sep 23 10:22:21 2009
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Wed, 23 Sep 2009 10:22:21 +0200
Subject: [R-sig-Geo] Zooming into a specific area
In-Reply-To: <893383.9021.qm@web57601.mail.re1.yahoo.com>
References: <893383.9021.qm@web57601.mail.re1.yahoo.com>
Message-ID: <4AB9DABD.40407@geo.uu.nl>

Julius Tesoro wrote:
> Hello
>
> I have three shapefiles loaded in R, say, a line shapefile of faults in New Zealand, the administrative districts of Fiordland (province of New Zealand) and New Zealand earthquakes. I want to zoom into a specific area so that I can select the earthquake points through select.spatial. How do I do zoom into this area? Is there other way where I can select a polygon by clicking and store it in  a vector?
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   
Hi,

You can use the xlim and ylim parameters in spplot to zoom in.

cheers,
Paul

-- 
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone:  +3130 274 3113 Mon-Tue
Phone:  +3130 253 5773 Wed-Fri
http://intamap.geo.uu.nl/~paul


From p.hiemstra at geo.uu.nl  Wed Sep 23 10:44:02 2009
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Wed, 23 Sep 2009 10:44:02 +0200
Subject: [R-sig-Geo] Convert SpatialPointsDataFrame to a
	SpatialGridDataFrame
In-Reply-To: <alpine.LRH.2.00.0909230914060.17516@reclus.nhh.no>
References: <9C8E79CB30164942B62DB784D30718D81A374A@EXPRSV03.mcs.usyd.edu.au>
	<alpine.LRH.2.00.0909230914060.17516@reclus.nhh.no>
Message-ID: <4AB9DFD2.2040607@geo.uu.nl>

Hi,

I'm adding a section on changing coordinate systems for Spatial objects 
on the r tips wiki, including a section on reprojecting grids:

http://wiki.r-project.org/rwiki/doku.php?id=tips:spatial-data:change_crs

I'm still working on it right now, but everyone is welcome to add to it 
later this day.

cheers,
Paul

Roger Bivand wrote:
> On Wed, 23 Sep 2009, Brendan Malone wrote:
>
>> Hi everyone,
>>
>>
>>
>> I would like to know a good way in which to convert a
>> SpatialPointsDataFrame to a SpatialGridDataFrame.
>>
>> The reason that I ask is that when I change the CRS of a
>> SpatialGridDataFrame, I inadvertently create a point data frame with the
>> new CRS.
>
> Your input data are in geographical coordinates, and you are 
> projecting (no datum transformation) to UTM. This inevitably means 
> that while the input points are evenly spaced, the projected points 
> are not, and do not constitute a regular grid (see any introduction to 
> projections). To get a regular grid out, you will have to warp, that 
> is interpolate, to a regular grid from the irregular points that you 
> have generated.
>
> Either use an interpolator such as idw() in gstat (see the task view 
> for more), or use for example gdal_warp externally.
>
> This is getting to be a FAQ, isn't it? Could someone put it in the 
> R-wiki under spatial data?
>
> Roger
>
>>
>>
>>
>> To better illustrate my problem:
>>
>>
>>
>> I have a grid file
>>
>>
>>
>> grid90m <- readGDAL("edgeroi_dem.asc")
>>
>> names(grid90m) <- "edgeroi_dem"
>>
>>
>>
>> I give it a CRS
>>
>>
>>
>> proj4string(grid90m)<- CRS("+init=epsg:4283")
>>
>>
>>
>> Then I change it to a projected CRS
>>
>>
>>
>> grid90.UTM <- spTransform(grid90m, CRS("+init=epsg:32755"))
>>
>>
>>
>> Get a summary
>>
>> summary(grid.UTM)
>>
>> Object of class SpatialPointsDataFrame
>>
>> Coordinates:
>>
>>      min       max
>>
>> x  738742  790718.3
>>
>> y 6643860 6679923.8
>>
>> Is projected: TRUE
>>
>> proj4string :
>>
>> [+init=epsg:32755 +proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84
>> +units=m +no_defs +towgs84=0,0,0]
>>
>> Number of points: 220805
>>
>> Data attributes:
>>
>>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
>>
>> 180.2   200.7   225.0   254.1   280.6   988.6
>>
>>
>>
>> I have tried various ways to convert this points file to grid via a few
>> methods with resultant failure. Essentially I need to input some measure
>> of the pixel size.
>>
>> My original thoughts were that the problem was to do with the
>> asymmetrical shape of my DEM layer. This may be true, but it would be
>> useful if people could provide some ideas on how to get around this.
>>
>>
>>
>> Cheers,
>>
>>
>>
>> Brendan Malone
>>
>> PhD candidate
>>
>> University of Sydney
>>
>>
>>
>>
>>
>>
>>     [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>


-- 
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone:  +3130 274 3113 Mon-Tue
Phone:  +3130 253 5773 Wed-Fri
http://intamap.geo.uu.nl/~paul


From r.m.krug at gmail.com  Wed Sep 23 10:52:12 2009
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Wed, 23 Sep 2009 10:52:12 +0200
Subject: [R-sig-Geo] warning when using readRAST6
Message-ID: <fb7c7e870909230152n2c403515y4a099fa9ce43cbb@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090923/bc3100f1/attachment.pl>

From Roger.Bivand at nhh.no  Wed Sep 23 11:31:31 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 23 Sep 2009 11:31:31 +0200 (CEST)
Subject: [R-sig-Geo] warning when using readRAST6
In-Reply-To: <fb7c7e870909230152n2c403515y4a099fa9ce43cbb@mail.gmail.com>
References: <fb7c7e870909230152n2c403515y4a099fa9ce43cbb@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.0909231129550.17516@reclus.nhh.no>

On Wed, 23 Sep 2009, Rainer M Krug wrote:

> Hi
>
> when I use readRAST6() I get the warning message below. it happens to
> different GRASS layers. Is this a problem on my side, or in readRAST6?

In readRAST6, or rather in doGRASS(), which assumed that all GRASS 
commands take parameters, but g.version doesn't. Fix committed to 
r-spatial on sourceforge if you can't wait for the next release.

Thanks for a clear report,

Roger

>
> Cheers,
>
> Rainer
>
>
>> x <- readRAST6("MASK")
> Warning message:
> In is.na(pt[, "keydesc_count"]) :
>  is.na() applied to non-(list or vector) of type 'NULL'
>>
>
>> sessionInfo()
> R version 2.9.2 (2009-08-24)
> i486-pc-linux-gnu
>
> locale:
> LC_CTYPE=en_ZA.UTF-8;LC_NUMERIC=C;LC_TIME=en_ZA.UTF-8;LC_COLLATE=en_ZA.UTF-8;LC_MONETARY=C;LC_MESSAGES=en_ZA.UTF-8;LC_PAPER=en_ZA.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_ZA.UTF-8;LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] multicore_0.1-3 RSQLite_0.7-2   DBI_0.2-4       spgrass6_0.6-9
> [5] XML_2.1-0       rgdal_0.6-18    maptools_0.7-26 foreign_0.8-37
> [9] sp_0.9-44       simecol_0.5-7   deSolve_1.3
>
> loaded via a namespace (and not attached):
> [1] grid_2.9.2      lattice_0.17-25
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From christoph.hofer at env.ethz.ch  Wed Sep 23 13:06:40 2009
From: christoph.hofer at env.ethz.ch (Christoph Hofer)
Date: Wed, 23 Sep 2009 13:06:40 +0200
Subject: [R-sig-Geo] 2D interpolation
Message-ID: <2BAF1F6D-5B9D-4062-8432-3CDEB1F4F7EF@env.ethz.ch>

Dear list


I am looking for a function that interpolate data points z in the x,y- 
plane.
For the one-dimensional case this would be a "natural cubic spline".  
Is there
a package where I find a function for "natural thin plate splines" for  
interpolation?

I found in the akima package the function interp. But this is not a  
thin plate spline interpolation.


Best regards


Christoph Hofer





____________________________
____________________________
ETH Zurich
Christoph Hofer
Soil and Terrestrial Environmental Physics
Institute of Terrestrial Ecosystems
CHN E 50.2
Universit?tstrasse 16
8092 Zurich, Switzerland
phone         (+41) - (0)44 - 633 63 65
fax               (+41) - (0)44 - 633 11 23
e-mail: christoph.hofer at env.ethz.ch


From pierre.roudier at gmail.com  Wed Sep 23 13:49:44 2009
From: pierre.roudier at gmail.com (Pierre Roudier)
Date: Wed, 23 Sep 2009 21:49:44 +1000
Subject: [R-sig-Geo] 2D interpolation
In-Reply-To: <2BAF1F6D-5B9D-4062-8432-3CDEB1F4F7EF@env.ethz.ch>
References: <2BAF1F6D-5B9D-4062-8432-3CDEB1F4F7EF@env.ethz.ch>
Message-ID: <e4178da60909230449n47cfb38q98e3d248c2fed7d7@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090923/eae7a86d/attachment.pl>

From Roger.Bivand at nhh.no  Wed Sep 23 13:58:51 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 23 Sep 2009 13:58:51 +0200 (CEST)
Subject: [R-sig-Geo] 2D interpolation
In-Reply-To: <2BAF1F6D-5B9D-4062-8432-3CDEB1F4F7EF@env.ethz.ch>
References: <2BAF1F6D-5B9D-4062-8432-3CDEB1F4F7EF@env.ethz.ch>
Message-ID: <alpine.LRH.2.00.0909231354340.18327@reclus.nhh.no>

On Wed, 23 Sep 2009, Christoph Hofer wrote:

> Dear list
>
>
> I am looking for a function that interpolate data points z in the x,y-plane.
> For the one-dimensional case this would be a "natural cubic spline". Is there
> a package where I find a function for "natural thin plate splines" for 
> interpolation?
>
> I found in the akima package the function interp. But this is not a thin 
> plate spline interpolation.

RSiteSearch("thin plate spline")

pulls up:

http://finzi.psych.upenn.edu/R/library/fields/html/Tps.html

as second hit for me. Try Tps() in the fields package.

Roger

>
>
> Best regards
>
>
> Christoph Hofer
>
>
>
>
>
> ____________________________
> ____________________________
> ETH Zurich
> Christoph Hofer
> Soil and Terrestrial Environmental Physics
> Institute of Terrestrial Ecosystems
> CHN E 50.2
> Universit?tstrasse 16
> 8092 Zurich, Switzerland
> phone         (+41) - (0)44 - 633 63 65
> fax               (+41) - (0)44 - 633 11 23
> e-mail: christoph.hofer at env.ethz.ch
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From ggrothendieck at gmail.com  Wed Sep 23 16:49:57 2009
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 23 Sep 2009 10:49:57 -0400
Subject: [R-sig-Geo] Problem installing rgdal on 64 bit fedora
Message-ID: <971536df0909230749k643ac3f1x5c2a056dd10462e2@mail.gmail.com>

I am getting this message when I try to install rgdal in R:

Error: proj/epsg not found
Either install missing proj support files, for example
the proj-nad and proj-epsg RPMs on systems using RPMs,
or if installed but not autodetected, set PROJ_LIB to the
correct path.
ERROR: configuration failed for package 'rgdal'


I had previously installed gdal and proj.4 and proj-had using yum
(and I also tried from source).  From the shell these all seem to
work in that they return something rather than a message that
they are missing:

proj
man proj
gdal-config

However, when I issue the R command

   install.packages("rgdal", dep = TRUE)

I get a message back (below) that refers to proj-epsg as missing but
I see no such distribution:

$ yum search proj-epsg
No Matches found

What is proj-epsg, where is it and how do I get around this?


From laura.poggio at gmail.com  Wed Sep 23 17:05:30 2009
From: laura.poggio at gmail.com (Laura Poggio)
Date: Wed, 23 Sep 2009 16:05:30 +0100
Subject: [R-sig-Geo] Problem installing rgdal on 64 bit fedora
In-Reply-To: <971536df0909230749k643ac3f1x5c2a056dd10462e2@mail.gmail.com>
References: <971536df0909230749k643ac3f1x5c2a056dd10462e2@mail.gmail.com>
Message-ID: <e027b8750909230805t296e9753waa5956adbb2c49a1@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090923/91afcd55/attachment.pl>

From Roger.Bivand at nhh.no  Wed Sep 23 17:18:00 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 23 Sep 2009 17:18:00 +0200 (CEST)
Subject: [R-sig-Geo] Problem installing rgdal on 64 bit fedora
In-Reply-To: <e027b8750909230805t296e9753waa5956adbb2c49a1@mail.gmail.com>
References: <971536df0909230749k643ac3f1x5c2a056dd10462e2@mail.gmail.com>
	<e027b8750909230805t296e9753waa5956adbb2c49a1@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.0909231711340.19644@reclus.nhh.no>

On Wed, 23 Sep 2009, Laura Poggio wrote:

> If you use:
> # yum search proj
> You should find proj, proj-devel, proj-epsg and proj-nad.
> At least it is what yum just found from my computer now.
> I had some problems earlier today to access fedora repository. What if you
> change repository?

Yes, there may be transient problems. From my RHEL box I don't see it now 
with yum search, but from F11, I do, but only for i586 (which is right for 
the machine).

For some murky reason, the packagers left the shared metadata out of 
regular proj, and have it in proj-nad and proj-epsg. I got round this 
earlier by shipping rgdal with the shared metadata files, but they could 
be staler than those otherwise on the user's platform, so at user request 
(for OSX among others), dropped the bundled files. I can see:

http://fr2.rpmfind.net//linux/RPM/fedora/11/x86_64/proj-epsg-4.6.1-2.fc11.x86_64.html

but since I build from source, can't vouch for it.

Roger

>
> Laura
>
> 2009/9/23 Gabor Grothendieck <ggrothendieck at gmail.com>
>
>> I am getting this message when I try to install rgdal in R:
>>
>> Error: proj/epsg not found
>> Either install missing proj support files, for example
>> the proj-nad and proj-epsg RPMs on systems using RPMs,
>> or if installed but not autodetected, set PROJ_LIB to the
>> correct path.
>> ERROR: configuration failed for package 'rgdal'
>>
>>
>> I had previously installed gdal and proj.4 and proj-had using yum
>> (and I also tried from source).  From the shell these all seem to
>> work in that they return something rather than a message that
>> they are missing:
>>
>> proj
>> man proj
>> gdal-config
>>
>> However, when I issue the R command
>>
>>   install.packages("rgdal", dep = TRUE)
>>
>> I get a message back (below) that refers to proj-epsg as missing but
>> I see no such distribution:
>>
>> $ yum search proj-epsg
>> No Matches found
>>
>> What is proj-epsg, where is it and how do I get around this?
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From etiennebr at gmail.com  Wed Sep 23 18:38:58 2009
From: etiennebr at gmail.com (Etienne Bellemare Racine)
Date: Wed, 23 Sep 2009 12:38:58 -0400
Subject: [R-sig-Geo] Zooming into a specific area
In-Reply-To: <4AB9DABD.40407@geo.uu.nl>
References: <893383.9021.qm@web57601.mail.re1.yahoo.com>
	<4AB9DABD.40407@geo.uu.nl>
Message-ID: <4ABA4F22.2000105@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090923/df66a547/attachment.pl>

From tom.gottfried at wzw.tum.de  Wed Sep 23 18:43:39 2009
From: tom.gottfried at wzw.tum.de (Tom Gottfried)
Date: Wed, 23 Sep 2009 18:43:39 +0200
Subject: [R-sig-Geo] unexpected behaviour of subset.SpatialPointsDataFrame()
Message-ID: <4ABA503B.9060400@wzw.tum.de>

Hi Edzer, Roger and list,

is it intended that subset.SpatialPointsDataFrame() returns two additional columns with the
coordinates in the data-slot of it's return value?

data(meuse.grid)
names(meuse.grid)
coordinates(meuse.grid) <- ~x+y
names(meuse.grid)
meuse.grid <- subset(meuse.grid, meuse.grid$dist > 0.01)
names(meuse.grid)

Regards,
Tom


From ggrothendieck at gmail.com  Wed Sep 23 19:07:31 2009
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 23 Sep 2009 13:07:31 -0400
Subject: [R-sig-Geo] Problem installing rgdal on 64 bit fedora
In-Reply-To: <alpine.LRH.2.00.0909231711340.19644@reclus.nhh.no>
References: <971536df0909230749k643ac3f1x5c2a056dd10462e2@mail.gmail.com> 
	<e027b8750909230805t296e9753waa5956adbb2c49a1@mail.gmail.com> 
	<alpine.LRH.2.00.0909231711340.19644@reclus.nhh.no>
Message-ID: <971536df0909231007t46a14711p36fab4f0ffcd0751@mail.gmail.com>

Actually I tried building proj-4.6.1 from source after my attempt with
yum failed to get rgdal going but that wasn't sufficient to pull in
everything needed it seems.

Can you give me a link to the proj-epsg source so I can try that?
Googling for proj-epsg did not give me an obvious hit.

Thanks (and to Laura).


On Wed, Sep 23, 2009 at 11:18 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> On Wed, 23 Sep 2009, Laura Poggio wrote:
>
>> If you use:
>> # yum search proj
>> You should find proj, proj-devel, proj-epsg and proj-nad.
>> At least it is what yum just found from my computer now.
>> I had some problems earlier today to access fedora repository. What if you
>> change repository?
>
> Yes, there may be transient problems. From my RHEL box I don't see it now
> with yum search, but from F11, I do, but only for i586 (which is right for
> the machine).
>
> For some murky reason, the packagers left the shared metadata out of regular
> proj, and have it in proj-nad and proj-epsg. I got round this earlier by
> shipping rgdal with the shared metadata files, but they could be staler than
> those otherwise on the user's platform, so at user request (for OSX among
> others), dropped the bundled files. I can see:
>
> http://fr2.rpmfind.net//linux/RPM/fedora/11/x86_64/proj-epsg-4.6.1-2.fc11.x86_64.html
>
> but since I build from source, can't vouch for it.
>
> Roger
>
>>
>> Laura
>>
>> 2009/9/23 Gabor Grothendieck <ggrothendieck at gmail.com>
>>
>>> I am getting this message when I try to install rgdal in R:
>>>
>>> Error: proj/epsg not found
>>> Either install missing proj support files, for example
>>> the proj-nad and proj-epsg RPMs on systems using RPMs,
>>> or if installed but not autodetected, set PROJ_LIB to the
>>> correct path.
>>> ERROR: configuration failed for package 'rgdal'
>>>
>>>
>>> I had previously installed gdal and proj.4 and proj-had using yum
>>> (and I also tried from source). ?From the shell these all seem to
>>> work in that they return something rather than a message that
>>> they are missing:
>>>
>>> proj
>>> man proj
>>> gdal-config
>>>
>>> However, when I issue the R command
>>>
>>> ?install.packages("rgdal", dep = TRUE)
>>>
>>> I get a message back (below) that refers to proj-epsg as missing but
>>> I see no such distribution:
>>>
>>> $ yum search proj-epsg
>>> No Matches found
>>>
>>> What is proj-epsg, where is it and how do I get around this?
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Roger Bivand
> Economic Geography Section, Department of Economics, Norwegian School of
> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
>


From Roger.Bivand at nhh.no  Wed Sep 23 20:28:53 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 23 Sep 2009 20:28:53 +0200 (CEST)
Subject: [R-sig-Geo] Problem installing rgdal on 64 bit fedora
In-Reply-To: <971536df0909231007t46a14711p36fab4f0ffcd0751@mail.gmail.com>
References: <971536df0909230749k643ac3f1x5c2a056dd10462e2@mail.gmail.com>
	<e027b8750909230805t296e9753waa5956adbb2c49a1@mail.gmail.com>
	<alpine.LRH.2.00.0909231711340.19644@reclus.nhh.no>
	<971536df0909231007t46a14711p36fab4f0ffcd0751@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.0909232014360.19644@reclus.nhh.no>

On Wed, 23 Sep 2009, Gabor Grothendieck wrote:

> Actually I tried building proj-4.6.1 from source after my attempt with
> yum failed to get rgdal going but that wasn't sufficient to pull in
> everything needed it seems.

Building from source may need the extra metadata files in:

http://download.osgeo.org/proj/proj-datumgrid-1.5.zip

for completeness.

>
> Can you give me a link to the proj-epsg source so I can try that?
> Googling for proj-epsg did not give me an obvious hit.
>

For some reason rpmfind points to this:

ftp://download.fedora.redhat.com/pub/fedora/linux/releases/11/Everything/source/SRPMS/proj-4.6.1-2.fc11.src.rpm

The proj.spec claims to file builds the proj, proj-devel, proj-nad and 
proj-epsg rpms.

Hope this helps,

Roger

PS. the f11 version above as an older datum grid zip archive included.

> Thanks (and to Laura).
>
>
> On Wed, Sep 23, 2009 at 11:18 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>> On Wed, 23 Sep 2009, Laura Poggio wrote:
>>
>>> If you use:
>>> # yum search proj
>>> You should find proj, proj-devel, proj-epsg and proj-nad.
>>> At least it is what yum just found from my computer now.
>>> I had some problems earlier today to access fedora repository. What if you
>>> change repository?
>>
>> Yes, there may be transient problems. From my RHEL box I don't see it now
>> with yum search, but from F11, I do, but only for i586 (which is right for
>> the machine).
>>
>> For some murky reason, the packagers left the shared metadata out of regular
>> proj, and have it in proj-nad and proj-epsg. I got round this earlier by
>> shipping rgdal with the shared metadata files, but they could be staler than
>> those otherwise on the user's platform, so at user request (for OSX among
>> others), dropped the bundled files. I can see:
>>
>> http://fr2.rpmfind.net//linux/RPM/fedora/11/x86_64/proj-epsg-4.6.1-2.fc11.x86_64.html
>>
>> but since I build from source, can't vouch for it.
>>
>> Roger
>>
>>>
>>> Laura
>>>
>>> 2009/9/23 Gabor Grothendieck <ggrothendieck at gmail.com>
>>>
>>>> I am getting this message when I try to install rgdal in R:
>>>>
>>>> Error: proj/epsg not found
>>>> Either install missing proj support files, for example
>>>> the proj-nad and proj-epsg RPMs on systems using RPMs,
>>>> or if installed but not autodetected, set PROJ_LIB to the
>>>> correct path.
>>>> ERROR: configuration failed for package 'rgdal'
>>>>
>>>>
>>>> I had previously installed gdal and proj.4 and proj-had using yum
>>>> (and I also tried from source). ?From the shell these all seem to
>>>> work in that they return something rather than a message that
>>>> they are missing:
>>>>
>>>> proj
>>>> man proj
>>>> gdal-config
>>>>
>>>> However, when I issue the R command
>>>>
>>>> ?install.packages("rgdal", dep = TRUE)
>>>>
>>>> I get a message back (below) that refers to proj-epsg as missing but
>>>> I see no such distribution:
>>>>
>>>> $ yum search proj-epsg
>>>> No Matches found
>>>>
>>>> What is proj-epsg, where is it and how do I get around this?
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>
>>> ? ? ? ?[[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Economic Geography Section, Department of Economics, Norwegian School of
>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From edzer.pebesma at uni-muenster.de  Wed Sep 23 21:12:29 2009
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 23 Sep 2009 21:12:29 +0200
Subject: [R-sig-Geo] unexpected behaviour of
	subset.SpatialPointsDataFrame()
In-Reply-To: <4ABA503B.9060400@wzw.tum.de>
References: <4ABA503B.9060400@wzw.tum.de>
Message-ID: <4ABA731D.1050002@uni-muenster.de>

Yes, and if you do a

names(as.data.frame(meuse.grid))

after your example, there's even more duplication. What happens is that

coordinates(meuse.grid) <- ~x+y

takes x and y out of the data frame and moves them to the coordinates.
The motivation for this was limiting the object size and memory usage.
An alternative creator,

coordinates(meuse.grid) <- meuse.grid[c("x", "y")]

duplicates them, as it wouldn't know what to move. subset does the same
duplication, more as a side effect then intentional.

It is hard to say what would be the right way; e.g. meuse.grid$x does
not work using the first creation method, but works using the second, or
your subset. As an alternative you might consider

meuse.grid[meuse.grid$dist > 0.01,]

which does not duplicate.
--
Edzer

Tom Gottfried wrote:
> Hi Edzer, Roger and list,
>
> is it intended that subset.SpatialPointsDataFrame() returns two additional columns with the
> coordinates in the data-slot of it's return value?
>
> data(meuse.grid)
> names(meuse.grid)
> coordinates(meuse.grid) <- ~x+y
> names(meuse.grid)
> meuse.grid <- subset(meuse.grid, meuse.grid$dist > 0.01)
> names(meuse.grid)
>
> Regards,
> Tom
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de/
http://www.springer.com/978-0-387-78170-9 e.pebesma at wwu.de


From kmcoulib at gmail.com  Wed Sep 23 21:16:34 2009
From: kmcoulib at gmail.com (kapo coulibaly)
Date: Wed, 23 Sep 2009 15:16:34 -0400
Subject: [R-sig-Geo] Contours and shape
Message-ID: <6d1cbcaf0909231216h2372abc3w5e7180ab0eb0c5ef@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090923/bf44e40e/attachment.pl>

From Roger.Bivand at nhh.no  Wed Sep 23 22:08:32 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 23 Sep 2009 22:08:32 +0200 (CEST)
Subject: [R-sig-Geo] Contours and shape
In-Reply-To: <6d1cbcaf0909231216h2372abc3w5e7180ab0eb0c5ef@mail.gmail.com>
References: <6d1cbcaf0909231216h2372abc3w5e7180ab0eb0c5ef@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.0909232155490.19644@reclus.nhh.no>

On Wed, 23 Sep 2009, kapo coulibaly wrote:

> Is it possible to contour a grid and export the result as an ESRI shapefile?

Yes, see ContourLines2SLDF() in the maptools package. Then your choice of 
writeOGR() in rgdal or writeSpatialShape() in maptools.

> as a side question how do I search this mailing list?

Until recently, RSiteSearch() also searched the archives of this list. 
Regretably, the increasing volume of the main R lists, and the growth in 
the number of CRAN packages has led to this facility being withdrawn. An 
alternative is to use the Nabble search engine on this list (the full 
archive back to 2003 is present):

http://n2.nabble.com/R-sig-geo-f2731867.html

or Gmane:

http://dir.gmane.org/gmane.comp.lang.r.geo

which seems to go back to about 2005.

Hope this helps,

Roger

>
> Thanks
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From jutesoro at yahoo.com  Wed Sep 23 22:49:12 2009
From: jutesoro at yahoo.com (Julius Tesoro)
Date: Wed, 23 Sep 2009 13:49:12 -0700 (PDT)
Subject: [R-sig-Geo] Zooming into a specific area
In-Reply-To: <4AB9DABD.40407@geo.uu.nl>
Message-ID: <248010.77199.qm@web57609.mail.re1.yahoo.com>

Hi,

I tried it but it did not zoom into the area but just blocked out the areas around xlim and ylim. 

Are there other ways? 



--- On Wed, 9/23/09, Paul Hiemstra <p.hiemstra at geo.uu.nl> wrote:

> From: Paul Hiemstra <p.hiemstra at geo.uu.nl>
> Subject: Re: [R-sig-Geo] Zooming into a specific area
> To: "Julius Tesoro" <jutesoro at yahoo.com>
> Cc: r-sig-geo at stat.math.ethz.ch
> Date: Wednesday, September 23, 2009, 4:22 PM
> Julius Tesoro wrote:
> > Hello
> >
> > I have three shapefiles loaded in R, say, a line
> shapefile of faults in New Zealand, the administrative
> districts of Fiordland (province of New Zealand) and New
> Zealand earthquakes. I want to zoom into a specific area so
> that I can select the earthquake points through
> select.spatial. How do I do zoom into this area? Is there
> other way where I can select a polygon by clicking and store
> it in? a vector?
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at stat.math.ethz.ch
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >???
> Hi,
> 
> You can use the xlim and ylim parameters in spplot to zoom
> in.
> 
> cheers,
> Paul
> 
> -- 
> Drs. Paul Hiemstra
> Department of Physical Geography
> Faculty of Geosciences
> University of Utrecht
> Heidelberglaan 2
> P.O. Box 80.115
> 3508 TC Utrecht
> Phone:? +3130 274 3113 Mon-Tue
> Phone:? +3130 253 5773 Wed-Fri
> http://intamap.geo.uu.nl/~paul
> 
> 





From fdoespin at gmail.com  Wed Sep 23 23:01:51 2009
From: fdoespin at gmail.com (fernando espindola)
Date: Wed, 23 Sep 2009 17:01:51 -0400
Subject: [R-sig-Geo] Problems with image2Grid
Message-ID: <c197abc70909231401w2aae32b7k6131e17e446280be@mail.gmail.com>

Hi R-sig-Geo user,

I am try to convert matrix to SpatialGridDataFrame using the image2Grid
function, but the range of longitude change with apply this function. I
include the object with the x-longitude, y-latitude and z-matrix.

Thank for all

fernando
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090923/d2499241/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: example.RData
Type: application/octet-stream
Size: 51664 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090923/d2499241/attachment.obj>

From kmcoulib at gmail.com  Thu Sep 24 00:31:29 2009
From: kmcoulib at gmail.com (kapo coulibaly)
Date: Wed, 23 Sep 2009 18:31:29 -0400
Subject: [R-sig-Geo] Contours and shape
In-Reply-To: <alpine.LRH.2.00.0909232155490.19644@reclus.nhh.no>
References: <6d1cbcaf0909231216h2372abc3w5e7180ab0eb0c5ef@mail.gmail.com>
	<alpine.LRH.2.00.0909232155490.19644@reclus.nhh.no>
Message-ID: <6d1cbcaf0909231531w5bf29a50y7105c76ac7b24c32@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090923/5c5887ae/attachment.pl>

From ggrothendieck at gmail.com  Thu Sep 24 03:55:45 2009
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 23 Sep 2009 21:55:45 -0400
Subject: [R-sig-Geo] Problem installing rgdal on 64 bit fedora
In-Reply-To: <971536df0909231007t46a14711p36fab4f0ffcd0751@mail.gmail.com>
References: <971536df0909230749k643ac3f1x5c2a056dd10462e2@mail.gmail.com> 
	<e027b8750909230805t296e9753waa5956adbb2c49a1@mail.gmail.com> 
	<alpine.LRH.2.00.0909231711340.19644@reclus.nhh.no>
	<971536df0909231007t46a14711p36fab4f0ffcd0751@mail.gmail.com>
Message-ID: <971536df0909231855r3b510834tf5bbbd69e401790f@mail.gmail.com>

I was not having much luck with yum and tried installing gdal from
source after trying the same with proj but am getting this message:

/root/gdal-1.6.2/libgdal.la: file not recognized: File format not recognized
collect2: ld returned 1 exit status
make: *** [rgdal.so] Error 1

I am on 64 bit fc8 and the file /root/gdal-1.6.2/libgdal.la is
present.  Has anyone seen this when trying to install gdal?


On Wed, Sep 23, 2009 at 1:07 PM, Gabor Grothendieck
<ggrothendieck at gmail.com> wrote:
> Actually I tried building proj-4.6.1 from source after my attempt with
> yum failed to get rgdal going but that wasn't sufficient to pull in
> everything needed it seems.
>
> Can you give me a link to the proj-epsg source so I can try that?
> Googling for proj-epsg did not give me an obvious hit.
>
> Thanks (and to Laura).
>
>
> On Wed, Sep 23, 2009 at 11:18 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>> On Wed, 23 Sep 2009, Laura Poggio wrote:
>>
>>> If you use:
>>> # yum search proj
>>> You should find proj, proj-devel, proj-epsg and proj-nad.
>>> At least it is what yum just found from my computer now.
>>> I had some problems earlier today to access fedora repository. What if you
>>> change repository?
>>
>> Yes, there may be transient problems. From my RHEL box I don't see it now
>> with yum search, but from F11, I do, but only for i586 (which is right for
>> the machine).
>>
>> For some murky reason, the packagers left the shared metadata out of regular
>> proj, and have it in proj-nad and proj-epsg. I got round this earlier by
>> shipping rgdal with the shared metadata files, but they could be staler than
>> those otherwise on the user's platform, so at user request (for OSX among
>> others), dropped the bundled files. I can see:
>>
>> http://fr2.rpmfind.net//linux/RPM/fedora/11/x86_64/proj-epsg-4.6.1-2.fc11.x86_64.html
>>
>> but since I build from source, can't vouch for it.
>>
>> Roger
>>
>>>
>>> Laura
>>>
>>> 2009/9/23 Gabor Grothendieck <ggrothendieck at gmail.com>
>>>
>>>> I am getting this message when I try to install rgdal in R:
>>>>
>>>> Error: proj/epsg not found
>>>> Either install missing proj support files, for example
>>>> the proj-nad and proj-epsg RPMs on systems using RPMs,
>>>> or if installed but not autodetected, set PROJ_LIB to the
>>>> correct path.
>>>> ERROR: configuration failed for package 'rgdal'
>>>>
>>>>
>>>> I had previously installed gdal and proj.4 and proj-had using yum
>>>> (and I also tried from source). ?From the shell these all seem to
>>>> work in that they return something rather than a message that
>>>> they are missing:
>>>>
>>>> proj
>>>> man proj
>>>> gdal-config
>>>>
>>>> However, when I issue the R command
>>>>
>>>> ?install.packages("rgdal", dep = TRUE)
>>>>
>>>> I get a message back (below) that refers to proj-epsg as missing but
>>>> I see no such distribution:
>>>>
>>>> $ yum search proj-epsg
>>>> No Matches found
>>>>
>>>> What is proj-epsg, where is it and how do I get around this?
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>
>>> ? ? ? ?[[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Economic Geography Section, Department of Economics, Norwegian School of
>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>>
>


From ggrothendieck at gmail.com  Thu Sep 24 05:15:50 2009
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 23 Sep 2009 23:15:50 -0400
Subject: [R-sig-Geo] Problem installing rgdal on 64 bit fedora
In-Reply-To: <971536df0909231855r3b510834tf5bbbd69e401790f@mail.gmail.com>
References: <971536df0909230749k643ac3f1x5c2a056dd10462e2@mail.gmail.com> 
	<e027b8750909230805t296e9753waa5956adbb2c49a1@mail.gmail.com> 
	<alpine.LRH.2.00.0909231711340.19644@reclus.nhh.no>
	<971536df0909231007t46a14711p36fab4f0ffcd0751@mail.gmail.com> 
	<971536df0909231855r3b510834tf5bbbd69e401790f@mail.gmail.com>
Message-ID: <971536df0909232015mf8af62fy1f8d1e4138b7395c@mail.gmail.com>

Pending additional testing of rgdal it seems that I did get rgdal and
its dependencies (gdal, proj)  installed.

If anyone else has problems installing this software I suggest you try
installing proj and gdal from source (I never did get a yum-based
install to work) making use of the instructions and troubleshooting
advice at this link (except try substituting the most recent versions
of the packages for the versions listed there):

   http://geodjango.org/docs/install.html

This next link also might be helpful although it was primarily the
prior link that I used:

   http://forum.worldwindcentral.com/showthread.php?t=21409

The manual actions that I took are likely system specific but in my
case they included the following:

- set LD_LIBRARY_PATH as suggested in the first link above (prior to
building gdal from source)

- gdal-config --version was not giving me the same version as the
version of gdal I had installed from source so I copied the
gdal-config that I had built over the old one (after I had built gdal)
and then after the copy rebuilt gdal again to be sure.

On Wed, Sep 23, 2009 at 9:55 PM, Gabor Grothendieck
<ggrothendieck at gmail.com> wrote:
> I was not having much luck with yum and tried installing gdal from
> source after trying the same with proj but am getting this message:
>
> /root/gdal-1.6.2/libgdal.la: file not recognized: File format not recognized
> collect2: ld returned 1 exit status
> make: *** [rgdal.so] Error 1
>
> I am on 64 bit fc8 and the file /root/gdal-1.6.2/libgdal.la is
> present. ?Has anyone seen this when trying to install gdal?
>
>
> On Wed, Sep 23, 2009 at 1:07 PM, Gabor Grothendieck
> <ggrothendieck at gmail.com> wrote:
>> Actually I tried building proj-4.6.1 from source after my attempt with
>> yum failed to get rgdal going but that wasn't sufficient to pull in
>> everything needed it seems.
>>
>> Can you give me a link to the proj-epsg source so I can try that?
>> Googling for proj-epsg did not give me an obvious hit.
>>
>> Thanks (and to Laura).
>>
>>
>> On Wed, Sep 23, 2009 at 11:18 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>> On Wed, 23 Sep 2009, Laura Poggio wrote:
>>>
>>>> If you use:
>>>> # yum search proj
>>>> You should find proj, proj-devel, proj-epsg and proj-nad.
>>>> At least it is what yum just found from my computer now.
>>>> I had some problems earlier today to access fedora repository. What if you
>>>> change repository?
>>>
>>> Yes, there may be transient problems. From my RHEL box I don't see it now
>>> with yum search, but from F11, I do, but only for i586 (which is right for
>>> the machine).
>>>
>>> For some murky reason, the packagers left the shared metadata out of regular
>>> proj, and have it in proj-nad and proj-epsg. I got round this earlier by
>>> shipping rgdal with the shared metadata files, but they could be staler than
>>> those otherwise on the user's platform, so at user request (for OSX among
>>> others), dropped the bundled files. I can see:
>>>
>>> http://fr2.rpmfind.net//linux/RPM/fedora/11/x86_64/proj-epsg-4.6.1-2.fc11.x86_64.html
>>>
>>> but since I build from source, can't vouch for it.
>>>
>>> Roger
>>>
>>>>
>>>> Laura
>>>>
>>>> 2009/9/23 Gabor Grothendieck <ggrothendieck at gmail.com>
>>>>
>>>>> I am getting this message when I try to install rgdal in R:
>>>>>
>>>>> Error: proj/epsg not found
>>>>> Either install missing proj support files, for example
>>>>> the proj-nad and proj-epsg RPMs on systems using RPMs,
>>>>> or if installed but not autodetected, set PROJ_LIB to the
>>>>> correct path.
>>>>> ERROR: configuration failed for package 'rgdal'
>>>>>
>>>>>
>>>>> I had previously installed gdal and proj.4 and proj-had using yum
>>>>> (and I also tried from source). ?From the shell these all seem to
>>>>> work in that they return something rather than a message that
>>>>> they are missing:
>>>>>
>>>>> proj
>>>>> man proj
>>>>> gdal-config
>>>>>
>>>>> However, when I issue the R command
>>>>>
>>>>> ?install.packages("rgdal", dep = TRUE)
>>>>>
>>>>> I get a message back (below) that refers to proj-epsg as missing but
>>>>> I see no such distribution:
>>>>>
>>>>> $ yum search proj-epsg
>>>>> No Matches found
>>>>>
>>>>> What is proj-epsg, where is it and how do I get around this?
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>
>>>> ? ? ? ?[[alternative HTML version deleted]]
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>
>>> --
>>> Roger Bivand
>>> Economic Geography Section, Department of Economics, Norwegian School of
>>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>>> e-mail: Roger.Bivand at nhh.no
>>>
>>>
>>
>


From Roger.Bivand at nhh.no  Thu Sep 24 07:59:37 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 24 Sep 2009 07:59:37 +0200 (CEST)
Subject: [R-sig-Geo] Contours and shape
In-Reply-To: <6d1cbcaf0909231531w5bf29a50y7105c76ac7b24c32@mail.gmail.com>
References: <6d1cbcaf0909231216h2372abc3w5e7180ab0eb0c5ef@mail.gmail.com>
	<alpine.LRH.2.00.0909232155490.19644@reclus.nhh.no>
	<6d1cbcaf0909231531w5bf29a50y7105c76ac7b24c32@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.0909240752560.22327@reclus.nhh.no>

On Wed, 23 Sep 2009, kapo coulibaly wrote:

> I couldn't find writeSpatialShape() in maptoold, is it a new command?

Include sessionInfo() output to report the version you are using, please. 
This wrapper for write*Shape() functions was introduced in June 2008, so 
"new" isn't the word I'd use. The current version of maptools is 0.7-26.
Using update.packages() frequently does ensure that you pick up bug fixes 
and package enhancements as they are released.

Roger

>
> On Wed, Sep 23, 2009 at 4:08 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
>> On Wed, 23 Sep 2009, kapo coulibaly wrote:
>>
>>  Is it possible to contour a grid and export the result as an ESRI
>>> shapefile?
>>>
>>
>> Yes, see ContourLines2SLDF() in the maptools package. Then your choice of
>> writeOGR() in rgdal or writeSpatialShape() in maptools.
>>
>>  as a side question how do I search this mailing list?
>>>
>>
>> Until recently, RSiteSearch() also searched the archives of this list.
>> Regretably, the increasing volume of the main R lists, and the growth in the
>> number of CRAN packages has led to this facility being withdrawn. An
>> alternative is to use the Nabble search engine on this list (the full
>> archive back to 2003 is present):
>>
>> http://n2.nabble.com/R-sig-geo-f2731867.html
>>
>> or Gmane:
>>
>> http://dir.gmane.org/gmane.comp.lang.r.geo
>>
>> which seems to go back to about 2005.
>>
>> Hope this helps,
>>
>> Roger
>>
>>
>>> Thanks
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>> --
>> Roger Bivand
>> Economic Geography Section, Department of Economics, Norwegian School of
>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Thu Sep 24 08:19:11 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 24 Sep 2009 08:19:11 +0200 (CEST)
Subject: [R-sig-Geo] Problems with image2Grid
In-Reply-To: <c197abc70909231401w2aae32b7k6131e17e446280be@mail.gmail.com>
References: <c197abc70909231401w2aae32b7k6131e17e446280be@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.0909240807000.22327@reclus.nhh.no>

On Wed, 23 Sep 2009, fernando espindola wrote:

> Hi R-sig-Geo user,
>
> I am try to convert matrix to SpatialGridDataFrame using the image2Grid
> function, but the range of longitude change with apply this function. I
> include the object with the x-longitude, y-latitude and z-matrix.

Since no-one can see over your shoulder, including the commands you use, 
and the (textual) output you receive, in your posting might have been 
useful. Reconstructing from the attached data file (which you have sent to 
over 1200 people through the list), it seems that you are confusing the 
range of the raster cell centre points, and the bounding box of the 
object, which must add half a cell width/height at the edges (otherwise it 
would bound such that half of the outer cell rows and columns would be 
clipped):

library(sp)
load("example.RData")
t1 <- image2Grid(met)
proj4string(t1) <- CRS("+proj=longlat")
image(t1, axes=TRUE)
range(met$x)
# [1] -77.25511 -64.67870
range(met$y)
# [1] -58.32734 -41.10675
bbox(t1)
#                 min       max
# coords.x1 -77.35186 -64.58196
# coords.x2 -58.37497 -44.08401
bbox(t1)[1, 1] + 0.5 * gridparameters(t1)$cellsize[1]
# [1] -77.25511
bbox(t1)[1, 2] - 0.5 * gridparameters(t1)$cellsize[1]
# [1] -64.6787
summary(t1)
# reports the bounding box of the object.

OK?

Roger

>
> Thank for all
>
> fernando
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From p.hiemstra at geo.uu.nl  Thu Sep 24 10:22:13 2009
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Thu, 24 Sep 2009 10:22:13 +0200
Subject: [R-sig-Geo] Zooming into a specific area
In-Reply-To: <248010.77199.qm@web57609.mail.re1.yahoo.com>
References: <248010.77199.qm@web57609.mail.re1.yahoo.com>
Message-ID: <4ABB2C35.8010809@geo.uu.nl>

Hmmm,

Could you provide a reproducible example to illustrate your problem with 
xlim and ylim. This works for me:

library(sp)
data(meuse)
coordinates(meuse) = ~x+y
spplot(meuse, "dist",
    xlim = c(179000, 180000),
    ylim = c(330000, 331000))

cheers,
Paul

Julius Tesoro wrote:
> Hi,
>
> I tried it but it did not zoom into the area but just blocked out the areas around xlim and ylim. 
>
> Are there other ways? 
>
>
>
> --- On Wed, 9/23/09, Paul Hiemstra <p.hiemstra at geo.uu.nl> wrote:
>
>   
>> From: Paul Hiemstra <p.hiemstra at geo.uu.nl>
>> Subject: Re: [R-sig-Geo] Zooming into a specific area
>> To: "Julius Tesoro" <jutesoro at yahoo.com>
>> Cc: r-sig-geo at stat.math.ethz.ch
>> Date: Wednesday, September 23, 2009, 4:22 PM
>> Julius Tesoro wrote:
>>     
>>> Hello
>>>
>>> I have three shapefiles loaded in R, say, a line
>>>       
>> shapefile of faults in New Zealand, the administrative
>> districts of Fiordland (province of New Zealand) and New
>> Zealand earthquakes. I want to zoom into a specific area so
>> that I can select the earthquake points through
>> select.spatial. How do I do zoom into this area? Is there
>> other way where I can select a polygon by clicking and store
>> it in  a vector?
>>     
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>    
>>>       
>> Hi,
>>
>> You can use the xlim and ylim parameters in spplot to zoom
>> in.
>>
>> cheers,
>> Paul
>>
>> -- 
>> Drs. Paul Hiemstra
>> Department of Physical Geography
>> Faculty of Geosciences
>> University of Utrecht
>> Heidelberglaan 2
>> P.O. Box 80.115
>> 3508 TC Utrecht
>> Phone:  +3130 274 3113 Mon-Tue
>> Phone:  +3130 253 5773 Wed-Fri
>> http://intamap.geo.uu.nl/~paul
>>
>>
>>     
>
>
>       
>
>   


-- 
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone:  +3130 274 3113 Mon-Tue
Phone:  +3130 253 5773 Wed-Fri
http://intamap.geo.uu.nl/~paul


From mdsumner at gmail.com  Thu Sep 24 12:01:30 2009
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 24 Sep 2009 20:01:30 +1000
Subject: [R-sig-Geo] Problems with image2Grid
In-Reply-To: <522664f80909231549p36b73442h4e2808dd49684ac1@mail.gmail.com>
References: <c197abc70909231401w2aae32b7k6131e17e446280be@mail.gmail.com>
	<522664f80909231549p36b73442h4e2808dd49684ac1@mail.gmail.com>
Message-ID: <522664f80909240301l4fd92dc5if1b3c49f7d13fd8@mail.gmail.com>

Hello, Roger's reply to this made me realize I replied only to
fernando, so I wanted to correct my first message and add some more.

This reminds me that image2Grid needs check for irregular x or y
values - it assumes the relationship of the first 2 in each define
them all, so it should error in this case.

I'll try to put together an example that doe the resampling in R with
overlay, or its underlying functions, to avoid external calls to GDAL.

The y values in the example data are irregular and so this is not supported by
Spatial[Grid/Pixels]DataFrame - although this is supported by image()
for xyz lists of this type.

range(diff(met$y))
[1] 0.09527307 0.13665998

You can convert this to points like this:

library(sp)
x <- data.frame(expand.grid(x = met$x, y = met$y), z = as.vector(met$z))
coordinates(x) <- ~x+y

If you know the projection and there is a regular transform that works
- this is common in NetCDF files and environmental models where an
underlying Mercator grid is use in lat/long form - only Y is
"irregular". Having a wild guess:

library(rgdal)
 proj4string(x) <- CRS("+proj=longlat +ellps=WGS84")
x2 <- spTransform(x, CRS("+proj=merc +ellps=WGS84"))
gridded(x2) <- TRUE

image(x2)

That works to create a regular grid and you could transform companion
datasets in the same way, but may not be useful depending on your
application. If you need to warp the grid to regular raster you can do
that externally - with the GDAL command line utilities, which I have
in my path. E.g.

writeGDAL(x2, "file2convert.tif")
system("gdalwarp file2convert.tif LL.tif -t_srs \"+proj=longlat +ellps=WGS84\"")

ll.x <- readGDAL("LL.tif")
summary(ll.x)
Object of class SpatialGridDataFrame
Coordinates:
       min       max
x -77.35186 -64.60699
y -58.38184 -41.03831
Is projected: FALSE
proj4string : [+proj=longlat +ellps=WGS84 +no_defs]
Number of points: 2
Grid attributes:
 cellcentre.offset  cellsize cells.dim
x         -77.28616 0.1313904        97
y         -58.31615 0.1313904       132
Data attributes:
   Min.  1st Qu.   Median     Mean  3rd Qu.     Max.
0.003633 0.438200 0.438200 0.426500 0.438200 0.983700

image(ll.x)
contour(met, add = TRUE)

HTH

Regards, Mike.


From Roger.Bivand at nhh.no  Thu Sep 24 12:37:22 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 24 Sep 2009 12:37:22 +0200 (CEST)
Subject: [R-sig-Geo] Problems with image2Grid
In-Reply-To: <522664f80909240301l4fd92dc5if1b3c49f7d13fd8@mail.gmail.com>
References: <c197abc70909231401w2aae32b7k6131e17e446280be@mail.gmail.com>
	<522664f80909231549p36b73442h4e2808dd49684ac1@mail.gmail.com>
	<522664f80909240301l4fd92dc5if1b3c49f7d13fd8@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.0909241230160.22327@reclus.nhh.no>

On Thu, 24 Sep 2009, Michael Sumner wrote:

> Hello, Roger's reply to this made me realize I replied only to
> fernando, so I wanted to correct my first message and add some more.
>
> This reminds me that image2Grid needs check for irregular x or y
> values - it assumes the relationship of the first 2 in each define
> them all, so it should error in this case.

Sorry, I was looking at the x's - the longitude, not the y's where the 
problem was. Had the commands been included, it would have been easier to 
deconstruct. I'm committing a test in image2Grid() which gains a digits= 
argument to set the tolerance of uniqueness of step difference testing. 
With the check in place, the example data fails.

Paul Hiemstra put an interpolation on the R-wiki yesterday at:

http://wiki.r-project.org/rwiki/doku.php?id=tips:spatial-data:change_crs

perhaps you could add your example to it as well as posting?

Roger

>
> I'll try to put together an example that doe the resampling in R with
> overlay, or its underlying functions, to avoid external calls to GDAL.
>
> The y values in the example data are irregular and so this is not supported by
> Spatial[Grid/Pixels]DataFrame - although this is supported by image()
> for xyz lists of this type.
>
> range(diff(met$y))
> [1] 0.09527307 0.13665998
>
> You can convert this to points like this:
>
> library(sp)
> x <- data.frame(expand.grid(x = met$x, y = met$y), z = as.vector(met$z))
> coordinates(x) <- ~x+y
>
> If you know the projection and there is a regular transform that works
> - this is common in NetCDF files and environmental models where an
> underlying Mercator grid is use in lat/long form - only Y is
> "irregular". Having a wild guess:
>
> library(rgdal)
> proj4string(x) <- CRS("+proj=longlat +ellps=WGS84")
> x2 <- spTransform(x, CRS("+proj=merc +ellps=WGS84"))
> gridded(x2) <- TRUE
>
> image(x2)
>
> That works to create a regular grid and you could transform companion
> datasets in the same way, but may not be useful depending on your
> application. If you need to warp the grid to regular raster you can do
> that externally - with the GDAL command line utilities, which I have
> in my path. E.g.
>
> writeGDAL(x2, "file2convert.tif")
> system("gdalwarp file2convert.tif LL.tif -t_srs \"+proj=longlat +ellps=WGS84\"")
>
> ll.x <- readGDAL("LL.tif")
> summary(ll.x)
> Object of class SpatialGridDataFrame
> Coordinates:
>       min       max
> x -77.35186 -64.60699
> y -58.38184 -41.03831
> Is projected: FALSE
> proj4string : [+proj=longlat +ellps=WGS84 +no_defs]
> Number of points: 2
> Grid attributes:
> cellcentre.offset  cellsize cells.dim
> x         -77.28616 0.1313904        97
> y         -58.31615 0.1313904       132
> Data attributes:
>   Min.  1st Qu.   Median     Mean  3rd Qu.     Max.
> 0.003633 0.438200 0.438200 0.426500 0.438200 0.983700
>
> image(ll.x)
> contour(met, add = TRUE)
>
> HTH
>
> Regards, Mike.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From mdsumner at gmail.com  Thu Sep 24 15:07:41 2009
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 24 Sep 2009 23:07:41 +1000
Subject: [R-sig-Geo] Problems with image2Grid
In-Reply-To: <alpine.LRH.2.00.0909241230160.22327@reclus.nhh.no>
References: <c197abc70909231401w2aae32b7k6131e17e446280be@mail.gmail.com>
	<522664f80909231549p36b73442h4e2808dd49684ac1@mail.gmail.com>
	<522664f80909240301l4fd92dc5if1b3c49f7d13fd8@mail.gmail.com>
	<alpine.LRH.2.00.0909241230160.22327@reclus.nhh.no>
Message-ID: <522664f80909240607m365a13a3q15bc97b9596f9a57@mail.gmail.com>

I put it on the wiki page, hopefully not too obscure - I certainly
encounter that particular issue quite frequently.

Regards, Mike.

On Thu, Sep 24, 2009 at 8:37 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> On Thu, 24 Sep 2009, Michael Sumner wrote:
>
>> Hello, Roger's reply to this made me realize I replied only to
>> fernando, so I wanted to correct my first message and add some more.
>>
>> This reminds me that image2Grid needs check for irregular x or y
>> values - it assumes the relationship of the first 2 in each define
>> them all, so it should error in this case.
>
> Sorry, I was looking at the x's - the longitude, not the y's where the
> problem was. Had the commands been included, it would have been easier to
> deconstruct. I'm committing a test in image2Grid() which gains a digits=
> argument to set the tolerance of uniqueness of step difference testing. With
> the check in place, the example data fails.
>
> Paul Hiemstra put an interpolation on the R-wiki yesterday at:
>
> http://wiki.r-project.org/rwiki/doku.php?id=tips:spatial-data:change_crs
>
> perhaps you could add your example to it as well as posting?
>
> Roger
>
>>
>> I'll try to put together an example that doe the resampling in R with
>> overlay, or its underlying functions, to avoid external calls to GDAL.
>>
>> The y values in the example data are irregular and so this is not
>> supported by
>> Spatial[Grid/Pixels]DataFrame - although this is supported by image()
>> for xyz lists of this type.
>>
>> range(diff(met$y))
>> [1] 0.09527307 0.13665998
>>
>> You can convert this to points like this:
>>
>> library(sp)
>> x <- data.frame(expand.grid(x = met$x, y = met$y), z = as.vector(met$z))
>> coordinates(x) <- ~x+y
>>
>> If you know the projection and there is a regular transform that works
>> - this is common in NetCDF files and environmental models where an
>> underlying Mercator grid is use in lat/long form - only Y is
>> "irregular". Having a wild guess:
>>
>> library(rgdal)
>> proj4string(x) <- CRS("+proj=longlat +ellps=WGS84")
>> x2 <- spTransform(x, CRS("+proj=merc +ellps=WGS84"))
>> gridded(x2) <- TRUE
>>
>> image(x2)
>>
>> That works to create a regular grid and you could transform companion
>> datasets in the same way, but may not be useful depending on your
>> application. If you need to warp the grid to regular raster you can do
>> that externally - with the GDAL command line utilities, which I have
>> in my path. E.g.
>>
>> writeGDAL(x2, "file2convert.tif")
>> system("gdalwarp file2convert.tif LL.tif -t_srs \"+proj=longlat
>> +ellps=WGS84\"")
>>
>> ll.x <- readGDAL("LL.tif")
>> summary(ll.x)
>> Object of class SpatialGridDataFrame
>> Coordinates:
>> ? ? ?min ? ? ? max
>> x -77.35186 -64.60699
>> y -58.38184 -41.03831
>> Is projected: FALSE
>> proj4string : [+proj=longlat +ellps=WGS84 +no_defs]
>> Number of points: 2
>> Grid attributes:
>> cellcentre.offset ?cellsize cells.dim
>> x ? ? ? ? -77.28616 0.1313904 ? ? ? ?97
>> y ? ? ? ? -58.31615 0.1313904 ? ? ? 132
>> Data attributes:
>> ?Min. ?1st Qu. ? Median ? ? Mean ?3rd Qu. ? ? Max.
>> 0.003633 0.438200 0.438200 0.426500 0.438200 0.983700
>>
>> image(ll.x)
>> contour(met, add = TRUE)
>>
>> HTH
>>
>> Regards, Mike.
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Roger Bivand
> Economic Geography Section, Department of Economics, Norwegian School of
> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
>


From blair.christian at gmail.com  Thu Sep 24 16:30:30 2009
From: blair.christian at gmail.com (Blair Christian)
Date: Thu, 24 Sep 2009 10:30:30 -0400
Subject: [R-sig-Geo] 2D interpolation
Message-ID: <6c35a4fc0909240730x545fc76fie71f9f23ce84f349@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090924/c142bf9a/attachment.pl>

From blair.christian at gmail.com  Thu Sep 24 16:30:57 2009
From: blair.christian at gmail.com (Blair Christian)
Date: Thu, 24 Sep 2009 10:30:57 -0400
Subject: [R-sig-Geo] 2D interpolation
Message-ID: <6c35a4fc0909240730qbf58d42j87c56282d9416dee@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090924/74df7684/attachment.pl>

From Bjarke.Christensen at sydbank.dk  Thu Sep 24 17:15:29 2009
From: Bjarke.Christensen at sydbank.dk (Bjarke Christensen)
Date: Thu, 24 Sep 2009 17:15:29 +0200
Subject: [R-sig-Geo] predict.spautolm
In-Reply-To: <alpine.LRH.2.00.0909211113460.8279@reclus.nhh.no>
Message-ID: <OF92384ECD.380D016C-ONC125763B.0052992E-C125763B.0053DEC9@bdpnet.dk>

Roger Bivand wrote:
>If you want simulations around
>those point estimates, you can introduce spatial autocorrelation with the
>lambda term, but lambda will not impact the predictions unless the model
>was misspecified, I believe.

I'm not quite sure I understand why. If lambda does not impact the
predictions, would its estimate not converge to zero?

Is it wrong to do out-of-sample validation using the method used for
in-sample fitted values in spautolm itself, where
yhat = Xb + lambda  W  (y-Xb)
?

(My background is in econometrics, not spatial statistics, so I apologize
if this is obvious to those with a more acute understanding of spatial
statistics).

Thanks for your help,
Bjarke Christensen


From Roger.Bivand at nhh.no  Thu Sep 24 20:07:02 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 24 Sep 2009 20:07:02 +0200 (CEST)
Subject: [R-sig-Geo] predict.spautolm
In-Reply-To: <OF92384ECD.380D016C-ONC125763B.0052992E-C125763B.0053DEC9@bdpnet.dk>
References: <OF92384ECD.380D016C-ONC125763B.0052992E-C125763B.0053DEC9@bdpnet.dk>
Message-ID: <alpine.LRH.2.00.0909241902350.22327@reclus.nhh.no>

On Thu, 24 Sep 2009, Bjarke Christensen wrote:

> Roger Bivand wrote:
>> If you want simulations around
>> those point estimates, you can introduce spatial autocorrelation with the
>> lambda term, but lambda will not impact the predictions unless the model
>> was misspecified, I believe.
>
> I'm not quite sure I understand why. If lambda does not impact the
> predictions, would its estimate not converge to zero?

Not the estimate of lambda, but the expectation of the spatially 
autocorrelated errors will (I think) be zero - it is their covariance that 
isn't \sigma^2 I.

>
> Is it wrong to do out-of-sample validation using the method used for
> in-sample fitted values in spautolm itself, where
> yhat = Xb + lambda  W  (y-Xb)

This is Cressie (1993) p. 564. Validation maybe, because you have the 
observed y values not used in fitting, but this is not generally the case 
for prediction, so one is left with yhat = Xb, with the possibility of 
adding in the simulated \sigma (I - lambda W)^{-1} e for getting a 
distribution (see Kaluzny et al. (1998) S-plus SpatialStats manual).

>
> (My background is in econometrics, not spatial statistics, so I apologize
> if this is obvious to those with a more acute understanding of spatial
> statistics).

The only difference might be that people coming from econometrics seem to 
believe their formulae more than the applied statisticians(?)

Roger

>
> Thanks for your help,
> Bjarke Christensen
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From fdoespin at gmail.com  Thu Sep 24 21:17:25 2009
From: fdoespin at gmail.com (fernando espindola)
Date: Thu, 24 Sep 2009 15:17:25 -0400
Subject: [R-sig-Geo] Problems with image2Grid
In-Reply-To: <522664f80909240607m365a13a3q15bc97b9596f9a57@mail.gmail.com>
References: <c197abc70909231401w2aae32b7k6131e17e446280be@mail.gmail.com>
	<522664f80909231549p36b73442h4e2808dd49684ac1@mail.gmail.com>
	<522664f80909240301l4fd92dc5if1b3c49f7d13fd8@mail.gmail.com>
	<alpine.LRH.2.00.0909241230160.22327@reclus.nhh.no>
	<522664f80909240607m365a13a3q15bc97b9596f9a57@mail.gmail.com>
Message-ID: <c197abc70909241217p4c827cccqd411b540b51db60d@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090924/95c9515c/attachment.pl>

From jutesoro at yahoo.com  Fri Sep 25 04:08:48 2009
From: jutesoro at yahoo.com (Julius Tesoro)
Date: Thu, 24 Sep 2009 19:08:48 -0700 (PDT)
Subject: [R-sig-Geo] Select.spatial in spplot?
Message-ID: <230346.66358.qm@web57608.mail.re1.yahoo.com>

Can select.spatial() be used in an existing spplot? I have tried selecting points (eq) from a plot generated from sp. However, when I invoke select.spatial(eq). It generates only the points without the background containing the faults. I need the background to select which earthquakes coalesce on which fault. Is there an alternative?

eq.pts<-list("sp.points",eq, col="blue", lwd=0.5, pch = 4)
	
spplot(faults,"Dip", xlim = c(110000,120000),
		ylim = c(3760000,3890000),
		sp.layout=list(eq.pts), 
		col = heat.colors(3))

select.spatial(eq)


From Bjarke.Christensen at sydbank.dk  Fri Sep 25 09:38:16 2009
From: Bjarke.Christensen at sydbank.dk (Bjarke Christensen)
Date: Fri, 25 Sep 2009 09:38:16 +0200
Subject: [R-sig-Geo] predict.spautolm
In-Reply-To: <alpine.LRH.2.00.0909241902350.22327@reclus.nhh.no>
Message-ID: <OFFA9E1BD1.35231647-ONC125763C.0028B0C7-C125763C.002A0236@bdpnet.dk>

Roger Bivand wrote:
>On Thu, 24 Sep 2009, Bjarke Christensen wrote:
>> Roger Bivand wrote:
>>> If you want simulations around
>>> those point estimates, you can introduce spatial autocorrelation with
the
>>> lambda term, but lambda will not impact the predictions unless the
model
>>> was misspecified, I believe.
>>
>> I'm not quite sure I understand why. If lambda does not impact the
>> predictions, would its estimate not converge to zero?
>
>Not the estimate of lambda, but the expectation of the spatially
>autocorrelated errors will (I think) be zero - it is their covariance that

>isn't \sigma^2 I.

I follow your thinking. My rationale was that while the expectation of the
errors is zero globally, it might be non-zero locally because of the
spatial autocorrelation. My current application is for imputing missing
observations (which is also why I wanted to do out-of-sample validation
first). I will check out the references you gave. Thanks for helping.

Bjarke Christensen


From Maxime.Pauwels at univ-lille1.fr  Fri Sep 25 17:57:00 2009
From: Maxime.Pauwels at univ-lille1.fr (Maxime Pauwels)
Date: Fri, 25 Sep 2009 17:57:00 +0200
Subject: [R-sig-Geo] create polygons from a SpatialPixelDataFrame
Message-ID: <4ABCE84C.5000301@univ-lille1.fr>

Dear all,

Is there a simple way to create polygons from a SpatialPixelDataFrame?
Here is my script (data are in attached file):

projrpM<-read.table("NAproj.txt", header=T)
coordinates(projrpM)=~long+lat
gridded(projrpM)=TRUE
proj4string(projrpM)<-CRS("+proj=longlat")
#Get contour lines
projimgrpM<-as(projrpM, "SpatialGridDataFrame")
projimg1rpM<-as.image.SpatialGridDataFrame(projimgrpM["V1"])
projCLrpM<-contourLines(projimg1rpM, levels=0.000186)
projCLSLrpM<-ContourLines2SLDF(projCLrpM)
projlnsrpM<-list("sp.lines", projCLSLrpM, lwd=2, col="white",lty=1)
#Display results
spplot(projrp, scales=list(draw=T), xlim=c(-5, 30), ylim=c(40, 55),
cuts=12, pretty=T, col.regions=gray(180:40/200), sp.layout=list(projlnsrpM))

I'd like to fill the area delimited by white lines (attribute values
superior to levels=0.000186) in white. I could do using "cuts=", but my 
idea is to create an object I could add on another spplot, using 
sp.layout function

Could you help?

Many thanks

max



-- 
Maxime Pauwels
Researcher ID: http://www.researcherid.com/rid/A-1745-2009

Laboratoire de G?n?tique et Evolution des Populations V?g?tales
UMR CNRS 8016
Universit? de Lille, USTL-Lille1
http://gepv.univ-lille1.fr
Tel  : +33 3 20 43 40 76
Fax  : +33 3 20 43 69 79
			
?Impose ta chance, serre ton bonheur et va vers ton risque. A te 
regarder, ils s?habitueront.?
Ren? Char


From edzer.pebesma at uni-muenster.de  Sun Sep 27 16:13:44 2009
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 27 Sep 2009 16:13:44 +0200
Subject: [R-sig-Geo] How to make "meuse" data generates "meuse.grid"
	data?
In-Reply-To: <4BDDC887A30C4F22BC1D11467CA41FE8@MICROSOFE1B0BE>
References: <4BDDC887A30C4F22BC1D11467CA41FE8@MICROSOFE1B0BE>
Message-ID: <4ABF7318.7050907@uni-muenster.de>

Jessica,

I don't know the exact details, either I wasn't there or it is too long
ago.

If you have a polygon that encloses your study region, look into using
method ovelay to find out which grid points of the full (rectangular)
grid fall inside your polygon.

for the sig/wiki: is this a FAQ as well?
--
Edzer

jessica243 wrote:
> Dear Edzer,
> I am sorry to writing again,last time I ask you how to make"meuse" data generates "meuse.grid" data? you told me use "SpatialPixels( Spatialpoints(makegrid(meuse)))".I found using this method, the results do not the same as meuse.grid. could you tell me the details?
> Sincerely
> Jessica
>   

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de/
http://www.springer.com/978-0-387-78170-9 e.pebesma at wwu.de


From p.hiemstra at geo.uu.nl  Mon Sep 28 09:48:34 2009
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Mon, 28 Sep 2009 09:48:34 +0200
Subject: [R-sig-Geo] How to make "meuse" data generates
	"meuse.grid"	data?
In-Reply-To: <4ABF7318.7050907@uni-muenster.de>
References: <4BDDC887A30C4F22BC1D11467CA41FE8@MICROSOFE1B0BE>
	<4ABF7318.7050907@uni-muenster.de>
Message-ID: <4AC06A52.8000405@geo.uu.nl>

Edzer Pebesma wrote:
> Jessica,
>
> I don't know the exact details, either I wasn't there or it is too long
> ago.
>
> If you have a polygon that encloses your study region, look into using
> method ovelay to find out which grid points of the full (rectangular)
> grid fall inside your polygon.
>   
Hi all,

or alternatively, sample directly from the polygon using spsample, see 
also the e-mail I replied ealier to Jessica's question.

quote:

Hi,

Loading the meuse.grid dataset is done using:

data(meuse.grid)

to generate meuse.grid from meuse use something like:

data(meuse)
coordinates(meuse) = ~x+y
meuse_grid = spsample(meuse, type = "regular", cellsize = c(40,40))
gridded(meuse_grid) = TRUE

unquote
> for the sig/wiki: is this a FAQ as well?
> --
> Edzer
>
> jessica243 wrote:
>   
>> Dear Edzer,
>> I am sorry to writing again,last time I ask you how to make"meuse" data generates "meuse.grid" data? you told me use "SpatialPixels( Spatialpoints(makegrid(meuse)))".I found using this method, the results do not the same as meuse.grid.
Could you define "not the same".

cheers,
Paul
>>  could you tell me the details?
>> Sincerely
>> Jessica
>>   
>>     
>
>   


-- 
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone:  +3130 274 3113 Mon-Tue
Phone:  +3130 253 5773 Wed-Fri
http://intamap.geo.uu.nl/~paul


From p.hiemstra at geo.uu.nl  Mon Sep 28 15:54:41 2009
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Mon, 28 Sep 2009 15:54:41 +0200
Subject: [R-sig-Geo] [R-sig-geo] Interpolation of measures with
 measurement errors
In-Reply-To: <7ce8d7d30909220840h63c3b99asfe3f82c588774afa@mail.gmail.com>
References: <7ce8d7d30909220840h63c3b99asfe3f82c588774afa@mail.gmail.com>
Message-ID: <4AC0C021.6000106@geo.uu.nl>

Hi,

Have a look at this:

http://books.google.com/books?id=5n_XuL2Wx1EC&pg=PA94&lpg=PA94&dq=interpolating+with+measurement+error&source=bl&ots=837gfXTqC4&sig=qzOg_9cuDDa_Nk5j71b_7P-1iqo&hl=en&ei=bcDASriyJ5De-QbJjeHKAQ&sa=X&oi=book_result&ct=result&resnum=3#v=onepage&q=interpolating%20with%20measurement%20error&f=false

third hit when googling for "interpolating with measurement error"

cheers,
Paul

note replying from the r-sig-geo list, also cc'ing the ai-geostats list

Enrico Guastaldi wrote:
> Dear list members,
> I'm looking for some kind of interpolation for values of an
> environmental variable which has been measured together the measurement
> errors.
> I could use some kind of kriging, however I exactly know the magnitude of
> each error at every sampled location, i.e. the value plus or minus the error
> gave me by the laboratory.
> Could anyone tell me what kind of function should I use for handling this
> problem?
> It should be nice some R package, of course, but I need to understand the
> background theory.
> Thanks in advance,
> Regards,
> Enrico Guastaldi
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   


-- 
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone:  +3130 274 3113 Mon-Tue
Phone:  +3130 253 5773 Wed-Fri
http://intamap.geo.uu.nl/~paul


From slv511 at mail.usask.ca  Tue Sep 29 19:59:15 2009
From: slv511 at mail.usask.ca (Steven Van Wilgenburg)
Date: Tue, 29 Sep 2009 11:59:15 -0600 (CST)
Subject: [R-sig-Geo] RSAGA, Bayes' Theorem and summary stats
Message-ID: <15699507.1254247155697.JavaMail.slv511@mail.usask.ca>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20090929/92653ffa/attachment.html>

From alobolistas at gmail.com  Wed Sep 30 12:52:12 2009
From: alobolistas at gmail.com (Agustin Lobo)
Date: Wed, 30 Sep 2009 12:52:12 +0200
Subject: [R-sig-Geo] References to packages sp, spgrass6, raster and rgdal
Message-ID: <4AC3385C.2080807@gmail.com>

Could anybody (best the author(s)) provide
a reference to be included in an article
for packages sp, spgrass6, raster and rgdal ?

Thanks

Agus


From torleif.lunde at cih.uib.no  Wed Sep 30 12:57:04 2009
From: torleif.lunde at cih.uib.no (Torleif Markussen Lunde)
Date: Wed, 30 Sep 2009 12:57:04 +0200
Subject: [R-sig-Geo] References to packages sp, spgrass6,
	raster and rgdal
In-Reply-To: <4AC3385C.2080807@gmail.com>
References: <4AC3385C.2080807@gmail.com>
Message-ID: <200909301257.04068.torleif.lunde@cih.uib.no>

Hi

Good that citations will be included. Try
citation("packagename")

Ex: 
citation("sp")

Best wishes
Torleif Markussen Lunde
Research fellow
Centre for International Health/Bjerknes-UiB
University of Bergen

On Wednesday 30 September 2009 12:52:12 Agustin Lobo wrote:
> Could anybody (best the author(s)) provide
> a reference to be included in an article
> for packages sp, spgrass6, raster and rgdal ?
> 
> Thanks
> 
> Agus
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From jutesoro at yahoo.com  Wed Sep 30 14:12:19 2009
From: jutesoro at yahoo.com (Julius Tesoro)
Date: Wed, 30 Sep 2009 05:12:19 -0700 (PDT)
Subject: [R-sig-Geo] dataframe access from SpatialLinesDataFrame and psp
	line segment identification
In-Reply-To: <mailman.11.1254304803.27512.r-sig-geo@stat.math.ethz.ch>
Message-ID: <118538.48483.qm@web57616.mail.re1.yahoo.com>

Hello again guys!

I wanted to extract an attribute on the data.frame from the SpatialLinesDataFrame nearest to the given points. I have a point pattern ("ppp") converted from a SpatialPointsDataFrame and I also have a line segment pattern("psp") converted from a SpatialLinesDataFrame. I used project2segment() to identify the distance from each point to the nearest line. 

I got the following results:

project2segment(rs2,faults.psp)

$Xproj
marked planar point pattern: 15 points 
marks are numeric, of type 'integer' 
window: rectangle = [2041800, 2055500] x [5483700, 5497500] units 

$mapXY
 [1] 454 454 452 454 454 454 452 452 452 452 452 452 452 452 452

$d
 [1] 33968.58 34510.82 34858.51 30815.14 38627.78 40485.38 40898.08 41335.99
 [9] 36471.86 32670.05 42284.76 42614.63 43422.89 30598.01 41518.95

$tp
 [1] 0.0000000 0.0000000 0.5489390 0.0000000 0.0000000 0.0000000 0.6827169
 [8] 0.6040709 0.4998253 0.5010383 0.6046778 0.6081116 0.6547277 0.4724737
[15] 0.5071538

How are these segments identified in a map? Are these numbers in $mapXY found from the original "SpatialLinesDataFrame" from which it was converted? 

Thanks.


From edzer.pebesma at uni-muenster.de  Wed Sep 30 16:38:18 2009
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 30 Sep 2009 16:38:18 +0200
Subject: [R-sig-Geo] References to packages sp, spgrass6,
	raster and rgdal
In-Reply-To: <4AC3385C.2080807@gmail.com>
References: <4AC3385C.2080807@gmail.com>
Message-ID: <4AC36D5A.5080708@uni-muenster.de>

If package manuals don't work (citation("rgdal")), I think for sp,
spgrass6 and rgdal the book should: www.asdar-book.org. For raster, I
don't know. There's also the r-news article on sp, and an osgeo journal
article on spgrass.

Agustin Lobo wrote:
> Could anybody (best the author(s)) provide
> a reference to be included in an article
> for packages sp, spgrass6, raster and rgdal ?
>
> Thanks
>
> Agus
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763 http://ifgi.uni-muenster.de/
http://www.springer.com/978-0-387-78170-9 e.pebesma at wwu.de


From hzambran.newsgroups at gmail.com  Wed Sep 30 22:29:57 2009
From: hzambran.newsgroups at gmail.com (Mauricio Zambrano)
Date: Wed, 30 Sep 2009 22:29:57 +0200
Subject: [R-sig-Geo] First thoughts on spatio-temporal classes...
In-Reply-To: <6c35a4fc0909180920m19725f7by566939c877f19c20@mail.gmail.com>
References: <6c35a4fc0909180920m19725f7by566939c877f19c20@mail.gmail.com>
Message-ID: <63d616b0909301329wfd8e65ex73800b01770c7e39@mail.gmail.com>

Hi Blair,

I'm sorry but my late answer, but this is a complicated period for me ...

2009/9/18 Blair Christian <blair.christian at gmail.com>:
> Hi all,
>
> This is in response to an earlier post of mine inquiring about options for
> spatio-temporal classes in R.
>
> Thank you to all who replied for your interest in spatio-temporal data
> classes and methods. ?There were many excellent comments in your emails. ?I
> have been attending the SAMSI conference on space-time
> analysis<http://www.samsi.info/programs/2009spatialprogram.shtml>this
> week and have put together a summary (a working draft) of some
> thoughts<http://www.isds.duke.edu/%7Ejbc30/SpatioTemporal/workGroupComp.pdf>I
> have about classes.
>
> I also started a bare bones webpage:
> http://www.isds.duke.edu/~jbc30/SpatioTemporal/
>
> A also put up the latex source code and bib file I used if you are
> interested in making additions, corrections, or other. ?Please email me any
> changes, and I'll maintain an RCS version of it.
>
> I'll put some plots up there when I have time to give you all an idea of
> what my context is. ?Ironically, I can't ssh to the webserver from work (at
> the US EPA), so I can only update it from home.
>
>
> Here are some questions to you all:
>
> - What data do you have interest in analyzing?

I want to analyse long-term daily/monthly/annual hydrological time
series of temperature and precipitation, measured in point gauging
stations.

>
> - What type of code do you have to contribute?

I'm developing a package for management and interpolation of this type
of data, in which the temporal functions use the zoo package as
building block, and the spatial functions are mainly wrappers to the
krige function of the 'gstat' package and the autoKrige function of
the 'automap' package, aiming at easing this tasks to people with good
knowledge in hydrology and GIS, but little or no experience in R.
>
> - Are you interested in writing classes/methods? ?If so, what is your
> background? ?(I can provide several tutorials on S4 classes on the web that
> I found useful).

I'm interested in writing classes, but I have some experience with S3
classes and no experience with S4 classes, and I would appreciate if
you could share any material for reading about this.

>
> I will pass along these related packages as being related to spatio-temporal
> data:
> trip (trip class extends SpatialPointsDataFrame), pastecs, tripEstimation,
> hydrosalinity(?), PBSmapping(?), RadioSonde, STARIMA(?), Bayesian Vector
> Accumulation(?), spBayes(?), INLA (Havard Rue website)
>
> I skimmed a fair number of time related packages (more than just timeDate
> and chron), including xts, zoo, (tseries, timeSeries, ts, its, etc) as well,
> and came to the conclusion that it would best to allow either a time series
> type package (regular or irregular times) as well as a package for
> continuous time (functional data, like paths of animals, in the trip
> library), and I'm a fan of the fda
> library<http://ego.psych.mcgill.ca/misc/fda/>.
> It would be nice to have easy spline/FDA access for datasets where time is
> collected in a continuous manner rather than in the usual arima grid
> setting.

The very basic idea that I have in mind for implementing the
spatio-temporal classes for regular time series located in point
objects is to add a slot of 'zoo' and/or 'xts' type to the
'SpatialPointsDataFrame' class, but I have no idea about how to do it.

>
> With that information dump, I'll try and get another update out in about two
> weeks depending on my schedule, which should include any progress I've made
> that I'm satisfied with. ?I will respond to individual emails as well.
>
>
> Cheers,
> Blair
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

So, if I can help in some way, you can count on me.

Kinds,

Mauricio Zambrano B.
-- 
-- 
?============================================
Ph.D. Candidate, 3rd year
University of Trento
Dept. of Civil and Env. Engineering
Trento / Italy
=============================================
Linux user #454569 -- Ubuntu user #17469
=============================================
"Planning is bringing the future into the present
so that you can do something about it now"
(Alan Lakein)


From brenning at uwaterloo.ca  Wed Sep 30 23:00:45 2009
From: brenning at uwaterloo.ca (Alexander Brenning)
Date: Wed, 30 Sep 2009 17:00:45 -0400
Subject: [R-sig-Geo] RSAGA, Bayes' Theorem and summary stats
Message-ID: <214AAAD266FCCE4D8DA4916801A8DE7DE8E52338D6@CONNMAIL.connect.uwaterloo.ca>

Hi Steve,

I recommend checking the data type of all involved rasters in SAGA GIS (GUI) itself, maybe one of the grids involved is integer so everything gets rounded to zero? After loading a grid into SAGA GIS, select it in the 'Data' tab of the 'Workspace' window, and examine the 'Description' in the 'Object Properties' window. There's a 'Value Type' attribute, which should be FLOAT.
If mixed data types (float, integer) are involved in your grid calculus call, changing the order may help.

Also, try splitting the formula into several calls to be able to track intermediate results. And if things are still puzzling, do some simple operations to really see what's going on.

And finally, the SAGA forum on SourceForge may provide help on SAGA GIS (there's also a bug tracker, in case this is a bug).
http://sourceforge.net/projects/saga-gis/
http://sourceforge.net/projects/saga-gis/forums/forum/790705

I hope this helps
 Alex



Steven Van Wilgenburg wrote:
> Hi.
>
> I am attempting to create a method to forensically assign migratory
> birds to their geographic origins (on a GIS layer from
> http://wateriso.eas.purdue.edu/waterisotopes/pages/data_access/ArcGrids.html)
> based on stable-istope analyses of the feathers.
>
> I am trying to use Bayes' Theorem to assign birds, one at a time to
> the aforementioned surface (after calibration of the surface into
> values expected for bird feathers). I am having some success with the
> following script.....
>
> #####ASSIGN BIRDS using Bayes' Theorem for a Normal Probability
> density################################## birds<- c(-121.07,-112.56) SD<-12.56587 for (i in 1:length(birds)){ rsaga.grid.calculus(in.grids
> = c("wtspddf.sgrd"), out.grid =
> paste("wtspassignment",i,".sgrd",sep=""), formula =
> paste("(1/(sqrt(2*",pi,")*",SD,"))*exp(-(1/(2*(",SD,")2))","*(",birds[i],"-a)2)",sep=""))
>  }
>
>
> However, I wish to multiply this with another surface representing
> prior probabilities, but the results from the above script have so
> many decimal places (e.g. max 0.03141 min 0.000006)  that  applying
> the prior probabilities appears to exceed the number of digits
> allowed for a grid, resulting in all zeros). I want to normalize the
> above by dividing by the maximum value of the result, but see no way
> to calculate the maximum value for a surface. Does anyone know of a
> way I could do this? Or is it possible to reset the number of digits?
> I suppose that ther disadvantage to changing the number of digits
> would expand the file sizes enormously....
>
> I suppose I could also consider multiplying by an arbitrary amount
> first (before applying priors) as an alternative, but wanted to
> normalize by dividing by max. Suggestions would be most appreciated.
>
>
>
> Cheers
>
>
>
> -Steve
>
>


