From peter.vanhorssen at wxs.nl  Sat Feb  3 22:16:40 2018
From: peter.vanhorssen at wxs.nl (Peter van Horssen)
Date: Sat, 3 Feb 2018 22:16:40 +0100
Subject: [R-sig-Geo] sf/ggplot version hell....
Message-ID: <3081650f-4b19-0ce4-064c-ef54972f49ec@wxs.nl>

Hi all,

I am trying to plot a simple feature object with ggplot but i can't find 
the proper ggplot version.
I am following : http://ggplot2.tidyverse.org/reference/ggsf.html

running R 3.4.3 fro win10 x64
I tried the newest version from? cran (ggplot 2.2.1)? but? keep ending 
up with 'could not find function "geom_sf"'

somehow I seem to miss? something

can somebody point me to (information with) the versions of sf and 
ggplot which do work ?

thanks in advance

Peter van Horssen


From rubak at math.aau.dk  Sat Feb  3 22:33:18 2018
From: rubak at math.aau.dk (Ege Rubak)
Date: Sat, 3 Feb 2018 22:33:18 +0100
Subject: [R-sig-Geo] sf/ggplot version hell....
In-Reply-To: <3081650f-4b19-0ce4-064c-ef54972f49ec@wxs.nl>
References: <3081650f-4b19-0ce4-064c-ef54972f49ec@wxs.nl>
Message-ID: <8d517b41-e9d7-8208-76c1-10860860a433@math.aau.dk>

The usual thing I've seen (e.g. in a workshop by Edzer Pebesma) is "You 
need the development version of ggplot2...". Of course that can't be 
true forever, but maybe it still is.
If you have either the `devtools` or `remotes` package installed you can 
just install the GitHub version of `ggplot2` directly by loading one of 
those packages and typing:
   install.github("tidyverse/ggplot2")

Cheers,
Ege


On 02/03/2018 10:16 PM, Peter van Horssen wrote:
> Hi all,
> 
> I am trying to plot a simple feature object with ggplot but i can't find 
> the proper ggplot version.
> I am following : http://ggplot2.tidyverse.org/reference/ggsf.html
> 
> running R 3.4.3 fro win10 x64
> I tried the newest version from? cran (ggplot 2.2.1)? but? keep ending 
> up with 'could not find function "geom_sf"'
> 
> somehow I seem to miss? something
> 
> can somebody point me to (information with) the versions of sf and 
> ggplot which do work ?
> 
> thanks in advance
> 
> Peter van Horssen
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From edzer.pebesma at uni-muenster.de  Sat Feb  3 23:48:07 2018
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sat, 3 Feb 2018 14:48:07 -0800
Subject: [R-sig-Geo] sf/ggplot version hell....
In-Reply-To: <8d517b41-e9d7-8208-76c1-10860860a433@math.aau.dk>
References: <3081650f-4b19-0ce4-064c-ef54972f49ec@wxs.nl>
 <8d517b41-e9d7-8208-76c1-10860860a433@math.aau.dk>
Message-ID: <e8221221-f298-304f-b0ef-319255a3aa79@uni-muenster.de>



On 02/03/2018 01:33 PM, Ege Rubak wrote:
> The usual thing I've seen (e.g. in a workshop by Edzer Pebesma) is "You
> need the development version of ggplot2...". Of course that can't be
> true forever, but maybe it still is.
> If you have either the `devtools` or `remotes` package installed you can
> just install the GitHub version of `ggplot2` directly by loading one of
> those packages and typing:
> ? install.github("tidyverse/ggplot2")

For both packages it is

install_github("tidyverse/ggplot2")

This is one the more frequently asked question here, at rstudio::conf,
too, I noticed; Hadley seems to be aware, but is also pretty much
involved in the conference right now.

Regards,

> 
> Cheers,
> Ege
> 
> 
> On 02/03/2018 10:16 PM, Peter van Horssen wrote:
>> Hi all,
>>
>> I am trying to plot a simple feature object with ggplot but i can't
>> find the proper ggplot version.
>> I am following : http://ggplot2.tidyverse.org/reference/ggsf.html
>>
>> running R 3.4.3 fro win10 x64
>> I tried the newest version from? cran (ggplot 2.2.1)? but? keep ending
>> up with 'could not find function "geom_sf"'
>>
>> somehow I seem to miss? something
>>
>> can somebody point me to (information with) the versions of sf and
>> ggplot which do work ?
>>
>> thanks in advance
>>
>> Peter van Horssen
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From basille.web at ase-research.org  Sun Feb  4 03:10:23 2018
From: basille.web at ase-research.org (Mathieu Basille)
Date: Sat, 3 Feb 2018 21:10:23 -0500
Subject: [R-sig-Geo] sf/ggplot version hell....
In-Reply-To: <e8221221-f298-304f-b0ef-319255a3aa79@uni-muenster.de>
References: <3081650f-4b19-0ce4-064c-ef54972f49ec@wxs.nl>
 <8d517b41-e9d7-8208-76c1-10860860a433@math.aau.dk>
 <e8221221-f298-304f-b0ef-319255a3aa79@uni-muenster.de>
Message-ID: <9893e0d8-fc0b-4ca2-4072-4d13da50858f@ase-research.org>

Hey Edzer,

Just to be clear, do you mean master branches of both 'ggplot2' and 'sf' on
GitHub? I.e.:

  devtools::install_github("tidyverse/ggplot2")

AND

  devtools::install_github("r-spatial/sf")

or the CRAN version of 'sf' is enough?

Thanks!
Mathieu.


On 02/03/2018 05:48 PM, Edzer Pebesma wrote:
> 
> 
> On 02/03/2018 01:33 PM, Ege Rubak wrote:
>> The usual thing I've seen (e.g. in a workshop by Edzer Pebesma) is "You
>> need the development version of ggplot2...". Of course that can't be
>> true forever, but maybe it still is.
>> If you have either the `devtools` or `remotes` package installed you can
>> just install the GitHub version of `ggplot2` directly by loading one of
>> those packages and typing:
>> ? install.github("tidyverse/ggplot2")
> 
> For both packages it is
> 
> install_github("tidyverse/ggplot2")
> 
> This is one the more frequently asked question here, at rstudio::conf,
> too, I noticed; Hadley seems to be aware, but is also pretty much
> involved in the conference right now.
> 
> Regards,
> 
>>
>> Cheers,
>> Ege
>>
>>
>> On 02/03/2018 10:16 PM, Peter van Horssen wrote:
>>> Hi all,
>>>
>>> I am trying to plot a simple feature object with ggplot but i can't
>>> find the proper ggplot version.
>>> I am following : https://urldefense.proofpoint.com/v2/url?u=http-3A__ggplot2.tidyverse.org_reference_ggsf.html&d=DwIGaQ&c=pZJPUDQ3SB9JplYbifm4nt2lEVG5pWx2KikqINpWlZM&r=wg6hkvvamahniIw3_XPWdQ&m=KhG0ojJPpP0hLe7njxYz-ieSx2PGqkf67v1Hu_uc0Rk&s=TBV-dhTy0OKTtCyCuedpyCODT68ClMF28B99edUKTJ4&e=
>>>
>>> running R 3.4.3 fro win10 x64
>>> I tried the newest version from? cran (ggplot 2.2.1)? but? keep ending
>>> up with 'could not find function "geom_sf"'
>>>
>>> somehow I seem to miss? something
>>>
>>> can somebody point me to (information with) the versions of sf and
>>> ggplot which do work ?
>>>
>>> thanks in advance
>>>
>>> Peter van Horssen
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dgeo&d=DwIGaQ&c=pZJPUDQ3SB9JplYbifm4nt2lEVG5pWx2KikqINpWlZM&r=wg6hkvvamahniIw3_XPWdQ&m=KhG0ojJPpP0hLe7njxYz-ieSx2PGqkf67v1Hu_uc0Rk&s=c0O8Xi-7tbU4jEZcQ6xEUVL_ynmHnfSygDJBviQ-CWg&e=
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dgeo&d=DwIGaQ&c=pZJPUDQ3SB9JplYbifm4nt2lEVG5pWx2KikqINpWlZM&r=wg6hkvvamahniIw3_XPWdQ&m=KhG0ojJPpP0hLe7njxYz-ieSx2PGqkf67v1Hu_uc0Rk&s=c0O8Xi-7tbU4jEZcQ6xEUVL_ynmHnfSygDJBviQ-CWg&e=
> 

-- 

Mathieu Basille

basille at ufl.edu | https://urldefense.proofpoint.com/v2/url?u=https-3A__mablab.org_&d=DwIDaQ&c=pZJPUDQ3SB9JplYbifm4nt2lEVG5pWx2KikqINpWlZM&r=OnBRYbn-fPC7OCR-yjUnqiUnj2gfCrtQn15ueJyGfIM&m=jRgshgeAhJHMTI24bZN39buPxOX5G2mr1JZAzeUMiNU&s=H0V_g0CDkrF8MY9L8u9jW-0qWEv9paKv4luxfKNYrWY&e=
+1 954-577-6314 | University of Florida FLREC

  ? Le tout est de tout dire, et je manque de mots
  Et je manque de temps, et je manque d'audace. ?
  ? Paul ?luard


From edzer.pebesma at uni-muenster.de  Sun Feb  4 04:07:58 2018
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sat, 3 Feb 2018 19:07:58 -0800
Subject: [R-sig-Geo] sf/ggplot version hell....
In-Reply-To: <9893e0d8-fc0b-4ca2-4072-4d13da50858f@ase-research.org>
References: <3081650f-4b19-0ce4-064c-ef54972f49ec@wxs.nl>
 <8d517b41-e9d7-8208-76c1-10860860a433@math.aau.dk>
 <e8221221-f298-304f-b0ef-319255a3aa79@uni-muenster.de>
 <9893e0d8-fc0b-4ca2-4072-4d13da50858f@ase-research.org>
Message-ID: <3a43f063-318f-772f-12ba-e19fb579f7bf@uni-muenster.de>



On 02/03/2018 06:10 PM, Mathieu Basille wrote:
> Hey Edzer,
> 
> Just to be clear, do you mean master branches of both 'ggplot2' and 'sf' on
> GitHub? I.e.:
> 
>   devtools::install_github("tidyverse/ggplot2")
> 
> AND
> 
>   devtools::install_github("r-spatial/sf")
> 
> or the CRAN version of 'sf' is enough?

For sf, the CRAN version is enough.

> 
> Thanks!
> Mathieu.
> 
> 
> On 02/03/2018 05:48 PM, Edzer Pebesma wrote:
>>
>>
>> On 02/03/2018 01:33 PM, Ege Rubak wrote:
>>> The usual thing I've seen (e.g. in a workshop by Edzer Pebesma) is "You
>>> need the development version of ggplot2...". Of course that can't be
>>> true forever, but maybe it still is.
>>> If you have either the `devtools` or `remotes` package installed you can
>>> just install the GitHub version of `ggplot2` directly by loading one of
>>> those packages and typing:
>>> ? install.github("tidyverse/ggplot2")
>>
>> For both packages it is
>>
>> install_github("tidyverse/ggplot2")
>>
>> This is one the more frequently asked question here, at rstudio::conf,
>> too, I noticed; Hadley seems to be aware, but is also pretty much
>> involved in the conference right now.
>>
>> Regards,
>>
>>>
>>> Cheers,
>>> Ege
>>>
>>>
>>> On 02/03/2018 10:16 PM, Peter van Horssen wrote:
>>>> Hi all,
>>>>
>>>> I am trying to plot a simple feature object with ggplot but i can't
>>>> find the proper ggplot version.
>>>> I am following : https://urldefense.proofpoint.com/v2/url?u=http-3A__ggplot2.tidyverse.org_reference_ggsf.html&d=DwIGaQ&c=pZJPUDQ3SB9JplYbifm4nt2lEVG5pWx2KikqINpWlZM&r=wg6hkvvamahniIw3_XPWdQ&m=KhG0ojJPpP0hLe7njxYz-ieSx2PGqkf67v1Hu_uc0Rk&s=TBV-dhTy0OKTtCyCuedpyCODT68ClMF28B99edUKTJ4&e=
>>>>
>>>> running R 3.4.3 fro win10 x64
>>>> I tried the newest version from? cran (ggplot 2.2.1)? but? keep ending
>>>> up with 'could not find function "geom_sf"'
>>>>
>>>> somehow I seem to miss? something
>>>>
>>>> can somebody point me to (information with) the versions of sf and
>>>> ggplot which do work ?
>>>>
>>>> thanks in advance
>>>>
>>>> Peter van Horssen
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dgeo&d=DwIGaQ&c=pZJPUDQ3SB9JplYbifm4nt2lEVG5pWx2KikqINpWlZM&r=wg6hkvvamahniIw3_XPWdQ&m=KhG0ojJPpP0hLe7njxYz-ieSx2PGqkf67v1Hu_uc0Rk&s=c0O8Xi-7tbU4jEZcQ6xEUVL_ynmHnfSygDJBviQ-CWg&e=
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dgeo&d=DwIGaQ&c=pZJPUDQ3SB9JplYbifm4nt2lEVG5pWx2KikqINpWlZM&r=wg6hkvvamahniIw3_XPWdQ&m=KhG0ojJPpP0hLe7njxYz-ieSx2PGqkf67v1Hu_uc0Rk&s=c0O8Xi-7tbU4jEZcQ6xEUVL_ynmHnfSygDJBviQ-CWg&e=
>>
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From basille.web at ase-research.org  Sun Feb  4 07:09:01 2018
From: basille.web at ase-research.org (Mathieu Basille)
Date: Sun, 4 Feb 2018 01:09:01 -0500
Subject: [R-sig-Geo] sf/ggplot version hell....
In-Reply-To: <3a43f063-318f-772f-12ba-e19fb579f7bf@uni-muenster.de>
References: <3081650f-4b19-0ce4-064c-ef54972f49ec@wxs.nl>
 <8d517b41-e9d7-8208-76c1-10860860a433@math.aau.dk>
 <e8221221-f298-304f-b0ef-319255a3aa79@uni-muenster.de>
 <9893e0d8-fc0b-4ca2-4072-4d13da50858f@ase-research.org>
 <3a43f063-318f-772f-12ba-e19fb579f7bf@uni-muenster.de>
Message-ID: <a1612fa4-7165-8b55-0057-40940808cbbe@ase-research.org>

Thanks Edzer!

Mathieu.


On 02/03/2018 10:07 PM, Edzer Pebesma wrote:
> 
> 
> On 02/03/2018 06:10 PM, Mathieu Basille wrote:
>> Hey Edzer,
>>
>> Just to be clear, do you mean master branches of both 'ggplot2' and 'sf' on
>> GitHub? I.e.:
>>
>>   devtools::install_github("tidyverse/ggplot2")
>>
>> AND
>>
>>   devtools::install_github("r-spatial/sf")
>>
>> or the CRAN version of 'sf' is enough?
> 
> For sf, the CRAN version is enough.
> 
>>
>> Thanks!
>> Mathieu.
>>
>>
>> On 02/03/2018 05:48 PM, Edzer Pebesma wrote:
>>>
>>>
>>> On 02/03/2018 01:33 PM, Ege Rubak wrote:
>>>
>>> For both packages it is
>>>
>>> install_github("tidyverse/ggplot2")
>>>
>>> This is one the more frequently asked question here, at rstudio::conf,
>>> too, I noticed; Hadley seems to be aware, but is also pretty much
>>> involved in the conference right now.
>>>
>>> Regards,
>>>
>>>
>>
> 

-- 

Mathieu Basille

basille at ufl.edu | https://urldefense.proofpoint.com/v2/url?u=https-3A__mablab.org_&d=DwIDaQ&c=pZJPUDQ3SB9JplYbifm4nt2lEVG5pWx2KikqINpWlZM&r=OnBRYbn-fPC7OCR-yjUnqiUnj2gfCrtQn15ueJyGfIM&m=zAqn9HhuHDUv0_zCNiZwwnACqH9YxdKqOro06jOQqj0&s=PcB8IIzZsJuUlyqv_zllU05hYqm8TBNwS5MEC3Tijko&e=
+1 954-577-6314 | University of Florida FLREC

  ? Le tout est de tout dire, et je manque de mots
  Et je manque de temps, et je manque d'audace. ?
  ? Paul ?luard


From peter.vanhorssen at wxs.nl  Sun Feb  4 13:20:21 2018
From: peter.vanhorssen at wxs.nl (Peter van Horssen)
Date: Sun, 4 Feb 2018 13:20:21 +0100
Subject: [R-sig-Geo] Fwd: Re:  sf/ggplot version hell....
In-Reply-To: <0397096a-aac8-1115-37b0-b0b75fa3803b@wxs.nl>
References: <0397096a-aac8-1115-37b0-b0b75fa3803b@wxs.nl>
Message-ID: <a2fb7ffd-5d7b-dcad-56ef-e5c8aafe9cca@wxs.nl>




-------- Doorgestuurd bericht --------
Onderwerp: 	Re: [R-sig-Geo] sf/ggplot version hell....
Datum: 	Sun, 4 Feb 2018 10:55:43 +0100
Van: 	Peter van Horssen <peter.vanhorssen at wxs.nl>
Aan: 	Edzer Pebesma <edzer.pebesma at uni-muenster.de>



thanks for clarifications, solved!

my bad, I (wrongly) assumed that the dev version of tidyverse also
incorporated the dev version of ggplot2.

thanks,

Peter



Op 3-2-2018 om 23:48 schreef Edzer Pebesma:
>
> On 02/03/2018 01:33 PM, Ege Rubak wrote:
>> The usual thing I've seen (e.g. in a workshop by Edzer Pebesma) is "You
>> need the development version of ggplot2...". Of course that can't be
>> true forever, but maybe it still is.
>> If you have either the `devtools` or `remotes` package installed you can
>> just install the GitHub version of `ggplot2` directly by loading one of
>> those packages and typing:
>>  ? install.github("tidyverse/ggplot2")
> For both packages it is
>
> install_github("tidyverse/ggplot2")
>
> This is one the more frequently asked question here, at rstudio::conf,
> too, I noticed; Hadley seems to be aware, but is also pretty much
> involved in the conference right now.
>
> Regards,
>
>> Cheers,
>> Ege
>>
>>
>> On 02/03/2018 10:16 PM, Peter van Horssen wrote:
>>> Hi all,
>>>
>>> I am trying to plot a simple feature object with ggplot but i can't
>>> find the proper ggplot version.
>>> I am following : http://ggplot2.tidyverse.org/reference/ggsf.html
>>>
>>> running R 3.4.3 fro win10 x64
>>> I tried the newest version from? cran (ggplot 2.2.1)? but? keep ending
>>> up with 'could not find function "geom_sf"'
>>>
>>> somehow I seem to miss? something
>>>
>>> can somebody point me to (information with) the versions of sf and
>>> ggplot which do work ?
>>>
>>> thanks in advance
>>>
>>> Peter van Horssen
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From loris.bennett at fu-berlin.de  Tue Feb  6 16:28:16 2018
From: loris.bennett at fu-berlin.de (Loris Bennett)
Date: Tue, 06 Feb 2018 16:28:16 +0100
Subject: [R-sig-Geo] gdistance::shortestPath throws error "not a symmetric
 matrix"
Message-ID: <87d11igmsv.fsf@hornfels.zedat.fu-berlin.de>

Hi,

Before I try to construct a reproducible example, which would probably
be quite time consuming, I wondered if this is a known problem.  I am
calling 'shortestPath' thus


  shortestPath(conduct_Tobler,
               origin = sites at coords[1,],
               goal = sites at coords[2,],
               output="SpatialLines")

and get the error

  Error in asMethod(object) :
    not a symmetric matrix; consider forceSymmetric() or symmpart()

with the following traceback:

  pairlist("stop(\"not a symmetric matrix; consider forceSymmetric() or
  symmpart()\")",
    "asMethod(object)",
    "as(Laplacian,\"symmetricMatrix\")",
    ".Laplacian(x)", ".flowMap(x, ci, cj, tc)",
    ".local(x, origin, goal, ...)",
  c("passage(conduct_Tobler, origin =sites at coords[5, ], goal =
  sites at coords[3, ", " ])"),
  c("passage(conduct_Tobler, origin = sites at coords[5, ], goal =
  sites at coords[3, ", " ])"),
    "eval(ei, envir)", "eval(ei, envir)",
    "withVisible(eval(ei, envir))",
    "source(\"./Skript.R\")")

However, a shape file is produced.

Any ideas what the problem might be?

Cheers,

Loris

--
Dr. Loris Bennett (Mr.)
ZEDAT, Freie Universit?t Berlin         Email loris.bennett at fu-berlin.de


From knitter at geographie.uni-kiel.de  Tue Feb  6 16:42:25 2018
From: knitter at geographie.uni-kiel.de (Daniel Knitter)
Date: Tue, 6 Feb 2018 16:42:25 +0100
Subject: [R-sig-Geo] 
 gdistance::shortestPath throws error "not a symmetric matrix"
In-Reply-To: <87d11igmsv.fsf@hornfels.zedat.fu-berlin.de>
References: <87d11igmsv.fsf@hornfels.zedat.fu-berlin.de>
Message-ID: <20180206164225.0cb6dbc8@LGI-ASSI15>

Hi Loris,

Tobler is an asymmetric function [as long as you used this one: function(s){6 * exp(-3.5 * abs(s + 0.05))} 

Did you create a symmetric transition object by calling 

"transition(InputRaster, TransitionFuncion, Neighborhood, symm=TRUE)"

This would explain the warning, because you need to set "symm=FALSE". symm=TRUE is only needed for random walks (i.e. passage function).

Cheers,
Daniel

On Tue, 06 Feb 2018 16:28:16 +0100
"Loris Bennett" <loris.bennett at fu-berlin.de> wrote:

> Hi,
> 
> Before I try to construct a reproducible example, which would probably
> be quite time consuming, I wondered if this is a known problem.  I am
> calling 'shortestPath' thus
> 
> 
>   shortestPath(conduct_Tobler,
>                origin = sites at coords[1,],
>                goal = sites at coords[2,],
>                output="SpatialLines")
> 
> and get the error
> 
>   Error in asMethod(object) :
>     not a symmetric matrix; consider forceSymmetric() or symmpart()
> 
> with the following traceback:
> 
>   pairlist("stop(\"not a symmetric matrix; consider forceSymmetric() or
>   symmpart()\")",
>     "asMethod(object)",
>     "as(Laplacian,\"symmetricMatrix\")",
>     ".Laplacian(x)", ".flowMap(x, ci, cj, tc)",
>     ".local(x, origin, goal, ...)",
>   c("passage(conduct_Tobler, origin =sites at coords[5, ], goal =
>   sites at coords[3, ", " ])"),
>   c("passage(conduct_Tobler, origin = sites at coords[5, ], goal =
>   sites at coords[3, ", " ])"),
>     "eval(ei, envir)", "eval(ei, envir)",
>     "withVisible(eval(ei, envir))",
>     "source(\"./Skript.R\")")
> 
> However, a shape file is produced.
> 
> Any ideas what the problem might be?
> 
> Cheers,
> 
> Loris
> 
> --
> Dr. Loris Bennett (Mr.)
> ZEDAT, Freie Universit?t Berlin         Email loris.bennett at fu-berlin.de
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 

Dr. Daniel Knitter
CRC1266 -- Scales of Transformation
Project A2 "Integrative Modeling of Socio-Environmental Dynamics"

Christian-Albrechts-Universit?t zu Kiel
Department of Geography
Physical Geography -- Landscape Ecology and Geoinformation
Ludewig-Meyn-Str. 14, room 109
D - 24118 Kiel, Germany

Phone: +49 431 880 2941
Email: knitter at geographie.uni-kiel.de

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 819 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20180206/7c04dbd3/attachment.sig>

From a.mosnier at gmail.com  Wed Feb  7 16:07:31 2018
From: a.mosnier at gmail.com (Arnaud Mosnier)
Date: Wed, 7 Feb 2018 10:07:31 -0500
Subject: [R-sig-Geo] Save plot as Geotiff
Message-ID: <CANkFkEewBHOEnJnFR-P4rf-UonPn2fQFRSmvXW9x=c3bPL754Q@mail.gmail.com>

Hi,

Long version:
I made a plot (a map) including SpatialPolygons representing the coast of
my region of interest, and a SpatialPointsDataframe representing locations
of cities, and I want to save this map in GeoTiff format to allow other
people to use this map as a georeferenced background without having to
manage the various data sources. Is there a package/function in R that
would allow me to do that?
Note that converting the Spatial* objects to the raster format is not an
option because I want to be able to see the names of the cities on the map.


In short:
Is there a way to save a plot composed of Spatial* elements in a GeoTiff
format?

Thanks

Arnaud

	[[alternative HTML version deleted]]


From b.rowlingson at lancaster.ac.uk  Wed Feb  7 17:00:23 2018
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 7 Feb 2018 16:00:23 +0000
Subject: [R-sig-Geo] Save plot as Geotiff
In-Reply-To: <CANkFkEewBHOEnJnFR-P4rf-UonPn2fQFRSmvXW9x=c3bPL754Q@mail.gmail.com>
References: <CANkFkEewBHOEnJnFR-P4rf-UonPn2fQFRSmvXW9x=c3bPL754Q@mail.gmail.com>
Message-ID: <CANVKczOOCvCZB=n0Wt=xUrX8rOMFmFS_2e1xPikFmTtwy+OztA@mail.gmail.com>

I'd do this by saving the image on the graphics device as a PNG, then
creating a "world" file (with extension PNGW) from the coordinates of the
corners and the resolution of the PNG. This is a six line text file with
sufficient information to georeference a grid. That's enough for `gdal` to
understand it, and then the `gdal` utilities can convert it to a GeoTIFF
(or load into R using `raster` and then save as a GeoTIFF).

The tricky bit might be finding the corner coordinates of the graphics
device image. This is complicated by R leaving space for margins, or not
using your coordinate system.

 If this is a base graphics plot using the coordinate system units then you
can probably get them via some combination of the par() values, or you
might have set the margins to zero and that gives you the corners from
par()$usr (I think).

 If its grid graphics (like spplot) then.... uhhh. someone else probably
knows how to do it.

Barry


On Wed, Feb 7, 2018 at 3:07 PM, Arnaud Mosnier <a.mosnier at gmail.com> wrote:

> Hi,
>
> Long version:
> I made a plot (a map) including SpatialPolygons representing the coast of
> my region of interest, and a SpatialPointsDataframe representing locations
> of cities, and I want to save this map in GeoTiff format to allow other
> people to use this map as a georeferenced background without having to
> manage the various data sources. Is there a package/function in R that
> would allow me to do that?
> Note that converting the Spatial* objects to the raster format is not an
> option because I want to be able to see the names of the cities on the map.
>
>
> In short:
> Is there a way to save a plot composed of Spatial* elements in a GeoTiff
> format?
>
> Thanks
>
> Arnaud
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From a.mosnier at gmail.com  Wed Feb  7 17:07:46 2018
From: a.mosnier at gmail.com (Arnaud Mosnier)
Date: Wed, 7 Feb 2018 11:07:46 -0500
Subject: [R-sig-Geo] Save plot as Geotiff
In-Reply-To: <CANVKczOOCvCZB=n0Wt=xUrX8rOMFmFS_2e1xPikFmTtwy+OztA@mail.gmail.com>
References: <CANkFkEewBHOEnJnFR-P4rf-UonPn2fQFRSmvXW9x=c3bPL754Q@mail.gmail.com>
 <CANVKczOOCvCZB=n0Wt=xUrX8rOMFmFS_2e1xPikFmTtwy+OztA@mail.gmail.com>
Message-ID: <CANkFkEdXT-DKdJytCt68eCL_7Yx52EwwQ=Uq7j4p4+TkvZYctA@mail.gmail.com>

Thanks Barry. That's a good idea that I may use/test if there is no other
option (I hope another one exists! :-) )

Arnaud

2018-02-07 11:00 GMT-05:00 Barry Rowlingson <b.rowlingson at lancaster.ac.uk>:

> I'd do this by saving the image on the graphics device as a PNG, then
> creating a "world" file (with extension PNGW) from the coordinates of the
> corners and the resolution of the PNG. This is a six line text file with
> sufficient information to georeference a grid. That's enough for `gdal` to
> understand it, and then the `gdal` utilities can convert it to a GeoTIFF
> (or load into R using `raster` and then save as a GeoTIFF).
>
> The tricky bit might be finding the corner coordinates of the graphics
> device image. This is complicated by R leaving space for margins, or not
> using your coordinate system.
>
>  If this is a base graphics plot using the coordinate system units then
> you can probably get them via some combination of the par() values, or you
> might have set the margins to zero and that gives you the corners from
> par()$usr (I think).
>
>  If its grid graphics (like spplot) then.... uhhh. someone else probably
> knows how to do it.
>
> Barry
>
>
> On Wed, Feb 7, 2018 at 3:07 PM, Arnaud Mosnier <a.mosnier at gmail.com>
> wrote:
>
>> Hi,
>>
>> Long version:
>> I made a plot (a map) including SpatialPolygons representing the coast of
>> my region of interest, and a SpatialPointsDataframe representing locations
>> of cities, and I want to save this map in GeoTiff format to allow other
>> people to use this map as a georeferenced background without having to
>> manage the various data sources. Is there a package/function in R that
>> would allow me to do that?
>> Note that converting the Spatial* objects to the raster format is not an
>> option because I want to be able to see the names of the cities on the
>> map.
>>
>>
>> In short:
>> Is there a way to save a plot composed of Spatial* elements in a GeoTiff
>> format?
>>
>> Thanks
>>
>> Arnaud
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>

	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Wed Feb  7 19:58:49 2018
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 7 Feb 2018 19:58:49 +0100
Subject: [R-sig-Geo] Save plot as Geotiff
In-Reply-To: <CANVKczOOCvCZB=n0Wt=xUrX8rOMFmFS_2e1xPikFmTtwy+OztA@mail.gmail.com>
References: <CANkFkEewBHOEnJnFR-P4rf-UonPn2fQFRSmvXW9x=c3bPL754Q@mail.gmail.com>
 <CANVKczOOCvCZB=n0Wt=xUrX8rOMFmFS_2e1xPikFmTtwy+OztA@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1802071954490.6488@reclus.nhh.no>

On Wed, 7 Feb 2018, Barry Rowlingson wrote:

> I'd do this by saving the image on the graphics device as a PNG, then
> creating a "world" file (with extension PNGW) from the coordinates of the
> corners and the resolution of the PNG. This is a six line text file with
> sufficient information to georeference a grid. That's enough for `gdal` to
> understand it, and then the `gdal` utilities can convert it to a GeoTIFF
> (or load into R using `raster` and then save as a GeoTIFF).
>
> The tricky bit might be finding the corner coordinates of the graphics
> device image. This is complicated by R leaving space for margins, or not
> using your coordinate system.

Right - see the example in ASDAR 1st edition, chapter 4 chunks 42-44 in

http://www.asdar-book.org/data.php?chapter=3 (zero-based php)

which has par(mar=c(0,0,0,0), xaxs="i", yaxs="i") and widths and heights 
from maptools::GE_SpatialGrid().

Roger

>
> If this is a base graphics plot using the coordinate system units then you
> can probably get them via some combination of the par() values, or you
> might have set the margins to zero and that gives you the corners from
> par()$usr (I think).
>
> If its grid graphics (like spplot) then.... uhhh. someone else probably
> knows how to do it.
>
> Barry
>
>
> On Wed, Feb 7, 2018 at 3:07 PM, Arnaud Mosnier <a.mosnier at gmail.com> wrote:
>
>> Hi,
>>
>> Long version:
>> I made a plot (a map) including SpatialPolygons representing the coast of
>> my region of interest, and a SpatialPointsDataframe representing locations
>> of cities, and I want to save this map in GeoTiff format to allow other
>> people to use this map as a georeferenced background without having to
>> manage the various data sources. Is there a package/function in R that
>> would allow me to do that?
>> Note that converting the Spatial* objects to the raster format is not an
>> option because I want to be able to see the names of the cities on the map.
>>
>>
>> In short:
>> Is there a way to save a plot composed of Spatial* elements in a GeoTiff
>> format?
>>
>> Thanks
>>
>> Arnaud
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From afischbach at usgs.gov  Wed Feb  7 20:27:32 2018
From: afischbach at usgs.gov (Fischbach, Anthony)
Date: Wed, 7 Feb 2018 10:27:32 -0900
Subject: [R-sig-Geo] accessing spatial imagery via rgdal's web map tile
 service driver
In-Reply-To: <alpine.LFD.2.21.1801271558260.498@reclus.nhh.no>
References: <CA+ZRYj_c_LT8WYU+UEgmg-OZrNsXhTVT1jjZT0LXcDNf-R=HHg@mail.gmail.com>
 <alpine.LFD.2.21.1801271558260.498@reclus.nhh.no>
Message-ID: <CA+ZRYj-ShevgzSDmmLLfO2XgGuT4PWePuM7JKKO3vmzHqm_maw@mail.gmail.com>

The GDAL tile web map service appears to require an xml specification for
the TMS and a "window" specification indicating the bounds of the region to
be accessed, specified in the projected coordinate system using the
-projwin flag. I am uncertain how to pass this -projwin and its bounds to
the rgdal::readGDAL function.  The code snippet below stages the problem.
Please advise on how to acquire just the "window" of interest.

#Tile Web Mapping Service to earthdata imagery via rgdal
library(rgdal)  # r implementation of GDAL
require(raster) # r package for raster image manipulation, required for
raster capture of the readGDAL function result.
require(sp)     # r package for spatial class objects, including CRS
#
prj.geo<-CRS('+proj=longlat +datum=WGS84') # Geographic projection
prj.Polar_NSIDC <- CRS("+init=epsg:3413")
# (+proj=stere +lat_0=90 +lat_ts=70 +lon_0=-45 +k=1 +x_0=0 +y_0=0
+datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0)
prj.StudyArea <- CRS("+proj=laea +lat_0=70 +lon_0=-170 +x_0=0 +y_0=0
+datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0") # study area
projection
##
xLimits <- sort(c(170, -135)) # define the study area polygon using
geographic coordinates (eastings WGS84)
yLimits <- sort(c(52, 75)) # (northings WGS84)
pts<-expand.grid(xLimits, yLimits)
names(pts)<-c('x','y')
coordinates(pts) <- ~x+y
proj4string(pts) <- prj.geo
pts.Polar_NSIDC<-spTransform(pts, prj.Polar_NSIDC)
bb <- round(bbox(pts.Polar_NSIDC)) #
#
yesterday <- Sys.Date() - 1
TileLevel <- 3
xml_specification <-
paste0('<GDAL_WMS>
    <Service name="TMS">
        <ServerUrl>
https://gibs.earthdata.nasa.gov/wmts/epsg3413/best/MODIS_Aqua_CorrectedReflectance_Bands721/default/
',
format(yesterday, "%Y-%m-%d"),
'/250m/${z}/${y}/${x}.jpg</ServerUrl>
    </Service>
    <DataWindow>
        <UpperLeftX>-4194304</UpperLeftX>
        <UpperLeftY>4194304</UpperLeftY>
        <LowerRightX>4194304</LowerRightX>
        <LowerRightY>-4194304</LowerRightY>
        <TileLevel>', TileLevel, '</TileLevel>
        <TileCountX>2</TileCountX>
        <TileCountY>2</TileCountY>
        <YOrigin>top</YOrigin>
    </DataWindow>
    <Projection>EPSG:3413</Projection>
    <BlockSizeX>512</BlockSizeX>
    <BlockSizeY>512</BlockSizeY>
    <BandsCount>3</BandsCount>
</GDAL_WMS>
')
#
cat(xml_specification)
GDALinfo(fname = xml_specification)
 (projWinParameters = paste('-projwin', bb[1, 1], bb[2,2], bb[1,2],
bb[2,1], sep = " "))
aqua <- readGDAL(fname = xml_specification) # , projWinParameters) ?? how
to implement the projwin constraints??
(aqua_stack <- stack(aqua))
#
plotRGB(aqua_stack) # plots the acquired image in RGB !! problem is that
the entire WMS domain is acquired.

	[[alternative HTML version deleted]]


From afornasiero at arpae.it  Thu Feb  8 09:35:57 2018
From: afornasiero at arpae.it (Anna Fornasiero)
Date: Thu, 8 Feb 2018 09:35:57 +0100
Subject: [R-sig-Geo] kriging with external drift on precipitation data
Message-ID: <CACzkmAhc__onZb5jrKjiwSYPFOWk3y7tef1TbsV_i6SCMtsoYA@mail.gmail.com>

Hi I'm not a geostatistic expert.
I'm trying to interpolate raingauges precipitation measures using
radar precipitation as covariate.
The resulting field obtained by KED is filled of precipitation even
over the sea where neither raingauges nor radar have measured
precipitation. The result changes if I reduce the maximum distance of
the  variogram computation   (i.e. 20 km), but I have no idea on what
produces this change. Using 20 km of maximum distance the variogram
shape is poor.
The variogram shape is well defined starting from 50 km of maximum
distance, but in this case the precipitation is spread over the sea .
I didn't note any substantial difference changing the fitting model of
the variogram: exponential, spherical or gaussian.
Any suggestion?
Anna


From dlucero at health.nyc.gov  Thu Feb  8 12:48:15 2018
From: dlucero at health.nyc.gov (David Lucero)
Date: Thu, 8 Feb 2018 11:48:15 +0000
Subject: [R-sig-Geo] kriging with external drift on precipitation data
In-Reply-To: <CACzkmAhc__onZb5jrKjiwSYPFOWk3y7tef1TbsV_i6SCMtsoYA@mail.gmail.com>
References: <CACzkmAhc__onZb5jrKjiwSYPFOWk3y7tef1TbsV_i6SCMtsoYA@mail.gmail.com>
Message-ID: <4235A422-1417-440D-AEE9-36ABA4731F4A@health.nyc.gov>

See page 16: http://people.ku.edu/~gbohling/cpe940/Variograms.pdf

The various models only differ in the way they capture the ascent to spatial autocorrelation until the range. Subtle differences?in my experience (for epidemiological and biological data) an exponential model suffices.

typing with thumbs?pls excuse typos and autocorrections

On Feb 8, 2018, at 3:36 AM, Anna Fornasiero <afornasiero at arpae.it<mailto:afornasiero at arpae.it>> wrote:

ATTENTION: This email came from an external source. Do not open attachments or click on links from unknown senders or unexpected emails. If it looks suspicious, send it as an attachment to spamemail at health.nyc.gov<mailto:spamemail at health.nyc.gov><mailto:spamemail at health.nyc.gov>


Hi I'm not a geostatistic expert.
I'm trying to interpolate raingauges precipitation measures using
radar precipitation as covariate.
The resulting field obtained by KED is filled of precipitation even
over the sea where neither raingauges nor radar have measured
precipitation. The result changes if I reduce the maximum distance of
the  variogram computation   (i.e. 20 km), but I have no idea on what
produces this change. Using 20 km of maximum distance the variogram
shape is poor.
The variogram shape is well defined starting from 50 km of maximum
distance, but in this case the precipitation is spread over the sea .
I didn't note any substantial difference changing the fitting model of
the variogram: exponential, spherical or gaussian.
Any suggestion?
Anna

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo
Sent from the New York City Department of Health & Mental Hygiene. This email and any files transmitted with it may contain confidential information and are intended solely for the use of the individual or entity to whom they are addressed. This footnote also confirms that this email message has been swept for the presence of computer viruses.

	[[alternative HTML version deleted]]


From mdsumner at gmail.com  Thu Feb  8 22:26:01 2018
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 08 Feb 2018 21:26:01 +0000
Subject: [R-sig-Geo] accessing spatial imagery via rgdal's web map tile
 service driver
In-Reply-To: <CA+ZRYj-ShevgzSDmmLLfO2XgGuT4PWePuM7JKKO3vmzHqm_maw@mail.gmail.com>
References: <CA+ZRYj_c_LT8WYU+UEgmg-OZrNsXhTVT1jjZT0LXcDNf-R=HHg@mail.gmail.com>
 <alpine.LFD.2.21.1801271558260.498@reclus.nhh.no>
 <CA+ZRYj-ShevgzSDmmLLfO2XgGuT4PWePuM7JKKO3vmzHqm_maw@mail.gmail.com>
Message-ID: <CAAcGz99zr+K2oa1jq2Au-nS-iD9QGm374PX9+=jXkj+cPyw5ow@mail.gmail.com>

Hi Anthony, what OS are you on? Can you share sessionInfo() or
devtools::session_info()?

But, it could be simpler, but  it doesn't work on my system, I'll find out
more:

https://gist.github.com/mdsumner/ca332f9c5112e00edcc40fdcf2a4b968

Cheers, Mike.

On Thu, 8 Feb 2018 at 06:28 Fischbach, Anthony <afischbach at usgs.gov> wrote:

> The GDAL tile web map service appears to require an xml specification for
> the TMS and a "window" specification indicating the bounds of the region to
> be accessed, specified in the projected coordinate system using the
> -projwin flag. I am uncertain how to pass this -projwin and its bounds to
> the rgdal::readGDAL function.  The code snippet below stages the problem.
> Please advise on how to acquire just the "window" of interest.
>
> #Tile Web Mapping Service to earthdata imagery via rgdal
> library(rgdal)  # r implementation of GDAL
> require(raster) # r package for raster image manipulation, required for
> raster capture of the readGDAL function result.
> require(sp)     # r package for spatial class objects, including CRS
> #
> prj.geo<-CRS('+proj=longlat +datum=WGS84') # Geographic projection
> prj.Polar_NSIDC <- CRS("+init=epsg:3413")
> # (+proj=stere +lat_0=90 +lat_ts=70 +lon_0=-45 +k=1 +x_0=0 +y_0=0
> +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0)
> prj.StudyArea <- CRS("+proj=laea +lat_0=70 +lon_0=-170 +x_0=0 +y_0=0
> +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0") # study area
> projection
> ##
> xLimits <- sort(c(170, -135)) # define the study area polygon using
> geographic coordinates (eastings WGS84)
> yLimits <- sort(c(52, 75)) # (northings WGS84)
> pts<-expand.grid(xLimits, yLimits)
> names(pts)<-c('x','y')
> coordinates(pts) <- ~x+y
> proj4string(pts) <- prj.geo
> pts.Polar_NSIDC<-spTransform(pts, prj.Polar_NSIDC)
> bb <- round(bbox(pts.Polar_NSIDC)) #
> #
> yesterday <- Sys.Date() - 1
> TileLevel <- 3
> xml_specification <-
> paste0('<GDAL_WMS>
>     <Service name="TMS">
>         <ServerUrl>
>
> https://gibs.earthdata.nasa.gov/wmts/epsg3413/best/MODIS_Aqua_CorrectedReflectance_Bands721/default/
> ',
> format(yesterday, "%Y-%m-%d"),
> '/250m/${z}/${y}/${x}.jpg</ServerUrl>
>     </Service>
>     <DataWindow>
>         <UpperLeftX>-4194304</UpperLeftX>
>         <UpperLeftY>4194304</UpperLeftY>
>         <LowerRightX>4194304</LowerRightX>
>         <LowerRightY>-4194304</LowerRightY>
>         <TileLevel>', TileLevel, '</TileLevel>
>         <TileCountX>2</TileCountX>
>         <TileCountY>2</TileCountY>
>         <YOrigin>top</YOrigin>
>     </DataWindow>
>     <Projection>EPSG:3413</Projection>
>     <BlockSizeX>512</BlockSizeX>
>     <BlockSizeY>512</BlockSizeY>
>     <BandsCount>3</BandsCount>
> </GDAL_WMS>
> ')
> #
> cat(xml_specification)
> GDALinfo(fname = xml_specification)
>  (projWinParameters = paste('-projwin', bb[1, 1], bb[2,2], bb[1,2],
> bb[2,1], sep = " "))
> aqua <- readGDAL(fname = xml_specification) # , projWinParameters) ?? how
> to implement the projwin constraints??
> (aqua_stack <- stack(aqua))
> #
> plotRGB(aqua_stack) # plots the acquired image in RGB !! problem is that
> the entire WMS domain is acquired.
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From afischbach at usgs.gov  Thu Feb  8 22:45:39 2018
From: afischbach at usgs.gov (Fischbach, Anthony)
Date: Thu, 8 Feb 2018 12:45:39 -0900
Subject: [R-sig-Geo] accessing spatial imagery via rgdal's web map tile
 service driver
In-Reply-To: <CAAcGz99zr+K2oa1jq2Au-nS-iD9QGm374PX9+=jXkj+cPyw5ow@mail.gmail.com>
References: <CA+ZRYj_c_LT8WYU+UEgmg-OZrNsXhTVT1jjZT0LXcDNf-R=HHg@mail.gmail.com>
 <alpine.LFD.2.21.1801271558260.498@reclus.nhh.no>
 <CA+ZRYj-ShevgzSDmmLLfO2XgGuT4PWePuM7JKKO3vmzHqm_maw@mail.gmail.com>
 <CAAcGz99zr+K2oa1jq2Au-nS-iD9QGm374PX9+=jXkj+cPyw5ow@mail.gmail.com>
Message-ID: <CA+ZRYj8Vu0BbqgpwCZ03YQBFip=q-3h4+AdtTADKHuJxpc5HKg@mail.gmail.com>

Mike, thank you for digging in on this.  I have submitted my sessionInfo()
and comments to your git script regarding an error on the raster function
call. - Tony

Anthony Fischbach, Wildlife Biologist
USGS Alaska Science Center Walrus Research Program
4210 University Drive
Anchorage, AK 99508

voice: (907) 786-7145

http://alaska.usgs.gov/science/biology/walrus/

On Thu, Feb 8, 2018 at 12:26 PM, Michael Sumner <mdsumner at gmail.com> wrote:

> Hi Anthony, what OS are you on? Can you share sessionInfo() or
> devtools::session_info()?
>
> But, it could be simpler, but  it doesn't work on my system, I'll find out
> more:
>
> https://gist.github.com/mdsumner/ca332f9c5112e00edcc40fdcf2a4b968
>
> Cheers, Mike.
>
> On Thu, 8 Feb 2018 at 06:28 Fischbach, Anthony <afischbach at usgs.gov>
> wrote:
>
>> The GDAL tile web map service appears to require an xml specification for
>> the TMS and a "window" specification indicating the bounds of the region
>> to
>> be accessed, specified in the projected coordinate system using the
>> -projwin flag. I am uncertain how to pass this -projwin and its bounds to
>> the rgdal::readGDAL function.  The code snippet below stages the problem.
>> Please advise on how to acquire just the "window" of interest.
>>
>> #Tile Web Mapping Service to earthdata imagery via rgdal
>> library(rgdal)  # r implementation of GDAL
>> require(raster) # r package for raster image manipulation, required for
>> raster capture of the readGDAL function result.
>> require(sp)     # r package for spatial class objects, including CRS
>> #
>> prj.geo<-CRS('+proj=longlat +datum=WGS84') # Geographic projection
>> prj.Polar_NSIDC <- CRS("+init=epsg:3413")
>> # (+proj=stere +lat_0=90 +lat_ts=70 +lon_0=-45 +k=1 +x_0=0 +y_0=0
>> +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0)
>> prj.StudyArea <- CRS("+proj=laea +lat_0=70 +lon_0=-170 +x_0=0 +y_0=0
>> +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0") # study area
>> projection
>> ##
>> xLimits <- sort(c(170, -135)) # define the study area polygon using
>> geographic coordinates (eastings WGS84)
>> yLimits <- sort(c(52, 75)) # (northings WGS84)
>> pts<-expand.grid(xLimits, yLimits)
>> names(pts)<-c('x','y')
>> coordinates(pts) <- ~x+y
>> proj4string(pts) <- prj.geo
>> pts.Polar_NSIDC<-spTransform(pts, prj.Polar_NSIDC)
>> bb <- round(bbox(pts.Polar_NSIDC)) #
>> #
>> yesterday <- Sys.Date() - 1
>> TileLevel <- 3
>> xml_specification <-
>> paste0('<GDAL_WMS>
>>     <Service name="TMS">
>>         <ServerUrl>
>> https://gibs.earthdata.nasa.gov/wmts/epsg3413/best/MODIS_
>> Aqua_CorrectedReflectance_Bands721/default/
>> ',
>> format(yesterday, "%Y-%m-%d"),
>> '/250m/${z}/${y}/${x}.jpg</ServerUrl>
>>     </Service>
>>     <DataWindow>
>>         <UpperLeftX>-4194304</UpperLeftX>
>>         <UpperLeftY>4194304</UpperLeftY>
>>         <LowerRightX>4194304</LowerRightX>
>>         <LowerRightY>-4194304</LowerRightY>
>>         <TileLevel>', TileLevel, '</TileLevel>
>>         <TileCountX>2</TileCountX>
>>         <TileCountY>2</TileCountY>
>>         <YOrigin>top</YOrigin>
>>     </DataWindow>
>>     <Projection>EPSG:3413</Projection>
>>     <BlockSizeX>512</BlockSizeX>
>>     <BlockSizeY>512</BlockSizeY>
>>     <BandsCount>3</BandsCount>
>> </GDAL_WMS>
>> ')
>> #
>> cat(xml_specification)
>> GDALinfo(fname = xml_specification)
>>  (projWinParameters = paste('-projwin', bb[1, 1], bb[2,2], bb[1,2],
>> bb[2,1], sep = " "))
>> aqua <- readGDAL(fname = xml_specification) # , projWinParameters) ?? how
>> to implement the projwin constraints??
>> (aqua_stack <- stack(aqua))
>> #
>> plotRGB(aqua_stack) # plots the acquired image in RGB !! problem is that
>> the entire WMS domain is acquired.
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> --
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> <https://maps.google.com/?q=203+Channel+Highway+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
> Kingston Tasmania 7050 Australia
> <https://maps.google.com/?q=203+Channel+Highway+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
>
>

	[[alternative HTML version deleted]]


From mdsumner at gmail.com  Fri Feb  9 00:32:37 2018
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 08 Feb 2018 23:32:37 +0000
Subject: [R-sig-Geo] accessing spatial imagery via rgdal's web map tile
 service driver
In-Reply-To: <CA+ZRYj8Vu0BbqgpwCZ03YQBFip=q-3h4+AdtTADKHuJxpc5HKg@mail.gmail.com>
References: <CA+ZRYj_c_LT8WYU+UEgmg-OZrNsXhTVT1jjZT0LXcDNf-R=HHg@mail.gmail.com>
 <alpine.LFD.2.21.1801271558260.498@reclus.nhh.no>
 <CA+ZRYj-ShevgzSDmmLLfO2XgGuT4PWePuM7JKKO3vmzHqm_maw@mail.gmail.com>
 <CAAcGz99zr+K2oa1jq2Au-nS-iD9QGm374PX9+=jXkj+cPyw5ow@mail.gmail.com>
 <CA+ZRYj8Vu0BbqgpwCZ03YQBFip=q-3h4+AdtTADKHuJxpc5HKg@mail.gmail.com>
Message-ID: <CAAcGz98YHjpqzQ9neK+RX-28qtMR2us5QZAQ2vtsMHrjEZu-tA@mail.gmail.com>

Oh, I had a typo in the xml_specification due to blithe copy/paste from
email. It works fine as intended.

I'll update and report back, this is a good example for fleshing out some
issues.

Cheers!


On Fri, 9 Feb 2018 at 08:46 Fischbach, Anthony <afischbach at usgs.gov> wrote:

> Mike, thank you for digging in on this.  I have submitted my sessionInfo()
> and comments to your git script regarding an error on the raster function
> call. - Tony
>
> Anthony Fischbach, Wildlife Biologist
> USGS Alaska Science Center Walrus Research Program
> 4210 University Drive
> <https://maps.google.com/?q=4210+University+DriveAnchorage,+AK+99508&entry=gmail&source=g>
> Anchorage, AK 99508
> <https://maps.google.com/?q=4210+University+DriveAnchorage,+AK+99508&entry=gmail&source=g>
>
> voice: (907) 786-7145
>
> http://alaska.usgs.gov/science/biology/walrus/
>
> On Thu, Feb 8, 2018 at 12:26 PM, Michael Sumner <mdsumner at gmail.com>
> wrote:
>
>> Hi Anthony, what OS are you on? Can you share sessionInfo() or
>> devtools::session_info()?
>>
>> But, it could be simpler, but  it doesn't work on my system, I'll find
>> out more:
>>
>> https://gist.github.com/mdsumner/ca332f9c5112e00edcc40fdcf2a4b968
>>
>> Cheers, Mike.
>>
>> On Thu, 8 Feb 2018 at 06:28 Fischbach, Anthony <afischbach at usgs.gov>
>> wrote:
>>
>>> The GDAL tile web map service appears to require an xml specification for
>>> the TMS and a "window" specification indicating the bounds of the region
>>> to
>>> be accessed, specified in the projected coordinate system using the
>>> -projwin flag. I am uncertain how to pass this -projwin and its bounds to
>>> the rgdal::readGDAL function.  The code snippet below stages the problem.
>>> Please advise on how to acquire just the "window" of interest.
>>>
>>> #Tile Web Mapping Service to earthdata imagery via rgdal
>>> library(rgdal)  # r implementation of GDAL
>>> require(raster) # r package for raster image manipulation, required for
>>> raster capture of the readGDAL function result.
>>> require(sp)     # r package for spatial class objects, including CRS
>>> #
>>> prj.geo<-CRS('+proj=longlat +datum=WGS84') # Geographic projection
>>> prj.Polar_NSIDC <- CRS("+init=epsg:3413")
>>> # (+proj=stere +lat_0=90 +lat_ts=70 +lon_0=-45 +k=1 +x_0=0 +y_0=0
>>> +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0)
>>> prj.StudyArea <- CRS("+proj=laea +lat_0=70 +lon_0=-170 +x_0=0 +y_0=0
>>> +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0") # study area
>>> projection
>>> ##
>>> xLimits <- sort(c(170, -135)) # define the study area polygon using
>>> geographic coordinates (eastings WGS84)
>>> yLimits <- sort(c(52, 75)) # (northings WGS84)
>>> pts<-expand.grid(xLimits, yLimits)
>>> names(pts)<-c('x','y')
>>> coordinates(pts) <- ~x+y
>>> proj4string(pts) <- prj.geo
>>> pts.Polar_NSIDC<-spTransform(pts, prj.Polar_NSIDC)
>>> bb <- round(bbox(pts.Polar_NSIDC)) #
>>> #
>>> yesterday <- Sys.Date() - 1
>>> TileLevel <- 3
>>> xml_specification <-
>>> paste0('<GDAL_WMS>
>>>     <Service name="TMS">
>>>         <ServerUrl>
>>>
>>> https://gibs.earthdata.nasa.gov/wmts/epsg3413/best/MODIS_Aqua_CorrectedReflectance_Bands721/default/
>>> ',
>>> format(yesterday, "%Y-%m-%d"),
>>> '/250m/${z}/${y}/${x}.jpg</ServerUrl>
>>>     </Service>
>>>     <DataWindow>
>>>         <UpperLeftX>-4194304</UpperLeftX>
>>>         <UpperLeftY>4194304</UpperLeftY>
>>>         <LowerRightX>4194304</LowerRightX>
>>>         <LowerRightY>-4194304</LowerRightY>
>>>         <TileLevel>', TileLevel, '</TileLevel>
>>>         <TileCountX>2</TileCountX>
>>>         <TileCountY>2</TileCountY>
>>>         <YOrigin>top</YOrigin>
>>>     </DataWindow>
>>>     <Projection>EPSG:3413</Projection>
>>>     <BlockSizeX>512</BlockSizeX>
>>>     <BlockSizeY>512</BlockSizeY>
>>>     <BandsCount>3</BandsCount>
>>> </GDAL_WMS>
>>> ')
>>> #
>>> cat(xml_specification)
>>> GDALinfo(fname = xml_specification)
>>>  (projWinParameters = paste('-projwin', bb[1, 1], bb[2,2], bb[1,2],
>>> bb[2,1], sep = " "))
>>> aqua <- readGDAL(fname = xml_specification) # , projWinParameters) ?? how
>>> to implement the projwin constraints??
>>> (aqua_stack <- stack(aqua))
>>> #
>>> plotRGB(aqua_stack) # plots the acquired image in RGB !! problem is that
>>> the entire WMS domain is acquired.
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>> --
>> Dr. Michael Sumner
>> Software and Database Engineer
>> Australian Antarctic Division
>> 203 Channel Highway
>> <https://maps.google.com/?q=203+Channel+Highway+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
>> Kingston Tasmania 7050 Australia
>> <https://maps.google.com/?q=203+Channel+Highway+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
>>
>>
> --
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From mdsumner at gmail.com  Fri Feb  9 00:56:08 2018
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 08 Feb 2018 23:56:08 +0000
Subject: [R-sig-Geo] accessing spatial imagery via rgdal's web map tile
 service driver
In-Reply-To: <CAAcGz98YHjpqzQ9neK+RX-28qtMR2us5QZAQ2vtsMHrjEZu-tA@mail.gmail.com>
References: <CA+ZRYj_c_LT8WYU+UEgmg-OZrNsXhTVT1jjZT0LXcDNf-R=HHg@mail.gmail.com>
 <alpine.LFD.2.21.1801271558260.498@reclus.nhh.no>
 <CA+ZRYj-ShevgzSDmmLLfO2XgGuT4PWePuM7JKKO3vmzHqm_maw@mail.gmail.com>
 <CAAcGz99zr+K2oa1jq2Au-nS-iD9QGm374PX9+=jXkj+cPyw5ow@mail.gmail.com>
 <CA+ZRYj8Vu0BbqgpwCZ03YQBFip=q-3h4+AdtTADKHuJxpc5HKg@mail.gmail.com>
 <CAAcGz98YHjpqzQ9neK+RX-28qtMR2us5QZAQ2vtsMHrjEZu-tA@mail.gmail.com>
Message-ID: <CAAcGz98zAy-MzSBROwYQKWEXZts4SXzZWa=4xNe=CpZeg3OeJg@mail.gmail.com>

I've put a fuller example together, thanks for the prompt, it's nice to
know how to do this:

http://rpubs.com/cyclemumner/358029

Note that raster is using underlying rgdal offset/output.dim functionality
to drive GDAL itself here, something that's not exposed well - raster makes
it seamless, but the underlying tools are a bit obscure and could be used
more widely.

The example uses row/col indexing via the extent(RasterLayer, numeric, ...)
method, you can otherwise use any extent in the native (north Polar
Stereographic) coordinate system. I don't know if raster interprets
aggregate(, fact = ) calls into translations for rgdal's output.dim, but it
would be powerful to be easy to do that.

Cheers, Mike.

On Fri, 9 Feb 2018 at 10:32 Michael Sumner <mdsumner at gmail.com> wrote:

> Oh, I had a typo in the xml_specification due to blithe copy/paste from
> email. It works fine as intended.
>
> I'll update and report back, this is a good example for fleshing out some
> issues.
>
> Cheers!
>
>
> On Fri, 9 Feb 2018 at 08:46 Fischbach, Anthony <afischbach at usgs.gov>
> wrote:
>
>> Mike, thank you for digging in on this.  I have submitted my
>> sessionInfo() and comments to your git script regarding an error on the
>> raster function call. - Tony
>>
>> Anthony Fischbach, Wildlife Biologist
>> USGS Alaska Science Center Walrus Research Program
>> 4210 University Drive
>> <https://maps.google.com/?q=4210+University+DriveAnchorage,+AK+99508&entry=gmail&source=g>
>> Anchorage, AK 99508
>> <https://maps.google.com/?q=4210+University+DriveAnchorage,+AK+99508&entry=gmail&source=g>
>>
>> voice: (907) 786-7145
>>
>> http://alaska.usgs.gov/science/biology/walrus/
>>
>> On Thu, Feb 8, 2018 at 12:26 PM, Michael Sumner <mdsumner at gmail.com>
>> wrote:
>>
>>> Hi Anthony, what OS are you on? Can you share sessionInfo() or
>>> devtools::session_info()?
>>>
>>> But, it could be simpler, but  it doesn't work on my system, I'll find
>>> out more:
>>>
>>> https://gist.github.com/mdsumner/ca332f9c5112e00edcc40fdcf2a4b968
>>>
>>> Cheers, Mike.
>>>
>>> On Thu, 8 Feb 2018 at 06:28 Fischbach, Anthony <afischbach at usgs.gov>
>>> wrote:
>>>
>>>> The GDAL tile web map service appears to require an xml specification
>>>> for
>>>> the TMS and a "window" specification indicating the bounds of the
>>>> region to
>>>> be accessed, specified in the projected coordinate system using the
>>>> -projwin flag. I am uncertain how to pass this -projwin and its bounds
>>>> to
>>>> the rgdal::readGDAL function.  The code snippet below stages the
>>>> problem.
>>>> Please advise on how to acquire just the "window" of interest.
>>>>
>>>> #Tile Web Mapping Service to earthdata imagery via rgdal
>>>> library(rgdal)  # r implementation of GDAL
>>>> require(raster) # r package for raster image manipulation, required for
>>>> raster capture of the readGDAL function result.
>>>> require(sp)     # r package for spatial class objects, including CRS
>>>> #
>>>> prj.geo<-CRS('+proj=longlat +datum=WGS84') # Geographic projection
>>>> prj.Polar_NSIDC <- CRS("+init=epsg:3413")
>>>> # (+proj=stere +lat_0=90 +lat_ts=70 +lon_0=-45 +k=1 +x_0=0 +y_0=0
>>>> +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0)
>>>> prj.StudyArea <- CRS("+proj=laea +lat_0=70 +lon_0=-170 +x_0=0 +y_0=0
>>>> +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0") # study
>>>> area
>>>> projection
>>>> ##
>>>> xLimits <- sort(c(170, -135)) # define the study area polygon using
>>>> geographic coordinates (eastings WGS84)
>>>> yLimits <- sort(c(52, 75)) # (northings WGS84)
>>>> pts<-expand.grid(xLimits, yLimits)
>>>> names(pts)<-c('x','y')
>>>> coordinates(pts) <- ~x+y
>>>> proj4string(pts) <- prj.geo
>>>> pts.Polar_NSIDC<-spTransform(pts, prj.Polar_NSIDC)
>>>> bb <- round(bbox(pts.Polar_NSIDC)) #
>>>> #
>>>> yesterday <- Sys.Date() - 1
>>>> TileLevel <- 3
>>>> xml_specification <-
>>>> paste0('<GDAL_WMS>
>>>>     <Service name="TMS">
>>>>         <ServerUrl>
>>>>
>>>> https://gibs.earthdata.nasa.gov/wmts/epsg3413/best/MODIS_Aqua_CorrectedReflectance_Bands721/default/
>>>> ',
>>>> format(yesterday, "%Y-%m-%d"),
>>>> '/250m/${z}/${y}/${x}.jpg</ServerUrl>
>>>>     </Service>
>>>>     <DataWindow>
>>>>         <UpperLeftX>-4194304</UpperLeftX>
>>>>         <UpperLeftY>4194304</UpperLeftY>
>>>>         <LowerRightX>4194304</LowerRightX>
>>>>         <LowerRightY>-4194304</LowerRightY>
>>>>         <TileLevel>', TileLevel, '</TileLevel>
>>>>         <TileCountX>2</TileCountX>
>>>>         <TileCountY>2</TileCountY>
>>>>         <YOrigin>top</YOrigin>
>>>>     </DataWindow>
>>>>     <Projection>EPSG:3413</Projection>
>>>>     <BlockSizeX>512</BlockSizeX>
>>>>     <BlockSizeY>512</BlockSizeY>
>>>>     <BandsCount>3</BandsCount>
>>>> </GDAL_WMS>
>>>> ')
>>>> #
>>>> cat(xml_specification)
>>>> GDALinfo(fname = xml_specification)
>>>>  (projWinParameters = paste('-projwin', bb[1, 1], bb[2,2], bb[1,2],
>>>> bb[2,1], sep = " "))
>>>> aqua <- readGDAL(fname = xml_specification) # , projWinParameters) ??
>>>> how
>>>> to implement the projwin constraints??
>>>> (aqua_stack <- stack(aqua))
>>>> #
>>>> plotRGB(aqua_stack) # plots the acquired image in RGB !! problem is that
>>>> the entire WMS domain is acquired.
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>> --
>>> Dr. Michael Sumner
>>> Software and Database Engineer
>>> Australian Antarctic Division
>>> 203 Channel Highway
>>> <https://maps.google.com/?q=203+Channel+Highway+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
>>> Kingston Tasmania 7050 Australia
>>> <https://maps.google.com/?q=203+Channel+Highway+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
>>>
>>>
>> --
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> Kingston Tasmania 7050 Australia
>
> --
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From stefano.sofia at regione.marche.it  Fri Feb  9 15:39:27 2018
From: stefano.sofia at regione.marche.it (Stefano Sofia)
Date: Fri, 9 Feb 2018 14:39:27 +0000
Subject: [R-sig-Geo] Change range of values of the legend
Message-ID: <8B435C9568170B469AE31E8891E8CC4F471ED85C@ESINO.regionemarche.intra>

Dear list users,
suppose that I have this simple raster:

library(raster)
xy <- matrix(rnorm(400),20,20)
rast <- raster(xy)

plot(rast) gives me a legend with range (-3,3).
I would like to change the range of the legend to (-5,5), for example. I tried with

plot(rast, legend=FALSE, axes=FALSE)
r.range <- c(-5, 5)
plot(rast, legend.only=TRUE, axis.args=list(at=seq(r.range[1], r.range[2], 1), labels=seq(r.range[1], r.range[2], 1)))

but this does not expand the values of the legend.
Could somebody give me some hints?

Thank you
Stefano


         (oo)
--oOO--( )--OOo----------------
Stefano Sofia PhD
Area Meteorologica e  Area nivologica - Centro Funzionale
Servizio Protezione Civile - Regione Marche
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona
Uff: 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
This message was scanned by Libra ESVA and is believed to be clean.


	[[alternative HTML version deleted]]


From btupper at bigelow.org  Fri Feb  9 16:01:11 2018
From: btupper at bigelow.org (Ben Tupper)
Date: Fri, 9 Feb 2018 10:01:11 -0500
Subject: [R-sig-Geo] Change range of values of the legend
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4F471ED85C@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4F471ED85C@ESINO.regionemarche.intra>
Message-ID: <B68F2E32-0A2F-449A-9E70-D3A3B9E99CF4@bigelow.org>

Hi,

Try 

plot(rast, zlim = c(-5, 5))

I think the zlim argument is passed through to graphics::image() via fields::image.plot() which raster::plot() calls.  I know it isn't super obvious until until you re-read the docs about 2000 times.

Cheers,
Ben 


> On Feb 9, 2018, at 9:39 AM, Stefano Sofia <stefano.sofia at regione.marche.it> wrote:
> 
> Dear list users,
> suppose that I have this simple raster:
> 
> library(raster)
> xy <- matrix(rnorm(400),20,20)
> rast <- raster(xy)
> 
> plot(rast) gives me a legend with range (-3,3).
> I would like to change the range of the legend to (-5,5), for example. I tried with
> 
> plot(rast, legend=FALSE, axes=FALSE)
> r.range <- c(-5, 5)
> plot(rast, legend.only=TRUE, axis.args=list(at=seq(r.range[1], r.range[2], 1), labels=seq(r.range[1], r.range[2], 1)))
> 
> but this does not expand the values of the legend.
> Could somebody give me some hints?
> 
> Thank you
> Stefano
> 
> 
>         (oo)
> --oOO--( )--OOo----------------
> Stefano Sofia PhD
> Area Meteorologica e  Area nivologica - Centro Funzionale
> Servizio Protezione Civile - Regione Marche
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------
> 
> ________________________________
> 
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
> 
> --
> This message was scanned by Libra ESVA and is believed to be clean.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org

Ecocast Reports: http://seascapemodeling.org/ecocast.html
Tick Reports: https://report.bigelow.org/tick/
Jellyfish Reports: https://jellyfish.bigelow.org/jellyfish/




	[[alternative HTML version deleted]]


From stefano.sofia at regione.marche.it  Fri Feb  9 16:06:45 2018
From: stefano.sofia at regione.marche.it (Stefano Sofia)
Date: Fri, 9 Feb 2018 15:06:45 +0000
Subject: [R-sig-Geo] Change range of values of the legend
In-Reply-To: <B68F2E32-0A2F-449A-9E70-D3A3B9E99CF4@bigelow.org>
References: <8B435C9568170B469AE31E8891E8CC4F471ED85C@ESINO.regionemarche.intra>,
 <B68F2E32-0A2F-449A-9E70-D3A3B9E99CF4@bigelow.org>
Message-ID: <8B435C9568170B469AE31E8891E8CC4F471ED8D1@ESINO.regionemarche.intra>

Thank you. You are right!

         (oo)
--oOO--( )--OOo----------------
Stefano Sofia PhD
Area Meteorologica e  Area nivologica - Centro Funzionale
Servizio Protezione Civile - Regione Marche
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona
Uff: 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------
________________________________
Da: Ben Tupper [btupper at bigelow.org]
Inviato: venerd? 9 febbraio 2018 16.01
A: Stefano Sofia
Cc: r-sig-geo at r-project.org
Oggetto: Re: [R-sig-Geo] Change range of values of the legend

Hi,

Try

plot(rast, zlim = c(-5, 5))

I think the zlim argument is passed through to graphics::image() via fields::image.plot() which raster::plot() calls.  I know it isn't super obvious until until you re-read the docs about 2000 times.

Cheers,
Ben


On Feb 9, 2018, at 9:39 AM, Stefano Sofia <stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>> wrote:

Dear list users,
suppose that I have this simple raster:

library(raster)
xy <- matrix(rnorm(400),20,20)
rast <- raster(xy)

plot(rast) gives me a legend with range (-3,3).
I would like to change the range of the legend to (-5,5), for example. I tried with

plot(rast, legend=FALSE, axes=FALSE)
r.range <- c(-5, 5)
plot(rast, legend.only=TRUE, axis.args=list(at=seq(r.range[1], r.range[2], 1), labels=seq(r.range[1], r.range[2], 1)))

but this does not expand the values of the legend.
Could somebody give me some hints?

Thank you
Stefano


        (oo)
--oOO--( )--OOo----------------
Stefano Sofia PhD
Area Meteorologica e  Area nivologica - Centro Funzionale
Servizio Protezione Civile - Regione Marche
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona
Uff: 071 806 7743
E-mail: stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>
---Oo---------oO----------------

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
This message was scanned by Libra ESVA and is believed to be clean.


[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org<https://urlsand.esvalabs.com/?u=http%3A%2F%2Fwww.bigelow.org&e=52342f8a&h=e098bd83&f=y&p=y>

Ecocast Reports: http://seascapemodeling.org/ecocast.html<https://urlsand.esvalabs.com/?u=http%3A%2F%2Fseascapemodeling.org%2Fecocast.html&e=52342f8a&h=a906bb68&f=y&p=y>
Tick Reports: https://report.bigelow.org/tick/<https://urlsand.esvalabs.com/?u=https%3A%2F%2Freport.bigelow.org%2Ftick%2F&e=52342f8a&h=1216cd50&f=y&p=y>
Jellyfish Reports: https://jellyfish.bigelow.org/jellyfish/<https://urlsand.esvalabs.com/?u=https%3A%2F%2Fjellyfish.bigelow.org%2Fjellyfish%2F&e=52342f8a&h=6c055c4c&f=y&p=y>




--
This message has been checked by Libra Esva and is found to be clean.
Mark it as spam<http://libraesvan2.regionemarche.intra/cgi-bin/learn-msg.cgi?id=D2C0A43AAE.A432F>
Blacklist sender<http://libraesvan2.regionemarche.intra/cgi-bin/learn-msg.cgi?blacklist=1&id=D2C0A43AAE.A432F>

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
This message was scanned by Libra ESVA and is believed to be clean.


	[[alternative HTML version deleted]]


From mashranga at yahoo.com  Sat Feb 10 06:22:06 2018
From: mashranga at yahoo.com (Mohammad Tanvir Ahamed)
Date: Sat, 10 Feb 2018 05:22:06 +0000 (UTC)
Subject: [R-sig-Geo] How  to label a polygon window (spatstat package)
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4F471ED8D1@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4F471ED85C@ESINO.regionemarche.intra>
 <B68F2E32-0A2F-449A-9E70-D3A3B9E99CF4@bigelow.org>
 <8B435C9568170B469AE31E8891E8CC4F471ED8D1@ESINO.regionemarche.intra>
Message-ID: <1994625069.35610.1518240126102@mail.yahoo.com>

Hi,?
I want to label a polygon (circle or polygon) inside.
As for example code?

library(spatstat)
x <- runif(20)
y <- runif(20)
X <- ppp(x, y, window=disc(0.7))
plot(X)

Now I want to label that circle inside . Can some one please help me ??
Thanks.?

Regards.............
Tanvir Ahamed 
Stockholm, Sweden???? |??mashranga at yahoo.com


From mdsumner at gmail.com  Sat Feb 10 06:35:46 2018
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 10 Feb 2018 05:35:46 +0000
Subject: [R-sig-Geo] 
 [R] How to label a polygon window (spatstat package)
In-Reply-To: <1994625069.35610.1518240126102@mail.yahoo.com>
References: <8B435C9568170B469AE31E8891E8CC4F471ED85C@ESINO.regionemarche.intra>
 <B68F2E32-0A2F-449A-9E70-D3A3B9E99CF4@bigelow.org>
 <8B435C9568170B469AE31E8891E8CC4F471ED8D1@ESINO.regionemarche.intra>
 <1994625069.35610.1518240126102@mail.yahoo.com>
Message-ID: <CAAcGz99_8wMqgL_OZkMYNLqS7rN81Xu2FP1Q+Xp3OPTySD8Ezg@mail.gmail.com>

Try

text(0.5, 0.5, label = "?text")

On Sat, 10 Feb 2018, 16:22 Mohammad Tanvir Ahamed via R-help, <
r-help at r-project.org> wrote:

> Hi,
> I want to label a polygon (circle or polygon) inside.
> As for example code
>
> library(spatstat)
> x <- runif(20)
> y <- runif(20)
> X <- ppp(x, y, window=disc(0.7))
> plot(X)
>
> Now I want to label that circle inside . Can some one please help me ?
> Thanks.
>
> Regards.............
> Tanvir Ahamed
> Stockholm, Sweden     |  mashranga at yahoo.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From mashranga at yahoo.com  Sat Feb 10 06:43:23 2018
From: mashranga at yahoo.com (Mohammad Tanvir Ahamed)
Date: Sat, 10 Feb 2018 05:43:23 +0000 (UTC)
Subject: [R-sig-Geo] 
 [R] How to label a polygon window (spatstat package)
In-Reply-To: <CAAcGz99_8wMqgL_OZkMYNLqS7rN81Xu2FP1Q+Xp3OPTySD8Ezg@mail.gmail.com>
References: <8B435C9568170B469AE31E8891E8CC4F471ED85C@ESINO.regionemarche.intra>
 <B68F2E32-0A2F-449A-9E70-D3A3B9E99CF4@bigelow.org>
 <8B435C9568170B469AE31E8891E8CC4F471ED8D1@ESINO.regionemarche.intra>
 <1994625069.35610.1518240126102@mail.yahoo.com>
 <CAAcGz99_8wMqgL_OZkMYNLqS7rN81Xu2FP1Q+Xp3OPTySD8Ezg@mail.gmail.com>
Message-ID: <992571113.52593.1518241403716@mail.yahoo.com>

Thanks.
when there is multiple polygon , it a problem .
looking for something more .

Regards.............
Tanvir Ahamed 
Stockholm, Sweden???? |??mashranga at yahoo.com 






On Saturday, February 10, 2018, 6:35:59 AM GMT+1, Michael Sumner <mdsumner at gmail.com> wrote: 





Try

text(0.5, 0.5, label = "?text") 

On Sat, 10 Feb 2018, 16:22 Mohammad Tanvir Ahamed via R-help, <r-help at r-project.org> wrote:
> Hi,?
> I want to label a polygon (circle or polygon) inside.
> As for example code?
> 
> library(spatstat)
> x <- runif(20)
> y <- runif(20)
> X <- ppp(x, y, window=disc(0.7))
> plot(X)
> 
> Now I want to label that circle inside . Can some one please help me ??
> Thanks.?
> 
> Regards.............
> Tanvir Ahamed
> Stockholm, Sweden???? |??mashranga at yahoo.com
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia


From r.turner at auckland.ac.nz  Sat Feb 10 09:20:15 2018
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sat, 10 Feb 2018 21:20:15 +1300
Subject: [R-sig-Geo] [FORGED] Re: [R] How to label a polygon window
 (spatstat package)
In-Reply-To: <992571113.52593.1518241403716@mail.yahoo.com>
References: <8B435C9568170B469AE31E8891E8CC4F471ED85C@ESINO.regionemarche.intra>
 <B68F2E32-0A2F-449A-9E70-D3A3B9E99CF4@bigelow.org>
 <8B435C9568170B469AE31E8891E8CC4F471ED8D1@ESINO.regionemarche.intra>
 <1994625069.35610.1518240126102@mail.yahoo.com>
 <CAAcGz99_8wMqgL_OZkMYNLqS7rN81Xu2FP1Q+Xp3OPTySD8Ezg@mail.gmail.com>
 <992571113.52593.1518241403716@mail.yahoo.com>
Message-ID: <8c76699f-ef46-1efe-d98e-a5302f5332cb@auckland.ac.nz>


On 10/02/18 18:43, Mohammad Tanvir Ahamed via R-sig-Geo wrote:

> Thanks.
> when there is multiple polygon , it a problem .
> looking for something more .

It is not at all clear to me what you are trying to accomplish.
If it were clearer, I could probably (???) give you an idea of how to 
approach your task.

Can you provide a minimal reproducible example of your situation, with a 
clear explanation of what you want to do next?  Some subscribers to 
r-sig-geo (myself *not* included) are very clever, but few if any are 
telepathic.

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From marcelino.delacruz at urjc.es  Sat Feb 10 14:43:25 2018
From: marcelino.delacruz at urjc.es (Marcelino de la Cruz Rot)
Date: Sat, 10 Feb 2018 14:43:25 +0100
Subject: [R-sig-Geo] 
 [R] How to label a polygon window (spatstat package)
In-Reply-To: <992571113.52593.1518241403716@mail.yahoo.com>
References: <8B435C9568170B469AE31E8891E8CC4F471ED85C@ESINO.regionemarche.intra>
 <B68F2E32-0A2F-449A-9E70-D3A3B9E99CF4@bigelow.org>
 <8B435C9568170B469AE31E8891E8CC4F471ED8D1@ESINO.regionemarche.intra>
 <1994625069.35610.1518240126102@mail.yahoo.com>
 <CAAcGz99_8wMqgL_OZkMYNLqS7rN81Xu2FP1Q+Xp3OPTySD8Ezg@mail.gmail.com>
 <992571113.52593.1518241403716@mail.yahoo.com>
Message-ID: <e161113e-6768-b66d-d99e-7e36079e41dc@urjc.es>

Maybe you meant something like this:


# example of several polygons (in a list)
x <- runif(20)
y <- runif(20)

polygons<- list()
for (i in 1:20) polygons[[i]]<- disc(radius=0.05, centre=c(x[i], y[i]))
plot(owin())
lapply(polygons, plot, add=T)

# label each polygon
labs<-letters
for (i in 1: length(polygons)) {xy<-centroid.owin(polygons[[i]]); 
text(xy$x,xy$y, labs[i])}



Cheers,

Marcelino



El 10/02/2018 a las 6:43, Mohammad Tanvir Ahamed via R-sig-Geo escribi?:
> Thanks.
> when there is multiple polygon , it a problem .
> looking for something more .
>
> Regards.............
> Tanvir Ahamed
> Stockholm, Sweden???? |??mashranga at yahoo.com
>
>
>
>
>
>
> On Saturday, February 10, 2018, 6:35:59 AM GMT+1, Michael Sumner <mdsumner at gmail.com> wrote:
>
>
>
>
>
> Try
>
> text(0.5, 0.5, label = "?text")
>
> On Sat, 10 Feb 2018, 16:22 Mohammad Tanvir Ahamed via R-help, <r-help at r-project.org> wrote:
>> Hi,
>> I want to label a polygon (circle or polygon) inside.
>> As for example code
>>
>> library(spatstat)
>> x <- runif(20)
>> y <- runif(20)
>> X <- ppp(x, y, window=disc(0.7))
>> plot(X)
>>
>> Now I want to label that circle inside . Can some one please help me ?
>> Thanks.
>>
>> Regards.............
>> Tanvir Ahamed
>> Stockholm, Sweden???? |??mashranga at yahoo.com
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

-- 
Marcelino de la Cruz Rot
Depto. de Biolog?a y Geolog?a
F?sica y Qu?mica Inorg?nica
Universidad Rey Juan Carlos
M?stoles Espa?a


From mashranga at yahoo.com  Sun Feb 11 03:44:05 2018
From: mashranga at yahoo.com (Mohammad Tanvir Ahamed)
Date: Sun, 11 Feb 2018 02:44:05 +0000 (UTC)
Subject: [R-sig-Geo] 
 [R] How to label a polygon window (spatstat package)
In-Reply-To: <e161113e-6768-b66d-d99e-7e36079e41dc@urjc.es>
References: <8B435C9568170B469AE31E8891E8CC4F471ED85C@ESINO.regionemarche.intra>
 <B68F2E32-0A2F-449A-9E70-D3A3B9E99CF4@bigelow.org>
 <8B435C9568170B469AE31E8891E8CC4F471ED8D1@ESINO.regionemarche.intra>
 <1994625069.35610.1518240126102@mail.yahoo.com>
 <CAAcGz99_8wMqgL_OZkMYNLqS7rN81Xu2FP1Q+Xp3OPTySD8Ezg@mail.gmail.com>
 <992571113.52593.1518241403716@mail.yahoo.com>
 <e161113e-6768-b66d-d99e-7e36079e41dc@urjc.es>
Message-ID: <910969407.412065.1518317045267@mail.yahoo.com>

Thanks. It works as expected .?
:)

Regards.............
Tanvir Ahamed 
?Stockholm, Sweden???? |??mashranga at yahoo.com 






On Saturday, February 10, 2018, 2:44:05 PM GMT+1, Marcelino de la Cruz Rot <marcelino.delacruz at urjc.es> wrote: 





Maybe you meant something like this:


# example of several polygons (in a list)
x <- runif(20)
y <- runif(20)

polygons<- list()
for (i in 1:20) polygons[[i]]<- disc(radius=0.05, centre=c(x[i], y[i]))
plot(owin())
lapply(polygons, plot, add=T)

# label each polygon
labs<-letters
for (i in 1: length(polygons)) {xy<-centroid.owin(polygons[[i]]); 
text(xy$x,xy$y, labs[i])}



Cheers,

Marcelino



El 10/02/2018 a las 6:43, Mohammad Tanvir Ahamed via R-sig-Geo escribi?:
> Thanks.
> when there is multiple polygon , it a problem .
> looking for something more .
>
> Regards.............
> Tanvir Ahamed
> Stockholm, Sweden???? |??mashranga at yahoo.com
>
>
>
>
>
>
> On Saturday, February 10, 2018, 6:35:59 AM GMT+1, Michael Sumner <mdsumner at gmail.com> wrote:
>
>
>
>
>
> Try
>
> text(0.5, 0.5, label = "?text")
>
> On Sat, 10 Feb 2018, 16:22 Mohammad Tanvir Ahamed via R-help, <r-help at r-project.org> wrote:
>> Hi,
>> I want to label a polygon (circle or polygon) inside.
>> As for example code
>>
>> library(spatstat)
>> x <- runif(20)
>> y <- runif(20)
>> X <- ppp(x, y, window=disc(0.7))
>> plot(X)
>>
>> Now I want to label that circle inside . Can some one please help me ?
>> Thanks.
>>
>> Regards.............
>> Tanvir Ahamed
>> Stockholm, Sweden???? |??mashranga at yahoo.com
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

>>
>

-- 
Marcelino de la Cruz Rot
Depto. de Biolog?a y Geolog?a
F?sica y Qu?mica Inorg?nica
Universidad Rey Juan Carlos
M?stoles Espa?a

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From mtreglia at gmail.com  Sun Feb 11 05:22:34 2018
From: mtreglia at gmail.com (Michael Treglia)
Date: Sat, 10 Feb 2018 23:22:34 -0500
Subject: [R-sig-Geo] Reading tables without geometry from gdb?
Message-ID: <CAPKp32vNP-909-LWUAmLoHvYfcqDENg-CH5cvOeO-mzGRZFmpQ@mail.gmail.com>

Hi All,

I have a file geodatabase with non-spatial tables that can be joined to
other spatial objects. Is there a best/easiest way to import the
non-spatial tables in R these days?

I've seen some solutions here:
https://gis.stackexchange.com/questions/184013/read-a-table-from-an-esri-file-geodatabase-gdb-using-r
but figured I'd see if I'm missing anything within sf.

If it helps, the dataset I'm looking at is here:
https://data.cityofnewyork.us/Environment/NYC-Urban-Tree-Canopy-Assessment-Metrics-2010/hnxz-kkn5

When I try sf::st_read, as follows, I get the subsequent error:
>comdists_data <-
sf::st_read(dsn=fgdb,table="LandCover_Metrics_NYC_Community_Districts_Version10C")

Error in st_sf(x, ..., agr = agr, sf_column_name = sf_column_name) :
  no simple features geometry column present.

Thanks all - best regards,
Mike T

	[[alternative HTML version deleted]]


From obrlsoilau at gmail.com  Sun Feb 11 11:34:59 2018
From: obrlsoilau at gmail.com (obrl soil)
Date: Sun, 11 Feb 2018 20:34:59 +1000
Subject: [R-sig-Geo] Reading tables without geometry from gdb?
In-Reply-To: <CAPKp32vNP-909-LWUAmLoHvYfcqDENg-CH5cvOeO-mzGRZFmpQ@mail.gmail.com>
References: <CAPKp32vNP-909-LWUAmLoHvYfcqDENg-CH5cvOeO-mzGRZFmpQ@mail.gmail.com>
Message-ID: <CALG31BU-0AUarxVe1XXvgn+CsvpzDmbRct1gkHQCj96Fc6TYyg@mail.gmail.com>

Hi Mike,

Here's a demo workflow that uses package sf as well as a standalone
install of GDAL (I use the OSGeo4W package version, but any install
that has the OpenFileGDB driver will do). Ogr2ogr can write to csv so
its easy enough to pull out the non-spatial tables that way.

I downloaded your data (fair warning to others, 140MB - not that you'd
know from the metadata!) and unzipped it as 'NYCTrees.gdb'. Now:

options(stringsAsFactors = FALSE)
library(sf) # for spatial
library(readr) # for csv
library(dplyr)  # for join

setwd('C:/DATA')

# somewhere to dump outputs
dir.create(file.path(getwd(), 'tree_tables'))

# whats in the gdb?
gdb_contents <- st_layers(dsn = file.path(getwd(), 'NYCTrees.gdb'),
do_count = TRUE)

# this is easier to read than the list above:
gdb_neat_deets <- data.frame('Name' = gdb_contents[['name']],
                             'Geomtype' = unlist(gdb_contents[['geomtype']]),
                             'features' = gdb_contents[['features']],
                             'fields' = gdb_contents[['fields']])

# so the non-spatial tables have geometry == NA, lets get their names
nyctrees_nonspatial <-
as.list(gdb_neat_deets[is.na(gdb_neat_deets$Geomtype), 'Name'])
# names attrib is useful here
names(nyctrees_nonspatial) <-
gdb_neat_deets[is.na(gdb_neat_deets$Geomtype), 'Name']

# pull all the non-spatial layers out to csv using GDAL:
lapply(seq_along(nyctrees_nonspatial), function(x) {
  system2('C:/OSGeo4W64/bin/ogr2ogr.exe',
          args = c(# output format
                   '-f', 'csv',
                   # overwrite
                   '-overwrite',
                   # destination file
                   file.path(getwd(),
                             'tree_tables',
                             paste0(names(nyctrees_nonspatial[x]), '.csv')),
                   # src file
                   file.path(getwd(), 'NYCTrees.gdb'), nyctrees_nonspatial[x]))
})

# this is p quick, but one of those files has 800k rows so...not that quick!

# are they there?
tree_csvs <- list.files(file.path(getwd(), 'tree_tables'),
                        pattern = '\\.csv$',
                        full.names = TRUE)

# awesome! lets read a small one in and try a spatial join
LandCover_Metrics_PROW_Borough <- read_csv(tree_csvs[7])

# this spatial layer appears to match
PROW_Borough_sf <- st_read(dsn   = file.path(getwd(), 'NYCTrees.gdb'),
                           layer = 'PROW_Borough')

# only 5 geometries, but they're massive multipolygons so this is how
you view attributes without crashing Rstudio:
View(st_set_geometry(PROW_Borough_sf, NULL))

# join on BoroName ought to work
test_join <- left_join(PROW_Borough_sf,
LandCover_Metrics_PROW_Borough, by = 'BoroName')

# seems legit. A (terrible) plot:
plot(select(test_join, Grass_P), border = NA)

et voila

cheers
@obrl_soil

On Sun, Feb 11, 2018 at 2:22 PM, Michael Treglia <mtreglia at gmail.com> wrote:
>
> Hi All,
>
> I have a file geodatabase with non-spatial tables that can be joined to
> other spatial objects. Is there a best/easiest way to import the
> non-spatial tables in R these days?
>
> I've seen some solutions here:
> https://gis.stackexchange.com/questions/184013/read-a-table-from-an-esri-file-geodatabase-gdb-using-r
> but figured I'd see if I'm missing anything within sf.
>
> If it helps, the dataset I'm looking at is here:
> https://data.cityofnewyork.us/Environment/NYC-Urban-Tree-Canopy-Assessment-Metrics-2010/hnxz-kkn5
>
> When I try sf::st_read, as follows, I get the subsequent error:
> >comdists_data <-
> sf::st_read(dsn=fgdb,table="LandCover_Metrics_NYC_Community_Districts_Version10C")
>
> Error in st_sf(x, ..., agr = agr, sf_column_name = sf_column_name) :
>   no simple features geometry column present.
>
> Thanks all - best regards,
> Mike T
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From edzer.pebesma at uni-muenster.de  Sun Feb 11 13:47:28 2018
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 11 Feb 2018 13:47:28 +0100
Subject: [R-sig-Geo] Reading tables without geometry from gdb?
In-Reply-To: <CAPKp32vNP-909-LWUAmLoHvYfcqDENg-CH5cvOeO-mzGRZFmpQ@mail.gmail.com>
References: <CAPKp32vNP-909-LWUAmLoHvYfcqDENg-CH5cvOeO-mzGRZFmpQ@mail.gmail.com>
Message-ID: <5ed15b19-f0db-53d9-f36e-9489e4a954b4@uni-muenster.de>



On 02/11/2018 05:22 AM, Michael Treglia wrote:
> Hi All,
> 
> I have a file geodatabase with non-spatial tables that can be joined to
> other spatial objects. Is there a best/easiest way to import the
> non-spatial tables in R these days?
> 
> I've seen some solutions here:
> https://gis.stackexchange.com/questions/184013/read-a-table-from-an-esri-file-geodatabase-gdb-using-r
> but figured I'd see if I'm missing anything within sf.
> 
> If it helps, the dataset I'm looking at is here:
> https://data.cityofnewyork.us/Environment/NYC-Urban-Tree-Canopy-Assessment-Metrics-2010/hnxz-kkn5
> 
> When I try sf::st_read, as follows, I get the subsequent error:
>> comdists_data <-
> sf::st_read(dsn=fgdb,table="LandCover_Metrics_NYC_Community_Districts_Version10C")
> 
> Error in st_sf(x, ..., agr = agr, sf_column_name = sf_column_name) :
>   no simple features geometry column present.

I didn't even get that far. I tried:

>
st_read(dsn="NYC_20Urban_20Tree_20Canopy_20Assessment_20Metrics_202010.zip",table="LandCover_Metrics_NYC_Community_Districts_Version10C")
Cannot open data source
/tmp/NYC_20Urban_20Tree_20Canopy_20Assessment_20Metrics_202010.zip
Error in CPL_read_ogr(dsn, layer, as.character(options), quiet, type,  :
  Open failed.

but I'm not sure about the dsn argument; in your example, it is not
clear what fgdb stands for.

I tried unzipping the file in a directory, and use the directory name
for dsn, but without success. Would appreciate pointers to what I'm
doing wrong.


> 
> Thanks all - best regards,
> Mike T
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From obrlsoilau at gmail.com  Sun Feb 11 13:52:00 2018
From: obrlsoilau at gmail.com (obrl soil)
Date: Sun, 11 Feb 2018 22:52:00 +1000
Subject: [R-sig-Geo] Reading tables without geometry from gdb?
In-Reply-To: <5ed15b19-f0db-53d9-f36e-9489e4a954b4@uni-muenster.de>
References: <CAPKp32vNP-909-LWUAmLoHvYfcqDENg-CH5cvOeO-mzGRZFmpQ@mail.gmail.com>
 <5ed15b19-f0db-53d9-f36e-9489e4a954b4@uni-muenster.de>
Message-ID: <CALG31BVGDskbbfVqnMjYA2Ggg4Jj1=-qYLW1SHNa1XfQQ4Vxug@mail.gmail.com>

The download wasn?t zipped correctly I think ? after unzipping, add
extension .gdb to the folder name.

@obrl_soil

On Sun, Feb 11, 2018 at 10:47 PM, Edzer Pebesma
<edzer.pebesma at uni-muenster.de> wrote:
>
>
> On 02/11/2018 05:22 AM, Michael Treglia wrote:
>> Hi All,
>>
>> I have a file geodatabase with non-spatial tables that can be joined to
>> other spatial objects. Is there a best/easiest way to import the
>> non-spatial tables in R these days?
>>
>> I've seen some solutions here:
>> https://gis.stackexchange.com/questions/184013/read-a-table-from-an-esri-file-geodatabase-gdb-using-r
>> but figured I'd see if I'm missing anything within sf.
>>
>> If it helps, the dataset I'm looking at is here:
>> https://data.cityofnewyork.us/Environment/NYC-Urban-Tree-Canopy-Assessment-Metrics-2010/hnxz-kkn5
>>
>> When I try sf::st_read, as follows, I get the subsequent error:
>>> comdists_data <-
>> sf::st_read(dsn=fgdb,table="LandCover_Metrics_NYC_Community_Districts_Version10C")
>>
>> Error in st_sf(x, ..., agr = agr, sf_column_name = sf_column_name) :
>>   no simple features geometry column present.
>
> I didn't even get that far. I tried:
>
>>
> st_read(dsn="NYC_20Urban_20Tree_20Canopy_20Assessment_20Metrics_202010.zip",table="LandCover_Metrics_NYC_Community_Districts_Version10C")
> Cannot open data source
> /tmp/NYC_20Urban_20Tree_20Canopy_20Assessment_20Metrics_202010.zip
> Error in CPL_read_ogr(dsn, layer, as.character(options), quiet, type,  :
>   Open failed.
>
> but I'm not sure about the dsn argument; in your example, it is not
> clear what fgdb stands for.
>
> I tried unzipping the file in a directory, and use the directory name
> for dsn, but without success. Would appreciate pointers to what I'm
> doing wrong.
>
>
>>
>> Thanks all - best regards,
>> Mike T
>>
>>       [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Edzer Pebesma
> Institute for Geoinformatics
> Heisenbergstrasse 2, 48151 Muenster, Germany
> Phone: +49 251 8333081
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From edzer.pebesma at uni-muenster.de  Sun Feb 11 14:05:41 2018
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 11 Feb 2018 14:05:41 +0100
Subject: [R-sig-Geo] Reading tables without geometry from gdb?
In-Reply-To: <CALG31BVGDskbbfVqnMjYA2Ggg4Jj1=-qYLW1SHNa1XfQQ4Vxug@mail.gmail.com>
References: <CAPKp32vNP-909-LWUAmLoHvYfcqDENg-CH5cvOeO-mzGRZFmpQ@mail.gmail.com>
 <5ed15b19-f0db-53d9-f36e-9489e4a954b4@uni-muenster.de>
 <CALG31BVGDskbbfVqnMjYA2Ggg4Jj1=-qYLW1SHNa1XfQQ4Vxug@mail.gmail.com>
Message-ID: <8632f331-d75b-c500-72be-548c5b6a5a67@uni-muenster.de>

Bingo! Thanks,

On 02/11/2018 01:52 PM, obrl soil wrote:
> The download wasn?t zipped correctly I think ? after unzipping, add
> extension .gdb to the folder name.
> 
> @obrl_soil
> 
> On Sun, Feb 11, 2018 at 10:47 PM, Edzer Pebesma
> <edzer.pebesma at uni-muenster.de> wrote:
>>
>>
>> On 02/11/2018 05:22 AM, Michael Treglia wrote:
>>> Hi All,
>>>
>>> I have a file geodatabase with non-spatial tables that can be joined to
>>> other spatial objects. Is there a best/easiest way to import the
>>> non-spatial tables in R these days?
>>>
>>> I've seen some solutions here:
>>> https://gis.stackexchange.com/questions/184013/read-a-table-from-an-esri-file-geodatabase-gdb-using-r
>>> but figured I'd see if I'm missing anything within sf.
>>>
>>> If it helps, the dataset I'm looking at is here:
>>> https://data.cityofnewyork.us/Environment/NYC-Urban-Tree-Canopy-Assessment-Metrics-2010/hnxz-kkn5
>>>
>>> When I try sf::st_read, as follows, I get the subsequent error:
>>>> comdists_data <-
>>> sf::st_read(dsn=fgdb,table="LandCover_Metrics_NYC_Community_Districts_Version10C")
>>>
>>> Error in st_sf(x, ..., agr = agr, sf_column_name = sf_column_name) :
>>>   no simple features geometry column present.
>>
>> I didn't even get that far. I tried:
>>
>>>
>> st_read(dsn="NYC_20Urban_20Tree_20Canopy_20Assessment_20Metrics_202010.zip",table="LandCover_Metrics_NYC_Community_Districts_Version10C")
>> Cannot open data source
>> /tmp/NYC_20Urban_20Tree_20Canopy_20Assessment_20Metrics_202010.zip
>> Error in CPL_read_ogr(dsn, layer, as.character(options), quiet, type,  :
>>   Open failed.
>>
>> but I'm not sure about the dsn argument; in your example, it is not
>> clear what fgdb stands for.
>>
>> I tried unzipping the file in a directory, and use the directory name
>> for dsn, but without success. Would appreciate pointers to what I'm
>> doing wrong.
>>
>>
>>>
>>> Thanks all - best regards,
>>> Mike T
>>>
>>>       [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics
>> Heisenbergstrasse 2, 48151 Muenster, Germany
>> Phone: +49 251 8333081
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From edzer.pebesma at uni-muenster.de  Sun Feb 11 14:27:43 2018
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 11 Feb 2018 14:27:43 +0100
Subject: [R-sig-Geo] Reading tables without geometry from gdb?
In-Reply-To: <CAPKp32vNP-909-LWUAmLoHvYfcqDENg-CH5cvOeO-mzGRZFmpQ@mail.gmail.com>
References: <CAPKp32vNP-909-LWUAmLoHvYfcqDENg-CH5cvOeO-mzGRZFmpQ@mail.gmail.com>
Message-ID: <b0d1b24a-4920-6db7-ae08-ed883d287d9f@uni-muenster.de>

sf::st_read now returns a data.frame if no geometry column is found,
rather than raising an error:

https://github.com/r-spatial/sf/commit/77a31f2989a1d217438fb629ac34d7ef31baa9c2

it does emit a warning in that case, now, since an object of a different
type than expected is returned:

> x = st_read("fgdb.gdb",
"LandCover_Metrics_NYC_Community_Districts_Version10C")
Reading layer `LandCover_Metrics_NYC_Community_Districts_Version10C'
from data source `/tmp/fgdb.gdb' using driver `OpenFileGDB'
Warning message:
  no simple feature geometries present: returning a data.frame
> x[1:2,]
  TC_ID  Total_A   Can_A   Grass_A   Soil_A Water_A  Build_A  Road_A
Paved_A
1     1 41641392 4935664 3736731.7 21923.00  783819 13813225 8179456
10170573
2     2 37739955 4440133  632087.5 12255.75  343714 17140788 7380846
7790131
   Perv_A Imperv_A    Can_P  Grass_P     Soil_P  Water_P  Build_P   Road_P
1 9478138 32163254 11.85278 8.973599 0.05264713 1.882307 33.17186 19.64261
2 5428190 32311765 11.76507 1.674850 0.03247420 0.910743 45.41815 19.55711
   Paved_P   Perv_P Imperv_P BoroCD
1 24.42419 22.76134 77.23866    101
2 20.64160 14.38314 85.61686    102




On 02/11/2018 05:22 AM, Michael Treglia wrote:
> Hi All,
> 
> I have a file geodatabase with non-spatial tables that can be joined to
> other spatial objects. Is there a best/easiest way to import the
> non-spatial tables in R these days?
> 
> I've seen some solutions here:
> https://gis.stackexchange.com/questions/184013/read-a-table-from-an-esri-file-geodatabase-gdb-using-r
> but figured I'd see if I'm missing anything within sf.
> 
> If it helps, the dataset I'm looking at is here:
> https://data.cityofnewyork.us/Environment/NYC-Urban-Tree-Canopy-Assessment-Metrics-2010/hnxz-kkn5
> 
> When I try sf::st_read, as follows, I get the subsequent error:
>> comdists_data <-
> sf::st_read(dsn=fgdb,table="LandCover_Metrics_NYC_Community_Districts_Version10C")
> 
> Error in st_sf(x, ..., agr = agr, sf_column_name = sf_column_name) :
>   no simple features geometry column present.
> 
> Thanks all - best regards,
> Mike T
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From mtreglia at gmail.com  Sun Feb 11 15:45:38 2018
From: mtreglia at gmail.com (Michael Treglia)
Date: Sun, 11 Feb 2018 09:45:38 -0500
Subject: [R-sig-Geo] Reading tables without geometry from gdb?
In-Reply-To: <b0d1b24a-4920-6db7-ae08-ed883d287d9f@uni-muenster.de>
References: <CAPKp32vNP-909-LWUAmLoHvYfcqDENg-CH5cvOeO-mzGRZFmpQ@mail.gmail.com>
 <b0d1b24a-4920-6db7-ae08-ed883d287d9f@uni-muenster.de>
Message-ID: <CAPKp32uibeF3YgqcFGMST2tduZy=MuzCa9mxRyApAOom-_tzpA@mail.gmail.com>

This is great - thanks so much Edzer! I'm sure this will come in handy for
others too.

And thanks to @obrl_soil for the clear and thorough response too.

Best,
Mike

On Sun, Feb 11, 2018 at 8:27 AM, Edzer Pebesma <
edzer.pebesma at uni-muenster.de> wrote:

> sf::st_read now returns a data.frame if no geometry column is found,
> rather than raising an error:
>
> https://github.com/r-spatial/sf/commit/77a31f2989a1d217438fb629ac34d7
> ef31baa9c2
>
> it does emit a warning in that case, now, since an object of a different
> type than expected is returned:
>
> > x = st_read("fgdb.gdb",
> "LandCover_Metrics_NYC_Community_Districts_Version10C")
> Reading layer `LandCover_Metrics_NYC_Community_Districts_Version10C'
> from data source `/tmp/fgdb.gdb' using driver `OpenFileGDB'
> Warning message:
>   no simple feature geometries present: returning a data.frame
> > x[1:2,]
>   TC_ID  Total_A   Can_A   Grass_A   Soil_A Water_A  Build_A  Road_A
> Paved_A
> 1     1 41641392 4935664 3736731.7 21923.00  783819 13813225 8179456
> 10170573
> 2     2 37739955 4440133  632087.5 12255.75  343714 17140788 7380846
> 7790131
>    Perv_A Imperv_A    Can_P  Grass_P     Soil_P  Water_P  Build_P   Road_P
> 1 9478138 32163254 11.85278 8.973599 0.05264713 1.882307 33.17186 19.64261
> 2 5428190 32311765 11.76507 1.674850 0.03247420 0.910743 45.41815 19.55711
>    Paved_P   Perv_P Imperv_P BoroCD
> 1 24.42419 22.76134 77.23866    101
> 2 20.64160 14.38314 85.61686    102
>
>
>
>
> On 02/11/2018 05:22 AM, Michael Treglia wrote:
> > Hi All,
> >
> > I have a file geodatabase with non-spatial tables that can be joined to
> > other spatial objects. Is there a best/easiest way to import the
> > non-spatial tables in R these days?
> >
> > I've seen some solutions here:
> > https://gis.stackexchange.com/questions/184013/read-a-table-
> from-an-esri-file-geodatabase-gdb-using-r
> > but figured I'd see if I'm missing anything within sf.
> >
> > If it helps, the dataset I'm looking at is here:
> > https://data.cityofnewyork.us/Environment/NYC-Urban-Tree-
> Canopy-Assessment-Metrics-2010/hnxz-kkn5
> >
> > When I try sf::st_read, as follows, I get the subsequent error:
> >> comdists_data <-
> > sf::st_read(dsn=fgdb,table="LandCover_Metrics_NYC_Community_Districts_
> Version10C")
> >
> > Error in st_sf(x, ..., agr = agr, sf_column_name = sf_column_name) :
> >   no simple features geometry column present.
> >
> > Thanks all - best regards,
> > Mike T
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
> --
> Edzer Pebesma
> Institute for Geoinformatics
> Heisenbergstrasse 2, 48151 Muenster, Germany
> Phone: +49 251 8333081
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From stefano.sofia at regione.marche.it  Mon Feb 12 09:03:41 2018
From: stefano.sofia at regione.marche.it (Stefano Sofia)
Date: Mon, 12 Feb 2018 08:03:41 +0000
Subject: [R-sig-Geo] Interpolating snowfall values on a Digital Elevation
 Model
Message-ID: <8B435C9568170B469AE31E8891E8CC4F471EDAB6@ESINO.regionemarche.intra>

Dear list users,
I have to produce rainfall maps. I know how to create a (bi-dimensional) grid and interpolate rainfall values (from automatic rain gauges) on that grid using Kriging:

myinterpolation <- autoKrige(myrainfall_cumulate ~ 1, rain_data_UTM, mygrid)

In reality I am dealing with snowfall values on mountain regions, and in this case altitude is an important factor, the use of a Digital Elevation Model might make the difference.
Looking in the web I found some important material about accessing elevation data in R with the "elevatr" package (by J.W.Hollister), I am reading it.
My concern would then be to interpolate snowfall values on a Digital Elevation Model. Did somebody already use R for these kinds of calculations? Could somebody share with me some useful hints?

Thank you for your attention
Stefano Sofia


         (oo)
--oOO--( )--OOo----------------
Stefano Sofia PhD
Area Meteorologica e  Area nivologica - Centro Funzionale
Servizio Protezione Civile - Regione Marche
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona
Uff: 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
This message was scanned by Libra ESVA and is believed to be clean.


	[[alternative HTML version deleted]]


From knitter at geographie.uni-kiel.de  Mon Feb 12 09:10:09 2018
From: knitter at geographie.uni-kiel.de (Daniel Knitter)
Date: Mon, 12 Feb 2018 09:10:09 +0100
Subject: [R-sig-Geo] 
 Interpolating snowfall values on a Digital Elevation Model
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4F471EDAB6@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4F471EDAB6@ESINO.regionemarche.intra>
Message-ID: <20180212091009.0f666880@LGI-ASSI15>

Hi Stefano,

assuming you have a DEM (downloaded e.g. from https://earthexplorer.usgs.gov/ or using the getData function from the raster package) as SpatialGridDataFrame loaded via readGDAL from the rgdal package you can use 

autoKrige(YourMeasurements ~ DEM, YourMeasurementLocations, TargetGrid)

Futher information on "Regression Kriging" or "Kriging with external drift" can be found in the book of Hengl: http://spatial-analyst.net/book/ToC

Best,
Daniel

On Mon, 12 Feb 2018 08:03:41 +0000
Stefano Sofia <stefano.sofia at regione.marche.it> wrote:

> Dear list users,
> I have to produce rainfall maps. I know how to create a (bi-dimensional) grid and interpolate rainfall values (from automatic rain gauges) on that grid using Kriging:
> 
> myinterpolation <- autoKrige(myrainfall_cumulate ~ 1, rain_data_UTM, mygrid)
> 
> In reality I am dealing with snowfall values on mountain regions, and in this case altitude is an important factor, the use of a Digital Elevation Model might make the difference.
> Looking in the web I found some important material about accessing elevation data in R with the "elevatr" package (by J.W.Hollister), I am reading it.
> My concern would then be to interpolate snowfall values on a Digital Elevation Model. Did somebody already use R for these kinds of calculations? Could somebody share with me some useful hints?
> 
> Thank you for your attention
> Stefano Sofia
> 
> 
>          (oo)
> --oOO--( )--OOo----------------
> Stefano Sofia PhD
> Area Meteorologica e  Area nivologica - Centro Funzionale
> Servizio Protezione Civile - Regione Marche
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------
> 
> ________________________________
> 
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
> 
> --
> This message was scanned by Libra ESVA and is believed to be clean.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 819 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20180212/515c501c/attachment.sig>

From knitter at geographie.uni-kiel.de  Mon Feb 12 09:16:07 2018
From: knitter at geographie.uni-kiel.de (Daniel Knitter)
Date: Mon, 12 Feb 2018 09:16:07 +0100
Subject: [R-sig-Geo] 
 Interpolating snowfall values on a Digital Elevation Model
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4F471EDAB6@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4F471EDAB6@ESINO.regionemarche.intra>
Message-ID: <20180212091607.1b567b68@LGI-ASSI15>

...sorry, I missed one step: you need to extract the elevation values to your points via extract function from the raster package:

YourPoints$YourExtractedElevationValues <- extract(x = DEM, y = YourPoints)

autoKrige(YourMeasurements ~ YourExtractedElevationValues, YourMeasurementLocations, TargetGrid)


Sorry for spamming. 

Best,
Daniel

On Mon, 12 Feb 2018 08:03:41 +0000
Stefano Sofia <stefano.sofia at regione.marche.it> wrote:

> Dear list users,
> I have to produce rainfall maps. I know how to create a (bi-dimensional) grid and interpolate rainfall values (from automatic rain gauges) on that grid using Kriging:
> 
> myinterpolation <- autoKrige(myrainfall_cumulate ~ 1, rain_data_UTM, mygrid)
> 
> In reality I am dealing with snowfall values on mountain regions, and in this case altitude is an important factor, the use of a Digital Elevation Model might make the difference.
> Looking in the web I found some important material about accessing elevation data in R with the "elevatr" package (by J.W.Hollister), I am reading it.
> My concern would then be to interpolate snowfall values on a Digital Elevation Model. Did somebody already use R for these kinds of calculations? Could somebody share with me some useful hints?
> 
> Thank you for your attention
> Stefano Sofia
> 
> 
>          (oo)
> --oOO--( )--OOo----------------
> Stefano Sofia PhD
> Area Meteorologica e  Area nivologica - Centro Funzionale
> Servizio Protezione Civile - Regione Marche
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------
> 
> ________________________________
> 
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
> 
> --
> This message was scanned by Libra ESVA and is believed to be clean.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 

Dr. Daniel Knitter
CRC1266 -- Scales of Transformation
Project A2 "Integrative Modeling of Socio-Environmental Dynamics"

Christian-Albrechts-Universit?t zu Kiel
Department of Geography
Physical Geography -- Landscape Ecology and Geoinformation
Ludewig-Meyn-Str. 14, room 109
D - 24118 Kiel, Germany

Phone: +49 431 880 2941
Email: knitter at geographie.uni-kiel.de

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 819 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20180212/e91d9db6/attachment.sig>

From stefano.sofia at regione.marche.it  Tue Feb 13 09:45:34 2018
From: stefano.sofia at regione.marche.it (Stefano Sofia)
Date: Tue, 13 Feb 2018 08:45:34 +0000
Subject: [R-sig-Geo] 
 Interpolating snowfall values on a Digital Elevation Model
In-Reply-To: <20180212091607.1b567b68@LGI-ASSI15>
References: <8B435C9568170B469AE31E8891E8CC4F471EDAB6@ESINO.regionemarche.intra>,
 <20180212091607.1b567b68@LGI-ASSI15>
Message-ID: <8B435C9568170B469AE31E8891E8CC4F471EDCAC@ESINO.regionemarche.intra>

Dear Daniel and list users,
I tried to follow the instructions but I encountered two kinds of errors.
This is a reproducibile code:

---------------------------------------------------------------------------------------------------------------
library(automap)
library(ggplot2)
library(gstat)
library(raster)
library(rasterVis)
library(rgdal)
library(maptools)

## LOADING DEM
ita_DEM <- getData('alt', country='ITA', mask=TRUE)
crs(ita_DEM) <- "+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"
#ita_DEM <- as(ita_DEM, "SpatialGridDataFrame")
str(ita_DEM)

## LOADING RAINFALL DATA
rain_data <- data.frame(Cumulata=c(11.8, 9.0, 8.0, 36.6, 9.4), Long_Cent=c(12.61874, 12.78690, 12.96756, 13.15599, 13.28157), Lat_Cent=c(43.79447, 43.85185, 43.76267, 43.03470, 43.08003), Altitude=c(112.20, 42.93, 36.14, 747, 465))

stations <- data.frame(rain_data$Long_Cent, rain_data$Lat_Cent)
rain_data <- SpatialPointsDataFrame(stations, rain_data, proj4string=CRS("+init=epsg:4326"))
stations <- SpatialPoints(stations, proj4string=CRS("+init=epsg:4326"))

## EXTRACT THE ELEVATION VALUES TO MY POINTS
rain_data$ExtractedElevationValues <- extract(x=ita_DEM, y=stations)

## CREATE GRID FOR KRIGING OUTPUT
minx <-  rain_data at bbox[1,1]
maxx <- rain_data at bbox[1,2]
miny <- rain_data at bbox[2,1]
maxy <- rain_data at bbox[2,2]
pixel <- 0.01
grd <- expand.grid(x=seq(minx, maxx, by=pixel), y=seq(miny, maxy, by=pixel))
coordinates(grd) <- ~x+y
gridded(grd) <- TRUE
proj4string(grd) <- CRS("+init=epsg:4326")

## KRIGING: autoKrige(YourMeasurements ~ YourExtractedElevationValues, YourMeasurementLocations, TargetGrid)
OK_snow <- autoKrige(Cumulata ~ rain_data$ExtractedElevationValues, rain_data, grd)
-------------------------------------------------------------------------------------------------------------------------------

The error I get is:
Error in autoKrige(Cumulata ~ rain_data$ExtractedElevationValues, rain_data,  :
  Either input_data or new_data is in LongLat, please reproject.
   input_data:  +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0
   new_data:    +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0

but I did pay attention to have the same reference system in rain_data, drg and the Digital Elevation Model.

Moreover, if I impose the class of the DEM to SpatialGridDataFrame when I extraxt the elevation points from the DEM I get the following error:
Error in (function (classes, fdef, mtable)  :
  unable to find an inherited method for function ?extract? for signature ?"SpatialGridDataFrame", "SpatialPoints"?
Calls: extract -> <Anonymous>


Would you please somebody help to show me where is my mistake?

Thank you for all your attention
Stefano

         (oo)
--oOO--( )--OOo----------------
Stefano Sofia PhD
Area Meteorologica e  Area nivologica - Centro Funzionale
Servizio Protezione Civile - Regione Marche
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona
Uff: 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------
________________________________________
Da: R-sig-Geo [r-sig-geo-bounces at r-project.org] per conto di Daniel Knitter [knitter at geographie.uni-kiel.de]
Inviato: luned? 12 febbraio 2018 9.16
A: r-sig-geo at r-project.org
Oggetto: Re: [R-sig-Geo]  Interpolating snowfall values on a Digital Elevation Model

...sorry, I missed one step: you need to extract the elevation values to your points via extract function from the raster package:

YourPoints$YourExtractedElevationValues <- extract(x = DEM, y = YourPoints)

autoKrige(YourMeasurements ~ YourExtractedElevationValues, YourMeasurementLocations, TargetGrid)


Sorry for spamming.

Best,
Daniel

On Mon, 12 Feb 2018 08:03:41 +0000
Stefano Sofia <stefano.sofia at regione.marche.it> wrote:

> Dear list users,
> I have to produce rainfall maps. I know how to create a (bi-dimensional) grid and interpolate rainfall values (from automatic rain gauges) on that grid using Kriging:
>
> myinterpolation <- autoKrige(myrainfall_cumulate ~ 1, rain_data_UTM, mygrid)
>
> In reality I am dealing with snowfall values on mountain regions, and in this case altitude is an important factor, the use of a Digital Elevation Model might make the difference.
> Looking in the web I found some important material about accessing elevation data in R with the "elevatr" package (by J.W.Hollister), I am reading it.
> My concern would then be to interpolate snowfall values on a Digital Elevation Model. Did somebody already use R for these kinds of calculations? Could somebody share with me some useful hints?
>
> Thank you for your attention
> Stefano Sofia
>
>
>          (oo)
> --oOO--( )--OOo----------------
> Stefano Sofia PhD
> Area Meteorologica e  Area nivologica - Centro Funzionale
> Servizio Protezione Civile - Regione Marche
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
>
> --
> This message was scanned by Libra ESVA and is believed to be clean.
>
>
>       [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&e=52342f8a&h=f7d4a649&f=y&p=y


--

Dr. Daniel Knitter
CRC1266 -- Scales of Transformation
Project A2 "Integrative Modeling of Socio-Environmental Dynamics"

Christian-Albrechts-Universit?t zu Kiel
Department of Geography
Physical Geography -- Landscape Ecology and Geoinformation
Ludewig-Meyn-Str. 14, room 109
D - 24118 Kiel, Germany

Phone: +49 431 880 2941
Email: knitter at geographie.uni-kiel.de

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
This message was scanned by Libra ESVA and is believed to be clean.


From dosc3612 at colorado.edu  Tue Feb 13 17:21:29 2018
From: dosc3612 at colorado.edu (Dominik Schneider)
Date: Tue, 13 Feb 2018 11:21:29 -0500
Subject: [R-sig-Geo] 
 Interpolating snowfall values on a Digital Elevation Model
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4F471EDCAC@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4F471EDAB6@ESINO.regionemarche.intra>
 <20180212091607.1b567b68@LGI-ASSI15>
 <8B435C9568170B469AE31E8891E8CC4F471EDCAC@ESINO.regionemarche.intra>
Message-ID: <CAF1jk_m2rysUnLyp7T8+oY2upFBnxgnwLsZDSMw7npvaKBZTvg@mail.gmail.com>

You can't use a lat/long coordinate system when kriging because the concept
of distance is ambiguous. Convert all your data a UTM grid like you had in
your first post and it should work.

Another note, It looks like you are working at 0.01 deg which is on the
order of 1km resolution so you may find  other covariates such as aspect,
slope, and wind sheltering/exposure, terrain roughness for estimating snow
on the ground useful. see some of the earliest papers by Carroll, Cressie,
and Elder.

Carroll, S. S., and N. Cressie (1996), A comparison of geostatistical
methodologies used to estimate snow water equivalent, *JAWRA Journal of the
American Water Resources Association*, *32*(2), 267?278,
doi:10.1111/j.1752-1688.1996.tb03450.x.

Carroll, S. S., and N. Cressie (1997), Spatial modeling of snow water
equivalent using covariances estimated from spatial and geomorphic
attributes, *Journal of Hydrology*, *190*(1-2), 42?59.

Balk, B., and K. Elder (2000), Combining binary decision tree and
geostatistical methods to estimate snow distribution in a mountain
watershed, *Water Resources Research*, *36*(1), 13?26,
doi:10.1029/1999WR900251.

Erxleben, J., K. Elder, and R. Davis (2002), Comparison of spatial
interpolation methods for estimating snow distribution in the Colorado
Rocky Mountains, *Hydrological Processes*, *16*(18), 3627?3649,
doi:10.1002/hyp.1239.

Erickson, T. A., M. W. Williams, and A. Winstral (2005), Persistence of
topographic controls on the spatial distribution of snow in rugged mountain
terrain, Colorado, United States, *Water Resour. Res.*, *41*(4), W04014,
doi:10.1029/2003WR002973.


On Tue, Feb 13, 2018 at 3:45 AM, Stefano Sofia <
stefano.sofia at regione.marche.it> wrote:

> Dear Daniel and list users,
> I tried to follow the instructions but I encountered two kinds of errors.
> This is a reproducibile code:
>
> ------------------------------------------------------------
> ---------------------------------------------------
> library(automap)
> library(ggplot2)
> library(gstat)
> library(raster)
> library(rasterVis)
> library(rgdal)
> library(maptools)
>
> ## LOADING DEM
> ita_DEM <- getData('alt', country='ITA', mask=TRUE)
> crs(ita_DEM) <- "+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> +ellps=WGS84 +towgs84=0,0,0"
> #ita_DEM <- as(ita_DEM, "SpatialGridDataFrame")
> str(ita_DEM)
>
> ## LOADING RAINFALL DATA
> rain_data <- data.frame(Cumulata=c(11.8, 9.0, 8.0, 36.6, 9.4),
> Long_Cent=c(12.61874, 12.78690, 12.96756, 13.15599, 13.28157),
> Lat_Cent=c(43.79447, 43.85185, 43.76267, 43.03470, 43.08003),
> Altitude=c(112.20, 42.93, 36.14, 747, 465))
>
> stations <- data.frame(rain_data$Long_Cent, rain_data$Lat_Cent)
> rain_data <- SpatialPointsDataFrame(stations, rain_data,
> proj4string=CRS("+init=epsg:4326"))
> stations <- SpatialPoints(stations, proj4string=CRS("+init=epsg:4326"))
>
> ## EXTRACT THE ELEVATION VALUES TO MY POINTS
> rain_data$ExtractedElevationValues <- extract(x=ita_DEM, y=stations)
>
> ## CREATE GRID FOR KRIGING OUTPUT
> minx <-  rain_data at bbox[1,1]
> maxx <- rain_data at bbox[1,2]
> miny <- rain_data at bbox[2,1]
> maxy <- rain_data at bbox[2,2]
> pixel <- 0.01
> grd <- expand.grid(x=seq(minx, maxx, by=pixel), y=seq(miny, maxy,
> by=pixel))
> coordinates(grd) <- ~x+y
> gridded(grd) <- TRUE
> proj4string(grd) <- CRS("+init=epsg:4326")
>
> ## KRIGING: autoKrige(YourMeasurements ~ YourExtractedElevationValues,
> YourMeasurementLocations, TargetGrid)
> OK_snow <- autoKrige(Cumulata ~ rain_data$ExtractedElevationValues,
> rain_data, grd)
> ------------------------------------------------------------
> -------------------------------------------------------------------
>
> The error I get is:
> Error in autoKrige(Cumulata ~ rain_data$ExtractedElevationValues,
> rain_data,  :
>   Either input_data or new_data is in LongLat, please reproject.
>    input_data:  +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> +ellps=WGS84 +towgs84=0,0,0
>    new_data:    +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> +ellps=WGS84 +towgs84=0,0,0
>
> but I did pay attention to have the same reference system in rain_data,
> drg and the Digital Elevation Model.
>
> Moreover, if I impose the class of the DEM to SpatialGridDataFrame when I
> extraxt the elevation points from the DEM I get the following error:
> Error in (function (classes, fdef, mtable)  :
>   unable to find an inherited method for function ?extract? for signature
> ?"SpatialGridDataFrame", "SpatialPoints"?
> Calls: extract -> <Anonymous>
>
>
> Would you please somebody help to show me where is my mistake?
>
> Thank you for all your attention
> Stefano
>
>          (oo)
> --oOO--( )--OOo----------------
> Stefano Sofia PhD
> Area Meteorologica e  Area nivologica - Centro Funzionale
> Servizio Protezione Civile - Regione Marche
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------
> ________________________________________
> Da: R-sig-Geo [r-sig-geo-bounces at r-project.org] per conto di Daniel
> Knitter [knitter at geographie.uni-kiel.de]
> Inviato: luned? 12 febbraio 2018 9.16
> A: r-sig-geo at r-project.org
> Oggetto: Re: [R-sig-Geo]  Interpolating snowfall values on a Digital
> Elevation Model
>
> ...sorry, I missed one step: you need to extract the elevation values to
> your points via extract function from the raster package:
>
> YourPoints$YourExtractedElevationValues <- extract(x = DEM, y =
> YourPoints)
>
> autoKrige(YourMeasurements ~ YourExtractedElevationValues,
> YourMeasurementLocations, TargetGrid)
>
>
> Sorry for spamming.
>
> Best,
> Daniel
>
> On Mon, 12 Feb 2018 08:03:41 +0000
> Stefano Sofia <stefano.sofia at regione.marche.it> wrote:
>
> > Dear list users,
> > I have to produce rainfall maps. I know how to create a (bi-dimensional)
> grid and interpolate rainfall values (from automatic rain gauges) on that
> grid using Kriging:
> >
> > myinterpolation <- autoKrige(myrainfall_cumulate ~ 1, rain_data_UTM,
> mygrid)
> >
> > In reality I am dealing with snowfall values on mountain regions, and in
> this case altitude is an important factor, the use of a Digital Elevation
> Model might make the difference.
> > Looking in the web I found some important material about accessing
> elevation data in R with the "elevatr" package (by J.W.Hollister), I am
> reading it.
> > My concern would then be to interpolate snowfall values on a Digital
> Elevation Model. Did somebody already use R for these kinds of
> calculations? Could somebody share with me some useful hints?
> >
> > Thank you for your attention
> > Stefano Sofia
> >
> >
> >          (oo)
> > --oOO--( )--OOo----------------
> > Stefano Sofia PhD
> > Area Meteorologica e  Area nivologica - Centro Funzionale
> > Servizio Protezione Civile - Regione Marche
> > Via del Colle Ameno 5
> > 60126 Torrette di Ancona, Ancona
> > Uff: 071 806 7743
> > E-mail: stefano.sofia at regione.marche.it
> > ---Oo---------oO----------------
> >
> > ________________________________
> >
> > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
> informazioni confidenziali, pertanto ? destinato solo a persone autorizzate
> alla ricezione. I messaggi di posta elettronica per i client di Regione
> Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o
> archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore,
> inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio
> computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in
> caso di necessit? ed urgenza, la risposta al presente messaggio di posta
> elettronica pu? essere visionata da persone estranee al destinatario.
> > IMPORTANT NOTICE: This e-mail message is intended to be received only by
> persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information that
> is confidential and legally privileged. Please do not read, copy, forward,
> or store this message unless you are an intended recipient of it. If you
> have received this message in error, please forward it to the sender and
> delete it completely from your computer system.
> >
> > --
> > This message was scanned by Libra ESVA and is believed to be clean.
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%
> 2Fmailman%2Flistinfo%2Fr-sig-geo&e=52342f8a&h=f7d4a649&f=y&p=y
>
>
> --
>
> Dr. Daniel Knitter
> CRC1266 -- Scales of Transformation
> Project A2 "Integrative Modeling of Socio-Environmental Dynamics"
>
> Christian-Albrechts-Universit?t zu Kiel
> Department of Geography
> Physical Geography -- Landscape Ecology and Geoinformation
> Ludewig-Meyn-Str. 14, room 109
> D - 24118 Kiel, Germany
>
> Phone: +49 431 880 2941
> Email: knitter at geographie.uni-kiel.de
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
> informazioni confidenziali, pertanto ? destinato solo a persone autorizzate
> alla ricezione. I messaggi di posta elettronica per i client di Regione
> Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o
> archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore,
> inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio
> computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in
> caso di necessit? ed urgenza, la risposta al presente messaggio di posta
> elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by
> persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information that
> is confidential and legally privileged. Please do not read, copy, forward,
> or store this message unless you are an intended recipient of it. If you
> have received this message in error, please forward it to the sender and
> delete it completely from your computer system.
>
> --
> This message was scanned by Libra ESVA and is believed to be clean.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From stefano.sofia at regione.marche.it  Tue Feb 13 17:35:48 2018
From: stefano.sofia at regione.marche.it (Stefano Sofia)
Date: Tue, 13 Feb 2018 16:35:48 +0000
Subject: [R-sig-Geo] 
 Interpolating snowfall values on a Digital Elevation Model
In-Reply-To: <CAF1jk_m2rysUnLyp7T8+oY2upFBnxgnwLsZDSMw7npvaKBZTvg@mail.gmail.com>
References: <8B435C9568170B469AE31E8891E8CC4F471EDAB6@ESINO.regionemarche.intra>
 <20180212091607.1b567b68@LGI-ASSI15>
 <8B435C9568170B469AE31E8891E8CC4F471EDCAC@ESINO.regionemarche.intra>,
 <CAF1jk_m2rysUnLyp7T8+oY2upFBnxgnwLsZDSMw7npvaKBZTvg@mail.gmail.com>
Message-ID: <8B435C9568170B469AE31E8891E8CC4F471EDECE@ESINO.regionemarche.intra>

Yes, thank you for all your observations.
I realized that I needed projected coordinates, I changed it and now it works.
I will read the suggested papers as soon as I can.

Thank you
Stefano

         (oo)
--oOO--( )--OOo----------------
Stefano Sofia PhD
Area Meteorologica e  Area nivologica - Centro Funzionale
Servizio Protezione Civile - Regione Marche
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona
Uff: 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------
________________________________
Da: Dominik Schneider [dosc3612 at colorado.edu]
Inviato: marted? 13 febbraio 2018 17.21
A: Stefano Sofia
Cc: Daniel Knitter; r-sig-geo at r-project.org
Oggetto: Re: [R-sig-Geo] Interpolating snowfall values on a Digital Elevation Model

You can't use a lat/long coordinate system when kriging because the concept of distance is ambiguous. Convert all your data a UTM grid like you had in your first post and it should work.

Another note, It looks like you are working at 0.01 deg which is on the order of 1km resolution so you may find  other covariates such as aspect, slope, and wind sheltering/exposure, terrain roughness for estimating snow on the ground useful. see some of the earliest papers by Carroll, Cressie, and Elder.

Carroll, S. S., and N. Cressie (1996), A comparison of geostatistical methodologies used to estimate snow water equivalent, JAWRA Journal of the American Water Resources Association, 32(2), 267?278, doi:10.1111/j.1752-1688.1996.tb03450.x.

Carroll, S. S., and N. Cressie (1997), Spatial modeling of snow water equivalent using covariances estimated from spatial and geomorphic attributes, Journal of Hydrology, 190(1-2), 42?59.

Balk, B., and K. Elder (2000), Combining binary decision tree and geostatistical methods to estimate snow distribution in a mountain watershed, Water Resources Research, 36(1), 13?26, doi:10.1029/1999WR900251.

Erxleben, J., K. Elder, and R. Davis (2002), Comparison of spatial interpolation methods for estimating snow distribution in the Colorado Rocky Mountains, Hydrological Processes, 16(18), 3627?3649, doi:10.1002/hyp.1239.

Erickson, T. A., M. W. Williams, and A. Winstral (2005), Persistence of topographic controls on the spatial distribution of snow in rugged mountain terrain, Colorado, United States, Water Resour. Res., 41(4), W04014, doi:10.1029/2003WR002973.


On Tue, Feb 13, 2018 at 3:45 AM, Stefano Sofia <stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>> wrote:
Dear Daniel and list users,
I tried to follow the instructions but I encountered two kinds of errors.
This is a reproducibile code:

---------------------------------------------------------------------------------------------------------------
library(automap)
library(ggplot2)
library(gstat)
library(raster)
library(rasterVis)
library(rgdal)
library(maptools)

## LOADING DEM
ita_DEM <- getData('alt', country='ITA', mask=TRUE)
crs(ita_DEM) <- "+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"
#ita_DEM <- as(ita_DEM, "SpatialGridDataFrame")
str(ita_DEM)

## LOADING RAINFALL DATA
rain_data <- data.frame(Cumulata=c(11.8, 9.0, 8.0, 36.6, 9.4), Long_Cent=c(12.61874, 12.78690, 12.96756, 13.15599, 13.28157), Lat_Cent=c(43.79447, 43.85185, 43.76267, 43.03470, 43.08003), Altitude=c(112.20, 42.93, 36.14, 747, 465))

stations <- data.frame(rain_data$Long_Cent, rain_data$Lat_Cent)
rain_data <- SpatialPointsDataFrame(stations, rain_data, proj4string=CRS("+init=epsg:4326"))
stations <- SpatialPoints(stations, proj4string=CRS("+init=epsg:4326"))

## EXTRACT THE ELEVATION VALUES TO MY POINTS
rain_data$ExtractedElevationValues <- extract(x=ita_DEM, y=stations)

## CREATE GRID FOR KRIGING OUTPUT
minx <-  rain_data at bbox[1,1]
maxx <- rain_data at bbox[1,2]
miny <- rain_data at bbox[2,1]
maxy <- rain_data at bbox[2,2]
pixel <- 0.01
grd <- expand.grid(x=seq(minx, maxx, by=pixel), y=seq(miny, maxy, by=pixel))
coordinates(grd) <- ~x+y
gridded(grd) <- TRUE
proj4string(grd) <- CRS("+init=epsg:4326")

## KRIGING: autoKrige(YourMeasurements ~ YourExtractedElevationValues, YourMeasurementLocations, TargetGrid)
OK_snow <- autoKrige(Cumulata ~ rain_data$ExtractedElevationValues, rain_data, grd)
-------------------------------------------------------------------------------------------------------------------------------

The error I get is:
Error in autoKrige(Cumulata ~ rain_data$ExtractedElevationValues, rain_data,  :
  Either input_data or new_data is in LongLat, please reproject.
   input_data:  +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0
   new_data:    +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0

but I did pay attention to have the same reference system in rain_data, drg and the Digital Elevation Model.

Moreover, if I impose the class of the DEM to SpatialGridDataFrame when I extraxt the elevation points from the DEM I get the following error:
Error in (function (classes, fdef, mtable)  :
  unable to find an inherited method for function ?extract? for signature ?"SpatialGridDataFrame", "SpatialPoints"?
Calls: extract -> <Anonymous>


Would you please somebody help to show me where is my mistake?

Thank you for all your attention
Stefano

         (oo)
--oOO--( )--OOo----------------
Stefano Sofia PhD
Area Meteorologica e  Area nivologica - Centro Funzionale
Servizio Protezione Civile - Regione Marche
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona
Uff: 071 806 7743
E-mail: stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>
---Oo---------oO----------------
________________________________________
Da: R-sig-Geo [r-sig-geo-bounces at r-project.org<mailto:r-sig-geo-bounces at r-project.org>] per conto di Daniel Knitter [knitter at geographie.uni-kiel.de<mailto:knitter at geographie.uni-kiel.de>]
Inviato: luned? 12 febbraio 2018 9.16
A: r-sig-geo at r-project.org<mailto:r-sig-geo at r-project.org>
Oggetto: Re: [R-sig-Geo]  Interpolating snowfall values on a Digital Elevation Model

...sorry, I missed one step: you need to extract the elevation values to your points via extract function from the raster package:

YourPoints$YourExtractedElevationValues <- extract(x = DEM, y = YourPoints)

autoKrige(YourMeasurements ~ YourExtractedElevationValues, YourMeasurementLocations, TargetGrid)


Sorry for spamming.

Best,
Daniel

On Mon, 12 Feb 2018 08:03:41 +0000
Stefano Sofia <stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>> wrote:

> Dear list users,
> I have to produce rainfall maps. I know how to create a (bi-dimensional) grid and interpolate rainfall values (from automatic rain gauges) on that grid using Kriging:
>
> myinterpolation <- autoKrige(myrainfall_cumulate ~ 1, rain_data_UTM, mygrid)
>
> In reality I am dealing with snowfall values on mountain regions, and in this case altitude is an important factor, the use of a Digital Elevation Model might make the difference.
> Looking in the web I found some important material about accessing elevation data in R with the "elevatr" package (by J.W.Hollister), I am reading it.
> My concern would then be to interpolate snowfall values on a Digital Elevation Model. Did somebody already use R for these kinds of calculations? Could somebody share with me some useful hints?
>
> Thank you for your attention
> Stefano Sofia
>
>
>          (oo)
> --oOO--( )--OOo----------------
> Stefano Sofia PhD
> Area Meteorologica e  Area nivologica - Centro Funzionale
> Servizio Protezione Civile - Regione Marche
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>
> ---Oo---------oO----------------
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
>
> --
> This message was scanned by Libra ESVA and is believed to be clean.
>
>
>       [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
> https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&e=52342f8a&h=f7d4a649&f=y&p=y


--

Dr. Daniel Knitter
CRC1266 -- Scales of Transformation
Project A2 "Integrative Modeling of Socio-Environmental Dynamics"

Christian-Albrechts-Universit?t zu Kiel
Department of Geography
Physical Geography -- Landscape Ecology and Geoinformation
Ludewig-Meyn-Str. 14, room 109
D - 24118 Kiel, Germany

Phone: +49 431 880 2941<tel:%2B49%20431%20880%202941>
Email: knitter at geographie.uni-kiel.de<mailto:knitter at geographie.uni-kiel.de>

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
This message was scanned by Libra ESVA and is believed to be clean.

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo<https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&e=52342f8a&h=f7d4a649&f=y&p=y>


--
This message has been checked by Libra Esva and is found to be clean.
Mark it as spam<http://libraesvan2.regionemarche.intra/cgi-bin/learn-msg.cgi?id=A07034025C.AF6D7>
Blacklist sender<http://libraesvan2.regionemarche.intra/cgi-bin/learn-msg.cgi?blacklist=1&id=A07034025C.AF6D7>

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
This message was scanned by Libra ESVA and is believed to be clean.


	[[alternative HTML version deleted]]


From adamfera25 at gmail.com  Tue Feb 13 20:19:57 2018
From: adamfera25 at gmail.com (Adam Fera)
Date: Tue, 13 Feb 2018 14:19:57 -0500
Subject: [R-sig-Geo] Error in reading shape file with readOGR()
Message-ID: <CAGRBnOYNupLVEZfRVSBMD8i9noEwsi_yaCAH2bjmKQfpqtvSBg@mail.gmail.com>

Hello, Amos,

I came across this posting because I had a similar problem using R for
mapping within GNU Emacs Org Mode on GNU/Linux.  I work on a research team
that uses a shared directory for data analysis.  This makes it imperative
to use relative pathnames so that everyone can use the exact same code, the
exact same way, and achieve the exact same result.  Unfortunately, the
readOGR function in the rgdal package does not allow the use of relative
pathnames in the dsn (data source name) argument.

To get around this, I use the setwd and getwd functions.  I use setwd to
set the working directory to the directory with the shapefile.  Then, I use
the getwd function as the dsn argument.  Since setwd() can handle relative
pathnames and getwd() prints the absolute pathname, this allows the user a
way around the dsn= argument requiring an absolute pathname.  This worked
for my research team and allowed us all to use the same code for mapping in
R.

My R code looks something like this:

## SET WORKING DIRECTORY TO BE UNIFORM
setwd("~/relative/path/to/file/nypp_15c/")

## IMPORT THE SHAPEFILE TO A SPATIAL DATA.FRAME
library(rgdal)
precincts.2015 <- readOGR(
    dsn=getwd(),
    layer="nypp")

I would like to thank all the R developers, in particular Professor Bivand,
for their extremely useful contributions in creating software for
geospatial data analysis.

I hope this helps,

Adam G. Fera

-- 
Adam G. Fera, MPhil
Doctoral Student
Instructor, NYPD Executive MA Police Leadership Program
Research Analyst, Misdemeanor Justice Project
PhD Program in Criminal Justice
John Jay College of Criminal Justice
524 West 59th Street
New York NY 10019
adamfera25 at gmail.com

	[[alternative HTML version deleted]]


From stefano.sofia at regione.marche.it  Wed Feb 14 09:34:27 2018
From: stefano.sofia at regione.marche.it (Stefano Sofia)
Date: Wed, 14 Feb 2018 08:34:27 +0000
Subject: [R-sig-Geo] I: Interpolating snowfall values on a Digital Elevation
 Model
In-Reply-To: <20180213105126.25e4dc62@LGI-ASSI15>
References: <8B435C9568170B469AE31E8891E8CC4F471EDAB6@ESINO.regionemarche.intra>
 <20180212091607.1b567b68@LGI-ASSI15>
 <8B435C9568170B469AE31E8891E8CC4F471EDCAC@ESINO.regionemarche.intra>,
 <20180213105126.25e4dc62@LGI-ASSI15>
Message-ID: <8B435C9568170B469AE31E8891E8CC4F471EDF89@ESINO.regionemarche.intra>

This is the contribute of Daniel Knitter to my previous doubts.

Thank you again to Daniel Knitter and Dominik Scheider for their help.

Stefano

         (oo)
--oOO--( )--OOo----------------
Stefano Sofia PhD
Area Meteorologica e  Area nivologica - Centro Funzionale
Servizio Protezione Civile - Regione Marche
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona
Uff: 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------
________________________________________
Da: Daniel Knitter [knitter at geographie.uni-kiel.de]
Inviato: marted? 13 febbraio 2018 10.51
A: Stefano Sofia
Oggetto: Re: [R-sig-Geo]  Interpolating snowfall values on a Digital Elevation Model

Dear Stefano,

concerning the error messages:

1) you need projected (metric) coordinates -- while you are using geographic ones
2) the extract function is from package raster and expects a raster input -- while you give a SpatialGridDataFrame as input

this code should work:

library(raster)
ita_DEM <- getData('alt', country='ITA', mask=TRUE)
ita_DEM <- projectRaster(ita_DEM, crs = CRS("+init=epsg:32633"))

## LOADING RAINFALL DATA
rain_data <- data.frame(cumulata=c(11.8, 9.0, 8.0, 36.6, 9.4),
                        Long_Cent=c(12.61874, 12.78690, 12.96756, 13.15599, 13.28157),
                        Lat_Cent=c(43.79447, 43.85185, 43.76267, 43.03470, 43.08003),
                        altitude=c(112.20, 42.93, 36.14, 747, 465))

library(sp)
coordinates(rain_data) <- ~Long_Cent+Lat_Cent
proj4string(rain_data) <- CRS("+init=epsg:4326")
rain_data <- spTransform(rain_data, CRS("+init=epsg:32633"))

rain_data$extractedelevationvalues <- extract(x=ita_DEM, y=rain_data)

newgrid <- as(ita_DEM, "SpatialGridDataFrame")
names(newgrid) <- "extractedelevationvalues"

library(automap)
RegressionKriging_snow <- autoKrige(cumulata~extractedelevationvalues,
                                    rain_data,
                                    newgrid)

Cheers,
Daniel



On Tue, 13 Feb 2018 08:45:34 +0000
Stefano Sofia <stefano.sofia at regione.marche.it> wrote:

> Dear Daniel and list users,
> I tried to follow the instructions but I encountered two kinds of errors.
> This is a reproducibile code:
>
> ---------------------------------------------------------------------------------------------------------------
> library(automap)
> library(ggplot2)
> library(gstat)
> library(raster)
> library(rasterVis)
> library(rgdal)
> library(maptools)
>
> ## LOADING DEM
> ita_DEM <- getData('alt', country='ITA', mask=TRUE)
> crs(ita_DEM) <- "+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"
> #ita_DEM <- as(ita_DEM, "SpatialGridDataFrame")
> str(ita_DEM)
>
> ## LOADING RAINFALL DATA
> rain_data <- data.frame(Cumulata=c(11.8, 9.0, 8.0, 36.6, 9.4), Long_Cent=c(12.61874, 12.78690, 12.96756, 13.15599, 13.28157), Lat_Cent=c(43.79447, 43.85185, 43.76267, 43.03470, 43.08003), Altitude=c(112.20, 42.93, 36.14, 747, 465))
>
> stations <- data.frame(rain_data$Long_Cent, rain_data$Lat_Cent)
> rain_data <- SpatialPointsDataFrame(stations, rain_data, proj4string=CRS("+init=epsg:4326"))
> stations <- SpatialPoints(stations, proj4string=CRS("+init=epsg:4326"))
>
> ## EXTRACT THE ELEVATION VALUES TO MY POINTS
> rain_data$ExtractedElevationValues <- extract(x=ita_DEM, y=stations)
>
> ## CREATE GRID FOR KRIGING OUTPUT
> minx <-  rain_data at bbox[1,1]
> maxx <- rain_data at bbox[1,2]
> miny <- rain_data at bbox[2,1]
> maxy <- rain_data at bbox[2,2]
> pixel <- 0.01
> grd <- expand.grid(x=seq(minx, maxx, by=pixel), y=seq(miny, maxy, by=pixel))
> coordinates(grd) <- ~x+y
> gridded(grd) <- TRUE
> proj4string(grd) <- CRS("+init=epsg:4326")
>
> ## KRIGING: autoKrige(YourMeasurements ~ YourExtractedElevationValues, YourMeasurementLocations, TargetGrid)
> OK_snow <- autoKrige(Cumulata ~ rain_data$ExtractedElevationValues, rain_data, grd)
> -------------------------------------------------------------------------------------------------------------------------------
>
> The error I get is:
> Error in autoKrige(Cumulata ~ rain_data$ExtractedElevationValues, rain_data,  :
>   Either input_data or new_data is in LongLat, please reproject.
>    input_data:  +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0
>    new_data:    +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0
>
> but I did pay attention to have the same reference system in rain_data, drg and the Digital Elevation Model.
>
> Moreover, if I impose the class of the DEM to SpatialGridDataFrame when I extraxt the elevation points from the DEM I get the following error:
> Error in (function (classes, fdef, mtable)  :
>   unable to find an inherited method for function ?extract? for signature ?"SpatialGridDataFrame", "SpatialPoints"?
> Calls: extract -> <Anonymous>
>
>
> Would you please somebody help to show me where is my mistake?
>
> Thank you for all your attention
> Stefano
>
>          (oo)
> --oOO--( )--OOo----------------
> Stefano Sofia PhD
> Area Meteorologica e  Area nivologica - Centro Funzionale
> Servizio Protezione Civile - Regione Marche
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------
> ________________________________________
> Da: R-sig-Geo [r-sig-geo-bounces at r-project.org] per conto di Daniel Knitter [knitter at geographie.uni-kiel.de]
> Inviato: luned? 12 febbraio 2018 9.16
> A: r-sig-geo at r-project.org
> Oggetto: Re: [R-sig-Geo]  Interpolating snowfall values on a Digital Elevation Model
>
> ...sorry, I missed one step: you need to extract the elevation values to your points via extract function from the raster package:
>
> YourPoints$YourExtractedElevationValues <- extract(x = DEM, y = YourPoints)
>
> autoKrige(YourMeasurements ~ YourExtractedElevationValues, YourMeasurementLocations, TargetGrid)
>
>
> Sorry for spamming.
>
> Best,
> Daniel
>
> On Mon, 12 Feb 2018 08:03:41 +0000
> Stefano Sofia <stefano.sofia at regione.marche.it> wrote:
>
> > Dear list users,
> > I have to produce rainfall maps. I know how to create a (bi-dimensional) grid and interpolate rainfall values (from automatic rain gauges) on that grid using Kriging:
> >
> > myinterpolation <- autoKrige(myrainfall_cumulate ~ 1, rain_data_UTM, mygrid)
> >
> > In reality I am dealing with snowfall values on mountain regions, and in this case altitude is an important factor, the use of a Digital Elevation Model might make the difference.
> > Looking in the web I found some important material about accessing elevation data in R with the "elevatr" package (by J.W.Hollister), I am reading it.
> > My concern would then be to interpolate snowfall values on a Digital Elevation Model. Did somebody already use R for these kinds of calculations? Could somebody share with me some useful hints?
> >
> > Thank you for your attention
> > Stefano Sofia
> >
> >
> >          (oo)
> > --oOO--( )--OOo----------------
> > Stefano Sofia PhD
> > Area Meteorologica e  Area nivologica - Centro Funzionale
> > Servizio Protezione Civile - Regione Marche
> > Via del Colle Ameno 5
> > 60126 Torrette di Ancona, Ancona
> > Uff: 071 806 7743
> > E-mail: stefano.sofia at regione.marche.it
> > ---Oo---------oO----------------
> >
> > ________________________________
> >
> > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> > IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
> >
> > --
> > This message was scanned by Libra ESVA and is believed to be clean.
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-geo&e=52342f8a&h=f7d4a649&f=y&p=y
>
>
> --
>
> Dr. Daniel Knitter
> CRC1266 -- Scales of Transformation
> Project A2 "Integrative Modeling of Socio-Environmental Dynamics"
>
> Christian-Albrechts-Universit?t zu Kiel
> Department of Geography
> Physical Geography -- Landscape Ecology and Geoinformation
> Ludewig-Meyn-Str. 14, room 109
> D - 24118 Kiel, Germany
>
> Phone: +49 431 880 2941
> Email: knitter at geographie.uni-kiel.de
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
>
> --
> This message was scanned by Libra ESVA and is believed to be clean.
>


--

Dr. Daniel Knitter
CRC1266 -- Scales of Transformation
Project A2 "Integrative Modeling of Socio-Environmental Dynamics"

Christian-Albrechts-Universit?t zu Kiel
Department of Geography
Physical Geography -- Landscape Ecology and Geoinformation
Ludewig-Meyn-Str. 14, room 109
D - 24118 Kiel, Germany

Phone: +49 431 880 2941
Email: knitter at geographie.uni-kiel.de

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
This message was scanned by Libra ESVA and is believed to be clean.


From Roger.Bivand at nhh.no  Wed Feb 14 11:11:09 2018
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 14 Feb 2018 11:11:09 +0100
Subject: [R-sig-Geo] Error in reading shape file with readOGR()
In-Reply-To: <CAGRBnOYNupLVEZfRVSBMD8i9noEwsi_yaCAH2bjmKQfpqtvSBg@mail.gmail.com>
References: <CAGRBnOYNupLVEZfRVSBMD8i9noEwsi_yaCAH2bjmKQfpqtvSBg@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1802141053480.11320@reclus.nhh.no>

On Tue, 13 Feb 2018, Adam Fera wrote:

> Hello, Amos,
>
> I came across this posting because I had a similar problem using R for
> mapping within GNU Emacs Org Mode on GNU/Linux.  I work on a research team
> that uses a shared directory for data analysis.  This makes it imperative
> to use relative pathnames so that everyone can use the exact same code, the
> exact same way, and achieve the exact same result.  Unfortunately, the
> readOGR function in the rgdal package does not allow the use of relative
> pathnames in the dsn (data source name) argument.

The underlying GDAL logic expects an expanded path. Until I can check that 
using path.expand() inside the functions at least for reading, perhaps 
writing, use it as dsn = path.expand("~/relative/path/to/file/nypp_15c/"). 
I'd be grateful for feedback on whether this works as well as setwd().
sf uses enc2utf8(normalizePath(dsn)), so you could try normalizePath() 
too - path.expand() handles ~ but not ../.. . readGDAL() handles relative 
paths OK and uses normalizePath() internally.

Roger

>
> To get around this, I use the setwd and getwd functions.  I use setwd to
> set the working directory to the directory with the shapefile.  Then, I use
> the getwd function as the dsn argument.  Since setwd() can handle relative
> pathnames and getwd() prints the absolute pathname, this allows the user a
> way around the dsn= argument requiring an absolute pathname.  This worked
> for my research team and allowed us all to use the same code for mapping in
> R.
>
> My R code looks something like this:
>
> ## SET WORKING DIRECTORY TO BE UNIFORM
> setwd("~/relative/path/to/file/nypp_15c/")
>
> ## IMPORT THE SHAPEFILE TO A SPATIAL DATA.FRAME
> library(rgdal)
> precincts.2015 <- readOGR(
>    dsn=getwd(),
>    layer="nypp")
>
> I would like to thank all the R developers, in particular Professor Bivand,
> for their extremely useful contributions in creating software for
> geospatial data analysis.
>
> I hope this helps,
>
> Adam G. Fera
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From loic.dutrieux at conabio.gob.mx  Wed Feb 14 16:59:57 2018
From: loic.dutrieux at conabio.gob.mx (=?UTF-8?Q?Lo=c3=afc_Dutrieux?=)
Date: Wed, 14 Feb 2018 09:59:57 -0600
Subject: [R-sig-Geo] Error in reading shape file with readOGR()
In-Reply-To: <alpine.LFD.2.21.1802141053480.11320@reclus.nhh.no>
References: <CAGRBnOYNupLVEZfRVSBMD8i9noEwsi_yaCAH2bjmKQfpqtvSBg@mail.gmail.com>
 <alpine.LFD.2.21.1802141053480.11320@reclus.nhh.no>
Message-ID: <8fddac08-e2fb-6524-2c56-171a99ee97c4@conabio.gob.mx>



On 14/02/2018 04:11, Roger Bivand wrote:
> On Tue, 13 Feb 2018, Adam Fera wrote:
> 
>> Hello, Amos,
>>
>> I came across this posting because I had a similar problem using R for
>> mapping within GNU Emacs Org Mode on GNU/Linux.? I work on a research
>> team
>> that uses a shared directory for data analysis.? This makes it imperative
>> to use relative pathnames so that everyone can use the exact same
>> code, the
>> exact same way, and achieve the exact same result.? Unfortunately, the
>> readOGR function in the rgdal package does not allow the use of relative
>> pathnames in the dsn (data source name) argument.
> 
> The underlying GDAL logic expects an expanded path. Until I can check
> that using path.expand() inside the functions at least for reading,
> perhaps writing, use it as dsn =
> path.expand("~/relative/path/to/file/nypp_15c/"). I'd be grateful for
> feedback on whether this works as well as setwd().
> sf uses enc2utf8(normalizePath(dsn)), so you could try normalizePath()
> too - path.expand() handles ~ but not ../.. . readGDAL() handles
> relative paths OK and uses normalizePath() internally.

If you're working with shapefiles you may have a look at
raster::shapefile(). It's a thin wrapper around read/writeOGR(), and I
think it solves this relative path "issue" by using normalizePath().
But please don't take it as an advice to use shapefiles; it's not, there
are much better formats out there ;)

Cheers,
Lo?c
> 
> Roger
> 
>>
>> To get around this, I use the setwd and getwd functions.? I use setwd to
>> set the working directory to the directory with the shapefile.? Then,
>> I use
>> the getwd function as the dsn argument.? Since setwd() can handle
>> relative
>> pathnames and getwd() prints the absolute pathname, this allows the
>> user a
>> way around the dsn= argument requiring an absolute pathname.? This worked
>> for my research team and allowed us all to use the same code for
>> mapping in
>> R.
>>
>> My R code looks something like this:
>>
>> ## SET WORKING DIRECTORY TO BE UNIFORM
>> setwd("~/relative/path/to/file/nypp_15c/")
>>
>> ## IMPORT THE SHAPEFILE TO A SPATIAL DATA.FRAME
>> library(rgdal)
>> precincts.2015 <- readOGR(
>> ?? dsn=getwd(),
>> ?? layer="nypp")
>>
>> I would like to thank all the R developers, in particular Professor
>> Bivand,
>> for their extremely useful contributions in creating software for
>> geospatial data analysis.
>>
>> I hope this helps,
>>
>> Adam G. Fera
>>
>>
>


From biswas.biplab at gmail.com  Wed Feb 14 17:13:30 2018
From: biswas.biplab at gmail.com (Biplab Biswas)
Date: Wed, 14 Feb 2018 21:43:30 +0530
Subject: [R-sig-Geo] 
 I: Interpolating snowfall values on a Digital Elevation Model
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4F471EDF89@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4F471EDAB6@ESINO.regionemarche.intra>
 <20180212091607.1b567b68@LGI-ASSI15>
 <8B435C9568170B469AE31E8891E8CC4F471EDCAC@ESINO.regionemarche.intra>
 <20180213105126.25e4dc62@LGI-ASSI15>
 <8B435C9568170B469AE31E8891E8CC4F471EDF89@ESINO.regionemarche.intra>
Message-ID: <CAPk+gCMFLuKgOkGuNCt_h1CfF3ZX_RJ9fYR3TjeUXdMcFY=zqA@mail.gmail.com>

 Dear All,

Please see the link for a International Conference in the University of
Burdwan

https://sites.google.com/buruniv.ac.in/fbms/home

Regards.
Biplab



On Wed, Feb 14, 2018 at 2:04 PM, Stefano Sofia <
stefano.sofia at regione.marche.it> wrote:

> This is the contribute of Daniel Knitter to my previous doubts.
>
> Thank you again to Daniel Knitter and Dominik Scheider for their help.
>
> Stefano
>
>          (oo)
> --oOO--( )--OOo----------------
> Stefano Sofia PhD
> Area Meteorologica e  Area nivologica - Centro Funzionale
> Servizio Protezione Civile - Regione Marche
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------
> ________________________________________
> Da: Daniel Knitter [knitter at geographie.uni-kiel.de]
> Inviato: marted? 13 febbraio 2018 10.51
> A: Stefano Sofia
> Oggetto: Re: [R-sig-Geo]  Interpolating snowfall values on a Digital
> Elevation Model
>
> Dear Stefano,
>
> concerning the error messages:
>
> 1) you need projected (metric) coordinates -- while you are using
> geographic ones
> 2) the extract function is from package raster and expects a raster input
> -- while you give a SpatialGridDataFrame as input
>
> this code should work:
>
> library(raster)
> ita_DEM <- getData('alt', country='ITA', mask=TRUE)
> ita_DEM <- projectRaster(ita_DEM, crs = CRS("+init=epsg:32633"))
>
> ## LOADING RAINFALL DATA
> rain_data <- data.frame(cumulata=c(11.8, 9.0, 8.0, 36.6, 9.4),
>                         Long_Cent=c(12.61874, 12.78690, 12.96756,
> 13.15599, 13.28157),
>                         Lat_Cent=c(43.79447, 43.85185, 43.76267, 43.03470,
> 43.08003),
>                         altitude=c(112.20, 42.93, 36.14, 747, 465))
>
> library(sp)
> coordinates(rain_data) <- ~Long_Cent+Lat_Cent
> proj4string(rain_data) <- CRS("+init=epsg:4326")
> rain_data <- spTransform(rain_data, CRS("+init=epsg:32633"))
>
> rain_data$extractedelevationvalues <- extract(x=ita_DEM, y=rain_data)
>
> newgrid <- as(ita_DEM, "SpatialGridDataFrame")
> names(newgrid) <- "extractedelevationvalues"
>
> library(automap)
> RegressionKriging_snow <- autoKrige(cumulata~extractedelevationvalues,
>                                     rain_data,
>                                     newgrid)
>
> Cheers,
> Daniel
>
>
>
> On Tue, 13 Feb 2018 08:45:34 +0000
> Stefano Sofia <stefano.sofia at regione.marche.it> wrote:
>
> > Dear Daniel and list users,
> > I tried to follow the instructions but I encountered two kinds of errors.
> > This is a reproducibile code:
> >
> > ------------------------------------------------------------
> ---------------------------------------------------
> > library(automap)
> > library(ggplot2)
> > library(gstat)
> > library(raster)
> > library(rasterVis)
> > library(rgdal)
> > library(maptools)
> >
> > ## LOADING DEM
> > ita_DEM <- getData('alt', country='ITA', mask=TRUE)
> > crs(ita_DEM) <- "+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> +ellps=WGS84 +towgs84=0,0,0"
> > #ita_DEM <- as(ita_DEM, "SpatialGridDataFrame")
> > str(ita_DEM)
> >
> > ## LOADING RAINFALL DATA
> > rain_data <- data.frame(Cumulata=c(11.8, 9.0, 8.0, 36.6, 9.4),
> Long_Cent=c(12.61874, 12.78690, 12.96756, 13.15599, 13.28157),
> Lat_Cent=c(43.79447, 43.85185, 43.76267, 43.03470, 43.08003),
> Altitude=c(112.20, 42.93, 36.14, 747, 465))
> >
> > stations <- data.frame(rain_data$Long_Cent, rain_data$Lat_Cent)
> > rain_data <- SpatialPointsDataFrame(stations, rain_data,
> proj4string=CRS("+init=epsg:4326"))
> > stations <- SpatialPoints(stations, proj4string=CRS("+init=epsg:4326"))
> >
> > ## EXTRACT THE ELEVATION VALUES TO MY POINTS
> > rain_data$ExtractedElevationValues <- extract(x=ita_DEM, y=stations)
> >
> > ## CREATE GRID FOR KRIGING OUTPUT
> > minx <-  rain_data at bbox[1,1]
> > maxx <- rain_data at bbox[1,2]
> > miny <- rain_data at bbox[2,1]
> > maxy <- rain_data at bbox[2,2]
> > pixel <- 0.01
> > grd <- expand.grid(x=seq(minx, maxx, by=pixel), y=seq(miny, maxy,
> by=pixel))
> > coordinates(grd) <- ~x+y
> > gridded(grd) <- TRUE
> > proj4string(grd) <- CRS("+init=epsg:4326")
> >
> > ## KRIGING: autoKrige(YourMeasurements ~ YourExtractedElevationValues,
> YourMeasurementLocations, TargetGrid)
> > OK_snow <- autoKrige(Cumulata ~ rain_data$ExtractedElevationValues,
> rain_data, grd)
> > ------------------------------------------------------------
> -------------------------------------------------------------------
> >
> > The error I get is:
> > Error in autoKrige(Cumulata ~ rain_data$ExtractedElevationValues,
> rain_data,  :
> >   Either input_data or new_data is in LongLat, please reproject.
> >    input_data:  +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> +ellps=WGS84 +towgs84=0,0,0
> >    new_data:    +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> +ellps=WGS84 +towgs84=0,0,0
> >
> > but I did pay attention to have the same reference system in rain_data,
> drg and the Digital Elevation Model.
> >
> > Moreover, if I impose the class of the DEM to SpatialGridDataFrame when
> I extraxt the elevation points from the DEM I get the following error:
> > Error in (function (classes, fdef, mtable)  :
> >   unable to find an inherited method for function ?extract? for
> signature ?"SpatialGridDataFrame", "SpatialPoints"?
> > Calls: extract -> <Anonymous>
> >
> >
> > Would you please somebody help to show me where is my mistake?
> >
> > Thank you for all your attention
> > Stefano
> >
> >          (oo)
> > --oOO--( )--OOo----------------
> > Stefano Sofia PhD
> > Area Meteorologica e  Area nivologica - Centro Funzionale
> > Servizio Protezione Civile - Regione Marche
> > Via del Colle Ameno 5
> > 60126 Torrette di Ancona, Ancona
> > Uff: 071 806 7743
> > E-mail: stefano.sofia at regione.marche.it
> > ---Oo---------oO----------------
> > ________________________________________
> > Da: R-sig-Geo [r-sig-geo-bounces at r-project.org] per conto di Daniel
> Knitter [knitter at geographie.uni-kiel.de]
> > Inviato: luned? 12 febbraio 2018 9.16
> > A: r-sig-geo at r-project.org
> > Oggetto: Re: [R-sig-Geo]  Interpolating snowfall values on a Digital
> Elevation Model
> >
> > ...sorry, I missed one step: you need to extract the elevation values to
> your points via extract function from the raster package:
> >
> > YourPoints$YourExtractedElevationValues <- extract(x = DEM, y =
> YourPoints)
> >
> > autoKrige(YourMeasurements ~ YourExtractedElevationValues,
> YourMeasurementLocations, TargetGrid)
> >
> >
> > Sorry for spamming.
> >
> > Best,
> > Daniel
> >
> > On Mon, 12 Feb 2018 08:03:41 +0000
> > Stefano Sofia <stefano.sofia at regione.marche.it> wrote:
> >
> > > Dear list users,
> > > I have to produce rainfall maps. I know how to create a
> (bi-dimensional) grid and interpolate rainfall values (from automatic rain
> gauges) on that grid using Kriging:
> > >
> > > myinterpolation <- autoKrige(myrainfall_cumulate ~ 1, rain_data_UTM,
> mygrid)
> > >
> > > In reality I am dealing with snowfall values on mountain regions, and
> in this case altitude is an important factor, the use of a Digital
> Elevation Model might make the difference.
> > > Looking in the web I found some important material about accessing
> elevation data in R with the "elevatr" package (by J.W.Hollister), I am
> reading it.
> > > My concern would then be to interpolate snowfall values on a Digital
> Elevation Model. Did somebody already use R for these kinds of
> calculations? Could somebody share with me some useful hints?
> > >
> > > Thank you for your attention
> > > Stefano Sofia
> > >
> > >
> > >          (oo)
> > > --oOO--( )--OOo----------------
> > > Stefano Sofia PhD
> > > Area Meteorologica e  Area nivologica - Centro Funzionale
> > > Servizio Protezione Civile - Regione Marche
> > > Via del Colle Ameno 5
> > > 60126 Torrette di Ancona, Ancona
> > > Uff: 071 806 7743
> > > E-mail: stefano.sofia at regione.marche.it
> > > ---Oo---------oO----------------
> > >
> > > ________________________________
> > >
> > > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
> informazioni confidenziali, pertanto ? destinato solo a persone autorizzate
> alla ricezione. I messaggi di posta elettronica per i client di Regione
> Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o
> archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore,
> inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio
> computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in
> caso di necessit? ed urgenza, la risposta al presente messaggio di posta
> elettronica pu? essere visionata da persone estranee al destinatario.
> > > IMPORTANT NOTICE: This e-mail message is intended to be received only
> by persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information that
> is confidential and legally privileged. Please do not read, copy, forward,
> or store this message unless you are an intended recipient of it. If you
> have received this message in error, please forward it to the sender and
> delete it completely from your computer system.
> > >
> > > --
> > > This message was scanned by Libra ESVA and is believed to be clean.
> > >
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > _______________________________________________
> > > R-sig-Geo mailing list
> > > R-sig-Geo at r-project.org
> > > https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%
> 2Fmailman%2Flistinfo%2Fr-sig-geo&e=52342f8a&h=f7d4a649&f=y&p=y
> >
> >
> > --
> >
> > Dr. Daniel Knitter
> > CRC1266 -- Scales of Transformation
> > Project A2 "Integrative Modeling of Socio-Environmental Dynamics"
> >
> > Christian-Albrechts-Universit?t zu Kiel
> > Department of Geography
> > Physical Geography -- Landscape Ecology and Geoinformation
> > Ludewig-Meyn-Str. 14, room 109
> > D - 24118 Kiel, Germany
> >
> > Phone: +49 431 880 2941
> > Email: knitter at geographie.uni-kiel.de
> >
> > ________________________________
> >
> > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
> informazioni confidenziali, pertanto ? destinato solo a persone autorizzate
> alla ricezione. I messaggi di posta elettronica per i client di Regione
> Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o
> archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore,
> inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio
> computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in
> caso di necessit? ed urgenza, la risposta al presente messaggio di posta
> elettronica pu? essere visionata da persone estranee al destinatario.
> > IMPORTANT NOTICE: This e-mail message is intended to be received only by
> persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information that
> is confidential and legally privileged. Please do not read, copy, forward,
> or store this message unless you are an intended recipient of it. If you
> have received this message in error, please forward it to the sender and
> delete it completely from your computer system.
> >
> > --
> > This message was scanned by Libra ESVA and is believed to be clean.
> >
>
>
> --
>
> Dr. Daniel Knitter
> CRC1266 -- Scales of Transformation
> Project A2 "Integrative Modeling of Socio-Environmental Dynamics"
>
> Christian-Albrechts-Universit?t zu Kiel
> Department of Geography
> Physical Geography -- Landscape Ecology and Geoinformation
> Ludewig-Meyn-Str. 14, room 109
> D - 24118 Kiel, Germany
>
> Phone: +49 431 880 2941
> Email: knitter at geographie.uni-kiel.de
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
> informazioni confidenziali, pertanto ? destinato solo a persone autorizzate
> alla ricezione. I messaggi di posta elettronica per i client di Regione
> Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o
> archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore,
> inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio
> computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in
> caso di necessit? ed urgenza, la risposta al presente messaggio di posta
> elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by
> persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information that
> is confidential and legally privileged. Please do not read, copy, forward,
> or store this message unless you are an intended recipient of it. If you
> have received this message in error, please forward it to the sender and
> delete it completely from your computer system.
>
> --
> This message was scanned by Libra ESVA and is believed to be clean.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Dr. Biplab Biswas, 'Raman Fellow' (USA)
Associate Professor,
Department of Geography,
The University of Burdwan,
Burdwan - 713104
West Bengal, INDIA
http://www.buruniv.ac.in/
<http://www.buruniv.ac.in/>http://buruniv.academia.edu/BIPLABBISWAS

	[[alternative HTML version deleted]]


From patrick.giraudoux at univ-fcomte.fr  Thu Feb 15 07:46:24 2018
From: patrick.giraudoux at univ-fcomte.fr (Patrick Giraudoux)
Date: Thu, 15 Feb 2018 07:46:24 +0100
Subject: [R-sig-Geo] readOGR does not read file names with accent
Message-ID: <463abd7a-02c4-77dc-e02b-a44930028156@univ-fcomte.fr>

Dear all,

My plateform is Windows 7. I am meeting trouble when reading a shapefile 
with rgdal:readOGR when the file name includes an accent.

For instance,

readOGR("./track 
g?n?t/g?linotte/2017/Tr?montagne","trace_chaux_du_dombief.shp")is well read

BUT
readOGR("./track 
g?n?t/g?linotte/2017/Tr?montagne","trac?_chaux_du_dombief.shp")gives

Error in ogrInfo(dsn = dsn, layer = layer, encoding = encoding, 
use_iconv = use_iconv, :
 ? Cannot open layer

In both cases accents in the path are well accepted. The difference just 
come from accent in the filename.

Any idea about a workaround (except trivial: manually changing accents 
to non accent ;-): I have tens of files to read)?

Best,

Patrick



	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Thu Feb 15 07:49:24 2018
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 15 Feb 2018 06:49:24 +0000
Subject: [R-sig-Geo] readOGR does not read file names with accent
In-Reply-To: <463abd7a-02c4-77dc-e02b-a44930028156@univ-fcomte.fr>
References: <463abd7a-02c4-77dc-e02b-a44930028156@univ-fcomte.fr>
Message-ID: <EDA03431DA599FDA.d4bd6de5-e65d-42a3-8d8a-047af0c9cf3b@mail.outlook.com>

Patrick:

Is there also a space in the file path? What is the locale, I guess CP1252?

Best wishes,

Roger Bivand
Norwegian School of Economics
Bergen, Norway



Fra: Patrick Giraudoux
Sendt: torsdag 15. februar, 07.45
Emne: readOGR does not read file names with accent
Til: r-sig-geo at r-project.org
Kopi: Roger Bivand


Dear all,
My plateform is Windows 7. I am meeting trouble when reading a shapefile with rgdal:readOGR when the file name includes an accent.
For instance,
readOGR("./track g?n?t/g?linotte/2017/Tr?montagne","trace_chaux_du_dombief.shp") is well read
BUT
readOGR("./track g?n?t/g?linotte/2017/Tr?montagne","trac?_chaux_du_dombief.shp") gives
Error in ogrInfo(dsn = dsn, layer = layer, encoding = encoding, use_iconv = use_iconv,  :
  Cannot open layer
In both cases accents in the path are well accepted. The difference just come from accent in the filename.
Any idea about a workaround (except trivial: manually changing accents to non accent ;-): I have tens of files to read)?
Best,
Patrick




	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Thu Feb 15 07:57:48 2018
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 15 Feb 2018 06:57:48 +0000
Subject: [R-sig-Geo] readOGR does not read file names with accent
In-Reply-To: <EDA03431DA599FDA.d4bd6de5-e65d-42a3-8d8a-047af0c9cf3b@mail.outlook.com>
References: <463abd7a-02c4-77dc-e02b-a44930028156@univ-fcomte.fr>,
 <EDA03431DA599FDA.d4bd6de5-e65d-42a3-8d8a-047af0c9cf3b@mail.outlook.com>
Message-ID: <EDA03431DA599FDA.0a1e7769-af4a-4387-88ab-7d942ee284a2@mail.outlook.com>

... and could you try sf::st_read(), as it uses enc2utf8() internally? If that works, the same may be used in rgdal.

Roger

Roger Bivand

Norwegian School of Economics

Bergen, Norway





Fra: Roger Bivand
Sendt: torsdag 15. februar, 07.49
Emne: Re: [R-sig-Geo] readOGR does not read file names with accent
Til: r-sig-geo at r-project.org, Patrick Giraudoux


Patrick: Is there also a space in the file path? What is the locale, I guess CP1252? Best wishes, Roger Bivand Norwegian School of Economics Bergen, Norway Fra: Patrick Giraudoux Sendt: torsdag 15. februar, 07.45 Emne: readOGR does not read file names with accent Til: r-sig-geo at r-project.org Kopi: Roger Bivand Dear all, My plateform is Windows 7. I am meeting trouble when reading a shapefile with rgdal:readOGR when the file name includes an accent. For instance, readOGR("./track g?n?t/g?linotte/2017/Tr?montagne","trace_chaux_du_dombief.shp") is well read BUT readOGR("./track g?n?t/g?linotte/2017/Tr?montagne","trac?_chaux_du_dombief.shp") gives Error in ogrInfo(dsn = dsn, layer = layer, encoding = encoding, use_iconv = use_iconv, : Cannot open layer In both cases accents in the path are well accepted. The difference just come from accent in the filename. Any idea about a workaround (except trivial: manually changing accents to non accent ;-): I have tens of files to read)? Best, Patrick [[alternative HTML version deleted]] _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From patrick.giraudoux at univ-fcomte.fr  Thu Feb 15 08:20:12 2018
From: patrick.giraudoux at univ-fcomte.fr (Patrick Giraudoux)
Date: Thu, 15 Feb 2018 08:20:12 +0100
Subject: [R-sig-Geo] readOGR does not read file names with accent
In-Reply-To: <EDA03431DA599FDA.0a1e7769-af4a-4387-88ab-7d942ee284a2@mail.outlook.com>
References: <463abd7a-02c4-77dc-e02b-a44930028156@univ-fcomte.fr>
 <EDA03431DA599FDA.d4bd6de5-e65d-42a3-8d8a-047af0c9cf3b@mail.outlook.com>
 <EDA03431DA599FDA.0a1e7769-af4a-4387-88ab-7d942ee284a2@mail.outlook.com>
Message-ID: <687d3d1f-04c9-f9b4-75ab-b4dde6746534@univ-fcomte.fr>

> Patrick:
>
> Is there also a space in the file path? What is the locale, I guess 
> CP1252?

My locale is fr;Fran?ais (France)


Le 15/02/2018 ? 07:57, Roger Bivand a ?crit?:
> ... and could you try sf::st_read(), as it uses enc2utf8() internally? 
> If that works, the same may be used in rgdal.
>

st_read has the same issue: reads the file with no accent but not with 
accent:

library(sf)
st_read("./track g?n?t/g?linotte/2017/Tr?montagne","trace_chaux_du_dombief")

Reading layer `trace_chaux_du_dombief' from data source `U:\Users\pgiraudo2\Documents\Tetra\Master Tony Vialet\track g??n??t\g??linotte\2017\Tr??montagne' using driver `ESRI Shapefile'
Simple feature collection with 1 feature and 5 fields
geometry type:  LINESTRING
dimension:      XY
bbox:           xmin: 870249.9 ymin: 2180142 xmax: 871070 ymax: 2180930
epsg (SRID):    NA
proj4string:    NA


but

st_read("./track g?n?t/g?linotte/2017/Tr?montagne","trac?_chaux_du_dombief")

Cannot open layer trac?_chaux_du_dombief
Error in CPL_read_ogr(dsn, layer, as.character(options), quiet, type, : 
Opening layer failed.


	[[alternative HTML version deleted]]


From knitter at geographie.uni-kiel.de  Thu Feb 15 08:34:35 2018
From: knitter at geographie.uni-kiel.de (Daniel Knitter)
Date: Thu, 15 Feb 2018 08:34:35 +0100
Subject: [R-sig-Geo] readOGR does not read file names with accent
In-Reply-To: <687d3d1f-04c9-f9b4-75ab-b4dde6746534@univ-fcomte.fr>
References: <463abd7a-02c4-77dc-e02b-a44930028156@univ-fcomte.fr>
 <EDA03431DA599FDA.d4bd6de5-e65d-42a3-8d8a-047af0c9cf3b@mail.outlook.com>
 <EDA03431DA599FDA.0a1e7769-af4a-4387-88ab-7d942ee284a2@mail.outlook.com>
 <687d3d1f-04c9-f9b4-75ab-b4dde6746534@univ-fcomte.fr>
Message-ID: <20180215083435.7363fa82@LGI-ASSI15>

hi Patrick,

I think it is not about the accent but the space in your path. Try to escape this with "\" :

st_read("./Desktop/foldername\ with\ spaces/shapefile.shp")


Daniel



On Thu, 15 Feb 2018 08:20:12 +0100
Patrick Giraudoux <patrick.giraudoux at univ-fcomte.fr> wrote:

> > Patrick:
> >
> > Is there also a space in the file path? What is the locale, I guess 
> > CP1252?  
> 
> My locale is fr;Fran?ais (France)
> 
> 
> Le 15/02/2018 ? 07:57, Roger Bivand a ?crit?:
> > ... and could you try sf::st_read(), as it uses enc2utf8() internally? 
> > If that works, the same may be used in rgdal.
> >  
> 
> st_read has the same issue: reads the file with no accent but not with 
> accent:
> 
> library(sf)
> st_read("./track g?n?t/g?linotte/2017/Tr?montagne","trace_chaux_du_dombief")
> 
> Reading layer `trace_chaux_du_dombief' from data source `U:\Users\pgiraudo2\Documents\Tetra\Master Tony Vialet\track g??n??t\g??linotte\2017\Tr??montagne' using driver `ESRI Shapefile'
> Simple feature collection with 1 feature and 5 fields
> geometry type:  LINESTRING
> dimension:      XY
> bbox:           xmin: 870249.9 ymin: 2180142 xmax: 871070 ymax: 2180930
> epsg (SRID):    NA
> proj4string:    NA
> 
> 
> but
> 
> st_read("./track g?n?t/g?linotte/2017/Tr?montagne","trac?_chaux_du_dombief")
> 
> Cannot open layer trac?_chaux_du_dombief
> Error in CPL_read_ogr(dsn, layer, as.character(options), quiet, type, : 
> Opening layer failed.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 

Dr. Daniel Knitter
CRC1266 -- Scales of Transformation
Project A2 "Integrative Modeling of Socio-Environmental Dynamics"

Christian-Albrechts-Universit?t zu Kiel
Department of Geography
Physical Geography -- Landscape Ecology and Geoinformation
Ludewig-Meyn-Str. 14, room 109
D - 24118 Kiel, Germany

Phone: +49 431 880 2941
Email: knitter at geographie.uni-kiel.de

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 819 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20180215/7d4666bc/attachment.sig>

From patrick.giraudoux at univ-fcomte.fr  Thu Feb 15 08:55:30 2018
From: patrick.giraudoux at univ-fcomte.fr (Patrick Giraudoux)
Date: Thu, 15 Feb 2018 08:55:30 +0100
Subject: [R-sig-Geo] readOGR does not read file names with accent
In-Reply-To: <687d3d1f-04c9-f9b4-75ab-b4dde6746534@univ-fcomte.fr>
References: <463abd7a-02c4-77dc-e02b-a44930028156@univ-fcomte.fr>
 <EDA03431DA599FDA.d4bd6de5-e65d-42a3-8d8a-047af0c9cf3b@mail.outlook.com>
 <EDA03431DA599FDA.0a1e7769-af4a-4387-88ab-7d942ee284a2@mail.outlook.com>
 <687d3d1f-04c9-f9b4-75ab-b4dde6746534@univ-fcomte.fr>
Message-ID: <9361b34b-3cf6-9dfa-e7e3-eaf936964b08@univ-fcomte.fr>

PS: surprisingly, the files with accent are well read from QGIS (however 
QGIS uses gdal as workhorse...)



Le 15/02/2018 ? 08:20, Patrick Giraudoux a ?crit?:
>> Patrick:
>>
>> Is there also a space in the file path? What is the locale, I guess 
>> CP1252?
>
> My locale is fr;Fran?ais (France)
>
>
> Le 15/02/2018 ? 07:57, Roger Bivand a ?crit?:
>> ... and could you try sf::st_read(), as it uses enc2utf8() 
>> internally? If that works, the same may be used in rgdal.
>>
>
> st_read has the same issue: reads the file with no accent but not with 
> accent:
>
> library(sf)
> st_read("./track 
> g?n?t/g?linotte/2017/Tr?montagne","trace_chaux_du_dombief")
> Reading layer `trace_chaux_du_dombief' from data source `U:\Users\pgiraudo2\Documents\Tetra\Master Tony Vialet\track g??n??t\g??linotte\2017\Tr??montagne' using driver `ESRI Shapefile'
> Simple feature collection with 1 feature and 5 fields
> geometry type:  LINESTRING
> dimension:      XY
> bbox:           xmin: 870249.9 ymin: 2180142 xmax: 871070 ymax: 2180930
> epsg (SRID):    NA
> proj4string:    NA
>
> but
>
> st_read("./track 
> g?n?t/g?linotte/2017/Tr?montagne","trac?_chaux_du_dombief")
> Cannot open layer trac?_chaux_du_dombief
> Error in CPL_read_ogr(dsn, layer, as.character(options), quiet, type, 
> : Opening layer failed.



	[[alternative HTML version deleted]]


From edzer.pebesma at uni-muenster.de  Thu Feb 15 09:03:35 2018
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 15 Feb 2018 09:03:35 +0100
Subject: [R-sig-Geo] readOGR does not read file names with accent
In-Reply-To: <687d3d1f-04c9-f9b4-75ab-b4dde6746534@univ-fcomte.fr>
References: <463abd7a-02c4-77dc-e02b-a44930028156@univ-fcomte.fr>
 <EDA03431DA599FDA.d4bd6de5-e65d-42a3-8d8a-047af0c9cf3b@mail.outlook.com>
 <EDA03431DA599FDA.0a1e7769-af4a-4387-88ab-7d942ee284a2@mail.outlook.com>
 <687d3d1f-04c9-f9b4-75ab-b4dde6746534@univ-fcomte.fr>
Message-ID: <8faf7550-d02d-9e4b-87aa-278cb2830427@uni-muenster.de>



On 02/15/2018 08:20 AM, Patrick Giraudoux wrote:
>> Patrick:
>>
>> Is there also a space in the file path? What is the locale, I guess 
>> CP1252?
> 
> My locale is fr;Fran?ais (France)
> 
> 
> Le 15/02/2018 ? 07:57, Roger Bivand a ?crit?:
>> ... and could you try sf::st_read(), as it uses enc2utf8() internally? 
>> If that works, the same may be used in rgdal.
>>
> 
> st_read has the same issue: reads the file with no accent but not with 
> accent:
> 
> library(sf)
> st_read("./track g?n?t/g?linotte/2017/Tr?montagne","trace_chaux_du_dombief")
> 
> Reading layer `trace_chaux_du_dombief' from data source `U:\Users\pgiraudo2\Documents\Tetra\Master Tony Vialet\track g??n??t\g??linotte\2017\Tr??montagne' using driver `ESRI Shapefile'
> Simple feature collection with 1 feature and 5 fields
> geometry type:  LINESTRING
> dimension:      XY
> bbox:           xmin: 870249.9 ymin: 2180142 xmax: 871070 ymax: 2180930
> epsg (SRID):    NA
> proj4string:    NA
> 
> 
> but
> 
> st_read("./track g?n?t/g?linotte/2017/Tr?montagne","trac?_chaux_du_dombief")
> 

Does

st_read("./track g?n?t/g?linotte/2017/Tr?montagne",
enc2utf8("trac?_chaux_du_dombief"))

work?


> Cannot open layer trac?_chaux_du_dombief
> Error in CPL_read_ogr(dsn, layer, as.character(options), quiet, type, : 
> Opening layer failed.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From Roger.Bivand at nhh.no  Thu Feb 15 10:25:14 2018
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 15 Feb 2018 10:25:14 +0100
Subject: [R-sig-Geo] readOGR does not read file names with accent
In-Reply-To: <8faf7550-d02d-9e4b-87aa-278cb2830427@uni-muenster.de>
References: <463abd7a-02c4-77dc-e02b-a44930028156@univ-fcomte.fr>
 <EDA03431DA599FDA.d4bd6de5-e65d-42a3-8d8a-047af0c9cf3b@mail.outlook.com>
 <EDA03431DA599FDA.0a1e7769-af4a-4387-88ab-7d942ee284a2@mail.outlook.com>
 <687d3d1f-04c9-f9b4-75ab-b4dde6746534@univ-fcomte.fr>
 <8faf7550-d02d-9e4b-87aa-278cb2830427@uni-muenster.de>
Message-ID: <alpine.LFD.2.21.1802151020310.1331@reclus.nhh.no>

On a CP1252 Windows 7 system, R 3.4.3 patched, current CRAN rgdal and sf, 
the dsn is not affected by diacriticals, but the layer name is. Putting 
enc2utf8() around the layer name resolves the problem for me, so for 
Patrick:

st_read("./track g?n?t/g?linotte/2017/Tr?montagne",
  enc2utf8("trac?_chaux_du_dombief"))

or

readOGR("./track g?n?t/g?linotte/2017/Tr?montagne",
  enc2utf8("trac?_chaux_du_dombief"))

should work.

Roger

On Thu, 15 Feb 2018, Edzer Pebesma wrote:

>
>
> On 02/15/2018 08:20 AM, Patrick Giraudoux wrote:
>>> Patrick:
>>>
>>> Is there also a space in the file path? What is the locale, I guess
>>> CP1252?
>>
>> My locale is fr;Fran?ais (France)
>>
>>
>> Le 15/02/2018 ? 07:57, Roger Bivand a ?crit?:
>>> ... and could you try sf::st_read(), as it uses enc2utf8() internally?
>>> If that works, the same may be used in rgdal.
>>>
>>
>> st_read has the same issue: reads the file with no accent but not with
>> accent:
>>
>> library(sf)
>> st_read("./track g?n?t/g?linotte/2017/Tr?montagne","trace_chaux_du_dombief")
>>
>> Reading layer `trace_chaux_du_dombief' from data source `U:\Users\pgiraudo2\Documents\Tetra\Master Tony Vialet\track g??n??t\g??linotte\2017\Tr??montagne' using driver `ESRI Shapefile'
>> Simple feature collection with 1 feature and 5 fields
>> geometry type:  LINESTRING
>> dimension:      XY
>> bbox:           xmin: 870249.9 ymin: 2180142 xmax: 871070 ymax: 2180930
>> epsg (SRID):    NA
>> proj4string:    NA
>>
>>
>> but
>>
>> st_read("./track g?n?t/g?linotte/2017/Tr?montagne","trac?_chaux_du_dombief")
>>
>
> Does
>
> st_read("./track g?n?t/g?linotte/2017/Tr?montagne",
> enc2utf8("trac?_chaux_du_dombief"))
>
> work?
>
>
>> Cannot open layer trac?_chaux_du_dombief
>> Error in CPL_read_ogr(dsn, layer, as.character(options), quiet, type, :
>> Opening layer failed.
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From Roger.Bivand at nhh.no  Thu Feb 15 10:56:09 2018
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 15 Feb 2018 10:56:09 +0100
Subject: [R-sig-Geo] readOGR does not read file names with accent
In-Reply-To: <alpine.LFD.2.21.1802151020310.1331@reclus.nhh.no>
References: <463abd7a-02c4-77dc-e02b-a44930028156@univ-fcomte.fr>
 <EDA03431DA599FDA.d4bd6de5-e65d-42a3-8d8a-047af0c9cf3b@mail.outlook.com>
 <EDA03431DA599FDA.0a1e7769-af4a-4387-88ab-7d942ee284a2@mail.outlook.com>
 <687d3d1f-04c9-f9b4-75ab-b4dde6746534@univ-fcomte.fr>
 <8faf7550-d02d-9e4b-87aa-278cb2830427@uni-muenster.de>
 <alpine.LFD.2.21.1802151020310.1331@reclus.nhh.no>
Message-ID: <alpine.LFD.2.21.1802151047190.1331@reclus.nhh.no>

However, we have a downstream difficulty, which is that current GDAL
poLayer->GetName() appears to return UTF-8 in both sf::st_layers() and 
rgdal::ogrListLayers(), instead of native (CP1252 or other). However, this 
is seen as native or unknown in R, so messes up choosing the first or 
single layer if only a dsn is given in a non-UTF-8 charset locale. I'm 
going to assign

Encoding(layers) <- "UTF-8"
layers <- enc2native(layers)

as a work-around.

Roger

On Thu, 15 Feb 2018, Roger Bivand wrote:

> On a CP1252 Windows 7 system, R 3.4.3 patched, current CRAN rgdal and sf, the 
> dsn is not affected by diacriticals, but the layer name is. Putting 
> enc2utf8() around the layer name resolves the problem for me, so for Patrick:
>
> st_read("./track g?n?t/g?linotte/2017/Tr?montagne",
>  enc2utf8("trac?_chaux_du_dombief"))
>
> or
>
> readOGR("./track g?n?t/g?linotte/2017/Tr?montagne",
>  enc2utf8("trac?_chaux_du_dombief"))
>
> should work.
>
> Roger
>
> On Thu, 15 Feb 2018, Edzer Pebesma wrote:
>
>> 
>>
>>  On 02/15/2018 08:20 AM, Patrick Giraudoux wrote:
>>>>  Patrick:
>>>>
>>>>  Is there also a space in the file path? What is the locale, I guess
>>>>  CP1252?
>>>
>>>  My locale is fr;Fran?ais (France)
>>> 
>>>
>>>  Le 15/02/2018 ? 07:57, Roger Bivand a ?crit?:
>>>>  ... and could you try sf::st_read(), as it uses enc2utf8() internally?
>>>>  If that works, the same may be used in rgdal.
>>>> 
>>>
>>>  st_read has the same issue: reads the file with no accent but not with
>>>  accent:
>>>
>>>  library(sf)
>>>  st_read("./track
>>>  g?n?t/g?linotte/2017/Tr?montagne","trace_chaux_du_dombief")
>>>
>>>  Reading layer `trace_chaux_du_dombief' from data source
>>>  `U:\Users\pgiraudo2\Documents\Tetra\Master Tony Vialet\track
>>>  g??n??t\g??linotte\2017\Tr??montagne' using driver `ESRI Shapefile'
>>>  Simple feature collection with 1 feature and 5 fields
>>>  geometry type:  LINESTRING
>>>  dimension:      XY
>>>  bbox:           xmin: 870249.9 ymin: 2180142 xmax: 871070 ymax: 2180930
>>>  epsg (SRID):    NA
>>>  proj4string:    NA
>>> 
>>>
>>>  but
>>>
>>>  st_read("./track
>>>  g?n?t/g?linotte/2017/Tr?montagne","trac?_chaux_du_dombief")
>>> 
>>
>>  Does
>>
>>  st_read("./track g?n?t/g?linotte/2017/Tr?montagne",
>>  enc2utf8("trac?_chaux_du_dombief"))
>>
>>  work?
>> 
>>
>>>  Cannot open layer trac?_chaux_du_dombief
>>>  Error in CPL_read_ogr(dsn, layer, as.character(options), quiet, type, :
>>>  Opening layer failed.
>>> 
>>>
>>>   [[alternative HTML version deleted]]
>>>
>>>  _______________________________________________
>>>  R-sig-Geo mailing list
>>>  R-sig-Geo at r-project.org
>>>  https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>> 
>> 
>> 
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From Roger.Bivand at nhh.no  Thu Feb 15 11:33:54 2018
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 15 Feb 2018 11:33:54 +0100
Subject: [R-sig-Geo] readOGR does not read file names with accent
In-Reply-To: <9361b34b-3cf6-9dfa-e7e3-eaf936964b08@univ-fcomte.fr>
References: <463abd7a-02c4-77dc-e02b-a44930028156@univ-fcomte.fr>
 <EDA03431DA599FDA.d4bd6de5-e65d-42a3-8d8a-047af0c9cf3b@mail.outlook.com>
 <EDA03431DA599FDA.0a1e7769-af4a-4387-88ab-7d942ee284a2@mail.outlook.com>
 <687d3d1f-04c9-f9b4-75ab-b4dde6746534@univ-fcomte.fr>
 <9361b34b-3cf6-9dfa-e7e3-eaf936964b08@univ-fcomte.fr>
Message-ID: <alpine.LFD.2.21.1802151130450.1331@reclus.nhh.no>

Please try to install a draft version of rgdal at:

https://win-builder.r-project.org/vvWJdd1isnsR

and report on its performance for your charset:

ogrInfo("./track g?n?t/g?linotte/2017/Tr?montagne",
  "trac?_chaux_du_dombief")

ogrListLayers("./track g?n?t/g?linotte/2017/Tr?montagne")

etc. Beware that my email is probably encoded in UTF-8, so enter the 
diacriticals on your own machine.

Roger

On Thu, 15 Feb 2018, Patrick Giraudoux wrote:

> PS: surprisingly, the files with accent are well read from QGIS (however QGIS 
> uses gdal as workhorse...)
>
>
>
> Le 15/02/2018 ? 08:20, Patrick Giraudoux a ?crit?:
>>>  Patrick:
>>>
>>>  Is there also a space in the file path? What is the locale, I guess
>>>  CP1252?
>>
>>  My locale is fr;Fran?ais (France)
>> 
>>
>>  Le 15/02/2018 ? 07:57, Roger Bivand a ?crit?:
>>>  ... and could you try sf::st_read(), as it uses enc2utf8() internally? If
>>>  that works, the same may be used in rgdal.
>>> 
>>
>>  st_read has the same issue: reads the file with no accent but not with
>>  accent:
>>
>>  library(sf)
>>  st_read("./track
>>  g?n?t/g?linotte/2017/Tr?montagne","trace_chaux_du_dombief")
>>  Reading layer `trace_chaux_du_dombief' from data source
>>  `U:\Users\pgiraudo2\Documents\Tetra\Master Tony Vialet\track
>>  g??n??t\g??linotte\2017\Tr??montagne' using driver `ESRI Shapefile'
>>  Simple feature collection with 1 feature and 5 fields
>>  geometry type:  LINESTRING
>>  dimension:      XY
>>  bbox:           xmin: 870249.9 ymin: 2180142 xmax: 871070 ymax: 2180930
>>  epsg (SRID):    NA
>>  proj4string:    NA
>>
>>  but
>>
>>  st_read("./track
>>  g?n?t/g?linotte/2017/Tr?montagne","trac?_chaux_du_dombief")
>>  Cannot open layer trac?_chaux_du_dombief
>>  Error in CPL_read_ogr(dsn, layer, as.character(options), quiet, type, 
>> :  Opening layer failed.
>
>
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From Roger.Bivand at nhh.no  Thu Feb 15 13:01:54 2018
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 15 Feb 2018 13:01:54 +0100
Subject: [R-sig-Geo] readOGR does not read file names with accent
In-Reply-To: <alpine.LFD.2.21.1802151130450.1331@reclus.nhh.no>
References: <463abd7a-02c4-77dc-e02b-a44930028156@univ-fcomte.fr>
 <EDA03431DA599FDA.d4bd6de5-e65d-42a3-8d8a-047af0c9cf3b@mail.outlook.com>
 <EDA03431DA599FDA.0a1e7769-af4a-4387-88ab-7d942ee284a2@mail.outlook.com>
 <687d3d1f-04c9-f9b4-75ab-b4dde6746534@univ-fcomte.fr>
 <9361b34b-3cf6-9dfa-e7e3-eaf936964b08@univ-fcomte.fr>
 <alpine.LFD.2.21.1802151130450.1331@reclus.nhh.no>
Message-ID: <alpine.LFD.2.21.1802151301140.1331@reclus.nhh.no>

And with a further fix for a downstream encoding issue:

http://spatial.nhh.no/R/rgdal/rgdal_1.2-17.zip

Roger

On Thu, 15 Feb 2018, Roger Bivand wrote:

> Please try to install a draft version of rgdal at:
>
> https://win-builder.r-project.org/vvWJdd1isnsR
>
> and report on its performance for your charset:
>
> ogrInfo("./track g?n?t/g?linotte/2017/Tr?montagne",
>  "trac?_chaux_du_dombief")
>
> ogrListLayers("./track g?n?t/g?linotte/2017/Tr?montagne")
>
> etc. Beware that my email is probably encoded in UTF-8, so enter the 
> diacriticals on your own machine.
>
> Roger
>
> On Thu, 15 Feb 2018, Patrick Giraudoux wrote:
>
>>  PS: surprisingly, the files with accent are well read from QGIS (however
>>  QGIS uses gdal as workhorse...)
>> 
>> 
>>
>>  Le 15/02/2018 ? 08:20, Patrick Giraudoux a ?crit?:
>>>>   Patrick:
>>>>
>>>>   Is there also a space in the file path? What is the locale, I guess
>>>>   CP1252?
>>>
>>>   My locale is fr;Fran?ais (France)
>>> 
>>>
>>>   Le 15/02/2018 ? 07:57, Roger Bivand a ?crit?:
>>>>   ... and could you try sf::st_read(), as it uses enc2utf8() internally?
>>>>   If
>>>>   that works, the same may be used in rgdal.
>>>> 
>>>
>>>   st_read has the same issue: reads the file with no accent but not with
>>>   accent:
>>>
>>>   library(sf)
>>>   st_read("./track
>>>   g?n?t/g?linotte/2017/Tr?montagne","trace_chaux_du_dombief")
>>>   Reading layer `trace_chaux_du_dombief' from data source
>>>   `U:\Users\pgiraudo2\Documents\Tetra\Master Tony Vialet\track
>>>   g??n??t\g??linotte\2017\Tr??montagne' using driver `ESRI Shapefile'
>>>   Simple feature collection with 1 feature and 5 fields
>>>   geometry type:  LINESTRING
>>>   dimension:      XY
>>>   bbox:           xmin: 870249.9 ymin: 2180142 xmax: 871070 ymax: 2180930
>>>   epsg (SRID):    NA
>>>   proj4string:    NA
>>>
>>>   but
>>>
>>>   st_read("./track
>>>   g?n?t/g?linotte/2017/Tr?montagne","trac?_chaux_du_dombief")
>>>   Cannot open layer trac?_chaux_du_dombief
>>>   Error in CPL_read_ogr(dsn, layer, as.character(options), quiet, type, 
>>> :   Opening layer failed.
>> 
>> 
>> 
>> 
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From patrick.giraudoux at univ-fcomte.fr  Thu Feb 15 13:52:19 2018
From: patrick.giraudoux at univ-fcomte.fr (Patrick Giraudoux)
Date: Thu, 15 Feb 2018 13:52:19 +0100
Subject: [R-sig-Geo] readOGR does not read file names with accent
In-Reply-To: <alpine.LFD.2.21.1802151301140.1331@reclus.nhh.no>
References: <463abd7a-02c4-77dc-e02b-a44930028156@univ-fcomte.fr>
 <EDA03431DA599FDA.d4bd6de5-e65d-42a3-8d8a-047af0c9cf3b@mail.outlook.com>
 <EDA03431DA599FDA.0a1e7769-af4a-4387-88ab-7d942ee284a2@mail.outlook.com>
 <687d3d1f-04c9-f9b4-75ab-b4dde6746534@univ-fcomte.fr>
 <9361b34b-3cf6-9dfa-e7e3-eaf936964b08@univ-fcomte.fr>
 <alpine.LFD.2.21.1802151130450.1331@reclus.nhh.no>
 <alpine.LFD.2.21.1802151301140.1331@reclus.nhh.no>
Message-ID: <47c99c3e-f022-c5f2-4aed-4f86b63481db@univ-fcomte.fr>

Le 15/02/2018 ? 13:01, Roger Bivand a ?crit?:
> And with a further fix for a downstream encoding issue:
>
> http://spatial.nhh.no/R/rgdal/rgdal_1.2-17.zip
>
> Roger


OK. Works perfect now, even with a worst case scenario "accents + white 
space", e.g.

readOGR("./track g?n?t/g?linotte/2016/Mont Noir","g?n?ral jour 5")

Really great ! Many thanks for your help and so quick response... Awsome !

Best wishes,

Patrick


From Roger.Bivand at nhh.no  Thu Feb 15 14:07:49 2018
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 15 Feb 2018 14:07:49 +0100
Subject: [R-sig-Geo] readOGR does not read file names with accent
In-Reply-To: <47c99c3e-f022-c5f2-4aed-4f86b63481db@univ-fcomte.fr>
References: <463abd7a-02c4-77dc-e02b-a44930028156@univ-fcomte.fr>
 <EDA03431DA599FDA.d4bd6de5-e65d-42a3-8d8a-047af0c9cf3b@mail.outlook.com>
 <EDA03431DA599FDA.0a1e7769-af4a-4387-88ab-7d942ee284a2@mail.outlook.com>
 <687d3d1f-04c9-f9b4-75ab-b4dde6746534@univ-fcomte.fr>
 <9361b34b-3cf6-9dfa-e7e3-eaf936964b08@univ-fcomte.fr>
 <alpine.LFD.2.21.1802151130450.1331@reclus.nhh.no>
 <alpine.LFD.2.21.1802151301140.1331@reclus.nhh.no>
 <47c99c3e-f022-c5f2-4aed-4f86b63481db@univ-fcomte.fr>
Message-ID: <alpine.LFD.2.21.1802151407180.1331@reclus.nhh.no>

Thanks, I'll start moving to submit to CRAN.

Best wishes,

Roger

On Thu, 15 Feb 2018, Patrick Giraudoux wrote:

> Le 15/02/2018 ? 13:01, Roger Bivand a ?crit?:
>>  And with a further fix for a downstream encoding issue:
>>
>>  http://spatial.nhh.no/R/rgdal/rgdal_1.2-17.zip
>>
>>  Roger
>
>
> OK. Works perfect now, even with a worst case scenario "accents + white 
> space", e.g.
>
> readOGR("./track g?n?t/g?linotte/2016/Mont Noir","g?n?ral jour 5")
>
> Really great ! Many thanks for your help and so quick response... Awsome !
>
> Best wishes,
>
> Patrick
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From thi_veloso at yahoo.com.br  Thu Feb 15 15:33:41 2018
From: thi_veloso at yahoo.com.br (Thiago V. dos Santos)
Date: Thu, 15 Feb 2018 14:33:41 +0000 (UTC)
Subject: [R-sig-Geo] Is the raster package still receiving updates?
In-Reply-To: <6912309e-7558-0ffe-41f7-dd289dd34dfe@uni-muenster.de>
References: <1520364990.1033649.1508511658722.ref@mail.yahoo.com>
 <1520364990.1033649.1508511658722@mail.yahoo.com>
 <CAAcGz98p=378aWyX=hb7Ro6Myjg9iFp5dtM=jvprFXimJ7JLUg@mail.gmail.com>
 <1508551128926.11865@uhd.edu>
 <CAAcGz9_-qUYEpwDMQU=qmTnqVemGvSq63tEyJGf=8ApkTG+_ZQ@mail.gmail.com>
 <E7824B12CF1B784E.e319c03c-61a4-4b29-b62c-31fe5bfe31de@mail.outlook.com>
 <f458d17f-f923-e7bb-5243-7ec0a83af0e1@uni-marburg.de>
 <E7824B12CF1B784E.03827277-398b-4e71-ba14-e87242a4897e@mail.outlook.com>
 <6912309e-7558-0ffe-41f7-dd289dd34dfe@uni-muenster.de>
Message-ID: <506369529.1487221.1518705221286@mail.yahoo.com>

Dear Edzer,
As a heavy user of both raster and sp (for remote sensing products and climate model outputs), I am really interested in the outcomes of your meeting with Robert and Etienne.
I was just wondering: eould it be possible/convenient at this point for you to share them with us?
Thanks!
?-- Thiago V. dos Santos
Postdoctoral Research FellowDepartment of Climate and Space Science and EngineeringUniversity of Michigan 

    On Saturday, October 21, 2017, 5:32:59 AM EDT, Edzer Pebesma <edzer.pebesma at uni-muenster.de> wrote:  
 
 The the NOTEs on CRAN and the issues raised on Mike's raster-rforge GH
repo to me suggest that raster has, for a while now, reached a mature
state. Of course, you'd wish that raster development, in terms of
extending its power and features, would continue the pace it did 10
years ago, but that's a different issue. Mike has write access to the
raster r-forge sources, it shouldn't be hard to support Robert with
current issues.

Right after rstudio::conf (Feb 4/5) I'm meeting with Robert Hijmans and
Etienne Racine, to discuss, and work on raster future and integration of
rasters and stars. Anyone interested, feel free to join.

Stars has the ambition to jump over raster, in the sense that it doesn't
want to have the local hard drive as a limitation. That calls for
rethinking quite a few things. So far, things are still all in main
memory but it already integrates with sf:

https://gist.github.com/edzer/381dac079ddcd5174be31209675b3822

and handles time stacks of different attributes in single objects. Feed
back welcome as always; will write up the first blog in a few weeks.


On 10/21/2017 10:41 AM, Roger Bivand wrote:
> Yes, this sounds fruitful. For now, I suggest that those wishing to enhance raster do so in an additional package enhancing raster and depending on it. Immediately, we should help Robert resolve the notes in the tests, they do not affect functionality now, but deserve attention to bring the package into full CRAN compliance. I can help with this.
> 
> Roger
> 
> Roger Bivand
> Norwegian School of Economics
> Bergen, Norway
> 
> 
> 
> Fra: Chris Reudenbach
> Sendt: l?rdag 21. oktober, 09.01
> Emne: Re: [R-sig-Geo] Is the raster package still receiving updates?
> Til: r-sig-geo at r-project.org
> 
> 
> Many of us rely on the raster package as a crucial basis for their work. Big thank to Robert.? Nevertheless to contribute needs to focus needs and ressources.? Maybe an information exchange/discussion with Robert about options such as if/how the interested community can support would be more productive. cheers Chris Am 21.10.2017 um 06:52 schrieb Roger Bivand: > The CRAN raster package has not been abandoned, if it had, it would have been reclassified as orphaned. Its test results have notes but no warnings or errors. It would be orphaned if the maintainer did not respond to CRAN requests to resolve test errors. Consequently, you are suggesting a fork, and should rename any package. Only the maintainer may update existing CRAN packages. I would not think that forking an existing CRAN package is the most productive way of contributing to the community. The package has many reverse dependencies, so setting up a test framework to find backwards incompatibilities would be crucial. > > Of course, all contributions are welcome. > > Roger > > Roger Bivand > Norwegian School of Economics > Bergen, Norway > > > > Fra: Michael Sumner > Sendt: l?rdag 21. oktober, 06.28 > Emne: Re: [R-sig-Geo] Is the raster package still receiving updates? > Til: Hodgess, Erin > Kopi: R-sig-geo Mailing List > > > Great! I'm keen, but haven't done the work needed to flesh this out properly: https://github.com/mdsumner/raster-rforge/issues I have not checked if there's been any commits to r-forge since I cloned this. Cheers, Mike On Sat, 21 Oct 2017, 12:58 Hodgess, Erin, wrote: > I could take a swat at it, if you wish. Please do send me the list of > fixes. I could start in about a week, if that would work. > Sincerely, > Erin > > > Erin M. Hodgess > Associate Professor > Department of Mathematics and Statistics > University of Houston - Downtown > mailto: hodgesse at uhd.edu > > ________________________________________ > From: R-sig-Geo on behalf of Michael > Sumner > Sent: Friday, October 20, 2017 8:05 PM > To: Thiago V. dos Santos > Cc: R-sig-geo Mailing List > Subject: Re: [R-sig-Geo] Is the raster package still receiving updates? > > No, it's effectively abandoned. No concrete plans known. > > I'm interested to keep it going and have kept a list of fixes needed, but > not sure when or if I'll get to it. > > I'd support any efforts in this, I'll rely on raster for many years still. > > Cheers, Mike > > On Sat, 21 Oct 2017, 02:05 Thiago V. dos Santos via R-sig-Geo, < > r-sig-geo at r-project.org> wrote: > > > Dear list, > > > > I realized that the latest version of the raster package was released on > > CRAN over a year ago. > > > > I also noticed that Robert's participation in this list has become rather > > scarce. > > > > I was just wondering whether the raster package is still receiving > updates? > > > > Greetings, > > -- Thiago V. dos Santos > > > > Postdoctoral Research Fellow > > Department of Climate and Space Science and Engineering > > University of Michigan > > > > _______________________________________________ > > R-sig-Geo mailing list > > R-sig-Geo at r-project.org > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > -- > Dr. Michael Sumner > Software and Database Engineer > Australian Antarctic Division > 203 Channel Highway > Kingston Tasmania 7050 Australia > > [[alternative HTML version deleted]] > > ____ > ___________________________________________ > R-sig-Geo mailing list > R-sig-Geo at r-project.org > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr. Michael Sumner Software and Database Engineer Australian Antarctic Division 203 Channel Highway Kingston Tasmania 7050 Australia [[alternative HTML version deleted]] _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > [[alternative HTML version deleted]] > > _______________________________________________ > R-sig-Geo mailing list > R-sig-Geo at r-project.org > https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr Christoph Reudenbach, Philipps-University of Marburg, Faculty of Geography, GIS and Environmental Modeling, Deutschhausstr. 10, D-35032 Marburg, fon: ++49.(0)6421.2824296, fax: ++49.(0)6421.2828950, web: gis-ma.org, giswerk.org, moc.environmentalinformatics-marburg.de _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> 
> ??? [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081
_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo  
	[[alternative HTML version deleted]]


From edzer.pebesma at uni-muenster.de  Thu Feb 15 15:47:57 2018
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 15 Feb 2018 15:47:57 +0100
Subject: [R-sig-Geo] readOGR does not read file names with accent
In-Reply-To: <alpine.LFD.2.21.1802151407180.1331@reclus.nhh.no>
References: <463abd7a-02c4-77dc-e02b-a44930028156@univ-fcomte.fr>
 <EDA03431DA599FDA.d4bd6de5-e65d-42a3-8d8a-047af0c9cf3b@mail.outlook.com>
 <EDA03431DA599FDA.0a1e7769-af4a-4387-88ab-7d942ee284a2@mail.outlook.com>
 <687d3d1f-04c9-f9b4-75ab-b4dde6746534@univ-fcomte.fr>
 <9361b34b-3cf6-9dfa-e7e3-eaf936964b08@univ-fcomte.fr>
 <alpine.LFD.2.21.1802151130450.1331@reclus.nhh.no>
 <alpine.LFD.2.21.1802151301140.1331@reclus.nhh.no>
 <47c99c3e-f022-c5f2-4aed-4f86b63481db@univ-fcomte.fr>
 <alpine.LFD.2.21.1802151407180.1331@reclus.nhh.no>
Message-ID: <28c150de-8d97-b018-337f-4448d9247009@uni-muenster.de>

In sf, the same changes should be available in

https://github.com/r-spatial/sf/commit/49d1caca4a4cc71398c1b34a9dedc10112247cae

(untested)

On 02/15/2018 02:07 PM, Roger Bivand wrote:
> Thanks, I'll start moving to submit to CRAN.
> 
> Best wishes,
> 
> Roger
> 
> On Thu, 15 Feb 2018, Patrick Giraudoux wrote:
> 
>> Le 15/02/2018 ? 13:01, Roger Bivand a ?crit?:
>>> ?And with a further fix for a downstream encoding issue:
>>>
>>> ?http://spatial.nhh.no/R/rgdal/rgdal_1.2-17.zip
>>>
>>> ?Roger
>>
>>
>> OK. Works perfect now, even with a worst case scenario "accents +
>> white space", e.g.
>>
>> readOGR("./track g?n?t/g?linotte/2016/Mont Noir","g?n?ral jour 5")
>>
>> Really great ! Many thanks for your help and so quick response...
>> Awsome !
>>
>> Best wishes,
>>
>> Patrick
>>
>>
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From edzer.pebesma at uni-muenster.de  Thu Feb 15 16:11:26 2018
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 15 Feb 2018 16:11:26 +0100
Subject: [R-sig-Geo] Is the raster package still receiving updates?
In-Reply-To: <506369529.1487221.1518705221286@mail.yahoo.com>
References: <1520364990.1033649.1508511658722.ref@mail.yahoo.com>
 <1520364990.1033649.1508511658722@mail.yahoo.com>
 <CAAcGz98p=378aWyX=hb7Ro6Myjg9iFp5dtM=jvprFXimJ7JLUg@mail.gmail.com>
 <1508551128926.11865@uhd.edu>
 <CAAcGz9_-qUYEpwDMQU=qmTnqVemGvSq63tEyJGf=8ApkTG+_ZQ@mail.gmail.com>
 <E7824B12CF1B784E.e319c03c-61a4-4b29-b62c-31fe5bfe31de@mail.outlook.com>
 <f458d17f-f923-e7bb-5243-7ec0a83af0e1@uni-marburg.de>
 <E7824B12CF1B784E.03827277-398b-4e71-ba14-e87242a4897e@mail.outlook.com>
 <6912309e-7558-0ffe-41f7-dd289dd34dfe@uni-muenster.de>
 <506369529.1487221.1518705221286@mail.yahoo.com>
Message-ID: <06b0ec97-9ec7-f5a5-50cd-171102187f8f@uni-muenster.de>


On 02/15/2018 03:33 PM, Thiago V. dos Santos wrote:
> Dear Edzer,
> 
> As a heavy user of both raster and sp (for remote sensing products and
> climate model outputs), I am really interested in the outcomes of your
> meeting with Robert and Etienne.
> 
> I was just wondering: eould it be possible/convenient at this point for
> you to share them with us?
> 

The meeting took place, as I reported here:
https://twitter.com/edzerpebesma/status/960376392247476227

My agenda is pretty much on-line, and otherwise found in my two R talks
of last week(s): https://github.com/edzer/rstudio_conf ; the talk at
Bren School @ UCSB gives more details (and some results) for stars.

The Bren talk was recorded, and I put it here:
http://pebesma.staff.ifgi.de/Spatial-data-in-R--Pebesma--2018-02-07.m4v

The RStudio::conf talk was recorded too, and should become available in
a few weeks.

Whenever there's something substantial to tell about stars, I'll report
back here (and/or on twitter), anything about raster you'll have to ask
Robert.

Many regards,

> Thanks!
> 
> ?-- Thiago V. dos Santos
> 
> Postdoctoral Research Fellow
> Department of Climate and Space Science and Engineering
> University of Michigan
> 
> 
> On Saturday, October 21, 2017, 5:32:59 AM EDT, Edzer Pebesma
> <edzer.pebesma at uni-muenster.de> wrote:
> 
> 
> The the NOTEs on CRAN and the issues raised on Mike's raster-rforge GH
> repo to me suggest that raster has, for a while now, reached a mature
> state. Of course, you'd wish that raster development, in terms of
> extending its power and features, would continue the pace it did 10
> years ago, but that's a different issue. Mike has write access to the
> raster r-forge sources, it shouldn't be hard to support Robert with
> current issues.
> 
> Right after rstudio::conf (Feb 4/5) I'm meeting with Robert Hijmans and
> Etienne Racine, to discuss, and work on raster future and integration of
> rasters and stars. Anyone interested, feel free to join.
> 
> Stars has the ambition to jump over raster, in the sense that it doesn't
> want to have the local hard drive as a limitation. That calls for
> rethinking quite a few things. So far, things are still all in main
> memory but it already integrates with sf:
> 
> https://gist.github.com/edzer/381dac079ddcd5174be31209675b3822
> 
> and handles time stacks of different attributes in single objects. Feed
> back welcome as always; will write up the first blog in a few weeks.
> 
> 
> On 10/21/2017 10:41 AM, Roger Bivand wrote:
>> Yes, this sounds fruitful. For now, I suggest that those wishing to
> enhance raster do so in an additional package enhancing raster and
> depending on it. Immediately, we should help Robert resolve the notes in
> the tests, they do not affect functionality now, but deserve attention
> to bring the package into full CRAN compliance. I can help with this.
>>
>> Roger
>>
>> Roger Bivand
>> Norwegian School of Economics
>> Bergen, Norway
>>
>>
>>
>> Fra: Chris Reudenbach
>> Sendt: l?rdag 21. oktober, 09.01
>> Emne: Re: [R-sig-Geo] Is the raster package still receiving updates?
>> Til: r-sig-geo at r-project.org <mailto:r-sig-geo at r-project.org>
>>
>>
>> Many of us rely on the raster package as a crucial basis for their
> work. Big thank to Robert.? Nevertheless to contribute needs to focus
> needs and ressources.? Maybe an information exchange/discussion with
> Robert about options such as if/how the interested community can support
> would be more productive. cheers Chris Am 21.10.2017 um 06:52 schrieb
> Roger Bivand: > The CRAN raster package has not been abandoned, if it
> had, it would have been reclassified as orphaned. Its test results have
> notes but no warnings or errors. It would be orphaned if the maintainer
> did not respond to CRAN requests to resolve test errors. Consequently,
> you are suggesting a fork, and should rename any package. Only the
> maintainer may update existing CRAN packages. I would not think that
> forking an existing CRAN package is the most productive way of
> contributing to the community. The package has many reverse
> dependencies, so setting up a test framework to find backwards
> incompatibilities would be crucial. > > Of course, all contributions are
> welcome. > > Roger > > Roger Bivand > Norwegian School of Economics >
> Bergen, Norway > > > > Fra: Michael Sumner > Sendt: l?rdag 21. oktober,
> 06.28 > Emne: Re: [R-sig-Geo] Is the raster package still receiving
> updates? > Til: Hodgess, Erin > Kopi: R-sig-geo Mailing List > > >
> Great! I'm keen, but haven't done the work needed to flesh this out
> properly: https://github.com/mdsumner/raster-rforge/issues I have not
> checked if there's been any commits to r-forge since I cloned this.
> Cheers, Mike On Sat, 21 Oct 2017, 12:58 Hodgess, Erin, wrote: > I could
> take a swat at it, if you wish. Please do send me the list of > fixes. I
> could start in about a week, if that would work. > Sincerely, > Erin > >
>> Erin M. Hodgess > Associate Professor > Department of Mathematics and
> Statistics > University of Houston - Downtown > mailto: hodgesse at uhd.edu
> <mailto:hodgesse at uhd.edu> > > ________________________________________ >
> From: R-sig-Geo on behalf of Michael > Sumner > Sent: Friday, October
> 20, 2017 8:05 PM > To: Thiago V. dos Santos > Cc: R-sig-geo Mailing List
>> Subject: Re: [R-sig-Geo] Is the raster package still receiving
> updates? > > No, it's effectively abandoned. No concrete plans known. >
>> I'm interested to keep it going and have kept a list of fixes needed,
> but > not sure when or if I'll get to it. > > I'd support any efforts in
> this, I'll rely on raster for many years still. > > Cheers, Mike > > On
> Sat, 21 Oct 2017, 02:05 Thiago V. dos Santos via R-sig-Geo, < >
> r-sig-geo at r-project.org <mailto:r-sig-geo at r-project.org>> wrote: > > >
> Dear list, > > > > I realized that the latest version of the raster
> package was released on > > CRAN over a year ago. > > > > I also noticed
> that Robert's participation in this list has become rather > > scarce. >
>> > > I was just wondering whether the raster package is still receiving
>> updates? > > > > Greetings, > > -- Thiago V. dos Santos > > > >
> Postdoctoral Research Fellow > > Department of Climate and Space Science
> and Engineering > > University of Michigan > > > >
> _______________________________________________ > > R-sig-Geo mailing
> list > > R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org> > >
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > -- > Dr. Michael
> Sumner > Software and Database Engineer > Australian Antarctic Division
>> 203 Channel Highway > Kingston Tasmania 7050 Australia > >
> [[alternative HTML version deleted]] > > ____ >
> ___________________________________________ > R-sig-Geo mailing list >
> R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org> >
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr. Michael Sumner
> Software and Database Engineer Australian Antarctic Division 203 Channel
> Highway Kingston Tasmania 7050 Australia [[alternative HTML version
> deleted]] _______________________________________________ R-sig-Geo
> mailing list R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > [[alternative HTML
> version deleted]] > > _______________________________________________ >
> R-sig-Geo mailing list > R-sig-Geo at r-project.org
> <mailto:R-sig-Geo at r-project.org> >
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr Christoph
> Reudenbach, Philipps-University of Marburg, Faculty of Geography, GIS
> and Environmental Modeling, Deutschhausstr. 10, D-35032 Marburg, fon:
> ++49.(0)6421.2824296, fax: ++49.(0)6421.2828950, web: gis-ma.org,
> giswerk.org, moc.environmentalinformatics-marburg.de
> _______________________________________________ R-sig-Geo mailing list
> R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>> ??? [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 
> -- 
> Edzer Pebesma
> Institute for Geoinformatics
> Heisenbergstrasse 2, 48151 Muenster, Germany
> Phone: +49 251 8333081
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From thi_veloso at yahoo.com.br  Fri Feb 16 15:21:00 2018
From: thi_veloso at yahoo.com.br (Thiago V. dos Santos)
Date: Fri, 16 Feb 2018 14:21:00 +0000 (UTC)
Subject: [R-sig-Geo] Is the raster package still receiving updates?
In-Reply-To: <06b0ec97-9ec7-f5a5-50cd-171102187f8f@uni-muenster.de>
References: <1520364990.1033649.1508511658722.ref@mail.yahoo.com>
 <1520364990.1033649.1508511658722@mail.yahoo.com>
 <CAAcGz98p=378aWyX=hb7Ro6Myjg9iFp5dtM=jvprFXimJ7JLUg@mail.gmail.com>
 <1508551128926.11865@uhd.edu>
 <CAAcGz9_-qUYEpwDMQU=qmTnqVemGvSq63tEyJGf=8ApkTG+_ZQ@mail.gmail.com>
 <E7824B12CF1B784E.e319c03c-61a4-4b29-b62c-31fe5bfe31de@mail.outlook.com>
 <f458d17f-f923-e7bb-5243-7ec0a83af0e1@uni-marburg.de>
 <E7824B12CF1B784E.03827277-398b-4e71-ba14-e87242a4897e@mail.outlook.com>
 <6912309e-7558-0ffe-41f7-dd289dd34dfe@uni-muenster.de>
 <506369529.1487221.1518705221286@mail.yahoo.com>
 <06b0ec97-9ec7-f5a5-50cd-171102187f8f@uni-muenster.de>
Message-ID: <1227533522.2205086.1518790860816@mail.yahoo.com>

Hi Edzer,
Cool, thanks for sharing! You seem to be working on really neat stuff.
Greetings,?-- Thiago V. dos Santos
Postdoctoral Research FellowDepartment of Climate and Space Science and EngineeringUniversity of Michigan 

    On Thursday, February 15, 2018, 10:11:31 AM EST, Edzer Pebesma <edzer.pebesma at uni-muenster.de> wrote:  
 
 
On 02/15/2018 03:33 PM, Thiago V. dos Santos wrote:
> Dear Edzer,
> 
> As a heavy user of both raster and sp (for remote sensing products and
> climate model outputs), I am really interested in the outcomes of your
> meeting with Robert and Etienne.
> 
> I was just wondering: eould it be possible/convenient at this point for
> you to share them with us?
> 

The meeting took place, as I reported here:
https://twitter.com/edzerpebesma/status/960376392247476227

My agenda is pretty much on-line, and otherwise found in my two R talks
of last week(s): https://github.com/edzer/rstudio_conf ; the talk at
Bren School @ UCSB gives more details (and some results) for stars.

The Bren talk was recorded, and I put it here:
http://pebesma.staff.ifgi.de/Spatial-data-in-R--Pebesma--2018-02-07.m4v

The RStudio::conf talk was recorded too, and should become available in
a few weeks.

Whenever there's something substantial to tell about stars, I'll report
back here (and/or on twitter), anything about raster you'll have to ask
Robert.

Many regards,

> Thanks!
> 
> ?-- Thiago V. dos Santos
> 
> Postdoctoral Research Fellow
> Department of Climate and Space Science and Engineering
> University of Michigan
> 
> 
> On Saturday, October 21, 2017, 5:32:59 AM EDT, Edzer Pebesma
> <edzer.pebesma at uni-muenster.de> wrote:
> 
> 
> The the NOTEs on CRAN and the issues raised on Mike's raster-rforge GH
> repo to me suggest that raster has, for a while now, reached a mature
> state. Of course, you'd wish that raster development, in terms of
> extending its power and features, would continue the pace it did 10
> years ago, but that's a different issue. Mike has write access to the
> raster r-forge sources, it shouldn't be hard to support Robert with
> current issues.
> 
> Right after rstudio::conf (Feb 4/5) I'm meeting with Robert Hijmans and
> Etienne Racine, to discuss, and work on raster future and integration of
> rasters and stars. Anyone interested, feel free to join.
> 
> Stars has the ambition to jump over raster, in the sense that it doesn't
> want to have the local hard drive as a limitation. That calls for
> rethinking quite a few things. So far, things are still all in main
> memory but it already integrates with sf:
> 
> https://gist.github.com/edzer/381dac079ddcd5174be31209675b3822
> 
> and handles time stacks of different attributes in single objects. Feed
> back welcome as always; will write up the first blog in a few weeks.
> 
> 
> On 10/21/2017 10:41 AM, Roger Bivand wrote:
>> Yes, this sounds fruitful. For now, I suggest that those wishing to
> enhance raster do so in an additional package enhancing raster and
> depending on it. Immediately, we should help Robert resolve the notes in
> the tests, they do not affect functionality now, but deserve attention
> to bring the package into full CRAN compliance. I can help with this.
>>
>> Roger
>>
>> Roger Bivand
>> Norwegian School of Economics
>> Bergen, Norway
>>
>>
>>
>> Fra: Chris Reudenbach
>> Sendt: l?rdag 21. oktober, 09.01
>> Emne: Re: [R-sig-Geo] Is the raster package still receiving updates?
>> Til: r-sig-geo at r-project.org <mailto:r-sig-geo at r-project.org>
>>
>>
>> Many of us rely on the raster package as a crucial basis for their
> work. Big thank to Robert.? Nevertheless to contribute needs to focus
> needs and ressources.? Maybe an information exchange/discussion with
> Robert about options such as if/how the interested community can support
> would be more productive. cheers Chris Am 21.10.2017 um 06:52 schrieb
> Roger Bivand: > The CRAN raster package has not been abandoned, if it
> had, it would have been reclassified as orphaned. Its test results have
> notes but no warnings or errors. It would be orphaned if the maintainer
> did not respond to CRAN requests to resolve test errors. Consequently,
> you are suggesting a fork, and should rename any package. Only the
> maintainer may update existing CRAN packages. I would not think that
> forking an existing CRAN package is the most productive way of
> contributing to the community. The package has many reverse
> dependencies, so setting up a test framework to find backwards
> incompatibilities would be crucial. > > Of course, all contributions are
> welcome. > > Roger > > Roger Bivand > Norwegian School of Economics >
> Bergen, Norway > > > > Fra: Michael Sumner > Sendt: l?rdag 21. oktober,
> 06.28 > Emne: Re: [R-sig-Geo] Is the raster package still receiving
> updates? > Til: Hodgess, Erin > Kopi: R-sig-geo Mailing List > > >
> Great! I'm keen, but haven't done the work needed to flesh this out
> properly: https://github.com/mdsumner/raster-rforge/issues I have not
> checked if there's been any commits to r-forge since I cloned this.
> Cheers, Mike On Sat, 21 Oct 2017, 12:58 Hodgess, Erin, wrote: > I could
> take a swat at it, if you wish. Please do send me the list of > fixes. I
> could start in about a week, if that would work. > Sincerely, > Erin > >
>> Erin M. Hodgess > Associate Professor > Department of Mathematics and
> Statistics > University of Houston - Downtown > mailto: hodgesse at uhd.edu
> <mailto:hodgesse at uhd.edu> > > ________________________________________ >
> From: R-sig-Geo on behalf of Michael > Sumner > Sent: Friday, October
> 20, 2017 8:05 PM > To: Thiago V. dos Santos > Cc: R-sig-geo Mailing List
>> Subject: Re: [R-sig-Geo] Is the raster package still receiving
> updates? > > No, it's effectively abandoned. No concrete plans known. >
>> I'm interested to keep it going and have kept a list of fixes needed,
> but > not sure when or if I'll get to it. > > I'd support any efforts in
> this, I'll rely on raster for many years still. > > Cheers, Mike > > On
> Sat, 21 Oct 2017, 02:05 Thiago V. dos Santos via R-sig-Geo, < >
> r-sig-geo at r-project.org <mailto:r-sig-geo at r-project.org>> wrote: > > >
> Dear list, > > > > I realized that the latest version of the raster
> package was released on > > CRAN over a year ago. > > > > I also noticed
> that Robert's participation in this list has become rather > > scarce. >
>> > > I was just wondering whether the raster package is still receiving
>> updates? > > > > Greetings, > > -- Thiago V. dos Santos > > > >
> Postdoctoral Research Fellow > > Department of Climate and Space Science
> and Engineering > > University of Michigan > > > >
> _______________________________________________ > > R-sig-Geo mailing
> list > > R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org> > >
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > -- > Dr. Michael
> Sumner > Software and Database Engineer > Australian Antarctic Division
>> 203 Channel Highway > Kingston Tasmania 7050 Australia > >
> [[alternative HTML version deleted]] > > ____ >
> ___________________________________________ > R-sig-Geo mailing list >
> R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org> >
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr. Michael Sumner
> Software and Database Engineer Australian Antarctic Division 203 Channel
> Highway Kingston Tasmania 7050 Australia [[alternative HTML version
> deleted]] _______________________________________________ R-sig-Geo
> mailing list R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo > > > [[alternative HTML
> version deleted]] > > _______________________________________________ >
> R-sig-Geo mailing list > R-sig-Geo at r-project.org
> <mailto:R-sig-Geo at r-project.org> >
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo > -- Dr Christoph
> Reudenbach, Philipps-University of Marburg, Faculty of Geography, GIS
> and Environmental Modeling, Deutschhausstr. 10, D-35032 Marburg, fon:
> ++49.(0)6421.2824296, fax: ++49.(0)6421.2828950, web: gis-ma.org,
> giswerk.org, moc.environmentalinformatics-marburg.de
> _______________________________________________ R-sig-Geo mailing list
> R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>> ??? [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 
> -- 
> Edzer Pebesma
> Institute for Geoinformatics
> Heisenbergstrasse 2, 48151 Muenster, Germany
> Phone: +49 251 8333081
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081
  
	[[alternative HTML version deleted]]


From Jin.Li at ga.gov.au  Tue Feb 20 05:54:06 2018
From: Jin.Li at ga.gov.au (Li Jin)
Date: Tue, 20 Feb 2018 04:54:06 +0000
Subject: [R-sig-Geo] 
 [DKIM] Re: Interpolating snowfall values on a Digital
 Elevation Model [SEC=UNCLASSIFIED]
Message-ID: <e6640b3285e944da926fe80077c47168@win-exch-prod01.prod.lan>

The effects of spatial reference systems on interpolations and accuracy are minimal, and lat and long can be used. Please see the following studies for details.

Jiang, W., Li, J., 2013. Are Spatial Modelling Methods Sensitive to Spatial Reference Systems for Predicting Marine Environmental Variables, 20th International Congress on Modelling and Simulation: Adelaide, Australia, pp. 387-393.
Jiang, W., Li, J., 2014. The effects of spatial reference systems on the predictive accuracy of spatial interpolation methods. Record 2014/01. Geoscience Australia: Canberra, pp 33. http://dx.doi.org/10.11636/Record.2014.001.
Turner, A.J., Li, J., Jiang, W., 2017. Effects of Spatial Reference Systems on the Accuracy of Spatial Predictive Modelling along a Latitudinal Gradient, 22nd International Congress on Modelling and Simulation: Hobart, Tasmania, Australia, pp. 106-112.


-----Original Message-----
From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Dominik Schneider
Sent: Wednesday, 14 February 2018 3:21 AM
To: Stefano Sofia
Cc: r-sig-geo at r-project.org
Subject: [DKIM] Re: [R-sig-Geo] Interpolating snowfall values on a Digital Elevation Model

You can't use a lat/long coordinate system when kriging because the concept of distance is ambiguous. Convert all your data a UTM grid like you had in your first post and it should work.

Another note, It looks like you are working at 0.01 deg which is on the order of 1km resolution so you may find  other covariates such as aspect, slope, and wind sheltering/exposure, terrain roughness for estimating snow on the ground useful. see some of the earliest papers by Carroll, Cressie, and Elder.

Carroll, S. S., and N. Cressie (1996), A comparison of geostatistical methodologies used to estimate snow water equivalent, *JAWRA Journal of the American Water Resources Association*, *32*(2), 267?278, doi:10.1111/j.1752-1688.1996.tb03450.x.

Carroll, S. S., and N. Cressie (1997), Spatial modeling of snow water equivalent using covariances estimated from spatial and geomorphic attributes, *Journal of Hydrology*, *190*(1-2), 42?59.

Balk, B., and K. Elder (2000), Combining binary decision tree and geostatistical methods to estimate snow distribution in a mountain watershed, *Water Resources Research*, *36*(1), 13?26, doi:10.1029/1999WR900251.

Erxleben, J., K. Elder, and R. Davis (2002), Comparison of spatial interpolation methods for estimating snow distribution in the Colorado Rocky Mountains, *Hydrological Processes*, *16*(18), 3627?3649, doi:10.1002/hyp.1239.

Erickson, T. A., M. W. Williams, and A. Winstral (2005), Persistence of topographic controls on the spatial distribution of snow in rugged mountain terrain, Colorado, United States, *Water Resour. Res.*, *41*(4), W04014, doi:10.1029/2003WR002973.


On Tue, Feb 13, 2018 at 3:45 AM, Stefano Sofia < stefano.sofia at regione.marche.it> wrote:

> Dear Daniel and list users,
> I tried to follow the instructions but I encountered two kinds of errors.
> This is a reproducibile code:
>
> ------------------------------------------------------------
> ---------------------------------------------------
> library(automap)
> library(ggplot2)
> library(gstat)
> library(raster)
> library(rasterVis)
> library(rgdal)
> library(maptools)
>
> ## LOADING DEM
> ita_DEM <- getData('alt', country='ITA', mask=TRUE)
> crs(ita_DEM) <- "+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> +ellps=WGS84 +towgs84=0,0,0"
> #ita_DEM <- as(ita_DEM, "SpatialGridDataFrame")
> str(ita_DEM)
>
> ## LOADING RAINFALL DATA
> rain_data <- data.frame(Cumulata=c(11.8, 9.0, 8.0, 36.6, 9.4), 
> Long_Cent=c(12.61874, 12.78690, 12.96756, 13.15599, 13.28157), 
> Lat_Cent=c(43.79447, 43.85185, 43.76267, 43.03470, 43.08003), 
> Altitude=c(112.20, 42.93, 36.14, 747, 465))
>
> stations <- data.frame(rain_data$Long_Cent, rain_data$Lat_Cent) 
> rain_data <- SpatialPointsDataFrame(stations, rain_data,
> proj4string=CRS("+init=epsg:4326"))
> stations <- SpatialPoints(stations, 
> proj4string=CRS("+init=epsg:4326"))
>
> ## EXTRACT THE ELEVATION VALUES TO MY POINTS 
> rain_data$ExtractedElevationValues <- extract(x=ita_DEM, y=stations)
>
> ## CREATE GRID FOR KRIGING OUTPUT
> minx <-  rain_data at bbox[1,1]
> maxx <- rain_data at bbox[1,2]
> miny <- rain_data at bbox[2,1]
> maxy <- rain_data at bbox[2,2]
> pixel <- 0.01
> grd <- expand.grid(x=seq(minx, maxx, by=pixel), y=seq(miny, maxy,
> by=pixel))
> coordinates(grd) <- ~x+y
> gridded(grd) <- TRUE
> proj4string(grd) <- CRS("+init=epsg:4326")
>
> ## KRIGING: autoKrige(YourMeasurements ~ YourExtractedElevationValues, 
> YourMeasurementLocations, TargetGrid) OK_snow <- autoKrige(Cumulata ~ 
> rain_data$ExtractedElevationValues,
> rain_data, grd)
> ------------------------------------------------------------
> -------------------------------------------------------------------
>
> The error I get is:
> Error in autoKrige(Cumulata ~ rain_data$ExtractedElevationValues,
> rain_data,  :
>   Either input_data or new_data is in LongLat, please reproject.
>    input_data:  +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> +ellps=WGS84 +towgs84=0,0,0
>    new_data:    +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> +ellps=WGS84 +towgs84=0,0,0
>
> but I did pay attention to have the same reference system in 
> rain_data, drg and the Digital Elevation Model.
>
> Moreover, if I impose the class of the DEM to SpatialGridDataFrame 
> when I extraxt the elevation points from the DEM I get the following error:
> Error in (function (classes, fdef, mtable)  :
>   unable to find an inherited method for function ?extract? for 
> signature ?"SpatialGridDataFrame", "SpatialPoints"?
> Calls: extract -> <Anonymous>
>
>
> Would you please somebody help to show me where is my mistake?
>
> Thank you for all your attention
> Stefano
>
>          (oo)
> --oOO--( )--OOo----------------
> Stefano Sofia PhD
> Area Meteorologica e  Area nivologica - Centro Funzionale Servizio 
> Protezione Civile - Regione Marche Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------
> ________________________________________
> Da: R-sig-Geo [r-sig-geo-bounces at r-project.org] per conto di Daniel 
> Knitter [knitter at geographie.uni-kiel.de]
> Inviato: luned? 12 febbraio 2018 9.16
> A: r-sig-geo at r-project.org
> Oggetto: Re: [R-sig-Geo]  Interpolating snowfall values on a Digital 
> Elevation Model
>
> ...sorry, I missed one step: you need to extract the elevation values 
> to your points via extract function from the raster package:
>
> YourPoints$YourExtractedElevationValues <- extract(x = DEM, y =
> YourPoints)
>
> autoKrige(YourMeasurements ~ YourExtractedElevationValues, 
> YourMeasurementLocations, TargetGrid)
>
>
> Sorry for spamming.
>
> Best,
> Daniel
>
> On Mon, 12 Feb 2018 08:03:41 +0000
> Stefano Sofia <stefano.sofia at regione.marche.it> wrote:
>
> > Dear list users,
> > I have to produce rainfall maps. I know how to create a 
> > (bi-dimensional)
> grid and interpolate rainfall values (from automatic rain gauges) on 
> that grid using Kriging:
> >
> > myinterpolation <- autoKrige(myrainfall_cumulate ~ 1, rain_data_UTM,
> mygrid)
> >
> > In reality I am dealing with snowfall values on mountain regions, 
> > and in
> this case altitude is an important factor, the use of a Digital 
> Elevation Model might make the difference.
> > Looking in the web I found some important material about accessing
> elevation data in R with the "elevatr" package (by J.W.Hollister), I 
> am reading it.
> > My concern would then be to interpolate snowfall values on a Digital
> Elevation Model. Did somebody already use R for these kinds of 
> calculations? Could somebody share with me some useful hints?
> >
> > Thank you for your attention
> > Stefano Sofia
> >
> >
> >          (oo)
> > --oOO--( )--OOo----------------
> > Stefano Sofia PhD
> > Area Meteorologica e  Area nivologica - Centro Funzionale Servizio 
> > Protezione Civile - Regione Marche Via del Colle Ameno 5
> > 60126 Torrette di Ancona, Ancona
> > Uff: 071 806 7743
> > E-mail: stefano.sofia at regione.marche.it
> > ---Oo---------oO----------------
> >
> > ________________________________
> >
> > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? 
> > contenere
> informazioni confidenziali, pertanto ? destinato solo a persone 
> autorizzate alla ricezione. I messaggi di posta elettronica per i 
> client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare, 
> inoltrare o archiviare questo messaggio. Se si ? ricevuto questo 
> messaggio per errore, inoltrarlo al mittente ed eliminarlo 
> completamente dal sistema del proprio computer. Ai sensi dell?art. 6 
> della DGR n. 1394/2008 si segnala che, in caso di necessit? ed 
> urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> > IMPORTANT NOTICE: This e-mail message is intended to be received 
> > only by
> persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information 
> that is confidential and legally privileged. Please do not read, copy, 
> forward, or store this message unless you are an intended recipient of 
> it. If you have received this message in error, please forward it to 
> the sender and delete it completely from your computer system.
> >
> > --
> > This message was scanned by Libra ESVA and is believed to be clean.
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%
> 2Fmailman%2Flistinfo%2Fr-sig-geo&e=52342f8a&h=f7d4a649&f=y&p=y
>
>
> --
>
> Dr. Daniel Knitter
> CRC1266 -- Scales of Transformation
> Project A2 "Integrative Modeling of Socio-Environmental Dynamics"
>
> Christian-Albrechts-Universit?t zu Kiel Department of Geography 
> Physical Geography -- Landscape Ecology and Geoinformation 
> Ludewig-Meyn-Str. 14, room 109 D - 24118 Kiel, Germany
>
> Phone: +49 431 880 2941
> Email: knitter at geographie.uni-kiel.de
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere 
> informazioni confidenziali, pertanto ? destinato solo a persone 
> autorizzate alla ricezione. I messaggi di posta elettronica per i 
> client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare, 
> inoltrare o archiviare questo messaggio. Se si ? ricevuto questo 
> messaggio per errore, inoltrarlo al mittente ed eliminarlo 
> completamente dal sistema del proprio computer. Ai sensi dell?art. 6 
> della DGR n. 1394/2008 si segnala che, in caso di necessit? ed 
> urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only 
> by persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information 
> that is confidential and legally privileged. Please do not read, copy, 
> forward, or store this message unless you are an intended recipient of 
> it. If you have received this message in error, please forward it to 
> the sender and delete it completely from your computer system.
>
> --
> This message was scanned by Libra ESVA and is believed to be clean.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Geoscience Australia Disclaimer: This e-mail (and files transmitted with it) is intended only for the person or entity to which it is addressed. If you are not the intended recipient, then you have received this e-mail by mistake and any use, dissemination, forwarding, printing or copying of this e-mail and its file attachments is prohibited. The security of emails transmitted cannot be guaranteed; by forwarding or replying to this email, you acknowledge and accept these risks.
-------------------------------------------------------------------------------------------------------------------------


From b.rowlingson at lancaster.ac.uk  Tue Feb 20 11:26:05 2018
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 20 Feb 2018 10:26:05 +0000
Subject: [R-sig-Geo] WPS client implementation in R
Message-ID: <CANVKczNT8mbbNfqh62CMNYTYng9iAQ20U_Wq8O6DoJ3qrpDfEw@mail.gmail.com>

I'm wondering what's the state of WPS (Web Processing Service) client
implementations in R? All I can find are the abstract of a 2008 UseR! talk:

https://www.r-project.org/conferences/useR-2008/abstracts/Henneboehl+Pebesma.pdf

and what looks like code designed to call a custom WPS server in the GSIF
package:

https://github.com/cran/GSIF/blob/master/R/WPSworldgrids.R

for a server that doesn't seem to work at the moment (wps.worldgrids.org).

Any advance on those?

Barry

	[[alternative HTML version deleted]]


From bedilue at gmail.com  Tue Feb 20 12:26:25 2018
From: bedilue at gmail.com (Bedilu Ejigu)
Date: Tue, 20 Feb 2018 14:26:25 +0300
Subject: [R-sig-Geo] How to fit Spatial logistic regression models to DHS
 data
Message-ID: <CAOm+BKcpi9r4qPTkSd1b+dgzAdLhZ4qXAdARTvQfphLf0roPWQ@mail.gmail.com>

I am analyzing geospatial data come from malaria intervention survey,
to compare standard multilevel models with spatial models.   Some of
the variables in my dataset are the following:



1.      malaria-malaria test result(1-presence, 0-absence) which is
our outcome variable

2.      LATNUM-coordinates of the survey cluster

3.      LONGNUM- coordinates of the survey cluster

4.      hv024-region (categorical variable)

5.      hv025-residence (urban/rural)

6.      hv227 -net use (yes/no)

7.      hv270 -wealth index(poorest, poorer, middle, richer, richest)

8.      hc1 ? age in days

9.      hc27- sex (male/female)

10.    hc68-educational level (no education, primary, secondary)

11.    anebin- Anemia level(1-anemic,0-nonanemic)





 What I want to fit is a spatial logistic regression model by using
the aforementioned variables using any of the packages in R which can
handle the task (i.e. prevMap, geoRglm).  Can anyone help me on how to
fit such a spatial logistic regression model? If possible, and someone
did similar tasks before, could you share me your R code?



 Sample dataset, which shows the structure of my dataset:



hv024

hv025

hv227

hv270

hc1

hc27

hc68

LATNUM

LONGNUM

anebin

malaria

western

rural

yes

middle

18

female

middle/jss/jhs

5.076585

-2.88716

0

0

western

rural

yes

poorer

42

female

middle/jss/jhs

5.076585

-2.88716

0

0

western

rural

yes

poorer

15

male

middle/jss/jhs

5.076585

-2.88716

1

0

western

rural

yes

poorer

30

male

middle/jss/jhs

5.076585

-2.88716

1

0

western

rural

yes

middle

39

male

primary

5.076585

-2.88716

0

0

western

rural

yes

middle

19

male

primary

5.076585

-2.88716

1

0

western

rural

no

poorer

28

male

no education

5.076585

-2.88716

1

0

western

rural

no

poorer

8

male

primary

5.076585

-2.88716

1

0

western

rural

yes

middle

32

male

no education

5.076585

-2.88716

1

0

western

rural

yes

middle

59

male

middle/jss/jhs

5.076585

-2.88716

0

0

western

rural

yes

middle

40

male

NA

5.076585

-2.88716

1

0

western

rural

yes

poorer

36

male

middle/jss/jhs

5.076585

-2.88716

0

0

western

rural

yes

poorer

19

male

no education

5.076585

-2.88716

1

0

western

rural

yes

poorer

19

female

NA

5.076585

-2.88716

1

0

western

urban

yes

richer

9

female

middle/jss/jhs

5.286215

-2.76342

0

0

western

urban

no

richest

48

female

primary

5.286215

-2.76342

0

0





With best regards,



 Bedilu


*_______________________________________________*

	[[alternative HTML version deleted]]


From ajdamico at gmail.com  Tue Feb 20 12:30:33 2018
From: ajdamico at gmail.com (Anthony Damico)
Date: Tue, 20 Feb 2018 06:30:33 -0500
Subject: [R-sig-Geo] 
 How to fit Spatial logistic regression models to DHS data
In-Reply-To: <CAOm+BKcpi9r4qPTkSd1b+dgzAdLhZ4qXAdARTvQfphLf0roPWQ@mail.gmail.com>
References: <CAOm+BKcpi9r4qPTkSd1b+dgzAdLhZ4qXAdARTvQfphLf0roPWQ@mail.gmail.com>
Message-ID: <CAOwvMDyrAbZ5YeFVqk6OYxAFYQuroSs7N4nfWLgew2f5NPx2Lg@mail.gmail.com>

hi, https://github.com/davidbrae/swmap  might help some but probably not
everything you need

On Feb 20, 2018 11:26 AM, "Bedilu Ejigu" <bedilue at gmail.com> wrote:

> I am analyzing geospatial data come from malaria intervention survey,
> to compare standard multilevel models with spatial models.   Some of
> the variables in my dataset are the following:
>
>
>
> 1.      malaria-malaria test result(1-presence, 0-absence) which is
> our outcome variable
>
> 2.      LATNUM-coordinates of the survey cluster
>
> 3.      LONGNUM- coordinates of the survey cluster
>
> 4.      hv024-region (categorical variable)
>
> 5.      hv025-residence (urban/rural)
>
> 6.      hv227 -net use (yes/no)
>
> 7.      hv270 -wealth index(poorest, poorer, middle, richer, richest)
>
> 8.      hc1 ? age in days
>
> 9.      hc27- sex (male/female)
>
> 10.    hc68-educational level (no education, primary, secondary)
>
> 11.    anebin- Anemia level(1-anemic,0-nonanemic)
>
>
>
>
>
>  What I want to fit is a spatial logistic regression model by using
> the aforementioned variables using any of the packages in R which can
> handle the task (i.e. prevMap, geoRglm).  Can anyone help me on how to
> fit such a spatial logistic regression model? If possible, and someone
> did similar tasks before, could you share me your R code?
>
>
>
>  Sample dataset, which shows the structure of my dataset:
>
>
>
> hv024
>
> hv025
>
> hv227
>
> hv270
>
> hc1
>
> hc27
>
> hc68
>
> LATNUM
>
> LONGNUM
>
> anebin
>
> malaria
>
> western
>
> rural
>
> yes
>
> middle
>
> 18
>
> female
>
> middle/jss/jhs
>
> 5.076585
>
> -2.88716
>
> 0
>
> 0
>
> western
>
> rural
>
> yes
>
> poorer
>
> 42
>
> female
>
> middle/jss/jhs
>
> 5.076585
>
> -2.88716
>
> 0
>
> 0
>
> western
>
> rural
>
> yes
>
> poorer
>
> 15
>
> male
>
> middle/jss/jhs
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> rural
>
> yes
>
> poorer
>
> 30
>
> male
>
> middle/jss/jhs
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> rural
>
> yes
>
> middle
>
> 39
>
> male
>
> primary
>
> 5.076585
>
> -2.88716
>
> 0
>
> 0
>
> western
>
> rural
>
> yes
>
> middle
>
> 19
>
> male
>
> primary
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> rural
>
> no
>
> poorer
>
> 28
>
> male
>
> no education
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> rural
>
> no
>
> poorer
>
> 8
>
> male
>
> primary
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> rural
>
> yes
>
> middle
>
> 32
>
> male
>
> no education
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> rural
>
> yes
>
> middle
>
> 59
>
> male
>
> middle/jss/jhs
>
> 5.076585
>
> -2.88716
>
> 0
>
> 0
>
> western
>
> rural
>
> yes
>
> middle
>
> 40
>
> male
>
> NA
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> rural
>
> yes
>
> poorer
>
> 36
>
> male
>
> middle/jss/jhs
>
> 5.076585
>
> -2.88716
>
> 0
>
> 0
>
> western
>
> rural
>
> yes
>
> poorer
>
> 19
>
> male
>
> no education
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> rural
>
> yes
>
> poorer
>
> 19
>
> female
>
> NA
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> urban
>
> yes
>
> richer
>
> 9
>
> female
>
> middle/jss/jhs
>
> 5.286215
>
> -2.76342
>
> 0
>
> 0
>
> western
>
> urban
>
> no
>
> richest
>
> 48
>
> female
>
> primary
>
> 5.286215
>
> -2.76342
>
> 0
>
> 0
>
>
>
>
>
> With best regards,
>
>
>
>  Bedilu
>
>
> *_______________________________________________*
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From thierry.onkelinx at inbo.be  Tue Feb 20 13:09:36 2018
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Tue, 20 Feb 2018 13:09:36 +0100
Subject: [R-sig-Geo] 
 How to fit Spatial logistic regression models to DHS data
In-Reply-To: <CAOm+BKcpi9r4qPTkSd1b+dgzAdLhZ4qXAdARTvQfphLf0roPWQ@mail.gmail.com>
References: <CAOm+BKcpi9r4qPTkSd1b+dgzAdLhZ4qXAdARTvQfphLf0roPWQ@mail.gmail.com>
Message-ID: <CAJuCY5yEH6RckF+Afn2mmJB=C5zd_hcV2H6ZOhU+wcDGuRdcwA@mail.gmail.com>

Have a look at Zuur et al (2017) Beginner's Guide to Spatial, Temporal
and Spatial-Temporal Ecological Data Analysis with R-INLA

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
AND FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no
more than asking him to perform a post-mortem examination: he may be
able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does
not ensure that a reasonable answer can be extracted from a given body
of data. ~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////




2018-02-20 12:26 GMT+01:00 Bedilu Ejigu <bedilue at gmail.com>:
> I am analyzing geospatial data come from malaria intervention survey,
> to compare standard multilevel models with spatial models.   Some of
> the variables in my dataset are the following:
>
>
>
> 1.      malaria-malaria test result(1-presence, 0-absence) which is
> our outcome variable
>
> 2.      LATNUM-coordinates of the survey cluster
>
> 3.      LONGNUM- coordinates of the survey cluster
>
> 4.      hv024-region (categorical variable)
>
> 5.      hv025-residence (urban/rural)
>
> 6.      hv227 -net use (yes/no)
>
> 7.      hv270 -wealth index(poorest, poorer, middle, richer, richest)
>
> 8.      hc1 ? age in days
>
> 9.      hc27- sex (male/female)
>
> 10.    hc68-educational level (no education, primary, secondary)
>
> 11.    anebin- Anemia level(1-anemic,0-nonanemic)
>
>
>
>
>
>  What I want to fit is a spatial logistic regression model by using
> the aforementioned variables using any of the packages in R which can
> handle the task (i.e. prevMap, geoRglm).  Can anyone help me on how to
> fit such a spatial logistic regression model? If possible, and someone
> did similar tasks before, could you share me your R code?
>
>
>
>  Sample dataset, which shows the structure of my dataset:
>
>
>
> hv024
>
> hv025
>
> hv227
>
> hv270
>
> hc1
>
> hc27
>
> hc68
>
> LATNUM
>
> LONGNUM
>
> anebin
>
> malaria
>
> western
>
> rural
>
> yes
>
> middle
>
> 18
>
> female
>
> middle/jss/jhs
>
> 5.076585
>
> -2.88716
>
> 0
>
> 0
>
> western
>
> rural
>
> yes
>
> poorer
>
> 42
>
> female
>
> middle/jss/jhs
>
> 5.076585
>
> -2.88716
>
> 0
>
> 0
>
> western
>
> rural
>
> yes
>
> poorer
>
> 15
>
> male
>
> middle/jss/jhs
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> rural
>
> yes
>
> poorer
>
> 30
>
> male
>
> middle/jss/jhs
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> rural
>
> yes
>
> middle
>
> 39
>
> male
>
> primary
>
> 5.076585
>
> -2.88716
>
> 0
>
> 0
>
> western
>
> rural
>
> yes
>
> middle
>
> 19
>
> male
>
> primary
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> rural
>
> no
>
> poorer
>
> 28
>
> male
>
> no education
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> rural
>
> no
>
> poorer
>
> 8
>
> male
>
> primary
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> rural
>
> yes
>
> middle
>
> 32
>
> male
>
> no education
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> rural
>
> yes
>
> middle
>
> 59
>
> male
>
> middle/jss/jhs
>
> 5.076585
>
> -2.88716
>
> 0
>
> 0
>
> western
>
> rural
>
> yes
>
> middle
>
> 40
>
> male
>
> NA
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> rural
>
> yes
>
> poorer
>
> 36
>
> male
>
> middle/jss/jhs
>
> 5.076585
>
> -2.88716
>
> 0
>
> 0
>
> western
>
> rural
>
> yes
>
> poorer
>
> 19
>
> male
>
> no education
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> rural
>
> yes
>
> poorer
>
> 19
>
> female
>
> NA
>
> 5.076585
>
> -2.88716
>
> 1
>
> 0
>
> western
>
> urban
>
> yes
>
> richer
>
> 9
>
> female
>
> middle/jss/jhs
>
> 5.286215
>
> -2.76342
>
> 0
>
> 0
>
> western
>
> urban
>
> no
>
> richest
>
> 48
>
> female
>
> primary
>
> 5.286215
>
> -2.76342
>
> 0
>
> 0
>
>
>
>
>
> With best regards,
>
>
>
>  Bedilu
>
>
> *_______________________________________________*
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From b.graeler at 52north.org  Tue Feb 20 16:13:36 2018
From: b.graeler at 52north.org (=?UTF-8?Q?Dr._Benedikt_Gr=c3=a4ler?=)
Date: Tue, 20 Feb 2018 16:13:36 +0100
Subject: [R-sig-Geo] WPS client implementation in R
In-Reply-To: <CANVKczNT8mbbNfqh62CMNYTYng9iAQ20U_Wq8O6DoJ3qrpDfEw@mail.gmail.com>
References: <CANVKczNT8mbbNfqh62CMNYTYng9iAQ20U_Wq8O6DoJ3qrpDfEw@mail.gmail.com>
Message-ID: <d1fb59e5-9abd-a968-bbb4-67bf828d4bcd@52north.org>

Dear Barry,

I am not quite sure what you are targetting at:
i) a solution to expose (geo) R functionality as a WPS on the web or
ii) a R package to ease the access to an exposed WPS.

Regarding i), there is WPS4R (as a follow-up on the UseR! abstract; 
available as part of the 52?North WPS bundle [1]) where annotated R 
scripts can automatically be wrapped in a WPS process and exposed on the 
web (a tutorial can be found here [2]).

In terms of ii), I am not aware of any existing solution, but would be 
interested to contribute; possibly also as a GSoC project (I'll sketch 
the idea on the 52N's GSoC 2018 project page [3]).

Cheers,

  Ben

[1] https://wiki.52north.org/Geostatistics/WPS4R
[2] 
https://wiki.52north.org/Geoprocessing/GeoprocessingTutorials#WPS4R_tutorials
[3] https://wiki.52north.org/Projects/GSoC2018ProjectIdeas


On 20/02/2018 11:26, Barry Rowlingson wrote:
> I'm wondering what's the state of WPS (Web Processing Service) client
> implementations in R? All I can find are the abstract of a 2008 UseR! talk:
> 
> https://www.r-project.org/conferences/useR-2008/abstracts/Henneboehl+Pebesma.pdf
> 
> and what looks like code designed to call a custom WPS server in the GSIF
> package:
> 
> https://github.com/cran/GSIF/blob/master/R/WPSworldgrids.R
> 
> for a server that doesn't seem to work at the moment (wps.worldgrids.org).
> 
> Any advance on those?
> 
> Barry
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Dr. Benedikt Gr?ler
52?North Initiative for Geospatial Open Source Software GmbH
Martin-Luther-King-Weg 24
48155 Muenster, Germany

E-Mail: b.graeler at 52north.org
Fon: +49-(0)-251/396371-39
Fax: +49-(0)-251/396371-11

http://52north.org/
Twitter: @FiveTwoN

General Managers: Dr. Albert Remke, Dr. Andreas Wytzisk
Local Court Muenster HRB 10849

-------------- next part --------------
A non-text attachment was scrubbed...
Name: b_graeler.vcf
Type: text/x-vcard
Size: 445 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20180220/ad6e5b34/attachment.vcf>

From b.rowlingson at lancaster.ac.uk  Tue Feb 20 16:31:22 2018
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 20 Feb 2018 15:31:22 +0000
Subject: [R-sig-Geo] WPS client implementation in R
In-Reply-To: <d1fb59e5-9abd-a968-bbb4-67bf828d4bcd@52north.org>
References: <CANVKczNT8mbbNfqh62CMNYTYng9iAQ20U_Wq8O6DoJ3qrpDfEw@mail.gmail.com>
 <d1fb59e5-9abd-a968-bbb4-67bf828d4bcd@52north.org>
Message-ID: <CANVKczMmvA8QEXOifMwDthyr7ZBR4=k_qpWwpcYE8Z2dUiB_GQ@mail.gmail.com>

On Tue, Feb 20, 2018 at 3:13 PM, Dr. Benedikt Gr?ler <b.graeler at 52north.org>
wrote:

> Dear Barry,
>
> I am not quite sure what you are targetting at:
> i) a solution to expose (geo) R functionality as a WPS on the web or
> ii) a R package to ease the access to an exposed WPS.
>
> Regarding i), there is WPS4R (as a follow-up on the UseR! abstract;
> available as part of the 52?North WPS bundle [1]) where annotated R scripts
> can automatically be wrapped in a WPS process and exposed on the web (a
> tutorial can be found here [2]).
>
> In terms of ii), I am not aware of any existing solution, but would be
> interested to contribute; possibly also as a GSoC project (I'll sketch the
> idea on the 52N's GSoC 2018 project page [3]).
>
>

I'm currently more interested in a WPS client for R, to call WPS services.

I think if I wanted to implement a WPS service in R I'd probably hook into
pywps, but that's just my python bias against a java solution! I admit the
52N solution looks pretty neat (annotate an R script and there you have it).

thanks

Barry

	[[alternative HTML version deleted]]


From javi.martinez.lopez at gmail.com  Tue Feb 20 16:51:18 2018
From: javi.martinez.lopez at gmail.com (=?UTF-8?B?SmF2aWVyIE1hcnTDrW5lei1Mw7NwZXo=?=)
Date: Tue, 20 Feb 2018 16:51:18 +0100
Subject: [R-sig-Geo] WPS client implementation in R
In-Reply-To: <CANVKczMmvA8QEXOifMwDthyr7ZBR4=k_qpWwpcYE8Z2dUiB_GQ@mail.gmail.com>
References: <CANVKczNT8mbbNfqh62CMNYTYng9iAQ20U_Wq8O6DoJ3qrpDfEw@mail.gmail.com>
 <d1fb59e5-9abd-a968-bbb4-67bf828d4bcd@52north.org>
 <CANVKczMmvA8QEXOifMwDthyr7ZBR4=k_qpWwpcYE8Z2dUiB_GQ@mail.gmail.com>
Message-ID: <CAKgwV9m6c7oyXiD+NK_i+vjrUeJ1AuUL0sAXV72DKFe6A7--VQ@mail.gmail.com>

You can try OpenCPU (https://www.opencpu.org/). It works great!

Best,

Javier

On Tue, Feb 20, 2018 at 4:31 PM, Barry Rowlingson <
b.rowlingson at lancaster.ac.uk> wrote:

> On Tue, Feb 20, 2018 at 3:13 PM, Dr. Benedikt Gr?ler <
> b.graeler at 52north.org>
> wrote:
>
> > Dear Barry,
> >
> > I am not quite sure what you are targetting at:
> > i) a solution to expose (geo) R functionality as a WPS on the web or
> > ii) a R package to ease the access to an exposed WPS.
> >
> > Regarding i), there is WPS4R (as a follow-up on the UseR! abstract;
> > available as part of the 52?North WPS bundle [1]) where annotated R
> scripts
> > can automatically be wrapped in a WPS process and exposed on the web (a
> > tutorial can be found here [2]).
> >
> > In terms of ii), I am not aware of any existing solution, but would be
> > interested to contribute; possibly also as a GSoC project (I'll sketch
> the
> > idea on the 52N's GSoC 2018 project page [3]).
> >
> >
>
> I'm currently more interested in a WPS client for R, to call WPS services.
>
> I think if I wanted to implement a WPS service in R I'd probably hook into
> pywps, but that's just my python bias against a java solution! I admit the
> 52N solution looks pretty neat (annotate an R script and there you have
> it).
>
> thanks
>
> Barry
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From b.rowlingson at lancaster.ac.uk  Tue Feb 20 17:30:58 2018
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 20 Feb 2018 16:30:58 +0000
Subject: [R-sig-Geo] WPS client implementation in R
In-Reply-To: <f8545ecba8ae4178a9ff51bb1232e2be@AM4PR0401MB1729.eurprd04.prod.outlook.com>
References: <CANVKczNT8mbbNfqh62CMNYTYng9iAQ20U_Wq8O6DoJ3qrpDfEw@mail.gmail.com>
 <d1fb59e5-9abd-a968-bbb4-67bf828d4bcd@52north.org>
 <CANVKczMmvA8QEXOifMwDthyr7ZBR4=k_qpWwpcYE8Z2dUiB_GQ@mail.gmail.com>
 <f8545ecba8ae4178a9ff51bb1232e2be@AM4PR0401MB1729.eurprd04.prod.outlook.com>
Message-ID: <CANVKczOxhkHTWL7=XYWXUmj+8t1irW36ukCZ8Z1F2Rzj1DzEeQ@mail.gmail.com>

On Tue, Feb 20, 2018 at 3:51 PM, Javier Mart?nez-L?pez <
javi.martinez.lopez at gmail.com> wrote:

> You can try OpenCPU (https://www.opencpu.org/). It works great!
>

I don't see anything WPS there. The advantage of implementing a WPS is that
it is then available to anything supporting the WPS standard, so you could
access your analysis from QGIS, for example.

 If you implemented an analysis via some generic REST API you'd still have
to write some client code to interpret the outputs.

Barry

	[[alternative HTML version deleted]]


From dominik.schneider at colorado.edu  Tue Feb 20 19:02:23 2018
From: dominik.schneider at colorado.edu (Dominik Schneider)
Date: Tue, 20 Feb 2018 10:02:23 -0800
Subject: [R-sig-Geo] 
 [DKIM] Re: Interpolating snowfall values on a Digital
 Elevation Model [SEC=UNCLASSIFIED]
In-Reply-To: <e6640b3285e944da926fe80077c47168@win-exch-prod01.prod.lan>
References: <e6640b3285e944da926fe80077c47168@win-exch-prod01.prod.lan>
Message-ID: <CAF1jk_nfe3T2ek6OjBR-XXL6jyT6k3k79skvM9tHpZZ6dPf2dg@mail.gmail.com>

>
> The effects of spatial reference systems on interpolations and accuracy
> are minimal, and lat and long can be used.

Fair enough, thanks for sending the references. But, as far as I know, the
kriging functions in R still don't accept lat/long.



On Mon, Feb 19, 2018 at 8:54 PM, Li Jin <Jin.Li at ga.gov.au> wrote:

> The effects of spatial reference systems on interpolations and accuracy
> are minimal, and lat and long can be used. Please see the following studies
> for details.
>
> Jiang, W., Li, J., 2013. Are Spatial Modelling Methods Sensitive to
> Spatial Reference Systems for Predicting Marine Environmental Variables,
> 20th International Congress on Modelling and Simulation: Adelaide,
> Australia, pp. 387-393.
> Jiang, W., Li, J., 2014. The effects of spatial reference systems on the
> predictive accuracy of spatial interpolation methods. Record 2014/01.
> Geoscience Australia: Canberra, pp 33. http://dx.doi.org/10.11636/
> Record.2014.001.
> Turner, A.J., Li, J., Jiang, W., 2017. Effects of Spatial Reference
> Systems on the Accuracy of Spatial Predictive Modelling along a Latitudinal
> Gradient, 22nd International Congress on Modelling and Simulation: Hobart,
> Tasmania, Australia, pp. 106-112.
>
>
> -----Original Message-----
> From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of
> Dominik Schneider
> Sent: Wednesday, 14 February 2018 3:21 AM
> To: Stefano Sofia
> Cc: r-sig-geo at r-project.org
> Subject: [DKIM] Re: [R-sig-Geo] Interpolating snowfall values on a Digital
> Elevation Model
>
> You can't use a lat/long coordinate system when kriging because the
> concept of distance is ambiguous. Convert all your data a UTM grid like you
> had in your first post and it should work.
>
> Another note, It looks like you are working at 0.01 deg which is on the
> order of 1km resolution so you may find  other covariates such as aspect,
> slope, and wind sheltering/exposure, terrain roughness for estimating snow
> on the ground useful. see some of the earliest papers by Carroll, Cressie,
> and Elder.
>
> Carroll, S. S., and N. Cressie (1996), A comparison of geostatistical
> methodologies used to estimate snow water equivalent, *JAWRA Journal of the
> American Water Resources Association*, *32*(2), 267?278,
> doi:10.1111/j.1752-1688.1996.tb03450.x.
>
> Carroll, S. S., and N. Cressie (1997), Spatial modeling of snow water
> equivalent using covariances estimated from spatial and geomorphic
> attributes, *Journal of Hydrology*, *190*(1-2), 42?59.
>
> Balk, B., and K. Elder (2000), Combining binary decision tree and
> geostatistical methods to estimate snow distribution in a mountain
> watershed, *Water Resources Research*, *36*(1), 13?26,
> doi:10.1029/1999WR900251.
>
> Erxleben, J., K. Elder, and R. Davis (2002), Comparison of spatial
> interpolation methods for estimating snow distribution in the Colorado
> Rocky Mountains, *Hydrological Processes*, *16*(18), 3627?3649,
> doi:10.1002/hyp.1239.
>
> Erickson, T. A., M. W. Williams, and A. Winstral (2005), Persistence of
> topographic controls on the spatial distribution of snow in rugged mountain
> terrain, Colorado, United States, *Water Resour. Res.*, *41*(4), W04014,
> doi:10.1029/2003WR002973.
>
>
> On Tue, Feb 13, 2018 at 3:45 AM, Stefano Sofia <
> stefano.sofia at regione.marche.it> wrote:
>
> > Dear Daniel and list users,
> > I tried to follow the instructions but I encountered two kinds of errors.
> > This is a reproducibile code:
> >
> > ------------------------------------------------------------
> > ---------------------------------------------------
> > library(automap)
> > library(ggplot2)
> > library(gstat)
> > library(raster)
> > library(rasterVis)
> > library(rgdal)
> > library(maptools)
> >
> > ## LOADING DEM
> > ita_DEM <- getData('alt', country='ITA', mask=TRUE)
> > crs(ita_DEM) <- "+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> > +ellps=WGS84 +towgs84=0,0,0"
> > #ita_DEM <- as(ita_DEM, "SpatialGridDataFrame")
> > str(ita_DEM)
> >
> > ## LOADING RAINFALL DATA
> > rain_data <- data.frame(Cumulata=c(11.8, 9.0, 8.0, 36.6, 9.4),
> > Long_Cent=c(12.61874, 12.78690, 12.96756, 13.15599, 13.28157),
> > Lat_Cent=c(43.79447, 43.85185, 43.76267, 43.03470, 43.08003),
> > Altitude=c(112.20, 42.93, 36.14, 747, 465))
> >
> > stations <- data.frame(rain_data$Long_Cent, rain_data$Lat_Cent)
> > rain_data <- SpatialPointsDataFrame(stations, rain_data,
> > proj4string=CRS("+init=epsg:4326"))
> > stations <- SpatialPoints(stations,
> > proj4string=CRS("+init=epsg:4326"))
> >
> > ## EXTRACT THE ELEVATION VALUES TO MY POINTS
> > rain_data$ExtractedElevationValues <- extract(x=ita_DEM, y=stations)
> >
> > ## CREATE GRID FOR KRIGING OUTPUT
> > minx <-  rain_data at bbox[1,1]
> > maxx <- rain_data at bbox[1,2]
> > miny <- rain_data at bbox[2,1]
> > maxy <- rain_data at bbox[2,2]
> > pixel <- 0.01
> > grd <- expand.grid(x=seq(minx, maxx, by=pixel), y=seq(miny, maxy,
> > by=pixel))
> > coordinates(grd) <- ~x+y
> > gridded(grd) <- TRUE
> > proj4string(grd) <- CRS("+init=epsg:4326")
> >
> > ## KRIGING: autoKrige(YourMeasurements ~ YourExtractedElevationValues,
> > YourMeasurementLocations, TargetGrid) OK_snow <- autoKrige(Cumulata ~
> > rain_data$ExtractedElevationValues,
> > rain_data, grd)
> > ------------------------------------------------------------
> > -------------------------------------------------------------------
> >
> > The error I get is:
> > Error in autoKrige(Cumulata ~ rain_data$ExtractedElevationValues,
> > rain_data,  :
> >   Either input_data or new_data is in LongLat, please reproject.
> >    input_data:  +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> > +ellps=WGS84 +towgs84=0,0,0
> >    new_data:    +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> > +ellps=WGS84 +towgs84=0,0,0
> >
> > but I did pay attention to have the same reference system in
> > rain_data, drg and the Digital Elevation Model.
> >
> > Moreover, if I impose the class of the DEM to SpatialGridDataFrame
> > when I extraxt the elevation points from the DEM I get the following
> error:
> > Error in (function (classes, fdef, mtable)  :
> >   unable to find an inherited method for function ?extract? for
> > signature ?"SpatialGridDataFrame", "SpatialPoints"?
> > Calls: extract -> <Anonymous>
> >
> >
> > Would you please somebody help to show me where is my mistake?
> >
> > Thank you for all your attention
> > Stefano
> >
> >          (oo)
> > --oOO--( )--OOo----------------
> > Stefano Sofia PhD
> > Area Meteorologica e  Area nivologica - Centro Funzionale Servizio
> > Protezione Civile - Regione Marche Via del Colle Ameno 5
> > 60126 Torrette di Ancona, Ancona
> > Uff: 071 806 7743
> > E-mail: stefano.sofia at regione.marche.it
> > ---Oo---------oO----------------
> > ________________________________________
> > Da: R-sig-Geo [r-sig-geo-bounces at r-project.org] per conto di Daniel
> > Knitter [knitter at geographie.uni-kiel.de]
> > Inviato: luned? 12 febbraio 2018 9.16
> > A: r-sig-geo at r-project.org
> > Oggetto: Re: [R-sig-Geo]  Interpolating snowfall values on a Digital
> > Elevation Model
> >
> > ...sorry, I missed one step: you need to extract the elevation values
> > to your points via extract function from the raster package:
> >
> > YourPoints$YourExtractedElevationValues <- extract(x = DEM, y =
> > YourPoints)
> >
> > autoKrige(YourMeasurements ~ YourExtractedElevationValues,
> > YourMeasurementLocations, TargetGrid)
> >
> >
> > Sorry for spamming.
> >
> > Best,
> > Daniel
> >
> > On Mon, 12 Feb 2018 08:03:41 +0000
> > Stefano Sofia <stefano.sofia at regione.marche.it> wrote:
> >
> > > Dear list users,
> > > I have to produce rainfall maps. I know how to create a
> > > (bi-dimensional)
> > grid and interpolate rainfall values (from automatic rain gauges) on
> > that grid using Kriging:
> > >
> > > myinterpolation <- autoKrige(myrainfall_cumulate ~ 1, rain_data_UTM,
> > mygrid)
> > >
> > > In reality I am dealing with snowfall values on mountain regions,
> > > and in
> > this case altitude is an important factor, the use of a Digital
> > Elevation Model might make the difference.
> > > Looking in the web I found some important material about accessing
> > elevation data in R with the "elevatr" package (by J.W.Hollister), I
> > am reading it.
> > > My concern would then be to interpolate snowfall values on a Digital
> > Elevation Model. Did somebody already use R for these kinds of
> > calculations? Could somebody share with me some useful hints?
> > >
> > > Thank you for your attention
> > > Stefano Sofia
> > >
> > >
> > >          (oo)
> > > --oOO--( )--OOo----------------
> > > Stefano Sofia PhD
> > > Area Meteorologica e  Area nivologica - Centro Funzionale Servizio
> > > Protezione Civile - Regione Marche Via del Colle Ameno 5
> > > 60126 Torrette di Ancona, Ancona
> > > Uff: 071 806 7743
> > > E-mail: stefano.sofia at regione.marche.it
> > > ---Oo---------oO----------------
> > >
> > > ________________________________
> > >
> > > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu?
> > > contenere
> > informazioni confidenziali, pertanto ? destinato solo a persone
> > autorizzate alla ricezione. I messaggi di posta elettronica per i
> > client di Regione Marche possono contenere informazioni confidenziali e
> con privilegi legali.
> > Se non si ? il destinatario specificato, non leggere, copiare,
> > inoltrare o archiviare questo messaggio. Se si ? ricevuto questo
> > messaggio per errore, inoltrarlo al mittente ed eliminarlo
> > completamente dal sistema del proprio computer. Ai sensi dell?art. 6
> > della DGR n. 1394/2008 si segnala che, in caso di necessit? ed
> > urgenza, la risposta al presente messaggio di posta elettronica pu?
> essere visionata da persone estranee al destinatario.
> > > IMPORTANT NOTICE: This e-mail message is intended to be received
> > > only by
> > persons entitled to receive the confidential information it may contain.
> > E-mail messages to clients of Regione Marche may contain information
> > that is confidential and legally privileged. Please do not read, copy,
> > forward, or store this message unless you are an intended recipient of
> > it. If you have received this message in error, please forward it to
> > the sender and delete it completely from your computer system.
> > >
> > > --
> > > This message was scanned by Libra ESVA and is believed to be clean.
> > >
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > _______________________________________________
> > > R-sig-Geo mailing list
> > > R-sig-Geo at r-project.org
> > > https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%
> > 2Fmailman%2Flistinfo%2Fr-sig-geo&e=52342f8a&h=f7d4a649&f=y&p=y
> >
> >
> > --
> >
> > Dr. Daniel Knitter
> > CRC1266 -- Scales of Transformation
> > Project A2 "Integrative Modeling of Socio-Environmental Dynamics"
> >
> > Christian-Albrechts-Universit?t zu Kiel Department of Geography
> > Physical Geography -- Landscape Ecology and Geoinformation
> > Ludewig-Meyn-Str. 14, room 109 D - 24118 Kiel, Germany
> >
> > Phone: +49 431 880 2941
> > Email: knitter at geographie.uni-kiel.de
> >
> > ________________________________
> >
> > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
> > informazioni confidenziali, pertanto ? destinato solo a persone
> > autorizzate alla ricezione. I messaggi di posta elettronica per i
> > client di Regione Marche possono contenere informazioni confidenziali e
> con privilegi legali.
> > Se non si ? il destinatario specificato, non leggere, copiare,
> > inoltrare o archiviare questo messaggio. Se si ? ricevuto questo
> > messaggio per errore, inoltrarlo al mittente ed eliminarlo
> > completamente dal sistema del proprio computer. Ai sensi dell?art. 6
> > della DGR n. 1394/2008 si segnala che, in caso di necessit? ed
> > urgenza, la risposta al presente messaggio di posta elettronica pu?
> essere visionata da persone estranee al destinatario.
> > IMPORTANT NOTICE: This e-mail message is intended to be received only
> > by persons entitled to receive the confidential information it may
> contain.
> > E-mail messages to clients of Regione Marche may contain information
> > that is confidential and legally privileged. Please do not read, copy,
> > forward, or store this message unless you are an intended recipient of
> > it. If you have received this message in error, please forward it to
> > the sender and delete it completely from your computer system.
> >
> > --
> > This message was scanned by Libra ESVA and is believed to be clean.
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> Geoscience Australia Disclaimer: This e-mail (and files transmitted with
> it) is intended only for the person or entity to which it is addressed. If
> you are not the intended recipient, then you have received this e-mail by
> mistake and any use, dissemination, forwarding, printing or copying of this
> e-mail and its file attachments is prohibited. The security of emails
> transmitted cannot be guaranteed; by forwarding or replying to this email,
> you acknowledge and accept these risks.
> ------------------------------------------------------------
> -------------------------------------------------------------
>
>

	[[alternative HTML version deleted]]


From Jin.Li at ga.gov.au  Tue Feb 20 23:08:39 2018
From: Jin.Li at ga.gov.au (Li Jin)
Date: Tue, 20 Feb 2018 22:08:39 +0000
Subject: [R-sig-Geo] 
 [DKIM] Re: Interpolating snowfall values on a Digital
 Elevation Model [SEC=UNCLASSIFIED]
In-Reply-To: <CAF1jk_nfe3T2ek6OjBR-XXL6jyT6k3k79skvM9tHpZZ6dPf2dg@mail.gmail.com>
References: <e6640b3285e944da926fe80077c47168@win-exch-prod01.prod.lan>
 <CAF1jk_nfe3T2ek6OjBR-XXL6jyT6k3k79skvM9tHpZZ6dPf2dg@mail.gmail.com>
Message-ID: <50623728d51147cfb35e6ad00f903d10@win-exch-prod01.prod.lan>

The statement ?the kriging functions in R still don't accept lat/long? is incorrect. Please check the gstat and spm packages for details. When your data is collected from one utm, it is a good idea to project the data using utm. If the data is from two or more utms, you need to use different projection systems. The references provided demonstrated that the commonly used WGS84 is as good as relevant projection systems.

From: Dominik Schneider [mailto:dominik.schneider at colorado.edu]
Sent: Wednesday, 21 February 2018 5:02 AM
To: Li Jin
Cc: Stefano Sofia; r-sig-geo at r-project.org
Subject: Re: [DKIM] Re: [R-sig-Geo] Interpolating snowfall values on a Digital Elevation Model [SEC=UNCLASSIFIED]

The effects of spatial reference systems on interpolations and accuracy are minimal, and lat and long can be used.
Fair enough, thanks for sending the references. But, as far as I know, the kriging functions in R still don't accept lat/long.



On Mon, Feb 19, 2018 at 8:54 PM, Li Jin <Jin.Li at ga.gov.au<mailto:Jin.Li at ga.gov.au>> wrote:
The effects of spatial reference systems on interpolations and accuracy are minimal, and lat and long can be used. Please see the following studies for details.

Jiang, W., Li, J., 2013. Are Spatial Modelling Methods Sensitive to Spatial Reference Systems for Predicting Marine Environmental Variables, 20th International Congress on Modelling and Simulation: Adelaide, Australia, pp. 387-393.
Jiang, W., Li, J., 2014. The effects of spatial reference systems on the predictive accuracy of spatial interpolation methods. Record 2014/01. Geoscience Australia: Canberra, pp 33. http://dx.doi.org/10.11636/Record.2014.001.
Turner, A.J., Li, J., Jiang, W., 2017. Effects of Spatial Reference Systems on the Accuracy of Spatial Predictive Modelling along a Latitudinal Gradient, 22nd International Congress on Modelling and Simulation: Hobart, Tasmania, Australia, pp. 106-112.


-----Original Message-----
From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org<mailto:r-sig-geo-bounces at r-project.org>] On Behalf Of Dominik Schneider
Sent: Wednesday, 14 February 2018 3:21 AM
To: Stefano Sofia
Cc: r-sig-geo at r-project.org<mailto:r-sig-geo at r-project.org>
Subject: [DKIM] Re: [R-sig-Geo] Interpolating snowfall values on a Digital Elevation Model

You can't use a lat/long coordinate system when kriging because the concept of distance is ambiguous. Convert all your data a UTM grid like you had in your first post and it should work.

Another note, It looks like you are working at 0.01 deg which is on the order of 1km resolution so you may find  other covariates such as aspect, slope, and wind sheltering/exposure, terrain roughness for estimating snow on the ground useful. see some of the earliest papers by Carroll, Cressie, and Elder.

Carroll, S. S., and N. Cressie (1996), A comparison of geostatistical methodologies used to estimate snow water equivalent, *JAWRA Journal of the American Water Resources Association*, *32*(2), 267?278, doi:10.1111/j.1752-1688.1996.tb03450.x.

Carroll, S. S., and N. Cressie (1997), Spatial modeling of snow water equivalent using covariances estimated from spatial and geomorphic attributes, *Journal of Hydrology*, *190*(1-2), 42?59.

Balk, B., and K. Elder (2000), Combining binary decision tree and geostatistical methods to estimate snow distribution in a mountain watershed, *Water Resources Research*, *36*(1), 13?26, doi:10.1029/1999WR900251.

Erxleben, J., K. Elder, and R. Davis (2002), Comparison of spatial interpolation methods for estimating snow distribution in the Colorado Rocky Mountains, *Hydrological Processes*, *16*(18), 3627?3649, doi:10.1002/hyp.1239.

Erickson, T. A., M. W. Williams, and A. Winstral (2005), Persistence of topographic controls on the spatial distribution of snow in rugged mountain terrain, Colorado, United States, *Water Resour. Res.*, *41*(4), W04014, doi:10.1029/2003WR002973.


On Tue, Feb 13, 2018 at 3:45 AM, Stefano Sofia < stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>> wrote:

> Dear Daniel and list users,
> I tried to follow the instructions but I encountered two kinds of errors.
> This is a reproducibile code:
>
> ------------------------------------------------------------
> ---------------------------------------------------
> library(automap)
> library(ggplot2)
> library(gstat)
> library(raster)
> library(rasterVis)
> library(rgdal)
> library(maptools)
>
> ## LOADING DEM
> ita_DEM <- getData('alt', country='ITA', mask=TRUE)
> crs(ita_DEM) <- "+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> +ellps=WGS84 +towgs84=0,0,0"
> #ita_DEM <- as(ita_DEM, "SpatialGridDataFrame")
> str(ita_DEM)
>
> ## LOADING RAINFALL DATA
> rain_data <- data.frame(Cumulata=c(11.8, 9.0, 8.0, 36.6, 9.4),
> Long_Cent=c(12.61874, 12.78690, 12.96756, 13.15599, 13.28157),
> Lat_Cent=c(43.79447, 43.85185, 43.76267, 43.03470, 43.08003),
> Altitude=c(112.20, 42.93, 36.14, 747, 465))
>
> stations <- data.frame(rain_data$Long_Cent, rain_data$Lat_Cent)
> rain_data <- SpatialPointsDataFrame(stations, rain_data,
> proj4string=CRS("+init=epsg:4326"))
> stations <- SpatialPoints(stations,
> proj4string=CRS("+init=epsg:4326"))
>
> ## EXTRACT THE ELEVATION VALUES TO MY POINTS
> rain_data$ExtractedElevationValues <- extract(x=ita_DEM, y=stations)
>
> ## CREATE GRID FOR KRIGING OUTPUT
> minx <-  rain_data at bbox[1,1]
> maxx <- rain_data at bbox[1,2]
> miny <- rain_data at bbox[2,1]
> maxy <- rain_data at bbox[2,2]
> pixel <- 0.01
> grd <- expand.grid(x=seq(minx, maxx, by=pixel), y=seq(miny, maxy,
> by=pixel))
> coordinates(grd) <- ~x+y
> gridded(grd) <- TRUE
> proj4string(grd) <- CRS("+init=epsg:4326")
>
> ## KRIGING: autoKrige(YourMeasurements ~ YourExtractedElevationValues,
> YourMeasurementLocations, TargetGrid) OK_snow <- autoKrige(Cumulata ~
> rain_data$ExtractedElevationValues,
> rain_data, grd)
> ------------------------------------------------------------
> -------------------------------------------------------------------
>
> The error I get is:
> Error in autoKrige(Cumulata ~ rain_data$ExtractedElevationValues,
> rain_data,  :
>   Either input_data or new_data is in LongLat, please reproject.
>    input_data:  +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> +ellps=WGS84 +towgs84=0,0,0
>    new_data:    +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> +ellps=WGS84 +towgs84=0,0,0
>
> but I did pay attention to have the same reference system in
> rain_data, drg and the Digital Elevation Model.
>
> Moreover, if I impose the class of the DEM to SpatialGridDataFrame
> when I extraxt the elevation points from the DEM I get the following error:
> Error in (function (classes, fdef, mtable)  :
>   unable to find an inherited method for function ?extract? for
> signature ?"SpatialGridDataFrame", "SpatialPoints"?
> Calls: extract -> <Anonymous>
>
>
> Would you please somebody help to show me where is my mistake?
>
> Thank you for all your attention
> Stefano
>
>          (oo)
> --oOO--( )--OOo----------------
> Stefano Sofia PhD
> Area Meteorologica e  Area nivologica - Centro Funzionale Servizio
> Protezione Civile - Regione Marche Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>
> ---Oo---------oO----------------
> ________________________________________
> Da: R-sig-Geo [r-sig-geo-bounces at r-project.org<mailto:r-sig-geo-bounces at r-project.org>] per conto di Daniel
> Knitter [knitter at geographie.uni-kiel.de<mailto:knitter at geographie.uni-kiel.de>]
> Inviato: luned? 12 febbraio 2018 9.16
> A: r-sig-geo at r-project.org<mailto:r-sig-geo at r-project.org>
> Oggetto: Re: [R-sig-Geo]  Interpolating snowfall values on a Digital
> Elevation Model
>
> ...sorry, I missed one step: you need to extract the elevation values
> to your points via extract function from the raster package:
>
> YourPoints$YourExtractedElevationValues <- extract(x = DEM, y =
> YourPoints)
>
> autoKrige(YourMeasurements ~ YourExtractedElevationValues,
> YourMeasurementLocations, TargetGrid)
>
>
> Sorry for spamming.
>
> Best,
> Daniel
>
> On Mon, 12 Feb 2018 08:03:41 +0000
> Stefano Sofia <stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>> wrote:
>
> > Dear list users,
> > I have to produce rainfall maps. I know how to create a
> > (bi-dimensional)
> grid and interpolate rainfall values (from automatic rain gauges) on
> that grid using Kriging:
> >
> > myinterpolation <- autoKrige(myrainfall_cumulate ~ 1, rain_data_UTM,
> mygrid)
> >
> > In reality I am dealing with snowfall values on mountain regions,
> > and in
> this case altitude is an important factor, the use of a Digital
> Elevation Model might make the difference.
> > Looking in the web I found some important material about accessing
> elevation data in R with the "elevatr" package (by J.W.Hollister), I
> am reading it.
> > My concern would then be to interpolate snowfall values on a Digital
> Elevation Model. Did somebody already use R for these kinds of
> calculations? Could somebody share with me some useful hints?
> >
> > Thank you for your attention
> > Stefano Sofia
> >
> >
> >          (oo)
> > --oOO--( )--OOo----------------
> > Stefano Sofia PhD
> > Area Meteorologica e  Area nivologica - Centro Funzionale Servizio
> > Protezione Civile - Regione Marche Via del Colle Ameno 5
> > 60126 Torrette di Ancona, Ancona
> > Uff: 071 806 7743
> > E-mail: stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>
> > ---Oo---------oO----------------
> >
> > ________________________________
> >
> > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu?
> > contenere
> informazioni confidenziali, pertanto ? destinato solo a persone
> autorizzate alla ricezione. I messaggi di posta elettronica per i
> client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare,
> inoltrare o archiviare questo messaggio. Se si ? ricevuto questo
> messaggio per errore, inoltrarlo al mittente ed eliminarlo
> completamente dal sistema del proprio computer. Ai sensi dell?art. 6
> della DGR n. 1394/2008 si segnala che, in caso di necessit? ed
> urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> > IMPORTANT NOTICE: This e-mail message is intended to be received
> > only by
> persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information
> that is confidential and legally privileged. Please do not read, copy,
> forward, or store this message unless you are an intended recipient of
> it. If you have received this message in error, please forward it to
> the sender and delete it completely from your computer system.
> >
> > --
> > This message was scanned by Libra ESVA and is believed to be clean.
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
> > https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%<https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%25>
> 2Fmailman%2Flistinfo%2Fr-sig-geo&e=52342f8a&h=f7d4a649&f=y&p=y
>
>
> --
>
> Dr. Daniel Knitter
> CRC1266 -- Scales of Transformation
> Project A2 "Integrative Modeling of Socio-Environmental Dynamics"
>
> Christian-Albrechts-Universit?t zu Kiel Department of Geography
> Physical Geography -- Landscape Ecology and Geoinformation
> Ludewig-Meyn-Str. 14, room 109 D - 24118 Kiel, Germany
>
> Phone: +49 431 880 2941
> Email: knitter at geographie.uni-kiel.de<mailto:knitter at geographie.uni-kiel.de>
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
> informazioni confidenziali, pertanto ? destinato solo a persone
> autorizzate alla ricezione. I messaggi di posta elettronica per i
> client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare,
> inoltrare o archiviare questo messaggio. Se si ? ricevuto questo
> messaggio per errore, inoltrarlo al mittente ed eliminarlo
> completamente dal sistema del proprio computer. Ai sensi dell?art. 6
> della DGR n. 1394/2008 si segnala che, in caso di necessit? ed
> urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only
> by persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information
> that is confidential and legally privileged. Please do not read, copy,
> forward, or store this message unless you are an intended recipient of
> it. If you have received this message in error, please forward it to
> the sender and delete it completely from your computer system.
>
> --
> This message was scanned by Libra ESVA and is believed to be clean.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Geoscience Australia Disclaimer: This e-mail (and files transmitted with it) is intended only for the person or entity to which it is addressed. If you are not the intended recipient, then you have received this e-mail by mistake and any use, dissemination, forwarding, printing or copying of this e-mail and its file attachments is prohibited. The security of emails transmitted cannot be guaranteed; by forwarding or replying to this email, you acknowledge and accept these risks.
-------------------------------------------------------------------------------------------------------------------------


Geoscience Australia Disclaimer: This e-mail (and files transmitted with it) is intended only for the person or entity to which it is addressed. If you are not the intended recipient, then you have received this e-mail by mistake and any use, dissemination, forwarding, printing or copying of this e-mail and its file attachments is prohibited. The security of emails transmitted cannot be guaranteed; by forwarding or replying to this email, you acknowledge and accept these risks.
-------------------------------------------------------------------------------------------------------------------------


	[[alternative HTML version deleted]]


From vijaylulla at gmail.com  Wed Feb 21 00:55:11 2018
From: vijaylulla at gmail.com (Vijay Lulla)
Date: Tue, 20 Feb 2018 18:55:11 -0500
Subject: [R-sig-Geo] WPS client implementation in R
In-Reply-To: <CANVKczOxhkHTWL7=XYWXUmj+8t1irW36ukCZ8Z1F2Rzj1DzEeQ@mail.gmail.com>
References: <CANVKczNT8mbbNfqh62CMNYTYng9iAQ20U_Wq8O6DoJ3qrpDfEw@mail.gmail.com>
 <d1fb59e5-9abd-a968-bbb4-67bf828d4bcd@52north.org>
 <CANVKczMmvA8QEXOifMwDthyr7ZBR4=k_qpWwpcYE8Z2dUiB_GQ@mail.gmail.com>
 <f8545ecba8ae4178a9ff51bb1232e2be@AM4PR0401MB1729.eurprd04.prod.outlook.com>
 <CANVKczOxhkHTWL7=XYWXUmj+8t1irW36ukCZ8Z1F2Rzj1DzEeQ@mail.gmail.com>
Message-ID: <CAKkiGbuyfwGjmTtQV+AoaDerRbTvLT19u6R4Q2Zbrcxcn+jTng@mail.gmail.com>

Is WPS like Open Sound Control (OSC)?

On Tue, Feb 20, 2018 at 11:30 AM, Barry Rowlingson <
b.rowlingson at lancaster.ac.uk> wrote:

> On Tue, Feb 20, 2018 at 3:51 PM, Javier Mart?nez-L?pez <
> javi.martinez.lopez at gmail.com> wrote:
>
> > You can try OpenCPU (https://www.opencpu.org/). It works great!
> >
>
> I don't see anything WPS there. The advantage of implementing a WPS is that
> it is then available to anything supporting the WPS standard, so you could
> access your analysis from QGIS, for example.
>
>  If you implemented an analysis via some generic REST API you'd still have
> to write some client code to interpret the outputs.
>
> Barry
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Vijay Lulla, Ph.D.

Assistant Professor,
Dept. of Geography, IUPUI
425 University Blvd, CA-207C.
Indianapolis, IN-46202
vlulla at iupui.edu

<http://vijaylulla.com>
http://vijaylulla.com

	[[alternative HTML version deleted]]


From b.graeler at 52north.org  Wed Feb 21 10:08:56 2018
From: b.graeler at 52north.org (=?UTF-8?Q?Dr._Benedikt_Gr=c3=a4ler?=)
Date: Wed, 21 Feb 2018 10:08:56 +0100
Subject: [R-sig-Geo] WPS client implementation in R
In-Reply-To: <CAKkiGbuyfwGjmTtQV+AoaDerRbTvLT19u6R4Q2Zbrcxcn+jTng@mail.gmail.com>
References: <CANVKczNT8mbbNfqh62CMNYTYng9iAQ20U_Wq8O6DoJ3qrpDfEw@mail.gmail.com>
 <d1fb59e5-9abd-a968-bbb4-67bf828d4bcd@52north.org>
 <CANVKczMmvA8QEXOifMwDthyr7ZBR4=k_qpWwpcYE8Z2dUiB_GQ@mail.gmail.com>
 <f8545ecba8ae4178a9ff51bb1232e2be@AM4PR0401MB1729.eurprd04.prod.outlook.com>
 <CANVKczOxhkHTWL7=XYWXUmj+8t1irW36ukCZ8Z1F2Rzj1DzEeQ@mail.gmail.com>
 <CAKkiGbuyfwGjmTtQV+AoaDerRbTvLT19u6R4Q2Zbrcxcn+jTng@mail.gmail.com>
Message-ID: <4acabdf1-935f-7ec6-f0c9-98f755f4c4fd@52north.org>

WPS is the acronym of the Web Processing Service - an OGC standard [1] 
that specifies how some spatial process (adding two layers, buffering, 
..., run-off models, ..., complex atmospheric models, ..., processes 
running on large data sets, ...) can be wrapped in a server-side 
service. The standard basically specifies how in- and output values are 
submitted and received - pretty much like a function definition. A well 
designed WPS can then be used with WPS clients (e.g. QGIS, ArcGIS, ...), 
but also via a web browser [2,3], to perform the pre-defined process on 
your data.

Hope that clarifies the previous discussions,

  Ben

[1] http://www.opengeospatial.org/standards/wps
[2] http://geoprocessing.demo.52north.org:8080/wps-js-client/
[3] HowTo for [2]:
https://wiki.52north.org/Projects/SimpleQuakeMapAlgorithm


On 21/02/2018 00:55, Vijay Lulla wrote:
> Is WPS like Open Sound Control (OSC)?
> 
> On Tue, Feb 20, 2018 at 11:30 AM, Barry Rowlingson <
> b.rowlingson at lancaster.ac.uk> wrote:
> 
>> On Tue, Feb 20, 2018 at 3:51 PM, Javier Mart?nez-L?pez <
>> javi.martinez.lopez at gmail.com> wrote:
>>
>>> You can try OpenCPU (https://www.opencpu.org/). It works great!
>>>
>>
>> I don't see anything WPS there. The advantage of implementing a WPS is that
>> it is then available to anything supporting the WPS standard, so you could
>> access your analysis from QGIS, for example.
>>
>>   If you implemented an analysis via some generic REST API you'd still have
>> to write some client code to interpret the outputs.
>>
>> Barry
>>
>>          [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 
> 
> 

-- 
Dr. Benedikt Gr?ler
52?North Initiative for Geospatial Open Source Software GmbH
Martin-Luther-King-Weg 24
48155 Muenster, Germany

E-Mail: b.graeler at 52north.org
Fon: +49-(0)-251/396371-39
Fax: +49-(0)-251/396371-11

http://52north.org/
Twitter: @FiveTwoN

General Managers: Dr. Albert Remke, Dr. Andreas Wytzisk
Local Court Muenster HRB 10849

-------------- next part --------------
A non-text attachment was scrubbed...
Name: b_graeler.vcf
Type: text/x-vcard
Size: 445 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20180221/962152e7/attachment.vcf>

From chino_tones at hotmail.com  Wed Feb 21 22:31:51 2018
From: chino_tones at hotmail.com (Joelle k. Akram)
Date: Wed, 21 Feb 2018 21:31:51 +0000
Subject: [R-sig-Geo] Can I use covariates in addition to spatial coordinates
 for 'qreglwr' in the McSpatial package?
Message-ID: <YTOPR0101MB14013002F150E5F5214130BE90CE0@YTOPR0101MB1401.CANPRD01.PROD.OUTLOOK.COM>

Greetings all,


I am trying to run the following function spatial regression:

https://rdrr.io/cran/McSpatial/man/qreglwr.html


Based on the examples given below the weblink, the function is run with spatial coordinates:

fit <- qreglwr<https://rdrr.io/cran/McSpatial/man/qreglwr.html>(LNDENS~LONGITUDE+LATITUDE,taumat=c<https://rdrr.io/r/base/c.html>(.10,.50,.90),window<https://rdrr.io/r/stats/window.html>=.20,data<https://rdrr.io/r/utils/data.html>=cookdata<https://rdrr.io/cran/McSpatial/man/cookdata.html>)


And it is run without spatial coordinates (i.e., only covariates) :

fit1 <- qreglwr<https://rdrr.io/cran/McSpatial/man/qreglwr.html>(LNDENS~DCBD,taumat=c<https://rdrr.io/r/base/c.html>(.10,.50,.90),window<https://rdrr.io/r/stats/window.html>=.30,kern="rect",data<https://rdrr.io/r/utils/data.html>=cookdata<https://rdrr.io/cran/McSpatial/man/cookdata.html>)

In my problem, I am thinking along the lines of GWR where we specify both covariates and spatial coords.

But I do not see it in this function.


Unless I  am missing something, I believe we cannot do the following since the function does may not differentiate between

a spatial coord. variable and a covariate:


fit1 <- qreglwr<https://rdrr.io/cran/McSpatial/man/qreglwr.html>(LNDENS~DCBD+LONGITUDE+LATITUDE,taumat=c<https://rdrr.io/r/base/c.html>(.10,.50,.90),window<https://rdrr.io/r/stats/window.html>=.30,kern="rect",data<https://rdrr.io/r/utils/data.html>=cookdata<https://rdrr.io/cran/McSpatial/man/cookdata.html>)

Any insights are welcome.
cheers.

	[[alternative HTML version deleted]]


From chino_tones at hotmail.com  Thu Feb 22 06:58:02 2018
From: chino_tones at hotmail.com (Joelle k. Akram)
Date: Thu, 22 Feb 2018 05:58:02 +0000
Subject: [R-sig-Geo] 
 Can I use covariates in addition to spatial coordinates
 for 'qreglwr' in the McSpatial package?
In-Reply-To: <YTOPR0101MB14013002F150E5F5214130BE90CE0@YTOPR0101MB1401.CANPRD01.PROD.OUTLOOK.COM>
References: <YTOPR0101MB14013002F150E5F5214130BE90CE0@YTOPR0101MB1401.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <YQXPR0101MB139717AC80DFF5AF4FD8FE7C90CD0@YQXPR0101MB1397.CANPRD01.PROD.OUTLOOK.COM>

hi all,


The formatting in my original post is not correct.

Please see my post in the correct format:



Greetings all,


I am trying to run the following function spatial regression:

https://rdrr.io/cran/McSpatial/man/qreglwr.html


Based on the examples given below the weblink, the function is run with spatial coordinates:

fit <- qreglwr(LNDENS~LONGITUDE+LATITUDE,taumat=c(.10,.50,.90),window=.20,data=cookdata)


And there is also an example, where it is run without spatial coordinates (i.e., only covariates) :

fit1 <- qreglwr(LNDENS~DCBD,taumat=c(.10,.50,.90),window=.30,kern="rect",data=cookdata)



In my problem, I am thinking along the lines of GWR where we specify both covariates and spatial coords.

But I do not see it possible in this function.


Unless I  am missing something, I believe we cannot do the following since the function does may not differentiate between

a spatial coord. variable and a covariate:


fit1 <- qreglwr(LNDENS~DCBD+LONGITUDE+LATITUDE,taumat=c(.10,.50,.90),window=.30,kern="rect",data=cookdata)

Any insights are welcome.
cheers.

data: Data Sets - R Package Documentation<https://rdrr.io/r/utils/data.html>
rdrr.io
Loads specified data sets, or list the available data sets.


window: Time Windows - R Package Documentation<https://rdrr.io/r/stats/window.html>
rdrr.io
window is a generic function which extracts the subset of the object x observed between the times start and end. If a frequency is specified, the series is then re ...


c: Combine Values into a Vector or List - rdrr.io<https://rdrr.io/r/base/c.html>
rdrr.io
This is a generic function which combines its arguments. The default method combines its arguments to form a vector. All arguments are coerced to a common type which ...


window: Time Windows - R Package Documentation<https://rdrr.io/r/stats/window.html>
rdrr.io
window is a generic function which extracts the subset of the object x observed between the times start and end. If a frequency is specified, the series is then re ...


c: Combine Values into a Vector or List - rdrr.io<https://rdrr.io/r/base/c.html>
rdrr.io
This is a generic function which combines its arguments. The default method combines its arguments to form a vector. All arguments are coerced to a common type which ...


data: Data Sets - R Package Documentation<https://rdrr.io/r/utils/data.html>
rdrr.io
Loads specified data sets, or list the available data sets.


data: Data Sets - R Package Documentation<https://rdrr.io/r/utils/data.html>
rdrr.io
Loads specified data sets, or list the available data sets.


c: Combine Values into a Vector or List - rdrr.io<https://rdrr.io/r/base/c.html>
rdrr.io
This is a generic function which combines its arguments. The default method combines its arguments to form a vector. All arguments are coerced to a common type which ...




________________________________
From: R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of Joelle k. Akram <chino_tones at hotmail.com>
Sent: February 21, 2018 2:31 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] Can I use covariates in addition to spatial coordinates for 'qreglwr' in the McSpatial package?

Greetings all,


I am trying to run the following function spatial regression:

https://rdrr.io/cran/McSpatial/man/qreglwr.html


Based on the examples given below the weblink, the function is run with spatial coordinates:

fit <- qreglwr<https://rdrr.io/cran/McSpatial/man/qreglwr.html>(LNDENS~LONGITUDE+LATITUDE,taumat=c<https://rdrr.io/r/base/c.html>(.10,.50,.90),window<https://rdrr.io/r/stats/window.html>=.20,data<https://rdrr.io/r/utils/data.html>=cookdata<https://rdrr.io/cran/McSpatial/man/cookdata.html>)


And it is run without spatial coordinates (i.e., only covariates) :

fit1 <- qreglwr<https://rdrr.io/cran/McSpatial/man/qreglwr.html>(LNDENS~DCBD,taumat=c<https://rdrr.io/r/base/c.html>(.10,.50,.90),window<https://rdrr.io/r/stats/window.html>=.30,kern="rect",data<https://rdrr.io/r/utils/data.html>=cookdata<https://rdrr.io/cran/McSpatial/man/cookdata.html>)

In my problem, I am thinking along the lines of GWR where we specify both covariates and spatial coords.

But I do not see it in this function.


Unless I  am missing something, I believe we cannot do the following since the function does may not differentiate between

a spatial coord. variable and a covariate:


fit1 <- qreglwr<https://rdrr.io/cran/McSpatial/man/qreglwr.html>(LNDENS~DCBD+LONGITUDE+LATITUDE,taumat=c<https://rdrr.io/r/base/c.html>(.10,.50,.90),window<https://rdrr.io/r/stats/window.html>=.30,kern="rect",data<https://rdrr.io/r/utils/data.html>=cookdata<https://rdrr.io/cran/McSpatial/man/cookdata.html>)

Any insights are welcome.
cheers.

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo
R-sig-Geo Info Page - SfS ? Seminar for Statistics | ETH ...<https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
stat.ethz.ch
A mailing list for discussing the development and use of R functions and packages for handling and analysis of spatial, and particularly geographical, data.




	[[alternative HTML version deleted]]


From javi.martinez.lopez at gmail.com  Thu Feb 22 12:19:18 2018
From: javi.martinez.lopez at gmail.com (=?UTF-8?B?SmF2aWVyIE1hcnTDrW5lei1Mw7NwZXo=?=)
Date: Thu, 22 Feb 2018 12:19:18 +0100
Subject: [R-sig-Geo] WPS client implementation in R
In-Reply-To: <4acabdf1-935f-7ec6-f0c9-98f755f4c4fd@52north.org>
References: <CANVKczNT8mbbNfqh62CMNYTYng9iAQ20U_Wq8O6DoJ3qrpDfEw@mail.gmail.com>
 <d1fb59e5-9abd-a968-bbb4-67bf828d4bcd@52north.org>
 <CANVKczMmvA8QEXOifMwDthyr7ZBR4=k_qpWwpcYE8Z2dUiB_GQ@mail.gmail.com>
 <f8545ecba8ae4178a9ff51bb1232e2be@AM4PR0401MB1729.eurprd04.prod.outlook.com>
 <CANVKczOxhkHTWL7=XYWXUmj+8t1irW36ukCZ8Z1F2Rzj1DzEeQ@mail.gmail.com>
 <CAKkiGbuyfwGjmTtQV+AoaDerRbTvLT19u6R4Q2Zbrcxcn+jTng@mail.gmail.com>
 <4acabdf1-935f-7ec6-f0c9-98f755f4c4fd@52north.org>
Message-ID: <CAKgwV9nEDB2CznR_BvFhKB9rmowXj1MnvgQn-avDwDCA3aJchw@mail.gmail.com>

Thank you for the explanation! Best, Javier

On Wed, Feb 21, 2018 at 10:08 AM, Dr. Benedikt Gr?ler <b.graeler at 52north.org
> wrote:

> WPS is the acronym of the Web Processing Service - an OGC standard [1]
> that specifies how some spatial process (adding two layers, buffering, ...,
> run-off models, ..., complex atmospheric models, ..., processes running on
> large data sets, ...) can be wrapped in a server-side service. The standard
> basically specifies how in- and output values are submitted and received -
> pretty much like a function definition. A well designed WPS can then be
> used with WPS clients (e.g. QGIS, ArcGIS, ...), but also via a web browser
> [2,3], to perform the pre-defined process on your data.
>
> Hope that clarifies the previous discussions,
>
>  Ben
>
> [1] http://www.opengeospatial.org/standards/wps
> [2] http://geoprocessing.demo.52north.org:8080/wps-js-client/
> [3] HowTo for [2]:
> https://wiki.52north.org/Projects/SimpleQuakeMapAlgorithm
>
>
> On 21/02/2018 00:55, Vijay Lulla wrote:
>
>> Is WPS like Open Sound Control (OSC)?
>>
>> On Tue, Feb 20, 2018 at 11:30 AM, Barry Rowlingson <
>> b.rowlingson at lancaster.ac.uk> wrote:
>>
>> On Tue, Feb 20, 2018 at 3:51 PM, Javier Mart?nez-L?pez <
>>> javi.martinez.lopez at gmail.com> wrote:
>>>
>>> You can try OpenCPU (https://www.opencpu.org/). It works great!
>>>>
>>>>
>>> I don't see anything WPS there. The advantage of implementing a WPS is
>>> that
>>> it is then available to anything supporting the WPS standard, so you
>>> could
>>> access your analysis from QGIS, for example.
>>>
>>>   If you implemented an analysis via some generic REST API you'd still
>>> have
>>> to write some client code to interpret the outputs.
>>>
>>> Barry
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>
>>
>>
> --
> Dr. Benedikt Gr?ler
> 52?North Initiative for Geospatial Open Source Software GmbH
> Martin-Luther-King-Weg 24
> 48155 Muenster, Germany
>
> E-Mail: b.graeler at 52north.org
> Fon: +49-(0)-251/396371-39
> Fax: +49-(0)-251/396371-11
>
> http://52north.org/
> Twitter: @FiveTwoN
>
> General Managers: Dr. Albert Remke, Dr. Andreas Wytzisk
> Local Court Muenster HRB 10849
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>

	[[alternative HTML version deleted]]


From mdsumner at gmail.com  Thu Feb 22 13:25:38 2018
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 22 Feb 2018 12:25:38 +0000
Subject: [R-sig-Geo] 
 [DKIM] Re: Interpolating snowfall values on a Digital
 Elevation Model [SEC=UNCLASSIFIED]
In-Reply-To: <50623728d51147cfb35e6ad00f903d10@win-exch-prod01.prod.lan>
References: <e6640b3285e944da926fe80077c47168@win-exch-prod01.prod.lan>
 <CAF1jk_nfe3T2ek6OjBR-XXL6jyT6k3k79skvM9tHpZZ6dPf2dg@mail.gmail.com>
 <50623728d51147cfb35e6ad00f903d10@win-exch-prod01.prod.lan>
Message-ID: <CAAcGz9-qMgp4tMiN8Azp2aCOmSzbt93WbM=Hz2gNkEfB0+eLow@mail.gmail.com>

Some thoughts.


On Wed, 21 Feb 2018 at 09:09 Li Jin <Jin.Li at ga.gov.au> wrote:

> The statement ?the kriging functions in R still don't accept lat/long? is
> incorrect. Please check the gstat and spm packages for details. When your
> data is collected from one utm, it is a good idea to project the data using
> utm. If the data is from two or more utms, you need to use different
> projection systems. The references provided demonstrated that the commonly
> used WGS84 is as good as relevant projection systems.
>
> From: Dominik Schneider [mailto:dominik.schneider at colorado.edu]
> Sent: Wednesday, 21 February 2018 5:02 AM
> To: Li Jin
> Cc: Stefano Sofia; r-sig-geo at r-project.org
> Subject: Re: [DKIM] Re: [R-sig-Geo] Interpolating snowfall values on a
> Digital Elevation Model [SEC=UNCLASSIFIED]
>
> The effects of spatial reference systems on interpolations and accuracy
> are minimal, and lat and long can be used.
> Fair enough, thanks for sending the references. But, as far as I know, the
> kriging functions in R still don't accept lat/long.
>
>
>

Any such advice is completely dependent on the study area, and the goals of
the study. UTM is really bad advice generally, it's just a simplistic
system we've inherited and is used way too much, a self-fulfilling
prophecy. Whether standard tools should or shouldn't accept data as given
is a crux philosophical point, no tool in R is smart enough to know whether
it's "correct enough" to assume one way or another. You can't assume any
measurement represents reality in any projection, it depends how far, how
much, how large - you can't traverse from local neighbourhood scales to
continental, for example - you'd make different choices regarding
compromises at *some such point*.

Please don't ever advise use of UTM without specific caveats about the
scope and extent of the research - which is impossible in general - learn
to use map projections with the compromises they entail, there's nothing
stopping creating a local new one, from any of the main families with
PROJ.4, and with many variants of compromises on area, length, shape and
scale.

I tend not to say anything about this topic in this environment, but this
time the back and forth is particularly misleading IMO.

We actually have the worst of worlds at the moment, with many softwares
opinionatedly preventing one from making educational mistakes. There's no
real authority, lots of opinion and habit. lots of exploration but not
enough pushing and argument - I advise keeping an open mind and exploring
deeply.

Cheers, Mike.

>
> On Mon, Feb 19, 2018 at 8:54 PM, Li Jin <Jin.Li at ga.gov.au<mailto:
> Jin.Li at ga.gov.au>> wrote:
> The effects of spatial reference systems on interpolations and accuracy
> are minimal, and lat and long can be used. Please see the following studies
> for details.
>
> Jiang, W., Li, J., 2013. Are Spatial Modelling Methods Sensitive to
> Spatial Reference Systems for Predicting Marine Environmental Variables,
> 20th International Congress on Modelling and Simulation: Adelaide,
> Australia, pp. 387-393.
> Jiang, W., Li, J., 2014. The effects of spatial reference systems on the
> predictive accuracy of spatial interpolation methods. Record 2014/01.
> Geoscience Australia: Canberra, pp 33.
> http://dx.doi.org/10.11636/Record.2014.001.
> Turner, A.J., Li, J., Jiang, W., 2017. Effects of Spatial Reference
> Systems on the Accuracy of Spatial Predictive Modelling along a Latitudinal
> Gradient, 22nd International Congress on Modelling and Simulation: Hobart,
> Tasmania, Australia, pp. 106-112.
>
>
> -----Original Message-----
> From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org<mailto:
> r-sig-geo-bounces at r-project.org>] On Behalf Of Dominik Schneider
> Sent: Wednesday, 14 February 2018 3:21 AM
> To: Stefano Sofia
> Cc: r-sig-geo at r-project.org<mailto:r-sig-geo at r-project.org>
> Subject: [DKIM] Re: [R-sig-Geo] Interpolating snowfall values on a Digital
> Elevation Model
>
> You can't use a lat/long coordinate system when kriging because the
> concept of distance is ambiguous. Convert all your data a UTM grid like you
> had in your first post and it should work.
>
> Another note, It looks like you are working at 0.01 deg which is on the
> order of 1km resolution so you may find  other covariates such as aspect,
> slope, and wind sheltering/exposure, terrain roughness for estimating snow
> on the ground useful. see some of the earliest papers by Carroll, Cressie,
> and Elder.
>
> Carroll, S. S., and N. Cressie (1996), A comparison of geostatistical
> methodologies used to estimate snow water equivalent, *JAWRA Journal of the
> American Water Resources Association*, *32*(2), 267?278,
> doi:10.1111/j.1752-1688.1996.tb03450.x.
>
> Carroll, S. S., and N. Cressie (1997), Spatial modeling of snow water
> equivalent using covariances estimated from spatial and geomorphic
> attributes, *Journal of Hydrology*, *190*(1-2), 42?59.
>
> Balk, B., and K. Elder (2000), Combining binary decision tree and
> geostatistical methods to estimate snow distribution in a mountain
> watershed, *Water Resources Research*, *36*(1), 13?26,
> doi:10.1029/1999WR900251.
>
> Erxleben, J., K. Elder, and R. Davis (2002), Comparison of spatial
> interpolation methods for estimating snow distribution in the Colorado
> Rocky Mountains, *Hydrological Processes*, *16*(18), 3627?3649,
> doi:10.1002/hyp.1239.
>
> Erickson, T. A., M. W. Williams, and A. Winstral (2005), Persistence of
> topographic controls on the spatial distribution of snow in rugged mountain
> terrain, Colorado, United States, *Water Resour. Res.*, *41*(4), W04014,
> doi:10.1029/2003WR002973.
>
>
> On Tue, Feb 13, 2018 at 3:45 AM, Stefano Sofia <
> stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>>
> wrote:
>
> > Dear Daniel and list users,
> > I tried to follow the instructions but I encountered two kinds of errors.
> > This is a reproducibile code:
> >
> > ------------------------------------------------------------
> > ---------------------------------------------------
> > library(automap)
> > library(ggplot2)
> > library(gstat)
> > library(raster)
> > library(rasterVis)
> > library(rgdal)
> > library(maptools)
> >
> > ## LOADING DEM
> > ita_DEM <- getData('alt', country='ITA', mask=TRUE)
> > crs(ita_DEM) <- "+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> > +ellps=WGS84 +towgs84=0,0,0"
> > #ita_DEM <- as(ita_DEM, "SpatialGridDataFrame")
> > str(ita_DEM)
> >
> > ## LOADING RAINFALL DATA
> > rain_data <- data.frame(Cumulata=c(11.8, 9.0, 8.0, 36.6, 9.4),
> > Long_Cent=c(12.61874, 12.78690, 12.96756, 13.15599, 13.28157),
> > Lat_Cent=c(43.79447, 43.85185, 43.76267, 43.03470, 43.08003),
> > Altitude=c(112.20, 42.93, 36.14, 747, 465))
> >
> > stations <- data.frame(rain_data$Long_Cent, rain_data$Lat_Cent)
> > rain_data <- SpatialPointsDataFrame(stations, rain_data,
> > proj4string=CRS("+init=epsg:4326"))
> > stations <- SpatialPoints(stations,
> > proj4string=CRS("+init=epsg:4326"))
> >
> > ## EXTRACT THE ELEVATION VALUES TO MY POINTS
> > rain_data$ExtractedElevationValues <- extract(x=ita_DEM, y=stations)
> >
> > ## CREATE GRID FOR KRIGING OUTPUT
> > minx <-  rain_data at bbox[1,1]
> > maxx <- rain_data at bbox[1,2]
> > miny <- rain_data at bbox[2,1]
> > maxy <- rain_data at bbox[2,2]
> > pixel <- 0.01
> > grd <- expand.grid(x=seq(minx, maxx, by=pixel), y=seq(miny, maxy,
> > by=pixel))
> > coordinates(grd) <- ~x+y
> > gridded(grd) <- TRUE
> > proj4string(grd) <- CRS("+init=epsg:4326")
> >
> > ## KRIGING: autoKrige(YourMeasurements ~ YourExtractedElevationValues,
> > YourMeasurementLocations, TargetGrid) OK_snow <- autoKrige(Cumulata ~
> > rain_data$ExtractedElevationValues,
> > rain_data, grd)
> > ------------------------------------------------------------
> > -------------------------------------------------------------------
> >
> > The error I get is:
> > Error in autoKrige(Cumulata ~ rain_data$ExtractedElevationValues,
> > rain_data,  :
> >   Either input_data or new_data is in LongLat, please reproject.
> >    input_data:  +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> > +ellps=WGS84 +towgs84=0,0,0
> >    new_data:    +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> > +ellps=WGS84 +towgs84=0,0,0
> >
> > but I did pay attention to have the same reference system in
> > rain_data, drg and the Digital Elevation Model.
> >
> > Moreover, if I impose the class of the DEM to SpatialGridDataFrame
> > when I extraxt the elevation points from the DEM I get the following
> error:
> > Error in (function (classes, fdef, mtable)  :
> >   unable to find an inherited method for function ?extract? for
> > signature ?"SpatialGridDataFrame", "SpatialPoints"?
> > Calls: extract -> <Anonymous>
> >
> >
> > Would you please somebody help to show me where is my mistake?
> >
> > Thank you for all your attention
> > Stefano
> >
> >          (oo)
> > --oOO--( )--OOo-------------
> <https://maps.google.com/?q=--oOO--(+)--OOo-------------&entry=gmail&source=g>
> ---
> > Stefano Sofia PhD
> > Area Meteorologica e  Area nivologica - Centro Funzionale Servizio
> > Protezione Civile - Regione Marche Via del Colle Ameno 5
> > 60126 Torrette di Ancona, Ancona
> > Uff: 071 806 7743
> > E-mail: stefano.sofia at regione.marche.it<mailto:
> stefano.sofia at regione.marche.it>
> > ---Oo---------oO----------------
> > ________________________________________
> > Da: R-sig-Geo [r-sig-geo-bounces at r-project.org<mailto:
> r-sig-geo-bounces at r-project.org>] per conto di Daniel
> > Knitter [knitter at geographie.uni-kiel.de<mailto:
> knitter at geographie.uni-kiel.de>]
> > Inviato: luned? 12 febbraio 2018 9.16
> > A: r-sig-geo at r-project.org<mailto:r-sig-geo at r-project.org>
> > Oggetto: Re: [R-sig-Geo]  Interpolating snowfall values on a Digital
> > Elevation Model
> >
> > ...sorry, I missed one step: you need to extract the elevation values
> > to your points via extract function from the raster package:
> >
> > YourPoints$YourExtractedElevationValues <- extract(x = DEM, y =
> > YourPoints)
> >
> > autoKrige(YourMeasurements ~ YourExtractedElevationValues,
> > YourMeasurementLocations, TargetGrid)
> >
> >
> > Sorry for spamming.
> >
> > Best,
> > Daniel
> >
> > On Mon, 12 Feb 2018 08:03:41 +0000
> > Stefano Sofia <stefano.sofia at regione.marche.it<mailto:
> stefano.sofia at regione.marche.it>> wrote:
> >
> > > Dear list users,
> > > I have to produce rainfall maps. I know how to create a
> > > (bi-dimensional)
> > grid and interpolate rainfall values (from automatic rain gauges) on
> > that grid using Kriging:
> > >
> > > myinterpolation <- autoKrige(myrainfall_cumulate ~ 1, rain_data_UTM,
> > mygrid)
> > >
> > > In reality I am dealing with snowfall values on mountain regions,
> > > and in
> > this case altitude is an important factor, the use of a Digital
> > Elevation Model might make the difference.
> > > Looking in the web I found some important material about accessing
> > elevation data in R with the "elevatr" package (by J.W.Hollister), I
> > am reading it.
> > > My concern would then be to interpolate snowfall values on a Digital
> > Elevation Model. Did somebody already use R for these kinds of
> > calculations? Could somebody share with me some
> <https://maps.google.com/?q=somebody+share+with+me+some&entry=gmail&source=g>
> useful hints?
> > >
> > > Thank you for your attention
> > > Stefano Sofia
> > >
> > >
> > >          (oo)
> > > --oOO--( )--OOo----------------
> > > Stefano Sofia PhD
> > > Area Meteorologica e  Area nivologica - Centro Funzionale Servizio
> > > Protezione Civile - Regione Marche Via del Colle Ameno 5
> > > 60126 Torrette di Ancona, Ancona
> > > Uff: 071 806 7743
> > > E-mail: stefano.sofia at regione.marche.it<mailto:
> stefano.sofia at regione.marche.it>
> > > ---Oo---------oO----------------
> > >
> > > ________________________________
> > >
> > > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu?
> > > contenere
> > informazioni confidenziali, pertanto ? destinato solo a persone
> > autorizzate alla ricezione. I messaggi di posta elettronica per i
> > client di Regione Marche possono contenere informazioni confidenziali e
> con privilegi legali.
> > Se non si ? il destinatario specificato, non leggere, copiare,
> > inoltrare o archiviare questo messaggio. Se si ? ricevuto questo
> > messaggio per errore, inoltrarlo al mittente ed eliminarlo
> > completamente dal sistema del proprio computer. Ai sensi dell?art. 6
> > della DGR n. 1394/2008 si segnala che, in caso di necessit? ed
> > urgenza, la risposta al presente messaggio di posta elettronica pu?
> essere visionata da persone estranee al destinatario.
> > > IMPORTANT NOTICE: This e-mail message is intended to be received
> > > only by
> > persons entitled to receive the confidential information it may contain.
> > E-mail messages to clients of Regione Marche may contain information
> > that is confidential and legally privileged. Please do not read, copy,
> > forward, or store this message unless you are an intended recipient of
> > it. If you have received this message in error, please forward it to
> > the sender and delete it completely from your computer system.
> > >
> > > --
> > > This message was scanned by Libra ESVA and is believed to be clean.
> > >
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > _______________________________________________
> > > R-sig-Geo mailing list
> > > R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
> > > https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%<
> https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%25>
> > 2Fmailman%2Flistinfo%2Fr-sig-geo&e=52342f8a&h=f7d4a649&f=y&p=y
> >
> >
> > --
> >
> > Dr. Daniel Knitter
> > CRC1266 -- Scales of Transformation
> > Project A2 "Integrative Modeling of Socio-Environmental Dynamics"
> >
> > Christian-Albrechts-Universit?t zu Kiel Department of Geography
> > Physical Geography -- Landscape Ecology and Geoinformation
> > Ludewig-Meyn-Str. 14, room 109 D - 24118 Kiel, Germany
> >
> > Phone: +49 431 880 2941 <+49%20431%208802941>
> > Email: knitter at geographie.uni-kiel.de<mailto:
> knitter at geographie.uni-kiel.de>
> >
> > ________________________________
> >
> > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
> > informazioni confidenziali, pertanto ? destinato solo a persone
> > autorizzate alla ricezione. I messaggi di posta elettronica per i
> > client di Regione Marche possono contenere informazioni confidenziali e
> con privilegi legali.
> > Se non si ? il destinatario specificato, non leggere, copiare,
> > inoltrare o archiviare questo messaggio. Se si ? ricevuto questo
> > messaggio per errore, inoltrarlo al mittente ed eliminarlo
> > completamente dal sistema del proprio computer. Ai sensi dell?art. 6
> > della DGR n. 1394/2008 si segnala che, in caso di necessit? ed
> > urgenza, la risposta al presente messaggio di posta elettronica pu?
> essere visionata da persone estranee al destinatario.
> > IMPORTANT NOTICE: This e-mail message is intended to be received only
> > by persons entitled to receive the confidential information it may
> contain.
> > E-mail messages to clients of Regione Marche may contain information
> > that is confidential and legally privileged. Please do not read, copy,
> > forward, or store this message unless you are an intended recipient of
> > it. If you have received this message in error, please forward it to
> > the sender and delete it completely from your computer system.
> >
> > --
> > This message was scanned by Libra ESVA and is believed to be clean.
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> Geoscience Australia Disclaimer: This e-mail (and files transmitted with
> it) is intended only for the person or entity to which it is addressed. If
> you are not the intended recipient, then you have received this e-mail by
> mistake and any use, dissemination, forwarding, printing or copying of this
> e-mail and its file attachments is prohibited. The security of emails
> transmitted cannot be guaranteed; by forwarding or replying to this email,
> you acknowledge and accept these risks.
>
> -------------------------------------------------------------------------------------------------------------------------
>
>
> Geoscience Australia Disclaimer: This e-mail (and files transmitted with
> it) is intended only for the person or entity to which it is addressed. If
> you are not the intended recipient, then you have received this e-mail by
> mistake and any use, dissemination, forwarding, printing or copying of this
> e-mail and its file attachments is prohibited. The security of emails
> transmitted cannot be guaranteed; by forwarding or replying to this email,
> you acknowledge and accept these risks.
>
> -------------------------------------------------------------------------------------------------------------------------
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From Jin.Li at ga.gov.au  Fri Feb 23 00:16:20 2018
From: Jin.Li at ga.gov.au (Li Jin)
Date: Thu, 22 Feb 2018 23:16:20 +0000
Subject: [R-sig-Geo] 
 [DKIM] Re: [DKIM] Re: Interpolating snowfall values on
 a Digital Elevation Model [SEC=UNCLASSIFIED]
In-Reply-To: <21434_1519302412_5A8EB701_21434_5841_1_CAAcGz9-qMgp4tMiN8Azp2aCOmSzbt93WbM=Hz2gNkEfB0+eLow@mail.gmail.com>
References: <e6640b3285e944da926fe80077c47168@win-exch-prod01.prod.lan>
 <CAF1jk_nfe3T2ek6OjBR-XXL6jyT6k3k79skvM9tHpZZ6dPf2dg@mail.gmail.com>
 <50623728d51147cfb35e6ad00f903d10@win-exch-prod01.prod.lan>
 <21434_1519302412_5A8EB701_21434_5841_1_CAAcGz9-qMgp4tMiN8Azp2aCOmSzbt93WbM=Hz2gNkEfB0+eLow@mail.gmail.com>
Message-ID: <98249251bc2b4befb051bc2aa434fc81@win-exch-prod01.prod.lan>

Agreed, Michael. Please the refs provided for some demonstrations at a latitudinal gradient.

From: Michael Sumner [mailto:mdsumner at gmail.com]
Sent: Thursday, 22 February 2018 11:26 PM
To: Li Jin
Cc: Dominik Schneider; r-sig-geo at r-project.org
Subject: [DKIM] Re: [R-sig-Geo] [DKIM] Re: Interpolating snowfall values on a Digital Elevation Model [SEC=UNCLASSIFIED]

Some thoughts.


On Wed, 21 Feb 2018 at 09:09 Li Jin <Jin.Li at ga.gov.au<mailto:Jin.Li at ga.gov.au>> wrote:
The statement ?the kriging functions in R still don't accept lat/long? is incorrect. Please check the gstat and spm packages for details. When your data is collected from one utm, it is a good idea to project the data using utm. If the data is from two or more utms, you need to use different projection systems. The references provided demonstrated that the commonly used WGS84 is as good as relevant projection systems.

From: Dominik Schneider [mailto:dominik.schneider at colorado.edu<mailto:dominik.schneider at colorado.edu>]
Sent: Wednesday, 21 February 2018 5:02 AM
To: Li Jin
Cc: Stefano Sofia; r-sig-geo at r-project.org<mailto:r-sig-geo at r-project.org>
Subject: Re: [DKIM] Re: [R-sig-Geo] Interpolating snowfall values on a Digital Elevation Model [SEC=UNCLASSIFIED]

The effects of spatial reference systems on interpolations and accuracy are minimal, and lat and long can be used.
Fair enough, thanks for sending the references. But, as far as I know, the kriging functions in R still don't accept lat/long.



Any such advice is completely dependent on the study area, and the goals of the study. UTM is really bad advice generally, it's just a simplistic system we've inherited and is used way too much, a self-fulfilling prophecy. Whether standard tools should or shouldn't accept data as given is a crux philosophical point, no tool in R is smart enough to know whether it's "correct enough" to assume one way or another. You can't assume any measurement represents reality in any projection, it depends how far, how much, how large - you can't traverse from local neighbourhood scales to continental, for example - you'd make different choices regarding compromises at *some such point*.

Please don't ever advise use of UTM without specific caveats about the scope and extent of the research - which is impossible in general - learn to use map projections with the compromises they entail, there's nothing stopping creating a local new one, from any of the main families with PROJ.4, and with many variants of compromises on area, length, shape and scale.

I tend not to say anything about this topic in this environment, but this time the back and forth is particularly misleading IMO.

We actually have the worst of worlds at the moment, with many softwares opinionatedly preventing one from making educational mistakes. There's no real authority, lots of opinion and habit. lots of exploration but not enough pushing and argument - I advise keeping an open mind and exploring deeply.

Cheers, Mike.

On Mon, Feb 19, 2018 at 8:54 PM, Li Jin <Jin.Li at ga.gov.au<mailto:Jin.Li at ga.gov.au><mailto:Jin.Li at ga.gov.au<mailto:Jin.Li at ga.gov.au>>> wrote:
The effects of spatial reference systems on interpolations and accuracy are minimal, and lat and long can be used. Please see the following studies for details.

Jiang, W., Li, J., 2013. Are Spatial Modelling Methods Sensitive to Spatial Reference Systems for Predicting Marine Environmental Variables, 20th International Congress on Modelling and Simulation: Adelaide, Australia, pp. 387-393.
Jiang, W., Li, J., 2014. The effects of spatial reference systems on the predictive accuracy of spatial interpolation methods. Record 2014/01. Geoscience Australia: Canberra, pp 33. http://dx.doi.org/10.11636/Record.2014.001.
Turner, A.J., Li, J., Jiang, W., 2017. Effects of Spatial Reference Systems on the Accuracy of Spatial Predictive Modelling along a Latitudinal Gradient, 22nd International Congress on Modelling and Simulation: Hobart, Tasmania, Australia, pp. 106-112.


-----Original Message-----
From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org<mailto:r-sig-geo-bounces at r-project.org><mailto:r-sig-geo-bounces at r-project.org<mailto:r-sig-geo-bounces at r-project.org>>] On Behalf Of Dominik Schneider
Sent: Wednesday, 14 February 2018 3:21 AM
To: Stefano Sofia
Cc: r-sig-geo at r-project.org<mailto:r-sig-geo at r-project.org><mailto:r-sig-geo at r-project.org<mailto:r-sig-geo at r-project.org>>
Subject: [DKIM] Re: [R-sig-Geo] Interpolating snowfall values on a Digital Elevation Model

You can't use a lat/long coordinate system when kriging because the concept of distance is ambiguous. Convert all your data a UTM grid like you had in your first post and it should work.

Another note, It looks like you are working at 0.01 deg which is on the order of 1km resolution so you may find  other covariates such as aspect, slope, and wind sheltering/exposure, terrain roughness for estimating snow on the ground useful. see some of the earliest papers by Carroll, Cressie, and Elder.

Carroll, S. S., and N. Cressie (1996), A comparison of geostatistical methodologies used to estimate snow water equivalent, *JAWRA Journal of the American Water Resources Association*, *32*(2), 267?278, doi:10.1111/j.1752-1688.1996.tb03450.x.

Carroll, S. S., and N. Cressie (1997), Spatial modeling of snow water equivalent using covariances estimated from spatial and geomorphic attributes, *Journal of Hydrology*, *190*(1-2), 42?59.

Balk, B., and K. Elder (2000), Combining binary decision tree and geostatistical methods to estimate snow distribution in a mountain watershed, *Water Resources Research*, *36*(1), 13?26, doi:10.1029/1999WR900251.

Erxleben, J., K. Elder, and R. Davis (2002), Comparison of spatial interpolation methods for estimating snow distribution in the Colorado Rocky Mountains, *Hydrological Processes*, *16*(18), 3627?3649, doi:10.1002/hyp.1239.

Erickson, T. A., M. W. Williams, and A. Winstral (2005), Persistence of topographic controls on the spatial distribution of snow in rugged mountain terrain, Colorado, United States, *Water Resour. Res.*, *41*(4), W04014, doi:10.1029/2003WR002973.


On Tue, Feb 13, 2018 at 3:45 AM, Stefano Sofia < stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it><mailto:stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>>> wrote:

> Dear Daniel and list users,
> I tried to follow the instructions but I encountered two kinds of errors.
> This is a reproducibile code:
>
> ------------------------------------------------------------
> ---------------------------------------------------
> library(automap)
> library(ggplot2)
> library(gstat)
> library(raster)
> library(rasterVis)
> library(rgdal)
> library(maptools)
>
> ## LOADING DEM
> ita_DEM <- getData('alt', country='ITA', mask=TRUE)
> crs(ita_DEM) <- "+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> +ellps=WGS84 +towgs84=0,0,0"
> #ita_DEM <- as(ita_DEM, "SpatialGridDataFrame")
> str(ita_DEM)
>
> ## LOADING RAINFALL DATA
> rain_data <- data.frame(Cumulata=c(11.8, 9.0, 8.0, 36.6, 9.4),
> Long_Cent=c(12.61874, 12.78690, 12.96756, 13.15599, 13.28157),
> Lat_Cent=c(43.79447, 43.85185, 43.76267, 43.03470, 43.08003),
> Altitude=c(112.20, 42.93, 36.14, 747, 465))
>
> stations <- data.frame(rain_data$Long_Cent, rain_data$Lat_Cent)
> rain_data <- SpatialPointsDataFrame(stations, rain_data,
> proj4string=CRS("+init=epsg:4326"))
> stations <- SpatialPoints(stations,
> proj4string=CRS("+init=epsg:4326"))
>
> ## EXTRACT THE ELEVATION VALUES TO MY POINTS
> rain_data$ExtractedElevationValues <- extract(x=ita_DEM, y=stations)
>
> ## CREATE GRID FOR KRIGING OUTPUT
> minx <-  rain_data at bbox[1,1]
> maxx <- rain_data at bbox[1,2]
> miny <- rain_data at bbox[2,1]
> maxy <- rain_data at bbox[2,2]
> pixel <- 0.01
> grd <- expand.grid(x=seq(minx, maxx, by=pixel), y=seq(miny, maxy,
> by=pixel))
> coordinates(grd) <- ~x+y
> gridded(grd) <- TRUE
> proj4string(grd) <- CRS("+init=epsg:4326")
>
> ## KRIGING: autoKrige(YourMeasurements ~ YourExtractedElevationValues,
> YourMeasurementLocations, TargetGrid) OK_snow <- autoKrige(Cumulata ~
> rain_data$ExtractedElevationValues,
> rain_data, grd)
> ------------------------------------------------------------
> -------------------------------------------------------------------
>
> The error I get is:
> Error in autoKrige(Cumulata ~ rain_data$ExtractedElevationValues,
> rain_data,  :
>   Either input_data or new_data is in LongLat, please reproject.
>    input_data:  +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> +ellps=WGS84 +towgs84=0,0,0
>    new_data:    +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
> +ellps=WGS84 +towgs84=0,0,0
>
> but I did pay attention to have the same reference system in
> rain_data, drg and the Digital Elevation Model.
>
> Moreover, if I impose the class of the DEM to SpatialGridDataFrame
> when I extraxt the elevation points from the DEM I get the following error:
> Error in (function (classes, fdef, mtable)  :
>   unable to find an inherited method for function ?extract? for
> signature ?"SpatialGridDataFrame", "SpatialPoints"?
> Calls: extract -> <Anonymous>
>
>
> Would you please somebody help to show me where is my mistake?
>
> Thank you for all your attention
> Stefano
>
>          (oo)
> --oOO--( )--OOo-------------<https://maps.google.com/?q=--oOO--(+)--OOo-------------&entry=gmail&source=g>---
> Stefano Sofia PhD
> Area Meteorologica e  Area nivologica - Centro Funzionale Servizio
> Protezione Civile - Regione Marche Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it><mailto:stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>>
> ---Oo---------oO----------------
> ________________________________________
> Da: R-sig-Geo [r-sig-geo-bounces at r-project.org<mailto:r-sig-geo-bounces at r-project.org><mailto:r-sig-geo-bounces at r-project.org<mailto:r-sig-geo-bounces at r-project.org>>] per conto di Daniel
> Knitter [knitter at geographie.uni-kiel.de<mailto:knitter at geographie.uni-kiel.de><mailto:knitter at geographie.uni-kiel.de<mailto:knitter at geographie.uni-kiel.de>>]
> Inviato: luned? 12 febbraio 2018 9.16
> A: r-sig-geo at r-project.org<mailto:r-sig-geo at r-project.org><mailto:r-sig-geo at r-project.org<mailto:r-sig-geo at r-project.org>>
> Oggetto: Re: [R-sig-Geo]  Interpolating snowfall values on a Digital
> Elevation Model
>
> ...sorry, I missed one step: you need to extract the elevation values
> to your points via extract function from the raster package:
>
> YourPoints$YourExtractedElevationValues <- extract(x = DEM, y =
> YourPoints)
>
> autoKrige(YourMeasurements ~ YourExtractedElevationValues,
> YourMeasurementLocations, TargetGrid)
>
>
> Sorry for spamming.
>
> Best,
> Daniel
>
> On Mon, 12 Feb 2018 08:03:41 +0000
> Stefano Sofia <stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it><mailto:stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>>> wrote:
>
> > Dear list users,
> > I have to produce rainfall maps. I know how to create a
> > (bi-dimensional)
> grid and interpolate rainfall values (from automatic rain gauges) on
> that grid using Kriging:
> >
> > myinterpolation <- autoKrige(myrainfall_cumulate ~ 1, rain_data_UTM,
> mygrid)
> >
> > In reality I am dealing with snowfall values on mountain regions,
> > and in
> this case altitude is an important factor, the use of a Digital
> Elevation Model might make the difference.
> > Looking in the web I found some important material about accessing
> elevation data in R with the "elevatr" package (by J.W.Hollister), I
> am reading it.
> > My concern would then be to interpolate snowfall values on a Digital
> Elevation Model. Did somebody already use R for these kinds of
> calculations? Could somebody share with me some<https://maps.google.com/?q=somebody+share+with+me+some&entry=gmail&source=g> useful hints?
> >
> > Thank you for your attention
> > Stefano Sofia
> >
> >
> >          (oo)
> > --oOO--( )--OOo----------------
> > Stefano Sofia PhD
> > Area Meteorologica e  Area nivologica - Centro Funzionale Servizio
> > Protezione Civile - Regione Marche Via del Colle Ameno 5
> > 60126 Torrette di Ancona, Ancona
> > Uff: 071 806 7743
> > E-mail: stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it><mailto:stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>>
> > ---Oo---------oO----------------
> >
> > ________________________________
> >
> > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu?
> > contenere
> informazioni confidenziali, pertanto ? destinato solo a persone
> autorizzate alla ricezione. I messaggi di posta elettronica per i
> client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare,
> inoltrare o archiviare questo messaggio. Se si ? ricevuto questo
> messaggio per errore, inoltrarlo al mittente ed eliminarlo
> completamente dal sistema del proprio computer. Ai sensi dell?art. 6
> della DGR n. 1394/2008 si segnala che, in caso di necessit? ed
> urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> > IMPORTANT NOTICE: This e-mail message is intended to be received
> > only by
> persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information
> that is confidential and legally privileged. Please do not read, copy,
> forward, or store this message unless you are an intended recipient of
> it. If you have received this message in error, please forward it to
> the sender and delete it completely from your computer system.
> >
> > --
> > This message was scanned by Libra ESVA and is believed to be clean.
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org><mailto:R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>>
> > https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%<https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%25><https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%25>
> 2Fmailman%2Flistinfo%2Fr-sig-geo&e=52342f8a&h=f7d4a649&f=y&p=y
>
>
> --
>
> Dr. Daniel Knitter
> CRC1266 -- Scales of Transformation
> Project A2 "Integrative Modeling of Socio-Environmental Dynamics"
>
> Christian-Albrechts-Universit?t zu Kiel Department of Geography
> Physical Geography -- Landscape Ecology and Geoinformation
> Ludewig-Meyn-Str. 14, room 109 D - 24118 Kiel, Germany
>
> Phone: +49 431 880 2941<tel:+49%20431%208802941>
> Email: knitter at geographie.uni-kiel.de<mailto:knitter at geographie.uni-kiel.de><mailto:knitter at geographie.uni-kiel.de<mailto:knitter at geographie.uni-kiel.de>>
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
> informazioni confidenziali, pertanto ? destinato solo a persone
> autorizzate alla ricezione. I messaggi di posta elettronica per i
> client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare,
> inoltrare o archiviare questo messaggio. Se si ? ricevuto questo
> messaggio per errore, inoltrarlo al mittente ed eliminarlo
> completamente dal sistema del proprio computer. Ai sensi dell?art. 6
> della DGR n. 1394/2008 si segnala che, in caso di necessit? ed
> urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only
> by persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information
> that is confidential and legally privileged. Please do not read, copy,
> forward, or store this message unless you are an intended recipient of
> it. If you have received this message in error, please forward it to
> the sender and delete it completely from your computer system.
>
> --
> This message was scanned by Libra ESVA and is believed to be clean.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org><mailto:R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>>
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org><mailto:R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Geoscience Australia Disclaimer: This e-mail (and files transmitted with it) is intended only for the person or entity to which it is addressed. If you are not the intended recipient, then you have received this e-mail by mistake and any use, dissemination, forwarding, printing or copying of this e-mail and its file attachments is prohibited. The security of emails transmitted cannot be guaranteed; by forwarding or replying to this email, you acknowledge and accept these risks.
-------------------------------------------------------------------------------------------------------------------------


Geoscience Australia Disclaimer: This e-mail (and files transmitted with it) is intended only for the person or entity to which it is addressed. If you are not the intended recipient, then you have received this e-mail by mistake and any use, dissemination, forwarding, printing or copying of this e-mail and its file attachments is prohibited. The security of emails transmitted cannot be guaranteed; by forwarding or replying to this email, you acknowledge and accept these risks.
-------------------------------------------------------------------------------------------------------------------------


        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo
--
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

Geoscience Australia Disclaimer: This e-mail (and files transmitted with it) is intended only for the person or entity to which it is addressed. If you are not the intended recipient, then you have received this e-mail by mistake and any use, dissemination, forwarding, printing or copying of this e-mail and its file attachments is prohibited. The security of emails transmitted cannot be guaranteed; by forwarding or replying to this email, you acknowledge and accept these risks.
-------------------------------------------------------------------------------------------------------------------------


	[[alternative HTML version deleted]]


From gilberto.camara.inpe at gmail.com  Thu Feb 22 18:15:09 2018
From: gilberto.camara.inpe at gmail.com (Gilberto Camara)
Date: Thu, 22 Feb 2018 17:15:09 +0000
Subject: [R-sig-Geo] Announcement: new R package for satellite image time
 series analysis
Message-ID: <CAPPoMFoKOM2E2KzA6vCDhRcMCmeH2MQcDoEfc_c7CQ_5BWCHcA@mail.gmail.com>

Dear R-SIG-GEO members

For those of you that are interested on satellite image time series
analysis, we would like to announce the availability of the beta version of
the R SITS package, which can be obtained from github:
> devtools::install_github("e-sensing/sits").

The SITS package is a set of tools for working with satellite image time
series. Includes data retrieval from a WTSS (web time series service),
different visualisation methods for image time series, smoothing methods
for noisy time series, different clustering methods  including dendrograms
and SOM. Matches noiseless patterns with noisy time series using the TWDTW
method for shape recognition. Provides machine learning methods for time
series classification, including SVM, LDA, QDA, GLM, Lasso, Random Forests
and Deep Learning.

The main purpose of SITS is to perform land use and land cover
classification using time series derived from satellites such as MODIS,
LANDSAT, and SENTINEL-2. It has been finetuned to deliver reasonable
performance for raster data sets in the GeoTIFF format.

The package has been developed by the team of the "e-sensing" project at
INPE (Brazil's National Institute for Space Research), supported by FAPESP
(Sao Paulo Research Foundation). We also received support from
International Climate Initiative of the Germany Federal Ministry for the
Environment, Nature Conservation, Building and Nuclear Safety.

We welcome comments, suggestions and bug reports on the package.  We
suggest that those who are interested take a look at the vignette, that can
be built using the command:
> devtools::build_vignettes()

Best regards
Gilberto
-- 
Prof. Dr. Dr. h.c. Gilberto Camara
National Institute for Space Research, INPE, Brazil
http://www.dpi.inpe.br/gilberto

	[[alternative HTML version deleted]]


From a.mosnier at gmail.com  Fri Feb 23 15:24:18 2018
From: a.mosnier at gmail.com (Arnaud Mosnier)
Date: Fri, 23 Feb 2018 09:24:18 -0500
Subject: [R-sig-Geo] Save plot as Geotiff
In-Reply-To: <alpine.LFD.2.21.1802071954490.6488@reclus.nhh.no>
References: <CANkFkEewBHOEnJnFR-P4rf-UonPn2fQFRSmvXW9x=c3bPL754Q@mail.gmail.com>
 <CANVKczOOCvCZB=n0Wt=xUrX8rOMFmFS_2e1xPikFmTtwy+OztA@mail.gmail.com>
 <alpine.LFD.2.21.1802071954490.6488@reclus.nhh.no>
Message-ID: <CANkFkEcv+eCD42mqxcoJFUYr3NuTpNPdisaW-i3Cj66NOwg5Sw@mail.gmail.com>

Better late than never.
Thanks Roger !

Arnaud

2018-02-07 13:58 GMT-05:00 Roger Bivand <Roger.Bivand at nhh.no>:

> On Wed, 7 Feb 2018, Barry Rowlingson wrote:
>
> I'd do this by saving the image on the graphics device as a PNG, then
>> creating a "world" file (with extension PNGW) from the coordinates of the
>> corners and the resolution of the PNG. This is a six line text file with
>> sufficient information to georeference a grid. That's enough for `gdal` to
>> understand it, and then the `gdal` utilities can convert it to a GeoTIFF
>> (or load into R using `raster` and then save as a GeoTIFF).
>>
>> The tricky bit might be finding the corner coordinates of the graphics
>> device image. This is complicated by R leaving space for margins, or not
>> using your coordinate system.
>>
>
> Right - see the example in ASDAR 1st edition, chapter 4 chunks 42-44 in
>
> http://www.asdar-book.org/data.php?chapter=3 (zero-based php)
>
> which has par(mar=c(0,0,0,0), xaxs="i", yaxs="i") and widths and heights
> from maptools::GE_SpatialGrid().
>
> Roger
>
>
>
>> If this is a base graphics plot using the coordinate system units then you
>> can probably get them via some combination of the par() values, or you
>> might have set the margins to zero and that gives you the corners from
>> par()$usr (I think).
>>
>> If its grid graphics (like spplot) then.... uhhh. someone else probably
>> knows how to do it.
>>
>> Barry
>>
>>
>> On Wed, Feb 7, 2018 at 3:07 PM, Arnaud Mosnier <a.mosnier at gmail.com>
>> wrote:
>>
>> Hi,
>>>
>>> Long version:
>>> I made a plot (a map) including SpatialPolygons representing the coast of
>>> my region of interest, and a SpatialPointsDataframe representing
>>> locations
>>> of cities, and I want to save this map in GeoTiff format to allow other
>>> people to use this map as a georeferenced background without having to
>>> manage the various data sources. Is there a package/function in R that
>>> would allow me to do that?
>>> Note that converting the Spatial* objects to the raster format is not an
>>> option because I want to be able to see the names of the cities on the
>>> map.
>>>
>>>
>>> In short:
>>> Is there a way to save a plot composed of Spatial* elements in a GeoTiff
>>> format?
>>>
>>> Thanks
>>>
>>> Arnaud
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>

	[[alternative HTML version deleted]]


From kent3737 at gmail.com  Sun Feb 25 20:33:30 2018
From: kent3737 at gmail.com (Kent Johnson)
Date: Sun, 25 Feb 2018 14:33:30 -0500
Subject: [R-sig-Geo] Help installing lwgeom on macOS
Message-ID: <CAPP0wyi42Oy_uDbysO7Ygfsox=onCebPKZqbVWjussiHiRcq-A@mail.gmail.com>

I am trying to install lwgeom 0.1-4 from source on macOS 10.13.3.

First try:
R CMD INSTALL lwgeom_0.1-4.tar.gz
...
checking for geos-config... no
no
configure: error: geos-config not found or not executable.

Second try:
R CMD INSTALL lwgeom_0.1-4.tar.gz
--configure-args='-with-geos-config=/Library/Frameworks/GEOS.framework/Versions/3/unix/bin/geos-config'
...
configure: geos-config set to
/Library/Frameworks/GEOS.framework/Versions/3/unix/bin/geos-config
checking geos-config exists... yes
checking geos-config executable... yes
checking geos-config usability... yes
configure: GEOS: 3.6.1
checking GEOS version >= 3.3.0... yes
checking geos_c.h usability... no
checking geos_c.h presence... no
checking for geos_c.h... no
configure: error: geos_c.h not found in given locations.

I do have liblwgeom installed as part of Postgres.app. I have tried adding
--with-liblwgeom=/Applications/Postgres.app/Contents/Versions/10/lib/liblwgeom-2.4.0.dylib
to --configure-args with the same failure.

I have the framework version of GEOS installed from kyngchaos and tried
adding
--configure-vars='CPPFLAGS=-I/Library/Frameworks/GEOS.framework/Versions/3/Headers'
with the same failure.

I don't really know what I'm doing here so any help is appreciated. FWIW
I'm installing lwgeom to get access to the st_make_valid() function.

Thank you!
Kent Johnson

	[[alternative HTML version deleted]]


From kent3737 at gmail.com  Mon Feb 26 02:02:21 2018
From: kent3737 at gmail.com (Kent Johnson)
Date: Sun, 25 Feb 2018 20:02:21 -0500
Subject: [R-sig-Geo] Help installing lwgeom on macOS
In-Reply-To: <CAPP0wyi42Oy_uDbysO7Ygfsox=onCebPKZqbVWjussiHiRcq-A@mail.gmail.com>
References: <CAPP0wyi42Oy_uDbysO7Ygfsox=onCebPKZqbVWjussiHiRcq-A@mail.gmail.com>
Message-ID: <CAPP0wyjkqkvO1wrVrROQoERgp2nhUUtKzX6hKF2Ks2F1CYczkg@mail.gmail.com>

This seems to work:

R CMD INSTALL lwgeom_0.1-4.tar.gz
--configure-args='-with-geos-config=/Library/Frameworks/GEOS.framework/Versions/3/unix/bin/geos-config
--with-liblwgeom=/Applications/Postgres.app/Contents/Versions/10/lib/liblwgeom-2.4.0.dylib'
--configure-vars='PKG_CPPFLAGS="-I/Library/Frameworks/GEOS.framework/Versions/3/unix/include
-I/Library/Frameworks/PROJ.framework/Versions/4/unix/include"' -d

Kent

On Sun, Feb 25, 2018 at 2:33 PM, Kent Johnson <kent3737 at gmail.com> wrote:

> I am trying to install lwgeom 0.1-4 from source on macOS 10.13.3.
>
> First try:
> R CMD INSTALL lwgeom_0.1-4.tar.gz
> ...
> checking for geos-config... no
> no
> configure: error: geos-config not found or not executable.
>
> Second try:
> R CMD INSTALL lwgeom_0.1-4.tar.gz --configure-args='-with-geos-
> config=/Library/Frameworks/GEOS.framework/Versions/3/unix/bin/geos-config'
> ...
> configure: geos-config set to /Library/Frameworks/GEOS.
> framework/Versions/3/unix/bin/geos-config
> checking geos-config exists... yes
> checking geos-config executable... yes
> checking geos-config usability... yes
> configure: GEOS: 3.6.1
> checking GEOS version >= 3.3.0... yes
> checking geos_c.h usability... no
> checking geos_c.h presence... no
> checking for geos_c.h... no
> configure: error: geos_c.h not found in given locations.
>
> I do have liblwgeom installed as part of Postgres.app. I have tried adding
> --with-liblwgeom=/Applications/Postgres.app/Contents/Versions/10/lib/
> liblwgeom-2.4.0.dylib
> to --configure-args with the same failure.
>
> I have the framework version of GEOS installed from kyngchaos and tried
> adding
> --configure-vars='CPPFLAGS=-I/Library/Frameworks/GEOS.
> framework/Versions/3/Headers'
> with the same failure.
>
> I don't really know what I'm doing here so any help is appreciated. FWIW
> I'm installing lwgeom to get access to the st_make_valid() function.
>
> Thank you!
> Kent Johnson
>

	[[alternative HTML version deleted]]


From patrick.schratz at gmail.com  Mon Feb 26 09:31:59 2018
From: patrick.schratz at gmail.com (Patrick Schratz)
Date: Mon, 26 Feb 2018 09:31:59 +0100
Subject: [R-sig-Geo] Help installing lwgeom on macOS
In-Reply-To: <CAPP0wyi42Oy_uDbysO7Ygfsox=onCebPKZqbVWjussiHiRcq-A@mail.gmail.com>
References: <CAPP0wyi42Oy_uDbysO7Ygfsox=onCebPKZqbVWjussiHiRcq-A@mail.gmail.com>
Message-ID: <local-0fbcfbd3-7155-v1.1.4-7e394e68@T430>

Hi Kent,

brew install geos && brew install postgis (for lwgeom) works for me.

On Feb 25 2018, at 8:33 pm, Kent Johnson <kent3737 at gmail.com> wrote:
>
> I am trying to install lwgeom 0.1-4 from source on macOS 10.13.3.
> First try:
> R CMD INSTALL lwgeom_0.1-4.tar.gz
> ...
> checking for geos-config... no
> no
> configure: error: geos-config not found or not executable.
>
> Second try:
> R CMD INSTALL lwgeom_0.1-4.tar.gz
> --configure-args='-with-geos-config=/Library/Frameworks/GEOS.framework/Versions/3/unix/bin/geos-config'
> ...
> configure: geos-config set to
> /Library/Frameworks/GEOS.framework/Versions/3/unix/bin/geos-config
> checking geos-config exists... yes
> checking geos-config executable... yes
> checking geos-config usability... yes
> configure: GEOS: 3.6.1
> checking GEOS version >= 3.3.0... yes
> checking geos_c.h usability... no
> checking geos_c.h presence... no
> checking for geos_c.h... no
> configure: error: geos_c.h not found in given locations.
>
> I do have liblwgeom installed as part of Postgres.app. I have tried adding
> --with-liblwgeom=/Applications/Postgres.app/Contents/Versions/10/lib/liblwgeom-2.4.0.dylib
> to --configure-args with the same failure.
>
> I have the framework version of GEOS installed from kyngchaos and tried
> adding
> --configure-vars='CPPFLAGS=-I/Library/Frameworks/GEOS.framework/Versions/3/Headers'
> with the same failure.
>
> I don't really know what I'm doing here so any help is appreciated. FWIW
> I'm installing lwgeom to get access to the st_make_valid() function.
>
> Thank you!
> Kent Johnson
>
> [[alternative HTML version deleted]]
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


	[[alternative HTML version deleted]]


