From r.hijmans at gmail.com  Fri Jun  1 07:02:22 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 31 May 2012 22:02:22 -0700
Subject: [R-sig-Geo] Raster package: list vs arrays for creating a
	raster brick
In-Reply-To: <CABP0dEg-f1q8XCihCB+i3VZvD5geED7v2wVPhXg9jaJPrd-WBQ@mail.gmail.com>
References: <CABP0dEg-f1q8XCihCB+i3VZvD5geED7v2wVPhXg9jaJPrd-WBQ@mail.gmail.com>
Message-ID: <CANtt_hyR_nzdySUZam74XHb2yz6QCYWxsKqX=j5Xde5NSYO+2g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120531/a16c5347/attachment.pl>

From rafael.wueest at wsl.ch  Fri Jun  1 09:39:45 2012
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Fri, 1 Jun 2012 09:39:45 +0200
Subject: [R-sig-Geo] extract by attributes from raster-image to polygons
In-Reply-To: <1337966033027-7576826.post@n2.nabble.com>
References: <1337966033027-7576826.post@n2.nabble.com>
Message-ID: <1BA9F5BA-D0B4-4059-9FCE-D2DB4204749B@wsl.ch>

Hi Benny

I once had the same problem and couldn't find a solution, so I coded a workaround. Adjusted to your example, this will look like:

library(rgeos)
library(raster)
library(maptools)
im=brick("P1020393.JPG")
extract=(im[[1]]>50)&(im[[2]]>180)&(im[[3]]>220)
poly_dissolve=rasterToPolygons(extract,fun=function(x){x==1},dissolve=T)

len<-length(poly_dissolve at polygons[[1]]@Polygons)

pol<-poly_dissolve
pol at plotOrder<-1:len
pol at data<-data.frame(1:len)

for(i in 1:len){
   pol at polygons[[i]]<-Polygons(list(poly_dissolve at polygons[[1]]@Polygons[[i]]),i)
}

plot(pol,col=rainbow(len))

May not be the most elegant way, but it solved my problem.

HTH,
Rafi


On 25.05.2012, at 19:13, BennyB wrote:

> Dear Geo List, 
> 
> Before I ask my question let me apologize for my lack of knowledge about
> spatial information processing in R, being merely a field biologist.. 
> 
> What I am trying to achieve is the quantification of a bunch of marks
> (rodent scent marks) in a picture (jpeg - 
> http://r-sig-geo.2731867.n2.nabble.com/file/n7576826/P1020393.JPG
> P1020393.JPG ). 
> This means I need to know how many marks there are, and what each mark's
> area is. 
> 
> I manage to import the image and to extract only the marks using an "extract
> by attributes" of the three RGB band values of the image. 
> This gives me a raster layer with values 1 for the marks I want, and values
> 0 for everything else. 
> I then use the rasterToPolygons function, which can convert the raster file
> to a Spatial Polygon Dataframe. 
> 
> My problem now is the following: 
> The rasterToPolygons function gives me either one polygon for each pixel
> value in the raster image (dissolve=FALSE), or one multipolygon that
> contains all the marks (dissolve=TRUE). 
> I then do not manage to either aggregate the many polygons into one polygon
> for each mark, or to separate the multipolygon into many polygons that each
> represent a mark. 
> For the former I have tried using the unionSpatialPolygons function, but
> this again gives me only one big multipolygon instead of one polygon for
> each mark. 
> 
> I have been looking like crazy on the internet and in manuals, but being
> having a big lack of knowledge of the precise terminology of GIS processes,
> this has been proving fruitless. 
> 
> Probably it is something very trivial I am missing, so if anybody can point
> me in the right direction I would be extremely grateful! 
> 
> Many thanks, 
> 
> Benny 
> 
> Below you can see the script I have been using, and attached you can find
> the original jpg image of the marks. 
> ---------------- 
> 
> library(raster);library(maptools) 
> im=brick("P1020393.JPG") 
> extract=(im[[1]]>50)&(im[[2]]>180)&(im[[3]]>220) 
> 
> # using the dissolve=T option 
> poly_dissolve=rasterToPolygons(extract,fun=function(x){x==1},dissolve=T) 
> # this gives me one big multipolygon and not one polygon for each mark 
> 
> # using the dissolve=F option 
> poly_no_dissolve=rasterToPolygons(extract,fun=function(x){x==1},dissolve=F) 
> # this gives me one polygon for each pixel having value=1 
> # I then try to create aggregate those polygons, which again gives me only
> one multipolygon 
> uni_poly=unionSpatialPolygons(poly_no_dissolve,cut(pol_no_dissolve[,1],
> quantile(pol_no_dissolve[,1]), include.lowest=TRUE))) 
> 
> -----------------
> http://r-sig-geo.2731867.n2.nabble.com/file/n7576826/P1020393.JPG
> P1020393.JPG 
> 
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/extract-by-attributes-from-raster-image-to-polygons-tp7576826.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest


From HodgessE at uhd.edu  Fri Jun  1 09:54:17 2012
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Fri, 1 Jun 2012 02:54:17 -0500
Subject: [R-sig-Geo] simulating a particular autocorrelation structure for a
	raster
Message-ID: <586A4828D7AAA04CA9B258C50A28DA200BF592CD@BALI.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120601/6afb22f7/attachment.pl>

From gilles.entringer at hotmail.fr  Fri Jun  1 10:24:50 2012
From: gilles.entringer at hotmail.fr (gilles2604)
Date: Fri, 1 Jun 2012 01:24:50 -0700 (PDT)
Subject: [R-sig-Geo] rgdal Windows change Path to GDAL shared files / not
 all the Drivers
Message-ID: <1338539090425-7580079.post@n2.nabble.com>

Hello

I already used rgdal successfully on Mac and on Linux/Ubuntu...

Now I try to make it work on Windows 7 (64 bit).

I have installed GDAL 1.9.1 on my system, but when I do : library(rgdal), I
get this:

/Geospatial Data Abstraction Library extensions to R successfully loaded
Loaded GDAL runtime: GDAL 1.9.0, released 2011/12/29
Path to GDAL shared files: C:/Program Files/R/R-2.15.0/library/rgdal/gdal
Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009, [PJ_VERSION: 470]
Path to PROJ.4 shared files: C:/Program Files/R/R-2.15.0/library/rgdal/proj/

I know that for Mac and Linux, rgdal uses the drivers of the gdal-version
installed on the system...

On Windows it seems to be different, I already change my GDAL_DATA and
GDAL_DATA variables, it didn't helped...

What I need arer the Postgisraster and the PostgreSQL driver...

Anybody has an idea how I could change this?

Thanks a lot



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/rgdal-Windows-change-Path-to-GDAL-shared-files-not-all-the-Drivers-tp7580079.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From m.fairbrother at bristol.ac.uk  Fri Jun  1 10:28:22 2012
From: m.fairbrother at bristol.ac.uk (Malcolm Fairbrother)
Date: Fri, 1 Jun 2012 09:28:22 +0100
Subject: [R-sig-Geo]
 =?windows-1252?q?=22rasterize=22_changes_the_data_val?=
 =?windows-1252?q?ues=85_why=3F?=
In-Reply-To: <CANtt_hwcJW2HeHVw6GK231+mAgTvNhkMueFOFBOCipsX8KdgRA@mail.gmail.com>
References: <DF63E788-9059-4C3B-B582-6C8C85D5F52B@bristol.ac.uk>
	<CANtt_hwcJW2HeHVw6GK231+mAgTvNhkMueFOFBOCipsX8KdgRA@mail.gmail.com>
Message-ID: <CCF3A2DE-7FA5-4247-B2E5-5DA807FC881D@bristol.ac.uk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120601/d3c474e7/attachment.pl>

From edzer.pebesma at uni-muenster.de  Fri Jun  1 10:58:58 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 01 Jun 2012 10:58:58 +0200
Subject: [R-sig-Geo] simulating a particular autocorrelation structure
 for a raster
In-Reply-To: <586A4828D7AAA04CA9B258C50A28DA200BF592CD@BALI.uhd.campus>
References: <586A4828D7AAA04CA9B258C50A28DA200BF592CD@BALI.uhd.campus>
Message-ID: <4FC88452.30606@uni-muenster.de>

Erin, I believe the following would do this:

xy = expand.grid(x = 1:16, y = 1:16)
d = as.matrix(dist(xy))
sim = chol(0.9 ^ d) %*% rnorm(256)

require(sp)
grd = SpatialPointsDataFrame(SpatialPoints(xy), data.frame(sim=sim))
gridded(grd) = TRUE
spplot(grd, col.regions=bpy.colors())

I used distance instead of closeness, so the diagional neighbour cell
gets autocorrelation 0.9 ^ sqrt(2), instead of 0.9 ^ 2 as you suggest.

To me, the simulations look really funny, so either my procedure is
wrong, or the covariance structure as you suggested (or I interpreted)
has strange properties in 2D.


On 06/01/2012 09:54 AM, Hodgess, Erin wrote:
> Dear R Sig Geo People:
> 
> I would like to create a 16x16 raster, say, with autocorrelation structure of 0.9 for nearest cell, 0.9^2 for 2nd closest, and so on.
> 
> How would I go about generating that, please?
> 
> I thought about putting together a correlation matrix, multiplying, and throwing in rnorm.  But I'm sure that there is something better and easier already in place.
> 
> Thanks in advance for any help.
> 
> Sincerely,
> Erin
> 
> 
> Erin M. Hodgess, PhD
> Associate Professor
> Department of Computer and Mathematical Sciences
> University of Houston - Downtown
> mailto: hodgesse at uhd.edu
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From HodgessE at uhd.edu  Fri Jun  1 11:09:57 2012
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Fri, 1 Jun 2012 04:09:57 -0500
Subject: [R-sig-Geo] simulating a particular autocorrelation structure
	for a raster
References: <586A4828D7AAA04CA9B258C50A28DA200BF592CD@BALI.uhd.campus>
	<4FC88452.30606@uni-muenster.de>
Message-ID: <586A4828D7AAA04CA9B258C50A28DA200BF592CE@BALI.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120601/fa69b6ab/attachment.pl>

From Roger.Bivand at nhh.no  Fri Jun  1 11:44:43 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 1 Jun 2012 11:44:43 +0200 (CEST)
Subject: [R-sig-Geo] rgdal Windows change Path to GDAL shared files /
 not all the Drivers
In-Reply-To: <1338539090425-7580079.post@n2.nabble.com>
References: <1338539090425-7580079.post@n2.nabble.com>
Message-ID: <alpine.LRH.2.02.1206011135210.13653@reclus.nhh.no>

On Fri, 1 Jun 2012, gilles2604 wrote:

> Hello
>
> I already used rgdal successfully on Mac and on Linux/Ubuntu...
>
> Now I try to make it work on Windows 7 (64 bit).
>
> I have installed GDAL 1.9.1 on my system, but when I do : library(rgdal), I
> get this:
>
> /Geospatial Data Abstraction Library extensions to R successfully loaded
> Loaded GDAL runtime: GDAL 1.9.0, released 2011/12/29
> Path to GDAL shared files: C:/Program Files/R/R-2.15.0/library/rgdal/gdal
> Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009, [PJ_VERSION: 470]
> Path to PROJ.4 shared files: C:/Program Files/R/R-2.15.0/library/rgdal/proj/
>
> I know that for Mac and Linux, rgdal uses the drivers of the gdal-version
> installed on the system...

No, this always depends on which rgdal package (binary from where, or 
source) is installed. On Linux, the package must be installed from source, 
so the external dependencies have to be met on the system. On OSX, if 
rgdal is installed from source against for example Kyngchaos frameworks, 
or as a binary package from Kyngchaos, you would be correct. But if it is 
installed as a binary from CRAN Extras, GDAL is linked static. The same 
applies to the CRAN Windows rgdal binary - GDAL is linked static.

>
> On Windows it seems to be different, I already change my GDAL_DATA and
> GDAL_DATA variables, it didn't helped...

To use a local GDAL on Windows, you would need to install from source, 
possibly following one of the routes described in:

file.show(system.file("README.windows", package="rgdal"))

but these notes are very context-specific, and in some cases dated.

Hope this clarifies,

Roger

>
> What I need arer the Postgisraster and the PostgreSQL driver...
>
> Anybody has an idea how I could change this?
>
> Thanks a lot
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/rgdal-Windows-change-Path-to-GDAL-shared-files-not-all-the-Drivers-tp7580079.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From gilles.entringer at hotmail.fr  Fri Jun  1 12:29:48 2012
From: gilles.entringer at hotmail.fr (gilles2604)
Date: Fri, 1 Jun 2012 03:29:48 -0700 (PDT)
Subject: [R-sig-Geo] rgdal Windows change Path to GDAL shared files /
 not all the Drivers
In-Reply-To: <alpine.LRH.2.02.1206011135210.13653@reclus.nhh.no>
References: <1338539090425-7580079.post@n2.nabble.com>
	<alpine.LRH.2.02.1206011135210.13653@reclus.nhh.no>
Message-ID: <1338546588614-7580084.post@n2.nabble.com>

Tank you, I know understand the problem even if I don't understand why the
static gdal 1.9 doesn't support Postgisraster and Postgres driver (GDAL
1.9.0 normally does).

I tried to install the package from source, but it doesn't work...:

/> install.packages(type="source",c("C:/rgdal_0.7-11.tar.gz"))
Installing package(s) into ?C:/Program Files/R/R-2.15.0/library?
(as ?lib? is unspecified)
inferring 'repos = NULL' from the file name
* installing *source* package 'rgdal' ...
** package 'rgdal' correctement d?compress? et sommes MD5 v?rifi?es
ERROR: configuration failed for package 'rgdal'
* removing 'C:/Program Files/R/R-2.15.0/library/rgdal'
Warning in install.packages :
  l'ex?cution de la commande 'C:/PROGRA~1/R/R-215~1.0/bin/x64/R CMD INSTALL
-l "C:/Program Files/R/R-2.15.0/library"   "C:/rgdal_0.7-11.tar.gz"' renvoie
un statut 1
Warning in install.packages :
  installation of package ?C:/rgdal_0.7-11.tar.gz? had non-zero exit status/

Does anybody had the same problem while installing a package from source?

Thank you

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/rgdal-Windows-change-Path-to-GDAL-shared-files-not-all-the-Drivers-tp7580079p7580084.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Roger.Bivand at nhh.no  Fri Jun  1 12:59:46 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 1 Jun 2012 12:59:46 +0200 (CEST)
Subject: [R-sig-Geo] rgdal Windows change Path to GDAL shared files /
 not all the Drivers
In-Reply-To: <1338546588614-7580084.post@n2.nabble.com>
References: <1338539090425-7580079.post@n2.nabble.com>
	<alpine.LRH.2.02.1206011135210.13653@reclus.nhh.no>
	<1338546588614-7580084.post@n2.nabble.com>
Message-ID: <alpine.LRH.2.02.1206011246110.13653@reclus.nhh.no>

On Fri, 1 Jun 2012, gilles2604 wrote:

> Tank you, I know understand the problem even if I don't understand why the
> static gdal 1.9 doesn't support Postgisraster and Postgres driver (GDAL
> 1.9.0 normally does).

What GDAL supports is dependent on its external links to other software. 
GDAL can be built with a small set of external dependencies, or a larger 
set. The drivers used for the CRAN Extras OSX rgdal binary, and the CRAN 
Windows rgdal binary are a small subset of all possible drivers, and do 
not include those you are interested in. So GDAL 1.9 may be build with or 
without drivers, there is nothing like "normal support".

>
> I tried to install the package from source, but it doesn't work...:
>

This is only going to work if you have taken many steps requiring care and 
insight first, and then only as R CMD INSTALL rgdal, after having 
downloaded the source package and edited files within it as shown in the 
README I refered to. If you do not understand the README, and do not have 
local help to show you how for example to use OSGeo4W (I'm not sure that 
OSGeo4W provides GDAL with PostGIS) and Microsoft compilers and linkers, 
in addition to RTools, you should either give up, or ask whether any other 
list member has built a GDAL/rgdal combination against the same 
PostGIS/PostgreSQL versions that you are using.

Roger

> /> install.packages(type="source",c("C:/rgdal_0.7-11.tar.gz"))
> Installing package(s) into ?C:/Program Files/R/R-2.15.0/library?
> (as ?lib? is unspecified)
> inferring 'repos = NULL' from the file name
> * installing *source* package 'rgdal' ...
> ** package 'rgdal' correctement d?compress? et sommes MD5 v?rifi?es
> ERROR: configuration failed for package 'rgdal'
> * removing 'C:/Program Files/R/R-2.15.0/library/rgdal'
> Warning in install.packages :
>  l'ex?cution de la commande 'C:/PROGRA~1/R/R-215~1.0/bin/x64/R CMD INSTALL
> -l "C:/Program Files/R/R-2.15.0/library"   "C:/rgdal_0.7-11.tar.gz"' renvoie
> un statut 1
> Warning in install.packages :
>  installation of package ?C:/rgdal_0.7-11.tar.gz? had non-zero exit status/
>
> Does anybody had the same problem while installing a package from source?
>
> Thank you
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/rgdal-Windows-change-Path-to-GDAL-shared-files-not-all-the-Drivers-tp7580079p7580084.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From benny.borremans at ua.ac.be  Fri Jun  1 15:29:00 2012
From: benny.borremans at ua.ac.be (BennyB)
Date: Fri, 1 Jun 2012 06:29:00 -0700 (PDT)
Subject: [R-sig-Geo] extract by attributes from raster-image to polygons
In-Reply-To: <1BA9F5BA-D0B4-4059-9FCE-D2DB4204749B@wsl.ch>
References: <1337966033027-7576826.post@n2.nabble.com>
	<1BA9F5BA-D0B4-4059-9FCE-D2DB4204749B@wsl.ch>
Message-ID: <1338557340371-7580086.post@n2.nabble.com>

That works perfectly.

Thanks so much Rafael, you are a true hero!



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/extract-by-attributes-from-raster-image-to-polygons-tp7576826p7580086.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From E.Thomas at CGIAR.ORG  Fri Jun  1 17:36:44 2012
From: E.Thomas at CGIAR.ORG (Thomas, Evert (Bioversity-Colombia))
Date: Fri, 1 Jun 2012 15:36:44 +0000
Subject: [R-sig-Geo] how to combine one background color wih color gradient
 in KML function of Raster package
Message-ID: <BAD0F95A023D904C8DAA193192ECE140326170@CIATMB1.CIAT.CGIARAD.ORG>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120601/65af140d/attachment.pl>

From lass at st-and.ac.uk  Fri Jun  1 17:40:07 2012
From: lass at st-and.ac.uk (Lindesay Scott-Hayward)
Date: Fri, 1 Jun 2012 16:40:07 +0100
Subject: [R-sig-Geo] alpha hull
Message-ID: <CAOmjm46o5uUEDTx35xf5RPTp2jgxi7ruYuYotxAwAYcfeQuorA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120601/9b564769/attachment.pl>

From r.hijmans at gmail.com  Fri Jun  1 18:29:11 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 1 Jun 2012 09:29:11 -0700
Subject: [R-sig-Geo]
	=?windows-1252?q?=22rasterize=22_changes_the_data_val?=
	=?windows-1252?q?ues=85_why=3F?=
In-Reply-To: <CCF3A2DE-7FA5-4247-B2E5-5DA807FC881D@bristol.ac.uk>
References: <DF63E788-9059-4C3B-B582-6C8C85D5F52B@bristol.ac.uk>
	<CANtt_hwcJW2HeHVw6GK231+mAgTvNhkMueFOFBOCipsX8KdgRA@mail.gmail.com>
	<CCF3A2DE-7FA5-4247-B2E5-5DA807FC881D@bristol.ac.uk>
Message-ID: <CANtt_hzyWx4zfgV7jAx_Km5r0kepj6iGCoPHCZw8jYhfqoqu2g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120601/b53c829d/attachment.pl>

From r.hijmans at gmail.com  Fri Jun  1 19:20:21 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 1 Jun 2012 10:20:21 -0700
Subject: [R-sig-Geo] how to combine one background color wih color
 gradient in KML function of Raster package
In-Reply-To: <BAD0F95A023D904C8DAA193192ECE140326170@CIATMB1.CIAT.CGIARAD.ORG>
References: <BAD0F95A023D904C8DAA193192ECE140326170@CIATMB1.CIAT.CGIARAD.ORG>
Message-ID: <CANtt_hz5kUWCQrW=vs_ggnPxQeuc6On8M8GUxYKriJWyY=-26g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120601/3c4eb75d/attachment.pl>

From thi_veloso at yahoo.com.br  Fri Jun  1 20:49:23 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Fri, 1 Jun 2012 11:49:23 -0700 (PDT)
Subject: [R-sig-Geo] Crop a raster using a shapefile
Message-ID: <1338576563.61385.YahooMailNeo@web161404.mail.bf1.yahoo.com>

? Dear all,

? When cropping a raster using a shapefile, through 'crop' function from "raster" package, only the extent is taken into account:

> r<-raster("lai2011361.Lai_1km.tif")
> extent(r)

class ? ? ? : Extent?
xmin ? ? ? ?: -104.4326?
xmax ? ? ? ?: -29.99736?
ymin ? ? ? ?: -40.00064?
ymax ? ? ? ?: 10?

> br<-readShapePoly("/mnt/disco3/MODIS/shapes/brazil.shp")

> extent(br)

class ? ? ? : Extent?
xmin ? ? ? ?: -73.83943?
xmax ? ? ? ?: -34.8581?
ymin ? ? ? ?: -33.77086?
ymax ? ? ? ?: 5.38289?

> c<-crop(r,br)

> extent(c)
class ? ? ? : Extent?
xmin ? ? ? ?: -73.83772?
xmax ? ? ? ?: -34.85554?
ymin ? ? ? ?: -33.76852?
ymax ? ? ? ?: 5.38428?

? However, the cropped raster is rectangular. Is there any way to keep also the "shape" of a shapefile (and not only its extent) when performing this kind of crop operation?

? Thanks in advance,
? Thiago.


From rafael.wueest at wsl.ch  Fri Jun  1 21:17:49 2012
From: rafael.wueest at wsl.ch (rafael.wueest at wsl.ch)
Date: Fri, 1 Jun 2012 21:17:49 +0200
Subject: [R-sig-Geo] Crop a raster using a shapefile
In-Reply-To: <1338576563.61385.YahooMailNeo@web161404.mail.bf1.yahoo.com>
Message-ID: <3AEDE965-B566-4C6D-B339-58F6A239218D@wsl.ch>


Check out ?mask

Rafi

--
Rafael W?est
Swiss Federal Research Institute WSL
Zuercherstrasse 111
8903 Birmensdorf

Am 01.06.2012 um 20:51 schrieb "Thiago Veloso" <thi_veloso at yahoo.com.br>:

>   Dear all,
>
>   When cropping a raster using a shapefile, through 'crop' function from
"raster" package, only the extent is taken into account:
>
> > r<-raster("lai2011361.Lai_1km.tif")
> > extent(r)
>
> class       : Extent
> xmin        : -104.4326
> xmax        : -29.99736
> ymin        : -40.00064
> ymax        : 10
>
> > br<-readShapePoly("/mnt/disco3/MODIS/shapes/brazil.shp")
>
> > extent(br)
>
> class       : Extent
> xmin        : -73.83943
> xmax        : -34.8581
> ymin        : -33.77086
> ymax        : 5.38289
>
> > c<-crop(r,br)
>
> > extent(c)
> class       : Extent
> xmin        : -73.83772
> xmax        : -34.85554
> ymin        : -33.76852
> ymax        : 5.38428
>
>   However, the cropped raster is rectangular. Is there any way to keep
also the "shape" of a shapefile (and not only its extent) when performing
this kind of crop operation?
>
>   Thanks in advance,
>   Thiago.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

From piero.campa at gmail.com  Fri Jun  1 21:29:03 2012
From: piero.campa at gmail.com (Piero Campalani)
Date: Fri, 1 Jun 2012 21:29:03 +0200
Subject: [R-sig-Geo] How to properly use rsaga.close.gaps()
In-Reply-To: <1338392215538-7579969.post@n2.nabble.com>
References: <1337511983831-7567747.post@n2.nabble.com>
	<CAMp9JaMbgGEXPVO0m0jcPYHeAofQxvppS=RK5MiQF17VHyBguA@mail.gmail.com>
	<1338392215538-7579969.post@n2.nabble.com>
Message-ID: <CAMp9JaPX+Bj477EjjFYWucea0RGKh2sd8hzQU84k25yZza2Urg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120601/9da8924d/attachment.pl>

From r.hijmans at gmail.com  Fri Jun  1 23:23:18 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 1 Jun 2012 14:23:18 -0700
Subject: [R-sig-Geo] extract by attributes from raster-image to polygons
In-Reply-To: <1338557340371-7580086.post@n2.nabble.com>
References: <1337966033027-7576826.post@n2.nabble.com>
	<1BA9F5BA-D0B4-4059-9FCE-D2DB4204749B@wsl.ch>
	<1338557340371-7580086.post@n2.nabble.com>
Message-ID: <CANtt_hzmEuXQPSQYxng-ZakWFsZYUo-6Dto7_GDYHEHmATVedA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120601/c960c273/attachment.pl>

From chrjan70 at gmail.com  Sat Jun  2 00:28:40 2012
From: chrjan70 at gmail.com (Christian Jansson)
Date: Fri, 1 Jun 2012 18:28:40 -0400
Subject: [R-sig-Geo] Concave hull of lat lon points?
Message-ID: <CAAHdiqz_8341JzG4BKMzdWVe6BJvwdREVi2P1sDn4H9Fi2hUMA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120601/ca22baf4/attachment.pl>

From mdsumner at gmail.com  Sat Jun  2 05:05:08 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 2 Jun 2012 13:05:08 +1000
Subject: [R-sig-Geo] Concave hull of lat lon points?
In-Reply-To: <CAAHdiqz_8341JzG4BKMzdWVe6BJvwdREVi2P1sDn4H9Fi2hUMA@mail.gmail.com>
References: <CAAHdiqz_8341JzG4BKMzdWVe6BJvwdREVi2P1sDn4H9Fi2hUMA@mail.gmail.com>
Message-ID: <CAAcGz994s_xNjw8HFsnhaJtrfUM43XdrAHdV1B=4QRn4YAiCOg@mail.gmail.com>

Try the alphahull package, it's not integrated with the sp family but
it's simple enough.



On Sat, Jun 2, 2012 at 8:28 AM, Christian Jansson <chrjan70 at gmail.com> wrote:
> Hi,
>
> I have a large set of points (lat lon) for which I must find the hull. The
> functions rgeos::gConvexHull followed by rgeos::gBuffer work well when the
> points are grouped together in a circular fashion, but not when the points
> are for example in a banana shape (when it is better if the hull turns in).
>
> Is there a method to do it in R?
>
> Have a nice weekend everyone.
>
> /Chris
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Michael Sumner
Hobart, Australia
e-mail: mdsumner at gmail.com


From grothered at gmail.com  Sat Jun  2 15:32:20 2012
From: grothered at gmail.com (Gareth Davies)
Date: Sat, 02 Jun 2012 23:32:20 +1000
Subject: [R-sig-Geo] Concave hull of lat lon points?
Message-ID: <4FCA15E4.4030108@gmail.com>

Hi,
One approach is make a buffer around all your points and then merge, so 
that the resulting polygon contains all your points and is connected. 
Then, you can somewhat undo this buffer if needed, by taking a buffer 
with negative width. For example:

library(sp)
library(rgeos)

# Make up some 'banana shaped' points
mypts=cbind(runif(100),runif(100))
keep=4*(mypts[,1]-0.5)**2 + 0.2 > mypts[,2]
mypts=mypts[keep,]

# Coerce to SpatialPointsDataframe
mypts2=SpatialPointsDataFrame(mypts,data=data.frame(NA*mypts[,1]), 
match.ID=F)

# Now take a buffer that covers up all the points
# You will need to decide on an appropriate 'width' argument so that the 
region is connected
buf1=gBuffer(mypts2, width=0.3,byid=T)
buf1_union=gUnionCascaded(buf1) # Take the union -- so this polygon will 
contain all your points
# Now partly 'undo' the buffer -- again, experimentation is needed to 
choose the width
buf_final=gBuffer(buf1_union,width=-0.2)

# This should look okay
plot(buf_final)
points(mypts,col=2)



Cheers,
Gareth.


From gilles.entringer at hotmail.fr  Sat Jun  2 17:03:16 2012
From: gilles.entringer at hotmail.fr (gilles2604)
Date: Sat, 2 Jun 2012 08:03:16 -0700 (PDT)
Subject: [R-sig-Geo] rgdal Windows change Path to GDAL shared files /
 not all the Drivers
In-Reply-To: <alpine.LRH.2.02.1206011246110.13653@reclus.nhh.no>
References: <1338539090425-7580079.post@n2.nabble.com>
	<alpine.LRH.2.02.1206011135210.13653@reclus.nhh.no>
	<1338546588614-7580084.post@n2.nabble.com>
	<alpine.LRH.2.02.1206011246110.13653@reclus.nhh.no>
Message-ID: <1338649396029-7580098.post@n2.nabble.com>

Ok, I really try to understand the READ ME, but its quiet difficult to me
because i'm not used to windows...

What i fond was this:


/Run in OSGeo4W console, after setting:

set OSGEO4W_BUILD=yes
set GDAL_HOME=%OSGEO4W_ROOT%

cd rgdal/src

cl /MT /Ox /EHsc /D "WIN32" /c /I "C:/Program Files/R/R-2.8.1/include" /I
C:/OSGeo4W/include /I "C:\Program Files\Microsoft Visual Studio
9.0\VC\include" /D OSGEO4W *.cpp

link /dll /out:rgdal.dll /def:rgdal.def *.obj "C:\Program
Files\R\R-2.8.1\bin\Rdll.lib" /libpath:"C:\Program Files\Microsoft Visual
Studio 9.0\VC\lib" /libpath:"C:\Program Files\Microsoft
SDKs\Windows\v6.0A\Lib" /libpath:"C:\OSGeo4W\lib" gdal_i.lib proj_i.lib

cd ../..

Set Makefile.win as below to all:!!

R CMD INSTALL --build rgdal/

So I have a few questions:

1. OSGeo4W console is this the OSGeo4W shell (simple shell with OSGeo4W as
administrator?)
2. Do I have to run all these commands in this shell?
3. when I do cl... i get the following message: cl is not recognized as a
command...

I'm really desperate, it is the last part of my work...

Maybe you can help me?

Thanks a lot in advance

Gilles 

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/rgdal-Windows-change-Path-to-GDAL-shared-files-not-all-the-Drivers-tp7580079p7580098.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Roger.Bivand at nhh.no  Sat Jun  2 17:57:20 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 2 Jun 2012 17:57:20 +0200 (CEST)
Subject: [R-sig-Geo] rgdal Windows change Path to GDAL shared files /
 not all the Drivers
In-Reply-To: <1338649396029-7580098.post@n2.nabble.com>
References: <1338539090425-7580079.post@n2.nabble.com>
	<alpine.LRH.2.02.1206011135210.13653@reclus.nhh.no>
	<1338546588614-7580084.post@n2.nabble.com>
	<alpine.LRH.2.02.1206011246110.13653@reclus.nhh.no>
	<1338649396029-7580098.post@n2.nabble.com>
Message-ID: <alpine.LRH.2.02.1206021711370.18656@reclus.nhh.no>

On Sat, 2 Jun 2012, gilles2604 wrote:

> Ok, I really try to understand the READ ME, but its quiet difficult to me
> because i'm not used to windows...
>
> What i fond was this:
>
>
> /Run in OSGeo4W console, after setting:
>
> set OSGEO4W_BUILD=yes
> set GDAL_HOME=%OSGEO4W_ROOT%
>
> cd rgdal/src
>
> cl /MT /Ox /EHsc /D "WIN32" /c /I "C:/Program Files/R/R-2.8.1/include" /I
> C:/OSGeo4W/include /I "C:\Program Files\Microsoft Visual Studio
> 9.0\VC\include" /D OSGEO4W *.cpp
>
> link /dll /out:rgdal.dll /def:rgdal.def *.obj "C:\Program
> Files\R\R-2.8.1\bin\Rdll.lib" /libpath:"C:\Program Files\Microsoft Visual
> Studio 9.0\VC\lib" /libpath:"C:\Program Files\Microsoft
> SDKs\Windows\v6.0A\Lib" /libpath:"C:\OSGeo4W\lib" gdal_i.lib proj_i.lib
>
> cd ../..
>
> Set Makefile.win as below to all:!!
>
> R CMD INSTALL --build rgdal/
>
> So I have a few questions:
>
> 1. OSGeo4W console is this the OSGeo4W shell (simple shell with OSGeo4W as
> administrator?)
> 2. Do I have to run all these commands in this shell?
> 3. when I do cl... i get the following message: cl is not recognized as a
> command...
>
> I'm really desperate, it is the last part of my work...
>
> Maybe you can help me?

I don't think that the list can help - you need local help, really. The 
notes were made for a specific version of OSGeo4W and have not been kept 
updated, so you would need to adapt to your platform. If you don't know 
what cl is, this suggests that you should stay on the platforms for which 
you have compilers (cl is a compiler).

Roger

>
> Thanks a lot in advance
>
> Gilles
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/rgdal-Windows-change-Path-to-GDAL-shared-files-not-all-the-Drivers-tp7580079p7580098.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From jgrn at illinois.edu  Sun Jun  3 22:45:31 2012
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Sun, 3 Jun 2012 15:45:31 -0500
Subject: [R-sig-Geo] Dummies guide to getting HPC working on R
Message-ID: <CABG0rfvk8AuhYWX+dUtSsa-f7Mw1DaSRobWBwSRZSW6wXeXKZA@mail.gmail.com>

R-folks:  Sorry for the cross-posting, but I wanted to share a link to
a (fairly long) blog post I created which tries to take the mystery
out of getting R setup for doing high performance/parallel computing
if you have to compile R from scratch:

http://lostingeospace.blogspot.com/2012/06/r-and-hpc-blas-mpi-in-linux-environment.html

Let me know if you have any comments/corrections on it.  Cheers!

--j

-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
http://www.geog.illinois.edu/people/JonathanGreenberg.html


From moshersteven at gmail.com  Mon Jun  4 04:22:29 2012
From: moshersteven at gmail.com (steven mosher)
Date: Sun, 3 Jun 2012 19:22:29 -0700
Subject: [R-sig-Geo] Crop a raster using a shapefile
In-Reply-To: <1338576563.61385.YahooMailNeo@web161404.mail.bf1.yahoo.com>
References: <1338576563.61385.YahooMailNeo@web161404.mail.bf1.yahoo.com>
Message-ID: <CAFFLneSa=eC-g2zHyo2cFjG0c161cV7nz9+19VaHD80Oea2S1A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120603/fe798b44/attachment.pl>

From mauricio.zambrano at jrc.ec.europa.eu  Mon Jun  4 10:46:27 2012
From: mauricio.zambrano at jrc.ec.europa.eu (Mauricio Zambrano-Bigiarini)
Date: Mon, 04 Jun 2012 10:46:27 +0200
Subject: [R-sig-Geo] Crop a raster using a shapefile
In-Reply-To: <1338576563.61385.YahooMailNeo@web161404.mail.bf1.yahoo.com>
References: <1338576563.61385.YahooMailNeo@web161404.mail.bf1.yahoo.com>
Message-ID: <4FCC75E3.6070501@jrc.ec.europa.eu>

On 01/06/12 20:49, Thiago Veloso wrote:
>    Dear all,
>
>    When cropping a raster using a shapefile, through 'crop' function from "raster" package, only the extent is taken into account:
>
>> r<-raster("lai2011361.Lai_1km.tif")
>> extent(r)
>
> class       : Extent
> xmin        : -104.4326
> xmax        : -29.99736
> ymin        : -40.00064
> ymax        : 10
>
>> br<-readShapePoly("/mnt/disco3/MODIS/shapes/brazil.shp")
>
>> extent(br)
>
> class       : Extent
> xmin        : -73.83943
> xmax        : -34.8581
> ymin        : -33.77086
> ymax        : 5.38289
>
>> c<-crop(r,br)
>
>> extent(c)
> class       : Extent
> xmin        : -73.83772
> xmax        : -34.85554
> ymin        : -33.76852
> ymax        : 5.38428
>
>    However, the cropped raster is rectangular. Is there any way to keep also the "shape" of a shapefile (and not only its extent) when performing this kind of crop operation?
>

You may use a combination of crop and mask:

------------ START ---------------
library(raster)

# Reading the shapefile
myshp <- readOGR("myshapefile.shp", layer=basename(myshapefile) )

# Getting the spatial extent of the shapefile
e <- extent(myshp)

# Reading the raster you want to crop
myraster <- raster(myraster.filename)

# Cropping the raster to the shapefile spatial extent
myraster.crop <- crop(raster, e, snap="out")

# Dummy raster with a spatial extension equal to the cropped raster,
# but full of NA values
crop          <- setValues(myraster.crop, NA)

#  Rasterize the catchment boundaries, with NA outside the catchment 
boundaries
myshp.r <- rasterize(myshp, crop)

# Putting NA values in all the raster cells outside the shapefile boundaries
myraster.masked <- mask(x=myraster.crop, mask=myshp.r)

------------ END ---------------

IHTH,

Mauricio

-- 
====================================================
Water Resources Unit
Institute for Environment and Sustainability (IES)
Joint Research Centre (JRC), European Commission
webinfo    : http://floods.jrc.ec.europa.eu/
====================================================
DISCLAIMER:
"The views expressed are purely those of the writer
and may not in any circumstances be regarded as sta-
ting an official position of the European Commission"
====================================================
Linux user #454569 -- Ubuntu user #17469
====================================================
"The only things in life you regret,
Are the risks that you didn't take"
(Anonymous)
>    Thanks in advance,
>    Thiago.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From mboeslin at uni-osnabrueck.de  Mon Jun  4 11:44:46 2012
From: mboeslin at uni-osnabrueck.de (=?utf-8?B?TWF0dGhpYXMgQsO2c2xpbmc=?=)
Date: Mon, 4 Jun 2012 11:44:46 +0200 (CEST)
Subject: [R-sig-Geo] How to work with big images (>1GB)
Message-ID: <3314.131.173.58.243.1338803086.squirrel@webmail.rz.uni-osnabrueck.de>

Dear list,

does anyone knows how to work with big spacial image with a size of more
than 1 GB? I tried to tile the image in multiple smaller tiles but the
multiple call of the function 'writeRaster' of the package 'raster' leads
to crashes of the RGui. How do you solve the problem with big images or
are ther no possiblities to work in r with big images yet?


Thanks and best regards,
Matthias B?sling


From mdsumner at gmail.com  Mon Jun  4 12:21:24 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Mon, 4 Jun 2012 20:21:24 +1000
Subject: [R-sig-Geo] How to work with big images (>1GB)
In-Reply-To: <3314.131.173.58.243.1338803086.squirrel@webmail.rz.uni-osnabrueck.de>
References: <3314.131.173.58.243.1338803086.squirrel@webmail.rz.uni-osnabrueck.de>
Message-ID: <CAAcGz9_u2nfZBznkgwbSit9z9qCspuy-UrO5odNNxNnB2zyD_g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120604/674e0ffd/attachment.pl>

From r.m.krug at gmail.com  Mon Jun  4 12:21:27 2012
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Mon, 04 Jun 2012 12:21:27 +0200
Subject: [R-sig-Geo] How to work with big images (>1GB)
In-Reply-To: <3314.131.173.58.243.1338803086.squirrel@webmail.rz.uni-osnabrueck.de>
References: <3314.131.173.58.243.1338803086.squirrel@webmail.rz.uni-osnabrueck.de>
Message-ID: <4FCC8C27.8070106@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 04/06/12 11:44, Matthias B?sling wrote:
> Dear list,
> 
> does anyone knows how to work with big spacial image with a size of more than 1 GB? I tried to
> tile the image in multiple smaller tiles but the multiple call of the function 'writeRaster' of
> the package 'raster' leads to crashes of the RGui. How do you solve the problem with big images
> or are ther no possiblities to work in r with big images yet?

You should look at gdal, which should be able to do the tiling for you.

Cheers,

Rainer

> 
> 
> Thanks and best regards, Matthias B?sling
> 
> _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org 
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk/MjCcACgkQoYgNqgF2egr1oACfQd7h5mGInhk6/3b/f2xfDKIc
h2QAn0gB9gfbLrnq8zp6Lr/FyaGdbB4x
=lqkx
-----END PGP SIGNATURE-----


From HodgessE at uhd.edu  Mon Jun  4 15:50:49 2012
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Mon, 4 Jun 2012 08:50:49 -0500
Subject: [R-sig-Geo] online program
Message-ID: <586A4828D7AAA04CA9B258C50A28DA200BF592EA@BALI.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120604/e0237eed/attachment.pl>

From leonardo.monasterio at gmail.com  Mon Jun  4 18:41:56 2012
From: leonardo.monasterio at gmail.com (Leonardo Monasterio)
Date: Mon, 4 Jun 2012 13:41:56 -0300
Subject: [R-sig-Geo] identify neighborhoods (with neighbors list). Possible?
Message-ID: <CAKvLVN+F_-BVntDYfENd0ORpnwyr18D1Xn6V+XNJppRZzV0+6Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120604/8c380ce6/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Mon Jun  4 19:23:53 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 4 Jun 2012 18:23:53 +0100
Subject: [R-sig-Geo] identify neighborhoods (with neighbors list).
	Possible?
In-Reply-To: <e127d9f68f5d462c89beb2ad3b67332b@EX-0-HT0.lancs.local>
References: <e127d9f68f5d462c89beb2ad3b67332b@EX-0-HT0.lancs.local>
Message-ID: <CANVKczMNmOux-Qs_K6x7UU=04gMqVY8bWRR3myaLvSifMcjXDA@mail.gmail.com>

On Mon, Jun 4, 2012 at 5:41 PM, Leonardo Monasterio
<leonardo.monasterio at gmail.com> wrote:
> Dear all,
> A spdep ?listw object has each unit and its neighboors. I am searching for
> a way to go from this listw object to the list of the *neighboorhoods* ?and
> its member units.
> Example:
> Units: neighboors
>
> A :B C
> B: A
> D: E
> C: A
> E: D
>
> I want
> Neighborhood I : A, B, C
> Neighborhood II : D, E
>
> Any ideas?

 Graph Theory!

 and the igraph package.

 rewriting your list as an edgelist matrix:

> el
     [,1] [,2]
[1,] "A"  "B"
[2,] "A"  "C"
[3,] "B"  "A"
[4,] "D"  "E"
[5,] "C"  "A"
[6,] "E"  "D"

then

> g = graph.edgelist(el)

and

> clusters(g)
$membership
[1] 0 0 0 1 1

$csize
[1] 3 2

$no
[1] 2

 now the $membership part of the value here is telling you which of
the vertices are in which cluster (numbered from zero, that's graph
theorists for you).


Converting the listw to a graph (might be an easier way than
converting to an edgelist matrix) is left as an exercise! [Truth: I
don't have any listw objects handy at the moment]

Barry


From hi181904665 at msn.com  Tue Jun  5 10:29:39 2012
From: hi181904665 at msn.com (chenliang wang)
Date: Tue, 5 Jun 2012 16:29:39 +0800
Subject: [R-sig-Geo] How to get coefficients at any position (not only
 regression points) in spgwr?
Message-ID: <BLU0-SMTP84BDBECEBDF5B96FC0445BF40C0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120605/429fd97e/attachment.pl>

From vesnikos at gmail.com  Tue Jun  5 17:19:25 2012
From: vesnikos at gmail.com (nikos ves)
Date: Tue, 05 Jun 2012 18:19:25 +0300
Subject: [R-sig-Geo] online program
In-Reply-To: <586A4828D7AAA04CA9B258C50A28DA200BF592EA@BALI.uhd.campus>
References: <586A4828D7AAA04CA9B258C50A28DA200BF592EA@BALI.uhd.campus>
Message-ID: <1338909565.4589.4.camel@nikos-desktop>

Hello Erin,

A good place to start is this (free) geostatistical book:

A Practical Guide to Geostatistical Mapping [1]

>From there you can focus on what you're interested and dive deeper on
the subject!


Nick Ves 



[1] http://spatial-analyst.net/book/download 



On Mon, 2012-06-04 at 08:50 -0500, Hodgess, Erin wrote:
> Dear R Sig Geo People:
> 
> Does anyone know of any fully online programs in Geostatistics, please?
> 
> I'm working on a certificate in GIS.  It's very interesting, but I would like more of the "statistics" in geostatistics.
> 
> Thanks, 
> Sincerely,
> Erin
> 
> 
> Erin M. Hodgess, PhD
> Associate Professor
> Department of Computer and Mathematical Sciences
> University of Houston - Downtown
> mailto: hodgesse at uhd.edu
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From vesnikos at gmail.com  Tue Jun  5 17:21:51 2012
From: vesnikos at gmail.com (nikos ves)
Date: Tue, 05 Jun 2012 18:21:51 +0300
Subject: [R-sig-Geo] How to work with big images (>1GB)
In-Reply-To: <CAAcGz9_u2nfZBznkgwbSit9z9qCspuy-UrO5odNNxNnB2zyD_g@mail.gmail.com>
References: <3314.131.173.58.243.1338803086.squirrel@webmail.rz.uni-osnabrueck.de>
	<CAAcGz9_u2nfZBznkgwbSit9z9qCspuy-UrO5odNNxNnB2zyD_g@mail.gmail.com>
Message-ID: <1338909711.4589.7.camel@nikos-desktop>

Here's an interesting post[1] on a successfully use of gdal tools that
might give you some pointers on how to proceed!

Ves Nikos

[1] http://casoilresource.lawr.ucdavis.edu/drupal/node/1033


On Mon, 2012-06-04 at 20:21 +1000, Michael Sumner wrote:
> Both the rgdal and raster packages can read from raster files "on demand"
> without creating external copies, I would have a closer look at them.
> 
> Also, the GDAL VRT format is a great way to tile a raster without copying
> and GDAL itself has tools for that.
> 
> Cheers, Mike
> 
> On Monday, June 4, 2012, Matthias B?sling wrote:
> 
> > Dear list,
> >
> > does anyone knows how to work with big spacial image with a size of more
> > than 1 GB? I tried to tile the image in multiple smaller tiles but the
> > multiple call of the function 'writeRaster' of the package 'raster' leads
> > to crashes of the RGui. How do you solve the problem with big images or
> > are ther no possiblities to work in r with big images yet?
> >
> >
> > Thanks and best regards,
> > Matthias B?sling
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org <javascript:;>
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From yud at mail.montclair.edu  Tue Jun  5 17:23:01 2012
From: yud at mail.montclair.edu (Danlin Yu)
Date: Tue, 05 Jun 2012 11:23:01 -0400
Subject: [R-sig-Geo] How to get coefficients at any position (not only
 regression points) in spgwr?
In-Reply-To: <BLU0-SMTP84BDBECEBDF5B96FC0445BF40C0@phx.gbl>
References: <BLU0-SMTP84BDBECEBDF5B96FC0445BF40C0@phx.gbl>
Message-ID: <4FCE2455.8050003@mail.montclair.edu>

Chen-Liang:

Did you check on your fit.points object? It shall be a new set of 
coordinates that you intend to do prediction upon. According to the 
online help manual, the fit.points object shall be "an object containing 
the coordinates of ?t points; often an object from package sp; if 
missing, the coordinates given through the data argument object, or the 
coords argument are used."

Hope this helps.

Cheers,
Dr. Danlin Yu

On 6/5/2012 4:29 AM, chenliang wang wrote:
> Dear list,
>
> does anyone knows how to  get coefficients at any position (not only regression points) in spgwr?
>
> I tried to provide a prediction object for the parameter "fit.points" of function gwr(),but it complains "new data matrix rows mismatch " because of  (nrow(predx) != nrow(fit.points)) .
> Thanks and best regards,
> Chen-Liang Wang
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>

-- 
___________________________________________
Danlin Yu, Ph.D.
Associate Professor of GIS and Urban Geography
Department of Earth&  Environmental Studies
Montclair State University
Montclair, NJ, 07043
Tel: 973-655-4313
Fax: 973-655-4072
email: yud at mail.montclair.edu
webpage: csam.montclair.edu/~yu


From r.hijmans at gmail.com  Tue Jun  5 17:41:40 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 5 Jun 2012 08:41:40 -0700
Subject: [R-sig-Geo] How to work with big images (>1GB)
In-Reply-To: <3314.131.173.58.243.1338803086.squirrel@webmail.rz.uni-osnabrueck.de>
References: <3314.131.173.58.243.1338803086.squirrel@webmail.rz.uni-osnabrueck.de>
Message-ID: <CANtt_hxZO3qV6YSbA2xjGx-gL2wXb4CPC_rjSkCijH1A2P9m7w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120605/e471c170/attachment.pl>

From mboeslin at uni-osnabrueck.de  Tue Jun  5 17:53:18 2012
From: mboeslin at uni-osnabrueck.de (=?utf-8?q?Matthias_B=C3=B6sling?=)
Date: Tue, 05 Jun 2012 17:53:18 +0200
Subject: [R-sig-Geo] How to work with big images (>1GB)
In-Reply-To: <CANtt_hxZO3qV6YSbA2xjGx-gL2wXb4CPC_rjSkCijH1A2P9m7w@mail.gmail.com>
Message-ID: <19f1-4fce2b80-33-389665c0@53637013>

Thanks for all replies. It was just my fault. Raster can work with big files, my infos where just wrong (and i dont checked them by my own). So i do not need to tile the files and so for i do not need the multiple 'writeRaster' calls anymore. I am quite new to R and starting right with GUIs and spacial data is not that easy as i see ;).


So thanks again for the replies and best regards,
Matthias
 
 
 
 
Am Dienstag, 05. Juni 2012 17:41 CEST, "Robert J. Hijmans" <r.hijmans at gmail.com> schrieb: 
 
> Matthias,
> The raster package can work with extremely large images. I seems unlikely
> that your cashes of RGui (not normally a response to being out of memory)
> are caused by calls to 'writeRaster'. Please back up your statement by
> providing the offending code and info on the objects you are using. I
> should also say that your use of "multiple call of the function
> 'writeRaster'" suggest a misunderstanding of that function -- but it is
> hard to know as you provide no context.
> Robert
> 
> On Mon, Jun 4, 2012 at 2:44 AM, Matthias B?sling <mboeslin at uni-osnabrueck.de
> > wrote:
> 
> > Dear list,
> >
> > does anyone knows how to work with big spacial image with a size of more
> > than 1 GB? I tried to tile the image in multiple smaller tiles but the
> > multiple call of the function 'writeRaster' of the package 'raster' leads
> > to crashes of the RGui. How do you solve the problem with big images or
> > are ther no possiblities to work in r with big images yet?
> >
> >
> > Thanks and best regards,
> > Matthias B?sling
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >


From lucie at geodagroup.com  Tue Jun  5 20:34:34 2012
From: lucie at geodagroup.com (Lucie Anselin)
Date: Tue, 5 Jun 2012 13:34:34 -0500
Subject: [R-sig-Geo] Luc Anselin offering two short courses this summer
Message-ID: <CALk6o7OT8Rj0Jy7=PEQKuFkAYZ-yzKqxA3uiVPjH899bMH+dDg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120605/74903e5d/attachment.pl>

From thi_veloso at yahoo.com.br  Wed Jun  6 12:41:21 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Wed, 6 Jun 2012 03:41:21 -0700 (PDT)
Subject: [R-sig-Geo] Crop a raster using a shapefile
In-Reply-To: <4FCC75E3.6070501@jrc.ec.europa.eu>
References: <1338576563.61385.YahooMailNeo@web161404.mail.bf1.yahoo.com>
	<4FCC75E3.6070501@jrc.ec.europa.eu>
Message-ID: <1338979281.87346.YahooMailNeo@web161406.mail.bf1.yahoo.com>

? Thanks a lot to all who helped me.

? This combination of crop and mask was exactly what I needed: crop a raster using not only the extents of a shapefile, but also its contours, its curves.

? Cheers,
? Thiago.

________________________________
From: Mauricio Zambrano-Bigiarini <mauricio.zambrano at jrc.ec.europa.eu>
To: Thiago Veloso <thi_veloso at yahoo.com.br> 
Cc: R-SIG list <r-sig-geo at r-project.org> 
Sent: Monday, June 4, 2012 5:46 AM
Subject: Re: [R-sig-Geo] Crop a raster using a shapefile

On 01/06/12 20:49, Thiago Veloso wrote:
>? ? Dear all,
>
>? ? When cropping a raster using a shapefile, through 'crop' function from "raster" package, only the extent is taken into account:
>
>> r<-raster("lai2011361.Lai_1km.tif")
>> extent(r)
>
> class? ? ???: Extent
> xmin? ? ? ? : -104.4326
> xmax? ? ? ? : -29.99736
> ymin? ? ? ? : -40.00064
> ymax? ? ? ? : 10
>
>> br<-readShapePoly("/mnt/disco3/MODIS/shapes/brazil.shp")
>
>> extent(br)
>
> class? ? ???: Extent
> xmin? ? ? ? : -73.83943
> xmax? ? ? ? : -34.8581
> ymin? ? ? ? : -33.77086
> ymax? ? ? ? : 5.38289
>
>> c<-crop(r,br)
>
>> extent(c)
> class? ? ???: Extent
> xmin? ? ? ? : -73.83772
> xmax? ? ? ? : -34.85554
> ymin? ? ? ? : -33.76852
> ymax? ? ? ? : 5.38428
>
>? ? However, the cropped raster is rectangular. Is there any way to keep also the "shape" of a shapefile (and not only its extent) when performing this kind of crop operation?
>

You may use a combination of crop and mask:

------------ START ---------------
library(raster)

# Reading the shapefile
myshp <- readOGR("myshapefile.shp", layer=basename(myshapefile) )

# Getting the spatial extent of the shapefile
e <- extent(myshp)

# Reading the raster you want to crop
myraster <- raster(myraster.filename)

# Cropping the raster to the shapefile spatial extent
myraster.crop <- crop(raster, e, snap="out")

# Dummy raster with a spatial extension equal to the cropped raster,
# but full of NA values
crop? ? ? ? ? <- setValues(myraster.crop, NA)

#? Rasterize the catchment boundaries, with NA outside the catchment 
boundaries
myshp.r <- rasterize(myshp, crop)

# Putting NA values in all the raster cells outside the shapefile boundaries
myraster.masked <- mask(x=myraster.crop, mask=myshp.r)

------------ END ---------------

IHTH,

Mauricio

-- 
====================================================
Water Resources Unit
Institute for Environment and Sustainability (IES)
Joint Research Centre (JRC), European Commission
webinfo? ? : http://floods.jrc.ec.europa.eu/
====================================================
DISCLAIMER:
"The views expressed are purely those of the writer
and may not in any circumstances be regarded as sta-
ting an official position of the European Commission"
====================================================
Linux user #454569 -- Ubuntu user #17469
====================================================
"The only things in life you regret,
Are the risks that you didn't take"
(Anonymous)
>? ? Thanks in advance,
>? ? Thiago.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From rscardamaglia at ege.fcen.uba.ar  Wed Jun  6 17:57:32 2012
From: rscardamaglia at ege.fcen.uba.ar (rscardamaglia at ege.fcen.uba.ar)
Date: Wed, 6 Jun 2012 12:57:32 -0300 (ART)
Subject: [R-sig-Geo] LatLong to UTM
Message-ID: <0443bc3dd0b9f93d5729f55b418c99bd.squirrel@webmail.ege.fcen.uba.ar>

Hello,
I need some help transforming Latitude Longitude coordinates (in decimal
degrees) to UTM (zone 21 H, since I?m in Buenos Aires, Argentina).
This is the script I used. The transformation for the easting coordinates
is correct but not for the Northing.

> LatLong <- data.frame(X = coordenadas2[,1], Y = coordenadas2[,2])
> LatLong
          X         Y
1 -35.14189 -57.39206
2 -35.14072 -57.39421
3 -35.14507 -57.38274
4 -35.14390 -57.39083
5 -35.14496 -57.39312
6 -35.14069 -57.39280
7 -35.14241 -57.39119

> coordinates(LatLong) <- ~ Y + X
> proj4string(LatLong) <- CRS("+proj=longlat +ellps=WGS84 +datum=WGS84")
> Utm <- spTransform(LatLong, CRS("+proj=utm +zone=21 ellps=WGS84"))
> Utm

SpatialPoints:
            Y        X
[1,] 464285.6 -3888849
[2,] 464089.3 -3888720
[3,] 465136.0 -3889198
[4,] 464398.6 -3889071
[5,] 464190.4 -3889189
[6,] 464217.7 -3888716
[7,] 464365.1 -3888906

Coordinate Reference System (CRS) arguments: +proj=utm +zone=21
+ellps=WGS84

It seems the Easting coordinates are well transformed, but the Northing
should be around 6111151.35 m S (for the first one for example).
I would really appreciate some help.
Best wishes,

Romina.


From piero.campa at gmail.com  Wed Jun  6 18:23:23 2012
From: piero.campa at gmail.com (Piero Campalani)
Date: Wed, 6 Jun 2012 18:23:23 +0200
Subject: [R-sig-Geo] LatLong to UTM
In-Reply-To: <0443bc3dd0b9f93d5729f55b418c99bd.squirrel@webmail.ege.fcen.uba.ar>
References: <0443bc3dd0b9f93d5729f55b418c99bd.squirrel@webmail.ege.fcen.uba.ar>
Message-ID: <CAMp9JaNGF=ajOJRsDpWccRfZ9UQa8rvFWWUzYK738v212Gaakg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120606/9cbb7c9b/attachment.pl>

From r.hijmans at gmail.com  Wed Jun  6 18:37:16 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 6 Jun 2012 09:37:16 -0700
Subject: [R-sig-Geo] LatLong to UTM
In-Reply-To: <CAMp9JaNGF=ajOJRsDpWccRfZ9UQa8rvFWWUzYK738v212Gaakg@mail.gmail.com>
References: <0443bc3dd0b9f93d5729f55b418c99bd.squirrel@webmail.ege.fcen.uba.ar>
	<CAMp9JaNGF=ajOJRsDpWccRfZ9UQa8rvFWWUzYK738v212Gaakg@mail.gmail.com>
Message-ID: <CANtt_hzvOzhOaCFc9NwA-XWLXw7Dtcz4Vs0Gx5ncQZZcU2BnqA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120606/609fde0c/attachment.pl>

From Wade.A.Wall at usace.army.mil  Wed Jun  6 19:46:46 2012
From: Wade.A.Wall at usace.army.mil (Wall, Wade A ERDC-RDE-CERL-IL)
Date: Wed, 6 Jun 2012 17:46:46 +0000
Subject: [R-sig-Geo] Working with raster data in R
Message-ID: <C1524BE4BF45454293B8DF38FB9B5ECAD33666@MS-EX1VKS.erdc.dren.mil>

Hi all,

I am new to working with raster data, so forgive my ignorance up front.

I have two raster files that I have imported into R using raster(). The second raster file is a subset of grids within the first raster file that covers an area. I would like to create an object (dataframe?) with the values from the first raster based on the spatial coordinates of the second raster, but cannot figure out how to do this, although it seems to be fairly simple.

Secondly, is there a way to bootstrap values from a raster file. For example, I would like to bootstrap X number of grid values and calculate the mean value. 

Basically, I want to know if the values in the second raster (the subset) are less than the values in the first raster and want to test this through bootstrapping the first raster. If there is a better way, please let me know.

Thanks,

Wade A. Wall
US Army ERDC-CERL
P.O. Box 9005
Champaign, IL  61826-9005
1-800-872-2375 ext. 7320
1-217-353-6511 ext. 7320


From moshersteven at gmail.com  Wed Jun  6 22:12:10 2012
From: moshersteven at gmail.com (steven mosher)
Date: Wed, 6 Jun 2012 13:12:10 -0700
Subject: [R-sig-Geo] Working with raster data in R
In-Reply-To: <C1524BE4BF45454293B8DF38FB9B5ECAD33666@MS-EX1VKS.erdc.dren.mil>
References: <C1524BE4BF45454293B8DF38FB9B5ECAD33666@MS-EX1VKS.erdc.dren.mil>
Message-ID: <CAFFLneTjLaEGL+kLFy=D4n1c5TJYRTt+4demja4=PU5qLOC6OQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120606/4d9e4568/attachment.pl>

From Wade.A.Wall at usace.army.mil  Wed Jun  6 22:28:30 2012
From: Wade.A.Wall at usace.army.mil (Wall, Wade A ERDC-RDE-CERL-IL)
Date: Wed, 6 Jun 2012 20:28:30 +0000
Subject: [R-sig-Geo] Working with raster data in R
In-Reply-To: <CAFFLneTjLaEGL+kLFy=D4n1c5TJYRTt+4demja4=PU5qLOC6OQ@mail.gmail.com>
References: <C1524BE4BF45454293B8DF38FB9B5ECAD33666@MS-EX1VKS.erdc.dren.mil>
	<CAFFLneTjLaEGL+kLFy=D4n1c5TJYRTt+4demja4=PU5qLOC6OQ@mail.gmail.com>
Message-ID: <C1524BE4BF45454293B8DF38FB9B5ECAD336D2@MS-EX1VKS.erdc.dren.mil>

Thank you for your assistance, and apologies for not posting an example. 

Wade

-----Original Message-----
From: steven mosher [mailto:moshersteven at gmail.com] 
Sent: Wednesday, June 06, 2012 3:12 PM
To: Wall, Wade A ERDC-RDE-CERL-IL
Cc: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] Working with raster data in R

 The best way to get help is to build a "toy"  working example of the problem you face.

1. Create two rasters, where one is the subset of the other.
2. post that code here and what you tried.
3 decribe what you want to do in a bit more detail.

You will find that if you post working code and your attemps to solve the problem ( as the rules for posting suggest ) that you will get help. So, 

First   <- raster(xmn = -180, xmx = 180, ymn = -90, ymx = 90, 
                   ncol = 72, nrow = 36,
                   crs = "+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0")

First[]<-runif(ncell(First))

Second <- crop(First, extent(-70,-50,20,40))

## put some different values in second

Second[]<-runif(ncell(Second))


##

#now extract the values from the first raster based on the extent of the second

Extracted  <- extract(First,extent(Second),cellnumbers=TRUE)

 
That's a start. 






On Wed, Jun 6, 2012 at 10:46 AM, Wall, Wade A ERDC-RDE-CERL-IL <Wade.A.Wall at usace.army.mil> wrote:


	Hi all,
	
	I am new to working with raster data, so forgive my ignorance up front.
	
	I have two raster files that I have imported into R using raster(). The second raster file is a subset of grids within the first raster file that covers an area. I would like to create an object (dataframe?) with the values from the first raster based on the spatial coordinates of the second raster, but cannot figure out how to do this, although it seems to be fairly simple.
	
	Secondly, is there a way to bootstrap values from a raster file. For example, I would like to bootstrap X number of grid values and calculate the mean value.
	
	Basically, I want to know if the values in the second raster (the subset) are less than the values in the first raster and want to test this through bootstrapping the first raster. If there is a better way, please let me know.
	
	Thanks,
	
	Wade A. Wall
	US Army ERDC-CERL
	P.O. Box 9005
	Champaign, IL  61826-9005
	1-800-872-2375 ext. 7320 <tel:1-800-872-2375%20ext.%207320> 
	1-217-353-6511 ext. 7320 <tel:1-217-353-6511%20ext.%207320> 
	
	_______________________________________________
	R-sig-Geo mailing list
	R-sig-Geo at r-project.org
	https://stat.ethz.ch/mailman/listinfo/r-sig-geo
	


From moshersteven at gmail.com  Wed Jun  6 22:33:50 2012
From: moshersteven at gmail.com (steven mosher)
Date: Wed, 6 Jun 2012 13:33:50 -0700
Subject: [R-sig-Geo] Working with raster data in R
In-Reply-To: <C1524BE4BF45454293B8DF38FB9B5ECAD336D2@MS-EX1VKS.erdc.dren.mil>
References: <C1524BE4BF45454293B8DF38FB9B5ECAD33666@MS-EX1VKS.erdc.dren.mil>
	<CAFFLneTjLaEGL+kLFy=D4n1c5TJYRTt+4demja4=PU5qLOC6OQ@mail.gmail.com>
	<C1524BE4BF45454293B8DF38FB9B5ECAD336D2@MS-EX1VKS.erdc.dren.mil>
Message-ID: <CAFFLneRXNU4rddWjw7p=5Az_v0hnHg3-9kJO39jKavH3c-jrQw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120606/5320adf8/attachment.pl>

From rscardamaglia at ege.fcen.uba.ar  Wed Jun  6 22:45:08 2012
From: rscardamaglia at ege.fcen.uba.ar (rscardamaglia at ege.fcen.uba.ar)
Date: Wed, 6 Jun 2012 17:45:08 -0300 (ART)
Subject: [R-sig-Geo] LatLong to UTM
In-Reply-To: <a9bca5bcff356e6a72f09a11c7a65e55.squirrel@webmail.ege.fcen.uba.ar>
References: <0443bc3dd0b9f93d5729f55b418c99bd.squirrel@webmail.ege.fcen.uba.ar>
	<CAMp9JaNGF=ajOJRsDpWccRfZ9UQa8rvFWWUzYK738v212Gaakg@mail.gmail.com>
	<CANtt_hzvOzhOaCFc9NwA-XWLXw7Dtcz4Vs0Gx5ncQZZcU2BnqA@mail.gmail.com>
	<a9bca5bcff356e6a72f09a11c7a65e55.squirrel@webmail.ege.fcen.uba.ar>
Message-ID: <886e2cc3f4c970f63f0de9ceded48f33.squirrel@webmail.ege.fcen.uba.ar>

A million thanks Piero and Robert! Problem solved.

Best wishes,

Romina.


>> I do not think the issue is a reversal of lat and lon (but using Y for
>> longitude is very confusing!). In Romina's example there is a difference
>> of 10000000 meters in northing. I.e. the number she expected uses a
>> 'false
>> northing'
>>
>> Romina used:
>> "+proj=utm +zone=21 ellps=WGS84"
>>
>> Piero fixed the problem by using (via an epsg code)
>> "+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84"
>>
>> note the "+south" to get the false northing.
>>
>> Robert
>>
>> On Wed, Jun 6, 2012 at 9:23 AM, Piero Campalani
>> <piero.campa at gmail.com>wrote:
>>
>>> Hi Romina,
>>> looking at { http://spatialreference.org/ref/epsg/32721/ } I can see
>>> the
>>> UTM zone 21H or also 21S for South spans longitudes in the range
>>> (-80,-60)
>>> so I guess you just inverted easting and northing in your code:
>>>
>>> So:
>>>  $ LatLong <- data.frame(Y=-35.14189, X=-57.39206)  # <--  X is the
>>> LONGITUDE.
>>>  $ coordinates(LatLong) <- ~ X+Y
>>>  $ proj4string(LatLong) <- CRS("+init=epsg:4326")
>>>  $ Utm <- spTransform(LatLong, CRS("+init=epsg:32721"))
>>>  $ Utm
>>>
>>>    SpatialPoints:
>>>                X       Y
>>>    [1,] 464285.6 6111151
>>>
>>> Cheers,
>>> Piero
>>>
>>>
>>>
>>>
>>> In general anyway, it's safer to identify CRS by EPSG code -- which in
>>> your
>>> case is 32721 (http://spatialreference.org/ref/epsg/32721/) --, then
>>> you
>>> can create it like this:
>>>
>>>    $ Utm <- spTransform(LatLong, CRS("+init=epsg:32721"))
>>>
>>>
>>>
>>> On 6 June 2012 17:57, <rscardamaglia at ege.fcen.uba.ar> wrote:
>>>
>>> > Hello,
>>> > I need some help transforming Latitude Longitude coordinates (in
>>> decimal
>>> > degrees) to UTM (zone 21 H, since I?m in Buenos Aires, Argentina).
>>> > This is the script I used. The transformation for the easting
>>> coordinates
>>> > is correct but not for the Northing.
>>> >
>>> > > LatLong <- data.frame(X = coordenadas2[,1], Y = coordenadas2[,2])
>>> > > LatLong
>>> >          X         Y
>>> > 1 -35.14189 -57.39206
>>> > 2 -35.14072 -57.39421
>>> > 3 -35.14507 -57.38274
>>> > 4 -35.14390 -57.39083
>>> > 5 -35.14496 -57.39312
>>> > 6 -35.14069 -57.39280
>>> > 7 -35.14241 -57.39119
>>> >
>>> > > coordinates(LatLong) <- ~ Y + X
>>> > > proj4string(LatLong) <- CRS("+proj=longlat +ellps=WGS84
>>> +datum=WGS84")
>>> > > Utm <- spTransform(LatLong, CRS("+proj=utm +zone=21 ellps=WGS84"))
>>> > > Utm
>>> >
>>> > SpatialPoints:
>>> >            Y        X
>>> > [1,] 464285.6 -3888849
>>> > [2,] 464089.3 -3888720
>>> > [3,] 465136.0 -3889198
>>> > [4,] 464398.6 -3889071
>>> > [5,] 464190.4 -3889189
>>> > [6,] 464217.7 -3888716
>>> > [7,] 464365.1 -3888906
>>> >
>>> > Coordinate Reference System (CRS) arguments: +proj=utm +zone=21
>>> > +ellps=WGS84
>>> >
>>> > It seems the Easting coordinates are well transformed, but the
>>> Northing
>>> > should be around 6111151.35 m S (for the first one for example).
>>> > I would really appreciate some help.
>>> > Best wishes,
>>> >
>>> > Romina.
>>> >
>>> > _______________________________________________
>>> > R-sig-Geo mailing list
>>> > R-sig-Geo at r-project.org
>>> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>> >
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>
>


From adamhsparks at gmail.com  Thu Jun  7 09:55:28 2012
From: adamhsparks at gmail.com (Adam Sparks)
Date: Thu, 7 Jun 2012 15:55:28 +0800
Subject: [R-sig-Geo] Adding additional items to plot
In-Reply-To: <CAJmQPwHJw+FSnrVxrs6MqmAFrvvCrbrcK8K0tO173YBNumMQPA@mail.gmail.com>
References: <CAJmQPwHJw+FSnrVxrs6MqmAFrvvCrbrcK8K0tO173YBNumMQPA@mail.gmail.com>
Message-ID: <CAJmQPwENG_dPrFxL7Q52QjaUQ4GsHTpatHq_Hn5dBgsyX7O5Mw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120607/f1d474c5/attachment.pl>

From pedrocontebarros at gmail.com  Thu Jun  7 12:54:25 2012
From: pedrocontebarros at gmail.com (PCB)
Date: Thu, 7 Jun 2012 03:54:25 -0700 (PDT)
Subject: [R-sig-Geo] testing hypotesis about species distribution - Newbie
Message-ID: <1339066465874-7580127.post@n2.nabble.com>

Dear all,

I have a data set consisting of estimates of fish density (Kg/m2) at
intervals of about 30 km apart. I also have measurements of bottom depth at
the same locations.
I want to test the hypothesis that fish density depends on depth, being
highest at the optimal depth for the species and declining at shallower and
deeper depths.

Under a non-geographical approach, I would fit a model to the data on fish
density including depth, and compare the fit to one that does not include
depth in it (constant mean). However, I cannot find out how to do this
"correctly" with geographically-dependent data.
I found several references on how to perform interpolation on a grid based
on e.g. Universal Krigging with an external model, but I cannot see how to
do this particular task.

Any pointers would be greatly appreciated.


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/testing-hypotesis-about-species-distribution-Newbie-tp7580127.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From pedrocontebarros at gmail.com  Thu Jun  7 15:10:07 2012
From: pedrocontebarros at gmail.com (PCB)
Date: Thu, 7 Jun 2012 06:10:07 -0700 (PDT)
Subject: [R-sig-Geo] Center of mass of a SpatialPointsDataFrame object -
 Which projection?
Message-ID: <1339074607848-7580128.post@n2.nabble.com>

Dear All,

I have a dataset that represents measurements of fish density at a number of
sampling locations at sea, in several different occasions (the sampling
locations are not always the same), stored as a a list of
SpatialPointsDataFrame objects.

I want to calculate the center of mass of each distribution, to describe
whether there is a trend in the overall distribution of the fish.

I have three main questions:
a) Should I use the original points for calculating the centre of mass, or
should I interpolate them first to a grid? I assume doing it on the original
points will make the result dependent on the location of these points, that
is really not linked to the underlying fish distribution
b) Should I reproject the data before calculating the center of mass (they
are in lon-lat). If so, which projection should I use?
c) A rectangular grid will include many locations on land, where no fish
could have been recorded anyway. How do I get a grid I can use to
meaningfully calculate the center of mass?

Thanks for your time, and any pointers will be highly appreciated.

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Center-of-mass-of-a-SpatialPointsDataFrame-object-Which-projection-tp7580128.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Anna.Skarin at slu.se  Thu Jun  7 21:20:38 2012
From: Anna.Skarin at slu.se (Anna Skarin)
Date: Thu, 7 Jun 2012 21:20:38 +0200
Subject: [R-sig-Geo] kernelbb and extent
Message-ID: <B70D8C61-1FC1-4288-BC7C-AF258DB496AE@slu.se>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120607/832c67f5/attachment.pl>

From jstruve at ufl.edu  Thu Jun  7 23:04:47 2012
From: jstruve at ufl.edu (Struve,Juliane)
Date: Thu, 7 Jun 2012 21:04:47 +0000
Subject: [R-sig-Geo] Question about Polgons()
Message-ID: <BFCE57D0BE7CBB42A581347DE375AF9A02A732C0@UFEXCH-MBXN02.ad.ufl.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120607/66a43db5/attachment.pl>

From edzer.pebesma at uni-muenster.de  Thu Jun  7 23:32:54 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 07 Jun 2012 23:32:54 +0200
Subject: [R-sig-Geo] Question about Polgons()
In-Reply-To: <BFCE57D0BE7CBB42A581347DE375AF9A02A732C0@UFEXCH-MBXN02.ad.ufl.edu>
References: <BFCE57D0BE7CBB42A581347DE375AF9A02A732C0@UFEXCH-MBXN02.ad.ufl.edu>
Message-ID: <4FD11E06.50705@uni-muenster.de>



On 06/07/2012 11:04 PM, Struve,Juliane wrote:
> Dear list,
> 
> In the documentation about SpatialPolygons-class (code is given below) what does the line
> 
> Srs3 = Polygons(list(Sr3, Sr4), "s3/4") mean and why is it needed  ?

It does not mean anything, and it is not needed, but it illustrates
that, unlike Srs1 and Srs2, a Polygons object can also contain more than
one ring (hence the 's' in Polygons).

> 
> Thanks a lot in advance,
> 
> Juliane
> 
> Sr1 = Polygon(cbind(c(2,4,4,1,2),c(2,3,5,4,2)))
> Sr2 = Polygon(cbind(c(5,4,2,5),c(2,3,2,2)))
> Sr3 = Polygon(cbind(c(4,4,5,10,4),c(5,3,2,5,5)))
> Sr4 = Polygon(cbind(c(5,6,6,5,5),c(4,4,3,3,4)))
> Srs1 = Polygons(list(Sr1), "s1")
> Srs2 = Polygons(list(Sr2), "s2")
> Srs3 = Polygons(list(Sr3, Sr4), "s3/4")
> SpP = SpatialPolygons(list(Srs1,Srs2,Srs3))
> plot(SpP, col = 1:3, pbg="white")
> 
> 
> 
> Dr. Juliane Struve
> Fisheries and Aquatic Sciences
> 7922 NW 71st Street, Gainesville, FL 32653
> 352-273-3632 (tel)
> 352-392-3672 (fax)
> email: jstruve at ufl.edu<mailto:jstruve at ufl.edu>
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From apbc2 at cam.ac.uk  Fri Jun  8 10:12:07 2012
From: apbc2 at cam.ac.uk (A.P.B. Carneiro)
Date: 08 Jun 2012 09:12:07 +0100
Subject: [R-sig-Geo] first time passage
Message-ID: <Prayer.1.3.4.1206080912070.27949@hermes-2.csi.cam.ac.uk>

Hi

I have GPS tracking data for a bird and I would like to use the first 
passage time method to identify and estimate the size of the zones of area 
restricted search (ARS) that can be indicative of foraging trips.

Can I do this in R? Is there a package for it? 

I am really new to R, so I will be glad if someone can help me!

Thank you,

Ana


-- 

PhD student
Evolutionary Ecology Group
Department of Zoology
University of Cambridge


From M.U.Kemp at uva.nl  Fri Jun  8 10:22:19 2012
From: M.U.Kemp at uva.nl (Kemp, Michael)
Date: Fri, 8 Jun 2012 08:22:19 +0000
Subject: [R-sig-Geo] first time passage
In-Reply-To: <Prayer.1.3.4.1206080912070.27949@hermes-2.csi.cam.ac.uk>
References: <Prayer.1.3.4.1206080912070.27949@hermes-2.csi.cam.ac.uk>
Message-ID: <41DD650D5B3A4247AD9F423FDE9378FA2CC8CB49@snelders.uva.nl>

Hello Ana,
Although I don't have much experience using it, I understand that the fpt() function in the adehabitatLT package can do what you want.

See...
http://cran.r-project.org/web/packages/adehabitatLT/adehabitatLT.pdf
and 
http://cran.r-project.org/web/packages/adehabitatLT/vignettes/adehabitatLT.pdf

Kind regards,
Michael 

-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of A.P.B. Carneiro
Sent: Friday, June 08, 2012 10:12 AM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] first time passage

Hi

I have GPS tracking data for a bird and I would like to use the first passage time method to identify and estimate the size of the zones of area restricted search (ARS) that can be indicative of foraging trips.

Can I do this in R? Is there a package for it? 

I am really new to R, so I will be glad if someone can help me!

Thank you,

Ana


-- 

PhD student
Evolutionary Ecology Group
Department of Zoology
University of Cambridge

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From pinaud at cebc.cnrs.fr  Fri Jun  8 10:23:12 2012
From: pinaud at cebc.cnrs.fr (Pinaud David)
Date: Fri, 08 Jun 2012 10:23:12 +0200
Subject: [R-sig-Geo] first time passage
In-Reply-To: <Prayer.1.3.4.1206080912070.27949@hermes-2.csi.cam.ac.uk>
References: <Prayer.1.3.4.1206080912070.27949@hermes-2.csi.cam.ac.uk>
Message-ID: <4FD1B670.30208@cebc.cnrs.fr>

Dear Ana,
Yes you can do this with R, have a look to the package "adehabitatLT" 
and the functions fpt() to calculate FPT and lavielle() to perform a 
segmentation of the FPT time series in order to identify ARS parts.

HTH
David

Le 08/06/2012 10:12, A.P.B. Carneiro a ?crit :
> Hi
>
> I have GPS tracking data for a bird and I would like to use the first 
> passage time method to identify and estimate the size of the zones of 
> area restricted search (ARS) that can be indicative of foraging trips.
>
> Can I do this in R? Is there a package for it?
> I am really new to R, so I will be glad if someone can help me!
>
> Thank you,
>
> Ana
>
>

-- 
***************************************************
Dr. David PINAUD
Ing?nieur de Recherche "Analyses spatiales"

Centre d'Etudes Biologiques de Chiz? - CNRS UPR1934
79360 Villiers-en-Bois, France
poste 485
Tel: +33 (0)5.49.09.35.58
Fax: +33 (0)5.49.09.65.26
http://www.cebc.cnrs.fr/

***************************************************

-------------- next part --------------
A non-text attachment was scrubbed...
Name: pinaud.vcf
Type: text/x-vcard
Size: 324 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120608/5c744405/attachment.vcf>

From b.rowlingson at lancaster.ac.uk  Fri Jun  8 11:52:42 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 8 Jun 2012 10:52:42 +0100
Subject: [R-sig-Geo] Center of mass of a SpatialPointsDataFrame object -
 Which projection?
In-Reply-To: <6575d494c39d430bb378d47ef01fab3c@EX-1-HT0.lancs.local>
References: <6575d494c39d430bb378d47ef01fab3c@EX-1-HT0.lancs.local>
Message-ID: <CANVKczNa5tuzApO=wct4HPy1sxeP7zQeo8ba1KyU6T7dtj=9UA@mail.gmail.com>

On Thu, Jun 7, 2012 at 2:10 PM, PCB <pedrocontebarros at gmail.com> wrote:

> I have a dataset that represents measurements of fish density at a number of
> sampling locations at sea, in several different occasions (the sampling
> locations are not always the same), stored as a a list of
> SpatialPointsDataFrame objects.

 So your data is:

 Lat, Long, Time, Mass

> I want to calculate the center of mass of each distribution, to describe
> whether there is a trend in the overall distribution of the fish.

 What do you mean by 'each distribution'? Your second sentence makes
me think that Time is discreet, or can be grouped into discreet
'Occasions'.

> I have three main questions:
> a) Should I use the original points for calculating the centre of mass, or
> should I interpolate them first to a grid? I assume doing it on the original
> points will make the result dependent on the location of these points, that
> is really not linked to the underlying fish distribution

 Your data are samples from an underlying distribution of mass, so you
want to do something like Kriging to get an interpolated surface over
a grid.

> b) Should I reproject the data before calculating the center of mass (they
> are in lon-lat). If so, which projection should I use?

 If the Kriging package you use (and there's about 4 in R - gstat,
geoR, et al - read the Spatial Task View) can work out distances from
lat-long on the sphere (or ellipsoid) then you don't need to. However
computing distances from lat-long can be slower than from x-y
cartesian coords.. so...

 If your data are over a relatively small area then convert to a
cartesian coordinate system in metres for units and then all the
Kriging packages will work, and they'll compute distances using
Pythagoras.

 Now, which projection? Depends on the region you have data for. UTM
is a fairly safe bet, unless you're close to the poles, in which case
I think there must be polar projections. Check
www.spatialreference.org and see what turns up.


> c) A rectangular grid will include many locations on land, where no fish
> could have been recorded anyway. How do I get a grid I can use to
> meaningfully calculate the center of mass?

 I think most of the Kriging packages can mask the output region by a
polygon, or you can mask raster objects with rasters or clip them to
polygons.

> Thanks for your time, and any pointers will be highly appreciated.

 The Spatial Task View is the place to start!

Barry


From Anna.Skarin at slu.se  Fri Jun  8 15:07:45 2012
From: Anna.Skarin at slu.se (Anna Skarin)
Date: Fri, 8 Jun 2012 15:07:45 +0200
Subject: [R-sig-Geo] kernelbb and extent
In-Reply-To: <B70D8C61-1FC1-4288-BC7C-AF258DB496AE@slu.se>
References: <B70D8C61-1FC1-4288-BC7C-AF258DB496AE@slu.se>
Message-ID: <F2EC46E5-944D-49B5-A531-C7F2E8976BE8@slu.se>

Hi again,

If specifying a larger grid (grid=400) giving cellsize= 187 (instead of cellsize=2000), the difference described below remain but will be much smaller and possibly negligible, so I guess my problem is solved. (I somewhat also mixed grid with cell.size when reading the instructions).

Cheers,
Anna

On Jun 7, 2012, at 21:20 , Anna Skarin wrote:

Dear All,

I'm struggling with the kernelbb in adehabitatHR. I'm calculating the Brownian Brigdes Home Range (BBHR) for reindeer using GPS-data from a number of reindeers. However when I'm using the kernelbb() I get somewhat different results depending on the number of burst included in the ltraj used in the kernelbb, even though I state the same grid size and extent. So is there a bug here or I'm doing things the wrong way, or thinking the wrong way? The function seems to fit the HR to the extent of the total data and not to the single burst, even though the same extent is defined in the function.

All the best,
Anna Skarin
(Sorry for any double posting)

Here is my script and please download example data from:

https://www.box.com/s/af1a8eeb9b33a26b09ce


ltraj4
ltraj1 <- ltraj4[c(1)]

sig2 <-10
renLiker <- liker(ltraj4, sig2, byburst=TRUE, rangesig1=c(0,20), plotit=F)
renMedian <- median(sapply(renLiker, function(x) x$sig1))


#Here I use the same sig1 in all estimations for comparison
ren1<-kernelbb(ltraj1, sig1=renMedian, sig2, byburst=TRUE, grid=50, extent=0.5)
ren4<-kernelbb(ltraj4, sig1=renMedian, sig2, byburst=TRUE, grid=50, extent=0.5)


#compare this plot with....
plot(ltraj1, spixdf=ren1)

#...this plot! shouldn't they be similar?
spren4 <- estUDm2spixdf(ren4)
plot(ltraj4[c(1)], spixdf=spren4)


#or compare these plots and data...
plot(getverticeshr(ren1, 99), lwd=2)
plot(getverticeshr(ren4$r_RG_08_079, 99),add=TRUE, lwd=2)

ren1vol <-getvolumeUD(ren1)
summary(ren1vol)
ren4vol <-getvolumeUD(ren4)
summary(ren4vol$r_RG_08_079)



[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Anna Skarin,
Forskarassistent
Dr.
Sveriges lantbruksuniversitet
Swedish University of Agricultural Sciences
Institutionen f?r husdjurens utfodring och v?rd
Avdelningen f?r Rensk?tsel
Box 7024, 750 07 Uppsala
Bes?ksadress: Almas all? 8D
Telefon: 018/67 19 54, mobil: 070-588 28 14
Anna.Skarin at slu.se<mailto:Margareta.Norinder at slu.se>, www.slu.se<http://www.slu.se/>

[cid:image001.png at 01CCE0BA.74D31070]

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120608/84aca500/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 4047 bytes
Desc: image001.png
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120608/84aca500/attachment.png>

From thi_veloso at yahoo.com.br  Fri Jun  8 20:10:47 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Fri, 8 Jun 2012 11:10:47 -0700 (PDT)
Subject: [R-sig-Geo] Plot spatial time series
Message-ID: <1339179047.13979.YahooMailNeo@web161405.mail.bf1.yahoo.com>

? Dear all,

? I have 506 netcdf files representing a time series of leaf index area estimated by MODIS, starting from 01jan/2001 and with increment of 8 days. Dates are in the name of the file and are presented in julian format. Together, files reach 35GB. Please see below how I load the files:

> library (raster)
> files <- list.files(pattern='lai*')
> files
? [1] "lai2001001.nc" "lai2001009.nc" "lai2001017.nc" "lai2001025.nc"
? [5] "lai2001033.nc" "lai2001041.nc" "lai2001049.nc" "lai2001057.nc"
? [9] "lai2001065.nc" "lai2001073.nc" "lai2001081.nc" "lai2001089.nc"
?[13] "lai2001097.nc" "lai2001105.nc" "lai2001113.nc" "lai2001121.nc"
?[17] "lai2001129.nc" "lai2001137.nc" "lai2001145.nc" "lai2001153.nc"
?[21] "lai2001161.nc" "lai2001169.nc" "lai2001177.nc" "lai2001185.nc"
?[25] "lai2001193.nc" "lai2001201.nc" "lai2001209.nc" "lai2001217.nc"
?[29] "lai2001225.nc" "lai2001233.nc" "lai2001241.nc" "lai2001249.nc"
?[33] "lai2001257.nc" "lai2001265.nc" "lai2001273.nc" "lai2001281.nc"
?[37] "lai2001289.nc" "lai2001297.nc" "lai2001305.nc" "lai2001313.nc"
?[41] "lai2001321.nc" "lai2001329.nc" "lai2001337.nc" "lai2001345.nc"
?[45] "lai2001353.nc" "lai2001361.nc" "lai2002001.nc" "lai2002009.nc"
?[49] "lai2002017.nc" "lai2002025.nc" "lai2002033.nc" "lai2002041.nc"
?[53] "lai2002049.nc" "lai2002057.nc" "lai2002065.nc" "lai2002073.nc"
?[57] "lai2002081.nc" "lai2002089.nc" "lai2002097.nc" "lai2002105.nc"
?[61] "lai2002113.nc" "lai2002121.nc" "lai2002129.nc" "lai2002137.nc"
?[65] "lai2002145.nc" "lai2002153.nc" "lai2002161.nc" "lai2002169.nc"
?[69] "lai2002177.nc" "lai2002185.nc" "lai2002193.nc" "lai2002201.nc"
?[73] "lai2002209.nc" "lai2002217.nc" "lai2002225.nc" "lai2002233.nc"
?[77] "lai2002241.nc" "lai2002249.nc" "lai2002257.nc" "lai2002265.nc"
?[81] "lai2002273.nc" "lai2002281.nc" "lai2002289.nc" "lai2002297.nc"
?[85] "lai2002305.nc" "lai2002313.nc" "lai2002321.nc" "lai2002329.nc"
?[89] "lai2002337.nc" "lai2002345.nc" "lai2002353.nc" "lai2002361.nc"
?[93] "lai2003001.nc" "lai2003009.nc" "lai2003017.nc" "lai2003025.nc"
?[97] "lai2003033.nc" "lai2003041.nc" "lai2003049.nc" "lai2003057.nc"
[101] "lai2003065.nc" "lai2003073.nc" "lai2003081.nc" "lai2003089.nc"
[105] "lai2003097.nc" "lai2003105.nc" "lai2003113.nc" "lai2003121.nc"
[109] "lai2003129.nc" "lai2003137.nc" "lai2003145.nc" "lai2003153.nc"
[113] "lai2003161.nc" "lai2003169.nc" "lai2003177.nc" "lai2003185.nc"
[117] "lai2003193.nc" "lai2003201.nc" "lai2003209.nc" "lai2003217.nc"
[121] "lai2003225.nc" "lai2003233.nc" "lai2003241.nc" "lai2003249.nc"
[125] "lai2003257.nc" "lai2003265.nc" "lai2003273.nc" "lai2003281.nc"
[129] "lai2003289.nc" "lai2003297.nc" "lai2003305.nc" "lai2003313.nc"
[133] "lai2003321.nc" "lai2003329.nc" "lai2003337.nc" "lai2003345.nc"
[137] "lai2003353.nc" "lai2003361.nc" "lai2004001.nc" "lai2004009.nc"
[141] "lai2004017.nc" "lai2004025.nc" "lai2004033.nc" "lai2004041.nc"
[145] "lai2004049.nc" "lai2004057.nc" "lai2004065.nc" "lai2004073.nc"
[149] "lai2004081.nc" "lai2004089.nc" "lai2004097.nc" "lai2004105.nc"
[153] "lai2004113.nc" "lai2004121.nc" "lai2004129.nc" "lai2004137.nc"
[157] "lai2004145.nc" "lai2004153.nc" "lai2004161.nc" "lai2004169.nc"
[161] "lai2004177.nc" "lai2004185.nc" "lai2004193.nc" "lai2004201.nc"
[165] "lai2004209.nc" "lai2004217.nc" "lai2004225.nc" "lai2004233.nc"
[169] "lai2004241.nc" "lai2004249.nc" "lai2004257.nc" "lai2004265.nc"
[173] "lai2004273.nc" "lai2004281.nc" "lai2004289.nc" "lai2004297.nc"
[177] "lai2004305.nc" "lai2004313.nc" "lai2004321.nc" "lai2004329.nc"
[181] "lai2004337.nc" "lai2004345.nc" "lai2004353.nc" "lai2004361.nc"
[185] "lai2005001.nc" "lai2005009.nc" "lai2005017.nc" "lai2005025.nc"
[189] "lai2005033.nc" "lai2005041.nc" "lai2005049.nc" "lai2005057.nc"
[193] "lai2005065.nc" "lai2005073.nc" "lai2005081.nc" "lai2005089.nc"
[197] "lai2005097.nc" "lai2005105.nc" "lai2005113.nc" "lai2005121.nc"
[201] "lai2005129.nc" "lai2005137.nc" "lai2005145.nc" "lai2005153.nc"
[205] "lai2005161.nc" "lai2005169.nc" "lai2005177.nc" "lai2005185.nc"
[209] "lai2005193.nc" "lai2005201.nc" "lai2005209.nc" "lai2005217.nc"
[213] "lai2005225.nc" "lai2005233.nc" "lai2005241.nc" "lai2005249.nc"
[217] "lai2005257.nc" "lai2005265.nc" "lai2005273.nc" "lai2005281.nc"
[221] "lai2005289.nc" "lai2005297.nc" "lai2005305.nc" "lai2005313.nc"
[225] "lai2005321.nc" "lai2005329.nc" "lai2005337.nc" "lai2005345.nc"
[229] "lai2005353.nc" "lai2005361.nc" "lai2006001.nc" "lai2006009.nc"
[233] "lai2006017.nc" "lai2006025.nc" "lai2006033.nc" "lai2006041.nc"
[237] "lai2006049.nc" "lai2006057.nc" "lai2006065.nc" "lai2006073.nc"
[241] "lai2006081.nc" "lai2006089.nc" "lai2006097.nc" "lai2006105.nc"
[245] "lai2006113.nc" "lai2006121.nc" "lai2006129.nc" "lai2006137.nc"
[249] "lai2006145.nc" "lai2006153.nc" "lai2006161.nc" "lai2006169.nc"
[253] "lai2006177.nc" "lai2006185.nc" "lai2006193.nc" "lai2006201.nc"
[257] "lai2006209.nc" "lai2006217.nc" "lai2006225.nc" "lai2006233.nc"
[261] "lai2006241.nc" "lai2006249.nc" "lai2006257.nc" "lai2006265.nc"
[265] "lai2006273.nc" "lai2006281.nc" "lai2006289.nc" "lai2006297.nc"
[269] "lai2006305.nc" "lai2006313.nc" "lai2006321.nc" "lai2006329.nc"
[273] "lai2006337.nc" "lai2006345.nc" "lai2006353.nc" "lai2006361.nc"
[277] "lai2007001.nc" "lai2007009.nc" "lai2007017.nc" "lai2007025.nc"
[281] "lai2007033.nc" "lai2007041.nc" "lai2007049.nc" "lai2007057.nc"
[285] "lai2007065.nc" "lai2007073.nc" "lai2007081.nc" "lai2007089.nc"
[289] "lai2007097.nc" "lai2007105.nc" "lai2007113.nc" "lai2007121.nc"
[293] "lai2007129.nc" "lai2007137.nc" "lai2007145.nc" "lai2007153.nc"
[297] "lai2007161.nc" "lai2007169.nc" "lai2007177.nc" "lai2007185.nc"
[301] "lai2007193.nc" "lai2007201.nc" "lai2007209.nc" "lai2007217.nc"
[305] "lai2007225.nc" "lai2007233.nc" "lai2007241.nc" "lai2007249.nc"
[309] "lai2007257.nc" "lai2007265.nc" "lai2007273.nc" "lai2007281.nc"
[313] "lai2007289.nc" "lai2007297.nc" "lai2007305.nc" "lai2007313.nc"
[317] "lai2007321.nc" "lai2007329.nc" "lai2007337.nc" "lai2007345.nc"
[321] "lai2007353.nc" "lai2007361.nc" "lai2008001.nc" "lai2008009.nc"
[325] "lai2008017.nc" "lai2008025.nc" "lai2008033.nc" "lai2008041.nc"
[329] "lai2008049.nc" "lai2008057.nc" "lai2008065.nc" "lai2008073.nc"
[333] "lai2008081.nc" "lai2008089.nc" "lai2008097.nc" "lai2008105.nc"
[337] "lai2008113.nc" "lai2008121.nc" "lai2008129.nc" "lai2008137.nc"
[341] "lai2008145.nc" "lai2008153.nc" "lai2008161.nc" "lai2008169.nc"
[345] "lai2008177.nc" "lai2008185.nc" "lai2008193.nc" "lai2008201.nc"
[349] "lai2008209.nc" "lai2008217.nc" "lai2008225.nc" "lai2008233.nc"
[353] "lai2008241.nc" "lai2008249.nc" "lai2008257.nc" "lai2008265.nc"
[357] "lai2008273.nc" "lai2008281.nc" "lai2008289.nc" "lai2008297.nc"
[361] "lai2008305.nc" "lai2008313.nc" "lai2008321.nc" "lai2008329.nc"
[365] "lai2008337.nc" "lai2008345.nc" "lai2008353.nc" "lai2008361.nc"
[369] "lai2009001.nc" "lai2009009.nc" "lai2009017.nc" "lai2009025.nc"
[373] "lai2009033.nc" "lai2009041.nc" "lai2009049.nc" "lai2009057.nc"
[377] "lai2009065.nc" "lai2009073.nc" "lai2009081.nc" "lai2009089.nc"
[381] "lai2009097.nc" "lai2009105.nc" "lai2009113.nc" "lai2009121.nc"
[385] "lai2009129.nc" "lai2009137.nc" "lai2009145.nc" "lai2009153.nc"
[389] "lai2009161.nc" "lai2009169.nc" "lai2009177.nc" "lai2009185.nc"
[393] "lai2009193.nc" "lai2009201.nc" "lai2009209.nc" "lai2009217.nc"
[397] "lai2009225.nc" "lai2009233.nc" "lai2009241.nc" "lai2009249.nc"
[401] "lai2009257.nc" "lai2009265.nc" "lai2009273.nc" "lai2009281.nc"
[405] "lai2009289.nc" "lai2009297.nc" "lai2009305.nc" "lai2009313.nc"
[409] "lai2009321.nc" "lai2009329.nc" "lai2009337.nc" "lai2009345.nc"
[413] "lai2009353.nc" "lai2009361.nc" "lai2010001.nc" "lai2010009.nc"
[417] "lai2010017.nc" "lai2010025.nc" "lai2010033.nc" "lai2010041.nc"
[421] "lai2010049.nc" "lai2010057.nc" "lai2010065.nc" "lai2010073.nc"
[425] "lai2010081.nc" "lai2010089.nc" "lai2010097.nc" "lai2010105.nc"
[429] "lai2010113.nc" "lai2010121.nc" "lai2010129.nc" "lai2010137.nc"
[433] "lai2010145.nc" "lai2010153.nc" "lai2010161.nc" "lai2010169.nc"
[437] "lai2010177.nc" "lai2010185.nc" "lai2010193.nc" "lai2010201.nc"
[441] "lai2010209.nc" "lai2010217.nc" "lai2010225.nc" "lai2010233.nc"
[445] "lai2010241.nc" "lai2010249.nc" "lai2010257.nc" "lai2010265.nc"
[449] "lai2010273.nc" "lai2010281.nc" "lai2010289.nc" "lai2010297.nc"
[453] "lai2010305.nc" "lai2010313.nc" "lai2010321.nc" "lai2010329.nc"
[457] "lai2010337.nc" "lai2010345.nc" "lai2010353.nc" "lai2010361.nc"
[461] "lai2011001.nc" "lai2011009.nc" "lai2011017.nc" "lai2011025.nc"
[465] "lai2011033.nc" "lai2011041.nc" "lai2011049.nc" "lai2011057.nc"
[469] "lai2011065.nc" "lai2011073.nc" "lai2011081.nc" "lai2011089.nc"
[473] "lai2011097.nc" "lai2011105.nc" "lai2011113.nc" "lai2011121.nc"
[477] "lai2011129.nc" "lai2011137.nc" "lai2011145.nc" "lai2011153.nc"
[481] "lai2011161.nc" "lai2011169.nc" "lai2011177.nc" "lai2011185.nc"
[485] "lai2011193.nc" "lai2011201.nc" "lai2011209.nc" "lai2011217.nc"
[489] "lai2011225.nc" "lai2011233.nc" "lai2011241.nc" "lai2011249.nc"
[493] "lai2011257.nc" "lai2011265.nc" "lai2011273.nc" "lai2011281.nc"
[497] "lai2011289.nc" "lai2011297.nc" "lai2011305.nc" "lai2011313.nc"
[501] "lai2011321.nc" "lai2011329.nc" "lai2011337.nc" "lai2011345.nc"
[505] "lai2011353.nc" "lai2011361.nc"

? Below is the sample of a unique file:

> r <- raster(files[1])
Loading required package: ncdf

> r
class ? ? ? : RasterLayer
dimensions ?: 4361, 4342, 18935462 ?(nrow, ncol, ncell)
resolution ?: 0.00898, 0.00898 ?(x, y)
extent ? ? ?: -73.8467, -34.85554, -33.7775, 5.38428 ?(xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84
values ? ? ?: /mnt/disco3/MODIS/MOSAIC/LAI/netcdf/lai2001001.nc
layer name ?: variable
zvar ? ? ? ?: lai_modis

? The only indication of date in these files is the name: no date information is present in the header of the netcdf.

? What I need to do is to plot a time series of these files taking into account the date. In this figure,?the x-axis would be the date and the y-axis would show LAI values. I know how to loop over files (thanks Robert), but I do not know how to plot the data sequentially.

> years <- substr(files, 4, 7)
> for (y in 2001:2011) {
? ?f <- files[ years == y ]
? ?s <- stack(f)
}

? Any tips on how to plot the entire series in on single plot? I appreciate any help.

? Thanks in advance,
? Thiago.


From landis at isciences.com  Fri Jun  8 20:39:59 2012
From: landis at isciences.com (Matthew Landis)
Date: Fri, 08 Jun 2012 14:39:59 -0400
Subject: [R-sig-Geo] Plot spatial time series
In-Reply-To: <1339179047.13979.YahooMailNeo@web161405.mail.bf1.yahoo.com>
References: <1339179047.13979.YahooMailNeo@web161405.mail.bf1.yahoo.com>
Message-ID: <4FD246FF.9030701@isciences.com>

Thiago,

It's not clear to me exactly what your plot would represent.  Is it the 
average of the whole scene? One pixel?

Assuming you're plotting 1 value per raster, I wouldn't try to stack all 
506 files.  I would read one at a time, summarize the values and put 
them into a dataframe.  Here's an idea of what I would try:

temp.df <- data.frame(date = rep(NA, length(files)), lai = NA)
for ( f in files ){
     cat('Reading file: ', f, '\n')
     tmp.df$date <- regmatches(f, regexpr('[0-9]{7}', f))
     tmp.df$lai <- mean(getValues(r), na.rm = TRUE)
}

You could convert date to a Date object, but I don't know off the top of 
my head how to deal with Julian days.

More simply, you could say tmp.df$date <- as.numeric(tmp.df$date), and 
plot would treat it approximately correctly.

Finish up with:

with(tmp.df, plot(date, lai))

Matt

On 6/8/2012 2:10 PM, Thiago Veloso wrote:
>    Dear all,
>
>    I have 506 netcdf files representing a time series of leaf index area estimated by MODIS, starting from 01jan/2001 and with increment of 8 days. Dates are in the name of the file and are presented in julian format. Together, files reach 35GB. Please see below how I load the files:
>
>> library (raster)
>> files<- list.files(pattern='lai*')
>> files
>    [1] "lai2001001.nc" "lai2001009.nc" "lai2001017.nc" "lai2001025.nc"
>    [5] "lai2001033.nc" "lai2001041.nc" "lai2001049.nc" "lai2001057.nc"
>    [9] "lai2001065.nc" "lai2001073.nc" "lai2001081.nc" "lai2001089.nc"
>   [13] "lai2001097.nc" "lai2001105.nc" "lai2001113.nc" "lai2001121.nc"
>   [17] "lai2001129.nc" "lai2001137.nc" "lai2001145.nc" "lai2001153.nc"
>   [21] "lai2001161.nc" "lai2001169.nc" "lai2001177.nc" "lai2001185.nc"
>   [25] "lai2001193.nc" "lai2001201.nc" "lai2001209.nc" "lai2001217.nc"
>   [29] "lai2001225.nc" "lai2001233.nc" "lai2001241.nc" "lai2001249.nc"
>   [33] "lai2001257.nc" "lai2001265.nc" "lai2001273.nc" "lai2001281.nc"
>   [37] "lai2001289.nc" "lai2001297.nc" "lai2001305.nc" "lai2001313.nc"
>   [41] "lai2001321.nc" "lai2001329.nc" "lai2001337.nc" "lai2001345.nc"
>   [45] "lai2001353.nc" "lai2001361.nc" "lai2002001.nc" "lai2002009.nc"
>   [49] "lai2002017.nc" "lai2002025.nc" "lai2002033.nc" "lai2002041.nc"
>   [53] "lai2002049.nc" "lai2002057.nc" "lai2002065.nc" "lai2002073.nc"
>   [57] "lai2002081.nc" "lai2002089.nc" "lai2002097.nc" "lai2002105.nc"
>   [61] "lai2002113.nc" "lai2002121.nc" "lai2002129.nc" "lai2002137.nc"
>   [65] "lai2002145.nc" "lai2002153.nc" "lai2002161.nc" "lai2002169.nc"
>   [69] "lai2002177.nc" "lai2002185.nc" "lai2002193.nc" "lai2002201.nc"
>   [73] "lai2002209.nc" "lai2002217.nc" "lai2002225.nc" "lai2002233.nc"
>   [77] "lai2002241.nc" "lai2002249.nc" "lai2002257.nc" "lai2002265.nc"
>   [81] "lai2002273.nc" "lai2002281.nc" "lai2002289.nc" "lai2002297.nc"
>   [85] "lai2002305.nc" "lai2002313.nc" "lai2002321.nc" "lai2002329.nc"
>   [89] "lai2002337.nc" "lai2002345.nc" "lai2002353.nc" "lai2002361.nc"
>   [93] "lai2003001.nc" "lai2003009.nc" "lai2003017.nc" "lai2003025.nc"
>   [97] "lai2003033.nc" "lai2003041.nc" "lai2003049.nc" "lai2003057.nc"
> [101] "lai2003065.nc" "lai2003073.nc" "lai2003081.nc" "lai2003089.nc"
> [105] "lai2003097.nc" "lai2003105.nc" "lai2003113.nc" "lai2003121.nc"
> [109] "lai2003129.nc" "lai2003137.nc" "lai2003145.nc" "lai2003153.nc"
> [113] "lai2003161.nc" "lai2003169.nc" "lai2003177.nc" "lai2003185.nc"
> [117] "lai2003193.nc" "lai2003201.nc" "lai2003209.nc" "lai2003217.nc"
> [121] "lai2003225.nc" "lai2003233.nc" "lai2003241.nc" "lai2003249.nc"
> [125] "lai2003257.nc" "lai2003265.nc" "lai2003273.nc" "lai2003281.nc"
> [129] "lai2003289.nc" "lai2003297.nc" "lai2003305.nc" "lai2003313.nc"
> [133] "lai2003321.nc" "lai2003329.nc" "lai2003337.nc" "lai2003345.nc"
> [137] "lai2003353.nc" "lai2003361.nc" "lai2004001.nc" "lai2004009.nc"
> [141] "lai2004017.nc" "lai2004025.nc" "lai2004033.nc" "lai2004041.nc"
> [145] "lai2004049.nc" "lai2004057.nc" "lai2004065.nc" "lai2004073.nc"
> [149] "lai2004081.nc" "lai2004089.nc" "lai2004097.nc" "lai2004105.nc"
> [153] "lai2004113.nc" "lai2004121.nc" "lai2004129.nc" "lai2004137.nc"
> [157] "lai2004145.nc" "lai2004153.nc" "lai2004161.nc" "lai2004169.nc"
> [161] "lai2004177.nc" "lai2004185.nc" "lai2004193.nc" "lai2004201.nc"
> [165] "lai2004209.nc" "lai2004217.nc" "lai2004225.nc" "lai2004233.nc"
> [169] "lai2004241.nc" "lai2004249.nc" "lai2004257.nc" "lai2004265.nc"
> [173] "lai2004273.nc" "lai2004281.nc" "lai2004289.nc" "lai2004297.nc"
> [177] "lai2004305.nc" "lai2004313.nc" "lai2004321.nc" "lai2004329.nc"
> [181] "lai2004337.nc" "lai2004345.nc" "lai2004353.nc" "lai2004361.nc"
> [185] "lai2005001.nc" "lai2005009.nc" "lai2005017.nc" "lai2005025.nc"
> [189] "lai2005033.nc" "lai2005041.nc" "lai2005049.nc" "lai2005057.nc"
> [193] "lai2005065.nc" "lai2005073.nc" "lai2005081.nc" "lai2005089.nc"
> [197] "lai2005097.nc" "lai2005105.nc" "lai2005113.nc" "lai2005121.nc"
> [201] "lai2005129.nc" "lai2005137.nc" "lai2005145.nc" "lai2005153.nc"
> [205] "lai2005161.nc" "lai2005169.nc" "lai2005177.nc" "lai2005185.nc"
> [209] "lai2005193.nc" "lai2005201.nc" "lai2005209.nc" "lai2005217.nc"
> [213] "lai2005225.nc" "lai2005233.nc" "lai2005241.nc" "lai2005249.nc"
> [217] "lai2005257.nc" "lai2005265.nc" "lai2005273.nc" "lai2005281.nc"
> [221] "lai2005289.nc" "lai2005297.nc" "lai2005305.nc" "lai2005313.nc"
> [225] "lai2005321.nc" "lai2005329.nc" "lai2005337.nc" "lai2005345.nc"
> [229] "lai2005353.nc" "lai2005361.nc" "lai2006001.nc" "lai2006009.nc"
> [233] "lai2006017.nc" "lai2006025.nc" "lai2006033.nc" "lai2006041.nc"
> [237] "lai2006049.nc" "lai2006057.nc" "lai2006065.nc" "lai2006073.nc"
> [241] "lai2006081.nc" "lai2006089.nc" "lai2006097.nc" "lai2006105.nc"
> [245] "lai2006113.nc" "lai2006121.nc" "lai2006129.nc" "lai2006137.nc"
> [249] "lai2006145.nc" "lai2006153.nc" "lai2006161.nc" "lai2006169.nc"
> [253] "lai2006177.nc" "lai2006185.nc" "lai2006193.nc" "lai2006201.nc"
> [257] "lai2006209.nc" "lai2006217.nc" "lai2006225.nc" "lai2006233.nc"
> [261] "lai2006241.nc" "lai2006249.nc" "lai2006257.nc" "lai2006265.nc"
> [265] "lai2006273.nc" "lai2006281.nc" "lai2006289.nc" "lai2006297.nc"
> [269] "lai2006305.nc" "lai2006313.nc" "lai2006321.nc" "lai2006329.nc"
> [273] "lai2006337.nc" "lai2006345.nc" "lai2006353.nc" "lai2006361.nc"
> [277] "lai2007001.nc" "lai2007009.nc" "lai2007017.nc" "lai2007025.nc"
> [281] "lai2007033.nc" "lai2007041.nc" "lai2007049.nc" "lai2007057.nc"
> [285] "lai2007065.nc" "lai2007073.nc" "lai2007081.nc" "lai2007089.nc"
> [289] "lai2007097.nc" "lai2007105.nc" "lai2007113.nc" "lai2007121.nc"
> [293] "lai2007129.nc" "lai2007137.nc" "lai2007145.nc" "lai2007153.nc"
> [297] "lai2007161.nc" "lai2007169.nc" "lai2007177.nc" "lai2007185.nc"
> [301] "lai2007193.nc" "lai2007201.nc" "lai2007209.nc" "lai2007217.nc"
> [305] "lai2007225.nc" "lai2007233.nc" "lai2007241.nc" "lai2007249.nc"
> [309] "lai2007257.nc" "lai2007265.nc" "lai2007273.nc" "lai2007281.nc"
> [313] "lai2007289.nc" "lai2007297.nc" "lai2007305.nc" "lai2007313.nc"
> [317] "lai2007321.nc" "lai2007329.nc" "lai2007337.nc" "lai2007345.nc"
> [321] "lai2007353.nc" "lai2007361.nc" "lai2008001.nc" "lai2008009.nc"
> [325] "lai2008017.nc" "lai2008025.nc" "lai2008033.nc" "lai2008041.nc"
> [329] "lai2008049.nc" "lai2008057.nc" "lai2008065.nc" "lai2008073.nc"
> [333] "lai2008081.nc" "lai2008089.nc" "lai2008097.nc" "lai2008105.nc"
> [337] "lai2008113.nc" "lai2008121.nc" "lai2008129.nc" "lai2008137.nc"
> [341] "lai2008145.nc" "lai2008153.nc" "lai2008161.nc" "lai2008169.nc"
> [345] "lai2008177.nc" "lai2008185.nc" "lai2008193.nc" "lai2008201.nc"
> [349] "lai2008209.nc" "lai2008217.nc" "lai2008225.nc" "lai2008233.nc"
> [353] "lai2008241.nc" "lai2008249.nc" "lai2008257.nc" "lai2008265.nc"
> [357] "lai2008273.nc" "lai2008281.nc" "lai2008289.nc" "lai2008297.nc"
> [361] "lai2008305.nc" "lai2008313.nc" "lai2008321.nc" "lai2008329.nc"
> [365] "lai2008337.nc" "lai2008345.nc" "lai2008353.nc" "lai2008361.nc"
> [369] "lai2009001.nc" "lai2009009.nc" "lai2009017.nc" "lai2009025.nc"
> [373] "lai2009033.nc" "lai2009041.nc" "lai2009049.nc" "lai2009057.nc"
> [377] "lai2009065.nc" "lai2009073.nc" "lai2009081.nc" "lai2009089.nc"
> [381] "lai2009097.nc" "lai2009105.nc" "lai2009113.nc" "lai2009121.nc"
> [385] "lai2009129.nc" "lai2009137.nc" "lai2009145.nc" "lai2009153.nc"
> [389] "lai2009161.nc" "lai2009169.nc" "lai2009177.nc" "lai2009185.nc"
> [393] "lai2009193.nc" "lai2009201.nc" "lai2009209.nc" "lai2009217.nc"
> [397] "lai2009225.nc" "lai2009233.nc" "lai2009241.nc" "lai2009249.nc"
> [401] "lai2009257.nc" "lai2009265.nc" "lai2009273.nc" "lai2009281.nc"
> [405] "lai2009289.nc" "lai2009297.nc" "lai2009305.nc" "lai2009313.nc"
> [409] "lai2009321.nc" "lai2009329.nc" "lai2009337.nc" "lai2009345.nc"
> [413] "lai2009353.nc" "lai2009361.nc" "lai2010001.nc" "lai2010009.nc"
> [417] "lai2010017.nc" "lai2010025.nc" "lai2010033.nc" "lai2010041.nc"
> [421] "lai2010049.nc" "lai2010057.nc" "lai2010065.nc" "lai2010073.nc"
> [425] "lai2010081.nc" "lai2010089.nc" "lai2010097.nc" "lai2010105.nc"
> [429] "lai2010113.nc" "lai2010121.nc" "lai2010129.nc" "lai2010137.nc"
> [433] "lai2010145.nc" "lai2010153.nc" "lai2010161.nc" "lai2010169.nc"
> [437] "lai2010177.nc" "lai2010185.nc" "lai2010193.nc" "lai2010201.nc"
> [441] "lai2010209.nc" "lai2010217.nc" "lai2010225.nc" "lai2010233.nc"
> [445] "lai2010241.nc" "lai2010249.nc" "lai2010257.nc" "lai2010265.nc"
> [449] "lai2010273.nc" "lai2010281.nc" "lai2010289.nc" "lai2010297.nc"
> [453] "lai2010305.nc" "lai2010313.nc" "lai2010321.nc" "lai2010329.nc"
> [457] "lai2010337.nc" "lai2010345.nc" "lai2010353.nc" "lai2010361.nc"
> [461] "lai2011001.nc" "lai2011009.nc" "lai2011017.nc" "lai2011025.nc"
> [465] "lai2011033.nc" "lai2011041.nc" "lai2011049.nc" "lai2011057.nc"
> [469] "lai2011065.nc" "lai2011073.nc" "lai2011081.nc" "lai2011089.nc"
> [473] "lai2011097.nc" "lai2011105.nc" "lai2011113.nc" "lai2011121.nc"
> [477] "lai2011129.nc" "lai2011137.nc" "lai2011145.nc" "lai2011153.nc"
> [481] "lai2011161.nc" "lai2011169.nc" "lai2011177.nc" "lai2011185.nc"
> [485] "lai2011193.nc" "lai2011201.nc" "lai2011209.nc" "lai2011217.nc"
> [489] "lai2011225.nc" "lai2011233.nc" "lai2011241.nc" "lai2011249.nc"
> [493] "lai2011257.nc" "lai2011265.nc" "lai2011273.nc" "lai2011281.nc"
> [497] "lai2011289.nc" "lai2011297.nc" "lai2011305.nc" "lai2011313.nc"
> [501] "lai2011321.nc" "lai2011329.nc" "lai2011337.nc" "lai2011345.nc"
> [505] "lai2011353.nc" "lai2011361.nc"
>
>    Below is the sample of a unique file:
>
>> r<- raster(files[1])
> Loading required package: ncdf
>
>> r
> class       : RasterLayer
> dimensions  : 4361, 4342, 18935462  (nrow, ncol, ncell)
> resolution  : 0.00898, 0.00898  (x, y)
> extent      : -73.8467, -34.85554, -33.7775, 5.38428  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=longlat +datum=WGS84
> values      : /mnt/disco3/MODIS/MOSAIC/LAI/netcdf/lai2001001.nc
> layer name  : variable
> zvar        : lai_modis
>
>    The only indication of date in these files is the name: no date information is present in the header of the netcdf.
>
>    What I need to do is to plot a time series of these files taking into account the date. In this figure, the x-axis would be the date and the y-axis would show LAI values. I know how to loop over files (thanks Robert), but I do not know how to plot the data sequentially.
>
>> years<- substr(files, 4, 7)
>> for (y in 2001:2011) {
>     f<- files[ years == y ]
>     s<- stack(f)
> }
>
>    Any tips on how to plot the entire series in on single plot? I appreciate any help.
>
>    Thanks in advance,
>    Thiago.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
~~~~~~~~~~~~~~~~~~~~~~~~~~
Matthew Landis, Ph.D.
Research Scientist
ISciences, LLC
61 Main St. Suite 200
Burlington VT 05401
802.864.2999
www.isciences.com
~~~~~~~~~~~~~~~~~~~~~~~~~~


From landis at isciences.com  Fri Jun  8 20:45:25 2012
From: landis at isciences.com (Matt Landis)
Date: Fri, 8 Jun 2012 14:45:25 -0400
Subject: [R-sig-Geo] Plot spatial time series
In-Reply-To: <4FD246FF.9030701@isciences.com>
References: <1339179047.13979.YahooMailNeo@web161405.mail.bf1.yahoo.com>
	<4FD246FF.9030701@isciences.com>
Message-ID: <CAE-RneLeR7OoLmaifo7z6WnQdJLB9dFNZxc3+1AmOOftChd-SA@mail.gmail.com>

Fixing typos:
tmp.df <- data.frame(date = rep(NA, length(files)), lai = NA)
 for ( i in 1:length(files) ){
 ? ?  f <- files[i]
   cat('Reading file: ', f, '\n')
 ? ?tmp.df$date[i] <- regmatches(f, regexpr('[0-9]{7}', f))
 ? ?tmp.df$lai[i] <- mean(getValues(r), na.rm = TRUE)
 }

Hopefully that makes more sense...

2012/6/8 Matthew Landis <landis at isciences.com>:
> Thiago,
>
> It's not clear to me exactly what your plot would represent. ?Is it the
> average of the whole scene? One pixel?
>
> Assuming you're plotting 1 value per raster, I wouldn't try to stack all 506
> files. ?I would read one at a time, summarize the values and put them into a
> dataframe. ?Here's an idea of what I would try:
>
> temp.df <- data.frame(date = rep(NA, length(files)), lai = NA)
> for ( f in files ){
> ? ?cat('Reading file: ', f, '\n')
> ? ?tmp.df$date <- regmatches(f, regexpr('[0-9]{7}', f))
> ? ?tmp.df$lai <- mean(getValues(r), na.rm = TRUE)
> }
>
> You could convert date to a Date object, but I don't know off the top of my
> head how to deal with Julian days.
>
> More simply, you could say tmp.df$date <- as.numeric(tmp.df$date), and plot
> would treat it approximately correctly.
>
> Finish up with:
>
> with(tmp.df, plot(date, lai))
>
> Matt
>
>
> On 6/8/2012 2:10 PM, Thiago Veloso wrote:
>>
>> ? Dear all,
>>
>> ? I have 506 netcdf files representing a time series of leaf index area
>> estimated by MODIS, starting from 01jan/2001 and with increment of 8 days.
>> Dates are in the name of the file and are presented in julian format.
>> Together, files reach 35GB. Please see below how I load the files:
>>
>>> library (raster)
>>> files<- list.files(pattern='lai*')
>>> files
>>
>> ? [1] "lai2001001.nc" "lai2001009.nc" "lai2001017.nc" "lai2001025.nc"
>> ? [5] "lai2001033.nc" "lai2001041.nc" "lai2001049.nc" "lai2001057.nc"
>> ? [9] "lai2001065.nc" "lai2001073.nc" "lai2001081.nc" "lai2001089.nc"
>> ?[13] "lai2001097.nc" "lai2001105.nc" "lai2001113.nc" "lai2001121.nc"
>> ?[17] "lai2001129.nc" "lai2001137.nc" "lai2001145.nc" "lai2001153.nc"
>> ?[21] "lai2001161.nc" "lai2001169.nc" "lai2001177.nc" "lai2001185.nc"
>> ?[25] "lai2001193.nc" "lai2001201.nc" "lai2001209.nc" "lai2001217.nc"
>> ?[29] "lai2001225.nc" "lai2001233.nc" "lai2001241.nc" "lai2001249.nc"
>> ?[33] "lai2001257.nc" "lai2001265.nc" "lai2001273.nc" "lai2001281.nc"
>> ?[37] "lai2001289.nc" "lai2001297.nc" "lai2001305.nc" "lai2001313.nc"
>> ?[41] "lai2001321.nc" "lai2001329.nc" "lai2001337.nc" "lai2001345.nc"
>> ?[45] "lai2001353.nc" "lai2001361.nc" "lai2002001.nc" "lai2002009.nc"
>> ?[49] "lai2002017.nc" "lai2002025.nc" "lai2002033.nc" "lai2002041.nc"
>> ?[53] "lai2002049.nc" "lai2002057.nc" "lai2002065.nc" "lai2002073.nc"
>> ?[57] "lai2002081.nc" "lai2002089.nc" "lai2002097.nc" "lai2002105.nc"
>> ?[61] "lai2002113.nc" "lai2002121.nc" "lai2002129.nc" "lai2002137.nc"
>> ?[65] "lai2002145.nc" "lai2002153.nc" "lai2002161.nc" "lai2002169.nc"
>> ?[69] "lai2002177.nc" "lai2002185.nc" "lai2002193.nc" "lai2002201.nc"
>> ?[73] "lai2002209.nc" "lai2002217.nc" "lai2002225.nc" "lai2002233.nc"
>> ?[77] "lai2002241.nc" "lai2002249.nc" "lai2002257.nc" "lai2002265.nc"
>> ?[81] "lai2002273.nc" "lai2002281.nc" "lai2002289.nc" "lai2002297.nc"
>> ?[85] "lai2002305.nc" "lai2002313.nc" "lai2002321.nc" "lai2002329.nc"
>> ?[89] "lai2002337.nc" "lai2002345.nc" "lai2002353.nc" "lai2002361.nc"
>> ?[93] "lai2003001.nc" "lai2003009.nc" "lai2003017.nc" "lai2003025.nc"
>> ?[97] "lai2003033.nc" "lai2003041.nc" "lai2003049.nc" "lai2003057.nc"
>> [101] "lai2003065.nc" "lai2003073.nc" "lai2003081.nc" "lai2003089.nc"
>> [105] "lai2003097.nc" "lai2003105.nc" "lai2003113.nc" "lai2003121.nc"
>> [109] "lai2003129.nc" "lai2003137.nc" "lai2003145.nc" "lai2003153.nc"
>> [113] "lai2003161.nc" "lai2003169.nc" "lai2003177.nc" "lai2003185.nc"
>> [117] "lai2003193.nc" "lai2003201.nc" "lai2003209.nc" "lai2003217.nc"
>> [121] "lai2003225.nc" "lai2003233.nc" "lai2003241.nc" "lai2003249.nc"
>> [125] "lai2003257.nc" "lai2003265.nc" "lai2003273.nc" "lai2003281.nc"
>> [129] "lai2003289.nc" "lai2003297.nc" "lai2003305.nc" "lai2003313.nc"
>> [133] "lai2003321.nc" "lai2003329.nc" "lai2003337.nc" "lai2003345.nc"
>> [137] "lai2003353.nc" "lai2003361.nc" "lai2004001.nc" "lai2004009.nc"
>> [141] "lai2004017.nc" "lai2004025.nc" "lai2004033.nc" "lai2004041.nc"
>> [145] "lai2004049.nc" "lai2004057.nc" "lai2004065.nc" "lai2004073.nc"
>> [149] "lai2004081.nc" "lai2004089.nc" "lai2004097.nc" "lai2004105.nc"
>> [153] "lai2004113.nc" "lai2004121.nc" "lai2004129.nc" "lai2004137.nc"
>> [157] "lai2004145.nc" "lai2004153.nc" "lai2004161.nc" "lai2004169.nc"
>> [161] "lai2004177.nc" "lai2004185.nc" "lai2004193.nc" "lai2004201.nc"
>> [165] "lai2004209.nc" "lai2004217.nc" "lai2004225.nc" "lai2004233.nc"
>> [169] "lai2004241.nc" "lai2004249.nc" "lai2004257.nc" "lai2004265.nc"
>> [173] "lai2004273.nc" "lai2004281.nc" "lai2004289.nc" "lai2004297.nc"
>> [177] "lai2004305.nc" "lai2004313.nc" "lai2004321.nc" "lai2004329.nc"
>> [181] "lai2004337.nc" "lai2004345.nc" "lai2004353.nc" "lai2004361.nc"
>> [185] "lai2005001.nc" "lai2005009.nc" "lai2005017.nc" "lai2005025.nc"
>> [189] "lai2005033.nc" "lai2005041.nc" "lai2005049.nc" "lai2005057.nc"
>> [193] "lai2005065.nc" "lai2005073.nc" "lai2005081.nc" "lai2005089.nc"
>> [197] "lai2005097.nc" "lai2005105.nc" "lai2005113.nc" "lai2005121.nc"
>> [201] "lai2005129.nc" "lai2005137.nc" "lai2005145.nc" "lai2005153.nc"
>> [205] "lai2005161.nc" "lai2005169.nc" "lai2005177.nc" "lai2005185.nc"
>> [209] "lai2005193.nc" "lai2005201.nc" "lai2005209.nc" "lai2005217.nc"
>> [213] "lai2005225.nc" "lai2005233.nc" "lai2005241.nc" "lai2005249.nc"
>> [217] "lai2005257.nc" "lai2005265.nc" "lai2005273.nc" "lai2005281.nc"
>> [221] "lai2005289.nc" "lai2005297.nc" "lai2005305.nc" "lai2005313.nc"
>> [225] "lai2005321.nc" "lai2005329.nc" "lai2005337.nc" "lai2005345.nc"
>> [229] "lai2005353.nc" "lai2005361.nc" "lai2006001.nc" "lai2006009.nc"
>> [233] "lai2006017.nc" "lai2006025.nc" "lai2006033.nc" "lai2006041.nc"
>> [237] "lai2006049.nc" "lai2006057.nc" "lai2006065.nc" "lai2006073.nc"
>> [241] "lai2006081.nc" "lai2006089.nc" "lai2006097.nc" "lai2006105.nc"
>> [245] "lai2006113.nc" "lai2006121.nc" "lai2006129.nc" "lai2006137.nc"
>> [249] "lai2006145.nc" "lai2006153.nc" "lai2006161.nc" "lai2006169.nc"
>> [253] "lai2006177.nc" "lai2006185.nc" "lai2006193.nc" "lai2006201.nc"
>> [257] "lai2006209.nc" "lai2006217.nc" "lai2006225.nc" "lai2006233.nc"
>> [261] "lai2006241.nc" "lai2006249.nc" "lai2006257.nc" "lai2006265.nc"
>> [265] "lai2006273.nc" "lai2006281.nc" "lai2006289.nc" "lai2006297.nc"
>> [269] "lai2006305.nc" "lai2006313.nc" "lai2006321.nc" "lai2006329.nc"
>> [273] "lai2006337.nc" "lai2006345.nc" "lai2006353.nc" "lai2006361.nc"
>> [277] "lai2007001.nc" "lai2007009.nc" "lai2007017.nc" "lai2007025.nc"
>> [281] "lai2007033.nc" "lai2007041.nc" "lai2007049.nc" "lai2007057.nc"
>> [285] "lai2007065.nc" "lai2007073.nc" "lai2007081.nc" "lai2007089.nc"
>> [289] "lai2007097.nc" "lai2007105.nc" "lai2007113.nc" "lai2007121.nc"
>> [293] "lai2007129.nc" "lai2007137.nc" "lai2007145.nc" "lai2007153.nc"
>> [297] "lai2007161.nc" "lai2007169.nc" "lai2007177.nc" "lai2007185.nc"
>> [301] "lai2007193.nc" "lai2007201.nc" "lai2007209.nc" "lai2007217.nc"
>> [305] "lai2007225.nc" "lai2007233.nc" "lai2007241.nc" "lai2007249.nc"
>> [309] "lai2007257.nc" "lai2007265.nc" "lai2007273.nc" "lai2007281.nc"
>> [313] "lai2007289.nc" "lai2007297.nc" "lai2007305.nc" "lai2007313.nc"
>> [317] "lai2007321.nc" "lai2007329.nc" "lai2007337.nc" "lai2007345.nc"
>> [321] "lai2007353.nc" "lai2007361.nc" "lai2008001.nc" "lai2008009.nc"
>> [325] "lai2008017.nc" "lai2008025.nc" "lai2008033.nc" "lai2008041.nc"
>> [329] "lai2008049.nc" "lai2008057.nc" "lai2008065.nc" "lai2008073.nc"
>> [333] "lai2008081.nc" "lai2008089.nc" "lai2008097.nc" "lai2008105.nc"
>> [337] "lai2008113.nc" "lai2008121.nc" "lai2008129.nc" "lai2008137.nc"
>> [341] "lai2008145.nc" "lai2008153.nc" "lai2008161.nc" "lai2008169.nc"
>> [345] "lai2008177.nc" "lai2008185.nc" "lai2008193.nc" "lai2008201.nc"
>> [349] "lai2008209.nc" "lai2008217.nc" "lai2008225.nc" "lai2008233.nc"
>> [353] "lai2008241.nc" "lai2008249.nc" "lai2008257.nc" "lai2008265.nc"
>> [357] "lai2008273.nc" "lai2008281.nc" "lai2008289.nc" "lai2008297.nc"
>> [361] "lai2008305.nc" "lai2008313.nc" "lai2008321.nc" "lai2008329.nc"
>> [365] "lai2008337.nc" "lai2008345.nc" "lai2008353.nc" "lai2008361.nc"
>> [369] "lai2009001.nc" "lai2009009.nc" "lai2009017.nc" "lai2009025.nc"
>> [373] "lai2009033.nc" "lai2009041.nc" "lai2009049.nc" "lai2009057.nc"
>> [377] "lai2009065.nc" "lai2009073.nc" "lai2009081.nc" "lai2009089.nc"
>> [381] "lai2009097.nc" "lai2009105.nc" "lai2009113.nc" "lai2009121.nc"
>> [385] "lai2009129.nc" "lai2009137.nc" "lai2009145.nc" "lai2009153.nc"
>> [389] "lai2009161.nc" "lai2009169.nc" "lai2009177.nc" "lai2009185.nc"
>> [393] "lai2009193.nc" "lai2009201.nc" "lai2009209.nc" "lai2009217.nc"
>> [397] "lai2009225.nc" "lai2009233.nc" "lai2009241.nc" "lai2009249.nc"
>> [401] "lai2009257.nc" "lai2009265.nc" "lai2009273.nc" "lai2009281.nc"
>> [405] "lai2009289.nc" "lai2009297.nc" "lai2009305.nc" "lai2009313.nc"
>> [409] "lai2009321.nc" "lai2009329.nc" "lai2009337.nc" "lai2009345.nc"
>> [413] "lai2009353.nc" "lai2009361.nc" "lai2010001.nc" "lai2010009.nc"
>> [417] "lai2010017.nc" "lai2010025.nc" "lai2010033.nc" "lai2010041.nc"
>> [421] "lai2010049.nc" "lai2010057.nc" "lai2010065.nc" "lai2010073.nc"
>> [425] "lai2010081.nc" "lai2010089.nc" "lai2010097.nc" "lai2010105.nc"
>> [429] "lai2010113.nc" "lai2010121.nc" "lai2010129.nc" "lai2010137.nc"
>> [433] "lai2010145.nc" "lai2010153.nc" "lai2010161.nc" "lai2010169.nc"
>> [437] "lai2010177.nc" "lai2010185.nc" "lai2010193.nc" "lai2010201.nc"
>> [441] "lai2010209.nc" "lai2010217.nc" "lai2010225.nc" "lai2010233.nc"
>> [445] "lai2010241.nc" "lai2010249.nc" "lai2010257.nc" "lai2010265.nc"
>> [449] "lai2010273.nc" "lai2010281.nc" "lai2010289.nc" "lai2010297.nc"
>> [453] "lai2010305.nc" "lai2010313.nc" "lai2010321.nc" "lai2010329.nc"
>> [457] "lai2010337.nc" "lai2010345.nc" "lai2010353.nc" "lai2010361.nc"
>> [461] "lai2011001.nc" "lai2011009.nc" "lai2011017.nc" "lai2011025.nc"
>> [465] "lai2011033.nc" "lai2011041.nc" "lai2011049.nc" "lai2011057.nc"
>> [469] "lai2011065.nc" "lai2011073.nc" "lai2011081.nc" "lai2011089.nc"
>> [473] "lai2011097.nc" "lai2011105.nc" "lai2011113.nc" "lai2011121.nc"
>> [477] "lai2011129.nc" "lai2011137.nc" "lai2011145.nc" "lai2011153.nc"
>> [481] "lai2011161.nc" "lai2011169.nc" "lai2011177.nc" "lai2011185.nc"
>> [485] "lai2011193.nc" "lai2011201.nc" "lai2011209.nc" "lai2011217.nc"
>> [489] "lai2011225.nc" "lai2011233.nc" "lai2011241.nc" "lai2011249.nc"
>> [493] "lai2011257.nc" "lai2011265.nc" "lai2011273.nc" "lai2011281.nc"
>> [497] "lai2011289.nc" "lai2011297.nc" "lai2011305.nc" "lai2011313.nc"
>> [501] "lai2011321.nc" "lai2011329.nc" "lai2011337.nc" "lai2011345.nc"
>> [505] "lai2011353.nc" "lai2011361.nc"
>>
>> ? Below is the sample of a unique file:
>>
>>> r<- raster(files[1])
>>
>> Loading required package: ncdf
>>
>>> r
>>
>> class ? ? ? : RasterLayer
>> dimensions ?: 4361, 4342, 18935462 ?(nrow, ncol, ncell)
>> resolution ?: 0.00898, 0.00898 ?(x, y)
>> extent ? ? ?: -73.8467, -34.85554, -33.7775, 5.38428 ?(xmin, xmax, ymin,
>> ymax)
>> coord. ref. : +proj=longlat +datum=WGS84
>> values ? ? ?: /mnt/disco3/MODIS/MOSAIC/LAI/netcdf/lai2001001.nc
>> layer name ?: variable
>> zvar ? ? ? ?: lai_modis
>>
>> ? The only indication of date in these files is the name: no date
>> information is present in the header of the netcdf.
>>
>> ? What I need to do is to plot a time series of these files taking into
>> account the date. In this figure, the x-axis would be the date and the
>> y-axis would show LAI values. I know how to loop over files (thanks Robert),
>> but I do not know how to plot the data sequentially.
>>
>>> years<- substr(files, 4, 7)
>>> for (y in 2001:2011) {
>>
>> ? ?f<- files[ years == y ]
>> ? ?s<- stack(f)
>> }
>>
>> ? Any tips on how to plot the entire series in on single plot? I
>> appreciate any help.
>>
>> ? Thanks in advance,
>> ? Thiago.
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> --
> ~~~~~~~~~~~~~~~~~~~~~~~~~~
> Matthew Landis, Ph.D.
> Research Scientist
> ISciences, LLC
> 61 Main St. Suite 200
> Burlington VT 05401
> 802.864.2999
> www.isciences.com
> ~~~~~~~~~~~~~~~~~~~~~~~~~~
>



-- 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Matthew Landis, Ph.D.
Research Scientist
ISciences, LLC
61 Main St., Suite 200
Burlington VT 05401

802-864-2999
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


From sglish at hotmail.com  Sat Jun  9 18:47:59 2012
From: sglish at hotmail.com (Chris English)
Date: Sat, 9 Jun 2012 12:47:59 -0400
Subject: [R-sig-Geo] Plot spatial time series
Message-ID: <SNT117-W653B9BA5BEEC513FA87EEDC5F10@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120609/1ee0fa5f/attachment.pl>

From thi_veloso at yahoo.com.br  Sat Jun  9 19:43:24 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Sat, 9 Jun 2012 10:43:24 -0700 (PDT)
Subject: [R-sig-Geo] Plot spatial time series
In-Reply-To: <SNT117-W653B9BA5BEEC513FA87EEDC5F10@phx.gbl>
References: <SNT117-W653B9BA5BEEC513FA87EEDC5F10@phx.gbl>
Message-ID: <1339263804.90453.YahooMailNeo@web161406.mail.bf1.yahoo.com>

? Chris,

? Thanks for the tip. For now, Matthew's suggestion is enough. But I am glad to know about spacetime package. It might be useful for other analysis.

? Best,
? Thiago.
________________________________
From: Chris English <sglish at hotmail.com>
To: Help R-Sig_Geo <r-sig-geo at r-project.org> 
Cc: landis at isciences.com; thi_veloso at yahoo.com.br 
Sent: Saturday, June 9, 2012 1:47 PM
Subject: Re: [R-sig-Geo] Plot spatial time series



Thiago,

With uncertainty, as this is beyond my pay grade, might I suggest looking at spacetime,

http://cran.r-project.org/web/packages/spacetime/index.html ,

using Matt's method to extract the dates from file names to become your xts date object.

As all the spacetime objects derive from ST (and xts), spatial pixels data frame would be available.

There are additionally overlay and aggregation methods available in spacetime for your data,

but I have not explored these as yet.??I hope this is useful rather than a distraction.

Chris English??


From thi_veloso at yahoo.com.br  Sat Jun  9 19:50:19 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Sat, 9 Jun 2012 10:50:19 -0700 (PDT)
Subject: [R-sig-Geo] Plot spatial time series
In-Reply-To: <CAE-RneLeR7OoLmaifo7z6WnQdJLB9dFNZxc3+1AmOOftChd-SA@mail.gmail.com>
References: <1339179047.13979.YahooMailNeo@web161405.mail.bf1.yahoo.com>
	<4FD246FF.9030701@isciences.com>
	<CAE-RneLeR7OoLmaifo7z6WnQdJLB9dFNZxc3+1AmOOftChd-SA@mail.gmail.com>
Message-ID: <1339264219.96874.YahooMailNeo@web161401.mail.bf1.yahoo.com>

? Matthew,

? Thank you very much for the suggestion. You assumed correctly: I wanted to plot an average of the whole raster.

? I managed to plot the data (please see http://img137.imageshack.us/img137/601/screenshotan.png), but it's still precarious. Right now I am tying to improve the plot with ggplot2 package!

? Cheers,
? Thiago.


----- Original Message -----
From: Matt Landis <landis at isciences.com>
To: Thiago Veloso <thi_veloso at yahoo.com.br>
Cc: R-SIG list <r-sig-geo at r-project.org>
Sent: Friday, June 8, 2012 3:45 PM
Subject: Re: [R-sig-Geo] Plot spatial time series

Fixing typos:
tmp.df <- data.frame(date = rep(NA, length(files)), lai = NA)
for ( i in 1:length(files) ){
? ?? f <- files[i]
?  cat('Reading file: ', f, '\n')
? ?tmp.df$date[i] <- regmatches(f, regexpr('[0-9]{7}', f))
? ?tmp.df$lai[i] <- mean(getValues(r), na.rm = TRUE)
}

Hopefully that makes more sense...

2012/6/8 Matthew Landis <landis at isciences.com>:
> Thiago,
>
> It's not clear to me exactly what your plot would represent. ?Is it the
> average of the whole scene? One pixel?
>
> Assuming you're plotting 1 value per raster, I wouldn't try to stack all 506
> files. ?I would read one at a time, summarize the values and put them into a
> dataframe. ?Here's an idea of what I would try:
>
> temp.df <- data.frame(date = rep(NA, length(files)), lai = NA)
> for ( f in files ){
> ? ?cat('Reading file: ', f, '\n')
> ? ?tmp.df$date <- regmatches(f, regexpr('[0-9]{7}', f))
> ? ?tmp.df$lai <- mean(getValues(r), na.rm = TRUE)
> }
>
> You could convert date to a Date object, but I don't know off the top of my
> head how to deal with Julian days.
>
> More simply, you could say tmp.df$date <- as.numeric(tmp.df$date), and plot
> would treat it approximately correctly.
>
> Finish up with:
>
> with(tmp.df, plot(date, lai))
>
> Matt
>
>
> On 6/8/2012 2:10 PM, Thiago Veloso wrote:
>>
>> ? Dear all,
>>
>> ? I have 506 netcdf files representing a time series of leaf index area
>> estimated by MODIS, starting from 01jan/2001 and with increment of 8 days.
>> Dates are in the name of the file and are presented in julian format.
>> Together, files reach 35GB. Please see below how I load the files:
>>
>>> library (raster)
>>> files<- list.files(pattern='lai*')
>>> files
>>
>> ? [1] "lai2001001.nc" "lai2001009.nc" "lai2001017.nc" "lai2001025.nc"
>> ? [5] "lai2001033.nc" "lai2001041.nc" "lai2001049.nc" "lai2001057.nc"
>> ? [9] "lai2001065.nc" "lai2001073.nc" "lai2001081.nc" "lai2001089.nc"
>> ?[13] "lai2001097.nc" "lai2001105.nc" "lai2001113.nc" "lai2001121.nc"
>> ?[17] "lai2001129.nc" "lai2001137.nc" "lai2001145.nc" "lai2001153.nc"
>> ?[21] "lai2001161.nc" "lai2001169.nc" "lai2001177.nc" "lai2001185.nc"
>> ?[25] "lai2001193.nc" "lai2001201.nc" "lai2001209.nc" "lai2001217.nc"
>> ?[29] "lai2001225.nc" "lai2001233.nc" "lai2001241.nc" "lai2001249.nc"
>> ?[33] "lai2001257.nc" "lai2001265.nc" "lai2001273.nc" "lai2001281.nc"
>> ?[37] "lai2001289.nc" "lai2001297.nc" "lai2001305.nc" "lai2001313.nc"
>> ?[41] "lai2001321.nc" "lai2001329.nc" "lai2001337.nc" "lai2001345.nc"
>> ?[45] "lai2001353.nc" "lai2001361.nc" "lai2002001.nc" "lai2002009.nc"
>> ?[49] "lai2002017.nc" "lai2002025.nc" "lai2002033.nc" "lai2002041.nc"
>> ?[53] "lai2002049.nc" "lai2002057.nc" "lai2002065.nc" "lai2002073.nc"
>> ?[57] "lai2002081.nc" "lai2002089.nc" "lai2002097.nc" "lai2002105.nc"
>> ?[61] "lai2002113.nc" "lai2002121.nc" "lai2002129.nc" "lai2002137.nc"
>> ?[65] "lai2002145.nc" "lai2002153.nc" "lai2002161.nc" "lai2002169.nc"
>> ?[69] "lai2002177.nc" "lai2002185.nc" "lai2002193.nc" "lai2002201.nc"
>> ?[73] "lai2002209.nc" "lai2002217.nc" "lai2002225.nc" "lai2002233.nc"
>> ?[77] "lai2002241.nc" "lai2002249.nc" "lai2002257.nc" "lai2002265.nc"
>> ?[81] "lai2002273.nc" "lai2002281.nc" "lai2002289.nc" "lai2002297.nc"
>> ?[85] "lai2002305.nc" "lai2002313.nc" "lai2002321.nc" "lai2002329.nc"
>> ?[89] "lai2002337.nc" "lai2002345.nc" "lai2002353.nc" "lai2002361.nc"
>> ?[93] "lai2003001.nc" "lai2003009.nc" "lai2003017.nc" "lai2003025.nc"
>> ?[97] "lai2003033.nc" "lai2003041.nc" "lai2003049.nc" "lai2003057.nc"
>> [101] "lai2003065.nc" "lai2003073.nc" "lai2003081.nc" "lai2003089.nc"
>> [105] "lai2003097.nc" "lai2003105.nc" "lai2003113.nc" "lai2003121.nc"
>> [109] "lai2003129.nc" "lai2003137.nc" "lai2003145.nc" "lai2003153.nc"
>> [113] "lai2003161.nc" "lai2003169.nc" "lai2003177.nc" "lai2003185.nc"
>> [117] "lai2003193.nc" "lai2003201.nc" "lai2003209.nc" "lai2003217.nc"
>> [121] "lai2003225.nc" "lai2003233.nc" "lai2003241.nc" "lai2003249.nc"
>> [125] "lai2003257.nc" "lai2003265.nc" "lai2003273.nc" "lai2003281.nc"
>> [129] "lai2003289.nc" "lai2003297.nc" "lai2003305.nc" "lai2003313.nc"
>> [133] "lai2003321.nc" "lai2003329.nc" "lai2003337.nc" "lai2003345.nc"
>> [137] "lai2003353.nc" "lai2003361.nc" "lai2004001.nc" "lai2004009.nc"
>> [141] "lai2004017.nc" "lai2004025.nc" "lai2004033.nc" "lai2004041.nc"
>> [145] "lai2004049.nc" "lai2004057.nc" "lai2004065.nc" "lai2004073.nc"
>> [149] "lai2004081.nc" "lai2004089.nc" "lai2004097.nc" "lai2004105.nc"
>> [153] "lai2004113.nc" "lai2004121.nc" "lai2004129.nc" "lai2004137.nc"
>> [157] "lai2004145.nc" "lai2004153.nc" "lai2004161.nc" "lai2004169.nc"
>> [161] "lai2004177.nc" "lai2004185.nc" "lai2004193.nc" "lai2004201.nc"
>> [165] "lai2004209.nc" "lai2004217.nc" "lai2004225.nc" "lai2004233.nc"
>> [169] "lai2004241.nc" "lai2004249.nc" "lai2004257.nc" "lai2004265.nc"
>> [173] "lai2004273.nc" "lai2004281.nc" "lai2004289.nc" "lai2004297.nc"
>> [177] "lai2004305.nc" "lai2004313.nc" "lai2004321.nc" "lai2004329.nc"
>> [181] "lai2004337.nc" "lai2004345.nc" "lai2004353.nc" "lai2004361.nc"
>> [185] "lai2005001.nc" "lai2005009.nc" "lai2005017.nc" "lai2005025.nc"
>> [189] "lai2005033.nc" "lai2005041.nc" "lai2005049.nc" "lai2005057.nc"
>> [193] "lai2005065.nc" "lai2005073.nc" "lai2005081.nc" "lai2005089.nc"
>> [197] "lai2005097.nc" "lai2005105.nc" "lai2005113.nc" "lai2005121.nc"
>> [201] "lai2005129.nc" "lai2005137.nc" "lai2005145.nc" "lai2005153.nc"
>> [205] "lai2005161.nc" "lai2005169.nc" "lai2005177.nc" "lai2005185.nc"
>> [209] "lai2005193.nc" "lai2005201.nc" "lai2005209.nc" "lai2005217.nc"
>> [213] "lai2005225.nc" "lai2005233.nc" "lai2005241.nc" "lai2005249.nc"
>> [217] "lai2005257.nc" "lai2005265.nc" "lai2005273.nc" "lai2005281.nc"
>> [221] "lai2005289.nc" "lai2005297.nc" "lai2005305.nc" "lai2005313.nc"
>> [225] "lai2005321.nc" "lai2005329.nc" "lai2005337.nc" "lai2005345.nc"
>> [229] "lai2005353.nc" "lai2005361.nc" "lai2006001.nc" "lai2006009.nc"
>> [233] "lai2006017.nc" "lai2006025.nc" "lai2006033.nc" "lai2006041.nc"
>> [237] "lai2006049.nc" "lai2006057.nc" "lai2006065.nc" "lai2006073.nc"
>> [241] "lai2006081.nc" "lai2006089.nc" "lai2006097.nc" "lai2006105.nc"
>> [245] "lai2006113.nc" "lai2006121.nc" "lai2006129.nc" "lai2006137.nc"
>> [249] "lai2006145.nc" "lai2006153.nc" "lai2006161.nc" "lai2006169.nc"
>> [253] "lai2006177.nc" "lai2006185.nc" "lai2006193.nc" "lai2006201.nc"
>> [257] "lai2006209.nc" "lai2006217.nc" "lai2006225.nc" "lai2006233.nc"
>> [261] "lai2006241.nc" "lai2006249.nc" "lai2006257.nc" "lai2006265.nc"
>> [265] "lai2006273.nc" "lai2006281.nc" "lai2006289.nc" "lai2006297.nc"
>> [269] "lai2006305.nc" "lai2006313.nc" "lai2006321.nc" "lai2006329.nc"
>> [273] "lai2006337.nc" "lai2006345.nc" "lai2006353.nc" "lai2006361.nc"
>> [277] "lai2007001.nc" "lai2007009.nc" "lai2007017.nc" "lai2007025.nc"
>> [281] "lai2007033.nc" "lai2007041.nc" "lai2007049.nc" "lai2007057.nc"
>> [285] "lai2007065.nc" "lai2007073.nc" "lai2007081.nc" "lai2007089.nc"
>> [289] "lai2007097.nc" "lai2007105.nc" "lai2007113.nc" "lai2007121.nc"
>> [293] "lai2007129.nc" "lai2007137.nc" "lai2007145.nc" "lai2007153.nc"
>> [297] "lai2007161.nc" "lai2007169.nc" "lai2007177.nc" "lai2007185.nc"
>> [301] "lai2007193.nc" "lai2007201.nc" "lai2007209.nc" "lai2007217.nc"
>> [305] "lai2007225.nc" "lai2007233.nc" "lai2007241.nc" "lai2007249.nc"
>> [309] "lai2007257.nc" "lai2007265.nc" "lai2007273.nc" "lai2007281.nc"
>> [313] "lai2007289.nc" "lai2007297.nc" "lai2007305.nc" "lai2007313.nc"
>> [317] "lai2007321.nc" "lai2007329.nc" "lai2007337.nc" "lai2007345.nc"
>> [321] "lai2007353.nc" "lai2007361.nc" "lai2008001.nc" "lai2008009.nc"
>> [325] "lai2008017.nc" "lai2008025.nc" "lai2008033.nc" "lai2008041.nc"
>> [329] "lai2008049.nc" "lai2008057.nc" "lai2008065.nc" "lai2008073.nc"
>> [333] "lai2008081.nc" "lai2008089.nc" "lai2008097.nc" "lai2008105.nc"
>> [337] "lai2008113.nc" "lai2008121.nc" "lai2008129.nc" "lai2008137.nc"
>> [341] "lai2008145.nc" "lai2008153.nc" "lai2008161.nc" "lai2008169.nc"
>> [345] "lai2008177.nc" "lai2008185.nc" "lai2008193.nc" "lai2008201.nc"
>> [349] "lai2008209.nc" "lai2008217.nc" "lai2008225.nc" "lai2008233.nc"
>> [353] "lai2008241.nc" "lai2008249.nc" "lai2008257.nc" "lai2008265.nc"
>> [357] "lai2008273.nc" "lai2008281.nc" "lai2008289.nc" "lai2008297.nc"
>> [361] "lai2008305.nc" "lai2008313.nc" "lai2008321.nc" "lai2008329.nc"
>> [365] "lai2008337.nc" "lai2008345.nc" "lai2008353.nc" "lai2008361.nc"
>> [369] "lai2009001.nc" "lai2009009.nc" "lai2009017.nc" "lai2009025.nc"
>> [373] "lai2009033.nc" "lai2009041.nc" "lai2009049.nc" "lai2009057.nc"
>> [377] "lai2009065.nc" "lai2009073.nc" "lai2009081.nc" "lai2009089.nc"
>> [381] "lai2009097.nc" "lai2009105.nc" "lai2009113.nc" "lai2009121.nc"
>> [385] "lai2009129.nc" "lai2009137.nc" "lai2009145.nc" "lai2009153.nc"
>> [389] "lai2009161.nc" "lai2009169.nc" "lai2009177.nc" "lai2009185.nc"
>> [393] "lai2009193.nc" "lai2009201.nc" "lai2009209.nc" "lai2009217.nc"
>> [397] "lai2009225.nc" "lai2009233.nc" "lai2009241.nc" "lai2009249.nc"
>> [401] "lai2009257.nc" "lai2009265.nc" "lai2009273.nc" "lai2009281.nc"
>> [405] "lai2009289.nc" "lai2009297.nc" "lai2009305.nc" "lai2009313.nc"
>> [409] "lai2009321.nc" "lai2009329.nc" "lai2009337.nc" "lai2009345.nc"
>> [413] "lai2009353.nc" "lai2009361.nc" "lai2010001.nc" "lai2010009.nc"
>> [417] "lai2010017.nc" "lai2010025.nc" "lai2010033.nc" "lai2010041.nc"
>> [421] "lai2010049.nc" "lai2010057.nc" "lai2010065.nc" "lai2010073.nc"
>> [425] "lai2010081.nc" "lai2010089.nc" "lai2010097.nc" "lai2010105.nc"
>> [429] "lai2010113.nc" "lai2010121.nc" "lai2010129.nc" "lai2010137.nc"
>> [433] "lai2010145.nc" "lai2010153.nc" "lai2010161.nc" "lai2010169.nc"
>> [437] "lai2010177.nc" "lai2010185.nc" "lai2010193.nc" "lai2010201.nc"
>> [441] "lai2010209.nc" "lai2010217.nc" "lai2010225.nc" "lai2010233.nc"
>> [445] "lai2010241.nc" "lai2010249.nc" "lai2010257.nc" "lai2010265.nc"
>> [449] "lai2010273.nc" "lai2010281.nc" "lai2010289.nc" "lai2010297.nc"
>> [453] "lai2010305.nc" "lai2010313.nc" "lai2010321.nc" "lai2010329.nc"
>> [457] "lai2010337.nc" "lai2010345.nc" "lai2010353.nc" "lai2010361.nc"
>> [461] "lai2011001.nc" "lai2011009.nc" "lai2011017.nc" "lai2011025.nc"
>> [465] "lai2011033.nc" "lai2011041.nc" "lai2011049.nc" "lai2011057.nc"
>> [469] "lai2011065.nc" "lai2011073.nc" "lai2011081.nc" "lai2011089.nc"
>> [473] "lai2011097.nc" "lai2011105.nc" "lai2011113.nc" "lai2011121.nc"
>> [477] "lai2011129.nc" "lai2011137.nc" "lai2011145.nc" "lai2011153.nc"
>> [481] "lai2011161.nc" "lai2011169.nc" "lai2011177.nc" "lai2011185.nc"
>> [485] "lai2011193.nc" "lai2011201.nc" "lai2011209.nc" "lai2011217.nc"
>> [489] "lai2011225.nc" "lai2011233.nc" "lai2011241.nc" "lai2011249.nc"
>> [493] "lai2011257.nc" "lai2011265.nc" "lai2011273.nc" "lai2011281.nc"
>> [497] "lai2011289.nc" "lai2011297.nc" "lai2011305.nc" "lai2011313.nc"
>> [501] "lai2011321.nc" "lai2011329.nc" "lai2011337.nc" "lai2011345.nc"
>> [505] "lai2011353.nc" "lai2011361.nc"
>>
>> ? Below is the sample of a unique file:
>>
>>> r<- raster(files[1])
>>
>> Loading required package: ncdf
>>
>>> r
>>
>> class ? ? ? : RasterLayer
>> dimensions ?: 4361, 4342, 18935462 ?(nrow, ncol, ncell)
>> resolution ?: 0.00898, 0.00898 ?(x, y)
>> extent ? ? ?: -73.8467, -34.85554, -33.7775, 5.38428 ?(xmin, xmax, ymin,
>> ymax)
>> coord. ref. : +proj=longlat +datum=WGS84
>> values ? ? ?: /mnt/disco3/MODIS/MOSAIC/LAI/netcdf/lai2001001.nc
>> layer name ?: variable
>> zvar ? ? ? ?: lai_modis
>>
>> ? The only indication of date in these files is the name: no date
>> information is present in the header of the netcdf.
>>
>> ? What I need to do is to plot a time series of these files taking into
>> account the date. In this figure, the x-axis would be the date and the
>> y-axis would show LAI values. I know how to loop over files (thanks Robert),
>> but I do not know how to plot the data sequentially.
>>
>>> years<- substr(files, 4, 7)
>>> for (y in 2001:2011) {
>>
>> ? ?f<- files[ years == y ]
>> ? ?s<- stack(f)
>> }
>>
>> ? Any tips on how to plot the entire series in on single plot? I
>> appreciate any help.
>>
>> ? Thanks in advance,
>> ? Thiago.
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> --
> ~~~~~~~~~~~~~~~~~~~~~~~~~~
> Matthew Landis, Ph.D.
> Research Scientist
> ISciences, LLC
> 61 Main St. Suite 200
> Burlington VT 05401
> 802.864.2999
> www.isciences.com
> ~~~~~~~~~~~~~~~~~~~~~~~~~~
>



-- 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Matthew Landis, Ph.D.
Research Scientist
ISciences, LLC
61 Main St., Suite 200
Burlington VT 05401

802-864-2999
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~



From mitradevkota at hotmail.com  Sat Jun  9 21:12:48 2012
From: mitradevkota at hotmail.com (Mitra Devkota)
Date: Sat, 9 Jun 2012 19:12:48 +0000
Subject: [R-sig-Geo] Spatial modeling
In-Reply-To: <SNT102-W32D5511DD9E456B8F96E0ACAF10@phx.gbl>
References: <SNT102-W488756E880918A631D3062CAF10@phx.gbl>,
	<SNT102-W32D5511DD9E456B8F96E0ACAF10@phx.gbl>
Message-ID: <SNT102-W89C275EC16DF4B59B8F82CAF10@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120609/4564fd4f/attachment.pl>

From mitradevkota at hotmail.com  Sun Jun 10 00:10:33 2012
From: mitradevkota at hotmail.com (Mitra Devkota)
Date: Sat, 9 Jun 2012 22:10:33 +0000
Subject: [R-sig-Geo] HI
Message-ID: <SNT102-W648BD43CFDE507E3732B67CAF10@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120609/e2989e2d/attachment.pl>

From piero.campa at gmail.com  Sun Jun 10 12:32:27 2012
From: piero.campa at gmail.com (Piero Campalani)
Date: Sun, 10 Jun 2012 12:32:27 +0200
Subject: [R-sig-Geo] Discontinuities in KED prediction with `nmax` set
In-Reply-To: <CAMp9JaPq7xu0LR2BNdWDWn1wMBe+B2xdy01r7qs=MVxMA94vyA@mail.gmail.com>
References: <CAMp9JaPq7xu0LR2BNdWDWn1wMBe+B2xdy01r7qs=MVxMA94vyA@mail.gmail.com>
Message-ID: <CAMp9JaMD_7fdsUGcKBwwQ4AQsNQ-TVuAB=3_aiXThw=Dvat=Lw@mail.gmail.com>

Dear list,

I have a set of ~130 ground stations measurements and several grid
covariates with which I am spatialising the ground point values.
I am using external drift kriging: I noticed discontinuities in the
predicted map when using a _localized_ prediction, hence restricting the
neighbors count with the *nmax* parameter in the gstat function.

I am a bit surprised since I guessed that localising the prediction
wouldn't change that much the final map: the more distant the ground point,
the smaller the kriging weight associated with it.
I attach a screenshot to visually understand the situation: on the left
side is the KED prediction, on the right side the localized (nearest 50
points) KED prediction.
I don't know if these evident discontinuities are a normal consequence of
localized models, or if I am doing something wrong.

This is an example of what I did, using the meuse dataset:
___________________________
library(gstat)
library(sp)
data(meuse)
data(meuse.grid)
coordinates(meuse) <- ~x+y
coordinates(meuse.grid) <- ~x+y

cvgm <- variogram(zinc~dist, data=meuse, width=100, cutoff=1000)
fitted <- fit.variogram(cvgm, vgm(psill=1, model="Exp", range=100,
nugget=1))
KED_fit <- gstat(id="KED_fit", formula=zinc~dist, data=meuse, model=fitted)
KED10_fit <- gstat(id="KED10_fit", formula=zinc~dist, data=meuse,
model=fitted, nmax=10)

 KED_pred <- predict.gstat(KED_fit, meuse.grid)
KED10_pred <- predict.gstat(KED10_fit, meuse.grid)

KED_pred$KED10_fit.pred <- KED10_pred$KED10_fit.pred
gridded(KED_pred) <- TRUE
spplot(KED_pred, zcol=c("KED_fit.pred", "KED10_fit.pred"),
col.regions=colorRampPalette(brewer.pal(7, "BuPu")[-(1:1)])(21))
___________________________

Thanks for any clarification in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120610/e6bac038/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot from 2012-06-09 19_44_23.jpg
Type: image/jpeg
Size: 24942 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120610/e6bac038/attachment.jpg>

From edzer.pebesma at uni-muenster.de  Sun Jun 10 20:05:55 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 10 Jun 2012 20:05:55 +0200
Subject: [R-sig-Geo] Discontinuities in KED prediction with `nmax` set
In-Reply-To: <CAMp9JaMD_7fdsUGcKBwwQ4AQsNQ-TVuAB=3_aiXThw=Dvat=Lw@mail.gmail.com>
References: <CAMp9JaPq7xu0LR2BNdWDWn1wMBe+B2xdy01r7qs=MVxMA94vyA@mail.gmail.com>
	<CAMp9JaMD_7fdsUGcKBwwQ4AQsNQ-TVuAB=3_aiXThw=Dvat=Lw@mail.gmail.com>
Message-ID: <4FD4E203.5030706@uni-muenster.de>



On 06/10/2012 12:32 PM, Piero Campalani wrote:
> Dear list,
> 
> I have a set of ~130 ground stations measurements and several grid
> covariates with which I am spatialising the ground point values.
> I am using external drift kriging: I noticed discontinuities in the
> predicted map when using a _localized_ prediction, hence restricting the
> neighbors count with the *nmax* parameter in the gstat function.
> 
> I am a bit surprised since I guessed that localising the prediction
> wouldn't change that much the final map: the more distant the ground
> point, the smaller the kriging weight associated with it.

That is true for its weight wrt predicting the residual process, but not
necessarily for estimating the local mean parameters.

> I attach a screenshot to visually understand the situation: on the left
> side is the KED prediction, on the right side the localized (nearest 50
> points) KED prediction.
> I don't know if these evident discontinuities are a normal consequence
> of localized models, or if I am doing something wrong.

I'd say the former.

> 
> This is an example of what I did, using the meuse dataset:
> ___________________________
> library(gstat)
> library(sp)
> data(meuse)
> data(meuse.grid)
> coordinates(meuse) <- ~x+y
> coordinates(meuse.grid) <- ~x+y
> 
> cvgm <- variogram(zinc~dist, data=meuse, width=100, cutoff=1000)
> fitted <- fit.variogram(cvgm, vgm(psill=1, model="Exp", range=100,
> nugget=1))
> KED_fit <- gstat(id="KED_fit", formula=zinc~dist, data=meuse, model=fitted)
> KED10_fit <- gstat(id="KED10_fit", formula=zinc~dist, data=meuse,
> model=fitted, nmax=10)
> 
> KED_pred <- predict.gstat(KED_fit, meuse.grid)
> KED10_pred <- predict.gstat(KED10_fit, meuse.grid)
> 
> KED_pred$KED10_fit.pred <- KED10_pred$KED10_fit.pred
> gridded(KED_pred) <- TRUE
> spplot(KED_pred, zcol=c("KED_fit.pred", "KED10_fit.pred"),
> col.regions=colorRampPalette(brewer.pal(7, "BuPu")[-(1:1)])(21))
> ___________________________
> 
> Thanks for any clarification in advance.
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From pedrocontebarros at gmail.com  Sun Jun 10 20:41:53 2012
From: pedrocontebarros at gmail.com (PCB)
Date: Sun, 10 Jun 2012 11:41:53 -0700 (PDT)
Subject: [R-sig-Geo] Center of mass of a SpatialPointsDataFrame object -
 Which projection?
In-Reply-To: <CANVKczNa5tuzApO=wct4HPy1sxeP7zQeo8ba1KyU6T7dtj=9UA@mail.gmail.com>
References: <1339074607848-7580128.post@n2.nabble.com>
	<CANVKczNa5tuzApO=wct4HPy1sxeP7zQeo8ba1KyU6T7dtj=9UA@mail.gmail.com>
Message-ID: <1339353713558-7580148.post@n2.nabble.com>

Yes, in this case I have one set of observations per year, so Time is
discreet.

I did look at the Spatial Task View, but could not understand all that I
read...
I am using the gstat package, looks like it has all the features I want, but
I still need to find out how to calculate the distances if I am using a
lon-lat CRS. Anyway, I will try a go at using UTM, and will get back to the
Spatial Task View. I am looking at an area between -5 and -25 Degrees, with
a longitudinal extent of about 15 degrees longitude
Since we are at this, is gstat the most appropriate package for doing this?
or should I be trying one of the others? I am trying to work also with the
"raster" package, for doing the cropping, but your mail suggests I could do
it using gstat. I will find out how to do it there.
Thanks a lot

.
Barry Rowlingson wrote
> 
> On Thu, Jun 7, 2012 at 2:10 PM, PCB &lt;pedrocontebarros@&gt; wrote:
> 
>> I have a dataset that represents measurements of fish density at a number
>> of
>> sampling locations at sea, in several different occasions (the sampling
>> locations are not always the same), stored as a a list of
>> SpatialPointsDataFrame objects.
> 
>  So your data is:
> 
>  Lat, Long, Time, Mass
> 
>> I want to calculate the center of mass of each distribution, to describe
>> whether there is a trend in the overall distribution of the fish.
> 
>  What do you mean by 'each distribution'? Your second sentence makes
> me think that Time is discreet, or can be grouped into discreet
> 'Occasions'.
> 
>> I have three main questions:
>> a) Should I use the original points for calculating the centre of mass,
>> or
>> should I interpolate them first to a grid? I assume doing it on the
>> original
>> points will make the result dependent on the location of these points,
>> that
>> is really not linked to the underlying fish distribution
> 
>  Your data are samples from an underlying distribution of mass, so you
> want to do something like Kriging to get an interpolated surface over
> a grid.
> 
>> b) Should I reproject the data before calculating the center of mass
>> (they
>> are in lon-lat). If so, which projection should I use?
> 
>  If the Kriging package you use (and there's about 4 in R - gstat,
> geoR, et al - read the Spatial Task View) can work out distances from
> lat-long on the sphere (or ellipsoid) then you don't need to. However
> computing distances from lat-long can be slower than from x-y
> cartesian coords.. so...
> 
>  If your data are over a relatively small area then convert to a
> cartesian coordinate system in metres for units and then all the
> Kriging packages will work, and they'll compute distances using
> Pythagoras.
> 
>  Now, which projection? Depends on the region you have data for. UTM
> is a fairly safe bet, unless you're close to the poles, in which case
> I think there must be polar projections. Check
> www.spatialreference.org and see what turns up.
> 
> 
>> c) A rectangular grid will include many locations on land, where no fish
>> could have been recorded anyway. How do I get a grid I can use to
>> meaningfully calculate the center of mass?
> 
>  I think most of the Kriging packages can mask the output region by a
> polygon, or you can mask raster objects with rasters or clip them to
> polygons.
> 
>> Thanks for your time, and any pointers will be highly appreciated.
> 
>  The Spatial Task View is the place to start!
> 
> Barry
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo@
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Center-of-mass-of-a-SpatialPointsDataFrame-object-Which-projection-tp7580128p7580148.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From pedrocontebarros at gmail.com  Sun Jun 10 20:41:55 2012
From: pedrocontebarros at gmail.com (PCB)
Date: Sun, 10 Jun 2012 11:41:55 -0700 (PDT)
Subject: [R-sig-Geo] Center of mass of a SpatialPointsDataFrame object -
 Which projection?
In-Reply-To: <CANVKczNa5tuzApO=wct4HPy1sxeP7zQeo8ba1KyU6T7dtj=9UA@mail.gmail.com>
References: <1339074607848-7580128.post@n2.nabble.com>
	<CANVKczNa5tuzApO=wct4HPy1sxeP7zQeo8ba1KyU6T7dtj=9UA@mail.gmail.com>
Message-ID: <1339353715141-7580149.post@n2.nabble.com>

Yes, in this case I have one set of observations per year, so Time is
discreet.

I did look at the Spatial Task View, but could not understand all that I
read...
I am using the gstat package, looks like it has all the features I want, but
I still need to find out how to calculate the distances if I am using a
lon-lat CRS. Anyway, I will try a go at using UTM, and will get back to the
Spatial Task View. I am looking at an area between -5 and -25 Degrees, with
a longitudinal extent of about 15 degrees longitude
Since we are at this, is gstat the most appropriate package for doing this?
or should I be trying one of the others? I am trying to work also with the
"raster" package, for doing the cropping, but your mail suggests I could do
it using gstat. I will find out how to do it there.
Thanks a lot

.
Barry Rowlingson wrote
> 
> On Thu, Jun 7, 2012 at 2:10 PM, PCB &lt;pedrocontebarros@&gt; wrote:
> 
>> I have a dataset that represents measurements of fish density at a number
>> of
>> sampling locations at sea, in several different occasions (the sampling
>> locations are not always the same), stored as a a list of
>> SpatialPointsDataFrame objects.
> 
>  So your data is:
> 
>  Lat, Long, Time, Mass
> 
>> I want to calculate the center of mass of each distribution, to describe
>> whether there is a trend in the overall distribution of the fish.
> 
>  What do you mean by 'each distribution'? Your second sentence makes
> me think that Time is discreet, or can be grouped into discreet
> 'Occasions'.
> 
>> I have three main questions:
>> a) Should I use the original points for calculating the centre of mass,
>> or
>> should I interpolate them first to a grid? I assume doing it on the
>> original
>> points will make the result dependent on the location of these points,
>> that
>> is really not linked to the underlying fish distribution
> 
>  Your data are samples from an underlying distribution of mass, so you
> want to do something like Kriging to get an interpolated surface over
> a grid.
> 
>> b) Should I reproject the data before calculating the center of mass
>> (they
>> are in lon-lat). If so, which projection should I use?
> 
>  If the Kriging package you use (and there's about 4 in R - gstat,
> geoR, et al - read the Spatial Task View) can work out distances from
> lat-long on the sphere (or ellipsoid) then you don't need to. However
> computing distances from lat-long can be slower than from x-y
> cartesian coords.. so...
> 
>  If your data are over a relatively small area then convert to a
> cartesian coordinate system in metres for units and then all the
> Kriging packages will work, and they'll compute distances using
> Pythagoras.
> 
>  Now, which projection? Depends on the region you have data for. UTM
> is a fairly safe bet, unless you're close to the poles, in which case
> I think there must be polar projections. Check
> www.spatialreference.org and see what turns up.
> 
> 
>> c) A rectangular grid will include many locations on land, where no fish
>> could have been recorded anyway. How do I get a grid I can use to
>> meaningfully calculate the center of mass?
> 
>  I think most of the Kriging packages can mask the output region by a
> polygon, or you can mask raster objects with rasters or clip them to
> polygons.
> 
>> Thanks for your time, and any pointers will be highly appreciated.
> 
>  The Spatial Task View is the place to start!
> 
> Barry
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo@
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Center-of-mass-of-a-SpatialPointsDataFrame-object-Which-projection-tp7580128p7580149.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From edzer.pebesma at uni-muenster.de  Sun Jun 10 21:03:58 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 10 Jun 2012 21:03:58 +0200
Subject: [R-sig-Geo] Center of mass of a SpatialPointsDataFrame object -
 Which projection?
In-Reply-To: <1339353715141-7580149.post@n2.nabble.com>
References: <1339074607848-7580128.post@n2.nabble.com>
	<CANVKczNa5tuzApO=wct4HPy1sxeP7zQeo8ba1KyU6T7dtj=9UA@mail.gmail.com>
	<1339353715141-7580149.post@n2.nabble.com>
Message-ID: <4FD4EF9E.6010303@uni-muenster.de>

if gstat can figure out that data are not projected and
is.projected(obj) is FALSE, like in the following example:

library(sp)
x = SpatialPoints(cbind(0,0))
library(rgdal)
proj4string(x) = "+proj=longlat"
is.projected(x)
[1] FALSE

then it will use great-circle distances, as opposed to Euclidian
distances, when it computes a variogram.


On 06/10/2012 08:41 PM, PCB wrote:
> Yes, in this case I have one set of observations per year, so Time is
> discreet.
> 
> I did look at the Spatial Task View, but could not understand all that I
> read...
> I am using the gstat package, looks like it has all the features I want, but
> I still need to find out how to calculate the distances if I am using a
> lon-lat CRS. Anyway, I will try a go at using UTM, and will get back to the
> Spatial Task View. I am looking at an area between -5 and -25 Degrees, with
> a longitudinal extent of about 15 degrees longitude
> Since we are at this, is gstat the most appropriate package for doing this?
> or should I be trying one of the others? I am trying to work also with the
> "raster" package, for doing the cropping, but your mail suggests I could do
> it using gstat. I will find out how to do it there.
> Thanks a lot
> 
> .
> Barry Rowlingson wrote
>>
>> On Thu, Jun 7, 2012 at 2:10 PM, PCB &lt;pedrocontebarros@&gt; wrote:
>>
>>> I have a dataset that represents measurements of fish density at a number
>>> of
>>> sampling locations at sea, in several different occasions (the sampling
>>> locations are not always the same), stored as a a list of
>>> SpatialPointsDataFrame objects.
>>
>>  So your data is:
>>
>>  Lat, Long, Time, Mass
>>
>>> I want to calculate the center of mass of each distribution, to describe
>>> whether there is a trend in the overall distribution of the fish.
>>
>>  What do you mean by 'each distribution'? Your second sentence makes
>> me think that Time is discreet, or can be grouped into discreet
>> 'Occasions'.
>>
>>> I have three main questions:
>>> a) Should I use the original points for calculating the centre of mass,
>>> or
>>> should I interpolate them first to a grid? I assume doing it on the
>>> original
>>> points will make the result dependent on the location of these points,
>>> that
>>> is really not linked to the underlying fish distribution
>>
>>  Your data are samples from an underlying distribution of mass, so you
>> want to do something like Kriging to get an interpolated surface over
>> a grid.
>>
>>> b) Should I reproject the data before calculating the center of mass
>>> (they
>>> are in lon-lat). If so, which projection should I use?
>>
>>  If the Kriging package you use (and there's about 4 in R - gstat,
>> geoR, et al - read the Spatial Task View) can work out distances from
>> lat-long on the sphere (or ellipsoid) then you don't need to. However
>> computing distances from lat-long can be slower than from x-y
>> cartesian coords.. so...
>>
>>  If your data are over a relatively small area then convert to a
>> cartesian coordinate system in metres for units and then all the
>> Kriging packages will work, and they'll compute distances using
>> Pythagoras.
>>
>>  Now, which projection? Depends on the region you have data for. UTM
>> is a fairly safe bet, unless you're close to the poles, in which case
>> I think there must be polar projections. Check
>> www.spatialreference.org and see what turns up.
>>
>>
>>> c) A rectangular grid will include many locations on land, where no fish
>>> could have been recorded anyway. How do I get a grid I can use to
>>> meaningfully calculate the center of mass?
>>
>>  I think most of the Kriging packages can mask the output region by a
>> polygon, or you can mask raster objects with rasters or clip them to
>> polygons.
>>
>>> Thanks for your time, and any pointers will be highly appreciated.
>>
>>  The Spatial Task View is the place to start!
>>
>> Barry
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo@
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 
> 
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Center-of-mass-of-a-SpatialPointsDataFrame-object-Which-projection-tp7580128p7580149.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From mdsumner at gmail.com  Mon Jun 11 01:58:06 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Mon, 11 Jun 2012 09:58:06 +1000
Subject: [R-sig-Geo] Center of mass of a SpatialPointsDataFrame object -
 Which projection?
In-Reply-To: <1339353715141-7580149.post@n2.nabble.com>
References: <1339074607848-7580128.post@n2.nabble.com>
	<CANVKczNa5tuzApO=wct4HPy1sxeP7zQeo8ba1KyU6T7dtj=9UA@mail.gmail.com>
	<1339353715141-7580149.post@n2.nabble.com>
Message-ID: <CAAcGz9-TE=SkT3Y8n2q4SwNhB3z5RB6ondfH1jT3oQrY6_645g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120611/210780d9/attachment.pl>

From mdsumner at gmail.com  Mon Jun 11 02:13:59 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Mon, 11 Jun 2012 10:13:59 +1000
Subject: [R-sig-Geo] Center of mass of a SpatialPointsDataFrame object -
 Which projection?
In-Reply-To: <CAAcGz9-TE=SkT3Y8n2q4SwNhB3z5RB6ondfH1jT3oQrY6_645g@mail.gmail.com>
References: <1339074607848-7580128.post@n2.nabble.com>
	<CANVKczNa5tuzApO=wct4HPy1sxeP7zQeo8ba1KyU6T7dtj=9UA@mail.gmail.com>
	<1339353715141-7580149.post@n2.nabble.com>
	<CAAcGz9-TE=SkT3Y8n2q4SwNhB3z5RB6ondfH1jT3oQrY6_645g@mail.gmail.com>
Message-ID: <CAAcGz9-7G0Vf57pR0=HBN02w_v-hKK4FFwPyhR1oUT4X3o4QBQ@mail.gmail.com>

These are guides about the broader family of projections that I think are good:

http://www.geo.hunter.cuny.edu/~jochen/gtech201/lectures/lec6concepts/map%20coordinate%20systems/how%20to%20choose%20a%20projection.htm

http://www.georeference.org/doc/guide_to_selecting_map_projections.htm

http://msdn.microsoft.com/en-us/library/cc749633(v=sql.100).aspx



On Mon, Jun 11, 2012 at 9:58 AM, Michael Sumner <mdsumner at gmail.com> wrote:
> Don't use UTM for anything with a longitude extent greater than about 6
> degrees, this is the basis of a UTM zone. I think it's a poor choice in
> general unless you need to work with a local authority using it. Mercator is
> for straight line compass trajectories and the need for that is not as great
> as it once was. UTM reflects a time where that property was very important
> for navigation, then an easy to calculate projection was tipped on its side
> to work for for small local regions in a narrow longitudinal band. ?Choose a
> local equal area projection, such Lambert Azimuthal Equal Area "laea", they
> are easy to define with PROJ.4 and easy to transform from/to anyway as long
> as you record the details.
>
> Cheers, Mike
>
>
> On Monday, June 11, 2012, PCB wrote:
>>
>> Yes, in this case I have one set of observations per year, so Time is
>> discreet.
>>
>> I did look at the Spatial Task View, but could not understand all that I
>> read...
>> I am using the gstat package, looks like it has all the features I want,
>> but
>> I still need to find out how to calculate the distances if I am using a
>> lon-lat CRS. Anyway, I will try a go at using UTM, and will get back to
>> the
>> Spatial Task View. I am looking at an area between -5 and -25 Degrees,
>> with
>> a longitudinal extent of about 15 degrees longitude
>> Since we are at this, is gstat the most appropriate package for doing
>> this?
>> or should I be trying one of the others? I am trying to work also with the
>> "raster" package, for doing the cropping, but your mail suggests I could
>> do
>> it using gstat. I will find out how to do it there.
>> Thanks a lot
>>
>> .
>> Barry Rowlingson wrote
>> >
>> > On Thu, Jun 7, 2012 at 2:10 PM, PCB &lt;pedrocontebarros@&gt; wrote:
>> >
>> >> I have a dataset that represents measurements of fish density at a
>> >> number
>> >> of
>> >> sampling locations at sea, in several different occasions (the sampling
>> >> locations are not always the same), stored as a a list of
>> >> SpatialPointsDataFrame objects.
>> >
>> > ?So your data is:
>> >
>> > ?Lat, Long, Time, Mass
>> >
>> >> I want to calculate the center of mass of each distribution, to
>> >> describe
>> >> whether there is a trend in the overall distribution of the fish.
>> >
>> > ?What do you mean by 'each distribution'? Your second sentence makes
>> > me think that Time is discreet, or can be grouped into discreet
>> > 'Occasions'.
>> >
>> >> I have three main questions:
>> >> a) Should I use the original points for calculating the centre of mass,
>> >> or
>> >> should I interpolate them first to a grid? I assume doing it on the
>> >> original
>> >> points will make the result dependent on the location of these points,
>> >> that
>> >> is really not linked to the underlying fish distribution
>> >
>> > ?Your data are samples from an underlying distribution of mass, so you
>> > want to do something like Kriging to get an interpolated surface over
>> > a grid.
>> >
>> >> b) Should I reproject the data before calculating the center of mass
>> >> (they
>> >> are in lon-lat). If so, which projection should I use?
>> >
>> > ?If the Kriging package you use (and there's about 4 in R - gstat,
>> > geoR, et al - read the Spatial Task View) can work out distances from
>> > lat-long on the sphere (or ellipsoid) then you don't need to. However
>> > computing distances from lat-long can be slower than from x-y
>> > cartesian coords.. so...
>> >
>> > ?If your data are over a relatively small area then convert to a
>> > cartesian coordinate system in metres for units and then all the
>> > Kriging packages will work, and they'll compute distances using
>> > Pythagoras.
>> >
>> > ?Now, which projection? Depends on the region you have data for. UTM
>> > is a fairly safe bet, unless you're close to the poles, in which case
>> > I think there must be polar projections. Check
>> > www.spatialreference.org and see what turns up.
>> >
>> >
>> >> c) A rectangular grid will include many locations on land, where no
>> >> fish
>> >> could have been recorded anyway. How do I get a grid I can use to
>> >> meaningfully calculate the center of mass?
>> >
>> > ?I think most of the Kriging packages can mask the output region by a
>> > polygon, or you can mask raster objects with rasters or clip them to
>> > polygons.
>> >
>> >> Thanks for your time, and any pointers will be highly appreciated.
>> >
>> > ?The Spatial Task View is the place to start!
>> >
>> > Barry
>> >
>> > _______________________________________________
>> > R-sig-Geo mailing list
>> > R-sig-Geo@
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> >
>>
>>
>> --
>> View this message in context:
>> http://r-sig-geo.2731867.n2.nabble.com/Center-of-mass-of-a-SpatialPointsDataFrame-object-Which-projection-tp7580128p7580149.html
>> Sent from the R-sig-geo mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
> --
> Michael Sumner
> Hobart, Australia
> e-mail: mdsumner at gmail.com



-- 
Michael Sumner
Hobart, Australia
e-mail: mdsumner at gmail.com


From hengl at spatial-analyst.net  Mon Jun 11 06:01:42 2012
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Mon, 11 Jun 2012 14:01:42 +1000
Subject: [R-sig-Geo] Fwd: Fwd: Re: plotKML on linux
In-Reply-To: <4F9EE2B3.5090307@spatial-analyst.net>
References: <4F9EE282.4030806@wur.nl> <4F9EE2B3.5090307@spatial-analyst.net>
Message-ID: <4FD56DA6.6090904@spatial-analyst.net>


This bug should not exist any more. For more details see function "path" 
in:

https://r-forge.r-project.org/scm/viewvc.php/pkg/R/AAAA.R?view=markup&root=plotkml

Please test installing plotKML again and then report if you experience 
more similar problems.

Installation instructions and a preview of the plotKML functionality are at:

http://plotkml.r-forge.r-project.org/

T. Hengl
http://www.vcard.wur.nl/Views/Profile/View.aspx?id=37263


On 01/05/2012 05:06, Tomislav Hengl wrote:
>
> On 30/04/2012 03:45, Daniel Arribas-Bel wrote:
>> Dear R-sig-geo list,
>>
>> I have succesfully installed 'plotKML' 0.1-6 under Ubuntu 11.10-32bit
>> running R 2.15. I run into an error when I try to replicate one of the
>> examples in the documentation, particularly that of kml-methods
>> (http://plotkml.r-forge.r-project.org/kml-method.html). The first one
>> runs fine but when I try to plot a SpatialPixelsDataFrame:
>>
>> ## End(Not run)
>> # Plotting a SpatialPixelsDataFrame or a Raster* object
>> data(eberg_grid)
>> coordinates(eberg_grid)<- ~x+y
>> gridded(eberg_grid)<- TRUE
>> proj4string(eberg_grid)<- CRS("+init=epsg:31467")
>> ## Not run:
>> kml(eberg_grid, colour = DEM, file ="eberg_grid-0.kml")
>>
>>
>>
>> I run into the following error:
>>
>> Error in paths(show.paths = TRUE) :
>> could not find function "shortPathName"
>>
>>
>> In fact, simply typing 'paths()' returns the same error. A bit of
>> googling seems to reveal the method 'shortPathName' appears to only
>> exist in the Win version of R, but not for linux/Mac.
>>
>> Is plotKML supposed to work only under Windows? If not, am I mising
>> something? Is there any workaround?
>
> plotKML is suppose to work on all operating systems. I do not have any
> linux system at the moment at my disposal but only a Windows OS. Our
> second developer (Pierre) only works on the Linux, so he should be able
> to help you with this problem.
>
> I discovered that the PNG file needs to be fixed for transparency
> because there is a bug in Google Earth that does not allow transparency
> of PNGs:
> http://groups.google.com/group/earth-free/browse_thread/thread/1cd6bc29a2b6eb76/62724be63547fab7
>
> The best I could figure out is to add transparency using ImageMagick.
> See the source code at:
>
> https://r-forge.r-project.org/scm/viewvc.php/pkg/R/layer.Raster.R?view=markup&root=plotkml
>
>
> I think if your installation of the animation package is correct (if it
> detects ImageMagick correctly) then your plotKML should not need to run
> the 'paths' function.
>
> I will try to test the scripts on Linux as soon as I come back to my
> office next week.
>
> thanks for your feedback!
>
> T. Hengl
> http://www.vcard.wur.nl/Views/Profile/View.aspx?id=37263
>
>>
>> Any comment/suggestion is mostly welcome. Thanks very much in advance,
>>
>> ]d[
>>
>>
>> --
>> ============================================================
>> Daniel Arribas-Bel, PhD.
>> Url: darribas.org <http://darribas.org/>
>> Mail: darribas at asu.edu <mailto:darribas at asu.edu>
>>
>> GeoDa Center for Geospatial Analysis and Computation
>> (geodacenter.asu.edu <http://geodacenter.asu.edu/>)
>> Arizona State University (USA)
>> ============================================================
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From oscar.perpinan at gmail.com  Mon Jun 11 10:57:31 2012
From: oscar.perpinan at gmail.com (Oscar =?utf-8?B?UGVycGnDscOhbg==?= Lamigueiro)
Date: Mon, 11 Jun 2012 10:57:31 +0200
Subject: [R-sig-Geo] Plot spatial time series
In-Reply-To: <1339264219.96874.YahooMailNeo@web161401.mail.bf1.yahoo.com>
	(Thiago Veloso's message of "Sat, 9 Jun 2012 10:50:19 -0700 (PDT)")
References: <1339179047.13979.YahooMailNeo@web161405.mail.bf1.yahoo.com>
	<4FD246FF.9030701@isciences.com>
	<CAE-RneLeR7OoLmaifo7z6WnQdJLB9dFNZxc3+1AmOOftChd-SA@mail.gmail.com>
	<1339264219.96874.YahooMailNeo@web161401.mail.bf1.yahoo.com>
Message-ID: <87wr3ei5tw.fsf@gmail.com>

Thiago Veloso <thi_veloso at yahoo.com.br> writes:
Hello,

Another approach is to use the zoo package with setZ and cellStats. 

With a toy example:

library(raster)
library(zoo)

fn <- system.file("external/test.grd", package="raster")
r <- raster(fn)
ll <- lapply(runif(12), function(x)r*x)
s <- stack(ll)

idx <- as.yearmon(2011 + seq(0, 11)/12)
s <- setZ(s, idx)
avg <- zoo(cellStats(s), idx)

## plot method for the zoo objects
plot(avg)

## or with lattice, xyplot method for the zoo objects
library(lattice)
xyplot(avg)

Best,

Oscar.
> ? Matthew,
>
> ? Thank you very much for the suggestion. You assumed correctly: I wanted to plot an average of the whole raster.
>
> ? I managed to plot the data (please see http://img137.imageshack.us/img137/601/screenshotan.png), but it's still precarious. Right now I am tying to improve the plot with ggplot2 package!
>
> ? Cheers,
> ? Thiago.
>
>
> ----- Original Message -----
> From: Matt Landis <landis at isciences.com>
> To: Thiago Veloso <thi_veloso at yahoo.com.br>
> Cc: R-SIG list <r-sig-geo at r-project.org>
> Sent: Friday, June 8, 2012 3:45 PM
> Subject: Re: [R-sig-Geo] Plot spatial time series
>
> Fixing typos:
> tmp.df <- data.frame(date = rep(NA, length(files)), lai = NA)
> for ( i in 1:length(files) ){
> ? ?? f <- files[i]
> ?  cat('Reading file: ', f, '\n')
> ? ?tmp.df$date[i] <- regmatches(f, regexpr('[0-9]{7}', f))
> ? ?tmp.df$lai[i] <- mean(getValues(r), na.rm = TRUE)
> }

-- 
Oscar Perpi??n Lamigueiro
Dpto. Ingenier?a El?ctrica
EUITI-UPM
URL: http://procomun.wordpress.com
Twitter: @oscarperpinan


From cribeiro at ualg.pt  Mon Jun 11 11:58:48 2012
From: cribeiro at ualg.pt (=?ISO-8859-1?Q?Concei=E7=E3o_Ribeiro?=)
Date: Mon, 11 Jun 2012 10:58:48 +0100
Subject: [R-sig-Geo] EBI and local information
Message-ID: <CAC5Z6DRq2k3pCHUxSMeYfvtohy8fijb7EZauOZYNseOEdaGBdQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120611/6ed56ce4/attachment.pl>

From aniru123 at gmail.com  Mon Jun 11 12:46:00 2012
From: aniru123 at gmail.com (aniruddha ghosh)
Date: Mon, 11 Jun 2012 16:16:00 +0530
Subject: [R-sig-Geo] analysis on .dbf file instead of .shp
Message-ID: <CAAFmNkuhQVrEJhh=6rjuMfcQm0W_mT=ea2d80vWQxZqb-wA0AQ@mail.gmail.com>

Hello list,
I am trying to perform a regression analysis on a vector data (shape
file). Some of the attributes of the shape files are the potential
explanatory variables (lets say X1 and X2) and response variable (Y).
Now instead of reading the shapefile, I'm using the associated .dbf
file and performing the analysis.
This looks like,
----------------------------------------
>data<-read.dbf("test.dbf")
>names(data)
 "FID"	"X1"	"X2"	"Y"	"POINT_X"	"POINT_Y"
>X<-cbind(data$X1,data$x2)
>Y<-data$Y
>summary(lm(Y~X))
----------------------------------------
Question: Is it a good practice to use the .dbf file instead of the .shp file?

Can I use the model developed here to predict some unknown Y with
known X (obtained from another .dbf file), and combine the predicted Y
as attribute to this .dbf file?

I'm using the .dbf file beacuse it is allowing me to apply diiferent
methods from different packages for prediction which I couldn't apply
to the .shp files due to my limited knowledge in using R!


Thanks,
Aniruddha Ghosh


From djrwicks at gmail.com  Mon Jun 11 12:48:34 2012
From: djrwicks at gmail.com (djrwicks)
Date: Mon, 11 Jun 2012 03:48:34 -0700 (PDT)
Subject: [R-sig-Geo] Local Moran's I spatial weights
Message-ID: <1339411714704-7580157.post@n2.nabble.com>

Dear mailing list readers,

Is there a method to apply the spatial weighting scheme in local Moran's I
to a grid ('SpatialPoints' object) as seen with 'fit.points' in gwr
analysis?

Thanks,

Dan.



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Local-Moran-s-I-spatial-weights-tp7580157.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From mdsumner at gmail.com  Mon Jun 11 23:45:34 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 12 Jun 2012 07:45:34 +1000
Subject: [R-sig-Geo] analysis on .dbf file instead of .shp
In-Reply-To: <CAAFmNkuhQVrEJhh=6rjuMfcQm0W_mT=ea2d80vWQxZqb-wA0AQ@mail.gmail.com>
References: <CAAFmNkuhQVrEJhh=6rjuMfcQm0W_mT=ea2d80vWQxZqb-wA0AQ@mail.gmail.com>
Message-ID: <CAAcGz99AWM+JEOVjUApcP5E-WYyb6TXOfhY9ZZ6ACc1xMFDH2A@mail.gmail.com>

Hello,

On Mon, Jun 11, 2012 at 8:46 PM, aniruddha ghosh <aniru123 at gmail.com> wrote:
> Hello list,
> I am trying to perform a regression analysis on a vector data (shape
> file). Some of the attributes of the shape files are the potential
> explanatory variables (lets say X1 and X2) and response variable (Y).
> Now instead of reading the shapefile, I'm using the associated .dbf
> file and performing the analysis.
> This looks like,
> ----------------------------------------
>>data<-read.dbf("test.dbf")
>>names(data)
> ?"FID" ?"X1" ? ?"X2" ? ?"Y" ? ? "POINT_X" ? ? ? "POINT_Y"
>>X<-cbind(data$X1,data$x2)
>>Y<-data$Y
>>summary(lm(Y~X))
> ----------------------------------------
> Question: Is it a good practice to use the .dbf file instead of the .shp file?
>

It should not matter, and you can obtain the same data (via the same
foreign::read.dbf function) by using the maptools functions
readShapePoints/Lines/Poly. You can always get the original data with
as.data.frame:

fname.shp <- system.file("shapes/baltim.shp", package="maptools")[1]
fname.dbf <- system.file("shapes/baltim.dbf", package="maptools")[1]

library(foreign)
dd <- read.dbf(fname.dbf)
names(dd)

library(maptools)
xx <- readShapePoints(fname.shp)
names(as.data.frame(xx))
 [1] "STATION"   "PRICE"     "NROOM"     "DWELL"     "NBATH"
"PATIO"     "FIREPL"    "AC"        "BMENT"     "NSTOR"     "GAR"
 "AGE"       "CITCOU"    "LOTSZ"     "SQFT"
[16] "X"         "Y"         "coords.x1" "coords.x2"

Note that for the SpatialPointsDataFrame you also get the spatial
coordinates as extra columns (in this case it is a simple one-to-one
of point coordinates to attributes, which won't always be true for
MULTIPOINT or line/polygon geometries).

Apart from the spatial coordinate values, there are some attribute
differences, but the dimensions, names and column class of the two
data.frames is the same:

all.equal(dd, as.data.frame(xx)[,-c(18, 19)])
[1] "Attributes: < Names: 1 string mismatch >"
                  "Attributes: < Length mismatch: comparison on first
2 components >"
[3] "Attributes: < Component 2: Lengths (17, 211) differ (string
compare on first 17) >" "Attributes: < Component 2: 17 string
mismatches >"


There is another route to read shapefile/dbf with readOGR() in the
rgdal package, and there might be slight differences with reading the
DBF that way since it is a completely different set of code under the
hood, though they would be subtle if at all and may just depend on the
vagaries of the file.  The return value is a Spatial*DataFrame as it
is for the maptools functions.

Cheers, Mike.

> Can I use the model developed here to predict some unknown Y with
> known X (obtained from another .dbf file), and combine the predicted Y
> as attribute to this .dbf file?
>
> I'm using the .dbf file beacuse it is allowing me to apply diiferent
> methods from different packages for prediction which I couldn't apply
> to the .shp files due to my limited knowledge in using R!
>
>
> Thanks,
> Aniruddha Ghosh
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Michael Sumner
Hobart, Australia
e-mail: mdsumner at gmail.com


From fabriciovasselai at gmail.com  Tue Jun 12 06:58:17 2012
From: fabriciovasselai at gmail.com (Fabricio Vasselai)
Date: Tue, 12 Jun 2012 01:58:17 -0300
Subject: [R-sig-Geo] help in constructing spatial weight matrix
In-Reply-To: <alpine.LRH.2.02.1204031705370.27004@reclus.nhh.no>
References: <BLU0-SMTP1663654F8220065AAC3B1A4F64D0@phx.gbl>
	<alpine.LRH.2.02.1204031705370.27004@reclus.nhh.no>
Message-ID: <CAEkXS9+nha_BYcyxNQ9LB4yZJ+6oH7E09=gTKBPAirz-QfM+kA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120612/eede4b75/attachment.pl>

From Roger.Bivand at nhh.no  Tue Jun 12 08:16:38 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 12 Jun 2012 08:16:38 +0200 (CEST)
Subject: [R-sig-Geo] help in constructing spatial weight matrix
In-Reply-To: <CAEkXS9+nha_BYcyxNQ9LB4yZJ+6oH7E09=gTKBPAirz-QfM+kA@mail.gmail.com>
References: <BLU0-SMTP1663654F8220065AAC3B1A4F64D0@phx.gbl>
	<alpine.LRH.2.02.1204031705370.27004@reclus.nhh.no>
	<CAEkXS9+nha_BYcyxNQ9LB4yZJ+6oH7E09=gTKBPAirz-QfM+kA@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1206120814100.2559@reclus.nhh.no>

On Tue, 12 Jun 2012, Fabricio Vasselai wrote:

> Dear list,
>
> Given a following up to this question, I have myself a somewhat similar
> question to that of Alsulami.
> I have a shp of Finnish cities and would like to generate for them a weight
> matrix of neighborhood based on inverse distance (for further use in
> Moran's I calculus). Here is the code I've been thinking of:
>
>
>  UF.shp <- readShapePoly(myshpfile.shp, IDvar="OBJECTID")
>  UF.nb <- poly2nb(UF.shp, queen=TRUE)
>  dsts <- nbdists(UF.nb, coordinates(UF.shp))
>  idw <- lapply(dsts, function(x) 1/(x/1000))
>  UF.listw <- nb2listw(UF.nb, glist = idw, style="B", zero.policy=TRUE)
>
>
> But it does not work and I can't figure how to fully adapt the idea to the
> shp I have.
> Anyone please could give me any tips?

Always provide the error messages, the output of sessionInfo(), and 
demonstrate the problem in a reproducible way with built-in data sets. If 
myshpfile.shp is not a character string, then the call to readShapePoly() 
will fail - did you mean: "myshpfile.shp"?

Roger

>
> Best,
>
> FABRICIO
>
>
>
>
> 2012/4/3 Roger Bivand <Roger.Bivand at nhh.no>
>
>> On Tue, 3 Apr 2012, dwl Al_Sulami wrote:
>>
>>  Dear there
>>> I am trying to construct spatial weight matrix using inverse distance,
>>> which means that high weight is given to near observations and ,vies versa,
>>> where  w_ij=w_ji and w_ii=0, Since, I am a new R user, I've tried many
>>> functions in sp,spdep packages and I find some functions to find weight
>>> matrix by using nearest neighbours and by distance-based neighbours, but I
>>> want to use all observations as neighbours and based on the inverse
>>> distance, I can construct the weights.
>>> Before I write the code I'll give some information about my data, I have
>>> the coordinates of   51 states (US states) , thus latitude and longitude of
>>> each states and based on the distance between each state I will give a
>>> weight for states where the weight is the the inverse of the distance.
>>> obviously , the weight matrix are symmetric.
>>> Then I've tried the following code
>>> data(location)# data.frame with 2 col and 51 row
>>> loc.sp = SpatialPoints(cbind(location$**latitude,location$longitude))
>>> sy8<-knn2nb(knearneigh(loc.sp,**k=50)) # for each state all other states
>>> are considered as neighbour
>>> dsts<-nbdists(sy8, loc.sp)
>>> idw<-lapply(dsts, function(x) 1/(x))
>>> sy<-nb2listw(sy8, glist=idw, style="B")
>>> col.mat <- listw2mat(sy)
>>> after running this code, I got symmetric matrix (51* 51), where w_ii=0
>>> and w_ij=w_ji
>>> but I am not sure if this is true!!!
>>>
>>
>> What do you mean by true - correct? There is at least one problem, that
>> you are not ensuring that the distances are computed by Great Circle. More
>> or less reproducing your code (data(locations) must be wrong):
>>
>> library(maps)
>> sts <- map("state", fill=TRUE, plot=FALSE)
>> library(maptools)
>> IDs <- sapply(strsplit(sts$names, ":"), function(x) x[1])
>> SPl <- map2SpatialPolygons(sts, IDs=IDs,
>>  proj4string=CRS("+proj=longlat +datum=WGS84"))
>> crds <- SpatialPoints(coordinates(SPl)**,
>>  proj4string=CRS("+proj=longlat +datum=WGS84"))
>> is.projected(crds)
>> library(spdep)
>> nbs <- dnearneigh(crds, 0, 10000)
>> # either crds a SpatialPoints object !is.projected(), or use longlat=TRUE
>> nbs
>> dsts <- nbdists(nbs, crds)
>> # either crds a SpatialPoints object !is.projected(), or use longlat=TRUE
>> summary(unlist(dsts))
>> # in km
>> idw <- lapply(dsts, function(x) 1/(x))
>> sy <- nb2listw(nbs, glist=idw, style="B")
>> col.mat <- listw2mat(sy)
>> all.equal(col.mat, t(col.mat), check.attributes=FALSE)
>>
>> I think that your "distances" were planar measures in geographical
>> coordinates.
>>
>> Hope this helps,
>>
>> Roger
>>
>>
>>  any commands and helps are appreciated
>>> Regards,
>>> Alsulami
>>>
>>>
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________**_________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/**listinfo/r-sig-geo<https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>>>
>>>
>> --
>> Roger Bivand
>> Department of Economics, NHH Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>>
>> ______________________________**_________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/**listinfo/r-sig-geo<https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Tue Jun 12 08:25:33 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 12 Jun 2012 08:25:33 +0200 (CEST)
Subject: [R-sig-Geo] Local Moran's I spatial weights
In-Reply-To: <1339411714704-7580157.post@n2.nabble.com>
References: <1339411714704-7580157.post@n2.nabble.com>
Message-ID: <alpine.LRH.2.02.1206120822470.2559@reclus.nhh.no>

On Mon, 11 Jun 2012, djrwicks wrote:

> Dear mailing list readers,
>
> Is there a method to apply the spatial weighting scheme in local Moran's I
> to a grid ('SpatialPoints' object) as seen with 'fit.points' in gwr
> analysis?

You should be more explicit. What do you mean by "the spatial weighting 
scheme in local Moran's I"? Do you mean a listw object? Are you then 
asking whether you can create a listw object from a SpatialPoints object 
(yes, you create an nb object first)? Or are you asking something else? 
What do you mean by "apply"?

Roger

>
> Thanks,
>
> Dan.
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Local-Moran-s-I-spatial-weights-tp7580157.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From hengl at spatial-analyst.net  Tue Jun 12 08:40:46 2012
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Tue, 12 Jun 2012 16:40:46 +1000
Subject: [R-sig-Geo] Plot spatial time series
In-Reply-To: <87wr3ei5tw.fsf@gmail.com>
References: <1339179047.13979.YahooMailNeo@web161405.mail.bf1.yahoo.com>
	<4FD246FF.9030701@isciences.com>
	<CAE-RneLeR7OoLmaifo7z6WnQdJLB9dFNZxc3+1AmOOftChd-SA@mail.gmail.com>
	<1339264219.96874.YahooMailNeo@web161401.mail.bf1.yahoo.com>
	<87wr3ei5tw.fsf@gmail.com>
Message-ID: <4FD6E46E.3060309@spatial-analyst.net>


Connected with this topic, there is now an (experimental) plotKML method 
for spatial series of raster bricks that allows visualization of 
time-series rasters in Google Earth:

http://plotkml.r-forge.r-project.org/RasterBrickTimeSeries-class.html

Here is an example:

http://plotkml.r-forge.r-project.org/Fig_RasterBrickTimeSeries.jpg
http://plotkml.r-forge.r-project.org/LST.ts.kml

plotKML should be soon available via CRAN.

T. Hengl
http://www.wewur.wur.nl/popups/vcard.aspx?id=HENGL001


On 11/06/2012 18:57, Oscar Perpi??n Lamigueiro wrote:
> Thiago Veloso<thi_veloso at yahoo.com.br>  writes:
> Hello,
>
> Another approach is to use the zoo package with setZ and cellStats.
>
> With a toy example:
>
> library(raster)
> library(zoo)
>
> fn<- system.file("external/test.grd", package="raster")
> r<- raster(fn)
> ll<- lapply(runif(12), function(x)r*x)
> s<- stack(ll)
>
> idx<- as.yearmon(2011 + seq(0, 11)/12)
> s<- setZ(s, idx)
> avg<- zoo(cellStats(s), idx)
>
> ## plot method for the zoo objects
> plot(avg)
>
> ## or with lattice, xyplot method for the zoo objects
> library(lattice)
> xyplot(avg)
>
> Best,
>
> Oscar.
>>    Matthew,
>>
>>    Thank you very much for the suggestion. You assumed correctly: I wanted to plot an average of the whole raster.
>>
>>    I managed to plot the data (please see http://img137.imageshack.us/img137/601/screenshotan.png), but it's still precarious. Right now I am tying to improve the plot with ggplot2 package!
>>
>>    Cheers,
>>    Thiago.
>>
>>
>> ----- Original Message -----
>> From: Matt Landis<landis at isciences.com>
>> To: Thiago Veloso<thi_veloso at yahoo.com.br>
>> Cc: R-SIG list<r-sig-geo at r-project.org>
>> Sent: Friday, June 8, 2012 3:45 PM
>> Subject: Re: [R-sig-Geo] Plot spatial time series
>>
>> Fixing typos:
>> tmp.df<- data.frame(date = rep(NA, length(files)), lai = NA)
>> for ( i in 1:length(files) ){
>>       f<- files[i]
>>     cat('Reading file: ', f, '\n')
>>     tmp.df$date[i]<- regmatches(f, regexpr('[0-9]{7}', f))
>>     tmp.df$lai[i]<- mean(getValues(r), na.rm = TRUE)
>> }
>


From mauricio.zambrano at jrc.ec.europa.eu  Tue Jun 12 10:10:41 2012
From: mauricio.zambrano at jrc.ec.europa.eu (Mauricio Zambrano-Bigiarini)
Date: Tue, 12 Jun 2012 10:10:41 +0200
Subject: [R-sig-Geo] Plot spatial time series
In-Reply-To: <4FD6E46E.3060309@spatial-analyst.net>
References: <1339179047.13979.YahooMailNeo@web161405.mail.bf1.yahoo.com>
	<4FD246FF.9030701@isciences.com>
	<CAE-RneLeR7OoLmaifo7z6WnQdJLB9dFNZxc3+1AmOOftChd-SA@mail.gmail.com>
	<1339264219.96874.YahooMailNeo@web161401.mail.bf1.yahoo.com>
	<87wr3ei5tw.fsf@gmail.com> <4FD6E46E.3060309@spatial-analyst.net>
Message-ID: <4FD6F981.8080108@jrc.ec.europa.eu>

On 12/06/12 08:40, Tomislav Hengl wrote:
>
> Connected with this topic, there is now an (experimental) plotKML method
> for spatial series of raster bricks that allows visualization of
> time-series rasters in Google Earth:
>
> http://plotkml.r-forge.r-project.org/RasterBrickTimeSeries-class.html
>
> Here is an example:
>
> http://plotkml.r-forge.r-project.org/Fig_RasterBrickTimeSeries.jpg
> http://plotkml.r-forge.r-project.org/LST.ts.kml
>
> plotKML should be soon available via CRAN.
>

Thank you very much Tom for this info.

This is just what I was looking for.

Cheers,

Mauricio Zambrano-Bigiarini
-- 
====================================================
Water Resources Unit
Institute for Environment and Sustainability (IES)
Joint Research Centre (JRC), European Commission
webinfo    : http://floods.jrc.ec.europa.eu/
====================================================
DISCLAIMER:\ "The views expressed are purely those of th...{{dropped:12}}


From djrwicks at gmail.com  Tue Jun 12 10:51:06 2012
From: djrwicks at gmail.com (djrwicks)
Date: Tue, 12 Jun 2012 01:51:06 -0700 (PDT)
Subject: [R-sig-Geo] Local Moran's I spatial weights
In-Reply-To: <alpine.LRH.2.02.1206120822470.2559@reclus.nhh.no>
References: <1339411714704-7580157.post@n2.nabble.com>
	<alpine.LRH.2.02.1206120822470.2559@reclus.nhh.no>
Message-ID: <1339491066079-7580164.post@n2.nabble.com>

Thank you, a geographically weighted measure of Moran's I sounds like a
sensible description of what I am trying to achieve.  Is it possible to
calculate this using GW weights?

Dan.

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Local-Moran-s-I-spatial-weights-tp7580157p7580164.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Roger.Bivand at nhh.no  Tue Jun 12 13:37:54 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 12 Jun 2012 13:37:54 +0200 (CEST)
Subject: [R-sig-Geo] Local Moran's I spatial weights
In-Reply-To: <1339491066079-7580164.post@n2.nabble.com>
References: <1339411714704-7580157.post@n2.nabble.com>
	<alpine.LRH.2.02.1206120822470.2559@reclus.nhh.no>
	<1339491066079-7580164.post@n2.nabble.com>
Message-ID: <alpine.LRH.2.02.1206121330420.2559@reclus.nhh.no>

On Tue, 12 Jun 2012, djrwicks wrote:

> Thank you, a geographically weighted measure of Moran's I sounds like a
> sensible description of what I am trying to achieve.  Is it possible to
> calculate this using GW weights?

Please do quote the thread, because nabble servers do go over capacity (as 
at present), and the context is lost.

I replied to your first post by asking for more precision. I still don't 
have it. What do you mean by "a geographically weighted measure of 
Moran's I"? The spatial weights used in the global and local measures 
relate the observations of a variable, where the relationships are 
expressed by a weights matrix. The matrix of GW weights would look like 
this when the GW data points and fit points are the same points, because 
the weights are from fit point i to all data points.

You have not made your needs plain at all, I'm afraid.

Roger

>
> Dan.
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Local-Moran-s-I-spatial-weights-tp7580157p7580164.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From djrwicks at gmail.com  Tue Jun 12 14:27:28 2012
From: djrwicks at gmail.com (Daniel Wicks)
Date: Tue, 12 Jun 2012 13:27:28 +0100
Subject: [R-sig-Geo] Local Moran's I spatial weights
In-Reply-To: <alpine.LRH.2.02.1206121330420.2559@reclus.nhh.no>
References: <1339411714704-7580157.post@n2.nabble.com>
	<alpine.LRH.2.02.1206120822470.2559@reclus.nhh.no>
	<1339491066079-7580164.post@n2.nabble.com>
	<alpine.LRH.2.02.1206121330420.2559@reclus.nhh.no>
Message-ID: <00BE7515-84BD-4646-914A-179B28FF3304@gmail.com>

I have a number of random sample points across a study area.  At each point an observation has been made as to the occurrence of an event, marked accordingly with a 0 or 1 based on a presence or absence of the event.  I am interested in visualising the spatial association between these points.  I therefore want to create a map showing local variation of Moran's I but in the form of a continuous surface across the entire study area.  You can achieve this in GWR using the fit.points weighted by distances from the data points to produce a map of local variation in regression.  I am trying to do something similar with Moran's I.

I apologise for the confusion as I am not best sure how to express my query.

Dan.


On 12 Jun 2012, at 12:37, Roger Bivand wrote:

> On Tue, 12 Jun 2012, djrwicks wrote:
> 
>> Thank you, a geographically weighted measure of Moran's I sounds like a
>> sensible description of what I am trying to achieve.  Is it possible to
>> calculate this using GW weights?
> 
> Please do quote the thread, because nabble servers do go over capacity (as at present), and the context is lost.
> 
> I replied to your first post by asking for more precision. I still don't have it. What do you mean by "a geographically weighted measure of Moran's I"? The spatial weights used in the global and local measures relate the observations of a variable, where the relationships are expressed by a weights matrix. The matrix of GW weights would look like this when the GW data points and fit points are the same points, because the weights are from fit point i to all data points.
> 
> You have not made your needs plain at all, I'm afraid.
> 
> Roger
> 
>> 
>> Dan.
>> 
>> --
>> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Local-Moran-s-I-spatial-weights-tp7580157p7580164.html
>> Sent from the R-sig-geo mailing list archive at Nabble.com.
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
> 
> -- 
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
> 


From thi_veloso at yahoo.com.br  Tue Jun 12 14:31:12 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Tue, 12 Jun 2012 05:31:12 -0700 (PDT)
Subject: [R-sig-Geo] Plot spatial time series
In-Reply-To: <87wr3ei5tw.fsf@gmail.com>
References: <1339179047.13979.YahooMailNeo@web161405.mail.bf1.yahoo.com>
	<4FD246FF.9030701@isciences.com>
	<CAE-RneLeR7OoLmaifo7z6WnQdJLB9dFNZxc3+1AmOOftChd-SA@mail.gmail.com>
	<1339264219.96874.YahooMailNeo@web161401.mail.bf1.yahoo.com>
	<87wr3ei5tw.fsf@gmail.com>
Message-ID: <1339504272.60439.YahooMailNeo@web161404.mail.bf1.yahoo.com>

? Hi Oscar,

? I reproduced your example in my computer and the final graphic is fine. However, I was not brave enough to stack 506 rasters and test with my data.

? Thanks and best regards,
? Thiago.


----- Original Message -----
From: Oscar Perpi??n Lamigueiro <oscar.perpinan at gmail.com>
To: Thiago Veloso <thi_veloso at yahoo.com.br>
Cc: Matt Landis <landis at isciences.com>; R-SIG list <r-sig-geo at r-project.org>
Sent: Monday, June 11, 2012 5:57 AM
Subject: Re: Plot spatial time series

Thiago Veloso <thi_veloso at yahoo.com.br> writes:
Hello,

Another approach is to use the zoo package with setZ and cellStats. 

With a toy example:

library(raster)
library(zoo)

fn <- system.file("external/test.grd", package="raster")
r <- raster(fn)
ll <- lapply(runif(12), function(x)r*x)
s <- stack(ll)

idx <- as.yearmon(2011 + seq(0, 11)/12)
s <- setZ(s, idx)
avg <- zoo(cellStats(s), idx)

## plot method for the zoo objects
plot(avg)

## or with lattice, xyplot method for the zoo objects
library(lattice)
xyplot(avg)

Best,

Oscar.
> ? Matthew,
>
> ? Thank you very much for the suggestion. You assumed correctly: I wanted to plot an average of the whole raster.
>
> ? I managed to plot the data (please see http://img137.imageshack.us/img137/601/screenshotan.png), but it's still precarious. Right now I am tying to improve the plot with ggplot2 package!
>
> ? Cheers,
> ? Thiago.
>
>
> ----- Original Message -----
> From: Matt Landis <landis at isciences.com>
> To: Thiago Veloso <thi_veloso at yahoo.com.br>
> Cc: R-SIG list <r-sig-geo at r-project.org>
> Sent: Friday, June 8, 2012 3:45 PM
> Subject: Re: [R-sig-Geo] Plot spatial time series
>
> Fixing typos:
> tmp.df <- data.frame(date = rep(NA, length(files)), lai = NA)
> for ( i in 1:length(files) ){
> ? ?? f <- files[i]
> ?? cat('Reading file: ', f, '\n')
> ? ?tmp.df$date[i] <- regmatches(f, regexpr('[0-9]{7}', f))
> ? ?tmp.df$lai[i] <- mean(getValues(r), na.rm = TRUE)
> }

-- 
Oscar Perpi??n Lamigueiro
Dpto. Ingenier?a El?ctrica
EUITI-UPM
URL: http://procomun.wordpress.com
Twitter: @oscarperpinan



From Roger.Bivand at nhh.no  Tue Jun 12 14:45:47 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 12 Jun 2012 14:45:47 +0200 (CEST)
Subject: [R-sig-Geo] Local Moran's I spatial weights
In-Reply-To: <00BE7515-84BD-4646-914A-179B28FF3304@gmail.com>
References: <1339411714704-7580157.post@n2.nabble.com>
	<alpine.LRH.2.02.1206120822470.2559@reclus.nhh.no>
	<1339491066079-7580164.post@n2.nabble.com>
	<alpine.LRH.2.02.1206121330420.2559@reclus.nhh.no>
	<00BE7515-84BD-4646-914A-179B28FF3304@gmail.com>
Message-ID: <alpine.LRH.2.02.1206121430050.2559@reclus.nhh.no>

On Tue, 12 Jun 2012, Daniel Wicks wrote:

> I have a number of random sample points across a study area.  At each 
> point an observation has been made as to the occurrence of an event, 
> marked accordingly with a 0 or 1 based on a presence or absence of the 
> event.

How were the observations made? Were the observation locations determined 
by you - a random sample, or by the phenomena (in which case it is more 
like a marked point process).

> I am interested in visualising the spatial association between 
> these points.  I therefore want to create a map showing local variation 
> of Moran's I but in the form of a continuous surface across the entire 
> study area.

Well, Moran's I is for a continuously valued observed variable (or 
residuals), not for a 0/1 variable. The equivalent measure is the join 
count, but this does not have a local version.

If your observations are 0/1, and have point support, it isn't obvious why 
you want a continuous surface. This would be nearest to some kind of odds 
interpolation (what is the chance of a 1 at an unobserved location, given 
the data and their locations). You have to be very careful indeed with 
inhomogeneity (that is here, spatially patterned omitted environmental 
variables influencing the 0 or 1 observations).

It is also possible that your sampling scheme is affecting the outcome - 
it is possible to sample to at least partially control for inhomogeneity.

> You can achieve this in GWR using the fit.points weighted 
> by distances from the data points to produce a map of local variation in 
> regression.  I am trying to do something similar with Moran's I.
>

GWR has nothing to do with this at all.

> I apologise for the confusion as I am not best sure how to express my 
> query.
>

Your data are probably rather different from your view of them. I'm not 
sure, but maybe a kernel ratio of 2D kernels for the 0 and 1 marked 
observations might help you visualise things, even though this isn't 
really a marked point process. You'd still risk falling into the trap of 
inhomogeneity (the apparently important features of the ratio map might 
correlate highly with missing variables).

Roger

> Dan.
>
>
> On 12 Jun 2012, at 12:37, Roger Bivand wrote:
>
>> On Tue, 12 Jun 2012, djrwicks wrote:
>>
>>> Thank you, a geographically weighted measure of Moran's I sounds like a
>>> sensible description of what I am trying to achieve.  Is it possible to
>>> calculate this using GW weights?
>>
>> Please do quote the thread, because nabble servers do go over capacity (as at present), and the context is lost.
>>
>> I replied to your first post by asking for more precision. I still don't have it. What do you mean by "a geographically weighted measure of Moran's I"? The spatial weights used in the global and local measures relate the observations of a variable, where the relationships are expressed by a weights matrix. The matrix of GW weights would look like this when the GW data points and fit points are the same points, because the weights are from fit point i to all data points.
>>
>> You have not made your needs plain at all, I'm afraid.
>>
>> Roger
>>
>>>
>>> Dan.
>>>
>>> --
>>> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Local-Moran-s-I-spatial-weights-tp7580157p7580164.html
>>> Sent from the R-sig-geo mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, NHH Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From oehm8895 at uni-landau.de  Tue Jun 12 17:29:52 2012
From: oehm8895 at uni-landau.de (Gunnar Oehmichen)
Date: Tue, 12 Jun 2012 17:29:52 +0200
Subject: [R-sig-Geo] Variogram estimation without spatial reference
Message-ID: <4FD76070.1030907@uni-landau.de>

Dear R-Sig-Geo list,

as part of an applied field-laboratory course, I will try to estimate 
variograms of soil-lipid contents for two meadows differing in use.

Samples were taken in the following scheme:

    Code dist      X       Y Wat mead Pair
21 B6-1  0.0 443840 5451412   B   B6    6
22 B6-1  0.5 443841 5451410   B   B6    6
23 B6-1  1.0 443843 5451410   B   B6    6
24 B6-1  2.0 443844 5451411   B   B6    6
25 B6-1  4.0 443841 5451410   B   B6    6
26 B6-1  8.0 443848 5451409   B   B6    6
...

column dist represents the distance [m] to the preceding point.

This scheme was replicated on each meadow 5 times to facilitate 
replicates of each lag (0.5, 1.0, 2.0, 4.0, 8.0). We picked a random 
point (dist = 0.0) sampled, moved a distance of 0.5 m in a random 
direction, sampled and repeated the procedure with increasing distances. 
Allthough lattitude and longitude were recorded (X and Y), I do not 
consider these values to be helpful, since the measurement error of the 
GPS device is ~ 6m, so a much coarser resolution than needed.

Results of the analysis are still missing, so no need to worry about that.

but to the point, do you know of a way to use functions like variogram() 
with this kind of data?

Thanks a lot,

Gunnar Oehmichen


From simon.ohanlon at imperial.ac.uk  Tue Jun 12 18:53:41 2012
From: simon.ohanlon at imperial.ac.uk (O'Hanlon, Simon J)
Date: Tue, 12 Jun 2012 16:53:41 +0000
Subject: [R-sig-Geo] Plotting multiple SpatialPixelsDataFrame on the same
 plot and readGDAL
Message-ID: <7AE0828DCFFC0144817331B53EDC11A018814696@icexch-m5.ic.ac.uk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120612/6a57ee02/attachment.pl>

From tom.gottfried at o2mail.de  Tue Jun 12 21:53:36 2012
From: tom.gottfried at o2mail.de (Tom Gottfried)
Date: Tue, 12 Jun 2012 21:53:36 +0200
Subject: [R-sig-Geo] Variogram estimation without spatial reference
In-Reply-To: <4FD76070.1030907@uni-landau.de>
References: <4FD76070.1030907@uni-landau.de>
Message-ID: <4FD79E40.3020507@o2mail.de>

Am 12.06.2012 17:29, schrieb Gunnar Oehmichen:
> Dear R-Sig-Geo list,
>
> as part of an applied field-laboratory course, I will try to estimate
> variograms of soil-lipid contents for two meadows differing in use.
>
> Samples were taken in the following scheme:
>
> Code dist X Y Wat mead Pair
> 21 B6-1 0.0 443840 5451412 B B6 6
> 22 B6-1 0.5 443841 5451410 B B6 6
> 23 B6-1 1.0 443843 5451410 B B6 6
> 24 B6-1 2.0 443844 5451411 B B6 6
> 25 B6-1 4.0 443841 5451410 B B6 6
> 26 B6-1 8.0 443848 5451409 B B6 6
> ...
>
> column dist represents the distance [m] to the preceding point.
>
> This scheme was replicated on each meadow 5 times to facilitate
> replicates of each lag (0.5, 1.0, 2.0, 4.0, 8.0). We picked a random
> point (dist = 0.0) sampled, moved a distance of 0.5 m in a random
> direction, sampled and repeated the procedure with increasing distances.
> Allthough lattitude and longitude were recorded (X and Y), I do not
> consider these values to be helpful, since the measurement error of the
> GPS device is ~ 6m, so a much coarser resolution than needed.
>
> Results of the analysis are still missing, so no need to worry about that.
>
> but to the point, do you know of a way to use functions like variogram()
> with this kind of data?

No, but it should be pretty easy to implement a function that calculates 
semivariance between the rows of your data (using diff()). Taking the 
average of semivariances for each value of dist gives you a 
semivariogram. But it gives you not more than 10 point pairs for each 
distance, which is not much.

HTH,
Tom

> Thanks a lot,
>
> Gunnar Oehmichen
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From edzer.pebesma at uni-muenster.de  Wed Jun 13 09:16:41 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 13 Jun 2012 09:16:41 +0200
Subject: [R-sig-Geo] Variogram estimation without spatial reference
In-Reply-To: <4FD79E40.3020507@o2mail.de>
References: <4FD76070.1030907@uni-landau.de> <4FD79E40.3020507@o2mail.de>
Message-ID: <4FD83E59.3020108@uni-muenster.de>

What you did sounds to me like an (unbalanced) nested sampling scheme.
One of the first computer programs I ever wrote analysed such data (in
the late 80's, in Pascal) but it got lost somewhere in the migration
from 5.25" 360 Kb floppy disks to 256 Gb SSD drives.

As the underlying model was, IIRC, a mixed effects ANOVA model, I guess
lme() in package nlme would now provide you the means to analyse them;
you'd need to define a factors for each distance class, and have this
nested within the factor meadow.

On 06/12/2012 09:53 PM, Tom Gottfried wrote:
> Am 12.06.2012 17:29, schrieb Gunnar Oehmichen:
>> Dear R-Sig-Geo list,
>>
>> as part of an applied field-laboratory course, I will try to estimate
>> variograms of soil-lipid contents for two meadows differing in use.
>>
>> Samples were taken in the following scheme:
>>
>> Code dist X Y Wat mead Pair
>> 21 B6-1 0.0 443840 5451412 B B6 6
>> 22 B6-1 0.5 443841 5451410 B B6 6
>> 23 B6-1 1.0 443843 5451410 B B6 6
>> 24 B6-1 2.0 443844 5451411 B B6 6
>> 25 B6-1 4.0 443841 5451410 B B6 6
>> 26 B6-1 8.0 443848 5451409 B B6 6
>> ...
>>
>> column dist represents the distance [m] to the preceding point.
>>
>> This scheme was replicated on each meadow 5 times to facilitate
>> replicates of each lag (0.5, 1.0, 2.0, 4.0, 8.0). We picked a random
>> point (dist = 0.0) sampled, moved a distance of 0.5 m in a random
>> direction, sampled and repeated the procedure with increasing distances.
>> Allthough lattitude and longitude were recorded (X and Y), I do not
>> consider these values to be helpful, since the measurement error of the
>> GPS device is ~ 6m, so a much coarser resolution than needed.
>>
>> Results of the analysis are still missing, so no need to worry about
>> that.
>>
>> but to the point, do you know of a way to use functions like variogram()
>> with this kind of data?
> 
> No, but it should be pretty easy to implement a function that calculates
> semivariance between the rows of your data (using diff()). Taking the
> average of semivariances for each value of dist gives you a
> semivariogram. But it gives you not more than 10 point pairs for each
> distance, which is not much.
> 
> HTH,
> Tom
> 
>> Thanks a lot,
>>
>> Gunnar Oehmichen
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From m.fairbrother at bristol.ac.uk  Wed Jun 13 14:46:20 2012
From: m.fairbrother at bristol.ac.uk (Malcolm Fairbrother)
Date: Wed, 13 Jun 2012 13:46:20 +0100
Subject: [R-sig-Geo] calculating shortest distance from a set of
	SpatialPoints to a polygon
Message-ID: <995038FA-E667-43CC-B2C2-E2D06C327321@bristol.ac.uk>

Dear list,

I have a large set of locations scattered over a land area covering about 200,000 km?. That area borders the sea, and I'd like to find the shortest distance from each point location to the sea/coast. Point locations are in lat/long.

I've turned the locations into a SpatialPoints object, with a proj4string. And I have a SpatialPolygons object consisting of a single polygon, defining the sea areas (same proj4string as for the SpatialPoints object).

My problem is I'm not clear on the next step. I tried using "gDistance" from the "rgeos" package:

dists <- gDistance(locations, sea)

but got two warnings:

Warning messages:
1: In RGEOSDistanceFunc(spgeom1, spgeom2, byid, "rgeos_distance") :
  Spatial object 1 is not projected; GEOS expects planar coordinates
2: In RGEOSDistanceFunc(spgeom1, spgeom2, byid, "rgeos_distance") :
  Spatial object 2 is not projected; GEOS expects planar coordinates

So should I set the proj4string to NA? And/or is gDistance even the right tool for this job? Maybe it's designed for instances where distances are small, not in the hundreds of kilometres?

Any advice on how to do this appropriately would be much appreciated.

- Malcolm


From simon.ohanlon at imperial.ac.uk  Wed Jun 13 14:59:55 2012
From: simon.ohanlon at imperial.ac.uk (O'Hanlon, Simon J)
Date: Wed, 13 Jun 2012 12:59:55 +0000
Subject: [R-sig-Geo] calculating shortest distance from a set
	of	SpatialPoints to a polygon
In-Reply-To: <995038FA-E667-43CC-B2C2-E2D06C327321@bristol.ac.uk>
References: <995038FA-E667-43CC-B2C2-E2D06C327321@bristol.ac.uk>
Message-ID: <7AE0828DCFFC0144817331B53EDC11A018814A49@icexch-m5.ic.ac.uk>

Hi Malcom,
I think you can try spatstat::nncross. You will need to turn your sp objects into spatstat objects. So coerce your locations into a point pattern of class 'ppp', which I believe is done easily enough with maptools::as.ppp and your polygons into a spatial lines pattern of class 'psp' using maptools::as.psp.

Then it should be as simple as:

dists <-nncross(locations.ppp,sea.psp)

HTH.

Simon

-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Malcolm Fairbrother
Sent: 13 June 2012 13:46
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] calculating shortest distance from a set of SpatialPoints to a polygon

Dear list,

I have a large set of locations scattered over a land area covering about 200,000 km?. That area borders the sea, and I'd like to find the shortest distance from each point location to the sea/coast. Point locations are in lat/long.

I've turned the locations into a SpatialPoints object, with a proj4string. And I have a SpatialPolygons object consisting of a single polygon, defining the sea areas (same proj4string as for the SpatialPoints object).

My problem is I'm not clear on the next step. I tried using "gDistance" from the "rgeos" package:

dists <- gDistance(locations, sea)

but got two warnings:

Warning messages:
1: In RGEOSDistanceFunc(spgeom1, spgeom2, byid, "rgeos_distance") :
  Spatial object 1 is not projected; GEOS expects planar coordinates
2: In RGEOSDistanceFunc(spgeom1, spgeom2, byid, "rgeos_distance") :
  Spatial object 2 is not projected; GEOS expects planar coordinates

So should I set the proj4string to NA? And/or is gDistance even the right tool for this job? Maybe it's designed for instances where distances are small, not in the hundreds of kilometres?

Any advice on how to do this appropriately would be much appreciated.

- Malcolm

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From simon.ohanlon at imperial.ac.uk  Wed Jun 13 15:14:36 2012
From: simon.ohanlon at imperial.ac.uk (O'Hanlon, Simon J)
Date: Wed, 13 Jun 2012 13:14:36 +0000
Subject: [R-sig-Geo] calculating shortest distance from a set
	of	SpatialPoints to a polygon
In-Reply-To: <995038FA-E667-43CC-B2C2-E2D06C327321@bristol.ac.uk>
References: <995038FA-E667-43CC-B2C2-E2D06C327321@bristol.ac.uk>
Message-ID: <7AE0828DCFFC0144817331B53EDC11A018814A74@icexch-m5.ic.ac.uk>

Hi Malcom,
I forgot one step (and as.ppp is from spatstat not maptools package).

as.psp is expecting a SpatialLines object not a SpatialPolygons object. You can change your SpatialPolygons to SpatialLines easily enough, so try this:

library(spatstat)
sea.l <- as(sea, "SpatialLines")
sea.psp <- as.psp(sea.l)
locations.ppp <- as.ppp(locations)
dists <- nncross(locations.ppp, sea.psp)

HTH,

Simon

-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Malcolm Fairbrother
Sent: 13 June 2012 13:46
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] calculating shortest distance from a set of SpatialPoints to a polygon

Dear list,

I have a large set of locations scattered over a land area covering about 200,000 km?. That area borders the sea, and I'd like to find the shortest distance from each point location to the sea/coast. Point locations are in lat/long.

I've turned the locations into a SpatialPoints object, with a proj4string. And I have a SpatialPolygons object consisting of a single polygon, defining the sea areas (same proj4string as for the SpatialPoints object).

My problem is I'm not clear on the next step. I tried using "gDistance" from the "rgeos" package:

dists <- gDistance(locations, sea)

but got two warnings:

Warning messages:
1: In RGEOSDistanceFunc(spgeom1, spgeom2, byid, "rgeos_distance") :
  Spatial object 1 is not projected; GEOS expects planar coordinates
2: In RGEOSDistanceFunc(spgeom1, spgeom2, byid, "rgeos_distance") :
  Spatial object 2 is not projected; GEOS expects planar coordinates

So should I set the proj4string to NA? And/or is gDistance even the right tool for this job? Maybe it's designed for instances where distances are small, not in the hundreds of kilometres?

Any advice on how to do this appropriately would be much appreciated.

- Malcolm

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Wed Jun 13 15:22:18 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 13 Jun 2012 15:22:18 +0200 (CEST)
Subject: [R-sig-Geo] calculating shortest distance from a set of
 SpatialPoints to a polygon
In-Reply-To: <995038FA-E667-43CC-B2C2-E2D06C327321@bristol.ac.uk>
References: <995038FA-E667-43CC-B2C2-E2D06C327321@bristol.ac.uk>
Message-ID: <alpine.LRH.2.02.1206131512480.7076@reclus.nhh.no>

On Wed, 13 Jun 2012, Malcolm Fairbrother wrote:

> Dear list,
>
> I have a large set of locations scattered over a land area covering 
> about 200,000 km?. That area borders the sea, and I'd like to find the 
> shortest distance from each point location to the sea/coast. Point 
> locations are in lat/long.
>
> I've turned the locations into a SpatialPoints object, with a 
> proj4string. And I have a SpatialPolygons object consisting of a single 
> polygon, defining the sea areas (same proj4string as for the 
> SpatialPoints object).
>
> My problem is I'm not clear on the next step. I tried using "gDistance" 
> from the "rgeos" package:
>
> dists <- gDistance(locations, sea)
>
> but got two warnings:
>
> Warning messages:
> 1: In RGEOSDistanceFunc(spgeom1, spgeom2, byid, "rgeos_distance") :
>  Spatial object 1 is not projected; GEOS expects planar coordinates
> 2: In RGEOSDistanceFunc(spgeom1, spgeom2, byid, "rgeos_distance") :
>  Spatial object 2 is not projected; GEOS expects planar coordinates
>

Wait a moment! The warnings are there for a purpose (and would also affect 
the use of functions in spatstat, which also assumes planar coordinates). 
Never delete important data (in this case the metadata of your points, 
saying which spatial reference system they possess).

If your data are in geographical coordinates, you need to state that 
specifically, and look for suitable functions. One such is perhaps 
dist2Line() in geosphere.

The alternative (and I advise doing both) is to project your points and 
coastine, and use gDistance(locations, sea, byid=TRUE), which will return 
distances in the metric of the projection (probably metres).

> So should I set the proj4string to NA? And/or is gDistance even the 
> right tool for this job? Maybe it's designed for instances where 
> distances are small, not in the hundreds of kilometres?

Never set proj4string to NA if it is known (NA means not available, it 
doesn't mean ignore). The function works on planar geometries, and 
projection distortions for well-chosed projections at that scale are not 
large. Usually, wrongly defined datum metadata are more of a problem.

Roger

>
> Any advice on how to do this appropriately would be much appreciated.
>
> - Malcolm
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From samanmonfared1 at gmail.com  Wed Jun 13 16:41:13 2012
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Wed, 13 Jun 2012 19:11:13 +0430
Subject: [R-sig-Geo] nlm with condition
Message-ID: <CAOytA4YMyt6hGcnoq=jt-23RxrmKtjVjdazuuCOUB1TVsheW9A@mail.gmail.com>

Dear all.
I try to  minimize a function using nlm.
my function has three parameter that all of them are positive.
How can I do this condition in parameter estimation with nlm.
Thanks.

-- 

Saman Monfared
Msc Student,
Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167


From tom.gottfried at o2mail.de  Wed Jun 13 17:39:14 2012
From: tom.gottfried at o2mail.de (Tom Gottfried)
Date: Wed, 13 Jun 2012 17:39:14 +0200
Subject: [R-sig-Geo] nlm with condition
In-Reply-To: <CAOytA4YMyt6hGcnoq=jt-23RxrmKtjVjdazuuCOUB1TVsheW9A@mail.gmail.com>
References: <CAOytA4YMyt6hGcnoq=jt-23RxrmKtjVjdazuuCOUB1TVsheW9A@mail.gmail.com>
Message-ID: <4FD8B422.20807@o2mail.de>

Am 13.06.2012 16:41, schrieb Saman Monfared:
> Dear all.
> I try to  minimize a function using nlm.
> my function has three parameter that all of them are positive.
> How can I do this condition in parameter estimation with nlm.

I think you can't. But you could use optim() instead.

Tom
> Thanks.
>


From jgrn at illinois.edu  Wed Jun 13 19:23:49 2012
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Wed, 13 Jun 2012 12:23:49 -0500
Subject: [R-sig-Geo] setValues for a RasterStack
Message-ID: <CABG0rfvep4rt7vK7oNMSUQ_ydchW5UPVxCK5cA+jAiaXLp+oQw@mail.gmail.com>

R-sig-geo'ers:

I'm trying to use setValues to replace values of a layer in a
RasterBrick, but I'm getting the following error:

Error in setValues(x, values[startidx[i]:endidx[i]], layer = i) :
  you can only setValues for a single layer if all values are in
memory. But values could not be loaded

The "empty" raster brick (note the "values" is none) is on disk:

class       : RasterBrick
dimensions  : 319, 10853, 3462107, 6  (nrow, ncol, ncell, nlayers)
resolution  : 2, 2  (x, y)
extent      : 748005.1, 769711.1, 4307056, 4307694  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=utm +zone=10 +datum=WGS84 +units=m +no_defs
+ellps=WGS84 +towgs84=0,0,0
values      : none
layer names : layer.1, layer.2, layer.3, layer.4, layer.5, layer.6

> inMemory(x)
FALSE

"values" is a "squashed" vector (BSQ) of all values I wish to write to
the RasterBrick of length ncell(x) * nlayers(x), i is 1:nlayers(x),
and startidx and endidx are the start/stop points for this vector for
each band i:

startidx:
[1]        1  3462108  6924215 10386322 13848429 17310536
endidx:
[1]  3462107  6924214 10386321 13848428 17310535 20772642

I'm trying to setValues(x) one band at a time:

for(i in 1:nlayers(x))
{
	out <- setValues(x,values[startidx[i]:endidx[i]],layer=i)
}

What am I doing wrong?  Does setValues ONLY work if inMemory(x)==TRUE?  Thanks!

--j

-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
http://www.geog.illinois.edu/people/JonathanGreenberg.html


From jgrn at illinois.edu  Wed Jun 13 19:30:24 2012
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Wed, 13 Jun 2012 12:30:24 -0500
Subject: [R-sig-Geo] setValues for a RasterStack
In-Reply-To: <CABG0rfvep4rt7vK7oNMSUQ_ydchW5UPVxCK5cA+jAiaXLp+oQw@mail.gmail.com>
References: <CABG0rfvep4rt7vK7oNMSUQ_ydchW5UPVxCK5cA+jAiaXLp+oQw@mail.gmail.com>
Message-ID: <CABG0rfsOKmHMEav9JkkuTKPFecsR0CqpnOd_MQE+6Pfv4i3xpQ@mail.gmail.com>

* edit -- the title of this post should have been "setValues with a
RasterBrick".

On Wed, Jun 13, 2012 at 12:23 PM, Jonathan Greenberg <jgrn at illinois.edu> wrote:
> R-sig-geo'ers:
>
> I'm trying to use setValues to replace values of a layer in a
> RasterBrick, but I'm getting the following error:
>
> Error in setValues(x, values[startidx[i]:endidx[i]], layer = i) :
> ?you can only setValues for a single layer if all values are in
> memory. But values could not be loaded
>
> The "empty" raster brick (note the "values" is none) is on disk:
>
> class ? ? ? : RasterBrick
> dimensions ?: 319, 10853, 3462107, 6 ?(nrow, ncol, ncell, nlayers)
> resolution ?: 2, 2 ?(x, y)
> extent ? ? ?: 748005.1, 769711.1, 4307056, 4307694 ?(xmin, xmax, ymin, ymax)
> coord. ref. : +proj=utm +zone=10 +datum=WGS84 +units=m +no_defs
> +ellps=WGS84 +towgs84=0,0,0
> values ? ? ?: none
> layer names : layer.1, layer.2, layer.3, layer.4, layer.5, layer.6
>
>> inMemory(x)
> FALSE
>
> "values" is a "squashed" vector (BSQ) of all values I wish to write to
> the RasterBrick of length ncell(x) * nlayers(x), i is 1:nlayers(x),
> and startidx and endidx are the start/stop points for this vector for
> each band i:
>
> startidx:
> [1] ? ? ? ?1 ?3462108 ?6924215 10386322 13848429 17310536
> endidx:
> [1] ?3462107 ?6924214 10386321 13848428 17310535 20772642
>
> I'm trying to setValues(x) one band at a time:
>
> for(i in 1:nlayers(x))
> {
> ? ? ? ?out <- setValues(x,values[startidx[i]:endidx[i]],layer=i)
> }
>
> What am I doing wrong? ?Does setValues ONLY work if inMemory(x)==TRUE? ?Thanks!
>
> --j
>
> --
> Jonathan A. Greenberg, PhD
> Assistant Professor
> Department of Geography and Geographic Information Science
> University of Illinois at Urbana-Champaign
> 607 South Mathews Avenue, MC 150
> Urbana, IL 61801
> Phone: 415-763-5476
> AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
> http://www.geog.illinois.edu/people/JonathanGreenberg.html



-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
http://www.geog.illinois.edu/people/JonathanGreenberg.html


From bibiko at eva.mpg.de  Wed Jun 13 23:38:31 2012
From: bibiko at eva.mpg.de (=?iso-8859-1?Q?Hans-J=F6rg_Bibiko?=)
Date: Wed, 13 Jun 2012 23:38:31 +0200
Subject: [R-sig-Geo] World Map with Inset Map
Message-ID: <A1240252-A7E4-444F-9932-CFBFE95E0A54@eva.mpg.de>

Hi,

maybe I've overlooked something obvious but I'm trying to generate _one_ plot of a world map (actually projected) with an inset of a specific zoomed area based on SpatialDataFrames.

I followed this example which makes usage of the library "maps":
http://wiki.cbr.washington.edu/qerm/sites/qerm/images/7/78/MakingAnInsetMapShorter.r

Thus I wrote this (as a minimal and na?ve example):

library(maptools)
data(wrld_simpl)

# plot world map
plot(wrld_simpl, col = "khaki", bg = "azure2")

# define inset map location and size
par(plt = c(0.57, 0.87, 0.4, 0.7), new = TRUE)
# init inset map view port
plot.window(xlim = c(130, 180), ylim = c(40, 70))

# draw background
rect(130, 40, 180, 70, col = "azure2")

# plot zoomed inset map
plot(wrld_simpl, xlim = c(130, 180), ylim = c(40, 70), 
	col = "khaki", bg = "azure2", add = TRUE)


The problem is that the inset map won't be cropped, i.e. you see both maps overlapped.

What I'm doing wrong? Or is this with SpatialDataFrames not possible?

I'd be appreciated for any hint!

Kind regards,
--Hans

PS = sessionInfo():

R version 2.14.2 (2012-02-29)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] maptools_0.8-14 lattice_0.20-0  sp_0.9-96       foreign_0.8-49 

loaded via a namespace (and not attached):
[1] grid_2.14.2  tools_2.14.2


From m.fairbrother at bristol.ac.uk  Thu Jun 14 00:15:03 2012
From: m.fairbrother at bristol.ac.uk (Malcolm Fairbrother)
Date: Wed, 13 Jun 2012 23:15:03 +0100
Subject: [R-sig-Geo] calculating shortest distance from a set of
	SpatialPoints to a polygon
In-Reply-To: <alpine.LRH.2.02.1206131512480.7076@reclus.nhh.no>
References: <995038FA-E667-43CC-B2C2-E2D06C327321@bristol.ac.uk>
	<alpine.LRH.2.02.1206131512480.7076@reclus.nhh.no>
Message-ID: <F1A48EDA-5999-4ADC-BA2B-81938CBAFBC2@bristol.ac.uk>

Dear Roger and Simon,

Thanks very much for the suggestions. I got both the gDistance and nncross options to work (after learning rather more about projections and their use in R), and they're producing identical, sensible results. Interestingly, nncross is faster than gDistance, and both are way faster than dist2Line (which produces very similar though not identical results).

I think my main problem was understanding projections, how to use proj4string, and cluing in that "+proj=utm" is projected whereas "+proj=longlat" isn't! Rather new material for me.

Cheers,
Malcolm



On 13 Jun 2012, at 14:22, Roger Bivand wrote:

> On Wed, 13 Jun 2012, Malcolm Fairbrother wrote:
> 
>> Dear list,
>> 
>> I have a large set of locations scattered over a land area covering about 200,000 km?. That area borders the sea, and I'd like to find the shortest distance from each point location to the sea/coast. Point locations are in lat/long.
>> 
>> I've turned the locations into a SpatialPoints object, with a proj4string. And I have a SpatialPolygons object consisting of a single polygon, defining the sea areas (same proj4string as for the SpatialPoints object).
>> 
>> My problem is I'm not clear on the next step. I tried using "gDistance" from the "rgeos" package:
>> 
>> dists <- gDistance(locations, sea)
>> 
>> but got two warnings:
>> 
>> Warning messages:
>> 1: In RGEOSDistanceFunc(spgeom1, spgeom2, byid, "rgeos_distance") :
>> Spatial object 1 is not projected; GEOS expects planar coordinates
>> 2: In RGEOSDistanceFunc(spgeom1, spgeom2, byid, "rgeos_distance") :
>> Spatial object 2 is not projected; GEOS expects planar coordinates
>> 
> 
> Wait a moment! The warnings are there for a purpose (and would also affect the use of functions in spatstat, which also assumes planar coordinates). Never delete important data (in this case the metadata of your points, saying which spatial reference system they possess).
> 
> If your data are in geographical coordinates, you need to state that specifically, and look for suitable functions. One such is perhaps dist2Line() in geosphere.
> 
> The alternative (and I advise doing both) is to project your points and coastine, and use gDistance(locations, sea, byid=TRUE), which will return distances in the metric of the projection (probably metres).
> 
>> So should I set the proj4string to NA? And/or is gDistance even the right tool for this job? Maybe it's designed for instances where distances are small, not in the hundreds of kilometres?
> 
> Never set proj4string to NA if it is known (NA means not available, it doesn't mean ignore). The function works on planar geometries, and projection distortions for well-chosed projections at that scale are not large. Usually, wrongly defined datum metadata are more of a problem.
> 
> Roger
> 
>> 
>> Any advice on how to do this appropriately would be much appreciated.
>> 
>> - Malcolm
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
> 
> -- 
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no


From nevil.amos at gmail.com  Thu Jun 14 03:53:31 2012
From: nevil.amos at gmail.com (nevil amos)
Date: Thu, 14 Jun 2012 11:53:31 +1000
Subject: [R-sig-Geo] Can I produce connection network from dissimlarity
	matrix
Message-ID: <CAN9eD7m9i6Uf-B00VG5Owd6crnMPDkKSeEvqtws11gNhXcS_yA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/1fa94307/attachment.pl>

From Roger.Bivand at nhh.no  Thu Jun 14 09:09:50 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 14 Jun 2012 09:09:50 +0200 (CEST)
Subject: [R-sig-Geo] World Map with Inset Map
In-Reply-To: <A1240252-A7E4-444F-9932-CFBFE95E0A54@eva.mpg.de>
References: <A1240252-A7E4-444F-9932-CFBFE95E0A54@eva.mpg.de>
Message-ID: <alpine.LRH.2.02.1206140858390.3625@reclus.nhh.no>

On Wed, 13 Jun 2012, Hans-J?rg Bibiko wrote:

> Hi,
>
> maybe I've overlooked something obvious but I'm trying to generate _one_ plot of a world map (actually projected) with an inset of a specific zoomed area based on SpatialDataFrames.
>
> I followed this example which makes usage of the library "maps":
> http://wiki.cbr.washington.edu/qerm/sites/qerm/images/7/78/MakingAnInsetMapShorter.r
>
> Thus I wrote this (as a minimal and na?ve example):
>
> library(maptools)
> data(wrld_simpl)
>
> # plot world map
> plot(wrld_simpl, col = "khaki", bg = "azure2")
>
> # define inset map location and size
> par(plt = c(0.57, 0.87, 0.4, 0.7), new = TRUE)
> # init inset map view port
> plot.window(xlim = c(130, 180), ylim = c(40, 70))
>
> # draw background
> rect(130, 40, 180, 70, col = "azure2")
>
> # plot zoomed inset map
> plot(wrld_simpl, xlim = c(130, 180), ylim = c(40, 70),
> 	col = "khaki", bg = "azure2", add = TRUE)
>
>
> The problem is that the inset map won't be cropped, i.e. you see both 
> maps overlapped.

The plot methods make no promise to crop, in addition, when plot(..., 
add=TRUE), the xlim= and ylim= arguments are ignored, because they would 
have been set in the plot.window() call. If you crop yourself, you can get 
there:

library(rgeos)
bnds <- cbind(x=c(130, 130, 180, 180, 130), y=c(40, 70, 70, 40, 40))
SP <- SpatialPolygons(list(Polygons(list(Polygon(bnds)), "1")),
  proj4string=CRS(proj4string(wrld_simpl)))
gI <- gIntersects(wrld_simpl, SP, byid=TRUE)
out <- vector(mode="list", length=length(which(gI)))
ii <- 1
for (i in seq(along=gI)) if (gI[i]) {out[[ii]] <- 
gIntersection(wrld_simpl[i,], SP); row.names(out[[ii]]) <- 
row.names(wrld_simpl)[i]; ii <- ii+1}
out1 <- do.call("rbind", out)
plot(out1, col = "khaki", bg = "azure2", add = TRUE)

but do remember to reset par() to defaults with:

oldpar <- par(plt = c(0.57, 0.87, 0.4, 0.7), new = TRUE)

before the insert and:

par(oldpar)

afterwards!

Roger

>
> What I'm doing wrong? Or is this with SpatialDataFrames not possible?
>
> I'd be appreciated for any hint!
>
> Kind regards,
> --Hans
>
> PS = sessionInfo():
>
> R version 2.14.2 (2012-02-29)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] maptools_0.8-14 lattice_0.20-0  sp_0.9-96       foreign_0.8-49
>
> loaded via a namespace (and not attached):
> [1] grid_2.14.2  tools_2.14.2
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From bibiko at eva.mpg.de  Thu Jun 14 09:19:14 2012
From: bibiko at eva.mpg.de (=?iso-8859-1?Q?Hans-J=F6rg_Bibiko?=)
Date: Thu, 14 Jun 2012 09:19:14 +0200
Subject: [R-sig-Geo] World Map with Inset Map
In-Reply-To: <alpine.LRH.2.02.1206140858390.3625@reclus.nhh.no>
References: <A1240252-A7E4-444F-9932-CFBFE95E0A54@eva.mpg.de>
	<alpine.LRH.2.02.1206140858390.3625@reclus.nhh.no>
Message-ID: <F2EE5156-97F9-4836-A77D-CDFA0A9864BD@eva.mpg.de>

On 14 Jun 2012, at 09:09, Roger Bivand wrote:
> On Wed, 13 Jun 2012, Hans-J?rg Bibiko wrote:
>> maybe I've overlooked something obvious but I'm trying to generate _one_ plot of a world map (actually projected) with an inset of a specific zoomed area based on SpatialDataFrames.
>> 
>> library(maptools)
>> data(wrld_simpl)
>> 
>> # plot world map
>> plot(wrld_simpl, col = "khaki", bg = "azure2")
>> 
>> # define inset map location and size
>> par(plt = c(0.57, 0.87, 0.4, 0.7), new = TRUE)
>> # init inset map view port
>> plot.window(xlim = c(130, 180), ylim = c(40, 70))
>> 
>> # draw background
>> rect(130, 40, 180, 70, col = "azure2")
>> 
>> # plot zoomed inset map
>> plot(wrld_simpl, xlim = c(130, 180), ylim = c(40, 70),
>> 	col = "khaki", bg = "azure2", add = TRUE)
>> 
>> 
>> The problem is that the inset map won't be cropped, i.e. you see both maps overlapped.
> 
> The plot methods make no promise to crop, in addition, when plot(..., add=TRUE), the xlim= and ylim= arguments are ignored, because they would have been set in the plot.window() call. If you crop yourself, you can get there:
> 
> library(rgeos)
> bnds <- cbind(x=c(130, 130, 180, 180, 130), y=c(40, 70, 70, 40, 40))
> SP <- SpatialPolygons(list(Polygons(list(Polygon(bnds)), "1")),
> proj4string=CRS(proj4string(wrld_simpl)))
> gI <- gIntersects(wrld_simpl, SP, byid=TRUE)
> out <- vector(mode="list", length=length(which(gI)))
> ii <- 1
> for (i in seq(along=gI)) if (gI[i]) {out[[ii]] <- gIntersection(wrld_simpl[i,], SP); row.names(out[[ii]]) <- row.names(wrld_simpl)[i]; ii <- ii+1}
> out1 <- do.call("rbind", out)
> plot(out1, col = "khaki", bg = "azure2", add = TRUE)

Dear Roger, thank you so much! It works like a charm :)


> but do remember to reset par() to defaults with:

That goes without saying. It was only a minimal example :)

Regards,
--Hans


From jaalonson at indra.es  Thu Jun 14 09:45:13 2012
From: jaalonson at indra.es (=?iso-8859-1?Q?Alonso_Nanclares=2C_Jes=FAs_Alberto?=)
Date: Thu, 14 Jun 2012 09:45:13 +0200
Subject: [R-sig-Geo] Combining polygons from a SpatialPolygonsDataFrame
	object
Message-ID: <3852B275C82A9444AB29EA92AA1B0C9231ABBC46@MADARRMAILBOX07.indra.es>

Dear list,

I have a Shapefile representing the censal sections of Spain, and my interest is creating a KML file with only 52 polygons representing the different provinces of Spain. I shall use readOGR, and my problem comes when I have a SpatialPolygonsDataFrame object in R and I want to merge in only one polygon all the censal sections of every province. I have an attribute with the province ID defined in the same object, so it would only be aggregating the censal sections with the same province ID, but still I don't know how to do it.

I shall be grateful for any help. My kind regards,

Jes?s Alberto Alonso Nanclares
Consultor Junior
Centro de Competencias Business Analytics

Avda de Bruselas, 35
28108 Alcobendas (Madrid)
Espa?a

T +34 914 805 863
jaalonson at indra.es
www.indracompany.com<http://www.indracompany.com>

[cid:image001.jpg at 01CD4A11.AD8A3DB0]


________________________________
Este correo electr?nico y, en su caso, cualquier fichero anexo al mismo, contiene informaci?n de car?cter confidencial exclusivamente dirigida a su destinatario o destinatarios. Si no es vd. el destinatario indicado, queda notificado que la lectura, utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida en virtud de la legislaci?n vigente. En el caso de haber recibido este correo electr?nico por error, se ruega notificar inmediatamente esta circunstancia mediante reenv?o a la direcci?n electr?nica del remitente.
Evite imprimir este mensaje si no es estrictamente necesario.

This email and any file attached to it (when applicable) contain(s) confidential information that is exclusively addressed to its recipient(s). If you are not the indicated recipient, you are informed that reading, using, disseminating and/or copying it without authorisation is forbidden in accordance with the legislation in effect. If you have received this email by mistake, please immediately notify the sender of the situation by resending it to their email address.
Avoid printing this message if it is not absolutely necessary.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/deb57a26/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 1907 bytes
Desc: image001.jpg
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/deb57a26/attachment.jpg>

From Gema.FAviles at uclm.es  Thu Jun 14 10:33:01 2012
From: Gema.FAviles at uclm.es (GEMA FERNANDEZ-AVILES CALDERON)
Date: Thu, 14 Jun 2012 10:33:01 +0200
Subject: [R-sig-Geo] geoR -- block kriging
Message-ID: <2DA2DD6A3859694A971ACE0998D7B65904F5BC@evsab03.uclm.es>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/c94f1afd/attachment.pl>

From simon.ohanlon at imperial.ac.uk  Thu Jun 14 11:15:35 2012
From: simon.ohanlon at imperial.ac.uk (O'Hanlon, Simon J)
Date: Thu, 14 Jun 2012 09:15:35 +0000
Subject: [R-sig-Geo] Combining polygons from a
	SpatialPolygonsDataFrame	object
In-Reply-To: <3852B275C82A9444AB29EA92AA1B0C9231ABBC46@MADARRMAILBOX07.indra.es>
References: <3852B275C82A9444AB29EA92AA1B0C9231ABBC46@MADARRMAILBOX07.indra.es>
Message-ID: <7AE0828DCFFC0144817331B53EDC11A018814FA3@icexch-m5.ic.ac.uk>

Hi Jes?s,
Check out maptools::unionSpatialPolygons. This function takes a spatial polygons object and aggregates polygons according to a vector ID which tell the function what input polygons belong to which output polygons, in your case the province IDs.

Note you may need to set gpclibPermit() to allow use of the gpclib package if rgeos is not available on your system.

HTH,

Simon


--------------------------------
Simon O'Hanlon, BSc MSc
Department of Infectious Disease Epidemiology
Imperial College London
St. Mary's Hospital
London
W2 1PG
________________________________
From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Alonso Nanclares, Jes?s Alberto [jaalonson at indra.es]
Sent: 14 June 2012 08:45
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] Combining polygons from a SpatialPolygonsDataFrame object

Dear list,

I have a Shapefile representing the censal sections of Spain, and my interest is creating a KML file with only 52 polygons representing the different provinces of Spain. I shall use readOGR, and my problem comes when I have a SpatialPolygonsDataFrame object in R and I want to merge in only one polygon all the censal sections of every province. I have an attribute with the province ID defined in the same object, so it would only be aggregating the censal sections with the same province ID, but still I don?t know how to do it.

I shall be grateful for any help. My kind regards,

Jes?s Alberto Alonso Nanclares
Consultor Junior
Centro de Competencias Business Analytics

Avda de Bruselas, 35
28108 Alcobendas (Madrid)
Espa?a

T +34 914 805 863
jaalonson at indra.es
www.indracompany.com<http://www.indracompany.com>

[indra]


________________________________
Este correo electr?nico y, en su caso, cualquier fichero anexo al mismo, contiene informaci?n de car?cter confidencial exclusivamente dirigida a su destinatario o destinatarios. Si no es vd. el destinatario indicado, queda notificado que la lectura, utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida en virtud de la legislaci?n vigente. En el caso de haber recibido este correo electr?nico por error, se ruega notificar inmediatamente esta circunstancia mediante reenv?o a la direcci?n electr?nica del remitente.
Evite imprimir este mensaje si no es estrictamente necesario.

This email and any file attached to it (when applicable) contain(s) confidential information that is exclusively addressed to its recipient(s). If you are not the indicated recipient, you are informed that reading, using, disseminating and/or copying it without authorisation is forbidden in accordance with the legislation in effect. If you have received this email by mistake, please immediately notify the sender of the situation by resending it to their email address.
Avoid printing this message if it is not absolutely necessary.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/5da25066/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 1907 bytes
Desc: image001.jpg
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/5da25066/attachment.jpg>

From rafael.wueest at wsl.ch  Thu Jun 14 11:16:44 2012
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Thu, 14 Jun 2012 11:16:44 +0200
Subject: [R-sig-Geo] Combining polygons from a SpatialPolygonsDataFrame
	object
In-Reply-To: <3852B275C82A9444AB29EA92AA1B0C9231ABBC46@MADARRMAILBOX07.indra.es>
References: <3852B275C82A9444AB29EA92AA1B0C9231ABBC46@MADARRMAILBOX07.indra.es>
Message-ID: <7AD438CC-3A5F-4E90-B358-30C46B34CA4A@wsl.ch>

Hi Jesus

gUnaryUnion (or gUnionCascaded) from the rgeos package can do this.

Have a look at the examples in the function documentation ?gUnaryUnion

> library(maptools)
> nc1 <- readShapePoly(system.file("shapes/sids.shp", package="maptools")[1], proj4string=CRS("+proj=longlat +datum=NAD27"))
> ID <- cut(lps[,1], quantile(lps[,1]), include.lowest=TRUE)
> reg4 <- gUnaryUnion(nc1, ID) # requires GEOS version 3.3.0

and look at

plot(reg4,lwd=2)
plot(nc1,add=T,lty=3)

If you set id to your province ID, you should get what you are looking for.

HTH,
Rafael


On 14.06.2012, at 09:45, Alonso Nanclares, Jes?s Alberto wrote:

> Dear list,
>  
> I have a Shapefile representing the censal sections of Spain, and my interest is creating a KML file with only 52 polygons representing the different provinces of Spain. I shall use readOGR, and my problem comes when I have a SpatialPolygonsDataFrame object in R and I want to merge in only one polygon all the censal sections of every province. I have an attribute with the province ID defined in the same object, so it would only be aggregating the censal sections with the same province ID, but still I don?t know how to do it.
>  
> I shall be grateful for any help. My kind regards,
>  
> Jes?s Alberto Alonso Nanclares
> Consultor Junior
> Centro de Competencias Business Analytics
> 
> Avda de Bruselas, 35
> 28108 Alcobendas (Madrid)
> Espa?a
> 
> T +34 914 805 863
> jaalonson at indra.es
> www.indracompany.com
> 
> <image001.jpg>
>  
> 
> Este correo electr?nico y, en su caso, cualquier fichero anexo al mismo, contiene informaci?n de car?cter confidencial exclusivamente dirigida a su destinatario o destinatarios. Si no es vd. el destinatario indicado, queda notificado que la lectura, utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida en virtud de la legislaci?n vigente. En el caso de haber recibido este correo electr?nico por error, se ruega notificar inmediatamente esta circunstancia mediante reenv?o a la direcci?n electr?nica del remitente.
> Evite imprimir este mensaje si no es estrictamente necesario.
> 
> This email and any file attached to it (when applicable) contain(s) confidential information that is exclusively addressed to its recipient(s). If you are not the indicated recipient, you are informed that reading, using, disseminating and/or copying it without authorisation is forbidden in accordance with the legislation in effect. If you have received this email by mistake, please immediately notify the sender of the situation by resending it to their email address.
> Avoid printing this message if it is not absolutely necessary.
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest


From alobolistas at gmail.com  Thu Jun 14 14:48:31 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Thu, 14 Jun 2012 14:48:31 +0200
Subject: [R-sig-Geo] Conflicting information between GDALinfo() and gdalinfo
Message-ID: <CAG4NReL5A4bThFaGiq=sqr+rnzBBgSbrvvJ34-4tFMetcpA9xw@mail.gmail.com>

Hi!
I'm having different origin according to gdalinfo ( "Origin =
(0.000000000000000,1024.000000000000000)") and GDALinfo
("TTC0125v2flip.tif"). When displayed in QGIS, the origin is 0,1024
(using ubuntu 10.04, see sessionInfo at the end, tif file here:
http://dl.dropbox.com/u/3180464/TTC0125v2flip.tif

tif file was saved with
writeRaster(bout,filename="TTC0125v2flip.tif", format="GTiff",
overwrite=TRUE,flip=T)

> system("gdalinfo TTC0125v2flip.tif",intern=T)
 [1] "Driver: GTiff/GeoTIFF"
"Files: TTC0125v2flip.tif"
 [3] "Size is 1280, 1024"
"Coordinate System is `'"
 [5] "Origin = (0.000000000000000,1024.000000000000000)"
"Pixel Size = (1.000000000000000,-1.000000000000000)"
 [7] "Image Structure Metadata:"                                   "
COMPRESSION=LZW"
 [9] "  INTERLEAVE=PIXEL"
"Corner Coordinates:"
[11] "Upper Left  (       0.000,    1024.000) "
"Lower Left  (   0.0000000,   0.0000000) "
[13] "Upper Right (    1280.000,    1024.000) "
"Lower Right (    1280.000,       0.000) "
[15] "Center      (     640.000,     512.000) "
"Band 1 Block=1280x1 Type=Float32, ColorInterp=Gray"
[17] "  Min=12.000 Max=219.000 "                                   "
Minimum=12.000, Maximum=219.000, Mean=0.000, StdDev=0.000"
[19] "  NoData Value=-3.39999999999999996e+38"                     "
Metadata:"
[21] "    STATISTICS_MAXIMUM=219"                                  "
 STATISTICS_MEAN=0"
[23] "    STATISTICS_MINIMUM=12"                                   "
 STATISTICS_STDDEV=0"
[25] "Band 2 Block=1280x1 Type=Float32, ColorInterp=Undefined"     "
Min=0.000 Max=215.000 "
[27] "  Minimum=0.000, Maximum=215.000, Mean=0.000, StdDev=0.000"  "
NoData Value=-3.39999999999999996e+38"
[29] "  Metadata:"                                                 "
 STATISTICS_MAXIMUM=215"
[31] "    STATISTICS_MEAN=0"                                       "
 STATISTICS_MINIMUM=0"
[33] "    STATISTICS_STDDEV=0"
"Band 3 Block=1280x1 Type=Float32, ColorInterp=Undefined"
[35] "  Min=0.000 Max=234.000 "                                    "
Minimum=0.000, Maximum=234.000, Mean=0.000, StdDev=0.000"
[37] "  NoData Value=-3.39999999999999996e+38"                     "
Metadata:"
[39] "    STATISTICS_MAXIMUM=234"                                  "
 STATISTICS_MEAN=0"
[41] "    STATISTICS_MINIMUM=0"                                    "
 STATISTICS_STDDEV=0"
[43] "Band 4 Block=1280x1 Type=Float32, ColorInterp=Undefined"     "
Min=0.000 Max=255.000 "
[45] "  Minimum=0.000, Maximum=255.000, Mean=0.000, StdDev=0.000"  "
NoData Value=-3.39999999999999996e+38"
[47] "  Metadata:"                                                 "
 STATISTICS_MAXIMUM=255"
[49] "    STATISTICS_MEAN=0"                                       "
 STATISTICS_MINIMUM=0"
[51] "    STATISTICS_STDDEV=0"
"Band 5 Block=1280x1 Type=Float32, ColorInterp=Undefined"
[53] "  Min=0.000 Max=221.000 "                                    "
Minimum=0.000, Maximum=221.000, Mean=0.000, StdDev=0.000"
[55] "  NoData Value=-3.39999999999999996e+38"                     "
Metadata:"
[57] "    STATISTICS_MAXIMUM=221"                                  "
 STATISTICS_MEAN=0"
[59] "    STATISTICS_MINIMUM=0"                                    "
 STATISTICS_STDDEV=0"
[61] "Band 6 Block=1280x1 Type=Float32, ColorInterp=Undefined"     "
Min=0.000 Max=178.000 "
[63] "  Minimum=0.000, Maximum=178.000, Mean=0.000, StdDev=0.000"  "
NoData Value=-3.39999999999999996e+38"
[65] "  Metadata:"                                                 "
 STATISTICS_MAXIMUM=178"
[67] "    STATISTICS_MEAN=0"                                       "
 STATISTICS_MINIMUM=0"
[69] "    STATISTICS_STDDEV=0"
> GDALinfo("TTC0125v2flip.tif")
rows        1024
columns     1280
bands       6
origin.x        0
origin.y        0
res.x       1
res.y       1
ysign       -1
oblique.x   0
oblique.y   0
driver      GTiff
projection  NA
file        TTC0125v2flip.tif
apparent band summary:
   GDType Bmin Bmax Bmean Bsd hasNoDataValue NoDataValue
1 Float32   12  219     0   0           TRUE    -3.4e+38
2 Float32    0  215     0   0           TRUE    -3.4e+38
3 Float32    0  234     0   0           TRUE    -3.4e+38
4 Float32    0  255     0   0           TRUE    -3.4e+38
5 Float32    0  221     0   0           TRUE    -3.4e+38
6 Float32    0  178     0   0           TRUE    -3.4e+38

> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8    LC_PAPER=C
               LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] raster_2.0-02 rgdal_0.7-5   sp_0.9-99

loaded via a namespace (and not attached):
[1] grid_2.15.0     lattice_0.19-30 tools_2.15.0


Any help?
Agus


From tghoward at gw.dec.state.ny.us  Thu Jun 14 15:02:03 2012
From: tghoward at gw.dec.state.ny.us (Tim Howard)
Date: Thu, 14 Jun 2012 09:02:03 -0400
Subject: [R-sig-Geo] continuous raster to binary
Message-ID: <4FD9A88B020000D50005B9CE@gwsmtp.dec.state.ny.us>

All,
I'd like to convert a continuous raster to binary (0, 1). Here's what I've come up with
 
library(raster)
 
#build the sample raster
r <- raster(ncol=100, nrow=100)
r[] <- round(runif(ncell(r)) * 10)
#set up a cut point, cut it
ctpts <- c(0,3.5,10)
rc <- cut(r,breaks=ctpts)
 
#since the result from cut was a raster with values c(1,2), use subs to change to c(0,1)
subdf <- data.frame(from=c(1,2), to=c(0,1))
rs <- subs(rc, subdf, subsWithNA=TRUE)
rs
 
 
My questions:
1. Is there a more efficient way? (I'll be doing this to many large rasters)
2. Using 32-bit R, subs bails with a memory error, even if a file is specified (cut runs fine). I can move to 64-bit R on a different machine, but it would be nice to be able to run it on this 32-bit machine. Any suggestions? 
 
Thanks in advance, 
Tim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/0abda351/attachment.html>

From simon.ohanlon at imperial.ac.uk  Thu Jun 14 15:30:11 2012
From: simon.ohanlon at imperial.ac.uk (O'Hanlon, Simon J)
Date: Thu, 14 Jun 2012 13:30:11 +0000
Subject: [R-sig-Geo] continuous raster to binary
In-Reply-To: <4FD9A88B020000D50005B9CE@gwsmtp.dec.state.ny.us>
References: <4FD9A88B020000D50005B9CE@gwsmtp.dec.state.ny.us>
Message-ID: <7AE0828DCFFC0144817331B53EDC11A018815483@icexch-m5.ic.ac.uk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/83fe3a21/attachment.pl>

From Thierry.ONKELINX at inbo.be  Thu Jun 14 15:56:45 2012
From: Thierry.ONKELINX at inbo.be (ONKELINX, Thierry)
Date: Thu, 14 Jun 2012 13:56:45 +0000
Subject: [R-sig-Geo] continuous raster to binary
In-Reply-To: <4FD9A88B020000D50005B9CE@gwsmtp.dec.state.ny.us>
References: <4FD9A88B020000D50005B9CE@gwsmtp.dec.state.ny.us>
Message-ID: <AA818EAD2576BC488B4F623941DA74275D66C9A3@inbomail.inbo.be>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/5799278d/attachment.pl>

From tghoward at gw.dec.state.ny.us  Thu Jun 14 15:59:51 2012
From: tghoward at gw.dec.state.ny.us (Tim Howard)
Date: Thu, 14 Jun 2012 09:59:51 -0400
Subject: [R-sig-Geo] continuous raster to binary
In-Reply-To: <7AE0828DCFFC0144817331B53EDC11A018815483@icexch-m5.ic.ac.uk>
References: <4FD9A88B020000D50005B9CE@gwsmtp.dec.state.ny.us>
	<7AE0828DCFFC0144817331B53EDC11A018815483@icexch-m5.ic.ac.uk>
Message-ID: <4FD9B617020000D50005B9F2@gwsmtp.dec.state.ny.us>

Simon,
Thank you. Yes, that does the trick. Nice and clean. Before starting, this quote from the reclass help page
 
"For simple cases, the functions subs ( http://127.0.0.1:15603/library/raster/help/subs ) and cut ( http://127.0.0.1:15603/library/raster/help/cut ) may be more efficient." 
 
led me down the path towards cut and subs and then I never returned.  I obviously should have. 
 
Thanks again,
Tim
 

>>> "O'Hanlon, Simon J" <simon.ohanlon at imperial.ac.uk> 6/14/2012 9:30 AM >>>
Hi Tim, 
Try reclass()


r <- raster(ncol=100, nrow=100)
r[] <- round(runif(ncell(r)) * 10)
class <- matrix(c(0,3.5,0,3.5,10,1),nrow=2,byrow=T)
rc <-reclass(r, class)
rc


HTH,

Simon

--------------------------------
Simon O'Hanlon, BSc MSc
Department of Infectious Disease Epidemiology
Imperial College London
St. Mary's Hospital
London
W2 1PG
From: r-sig-geo-bounces at r-project.org [r-sig-geo-bounces at r-project.org] on behalf of Tim Howard [tghoward at gw.dec.state.ny.us]
Sent: 14 June 2012 14:02
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] continuous raster to binary

All,
I'd like to convert a continuous raster to binary (0, 1). Here's what I've come up with

library(raster)

#build the sample raster
r <- raster(ncol=100, nrow=100)
r[] <- round(runif(ncell(r)) * 10)
#set up a cut point, cut it
ctpts <- c(0,3.5,10)
rc <- cut(r,breaks=ctpts)

#since the result from cut was a raster with values c(1,2), use subs to change to c(0,1)
subdf <- data.frame(from=c(1,2), to=c(0,1))
rs <- subs(rc, subdf, subsWithNA=TRUE)
rs


My questions:
1. Is there a more efficient way? (I'll be doing this to many large rasters)
2. Using 32-bit R, subs bails with a memory error, even if a file is specified (cut runs fine). I can move to 64-bit R on a different machine, but it would be nice to be able to run it on this 32-bit machine. Any suggestions? 

Thanks in advance, 
Tim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/ae311ca7/attachment.html>

From groo_jgroo at yahoo.com  Thu Jun 14 16:14:57 2012
From: groo_jgroo at yahoo.com (ROKHANA dwi bekti)
Date: Thu, 14 Jun 2012 22:14:57 +0800 (SGT)
Subject: [R-sig-Geo] packe GS2SLS
In-Reply-To: <mailman.15.1339668005.16941.r-sig-geo@r-project.org>
References: <mailman.15.1339668005.16941.r-sig-geo@r-project.org>
Message-ID: <1339683297.6326.YahooMailNeo@web190005.mail.sg3.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/4b6e21d9/attachment.pl>

From rafael.wueest at wsl.ch  Thu Jun 14 16:22:31 2012
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Thu, 14 Jun 2012 16:22:31 +0200
Subject: [R-sig-Geo] continuous raster to binary
In-Reply-To: <4FD9A88B020000D50005B9CE@gwsmtp.dec.state.ny.us>
References: <4FD9A88B020000D50005B9CE@gwsmtp.dec.state.ny.us>
Message-ID: <1F947F7B-919B-4087-9BAD-39855E4CD56F@wsl.ch>

Hi Tim

Regarding your first question: You could also use subs directly or reclass. You can use system.time to compare the efficiency of the possible methods.

r <- raster(ncol=100, nrow=100)
r[] <- round(runif(ncell(r)) * 10)
ctpts <- c(0,3.5,10)
subdf <- data.frame(from=c(1,2), to=c(0,1))
system.time({
rc <- cut(r,breaks=ctpts)
rs1 <- subs(rc, subdf, subsWithNA=TRUE)
})

  user  system elapsed 
  0.045   0.002   0.041 

submat<-data.frame(ID=0:10,sub=c(rep(0,4),rep(1,7)))
system.time(rs3<-subs(r,submat))

   user  system elapsed 
  0.037   0.001   0.038 


reclmat<-matrix(c(0,3.5,0,3.5,10,1),ncol=3,byrow=T)
system.time(rs2<-reclass(r,reclmat))

   user  system elapsed 
  0.009   0.000   0.009 

Using this example it seems reclass is the most efficient. Try it with your data.

Regarding your second question: I don't think this solves the memory bail-out on your 32-bit machine, but you can give it a try...

Rafael


On 14.06.2012, at 15:02, Tim Howard wrote:

> All,
> I'd like to convert a continuous raster to binary (0, 1). Here's what I've come up with
>  
> library(raster)
>  
> #build the sample raster
> r <- raster(ncol=100, nrow=100)
> r[] <- round(runif(ncell(r)) * 10)
> #set up a cut point, cut it
> ctpts <- c(0,3.5,10)
> rc <- cut(r,breaks=ctpts)
>  
> #since the result from cut was a raster with values c(1,2), use subs to change to c(0,1)
> subdf <- data.frame(from=c(1,2), to=c(0,1))
> rs <- subs(rc, subdf, subsWithNA=TRUE)
> rs
>  
>  
> My questions:
> 1. Is there a more efficient way? (I'll be doing this to many large rasters)
> 2. Using 32-bit R, subs bails with a memory error, even if a file is specified (cut runs fine). I can move to 64-bit R on a different machine, but it would be nice to be able to run it on this 32-bit machine. Any suggestions?
>  
> Thanks in advance,
> Tim
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest


From Roger.Bivand at nhh.no  Thu Jun 14 16:54:51 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 14 Jun 2012 16:54:51 +0200 (CEST)
Subject: [R-sig-Geo] Conflicting information between GDALinfo() and
 gdalinfo
In-Reply-To: <CAG4NReL5A4bThFaGiq=sqr+rnzBBgSbrvvJ34-4tFMetcpA9xw@mail.gmail.com>
References: <CAG4NReL5A4bThFaGiq=sqr+rnzBBgSbrvvJ34-4tFMetcpA9xw@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1206141653040.3625@reclus.nhh.no>

GDALinfo() reports the lower left corner, which agrees with gdalinfo. 
Whether the origin is upper left or lower left is arbitrary, in sp and 
hence in rgdal, the origin of rasters is lower left.

Roger

On Thu, 14 Jun 2012, Agustin Lobo wrote:

> Hi!
> I'm having different origin according to gdalinfo ( "Origin =
> (0.000000000000000,1024.000000000000000)") and GDALinfo
> ("TTC0125v2flip.tif"). When displayed in QGIS, the origin is 0,1024
> (using ubuntu 10.04, see sessionInfo at the end, tif file here:
> http://dl.dropbox.com/u/3180464/TTC0125v2flip.tif
>
> tif file was saved with
> writeRaster(bout,filename="TTC0125v2flip.tif", format="GTiff",
> overwrite=TRUE,flip=T)
>
>> system("gdalinfo TTC0125v2flip.tif",intern=T)
> [1] "Driver: GTiff/GeoTIFF"
> "Files: TTC0125v2flip.tif"
> [3] "Size is 1280, 1024"
> "Coordinate System is `'"
> [5] "Origin = (0.000000000000000,1024.000000000000000)"
> "Pixel Size = (1.000000000000000,-1.000000000000000)"
> [7] "Image Structure Metadata:"                                   "
> COMPRESSION=LZW"
> [9] "  INTERLEAVE=PIXEL"
> "Corner Coordinates:"
> [11] "Upper Left  (       0.000,    1024.000) "
> "Lower Left  (   0.0000000,   0.0000000) "
> [13] "Upper Right (    1280.000,    1024.000) "
> "Lower Right (    1280.000,       0.000) "
> [15] "Center      (     640.000,     512.000) "
> "Band 1 Block=1280x1 Type=Float32, ColorInterp=Gray"
> [17] "  Min=12.000 Max=219.000 "                                   "
> Minimum=12.000, Maximum=219.000, Mean=0.000, StdDev=0.000"
> [19] "  NoData Value=-3.39999999999999996e+38"                     "
> Metadata:"
> [21] "    STATISTICS_MAXIMUM=219"                                  "
> STATISTICS_MEAN=0"
> [23] "    STATISTICS_MINIMUM=12"                                   "
> STATISTICS_STDDEV=0"
> [25] "Band 2 Block=1280x1 Type=Float32, ColorInterp=Undefined"     "
> Min=0.000 Max=215.000 "
> [27] "  Minimum=0.000, Maximum=215.000, Mean=0.000, StdDev=0.000"  "
> NoData Value=-3.39999999999999996e+38"
> [29] "  Metadata:"                                                 "
> STATISTICS_MAXIMUM=215"
> [31] "    STATISTICS_MEAN=0"                                       "
> STATISTICS_MINIMUM=0"
> [33] "    STATISTICS_STDDEV=0"
> "Band 3 Block=1280x1 Type=Float32, ColorInterp=Undefined"
> [35] "  Min=0.000 Max=234.000 "                                    "
> Minimum=0.000, Maximum=234.000, Mean=0.000, StdDev=0.000"
> [37] "  NoData Value=-3.39999999999999996e+38"                     "
> Metadata:"
> [39] "    STATISTICS_MAXIMUM=234"                                  "
> STATISTICS_MEAN=0"
> [41] "    STATISTICS_MINIMUM=0"                                    "
> STATISTICS_STDDEV=0"
> [43] "Band 4 Block=1280x1 Type=Float32, ColorInterp=Undefined"     "
> Min=0.000 Max=255.000 "
> [45] "  Minimum=0.000, Maximum=255.000, Mean=0.000, StdDev=0.000"  "
> NoData Value=-3.39999999999999996e+38"
> [47] "  Metadata:"                                                 "
> STATISTICS_MAXIMUM=255"
> [49] "    STATISTICS_MEAN=0"                                       "
> STATISTICS_MINIMUM=0"
> [51] "    STATISTICS_STDDEV=0"
> "Band 5 Block=1280x1 Type=Float32, ColorInterp=Undefined"
> [53] "  Min=0.000 Max=221.000 "                                    "
> Minimum=0.000, Maximum=221.000, Mean=0.000, StdDev=0.000"
> [55] "  NoData Value=-3.39999999999999996e+38"                     "
> Metadata:"
> [57] "    STATISTICS_MAXIMUM=221"                                  "
> STATISTICS_MEAN=0"
> [59] "    STATISTICS_MINIMUM=0"                                    "
> STATISTICS_STDDEV=0"
> [61] "Band 6 Block=1280x1 Type=Float32, ColorInterp=Undefined"     "
> Min=0.000 Max=178.000 "
> [63] "  Minimum=0.000, Maximum=178.000, Mean=0.000, StdDev=0.000"  "
> NoData Value=-3.39999999999999996e+38"
> [65] "  Metadata:"                                                 "
> STATISTICS_MAXIMUM=178"
> [67] "    STATISTICS_MEAN=0"                                       "
> STATISTICS_MINIMUM=0"
> [69] "    STATISTICS_STDDEV=0"
>> GDALinfo("TTC0125v2flip.tif")
> rows        1024
> columns     1280
> bands       6
> origin.x        0
> origin.y        0
> res.x       1
> res.y       1
> ysign       -1
> oblique.x   0
> oblique.y   0
> driver      GTiff
> projection  NA
> file        TTC0125v2flip.tif
> apparent band summary:
>   GDType Bmin Bmax Bmean Bsd hasNoDataValue NoDataValue
> 1 Float32   12  219     0   0           TRUE    -3.4e+38
> 2 Float32    0  215     0   0           TRUE    -3.4e+38
> 3 Float32    0  234     0   0           TRUE    -3.4e+38
> 4 Float32    0  255     0   0           TRUE    -3.4e+38
> 5 Float32    0  221     0   0           TRUE    -3.4e+38
> 6 Float32    0  178     0   0           TRUE    -3.4e+38
>
>> sessionInfo()
> R version 2.15.0 (2012-03-30)
> Platform: x86_64-pc-linux-gnu (64-bit)
>
> locale:
> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8    LC_PAPER=C
>               LC_NAME=C
> [9] LC_ADDRESS=C               LC_TELEPHONE=C
> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] raster_2.0-02 rgdal_0.7-5   sp_0.9-99
>
> loaded via a namespace (and not attached):
> [1] grid_2.15.0     lattice_0.19-30 tools_2.15.0
>
>
> Any help?
> Agus
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Thu Jun 14 17:08:45 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 14 Jun 2012 17:08:45 +0200 (CEST)
Subject: [R-sig-Geo] packe GS2SLS
In-Reply-To: <1339683297.6326.YahooMailNeo@web190005.mail.sg3.yahoo.com>
References: <mailman.15.1339668005.16941.r-sig-geo@r-project.org>
	<1339683297.6326.YahooMailNeo@web190005.mail.sg3.yahoo.com>
Message-ID: <alpine.LRH.2.02.1206141704390.3625@reclus.nhh.no>

On Thu, 14 Jun 2012, ROKHANA dwi bekti wrote:

> ?
> Dear list,
> I will do research about "Estimation of simultaneous systems of spatial model by GS2SLS".
> What package can be used?
> ?

Try install.packages("spse", repos="http://R-Forge.R-project.org") for the 
spse package, which is currently under development. It has a function 
called spsegm(), which may be relevant.

Roger


> ?
> Rokhana,
> Indonesia
> 	[[alternative HTML version deleted]]
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From landis at isciences.com  Thu Jun 14 17:37:08 2012
From: landis at isciences.com (Matthew Landis)
Date: Thu, 14 Jun 2012 11:37:08 -0400
Subject: [R-sig-Geo] continuous raster to binary
In-Reply-To: <AA818EAD2576BC488B4F623941DA74275D66C9A3@inbomail.inbo.be>
References: <4FD9A88B020000D50005B9CE@gwsmtp.dec.state.ny.us>
	<AA818EAD2576BC488B4F623941DA74275D66C9A3@inbomail.inbo.be>
Message-ID: <4FDA0524.40607@isciences.com>


In terms of Tim's example:

plot(r)
r[] <- as.numeric(r[] > 3.5)
plot(r)

works for me.  Made only a small change from Thierry's elegant example 
to return numeric instead of boolean.

M

On 6/14/2012 9:56 AM, ONKELINX, Thierry wrote:
> How about
> rs<- r>  0.35
> or
> rs<-(r>  0.35) * 1
> untested!
>
> Best regards,
> Thierry
> ir. Thierry Onkelinx
> Instituut voor natuur- en bosonderzoek / Research Institute for Nature and Forest
> team Biometrie&  Kwaliteitszorg / team Biometrics&  Quality Assurance
> Kliniekstraat 25
> 1070 Anderlecht
> Belgium
> + 32 2 525 02 51
> + 32 54 43 61 85
> Thierry.Onkelinx at inbo.be<mailto:Thierry.Onkelinx at inbo.be>
> www.inbo.be<http://www.inbo.be/>
>
> To call in the statistician after the experiment is done may be no more than asking him to perform a post-mortem examination: he may be able to say what the experiment died of.
> ~ Sir Ronald Aylmer Fisher
>
> The plural of anecdote is not data.
> ~ Roger Brinner
>
> The combination of some data and an aching desire for an answer does not ensure that a reasonable answer can be extracted from a given body of data.
> ~ John Tukey
>
> Van: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] Namens Tim Howard
> Verzonden: donderdag 14 juni 2012 15:02
> Aan: r-sig-geo at r-project.org
> Onderwerp: [R-sig-Geo] continuous raster to binary
>
> All,
> I'd like to convert a continuous raster to binary (0, 1). Here's what I've come up with
>
> library(raster)
>
> #build the sample raster
> r<- raster(ncol=100, nrow=100)
> r[]<- round(runif(ncell(r)) * 10)
> #set up a cut point, cut it
> ctpts<- c(0,3.5,10)
> rc<- cut(r,breaks=ctpts)
>
> #since the result from cut was a raster with values c(1,2), use subs to change to c(0,1)
> subdf<- data.frame(from=c(1,2), to=c(0,1))
> rs<- subs(rc, subdf, subsWithNA=TRUE)
> rs
>
>
> My questions:
> 1. Is there a more efficient way? (I'll be doing this to many large rasters)
> 2. Using 32-bit R, subs bails with a memory error, even if a file is specified (cut runs fine). I can move to 64-bit R on a different machine, but it would be nice to be able to run it on this 32-bit machine. Any suggestions?
>
> Thanks in advance,
> Tim
> ~


From bgr at bgs.ac.uk  Thu Jun 14 17:47:05 2012
From: bgr at bgs.ac.uk (Rawlins, Barry G.)
Date: Thu, 14 Jun 2012 16:47:05 +0100
Subject: [R-sig-Geo] Problem with semi variance estimates in space time
	variogram (gstat)
Message-ID: <28C15D104A882F47954DEE56148152CC24545A5971@nerckwmb1.ad.nerc.ac.uk>

Hello

The variograms function in gstat is returning semi-variance estimates which appear to be two orders of magnitude lower than what I expect from calculating the variance of the data in the attached space time object created with the STFDF function:

library(gstat)
library(spacetime)
breaks<-seq(0.5,12.5,1)
var_all <- variogram(VMC~1,sp_time_var, bounds=breaks, cutoff = 12.5) # VMC is the numeric data to calculate a sp-time varigram
plot(var_all) # note the low values ranges on the scale <0.15
var(sp_time_var at data$VMC) # variance is 11.5

So I would expect the variance in the upper part of the graph to approach a value around 11.

Have I mis-specified the variogram function? I know from gstat that one had to specify a gstat object, but here I thought specifying the spacetime object was the right way to proceed and that VMC~1 was the correct syntax?

Any advice much appreciated.
Barry



-- 
This message (and any attachments) is for the recipient only. NERC
is subject to the Freedom of Information Act 2000 and the contents
of this email and any reply you make may be disclosed by NERC unless
it is exempt from release under the Act. Any material supplied to
NERC may be stored in an electronic records management system.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/b4b82964/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sp_time_var.RData
Type: application/octet-stream
Size: 4302 bytes
Desc: sp_time_var.RData
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/b4b82964/attachment.obj>

From tghoward at gw.dec.state.ny.us  Thu Jun 14 18:10:45 2012
From: tghoward at gw.dec.state.ny.us (Tim Howard)
Date: Thu, 14 Jun 2012 12:10:45 -0400
Subject: [R-sig-Geo] continuous raster to binary
In-Reply-To: <4FDA0524.40607@isciences.com>
References: <4FD9A88B020000D50005B9CE@gwsmtp.dec.state.ny.us>
	<AA818EAD2576BC488B4F623941DA74275D66C9A3@inbomail.inbo.be>
	<4FDA0524.40607@isciences.com>
Message-ID: <4FD9D4C5020000D50005BA1F@gwsmtp.dec.state.ny.us>

What a fabulous collection of answers!  
 
For my bigger grids that can't reside in memory, I think I need to use calc in regards to Thierry's and Matt's approach, like this:
 
func <- function(x){x > 3.5}  #still need to add "as
r <- calc(r, fun=func, filename = ...)
 
So, following Rafael's note that reclass was faster than subs alone, here are timings on real data comparing reclass to calc. 
 
> func <- function(x){x > ctpt}
> system.time(rasCtc <- calc(ras, fun=func, filename=out1, format = "GTiff", datatype = "INT1U"))
   user  system elapsed 
 119.16   28.00  147.37 
> system.time(rasCt <- reclass(ras, rccutpt, filename=out2, format = "GTiff", datatype = "INT1U"))
   user  system elapsed 
 119.85   28.38  148.44 
They are very close, and perhaps not even significantly different, but calc may be edging out reclass by a small amount.  Brilliant!
 
Thanks everyone, for the help. 
Best,
Tim


>>> Matthew Landis <landis at isciences.com> 6/14/2012 11:37 AM >>>

In terms of Tim's example:

plot(r)
r[] <- as.numeric(r[] > 3.5)
plot(r)

works for me.  Made only a small change from Thierry's elegant example 
to return numeric instead of boolean.

M

On 6/14/2012 9:56 AM, ONKELINX, Thierry wrote:
> How about
> rs<- r>  0.35
> or
> rs<-(r>  0.35) * 1
> untested!
>
> Best regards,
> Thierry
> ir. Thierry Onkelinx
> Instituut voor natuur- en bosonderzoek / Research Institute for Nature and Forest
> team Biometrie&  Kwaliteitszorg / team Biometrics&  Quality Assurance
> Kliniekstraat 25
> 1070 Anderlecht
> Belgium
> + 32 2 525 02 51
> + 32 54 43 61 85
> Thierry.Onkelinx at inbo.be<mailto:Thierry.Onkelinx at inbo.be>
> www.inbo.be<http://www.inbo.be/>
>
> To call in the statistician after the experiment is done may be no more than asking him to perform a post-mortem examination: he may be able to say what the experiment died of.
> ~ Sir Ronald Aylmer Fisher
>
> The plural of anecdote is not data.
> ~ Roger Brinner
>
> The combination of some data and an aching desire for an answer does not ensure that a reasonable answer can be extracted from a given body of data.
> ~ John Tukey
>
> Van: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] Namens Tim Howard
> Verzonden: donderdag 14 juni 2012 15:02
> Aan: r-sig-geo at r-project.org
> Onderwerp: [R-sig-Geo] continuous raster to binary
>
> All,
> I'd like to convert a continuous raster to binary (0, 1). Here's what I've come up with
>
> library(raster)
>
> #build the sample raster
> r<- raster(ncol=100, nrow=100)
> r[]<- round(runif(ncell(r)) * 10)
> #set up a cut point, cut it
> ctpts<- c(0,3.5,10)
> rc<- cut(r,breaks=ctpts)
>
> #since the result from cut was a raster with values c(1,2), use subs to change to c(0,1)
> subdf<- data.frame(from=c(1,2), to=c(0,1))
> rs<- subs(rc, subdf, subsWithNA=TRUE)
> rs
>
>
> My questions:
> 1. Is there a more efficient way? (I'll be doing this to many large rasters)
> 2. Using 32-bit R, subs bails with a memory error, even if a file is specified (cut runs fine). I can move to 64-bit R on a different machine, but it would be nice to be able to run it on this 32-bit machine. Any suggestions?
>
> Thanks in advance,
> Tim
> ~
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/6c2413e5/attachment.html>

From alobolistas at gmail.com  Thu Jun 14 18:12:34 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Thu, 14 Jun 2012 18:12:34 +0200
Subject: [R-sig-Geo] Conflicting information between GDALinfo() and
	gdalinfo
In-Reply-To: <alpine.LRH.2.02.1206141653040.3625@reclus.nhh.no>
References: <CAG4NReL5A4bThFaGiq=sqr+rnzBBgSbrvvJ34-4tFMetcpA9xw@mail.gmail.com>
	<alpine.LRH.2.02.1206141653040.3625@reclus.nhh.no>
Message-ID: <CAG4NReKEfuw-_wXjsm7tr7TV19cy-k_MQPuHs6-CPQRQEqie4Q@mail.gmail.com>

Taking into consideration that the user expects GDALinfo to report the
same info as gdalinfo,
it would make sense that GDALinfo state "lower left origin" instead of
just "origin"

Thanks

Agus

2012/6/14 Roger Bivand <Roger.Bivand at nhh.no>:
> GDALinfo() reports the lower left corner, which agrees with gdalinfo.
> Whether the origin is upper left or lower left is arbitrary, in sp and hence
> in rgdal, the origin of rasters is lower left.
>
> Roger
>
>
> On Thu, 14 Jun 2012, Agustin Lobo wrote:
>
>> Hi!
>> I'm having different origin according to gdalinfo ( "Origin =
>> (0.000000000000000,1024.000000000000000)") and GDALinfo
>> ("TTC0125v2flip.tif"). When displayed in QGIS, the origin is 0,1024
>> (using ubuntu 10.04, see sessionInfo at the end, tif file here:
>> http://dl.dropbox.com/u/3180464/TTC0125v2flip.tif
>>
>> tif file was saved with
>> writeRaster(bout,filename="TTC0125v2flip.tif", format="GTiff",
>> overwrite=TRUE,flip=T)
>>
>>> system("gdalinfo TTC0125v2flip.tif",intern=T)
>>
>> [1] "Driver: GTiff/GeoTIFF"
>> "Files: TTC0125v2flip.tif"
>> [3] "Size is 1280, 1024"
>> "Coordinate System is `'"
>> [5] "Origin = (0.000000000000000,1024.000000000000000)"
>> "Pixel Size = (1.000000000000000,-1.000000000000000)"
>> [7] "Image Structure Metadata:" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>> COMPRESSION=LZW"
>> [9] " ?INTERLEAVE=PIXEL"
>> "Corner Coordinates:"
>> [11] "Upper Left ?( ? ? ? 0.000, ? ?1024.000) "
>> "Lower Left ?( ? 0.0000000, ? 0.0000000) "
>> [13] "Upper Right ( ? ?1280.000, ? ?1024.000) "
>> "Lower Right ( ? ?1280.000, ? ? ? 0.000) "
>> [15] "Center ? ? ?( ? ? 640.000, ? ? 512.000) "
>> "Band 1 Block=1280x1 Type=Float32, ColorInterp=Gray"
>> [17] " ?Min=12.000 Max=219.000 " ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>> Minimum=12.000, Maximum=219.000, Mean=0.000, StdDev=0.000"
>> [19] " ?NoData Value=-3.39999999999999996e+38" ? ? ? ? ? ? ? ? ? ? "
>> Metadata:"
>> [21] " ? ?STATISTICS_MAXIMUM=219" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?"
>> STATISTICS_MEAN=0"
>> [23] " ? ?STATISTICS_MINIMUM=12" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>> STATISTICS_STDDEV=0"
>> [25] "Band 2 Block=1280x1 Type=Float32, ColorInterp=Undefined" ? ? "
>> Min=0.000 Max=215.000 "
>> [27] " ?Minimum=0.000, Maximum=215.000, Mean=0.000, StdDev=0.000" ?"
>> NoData Value=-3.39999999999999996e+38"
>> [29] " ?Metadata:" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>> STATISTICS_MAXIMUM=215"
>> [31] " ? ?STATISTICS_MEAN=0" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>> STATISTICS_MINIMUM=0"
>> [33] " ? ?STATISTICS_STDDEV=0"
>> "Band 3 Block=1280x1 Type=Float32, ColorInterp=Undefined"
>> [35] " ?Min=0.000 Max=234.000 " ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?"
>> Minimum=0.000, Maximum=234.000, Mean=0.000, StdDev=0.000"
>> [37] " ?NoData Value=-3.39999999999999996e+38" ? ? ? ? ? ? ? ? ? ? "
>> Metadata:"
>> [39] " ? ?STATISTICS_MAXIMUM=234" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?"
>> STATISTICS_MEAN=0"
>> [41] " ? ?STATISTICS_MINIMUM=0" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?"
>> STATISTICS_STDDEV=0"
>> [43] "Band 4 Block=1280x1 Type=Float32, ColorInterp=Undefined" ? ? "
>> Min=0.000 Max=255.000 "
>> [45] " ?Minimum=0.000, Maximum=255.000, Mean=0.000, StdDev=0.000" ?"
>> NoData Value=-3.39999999999999996e+38"
>> [47] " ?Metadata:" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>> STATISTICS_MAXIMUM=255"
>> [49] " ? ?STATISTICS_MEAN=0" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>> STATISTICS_MINIMUM=0"
>> [51] " ? ?STATISTICS_STDDEV=0"
>> "Band 5 Block=1280x1 Type=Float32, ColorInterp=Undefined"
>> [53] " ?Min=0.000 Max=221.000 " ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?"
>> Minimum=0.000, Maximum=221.000, Mean=0.000, StdDev=0.000"
>> [55] " ?NoData Value=-3.39999999999999996e+38" ? ? ? ? ? ? ? ? ? ? "
>> Metadata:"
>> [57] " ? ?STATISTICS_MAXIMUM=221" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?"
>> STATISTICS_MEAN=0"
>> [59] " ? ?STATISTICS_MINIMUM=0" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?"
>> STATISTICS_STDDEV=0"
>> [61] "Band 6 Block=1280x1 Type=Float32, ColorInterp=Undefined" ? ? "
>> Min=0.000 Max=178.000 "
>> [63] " ?Minimum=0.000, Maximum=178.000, Mean=0.000, StdDev=0.000" ?"
>> NoData Value=-3.39999999999999996e+38"
>> [65] " ?Metadata:" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>> STATISTICS_MAXIMUM=178"
>> [67] " ? ?STATISTICS_MEAN=0" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>> STATISTICS_MINIMUM=0"
>> [69] " ? ?STATISTICS_STDDEV=0"
>>>
>>> GDALinfo("TTC0125v2flip.tif")
>>
>> rows ? ? ? ?1024
>> columns ? ? 1280
>> bands ? ? ? 6
>> origin.x ? ? ? ?0
>> origin.y ? ? ? ?0
>> res.x ? ? ? 1
>> res.y ? ? ? 1
>> ysign ? ? ? -1
>> oblique.x ? 0
>> oblique.y ? 0
>> driver ? ? ?GTiff
>> projection ?NA
>> file ? ? ? ?TTC0125v2flip.tif
>> apparent band summary:
>> ?GDType Bmin Bmax Bmean Bsd hasNoDataValue NoDataValue
>> 1 Float32 ? 12 ?219 ? ? 0 ? 0 ? ? ? ? ? TRUE ? ?-3.4e+38
>> 2 Float32 ? ?0 ?215 ? ? 0 ? 0 ? ? ? ? ? TRUE ? ?-3.4e+38
>> 3 Float32 ? ?0 ?234 ? ? 0 ? 0 ? ? ? ? ? TRUE ? ?-3.4e+38
>> 4 Float32 ? ?0 ?255 ? ? 0 ? 0 ? ? ? ? ? TRUE ? ?-3.4e+38
>> 5 Float32 ? ?0 ?221 ? ? 0 ? 0 ? ? ? ? ? TRUE ? ?-3.4e+38
>> 6 Float32 ? ?0 ?178 ? ? 0 ? 0 ? ? ? ? ? TRUE ? ?-3.4e+38
>>
>>> sessionInfo()
>>
>> R version 2.15.0 (2012-03-30)
>> Platform: x86_64-pc-linux-gnu (64-bit)
>>
>> locale:
>> [1] LC_CTYPE=en_US.UTF-8 ? ? ? LC_NUMERIC=C
>> LC_TIME=en_US.UTF-8 ? ? ? ?LC_COLLATE=en_US.UTF-8
>> [5] LC_MONETARY=en_US.UTF-8 ? ?LC_MESSAGES=en_US.UTF-8 ? ?LC_PAPER=C
>> ? ? ? ? ? ? ?LC_NAME=C
>> [9] LC_ADDRESS=C ? ? ? ? ? ? ? LC_TELEPHONE=C
>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>
>> attached base packages:
>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>
>> other attached packages:
>> [1] raster_2.0-02 rgdal_0.7-5 ? sp_0.9-99
>>
>> loaded via a namespace (and not attached):
>> [1] grid_2.15.0 ? ? lattice_0.19-30 tools_2.15.0
>>
>>
>> Any help?
>> Agus
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Thu Jun 14 18:19:27 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 14 Jun 2012 18:19:27 +0200 (CEST)
Subject: [R-sig-Geo] Conflicting information between GDALinfo() and
 gdalinfo
In-Reply-To: <CAG4NReKEfuw-_wXjsm7tr7TV19cy-k_MQPuHs6-CPQRQEqie4Q@mail.gmail.com>
References: <CAG4NReL5A4bThFaGiq=sqr+rnzBBgSbrvvJ34-4tFMetcpA9xw@mail.gmail.com>
	<alpine.LRH.2.02.1206141653040.3625@reclus.nhh.no>
	<CAG4NReKEfuw-_wXjsm7tr7TV19cy-k_MQPuHs6-CPQRQEqie4Q@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1206141819130.3625@reclus.nhh.no>

On Thu, 14 Jun 2012, Agustin Lobo wrote:

> Taking into consideration that the user expects GDALinfo to report the
> same info as gdalinfo,
> it would make sense that GDALinfo state "lower left origin" instead of
> just "origin"

Committed to R-Forge.

Roger

>
> Thanks
>
> Agus
>
> 2012/6/14 Roger Bivand <Roger.Bivand at nhh.no>:
>> GDALinfo() reports the lower left corner, which agrees with gdalinfo.
>> Whether the origin is upper left or lower left is arbitrary, in sp and hence
>> in rgdal, the origin of rasters is lower left.
>>
>> Roger
>>
>>
>> On Thu, 14 Jun 2012, Agustin Lobo wrote:
>>
>>> Hi!
>>> I'm having different origin according to gdalinfo ( "Origin =
>>> (0.000000000000000,1024.000000000000000)") and GDALinfo
>>> ("TTC0125v2flip.tif"). When displayed in QGIS, the origin is 0,1024
>>> (using ubuntu 10.04, see sessionInfo at the end, tif file here:
>>> http://dl.dropbox.com/u/3180464/TTC0125v2flip.tif
>>>
>>> tif file was saved with
>>> writeRaster(bout,filename="TTC0125v2flip.tif", format="GTiff",
>>> overwrite=TRUE,flip=T)
>>>
>>>> system("gdalinfo TTC0125v2flip.tif",intern=T)
>>>
>>> [1] "Driver: GTiff/GeoTIFF"
>>> "Files: TTC0125v2flip.tif"
>>> [3] "Size is 1280, 1024"
>>> "Coordinate System is `'"
>>> [5] "Origin = (0.000000000000000,1024.000000000000000)"
>>> "Pixel Size = (1.000000000000000,-1.000000000000000)"
>>> [7] "Image Structure Metadata:" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>>> COMPRESSION=LZW"
>>> [9] " ?INTERLEAVE=PIXEL"
>>> "Corner Coordinates:"
>>> [11] "Upper Left ?( ? ? ? 0.000, ? ?1024.000) "
>>> "Lower Left ?( ? 0.0000000, ? 0.0000000) "
>>> [13] "Upper Right ( ? ?1280.000, ? ?1024.000) "
>>> "Lower Right ( ? ?1280.000, ? ? ? 0.000) "
>>> [15] "Center ? ? ?( ? ? 640.000, ? ? 512.000) "
>>> "Band 1 Block=1280x1 Type=Float32, ColorInterp=Gray"
>>> [17] " ?Min=12.000 Max=219.000 " ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>>> Minimum=12.000, Maximum=219.000, Mean=0.000, StdDev=0.000"
>>> [19] " ?NoData Value=-3.39999999999999996e+38" ? ? ? ? ? ? ? ? ? ? "
>>> Metadata:"
>>> [21] " ? ?STATISTICS_MAXIMUM=219" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?"
>>> STATISTICS_MEAN=0"
>>> [23] " ? ?STATISTICS_MINIMUM=12" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>>> STATISTICS_STDDEV=0"
>>> [25] "Band 2 Block=1280x1 Type=Float32, ColorInterp=Undefined" ? ? "
>>> Min=0.000 Max=215.000 "
>>> [27] " ?Minimum=0.000, Maximum=215.000, Mean=0.000, StdDev=0.000" ?"
>>> NoData Value=-3.39999999999999996e+38"
>>> [29] " ?Metadata:" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>>> STATISTICS_MAXIMUM=215"
>>> [31] " ? ?STATISTICS_MEAN=0" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>>> STATISTICS_MINIMUM=0"
>>> [33] " ? ?STATISTICS_STDDEV=0"
>>> "Band 3 Block=1280x1 Type=Float32, ColorInterp=Undefined"
>>> [35] " ?Min=0.000 Max=234.000 " ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?"
>>> Minimum=0.000, Maximum=234.000, Mean=0.000, StdDev=0.000"
>>> [37] " ?NoData Value=-3.39999999999999996e+38" ? ? ? ? ? ? ? ? ? ? "
>>> Metadata:"
>>> [39] " ? ?STATISTICS_MAXIMUM=234" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?"
>>> STATISTICS_MEAN=0"
>>> [41] " ? ?STATISTICS_MINIMUM=0" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?"
>>> STATISTICS_STDDEV=0"
>>> [43] "Band 4 Block=1280x1 Type=Float32, ColorInterp=Undefined" ? ? "
>>> Min=0.000 Max=255.000 "
>>> [45] " ?Minimum=0.000, Maximum=255.000, Mean=0.000, StdDev=0.000" ?"
>>> NoData Value=-3.39999999999999996e+38"
>>> [47] " ?Metadata:" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>>> STATISTICS_MAXIMUM=255"
>>> [49] " ? ?STATISTICS_MEAN=0" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>>> STATISTICS_MINIMUM=0"
>>> [51] " ? ?STATISTICS_STDDEV=0"
>>> "Band 5 Block=1280x1 Type=Float32, ColorInterp=Undefined"
>>> [53] " ?Min=0.000 Max=221.000 " ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?"
>>> Minimum=0.000, Maximum=221.000, Mean=0.000, StdDev=0.000"
>>> [55] " ?NoData Value=-3.39999999999999996e+38" ? ? ? ? ? ? ? ? ? ? "
>>> Metadata:"
>>> [57] " ? ?STATISTICS_MAXIMUM=221" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?"
>>> STATISTICS_MEAN=0"
>>> [59] " ? ?STATISTICS_MINIMUM=0" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?"
>>> STATISTICS_STDDEV=0"
>>> [61] "Band 6 Block=1280x1 Type=Float32, ColorInterp=Undefined" ? ? "
>>> Min=0.000 Max=178.000 "
>>> [63] " ?Minimum=0.000, Maximum=178.000, Mean=0.000, StdDev=0.000" ?"
>>> NoData Value=-3.39999999999999996e+38"
>>> [65] " ?Metadata:" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>>> STATISTICS_MAXIMUM=178"
>>> [67] " ? ?STATISTICS_MEAN=0" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "
>>> STATISTICS_MINIMUM=0"
>>> [69] " ? ?STATISTICS_STDDEV=0"
>>>>
>>>> GDALinfo("TTC0125v2flip.tif")
>>>
>>> rows ? ? ? ?1024
>>> columns ? ? 1280
>>> bands ? ? ? 6
>>> origin.x ? ? ? ?0
>>> origin.y ? ? ? ?0
>>> res.x ? ? ? 1
>>> res.y ? ? ? 1
>>> ysign ? ? ? -1
>>> oblique.x ? 0
>>> oblique.y ? 0
>>> driver ? ? ?GTiff
>>> projection ?NA
>>> file ? ? ? ?TTC0125v2flip.tif
>>> apparent band summary:
>>> ?GDType Bmin Bmax Bmean Bsd hasNoDataValue NoDataValue
>>> 1 Float32 ? 12 ?219 ? ? 0 ? 0 ? ? ? ? ? TRUE ? ?-3.4e+38
>>> 2 Float32 ? ?0 ?215 ? ? 0 ? 0 ? ? ? ? ? TRUE ? ?-3.4e+38
>>> 3 Float32 ? ?0 ?234 ? ? 0 ? 0 ? ? ? ? ? TRUE ? ?-3.4e+38
>>> 4 Float32 ? ?0 ?255 ? ? 0 ? 0 ? ? ? ? ? TRUE ? ?-3.4e+38
>>> 5 Float32 ? ?0 ?221 ? ? 0 ? 0 ? ? ? ? ? TRUE ? ?-3.4e+38
>>> 6 Float32 ? ?0 ?178 ? ? 0 ? 0 ? ? ? ? ? TRUE ? ?-3.4e+38
>>>
>>>> sessionInfo()
>>>
>>> R version 2.15.0 (2012-03-30)
>>> Platform: x86_64-pc-linux-gnu (64-bit)
>>>
>>> locale:
>>> [1] LC_CTYPE=en_US.UTF-8 ? ? ? LC_NUMERIC=C
>>> LC_TIME=en_US.UTF-8 ? ? ? ?LC_COLLATE=en_US.UTF-8
>>> [5] LC_MONETARY=en_US.UTF-8 ? ?LC_MESSAGES=en_US.UTF-8 ? ?LC_PAPER=C
>>> ? ? ? ? ? ? ?LC_NAME=C
>>> [9] LC_ADDRESS=C ? ? ? ? ? ? ? LC_TELEPHONE=C
>>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>>
>>> attached base packages:
>>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>>
>>> other attached packages:
>>> [1] raster_2.0-02 rgdal_0.7-5 ? sp_0.9-99
>>>
>>> loaded via a namespace (and not attached):
>>> [1] grid_2.15.0 ? ? lattice_0.19-30 tools_2.15.0
>>>
>>>
>>> Any help?
>>> Agus
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, NHH Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From thi_veloso at yahoo.com.br  Thu Jun 14 19:46:53 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Thu, 14 Jun 2012 10:46:53 -0700 (PDT)
Subject: [R-sig-Geo] Detect temporal correlation between two spatial fields
Message-ID: <1339696013.35451.YahooMailNeo@web161403.mail.bf1.yahoo.com>

? Dear SIG colleagues,

? I am working with changes in land use over South America. I have raster data about fire occurence (there is a MODIS product about it) from 2000-2010. Also, I have raster data describing transitions between land use (forest to pasture, forest to croplands etc) for the same period.

? Fire occurence is expressed in terms of fraction of the pixel that is burned, and land-use change is expressed in terms of fraction of the cell that transitioned from one class to another (e.g. primary to pasture).

? In practice, I KNOW that fire occurence is (maybe strongly) correlated to changes in land use over time, but I need to find a method to SHOW this.

? Any suggestions? Thanks in advance.

? Best wishes,
? Thiago.


From landis at isciences.com  Thu Jun 14 19:51:21 2012
From: landis at isciences.com (Matt Landis)
Date: Thu, 14 Jun 2012 13:51:21 -0400
Subject: [R-sig-Geo] spplot error with rasterStack
Message-ID: <CAE-RneLngV8wNZzEpur82U9yjYLtKjOeS5RLd8JVp72ZrZON+g@mail.gmail.com>

Hello all,

I am tempted to use spplot with a RasterStack, but for some reason, I
keep getting an error.  Maybe someone out there has experienced the
same thing?  See below.

st <- created from 9 IMG files

> st
class       : RasterStack
dimensions  : 360, 720, 259200, 9  (nrow, ncol, ncell, nlayers)
resolution  : 0.5, 0.5  (x, y)
extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0
min values  : 0.010, 0.010, 0.010, 0.010, 0.010, 0.055, 0.019, 0.053, 0.015
max values  : 0.99, 0.99, 0.99, 0.99, 0.99, 0.98, 0.98, 0.99, 0.99
layer names : Jul.2012, Aug.2012, Sep.2012, Oct.2012, Nov.2012,
Dec.2012, Jan.2013, Feb.2013, Mar.2013

> spplot(st)
Error in nchar(filename) :
  no slot of name "file" for this object of class "RasterStack"
In addition: Warning message:
In if (rotated | cells | (.driver(x, FALSE) != "gdal")) { :
  the condition has length > 1 and only the first element will be used

However
> spplot(as(st, 'SpatialGridDataFrame'))
>
is successful.

I am able to run the example in the spplot raster documentation with no errors.

> r <- raster(system.file("external/test.grd", package="raster"))
> s <- stack(r, r*2)
> layerNames(s) <- c('meuse', 'meuse x 2')
>
> spplot(s)
>

I am running on Windows Server 2008 R2, plus...
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] grid      stats     graphics  grDevices utils     datasets
methods   base

other attached packages:
[1] rgdal_0.7-11        zoo_1.7-7           rasterVis_0.10-9
hexbin_1.26.0       latticeExtra_0.6-19
[6] RColorBrewer_1.0-5  lattice_0.20-6      raster_1.9-92
sp_0.9-99

loaded via a namespace (and not attached):
[1] tools_2.15.0


-- 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Matthew Landis, Ph.D.
Research Scientist
ISciences, LLC
61 Main St., Suite 200
Burlington VT 05401

802-864-2999
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


From awpontes at syr.edu  Thu Jun 14 22:22:58 2012
From: awpontes at syr.edu (awpontes)
Date: Thu, 14 Jun 2012 13:22:58 -0700 (PDT)
Subject: [R-sig-Geo] varblock issues
Message-ID: <1339705378673-7580206.post@n2.nabble.com>

I am trying to use varblock to get the variance of my ppp.  I am using it
with Kcross because I am comparing two different species.  My code looks
like the following:

v=varblock(pdat1, fun=Kcross, i="Fragaria virginiana",j="Achillea
millefolium")

I keep getting the following error: 
Error in FUN(X[[1L]], ...) : No points have mark i = Fragaria virginiana

There are many points marked with these specific names, and looking at the
manual I don't need to specify the blocks, any tips on troubleshooting this
issue?

-Alyssa Pontes

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/varblock-issues-tp7580206.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From edzer.pebesma at uni-muenster.de  Fri Jun 15 00:06:14 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 15 Jun 2012 00:06:14 +0200
Subject: [R-sig-Geo] Problem with semi variance estimates in space time
 variogram (gstat)
In-Reply-To: <28C15D104A882F47954DEE56148152CC24545A5971@nerckwmb1.ad.nerc.ac.uk>
References: <28C15D104A882F47954DEE56148152CC24545A5971@nerckwmb1.ad.nerc.ac.uk>
Message-ID: <4FDA6056.5010705@uni-muenster.de>

I believe the sample variance of the data should equal the semivariance
averaged over all distances (in space and time).

You computed this over a very restricted (space time) range.

A large scale trend in the data could lead to a strong difference
between semivariances and sample variance; think of evaluating the
variogram of z=x+y, where x and y both range from 0 to 1000, and the
varioram is evaluated up to distance 10.

On 06/14/2012 05:47 PM, Rawlins, Barry G. wrote:
> Hello
>  
> The variograms function in gstat is returning semi-variance estimates
> which appear to be two orders of magnitude lower than what I expect from
> calculating the variance of the data in the attached space time object
> created with the STFDF function:
>  
> library(gstat)
> library(spacetime)
> breaks<-seq(0.5,12.5,1)
> var_all <- variogram(VMC~1,sp_time_var, bounds=breaks, cutoff = 12.5) #
> VMC is the numeric data to calculate a sp-time varigram
> plot(var_all) # note the low values ranges on the scale <0.15
> var(sp_time_var at data$VMC) # variance is 11.5
>  
> So I would expect the variance in the upper part of the graph to
> approach a value around 11.
>  
> Have I mis-specified the variogram function? I know from gstat that one
> had to specify a gstat object, but here I thought specifying the
> spacetime object was the right way to proceed and that VMC~1 was the
> correct syntax?
>  
> Any advice much appreciated.
> Barry
>  
>  
> 
> -- 
> This message (and any attachments) is for the recipient only. NERC
> is subject to the Freedom of Information Act 2000 and the contents
> of this email and any reply you make may be disclosed by NERC unless
> it is exempt from release under the Act. Any material supplied to
> NERC may be stored in an electronic records management system.
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From jochen.albrecht at gmail.com  Fri Jun 15 00:49:07 2012
From: jochen.albrecht at gmail.com (Jochen Albrecht)
Date: Thu, 14 Jun 2012 18:49:07 -0400
Subject: [R-sig-Geo] error messages after applying expand() method of raster
	package
Message-ID: <CAKRQQ2TKvGcXkVPUm=-mmbFq9mPpCNT1qjDODbec+tWBjNj5_w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/ac06dd09/attachment.pl>

From r.hijmans at gmail.com  Fri Jun 15 01:54:35 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 14 Jun 2012 16:54:35 -0700
Subject: [R-sig-Geo] spplot error with rasterStack
In-Reply-To: <CAE-RneLngV8wNZzEpur82U9yjYLtKjOeS5RLd8JVp72ZrZON+g@mail.gmail.com>
References: <CAE-RneLngV8wNZzEpur82U9yjYLtKjOeS5RLd8JVp72ZrZON+g@mail.gmail.com>
Message-ID: <CANtt_hwC2B5i_GeBheuvLgHTgrw0F1544Dfjs6ifLs0oFMDpvw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/fc19db65/attachment.pl>

From r.hijmans at gmail.com  Fri Jun 15 01:56:17 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 14 Jun 2012 16:56:17 -0700
Subject: [R-sig-Geo] error messages after applying expand() method of
 raster package
In-Reply-To: <CAKRQQ2TKvGcXkVPUm=-mmbFq9mPpCNT1qjDODbec+tWBjNj5_w@mail.gmail.com>
References: <CAKRQQ2TKvGcXkVPUm=-mmbFq9mPpCNT1qjDODbec+tWBjNj5_w@mail.gmail.com>
Message-ID: <CANtt_hw_0-DbSkBsxLD0aDRZNd=6v9+Q-QHzc5N5syX8jLY68A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/dc69f8ea/attachment.pl>

From jochen.albrecht at gmail.com  Fri Jun 15 02:13:43 2012
From: jochen.albrecht at gmail.com (Jochen Albrecht)
Date: Thu, 14 Jun 2012 20:13:43 -0400
Subject: [R-sig-Geo] error messages after applying expand() method of
 raster package
In-Reply-To: <CANtt_hw_0-DbSkBsxLD0aDRZNd=6v9+Q-QHzc5N5syX8jLY68A@mail.gmail.com>
References: <CAKRQQ2TKvGcXkVPUm=-mmbFq9mPpCNT1qjDODbec+tWBjNj5_w@mail.gmail.com>
	<CANtt_hw_0-DbSkBsxLD0aDRZNd=6v9+Q-QHzc5N5syX8jLY68A@mail.gmail.com>
Message-ID: <CAKRQQ2TF1g01NA4JNfgYDV41CbMXPnX+d=TOBZO4gFQb63n-tw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120614/5090c552/attachment.pl>

From kjetil1001 at gmail.com  Fri Jun 15 06:14:02 2012
From: kjetil1001 at gmail.com (Kjetil brinchmann Halvorsen)
Date: Fri, 15 Jun 2012 00:14:02 -0400
Subject: [R-sig-Geo] simulation of random fields of vectors
Message-ID: <CAH=m5Mgmpb7V9a5+1YECqpQED79j2ATXnna2bZJLpcoh57f-Ew@mail.gmail.com>

The title says it all: I have been searching on CRAN and the spatial
task-view, but itb seem that all the simulation packages
only simulate random scalar fields. Any ideas on how simply simulating
a random field of vectors, for the gaussian case.

The model could be intrinsic, that is, the spatial correlation is the
same for eachy component of the random vector, or
some more complex model, which we can write usefully in the following way:

The joint distribution of Y(x) and Y(x+h) is multinormal, dimension 2p
where p is the dimension of the individual  vectors, with
variance-covariance matrix
the 2px2p-matrix $C \otimes \Sigma(h)$, where \otimes denotes the
kronecker product of matrices.
This means that the spatial correlation matrix is \Sigma, and the
correlation matrix of the components of Y(x)
is C. Here, C would be constant, while \Sigma would depend on the
separation distance h.
C would have dimension p\times p while \Sigma would be 2x2.

Kjetil

-- 
"If you want a picture of the future - imagine a boot stamping on the
human face - forever."

George Orwell (1984)


From Peter.Ellis at med.govt.nz  Fri Jun 15 08:28:22 2012
From: Peter.Ellis at med.govt.nz (Peter Ellis (Wellington))
Date: Fri, 15 Jun 2012 06:28:22 +0000
Subject: [R-sig-Geo] Speeding up SpatialPolygonsDataFrame - possibly by
 making it less detailed
Message-ID: <A468281CDBEF1B4AA50301D9C1E8862320CDCBB4@wni2k111.wd.govt.nz>

Hi

I am using the digital boundaries for New Zealand shapefiles available from Statistics New Zealand at http://www.stats.govt.nz/browse_for_stats/people_and_communities/Geographic-areas/digital-boundary-files.aspx.

The aim is to use these to produce choropleth maps.

I have no problem in doing this using code based on Hadley Wickham's https://github.com/hadley/ggplot2/wiki/plotting-polygon-shapefiles . However, manipulating the shapefiles into something I can merge with statistics is painfully slow.  For example, to draw the 20 or so regional council boundaries with the code below involves creating a data frame (REGC12.df) with 3.2 million rows.  It produces a lovely looking graphic I could expand up to very large size, but is a pain in the neck for playing around with.

Is there a function in R that can take an object of class sp::SpatialPolygonsDataFrame and reduce the fine level of detail, while keeping the basic shapes of the polygons to some specified degree of approximation?  Or is this a job for a specialist GIS package?

Example code:

REGC12 <- readOGR(dsn=".", layer="REGC12")
REGC12 at data$id <- rownames(REGC12 at data)
REGC12.points <- fortify(REGC12, region="id")
REGC12.df <- join(REGC12.points, REGC12 at data, by="id")

ggplot(REGC12.df) +
	aes(long, lat, group=group, fill=NAME) +
	geom_polygon()

thanks
PE

Peter Ellis?|?Manager Research and Evaluation?
Tourism, Events and Consumer Affairs Branch
Ministry of Economic Development?| Manut? ?hanga
33 Bowen Street | PO Box 1473 | Wellington?6011?| New Zealand
p. 04 498 7448|?mb. 029 771 0135 |?www.tourismresearch.govt.nz | www.med.govt.nz
?

newzealand.govt.nz - connecting you to New Zealand central & local government services

Any opinions expressed in this message are not necessarily those of the Ministry of Economic Development. This message and any files transmitted with it are confidential and solely for the use of the intended recipient. If you are not the intended recipient or the person responsible for delivery to the intended recipient, be advised that you have received this message in error and that any use is strictly prohibited. Please contact the sender and delete the message and any attachment from your computer.


From Roger.Bivand at nhh.no  Fri Jun 15 10:24:09 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 15 Jun 2012 10:24:09 +0200 (CEST)
Subject: [R-sig-Geo] Speeding up SpatialPolygonsDataFrame - possibly by
 making it less detailed
In-Reply-To: <A468281CDBEF1B4AA50301D9C1E8862320CDCBB4@wni2k111.wd.govt.nz>
References: <A468281CDBEF1B4AA50301D9C1E8862320CDCBB4@wni2k111.wd.govt.nz>
Message-ID: <alpine.LRH.2.02.1206151021340.9017@reclus.nhh.no>

On Fri, 15 Jun 2012, Peter Ellis (Wellington) wrote:

> Hi
>
> I am using the digital boundaries for New Zealand shapefiles available 
> from Statistics New Zealand at 
> http://www.stats.govt.nz/browse_for_stats/people_and_communities/Geographic-areas/digital-boundary-files.aspx.
>
> The aim is to use these to produce choropleth maps.
>
> I have no problem in doing this using code based on Hadley Wickham's 
> https://github.com/hadley/ggplot2/wiki/plotting-polygon-shapefiles . 
> However, manipulating the shapefiles into something I can merge with 
> statistics is painfully slow.  For example, to draw the 20 or so 
> regional council boundaries with the code below involves creating a data 
> frame (REGC12.df) with 3.2 million rows.  It produces a lovely looking 
> graphic I could expand up to very large size, but is a pain in the neck 
> for playing around with.
>
> Is there a function in R that can take an object of class 
> sp::SpatialPolygonsDataFrame and reduce the fine level of detail, while 
> keeping the basic shapes of the polygons to some specified degree of 
> approximation?  Or is this a job for a specialist GIS package?

?gSimplify in rgeos should do this, once you find a suitable value for the 
tol= argument.

Roger

>
> Example code:
>
> REGC12 <- readOGR(dsn=".", layer="REGC12")
> REGC12 at data$id <- rownames(REGC12 at data)
> REGC12.points <- fortify(REGC12, region="id")
> REGC12.df <- join(REGC12.points, REGC12 at data, by="id")
>
> ggplot(REGC12.df) +
> 	aes(long, lat, group=group, fill=NAME) +
> 	geom_polygon()
>
> thanks
> PE
>
> Peter Ellis?|?Manager Research and Evaluation?
> Tourism, Events and Consumer Affairs Branch
> Ministry of Economic Development?| Manut? ?hanga
> 33 Bowen Street | PO Box 1473 | Wellington?6011?| New Zealand
> p. 04 498 7448|?mb. 029 771 0135 |?www.tourismresearch.govt.nz | www.med.govt.nz
> ?
>
> newzealand.govt.nz - connecting you to New Zealand central & local government services
>
> Any opinions expressed in this message are not necessarily those of the Ministry of Economic Development. This message and any files transmitted with it are confidential and solely for the use of the intended recipient. If you are not the intended recipient or the person responsible for delivery to the intended recipient, be advised that you have received this message in error and that any use is strictly prohibited. Please contact the sender and delete the message and any attachment from your computer.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From tom.gottfried at o2mail.de  Fri Jun 15 11:13:33 2012
From: tom.gottfried at o2mail.de (Tom Gottfried)
Date: Fri, 15 Jun 2012 11:13:33 +0200
Subject: [R-sig-Geo] Problem with semi variance estimates in space time
 variogram (gstat)
In-Reply-To: <4FDA6056.5010705@uni-muenster.de>
References: <28C15D104A882F47954DEE56148152CC24545A5971@nerckwmb1.ad.nerc.ac.uk>
	<4FDA6056.5010705@uni-muenster.de>
Message-ID: <4FDAFCBD.6010204@o2mail.de>

Am 15.06.2012 00:06, schrieb Edzer Pebesma:
> I believe the sample variance of the data should equal the semivariance
> averaged over all distances (in space and time).

A helpful paper on that subject:

BARNES, RJ. ?The variogram sill and the sample variance?. Mathematical 
Geology 23, Nr. 4 (1991): 673?678.

Tom

> You computed this over a very restricted (space time) range.
>
> A large scale trend in the data could lead to a strong difference
> between semivariances and sample variance; think of evaluating the
> variogram of z=x+y, where x and y both range from 0 to 1000, and the
> varioram is evaluated up to distance 10.
>
> On 06/14/2012 05:47 PM, Rawlins, Barry G. wrote:
>> Hello
>>
>> The variograms function in gstat is returning semi-variance estimates
>> which appear to be two orders of magnitude lower than what I expect from
>> calculating the variance of the data in the attached space time object
>> created with the STFDF function:
>>
>> library(gstat)
>> library(spacetime)
>> breaks<-seq(0.5,12.5,1)
>> var_all<- variogram(VMC~1,sp_time_var, bounds=breaks, cutoff = 12.5) #
>> VMC is the numeric data to calculate a sp-time varigram
>> plot(var_all) # note the low values ranges on the scale<0.15
>> var(sp_time_var at data$VMC) # variance is 11.5
>>
>> So I would expect the variance in the upper part of the graph to
>> approach a value around 11.
>>
>> Have I mis-specified the variogram function? I know from gstat that one
>> had to specify a gstat object, but here I thought specifying the
>> spacetime object was the right way to proceed and that VMC~1 was the
>> correct syntax?
>>
>> Any advice much appreciated.
>> Barry
>>
>>
>>
>> --
>> This message (and any attachments) is for the recipient only. NERC
>> is subject to the Freedom of Information Act 2000 and the contents
>> of this email and any reply you make may be disclosed by NERC unless
>> it is exempt from release under the Act. Any material supplied to
>> NERC may be stored in an electronic records management system.
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From bart at njn.nl  Fri Jun 15 16:44:07 2012
From: bart at njn.nl (Bart)
Date: Fri, 15 Jun 2012 16:44:07 +0200
Subject: [R-sig-Geo] Stacking objects of other class
Message-ID: <4FDB4A37.7030009@njn.nl>

Dear list,

Currently I'm developing an r package for movement analysis, it is quite 
heavily based on the raster and sp package. One of the things we want to 
do is combine multiple objects into one combined object, much like stack 
stacks multiple rasters. We thought of using the in raster defined 
generic stack function for ease of use but this poses a problem.

First calling it with a list is not possible since that method is 
already set in the raster package, then i thought about the following way.

setMethod("stack", signature(x='ourClass'), ....

and than call it as following

do.call('stack', list_of_objects_of_our_class)

I think this works in principle fine the problem is that there needs to 
be an argument called x to the call to stack, while our list does not 
necessarily contain this. One way around is removing the names from the 
list but i would like to avoid that also to keep indexing simple.

Is there any other way that we could use the stack function without 
renaming our list?

I hope the problem is a bit clear, thanks in advance

Bart


From bgr at bgs.ac.uk  Fri Jun 15 17:20:22 2012
From: bgr at bgs.ac.uk (Rawlins, Barry G.)
Date: Fri, 15 Jun 2012 16:20:22 +0100
Subject: [R-sig-Geo] Problem with semi variance estimates in space time
 variogram (gstat)
In-Reply-To: <4FDA6056.5010705@uni-muenster.de>
References: <28C15D104A882F47954DEE56148152CC24545A5971@nerckwmb1.ad.nerc.ac.uk>
	<4FDA6056.5010705@uni-muenster.de>
Message-ID: <28C15D104A882F47954DEE56148152CC245765B39D@nerckwmb1.ad.nerc.ac.uk>

Hello Edzer

How do I alter the time lags used in the variogram call when I am calculating a space time variogram? I could not see any description of the way to do this in the variograms help page.

Thanks, Barry

-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Edzer Pebesma
Sent: 14 June 2012 23:06
To: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] Problem with semi variance estimates in space time variogram (gstat)

I believe the sample variance of the data should equal the semivariance
averaged over all distances (in space and time).

You computed this over a very restricted (space time) range.

A large scale trend in the data could lead to a strong difference
between semivariances and sample variance; think of evaluating the
variogram of z=x+y, where x and y both range from 0 to 1000, and the
varioram is evaluated up to distance 10.

On 06/14/2012 05:47 PM, Rawlins, Barry G. wrote:
> Hello
>  
> The variograms function in gstat is returning semi-variance estimates
> which appear to be two orders of magnitude lower than what I expect from
> calculating the variance of the data in the attached space time object
> created with the STFDF function:
>  
> library(gstat)
> library(spacetime)
> breaks<-seq(0.5,12.5,1)
> var_all <- variogram(VMC~1,sp_time_var, bounds=breaks, cutoff = 12.5) #
> VMC is the numeric data to calculate a sp-time varigram
> plot(var_all) # note the low values ranges on the scale <0.15
> var(sp_time_var at data$VMC) # variance is 11.5
>  
> So I would expect the variance in the upper part of the graph to
> approach a value around 11.
>  
> Have I mis-specified the variogram function? I know from gstat that one
> had to specify a gstat object, but here I thought specifying the
> spacetime object was the right way to proceed and that VMC~1 was the
> correct syntax?
>  
> Any advice much appreciated.
> Barry
>  
>  
> 
> -- 
> This message (and any attachments) is for the recipient only. NERC
> is subject to the Freedom of Information Act 2000 and the contents
> of this email and any reply you make may be disclosed by NERC unless
> it is exempt from release under the Act. Any material supplied to
> NERC may be stored in an electronic records management system.
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From edzer.pebesma at uni-muenster.de  Fri Jun 15 18:07:27 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 15 Jun 2012 18:07:27 +0200
Subject: [R-sig-Geo] Problem with semi variance estimates in space time
 variogram (gstat)
In-Reply-To: <28C15D104A882F47954DEE56148152CC245765B39D@nerckwmb1.ad.nerc.ac.uk>
References: <28C15D104A882F47954DEE56148152CC24545A5971@nerckwmb1.ad.nerc.ac.uk>
	<4FDA6056.5010705@uni-muenster.de>
	<28C15D104A882F47954DEE56148152CC245765B39D@nerckwmb1.ad.nerc.ac.uk>
Message-ID: <4FDB5DBF.80408@uni-muenster.de>

according to the documentation of ?variogram, there is a tlags argument.

On 06/15/2012 05:20 PM, Rawlins, Barry G. wrote:
> Hello Edzer
> 
> How do I alter the time lags used in the variogram call when I am calculating a space time variogram? I could not see any description of the way to do this in the variograms help page.
> 
> Thanks, Barry
> 
> -----Original Message-----
> From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Edzer Pebesma
> Sent: 14 June 2012 23:06
> To: r-sig-geo at r-project.org
> Subject: Re: [R-sig-Geo] Problem with semi variance estimates in space time variogram (gstat)
> 
> I believe the sample variance of the data should equal the semivariance
> averaged over all distances (in space and time).
> 
> You computed this over a very restricted (space time) range.
> 
> A large scale trend in the data could lead to a strong difference
> between semivariances and sample variance; think of evaluating the
> variogram of z=x+y, where x and y both range from 0 to 1000, and the
> varioram is evaluated up to distance 10.
> 
> On 06/14/2012 05:47 PM, Rawlins, Barry G. wrote:
>> Hello
>>  
>> The variograms function in gstat is returning semi-variance estimates
>> which appear to be two orders of magnitude lower than what I expect from
>> calculating the variance of the data in the attached space time object
>> created with the STFDF function:
>>  
>> library(gstat)
>> library(spacetime)
>> breaks<-seq(0.5,12.5,1)
>> var_all <- variogram(VMC~1,sp_time_var, bounds=breaks, cutoff = 12.5) #
>> VMC is the numeric data to calculate a sp-time varigram
>> plot(var_all) # note the low values ranges on the scale <0.15
>> var(sp_time_var at data$VMC) # variance is 11.5
>>  
>> So I would expect the variance in the upper part of the graph to
>> approach a value around 11.
>>  
>> Have I mis-specified the variogram function? I know from gstat that one
>> had to specify a gstat object, but here I thought specifying the
>> spacetime object was the right way to proceed and that VMC~1 was the
>> correct syntax?
>>  
>> Any advice much appreciated.
>> Barry
>>  
>>  
>>
>> -- 
>> This message (and any attachments) is for the recipient only. NERC
>> is subject to the Freedom of Information Act 2000 and the contents
>> of this email and any reply you make may be disclosed by NERC unless
>> it is exempt from release under the Act. Any material supplied to
>> NERC may be stored in an electronic records management system.
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From ternjacky at hotmail.com  Sat Jun 16 03:18:54 2012
From: ternjacky at hotmail.com (ya)
Date: Sat, 16 Jun 2012 09:18:54 +0800
Subject: [R-sig-Geo] How to import distance based spatial weight matrix into
	R to produceMoran's I
Message-ID: <BAY167-DS1911300E6E9F84040D4D04B8FA0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120616/da576fa0/attachment.pl>

From pdxgary163 at gmail.com  Sat Jun 16 04:52:11 2012
From: pdxgary163 at gmail.com (wudadan)
Date: Fri, 15 Jun 2012 19:52:11 -0700 (PDT)
Subject: [R-sig-Geo] spatial correlation structure in lme
In-Reply-To: <AANLkTi=fF-Z3Hn64SfqrJUkCMudCRbn72kdt8ZUX844_@mail.gmail.com>
References: <AANLkTi=fF-Z3Hn64SfqrJUkCMudCRbn72kdt8ZUX844_@mail.gmail.com>
Message-ID: <1339815131959-7580220.post@n2.nabble.com>

Dear R users,

I need some help in understanding the spatial correlation structure. Is
there a document or paper that explains how to use spatial correlation
structure such as "corExp"?

Here is the problem I run into. With the spatial correlation structure:

 "correlation = corExp(c(10,0.8),form = ~ north + east)"

 I tried to define the range and nugget as 10 miles and 0.8, respectively.
However, I got the error message "Error in initialize.corSpatial....Initial
value for corSpatial parameters of wrong dimension". Can anyone tell me what
this means?

I then tried the script:

"correlation = corExp(10,form = ~ north + east)"

It worked. However, it seems the range "10" was not used because after I
changed it to "3", I got exactly the same estimation results. I'm wondering
what the right way to do this.

Any advice is appreciated!

Best
Gary


 


 

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Need-help-understanding-the-spatial-correlation-structure-applied-in-lme-tp6049193p7580220.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From r.hijmans at gmail.com  Sat Jun 16 06:54:10 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 15 Jun 2012 21:54:10 -0700
Subject: [R-sig-Geo] Stacking objects of other class
In-Reply-To: <4FDB4A37.7030009@njn.nl>
References: <4FDB4A37.7030009@njn.nl>
Message-ID: <CANtt_hxvWOqptWC_X58HB3C9bnc0_UNH8_rrSHOLSLkThbaktA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120615/0a32b536/attachment.pl>

From Roger.Bivand at nhh.no  Sat Jun 16 09:46:24 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 16 Jun 2012 09:46:24 +0200 (CEST)
Subject: [R-sig-Geo] How to import distance based spatial weight matrix
 into	R to produceMoran's I
In-Reply-To: <BAY167-DS1911300E6E9F84040D4D04B8FA0@phx.gbl>
References: <BAY167-DS1911300E6E9F84040D4D04B8FA0@phx.gbl>
Message-ID: <alpine.LRH.2.02.1206160941030.14282@reclus.nhh.no>

On Sat, 16 Jun 2012, ya wrote:

> Now I have two data files in my hand.One is "province.csv" which contains
> provincial logGDP per person data.The other is "Wd1.csv" which contains
> distance based spatial weight matrix. This weight matrix which is the matlab
> type file(ie. "Wd1.m") comes directly from a Matlab program. And I have
> transfered "Wd1.m"into "Wd1.xls" ,and "Wd1.xls" into "Wd1.csv".The question
> is that how can I load(or import) spatial weight matrix into R to calculate
> Moran's I?
>
> I've run following code in R,but it send message "error in moran(lny1978,
> gdpdw) : objects of different length".

Do please read the posting guide, and the help pages of the functions 
involved, noting the classes of the objects passed as arguments. Your 
quoted code is unhelpfull, as foreign is superfluous, but you do not say 
which package moran() comes from. Please try to create a reprodicible 
example, once you have re-examined your workflow (I suggest writing out 
your sparse spatial weights from Matlab as a three-column text file, and 
reading that into R as a listw object using read.dat2listw() in spdep.

Roger

PS. Never use attach, it only makes problems more opaque.

>
>> library(foreign)
>
>> gdp<- read.csv("province.csv")
>
>> attach(gdp)
>
>> gdpdw<- read.csv("Wd1.csv")
>
>> str(moran(lny1978,gdpdw))
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From edzer.pebesma at uni-muenster.de  Sat Jun 16 11:23:56 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sat, 16 Jun 2012 11:23:56 +0200
Subject: [R-sig-Geo] spatial correlation structure in lme
In-Reply-To: <1339815131959-7580220.post@n2.nabble.com>
References: <AANLkTi=fF-Z3Hn64SfqrJUkCMudCRbn72kdt8ZUX844_@mail.gmail.com>
	<1339815131959-7580220.post@n2.nabble.com>
Message-ID: <4FDC50AC.3070006@uni-muenster.de>

It would have helped us when you would have provided an example that was
reproducible for readers of this list.

I tried some things out, along that way, but didn't manage. Maybe you
could try the mixed-models list:

https://stat.ethz.ch/mailman/listinfo/r-sig-mixed-models

If you find out how these things work, feedback to this list would be
appreciated.

On 06/16/2012 04:52 AM, wudadan wrote:
> Dear R users,
> 
> I need some help in understanding the spatial correlation structure. Is
> there a document or paper that explains how to use spatial correlation
> structure such as "corExp"?
> 
> Here is the problem I run into. With the spatial correlation structure:
> 
>  "correlation = corExp(c(10,0.8),form = ~ north + east)"
> 
>  I tried to define the range and nugget as 10 miles and 0.8, respectively.

the help pages here suggest you'd have to add nugget=TRUE to the corExp
arguments.

> However, I got the error message "Error in initialize.corSpatial....Initial
> value for corSpatial parameters of wrong dimension". Can anyone tell me what
> this means?
> 
> I then tried the script:
> 
> "correlation = corExp(10,form = ~ north + east)"
> 
> It worked. However, it seems the range "10" was not used because after I
> changed it to "3", I got exactly the same estimation results. I'm wondering
> what the right way to do this.
> 
> Any advice is appreciated!
> 
> Best
> Gary
> 
> 
>  
> 
> 
>  
> 
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Need-help-understanding-the-spatial-correlation-structure-applied-in-lme-tp6049193p7580220.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From pdxgary163 at gmail.com  Sat Jun 16 19:01:42 2012
From: pdxgary163 at gmail.com (Gary Dong)
Date: Sat, 16 Jun 2012 10:01:42 -0700
Subject: [R-sig-Geo] spatial correlation structure in lme
In-Reply-To: <4FDC50AC.3070006@uni-muenster.de>
References: <AANLkTi=fF-Z3Hn64SfqrJUkCMudCRbn72kdt8ZUX844_@mail.gmail.com>
	<1339815131959-7580220.post@n2.nabble.com>
	<4FDC50AC.3070006@uni-muenster.de>
Message-ID: <CAEVDvzWa-jw5p_Vcs1wN-dXTmLn-VhRRn9jeA2pnbVbXEEewDA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120616/0a11fbfe/attachment.pl>

From abu7ala1 at aol.com  Sat Jun 16 20:05:20 2012
From: abu7ala1 at aol.com (Abdullah Alsulami)
Date: Sat, 16 Jun 2012 14:05:20 -0400 (EDT)
Subject: [R-sig-Geo] (no subject)
Message-ID: <8CF1A01BA72071D-2ACC-77F3@webmail-m168.sysops.aol.com>

http://www.lacaracola.net/wp-content/themes/caracola/yahoolinksus.html


From bart at njn.nl  Sat Jun 16 23:05:47 2012
From: bart at njn.nl (Bart)
Date: Sat, 16 Jun 2012 23:05:47 +0200
Subject: [R-sig-Geo] Stacking objects of other class
In-Reply-To: <CANtt_hxvWOqptWC_X58HB3C9bnc0_UNH8_rrSHOLSLkThbaktA@mail.gmail.com>
References: <4FDB4A37.7030009@njn.nl>
	<CANtt_hxvWOqptWC_X58HB3C9bnc0_UNH8_rrSHOLSLkThbaktA@mail.gmail.com>
Message-ID: <4FDCF52B.1090401@njn.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120616/14633b16/attachment.pl>

From edzer.pebesma at uni-muenster.de  Sat Jun 16 23:26:49 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sat, 16 Jun 2012 23:26:49 +0200
Subject: [R-sig-Geo] spatial correlation structure in lme
In-Reply-To: <CAEVDvzWa-jw5p_Vcs1wN-dXTmLn-VhRRn9jeA2pnbVbXEEewDA@mail.gmail.com>
References: <AANLkTi=fF-Z3Hn64SfqrJUkCMudCRbn72kdt8ZUX844_@mail.gmail.com>
	<1339815131959-7580220.post@n2.nabble.com>
	<4FDC50AC.3070006@uni-muenster.de>
	<CAEVDvzWa-jw5p_Vcs1wN-dXTmLn-VhRRn9jeA2pnbVbXEEewDA@mail.gmail.com>
Message-ID: <4FDCFA19.4070808@uni-muenster.de>



On 06/16/2012 07:01 PM, Gary Dong wrote:
> Thanks for your advice. Let me re-phrase my question with a reproducible
> example. Same message was also posted to the mixed-model list. Sorry for
> the cross-posting.
> 
> The example and data are from UCLA's R FAQ webpage. The link for the
> webpage is:  http://www.ats.ucla.edu/stat/r/faq/spatial_regression.htm
> 
> First, following the instructions on the webpage, I did the following???
> 
> install.packages("nlme")
> library(nlme)
> 
> spdata <- read.table("http://www.ats.ucla.edu/stat/R/faq/thick.csv", header
> = T, sep = ",")
> dummy <- rep(1, 75)
> spdata <- cbind(spdata, dummy)
> 
> ### estimated the null model ###
> 
> soil.model <- lme(fixed = thick ~ soil, data = spdata, random = ~ 1 |
> dummy, method = "ML")
> summary(soil.model)
> plot(Variogram(soil.model,form=~north+east))
> 
> ### then updated the model by the spatial correlation structure ####
> 
> soil.gaus <- update(soil.model, correlation=corGaus(1,form=~north+east))
> summary(soil.gaus)
> plot(Variogram(soil.gaus,form=~north+east))
> 
> *My first question is*: the variogram of soil.gaus indicates a range of 40,
> but the estimated range is 20.43725. Does this mean the model "soil.gaus"
> failed?

no, it means that the range parameter is not identical to the value you
interpret from the plot as range. This is usual for Gaussian and
exponential models and some others, try:

library(gstat)
show.vgms(range=20, model="Gau", max=50)

> 
> Next, I define the range and nugget manually as below. The variogram of
> soil.model indicates a range at 40 and nugget at about 0.1.
> 
> soil.gaus.1 <- update(soil.model,
> correlation=corGaus(c(40,0.1),form=~north+east,nugget=T))
> summary(soil.gaus.1)
> plot(Variogram(soil.gaus.1,form=~north+east))
> 
> The estimated range looks right (very close to 40). But the estimated
> nugget and variogram plot still look weird. *So my question is*: what I can
> do next step to improve the model?
> 
> Any advice would be greatly appreciated!
> 
> Best
> Gary
> 
> On Sat, Jun 16, 2012 at 2:23 AM, Edzer Pebesma <
> edzer.pebesma at uni-muenster.de> wrote:
> 
>> It would have helped us when you would have provided an example that was
>> reproducible for readers of this list.
>>
>> I tried some things out, along that way, but didn't manage. Maybe you
>> could try the mixed-models list:
>>
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mixed-models
>>
>> If you find out how these things work, feedback to this list would be
>> appreciated.
>>
>> On 06/16/2012 04:52 AM, wudadan wrote:
>>> Dear R users,
>>>
>>> I need some help in understanding the spatial correlation structure. Is
>>> there a document or paper that explains how to use spatial correlation
>>> structure such as "corExp"?
>>>
>>> Here is the problem I run into. With the spatial correlation structure:
>>>
>>>  "correlation = corExp(c(10,0.8),form = ~ north + east)"
>>>
>>>  I tried to define the range and nugget as 10 miles and 0.8,
>> respectively.
>>
>> the help pages here suggest you'd have to add nugget=TRUE to the corExp
>> arguments.
>>
>>> However, I got the error message "Error in
>> initialize.corSpatial....Initial
>>> value for corSpatial parameters of wrong dimension". Can anyone tell me
>> what
>>> this means?
>>>
>>> I then tried the script:
>>>
>>> "correlation = corExp(10,form = ~ north + east)"
>>>
>>> It worked. However, it seems the range "10" was not used because after I
>>> changed it to "3", I got exactly the same estimation results. I'm
>> wondering
>>> what the right way to do this.
>>>
>>> Any advice is appreciated!
>>>
>>> Best
>>> Gary
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> --
>>> View this message in context:
>> http://r-sig-geo.2731867.n2.nabble.com/Need-help-understanding-the-spatial-correlation-structure-applied-in-lme-tp6049193p7580220.html
>>> Sent from the R-sig-geo mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics (ifgi), University of M??nster
>> Weseler Stra??e 253, 48151 M??nster, Germany. Phone: +49 251
>> 8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
>> http://www.52north.org/geostatistics      e.pebesma at wwu.de
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 
> 	[[alternative HTML version deleted]]
> 
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From gpscruise at gmail.com  Sun Jun 17 01:03:39 2012
From: gpscruise at gmail.com (james pruett)
Date: Sat, 16 Jun 2012 18:03:39 -0500
Subject: [R-sig-Geo] installing osmar
Message-ID: <CAHymeZqf4KjNPTtY291VCQTM+jOQuUTE5Ck5x6O1eJqQ3xTqkg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120616/99191064/attachment.pl>

From r.hijmans at gmail.com  Sun Jun 17 04:13:07 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sat, 16 Jun 2012 19:13:07 -0700
Subject: [R-sig-Geo] Stacking objects of other class
In-Reply-To: <4FDCF52B.1090401@njn.nl>
References: <4FDB4A37.7030009@njn.nl>
	<CANtt_hxvWOqptWC_X58HB3C9bnc0_UNH8_rrSHOLSLkThbaktA@mail.gmail.com>
	<4FDCF52B.1090401@njn.nl>
Message-ID: <CANtt_hzan5mm052N0ytwiv6kXYAc0uPNcuRRNFuv9-Ch+r=xiA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120616/82691991/attachment.pl>

From edzer.pebesma at uni-muenster.de  Sun Jun 17 11:29:10 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 17 Jun 2012 11:29:10 +0200
Subject: [R-sig-Geo] installing osmar
In-Reply-To: <CAHymeZqf4KjNPTtY291VCQTM+jOQuUTE5Ck5x6O1eJqQ3xTqkg@mail.gmail.com>
References: <CAHymeZqf4KjNPTtY291VCQTM+jOQuUTE5Ck5x6O1eJqQ3xTqkg@mail.gmail.com>
Message-ID: <4FDDA366.4060201@uni-muenster.de>

second-order dependencies it seems -- try

install.packages(c("XML", "RCurl"))

first.

On 06/17/2012 01:03 AM, james pruett wrote:
> Hi all,
> 
> Newbie here.
> Trying to get osmar working on ubuntu.
> If anyone can point me to an appropriate group, I would be in your debt...
> 
> -cellurl
> 
> 
>> install.packages("osmar")
> 
> ---------output--------------
> * installing *source* package ?geosphere? ...
> ** R
> ** data
> ** inst
> ** preparing package for lazy loading
> ** help
> *** installing help indices
> ** building package indices ...
> ** testing if installed package can be loaded
> 
> * DONE (geosphere)
> ERROR: dependencies ?XML?, ?RCurl? are not available for package ?osmar?
> * removing ?/home/jim/R/i686-pc-linux-gnu-library/2.12/osmar?
> 
> The downloaded packages are in
>     ?/tmp/RtmpiUDKsD/downloaded_packages?
> Warning messages:
> 1: In install.packages("osmar") :
>   installation of package 'XML' had non-zero exit status
> 2: In install.packages("osmar") :
>   installation of package 'RCurl' had non-zero exit status
> 3: In install.packages("osmar") :
>   installation of package 'osmar' had non-zero exit status
>>
> ----------------------------------------------
> 
> 	[[alternative HTML version deleted]]
> 
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From jjcabrera20 at yahoo.com.mx  Sun Jun 17 14:57:08 2012
From: jjcabrera20 at yahoo.com.mx (Jorge Cabrera)
Date: Sun, 17 Jun 2012 05:57:08 -0700 (PDT)
Subject: [R-sig-Geo] (no subject)
Message-ID: <1339937828.6505.YahooMailNeo@web160601.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120617/c8e088f0/attachment.pl>

From feimaobaobao at hotmail.com  Sun Jun 17 21:36:51 2012
From: feimaobaobao at hotmail.com (Lindia99)
Date: Sun, 17 Jun 2012 12:36:51 -0700 (PDT)
Subject: [R-sig-Geo] Projected data in R-Gstat
In-Reply-To: <4FB24C0E.9020501@knmi.nl>
References: <CA+WaK3Gd9w7F7VU5CkqB29t1RfrU631-CGhkXLXnid58JbUnDA@mail.gmail.com>
	<4FB1623C.7080608@uni-muenster.de> <4FB24C0E.9020501@knmi.nl>
Message-ID: <1339961811601-7580233.post@n2.nabble.com>

I am a beginner to geoStatistics and searched this thread when I have the
same trouble to project latitude and longitude data to use krige.

my location data is a n*2 matrix with colnames and 1 example below.

> colnames(location)
[1] "latitude"  "longitude"

>location[1,]
  latitude longitude
1 47.46947 -122.2829

and I use proj4string and get the error. How to fix this? 

> proj4string(location) =  "+proj=longlat +datum=WGS84"
Error in function (classes, fdef, mtable)  : 
  unable to find an inherited method for function "proj4string<-", for
signature "data.frame", "character"


Thanks much!

Lindia
 

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Projected-data-in-R-Gstat-tp7549970p7580233.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From feimaobaobao at hotmail.com  Sun Jun 17 22:00:56 2012
From: feimaobaobao at hotmail.com (Lindia99)
Date: Sun, 17 Jun 2012 13:00:56 -0700 (PDT)
Subject: [R-sig-Geo] How to get started with matrix data read into R
Message-ID: <1339963256073-7580234.post@n2.nabble.com>

Dear R-sig-geo?

I have some house sales data and I want to use universal kriging to predict
house price at a new location. 

My data look like this:

> house.data[1,]
   houseId  transvalue          transvalue_previous   bathroomcnt bedroomcnt 
   xxx-1       231000              129500                           2         
3      
builtyear finishedsquarefeet lotsizesquarefeet storycnt     latitude 
longitude
1964               2110              8413                 1        47.469470
-122.282926
houseAge                 year_from_last_sale
    41                        10.91855

I just read the data into R and don't know how to prepare a data like meuse
such that I can use krige.
Can someone point me some manual or thread with detail steps? I didn't find
the answer in gstat webpage

http://cran.r-project.org/web/packages/gstat/index.html

Thanks much!

Best,
Lindia

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/How-to-get-started-with-matrix-data-read-into-R-tp7580234.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From mitradevkota at hotmail.com  Sun Jun 17 22:25:12 2012
From: mitradevkota at hotmail.com (Mitra Devkota)
Date: Sun, 17 Jun 2012 20:25:12 +0000
Subject: [R-sig-Geo] How to get started with matrix data read into R
In-Reply-To: <1339963256073-7580234.post@n2.nabble.com>
References: <1339963256073-7580234.post@n2.nabble.com>
Message-ID: <SNT102-W548FFBF98F5EFE6EDE3230CAF90@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120617/f462b953/attachment.pl>

From feimaobaobao at hotmail.com  Mon Jun 18 00:38:54 2012
From: feimaobaobao at hotmail.com (Lindia99)
Date: Sun, 17 Jun 2012 15:38:54 -0700 (PDT)
Subject: [R-sig-Geo] How to get started with matrix data read into R
In-Reply-To: <SNT102-W548FFBF98F5EFE6EDE3230CAF90@phx.gbl>
References: <1339963256073-7580234.post@n2.nabble.com>
	<SNT102-W548FFBF98F5EFE6EDE3230CAF90@phx.gbl>
Message-ID: <1339972734729-7580236.post@n2.nabble.com>

Mitra, thanks much for the help here. 

1. do you know whether location can be in the scale of latitude and
longitude? Do I need to do "proj4string" first? As I saw in gstat package,
location data must be projected, cannot be latitude and longitude.

2. Seem to me that you do OLS first and use the residual to do variofit, to
capture the spatial correlation of the residuals. then how to predict house
price of a new location? 



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/How-to-get-started-with-matrix-data-read-into-R-tp7580234p7580236.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From mathieu.rajerison at gmail.com  Mon Jun 18 10:17:27 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Mon, 18 Jun 2012 10:17:27 +0200
Subject: [R-sig-Geo] spatiallines / psp object to igraph networks
Message-ID: <CAGfc75=QshgZAP16aN=XydG55G0n_+3sVpiFN0uL6eEK=o6Raw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120618/a37f7e7a/attachment.pl>

From simon_ecc at yahoo.co.uk  Mon Jun 18 12:17:26 2012
From: simon_ecc at yahoo.co.uk (Simon Parker)
Date: Mon, 18 Jun 2012 11:17:26 +0100 (BST)
Subject: [R-sig-Geo] CRS class of UK NGR grid
Message-ID: <1340014646.18855.YahooMailNeo@web171204.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120618/41019524/attachment.pl>

From emmanuel.blondel1 at gmail.com  Mon Jun 18 12:27:17 2012
From: emmanuel.blondel1 at gmail.com (Emmanuel Blondel)
Date: Mon, 18 Jun 2012 12:27:17 +0200
Subject: [R-sig-Geo] CRS class of UK NGR grid
In-Reply-To: <1340014646.18855.YahooMailNeo@web171204.mail.ir2.yahoo.com>
References: <1340014646.18855.YahooMailNeo@web171204.mail.ir2.yahoo.com>
Message-ID: <4FDF0285.8080605@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120618/eae4585c/attachment.pl>

From julian at hafro.is  Mon Jun 18 13:20:27 2012
From: julian at hafro.is (Julian Burgos)
Date: Mon, 18 Jun 2012 11:20:27 +0000
Subject: [R-sig-Geo] Distances in shortestPath function (package spatgraphs)
Message-ID: <4FDF0EFB.6010603@hafro.is>

Dear list,

I have a question about the shortestPath function (in the package 
spatgraphs... a very useful package but with very sparse 
documentation).  The function finds the shortest connection between two 
nodes in a graph.  According to the documentation, the usage of the 
function is

shortestPath(i, j, g, pp=NULL, dbg=FALSE)

where i and j are the starting and ending nodes, g is the graph that 
defines de edges, and pp is a point pattern.  If pp is given, "the edges 
are of Euclidian length, otherwise each edge is of length 1.".

So this is my question:  if I give a point pattern, does the shortesPath 
function finds the shortest path in terms of distances between nodes or 
in terms of number of nodes?  In other words, will the algorithm select 
a shorter path in terms of distance even if it goes through a larger 
number of nodes?  I am asking because my graph  is very dense (has lots 
of points) in some areas, and it is very sparse in others.  I want to 
make sure that the algorithm actually picks the track with the shortest 
distance and not the track with the lowest number of nodes.
Thanks!

Julian

-- 
Julian Mariano Burgos, PhD
Hafranns?knastofnunin/Marine Research Institute
Sk?lagata 4, 121 Reykjav?k, Iceland
S?mi/Telephone : +354-5752037
Br?fs?mi/Telefax:  +354-5752001
Netfang/Email: julian at hafro.is


From mhuckabee1 at gmail.com  Mon Jun 18 13:51:19 2012
From: mhuckabee1 at gmail.com (Mark Huckabee)
Date: Mon, 18 Jun 2012 07:51:19 -0400
Subject: [R-sig-Geo] Problem with map2SpatialPolygons IDs
Message-ID: <CAA8wmdiQv-ZULtXZ67Ks+BFjHAu_ZJUUHj3i37uz2QR-GjyBag@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120618/212db118/attachment.pl>

From tuomas.rajala at iki.fi  Mon Jun 18 14:10:57 2012
From: tuomas.rajala at iki.fi (Tuomas Rajala)
Date: Mon, 18 Jun 2012 15:10:57 +0300
Subject: [R-sig-Geo] Distances in shortestPath function (package
	spatgraphs)
In-Reply-To: <4FDF0EFB.6010603@hafro.is>
References: <4FDF0EFB.6010603@hafro.is>
Message-ID: <CAMAa2b3bUb5XfLnupupVr_tYJ4KwBsiLs2bV+-f+fDgsBF7aJg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120618/ddffe170/attachment.pl>

From tuomas.rajala at iki.fi  Mon Jun 18 14:12:47 2012
From: tuomas.rajala at iki.fi (Tuomas Rajala)
Date: Mon, 18 Jun 2012 15:12:47 +0300
Subject: [R-sig-Geo] Distances in shortestPath function (package
	spatgraphs)
In-Reply-To: <4FDF0EFB.6010603@hafro.is>
References: <4FDF0EFB.6010603@hafro.is>
Message-ID: <CAMAa2b3tPP1F8ETRceq_LgRGYUUqA+c3C6ZCf8_=5mkWxLYwEQ@mail.gmail.com>

Dear Julian,

the algorithm finds the shortest paths in a weighted graph with each
edge weight being the Euclidian distance between corresponding node
locations. Weights are constant 1 if 'pp', and hence the node
locations, are not provided. For reference, see e.g.
http://en.wikipedia.org/wiki/Dijkstra's_algorithm

So, if
1. you give pp, the edges are weighted with Euclidian distances, and
the result is the geographical minimum distance needed to travel along
the graph from i to j,

2. you don't give pp, in which case each edge has weight 1, and the
result is the shortest path in term of edges needed to hop to get from
i to j.

To answer your question: Shortest path in terms of distance is given
by 1., and in term of nodes given by 2.

Sorry for the mix-up in terms: General graph term for the cost of
traveling each edge is 'weight'; I use 'length' in the docs, as it
makes sense in spatial context.

Hope this helps,
Tuomas R



2012/6/18 Julian Burgos <julian at hafro.is>
>
> Dear list,
>
> I have a question about the shortestPath function (in the package
> spatgraphs... a very useful package but with very sparse documentation).
> ?The function finds the shortest connection between two nodes in a graph.
> ?According to the documentation, the usage of the function is
>
> shortestPath(i, j, g, pp=NULL, dbg=FALSE)
>
> where i and j are the starting and ending nodes, g is the graph that
> defines de edges, and pp is a point pattern. ?If pp is given, "the edges are
> of Euclidian length, otherwise each edge is of length 1.".
>
> So this is my question: ?if I give a point pattern, does the shortesPath
> function finds the shortest path in terms of distances between nodes or in
> terms of number of nodes? ?In other words, will the algorithm select a
> shorter path in terms of distance even if it goes through a larger number of
> nodes? ?I am asking because my graph ?is very dense (has lots of points) in
> some areas, and it is very sparse in others. ?I want to make sure that the
> algorithm actually picks the track with the shortest distance and not the
> track with the lowest number of nodes.
> Thanks!
>
> Julian
>
> --
> Julian Mariano Burgos, PhD
> Hafranns?knastofnunin/Marine Research Institute
> Sk?lagata 4, 121 Reykjav?k, Iceland
> S?mi/Telephone : +354-5752037
> Br?fs?mi/Telefax: ?+354-5752001
> Netfang/Email: julian at hafro.is
>


From kmcoulib at gmail.com  Mon Jun 18 16:10:54 2012
From: kmcoulib at gmail.com (kapo coulibaly)
Date: Mon, 18 Jun 2012 10:10:54 -0400
Subject: [R-sig-Geo] Projected data in R-Gstat
In-Reply-To: <1339961811601-7580233.post@n2.nabble.com>
References: <CA+WaK3Gd9w7F7VU5CkqB29t1RfrU631-CGhkXLXnid58JbUnDA@mail.gmail.com>
	<4FB1623C.7080608@uni-muenster.de> <4FB24C0E.9020501@knmi.nl>
	<1339961811601-7580233.post@n2.nabble.com>
Message-ID: <CANcefXZP9v-3ep_=GDHi9X4+cDBqnHB8nswS8jbWXRk56JyKkw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120618/86214917/attachment.pl>

From Roger.Bivand at nhh.no  Mon Jun 18 16:29:35 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 18 Jun 2012 16:29:35 +0200 (CEST)
Subject: [R-sig-Geo] Projected data in R-Gstat
In-Reply-To: <CANcefXZP9v-3ep_=GDHi9X4+cDBqnHB8nswS8jbWXRk56JyKkw@mail.gmail.com>
References: <CA+WaK3Gd9w7F7VU5CkqB29t1RfrU631-CGhkXLXnid58JbUnDA@mail.gmail.com>
	<4FB1623C.7080608@uni-muenster.de> <4FB24C0E.9020501@knmi.nl>
	<1339961811601-7580233.post@n2.nabble.com>
	<CANcefXZP9v-3ep_=GDHi9X4+cDBqnHB8nswS8jbWXRk56JyKkw@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1206181624170.26214@reclus.nhh.no>

On Mon, 18 Jun 2012, kapo coulibaly wrote:

> As stated on the help page for proj4string, it "Sets or retrieves
> projection attributes on classes extending SpatialData". So proj4string
> does not reproject. There are various ways to do projection in R but from
> what you are describing maybe the simplest way for you would be to use the
> package *proj4* and the commands *project* or* ptransform* from this
> package. The help page for project is pasted below to give you an idea.

You may use proj4 if you like, but it does not support sp classes. For 
these, use the equivalent implementation in rgdal, see ?spTransform.

Note, however, that gstat *does* work with data in geographical 
coordinates if the data are in the form of an object of a class defined in 
sp with the coordinate reference system set - see the example to 
variogram().

Roger

> Hope it helps.
> Cheers
>
> Description
>
> Projection of lat/long coordinates or its inverse.
> Usage
>
> project(xy, proj, inverse = FALSE, degrees = TRUE, silent = FALSE,
>        ellps.default="sphere")
>
> Argumentsxy
>
> input (list, matrix or 2d-array) - see details below.
> proj
>
> projection definition
> inverse
>
> if TRUE inverse projection is performed (from a cartographic projection
> into lat/long), otherwise projects from lat/long into a cartographic
> projection.
> degrees
>
> if TRUE then the lat/long data is assumed to be in degrees, otherwise in
> radians
> silent
>
> if set to TRUE, warnings will be suppressed
> ellps.default
>
> default ellipsoid that will be added if no datum or ellipsoid parameter is
> specified in proj. Older versions of PROJ.4 didn't require a datum (and
> used sphere by default), but 4.5.0 and higher always require a datum or an
> ellipsoid. Set to NA if no datum should be added to proj (e.g. if you
> specify an ellipsoid directly).
>
>
> On Sun, Jun 17, 2012 at 3:36 PM, Lindia99 <feimaobaobao at hotmail.com> wrote:
>
>> I am a beginner to geoStatistics and searched this thread when I have the
>> same trouble to project latitude and longitude data to use krige.
>>
>> my location data is a n*2 matrix with colnames and 1 example below.
>>
>>> colnames(location)
>> [1] "latitude"  "longitude"
>>
>>> location[1,]
>>  latitude longitude
>> 1 47.46947 -122.2829
>>
>> and I use proj4string and get the error. How to fix this?
>>
>>> proj4string(location) =  "+proj=longlat +datum=WGS84"
>> Error in function (classes, fdef, mtable)  :
>>  unable to find an inherited method for function "proj4string<-", for
>> signature "data.frame", "character"
>>
>>
>> Thanks much!
>>
>> Lindia
>>
>>
>> --
>> View this message in context:
>> http://r-sig-geo.2731867.n2.nabble.com/Projected-data-in-R-Gstat-tp7549970p7580233.html
>> Sent from the R-sig-geo mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From jordanrwinkler at gmail.com  Mon Jun 18 17:51:59 2012
From: jordanrwinkler at gmail.com (Jordan Winkler)
Date: Mon, 18 Jun 2012 11:51:59 -0400
Subject: [R-sig-Geo] Help generating SpatialGridDataFrame from matrix
Message-ID: <CAJD8EJZ2b0==A=Na+xtAf72FDQrjxt6AFrcwsmE+gdDzrv_ntw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120618/97759199/attachment.pl>

From saimabashir11 at yahoo.com  Mon Jun 18 21:15:07 2012
From: saimabashir11 at yahoo.com (Saima Bashir)
Date: Mon, 18 Jun 2012 12:15:07 -0700 (PDT)
Subject: [R-sig-Geo] Help in simultaneous equations
Message-ID: <1340046907.92253.YahooMailNeo@web111504.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120618/85aca194/attachment.pl>

From sarah.goslee at gmail.com  Mon Jun 18 21:18:59 2012
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Mon, 18 Jun 2012 15:18:59 -0400
Subject: [R-sig-Geo] Help in simultaneous equations
In-Reply-To: <1340046907.92253.YahooMailNeo@web111504.mail.gq1.yahoo.com>
References: <1340046907.92253.YahooMailNeo@web111504.mail.gq1.yahoo.com>
Message-ID: <CAM_vjunLHXiwPqHzACKeZn-X8zG-Gz8aQzT5QWt6EM=4GOc_wQ@mail.gmail.com>

On Mon, Jun 18, 2012 at 3:15 PM, Saima Bashir <saimabashir11 at yahoo.com> wrote:
> HI,
> ?I want to run simultaneous equation model. I installed packages sphet, spdep, and spse.

After you installed them did you load them into R with
library("sphet")
library("spdep")
library("spse")

> I imported weight matrix from matlab. when I tried to run the model with these codes:
> se <- spsegm(formula, data = pdata, w = W.txt, panel = TRUE, lags = list (c(TRUE, FALSE, FALSE, FALSE), c(FALSE, TRUE, FALSE, FALSE), c(FALSE, FALSE, TRUE, FALSE), c(FALSE, FALSE, FALSE, TRUE)), errors = list(FALSE, TRUE, TRUE, TRUE), endogenous = list(c(FALSE, TRUE, TRUE, TRUE), c(TRUE, FALSE, TRUE, TRUE), c(TRUE, TRUE, FALSE, TRUE), c(TRUE, TRUE, TRUE, FALSE)))
>
> I get this error:
>
> Error: could not find function "spsegm"

If the packages installed correctly and loaded with library(), and you
still get this error, please provide the information requested in the
posting guide on OS, versions, data, etc.

Sarah


> Note: I have four equations and I am using cross section data.
>
> I will really appreciate if someone can help me out.
>
> Thanks
>
> Saima
>


-- 
Sarah Goslee
http://www.functionaldiversity.org


From scheidt14 at gmail.com  Tue Jun 19 01:07:30 2012
From: scheidt14 at gmail.com (Spencer Scheidt)
Date: Mon, 18 Jun 2012 16:07:30 -0700 (PDT)
Subject: [R-sig-Geo] Extract polygon values from large raster dataset
Message-ID: <1340060850662-7580250.post@n2.nabble.com>

Hello,

I am attempting to extract land cover values from the NLCD 2006 dataset
(http://www.mrlc.gov/nlcd2006.php) using a grid that I have converted into a
SpatialPolygons* object.  However, the NLCD raster is approximately 16 GB in
size (30 m resolution), and the grid that I would like to work with contains
5520 polygons (0.5 degree resolution).

I have written a script based on previous postings that have asked a similar
question and Applied Spatial Data Analysis in R by Bivand et. al, and used
this approach successfully for smaller SpatialPolygons* objects with the
same NLCD dataset.  

What I am wondering is if there is a quicker way to extract my polygon
values, either by breaking the raster and polygons into smaller chunks, or
using an entirely different approach.  I realize that the extreme sizes of
my 2 objects may be the ultimate constraint, and if necessary I can reduce
the resolution of my grid.

Below is my working code, which uses 2 different approaches, via rasterize
(estimated to take 10+ days to run and cross tabulate) and extract
(estimated to take over 30 days to run):

#load appropriate libraries
library(maps)
library(rgdal)
library(raster)
library(sp)
library(maptools)

#create bounding box
us.box<-matrix(c(-124.5,-67,25,49), nrow = 2, ncol = 2, byrow = TRUE)

#create grid
getClass("GridTopology")

cs<-c(0.5, 0.5)
cc<-us.box[,1] + (cs/2)
cd<-ceiling(diff(t(us.box))/cs)
us.grid<-GridTopology(cellcentre.offset = cc, cellsize = cs, cells.dim = cd)
us.grid

#create spatial polygons
#projection is albers equal area conic
prj.string <- "+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96
+units=m"
us.sp <- as.SpatialPolygons.GridTopology(us.grid, proj4string =
CRS("+proj=longlat +ellps=WGS84"))
us.SP<-spTransform(us.sp, CRS(prj.string))

summary(us.SP)

#check to make sure ID values are appropriate - should be listed by row from
top left
IDvaluesGridTopology(us.grid)
slot(us.SP, "polygons")

#load land cover data raster (16 GB)
env.data = raster('nlcd2006_landcover_4-20-11_se5.img')
projection(env.data) = CRS("+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23
+lon_0=-96") 

#create raster of polygons
poly.raster <- rasterize(us.SP, env.data, progress = 'window')
df <- crosstab(poly.raster, env.data, progress = 'window')

#maybe another way?
ex.test <- extract(env.data, us.SP, df=TRUE, progress = 'window')

Any help or advice on working with large datasets is much appreciated. 
Thank you for your time.

Spencer



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Extract-polygon-values-from-large-raster-dataset-tp7580250.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From landis at isciences.com  Tue Jun 19 03:54:16 2012
From: landis at isciences.com (Matthew Landis)
Date: Mon, 18 Jun 2012 21:54:16 -0400
Subject: [R-sig-Geo] Extract polygon values from large raster dataset
In-Reply-To: <1340060850662-7580250.post@n2.nabble.com>
References: <1340060850662-7580250.post@n2.nabble.com>
Message-ID: <4FDFDBC8.7020109@isciences.com>

Spencer,  it's been awhile since I tried to use rasterize(), but when I 
did, I found it very slow compared to alternative approaches, e.g. using 
ArcGIS.  In the end, I discovered gdal_rasterize ( 
http://www.gdal.org/gdal_rasterize.html), which seems to be faster, 
although I've never compared them head to head.  That's what I now use 
on a regular basis.  Maybe it will work for you?

M

On 06/18/2012 07:07 PM, Spencer Scheidt wrote:
> Hello,
>
> I am attempting to extract land cover values from the NLCD 2006 dataset
> (http://www.mrlc.gov/nlcd2006.php) using a grid that I have converted into a
> SpatialPolygons* object.  However, the NLCD raster is approximately 16 GB in
> size (30 m resolution), and the grid that I would like to work with contains
> 5520 polygons (0.5 degree resolution).
>
> I have written a script based on previous postings that have asked a similar
> question and Applied Spatial Data Analysis in R by Bivand et. al, and used
> this approach successfully for smaller SpatialPolygons* objects with the
> same NLCD dataset.
>
> What I am wondering is if there is a quicker way to extract my polygon
> values, either by breaking the raster and polygons into smaller chunks, or
> using an entirely different approach.  I realize that the extreme sizes of
> my 2 objects may be the ultimate constraint, and if necessary I can reduce
> the resolution of my grid.
>
> Below is my working code, which uses 2 different approaches, via rasterize
> (estimated to take 10+ days to run and cross tabulate) and extract
> (estimated to take over 30 days to run):
>
> #load appropriate libraries
> library(maps)
> library(rgdal)
> library(raster)
> library(sp)
> library(maptools)
>
> #create bounding box
> us.box<-matrix(c(-124.5,-67,25,49), nrow = 2, ncol = 2, byrow = TRUE)
>
> #create grid
> getClass("GridTopology")
>
> cs<-c(0.5, 0.5)
> cc<-us.box[,1] + (cs/2)
> cd<-ceiling(diff(t(us.box))/cs)
> us.grid<-GridTopology(cellcentre.offset = cc, cellsize = cs, cells.dim = cd)
> us.grid
>
> #create spatial polygons
> #projection is albers equal area conic
> prj.string<- "+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96
> +units=m"
> us.sp<- as.SpatialPolygons.GridTopology(us.grid, proj4string =
> CRS("+proj=longlat +ellps=WGS84"))
> us.SP<-spTransform(us.sp, CRS(prj.string))
>
> summary(us.SP)
>
> #check to make sure ID values are appropriate - should be listed by row from
> top left
> IDvaluesGridTopology(us.grid)
> slot(us.SP, "polygons")
>
> #load land cover data raster (16 GB)
> env.data = raster('nlcd2006_landcover_4-20-11_se5.img')
> projection(env.data) = CRS("+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23
> +lon_0=-96")
>
> #create raster of polygons
> poly.raster<- rasterize(us.SP, env.data, progress = 'window')
> df<- crosstab(poly.raster, env.data, progress = 'window')
>
> #maybe another way?
> ex.test<- extract(env.data, us.SP, df=TRUE, progress = 'window')
>
> Any help or advice on working with large datasets is much appreciated.
> Thank you for your time.
>
> Spencer
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Extract-polygon-values-from-large-raster-dataset-tp7580250.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
~~~~~~~~~~~~~~~~~~~~~~~~~~
Matthew Landis, Ph.D.
Research Scientist
ISciences, LLC
61 Main St. Suite 200
Burlington VT 05401
802.864.2999
www.isciences.com
~~~~~~~~~~~~~~~~~~~~~~~~~~


From basille at ase-research.org  Tue Jun 19 04:34:46 2012
From: basille at ase-research.org (Mathieu Basille)
Date: Mon, 18 Jun 2012 22:34:46 -0400
Subject: [R-sig-Geo] Extract polygon values from large raster dataset
In-Reply-To: <4FDFDBC8.7020109@isciences.com>
References: <1340060850662-7580250.post@n2.nabble.com>
	<4FDFDBC8.7020109@isciences.com>
Message-ID: <4FDFE546.30103@ase-research.org>

You might also want to consider using PostGIS [1], which now handles 
rasters by default in the recent 2.0 version, and was precisely developed 
to handle large maps easily. Note that it uses GDAL for some raster 
functions, so that it might not be faster than GDAL itself...

Mathieu.

[1] http://postgis.refractions.net/


Le 18/06/2012 21:54, Matthew Landis a ?crit :
> Spencer, it's been awhile since I tried to use rasterize(), but when I did,
> I found it very slow compared to alternative approaches, e.g. using ArcGIS.
> In the end, I discovered gdal_rasterize (
> http://www.gdal.org/gdal_rasterize.html), which seems to be faster,
> although I've never compared them head to head. That's what I now use on a
> regular basis. Maybe it will work for you?
>
> M
>
> On 06/18/2012 07:07 PM, Spencer Scheidt wrote:
>> Hello,
>>
>> I am attempting to extract land cover values from the NLCD 2006 dataset
>> (http://www.mrlc.gov/nlcd2006.php) using a grid that I have converted into a
>> SpatialPolygons* object. However, the NLCD raster is approximately 16 GB in
>> size (30 m resolution), and the grid that I would like to work with contains
>> 5520 polygons (0.5 degree resolution).
>>
>> I have written a script based on previous postings that have asked a similar
>> question and Applied Spatial Data Analysis in R by Bivand et. al, and used
>> this approach successfully for smaller SpatialPolygons* objects with the
>> same NLCD dataset.
>>
>> What I am wondering is if there is a quicker way to extract my polygon
>> values, either by breaking the raster and polygons into smaller chunks, or
>> using an entirely different approach. I realize that the extreme sizes of
>> my 2 objects may be the ultimate constraint, and if necessary I can reduce
>> the resolution of my grid.
>>
>> Below is my working code, which uses 2 different approaches, via rasterize
>> (estimated to take 10+ days to run and cross tabulate) and extract
>> (estimated to take over 30 days to run):
>>
>> #load appropriate libraries
>> library(maps)
>> library(rgdal)
>> library(raster)
>> library(sp)
>> library(maptools)
>>
>> #create bounding box
>> us.box<-matrix(c(-124.5,-67,25,49), nrow = 2, ncol = 2, byrow = TRUE)
>>
>> #create grid
>> getClass("GridTopology")
>>
>> cs<-c(0.5, 0.5)
>> cc<-us.box[,1] + (cs/2)
>> cd<-ceiling(diff(t(us.box))/cs)
>> us.grid<-GridTopology(cellcentre.offset = cc, cellsize = cs, cells.dim = cd)
>> us.grid
>>
>> #create spatial polygons
>> #projection is albers equal area conic
>> prj.string<- "+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96
>> +units=m"
>> us.sp<- as.SpatialPolygons.GridTopology(us.grid, proj4string =
>> CRS("+proj=longlat +ellps=WGS84"))
>> us.SP<-spTransform(us.sp, CRS(prj.string))
>>
>> summary(us.SP)
>>
>> #check to make sure ID values are appropriate - should be listed by row from
>> top left
>> IDvaluesGridTopology(us.grid)
>> slot(us.SP, "polygons")
>>
>> #load land cover data raster (16 GB)
>> env.data = raster('nlcd2006_landcover_4-20-11_se5.img')
>> projection(env.data) = CRS("+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23
>> +lon_0=-96")
>>
>> #create raster of polygons
>> poly.raster<- rasterize(us.SP, env.data, progress = 'window')
>> df<- crosstab(poly.raster, env.data, progress = 'window')
>>
>> #maybe another way?
>> ex.test<- extract(env.data, us.SP, df=TRUE, progress = 'window')
>>
>> Any help or advice on working with large datasets is much appreciated.
>> Thank you for your time.
>>
>> Spencer
>>
>>
>>
>> --
>> View this message in context:
>> http://r-sig-geo.2731867.n2.nabble.com/Extract-polygon-values-from-large-raster-dataset-tp7580250.html
>>
>> Sent from the R-sig-geo mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>

-- 

~$ whoami
Mathieu Basille, Post-Doc

~$ locate
Laboratoire d'?cologie Comportementale et de Conservation de la Faune
+ Centre d'?tude de la For?t
D?partement de Biologie
Universit? Laval, Qu?bec

~$ info
http://ase-research.org/basille

~$ fortune
``If you can't win by reason, go for volume.''
Calvin, by Bill Watterson.


From mitradevkota at hotmail.com  Tue Jun 19 04:59:06 2012
From: mitradevkota at hotmail.com (Mitra Devkota)
Date: Tue, 19 Jun 2012 02:59:06 +0000
Subject: [R-sig-Geo] Interpretation of simultaneous and conditional
	autoregressive models
In-Reply-To: <4FDFE546.30103@ase-research.org>
References: <1340060850662-7580250.post@n2.nabble.com>,
	<4FDFDBC8.7020109@isciences.com>, <4FDFE546.30103@ase-research.org>
Message-ID: <SNT102-W253E831DCC2558128E85E5CAFF0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120619/29fad9eb/attachment.pl>

From emmanuel.blondel1 at gmail.com  Tue Jun 19 10:55:16 2012
From: emmanuel.blondel1 at gmail.com (Emmanuel Blondel)
Date: Tue, 19 Jun 2012 10:55:16 +0200
Subject: [R-sig-Geo] CRS class of UK NGR grid
In-Reply-To: <4FDF0285.8080605@gmail.com>
References: <1340014646.18855.YahooMailNeo@web171204.mail.ir2.yahoo.com>
	<4FDF0285.8080605@gmail.com>
Message-ID: <4FE03E74.4060507@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120619/0e678324/attachment.pl>

From mathieu.rajerison at gmail.com  Tue Jun 19 13:36:08 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Tue, 19 Jun 2012 13:36:08 +0200
Subject: [R-sig-Geo] Help generating SpatialGridDataFrame from matrix
In-Reply-To: <CAJD8EJZ2b0==A=Na+xtAf72FDQrjxt6AFrcwsmE+gdDzrv_ntw@mail.gmail.com>
References: <CAJD8EJZ2b0==A=Na+xtAf72FDQrjxt6AFrcwsmE+gdDzrv_ntw@mail.gmail.com>
Message-ID: <CAGfc75nnOv-ECGE8L8wN0FgyhYnW06pzwmm5jgqQ76m7KEWG_Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120619/04a69c5b/attachment.pl>

From julian at hafro.is  Tue Jun 19 15:13:22 2012
From: julian at hafro.is (Julian Burgos)
Date: Tue, 19 Jun 2012 13:13:22 +0000
Subject: [R-sig-Geo] Distances in shortestPath function (package
	spatgraphs)
In-Reply-To: <4FDF0EFB.6010603@hafro.is>
References: <4FDF0EFB.6010603@hafro.is>
Message-ID: <4FE07AF2.7030509@hafro.is>

Great, thanks for the answer!

On m?n 18.j?n 2012 11:20, Julian Burgos wrote:
> Dear list,
>
> I have a question about the shortestPath function (in the package 
> spatgraphs... a very useful package but with very sparse 
> documentation).  The function finds the shortest connection between 
> two nodes in a graph.  According to the documentation, the usage of 
> the function is
>
> shortestPath(i, j, g, pp=NULL, dbg=FALSE)
>
> where i and j are the starting and ending nodes, g is the graph that 
> defines de edges, and pp is a point pattern.  If pp is given, "the 
> edges are of Euclidian length, otherwise each edge is of length 1.".
>
> So this is my question:  if I give a point pattern, does the 
> shortesPath function finds the shortest path in terms of distances 
> between nodes or in terms of number of nodes?  In other words, will 
> the algorithm select a shorter path in terms of distance even if it 
> goes through a larger number of nodes?  I am asking because my graph  
> is very dense (has lots of points) in some areas, and it is very 
> sparse in others.  I want to make sure that the algorithm actually 
> picks the track with the shortest distance and not the track with the 
> lowest number of nodes.
> Thanks!
>
> Julian
>


-- 
Julian Mariano Burgos, PhD
Hafranns?knastofnunin/Marine Research Institute
Sk?lagata 4, 121 Reykjav?k, Iceland
S?mi/Telephone : +354-5752037
Br?fs?mi/Telefax:  +354-5752001
Netfang/Email: julian at hafro.is


From thi_veloso at yahoo.com.br  Tue Jun 19 18:20:58 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Tue, 19 Jun 2012 09:20:58 -0700 (PDT)
Subject: [R-sig-Geo] Merge rasters with different extent
Message-ID: <1340122858.53614.YahooMailNeo@web161401.mail.bf1.yahoo.com>

?Dear list,

?I have two rasters (r1 and r2). r1 has larger extent; r2 is smaller and its extents fall totally within r1. Here are the rasters:

> r1

class ? ? ? : RasterLayer?
dimensions ?: 360, 720, 259200 ?(nrow, ncol, ncell)
resolution ?: 0.5, 0.5 ?(x, y)
extent ? ? ?: -180, 180, -90, 90 ?(xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0?
values ? ? ?: in memory
layer name ?: layer?
min value ? : 0?
max value ? : 0.055233?

> r2

class ? ? ? : RasterLayer?
dimensions ?: 47, 65, 3055 ?(nrow, ncol, ncell)
resolution ?: 0.5, 0.5 ?(x, y)
extent ? ? ?: -74.5, -42, -18, 5.5 ?(xmin, xmax, ymin, ymax)
coord. ref. : NA?
values ? ? ?: in memory
layer name ?: layer?
min value ? : 0?
max value ? : 1?

?What I would like to be able to do is merge both rasters, but keeping r2 values when cells overlap. In other words, replace r1 values with r2 values only when cells overlap. Following older discussions, I have tried "merge" command without sucess. Neither "r3 <- merge(r1,r2)" nor "r3 <- merge(r2,r1)" yield what I pursue.?

?Any ideas?

?Many thanks in advance,

?Thiago.



From kidsmake6 at msn.com  Tue Jun 19 18:23:44 2012
From: kidsmake6 at msn.com (Brad Nesom)
Date: Tue, 19 Jun 2012 11:23:44 -0500
Subject: [R-sig-Geo] Extract polygon values from large raster dataset
In-Reply-To: <1340060850662-7580250.post@n2.nabble.com>
References: <1340060850662-7580250.post@n2.nabble.com>
Message-ID: <CAPD=Les_+McpUS-bJUW4zS24R0W7xx1zDnkVxjCQ=Z=tgyat-w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120619/b8c5fc35/attachment.pl>

From r.hijmans at gmail.com  Tue Jun 19 20:31:01 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 19 Jun 2012 11:31:01 -0700
Subject: [R-sig-Geo] Extract polygon values from large raster dataset
In-Reply-To: <1340060850662-7580250.post@n2.nabble.com>
References: <1340060850662-7580250.post@n2.nabble.com>
Message-ID: <CANtt_hyxPdcsyHibQr6JDOdeF-sB7v=ZVHWpBvs7VbntbXT0Zw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120619/79923061/attachment.pl>

From r.hijmans at gmail.com  Tue Jun 19 20:43:47 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 19 Jun 2012 11:43:47 -0700
Subject: [R-sig-Geo] Merge rasters with different extent
In-Reply-To: <1340122858.53614.YahooMailNeo@web161401.mail.bf1.yahoo.com>
References: <1340122858.53614.YahooMailNeo@web161401.mail.bf1.yahoo.com>
Message-ID: <CANtt_hypsQDgO_s+NQRujXgQH_haBtBczihpF+VB6j4zzJoUnw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120619/d6c2ab70/attachment.pl>

From r.hijmans at gmail.com  Wed Jun 20 01:36:07 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 19 Jun 2012 16:36:07 -0700
Subject: [R-sig-Geo] Extract polygon values from large raster dataset
In-Reply-To: <CANtt_hyxPdcsyHibQr6JDOdeF-sB7v=ZVHWpBvs7VbntbXT0Zw@mail.gmail.com>
References: <1340060850662-7580250.post@n2.nabble.com>
	<CANtt_hyxPdcsyHibQr6JDOdeF-sB7v=ZVHWpBvs7VbntbXT0Zw@mail.gmail.com>
Message-ID: <CANtt_hz88Ed5RQ+zRk2ZdG0d25vy37h_M7BOVHYCU1TUL-uedQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120619/3331d317/attachment.pl>

From apcar at deakin.edu.au  Wed Jun 20 01:38:53 2012
From: apcar at deakin.edu.au (ADAM PETER CARDILINI)
Date: Tue, 19 Jun 2012 23:38:53 +0000
Subject: [R-sig-Geo] projectRaster() produces an object with no values
Message-ID: <11DC569BD7493645998AD27DA1F01E273B27881C@MBOX-B-6.du.deakin.edu.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120619/862661b9/attachment.pl>

From r.hijmans at gmail.com  Wed Jun 20 01:54:53 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 19 Jun 2012 16:54:53 -0700
Subject: [R-sig-Geo] projectRaster() produces an object with no values
In-Reply-To: <11DC569BD7493645998AD27DA1F01E273B27881C@MBOX-B-6.du.deakin.edu.au>
References: <11DC569BD7493645998AD27DA1F01E273B27881C@MBOX-B-6.du.deakin.edu.au>
Message-ID: <CANtt_hxjcuGBAzuiyagmU_znco13LteqkqTD3=wX6u3MqceHbg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120619/2019fb4f/attachment.pl>

From thi_veloso at yahoo.com.br  Wed Jun 20 12:52:49 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Wed, 20 Jun 2012 03:52:49 -0700 (PDT)
Subject: [R-sig-Geo] Merge rasters with different extent
In-Reply-To: <CANtt_hypsQDgO_s+NQRujXgQH_haBtBczihpF+VB6j4zzJoUnw@mail.gmail.com>
References: <1340122858.53614.YahooMailNeo@web161401.mail.bf1.yahoo.com>
	<CANtt_hypsQDgO_s+NQRujXgQH_haBtBczihpF+VB6j4zzJoUnw@mail.gmail.com>
Message-ID: <1340189569.76894.YahooMailNeo@web161406.mail.bf1.yahoo.com>

? Robert,

?Thanks for the help.?

? Yes, I just checked again. Let me share the files I am working with so everyone can reproduce the problem:?https://www.dropbox.com/s/56ltwigore1n1wv/gflvp.1700.nc?(larger extent, 1021kb) and?https://www.dropbox.com/s/69qmko0kc6muguo/defor_latlon.img?(smaller extent, 40kb).

? Output of session info is below.

? Best regards,
? Thiago.


> sessionInfo() R version 2.15.0 (2012-03-30)
Platform: x86_64-pc-linux-gnu (64-bit) locale: [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8     [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8    [7] LC_PAPER=C                 LC_NAME=C                  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C        attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods  
[7] base      other attached packages:
[1] rgdal_0.7-11  ncdf_1.6.6    raster_2.0-04 sp_0.9-99     loaded via a namespace (and not attached):
[1] grid_2.15.0    lattice_0.20-6 tools_2.15.0   

________________________________
From: Robert J. Hijmans <r.hijmans at gmail.com>
To: Thiago Veloso <thi_veloso at yahoo.com.br> 
Cc: R-SIG list <r-sig-geo at r-project.org> 
Sent: Tuesday, June 19, 2012 3:43 PM
Subject: Re: [R-sig-Geo] Merge rasters with different extent


Thiago,?

Are you sure? It works well in this example:

library(raster)
r <- raster(ncol=100, nrow=100)
r1 <- crop(r, extent(-10, 11, -10, 11))
r2 <- crop(r, extent(0, 20, 0, 20))
r3 <- crop(r, extent(9, 30, 9, 30))

r1[] <- 1:ncell(r1)
r2[] <- 1:ncell(r2)
r3[] <- 1:ncell(r3)

m1 <- merge(r1, r2, r3, fun=mean)
m2 <- merge(r3, r2, r1, fun=mean)
plot(stack(m1, m2))


If your case (small rasters) a work-around (that ignores the possibility of NA values in r2) would be

cells <- cellFromXY(r1, ?xyFromCell(r2, 1:ncell(r2)))
r1[cells] <- values(r2)

Robert


On Tue, Jun 19, 2012 at 9:20 AM, Thiago Veloso <thi_veloso at yahoo.com.br> wrote:

?Dear list,
>
>?I have two rasters (r1 and r2). r1 has larger extent; r2 is smaller and its extents fall totally within r1. Here are the rasters:
>
>> r1
>
>class ? ? ? : RasterLayer?
>dimensions ?: 360, 720, 259200 ?(nrow, ncol, ncell)
>resolution ?: 0.5, 0.5 ?(x, y)
>extent ? ? ?: -180, 180, -90, 90 ?(xmin, xmax, ymin, ymax)
>coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0?
>values ? ? ?: in memory
>layer name ?: layer?
>min value ? : 0?
>max value ? : 0.055233?
>
>> r2
>
>class ? ? ? : RasterLayer?
>dimensions ?: 47, 65, 3055 ?(nrow, ncol, ncell)
>resolution ?: 0.5, 0.5 ?(x, y)
>extent ? ? ?: -74.5, -42, -18, 5.5 ?(xmin, xmax, ymin, ymax)
>coord. ref. : NA?
>values ? ? ?: in memory
>layer name ?: layer?
>min value ? : 0?
>max value ? : 1?
>
>?What I would like to be able to do is merge both rasters, but keeping r2 values when cells overlap. In other words, replace r1 values with r2 values only when cells overlap. Following older discussions, I have tried "merge" command without sucess. Neither "r3 <- merge(r1,r2)" nor "r3 <- merge(r2,r1)" yield what I pursue.?
>
>?Any ideas?
>
>?Many thanks in advance,
>
>?Thiago.
>
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>??


From r.hijmans at gmail.com  Wed Jun 20 18:13:55 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 20 Jun 2012 09:13:55 -0700
Subject: [R-sig-Geo] Merge rasters with different extent
In-Reply-To: <1340189569.76894.YahooMailNeo@web161406.mail.bf1.yahoo.com>
References: <1340122858.53614.YahooMailNeo@web161401.mail.bf1.yahoo.com>
	<CANtt_hypsQDgO_s+NQRujXgQH_haBtBczihpF+VB6j4zzJoUnw@mail.gmail.com>
	<1340189569.76894.YahooMailNeo@web161406.mail.bf1.yahoo.com>
Message-ID: <CANtt_hxLYo+HxZmRkGTpq-5vjvKQc6zg2JUbhi5b+StEveyBPg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120620/08b90b0f/attachment.pl>

From juliane_struve at yahoo.co.uk  Wed Jun 20 18:40:31 2012
From: juliane_struve at yahoo.co.uk (Juliane Struve)
Date: Wed, 20 Jun 2012 17:40:31 +0100
Subject: [R-sig-Geo] plot nearest neighbor links
Message-ID: <1340210431.80646.YahooMailNeo@web29504.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120620/a098dd62/attachment.pl>

From jegarabe at ncsu.edu  Wed Jun 20 18:48:46 2012
From: jegarabe at ncsu.edu (James Garabedian)
Date: Wed, 20 Jun 2012 12:48:46 -0400
Subject: [R-sig-Geo] =?utf-8?b?YWRlaGFiaXRhdOKAi0hSOiBjYWxjdWxhdGlv4oCL?=
	=?utf-8?q?n_of_UDOI_using_adaptive_and_fixed_kernels?=
Message-ID: <CACKA-6ruFXzNuJjUL4-jDOUeT94o+RyZ-Jo5CME+h=HhjTp+5w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120620/3e2e50eb/attachment.pl>

From juantomas.sayago at gmail.com  Wed Jun 20 18:55:01 2012
From: juantomas.sayago at gmail.com (juantomas.sayago at gmail.com)
Date: Wed, 20 Jun 2012 16:55:01 +0000
Subject: [R-sig-Geo] plot nearest neighbor links
In-Reply-To: <1340210431.80646.YahooMailNeo@web29504.mail.ird.yahoo.com>
References: <1340210431.80646.YahooMailNeo@web29504.mail.ird.yahoo.com>
Message-ID: <1100463127-1340211034-cardhu_decombobulator_blackberry.rim.net-1491866709-@b5.c26.bise6.blackberry>

If I understand your question right you want to create a map of the knn links so you can see them and who is neighbor of who. Right? 
The way I would do it is. 
I would create the knn nb and then plot it that way. 
If you need the codes for that, I can send them in a couple of hours.  
Juan. 
Sent on the Sprint? Now Network from my BlackBerry?

-----Original Message-----
From: Juliane Struve <juliane_struve at yahoo.co.uk>
Sender: r-sig-geo-bounces at r-project.orgDate: Wed, 20 Jun 2012 17:40:31 
To: r-sig-geo at stat.math.ethz.ch<r-sig-geo at stat.math.ethz.ch>
Reply-To: Juliane Struve <juliane_struve at yahoo.co.uk>
Subject: [R-sig-Geo] plot nearest neighbor links

Dear list,
?
I would like to plot the links that dnearneigh() identifies.
?
Space <- matrix(data = 1, nrow = 10, ncol = 10)
Space[1,] <- NA
Space[nrow(Space),] <- NA
Space[,1] <- NA
Space[,ncol(Space)] <- NA
WaterRow <- row(Space)
WaterCol <- col(Space)
WaterXY? <- cbind(X=WaterRow[Space==1], Y=WaterCol[Space==1])
library(spdep)
WaterXY? <- na.omit(WaterXY)
WaterNB? <- dnearneigh(WaterXY, 0, 1)?
res <- listw2sn(nb2listw(WaterNB))[,1:2]
as.matrix(res)
?
I have found an older post on a related topic that shows an example of what I would like to do:
?
example(read.gal)
# to get an nb object
us48.q
us48.q[1:2]
res <- listw2sn(nb2listw(us48.q))[,1:2]
res[1:9,]
str(res)

I have managed to retrieve the links using as.matrix(res), but I can't get the plot of nodes and links to appear. 
?
Could someone help out ?
?
Thank you very much in advance,
?
Juliane 
	[[alternative HTML version deleted]]



From jlong at uvic.ca  Wed Jun 20 20:10:26 2012
From: jlong at uvic.ca (JLong)
Date: Wed, 20 Jun 2012 11:10:26 -0700 (PDT)
Subject: [R-sig-Geo] =?utf-8?b?YWRlaGFiaXRhdOKAi0hSOiBjYWxjdWxhdGlv4oCL?=
 =?utf-8?q?n_of_UDOI_using_adaptive_and_fixed_kernels?=
In-Reply-To: <CACKA-6ruFXzNuJjUL4-jDOUeT94o+RyZ-Jo5CME+h=HhjTp+5w@mail.gmail.com>
References: <CACKA-6ruFXzNuJjUL4-jDOUeT94o+RyZ-Jo5CME+h=HhjTp+5w@mail.gmail.com>
Message-ID: <1340215826292-7580270.post@n2.nabble.com>

James: 

1)      Is there a way to pass the UDs generated in Animal Space Use to
kerneloverlap/kerneloverlaphr in adehabitatHR? If so, how might I go about
that?

You could save your UD's from Horne & Garton's toolkit as rasters then check
out this thread b/w Tony Fischbach and Clement Calenge
http://r-sig-geo.2731867.n2.nabble.com/Walruses-and-adehabitatHR-class-estUDm-exclusion-of-non-habitat-pixels-and-summary-over-all-animals-td6497315.html#none
http://r-sig-geo.2731867.n2.nabble.com/Walruses-and-adehabitatHR-class-estUDm-exclusion-of-non-habitat-pixels-and-summary-over-all-animals-td6497315.html#none 


2)      If currently there is no solution to my first question, is there a
way use adaptive and fixed kernel methods to generate UDs using kernelUD?


The kernelUD function is a fixed kernel method, I don't believe there is an
adaptive kernel option however.


_______________________________________________
R-sig-Geo mailing list
R-sig-Geo@
https://stat.ethz.ch/mailman/listinfo/r-sig-geo



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/adehabitat-HR-calculatio-n-of-UDOI-using-adaptive-and-fixed-kernels-tp7580268p7580270.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From juantomas.sayago at gmail.com  Wed Jun 20 20:23:45 2012
From: juantomas.sayago at gmail.com (Juan Tomas Sayago)
Date: Wed, 20 Jun 2012 14:23:45 -0400
Subject: [R-sig-Geo] plot nearest neighbor links
In-Reply-To: <1100463127-1340211034-cardhu_decombobulator_blackberry.rim.net-1491866709-@b5.c26.bise6.blackberry>
References: <1340210431.80646.YahooMailNeo@web29504.mail.ird.yahoo.com>
	<1100463127-1340211034-cardhu_decombobulator_blackberry.rim.net-1491866709-@b5.c26.bise6.blackberry>
Message-ID: <CAEOXpNC-VXgwQnrrjatK8O=UNdwRf31+x_MO2Fhf--cpSK6sHQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120620/8f75e265/attachment.pl>

From juantomas.sayago at gmail.com  Wed Jun 20 20:36:02 2012
From: juantomas.sayago at gmail.com (Juan Tomas Sayago)
Date: Wed, 20 Jun 2012 14:36:02 -0400
Subject: [R-sig-Geo] plot nearest neighbor links
In-Reply-To: <CAEOXpNC-VXgwQnrrjatK8O=UNdwRf31+x_MO2Fhf--cpSK6sHQ@mail.gmail.com>
References: <1340210431.80646.YahooMailNeo@web29504.mail.ird.yahoo.com>
	<1100463127-1340211034-cardhu_decombobulator_blackberry.rim.net-1491866709-@b5.c26.bise6.blackberry>
	<CAEOXpNC-VXgwQnrrjatK8O=UNdwRf31+x_MO2Fhf--cpSK6sHQ@mail.gmail.com>
Message-ID: <CAEOXpNAFk8pEJVyzrkQ03pyAOAXT-9H3KVu9ygDY-YuZHr_9pw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120620/c091b36a/attachment.pl>

From sasan9911 at yahoo.com  Wed Jun 20 20:36:19 2012
From: sasan9911 at yahoo.com (Sasan Sasani)
Date: Wed, 20 Jun 2012 11:36:19 -0700 (PDT)
Subject: [R-sig-Geo] Help for cokriging
Message-ID: <1340217379.46512.YahooMailNeo@web114005.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120620/99bb1ad2/attachment.pl>

From edzer.pebesma at uni-muenster.de  Wed Jun 20 21:58:34 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 20 Jun 2012 21:58:34 +0200
Subject: [R-sig-Geo] Help for cokriging
In-Reply-To: <1340217379.46512.YahooMailNeo@web114005.mail.gq1.yahoo.com>
References: <1340217379.46512.YahooMailNeo@web114005.mail.gq1.yahoo.com>
Message-ID: <4FE22B6A.8010600@uni-muenster.de>

in fit.lmc(), use fit.lmc = TRUE.

otherwise, in spsample, I'd use type = "regular".

On 06/20/2012 08:36 PM, Sasan Sasani wrote:
> 
> 
> Dear All.
> I am very new in programing. I try to perform a cokriging in gstat.
> I have four variable and coordinates of each variables are differ(non-Collocated model).
> Each variable and its coordinates are saved in d1-d4 text file.
> My program for fitting cross-variogram is:
> 
> m<-vgm(1954,"Gau",80017,225)
> g <- gstat(NULL, id = "k", form =k ~ 1,data=d1)
> g <- gstat(g, id = "hgrad", form =hgrad~ 1,data=d2)
> g <- gstat(g, id = "res", form =res~ 1,data=d3)
> g <- gstat(g, id = "wtab", form =wtab~ 1,data=d4)
> vm <- variogram(g)
> vm.fit <- fit.lmc(vm, g, model=m,fit.ranges =F, fit.lmc =F)
> plot(vm, vm.fit,main="Empirical and Fitted Cross-Variogram ",col="black",pch=20)
> 
> I have two problem:
> 
> 1- How can I make a grid with shapefile(like meuse.grid). I want my results plot in my map.
> My program for create a grid is:
> gg<-spsample(shapefile,n=1000,type="nonaligned",cellsize=200)
> plot(gg)
> coordinates(gg)<-~x+y
> gridded(gg) <- TRUE 
> grd = as(gg, "SpatialPixels") 
> image(grd) 
> 
> 2-How can I perform cokriging
> When I crate a grid with below program:
> x.range <- as.integer(range(d1 at coords[,1]))
> y.range <- as.integer(range(d1 at coords[,2]))
> plot(x.range,y.range)
> grd <- expand.grid(x=seq(from=x.range[1], to=x.range[2], 
> by=500), y=seq(from=y.range[1], to=y.range[2], by=500) )
> coordinates(grd) <- ~ x+y
> gridded(grd) <- TRUE
> The cokriging run by Inverse distance but I try to perform ordinary cokriging.
> 
> 
> 3-When I use below program for ceate grid and perform predict
>  
> gg<-spsample(shapefile,n=1000,type="nonaligned",cellsize=200)
> plot(gg)
> coordinates(gg)<-~x+y
> gridded(gg) <- TRUE 
> grd = as(gg, "SpatialPixels") 
> image(grd) 
> cok.maps <- predict(vm.fit, meuse.grid)
> The Erorr is:
> Error in predict.gstat(vm.fit, grd) : 
>   gstat: value not allowed for: variograms do not satisfy a legal model
> 
> What do I do?
> 
> 	[[alternative HTML version deleted]]
> 
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From saimabashir11 at yahoo.com  Thu Jun 21 00:17:49 2012
From: saimabashir11 at yahoo.com (Saima Bashir)
Date: Wed, 20 Jun 2012 15:17:49 -0700 (PDT)
Subject: [R-sig-Geo] Spatial Weight Matrix
Message-ID: <1340230669.21621.YahooMailNeo@web111511.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120620/cbc8f7a2/attachment.pl>

From juantomas.sayago at gmail.com  Thu Jun 21 00:41:41 2012
From: juantomas.sayago at gmail.com (Juan Tomas Sayago)
Date: Wed, 20 Jun 2012 18:41:41 -0400
Subject: [R-sig-Geo] Spatial Weight Matrix
In-Reply-To: <1340230669.21621.YahooMailNeo@web111511.mail.gq1.yahoo.com>
References: <1340230669.21621.YahooMailNeo@web111511.mail.gq1.yahoo.com>
Message-ID: <CAEOXpNAVxu6UTd3A-hNHzz3SR-8t5RdweC-TcjgRQR6rn9-qBw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120620/b31e5593/attachment.pl>

From marion.wenty at gmail.com  Thu Jun 21 12:17:59 2012
From: marion.wenty at gmail.com (Marion Wenty)
Date: Thu, 21 Jun 2012 12:17:59 +0200
Subject: [R-sig-Geo] Creating a plot with two shape files: Problem: colour
 white by using second shape file
Message-ID: <CA+=LhL1Nuhqxaa3-C9Ed4K59VFeFjBBr4qH0uUAo2pZO6pDicg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120621/ce7618d3/attachment.pl>

From simon.ohanlon at imperial.ac.uk  Thu Jun 21 12:28:44 2012
From: simon.ohanlon at imperial.ac.uk (O'Hanlon, Simon J)
Date: Thu, 21 Jun 2012 10:28:44 +0000
Subject: [R-sig-Geo] Crop a SpatialPolygonsDataFrame by a bounding
	box/anotehr polygon
Message-ID: <7AE0828DCFFC0144817331B53EDC11A0188284F0@icexch-m5.ic.ac.uk>

Dear all,
I would like to crop a particular contiguous area of country polygons to a rectangular bounding box, and return new polygons, from which I can work out the centroids. I would like to do this so that I can use the centroids of the cropped country polygons to work out nice label placements for a map. I am having trouble cropping a SpatialPolygonsDataFrame object by another polygon using gIntersection (I suspect this is not for this purpose?).

Can anyone help edit the following to make it work? The gIntersection command fails. I think I need to find an alternative, but I am not sure what to do yet. If anyone can suggest a command I'd be most grateful.

Many thanks in advance,

Simon
---
#	Load relevant pacakges
library(ggplot2)
library(maptools)
library(rgeos)
library(plyr)

#	Download and unzip the Natural Earth Country Polygon data
oldwd <- getwd()
tmp <- tempdir()
setwd(tmp)
url <- "http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/50m/cultural/50m-admin-0-countries.zip"
dest <- paste(tmp,"\\tmp.zip",sep="")
download.file(url,dest)	#File is 1.3Mb
unzip(dest)

#	Read in the data to a SpatialPolygonsDataFrame
wld <- readShapePoly("ne_50m_admin_0_countries")

#	Create bounding box polygon which we would like to use to crop polygons
bb <- readWKT("POLYGON((-18 4, 4 4, 4 18, -18 18, -18 4))")
proj4string(bb) <- proj4string(wld)

#	Use gIntersection to crop the polygons to the borders of the bounding box - THIS FAILS
wa <- gIntersection(wld,bb)

#	Work out the centroids of the new polygons (but we can't do that until we have the new polygons!)
wa.df <-as.data.frame(wa)
wld.lab <- data.frame(country = (wa.df$NAME), coordinates(wa))

#	Cleanup
unlink(tmp,recursive=T)
setwd(oldwd)


From simon.ohanlon at imperial.ac.uk  Thu Jun 21 13:25:18 2012
From: simon.ohanlon at imperial.ac.uk (O'Hanlon, Simon J)
Date: Thu, 21 Jun 2012 11:25:18 +0000
Subject: [R-sig-Geo] Crop a SpatialPolygonsDataFrame by a
	bounding	box/anotehr polygon
In-Reply-To: <7AE0828DCFFC0144817331B53EDC11A0188284F0@icexch-m5.ic.ac.uk>
References: <7AE0828DCFFC0144817331B53EDC11A0188284F0@icexch-m5.ic.ac.uk>
Message-ID: <7AE0828DCFFC0144817331B53EDC11A01882853F@icexch-m5.ic.ac.uk>

Dear list,
For those interested I managed to hack out a solution thanks to some old posts from this thread and others. Basically PBSmapping::clipPolys() does what I need, but then you have to fiddle around converting SpatialPolygons to PolySets and back again. If anyone knows a way I can solve my original problem of how to clip SpatialPolygons by another polygon without coercing to PolySets I'd be most grateful. Below is my code which now works (however it is not 'bulletproof' - you have to subset the original shapefile to only the country polygons which will appear in the final plot otherwise you will get mismatch between the resulting polygon IDs and the rownames of the original dataset when you convert back from a PolySet to a SpatialPolygonsDataFrame object. I'm sure this can be solved rather easily too, but this rough solution works for me for now).

New code below:

Thanks,

Simon
---

#	Load relevant packages
library(ggplot2)
library(maptools)
library(rgeos)
library(plyr)
library(PBSmapping)


#	Download and unzip the Natural Earth Country Polygon data
oldwd <- getwd()
tmp <- tempdir()
setwd(tmp)
url <- "http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/50m/cultural/50m-admin-0-countries.zip"
dest <- paste(tmp,"\\tmp.zip",sep="")
download.file(url,dest)	#File is 1.3Mb
unzip(dest)


#	Read in the data to a SpatialPolygonsDataFrame and subset to West African countries I wish to appear in plot
wld <- readShapePoly("ne_50m_admin_0_countries")
wa <- wld[c(21,22,43,81,82,83,84,144,151,158,160,190,195,213),]


#	Convert to PolySet, clip polygons and convert back to SpatialPolygons
wa.ps <- SpatialPolygons2PolySet(wa)
wa.c <- clipPolys(wa.ps,xlim=c(-18,4),ylim=c(4,18))
wa.sp <- PolySet2SpatialPolygons(wa.c, close_polys=TRUE)


#	To attach the original attribute data to the new polygons the rownames of the data must match the polygon IDs
rn <- sapply(slot(wa.sp, "polygons"), function(x) slot(x, "ID"))
rownames(wa at data) <- rn
wa.new <- SpatialPolygonsDataFrame(wa.sp,data=wa at data)


#	Work out the centroids of the new polygons 
wa.df <-as.data.frame(wa.new)
wld.lab <- data.frame(country = (wa.df$NAME), coordinates(wa.new))


#	Plot map and country labels
plot(wa.new)
text(wld.lab[,2:3], labels=wld.lab$country, col="red")


#	Cleanup
unlink(tmp,recursive=T)
setwd(oldwd)

-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of O'Hanlon, Simon J
Sent: 21 June 2012 11:29
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] Crop a SpatialPolygonsDataFrame by a bounding box/anotehr polygon

Dear all,
I would like to crop a particular contiguous area of country polygons to a rectangular bounding box, and return new polygons, from which I can work out the centroids. I would like to do this so that I can use the centroids of the cropped country polygons to work out nice label placements for a map. I am having trouble cropping a SpatialPolygonsDataFrame object by another polygon using gIntersection (I suspect this is not for this purpose?).

Can anyone help edit the following to make it work? The gIntersection command fails. I think I need to find an alternative, but I am not sure what to do yet. If anyone can suggest a command I'd be most grateful.

Many thanks in advance,

Simon
---
#	Load relevant pacakges
library(ggplot2)
library(maptools)
library(rgeos)
library(plyr)

#	Download and unzip the Natural Earth Country Polygon data
oldwd <- getwd()
tmp <- tempdir()
setwd(tmp)
url <- "http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/50m/cultural/50m-admin-0-countries.zip"
dest <- paste(tmp,"\\tmp.zip",sep="")
download.file(url,dest)	#File is 1.3Mb
unzip(dest)

#	Read in the data to a SpatialPolygonsDataFrame
wld <- readShapePoly("ne_50m_admin_0_countries")

#	Create bounding box polygon which we would like to use to crop polygons
bb <- readWKT("POLYGON((-18 4, 4 4, 4 18, -18 18, -18 4))")
proj4string(bb) <- proj4string(wld)

#	Use gIntersection to crop the polygons to the borders of the bounding box - THIS FAILS
wa <- gIntersection(wld,bb)

#	Work out the centroids of the new polygons (but we can't do that until we have the new polygons!)
wa.df <-as.data.frame(wa)
wld.lab <- data.frame(country = (wa.df$NAME), coordinates(wa))

#	Cleanup
unlink(tmp,recursive=T)
setwd(oldwd)

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Thu Jun 21 13:51:41 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 21 Jun 2012 13:51:41 +0200 (CEST)
Subject: [R-sig-Geo] Crop a SpatialPolygonsDataFrame by a	bounding
 box/anotehr polygon
In-Reply-To: <7AE0828DCFFC0144817331B53EDC11A01882853F@icexch-m5.ic.ac.uk>
References: <7AE0828DCFFC0144817331B53EDC11A0188284F0@icexch-m5.ic.ac.uk>
	<7AE0828DCFFC0144817331B53EDC11A01882853F@icexch-m5.ic.ac.uk>
Message-ID: <alpine.LRH.2.02.1206211346390.5948@reclus.nhh.no>

On Thu, 21 Jun 2012, O'Hanlon, Simon J wrote:

> Dear list,

> For those interested I managed to hack out a solution thanks to some old

No, this was answered in a thread here starting at:

https://stat.ethz.ch/pipermail/r-sig-geo/2012-June/015337.html

just a week ago. If you cite threads, always give a link. Note that 
PBSmapping uses gpclib code, although the PBS authors claim to have 
permission to release it under GPL. If you need to stay on the safe side, 
rgeos solves the problem (also for the planar case) without encumbrances.

Roger


> posts from this thread and others. Basically PBSmapping::clipPolys() 
> does what I need, but then you have to fiddle around converting 
> SpatialPolygons to PolySets and back again. If anyone knows a way I can 
> solve my original problem of how to clip SpatialPolygons by another 
> polygon without coercing to PolySets I'd be most grateful. Below is my 
> code which now works (however it is not 'bulletproof' - you have to 
> subset the original shapefile to only the country polygons which will 
> appear in the final plot otherwise you will get mismatch between the 
> resulting polygon IDs and the rownames of the original dataset when you 
> convert back from a PolySet to a SpatialPolygonsDataFrame object. I'm 
> sure this can be solved rather easily too, but this rough solution works 
> for me for now).
>
> New code below:
>
> Thanks,
>
> Simon
> ---
>
> #	Load relevant packages
> library(ggplot2)
> library(maptools)
> library(rgeos)
> library(plyr)
> library(PBSmapping)
>
>
> #	Download and unzip the Natural Earth Country Polygon data
> oldwd <- getwd()
> tmp <- tempdir()
> setwd(tmp)
> url <- "http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/50m/cultural/50m-admin-0-countries.zip"
> dest <- paste(tmp,"\\tmp.zip",sep="")
> download.file(url,dest)	#File is 1.3Mb
> unzip(dest)
>
>
> #	Read in the data to a SpatialPolygonsDataFrame and subset to West African countries I wish to appear in plot
> wld <- readShapePoly("ne_50m_admin_0_countries")
> wa <- wld[c(21,22,43,81,82,83,84,144,151,158,160,190,195,213),]
>
>
> #	Convert to PolySet, clip polygons and convert back to SpatialPolygons
> wa.ps <- SpatialPolygons2PolySet(wa)
> wa.c <- clipPolys(wa.ps,xlim=c(-18,4),ylim=c(4,18))
> wa.sp <- PolySet2SpatialPolygons(wa.c, close_polys=TRUE)
>
>
> #	To attach the original attribute data to the new polygons the rownames of the data must match the polygon IDs
> rn <- sapply(slot(wa.sp, "polygons"), function(x) slot(x, "ID"))
> rownames(wa at data) <- rn
> wa.new <- SpatialPolygonsDataFrame(wa.sp,data=wa at data)
>
>
> #	Work out the centroids of the new polygons
> wa.df <-as.data.frame(wa.new)
> wld.lab <- data.frame(country = (wa.df$NAME), coordinates(wa.new))
>
>
> #	Plot map and country labels
> plot(wa.new)
> text(wld.lab[,2:3], labels=wld.lab$country, col="red")
>
>
> #	Cleanup
> unlink(tmp,recursive=T)
> setwd(oldwd)
>
> -----Original Message-----
> From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of O'Hanlon, Simon J
> Sent: 21 June 2012 11:29
> To: r-sig-geo at r-project.org
> Subject: [R-sig-Geo] Crop a SpatialPolygonsDataFrame by a bounding box/anotehr polygon
>
> Dear all,
> I would like to crop a particular contiguous area of country polygons to a rectangular bounding box, and return new polygons, from which I can work out the centroids. I would like to do this so that I can use the centroids of the cropped country polygons to work out nice label placements for a map. I am having trouble cropping a SpatialPolygonsDataFrame object by another polygon using gIntersection (I suspect this is not for this purpose?).
>
> Can anyone help edit the following to make it work? The gIntersection command fails. I think I need to find an alternative, but I am not sure what to do yet. If anyone can suggest a command I'd be most grateful.
>
> Many thanks in advance,
>
> Simon
> ---
> #	Load relevant pacakges
> library(ggplot2)
> library(maptools)
> library(rgeos)
> library(plyr)
>
> #	Download and unzip the Natural Earth Country Polygon data
> oldwd <- getwd()
> tmp <- tempdir()
> setwd(tmp)
> url <- "http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/50m/cultural/50m-admin-0-countries.zip"
> dest <- paste(tmp,"\\tmp.zip",sep="")
> download.file(url,dest)	#File is 1.3Mb
> unzip(dest)
>
> #	Read in the data to a SpatialPolygonsDataFrame
> wld <- readShapePoly("ne_50m_admin_0_countries")
>
> #	Create bounding box polygon which we would like to use to crop polygons
> bb <- readWKT("POLYGON((-18 4, 4 4, 4 18, -18 18, -18 4))")
> proj4string(bb) <- proj4string(wld)
>
> #	Use gIntersection to crop the polygons to the borders of the bounding box - THIS FAILS
> wa <- gIntersection(wld,bb)
>
> #	Work out the centroids of the new polygons (but we can't do that until we have the new polygons!)
> wa.df <-as.data.frame(wa)
> wld.lab <- data.frame(country = (wa.df$NAME), coordinates(wa))
>
> #	Cleanup
> unlink(tmp,recursive=T)
> setwd(oldwd)
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From djrwicks at gmail.com  Thu Jun 21 13:57:28 2012
From: djrwicks at gmail.com (djrwicks)
Date: Thu, 21 Jun 2012 04:57:28 -0700 (PDT)
Subject: [R-sig-Geo] ordinary kriging using 'krige.conv' function
Message-ID: <1340279848811-7580281.post@n2.nabble.com>

http://r-sig-geo.2731867.n2.nabble.com/file/n7580281/Moran_XY.csv
Moran_XY.csv 

List readers,

I am trying to perform an ordinary kriging with the above data using the
'krige.conv' function in the geoR package.  I am however, encountering
problems with successfully completing this.  I have provided the data and
code I have been running and would welcome some suggestions. 

data<-read.csv("Moran_XY.csv")
sb<-as.geodata(data)
# Defining a prediction grid
grid<-expand.grid(seq(300000,360000,l=60),seq(3613000,3650000,l=60))
# predicting by ordinary kriging
vario <- variog(sb)
vf <- variofit(vario)
kc <- krige.conv(sb, loc=grid, krige=krige.control(obj.m=vf))
#generating image
image(kc)

Thanks in advance,

Dan.


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/ordinary-kriging-using-krige-conv-function-tp7580281.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From marion.wenty at gmail.com  Thu Jun 21 14:13:13 2012
From: marion.wenty at gmail.com (Marion Wenty)
Date: Thu, 21 Jun 2012 14:13:13 +0200
Subject: [R-sig-Geo] reprojecting shape files (change coordinates)
Message-ID: <CA+=LhL29WhfKv-ShmBAgwDMr6UCPtECWsiCMAQXJDSsJ1ynwLg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120621/4c20f821/attachment.pl>

From samanmonfared1 at gmail.com  Thu Jun 21 14:33:04 2012
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Thu, 21 Jun 2012 17:03:04 +0430
Subject: [R-sig-Geo] transform coordinates
Message-ID: <CAOytA4ZBp=8qQfPGb3mhmnkSjGrR-QOuh5zgm9fgRAACZNwvoQ@mail.gmail.com>

Hi.
How can I transform a coordinate system like (N26 5 21, E39 4 76) to
utm system??
THanks.

-- 

Saman Monfared
Msc Student,
Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167


From mdsumner at gmail.com  Thu Jun 21 15:50:31 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 21 Jun 2012 23:50:31 +1000
Subject: [R-sig-Geo] transform coordinates
In-Reply-To: <CAOytA4ZBp=8qQfPGb3mhmnkSjGrR-QOuh5zgm9fgRAACZNwvoQ@mail.gmail.com>
References: <CAOytA4ZBp=8qQfPGb3mhmnkSjGrR-QOuh5zgm9fgRAACZNwvoQ@mail.gmail.com>
Message-ID: <CAAcGz9_Lk=tTPKJLtqgzxO25-pvBy3nkZrnNNHUGn5ZVBm5xKw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120621/84ff778f/attachment.pl>

From juantomas.sayago at gmail.com  Thu Jun 21 18:14:01 2012
From: juantomas.sayago at gmail.com (Juan Tomas Sayago)
Date: Thu, 21 Jun 2012 12:14:01 -0400
Subject: [R-sig-Geo] plot nearest neighbor links
In-Reply-To: <6BC38A02-07BE-49FB-8F61-F4360773491C@uv.es>
References: <1340210431.80646.YahooMailNeo@web29504.mail.ird.yahoo.com>
	<1100463127-1340211034-cardhu_decombobulator_blackberry.rim.net-1491866709-@b5.c26.bise6.blackberry>
	<CAEOXpNC-VXgwQnrrjatK8O=UNdwRf31+x_MO2Fhf--cpSK6sHQ@mail.gmail.com>
	<6BC38A02-07BE-49FB-8F61-F4360773491C@uv.es>
Message-ID: <CAEOXpNCmyRDRWz8pObWaZJsuEsQBL3zRfJrA4iy3HouHKZuDFQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120621/7dcd3e62/attachment.pl>

From ashton at msu.edu  Thu Jun 21 19:36:51 2012
From: ashton at msu.edu (Ashton Shortridge)
Date: Thu, 21 Jun 2012 13:36:51 -0400
Subject: [R-sig-Geo] transform coordinates
In-Reply-To: <CAOytA4ZBp=8qQfPGb3mhmnkSjGrR-QOuh5zgm9fgRAACZNwvoQ@mail.gmail.com>
References: <CAOytA4ZBp=8qQfPGb3mhmnkSjGrR-QOuh5zgm9fgRAACZNwvoQ@mail.gmail.com>
Message-ID: <201206211336.51811.ashton@msu.edu>

On 06/21/12, Saman Monfared, wrote:
> Hi.
> How can I transform a coordinate system like (N26 5 21, E39 4 76) to
> utm system??
> THanks.

Dear Saman,

The r-sig-geo archives have several posts on this or related subjects. Here 
are two that might be helpful:
http://r-sig-geo.2731867.n2.nabble.com/converting-from-UTM-to-Decimal-degrees-
td7563170.html
http://r-sig-geo.2731867.n2.nabble.com/Reading-and-projecting-lat-long-point-
coordinates-using-R-td2761644.html

yours,

Ashton


-----
Ashton Shortridge
Associate Professor			ashton at msu.edu
Dept of Geography			http://www.msu.edu/~ashton
235 Geography Building		ph (517) 432-3561
Michigan State University		fx (517) 432-1671


From ted.rosenbaum at yale.edu  Thu Jun 21 20:15:08 2012
From: ted.rosenbaum at yale.edu (Ted Rosenbaum)
Date: Thu, 21 Jun 2012 14:15:08 -0400
Subject: [R-sig-Geo] Closest point in R
Message-ID: <CAJgfpigoL6+BcDoxe7ks09hpuWsdZMErGj=9Va=+fYPt-xXDHQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120621/61a8974e/attachment.pl>

From czapelini at yahoo.com.br  Fri Jun 22 01:46:28 2012
From: czapelini at yahoo.com.br (Cleverson Zapelini)
Date: Thu, 21 Jun 2012 16:46:28 -0700
Subject: [R-sig-Geo] K (r)
Message-ID: <1340322388.92302.YahooMailNeo@web122404.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120621/597e2c97/attachment.pl>

From tom.gottfried at o2mail.de  Fri Jun 22 06:05:10 2012
From: tom.gottfried at o2mail.de (Tom Gottfried)
Date: Fri, 22 Jun 2012 06:05:10 +0200
Subject: [R-sig-Geo] reprojecting shape files (change coordinates)
In-Reply-To: <CA+=LhL29WhfKv-ShmBAgwDMr6UCPtECWsiCMAQXJDSsJ1ynwLg@mail.gmail.com>
References: <CA+=LhL29WhfKv-ShmBAgwDMr6UCPtECWsiCMAQXJDSsJ1ynwLg@mail.gmail.com>
Message-ID: <4FE3EEF6.8000001@o2mail.de>

Have a look at the manual page for spTransform() in package rgdal.

HTH,
Tom

Am 21.06.2012 14:13, schrieb Marion Wenty:
> Dear all,
>
>
> I am trying to put two plots created with two different shape files
>
> on top of each other.
>
>
> They have got different coordinates and I would like to change them
> (reproject the shape files) in order for them to
>
>
> be exactly on top of each other.
>
>
> I know that there are packages but I didn't understand which commands
> I have to use.
>
>
>
> first shape file:
>
> Object of class SpatialPolygonsDataFrame
> Coordinates:
>         min      max
> x 112518.2 685444.5
> y 219903.9 514862.9
> Is projected: NA
> proj4string : [NA]
>
>
>
> second shape file:
>
> Object of class SpatialPolygonsDataFrame
> Coordinates:
>         min      max
> x 112521.4 685441.9
> y 275473.5 570451.2
> Is projected: NA
> proj4string : [NA]
>
>
> Does anyone know the answer to this?
>
>
> Thank you very much for your help in advance!
>
>
> Marion
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From pedrocontebarros at gmail.com  Fri Jun 22 08:56:20 2012
From: pedrocontebarros at gmail.com (PCB)
Date: Thu, 21 Jun 2012 23:56:20 -0700 (PDT)
Subject: [R-sig-Geo] External "Envelope" of a set of points in space - not
	convex hull
Message-ID: <1340348180184-7580290.post@n2.nabble.com>

Dear All,

I have a set of observations on an area, and I would like to define the
"investigated area" as the smallest polygon (preferably smoothed with e.g.
splines fit) that encloses all the points. This is similar to the convex
hull problem, except that my data have "gulfs", i.e. areas that are not
sampled (and should not be), between two "fingers" of areas investigated. I
am sure I have seen something about solving this lately, but after a couple
days searching could not find it (I am sure I am using the wrong
keywords...).

Any help would be appreciated

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/External-Envelope-of-a-set-of-points-in-space-not-convex-hull-tp7580290.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From mdsumner at gmail.com  Fri Jun 22 09:02:48 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 22 Jun 2012 17:02:48 +1000
Subject: [R-sig-Geo] External "Envelope" of a set of points in space -
 not convex hull
In-Reply-To: <1340348180184-7580290.post@n2.nabble.com>
References: <1340348180184-7580290.post@n2.nabble.com>
Message-ID: <CAAcGz993-hPu6ibGS9N7_2FFfZAfQpZHSmwuH+04PqpFQ46xwQ@mail.gmail.com>

Try the alphahull package, which is on CRAN.

I don't believe it will smooth the result for you, but you could take
it from there and use other R functions to do that.

Cheers, Mike.


On Fri, Jun 22, 2012 at 4:56 PM, PCB <pedrocontebarros at gmail.com> wrote:
> Dear All,
>
> I have a set of observations on an area, and I would like to define the
> "investigated area" as the smallest polygon (preferably smoothed with e.g.
> splines fit) that encloses all the points. This is similar to the convex
> hull problem, except that my data have "gulfs", i.e. areas that are not
> sampled (and should not be), between two "fingers" of areas investigated. I
> am sure I have seen something about solving this lately, but after a couple
> days searching could not find it (I am sure I am using the wrong
> keywords...).
>
> Any help would be appreciated
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/External-Envelope-of-a-set-of-points-in-space-not-convex-hull-tp7580290.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Michael Sumner
Hobart, Australia
e-mail: mdsumner at gmail.com


From juliachacon at gmail.com  Fri Jun 22 10:18:05 2012
From: juliachacon at gmail.com (Julia Chacon Labella)
Date: Fri, 22 Jun 2012 10:18:05 +0200
Subject: [R-sig-Geo] K (r)
In-Reply-To: <1340322388.92302.YahooMailNeo@web122404.mail.ne1.yahoo.com>
References: <1340322388.92302.YahooMailNeo@web122404.mail.ne1.yahoo.com>
Message-ID: <CAPsE2jzxfz6MEsMxvHAQn-w3m0OpUJRjZsqt0ei9W6R02qJ-BA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120622/8a2f72ab/attachment.pl>

From marcelino.delacruz at upm.es  Fri Jun 22 10:22:41 2012
From: marcelino.delacruz at upm.es (Marcelino de la Cruz)
Date: Fri, 22 Jun 2012 10:22:41 +0200
Subject: [R-sig-Geo] K (r)
In-Reply-To: <1340322388.92302.YahooMailNeo@web122404.mail.ne1.yahoo.com
 >
References: <1340322388.92302.YahooMailNeo@web122404.mail.ne1.yahoo.com>
Message-ID: <201206220822.q5M8MlOv002357@smtp.upm.es>

Several authors recomend using 0.25 * length of 
the shortest side of the polygon (I mean 
rectangle). For other geometries I don't know but 
I supose that the algorithm in spatstat selects the apropriate range of radii.

Cheers,

Marcelino


At 01:46 22/06/2012, Cleverson Zapelini wrote:
>Content-Type: text/plain
>Content-Disposition: inline
>Content-length: 231
>
>Hi!
>
>
>I am doing analysis of standard of points in a 
>polygon, with Ripley's K function. How to 
>determine the radius (r) maximum for analysis within this polygon?
>
>
>Cleverson Zapelini
>         [[alternative HTML version deleted]]
>
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo

___________________________________________________

Marcelino de la Cruz Rot
Departamento de Biolog?a y Geolog?a
Escuela Superior de Ciencias Experimentales y Tecnolog?a
Universidad Rey Juan Carlos
c/ Tulip?n, s/n.
E-28933 M?stoles (Madrid)
Espa?a
Fax: +34 91 664 7490


From r.turner at auckland.ac.nz  Fri Jun 22 11:36:49 2012
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Fri, 22 Jun 2012 21:36:49 +1200
Subject: [R-sig-Geo] K (r)
In-Reply-To: <201206220822.q5M8MlOv002357@smtp.upm.es>
References: <1340322388.92302.YahooMailNeo@web122404.mail.ne1.yahoo.com>
	<201206220822.q5M8MlOv002357@smtp.upm.es>
Message-ID: <4FE43CB1.7070403@auckland.ac.nz>

On 22/06/12 20:22, Marcelino de la Cruz wrote:
> Several authors recomend using 0.25 * length of the shortest side of 
> the polygon (I mean rectangle). For other geometries I don't know but 
> I supose that the algorithm in spatstat selects the apropriate range 
> of radii.

The default is 0.25 * (length of shortest side of the bounding box of 
the window).   With a slight tweak.
Type:

     rmax.rule

in the R console, to display the code that does the calculation.

Adrian recommends, in the help for Kest(), that the user *not* set "r" 
(the vector of radii)  but rather
go with the default chosen by the software that he wrote.

And anyone who does not follow Adrian's recommendations in respect of 
point pattern analysis
is, IMHO, a damned fool! :-)

     cheers,

         Rolf Turner


From r.turner at auckland.ac.nz  Fri Jun 22 11:42:40 2012
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Fri, 22 Jun 2012 21:42:40 +1200
Subject: [R-sig-Geo] Closest point in R
In-Reply-To: <CAJgfpigoL6+BcDoxe7ks09hpuWsdZMErGj=9Va=+fYPt-xXDHQ@mail.gmail.com>
References: <CAJgfpigoL6+BcDoxe7ks09hpuWsdZMErGj=9Va=+fYPt-xXDHQ@mail.gmail.com>
Message-ID: <4FE43E10.6080400@auckland.ac.nz>


As far as I can see there is nothing off the peg in "spatstat" to do
this, but I think it is not too hard to build a function that will do what
you want using existing tools.  One needs to delve into the code
of existing functions and pick out some relevant bits in order to put
such a function together however.

I will try to build that function for you tomorrow.  Unless Adrian
tells me that there *is* an off the peg procedure (that I have
overlooked).

     cheers,

         Rolf Turner

On 22/06/12 06:15, Ted Rosenbaum wrote:
> Hi,
> I am looking for a way (preferably in spatstat) to obtain the point in a
> polygon (window in my spatstat context) that is closest to a given point
> outside of it (similar to closestpoint in postgis).  Approximations
> (something that is approximately the closest point) are fine in my context
> Thanks,
> Ted
>
> ---------------------------------------------
> Ted Rosenbaum
> Graduate Student
> Department of Economics
> Yale University


From Adrian.Baddeley at csiro.au  Fri Jun 22 11:50:58 2012
From: Adrian.Baddeley at csiro.au (Adrian.Baddeley at csiro.au)
Date: Fri, 22 Jun 2012 17:50:58 +0800
Subject: [R-sig-Geo] Closest point in R
In-Reply-To: <4FE43E10.6080400@auckland.ac.nz>
References: <CAJgfpigoL6+BcDoxe7ks09hpuWsdZMErGj=9Va=+fYPt-xXDHQ@mail.gmail.com>
	<4FE43E10.6080400@auckland.ac.nz>
Message-ID: <57DC18C299094D4299F837570C5DF1C5B0F4030384@EXWA-MBX01.nexus.csiro.au>

In spatstat, for a polygon window P and a point pattern X you can do 

    L <- as.psp(P)
    Z <- project2segment(X, L)
    Y <- Z$Xproj

Then Y[i] is the nearest point to X[i] on the boundary of P.
Other components of Z give you the distance from X[i] to Y[i], etc.

Adrian Baddeley


On 22/06/12 06:15, Ted Rosenbaum wrote:
> Hi,
> I am looking for a way (preferably in spatstat) to obtain the point in a
> polygon (window in my spatstat context) that is closest to a given point
> outside of it (similar to closestpoint in postgis).  Approximations
> (something that is approximately the closest point) are fine in my context
> Thanks,
> Ted
>
> ---------------------------------------------
> Ted Rosenbaum
> Graduate Student
> Department of Economics
> Yale University


From czapelini at yahoo.com.br  Fri Jun 22 11:52:06 2012
From: czapelini at yahoo.com.br (Cleverson Zapelini)
Date: Fri, 22 Jun 2012 02:52:06 -0700
Subject: [R-sig-Geo] K (r)
In-Reply-To: <4FE43CB1.7070403@auckland.ac.nz>
References: <1340322388.92302.YahooMailNeo@web122404.mail.ne1.yahoo.com>
	<201206220822.q5M8MlOv002357@smtp.upm.es>
	<4FE43CB1.7070403@auckland.ac.nz>
Message-ID: <1340358726.25716.YahooMailNeo@web122405.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120622/0e0ca34a/attachment.pl>

From thi_veloso at yahoo.com.br  Fri Jun 22 15:06:06 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Fri, 22 Jun 2012 06:06:06 -0700 (PDT)
Subject: [R-sig-Geo] Merge rasters with different extent
In-Reply-To: <CANtt_hxLYo+HxZmRkGTpq-5vjvKQc6zg2JUbhi5b+StEveyBPg@mail.gmail.com>
References: <1340122858.53614.YahooMailNeo@web161401.mail.bf1.yahoo.com>
	<CANtt_hypsQDgO_s+NQRujXgQH_haBtBczihpF+VB6j4zzJoUnw@mail.gmail.com>
	<1340189569.76894.YahooMailNeo@web161406.mail.bf1.yahoo.com>
	<CANtt_hxLYo+HxZmRkGTpq-5vjvKQc6zg2JUbhi5b+StEveyBPg@mail.gmail.com>
Message-ID: <1340370366.97477.YahooMailNeo@web161405.mail.bf1.yahoo.com>

? Robert,

? Thanks for this discussion. Here in my pc I cannot see both rasters merged. Even after the merge operation, scale of result map range from 0 to 0.2 if I type "merge (r1,r2)" or 0 to 1 if I type "merge (r2,1)" - considering that r1 is the global one.


? What I expected to see, and please correct me if I am wrong, was a final map that looked pretty much like the result of

?"plot (r1)"
?"plot (r2, add=T)"

? Best regards,
? Thiago.

________________________________
From: Robert J. Hijmans <r.hijmans at gmail.com>
To: Thiago Veloso <thi_veloso at yahoo.com.br> 
Cc: R-SIG list <r-sig-geo at r-project.org> 
Sent: Wednesday, June 20, 2012 1:13 PM
Subject: Re: [R-sig-Geo] Merge rasters with different extent


Thiago,?
As far as I can see it works fine. You have not said what you meant with "without sucess".?Perhaps a map of the result does not look good? That would be because the values of the global raster range from 0 to 0.02 whereas the values of the Brazil raster range from 0 to 1. After merging the Brazilian values dominate the legend.?
Robert

On Wed, Jun 20, 2012 at 3:52 AM, Thiago Veloso <thi_veloso at yahoo.com.br> wrote:

? Robert,
>
>?Thanks for the help.?
>
>? Yes, I just checked again. Let me share the files I am working with so everyone can reproduce the problem:?https://www.dropbox.com/s/56ltwigore1n1wv/gflvp.1700.nc?(larger extent, 1021kb) and?https://www.dropbox.com/s/69qmko0kc6muguo/defor_latlon.img?(smaller extent, 40kb).
>
>? Output of session info is below.
>
>? Best regards,
>? Thiago.
>
>
>> sessionInfo() R version 2.15.0 (2012-03-30)
>Platform: x86_64-pc-linux-gnu (64-bit) locale: [1] LC_CTYPE=en_US.UTF-8 ? ? ? LC_NUMERIC=C ? ? ? ? ? ? ? [3] LC_TIME=en_US.UTF-8 ? ? ? ?LC_COLLATE=en_US.UTF-8 ? ? [5] LC_MONETARY=en_US.UTF-8 ? ?LC_MESSAGES=en_US.UTF-8 ? ?[7] LC_PAPER=C ? ? ? ? ? ? ? ? LC_NAME=C ? ? ? ? ? ? ? ? ?[9] LC_ADDRESS=C ? ? ? ? ? ? ? LC_TELEPHONE=C
>[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C ? ? ? ?attached base packages:
>[1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods
>[7] base ? ? ?other attached packages:
>[1] rgdal_0.7-11 ?ncdf_1.6.6 ? ?raster_2.0-04 sp_0.9-99 ? ? loaded via a namespace (and not attached):
>[1] grid_2.15.0 ? ?lattice_0.20-6 tools_2.15.0
>
>
>________________________________
>From: Robert J. Hijmans <r.hijmans at gmail.com>
>To: Thiago Veloso <thi_veloso at yahoo.com.br>
>Cc: R-SIG list <r-sig-geo at r-project.org>
>Sent: Tuesday, June 19, 2012 3:43 PM
>Subject: Re: [R-sig-Geo] Merge rasters with different extent
>
>
>
>Thiago,?
>
>Are you sure? It works well in this example:
>
>library(raster)
>r <- raster(ncol=100, nrow=100)
>r1 <- crop(r, extent(-10, 11, -10, 11))
>r2 <- crop(r, extent(0, 20, 0, 20))
>r3 <- crop(r, extent(9, 30, 9, 30))
>
>r1[] <- 1:ncell(r1)
>r2[] <- 1:ncell(r2)
>r3[] <- 1:ncell(r3)
>
>m1 <- merge(r1, r2, r3, fun=mean)
>m2 <- merge(r3, r2, r1, fun=mean)
>plot(stack(m1, m2))
>
>
>If your case (small rasters) a work-around (that ignores the possibility of NA values in r2) would be
>
>cells <- cellFromXY(r1, ?xyFromCell(r2, 1:ncell(r2)))
>r1[cells] <- values(r2)
>
>Robert
>
>
>On Tue, Jun 19, 2012 at 9:20 AM, Thiago Veloso <thi_veloso at yahoo.com.br> wrote:
>
>?Dear list,
>>
>>?I have two rasters (r1 and r2). r1 has larger extent; r2 is smaller and its extents fall totally within r1. Here are the rasters:
>>
>>> r1
>>
>>class ? ? ? : RasterLayer?
>>dimensions ?: 360, 720, 259200 ?(nrow, ncol, ncell)
>>resolution ?: 0.5, 0.5 ?(x, y)
>>extent ? ? ?: -180, 180, -90, 90 ?(xmin, xmax, ymin, ymax)
>>coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0?
>>values ? ? ?: in memory
>>layer name ?: layer?
>>min value ? : 0?
>>max value ? : 0.055233?
>>
>>> r2
>>
>>class ? ? ? : RasterLayer?
>>dimensions ?: 47, 65, 3055 ?(nrow, ncol, ncell)
>>resolution ?: 0.5, 0.5 ?(x, y)
>>extent ? ? ?: -74.5, -42, -18, 5.5 ?(xmin, xmax, ymin, ymax)
>>coord. ref. : NA?
>>values ? ? ?: in memory
>>layer name ?: layer?
>>min value ? : 0?
>>max value ? : 1?
>>
>>?What I would like to be able to do is merge both rasters, but keeping r2 values when cells overlap. In other words, replace r1 values with r2 values only when cells overlap. Following older discussions, I have tried "merge" command without sucess. Neither "r3 <- merge(r1,r2)" nor "r3 <- merge(r2,r1)" yield what I pursue.?
>>
>>?Any ideas?
>>
>>?Many thanks in advance,
>>
>>?Thiago.
>>
>>
>>_______________________________________________
>>R-sig-Geo mailing list
>>R-sig-Geo at r-project.org
>>https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>??
>??


From samanmonfared1 at gmail.com  Fri Jun 22 15:16:46 2012
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Fri, 22 Jun 2012 17:46:46 +0430
Subject: [R-sig-Geo] calculate SSerror in fit.variogram
Message-ID: <CAOytA4ZHm2Yks-d1LS5SgdkjdRSwTe0JFD8gR_P5oShBGSP1ag@mail.gmail.com>

Hi.
I have used fit.variogram in gstat.
How can I calculate SSerror between the sample variogram and the
fitted variogram model in different estimation method of
fit.method=2-7.

Thanks.

Saman Monfared
Msc Student,
Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167


From edzer.pebesma at uni-muenster.de  Fri Jun 22 15:28:54 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 22 Jun 2012 15:28:54 +0200
Subject: [R-sig-Geo] calculate SSerror in fit.variogram
In-Reply-To: <CAOytA4ZHm2Yks-d1LS5SgdkjdRSwTe0JFD8gR_P5oShBGSP1ag@mail.gmail.com>
References: <CAOytA4ZHm2Yks-d1LS5SgdkjdRSwTe0JFD8gR_P5oShBGSP1ag@mail.gmail.com>
Message-ID: <4FE47316.6080502@uni-muenster.de>

> library(gstat)
Loading required package: sp
Loading required package: spacetime
Loading required package: zoo

Attaching package: ?zoo?

The following object(s) are masked from ?package:base?:

    as.Date, as.Date.numeric

Loading required package: xts
> loadMeuse()
> f = fit.variogram(variogram(zinc~1,meuse), vgm(1, "Sph", 900))
> attributes(f)
$names
[1] "model" "psill" "range" "kappa" "ang1"  "ang2"  "ang3"  "anis1" "anis2"

$row.names
[1] 1

$class
[1] "variogramModel" "data.frame"

$singular
[1] FALSE

$SSErr
[1] 5337300

> attr(f, "SSErr")
[1] 5337300

v = variogram(zinc~1,meuse)

> sum((v$np / (v$dist^2)) * (v$gamma - variogramLine(f, dist_vector =
v$dist)$gamma)^2)
[1] 5337300

so, by default, the weights for computing the weighted sum of squared
differences are dist/(h*h)

On 06/22/2012 03:16 PM, Saman Monfared wrote:
> Hi.
> I have used fit.variogram in gstat.
> How can I calculate SSerror between the sample variogram and the
> fitted variogram model in different estimation method of
> fit.method=2-7.
> 
> Thanks.
> 
> Saman Monfared
> Msc Student,
> Department of Statistics, Shiraz University,
> Shiraz 71454, Iran
> Email: Samanmonfared1 at gmail.com
> 
> Tel: +98 917 5305167
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From sasan9911 at yahoo.com  Fri Jun 22 16:12:19 2012
From: sasan9911 at yahoo.com (Sasan Sasani)
Date: Fri, 22 Jun 2012 07:12:19 -0700 (PDT)
Subject: [R-sig-Geo] 'help'
Message-ID: <1340374339.32026.YahooMailNeo@web114003.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120622/88a71fa3/attachment.pl>

From nevil.amos at gmail.com  Fri Jun 22 17:48:09 2012
From: nevil.amos at gmail.com (Nevil Amos)
Date: Sat, 23 Jun 2012 01:48:09 +1000
Subject: [R-sig-Geo] spatial weights to network?
Message-ID: <7E13D052-2161-44B7-B0FF-7892D8272D60@gmail.com>

Is it possible to derive a network - say x nearest neighbours form a cost distance matrix ( i.e. square matrix of calculated cost distances between points?

the inverse of spdep nb2mat ?

thanks

Nevil Amos

From Roger.Bivand at nhh.no  Fri Jun 22 18:03:32 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 22 Jun 2012 18:03:32 +0200 (CEST)
Subject: [R-sig-Geo] spatial weights to network?
In-Reply-To: <7E13D052-2161-44B7-B0FF-7892D8272D60@gmail.com>
References: <7E13D052-2161-44B7-B0FF-7892D8272D60@gmail.com>
Message-ID: <alpine.LRH.2.02.1206221802240.13521@reclus.nhh.no>

On Fri, 22 Jun 2012, Nevil Amos wrote:

> Is it possible to derive a network - say x nearest neighbours form a 
> cost distance matrix ( i.e. square matrix of calculated cost distances 
> between points?
>
> the inverse of spdep nb2mat ?

?mat2listw maybe?

Roger

>
> thanks
>
> Nevil Amos

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From pep.bioalerts at gmail.com  Fri Jun 22 19:25:31 2012
From: pep.bioalerts at gmail.com (Josep M Serra diaz)
Date: Fri, 22 Jun 2012 19:25:31 +0200
Subject: [R-sig-Geo] reading idrisi .vct files
Message-ID: <CAF8H1dec=kDvxZLCX1Wn79yT8dmpKZWkGrP3VKc95nLbGr3aVw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120622/25c54994/attachment.pl>

From Roger.Bivand at nhh.no  Fri Jun 22 19:44:36 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 22 Jun 2012 19:44:36 +0200 (CEST)
Subject: [R-sig-Geo] reading idrisi .vct files
In-Reply-To: <CAF8H1dec=kDvxZLCX1Wn79yT8dmpKZWkGrP3VKc95nLbGr3aVw@mail.gmail.com>
References: <CAF8H1dec=kDvxZLCX1Wn79yT8dmpKZWkGrP3VKc95nLbGr3aVw@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1206221939060.13521@reclus.nhh.no>

On Fri, 22 Jun 2012, Josep M Serra diaz wrote:

> Dear listers,
>
> I am fighting to get some old Idrisi vectro (.vct)  files to be read in R.
>
> I am kind of an newbie in this so I hope the thread is not too much
> over-repeating. I checked other posts but I could not find the solution.
>
> 1. I updated rgdal but when checkecing  ogrDrivers()  , I see  "Idrisi
> FALSE" . I do not know how to install those dirvers.

This should mean that the driver reads but does not write.

>
> 2. then when checking readOGR I have read that depending on the format
> "dsn" option or "layer" option may be different... how can I know what is
> it for my vct Idrisi files?

Try ogrListLayers(dsn="file.vct") to see if it lists the layers. Otherwise 
you'll have to search for OGR VCT usage tips.

Roger

>
>
> Thank you,
>
>
> JM
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From pep.bioalerts at gmail.com  Fri Jun 22 19:49:20 2012
From: pep.bioalerts at gmail.com (Josep M Serra diaz)
Date: Fri, 22 Jun 2012 19:49:20 +0200
Subject: [R-sig-Geo] reading idrisi .vct files
In-Reply-To: <alpine.LRH.2.02.1206221939060.13521@reclus.nhh.no>
References: <CAF8H1dec=kDvxZLCX1Wn79yT8dmpKZWkGrP3VKc95nLbGr3aVw@mail.gmail.com>
	<alpine.LRH.2.02.1206221939060.13521@reclus.nhh.no>
Message-ID: <CAF8H1dcgFbQVtw_Stn7+E5WJYzMEw2ULWZ=iz7VGFU_OS8GebQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120622/d8ced5bf/attachment.pl>

From r.hijmans at gmail.com  Fri Jun 22 20:25:00 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 22 Jun 2012 11:25:00 -0700
Subject: [R-sig-Geo] spatial weights to network?
In-Reply-To: <alpine.LRH.2.02.1206221802240.13521@reclus.nhh.no>
References: <7E13D052-2161-44B7-B0FF-7892D8272D60@gmail.com>
	<alpine.LRH.2.02.1206221802240.13521@reclus.nhh.no>
Message-ID: <CANtt_hxvK2VOtnmHDmyGumyyNfxvZkQygxKmbAztH9iBz69VpQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120622/6e0946ea/attachment.pl>

From r.hijmans at gmail.com  Fri Jun 22 20:54:47 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 22 Jun 2012 11:54:47 -0700
Subject: [R-sig-Geo] Merge rasters with different extent
In-Reply-To: <1340370366.97477.YahooMailNeo@web161405.mail.bf1.yahoo.com>
References: <1340122858.53614.YahooMailNeo@web161401.mail.bf1.yahoo.com>
	<CANtt_hypsQDgO_s+NQRujXgQH_haBtBczihpF+VB6j4zzJoUnw@mail.gmail.com>
	<1340189569.76894.YahooMailNeo@web161406.mail.bf1.yahoo.com>
	<CANtt_hxLYo+HxZmRkGTpq-5vjvKQc6zg2JUbhi5b+StEveyBPg@mail.gmail.com>
	<1340370366.97477.YahooMailNeo@web161405.mail.bf1.yahoo.com>
Message-ID: <CANtt_hwYZoXzXgUNJTLkBjWwoKQgmw7p4kVHAiHYvALoOH+z_w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120622/2a670105/attachment.pl>

From bxhorn at gmail.com  Fri Jun 22 21:36:54 2012
From: bxhorn at gmail.com (Brad Horn)
Date: Fri, 22 Jun 2012 15:36:54 -0400
Subject: [R-sig-Geo] Rgdal install Mac OS X
Message-ID: <FF199A91-C862-4518-A14B-266C7E895D9D@gmail.com>

I have attempted to install rgdal on OS X, and tried several approaches, but to no avail.  Any help is appreciated.  

Here are the machine and R-version particulars:
- Mac OS X 10.6.8
- R version 2.15.0 (2012-03-30) Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

I installed the Kyngchaos GDAL binaries (GDAL 1.9 Complete [33.6 MiB] Snow Leopard & Lion 2012-6-21) along with the associated Kyngchaos rgdal binary (rgdal_0.7-11.tgz).  Per the readme instructions for each component of GDAL, I then updated and sourced my .bash_profile file as follows:

export PATH=/Library/Frameworks/GDAL.framework/Programs:$PATH
export PATH=/Library/Frameworks/PROJ.framework/Programs:$PATH
export PATH=/Library/Frameworks/SQLite3.framework/Programs:$PATH
export PATH=/Library/Frameworks/UnixImageIO.framework/Programs:$PATH
export PATH=/Library/Frameworks/GEOS.framework/Programs:$PATH

The installation of the rgdal into RStudio appears to have worked, as I have access to all help documentation.  Unfortunately, rgdal does not appear to link properly to associated executables and ultimately fails to load into the workspace, as confirmed below:

library("rgdal")
Error in dyn.load(file, DLLpath = DLLpath, ...) :
unable to load shared object '/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rgdal/libs/x86_64/rgdal.so':
dlopen(/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rgdal/libs/x86_64/rgdal.so, 6): Library not loaded: /Library/Frameworks/UnixImageIO.framework/Versions/D/UnixImageIO
Referenced from: /Library/Frameworks/SQLite3.framework/Versions/3/SQLite3
Reason: image not found
Error: package/namespace load failed for ?rgdal?

Has anyone seen this issue?  Ive searched prior r-sig-geo postings, but no solution appears to work.  Any help is appreciated


From thi_veloso at yahoo.com.br  Sat Jun 23 00:51:29 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Fri, 22 Jun 2012 15:51:29 -0700 (PDT)
Subject: [R-sig-Geo] Merge rasters with different extent
In-Reply-To: <CANtt_hwYZoXzXgUNJTLkBjWwoKQgmw7p4kVHAiHYvALoOH+z_w@mail.gmail.com>
References: <1340122858.53614.YahooMailNeo@web161401.mail.bf1.yahoo.com>
	<CANtt_hypsQDgO_s+NQRujXgQH_haBtBczihpF+VB6j4zzJoUnw@mail.gmail.com>
	<1340189569.76894.YahooMailNeo@web161406.mail.bf1.yahoo.com>
	<CANtt_hxLYo+HxZmRkGTpq-5vjvKQc6zg2JUbhi5b+StEveyBPg@mail.gmail.com>
	<1340370366.97477.YahooMailNeo@web161405.mail.bf1.yahoo.com>
	<CANtt_hwYZoXzXgUNJTLkBjWwoKQgmw7p4kVHAiHYvALoOH+z_w@mail.gmail.com>
Message-ID: <1340405489.72883.YahooMailNeo@web161406.mail.bf1.yahoo.com>

? Robert,

? I am very sorry for this mistake! I could only notice what you talking about when I wrote the raster to a netcdf and visualized it using other software and color scale. You were right: merge has worked and I misinterpreted the result.


? Time to consider wearing glasses or analysing rasters in other way apart from graphically!

? Best wishes,
? Thiago.

________________________________
From: Robert J. Hijmans <r.hijmans at gmail.com>
To: Thiago Veloso <thi_veloso at yahoo.com.br> 
Cc: R-SIG list <r-sig-geo at r-project.org> 
Sent: Friday, June 22, 2012 3:54 PM
Subject: Re: [R-sig-Geo] Merge rasters with different extent




On Fri, Jun 22, 2012 at 6:06 AM, Thiago Veloso <thi_veloso at yahoo.com.br> wrote:

? Robert,
>
>? Thanks for this discussion. Here in my pc I cannot see both rasters merged. Even after the merge operation, scale of result map range from 0 to 0.2 if I type "merge (r1,r2)" or 0 to 1 if I type "merge (r2,1)" - considering that r1 is the global one.
>
>

That is correct, and what you are after is ?

x <- merge (r2, r1)


>? What I expected to see, and please correct me if I am wrong, was a final map that looked pretty much like the result of
>
>?"plot (r1)"
>?"plot (r2, add=T)"
>
>

No, it won't, because the data have very different ranges (0 to 1 vs. 0 to 0.02), ?If you want something that looks like that you can first scale r2 (or r1), e.g.?

x = merge( r2/50 , ?r1)
plot(x)

Whether this makes sense numerically, I cannot know.?

Robert






? Best regards,
>? Thiago.
>
>
>________________________________
>From: Robert J. Hijmans <r.hijmans at gmail.com>
>To: Thiago Veloso <thi_veloso at yahoo.com.br>
>Cc: R-SIG list <r-sig-geo at r-project.org>
>Sent: Wednesday, June 20, 2012 1:13 PM
>
>Subject: Re: [R-sig-Geo] Merge rasters with different extent
>
>
>Thiago,?
>As far as I can see it works fine. You have not said what you meant with "without sucess".?Perhaps a map of the result does not look good? That would be because the values of the global raster range from 0 to 0.02 whereas the values of the Brazil raster range from 0 to 1. After merging the Brazilian values dominate the legend.?
>Robert
>
>On Wed, Jun 20, 2012 at 3:52 AM, Thiago Veloso <thi_veloso at yahoo.com.br> wrote:
>
>? Robert,
>>
>>?Thanks for the help.?
>>
>>? Yes, I just checked again. Let me share the files I am working with so everyone can reproduce the problem:?https://www.dropbox.com/s/56ltwigore1n1wv/gflvp.1700.nc?(larger extent, 1021kb) and?https://www.dropbox.com/s/69qmko0kc6muguo/defor_latlon.img?(smaller extent, 40kb).
>>
>>? Output of session info is below.
>>
>>? Best regards,
>>? Thiago.
>>
>>
>>> sessionInfo() R version 2.15.0 (2012-03-30)
>>Platform: x86_64-pc-linux-gnu (64-bit) locale: [1] LC_CTYPE=en_US.UTF-8 ? ? ? LC_NUMERIC=C ? ? ? ? ? ? ? [3] LC_TIME=en_US.UTF-8 ? ? ? ?LC_COLLATE=en_US.UTF-8 ? ? [5] LC_MONETARY=en_US.UTF-8 ? ?LC_MESSAGES=en_US.UTF-8 ? ?[7] LC_PAPER=C ? ? ? ? ? ? ? ? LC_NAME=C ? ? ? ? ? ? ? ? ?[9] LC_ADDRESS=C ? ? ? ? ? ? ? LC_TELEPHONE=C
>>[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C ? ? ? ?attached base packages:
>>[1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods
>>[7] base ? ? ?other attached packages:
>>[1] rgdal_0.7-11 ?ncdf_1.6.6 ? ?raster_2.0-04 sp_0.9-99 ? ? loaded via a namespace (and not attached):
>>[1] grid_2.15.0 ? ?lattice_0.20-6 tools_2.15.0
>>
>>
>>________________________________
>>From: Robert J. Hijmans <r.hijmans at gmail.com>
>>To: Thiago Veloso <thi_veloso at yahoo.com.br>
>>Cc: R-SIG list <r-sig-geo at r-project.org>
>>Sent: Tuesday, June 19, 2012 3:43 PM
>>Subject: Re: [R-sig-Geo] Merge rasters with different extent
>>
>>
>>
>>Thiago,?
>>
>>Are you sure? It works well in this example:
>>
>>library(raster)
>>r <- raster(ncol=100, nrow=100)
>>r1 <- crop(r, extent(-10, 11, -10, 11))
>>r2 <- crop(r, extent(0, 20, 0, 20))
>>r3 <- crop(r, extent(9, 30, 9, 30))
>>
>>r1[] <- 1:ncell(r1)
>>r2[] <- 1:ncell(r2)
>>r3[] <- 1:ncell(r3)
>>
>>m1 <- merge(r1, r2, r3, fun=mean)
>>m2 <- merge(r3, r2, r1, fun=mean)
>>plot(stack(m1, m2))
>>
>>
>>If your case (small rasters) a work-around (that ignores the possibility of NA values in r2) would be
>>
>>cells <- cellFromXY(r1, ?xyFromCell(r2, 1:ncell(r2)))
>>r1[cells] <- values(r2)
>>
>>Robert
>>
>>
>>On Tue, Jun 19, 2012 at 9:20 AM, Thiago Veloso <thi_veloso at yahoo.com.br> wrote:
>>
>>?Dear list,
>>>
>>>?I have two rasters (r1 and r2). r1 has larger extent; r2 is smaller and its extents fall totally within r1. Here are the rasters:
>>>
>>>> r1
>>>
>>>class ? ? ? : RasterLayer?
>>>dimensions ?: 360, 720, 259200 ?(nrow, ncol, ncell)
>>>resolution ?: 0.5, 0.5 ?(x, y)
>>>extent ? ? ?: -180, 180, -90, 90 ?(xmin, xmax, ymin, ymax)
>>>coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0?
>>>values ? ? ?: in memory
>>>layer name ?: layer?
>>>min value ? : 0?
>>>max value ? : 0.055233?
>>>
>>>> r2
>>>
>>>class ? ? ? : RasterLayer?
>>>dimensions ?: 47, 65, 3055 ?(nrow, ncol, ncell)
>>>resolution ?: 0.5, 0.5 ?(x, y)
>>>extent ? ? ?: -74.5, -42, -18, 5.5 ?(xmin, xmax, ymin, ymax)
>>>coord. ref. : NA?
>>>values ? ? ?: in memory
>>>layer name ?: layer?
>>>min value ? : 0?
>>>max value ? : 1?
>>>
>>>?What I would like to be able to do is merge both rasters, but keeping r2 values when cells overlap. In other words, replace r1 values with r2 values only when cells overlap. Following older discussions, I have tried "merge" command without sucess. Neither "r3 <- merge(r1,r2)" nor "r3 <- merge(r2,r1)" yield what I pursue.?
>>>
>>>?Any ideas?
>>>
>>>?Many thanks in advance,
>>>
>>>?Thiago.
>>>
>>>
>>>_______________________________________________
>>>R-sig-Geo mailing list
>>>R-sig-Geo at r-project.org
>>>https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>??
>>??
>?


From spareeth at gmail.com  Sat Jun 23 06:02:54 2012
From: spareeth at gmail.com (sajid pareeth)
Date: Sat, 23 Jun 2012 09:32:54 +0530
Subject: [R-sig-Geo] Reading modis hdf files
Message-ID: <CAO7vHBG1iroCQcc4XxdF5O7=zuYR+2GW-L80U-BMYOCO-9Q6CQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120623/a33d4ddd/attachment.pl>

From jmbarriosg at gmail.com  Sat Jun 23 06:37:25 2012
From: jmbarriosg at gmail.com (=?ISO-8859-1?Q?Jos=E9_Miguel_Barrios?=)
Date: Sat, 23 Jun 2012 06:37:25 +0200
Subject: [R-sig-Geo] Reading modis hdf files
In-Reply-To: <CAO7vHBG1iroCQcc4XxdF5O7=zuYR+2GW-L80U-BMYOCO-9Q6CQ@mail.gmail.com>
References: <CAO7vHBG1iroCQcc4XxdF5O7=zuYR+2GW-L80U-BMYOCO-9Q6CQ@mail.gmail.com>
Message-ID: <CAKAdxrVjT9zgttFZMrHvn2wE0YN0fe2nwa6NojMy2WuphxcXAg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120623/289fbefd/attachment.pl>

From sasan9911 at yahoo.com  Sat Jun 23 13:34:44 2012
From: sasan9911 at yahoo.com (Sasan Sasani)
Date: Sat, 23 Jun 2012 04:34:44 -0700 (PDT)
Subject: [R-sig-Geo] Fw: Help for cokriging
In-Reply-To: <1340217379.46512.YahooMailNeo@web114005.mail.gq1.yahoo.com>
References: <1340217379.46512.YahooMailNeo@web114005.mail.gq1.yahoo.com>
Message-ID: <1340451284.48035.YahooMailNeo@web114004.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120623/5ede62ad/attachment.pl>

From nevil.amos at gmail.com  Sat Jun 23 13:36:18 2012
From: nevil.amos at gmail.com (Nevil Amos)
Date: Sat, 23 Jun 2012 21:36:18 +1000
Subject: [R-sig-Geo] spatial weights to network?
In-Reply-To: <CANtt_hxvK2VOtnmHDmyGumyyNfxvZkQygxKmbAztH9iBz69VpQ@mail.gmail.com>
References: <7E13D052-2161-44B7-B0FF-7892D8272D60@gmail.com>
	<alpine.LRH.2.02.1206221802240.13521@reclus.nhh.no>
	<CANtt_hxvK2VOtnmHDmyGumyyNfxvZkQygxKmbAztH9iBz69VpQ@mail.gmail.com>
Message-ID: <5651D67F-66C8-4E2A-9BB3-B6635282B196@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120623/966fbe28/attachment.pl>

From senator at ecotoxicology.de  Sat Jun 23 14:20:45 2012
From: senator at ecotoxicology.de (=?iso-8859-1?Q?Ralf_Sch=E4fer?=)
Date: Sat, 23 Jun 2012 14:20:45 +0200
Subject: [R-sig-Geo] Rgdal on Mac OSx
Message-ID: <AF5BA504-66C2-4BF9-BF74-4DB0CBA6C4AA@ecotoxicology.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120623/4166230d/attachment.pl>

From tom.gottfried at o2mail.de  Sat Jun 23 14:31:44 2012
From: tom.gottfried at o2mail.de (Tom Gottfried)
Date: Sat, 23 Jun 2012 14:31:44 +0200
Subject: [R-sig-Geo] Fw: Help for cokriging
In-Reply-To: <1340451284.48035.YahooMailNeo@web114004.mail.gq1.yahoo.com>
References: <1340217379.46512.YahooMailNeo@web114005.mail.gq1.yahoo.com>
	<1340451284.48035.YahooMailNeo@web114004.mail.gq1.yahoo.com>
Message-ID: <4FE5B730.4070502@o2mail.de>

Sasan,

Am 23.06.2012 13:34, schrieb Sasan Sasani:
>
>
>
> Dear All.
> I am very new in programing. I try to perform a cokriging in gstat.
> I have four variable and coordinates of each variables are differ(non-Collocated model).
> Each variable and its coordinates are saved in d1-d4 text file.
> My program for fitting cross-variogram is:
>
> m<-vgm(1954,"Gau",80017,225)
> g<- gstat(NULL, id = "k", form =k ~ 1,data=d1)
> g<- gstat(g, id = "hgrad", form =hgrad~ 1,data=d2)
> g<- gstat(g, id = "res", form =res~ 1,data=d3)
> g<- gstat(g, id = "wtab", form =wtab~ 1,data=d4)
> vm<- variogram(g)
> vm.fit<- fit.lmc(vm, g, model=m,fit.ranges =F, fit.lmc =F)

setting fit.lmc=TRUE should avoid the below error message telling you 
that you don't have a legal model (see ?fit.lmc).

> plot(vm, vm.fit,main="Empirical and Fitted Cross-Variogram ",col="black",pch=20)
>
> I have three problem:
>
> 1- How
>   can I make a grid with shapefile(like meuse.grid). I want my results plot in my map.
> My program for create a grid is:
> gg<-spsample(shapefile,n=1000,type="nonaligned",cellsize=200)
> plot(gg)
> coordinates(gg)<-~x+y
> gridded(gg)<- TRUE
> grd = as(gg, "SpatialPixels")
> image(grd)

To me it seems too hard to guess what the object shapefile is. You 
should provide a reproducible example.

> 2-How can I perform cokriging
> When I crate a grid with below program:
> x.range<- as.integer(range(d1 at coords[,1]))
> y.range<- as.integer(range(d1 at coords[,2]))
> plot(x.range,y.range)
> grd<- expand.grid(x=seq(from=x.range[1], to=x.range[2],
> by=500), y=seq(from=y.range[1], to=y.range[2], by=500) )
> coordinates(grd)<- ~ x+y
> gridded(grd)<- TRUE
> The cokriging run by Inverse distance but I try to perform ordinary cokriging.

You do not show how you tried cokriging here. But most probably you did 
not provide a variogram model.

> 3-When I use below program for ceate grid and perform predict
>
> gg<-spsample(shapefile,n=1000,type="nonaligned",cellsize=200)
> plot(gg)
> coordinates(gg)<-~x+y
> gridded(gg)<- TRUE
> grd = as(gg, "SpatialPixels")
> image(grd)
> cok.maps<- predict(vm.fit, meuse.grid)
> The Erorr is:
> Error in predict.gstat(vm.fit, grd) :
>    gstat: value not allowed for: variograms do not satisfy a legal model

See above.

> What do I do?

Trying to construct reproducible examples, e.g. with meuse data, often 
helps in spotting the errors oneself.

HTH,
Tom

> 	[[alternative HTML version deleted]]
>
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Sat Jun 23 14:36:43 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 23 Jun 2012 14:36:43 +0200 (CEST)
Subject: [R-sig-Geo] Rgdal on Mac OSx
In-Reply-To: <AF5BA504-66C2-4BF9-BF74-4DB0CBA6C4AA@ecotoxicology.de>
References: <AF5BA504-66C2-4BF9-BF74-4DB0CBA6C4AA@ecotoxicology.de>
Message-ID: <alpine.LRH.2.02.1206231427360.4887@reclus.nhh.no>

On Sat, 23 Jun 2012, Ralf Sch?fer wrote:

> Dear Brad,
> have you tried to install rgdal from CRAN extras?
>
> setRepositories(ind=1:2)
> install.packages("rgdal")

Or even, thanks to Simon Urbanek, from CRAN or your preferred CRAN mirror 
(since early this morning CEST)? Simon has very generously provided 
facilities for building within CRAN, so that we hope that we will be able 
to retire the CRAN Extras binaries once we are sure that things function 
as they should.

For OSX users needing drivers not provided in the CRAN build, the option 
of using the Kyngchaos frameworks remains; the CRAN binary is statically 
linked and self-contained, but has effectively only a similar set of 
drivers to the CRAN Windows binary package.

Roger

>
> Best regards
> Ralf
>
>
>
>> Message: 12
>> Date: Fri, 22 Jun 2012 15:36:54 -0400
>> From: Brad Horn <bxhorn at gmail.com>
>> To: r-sig-geo at r-project.org
>> Subject: [R-sig-Geo] Rgdal install Mac OS X
>> Message-ID: <FF199A91-C862-4518-A14B-266C7E895D9D at gmail.com>
>> Content-Type: text/plain; charset=windows-1252
>>
>> I have attempted to install rgdal on OS X, and tried several approaches, but to no avail.  Any help is appreciated.
>>
>> Here are the machine and R-version particulars:
>> - Mac OS X 10.6.8
>> - R version 2.15.0 (2012-03-30) Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>
>> I installed the Kyngchaos GDAL binaries (GDAL 1.9 Complete [33.6 MiB] Snow Leopard & Lion 2012-6-21) along with the associated Kyngchaos rgdal binary (rgdal_0.7-11.tgz).  Per the readme instructions for each component of GDAL, I then updated and sourced my .bash_profile file as follows:
>>
>> export PATH=/Library/Frameworks/GDAL.framework/Programs:$PATH
>> export PATH=/Library/Frameworks/PROJ.framework/Programs:$PATH
>> export PATH=/Library/Frameworks/SQLite3.framework/Programs:$PATH
>> export PATH=/Library/Frameworks/UnixImageIO.framework/Programs:$PATH
>> export PATH=/Library/Frameworks/GEOS.framework/Programs:$PATH
>>
>> The installation of the rgdal into RStudio appears to have worked, as I have access to all help documentation.  Unfortunately, rgdal does not appear to link properly to associated executables and ultimately fails to load into the workspace, as confirmed below:
>>
>> library("rgdal")
>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>> unable to load shared object '/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rgdal/libs/x86_64/rgdal.so':
>> dlopen(/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rgdal/libs/x86_64/rgdal.so, 6): Library not loaded: /Library/Frameworks/UnixImageIO.framework/Versions/D/UnixImageIO
>> Referenced from: /Library/Frameworks/SQLite3.framework/Versions/3/SQLite3
>> Reason: image not found
>> Error: package/namespace load failed for ?rgdal?
>>
>> Has anyone seen this issue?  Ive searched prior r-sig-geo postings, but no solution appears to work.  Any help is appreciated
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From bxhorn at gmail.com  Sat Jun 23 15:10:10 2012
From: bxhorn at gmail.com (Brad Horn)
Date: Sat, 23 Jun 2012 09:10:10 -0400
Subject: [R-sig-Geo] Rgdal on Mac OSx
In-Reply-To: <AF5BA504-66C2-4BF9-BF74-4DB0CBA6C4AA@ecotoxicology.de>
References: <AF5BA504-66C2-4BF9-BF74-4DB0CBA6C4AA@ecotoxicology.de>
Message-ID: <AE726CA1-9929-4D4A-9957-088EAB20E042@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120623/92ee4175/attachment.pl>

From pedrocontebarros at gmail.com  Sat Jun 23 20:20:04 2012
From: pedrocontebarros at gmail.com (PCB)
Date: Sat, 23 Jun 2012 11:20:04 -0700 (PDT)
Subject: [R-sig-Geo] spTransform changes the bounding box
Message-ID: <1340475604886-7580319.post@n2.nabble.com>

Dear All,

I have been trying to use spTransform to convert some lon-lat data
(SpatialPointsDataFrame) onto Equal Area projection.

However, it seems that spTransform changes the bounding box of the data to
contain exclusively the data points, and this crashes my code.

I have been looking around, but could not find out what I am doing wrong.
Is there a way to tell spTransform not to change the bounding box?

Some reproducible example:
bbox1 <- matrix(c(10, 20, -25, -3), , ncol=2, byrow = T)
dimnames(bbox1) <- list(c("lon", "lat"), c("min", "max"))
CRSWG84 <- CRS(" +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84
+towgs84=0,0,0")

#Two points inside the bounding box
pts1 <- SpatialPoints(coords = matrix(c(12, 15, -20, - 10), nrow=2, byrow=F)
		, bbox=bbox1, proj4string = CRSWG84)
#Check the bounding box
bbox(pts1)

#I get
#	min max
#lon  10  20
#lat -25  -3

##Project into Lambert Azimuthal Equal Area
CRSEqA <- CRS(" +proj=laea +ellps=WGS84")
pts1Laea <- spTransform(pts1, CRSEqA)

#Reproject back
pts1LonLat <- spTransform(pts1Laea, CRSWG84)
#Check the bounding box
bbox(pts1LonLat)

#I get
#	 min max
#lon  12  15
#lat -20 -10


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/spTransform-changes-the-bounding-box-tp7580319.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From reeder4 at illinois.edu  Sat Jun 23 21:51:18 2012
From: reeder4 at illinois.edu (Reeder, Bryce Wesley)
Date: Sat, 23 Jun 2012 14:51:18 -0500
Subject: [R-sig-Geo] Geographic Profiling
Message-ID: <CAN8mTrbq+4oDPeiOWuYjRTrKiCR0nyN0WfehXm7A=JZ-n1hJFg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120623/92b57978/attachment.pl>

From alobolistas at gmail.com  Sun Jun 24 08:02:24 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Sun, 24 Jun 2012 08:02:24 +0200
Subject: [R-sig-Geo] writeOGR() to shapefile and dates/times classes
Message-ID: <CAG4NReJ54zGrMiS6Yx218s=A0rGRDXB9_aT3j1fuWZVfFpALOQ@mail.gmail.com>

writeOGR() issues an error if the Spatial Points/Polygon Dataframe
has any variables of classes dates or times. While I understand that
this is rather a problem of using a bad format (shapefile) that does not accept
these kind of variables, I suggest
the developer could consider that the necessary conversion to character
were done automatically by writeOGR() and just issue a warning message
instead of an error.

Thanks!

Agus


From Roger.Bivand at nhh.no  Sun Jun 24 14:46:28 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 24 Jun 2012 14:46:28 +0200 (CEST)
Subject: [R-sig-Geo] writeOGR() to shapefile and dates/times classes
In-Reply-To: <CAG4NReJ54zGrMiS6Yx218s=A0rGRDXB9_aT3j1fuWZVfFpALOQ@mail.gmail.com>
References: <CAG4NReJ54zGrMiS6Yx218s=A0rGRDXB9_aT3j1fuWZVfFpALOQ@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1206241441080.11285@reclus.nhh.no>

On Sun, 24 Jun 2012, Agustin Lobo wrote:

> writeOGR() issues an error if the Spatial Points/Polygon Dataframe
> has any variables of classes dates or times. While I understand that
> this is rather a problem of using a bad format (shapefile) that does not accept
> these kind of variables, I suggest
> the developer could consider that the necessary conversion to character
> were done automatically by writeOGR() and just issue a warning message
> instead of an error.

Please provide a reproducible example, and sessionInfo() output.

The function already converts the standard date and time classes POSIXct, 
POSIXlt, Date and POSIXt to character. If the user chooses a non-base 
date-time representation, arguably the user should then convert to a base 
class first, otherwise rgdal would depend on zoo, xts, lubridate or 
whatever.

Roger

>
> Thanks!
>
> Agus
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Sun Jun 24 15:03:28 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 24 Jun 2012 15:03:28 +0200 (CEST)
Subject: [R-sig-Geo] spTransform changes the bounding box
In-Reply-To: <1340475604886-7580319.post@n2.nabble.com>
References: <1340475604886-7580319.post@n2.nabble.com>
Message-ID: <alpine.LRH.2.02.1206241457560.11285@reclus.nhh.no>

On Sat, 23 Jun 2012, PCB wrote:

> Dear All,
>
> I have been trying to use spTransform to convert some lon-lat data
> (SpatialPointsDataFrame) onto Equal Area projection.
>
> However, it seems that spTransform changes the bounding box of the data to
> contain exclusively the data points, and this crashes my code.
>
> I have been looking around, but could not find out what I am doing wrong.
> Is there a way to tell spTransform not to change the bounding box?
>
> Some reproducible example:
> bbox1 <- matrix(c(10, 20, -25, -3), , ncol=2, byrow = T)
> dimnames(bbox1) <- list(c("lon", "lat"), c("min", "max"))
> CRSWG84 <- CRS(" +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84
> +towgs84=0,0,0")
>
> #Two points inside the bounding box
> pts1 <- SpatialPoints(coords = matrix(c(12, 15, -20, - 10), nrow=2, byrow=F)
> 		, bbox=bbox1, proj4string = CRSWG84)
> #Check the bounding box
> bbox(pts1)
>
> #I get
> #	min max
> #lon  10  20
> #lat -25  -3

This should arguably never have worked; expect changes in sp to prevent 
users from creating objects with bounding boxes that are not the strict 
envelopes of their geometries (grid bounding boxes respect the geometry 
representation of the full cell size anchored at the cell centre). When a 
Spatial* object is modified using sp and similar methods and functions, 
such as spTransform(), the bbox slot is updated to match, and by defintion 
is the strict envelope (enclosing rectangle) of the geometries.

I assume that you are using bbox because of its effects on the plot() 
method for Spatial objects - use the xlim= and ylim= arguments instead.

Roger

>
> ##Project into Lambert Azimuthal Equal Area
> CRSEqA <- CRS(" +proj=laea +ellps=WGS84")
> pts1Laea <- spTransform(pts1, CRSEqA)
>
> #Reproject back
> pts1LonLat <- spTransform(pts1Laea, CRSWG84)
> #Check the bounding box
> bbox(pts1LonLat)
>
> #I get
> #	 min max
> #lon  12  15
> #lat -20 -10
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/spTransform-changes-the-bounding-box-tp7580319.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From riabovvv at gmail.com  Sun Jun 24 22:15:55 2012
From: riabovvv at gmail.com (Yury Ryabov)
Date: Mon, 25 Jun 2012 00:15:55 +0400
Subject: [R-sig-Geo] spatstat: rhohat and classified raster
Message-ID: <CADEJ7oOWYw6ARcLGC4KrhJriFyrTVn_e09-L-R4w_QiVVHKBNA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120625/9802e02b/attachment.pl>

From alobolistas at gmail.com  Sun Jun 24 22:33:30 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Sun, 24 Jun 2012 22:33:30 +0200
Subject: [R-sig-Geo] writeOGR() to shapefile and dates/times classes
In-Reply-To: <alpine.LRH.2.02.1206241441080.11285@reclus.nhh.no>
References: <CAG4NReJ54zGrMiS6Yx218s=A0rGRDXB9_aT3j1fuWZVfFpALOQ@mail.gmail.com>
	<alpine.LRH.2.02.1206241441080.11285@reclus.nhh.no>
Message-ID: <CAG4NReL4M=EK84SBBp127Jp=1At4gmPcgTzv0f_wQ=06f3uM3g@mail.gmail.com>

Roger,

Roger,
What you say makes a lot of sense, I make the objects conform to the
accepted classes,
although perhaps you could include chron as well, which is one of the
3 recommended by
Gabor
http://cran.r-project.org/doc/Rnews/Rnews_2004-1.pdf

I've put the rda here:
http://dl.dropbox.com/u/3180464/Bert20120621footp.rda

The classes are:
> class( Bert20120621footp at data$DateMCA)
[1] "Date"
> class( Bert20120621footp at data$TimeMCA)
[1] "times"
> class( Bert20120621footp at data$DateGPS)
[1] "Date"
> class( Bert20120621footp at data$TimeGPS)
[1] "times"
>

What I  do to circumvent the problem:
a <- Bert20120621footp
a at data$DateMCA <- as.character(a at data$DateMCA)
a at data$TimeMCA <- as.character(a at data$TimeMCA)
a at data$DateGPS <- as.character(a at data$DateGPS)
a at data$TimeGPS <- as.character(a at data$TimeGPS)
writeOGR(a,dsn="Bert20120621footp",layer="Bert20120621footp",driver="ESRI
Shapefile",check_exists=TRUE,overwrite_layer=TRUE)
rm(a)

Thanks,
Agus

> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: i686-pc-linux-gnu (32-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
LC_TIME=en_US.UTF-8
 [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8
LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=C                 LC_NAME=C
LC_ADDRESS=C
[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8
LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] raster_1.9-92 sp_0.9-99

loaded via a namespace (and not attached):
[1] grid_2.15.0     lattice_0.19-30 tools_2.15.0




2012/6/24 Roger Bivand <Roger.Bivand at nhh.no>:
> On Sun, 24 Jun 2012, Agustin Lobo wrote:
>
>> writeOGR() issues an error if the Spatial Points/Polygon Dataframe
>> has any variables of classes dates or times. While I understand that
>> this is rather a problem of using a bad format (shapefile) that does not
>> accept
>> these kind of variables, I suggest
>> the developer could consider that the necessary conversion to character
>> were done automatically by writeOGR() and just issue a warning message
>> instead of an error.
>
>
> Please provide a reproducible example, and sessionInfo() output.
>
> The function already converts the standard date and time classes POSIXct,
> POSIXlt, Date and POSIXt to character. If the user chooses a non-base
> date-time representation, arguably the user should then convert to a base
> class first, otherwise rgdal would depend on zoo, xts, lubridate or
> whatever.
>
> Roger
>
>>
>> Thanks!
>>
>> Agus
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From r.turner at auckland.ac.nz  Mon Jun 25 02:09:27 2012
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Mon, 25 Jun 2012 12:09:27 +1200
Subject: [R-sig-Geo] spatstat: rhohat and classified raster
In-Reply-To: <CADEJ7oOWYw6ARcLGC4KrhJriFyrTVn_e09-L-R4w_QiVVHKBNA@mail.gmail.com>
References: <CADEJ7oOWYw6ARcLGC4KrhJriFyrTVn_e09-L-R4w_QiVVHKBNA@mail.gmail.com>
Message-ID: <4FE7AC37.7030503@auckland.ac.nz>


If I understand your question correctly, it would appear that you are trying
to apply rhohat() in an inappropriate context.  Your covariate seems to have
discrete values; rhohat() is applicable only to continuous covariates.  
Moreover
the theory on which rhohat() is based requires that the spatial cumulative
distribution function of the covariate be *differentiable*.  A (fairly 
minimal?)
sufficient condition for this is that the covariate be differentiable 
with non-zero
gradient.

See:

     "Nonparametric estimation of the dependence of a spatial point process
      on spatial covariates" by  Adrian Baddeley, Ya-Mei Chang, Yong 
Song and
      Rolf Turner, in Statistics and its Interface, vol. 5, no. 2, 2012, 
pp. 221-236.

     cheers,

         Rolf Turner

On 25/06/12 08:15, Yury Ryabov wrote:
> Hi!
>
> I have an issue with interpretation of the results of "rhohat" function
> (spatstat package). I use a classified raster as a covariate to my point
> process. A raster is a land cover image with 300 m resolution. There are
> several classes with values like 10, 20, 50, 100 etc. - all are multiple of
> 10.
>
> The result of rhohat (http://image.bayimg.com/fapcmaadf.jpg) demonstrates
> two peaks at values 135 and 165. Despite the fact that all raster values
> are multiple of 10 and so there are no such values as 135 and 165, there
> are also no such values as 130, 140, 160 or 170 (see histogram:
> http://image.bayimg.com/fapcpaadf.jpg).
>
> So the question is what did I get and why? And is it correct to use a
> classified raster as a covariate in "rhohat"?
>
> Here is the code (P is a ppp):
>
>> gl <- readAsciiGrid("/some_path/land_cover.asc", as.image=TRUE,
>>       proj4string= CRS("+proj=tmerc +lat_0=0 +lon_0=33 +k=1 +x_0=6500000
>> +y_0=0 +ellps=krass
>                              +towgs84=23.92,-141.27,-80.9,-0,0.35,0.82,-0.12
>> +units=m +no_defs"))
> glim <- as.im(gl)
>> plot(rhohat(P, glim, covname="LandCover"),
>>   xlab= "Global Land Cover",
>>   legendpos = "topleft",
>>   legendargs=list(bg="transparent"),
>>   main = NULL)
>
> Best regards,
> Yury Ryabov
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Adrian.Baddeley at csiro.au  Mon Jun 25 03:00:03 2012
From: Adrian.Baddeley at csiro.au (Adrian.Baddeley at csiro.au)
Date: Mon, 25 Jun 2012 09:00:03 +0800
Subject: [R-sig-Geo] spatstat: rhohat and classified raster
In-Reply-To: <4FE7AC37.7030503@auckland.ac.nz>
References: <CADEJ7oOWYw6ARcLGC4KrhJriFyrTVn_e09-L-R4w_QiVVHKBNA@mail.gmail.com>,
	<4FE7AC37.7030503@auckland.ac.nz>
Message-ID: <57DC18C299094D4299F837570C5DF1C5B0F40409D5@EXWA-MBX01.nexus.csiro.au>

Rolf is correct: rhohat does not apply to categorical or discrete-valued covariates.

Use quadratcount(X, tess=covariate) for a discrete covariate

Prof Adrian Baddeley FAA
CSIRO Mathematics, Informatics & Statistics
Leeuwin Centre, 65 Brockway Rd, Floreat WA 6014, Australia
tel +61 8 9333 6177 skype adrian.baddeley
________________________________________
From: Rolf Turner [r.turner at auckland.ac.nz]
Sent: Monday, 25 June 2012 8:09 AM
To: Yury Ryabov
Cc: r-sig-geo at r-project.org; Baddeley, Adrian (CMIS, Floreat)
Subject: Re: [R-sig-Geo] spatstat: rhohat and classified raster

If I understand your question correctly, it would appear that you are trying
to apply rhohat() in an inappropriate context.  Your covariate seems to have
discrete values; rhohat() is applicable only to continuous covariates.
Moreover
the theory on which rhohat() is based requires that the spatial cumulative
distribution function of the covariate be *differentiable*.  A (fairly
minimal?)
sufficient condition for this is that the covariate be differentiable
with non-zero
gradient.

See:

     "Nonparametric estimation of the dependence of a spatial point process
      on spatial covariates" by  Adrian Baddeley, Ya-Mei Chang, Yong
Song and
      Rolf Turner, in Statistics and its Interface, vol. 5, no. 2, 2012,
pp. 221-236.

     cheers,

         Rolf Turner

On 25/06/12 08:15, Yury Ryabov wrote:
> Hi!
>
> I have an issue with interpretation of the results of "rhohat" function
> (spatstat package). I use a classified raster as a covariate to my point
> process. A raster is a land cover image with 300 m resolution. There are
> several classes with values like 10, 20, 50, 100 etc. - all are multiple of
> 10.
>
> The result of rhohat (http://image.bayimg.com/fapcmaadf.jpg) demonstrates
> two peaks at values 135 and 165. Despite the fact that all raster values
> are multiple of 10 and so there are no such values as 135 and 165, there
> are also no such values as 130, 140, 160 or 170 (see histogram:
> http://image.bayimg.com/fapcpaadf.jpg).
>
> So the question is what did I get and why? And is it correct to use a
> classified raster as a covariate in "rhohat"?
>
> Here is the code (P is a ppp):
>
>> gl <- readAsciiGrid("/some_path/land_cover.asc", as.image=TRUE,
>>       proj4string= CRS("+proj=tmerc +lat_0=0 +lon_0=33 +k=1 +x_0=6500000
>> +y_0=0 +ellps=krass
>                              +towgs84=23.92,-141.27,-80.9,-0,0.35,0.82,-0.12
>> +units=m +no_defs"))
> glim <- as.im(gl)
>> plot(rhohat(P, glim, covname="LandCover"),
>>   xlab= "Global Land Cover",
>>   legendpos = "topleft",
>>   legendargs=list(bg="transparent"),
>>   main = NULL)
>
> Best regards,
> Yury Ryabov
>
>       [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Mon Jun 25 09:35:36 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 25 Jun 2012 09:35:36 +0200 (CEST)
Subject: [R-sig-Geo] writeOGR() to shapefile and dates/times classes
In-Reply-To: <CAG4NReL4M=EK84SBBp127Jp=1At4gmPcgTzv0f_wQ=06f3uM3g@mail.gmail.com>
References: <CAG4NReJ54zGrMiS6Yx218s=A0rGRDXB9_aT3j1fuWZVfFpALOQ@mail.gmail.com>
	<alpine.LRH.2.02.1206241441080.11285@reclus.nhh.no>
	<CAG4NReL4M=EK84SBBp127Jp=1At4gmPcgTzv0f_wQ=06f3uM3g@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1206250912110.14303@reclus.nhh.no>

On Sun, 24 Jun 2012, Agustin Lobo wrote:

> Roger,
>
> Roger,
> What you say makes a lot of sense, I make the objects conform to the
> accepted classes,
> although perhaps you could include chron as well, which is one of the
> 3 recommended by
> Gabor
> http://cran.r-project.org/doc/Rnews/Rnews_2004-1.pdf

Sorry, only base data-time classes can be considered, because otherwise 
the package would become dependent on chron. The work-around looks OK.

Roger

>
> I've put the rda here:
> http://dl.dropbox.com/u/3180464/Bert20120621footp.rda
>
> The classes are:
>> class( Bert20120621footp at data$DateMCA)
> [1] "Date"
>> class( Bert20120621footp at data$TimeMCA)
> [1] "times"
>> class( Bert20120621footp at data$DateGPS)
> [1] "Date"
>> class( Bert20120621footp at data$TimeGPS)
> [1] "times"
>>
>
> What I  do to circumvent the problem:
> a <- Bert20120621footp
> a at data$DateMCA <- as.character(a at data$DateMCA)
> a at data$TimeMCA <- as.character(a at data$TimeMCA)
> a at data$DateGPS <- as.character(a at data$DateGPS)
> a at data$TimeGPS <- as.character(a at data$TimeGPS)
> writeOGR(a,dsn="Bert20120621footp",layer="Bert20120621footp",driver="ESRI
> Shapefile",check_exists=TRUE,overwrite_layer=TRUE)
> rm(a)
>
> Thanks,
> Agus
>
>> sessionInfo()
> R version 2.15.0 (2012-03-30)
> Platform: i686-pc-linux-gnu (32-bit)
>
> locale:
> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> LC_TIME=en_US.UTF-8
> [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8
> LC_MESSAGES=en_US.UTF-8
> [7] LC_PAPER=C                 LC_NAME=C
> LC_ADDRESS=C
> [10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8
> LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] raster_1.9-92 sp_0.9-99
>
> loaded via a namespace (and not attached):
> [1] grid_2.15.0     lattice_0.19-30 tools_2.15.0
>
>
>
>
> 2012/6/24 Roger Bivand <Roger.Bivand at nhh.no>:
>> On Sun, 24 Jun 2012, Agustin Lobo wrote:
>>
>>> writeOGR() issues an error if the Spatial Points/Polygon Dataframe
>>> has any variables of classes dates or times. While I understand that
>>> this is rather a problem of using a bad format (shapefile) that does not
>>> accept
>>> these kind of variables, I suggest
>>> the developer could consider that the necessary conversion to character
>>> were done automatically by writeOGR() and just issue a warning message
>>> instead of an error.
>>
>>
>> Please provide a reproducible example, and sessionInfo() output.
>>
>> The function already converts the standard date and time classes POSIXct,
>> POSIXlt, Date and POSIXt to character. If the user chooses a non-base
>> date-time representation, arguably the user should then convert to a base
>> class first, otherwise rgdal would depend on zoo, xts, lubridate or
>> whatever.
>>
>> Roger
>>
>>>
>>> Thanks!
>>>
>>> Agus
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, NHH Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From JRadinger at gmx.at  Mon Jun 25 10:30:58 2012
From: JRadinger at gmx.at (Johannes Radinger)
Date: Mon, 25 Jun 2012 10:30:58 +0200
Subject: [R-sig-Geo] Get map of non-NA cells of a stack
Message-ID: <20120625083058.232840@gmx.net>

Hi,

I have several stacks with different numbers of raster maps. All the stacked rasters have some NA-cells but sometimes in different locations. I'd like to create a raster map of a single stack which indicates cells that are populated in all rasters of that stack (all non-NA cells).

Is there a special function within the raster package?

Best regards
Johannes
-- 

Jetzt informieren: http://mobile.1und1.de/?ac=OM.PW.PW003K20328T7073a


From riabovvv at gmail.com  Mon Jun 25 11:41:50 2012
From: riabovvv at gmail.com (Yury Ryabov)
Date: Mon, 25 Jun 2012 13:41:50 +0400
Subject: [R-sig-Geo] spatstat: rhohat and classified raster
In-Reply-To: <57DC18C299094D4299F837570C5DF1C5B0F40409D5@EXWA-MBX01.nexus.csiro.au>
References: <CADEJ7oOWYw6ARcLGC4KrhJriFyrTVn_e09-L-R4w_QiVVHKBNA@mail.gmail.com>
	<4FE7AC37.7030503@auckland.ac.nz>
	<57DC18C299094D4299F837570C5DF1C5B0F40409D5@EXWA-MBX01.nexus.csiro.au>
Message-ID: <CADEJ7oPZRyxo_+Tu_OWUGgXOje+YyzbfdqVvWFG0nfgE-H044A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120625/ebe77dc3/attachment.pl>

From samanmonfared1 at gmail.com  Mon Jun 25 14:17:34 2012
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Mon, 25 Jun 2012 16:47:34 +0430
Subject: [R-sig-Geo] help for fit.vaiogram.gls
Message-ID: <CAOytA4YAoFdy5=HbPnq0EGPwrBv13C7-K9RYHT_f2BRn+=mxkg@mail.gmail.com>

Hi.
Itry to estmate prameters of vaigrm by  fit.vaiogram.gls:

rm(list=ls())
library(gstat)
memory.limit(4000)
data(meuse)
coordinates(meuse)<-~x+y
v.fit4<-fit.variogram.gls(log(zinc)~1, meuse[1:40,], vgm(1, "Sph", 900,1))

the results are:

[1] -1.939367e-17  6.324797e-01  4.123851e+02
[1] 4.846680e-05 7.312376e-01 3.661078e+02
[1] 4.846680e-05 2.421149e-01 5.450078e+02
[1] 4.846680e-05 2.968638e-01 7.078753e+02
[1] 4.846680e-05 3.525650e-01 8.629175e+02
[1] 4.846680e-05 4.078170e-01 1.013148e+03
[1] 4.846680e-05 4.624658e-01 1.160053e+03
[1] 4.846680e-05 5.165518e-01 1.304490e+03
[1] 4.846680e-05 5.701438e-01 1.361356e+03
[1] 4.846680e-05 5.912904e-01 1.361355e+03
[1] 4.846680e-05 5.912685e-01 1.361355e+03(**)
Warning message:
In fit.variogram.gls(log(zinc) ~ 1, meuse[1:40, ], vgm(0.04, "Mat",  :
  range parameter at search space boundary

Does the las model (**) is  my answer??
I have changed the start values several times but The warning remain.

Thanks.


-- 

Saman Monfared
Msc Student,
Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167


From piero.campa at gmail.com  Mon Jun 25 14:22:27 2012
From: piero.campa at gmail.com (piero campa)
Date: Mon, 25 Jun 2012 05:22:27 -0700 (PDT)
Subject: [R-sig-Geo] Making web-repository of gridded maps: NetCDF or
	WKT Raster?
In-Reply-To: <22B3814CA95C4E0FBE3C379CA7208237@pcibed193>
References: <4B252466.6090307@spatial-analyst.net>
	<D4AC42F5-3142-4A62-8AD3-F496032BFAD7@casalegno.net>
	<4B2548E1.1040706@uni-muenster.de>
	<22B3814CA95C4E0FBE3C379CA7208237@pcibed193>
Message-ID: <1340626947101-7580332.post@n2.nabble.com>

Dear Tomislav,

could you eventually manage to develop some R example for WCPS queries?
I am going to ingest some spatio-temporal raster collection into rasdaman,
and I was interested in a direct access from inside R to this data.

Thanks for any hint,
  Piero

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Making-web-repository-of-gridded-maps-NetCDF-or-WKT-Raster-tp4160269p7580332.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From pakcagun at gmail.com  Mon Jun 25 14:31:35 2012
From: pakcagun at gmail.com (=?ISO-8859-1?Q?Pelin_Ak=E7ag=FCn?=)
Date: Mon, 25 Jun 2012 15:31:35 +0300
Subject: [R-sig-Geo] GMM-2SLS estimation in spdep
Message-ID: <CAD=yThTZwmkWXqra5MiLEDn5quVYnFM7YU0cy2dcA5rV0t4qtA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120625/bfcd508d/attachment.pl>

From rafael.wueest at wsl.ch  Mon Jun 25 14:42:18 2012
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Mon, 25 Jun 2012 14:42:18 +0200
Subject: [R-sig-Geo] Get map of non-NA cells of a stack
In-Reply-To: <20120625083058.232840@gmx.net>
References: <20120625083058.232840@gmx.net>
Message-ID: <4A4C5E6E-67FF-4F7D-8B9C-8E01C491C9B7@wsl.ch>

Hi Johannes,

I don't know of any special function, but you can easily obtain this by combining sum() and is.na() . See the example below:

r <- raster(ncols=36, nrows=18)
r[] <- 1:ncell(r)
r1<-r;r1[sample(1:ncell(r1),20)]<-NA
r2<-r;r2[sample(1:ncell(r2),20)]<-NA
r3<-r;r3[sample(1:ncell(r3),20)]<-NA
s<-stack(r1,r2,r3)

s<-addLayer(s,!is.na(sum(s)))

plot(s)

This may not be the most efficient way to come up with what you want, as summing a big stack may take quite some time, but for small rasters, stacks it certainly works...

HTH, Rafi


On 25.06.2012, at 10:30, Johannes Radinger wrote:

> Hi,
> 
> I have several stacks with different numbers of raster maps. All the stacked rasters have some NA-cells but sometimes in different locations. I'd like to create a raster map of a single stack which indicates cells that are populated in all rasters of that stack (all non-NA cells).
> 
> Is there a special function within the raster package?
> 
> Best regards
> Johannes
> -- 
> 
> Jetzt informieren: http://mobile.1und1.de/?ac=OM.PW.PW003K20328T7073a
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest/index_EN


From JRadinger at gmx.at  Mon Jun 25 14:57:57 2012
From: JRadinger at gmx.at (Johannes Radinger)
Date: Mon, 25 Jun 2012 14:57:57 +0200
Subject: [R-sig-Geo] Get map of non-NA cells of a stack
In-Reply-To: <4A4C5E6E-67FF-4F7D-8B9C-8E01C491C9B7@wsl.ch>
References: <20120625083058.232840@gmx.net>
	<4A4C5E6E-67FF-4F7D-8B9C-8E01C491C9B7@wsl.ch>
Message-ID: <20120625125757.156970@gmx.net>

Hi Rafi,

thank you for your solution... Thats working perfectly. I just have to try it out how it is working on a larger raster-stack (40 layers each ~750 000 cells)....

cheers,
johannes

-------- Original-Nachricht --------
> Datum: Mon, 25 Jun 2012 14:42:18 +0200
> Von: "Rafael W?est" <rafael.wueest at wsl.ch>
> An: Johannes Radinger <JRadinger at gmx.at>
> CC: R-sig-geo at r-project.org
> Betreff: Re: [R-sig-Geo] Get map of non-NA cells of a stack

> Hi Johannes,
> 
> I don't know of any special function, but you can easily obtain this by
> combining sum() and is.na() . See the example below:
> 
> r <- raster(ncols=36, nrows=18)
> r[] <- 1:ncell(r)
> r1<-r;r1[sample(1:ncell(r1),20)]<-NA
> r2<-r;r2[sample(1:ncell(r2),20)]<-NA
> r3<-r;r3[sample(1:ncell(r3),20)]<-NA
> s<-stack(r1,r2,r3)
> 
> s<-addLayer(s,!is.na(sum(s)))
> 
> plot(s)
> 
> This may not be the most efficient way to come up with what you want, as
> summing a big stack may take quite some time, but for small rasters, stacks
> it certainly works...
> 
> HTH, Rafi
> 
> 
> On 25.06.2012, at 10:30, Johannes Radinger wrote:
> 
> > Hi,
> > 
> > I have several stacks with different numbers of raster maps. All the
> stacked rasters have some NA-cells but sometimes in different locations. I'd
> like to create a raster map of a single stack which indicates cells that are
> populated in all rasters of that stack (all non-NA cells).
> > 
> > Is there a special function within the raster package?
> > 
> > Best regards
> > Johannes
> > -- 
> > 
> > Jetzt informieren: http://mobile.1und1.de/?ac=OM.PW.PW003K20328T7073a
> > 
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> 
> 
> --
> Rafael W?est
> Swiss Federal Research Institute WSL
> Z?rcherstrasse 111
> 8903 Birmensdorf
> Switzerland
> 
> +41 44 7392126
> rafael.wueest at wsl.ch
> http://www.wsl.ch/info/mitarbeitende/wueest/index_EN
> 
> 
> 

-- 

Jetzt informieren: http://mobile.1und1.de/?ac=OM.PW.PW003K20328T7073a


From JRadinger at gmx.at  Mon Jun 25 15:45:22 2012
From: JRadinger at gmx.at (Johannes Radinger)
Date: Mon, 25 Jun 2012 15:45:22 +0200
Subject: [R-sig-Geo] Get map of non-NA cells of a stack
In-Reply-To: <4A4C5E6E-67FF-4F7D-8B9C-8E01C491C9B7@wsl.ch>
References: <20120625083058.232840@gmx.net>
	<4A4C5E6E-67FF-4F7D-8B9C-8E01C491C9B7@wsl.ch>
Message-ID: <20120625134522.104760@gmx.net>

Hi again,

I want to use the output (!is.na(sum(s))) as a 
'mask' object for the function mask(). I think
I need to get a map which only has 1 and NA values
instead of a logical map?
Can I use the output directly in mask () or how 
do I have to transform the map?


/J
-------- Original-Nachricht --------
> Datum: Mon, 25 Jun 2012 14:42:18 +0200
> Von: "Rafael W?est" <rafael.wueest at wsl.ch>
> An: Johannes Radinger <JRadinger at gmx.at>
> CC: R-sig-geo at r-project.org
> Betreff: Re: [R-sig-Geo] Get map of non-NA cells of a stack

> Hi Johannes,
> 
> I don't know of any special function, but you can easily obtain this by
> combining sum() and is.na() . See the example below:
> 
> r <- raster(ncols=36, nrows=18)
> r[] <- 1:ncell(r)
> r1<-r;r1[sample(1:ncell(r1),20)]<-NA
> r2<-r;r2[sample(1:ncell(r2),20)]<-NA
> r3<-r;r3[sample(1:ncell(r3),20)]<-NA
> s<-stack(r1,r2,r3)
> 
> s<-addLayer(s,!is.na(sum(s)))
> 
> plot(s)
> 
> This may not be the most efficient way to come up with what you want, as
> summing a big stack may take quite some time, but for small rasters, stacks
> it certainly works...
> 
> HTH, Rafi
> 
> 
> On 25.06.2012, at 10:30, Johannes Radinger wrote:
> 
> > Hi,
> > 
> > I have several stacks with different numbers of raster maps. All the
> stacked rasters have some NA-cells but sometimes in different locations. I'd
> like to create a raster map of a single stack which indicates cells that are
> populated in all rasters of that stack (all non-NA cells).
> > 
> > Is there a special function within the raster package?
> > 
> > Best regards
> > Johannes
> > -- 
> > 
> > Jetzt informieren: http://mobile.1und1.de/?ac=OM.PW.PW003K20328T7073a
> > 
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> 
> 
> --
> Rafael W?est
> Swiss Federal Research Institute WSL
> Z?rcherstrasse 111
> 8903 Birmensdorf
> Switzerland
> 
> +41 44 7392126
> rafael.wueest at wsl.ch
> http://www.wsl.ch/info/mitarbeitende/wueest/index_EN
> 
> 
> 

-- 

Jetzt informieren: http://mobile.1und1.de/?ac=OM.PW.PW003K20328T7073a


From r.hijmans at gmail.com  Mon Jun 25 17:47:26 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Mon, 25 Jun 2012 08:47:26 -0700
Subject: [R-sig-Geo] Get map of non-NA cells of a stack
In-Reply-To: <20120625134522.104760@gmx.net>
References: <20120625083058.232840@gmx.net>
	<4A4C5E6E-67FF-4F7D-8B9C-8E01C491C9B7@wsl.ch>
	<20120625134522.104760@gmx.net>
Message-ID: <CANtt_hyHdYX2dd_615doW6UWs+ADZGBD7TzJJnWeKhJOZzfNog@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120625/bcc89bf4/attachment.pl>

From pakcagun at gmail.com  Mon Jun 25 21:33:53 2012
From: pakcagun at gmail.com (=?ISO-8859-1?Q?Pelin_Ak=E7ag=FCn?=)
Date: Mon, 25 Jun 2012 22:33:53 +0300
Subject: [R-sig-Geo] GMM-2SLS estimation in spdep
Message-ID: <CAD=yThQiuADPZczJ4WR8CftYxJ_9gzvW_RCsqU3idNBZhdDMzg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120625/bb5ef85f/attachment.pl>

From Roger.Bivand at nhh.no  Mon Jun 25 21:42:32 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 25 Jun 2012 21:42:32 +0200 (CEST)
Subject: [R-sig-Geo] GMM-2SLS estimation in spdep
In-Reply-To: <CAD=yThQiuADPZczJ4WR8CftYxJ_9gzvW_RCsqU3idNBZhdDMzg@mail.gmail.com>
References: <CAD=yThQiuADPZczJ4WR8CftYxJ_9gzvW_RCsqU3idNBZhdDMzg@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1206252139040.15187@reclus.nhh.no>

On Mon, 25 Jun 2012, Pelin Ak?ag?n wrote:

> Dear list users,
>
>
>> From the package spdep, I understood that GMM-2SLS procedure can be applied
> to spatial cross-sectional regression models (without heteroscedastic
> innovations) as in the following and I wonder if I get it correct:

You seem to be in a hurry, try not to repeat questions, patience can help. 
The functions you mention have help pages, and you always have the 
function code if you are in doubt. You are expected to provide sample code 
for your question - did you consider that? You do not mention the sphet 
package, or its vignette and JSS article by Gianfranco Piras, perhaps you 
should look at those too?

Roger

>
> -  ?gstsls? (generalized spatial two stage least squares) command for SARAR
> (SAC) models
>
> - ?stsls? (spatial two stage least squares) command for spatial lag models
>
> - ?GMerrorsar? command for spatial error model.
>
> I wonder if each command -with some alterations- can be used
> interchangeably. In particular, is there a way to directly estimate a GM
> process for SARAR and spatial lag models? Or if not, do they use the same
> methodology with S2SLS (as in Kelejian and Prucha 1998, 1999)?
>
>
> Thanks in advance,
>
> Best regards,
>
>
> Pelin Akcagun
>
> Middle East Technical University
>
> Turkey
>
> 	[[alternative HTML version deleted]]
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From pakcagun at gmail.com  Mon Jun 25 22:48:39 2012
From: pakcagun at gmail.com (=?ISO-8859-1?Q?Pelin_Ak=E7ag=FCn?=)
Date: Mon, 25 Jun 2012 23:48:39 +0300
Subject: [R-sig-Geo] GMM-2SLS estimation in spdep
In-Reply-To: <alpine.LRH.2.02.1206252139040.15187@reclus.nhh.no>
References: <CAD=yThQiuADPZczJ4WR8CftYxJ_9gzvW_RCsqU3idNBZhdDMzg@mail.gmail.com>
	<alpine.LRH.2.02.1206252139040.15187@reclus.nhh.no>
Message-ID: <CAD=yThQFQw0FYjt2OM3XPtzXmdn6AVChECPE0irHu699R830aQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120625/2f265c87/attachment.pl>

From Roger.Bivand at nhh.no  Tue Jun 26 10:14:58 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 26 Jun 2012 10:14:58 +0200 (CEST)
Subject: [R-sig-Geo] GMM-2SLS estimation in spdep
In-Reply-To: <CAD=yThQFQw0FYjt2OM3XPtzXmdn6AVChECPE0irHu699R830aQ@mail.gmail.com>
References: <CAD=yThQiuADPZczJ4WR8CftYxJ_9gzvW_RCsqU3idNBZhdDMzg@mail.gmail.com>
	<alpine.LRH.2.02.1206252139040.15187@reclus.nhh.no>
	<CAD=yThQFQw0FYjt2OM3XPtzXmdn6AVChECPE0irHu699R830aQ@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1206261003170.17956@reclus.nhh.no>

On Mon, 25 Jun 2012, Pelin Ak?ag?n wrote:

> Dr. Bivand,
>
>
> Sorry for posting twice, there seemed to be a technical problem in my
> e-mail account because of the character set, that is why the question was
> repeated.
>
>
> I have gone over the help pages, the sphet package and Dr. Piras? recent
> article, which were really helpful. This classification between
> gstsls-stsls-GMerrorsar functions appeared in my mind as a result of this
> reading material.
>
> However, I was in a doubt that I may be missing something. For instance in
> the following code
>
>
> stslslag.absfit <- stsls(absform, data=LAEA, listw=lwW)
>
> GMerr.absfit <- GMerrorsar(absform, data=LAEA, listw=lwW,
> returnHcov=TRUE)
>
> gstsls.absfit <- gstsls(absform, data=LAEA, listw=lwW)
>
>
> This already gives me the STSLS, GM SAR and GM SARAR estimators. I wanted
> to be sure that those three estimators rely on the same methodology so that
> they can be comparable.
>
> To be more specific, does the GM estimation for this spatial cross
> sectional model rests upon a numerical Hessian approximation based on OLS
> residuals? And in the presence of endogeneity caused by the spatial lag
> estimator (as in SARAR model), does this GM procedure rely on 2SLS
> estimates (which makes comparison between spatial 2SLS and spatial GMM
> harder, as one is conditional on the other)?

Please refer to the code, either in your console, from the source package, 
or online at R-Forge:

https://r-forge.r-project.org/scm/viewvc.php/pkg/R/kpgm_new.R?view=markup&root=spdep

for GMerrorsar and gstsls, and:

https://r-forge.r-project.org/scm/viewvc.php/pkg/R/s2sls.R?view=markup&root=spdep

for stsls. You will see quite a lot of choices, often caused by the 
difficulty of getting the GM argmin to converge numerically. If you read 
gstsls at the foot of the first file, you see that it calls tsls from the 
second file in the first stage, then copies the argmin section from 
GMerrorsar. Neither GMerrorsar not gstsls iterate their solutions. Note 
that GMerrorsar can also use the Arnold-Wied moments.

>
> So if these models are not directly comparable in terms of the methodology,
> is there any other way to make them? I may be confused at some point. I
> appreciate any kind of help.

They are comparable in implementation terms, using to some extent the same 
underlying functions. Please also compare the code with that of the 
model-fitting functions in sphet, where again there is a good deal in 
common. I've included Gianfranco Piras as CC, because his views will be 
relevant for you.

Hope this helps,

Roger

>
>
> Thanks in advance
>
> Pelin
>
>
>
> On Mon, Jun 25, 2012 at 10:42 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
>> On Mon, 25 Jun 2012, Pelin Ak?ag?n wrote:
>>
>>  Dear list users,
>>>
>>>
>>>  From the package spdep, I understood that GMM-2SLS procedure can be
>>>> applied
>>>>
>>> to spatial cross-sectional regression models (without heteroscedastic
>>> innovations) as in the following and I wonder if I get it correct:
>>>
>>
>> You seem to be in a hurry, try not to repeat questions, patience can help.
>> The functions you mention have help pages, and you always have the function
>> code if you are in doubt. You are expected to provide sample code for your
>> question - did you consider that? You do not mention the sphet package, or
>> its vignette and JSS article by Gianfranco Piras, perhaps you should look
>> at those too?
>>
>> Roger
>>
>>
>>> -  ?gstsls? (generalized spatial two stage least squares) command for
>>> SARAR
>>> (SAC) models
>>>
>>> - ?stsls? (spatial two stage least squares) command for spatial lag models
>>>
>>> - ?GMerrorsar? command for spatial error model.
>>>
>>>
>>> I wonder if each command -with some alterations- can be used
>>> interchangeably. In particular, is there a way to directly estimate a GM
>>> process for SARAR and spatial lag models? Or if not, do they use the same
>>> methodology with S2SLS (as in Kelejian and Prucha 1998, 1999)?
>>>
>>>
>>> Thanks in advance,
>>>
>>> Best regards,
>>>
>>>
>>> Pelin Akcagun
>>>
>>> Middle East Technical University
>>>
>>> Turkey
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>>
>>>
>> --
>> Roger Bivand
>> Department of Economics, NHH Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From mitradevkota at hotmail.com  Tue Jun 26 13:16:31 2012
From: mitradevkota at hotmail.com (Mitra Devkota)
Date: Tue, 26 Jun 2012 11:16:31 +0000
Subject: [R-sig-Geo] interpreting SAR and CAR outputs
In-Reply-To: <SNT102-W3671F8E7387D9933F3D183CAE00@phx.gbl>
References: <SNT102-W488756E880918A631D3062CAF10@phx.gbl>,
	<SNT102-W32D5511DD9E456B8F96E0ACAF10@phx.gbl>,
	<4FD49F7C.10100@uni-muenster.de>,
	<SNT102-W4FF3A89B75E3ADE1A078CCAF00@phx.gbl>,
	<4FD4AF7F.70803@uni-muenster.de>,
	<SNT102-W27F063D6641C2989C545B2CAF00@phx.gbl>,
	<4FD4CC4A.5090400@uni-muenster.de>,
	<SNT102-W13CAC9EDE4B31FA91C2DD8CAF00@phx.gbl>,
	<SNT102-W314DEC0687A3F8B09B5F5CAE00@phx.gbl>,
	<4FE94FD7.40307@uni-muenster.de>,
	<SNT102-W3671F8E7387D9933F3D183CAE00@phx.gbl>
Message-ID: <SNT102-W6BA23206F91E6BF66884ECAE00@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120626/cae3770b/attachment.pl>

From juantomas.sayago at gmail.com  Tue Jun 26 16:01:17 2012
From: juantomas.sayago at gmail.com (Juan Tomas Sayago)
Date: Tue, 26 Jun 2012 10:01:17 -0400
Subject: [R-sig-Geo] interpreting SAR and CAR outputs
In-Reply-To: <SNT102-W6BA23206F91E6BF66884ECAE00@phx.gbl>
References: <SNT102-W488756E880918A631D3062CAF10@phx.gbl>
	<SNT102-W32D5511DD9E456B8F96E0ACAF10@phx.gbl>
	<4FD49F7C.10100@uni-muenster.de>
	<SNT102-W4FF3A89B75E3ADE1A078CCAF00@phx.gbl>
	<4FD4AF7F.70803@uni-muenster.de>
	<SNT102-W27F063D6641C2989C545B2CAF00@phx.gbl>
	<4FD4CC4A.5090400@uni-muenster.de>
	<SNT102-W13CAC9EDE4B31FA91C2DD8CAF00@phx.gbl>
	<SNT102-W314DEC0687A3F8B09B5F5CAE00@phx.gbl>
	<4FE94FD7.40307@uni-muenster.de>
	<SNT102-W3671F8E7387D9933F3D183CAE00@phx.gbl>
	<SNT102-W6BA23206F91E6BF66884ECAE00@phx.gbl>
Message-ID: <CAEOXpNCFAyKhDROZO8ouvJ60nmcBRVQuiex+3qZX=viNytoAZw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120626/109a5139/attachment.pl>

From akjha at iirs.gov.in  Tue Jun 26 16:55:59 2012
From: akjha at iirs.gov.in (Jha, Ashutosh  Kumar)
Date: Tue, 26 Jun 2012 20:25:59 +0530
Subject: [R-sig-Geo] help for -creating multilayer raster fraction map based
 on the attribute of a shape file using r-raster, data.table
Message-ID: <1340722559.4fe9cd7f1a9fc@172.16.20.222>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120626/808b4343/attachment.pl>

From pakcagun at gmail.com  Tue Jun 26 22:12:31 2012
From: pakcagun at gmail.com (=?ISO-8859-1?Q?Pelin_Ak=E7ag=FCn?=)
Date: Tue, 26 Jun 2012 23:12:31 +0300
Subject: [R-sig-Geo] GMM-2SLS estimation in spdep
In-Reply-To: <alpine.LRH.2.02.1206261003170.17956@reclus.nhh.no>
References: <CAD=yThQiuADPZczJ4WR8CftYxJ_9gzvW_RCsqU3idNBZhdDMzg@mail.gmail.com>
	<alpine.LRH.2.02.1206252139040.15187@reclus.nhh.no>
	<CAD=yThQFQw0FYjt2OM3XPtzXmdn6AVChECPE0irHu699R830aQ@mail.gmail.com>
	<alpine.LRH.2.02.1206261003170.17956@reclus.nhh.no>
Message-ID: <CAD=yThRcqOmd=nr_8-YNK-hetN5+vS6JBBK-HrADwjMd8aa47Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120626/bc68a400/attachment.pl>

From mathieu.rajerison at gmail.com  Wed Jun 27 10:31:38 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Wed, 27 Jun 2012 10:31:38 +0200
Subject: [R-sig-Geo] External "Envelope" of a set of points in space -
 not convex hull
In-Reply-To: <CAAcGz993-hPu6ibGS9N7_2FFfZAfQpZHSmwuH+04PqpFQ46xwQ@mail.gmail.com>
References: <1340348180184-7580290.post@n2.nabble.com>
	<CAAcGz993-hPu6ibGS9N7_2FFfZAfQpZHSmwuH+04PqpFQ46xwQ@mail.gmail.com>
Message-ID: <CAGfc75kDqGPdF60SpyEot88G0PGdc=mCNHDH-eS0hbS5+EeyAQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120627/bae09a00/attachment.pl>

From mathieu.rajerison at gmail.com  Wed Jun 27 10:36:46 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Wed, 27 Jun 2012 10:36:46 +0200
Subject: [R-sig-Geo] breaking lines at intersection but without GRASS
Message-ID: <CAGfc75m_D--NAyC=0mgGg5q1t6PzMPtKzyVoZ7Dxt6716FMWzQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120627/10bc0a0c/attachment.pl>

From corey.sparks at UTSA.EDU  Wed Jun 27 14:06:54 2012
From: corey.sparks at UTSA.EDU (Corey Sparks)
Date: Wed, 27 Jun 2012 05:06:54 -0700 (PDT)
Subject: [R-sig-Geo] interpreting SAR and CAR outputs
In-Reply-To: <SNT102-W6BA23206F91E6BF66884ECAE00@phx.gbl>
References: <SNT102-W6BA23206F91E6BF66884ECAE00@phx.gbl>
Message-ID: <1340798814537-7580348.post@n2.nabble.com>

Hi,
I would examine the Lagrange multiplier specification tests from a lm() fit.
like:
fit1<-lm(yield~Temp+precept, data=data)
lm.LMtest(fit1, listw=ND_queenW, test="all")

and see which of the tests has the "largest" significant test statistic.
That will let you know if your data follow a lag or error process. It may be
appropriate to fit a model with lagsarlm().
Overall I would say there is not much difference between these two models,
based on the small difference in AIC, it really depends on whether you
believe the way each is modeling the data, SAR specification, versus the
first order Markov assumption of the CAR model. 
I would definitely check out the specification tests.
Best,
Corey

Corey Sparks
Assistant Professor
Department of Demography
College of Public Policy
501 West Cesar E Chavez Blvd
Monterrey Building 2.270C
San Antonio, TX 78207
corey.sparks 'at' utsa.edu
210 458 3166


-----
Corey Sparks
Assistant professor
Department of Demography
The University of Texas at San Antonio
501 West Cesar E Chavez Blvd
San Antonio TX 78207
Corey.sparks 'at' utsa.edu
210 458 3166 &lt;tel:210%20458%203166&gt;
Latitude: 29.423614  /  Longitude: -98.504282
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/interpreting-SAR-and-CAR-outputs-tp7580342p7580348.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From calamita_giuseppe at yahoo.it  Wed Jun 27 14:10:04 2012
From: calamita_giuseppe at yahoo.it (Giuseppe Calamita)
Date: Wed, 27 Jun 2012 05:10:04 -0700 (PDT)
Subject: [R-sig-Geo] ordinary kriging using 'krige.conv' function
In-Reply-To: <1340279848811-7580281.post@n2.nabble.com>
References: <1340279848811-7580281.post@n2.nabble.com>
Message-ID: <1340799004656-7580349.post@n2.nabble.com>

I never worked with geoR package for interpolation pourposes. Have you
already checked the gstat package ?  Further, do you have any idea of which
model would be the best for fitting the data you're working on (exponential,
spherical, gaussian, etc ?).
Give me more information so I can help you better.
Cheers 

Giuseppe Calamita

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/ordinary-kriging-using-krige-conv-function-tp7580281p7580349.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From mdsumner at gmail.com  Wed Jun 27 15:04:30 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 27 Jun 2012 23:04:30 +1000
Subject: [R-sig-Geo] External "Envelope" of a set of points in space -
 not convex hull
In-Reply-To: <CAGfc75kDqGPdF60SpyEot88G0PGdc=mCNHDH-eS0hbS5+EeyAQ@mail.gmail.com>
References: <1340348180184-7580290.post@n2.nabble.com>
	<CAAcGz993-hPu6ibGS9N7_2FFfZAfQpZHSmwuH+04PqpFQ46xwQ@mail.gmail.com>
	<CAGfc75kDqGPdF60SpyEot88G0PGdc=mCNHDH-eS0hbS5+EeyAQ@mail.gmail.com>
Message-ID: <CAAcGz9-fBPFUEW38v3HsL4pnKiS_06s0wFGKqWahAwqnU1tEzQ@mail.gmail.com>

Can you share what you've tried? A triangulation is really at odds
with the representation available with "polygons" in their usual GIS
form, but there are ways to do it. The basic options (to me) are
either a set of the triangles as individual polygons, or even a set of
shapes in a "multipolygon", or to dissolve them to get the hull/s from
the alphahull code. Any feeling for which option is more important?
Got an example of running the alphahull to help someone start, and why
you want a SpatialPolygonsDataFrame? (For plot, export, both, or
other?).



On Wed, Jun 27, 2012 at 6:31 PM, Mathieu Rajerison
<mathieu.rajerison at gmail.com> wrote:
> Hi,
>
> alphahull is nice but having a SpatialPolygonsDataFrame from the result is
> quite tricky
>
> If anyone has the solution..
>
>
> 2012/6/22 Michael Sumner <mdsumner at gmail.com>
>>
>> Try the alphahull package, which is on CRAN.
>>
>> I don't believe it will smooth the result for you, but you could take
>> it from there and use other R functions to do that.
>>
>> Cheers, Mike.
>>
>>
>> On Fri, Jun 22, 2012 at 4:56 PM, PCB <pedrocontebarros at gmail.com> wrote:
>> > Dear All,
>> >
>> > I have a set of observations on an area, and I would like to define the
>> > "investigated area" as the smallest polygon (preferably smoothed with
>> > e.g.
>> > splines fit) that encloses all the points. This is similar to the convex
>> > hull problem, except that my data have "gulfs", i.e. areas that are not
>> > sampled (and should not be), between two "fingers" of areas
>> > investigated. I
>> > am sure I have seen something about solving this lately, but after a
>> > couple
>> > days searching could not find it (I am sure I am using the wrong
>> > keywords...).
>> >
>> > Any help would be appreciated
>> >
>> > --
>> > View this message in context:
>> > http://r-sig-geo.2731867.n2.nabble.com/External-Envelope-of-a-set-of-points-in-space-not-convex-hull-tp7580290.html
>> > Sent from the R-sig-geo mailing list archive at Nabble.com.
>> >
>> > _______________________________________________
>> > R-sig-Geo mailing list
>> > R-sig-Geo at r-project.org
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>>
>> --
>> Michael Sumner
>> Hobart, Australia
>> e-mail: mdsumner at gmail.com
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>



-- 
Michael Sumner
Hobart, Australia
e-mail: mdsumner at gmail.com


From pedrocontebarros at gmail.com  Wed Jun 27 16:00:17 2012
From: pedrocontebarros at gmail.com (Pedro de Barros)
Date: Wed, 27 Jun 2012 16:00:17 +0200
Subject: [R-sig-Geo] External "Envelope" of a set of points in space -
 not convex hull
In-Reply-To: <CAAcGz9-fBPFUEW38v3HsL4pnKiS_06s0wFGKqWahAwqnU1tEzQ@mail.g
	mail.com>
References: <1340348180184-7580290.post@n2.nabble.com>
	<CAAcGz993-hPu6ibGS9N7_2FFfZAfQpZHSmwuH+04PqpFQ46xwQ@mail.gmail.com>
	<CAGfc75kDqGPdF60SpyEot88G0PGdc=mCNHDH-eS0hbS5+EeyAQ@mail.gmail.com>
	<CAAcGz9-fBPFUEW38v3HsL4pnKiS_06s0wFGKqWahAwqnU1tEzQ@mail.gmail.com>
Message-ID: <4feb11ed.501c0e0a.0191.ffffce61@mx.google.com>

Hi there,

Building upon your suggestion, I managed to get the alphahull to work 
(I had to play a little with the alpha parameter to get the scale 
right, but it worked).

To transform it into a SpatialPolygon (only one polygon, that was 
enough for me), I used the code from Andy Bevan in 
http://r-sig-geo.2731867.n2.nabble.com/alpha-hull-ahull-to-polygon-shapefile-td7342734.html. 
I ended up not needing to smooth it, as I chose a large value for 
the  alpha parameter of the ahull function.

I had a little difficulty at first, but managed to get it to work 
choosing a small value to the rnd parameter (with the default value 
it would not close the polygon). Overall, it worked quite well for my purposes.
I then used this to define a consecutive area for a raster (a 
SpatialPixels object) with rasterize (from the raster package).
I also used it to export as a shapefile (using writeOGR) for further 
use in Quantum GIS.

I hope this helps others looking for the same problem, and thank you 
all a lot for the support!



At 15:04 2012-06-27, Michael Sumner wrote:
>Can you share what you've tried? A triangulation is really at odds
>with the representation available with "polygons" in their usual GIS
>form, but there are ways to do it. The basic options (to me) are
>either a set of the triangles as individual polygons, or even a set of
>shapes in a "multipolygon", or to dissolve them to get the hull/s from
>the alphahull code. Any feeling for which option is more important?
>Got an example of running the alphahull to help someone start, and why
>you want a SpatialPolygonsDataFrame? (For plot, export, both, or
>other?).
>
>
>
>On Wed, Jun 27, 2012 at 6:31 PM, Mathieu Rajerison
><mathieu.rajerison at gmail.com> wrote:
> > Hi,
> >
> > alphahull is nice but having a SpatialPolygonsDataFrame from the result is
> > quite tricky
> >
> > If anyone has the solution..
> >
> >
> > 2012/6/22 Michael Sumner <mdsumner at gmail.com>
> >>
> >> Try the alphahull package, which is on CRAN.
> >>
> >> I don't believe it will smooth the result for you, but you could take
> >> it from there and use other R functions to do that.
> >>
> >> Cheers, Mike.
> >>
> >>
> >> On Fri, Jun 22, 2012 at 4:56 PM, PCB <pedrocontebarros at gmail.com> wrote:
> >> > Dear All,
> >> >
> >> > I have a set of observations on an area, and I would like to define the
> >> > "investigated area" as the smallest polygon (preferably smoothed with
> >> > e.g.
> >> > splines fit) that encloses all the points. This is similar to the convex
> >> > hull problem, except that my data have "gulfs", i.e. areas that are not
> >> > sampled (and should not be), between two "fingers" of areas
> >> > investigated. I
> >> > am sure I have seen something about solving this lately, but after a
> >> > couple
> >> > days searching could not find it (I am sure I am using the wrong
> >> > keywords...).
> >> >
> >> > Any help would be appreciated
> >> >
> >> > --
> >> > View this message in context:
> >> > 
> http://r-sig-geo.2731867.n2.nabble.com/External-Envelope-of-a-set-of-points-in-space-not-convex-hull-tp7580290.html
> >> > Sent from the R-sig-geo mailing list archive at Nabble.com.
> >> >
> >> > _______________________________________________
> >> > R-sig-Geo mailing list
> >> > R-sig-Geo at r-project.org
> >> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>
> >>
> >>
> >> --
> >> Michael Sumner
> >> Hobart, Australia
> >> e-mail: mdsumner at gmail.com
> >>
> >> _______________________________________________
> >> R-sig-Geo mailing list
> >> R-sig-Geo at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> >
>
>
>
>--
>Michael Sumner
>Hobart, Australia
>e-mail: mdsumner at gmail.com


From k_jacobi at surf2000.de  Wed Jun 27 19:13:25 2012
From: k_jacobi at surf2000.de (Klaus Jacobi)
Date: Wed, 27 Jun 2012 19:13:25 +0200
Subject: [R-sig-Geo] Problem with crop() on raster stacks
Message-ID: <0BC32850-AB9B-4929-8048-F094D316F95F@surf2000.de>

Dear Robert,

I have a script where I am cutting large raster stacks into slices by using the crop function. Until recently, the script worked without a problem. In the mean time, I upgraded from R version 15.0 to 15.1 and from raster version 1.9-x to 2.0-x. Today I noticed, that I still can crop single rasters and also bricks but not stacks any more. 

Should I revert to a previous version or will that issue be fixed soon?

Klaus Jacobi
k_jacobi at surf2000.de
www.disk-world.net


From icraig at jhsph.edu  Wed Jun 27 20:05:31 2012
From: icraig at jhsph.edu (Ian Craig)
Date: Wed, 27 Jun 2012 14:05:31 -0400
Subject: [R-sig-Geo] costDistance with gdistance error
Message-ID: <CANgk0YONu0Qan5jkpzCiRsrMzNME_onGqRnoT0CeyHa-s=MN8g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120627/9a506d4b/attachment.pl>

From jacobvanetten at yahoo.com  Thu Jun 28 00:57:21 2012
From: jacobvanetten at yahoo.com (Jacob van Etten)
Date: Wed, 27 Jun 2012 23:57:21 +0100 (BST)
Subject: [R-sig-Geo] costDistance with gdistance error
In-Reply-To: <CANgk0YONu0Qan5jkpzCiRsrMzNME_onGqRnoT0CeyHa-s=MN8g@mail.gmail.com>
References: <CANgk0YONu0Qan5jkpzCiRsrMzNME_onGqRnoT0CeyHa-s=MN8g@mail.gmail.com>
Message-ID: <1340837841.52113.YahooMailNeo@web29704.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120627/82f89723/attachment.pl>

From gab.cozzi at gmail.com  Thu Jun 28 12:32:00 2012
From: gab.cozzi at gmail.com (Gabriele Cozzi)
Date: Thu, 28 Jun 2012 12:32:00 +0200
Subject: [R-sig-Geo] SpatialPoints, SpatialGrid and related terminology
Message-ID: <CADr8yXDDqh0ozu8Sq5JjroKnDfBm5iamagCd=8RDBx2k5mYJBg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120628/79e0fedf/attachment.pl>

From hiemstra at knmi.nl  Thu Jun 28 12:50:59 2012
From: hiemstra at knmi.nl (Paul Hiemstra)
Date: Thu, 28 Jun 2012 12:50:59 +0200
Subject: [R-sig-Geo] calculate SSerror in fit.variogram
In-Reply-To: <CAOytA4ZHm2Yks-d1LS5SgdkjdRSwTe0JFD8gR_P5oShBGSP1ag@mail.gmail.com>
References: <CAOytA4ZHm2Yks-d1LS5SgdkjdRSwTe0JFD8gR_P5oShBGSP1ag@mail.gmail.com>
Message-ID: <4FEC3713.30203@knmi.nl>

On 06/22/2012 03:16 PM, Saman Monfared wrote:
> Hi.
> I have used fit.variogram in gstat.
> How can I calculate SSerror between the sample variogram and the
> fitted variogram model in different estimation method of
> fit.method=2-7.
>
> Thanks.
>
> Saman Monfared
> Msc Student,
> Department of Statistics, Shiraz University,
> Shiraz 71454, Iran
> Email: Samanmonfared1 at gmail.com
>
> Tel: +98 917 5305167
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
Assuming the result of 'fit.variogram' is in the variable 'spam', this
will get you the SSErr:

attr(spam, "SSErr")

cheers,
Paul

-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.22
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From tom.gottfried at o2mail.de  Thu Jun 28 13:52:49 2012
From: tom.gottfried at o2mail.de (Tom Gottfried)
Date: Thu, 28 Jun 2012 13:52:49 +0200
Subject: [R-sig-Geo] SpatialPoints, SpatialGrid and related terminology
In-Reply-To: <CADr8yXDDqh0ozu8Sq5JjroKnDfBm5iamagCd=8RDBx2k5mYJBg@mail.gmail.com>
References: <CADr8yXDDqh0ozu8Sq5JjroKnDfBm5iamagCd=8RDBx2k5mYJBg@mail.gmail.com>
Message-ID: <4FEC4591.9050309@o2mail.de>

Gabriele,

it would be surely very useful for you to read the ASDAR-book:

Bivand, Roger S., Edzer J. Pebesma, und Virgilio G?mez-Rubio. Applied 
spatial data analysis with R. Use R! New York: Springer, 2008. 
http://www.asdar-book.org/; 
http://www.springerlink.com/content/978-0-387-78170-9.

Besides this, your approach with using over on point data seems the way 
you have to go. In grid cells with a size of 2500 m over would find more 
than one point from your finer grid.

HTH,
Tom

Am 28.06.2012 12:32, schrieb Gabriele Cozzi:
> Dear list,
> apologize for the unusual question.  I am new and I have some problems with
> some of the terminology.
> I had my codes running but only after trial and error rather than with a
> full understanding of what is what and this does not entirely satisfy me.
>
> I have a data frame (call it grid1) containing X, Y coordinates along with
> other variables
> Locations are spaced 500 m apart on on a grid. Here an example with random
> data:
>
> ##-------------
> X1<- rep(seq(0,20000, by=500)
>            , each=45)
> Y1<- rep(seq(0,20000, by=500)
>            , 45)
> grid1<- data.frame(X1,Y1,
>                      value=rep("val", length(X1)))
> plot(grid1$X1,grid1$Y1, cex=0.1)
> ##--------------
>
>
> I want to extract from grid 1 only those locations, and relative values,
> that are spaced 2500 m apart, so basically those locations that overlap
> with a second data frame (call it grid2). In other words those locations
> where dots overlap with circles (cfr. the plot in the codes below)
>
> ##--------------
> X2<- rep(seq(0,20000, by=2500)
>           , each=9)
> Y2<- rep(seq(0,20000, by=2500)
>           , 9)
> grid2<- data.frame(X2,Y2)
> points(grid2$X2,grid2$Y2)
> ##----------------
>
>
> I believe this can be easily achieved with the over() function in {sp} :
>
> ##----------------
> over(grid2,grid1)
> ##---------------
>
> But I see that arguments of the form "data.frame" cannot be passed to
> over() that instead accept arguments of the form SpatialPoints,
> SpatialGridsDataFrame and so on.
>
> I passed the arguments in the form SpatialPoints and SpatialPointsDataFrame
> yet I do not fully grasp the difference with (say) SpatialGrid.
>
>
> ##-------------
> over(SpatialPoints(coords=coordinates(grid2)),
>         SpatialPointsDataFrame(coords=grid1[c("X1", "Y1")], data=grid1))
> ##-------------
>
> I am reading:        http://cran.r-project.org/web/packages/sp/sp.pdf
> but still I am struggling to fully understand.
>
> Any comments on the terminology and the best approach to solve my problem
> would be appreciated.
> Hopefully this will be of any use for other list members.
>
> Gabriele
>
>
>
>


From m.shapiera22 at gmail.com  Thu Jun 28 17:30:11 2012
From: m.shapiera22 at gmail.com (Melanie Shapiera)
Date: Thu, 28 Jun 2012 13:00:11 -0230
Subject: [R-sig-Geo] error: subscript out of bounds using getverticeshr
Message-ID: <CAK5WTcFU1ZogjGzB+Kuv3uk-3KEZbUxQrSRsTbcWtYeGFG4HzA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120628/6ecadd73/attachment.pl>

From r.hijmans at gmail.com  Thu Jun 28 19:03:44 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 28 Jun 2012 10:03:44 -0700
Subject: [R-sig-Geo] Problem with crop() on raster stacks
In-Reply-To: <0BC32850-AB9B-4929-8048-F094D316F95F@surf2000.de>
References: <0BC32850-AB9B-4929-8048-F094D316F95F@surf2000.de>
Message-ID: <CANtt_hw42QwCk=6erAvB1FChCD5O1Q_qTaeMM29-=XQA8KAu0Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120628/a96fef35/attachment.pl>

From akjha at iirs.gov.in  Fri Jun 29 07:29:42 2012
From: akjha at iirs.gov.in (akjha)
Date: Thu, 28 Jun 2012 22:29:42 -0700 (PDT)
Subject: [R-sig-Geo] help--raster::writeRaster does not save the layer name
	in file
Message-ID: <1340947782764-7580360.post@n2.nabble.com>

Hi List,

I have a rasterstack with 10 layer
I have assigned names to these layer using layerNames(s) =
c('band1',band2',.....'band10')

but while using the writeRaster as
writeRaster(s,filename="raster.tiff",format='GTiff',options="INTERLEAVE=BAND",overwrite=FALSE)

does not save the layer names in tiff file. As a result while reading this
file again using 

"back<-stack(raster.tiff)"

I get the layer names as raster.tiff.1 raster.tiff.2 as so on.

I can i make sure that the file saved when read back will have the layer
name as band1, band2......

Thanks & Regards
AKJ

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/help-raster-writeRaster-does-not-save-the-layer-name-in-file-tp7580360.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From k_jacobi at surf2000.de  Fri Jun 29 09:08:11 2012
From: k_jacobi at surf2000.de (Klaus Jacobi)
Date: Fri, 29 Jun 2012 09:08:11 +0200
Subject: [R-sig-Geo] Problem with crop() on raster stacks
In-Reply-To: <CANtt_hw42QwCk=6erAvB1FChCD5O1Q_qTaeMM29-=XQA8KAu0Q@mail.gmail.com>
References: <0BC32850-AB9B-4929-8048-F094D316F95F@surf2000.de>
	<CANtt_hw42QwCk=6erAvB1FChCD5O1Q_qTaeMM29-=XQA8KAu0Q@mail.gmail.com>
Message-ID: <F1769D9C-79D2-438E-93B7-9A24CC3BCC8D@surf2000.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120629/514102dc/attachment.pl>

From martijn.smit at vu.nl  Fri Jun 29 14:19:07 2012
From: martijn.smit at vu.nl (Smit, M.J.)
Date: Fri, 29 Jun 2012 12:19:07 +0000
Subject: [R-sig-Geo] Marginal effects?
Message-ID: <FBA2943645E7EA43A9ED44966DBAB9E529F8ED77@PEXMB001A.vu.local>

Dear List,

Does anyone have experience extracting marginal effects from either spautolm or lagsarlm in spdep? I can't seem to find them in the documentation.

Best regards,
Martijn


From Roger.Bivand at nhh.no  Fri Jun 29 14:23:21 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 29 Jun 2012 14:23:21 +0200 (CEST)
Subject: [R-sig-Geo] Marginal effects?
In-Reply-To: <FBA2943645E7EA43A9ED44966DBAB9E529F8ED77@PEXMB001A.vu.local>
References: <FBA2943645E7EA43A9ED44966DBAB9E529F8ED77@PEXMB001A.vu.local>
Message-ID: <alpine.LRH.2.02.1206291421210.31461@reclus.nhh.no>

On Fri, 29 Jun 2012, Smit, M.J. wrote:

> Dear List,
>
> Does anyone have experience extracting marginal effects from either 
> spautolm or lagsarlm in spdep? I can't seem to find them in the 
> documentation.

I don't see the relevance for spautolm, which fits spatial models to the 
error. For lagsarlm, sacsarlm, and the GM/stsls families, see ?impacts, if 
this is what you mean by "marginal effects".

Roger

>
> Best regards,
> Martijn
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From annafreni at yahoo.it  Fri Jun 29 15:44:38 2012
From: annafreni at yahoo.it (anna freni sterrantino)
Date: Fri, 29 Jun 2012 14:44:38 +0100 (BST)
Subject: [R-sig-Geo] Plot elevation with coordinates and values
Message-ID: <1340977478.62813.YahooMailNeo@web29306.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120629/5a1b31dc/attachment.pl>

From paulojus at c3sl.ufpr.br  Fri Jun 29 15:50:08 2012
From: paulojus at c3sl.ufpr.br (Paulo Justiniano Ribeiro Jr)
Date: Fri, 29 Jun 2012 10:50:08 -0300 (BRT)
Subject: [R-sig-Geo] Plot elevation with coordinates and values
In-Reply-To: <1340977478.62813.YahooMailNeo@web29306.mail.ird.yahoo.com>
References: <1340977478.62813.YahooMailNeo@web29306.mail.ird.yahoo.com>
Message-ID: <alpine.DEB.2.00.1206291048470.29198@macalan.c3sl.ufpr.br>

points.geodata()
allows you to make colors proportional to one varioable and sizes to 
another using the cex.var argument


Paulo Justiniano Ribeiro Jr
LEG (Laboratorio de Estatistica e Geoinformacao)
Universidade Federal do Parana
Caixa Postal 19.081
CEP 81.531-990
Curitiba, PR  -  Brasil
Tel: (+55) 41 3361 3573
VOIP: (+55) (41) (3361 3600) 1053 1066
Fax: (+55) 41 3361 3141
e-mail: paulojus AT  ufpr  br
http://www.leg.ufpr.br/~paulojus

On Fri, 29 Jun 2012, anna freni sterrantino wrote:

>
>
> Hello,
> I'd like to know if it is possible
> to have a plot that includes coordinates and elevation,
> and an additional value.
> Something like plot.geodata with coordinates.
>
> Thank you
> Best ?Regards
>
> Anna
>
>
> ?
> Anna Freni Sterrantino
> Ph.D Student
> Department of Statistics
> University of Bologna, Italy
> via Belle Arti 41, 40124 BO.
> 	[[alternative HTML version deleted]]
>
>


From darunabas at gmail.com  Sat Jun 30 19:46:32 2012
From: darunabas at gmail.com (Barnabas Daru)
Date: Sat, 30 Jun 2012 19:46:32 +0200
Subject: [R-sig-Geo] Species richness map in R
Message-ID: <1C96FDAB-6F93-4989-AD98-8902AA024515@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120630/8661546d/attachment.pl>

