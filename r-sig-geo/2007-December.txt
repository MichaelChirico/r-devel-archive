From mihainica at yahoo.com  Sat Dec  1 20:59:39 2007
From: mihainica at yahoo.com (Mihai Nica)
Date: Sat, 1 Dec 2007 11:59:39 -0800 (PST)
Subject: [R-sig-Geo] unionSpatialPolygons
Message-ID: <678069.47366.qm@web50812.mail.re2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071201/d317a426/attachment.pl>

From p.hiemstra at geo.uu.nl  Sun Dec  2 10:36:55 2007
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Sun, 02 Dec 2007 10:36:55 +0100
Subject: [R-sig-Geo] unionSpatialPolygons
In-Reply-To: <678069.47366.qm@web50812.mail.re2.yahoo.com>
References: <678069.47366.qm@web50812.mail.re2.yahoo.com>
Message-ID: <47527CB7.5080704@geo.uu.nl>

Dear Mihai,

You need to install the gpclib package (available from CRAN). The error 
occurs because it tries to use a function from that package while it is 
not installed.

cheers,
Paul

Mihai Nica wrote:
> XP, R and Tinn-R up to date.
>
> Greetings:
> I've been away from the list for quite some time, and (as expected) some things change. My understanding is that maptools contains "unionSpatialPolygons". However, the following code (which previously worked):
> #______________________________________________________________
> library(maptools)
> msa_cmsa <- readShapePoly("1999_MSA_CMSA") # puts shapefile in SpatialPolygonsDataFrame
> summary(msa_cmsa)
> msa_cmsaaggregated=unionSpatialPolygons(msa_cmsa, msa_cmsa$MSACMSA)
> #_______________________________________________________________
> leads to:
>
>   
>> msa_cmsaaggregated=unionSpatialPolygons(msa_cmsa, msa_cmsa$MSACMSA)
>>     
> Loading required package: gpclib
> Error in as(pli[[1]], "gpc.poly") : 
>   no method or default for coercing "matrix" to "gpc.poly"
> In addition: Warning message:
> In library(package, lib.loc = lib.loc, character.only = TRUE, logical.return = TRUE,  :
>   there is no package called 'gpclib'
>
> May I ask for a hint?
>
> thanks,
>
> mihai
>
>
>
>
>
>       ____________________________________________________________________________________
> Be a better pen pal. 
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   


-- 
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone: 	+31302535773
Fax:	+31302531145
http://intamap.geo.uu.nl/~paul



From mihainica at yahoo.com  Sun Dec  2 18:37:03 2007
From: mihainica at yahoo.com (Mihai Nica)
Date: Sun, 2 Dec 2007 09:37:03 -0800 (PST)
Subject: [R-sig-Geo] unionSpatialPolygons
Message-ID: <963172.68993.qm@web50812.mail.re2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071202/3de1d805/attachment.pl>

From dale.w.steele at gmail.com  Sun Dec  2 21:31:39 2007
From: dale.w.steele at gmail.com (Dale Steele)
Date: Sun, 2 Dec 2007 15:31:39 -0500
Subject: [R-sig-Geo] How to find ocean depth at specific locations?
Message-ID: <72e8303a0712021231q64140d5t6a18d52684753fc7@mail.gmail.com>

I would like to use ocean depth as a covariate in a spatial model
where I have a measured catch at a specific location, but depth at
that site was not reported in the original dataset.  The dataset
'scallop' in package SemiPar is a representative example:

> scallop[20:25,]
   latitude longitude tot.catch
20 39.46667 -72.66667       722
21 39.43333 -72.73333        41
22 39.40000 -72.80000        39
23 39.31667 -72.73333         0
24 39.33333 -72.85000        94
25 39.26667 -72.81667         7


I've been able to download a very large grid of depths in this area
(33514 points) from: <http://topex.ucsd.edu/cgi-bin/get_data.cgi>.
Given this data, I'm stuck at how to estimate the depth at each
location in the scallops dataset.

depths <- read.table("depths.txt", header=F,col.names=c("x","y","z"))
depths$x <- depths$x - 360
   ## subset the data keeping only negative depths
depths <- subset(depths, depths$z < 0)
   ## Convert depths to a positive number
depths$z <- (-1)*depths$z
length(depths$z)

Thanks.  --Dale



From p.hiemstra at geo.uu.nl  Sun Dec  2 22:26:13 2007
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Sun, 02 Dec 2007 22:26:13 +0100
Subject: [R-sig-Geo] How to find ocean depth at specific locations?
In-Reply-To: <72e8303a0712021231q64140d5t6a18d52684753fc7@mail.gmail.com>
References: <72e8303a0712021231q64140d5t6a18d52684753fc7@mail.gmail.com>
Message-ID: <475322F5.9060104@geo.uu.nl>

Hi Dale,

If you have all your data in Spatial objects (sp-package) and they are 
both in the same projection you can use the overlay function. Read 
?overlay for more info. Small example:

# Script to extract the distance to the river meuse (holland) from a 
grid (meuse.grid) for the points in meuse.
library(sp)
data(meuse)
coordinates(meuse) =~x+y
data(meuse.grid)
gridded(meuse.grid) = ~x+y
spplot(meuse.grid, "dist", sp.layout = list("sp.points", meuse))
# Get indices of meuse.grid that contain the values of the grid at the
overlay(meuse.grid, meuse) 
# Get the values from the grid and attach to meuse
meuse$new_dist = meuse.grid$dist[overlay(meuse.grid, meuse)]

hope this helps!

cheers,
Paul

Dale Steele schreef:
> I would like to use ocean depth as a covariate in a spatial model
> where I have a measured catch at a specific location, but depth at
> that site was not reported in the original dataset.  The dataset
> 'scallop' in package SemiPar is a representative example:
>
>   
>> scallop[20:25,]
>>     
>    latitude longitude tot.catch
> 20 39.46667 -72.66667       722
> 21 39.43333 -72.73333        41
> 22 39.40000 -72.80000        39
> 23 39.31667 -72.73333         0
> 24 39.33333 -72.85000        94
> 25 39.26667 -72.81667         7
>
>
> I've been able to download a very large grid of depths in this area
> (33514 points) from: <http://topex.ucsd.edu/cgi-bin/get_data.cgi>.
> Given this data, I'm stuck at how to estimate the depth at each
> location in the scallops dataset.
>
> depths <- read.table("depths.txt", header=F,col.names=c("x","y","z"))
> depths$x <- depths$x - 360
>    ## subset the data keeping only negative depths
> depths <- subset(depths, depths$z < 0)
>    ## Convert depths to a positive number
> depths$z <- (-1)*depths$z
> length(depths$z)
>
> Thanks.  --Dale
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   


-- 
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone:     +31302535773
Fax:    +31302531145
http://intamap.geo.uu.nl/~paul



From jefunes at gmail.com  Mon Dec  3 21:45:23 2007
From: jefunes at gmail.com (Jose Funes)
Date: Mon, 3 Dec 2007 15:45:23 -0500
Subject: [R-sig-Geo] asciigrid R
Message-ID: <8e01f5830712031245n7990990bg9051516d844feed1@mail.gmail.com>

ASCIIGRID

I am using read.asciigrid function from R to import 4 grid maps from
ArcGIS to a single grid in R. However, I am having troubles to make it
work, when I finish to import the 4 grid to R the final grid appear as
NULL. Below I did include the code, I will appreciate your help to
solve this problem.I tried to register to GTAT group but my email is
returned.

Thanks,

R code:

Four layers were stacked:
explanatory$silt = read.asciigrid("silt.asc")$band1
explanatory$silt = explanatory$band1

explanatory$sand = read.asciigrid("sandasc.asc")$band1
explanatory$sand = explanatory$band1

explanatory$nd = read.asciigrid("nd.asc")$band1
explanatory$nd = explanatory$band1

explanatory$bnd3 = read.asciigrid("bnd3.asc")$band1
explanatory$bnd3 = explanatory$band1


Deleting double band:
explanatory$band1 = NULL

 str(explanatory)
 NULL

Jose Funes



From mdsumner at utas.edu.au  Mon Dec  3 21:54:47 2007
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Tue, 04 Dec 2007 07:54:47 +1100
Subject: [R-sig-Geo] asciigrid R
In-Reply-To: <8e01f5830712031245n7990990bg9051516d844feed1@mail.gmail.com>
References: <8e01f5830712031245n7990990bg9051516d844feed1@mail.gmail.com>
Message-ID: <47546D17.7010008@utas.edu.au>

Try this, you were nulling each column as you read it, and you didn't 
let us know how "expanatory" was created in the first place:

explanatory = read.asciigrid("silt.asc")
names(explanatory) <- "silt"

explanatory$sand = read.asciigrid("sandasc.asc")$band1

explanatory$nd = read.asciigrid("nd.asc")$band1

explanatory$bnd3 = read.asciigrid("bnd3.asc")$band1


Jose Funes wrote:
> ASCIIGRID
>
> I am using read.asciigrid function from R to import 4 grid maps from
> ArcGIS to a single grid in R. However, I am having troubles to make it
> work, when I finish to import the 4 grid to R the final grid appear as
> NULL. Below I did include the code, I will appreciate your help to
> solve this problem.I tried to register to GTAT group but my email is
> returned.
>
> Thanks,
>
> R code:
>
> Four layers were stacked:
> explanatory$silt = read.asciigrid("silt.asc")$band1
> explanatory$silt = explanatory$band1
>
> explanatory$sand = read.asciigrid("sandasc.asc")$band1
> explanatory$sand = explanatory$band1
>
> explanatory$nd = read.asciigrid("nd.asc")$band1
> explanatory$nd = explanatory$band1
>
> explanatory$bnd3 = read.asciigrid("bnd3.asc")$band1
> explanatory$bnd3 = explanatory$band1
>
>
> Deleting double band:
> explanatory$band1 = NULL
>
>  str(explanatory)
>  NULL
>
> Jose Funes
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>



From Roger.Bivand at nhh.no  Mon Dec  3 22:05:52 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 3 Dec 2007 22:05:52 +0100 (CET)
Subject: [R-sig-Geo] asciigrid R
In-Reply-To: <8e01f5830712031245n7990990bg9051516d844feed1@mail.gmail.com>
References: <8e01f5830712031245n7990990bg9051516d844feed1@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0712032156210.18854@reclus.nhh.no>

On Mon, 3 Dec 2007, Jose Funes wrote:

> ASCIIGRID
>
> I am using read.asciigrid function from R to import 4 grid maps from
> ArcGIS to a single grid in R. However, I am having troubles to make it
> work, when I finish to import the 4 grid to R the final grid appear as
> NULL. Below I did include the code, I will appreciate your help to
> solve this problem.I tried to register to GTAT group but my email is
> returned.
>
> Thanks,
>
> R code:
>
> Four layers were stacked:
> explanatory$silt = read.asciigrid("silt.asc")$band1
> explanatory$silt = explanatory$band1
>
> explanatory$sand = read.asciigrid("sandasc.asc")$band1
> explanatory$sand = explanatory$band1
>
> explanatory$nd = read.asciigrid("nd.asc")$band1
> explanatory$nd = explanatory$band1
>
> explanatory$bnd3 = read.asciigrid("bnd3.asc")$band1
> explanatory$bnd3 = explanatory$band1

Maybe:

library(maptools)
explanatory <- readAsciiGrid("silt.asc")
explanatory <- cbind(explanatory, readAsciiGrid("sandasc.asc"))
explanatory <- cbind(explanatory, readAsciiGrid("nd.asc"))
explanatory <- cbind(explanatory, readAsciiGrid("bnd3.asc"))
names(explanatory) <- c("silt", "sand", "nd", "bnd3")

Please also see ?readAsciiGrid and check the dec= and the na.value= 
arguments - the version you are using in sp is not as often used as the 
one in maptools. You can also use readGDAL() in the rgdal package.

Roger

>
>
> Deleting double band:
> explanatory$band1 = NULL
>
> str(explanatory)
> NULL
>
> Jose Funes
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From alexdesmond at jmail.co.za  Mon Dec  3 23:34:11 2007
From: alexdesmond at jmail.co.za (Dr Alex Desmond)
Date: Mon, 03 Dec 2007 22:34:11 +0000
Subject: [R-sig-Geo] (no subject)
Message-ID: <E1IzJrf-0006LK-KE@ccgi04.plus.net>

>From Mr. Alex Desmond,
Assistant Manager of Nomura Bank,
1 St Martin??-le-Grand, London EC1A 4NP, 
United Kingdom
E-mail: alexdesmond1947 at yahoo.com.hk
 
With due respect, 


I am sure this letter will come to you as a surprise because myself who is the writer have not in anyway come in close contact with you except that my search for a good and reliable person I could confined on to carry out successfully a little business I have at hand. However, scam mails which people send to various individuals and companies on the internet have also made it so impossible for one to do business reliably with other internet users all over the world. I solicit and hope that this letter will not be considered of treated like one of those letters my name is Alex Desmond. Assistant Manger of Nomura Bank International Plc. Address:, Nomura House, 1 St Martin??-le-Grand, London EC1A 4NP, United Kingdom . The Nomura Bank has an Interest Generation Account which is designed to get customers invest their money with Profitable Companies in London through their Deposits with the Nomura Bank. Most Tourists who come into London has also been encouraged by the Home office to open account with us for this purpose.
 
The Deal I want to discuss with you is that I have here in my Branch 378 files which has been confirmed to belong to Foreigners who Visited London, opened this account and left to their respective countries without knowing about the Interests. I as assistant Manager is under Obligation to transfer these funds to the home office account with the Nomura Bank. I do this on daily bases as soon as these customers are unreachable. This is why I am sending this email to you. 
 
I want you to partner with me, Let us use your contact, Bank details and other information of yours to represent the beneficiary of two particular accounts, which I have concluded search on and confirmed that the beneficiaries are not aware of the Interests since they have withdrawn their Capital Investments and closed down their accounts with our Bank. 
 
The good thing about these two accounts is that I personally handled the opening of the accounts for these gentlemen in 2005 when they were on summer holiday in London. They have withdrawn their money and closed these accounts on the 4th of April 2007 without knowing that an Interest of 7.500,000.00 and 8,000, 000.00 the total amount involved in these two accounts are 15,500,000.00 British Pounds. A 5% tax will be deducted according to the Law and the rest will be transferred to your account. 
 
I have all the facts and information. I will facilitate the transfer if you can co-operate. Confirm if you are ready so we can move on to the main stage.
 
Looking forward to your immediate response
 
Mr. Alex Desmond


Reply To- alexdesmond1947 at yahoo.com.hk



From Agustin.Lobo at ija.csic.es  Tue Dec  4 08:46:13 2007
From: Agustin.Lobo at ija.csic.es (Agustin Lobo)
Date: Tue, 04 Dec 2007 08:46:13 +0100
Subject: [R-sig-Geo] Qgis and R ?
Message-ID: <475505C5.8050304@ija.csic.es>

Hi!

Does anyone has experience at displaying spatial R objects
with QGis (perhaps using the python console + Rpy or RSpython)?
I'm thinking on starting some testing and would like to know
about previous experiences.

Thanks

-- 
Dr. Agustin Lobo
Institut de Ciencies de la Terra "Jaume Almera" (CSIC)
LLuis Sole Sabaris s/n
08028 Barcelona
Spain
Tel. 34 934095410
Fax. 34 934110012
email: Agustin.Lobo at ija.csic.es
http://www.ija.csic.es/gt/obster



From b.rowlingson at lancaster.ac.uk  Tue Dec  4 10:00:35 2007
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 04 Dec 2007 09:00:35 +0000
Subject: [R-sig-Geo] Qgis and R ?
In-Reply-To: <475505C5.8050304@ija.csic.es>
References: <475505C5.8050304@ija.csic.es>
Message-ID: <47551733.9050002@lancaster.ac.uk>

Agustin Lobo wrote:
> Hi!
> 
> Does anyone has experience at displaying spatial R objects
> with QGis (perhaps using the python console + Rpy or RSpython)?
> I'm thinking on starting some testing and would like to know
> about previous experiences.

  I've done a bit of work on this and I think the current best option 
would be to save the R Spatial objects as shapefiles and then load them 
into QGis. For raster data I save as ESRI Ascii Grid format.

  Here's some other ideas:

   * write a data provider for QGis in Python that uses Rpy to fetch the 
data from an R Spatial object stored in a .RData file.

     Advantages: neat and well-integrated

     Disadvantages: tricky. might need some changes to the QGis C++ 
codebase. Only works in QGis.

   * write a GDAL/OGR driver for R Spatial objects.

     Advantages: every project that uses GDAL/OGR can use it. Frank 
Warmerdam would think it's a good idea.

     Disadvantages: would have to be in C++, I'm not sure how to write 
GDAL/OGR drivers that use external libraries (libR.so in this case).

I think writing the GDAL/OGR driver would be the right thing in this 
case, but it would require someone with lots of R and C experience to 
code it up. Start here: http://www.gdal.org/ogr/ogr_drivertut.html

Barry



From nrouraonline at gmail.com  Tue Dec  4 16:10:31 2007
From: nrouraonline at gmail.com (=?utf-8?b?TsO6cmlh?= Roura)
Date: Tue, 4 Dec 2007 15:10:31 +0000 (UTC)
Subject: [R-sig-Geo] How to obtain a .asc object with the predictions of a
	model
Message-ID: <loom.20071204T145706-927@post.gmane.org>

Dear,

I'm using the package adehabitat in R to import several .asc files (=matrix), 
and also create a kasc object (=dataframe) with all of them.

The main idea is to use this kasc object to project a climate-matching model, 
which has been developed a prioriy using a reduced set of the overall pixels 
conforming the .asc files.

However, I don't know how to proceed: Do I have to project the model (already 
stored in R) onto the kasc object directly, or convert the kasc object to a 
data frame where each row refers to a pixel?

On the other hand, I would also like to know how to obtain the XY coordinates 
for each row of the kasc object. 

Thank you very much. Cheers,

N?ria Roura



From giohappy at gmail.com  Tue Dec  4 22:20:01 2007
From: giohappy at gmail.com (G. Allegri)
Date: Tue, 4 Dec 2007 22:20:01 +0100
Subject: [R-sig-Geo] [Qgis-user]  Qgis and R ?
In-Reply-To: <47551733.9050002@lancaster.ac.uk>
References: <475505C5.8050304@ija.csic.es> <47551733.9050002@lancaster.ac.uk>
Message-ID: <e12429640712041320m4cd8a007mb367cafe39fe7dc1@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071204/1c3b3b81/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Tue Dec  4 22:44:16 2007
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 04 Dec 2007 21:44:16 +0000
Subject: [R-sig-Geo] [Qgis-user]  Qgis and R ?
In-Reply-To: <e12429640712041320m4cd8a007mb367cafe39fe7dc1@mail.gmail.com>
References: <475505C5.8050304@ija.csic.es> <47551733.9050002@lancaster.ac.uk>
	<e12429640712041320m4cd8a007mb367cafe39fe7dc1@mail.gmail.com>
Message-ID: <4755CA30.3020502@lancaster.ac.uk>

G. Allegri wrote:
> http://cran.r-project.org/src/contrib/Descriptions/rgdal.html
> 
> Isn't enough?
> 

  That's what I'd use to write GDAL/OGR data to read into QGis, but if 
you want tighter coupling between QGis and R Data objects you need one 
of my other ideas...

Barry



From giohappy at gmail.com  Tue Dec  4 23:11:22 2007
From: giohappy at gmail.com (G. Allegri)
Date: Tue, 4 Dec 2007 23:11:22 +0100
Subject: [R-sig-Geo] [Qgis-user]  Qgis and R ?
In-Reply-To: <4755CA30.3020502@lancaster.ac.uk>
References: <475505C5.8050304@ija.csic.es> <47551733.9050002@lancaster.ac.uk>
	<e12429640712041320m4cd8a007mb367cafe39fe7dc1@mail.gmail.com>
	<4755CA30.3020502@lancaster.ac.uk>
Message-ID: <e12429640712041411h48f48a63n72bb274bd4ced936@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071204/ab0642aa/attachment.pl>

From giohappy at gmail.com  Tue Dec  4 23:17:00 2007
From: giohappy at gmail.com (G. Allegri)
Date: Tue, 4 Dec 2007 23:17:00 +0100
Subject: [R-sig-Geo] [Qgis-user]  Qgis and R ?
In-Reply-To: <e12429640712041411h48f48a63n72bb274bd4ced936@mail.gmail.com>
References: <475505C5.8050304@ija.csic.es> <47551733.9050002@lancaster.ac.uk>
	<e12429640712041320m4cd8a007mb367cafe39fe7dc1@mail.gmail.com>
	<4755CA30.3020502@lancaster.ac.uk>
	<e12429640712041411h48f48a63n72bb274bd4ced936@mail.gmail.com>
Message-ID: <e12429640712041417n2691f3aexaec949d41e5334@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071204/060a31cc/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Tue Dec  4 23:51:19 2007
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 04 Dec 2007 22:51:19 +0000
Subject: [R-sig-Geo] [Qgis-user]  Qgis and R ?
In-Reply-To: <e12429640712041411h48f48a63n72bb274bd4ced936@mail.gmail.com>
References: <475505C5.8050304@ija.csic.es> <47551733.9050002@lancaster.ac.uk>	
	<e12429640712041320m4cd8a007mb367cafe39fe7dc1@mail.gmail.com>	
	<4755CA30.3020502@lancaster.ac.uk>
	<e12429640712041411h48f48a63n72bb274bd4ced936@mail.gmail.com>
Message-ID: <4755D9E7.4010101@lancaster.ac.uk>

G. Allegri wrote:
> Ok, but I don't think you need a GDAL/OGR driver. Rgdal+sp do already 
> the work. You need come code to couple the pieces, like the spgrass6 
> package [1] do for Grass.
> 

  So you are sitting in front of QGis and there's some R-spatial objects 
sitting in a .RData file. How do we get that into QGis?

  How about the user selects an option 'Load R-spatial Data Object', 
browses the .RData file and chooses the object, then Rpy uses RGdal 
converts it to a shapefile or raster, then QGis loads that in? Is that 
the solution you are thinking of?

  That's an easy solution, but it's a looser coupling than being able to 
read R-spatial objects directly, and it requires an extra file creation. 
  Code-wise it's quite straightforward... I already have an R object 
browser written in PyQt and Rpy!

Barry



From macq at llnl.gov  Wed Dec  5 05:30:54 2007
From: macq at llnl.gov (Don MacQueen)
Date: Tue, 4 Dec 2007 20:30:54 -0800
Subject: [R-sig-Geo] Qgis and R ?
In-Reply-To: <47551733.9050002@lancaster.ac.uk>
References: <475505C5.8050304@ija.csic.es> <47551733.9050002@lancaster.ac.uk>
Message-ID: <p06240803c37bd9a88ffa@[192.168.11.8]>

At 9:00 AM +0000 12/4/07, Barry Rowlingson wrote:
>Agustin Lobo wrote:
>>  Hi!
>>
>>  Does anyone has experience at displaying spatial R objects
>>  with QGis (perhaps using the python console + Rpy or RSpython)?
>>  I'm thinking on starting some testing and would like to know
>>  about previous experiences.
>
>   I've done a bit of work on this and I think the current best option
>would be to save the R Spatial objects as shapefiles and then load them
>into QGis. For raster data I save as ESRI Ascii Grid format.
>
>   Here's some other ideas:
>
>    * write a data provider for QGis in Python that uses Rpy to fetch the
>data from an R Spatial object stored in a .RData file.

For what (little?) it's worth, I have been doing this quite a bit, 
lately. I sometimes edit the objects in QGis, then reload them into R.

>      Advantages: neat and well-integrated
>
>      Disadvantages: tricky. might need some changes to the QGis C++
>codebase. Only works in QGis.
>
>    * write a GDAL/OGR driver for R Spatial objects.
>
>      Advantages: every project that uses GDAL/OGR can use it. Frank
>Warmerdam would think it's a good idea.
>
>      Disadvantages: would have to be in C++, I'm not sure how to write
>GDAL/OGR drivers that use external libraries (libR.so in this case).
>
>I think writing the GDAL/OGR driver would be the right thing in this
>case, but it would require someone with lots of R and C experience to
>code it up. Start here: http://www.gdal.org/ogr/ogr_drivertut.html
>
>Barry
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at stat.math.ethz.ch
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
---------------------------------
Don MacQueen
Lawrence Livermore National Laboratory
Livermore, CA, USA
925-423-1062
macq at llnl.gov



From Agustin.Lobo at ija.csic.es  Thu Dec  6 14:46:54 2007
From: Agustin.Lobo at ija.csic.es (Agustin Lobo)
Date: Thu, 06 Dec 2007 14:46:54 +0100
Subject: [R-sig-Geo] spTransform: datum syntax?
Message-ID: <4757FD4E.4020104@ija.csic.es>

Dear list,

I have to transform the datum of an spatial object.
First, I create the object with:
pressp <- SpatialPointsDataFrame(pres[,c(10,6)], data=pres[,c(1,2,11)],
+                proj4string = CRS("+proj=longlat +ellps=WGS84"))

Then I have to transform to UTM but using the International or Hayford 
datum.

The following works:
presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31))

but then I keep WGS84.

The following also works:
presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 +datum=NAD27"))

but this is not the datum I want

Then I've tried:
presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 +datum=ED50"))
presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 
+datum=International"))
presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 +datum=Int"))
presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 +datum=Hayford"))

and many other similar names, also tried with ellps=

The doc refers to the proj.4 doc, but cannot find any list of datums 
there, including the pdf docs of proj.4

Does anyone know where I could find a list of supported datums in proj.4
and their correct names for the +datum= argument?

Thanks!

Agus
-- 
Dr. Agustin Lobo
Institut de Ciencies de la Terra "Jaume Almera" (CSIC)
LLuis Sole Sabaris s/n
08028 Barcelona
Spain
Tel. 34 934095410
Fax. 34 934110012
email: Agustin.Lobo at ija.csic.es
http://www.ija.csic.es/gt/obster



From Roger.Bivand at nhh.no  Thu Dec  6 16:31:41 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 6 Dec 2007 16:31:41 +0100 (CET)
Subject: [R-sig-Geo] spTransform: datum syntax?
In-Reply-To: <4757FD4E.4020104@ija.csic.es>
References: <4757FD4E.4020104@ija.csic.es>
Message-ID: <Pine.LNX.4.64.0712061626190.10910@reclus.nhh.no>

On Thu, 6 Dec 2007, Agustin Lobo wrote:

> Dear list,
>
> I have to transform the datum of an spatial object.
> First, I create the object with:
> pressp <- SpatialPointsDataFrame(pres[,c(10,6)], data=pres[,c(1,2,11)],
> +                proj4string = CRS("+proj=longlat +ellps=WGS84"))
>
> Then I have to transform to UTM but using the International or Hayford
> datum.
>
> The following works:
> presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31))
>
> but then I keep WGS84.
>
> The following also works:
> presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 +datum=NAD27"))
>
> but this is not the datum I want
>
> Then I've tried:
> presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 +datum=ED50"))
> presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31
> +datum=International"))
> presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 +datum=Int"))
> presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 +datum=Hayford"))
>
> and many other similar names, also tried with ellps=
>
> The doc refers to the proj.4 doc, but cannot find any list of datums
> there, including the pdf docs of proj.4

projInfo("datum")

but the problem is to find the actual datum for the ellipse:

projInfo("ellps")

you need. You can move to "+ellps=intl", but finding the three or seven 
parameter +towgs84= values is more difficult. The Grids & Datums column 
at: http://www.asprs.org/resources/grids/ is often a good place to start.

You can search in the output data frame from:

EPSG <- make_EPSG()

too, but you'd need to know more about the target coordinate reference 
system.

Roger

>
> Does anyone know where I could find a list of supported datums in proj.4
> and their correct names for the +datum= argument?
>
> Thanks!
>
> Agus
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From dale.w.steele at gmail.com  Thu Dec  6 20:07:45 2007
From: dale.w.steele at gmail.com (Dale Steele)
Date: Thu, 6 Dec 2007 14:07:45 -0500
Subject: [R-sig-Geo] How to find ocean depth at specific locations?
In-Reply-To: <475322F5.9060104@geo.uu.nl>
References: <72e8303a0712021231q64140d5t6a18d52684753fc7@mail.gmail.com>
	<475322F5.9060104@geo.uu.nl>
Message-ID: <72e8303a0712061107p330fed5fifb03920ac2aec95e@mail.gmail.com>

Thank you very much.  I think I've made progress, but am now stuck....

I now have two data frames (sample appended below).  I would like to
find the indices of 'Depth' on locations in 'Scallop' so I can add
'depth' as a covariate at each sample location in 'Scallop'.

Two issues arise when I try code adapted from your example.

1) The code below generates an error message, when I try to find the
indices of 'Depth' at locations in 'Scallop'.

> overlay(Depth, Scallop)
Error in function (classes, fdef, mtable)  :
  unable to find an inherited method for function "overlay", for
signature "SpatialPointsDataFrame", "SpatialPointsDataFrame"

2) The code below first plots the points from Scallop, then draws
Depth (color image) which covers(obscures) the points drawn
previously.

spplot(Depth, "depth", sp.layout= list("sp.points", Scallop))
  -
2) The code below generates an error message, when I try to find the
indices of 'Depth' at locations in 'Scallop'.

> overlay(Depth, Scallop)
Error in function (classes, fdef, mtable)  :
  unable to find an inherited method for function "overlay", for
signature "SpatialPointsDataFrame", "SpatialPointsDataFrame"

>Depth[1:5,]
          coordinates depth
7  (593.212, 4539.22)    10
22 (614.239, 4539.51)     4
23 (615.643, 4539.53)     6
24 (617.048, 4539.56)     8
25 (618.444, 4539.58)     8

> Scallop[1:5,]
         coordinates tcatchp1
1 (792.142, 4494.53)        1
2 (795.331, 4485.39)        1
3 (778.164, 4490.29)        1
4 (767.395, 4475.07)        2
5 (773.325, 4467.87)        1

Thanks.  --Dale

On Dec 2, 2007 4:26 PM, Paul Hiemstra <p.hiemstra at geo.uu.nl> wrote:
> Hi Dale,
>
> If you have all your data in Spatial objects (sp-package) and they are
> both in the same projection you can use the overlay function. Read
> ?overlay for more info. Small example:
>
> # Script to extract the distance to the river meuse (holland) from a
> grid (meuse.grid) for the points in meuse.
> library(sp)
> data(meuse)
> coordinates(meuse) =~x+y
> data(meuse.grid)
> gridded(meuse.grid) = ~x+y
> spplot(meuse.grid, "dist", sp.layout = list("sp.points", meuse))
> # Get indices of meuse.grid that contain the values of the grid at the
> overlay(meuse.grid, meuse)
> # Get the values from the grid and attach to meuse
> meuse$new_dist = meuse.grid$dist[overlay(meuse.grid, meuse)]
>
> hope this helps!
>
> cheers,
> Paul
>
> Dale Steele schreef:
>
> > I would like to use ocean depth as a covariate in a spatial model
> > where I have a measured catch at a specific location, but depth at
> > that site was not reported in the original dataset.  The dataset
> > 'scallop' in package SemiPar is a representative example:
> >
> >
> >> scallop[20:25,]
> >>
> >    latitude longitude tot.catch
> > 20 39.46667 -72.66667       722
> > 21 39.43333 -72.73333        41
> > 22 39.40000 -72.80000        39
> > 23 39.31667 -72.73333         0
> > 24 39.33333 -72.85000        94
> > 25 39.26667 -72.81667         7
> >
> >
> > I've been able to download a very large grid of depths in this area
> > (33514 points) from: <http://topex.ucsd.edu/cgi-bin/get_data.cgi>.
> > Given this data, I'm stuck at how to estimate the depth at each
> > location in the scallops dataset.
> >
> > depths <- read.table("depths.txt", header=F,col.names=c("x","y","z"))
> > depths$x <- depths$x - 360
> >    ## subset the data keeping only negative depths
> > depths <- subset(depths, depths$z < 0)
> >    ## Convert depths to a positive number
> > depths$z <- (-1)*depths$z
> > length(depths$z)
> >
> > Thanks.  --Dale
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at stat.math.ethz.ch
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
>
> --
> Drs. Paul Hiemstra
> Department of Physical Geography
> Faculty of Geosciences
> University of Utrecht
> Heidelberglaan 2
> P.O. Box 80.115
> 3508 TC Utrecht
> Phone:     +31302535773
> Fax:    +31302531145
> http://intamap.geo.uu.nl/~paul
>
>



From p.hiemstra at geo.uu.nl  Thu Dec  6 21:28:29 2007
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Thu, 06 Dec 2007 21:28:29 +0100
Subject: [R-sig-Geo] How to find ocean depth at specific locations?
In-Reply-To: <72e8303a0712061119w5fe9d82dx19919182cc887649@mail.gmail.com>
References: <72e8303a0712021231q64140d5t6a18d52684753fc7@mail.gmail.com>	
	<475322F5.9060104@geo.uu.nl>	
	<72e8303a0712061107p330fed5fifb03920ac2aec95e@mail.gmail.com>	
	<47584955.4010803@geo.uu.nl>
	<72e8303a0712061119w5fe9d82dx19919182cc887649@mail.gmail.com>
Message-ID: <47585B6D.8070105@geo.uu.nl>

Hi Dale,

Going from latlong to utm destroys the grid yeah. I used the inverse 
distance weighted interpolation of the gstat package. Along the lines of:

# 1. Create target grid, for example by using a bbox polygon of your
# area of interest using spsample. Getting a bbox-polygon from a 
SpatialObject
# little home brewn function :)

bbox2polygon = function(obj) {
# This function converts a bounding box of a spatial object to a SpatialPolygons-object
# obj :  Spatial object
  bb = bbox(obj)
  pl = Polygon(data.frame(rbind(c(bb["x","min"], bb["y","max"]),
                                c(bb["x","max"], bb["y","max"]),
                                c(bb["x","max"], bb["y","min"]),
                                c(bb["x","min"], bb["y","min"]),
                                c(bb["x","min"], bb["y","max"])
                            )))
  pls = Polygons(list(pl), ID = "bbox")
  spat_poly = SpatialPolygons(list(pls), proj4string = CRS(proj4string(obj)))
  return(spat_poly)
}


data(meuse)
coordinates(meuse) =~x+y
bb = bbox2polygon(meuse)
spplot(meuse, "zinc",sp.layout= list("sp.polygons",bb))
grd = spsample(bb, cellsize = c(50,50), type = "regular") # Cell size in m
spplot(meuse, "zinc",sp.layout= list("sp.points",grd))

# 2. Interpolate to this grid, mind to keep either the number of max
# allowd points small (nmax), or limit the search radius (maxdist). 
Experiment a bit
require(gstat)
new_grd = krige(zinc~1, meuse, grd, maxdist = 50) # In your case you 
ofcourse
    # have much more points and more regularly spaced
gridded(new_grd) = TRUE
spplot(new_grd)

Good luck!

cheers,
Paul

Dale Steele schreef:
>> gridded(Depth)=TRUE
>>     
> suggested tolerance minimum: 0.323243088554591Error in
> points2grid(points, tolerance) :
>   dimension 1 : coordinate intervals are not constant
>
> I suspect this implies that my 'Depth' data are not located on a
> regular grid.   I originally downloaded from the internet, and
> converted from long/lat to UTM using PBSMapping.  Do I need to perform
> some sort of interpolation?
>
> Best Regards ,
>     --Dale
>
>
> On Dec 6, 2007 2:11 PM, Paul Hiemstra <p.hiemstra at geo.uu.nl> wrote:
>   
>> Hi Dale,
>>
>> I think you need to change the SpatialPointsDataFrame Depth to a
>> SpatialGrid. Use:
>>
>> gridded(Depth) = TRUE
>>
>>
>> cheers,
>> Paul
>>
>> Dale Steele schreef:
>>     
>>> Thank you very much.  I think I've made progress, but am now stuck....
>>>
>>> I now have two data frames (sample appended below).  I would like to
>>> find the indices of 'Depth' on locations in 'Scallop' so I can add
>>> 'depth' as a covariate at each sample location in 'Scallop'.
>>>
>>> Two issues arise when I try code adapted from your example.
>>>
>>> 1) The code below generates an error message, when I try to find the
>>> indices of 'Depth' at locations in 'Scallop'.
>>>
>>>
>>>       
>>>> overlay(Depth, Scallop)
>>>>
>>>>         
>>> Error in function (classes, fdef, mtable)  :
>>>   unable to find an inherited method for function "overlay", for
>>> signature "SpatialPointsDataFrame", "SpatialPointsDataFrame"
>>>
>>> 2) The code below first plots the points from Scallop, then draws
>>> Depth (color image) which covers(obscures) the points drawn
>>> previously.
>>>
>>> spplot(Depth, "depth", sp.layout= list("sp.points", Scallop))
>>>   -
>>> 2) The code below generates an error message, when I try to find the
>>> indices of 'Depth' at locations in 'Scallop'.
>>>
>>>
>>>       
>>>> overlay(Depth, Scallop)
>>>>
>>>>         
>>> Error in function (classes, fdef, mtable)  :
>>>   unable to find an inherited method for function "overlay", for
>>> signature "SpatialPointsDataFrame", "SpatialPointsDataFrame"
>>>
>>>
>>>       
>>>> Depth[1:5,]
>>>>
>>>>         
>>>           coordinates depth
>>> 7  (593.212, 4539.22)    10
>>> 22 (614.239, 4539.51)     4
>>> 23 (615.643, 4539.53)     6
>>> 24 (617.048, 4539.56)     8
>>> 25 (618.444, 4539.58)     8
>>>
>>>
>>>       
>>>> Scallop[1:5,]
>>>>
>>>>         
>>>          coordinates tcatchp1
>>> 1 (792.142, 4494.53)        1
>>> 2 (795.331, 4485.39)        1
>>> 3 (778.164, 4490.29)        1
>>> 4 (767.395, 4475.07)        2
>>> 5 (773.325, 4467.87)        1
>>>
>>> Thanks.  --Dale
>>>
>>> On Dec 2, 2007 4:26 PM, Paul Hiemstra <p.hiemstra at geo.uu.nl> wrote:
>>>
>>>       
>>>> Hi Dale,
>>>>
>>>> If you have all your data in Spatial objects (sp-package) and they are
>>>> both in the same projection you can use the overlay function. Read
>>>> ?overlay for more info. Small example:
>>>>
>>>> # Script to extract the distance to the river meuse (holland) from a
>>>> grid (meuse.grid) for the points in meuse.
>>>> library(sp)
>>>> data(meuse)
>>>> coordinates(meuse) =~x+y
>>>> data(meuse.grid)
>>>> gridded(meuse.grid) = ~x+y
>>>> spplot(meuse.grid, "dist", sp.layout = list("sp.points", meuse))
>>>> # Get indices of meuse.grid that contain the values of the grid at the
>>>> overlay(meuse.grid, meuse)
>>>> # Get the values from the grid and attach to meuse
>>>> meuse$new_dist = meuse.grid$dist[overlay(meuse.grid, meuse)]
>>>>
>>>> hope this helps!
>>>>
>>>> cheers,
>>>> Paul
>>>>
>>>> Dale Steele schreef:
>>>>
>>>>
>>>>         
>>>>> I would like to use ocean depth as a covariate in a spatial model
>>>>> where I have a measured catch at a specific location, but depth at
>>>>> that site was not reported in the original dataset.  The dataset
>>>>> 'scallop' in package SemiPar is a representative example:
>>>>>
>>>>>
>>>>>
>>>>>           
>>>>>> scallop[20:25,]
>>>>>>
>>>>>>
>>>>>>             
>>>>>    latitude longitude tot.catch
>>>>> 20 39.46667 -72.66667       722
>>>>> 21 39.43333 -72.73333        41
>>>>> 22 39.40000 -72.80000        39
>>>>> 23 39.31667 -72.73333         0
>>>>> 24 39.33333 -72.85000        94
>>>>> 25 39.26667 -72.81667         7
>>>>>
>>>>>
>>>>> I've been able to download a very large grid of depths in this area
>>>>> (33514 points) from: <http://topex.ucsd.edu/cgi-bin/get_data.cgi>.
>>>>> Given this data, I'm stuck at how to estimate the depth at each
>>>>> location in the scallops dataset.
>>>>>
>>>>> depths <- read.table("depths.txt", header=F,col.names=c("x","y","z"))
>>>>> depths$x <- depths$x - 360
>>>>>    ## subset the data keeping only negative depths
>>>>> depths <- subset(depths, depths$z < 0)
>>>>>    ## Convert depths to a positive number
>>>>> depths$z <- (-1)*depths$z
>>>>> length(depths$z)
>>>>>
>>>>> Thanks.  --Dale
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>>
>>>>>           
>>>> --
>>>> Drs. Paul Hiemstra
>>>> Department of Physical Geography
>>>> Faculty of Geosciences
>>>> University of Utrecht
>>>> Heidelberglaan 2
>>>> P.O. Box 80.115
>>>> 3508 TC Utrecht
>>>> Phone:     +31302535773
>>>> Fax:    +31302531145
>>>> http://intamap.geo.uu.nl/~paul
>>>>
>>>>
>>>>
>>>>         
>> --
>>
>> Drs. Paul Hiemstra
>> Department of Physical Geography
>> Faculty of Geosciences
>> University of Utrecht
>> Heidelberglaan 2
>> P.O. Box 80.115
>> 3508 TC Utrecht
>> Phone:     +31302535773
>> Fax:    +31302531145
>> http://intamap.geo.uu.nl/~paul
>>
>>
>>     


-- 
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone:     +31302535773
Fax:    +31302531145
http://intamap.geo.uu.nl/~paul



From Agustin.Lobo at ija.csic.es  Fri Dec  7 10:09:43 2007
From: Agustin.Lobo at ija.csic.es (Agustin Lobo)
Date: Fri, 07 Dec 2007 10:09:43 +0100
Subject: [R-sig-Geo] spTransform: datum syntax?
In-Reply-To: <Pine.LNX.4.64.0712061626190.10910@reclus.nhh.no>
References: <4757FD4E.4020104@ija.csic.es>
	<Pine.LNX.4.64.0712061626190.10910@reclus.nhh.no>
Message-ID: <47590DD7.9030609@ija.csic.es>

I'm surprised that are there only 10 available datums. I understand
that this is a problem of proj4, not R. But if R has OGR-based
functionality, there should be somewhere a list with more datums.

What I'm doing now is importing other georeferenced layers of the same 
area to copy the proj4string from them (I remind you that I'm making
a sp polygon file out of lat-lon vertex coordinates and
then reprojecting to UTM). But I'm surprised by the following:

For a shp file of the same region, the proj file is:
PROJCS["ED_1950_UTM_Zone_31N",GEOGCS["GCS_European_1950",DATUM["D_European_1950",SPHEROID["International_1924",6378388.0,297.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",3.0],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]]

But once imported, I get only:
 > delme <- 
readOGR("C:/ALOBO/dipu2006/espaisoberts_P037/FBARO_OUTPUTS/STLLOR","STLL_EOA_FB3")
OGR data source with driver: ESRI Shapefile
Source: "C:/ALOBO/dipu2006/espaisoberts_P037/FBARO_OUTPUTS/STLLOR", 
layer: "STLL_EOA_FB3"
with  144  rows and  6  columns
 > delme at proj4string
An object of class ?CRS?
Slot "projargs":
[1] " +proj=utm +zone=31 +ellps=intl +units=m +no_defs"

Instead, I have another sp object of the same region (but do not
find any notes on how I managed to import it) with a much richer pro4string:

 > limitGFO at proj4string
CRS arguments:
  +proj=tmerc +lat_0=0 +lon_0=2.999999982811267 +k=0.999600 +x_0=500000 
+y_0=0
+ellps=intl +units=m +no_defs

Is there any way of making a correct proj4string out of a *.prj file?
(or from a *.txg file for raster layers)

For completeness, I also provide the following information:

If I read the gdal info of a geotif file of the same area:
 > GDALinfo("C:/ALOBO/dipu2006/foc2003/fcov2005.tif")
Closing GDAL dataset handle 0x021bab40...  destroyed ... done.
rows        1950
columns     2221
bands       1
ll.x        404629.1
ll.y        4624285
res.x       10
res.y       10
oblique.x   0
oblique.y   0
driver      GTiff
projection  +proj=utm +zone=31 +ellps=intl +units=m +no_defs
file        C:/ALOBO/dipu2006/foc2003/fcov2005.tif

While its companion txg file is much more comprehensive (not sure if the
actual info stored in the tif file itself is as comprehensive, don't 
have any way of looking at the geotiff header directly):

Format: GeoTIFF
Description: DELTA proporcional a PVI05
Unknown text 'impexpnames.GeoTIFF'
Image type: 32-bit floating-point
Image size: 2221 columns by 1950 lines
Resolution: 10.000000 (column) by 10.000000 (line) meters per cell
Units: meters
Corners:
    Upper Left:  404629.090000 E  4624285.300000 N
   Upper Right:  426839.090000 E  4624285.300000 N
    Lower Left:  404629.090000 E  4604785.300000 N
   Lower Right:  426839.090000 E  4604785.300000 N

Coordinate Reference System:
Name: ED50 / UTM zone 31N (CM 3E)
Projection: UTM zone 31N (CM 3E)
    Method: Transverse Mercator
    Latitude of natural origin: N 0 00 00.000
    Longitude of natural origin: E 3 00 00.000
    Scale factor at natural origin: 0.9996
    False easting: 500000 m
    False northing: 0 m
Datum: European Datum 1950 (ED50)
    Type: Geodetic
    Epoch: 1950
    Ellipsoid: International 1924
       Semi-major axis 6378388
       Inverse flattening: 297
    Prime Meridian: Greenwich
    Valid Area
       Europe - ED50
Coordinate System
    Type: Projected
    Axis 1: Easting
       Unit: meter
       Symbol: E
    Axis 2: Northing
       Unit: meter
       Symbol: N
Datum Transformations
    To: World Geodetic System 1984 (WGS84)
       Method: Geocentric translation
       X-axis translation: -87 m
       Y-axis translation: -98 m
       Z-axis translation: -121 m
       Valid Area
          Europe - west

   Note: Georeference control points are at outside edges of image.
         This is the upper left corner of the upper left cell,
         the upper right corner of the upper right cell, etc.






Roger Bivand escribi?:
> On Thu, 6 Dec 2007, Agustin Lobo wrote:
> 
>> Dear list,
>>
>> I have to transform the datum of an spatial object.
>> First, I create the object with:
>> pressp <- SpatialPointsDataFrame(pres[,c(10,6)], data=pres[,c(1,2,11)],
>> +                proj4string = CRS("+proj=longlat +ellps=WGS84"))
>>
>> Then I have to transform to UTM but using the International or Hayford
>> datum.
>>
>> The following works:
>> presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31))
>>
>> but then I keep WGS84.
>>
>> The following also works:
>> presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 +datum=NAD27"))
>>
>> but this is not the datum I want
>>
>> Then I've tried:
>> presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 +datum=ED50"))
>> presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31
>> +datum=International"))
>> presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 +datum=Int"))
>> presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 
>> +datum=Hayford"))
>>
>> and many other similar names, also tried with ellps=
>>
>> The doc refers to the proj.4 doc, but cannot find any list of datums
>> there, including the pdf docs of proj.4
> 
> projInfo("datum")
> 
> but the problem is to find the actual datum for the ellipse:
> 
> projInfo("ellps")
> 
> you need. You can move to "+ellps=intl", but finding the three or seven 
> parameter +towgs84= values is more difficult. The Grids & Datums column 
> at: http://www.asprs.org/resources/grids/ is often a good place to start.
> 
> You can search in the output data frame from:
> 
> EPSG <- make_EPSG()
> 
> too, but you'd need to know more about the target coordinate reference 
> system.
> 
> Roger
> 
>>
>> Does anyone know where I could find a list of supported datums in proj.4
>> and their correct names for the +datum= argument?
>>
>> Thanks!
>>
>> Agus
>>
> 

-- 
Dr. Agustin Lobo
Institut de Ciencies de la Terra "Jaume Almera" (CSIC)
LLuis Sole Sabaris s/n
08028 Barcelona
Spain
Tel. 34 934095410
Fax. 34 934110012
email: Agustin.Lobo at ija.csic.es
http://www.ija.csic.es/gt/obster



From Roger.Bivand at nhh.no  Fri Dec  7 11:34:17 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 7 Dec 2007 11:34:17 +0100 (CET)
Subject: [R-sig-Geo] spTransform: datum syntax?
In-Reply-To: <47590DD7.9030609@ija.csic.es>
References: <4757FD4E.4020104@ija.csic.es>
	<Pine.LNX.4.64.0712061626190.10910@reclus.nhh.no>
	<47590DD7.9030609@ija.csic.es>
Message-ID: <Pine.LNX.4.64.0712071102180.14453@reclus.nhh.no>

On Fri, 7 Dec 2007, Agustin Lobo wrote:

> I'm surprised that are there only 10 available datums. I understand
> that this is a problem of proj4, not R. But if R has OGR-based
> functionality, there should be somewhere a list with more datums.

Well, that is why I suggested looking at the excellent Grids & Datums 
columns. Their author is a highly experienced cartographer and surveyor, 
and each column (monthly for many years) demonstrates that the only common 
factor in coordinate reference systems is surprise.

Briefly, your original states that the datum is ED50. However, ED50 only 
is a framework that differs not only from country to country, but often 
also within countries. It is only from WGS84 that surveyors have had 
access to a satellite measurement based "global standard" to link the 
"local standards" to.

Consequently EPSG and PROJ.4 do not "assume" a single ED50, which may be 
correct in some places but not in others - the datums used are those that 
are "know" to be invariant.

>
> What I'm doing now is importing other georeferenced layers of the same area 
> to copy the proj4string from them (I remind you that I'm making
> a sp polygon file out of lat-lon vertex coordinates and
> then reprojecting to UTM). But I'm surprised by the following:
>
> For a shp file of the same region, the proj file is:

PROJCS["ED_1950_UTM_Zone_31N",GEOGCS["GCS_European_1950",
DATUM["D_European_1950",SPHEROID["International_1924",6378388.0,297.0]],
PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",500000.0],
PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",3.0],
PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_Origin",0.0],
UNIT["Meter",1.0]]

If you can identify the EPSG code number for your specific zone 31 
setting, you can get maybe to the +towgs84= argument. Since the datum is 
not known precisely, you have to provide a conversion to WGS84, with 
either a table look-up (North America NAD27->NAD83), or three or seven 
parameter sets defining the datum shift.

The July 2000 G&D is for the Kingdom of Spain, and its last paragraph 
gives an approximate three parameter conversion from ED50 to WGS84. If you 
are willing to get into fiction, "La carta esf?rica" ("The Nautical Chart" 
I believe) by Arturo P?rez-Reverte or translations may amuse.

The string you need to convert to may be:

CRS("+proj=utm +zone=31 +ellps=intl +towgs84=-84,-107,-120,0,0,0,0")

or with your data source:

>       X-axis translation: -87 m
>       Y-axis translation: -98 m
>       Z-axis translation: -121 m

CRS("+proj=utm +zone=31 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0")

but I'd likely trust G&D here unless ground truth (a known point in both 
reference systems) said otherwise. If my signs or values are wrong, 
someone else will get to the treasure first.

Roger

>
> But once imported, I get only:
>>  delme <- 
> readOGR("C:/ALOBO/dipu2006/espaisoberts_P037/FBARO_OUTPUTS/STLLOR","STLL_EOA_FB3")
> OGR data source with driver: ESRI Shapefile
> Source: "C:/ALOBO/dipu2006/espaisoberts_P037/FBARO_OUTPUTS/STLLOR", layer: 
> "STLL_EOA_FB3"
> with  144  rows and  6  columns
>>  delme at proj4string
> An object of class ?CRS?
> Slot "projargs":
> [1] " +proj=utm +zone=31 +ellps=intl +units=m +no_defs"
>
> Instead, I have another sp object of the same region (but do not
> find any notes on how I managed to import it) with a much richer pro4string:
>
>>  limitGFO at proj4string
> CRS arguments:
> +proj=tmerc +lat_0=0 +lon_0=2.999999982811267 +k=0.999600 +x_0=500000 +y_0=0
> +ellps=intl +units=m +no_defs
>
> Is there any way of making a correct proj4string out of a *.prj file?
> (or from a *.txg file for raster layers)
>

PS: these are exactly equivalent, utm is a tmerc with specified central 
longitude.

> For completeness, I also provide the following information:
>
> If I read the gdal info of a geotif file of the same area:
>>  GDALinfo("C:/ALOBO/dipu2006/foc2003/fcov2005.tif")
> Closing GDAL dataset handle 0x021bab40...  destroyed ... done.
> rows        1950
> columns     2221
> bands       1
> ll.x        404629.1
> ll.y        4624285
> res.x       10
> res.y       10
> oblique.x   0
> oblique.y   0
> driver      GTiff
> projection  +proj=utm +zone=31 +ellps=intl +units=m +no_defs
> file        C:/ALOBO/dipu2006/foc2003/fcov2005.tif
>
> While its companion txg file is much more comprehensive (not sure if the
> actual info stored in the tif file itself is as comprehensive, don't have any 
> way of looking at the geotiff header directly):
>
> Format: GeoTIFF
> Description: DELTA proporcional a PVI05
> Unknown text 'impexpnames.GeoTIFF'
> Image type: 32-bit floating-point
> Image size: 2221 columns by 1950 lines
> Resolution: 10.000000 (column) by 10.000000 (line) meters per cell
> Units: meters
> Corners:
>   Upper Left:  404629.090000 E  4624285.300000 N
>   Upper Right:  426839.090000 E  4624285.300000 N
>   Lower Left:  404629.090000 E  4604785.300000 N
>   Lower Right:  426839.090000 E  4604785.300000 N
>
> Coordinate Reference System:
> Name: ED50 / UTM zone 31N (CM 3E)
> Projection: UTM zone 31N (CM 3E)
>    Method: Transverse Mercator
>    Latitude of natural origin: N 0 00 00.000
>    Longitude of natural origin: E 3 00 00.000
>    Scale factor at natural origin: 0.9996
>    False easting: 500000 m
>    False northing: 0 m
> Datum: European Datum 1950 (ED50)
>    Type: Geodetic
>    Epoch: 1950
>    Ellipsoid: International 1924
>       Semi-major axis 6378388
>       Inverse flattening: 297
>    Prime Meridian: Greenwich
>    Valid Area
>      Europe - ED50
> Coordinate System
>    Type: Projected
>    Axis 1: Easting
>       Unit: meter
>       Symbol: E
>   Axis 2: Northing
>       Unit: meter
>       Symbol: N
> Datum Transformations
>   To: World Geodetic System 1984 (WGS84)
>       Method: Geocentric translation
>       X-axis translation: -87 m
>       Y-axis translation: -98 m
>       Z-axis translation: -121 m
>       Valid Area
>          Europe - west
>
>   Note: Georeference control points are at outside edges of image.
>         This is the upper left corner of the upper left cell,
>         the upper right corner of the upper right cell, etc.
>
>
>
>
>
>
> Roger Bivand escribi?:
>>  On Thu, 6 Dec 2007, Agustin Lobo wrote:
>> 
>> >  Dear list,
>> > 
>> >  I have to transform the datum of an spatial object.
>> >  First, I create the object with:
>> >  pressp <- SpatialPointsDataFrame(pres[,c(10,6)], data=pres[,c(1,2,11)],
>> >  +                proj4string = CRS("+proj=longlat +ellps=WGS84"))
>> > 
>> >  Then I have to transform to UTM but using the International or Hayford
>> >  datum.
>> > 
>> >  The following works:
>> >  presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31))
>> > 
>> >  but then I keep WGS84.
>> > 
>> >  The following also works:
>> >  presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 +datum=NAD27"))
>> > 
>> >  but this is not the datum I want
>> > 
>> >  Then I've tried:
>> >  presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 +datum=ED50"))
>> >  presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31
>> >  +datum=International"))
>> >  presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 +datum=Int"))
>> >  presspUTM <- spTransform(pressp, CRS("+proj=utm +zone=31 
>> >  +datum=Hayford"))
>> > 
>> >  and many other similar names, also tried with ellps=
>> > 
>> >  The doc refers to the proj.4 doc, but cannot find any list of datums
>> >  there, including the pdf docs of proj.4
>>
>>  projInfo("datum")
>>
>>  but the problem is to find the actual datum for the ellipse:
>>
>>  projInfo("ellps")
>>
>>  you need. You can move to "+ellps=intl", but finding the three or seven
>>  parameter +towgs84= values is more difficult. The Grids & Datums column
>>  at: http://www.asprs.org/resources/grids/ is often a good place to start.
>>
>>  You can search in the output data frame from:
>>
>>  EPSG <- make_EPSG()
>>
>>  too, but you'd need to know more about the target coordinate reference
>>  system.
>>
>>  Roger
>> 
>> > 
>> >  Does anyone know where I could find a list of supported datums in proj.4
>> >  and their correct names for the +datum= argument?
>> > 
>> >  Thanks!
>> > 
>> >  Agus
>> >
>> 
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From a.ghisla at studenti.uninsubria.it  Fri Dec  7 14:20:59 2007
From: a.ghisla at studenti.uninsubria.it (Anne Ghisla)
Date: Fri,  7 Dec 2007 14:20:59 +0100
Subject: [R-sig-Geo] Cleaning topology in R spatial objects - R or GIS task?
Message-ID: <1197033659.475948bb06da4@mail.studenti.uninsubria.it>

Dear all,

during kernel LSCV calculation for home range estimation (kernelUD, package 
adehabitat) I encountered a problem related to topology.
One homerange is made of 5 polygons, but one of them has a null area: it is in 
fact a little line. The other polygons have some dangling arcs. 
R displays the homerange without warnings, then exports it as shapefile. As 
the shapefile is imported into a Postgis database, the wrong topology becomes 
a serious problem.

I know that topology operations are typical GIS tasks.
Could it be useful to add to R functions basic tools like clean/build topology 
of its spatial objects, even if it causes code duplication (in fact R spatial 
objects are quite always imported into a GIS)?

All the best,

Anne Ghisla
Universit? dell'Insubria, Varese



From dylan.beaudette at gmail.com  Fri Dec  7 16:13:51 2007
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Fri, 7 Dec 2007 07:13:51 -0800
Subject: [R-sig-Geo] Cleaning topology in R spatial objects - R or GIS
	task?
In-Reply-To: <1197033659.475948bb06da4@mail.studenti.uninsubria.it>
References: <1197033659.475948bb06da4@mail.studenti.uninsubria.it>
Message-ID: <200712070713.51713.dylan.beaudette@gmail.com>

On Friday 07 December 2007 05:20:59 am Anne Ghisla wrote:
> Dear all,
>
> during kernel LSCV calculation for home range estimation (kernelUD, package
> adehabitat) I encountered a problem related to topology.
> One homerange is made of 5 polygons, but one of them has a null area: it is
> in fact a little line. The other polygons have some dangling arcs.
> R displays the homerange without warnings, then exports it as shapefile. As
> the shapefile is imported into a Postgis database, the wrong topology
> becomes a serious problem.
>
> I know that topology operations are typical GIS tasks.
> Could it be useful to add to R functions basic tools like clean/build
> topology of its spatial objects, even if it causes code duplication (in
> fact R spatial objects are quite always imported into a GIS)?
>
> All the best,
>
> Anne Ghisla
> Universit? dell'Insubria, Varese

GRASS is an excellent platform for this type of operation.

Cheers,

Dylan



From loecher at eden.rutgers.edu  Fri Dec  7 20:13:17 2007
From: loecher at eden.rutgers.edu (Markus Loecher)
Date: Fri, 7 Dec 2007 14:13:17 -0500 (EST)
Subject: [R-sig-Geo] adaptive spatial binning
Message-ID: <20980874.205741197054796771.JavaMail.tomcat@rainier>

Dear geo list members,
does there exist an R package or might one of you have an algorithm that partitions a given area into 2dimensional "bins" (could be rectangles, squares, polygons) adaptively, i.e. modifying the coarseness of the spatial grid according to the local population density?
Naturally, I would like finer grid size in regions of high density and coarser blocks in sparse areas.
Ideally one would want to specify a maximum and a minimum coarseness, but that is of secondary importance.
This appears to be a somewhat tricky optimization problem.


Thanking you in advance,
Markus



From dylan.beaudette at gmail.com  Fri Dec  7 20:23:26 2007
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Fri, 7 Dec 2007 11:23:26 -0800
Subject: [R-sig-Geo] adaptive spatial binning
In-Reply-To: <20980874.205741197054796771.JavaMail.tomcat@rainier>
References: <20980874.205741197054796771.JavaMail.tomcat@rainier>
Message-ID: <200712071123.26196.dylan.beaudette@gmail.com>

On Friday 07 December 2007 11:13:17 am Markus Loecher wrote:
> Dear geo list members,
> does there exist an R package or might one of you have an algorithm that
> partitions a given area into 2dimensional "bins" (could be rectangles,
> squares, polygons) adaptively, i.e. modifying the coarseness of the spatial
> grid according to the local population density? Naturally, I would like
> finer grid size in regions of high density and coarser blocks in sparse
> areas. Ideally one would want to specify a maximum and a minimum
> coarseness, but that is of secondary importance. This appears to be a
> somewhat tricky optimization problem.
>

Not sure if there is an R package, but a TIN 
(http://en.wikipedia.org/wiki/Triangulated_irregular_network) sounds like a 
data structure similar to what you may be looking for.

Dylan



From epistat at gmail.com  Sun Dec  9 13:37:53 2007
From: epistat at gmail.com (zhijie zhang)
Date: Sun, 9 Dec 2007 20:37:53 +0800
Subject: [R-sig-Geo] Am i misusing the shift() option in elide(maptools)
	function?
Message-ID: <2fc17e30712090437h14b3f469hc3c08631ab9cfed@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071209/b27d4da1/attachment.pl>

From Roger.Bivand at nhh.no  Sun Dec  9 18:34:37 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 9 Dec 2007 18:34:37 +0100 (CET)
Subject: [R-sig-Geo] Am i misusing the shift() option in elide(maptools)
 function?
In-Reply-To: <2fc17e30712090437h14b3f469hc3c08631ab9cfed@mail.gmail.com>
References: <2fc17e30712090437h14b3f469hc3c08631ab9cfed@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0712091830270.19084@reclus.nhh.no>

On Sun, 9 Dec 2007, zhijie zhang wrote:

> Dear friends,
>  I used the shift() option in elide(maptools) function to shift the x/y
> coordiates, but it seemed that it didn't change the coordinates.
> #Programs used by me
> library(sp)
> library(foreign)
> library(maptools)
>
> data(meuse)  #in the help page
> coordinates(meuse) <- c("x", "y")
> proj4string(meuse) <- CRS("+init=epsg:28992")
> data(meuse.riv)
> river_polygon <- Polygons(list(Polygon(meuse.riv)), ID="meuse")
> rivers <- SpatialPolygons(list(river_polygon))
> proj4string(rivers) <- CRS("+init=epsg:28992")
>
> #rivers
> Slot "coords":
> [176,] 182003.7  337678.6
> Slot "bbox":
>        min      max
> r1 178304.0 182331.5
> r2 325698.5 337684.8
>
>
> rivers1 <- elide(rivers, shift=c(10000,-10000))  #,shift southeast to 10000,
> but it seems unchanged
> #rivers1
> #the coordinates were the same as that of rivers
> Slot "coords":
> [176,] 182003.7  337678.6
> Slot "bbox":
>        min      max
> r1 178304.0 182331.5
> r2 325698.5 337684.8
>
> Q: Am i misusing the shift() option in elide(maptools) function? Where goes
> wrong?

Thanks for a very clear report, this was a bug. The shift= argument worked 
for points but not for lines or polygons. The next release of maptools 
will correct this, and add rotation options kindly contributed by Don 
MacQueen.

Roger

> Thanks.
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From milton_ruser at yahoo.com.br  Sun Dec  9 18:55:34 2007
From: milton_ruser at yahoo.com.br (Milton Cezar Ribeiro)
Date: Sun, 9 Dec 2007 09:55:34 -0800 (PST)
Subject: [R-sig-Geo] spatstat questions
Message-ID: <795360.6412.qm@web56006.mail.re3.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071209/130cf9d6/attachment.pl>

From Roger.Bivand at nhh.no  Sun Dec  9 19:17:04 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 9 Dec 2007 19:17:04 +0100 (CET)
Subject: [R-sig-Geo] spatstat questions
In-Reply-To: <795360.6412.qm@web56006.mail.re3.yahoo.com>
References: <795360.6412.qm@web56006.mail.re3.yahoo.com>
Message-ID: <Pine.LNX.4.64.0712091907370.19084@reclus.nhh.no>

On Sun, 9 Dec 2007, Milton Cezar Ribeiro wrote:

> Hi all,
>
> Is there a mailing list for spatstat R package?

The website is http://www.spatstat.org (seems to be down for me, but 
that's probably me); the maintainers also read this list.

> Another question: Can I find some ebooks on Spatial Pattern Analysis to 
> be downloaded?
>
> Finally, how can I use a shapefile as "mask" on spatstat? I read the 
> polygon using maptools::read.shape function and now I would like to use 
> this shape as mask to define the boundary of my point pattern data.

Don't use read.shape(), it returns a raw object that is difficult to 
handle. An example with readShapePoly:

library(maptools)
library(spatstat)
xx <- readShapePoly(system.file("shapes/sids.shp", package="maptools")[1])
.spatstat_check <- FALSE
NC <- as(as(xx, "SpatialPolygons"), "owin")
plot(NC)
class(NC)
pts <- runifpoint(1000, NC)
plot(pts, pch=16, cex=0.5, add=TRUE)

The .spatstat_check is to turn off topology checking - please use only 
when necessary. In general the internal structures expect polygons not to 
touch or intersect, but the North Carolina counties do touch, so I have 
turned off the check.

There are more notes on Dylan Beaudette's site at:

http://casoilresource.lawr.ucdavis.edu/drupal/node/319

Hope this helps,

Roger

>
> Kind regards
>
> Miltinho
> Brazil.
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From epistat at gmail.com  Mon Dec 10 07:37:18 2007
From: epistat at gmail.com (zhijie zhang)
Date: Mon, 10 Dec 2007 14:37:18 +0800
Subject: [R-sig-Geo] Am i misusing the shift() option in elide(maptools)
	function?
In-Reply-To: <Pine.LNX.4.64.0712091830270.19084@reclus.nhh.no>
References: <2fc17e30712090437h14b3f469hc3c08631ab9cfed@mail.gmail.com>
	<Pine.LNX.4.64.0712091830270.19084@reclus.nhh.no>
Message-ID: <2fc17e30712092237ua610f8dsc644ace77766c76@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071210/5272a6d5/attachment.pl>

From Roger.Bivand at nhh.no  Mon Dec 10 08:24:28 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 10 Dec 2007 08:24:28 +0100 (CET)
Subject: [R-sig-Geo] Am i misusing the shift() option in elide(maptools)
 function?
In-Reply-To: <2fc17e30712092237ua610f8dsc644ace77766c76@mail.gmail.com>
References: <2fc17e30712090437h14b3f469hc3c08631ab9cfed@mail.gmail.com> 
	<Pine.LNX.4.64.0712091830270.19084@reclus.nhh.no>
	<2fc17e30712092237ua610f8dsc644ace77766c76@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0712100813480.21440@reclus.nhh.no>

On Mon, 10 Dec 2007, zhijie zhang wrote:

> Let me know if the new version of maptools was available. I was waiting to
> use it.

The 0.7-2 source is on CRAN and will move to mirrors when they update. 
Neither Windows nor OSX binaries have updated on CRAN yet, but should do 
so during 10 December (CET and EST I think).

A word of thanks to Kurt Hornik at CRAN, who with helpers not only 
publishes all the 1000+ packages on CRAN, but also checks them first 
across a range of platforms. The speed of response of the CRAN team is one 
of the reasons for making it easy for package maintainers to deal with 
bugs quickly. Thanks also to Uwe Ligges for the Windows binary package 
builds, and to Simon Urbanek for the very complicated OSX binary package 
builds.

Roger

> Thanks.
>
> On Dec 10, 2007 1:34 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
>>  On Sun, 9 Dec 2007, zhijie zhang wrote:
>>
>>> Dear friends,
>>>  I used the shift() option in elide(maptools) function to shift the x/y
>>> coordiates, but it seemed that it didn't change the coordinates.
>>> #Programs used by me
>>> library(sp)
>>> library(foreign)
>>> library(maptools)
>>>
>>> data(meuse)  #in the help page
>>> coordinates(meuse) <- c("x", "y")
>>> proj4string(meuse) <- CRS("+init=epsg:28992")
>>> data(meuse.riv)
>>> river_polygon <- Polygons(list(Polygon(meuse.riv)), ID="meuse")
>>> rivers <- SpatialPolygons(list(river_polygon))
>>> proj4string(rivers) <- CRS("+init=epsg:28992")
>>>
>>> #rivers
>>> Slot "coords":
>>> [176,] 182003.7  337678.6
>>> Slot "bbox":
>>>        min      max
>>> r1 178304.0 182331.5
>>> r2 325698.5 337684.8
>>>
>>>
>>> rivers1 <- elide(rivers, shift=c(10000,-10000))  #,shift southeast to
>> 10000,
>>> but it seems unchanged
>>> #rivers1
>>> #the coordinates were the same as that of rivers
>>> Slot "coords":
>>> [176,] 182003.7  337678.6
>>> Slot "bbox":
>>>        min      max
>>> r1 178304.0 182331.5
>>> r2 325698.5 337684.8
>>>
>>> Q: Am i misusing the shift() option in elide(maptools) function? Where
>> goes
>>> wrong?
>>
>> Thanks for a very clear report, this was a bug. The shift= argument worked
>> for points but not for lines or polygons. The next release of maptools
>> will correct this, and add rotation options kindly contributed by Don
>> MacQueen.
>>
>> Roger
>>
>>> Thanks.
>>>
>>
>> --
>> Roger Bivand
>> Economic Geography Section, Department of Economics, Norwegian School of
>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>
>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From loecher at eden.rutgers.edu  Tue Dec 11 17:03:12 2007
From: loecher at eden.rutgers.edu (Markus Loecher)
Date: Tue, 11 Dec 2007 11:03:12 -0500 (EST)
Subject: [R-sig-Geo] more adaptive spatial binning
Message-ID: <18066719.184441197388991958.JavaMail.tomcat@aveo>

Thank you for the responses. After some more research, I have come to conclude that quadtrees or "Centroidal Voronoi Tessellations" (CVT) would be most appropriate for my problem of adaptive spatial binning. Does anyone know about software implementation of either one of those; an R package would be heaven sent of course.

Thanks again,
Markus



From jzhang1982 at gmail.com  Wed Dec 12 02:00:48 2007
From: jzhang1982 at gmail.com (Jian Zhang)
Date: Wed, 12 Dec 2007 09:00:48 +0800
Subject: [R-sig-Geo] How to plot the grid figure using R?
Message-ID: <200712120900460319130@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071212/85edf552/attachment.pl>

From milton_ruser at yahoo.com.br  Wed Dec 12 02:33:39 2007
From: milton_ruser at yahoo.com.br (Milton Cezar Ribeiro)
Date: Tue, 11 Dec 2007 17:33:39 -0800 (PST)
Subject: [R-sig-Geo] Markov Chain Monte Carlo (MCMR) in R for spatial
	simulation.
Message-ID: <633896.55815.qm@web56006.mail.re3.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071211/5ac8e2d0/attachment.pl>

From e.j.tommo at gmail.com  Wed Dec 12 03:55:57 2007
From: e.j.tommo at gmail.com (Edward Tomlinson)
Date: Wed, 12 Dec 2007 13:55:57 +1100
Subject: [R-sig-Geo] Problem installing gstat into R
Message-ID: <285eec980712111855o4cf07a29qd8e1ba206f0bf07d@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071212/0e9112f2/attachment.pl>

From landronimirc at gmail.com  Wed Dec 12 06:59:29 2007
From: landronimirc at gmail.com (Liviu Andronic)
Date: Wed, 12 Dec 2007 06:59:29 +0100
Subject: [R-sig-Geo] [R] Markov Chain Monte Carlo (MCMR) in R for
	spatial simulation.
In-Reply-To: <633896.55815.qm@web56006.mail.re3.yahoo.com>
References: <633896.55815.qm@web56006.mail.re3.yahoo.com>
Message-ID: <68b1e2610712112159x124b964fp221f9a9c628c09c7@mail.gmail.com>

On 12/12/07, Milton Cezar Ribeiro <milton_ruser at yahoo.com.br> wrote:
> Dear all,
>
> I would like to know if is there some MCMR capability (functions) develped to improve spatial explicit landscape simulations in R.

Check the CRAN "Spatial" View [1]. Also search on this page [2] for "markov".

Liviu

[1] http://cran.at.r-project.org/src/contrib/Views/
[2] http://cran.at.r-project.org/src/contrib/PACKAGES.html



From e.pebesma at gmail.com  Wed Dec 12 09:20:59 2007
From: e.pebesma at gmail.com (Edzer Pebesma)
Date: Wed, 12 Dec 2007 09:20:59 +0100
Subject: [R-sig-Geo] Problem installing gstat into R
In-Reply-To: <285eec980712111855o4cf07a29qd8e1ba206f0bf07d@mail.gmail.com>
References: <285eec980712111855o4cf07a29qd8e1ba206f0bf07d@mail.gmail.com>
Message-ID: <475F99EB.1090605@uni-muenster.de>

Edward,

My experiences here are limited; what I always do to install a source 
package is something like:

R CMD INSTALL -l /home/edzer/S/library R/gstat_0.9-42.tar.gz

Could you please verify whether that works?
--
Edzer

Edward Tomlinson wrote:
> Hi List,
>
> I am not entirely sure where i should be asking this question so i will
> start here.
>
> I am trying to install the gstat package into R so it can be used by a
> component of GRASS.
>
> However i cannot get gstat installed. I have already installed spgrass6
> package and its dependencies, however gstat will not install. Details below.
>
> Any ideas would be appreciated.
>
> Further info...
>
> I downloaded and installed from source. Original files came from CRAN
> website.
>
> I followed instructions from Install and Admin manual. It suggested to build
> in the following way...
>
> ./configure --disable-nls --disable-mbcs --enable-R-shlib
> make
>
> Everything worked fine. I have been able to install other packages for R
> such as maptools, spgrass6 and its dependencies.
>
> Thanks,
> Ed
>
> R version 2.6.1 (2007-11-26)
> Copyright (C) 2007 The R Foundation for Statistical Computing
> ISBN 3-900051-07-0
>
>   
>> install.packages("gstat")
>>     
> ...
> Content type 'application/x-tar' length 895559 bytes (874 Kb)
> opened URL
> ==================================================
> downloaded 874 Kb
>
> /usr/local/lib/R/library
> * Installing *source* package 'gstat' ...
> ....
> gcc -std=gnu99 -shared -L/usr/local/lib -o gstat.dll block.o chfactor.o
> copy.o d
> ata.o direct.o err.o fit.o getest.o gls.o glvars.o hsehldr.o init.o ivecop.olex
> .o lm.o lufactor.o machine.o mapio.o matop.o matrixio.o meminfo.o memory.omemst
> at.o msim.o norm.o nsearch.o otherio.o parse.o plot.o polygon.o pqueue.opredict
> .o pxop.o qrfactor.o random.o read.o reml.o report.o s.o select.o sem.o
> sim.o so
> lve.o sparse.o sparseio.o spbkp.o spchfctr.o splufctr.o sprow.o spswap.o
> stat.o
> submat.o userio.o utils.o vario.o vario_fn.o vario_io.o vecop.o version.owritec
> md.o xvalid.o   -L/usr/local/lib/R/lib -lR
> s.o: In function `gstat_predict':
> /tmp/R.INSTALL.uA1352/gstat/src/s.c:495: undefined reference to
> `_R_ProcessEvent
> s'
> /tmp/R.INSTALL.uA1352/gstat/src/s.c:517: undefined reference to
> `_R_ProcessEvent
> s'
> Info: resolving _R_NaReal by linking to __imp__R_NaReal (auto-import)
> Info: resolving _R_DimSymbol by linking to __imp__R_DimSymbol (auto-import)
> collect2: ld returned 1 exit status
> make: *** [gstat.dll ] Error 1
> chmod: cannot access `/usr/local/lib/R/library/gstat/libs/*': No such file
> or di
> rectory
> ERROR: compilation failed for package 'gstat'
> ** Removing '/usr/local/lib/R/library/gstat'
>
>
> Warning message:
> In install.packages("gstat") :
>   installation of package 'gstat' had non-zero exit status
>   
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



From Thierry.ONKELINX at inbo.be  Wed Dec 12 09:46:34 2007
From: Thierry.ONKELINX at inbo.be (ONKELINX, Thierry)
Date: Wed, 12 Dec 2007 09:46:34 +0100
Subject: [R-sig-Geo] How to plot the grid figure using R?
In-Reply-To: <200712120900460319130@gmail.com>
References: <200712120900460319130@gmail.com>
Message-ID: <2E9C414912813E4EB981326983E0A10403FBFA79@inboexch.inbo.be>

Have a look at the "sp" package.

x=runif(100,0,100)
y=runif(100,0,100)
dbh=runif(100,1,100)
rdata=data.frame(x,y,dbh)

library(sp)
coordinates(rdata) <- ~ x + y
spplot(rdata, zcol = "dbh")

HTH,

Thierry 


----------------------------------------------------------------------------
ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and Forest
Cel biometrie, methodologie en kwaliteitszorg / Section biometrics, methodology and quality assurance
Gaverstraat 4
9500 Geraardsbergen
Belgium 
tel. + 32 54/436 185
Thierry.Onkelinx at inbo.be 
www.inbo.be 

Do not put your faith in what statistics say until you have carefully considered what they do not say.  ~William W. Watt
A statistical analysis, properly conducted, is a delicate dissection of uncertainties, a surgery of suppositions. ~M.J.Moroney

-----Oorspronkelijk bericht-----
Van: r-sig-geo-bounces at stat.math.ethz.ch [mailto:r-sig-geo-bounces at stat.math.ethz.ch] Namens Jian Zhang
Verzonden: woensdag 12 december 2007 2:01
Aan: R-help; R_GEO
Onderwerp: [R-sig-Geo] How to plot the grid figure using R?

Now I have the forest plot data with x, y locations, and I measured the DBH for every indivicuals.

The data looks like that:
x=runif(100,0,100)
y=runif(100,0,100)
dbh=runif(100,1,100)
rdata=data.frame(x,y,dbh)
> rdata[1:5,]
           x         y      dbh
1 99.5354145  1.412844 34.10112
2  0.8259361 87.737036 39.12914
3  6.5678613 65.699032 22.55990
4 67.2987881 72.053877 45.83978
5  2.2491372 23.622898 68.77065

My question is: How can I plot the grid (25??25,5??5,...) figure by DBH?
Can you introduce a simply method to do it by R language? I know that it can be done very easy by the software ArcGis.

????????
????????
????????
????????


Thanks very much.

	[[alternative HTML version deleted]]



From Roger.Bivand at nhh.no  Wed Dec 12 10:01:54 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 12 Dec 2007 10:01:54 +0100 (CET)
Subject: [R-sig-Geo] Problem installing gstat into R
In-Reply-To: <475F99EB.1090605@uni-muenster.de>
References: <285eec980712111855o4cf07a29qd8e1ba206f0bf07d@mail.gmail.com>
	<475F99EB.1090605@uni-muenster.de>
Message-ID: <Pine.LNX.4.64.0712120957510.29680@reclus.nhh.no>

On Wed, 12 Dec 2007, Edzer Pebesma wrote:

> Edward,
>
> My experiences here are limited; what I always do to install a source
> package is something like:
>
> R CMD INSTALL -l /home/edzer/S/library R/gstat_0.9-42.tar.gz
>
> Could you please verify whether that works?

>From the output below, I think that we know too little about the system to 
call. What does sessionInfo() say inside R? Secondly, why is your 
./configure the way it is? Did you make install R itself - it looks as 
though the R shared objects are not being found. If gstat doesn't install, 
I'm surprised that rgdal did.

Roger

> --
> Edzer
>
> Edward Tomlinson wrote:
>> Hi List,
>>
>> I am not entirely sure where i should be asking this question so i will
>> start here.
>>
>> I am trying to install the gstat package into R so it can be used by a
>> component of GRASS.
>>
>> However i cannot get gstat installed. I have already installed spgrass6
>> package and its dependencies, however gstat will not install. Details below.
>>
>> Any ideas would be appreciated.
>>
>> Further info...
>>
>> I downloaded and installed from source. Original files came from CRAN
>> website.
>>
>> I followed instructions from Install and Admin manual. It suggested to build
>> in the following way...
>>
>> ./configure --disable-nls --disable-mbcs --enable-R-shlib
>> make
>>
>> Everything worked fine. I have been able to install other packages for R
>> such as maptools, spgrass6 and its dependencies.
>>
>> Thanks,
>> Ed
>>
>> R version 2.6.1 (2007-11-26)
>> Copyright (C) 2007 The R Foundation for Statistical Computing
>> ISBN 3-900051-07-0
>>
>>
>>> install.packages("gstat")
>>>
>> ...
>> Content type 'application/x-tar' length 895559 bytes (874 Kb)
>> opened URL
>> ==================================================
>> downloaded 874 Kb
>>
>> /usr/local/lib/R/library
>> * Installing *source* package 'gstat' ...
>> ....
>> gcc -std=gnu99 -shared -L/usr/local/lib -o gstat.dll block.o chfactor.o
>> copy.o d
>> ata.o direct.o err.o fit.o getest.o gls.o glvars.o hsehldr.o init.o ivecop.olex
>> .o lm.o lufactor.o machine.o mapio.o matop.o matrixio.o meminfo.o memory.omemst
>> at.o msim.o norm.o nsearch.o otherio.o parse.o plot.o polygon.o pqueue.opredict
>> .o pxop.o qrfactor.o random.o read.o reml.o report.o s.o select.o sem.o
>> sim.o so
>> lve.o sparse.o sparseio.o spbkp.o spchfctr.o splufctr.o sprow.o spswap.o
>> stat.o
>> submat.o userio.o utils.o vario.o vario_fn.o vario_io.o vecop.o version.owritec
>> md.o xvalid.o   -L/usr/local/lib/R/lib -lR
>> s.o: In function `gstat_predict':
>> /tmp/R.INSTALL.uA1352/gstat/src/s.c:495: undefined reference to
>> `_R_ProcessEvent
>> s'
>> /tmp/R.INSTALL.uA1352/gstat/src/s.c:517: undefined reference to
>> `_R_ProcessEvent
>> s'
>> Info: resolving _R_NaReal by linking to __imp__R_NaReal (auto-import)
>> Info: resolving _R_DimSymbol by linking to __imp__R_DimSymbol (auto-import)
>> collect2: ld returned 1 exit status
>> make: *** [gstat.dll ] Error 1
>> chmod: cannot access `/usr/local/lib/R/library/gstat/libs/*': No such file
>> or di
>> rectory
>> ERROR: compilation failed for package 'gstat'
>> ** Removing '/usr/local/lib/R/library/gstat'
>>
>>
>> Warning message:
>> In install.packages("gstat") :
>>   installation of package 'gstat' had non-zero exit status
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From Roger.Bivand at nhh.no  Wed Dec 12 10:04:46 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 12 Dec 2007 10:04:46 +0100 (CET)
Subject: [R-sig-Geo] [R] Markov Chain Monte Carlo (MCMR) in R for
 spatial simulation.
In-Reply-To: <68b1e2610712112159x124b964fp221f9a9c628c09c7@mail.gmail.com>
References: <633896.55815.qm@web56006.mail.re3.yahoo.com>
	<68b1e2610712112159x124b964fp221f9a9c628c09c7@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0712121002200.29680@reclus.nhh.no>

On Wed, 12 Dec 2007, Liviu Andronic wrote:

> On 12/12/07, Milton Cezar Ribeiro <milton_ruser at yahoo.com.br> wrote:
>> Dear all,
>>
>> I would like to know if is there some MCMR capability (functions) 
>> develped to improve spatial explicit landscape simulations in R.
>
> Check the CRAN "Spatial" View [1]. Also search on this page [2] for 
> "markov".
>

Checking the task views is always good advice. A bit more detail on what 
"spatial explicit landscape simulations" are would help - can you use 
RandomFields, perhaps not? Can you use mechansisms in MCMCpack - see the 
Bayesian task view as well as the spatial one?

Roger

> Liviu
>
> [1] http://cran.at.r-project.org/src/contrib/Views/
> [2] http://cran.at.r-project.org/src/contrib/PACKAGES.html
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From Roger.Bivand at nhh.no  Wed Dec 12 10:30:15 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 12 Dec 2007 10:30:15 +0100 (CET)
Subject: [R-sig-Geo] How to plot the grid figure using R?
In-Reply-To: <200712120900460319130@gmail.com>
References: <200712120900460319130@gmail.com>
Message-ID: <Pine.LNX.4.64.0712121007330.29680@reclus.nhh.no>

On Wed, 12 Dec 2007, Jian Zhang wrote:

> Now I have the forest plot data with x, y locations, and I measured the DBH for every indivicuals.
>
> The data looks like that:
> x=runif(100,0,100)
> y=runif(100,0,100)
> dbh=runif(100,1,100)
> rdata=data.frame(x,y,dbh)
>> rdata[1:5,]
>           x         y      dbh
> 1 99.5354145  1.412844 34.10112
> 2  0.8259361 87.737036 39.12914
> 3  6.5678613 65.699032 22.55990
> 4 67.2987881 72.053877 45.83978
> 5  2.2491372 23.622898 68.77065
>
> My question is: How can I plot the grid (25??25,5??5,...) figure by DBH? 
> Can you introduce a simply method to do it by R language? I know that it 
> can be done very easy by the software ArcGis.

Yes, but these are vector data, a DBH value at each point. To plot a grid 
(25 by 25, ...), you must assign the values to a grid, and there are lots 
of ways of doing that. Continuing the answer by Thierry Onkelinx:

set.seed(1)
x=runif(100,0,100)
y=runif(100,0,100)
dbh=runif(100,1,100)
rdata=data.frame(x,y,dbh)

library(sp)
coordinates(rdata) <- ~ x + y

grd <- GridTopology(c(2,2), c(4,4), c(25,25))
SP <- as(SpatialGrid(grd), "SpatialPixels")
whre <- overlay(SP, rdata)
SP_rdata <- SpatialPixelsDataFrame(SP, data=data.frame(dbh=rep(NA,
   25*25)))
SP_rdata$dbh[whre] <- rdata$dbh
# this takes the last dbh value is more than one falls in each grid cell
# so a bit more work is needed here
pts <- list("sp.points", rdata)
spplot(SP_rdata, "dbh", sp.layout=list(pts))

Or interpolate, and mask out empty cells:

library(gstat)
SP_rdata2 <- idw(dbh ~ 1, rdata, newdata=SP, idp=2.0, nmax=4)
is.na(SP_rdata2$var1.pred) <- !(1:625 %in% whre)
spplot(SP_rdata2, "var1.pred", sp.layout=list(pts))

for example.

Roger

>
> ????????
> ????????
> ????????
> ????????
>
>
> Thanks very much.
>
 	[[alternative HTML version deleted]]

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From luca_moiana at hotmail.com  Wed Dec 12 15:32:38 2007
From: luca_moiana at hotmail.com (Luca Moiana)
Date: Wed, 12 Dec 2007 06:32:38 -0800
Subject: [R-sig-Geo] Define bordres in geoR using a shape file??
Message-ID: <BAY106-W336EF53FFB4B683861E2518E650@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071212/48c3ad71/attachment.pl>

From Roger.Bivand at nhh.no  Wed Dec 12 19:35:54 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 12 Dec 2007 19:35:54 +0100 (CET)
Subject: [R-sig-Geo] Define bordres in geoR using a shape file??
In-Reply-To: <BAY106-W336EF53FFB4B683861E2518E650@phx.gbl>
References: <BAY106-W336EF53FFB4B683861E2518E650@phx.gbl>
Message-ID: <Pine.LNX.4.64.0712121924240.29680@reclus.nhh.no>

On Wed, 12 Dec 2007, Luca Moiana wrote:

> Hello everyone,
>
> I?m moving
> to R to do gesostatistics and today?s problem is:
>
> I have a shp file of the region I?m considering and I want to define the 
> value ?borders=? in the expression as.geodata.
>
> I imported the shapefile using maptools and I now have a spatial object, 
> I think I have to convert the spatial object in a 2 columns matrix but I 
> have no clue.
>

Please quote a short extract of your commands, and show what sessionInfo() 
says, both help. My reading of the code suggests that if the class of your 
polygons object is "SpatialPolygons", you can pass this through borders=, 
and the internal point-in-polygon function will find which locations= 
points fall inside the polygons. The borders= argument can also be a 
matrix, but it is turned into a SpatialPolygons object internally. Use 
as(<>, "SpatialPolygons") to coerce to SpatialPolygons.

An alternative is to overlay() your input locations (SpatialGrid object) 
with the SpatialPolygons object to make a SpatialPixels object, then take 
coordinates() of that object and pass them through locations=.

Roger

>
> Any help is greatly welcome!!
>
> Luca
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From epistat at gmail.com  Thu Dec 13 05:00:42 2007
From: epistat at gmail.com (zhijie zhang)
Date: Thu, 13 Dec 2007 12:00:42 +0800
Subject: [R-sig-Geo] =?windows-1252?q?maybe_a_new_bug_in_the_elide=28=29_f?=
	=?windows-1252?q?uncftion_for_maptools=92_version_0=2E7-2?=
Message-ID: <2fc17e30712122000o6dba1d9fr20f41af0da6d4f8@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071213/b0a04b2c/attachment.pl>

From Roger.Bivand at nhh.no  Thu Dec 13 07:47:59 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 13 Dec 2007 07:47:59 +0100 (CET)
Subject: [R-sig-Geo]
 =?windows-1252?q?maybe_a_new_bug_in_the_elide=28=29_f?=
 =?windows-1252?q?uncftion_for_maptools=92_version_0=2E7-2?=
In-Reply-To: <2fc17e30712122000o6dba1d9fr20f41af0da6d4f8@mail.gmail.com>
References: <2fc17e30712122000o6dba1d9fr20f41af0da6d4f8@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0712130747060.673@reclus.nhh.no>

On Thu, 13 Dec 2007, zhijie zhang wrote:

> Dear Roger,
>  There maybe a new bug in the new elide() funcftion for maptools' version
> 0.7-2, which was correct in the former version. See below.

Again correct - please simply replace the elide()ed object data slot with 
the original.

Roger

> #Example in the help page
> data(meuse)
> coordinates(meuse) <- c("x", "y")
> proj4string(meuse) <- CRS("+init=epsg:28992")
> data(meuse.riv)
> river_polygon <- Polygons(list(Polygon(meuse.riv)), ID="meuse")
> rivers <- SpatialPolygons(list(river_polygon))
> proj4string(rivers) <- CRS("+init=epsg:28992")
>
> ##maptools' version 0.7-2, the transformed dataset dropped two variables in
> the rightmost: landuse and dist.m.
> meuse1 <- elide(meuse, bb=bbox(rivers), scale=TRUE)
>> meuse[1,]
>       coordinates cadmium copper lead zinc  elev       dist   om ffreq soil
> lime landuse dist.m
> 1 (181072, 333611)    11.7     85  299 1022 7.909 0.00135803 13.6     1
> 1    1      Ah     50
>> meuse1[1,]
>          coordinates      x      y cadmium copper lead zinc  elev
> dist   om ffreq soil lime
> 1 (0.23093, 0.660129) 181072 333611    11.7     85  299 1022 7.909
> 0.00135803 13.6     1    1    1
>
> ##maptools' version 0.6-19 + original elide() function: i can't found the
> former version for maptools package with elide() function, but i use the
> elide() function that you sent me for the 1st time to show its results. You
> can try the former version.
> meuse1 <- elide(meuse, bb=bbox(rivers), scale=TRUE)
>> meuse[1,]
>       coordinates cadmium copper lead zinc  elev       dist   om ffreq soil
> lime landuse dist.m
> 1 (181072, 333611)    11.7     85  299 1022 7.909 0.00135803 13.6     1
> 1    1      Ah     50
>> meuse1[1,]  #it didn't drop any variables
>          coordinates cadmium copper lead zinc  elev       dist   om ffreq
> soil lime landuse dist.m
> 1 (0.23093, 0.660129)    11.7     85  299 1022 7.909 0.00135803 13.6
> 1    1    1      Ah     50
>
> The reason maybe the latest version remains the original x/y coordinates
> that resulted in overlaying the rightmost two variables, while the former
> version dropped the original x/y coordinates . So i think two additional
> colunms maybe needed there.
>  Thanks.
>
>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From e.j.tommo at gmail.com  Thu Dec 13 08:01:51 2007
From: e.j.tommo at gmail.com (Edward Tomlinson)
Date: Thu, 13 Dec 2007 18:01:51 +1100
Subject: [R-sig-Geo] Problem installing gstat into R
In-Reply-To: <Pine.LNX.4.64.0712120957510.29680@reclus.nhh.no>
References: <285eec980712111855o4cf07a29qd8e1ba206f0bf07d@mail.gmail.com>
	<475F99EB.1090605@uni-muenster.de>
	<Pine.LNX.4.64.0712120957510.29680@reclus.nhh.no>
Message-ID: <285eec980712122301p6b3a6f98yad3545e2fbbfbd7f@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071213/d8acd6c0/attachment.pl>

From edzer.pebesma at uni-muenster.de  Thu Dec 13 09:41:15 2007
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 13 Dec 2007 09:41:15 +0100
Subject: [R-sig-Geo] [Gstat-info] Re:  Problem installing gstat into R
In-Reply-To: <285eec980712122301p6b3a6f98yad3545e2fbbfbd7f@mail.gmail.com>
References: <285eec980712111855o4cf07a29qd8e1ba206f0bf07d@mail.gmail.com>	<475F99EB.1090605@uni-muenster.de>	<Pine.LNX.4.64.0712120957510.29680@reclus.nhh.no>
	<285eec980712122301p6b3a6f98yad3545e2fbbfbd7f@mail.gmail.com>
Message-ID: <4760F02B.4090906@uni-muenster.de>

I guess then that is the issue: cygwin is not well supported, or causing 
trouble, for reasons beyond my comprehension. Why not use the standard 
windows distribution?
--
Edzer

Edward Tomlinson schrieb:
> Hi Edzer and Roger,
>  
> The R ./configure was taken from the Installation and Administration 
> manual for installing R on Cygwin.
>  
> i have tried R CMD INSTALL ./gstat_0.9-42.tar.gz with the same result 
> as install.packages.
>  
> Results from session info.
> > sessionInfo()
> R version 2.6.1 (2007-11-26)
> i686-pc-cygwin
>
> locale:
> C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> loaded via a namespace (and not attached):
> [1] rcompgen_0.1-17
> >
>  
>
> rgdal loads okay (have not tested for working)
> > library(rgdal)
> Loading required package: sp
> Geospatial Data Abstraction Library extensions to R successfully loaded
> >
>  
> Thank you for helping me with the problem.
>  
> CHeers,
> Ed
>  
> On 12/12/2007, *Roger Bivand* <Roger.Bivand at nhh.no 
> <mailto:Roger.Bivand at nhh.no>> wrote:
>
>     On Wed, 12 Dec 2007, Edzer Pebesma wrote:
>
>     > Edward,
>     >
>     > My experiences here are limited; what I always do to install a
>     source
>     > package is something like:
>     >
>     > R CMD INSTALL -l /home/edzer/S/library R/gstat_0.9-42.tar.gz
>     >
>     > Could you please verify whether that works?
>
>     From the output below, I think that we know too little about the
>     system to
>     call. What does sessionInfo() say inside R? Secondly, why is your
>     ./configure the way it is? Did you make install R itself - it looks as
>     though the R shared objects are not being found. If gstat doesn't
>     install,
>     I'm surprised that rgdal did.
>
>     Roger
>
>     > --
>     > Edzer
>     >
>     > Edward Tomlinson wrote:
>     >> Hi List,
>     >>
>     >> I am not entirely sure where i should be asking this question
>     so i will
>     >> start here.
>     >>
>     >> I am trying to install the gstat package into R so it can be
>     used by a
>     >> component of GRASS.
>     >>
>     >> However i cannot get gstat installed. I have already installed
>     spgrass6
>     >> package and its dependencies, however gstat will not install.
>     Details below.
>     >>
>     >> Any ideas would be appreciated.
>     >>
>     >> Further info...
>     >>
>     >> I downloaded and installed from source. Original files came
>     from CRAN
>     >> website.
>     >>
>     >> I followed instructions from Install and Admin manual. It
>     suggested to build
>     >> in the following way...
>     >>
>     >> ./configure --disable-nls --disable-mbcs --enable-R-shlib
>     >> make
>     >>
>     >> Everything worked fine. I have been able to install other
>     packages for R
>     >> such as maptools, spgrass6 and its dependencies.
>     >>
>     >> Thanks,
>     >> Ed
>     >>
>     >> R version 2.6.1 (2007-11-26)
>     >> Copyright (C) 2007 The R Foundation for Statistical Computing
>     >> ISBN 3-900051-07-0
>     >>
>     >>
>     >>> install.packages("gstat")
>     >>>
>     >> ...
>     >> Content type 'application/x-tar' length 895559 bytes (874 Kb)
>     >> opened URL
>     >> ==================================================
>     >> downloaded 874 Kb
>     >>
>     >> /usr/local/lib/R/library
>     >> * Installing *source* package 'gstat' ...
>     >> ....
>     >> gcc -std=gnu99 -shared -L/usr/local/lib -o gstat.dll block.o
>     chfactor.o
>     >> copy.o d
>     >> ata.o direct.o err.o fit.o getest.o gls.o glvars.o hsehldr.o
>     init.o ivecop.olex
>     >> .o lm.o lufactor.o machine.o mapio.o matop.o matrixio.o
>     meminfo.o memory.omemst
>     >> at.o msim.o norm.o nsearch.o otherio.o parse.o plot.o polygon.o
>     pqueue.opredict
>     >> .o pxop.o qrfactor.o random.o read.o reml.o report.o s.o
>     select.o sem.o
>     >> sim.o so
>     >> lve.o sparse.o sparseio.o spbkp.o spchfctr.o splufctr.o sprow.o
>     spswap.o
>     >> stat.o
>     >> submat.o userio.o utils.o vario.o vario_fn.o vario_io.o vecop.o
>     version.owritec
>     >> md.o xvalid.o   -L/usr/local/lib/R/lib -lR
>     >> s.o: In function `gstat_predict':
>     >> /tmp/R.INSTALL.uA1352/gstat/src/s.c:495: undefined reference to
>     >> `_R_ProcessEvent
>     >> s'
>     >> /tmp/R.INSTALL.uA1352/gstat/src/s.c:517: undefined reference to
>     >> `_R_ProcessEvent
>     >> s'
>     >> Info: resolving _R_NaReal by linking to __imp__R_NaReal
>     (auto-import)
>     >> Info: resolving _R_DimSymbol by linking to __imp__R_DimSymbol
>     (auto-import)
>     >> collect2: ld returned 1 exit status
>     >> make: *** [gstat.dll ] Error 1
>     >> chmod: cannot access `/usr/local/lib/R/library/gstat/libs/*':
>     No such file
>     >> or di
>     >> rectory
>     >> ERROR: compilation failed for package 'gstat'
>     >> ** Removing '/usr/local/lib/R/library/gstat'
>     >>
>     >>
>     >> Warning message:
>     >> In install.packages("gstat") :
>     >>   installation of package 'gstat' had non-zero exit status
>     >>
>     >>
>     >>      [[alternative HTML version deleted]]
>     >>
>     >> _______________________________________________
>     >> R-sig-Geo mailing list
>     >> R-sig-Geo at stat.math.ethz.ch <mailto:R-sig-Geo at stat.math.ethz.ch>
>     >> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>     >>
>     >
>     > _______________________________________________
>     > R-sig-Geo mailing list
>     > R-sig-Geo at stat.math.ethz.ch <mailto:R-sig-Geo at stat.math.ethz.ch>
>     > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>     <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>     >
>
>     --
>     Roger Bivand
>     Economic Geography Section, Department of Economics, Norwegian
>     School of
>     Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>     Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>     e-mail: Roger.Bivand at nhh.no <mailto:Roger.Bivand at nhh.no>
>
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> Gstat-info mailing list
> Gstat-info at geo.uu.nl
> http://mailman.geo.uu.nl/mailman/listinfo/gstat-info
>



From luca_moiana at hotmail.com  Thu Dec 13 10:58:13 2007
From: luca_moiana at hotmail.com (Luca Moiana)
Date: Thu, 13 Dec 2007 01:58:13 -0800
Subject: [R-sig-Geo] Define bordres in geoR using a shape file??
In-Reply-To: <Pine.LNX.4.64.0712121924240.29680@reclus.nhh.no>
References: <BAY106-W336EF53FFB4B683861E2518E650@phx.gbl>
	<Pine.LNX.4.64.0712121924240.29680@reclus.nhh.no>
Message-ID: <BAY106-W20E53CAA3533134EEE0E5A8E660@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071213/0c391cfc/attachment.pl>

From loecher at eden.rutgers.edu  Thu Dec 13 16:23:35 2007
From: loecher at eden.rutgers.edu (Markus Loecher)
Date: Thu, 13 Dec 2007 10:23:35 -0500 (EST)
Subject: [R-sig-Geo] point.in.polygon() on massive datasets
Message-ID: <8517866.3621197559414832.JavaMail.tomcat@aveo>

Dear all,
I have a dataset of about 50 million lat/lon coordinates each of which falls into one of 550 polygons.
I need to assign their memberships and have used point.in.polygon() for that purpose.
However, the simple way of looping over the 50 million points clearly takes a looong time; 1 million points took about 3-4 days on a fast Linux server with lots of memory.
Am I overlooking obvious ways of making this massive computation more efficient ? Would R trees help ?
Should I try to compile the C code for point.in.polygon() (available from gstat) and run it outside R as a standalone executable ?
I am already using apply() to mitigate the inefficiency of the for loop in R.

Any help would be greatly appreciated,

Thanks,

Markus



From b.rowlingson at lancaster.ac.uk  Thu Dec 13 17:30:50 2007
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Thu, 13 Dec 2007 16:30:50 +0000
Subject: [R-sig-Geo] point.in.polygon() on massive datasets
In-Reply-To: <8517866.3621197559414832.JavaMail.tomcat@aveo>
References: <8517866.3621197559414832.JavaMail.tomcat@aveo>
Message-ID: <47615E3A.3010501@lancaster.ac.uk>

Markus Loecher wrote:
> Dear all,
> I have a dataset of about 50 million lat/lon coordinates each of which falls into one of 550 polygons.
> I need to assign their memberships and have used point.in.polygon() for that purpose.
> However, the simple way of looping over the 50 million points clearly takes a looong time; 1 million points took about 3-4 days on a fast Linux server with lots of memory.
> Am I overlooking obvious ways of making this massive computation more efficient ? Would R trees help ?
> Should I try to compile the C code for point.in.polygon() (available from gstat) and run it outside R as a standalone executable ?
> I am already using apply() to mitigate the inefficiency of the for loop in R.
> 
> Any help would be greatly appreciated,
> 

  Have you tried the 'overlay' functions from the sp package? Overlaying 
points on polygons using those checks all the polygons for each point in 
one go, so it may do some spatial tree optimising... You might have to 
do your 50 million points in batches though...

Barry



From edzer.pebesma at uni-muenster.de  Thu Dec 13 17:40:10 2007
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 13 Dec 2007 17:40:10 +0100
Subject: [R-sig-Geo] point.in.polygon() on massive datasets
In-Reply-To: <47615E3A.3010501@lancaster.ac.uk>
References: <8517866.3621197559414832.JavaMail.tomcat@aveo>
	<47615E3A.3010501@lancaster.ac.uk>
Message-ID: <4761606A.5010903@uni-muenster.de>

overlay for points in polygons is a wrapper around point.in.polygon, the 
same that is used in gstat. What I miss in the R code (and C source 
code) is e.g. the checking on the bbox, whether the point is within the 
bounding box of a polygon, although the bbox is computed.

It would of course speed things up increadibly when using tree indexes, 
either on the points or on the polygons, or preferably both, but this is 
currently not in the sp code. A nice student project!
--
Edzer

Barry Rowlingson schrieb:
> Markus Loecher wrote:
>   
>> Dear all,
>> I have a dataset of about 50 million lat/lon coordinates each of which falls into one of 550 polygons.
>> I need to assign their memberships and have used point.in.polygon() for that purpose.
>> However, the simple way of looping over the 50 million points clearly takes a looong time; 1 million points took about 3-4 days on a fast Linux server with lots of memory.
>> Am I overlooking obvious ways of making this massive computation more efficient ? Would R trees help ?
>> Should I try to compile the C code for point.in.polygon() (available from gstat) and run it outside R as a standalone executable ?
>> I am already using apply() to mitigate the inefficiency of the for loop in R.
>>
>> Any help would be greatly appreciated,
>>
>>     
>
>   Have you tried the 'overlay' functions from the sp package? Overlaying 
> points on polygons using those checks all the polygons for each point in 
> one go, so it may do some spatial tree optimising... You might have to 
> do your 50 million points in batches though...
>
> Barry
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



From Roger.Bivand at nhh.no  Thu Dec 13 22:25:58 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 13 Dec 2007 22:25:58 +0100 (CET)
Subject: [R-sig-Geo] point.in.polygon() on massive datasets
In-Reply-To: <4761606A.5010903@uni-muenster.de>
References: <8517866.3621197559414832.JavaMail.tomcat@aveo>
	<47615E3A.3010501@lancaster.ac.uk> <4761606A.5010903@uni-muenster.de>
Message-ID: <Pine.LNX.4.64.0712132214030.11709@reclus.nhh.no>

On Thu, 13 Dec 2007, Edzer Pebesma wrote:

> overlay for points in polygons is a wrapper around point.in.polygon, the
> same that is used in gstat. What I miss in the R code (and C source
> code) is e.g. the checking on the bbox, whether the point is within the
> bounding box of a polygon, although the bbox is computed.

That's right - as it is there is an lapply() on the Polygon objects in 
each Polygons object with hole handling inside an lapply() on the Polygons 
objects in the SpatialPolygons object.

res <- lapply(slot(xx, "polygons"), bbox)

gets the bbox'es of the xx SpatialPolygons* object, and you could build a 
fast searcher in C with code in spdep/src/insiders.c:

int between(double x, double low, double up) {
 	if (x >= low && x <= up) return(1);
 	else return(0);
}

int pipbb(double pt1, double pt2, double *bbs) {
 	if ((between(pt1, bbs[0], bbs[2]) == 1) &&
 		(between(pt2, bbs[1], bbs[3]) == 1)) return(1);
 	else return(0);
}

in a compiled loop. You'd look to get a list 50M long with integer vectors 
for candidate members, then only do p-in-p for the candidate Polygons 
objects.

Roger

>
> It would of course speed things up increadibly when using tree indexes,
> either on the points or on the polygons, or preferably both, but this is
> currently not in the sp code. A nice student project!
> --
> Edzer
>
> Barry Rowlingson schrieb:
>> Markus Loecher wrote:
>>
>>> Dear all,
>>> I have a dataset of about 50 million lat/lon coordinates each of which falls into one of 550 polygons.
>>> I need to assign their memberships and have used point.in.polygon() for that purpose.
>>> However, the simple way of looping over the 50 million points clearly takes a looong time; 1 million points took about 3-4 days on a fast Linux server with lots of memory.
>>> Am I overlooking obvious ways of making this massive computation more efficient ? Would R trees help ?
>>> Should I try to compile the C code for point.in.polygon() (available from gstat) and run it outside R as a standalone executable ?
>>> I am already using apply() to mitigate the inefficiency of the for loop in R.
>>>
>>> Any help would be greatly appreciated,
>>>
>>>
>>
>>   Have you tried the 'overlay' functions from the sp package? Overlaying
>> points on polygons using those checks all the polygons for each point in
>> one go, so it may do some spatial tree optimising... You might have to
>> do your 50 million points in batches though...
>>
>> Barry
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From Roger.Bivand at nhh.no  Thu Dec 13 22:39:54 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 13 Dec 2007 22:39:54 +0100 (CET)
Subject: [R-sig-Geo] [Gstat-info] Re:  Problem installing gstat into R
In-Reply-To: <4760F02B.4090906@uni-muenster.de>
References: <285eec980712111855o4cf07a29qd8e1ba206f0bf07d@mail.gmail.com>
	<475F99EB.1090605@uni-muenster.de>
	<Pine.LNX.4.64.0712120957510.29680@reclus.nhh.no>
	<285eec980712122301p6b3a6f98yad3545e2fbbfbd7f@mail.gmail.com>
	<4760F02B.4090906@uni-muenster.de>
Message-ID: <Pine.LNX.4.64.0712132234120.11709@reclus.nhh.no>

On Thu, 13 Dec 2007, Edzer Pebesma wrote:

> I guess then that is the issue: cygwin is not well supported, or causing 
> trouble, for reasons beyond my comprehension. Why not use the standard 
> windows distribution?

It looks like a cygwin/WIN32 crash - the lines given try to call R 
functions only (I think) available in the Win32 build:

# ifdef WIN32
 	R_FlushConsole();
 	R_ProcessEvents();
# endif

and

#ifdef USING_R
# ifdef WIN32
 		R_ProcessEvents(); /* avoid terminal freeze in R/Win */
# endif
 		R_CheckUserInterrupt();
#endif

respectively. Could you try commenting out those blocks in gstat/src/s.c - 
a nasty fix, but may get you something you can use but cannot interupt?

Building R on cygwin is such a rough ride that I guess you didn't have a 
feasible alternative, but as Edzer says, it puts you very much on your 
own.

Roger

PS:

in gstat/src:

$ grep WIN32 *.[ch]
defaults.h:#ifndef WIN32
defs.h:#ifdef SPLUS6WIN32
defs.h:#  ifndef WIN32
defs.h:#   define WIN32
defs.h:# elif defined (WIN32) /* NT/98/9x/? */
plot.c:#ifdef WIN32
plot.c:#ifdef WIN32
s.c:# ifdef WIN32
s.c:# ifdef WIN32
s.c:#ifndef WIN32


> --
> Edzer
>
> Edward Tomlinson schrieb:
>>  Hi Edzer and Roger,
>>
>>  The R ./configure was taken from the Installation and Administration
>>  manual for installing R on Cygwin.
>>
>>  i have tried R CMD INSTALL ./gstat_0.9-42.tar.gz with the same result as
>>  install.packages.
>>
>>  Results from session info.
>> >  sessionInfo()
>>  R version 2.6.1 (2007-11-26)
>>  i686-pc-cygwin
>>
>>  locale:
>>  C
>>
>>  attached base packages:
>>  [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>>  loaded via a namespace (and not attached):
>>  [1] rcompgen_0.1-17
>> >
>> 
>>
>>  rgdal loads okay (have not tested for working)
>> >  library(rgdal)
>>  Loading required package: sp
>>  Geospatial Data Abstraction Library extensions to R successfully loaded
>> >
>>
>>  Thank you for helping me with the problem.
>>
>>  CHeers,
>>  Ed
>>
>>  On 12/12/2007, *Roger Bivand* <Roger.Bivand at nhh.no
>>  <mailto:Roger.Bivand at nhh.no>> wrote:
>>
>>      On Wed, 12 Dec 2007, Edzer Pebesma wrote:
>> 
>> >  Edward,
>> > 
>> >  My experiences here are limited; what I always do to install a
>>      source
>> >  package is something like:
>> > 
>> >  R CMD INSTALL -l /home/edzer/S/library R/gstat_0.9-42.tar.gz
>> > 
>> >  Could you please verify whether that works?
>>
>>      From the output below, I think that we know too little about the
>>      system to
>>      call. What does sessionInfo() say inside R? Secondly, why is your
>>      ./configure the way it is? Did you make install R itself - it looks as
>>      though the R shared objects are not being found. If gstat doesn't
>>      install,
>>      I'm surprised that rgdal did.
>>
>>      Roger
>> 
>> >  --
>> >  Edzer
>> > 
>> >  Edward Tomlinson wrote:
>> > >  Hi List,
>> > > 
>> > >  I am not entirely sure where i should be asking this question
>>      so i will
>> > >  start here.
>> > > 
>> > >  I am trying to install the gstat package into R so it can be
>>      used by a
>> > >  component of GRASS.
>> > > 
>> > >  However i cannot get gstat installed. I have already installed
>>      spgrass6
>> > >  package and its dependencies, however gstat will not install.
>>      Details below.
>> > > 
>> > >  Any ideas would be appreciated.
>> > > 
>> > >  Further info...
>> > > 
>> > >  I downloaded and installed from source. Original files came
>>      from CRAN
>> > >  website.
>> > > 
>> > >  I followed instructions from Install and Admin manual. It
>>      suggested to build
>> > >  in the following way...
>> > > 
>> > >  ./configure --disable-nls --disable-mbcs --enable-R-shlib
>> > >  make
>> > > 
>> > >  Everything worked fine. I have been able to install other
>>      packages for R
>> > >  such as maptools, spgrass6 and its dependencies.
>> > > 
>> > >  Thanks,
>> > >  Ed
>> > > 
>> > >  R version 2.6.1 (2007-11-26)
>> > >  Copyright (C) 2007 The R Foundation for Statistical Computing
>> > >  ISBN 3-900051-07-0
>> > > 
>> > > 
>> > > >  install.packages("gstat")
>> > > > 
>> > >  ...
>> > >  Content type 'application/x-tar' length 895559 bytes (874 Kb)
>> > >  opened URL
>> > >  ==================================================
>> > >  downloaded 874 Kb
>> > > 
>> > >  /usr/local/lib/R/library
>> > >  * Installing *source* package 'gstat' ...
>> > >  ....
>> > >  gcc -std=gnu99 -shared -L/usr/local/lib -o gstat.dll block.o
>>      chfactor.o
>> > >  copy.o d
>> > >  ata.o direct.o err.o fit.o getest.o gls.o glvars.o hsehldr.o
>>      init.o ivecop.olex
>> > >  .o lm.o lufactor.o machine.o mapio.o matop.o matrixio.o
>>      meminfo.o memory.omemst
>> > >  at.o msim.o norm.o nsearch.o otherio.o parse.o plot.o polygon.o
>>      pqueue.opredict
>> > >  .o pxop.o qrfactor.o random.o read.o reml.o report.o s.o
>>      select.o sem.o
>> > >  sim.o so
>> > >  lve.o sparse.o sparseio.o spbkp.o spchfctr.o splufctr.o sprow.o
>>      spswap.o
>> > >  stat.o
>> > >  submat.o userio.o utils.o vario.o vario_fn.o vario_io.o vecop.o
>>      version.owritec
>> > >  md.o xvalid.o   -L/usr/local/lib/R/lib -lR
>> > >  s.o: In function `gstat_predict':
>> > >  /tmp/R.INSTALL.uA1352/gstat/src/s.c:495: undefined reference to
>> > >  `_R_ProcessEvent
>> > >  s'
>> > >  /tmp/R.INSTALL.uA1352/gstat/src/s.c:517: undefined reference to
>> > >  `_R_ProcessEvent
>> > >  s'
>> > >  Info: resolving _R_NaReal by linking to __imp__R_NaReal
>>      (auto-import)
>> > >  Info: resolving _R_DimSymbol by linking to __imp__R_DimSymbol
>>      (auto-import)
>> > >  collect2: ld returned 1 exit status
>> > >  make: *** [gstat.dll ] Error 1
>> > >  chmod: cannot access `/usr/local/lib/R/library/gstat/libs/*':
>>      No such file
>> > >  or di
>> > >  rectory
>> > >  ERROR: compilation failed for package 'gstat'
>> > >  ** Removing '/usr/local/lib/R/library/gstat'
>> > > 
>> > > 
>> > >  Warning message:
>> > >  In install.packages("gstat") :
>> > >    installation of package 'gstat' had non-zero exit status
>> > > 
>> > > 
>> > >       [[alternative HTML version deleted]]
>> > > 
>> > >  _______________________________________________
>> > >  R-sig-Geo mailing list
>> > >  R-sig-Geo at stat.math.ethz.ch <mailto:R-sig-Geo at stat.math.ethz.ch>
>> > >  https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> > > 
>> > 
>> >  _______________________________________________
>> >  R-sig-Geo mailing list
>> >  R-sig-Geo at stat.math.ethz.ch <mailto:R-sig-Geo at stat.math.ethz.ch>
>> >  https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>      <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>> > 
>>
>>      --
>>      Roger Bivand
>>      Economic Geography Section, Department of Economics, Norwegian
>>      School of
>>      Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>>      Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>>      e-mail: Roger.Bivand at nhh.no <mailto:Roger.Bivand at nhh.no>
>> 
>>
>>  ------------------------------------------------------------------------
>>
>>  _______________________________________________
>>  Gstat-info mailing list
>>  Gstat-info at geo.uu.nl
>>  http://mailman.geo.uu.nl/mailman/listinfo/gstat-info
>> 
>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From Ingo.Holz at uni-hohenheim.de  Fri Dec 14 08:55:06 2007
From: Ingo.Holz at uni-hohenheim.de (Ingo Holz)
Date: Fri, 14 Dec 2007 08:55:06 +0100
Subject: [R-sig-Geo] overlay(SpatialPolygonsDataFrame,
	SpatialPointsDataFrame)
Message-ID: <476244EA.915.123030@ingoholz.uni-hohenheim.de>

Hi,

 I have a SpatialPolygonsDataFrame (SPolyDF) and a 
SpatialPointsDataFrame(SPoiDF). The SPolyDF is a (very) large set of 
polygons (some 30.000) and the SPoiDF is actually a grid of some 60.000 
points.

 I would like to use overlay(SPolyDF, SPoiDF) to get the information of the 
Polygon in a grid, because most of the other information I use is stored / 
provided in grids.

 I have two problems:

 1) my PC doesn't have enough memory to do this in "one step".

 2) Therefore I used a loop like 

 result <- numeric(60000)
 for (i in 1:60000) {
    res <- overlay(SPolyDF[,"name"], SPoiDF[i,]
    result[i] <- as.numeric(res)
    }

 This needs a lot of time.

Is there an easier and/or faster way to get this information with R?

Thanks, Ingo



From Roger.Bivand at nhh.no  Fri Dec 14 16:20:51 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 14 Dec 2007 16:20:51 +0100 (CET)
Subject: [R-sig-Geo] overlay(SpatialPolygonsDataFrame,
	SpatialPointsDataFrame)
In-Reply-To: <476244EA.915.123030@ingoholz.uni-hohenheim.de>
References: <476244EA.915.123030@ingoholz.uni-hohenheim.de>
Message-ID: <Pine.LNX.4.64.0712141616480.15286@reclus.nhh.no>

On Fri, 14 Dec 2007, Ingo Holz wrote:

> Hi,
>
> I have a SpatialPolygonsDataFrame (SPolyDF) and a
> SpatialPointsDataFrame(SPoiDF). The SPolyDF is a (very) large set of
> polygons (some 30.000) and the SPoiDF is actually a grid of some 60.000
> points.
>
> I would like to use overlay(SPolyDF, SPoiDF) to get the information of the
> Polygon in a grid, because most of the other information I use is stored /
> provided in grids.
>
> I have two problems:

This is very similar to the thread beginning here:

https://stat.ethz.ch/pipermail/r-sig-geo/2007-December/002929.html

started yesterday. The issue is the number of polygons, because each 
polygon is passed the full set of points. The short cut suggested in that 
thread was to find out which polygon bounding boxes the points fell 
inside, and then check that much smaller set. This is not in the current 
code in sp, but contributions are welcome.

Roger

>
> 1) my PC doesn't have enough memory to do this in "one step".
>
> 2) Therefore I used a loop like
>
> result <- numeric(60000)
> for (i in 1:60000) {
>    res <- overlay(SPolyDF[,"name"], SPoiDF[i,]
>    result[i] <- as.numeric(res)
>    }
>
> This needs a lot of time.
>
> Is there an easier and/or faster way to get this information with R?
>
> Thanks, Ingo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From jgalkows at akamai.com  Fri Dec 14 20:27:00 2007
From: jgalkows at akamai.com (Galkowski, Jan)
Date: Fri, 14 Dec 2007 14:27:00 -0500
Subject: [R-sig-Geo] point.in.polygon() on massive datasets
Message-ID: <76EB4827B2104D40AE7E43AA5D8582EA1B43AD@MAVS1.kendall.corp.akamai.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071214/3264cdd2/attachment.pl>

From epistat at gmail.com  Sun Dec 16 05:40:46 2007
From: epistat at gmail.com (zhijie zhang)
Date: Sun, 16 Dec 2007 12:40:46 +0800
Subject: [R-sig-Geo]
	=?windows-1252?q?maybe_a_new_bug_in_the_elide=28=29_f?=
	=?windows-1252?q?uncftion_for_maptools=92_version_0=2E7-2?=
In-Reply-To: <Pine.LNX.4.64.0712132226560.11709@reclus.nhh.no>
References: <2fc17e30712122000o6dba1d9fr20f41af0da6d4f8@mail.gmail.com>
	<Pine.LNX.4.64.0712130747060.673@reclus.nhh.no>
	<2fc17e30712130911h2c22ab8m58f21ab807e26f88@mail.gmail.com>
	<Pine.LNX.4.64.0712132226560.11709@reclus.nhh.no>
Message-ID: <2fc17e30712152040j4e72f3cfi87bce98380f8ce9a@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071216/4b9b3d34/attachment.pl>

From Roger.Bivand at nhh.no  Mon Dec 17 13:14:09 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 17 Dec 2007 13:14:09 +0100 (CET)
Subject: [R-sig-Geo] point.in.polygon() on massive datasets
In-Reply-To: <Pine.LNX.4.64.0712132214030.11709@reclus.nhh.no>
References: <8517866.3621197559414832.JavaMail.tomcat@aveo>
	<47615E3A.3010501@lancaster.ac.uk> <4761606A.5010903@uni-muenster.de>
	<Pine.LNX.4.64.0712132214030.11709@reclus.nhh.no>
Message-ID: <Pine.LNX.4.64.0712171258020.13040@reclus.nhh.no>

On Thu, 13 Dec 2007, Roger Bivand wrote:

> On Thu, 13 Dec 2007, Edzer Pebesma wrote:
>

A fix using polygon bounding box pre-selection of points is on r-spatial 
CVS.

For Markus' problem, it should help a good deal - for larger numbers of 
points I'm seeing over an order of magnitude speedups (100,000 point on 
100 polygons on an older box in about 10 seconds, about 100 on a much 
faster box). I'd take 5M point chunks, possibly by subsetting the points 
spatially.

For Ingo's problem (many polygons), it may help directly, or perhaps 
taking subsets of polygons may still be needed. It still has to loop over 
the list of polygons, there is no easy way round this. An alternative 
might be using nearest neighbours to polygon centroids

Until this is tried out, the checkout is for a CVS copy of the source:

http://sourceforge.net/cvs/?group_id=84357, modulename sp

If you'd like a copy of the draft package as a source tarball or Windows 
binary, please let me know, because this need to be compared against the 
actual problems before it is released.

Roger

>> overlay for points in polygons is a wrapper around point.in.polygon, the
>> same that is used in gstat. What I miss in the R code (and C source
>> code) is e.g. the checking on the bbox, whether the point is within the
>> bounding box of a polygon, although the bbox is computed.
>
> That's right - as it is there is an lapply() on the Polygon objects in
> each Polygons object with hole handling inside an lapply() on the Polygons
> objects in the SpatialPolygons object.
>
> res <- lapply(slot(xx, "polygons"), bbox)
>
> gets the bbox'es of the xx SpatialPolygons* object, and you could build a
> fast searcher in C with code in spdep/src/insiders.c:
>
> int between(double x, double low, double up) {
> 	if (x >= low && x <= up) return(1);
> 	else return(0);
> }
>
> int pipbb(double pt1, double pt2, double *bbs) {
> 	if ((between(pt1, bbs[0], bbs[2]) == 1) &&
> 		(between(pt2, bbs[1], bbs[3]) == 1)) return(1);
> 	else return(0);
> }
>
> in a compiled loop. You'd look to get a list 50M long with integer vectors
> for candidate members, then only do p-in-p for the candidate Polygons
> objects.
>
> Roger
>
>>
>> It would of course speed things up increadibly when using tree indexes,
>> either on the points or on the polygons, or preferably both, but this is
>> currently not in the sp code. A nice student project!
>> --
>> Edzer
>>
>> Barry Rowlingson schrieb:
>>> Markus Loecher wrote:
>>>
>>>> Dear all,
>>>> I have a dataset of about 50 million lat/lon coordinates each of which falls into one of 550 polygons.
>>>> I need to assign their memberships and have used point.in.polygon() for that purpose.
>>>> However, the simple way of looping over the 50 million points clearly takes a looong time; 1 million points took about 3-4 days on a fast Linux server with lots of memory.
>>>> Am I overlooking obvious ways of making this massive computation more efficient ? Would R trees help ?
>>>> Should I try to compile the C code for point.in.polygon() (available from gstat) and run it outside R as a standalone executable ?
>>>> I am already using apply() to mitigate the inefficiency of the for loop in R.
>>>>
>>>> Any help would be greatly appreciated,
>>>>
>>>>
>>>
>>>   Have you tried the 'overlay' functions from the sp package? Overlaying
>>> points on polygons using those checks all the polygons for each point in
>>> one go, so it may do some spatial tree optimising... You might have to
>>> do your 50 million points in batches though...
>>>
>>> Barry
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From parrella at fas.harvard.edu  Mon Dec 17 17:29:47 2007
From: parrella at fas.harvard.edu (Justin Parrella)
Date: Mon, 17 Dec 2007 11:29:47 -0500
Subject: [R-sig-Geo] azequidistant map projection
Message-ID: <4766A3FB.9080900@fas.harvard.edu>

Hi,
I'm using the map projection azequidistant(), but can't find 
documentation on what units the output is given in. Does anyone know? 
Thanks in advance!
Justin



From Roger.Bivand at nhh.no  Mon Dec 17 21:49:24 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 17 Dec 2007 21:49:24 +0100 (CET)
Subject: [R-sig-Geo] azequidistant map projection
In-Reply-To: <4766A3FB.9080900@fas.harvard.edu>
References: <4766A3FB.9080900@fas.harvard.edu>
Message-ID: <Pine.LNX.4.64.0712172143200.13040@reclus.nhh.no>

On Mon, 17 Dec 2007, Justin Parrella wrote:

> Hi,
> I'm using the map projection azequidistant(), but can't find
> documentation on what units the output is given in. Does anyone know?

It is not documented on the mapproject() help page, and it would be most 
helpful if it was (CC to maintainer). From experience, the output 
coordinates from mapproject() seem to be in some kind of screen graphics 
coordinates, not related in any direct way to units on the ground:

library(mapproj)
dta <- map("world", xlim=c(-120, -60), ylim=c(0,90), plot=FALSE)
plot(dta, type="l")
plot(mapproject(dta, projection="azequidistant"), type="l")
library(maptools)
dta1 <- map2SpatialLines(dta)
summary(dta1)
proj4string(dta1) <- CRS("+proj=longlat")
summary(dta1)
plot(dta1, axes=TRUE)
library(rgdal)
dta2 <- spTransform(dta1, CRS("+proj=aeqd +lat_0=45 +lon_0=-90"))
summary(dta2)
plot(dta2, axes=TRUE)

uses PROJ.4:

http://www.remotesensing.org/geotiff/proj_list/azimuthal_equidistant.html

which also allows you to set parameters. The units are in meters.

Hope this helps,

Roger

> Thanks in advance!
> Justin
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From jgalkows at akamai.com  Mon Dec 17 23:27:35 2007
From: jgalkows at akamai.com (Galkowski, Jan)
Date: Mon, 17 Dec 2007 17:27:35 -0500
Subject: [R-sig-Geo] adding new maps to map, mapdata, mapproj;
	archive of R-sig-geo
Message-ID: <76EB4827B2104D40AE7E43AA5D8582EA2FAC51@MAVS1.kendall.corp.akamai.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071217/e8eda601/attachment.pl>

From Roger.Bivand at nhh.no  Tue Dec 18 11:17:18 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 18 Dec 2007 11:17:18 +0100 (CET)
Subject: [R-sig-Geo] adding new maps to map, mapdata, mapproj;
 archive of R-sig-geo
In-Reply-To: <76EB4827B2104D40AE7E43AA5D8582EA2FAC51@MAVS1.kendall.corp.akamai.com>
References: <76EB4827B2104D40AE7E43AA5D8582EA2FAC51@MAVS1.kendall.corp.akamai.com>
Message-ID: <Pine.LNX.4.64.0712181101530.16494@reclus.nhh.no>

On Mon, 17 Dec 2007, Galkowski, Jan wrote:

> Hi,
>
> Sorry if this has been covered somewhere.
>
> Is there a writeup describing how new maps get added to map, mapdata,
> mapproj?

The build mechanisms with Bourne shell and AWK scripts are described in 
the Bell Labs Research Reports listed in ?map. It can be done, but there 
may be viable alternatives if your data are already in a geographical data 
format, in particular using the sp package approach, and rgdal for 
input/output and projection.

> What I'm trying to do is overlay polygons in latitude and
> longitude onto these maps, then project them.  The associated things
> you'd like to do with such overlays apply, e.g,. color them, use
> different boundaries, etc.  Or perhaps there is also an overlay
> mechanism?

By polygon overlay, do you mean just plot polygons on top of other data - 
see the sp classes and possibly spplot() - illustrated on:

http://r-spatial.sourceforge.net/gallery/

If you mean topological overlay (creating new geometries from combined 
existing geometries and assigning indices to them), you need a GIS or a 
spatially extended database. GRASS or PostGIS/PostgreSQL should get you 
some or most of the way.

>
> Second, is there an online archive of r-sig-geo (or for that matter
> r-help, etc) that can be searched for such questions?
>

R-sig-geo can be searched from RSiteSearch(), although searching on "map" 
is made more difficult because the word is used in many contexts.

Roger

> Thanks,
>
> - Jan
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From jgalkows at akamai.com  Tue Dec 18 21:14:22 2007
From: jgalkows at akamai.com (Galkowski, Jan)
Date: Tue, 18 Dec 2007 15:14:22 -0500
Subject: [R-sig-Geo] adding new maps to map, mapdata, mapproj;
	archive of R-sig-geo
In-Reply-To: <4702645135092E4497088F71D9C8F51A0224E890@afhex01.dpi.wa.gov.au>
References: <76EB4827B2104D40AE7E43AA5D8582EA2FAC51@MAVS1.kendall.corp.akamai.com>
	<4702645135092E4497088F71D9C8F51A0224E890@afhex01.dpi.wa.gov.au>
Message-ID: <76EB4827B2104D40AE7E43AA5D8582EA2FB2A3@MAVS1.kendall.corp.akamai.com>

Thanks for your suggestions, Roger and Tom.  

I found something that'll work for now, a cheat in a way.

If you create a sphere with rgl, you can map a texture to it.  So, if I
create a high resolution texture image, I can drape that over the sphere
and automatically get the transformation I want, assuming I start by
creating the image on the rectangle with a Mercator projection.

Now I need to implement a Stripack Voronoi tessellator in R so it knows
how to generate a dataset from which I can recover the latitudes and
longitudes into the image.

 - j 

-----Original Message-----
From: Mulholland, Tom [mailto:Tom.Mulholland at dpi.wa.gov.au] 
Sent: Monday, December 17, 2007 8:04 PM
To: Galkowski, Jan
Subject: RE: [R-sig-Geo] adding new maps to map, mapdata,
mapproj;archive of R-sig-geo

I have been playing with the iplots package and it uses the map class.
So I wrote something to test the imap function that may be of help. I
make no claim to efficient coding, it's a take it as you get it type of
email. So "small" is an sp object created by using readShapePoly in
maptools. I have not tested it on anything other than a
SpatialPolygonDataFrame.

However your email seems to suggest to me that you really need to be
working with sp objects where overlay methods are available. In which
case what you need to do is convert your data from map into sp objects
using map2SpatialPolygons in maptools. On rereading your message it is
not clear if you are talking about overlay in the same way I use the
word. If you are just talking about adding a new layer then you can just
make sure the new plot statement does not overwrite the existing plot.

Anyway I hope this is another step in you way forward.

addNA <- function(x){
	 rbind(x,c(NA,NA))
	 }

makemap <- function(small){
n <- length(getSpPpolygonsSlot(small))
coordsList <- vector('list', n)
for (j in  1:n){
	coordsList[[j]] <-
getPolygonsPolygonsSlot(getSpPpolygonsSlot(small)[[j]])[[1]]@coords
	}
xyout <- lapply(coordsList,addNA)
xyout <- do.call("rbind",xyout)
n <- length(xyout[,1])
xyout <- xyout[1:(n-1),]
thismap  <- list(x = xyout[,1], y = xyout[,2],
    range = c(min(xyout[,1], na.rm = TRUE),max(xyout[,1], na.rm = TRUE),
		          min(xyout[,2], na.rm = TRUE),max(xyout[,2],
na.rm = TRUE)),
		          names = small at data[,1])
class(thismap) <- "map"
return(thismap)
} 

Tom

-----Original Message-----
From: r-sig-geo-bounces at stat.math.ethz.ch
[mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of Galkowski, Jan
Sent: Tuesday, 18 December 2007 7:28 AM
To: r-sig-geo at stat.math.ethz.ch
Subject: [R-sig-Geo] adding new maps to map, mapdata, mapproj;archive of
R-sig-geo

Hi,

Sorry if this has been covered somewhere.  

Is there a writeup describing how new maps get added to map, mapdata,
mapproj?  What I'm trying to do is overlay polygons in latitude and
longitude onto these maps, then project them.  The associated things
you'd like to do with such overlays apply, e.g,. color them, use
different boundaries, etc.  Or perhaps there is also an overlay
mechanism?

Second, is there an online archive of r-sig-geo (or for that matter
r-help, etc) that can be searched for such questions?

Thanks,

 - Jan



	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo



From fgnievinski at terra.com.br  Wed Dec 19 21:33:52 2007
From: fgnievinski at terra.com.br (Felipe G. Nievinski)
Date: Wed, 19 Dec 2007 16:33:52 -0400
Subject: [R-sig-Geo] factorial kriging,
 or kriging separate spatial scales based on nested variogram
Message-ID: <47698030.1080609@terra.com.br>

Hi.

Is factorial kriging supported in any of the R packages, please?

I see how to model a nested variogram, but I don't see how I could krige 
(predict) each component separately. It doesn't seem much more 
complicated than the supression of the nugget effect, though.

For an example, see slides 33, 34 in [1]; more details on pages 342-349 
of Chiles & Delfiner.

Margaret A. Oliver
Making Sense of Sensed Data Using Geostatistics
<http://users.ox.ac.uk/~uauug/011105conf/Margaret.ppt>



From edzer.pebesma at uni-muenster.de  Wed Dec 19 22:40:15 2007
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 19 Dec 2007 22:40:15 +0100
Subject: [R-sig-Geo] factorial kriging,
 or kriging separate spatial scales based on nested variogram
In-Reply-To: <47698030.1080609@terra.com.br>
References: <47698030.1080609@terra.com.br>
Message-ID: <47698FBF.3050909@uni-muenster.de>

Felipe G. Nievinski wrote:
> Hi.
>
> Is factorial kriging supported in any of the R packages, please?
>
> I see how to model a nested variogram, but I don't see how I could krige 
> (predict) each component separately. It doesn't seem much more 
> complicated than the supression of the nugget effect, though.
>   
It is a bit more than that; I think it only really makes sense if you 
have two or more variogram components besides the nugget. It is not so 
hard to do, but I'm afraid none of the package developers has felt the 
urge to do so. Even nested variograms, e.g. with two spherical models, 
are afaik only found in one package, but I may be wrong there.
--
Edzer
> For an example, see slides 33, 34 in [1]; more details on pages 342-349 
> of Chiles & Delfiner.
>
> Margaret A. Oliver
> Making Sense of Sensed Data Using Geostatistics
> <http://users.ox.ac.uk/~uauug/011105conf/Margaret.ppt>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



From loecher at eden.rutgers.edu  Thu Dec 20 03:26:16 2007
From: loecher at eden.rutgers.edu (Markus Loecher)
Date: Wed, 19 Dec 2007 21:26:16 -0500 (EST)
Subject: [R-sig-Geo] spatial density estimation of "lines"
Message-ID: <26060586.245411198117576261.JavaMail.tomcat@rainier>

Dear all,
I am trying to compute a spatial density estimator where the samples are not points but lines. The usual kernel density estimators will not work very well, because of their fixed xy orientation. I am imagining adding up many "ridge" like density contributions that are aligned with the line. (instead of Gaussian blobs). 
Does anyone know about algorithms or maybe even R functions that would compute such a density ?

Thanks!

Markus



From Ingo.Holz at uni-hohenheim.de  Thu Dec 20 08:54:02 2007
From: Ingo.Holz at uni-hohenheim.de (Ingo Holz)
Date: Thu, 20 Dec 2007 08:54:02 +0100
Subject: [R-sig-Geo] index a SpatialGridDataFrame
Message-ID: <476A2DAA.3379.3FADA2@ingoholz.uni-hohenheim.de>

Hi,

 I would like to add data to a SpatialGridDataFrame (SGDF) in a loop.

 Something like

 for (i in 1:20){
    ....
    SGDF[,,i] <- sgdf[,,1]
    }  # sgdf is a SpatialGridDataFrame which is modified in the loop

 I get the error message that it is not possible to index an object of type S4.

 Ok..., but how can I add data to a SGDF in a loop? No way?

Thanks for your help,
Ingo



From Ingo.Holz at uni-hohenheim.de  Thu Dec 20 10:08:10 2007
From: Ingo.Holz at uni-hohenheim.de (Ingo Holz)
Date: Thu, 20 Dec 2007 10:08:10 +0100
Subject: [R-sig-Geo] cbind(SGDFone, SGDFtwo)
Message-ID: <476A3F0A.25529.838D00@ingoholz.uni-hohenheim.de>

Hi,

 I want to use cbind to combine two SpatialGridDataFrames.

 SGDFone <- cbind(SGDFone, SGDFtwo)

 SGDFone and SGDFtwo resulted from the same SGDF they are copies
 like SGDFone <- SGDF; SGDFtwo <- SGDF. Only the dataframe part has 
been modified.

 However, using cbind() I get the error message:

 Error in stop.ifnot.equal(x, grds[[1]]) : topology is not equal

 I checked the following:

 table(coordinates(SGDFone) == coordinates(SGDFtwo))
 
 which is True for all values.

 and

 fullgrid(SGDFone); fullgrid (SGDFtwo)

 which is also True for the two SpatialGridDataFrames.

 What else could be the reason for the error message. How can the two 
topologies be different?

Thanks,
Ingo



From edzer.pebesma at uni-muenster.de  Thu Dec 20 11:33:40 2007
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 20 Dec 2007 11:33:40 +0100
Subject: [R-sig-Geo] cbind(SGDFone, SGDFtwo)
In-Reply-To: <476A3F0A.25529.838D00@ingoholz.uni-hohenheim.de>
References: <476A3F0A.25529.838D00@ingoholz.uni-hohenheim.de>
Message-ID: <476A4504.2010103@uni-muenster.de>

Ingo, the check that fails is

all.equal(getGridTopology(a), getGridTopology(b))

which should return TRUE. Could you check this for your two grids?
--
Edzer

Ingo Holz wrote:
> Hi,
>
>  I want to use cbind to combine two SpatialGridDataFrames.
>
>  SGDFone <- cbind(SGDFone, SGDFtwo)
>
>  SGDFone and SGDFtwo resulted from the same SGDF they are copies
>  like SGDFone <- SGDF; SGDFtwo <- SGDF. Only the dataframe part has 
> been modified.
>
>  However, using cbind() I get the error message:
>
>  Error in stop.ifnot.equal(x, grds[[1]]) : topology is not equal
>
>  I checked the following:
>
>  table(coordinates(SGDFone) == coordinates(SGDFtwo))
>  
>  which is True for all values.
>
>  and
>
>  fullgrid(SGDFone); fullgrid (SGDFtwo)
>
>  which is also True for the two SpatialGridDataFrames.
>
>  What else could be the reason for the error message. How can the two 
> topologies be different?
>
> Thanks,
> Ingo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



From Ingo.Holz at uni-hohenheim.de  Thu Dec 20 12:31:11 2007
From: Ingo.Holz at uni-hohenheim.de (Ingo Holz)
Date: Thu, 20 Dec 2007 12:31:11 +0100
Subject: [R-sig-Geo] cbind(SGDFone, SGDFtwo)
Message-ID: <476A608F.30469.1067AF2@ingoholz.uni-hohenheim.de>

Sorry, I deleted one of the grids ... ;-)  

I will redo the analysis later and come back with the result of

 all.equal(getGridTopology(a), getGridTopology(b))

However, before I deleted the Grid I checked

  getGridTopology() for the two SGDF separately. They were the same!

I solved the problem with

 newGrid <- cbind(SGDFone[,,1:13], SGDFtwo[,,1:61])

this worked. Don't ask me why...  (1:13 and 1:61 are all columns of the 
dataframes)

Ingo



From p.hiemstra at geo.uu.nl  Thu Dec 20 15:03:47 2007
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Thu, 20 Dec 2007 15:03:47 +0100
Subject: [R-sig-Geo] index a SpatialGridDataFrame
In-Reply-To: <476A2DAA.3379.3FADA2@ingoholz.uni-hohenheim.de>
References: <476A2DAA.3379.3FADA2@ingoholz.uni-hohenheim.de>
Message-ID: <476A7643.5070403@geo.uu.nl>

Ingo Holz wrote:
> Hi,
>
>  I would like to add data to a SpatialGridDataFrame (SGDF) in a loop.
>
>  Something like
>
>  for (i in 1:20){
>     ....
>     SGDF[,,i] <- sgdf[,,1]
>     }  # sgdf is a SpatialGridDataFrame which is modified in the loop
>
>  I get the error message that it is not possible to index an object of type S4.
>
>  Ok..., but how can I add data to a SGDF in a loop? No way?
>
> Thanks for your help,
> Ingo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>   
Hi Inge,

It can be done by something like:

SGDF[[i]] = sgdf[[1]]

cheers,
Paul

-- 
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone: 	+31302535773
Fax:	+31302531145
http://intamap.geo.uu.nl/~paul



From janwijffels at hotmail.com  Fri Dec 21 00:43:06 2007
From: janwijffels at hotmail.com (Jan Wijffels)
Date: Thu, 20 Dec 2007 23:43:06 +0000
Subject: [R-sig-Geo] which data format should I buy
Message-ID: <BLU122-W446607B841B5DBF4E9B855A45D0@phx.gbl>


Hi,

I'm a newbie to spatial statistics and I'm considering to buy a map of Belgium with its communes. If I go to the website of the national geographical institute of Belgium (http://www.ngi.be/FR/FR1-5-2.shtm or http://www.ngi.be/NL/NL1-5-2.shtm if you speak Dutch), I see it offers a digital ArcInfo dataset and also a DWG formatted dataset for 300 euros. 
My objective is to make some kind of plot like in Rnews Volume 5/2, November 2005, Figure 3 on page 12 (http://www.r-project.org/doc/Rnews/Rnews_2005-2.pdf) but not for North Carolina but for Belgium and later on to do some more advanced spatial statistics. Can I do this with the ArcInfo or the DWG file offered at that website or do I really need a ESRI shapefile to do that kind of plotting as explained in Rnews?

thanks in advance,
Jan Wijffels
_________________________________________________________________
i?m is proud to present Cause Effect, a series about real people making a difference.



From adrian at maths.uwa.edu.au  Fri Dec 21 02:05:56 2007
From: adrian at maths.uwa.edu.au (adrian at maths.uwa.edu.au)
Date: Fri, 21 Dec 2007 10:05:56 +0900 (WST)
Subject: [R-sig-Geo] (no subject)
Message-ID: <51710.130.95.98.17.1198199156.squirrel@130.95.98.17>

Markus Loecher <loecher at eden.rutgers.edu> writes:

> I am trying to compute a spatial density estimator where the samples are
> not points but lines. The usual kernel density estimators will not work
> very well, because of their fixed xy orientation. I am imagining adding up
> many "ridge" like density contributions that are aligned with the line.
> (instead of Gaussian blobs).
> Does anyone know about algorithms or maybe even R functions that would
>  compute such a density ?

This is implemented in the R package 'spatstat' as the function
'density.psp'.

It computes the convolution between the line segment pattern and a
Gaussian kernel. That means that each point on each line segment
contributes a Gaussian kernel. Summing these contributions over all the
points on a line segment, the total contribution from a line segment is a
kind of ridge surface, aligned with the line segment. The final density
estimate is the sum of such contributions from each line segment.

Adrian Baddeley



From Roger.Bivand at nhh.no  Fri Dec 21 09:45:04 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 21 Dec 2007 09:45:04 +0100 (CET)
Subject: [R-sig-Geo] which data format should I buy
In-Reply-To: <BLU122-W446607B841B5DBF4E9B855A45D0@phx.gbl>
References: <BLU122-W446607B841B5DBF4E9B855A45D0@phx.gbl>
Message-ID: <Pine.LNX.4.64.0712210935550.15267@reclus.nhh.no>

On Thu, 20 Dec 2007, Jan Wijffels wrote:

>
> Hi,
>
> I'm a newbie to spatial statistics and I'm considering to buy a map of 
> Belgium with its communes. If I go to the website of the national 
> geographical institute of Belgium (http://www.ngi.be/FR/FR1-5-2.shtm or 
> http://www.ngi.be/NL/NL1-5-2.shtm if you speak Dutch), I see it offers a 
> digital ArcInfo dataset and also a DWG formatted dataset for 300 euros.

The readOGR() function in the rgdal package will read Arc-info coverages. 
But beware of too much detail - my guess is that Admin-v-gen will suit you 
better unless you really need the most detailed administrative boundaries. 
This is also available for ArcInfo coverages, cheaper too, though the 
price doesn't compete with US or Canadian prices for public data of 
administrative boundaries, I'm afraid.

In any case, you can check the format drivers in rgdal with ogrDrivers(). 
You need more insight into the GIS formats for coverages and DXF/DWG than 
for shapefiles - the incantations are not easy - so getting a friendly GIS 
colleague to convert the boundaries you need to a shapefile might save you 
learning things you don't strictly need to.

Roger

> My objective is to make some kind of plot like in Rnews Volume 5/2, 
> November 2005, Figure 3 on page 12 
> (http://www.r-project.org/doc/Rnews/Rnews_2005-2.pdf) but not for North 
> Carolina but for Belgium and later on to do some more advanced spatial 
> statistics. Can I do this with the ArcInfo or the DWG file offered at 
> that website or do I really need a ESRI shapefile to do that kind of 
> plotting as explained in Rnews?
>
> thanks in advance,
> Jan Wijffels
> _________________________________________________________________
> i?m is proud to present Cause Effect, a series about real people making a difference.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From Thierry.ONKELINX at inbo.be  Fri Dec 21 10:13:29 2007
From: Thierry.ONKELINX at inbo.be (ONKELINX, Thierry)
Date: Fri, 21 Dec 2007 10:13:29 +0100
Subject: [R-sig-Geo] which data format should I buy
In-Reply-To: <BLU122-W446607B841B5DBF4E9B855A45D0@phx.gbl>
References: <BLU122-W446607B841B5DBF4E9B855A45D0@phx.gbl>
Message-ID: <2E9C414912813E4EB981326983E0A104040E25E5@inboexch.inbo.be>

Dear Jan,

Have a look at GIRAF http://giraf.agiv.be/. They will be cheaper if you
are working in a government institution or doing a project for a
government institution. We get most of our GIS data for them.
They have the data as ESRI shapefiles, so it shouldn't be a problem to
read them into R. 

Cheers,

Thierry

------------------------------------------------------------------------
----
ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature
and Forest
Cel biometrie, methodologie en kwaliteitszorg / Section biometrics,
methodology and quality assurance
Gaverstraat 4
9500 Geraardsbergen
Belgium 
tel. + 32 54/436 185
Thierry.Onkelinx at inbo.be 
www.inbo.be 

Do not put your faith in what statistics say until you have carefully
considered what they do not say.  ~William W. Watt
A statistical analysis, properly conducted, is a delicate dissection of
uncertainties, a surgery of suppositions. ~M.J.Moroney

-----Oorspronkelijk bericht-----
Van: r-sig-geo-bounces at stat.math.ethz.ch
[mailto:r-sig-geo-bounces at stat.math.ethz.ch] Namens Jan Wijffels
Verzonden: vrijdag 21 december 2007 0:43
Aan: r-sig-geo at stat.math.ethz.ch
Onderwerp: [R-sig-Geo] which data format should I buy


Hi,

I'm a newbie to spatial statistics and I'm considering to buy a map of
Belgium with its communes. If I go to the website of the national
geographical institute of Belgium (http://www.ngi.be/FR/FR1-5-2.shtm or
http://www.ngi.be/NL/NL1-5-2.shtm if you speak Dutch), I see it offers a
digital ArcInfo dataset and also a DWG formatted dataset for 300 euros. 
My objective is to make some kind of plot like in Rnews Volume 5/2,
November 2005, Figure 3 on page 12
(http://www.r-project.org/doc/Rnews/Rnews_2005-2.pdf) but not for North
Carolina but for Belgium and later on to do some more advanced spatial
statistics. Can I do this with the ArcInfo or the DWG file offered at
that website or do I really need a ESRI shapefile to do that kind of
plotting as explained in Rnews?

thanks in advance,
Jan Wijffels
_________________________________________________________________
i'm is proud to present Cause Effect, a series about real people making
a difference.

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo



From acro3451 at tss.com.ar  Mon Dec 31 07:58:00 2007
From: acro3451 at tss.com.ar (Pls check this new site)
Date: Mon, 31 Dec 2007 01:58 -0500
Subject: [R-sig-Geo] www.selfbanking.com.ar
Message-ID: <200712310658.lBV6wdba021564@hypatia.math.ethz.ch>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20071231/3b5a5b16/attachment.pl>

From tkobayas at indiana.edu  Mon Dec 31 09:04:17 2007
From: tkobayas at indiana.edu (Takatsugu Kobayashi)
Date: Mon, 31 Dec 2007 03:04:17 -0500
Subject: [R-sig-Geo] Create points to polygons
Message-ID: <1199088257.14392.17.camel@SuseLinux.gateway.2wire.net>

Hi R users,

I have been wandering around several manuals (sp, maptools, and
PBSmapping) to find out how to create polygons from points. Basically,
what I would like to do is to compute the area where two ellipses
overlap. 

I can easily create the coordinates (x,y) of an ellipse. 

library(CircStats)
library(sp)
library(PBSmapping)

  # Draw a standard deviational ellipse
  ElpCoords<-function(sigma_x,sigma_y,angle)
   {
    theta<-seq(0,2*pi,length=2000)
    x<-cos(theta)
    y<-sin(theta)
    x1<-x*sigma_x
    y1<-y*sigma_y
    new_x<-x1*cos(rad(angle))-y1*sin(rad(angle))
    new_y<-x1*sin(rad(angle))+y1*cos(rad(angle))
    coords=cbind(new_x,new_y)  
   }

Using the function above, I created two ellipses;

  el1<-ElpCoords(3,1.5,45)
  el2<-ElpCoords(4,2.2,125)

Now I am stuck. How can I change these points forming ellipses into
polygons? I am believing that once I convert them into polygons I can
compute the overlapped area by using 

  el1Poly<-SpatialPolygons2PolySet(xxx_polygon_of_el1)
  el2Poly<-SpatialPolygons2PolySet(xxx_polygon_of_el2)
  overlappedArea<-joinPolys(el1Poly,eliPoly)
  if(length(overlappedArea)>0)
   {
    combinedArea<-combinePolys(overlappedArea)
    AreaSize<-calcArea(combinedArea)
   }
  else
   {
   warning('No overlapped area found')
   }

So I would like to know processes to get to the last part.....

In addition, I have been wondering if there are tutorial books on
spatial stats/GIS on R. I am basically reading [R], [R-Geo], and R
News...

Thank you very much.

Takatsugu Kobayashi
PhD student
Indiana University Bloomignton



