From eg@mp@du @end|ng |rom gm@||@com  Mon Sep  2 12:45:41 2019
From: eg@mp@du @end|ng |rom gm@||@com (Enoch Gyamfi Ampadu)
Date: Mon, 2 Sep 2019 12:45:41 +0200
Subject: [R-sig-Geo] Important variable- SVM
Message-ID: <CAC4+n+wLQNeMY2==VSh4HGBLyrrVHLh_f3neE2=o0uC6-=CPJA@mail.gmail.com>

Dear List,
Please I need your help.

1. I used the SVM to undertake a forest cover classification. I wanted to
determine the important variable but when I checked the attributes of the
model it does not seem to have that function for that. I wanted to find if
there is a way I could determine it. Find below the attributes for the SVM
model;

> attributes(modFit_svm)
$names
 [1] "call"            "type"            "kernel"          "cost"
 "degree"
 [6] "gamma"           "coef0"           "nu"              "epsilon"
  "sparse"
[11] "scaled"          "x.scale"         "y.scale"         "nclasses"
 "levels"
[16] "tot.nSV"         "nSV"             "labels"          "SV"
 "index"
[21] "rho"             "compprob"        "probA"           "probB"
  "sigma"
[26] "coefs"           "na.action"       "fitted"
 "decision.values" "terms"

I also applied the RF for the same image and I am able to determine the
important variable as it has that in the RF attributes. find below the RF
model;

$names
 [1] "call"            "type"            "predicted"       "err.rate"
 "confusion"
 [6] "votes"           "oob.times"       "classes"         "importance"
 "importanceSD"
[11] "local Importance" "proximity"       "ntree"           "mtry"
   "forest"
[16] "y"               "test"            "inbag"           "terms"


2. Please can you also assist me on how to determine the total area covered
by each of the classes. I am not finding my way out on how to determine it
as well.

I will be glad to have your advice.

Thank you.

Best regards,

Enoch

-- 
*Enoch Gyamfi - Ampadu*

*Geography & Environmental Sciences*

*College of Agriculture, Engineering & Science*

*University of KwaZulu-Natal, Westville Campus*

*Private Bag X54001*
*Durban, South Africa **? 4000**.*
*Phone: +27 835 828255*

*email: egampadu at gmail.com <egampadu at gmail.com>*


*skype: enoch.ampadu*
*The highest evidence of nobility is self-control*.

*A simple act of kindness creates an endless ripple*.

	[[alternative HTML version deleted]]


From ruetten@uer @end|ng |rom @ow|@un|-k|@de  Tue Sep  3 09:35:37 2019
From: ruetten@uer @end|ng |rom @ow|@un|-k|@de (=?UTF-8?Q?Tobias_R=C3=BCttenauer?=)
Date: Tue, 3 Sep 2019 08:35:37 +0100
Subject: [R-sig-Geo] 
 Simulating variables with predefined correlation and autocorrelation
In-Reply-To: <CANcbSEhqRN7S2Ge0RqMcMmVoXRP_Bg_mz+SbD_0YwV7_y1mfDg@mail.gmail.com>
References: <CANcbSEi5GWbp=u88Jb+FHBKrKi4FQ-C=Q48kZ9ONkRFQm0fEDg@mail.gmail.com>
 <8242C5E1DAAE5BEC.8ac4318a-d335-44d4-b592-f1df9cbf85ee@mail.outlook.com>
 <CANcbSEhqRN7S2Ge0RqMcMmVoXRP_Bg_mz+SbD_0YwV7_y1mfDg@mail.gmail.com>
Message-ID: <000a01d5622a$2e2e9190$8a8bb4b0$@sowi.uni-kl.de>

Dear Amitha,

If understand your query correctly, you could also have a look at my preprint on Monte Carlo simulations of different spatial regression models: https://kluedo.ub.uni-kl.de/frontdoor/index/index/docId/5630.

The replication materials are online available (https://github.com/ruettenauer/Reproduction-Material-Spatial-Monte-Carlo-Experiments). The '01_Monte Carlo Simulation Spatial_Program.R' scipt provides a function to set up data with different constellations of autocorrelation. Maybe the code is useful for your purposes as well.

Best,
Tobias


-----Original Message-----
From: R-sig-Geo <r-sig-geo-bounces at r-project.org> On Behalf Of Amitha Puranik
Sent: 22 August 2019 17:19
To: r-sig-geo at r-project.org
Cc: c8a2375d-efb5-2ebe-7b3b-ac966d188f53 at cirad.fr
Subject: Re: [R-sig-Geo] Simulating variables with predefined correlation and autocorrelation

Dear Prof. Bivand,



Thanks a lot for responding and providing the material to read. I will definitely go through your paper and the references cited in it.

I am working on simulating various scenarios where autocorrelation exists in Y or X or both and also in the residuals and compare the model performances on these data. At present I have planned to assign same weights (distance based) for both X and Y. I have found solution to simulate autocorrelated Y based on your response in the link ( https://stat.ethz.ch/pipermail/r-sig-geo/2011-September/012728.html). But I have not found a way to induce autocorrelation in even the independent variables(s). Hence I posted this query. Thanks in advance.

Regards,

Amitha Puranik.















On Thu, Aug 22, 2019 at 7:06 PM Roger Bivand <Roger.Bivand at nhh.no> wrote:

> Could you please explain why you want to do this and whether you want 
> to use the same weights for y and x? Maybe refer to 
> https://doi.org/10.1111/j.1538-4632.1991.tb00235.x and work referred 
> to there; I'll try to find other references later.
>
> Roger Bivand
> Norwegian School of Economics
> Bergen, Norway
>
>
>
> Fra: Amitha Puranik
> Sendt: torsdag 22. august, 12.41
> Emne: Re: [R-sig-Geo]  Simulating variables with predefined 
> correlation and autocorrelation
> Til: c8a2375d-efb5-2ebe-7b3b-ac966d188f53 at cirad.fr
> Kopi: r-sig-geo at r-project.org
>
>
> Dear Prof Facundo Mu?oz, Thank you for a quick response. I am sorry 
> for not phrasing my query clearly. I am interested to simulate 2 
> variables Y and X in such a way that the resultant variables should 
> possess the correlation coefficient of 0.6 between Y and X and 
> autocorrelation of 0.7 in Y and 0.4 in X. The query posted in the link 
> (
> https://stat.ethz.ch/pipermail/r-sig-geo/2011-September/012728.html)
> focussed on only the autocorrelation of Y (spatial lag model) whereas 
> I would like to introduce some autocorrelation in X too (spatial 
> durbin model). Is there a way to do this? Should a covariance 
> structure defining both correlation and autocorrelation be specified 
> while simulating variables? If so, how to define such covariance 
> structure? I will be grateful for your assistance. Thanks in advance. 
> Amitha Puranik [[alternative HTML version deleted]] 
> _______________________________________________ R-sig-Geo mailing list 
> R-sig-Geo at r-project.org 
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>

	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From pur@n|k@@m|th@ @end|ng |rom gm@||@com  Tue Sep  3 11:52:49 2019
From: pur@n|k@@m|th@ @end|ng |rom gm@||@com (Amitha Puranik)
Date: Tue, 3 Sep 2019 15:22:49 +0530
Subject: [R-sig-Geo] 
 Simulating variables with predefined correlation and autocorrelation
In-Reply-To: <000a01d5622a$2e2e9190$8a8bb4b0$@sowi.uni-kl.de>
References: <CANcbSEi5GWbp=u88Jb+FHBKrKi4FQ-C=Q48kZ9ONkRFQm0fEDg@mail.gmail.com>
 <8242C5E1DAAE5BEC.8ac4318a-d335-44d4-b592-f1df9cbf85ee@mail.outlook.com>
 <CANcbSEhqRN7S2Ge0RqMcMmVoXRP_Bg_mz+SbD_0YwV7_y1mfDg@mail.gmail.com>
 <000a01d5622a$2e2e9190$8a8bb4b0$@sowi.uni-kl.de>
Message-ID: <CANcbSEh0cJzFi-gm7w1y=C825CFaUXUezu3dzMrrWR-MAbsLJg@mail.gmail.com>

Dear Dr Tobias,

Thanks a lot for sharing the materials. This means a lot!












On Tue, Sep 3, 2019 at 1:05 PM Tobias R?ttenauer <ruettenauer at sowi.uni-kl.de>
wrote:

> Dear Amitha,
>
> If understand your query correctly, you could also have a look at my
> preprint on Monte Carlo simulations of different spatial regression models:
> https://kluedo.ub.uni-kl.de/frontdoor/index/index/docId/5630.
>
> The replication materials are online available (
> https://github.com/ruettenauer/Reproduction-Material-Spatial-Monte-Carlo-Experiments).
> The '01_Monte Carlo Simulation Spatial_Program.R' scipt provides a function
> to set up data with different constellations of autocorrelation. Maybe the
> code is useful for your purposes as well.
>
> Best,
> Tobias
>
>
> -----Original Message-----
> From: R-sig-Geo <r-sig-geo-bounces at r-project.org> On Behalf Of Amitha
> Puranik
> Sent: 22 August 2019 17:19
> To: r-sig-geo at r-project.org
> Cc: c8a2375d-efb5-2ebe-7b3b-ac966d188f53 at cirad.fr
> Subject: Re: [R-sig-Geo] Simulating variables with predefined correlation
> and autocorrelation
>
> Dear Prof. Bivand,
>
>
>
> Thanks a lot for responding and providing the material to read. I will
> definitely go through your paper and the references cited in it.
>
> I am working on simulating various scenarios where autocorrelation exists
> in Y or X or both and also in the residuals and compare the model
> performances on these data. At present I have planned to assign same
> weights (distance based) for both X and Y. I have found solution to
> simulate autocorrelated Y based on your response in the link (
> https://stat.ethz.ch/pipermail/r-sig-geo/2011-September/012728.html). But
> I have not found a way to induce autocorrelation in even the independent
> variables(s). Hence I posted this query. Thanks in advance.
>
> Regards,
>
> Amitha Puranik.
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> On Thu, Aug 22, 2019 at 7:06 PM Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
> > Could you please explain why you want to do this and whether you want
> > to use the same weights for y and x? Maybe refer to
> > https://doi.org/10.1111/j.1538-4632.1991.tb00235.x and work referred
> > to there; I'll try to find other references later.
> >
> > Roger Bivand
> > Norwegian School of Economics
> > Bergen, Norway
> >
> >
> >
> > Fra: Amitha Puranik
> > Sendt: torsdag 22. august, 12.41
> > Emne: Re: [R-sig-Geo]  Simulating variables with predefined
> > correlation and autocorrelation
> > Til: c8a2375d-efb5-2ebe-7b3b-ac966d188f53 at cirad.fr
> > Kopi: r-sig-geo at r-project.org
> >
> >
> > Dear Prof Facundo Mu?oz, Thank you for a quick response. I am sorry
> > for not phrasing my query clearly. I am interested to simulate 2
> > variables Y and X in such a way that the resultant variables should
> > possess the correlation coefficient of 0.6 between Y and X and
> > autocorrelation of 0.7 in Y and 0.4 in X. The query posted in the link
> > (
> > https://stat.ethz.ch/pipermail/r-sig-geo/2011-September/012728.html)
> > focussed on only the autocorrelation of Y (spatial lag model) whereas
> > I would like to introduce some autocorrelation in X too (spatial
> > durbin model). Is there a way to do this? Should a covariance
> > structure defining both correlation and autocorrelation be specified
> > while simulating variables? If so, how to define such covariance
> > structure? I will be grateful for your assistance. Thanks in advance.
> > Amitha Puranik [[alternative HTML version deleted]]
> > _______________________________________________ R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> >
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>

	[[alternative HTML version deleted]]


From chr|@ @end|ng |rom c@|ow|er@com  Wed Sep  4 08:32:22 2019
From: chr|@ @end|ng |rom c@|ow|er@com (Chris Fowler)
Date: Wed, 4 Sep 2019 08:32:22 +0200
Subject: [R-sig-Geo] How can I manipulate the parameters of
 st_interpolate_aw so it doesn't fail as a result of point and line
 intersections?
Message-ID: <CAJjzREGkbO+ngz6vv_YWqbHsW0v--NzK0Vapye07zOkQkfTZRQ@mail.gmail.com>

 I have also asked this question here:
https://stackoverflow.com/questions/57767022/how-do-you-use-st-interpolate-aw-with-polygon-layers-that-legitimately-include-p?noredirect=1#comment101987833_57767022

but expect that the specialized knowledge on this list serve may achieve a
better result and that members of this list who are, like me, still making
the transition from sp to sf could benefit from the responses it generates.

I am trying to use st_interpolate_aw() to assign values from one polygon
layer to another polygon layer (voting district vote totals assigned to
census tracts). The operation fails because st_interpolate_aw() calls
st_intersection() which finds point and line intersections that then get
treated as points, lines, or geometrycollections and break the subsequent
code casting geometries to multipolygons (I get the error "Error in
st_cast.POINT(x[1], to, ...) :cannot create MULTIPOLYGON from POINT")

Within st_interpolate_aw the relevant code looks like this where 'x' is my
first polygon layer and 'to' is my second:

i = st_intersection(st_geometry(x), st_geometry(to))
idx = attr(i, "idx")
i = st_cast(i, "MULTIPOLYGON")

When I use debug to step through the above lines of code in
st_interpolate_aw I can look at summary(i) after running st_intersection
and I can see multiple POINTS, GEOMETRYCOLLECTIONS and LINESTRINGS that
were created in addition to the desired POLYGONS and MULTIPOLYGONS. This is
not a problem of messy layers per se--we should expect point and line
intersections when comparing these kinds of administrative boundaries, but
they shouldn't be relevant for interpolation purposes and could be
reasonably dropped. The problem is that st_cast doesn't seem set up to make
allowances.

I expect the answer to this question is to figure out what parameters I can
set via ... in st_interpolate_aw to alter the behavior of st_intersection()
or st_cast() to make this work. Alternatively, there may be a path through
tricks like st_set_precision() or st_snap() to pre-process my polygons so
this doesn't happen (see somewhat relevant back and forth here
<https://github.com/r-spatial/sf/issues/860>). I have already run
st_is_valid() on my polygons and they are fine. Also, I fundamentally think
that st_intersection is behaving appropriately with regards to the data,
and that it is st_cast not being willing to drop geometries with no area
that causes the problem.

The example below doesn't get me all the way to the solution as it deals
with the code internal to st_interpolate_aw not the function itself, but it
is small, draws on polygons from the vignette
<https://cran.r-project.org/web/packages/sf/vignettes/sf1.html>, and
generates the same error as my code when running st_interpolate_aw(). If
the example below could be run with a parameter change to st_intersection
or st_cast so that st_cast doesn't return an error I
think I could get st_interpolate_aw to work

a <- st_polygon(list(cbind(c(0,0,7.5,7.5,0),c(0,-1,-1,0,0))))
b <- st_polygon(list(cbind(c(0,1,2,3,4,5,6,7,7,0),c(1,0,.5,0,0,0.5,
        -0.5,-0.5,1,1))))
c<-st_sfc(a,b)
plot(c)
i <- st_intersection(c[[1]],c[[2]])
i=st_cast(i,"MULTIPOLYGON")

Thanks,
Chris

	[[alternative HTML version deleted]]


From edzer@pebe@m@ @end|ng |rom un|-muen@ter@de  Wed Sep  4 14:37:38 2019
From: edzer@pebe@m@ @end|ng |rom un|-muen@ter@de (Edzer Pebesma)
Date: Wed, 4 Sep 2019 14:37:38 +0200
Subject: [R-sig-Geo] How can I manipulate the parameters of
 st_interpolate_aw so it doesn't fail as a result of point and line
 intersections?
In-Reply-To: <CAJjzREGkbO+ngz6vv_YWqbHsW0v--NzK0Vapye07zOkQkfTZRQ@mail.gmail.com>
References: <CAJjzREGkbO+ngz6vv_YWqbHsW0v--NzK0Vapye07zOkQkfTZRQ@mail.gmail.com>
Message-ID: <3f3f1858-e49d-68b9-6310-609c95b69b2c@uni-muenster.de>

Thanks for the clear diagnosis; a small reprex would be

library(sf)
a <- st_polygon(list(cbind(c(0,0,7.5,7.5,0),c(0,-1,-1,0,0))))
b <- st_polygon(list(cbind(c(0,1,2,3,4,5,6,7,7,0),c(1,0,.5,0,0,0.5,
        -0.5,-0.5,1,1))))
c<-st_sfc(a,b)

aa = st_sf(value = 1, geom = c[1])
bb = st_sf(value = 2, geom = c[2])
cc = st_sf(value = 3, geom = c[1] + c(.5,.5))
st_interpolate_aw(aa, cc, extensive = TRUE)

cc = st_sf(value = 3, geom = c[1] + c(1,1))
st_interpolate_aw(aa, cc, extensive = TRUE)

st_interpolate_aw(aa, bb, extensive = TRUE)


revealing two problems: 0 or 1 dimensionsal intersections, and
intersections giving GEOMETRYCOLLECTION.

This now should work when you install sf from github.

On 9/4/19 8:32 AM, Chris Fowler wrote:
>  I have also asked this question here:
> https://stackoverflow.com/questions/57767022/how-do-you-use-st-interpolate-aw-with-polygon-layers-that-legitimately-include-p?noredirect=1#comment101987833_57767022
> 
> but expect that the specialized knowledge on this list serve may achieve a
> better result and that members of this list who are, like me, still making
> the transition from sp to sf could benefit from the responses it generates.
> 
> I am trying to use st_interpolate_aw() to assign values from one polygon
> layer to another polygon layer (voting district vote totals assigned to
> census tracts). The operation fails because st_interpolate_aw() calls
> st_intersection() which finds point and line intersections that then get
> treated as points, lines, or geometrycollections and break the subsequent
> code casting geometries to multipolygons (I get the error "Error in
> st_cast.POINT(x[1], to, ...) :cannot create MULTIPOLYGON from POINT")
> 
> Within st_interpolate_aw the relevant code looks like this where 'x' is my
> first polygon layer and 'to' is my second:
> 
> i = st_intersection(st_geometry(x), st_geometry(to))
> idx = attr(i, "idx")
> i = st_cast(i, "MULTIPOLYGON")
> 
> When I use debug to step through the above lines of code in
> st_interpolate_aw I can look at summary(i) after running st_intersection
> and I can see multiple POINTS, GEOMETRYCOLLECTIONS and LINESTRINGS that
> were created in addition to the desired POLYGONS and MULTIPOLYGONS. This is
> not a problem of messy layers per se--we should expect point and line
> intersections when comparing these kinds of administrative boundaries, but
> they shouldn't be relevant for interpolation purposes and could be
> reasonably dropped. The problem is that st_cast doesn't seem set up to make
> allowances.
> 
> I expect the answer to this question is to figure out what parameters I can
> set via ... in st_interpolate_aw to alter the behavior of st_intersection()
> or st_cast() to make this work. Alternatively, there may be a path through
> tricks like st_set_precision() or st_snap() to pre-process my polygons so
> this doesn't happen (see somewhat relevant back and forth here
> <https://github.com/r-spatial/sf/issues/860>). I have already run
> st_is_valid() on my polygons and they are fine. Also, I fundamentally think
> that st_intersection is behaving appropriately with regards to the data,
> and that it is st_cast not being willing to drop geometries with no area
> that causes the problem.
> 
> The example below doesn't get me all the way to the solution as it deals
> with the code internal to st_interpolate_aw not the function itself, but it
> is small, draws on polygons from the vignette
> <https://cran.r-project.org/web/packages/sf/vignettes/sf1.html>, and
> generates the same error as my code when running st_interpolate_aw(). If
> the example below could be run with a parameter change to st_intersection
> or st_cast so that st_cast doesn't return an error I
> think I could get st_interpolate_aw to work
> 
> a <- st_polygon(list(cbind(c(0,0,7.5,7.5,0),c(0,-1,-1,0,0))))
> b <- st_polygon(list(cbind(c(0,1,2,3,4,5,6,7,7,0),c(1,0,.5,0,0,0.5,
>         -0.5,-0.5,1,1))))
> c<-st_sfc(a,b)
> plot(c)
> i <- st_intersection(c[[1]],c[[2]])
> i=st_cast(i,"MULTIPOLYGON")
> 
> Thanks,
> Chris
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081

-------------- next part --------------
A non-text attachment was scrubbed...
Name: pEpkey.asc
Type: application/pgp-keys
Size: 3110 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20190904/5159acf9/attachment.bin>

From @r|e|@|uente@d| @end|ng |rom u@@ch@c|  Wed Sep  4 19:09:13 2019
From: @r|e|@|uente@d| @end|ng |rom u@@ch@c| (Ariel Fuentesdi)
Date: Wed, 4 Sep 2019 13:09:13 -0400
Subject: [R-sig-Geo] Spatio-temporal modelling for trip generation data
Message-ID: <CAD0a9Ki=472YYPfAEWHnCC2WEEWscLXu7TtZag3RbP5VebTYEw@mail.gmail.com>

Hi everyone,

I want to produce a prediction of trip generation for the next year, I'm
thinking could be useful a Spatio-temporal model with covariates data. I
have trips values in point locations since 2015 also the population in
census tracts and supply which are bus lines and I'm thinking to convert
them into an accessibility grid (from the census tracts to bus stops). I
have seen that Spatio-temporal models are applied to environmental problems
only, would you recommend me any specific approach or the use of a specific
model?

Regards,
Ariel Fuentes

	[[alternative HTML version deleted]]


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Wed Sep  4 19:22:33 2019
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Wed, 4 Sep 2019 10:22:33 -0700 (PDT)
Subject: [R-sig-Geo] Spatio-temporal modelling for trip generation data
In-Reply-To: <CAD0a9Ki=472YYPfAEWHnCC2WEEWscLXu7TtZag3RbP5VebTYEw@mail.gmail.com>
References: <CAD0a9Ki=472YYPfAEWHnCC2WEEWscLXu7TtZag3RbP5VebTYEw@mail.gmail.com>
Message-ID: <alpine.LNX.2.20.1909041019000.11279@salmo.appl-ecosys.com>

On Wed, 4 Sep 2019, Ariel Fuentesdi wrote:

> I want to produce a prediction of trip generation for the next year, I'm
> thinking could be useful a Spatio-temporal model with covariates data. I
> have trips values in point locations since 2015 also the population in
> census tracts and supply which are bus lines and I'm thinking to convert
> them into an accessibility grid (from the census tracts to bus stops). I
> have seen that Spatio-temporal models are applied to environmental
> problems only, would you recommend me any specific approach or the use of
> a specific model?

Ariel,

Your description suggests you would like to solve the classic 'traveling
salesman' problem. I don't know that R's spatio-temporal functions are
suitable but open street map apparently can help pick optimal routes and a
web search for linux: traveling salesman problem found many software
solutions.

Travel safely,

Rich


From r@|@@pere|r@@br @end|ng |rom gm@||@com  Wed Sep  4 19:43:54 2019
From: r@|@@pere|r@@br @end|ng |rom gm@||@com (Rafael Pereira)
Date: Wed, 4 Sep 2019 14:43:54 -0300
Subject: [R-sig-Geo] Spatio-temporal modelling for trip generation data
In-Reply-To: <alpine.LNX.2.20.1909041019000.11279@salmo.appl-ecosys.com>
References: <CAD0a9Ki=472YYPfAEWHnCC2WEEWscLXu7TtZag3RbP5VebTYEw@mail.gmail.com>
 <alpine.LNX.2.20.1909041019000.11279@salmo.appl-ecosys.com>
Message-ID: <CAA42DGmrvzDbYQSW=WUWr3qnxY5L6iB2ugSUiFuxvHnsttZnbQ@mail.gmail.com>

Hi Ariel,

There are many open source options to conduct routing analysis, which are
used into accessibility modeling. One of the most used alternatives
nowadays is called OpenTripPlanner
<https://github.com/opentripplanner/OpenTripPlanner>. I've written a couple
Python scripts to call OTP e generate travel-time estimates from many
points to many points using different transport modes including public
transport (https://github.com/rafapereirabr/otp-travel-time-matrix). Marcus
Youg and others have developed a R package (opentripplanner
https://github.com/ITSLeeds/opentripplanner) that allows one to call OTP
from within R. Highly recommended! I hope this is helpful in some way.

best wishes,

Rafael H M Pereira
https://urbandemographics.blogspot.com/

On Wed, Sep 4, 2019 at 2:25 PM Rich Shepard <rshepard at appl-ecosys.com>
wrote:

> On Wed, 4 Sep 2019, Ariel Fuentesdi wrote:
>
> > I want to produce a prediction of trip generation for the next year, I'm
> > thinking could be useful a Spatio-temporal model with covariates data. I
> > have trips values in point locations since 2015 also the population in
> > census tracts and supply which are bus lines and I'm thinking to convert
> > them into an accessibility grid (from the census tracts to bus stops). I
> > have seen that Spatio-temporal models are applied to environmental
> > problems only, would you recommend me any specific approach or the use of
> > a specific model?
>
> Ariel,
>
> Your description suggests you would like to solve the classic 'traveling
> salesman' problem. I don't know that R's spatio-temporal functions are
> suitable but open street map apparently can help pick optimal routes and a
> web search for linux: traveling salesman problem found many software
> solutions.
>
> Travel safely,
>
> Rich
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From A|ex@nder@Herr @end|ng |rom c@|ro@@u  Thu Sep  5 06:29:47 2019
From: A|ex@nder@Herr @end|ng |rom c@|ro@@u (Herr, Alexander (L&W, Black Mountain))
Date: Thu, 5 Sep 2019 04:29:47 +0000
Subject: [R-sig-Geo] fasterize error
Message-ID: <SYCPR01MB4447A5BF93CD936896AFCF65EBBB0@SYCPR01MB4447.ausprd01.prod.outlook.com>

Hi,

I get an error when attempting to run fasterize:

library(sf)
library(fasterize)
p1 <- rbind(c(-180,-20), c(-140,55), c(10, 0), c(-140,-60), c(-180,-20))
hole <- rbind(c(-150,-20), c(-100,-10), c(-110,20), c(-150,-20))
p1 <- list(p1, hole)
p2 <- list(rbind(c(-10,0), c(140,60), c(160,0), c(140,-55), c(-10,0)))
p3 <- list(rbind(c(-125,0), c(0,60), c(40,5), c(15,-45), c(-125,0)))
pols <- st_sf(value = rep(1,3),
              geometry = st_sfc(lapply(list(p1, p2, p3), st_polygon)))
r <- raster(pols, res = 1)
r <- fasterize(pols, r, field = "value", fun="sum")

Error in fasterize(pols, r, field = "value", fun = "sum") :
  No current support for rotated rasters.


>sessionInfo()
R version 3.6.1 (2019-07-05)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: SUSE Linux Enterprise Server 12 SP3

Matrix products: default
BLAS/LAPACK: /apps/intel/mkl/2017.2.174/compilers_and_libraries_2017.2.174/linux/mkl/lib/intel64_lin/libmkl_intel_lp64.so

locale:
[1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8
 [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                  LC_ADDRESS=C
[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] fasterize_1.0.0 sf_0.7-7

loaded via a namespace (and not attached):
[1] compiler_3.6.1     magrittr_1.5       class_7.3-15       DBI_1.0.0
 [5] tools_3.6.1        units_0.6-3        sp_1.3-1           Rcpp_1.0.2
 [9] raster_2.9-23      KernSmooth_2.23-15 codetools_0.2-16   grid_3.6.1
[13] e1071_1.7-2        classInt_0.3-3     lattice_0.20-38

Any suggestions?

Thanks
Herry

	[[alternative HTML version deleted]]


From |v|@|e|ro @end|ng |rom gm@||@com  Mon Sep  9 21:28:32 2019
From: |v|@|e|ro @end|ng |rom gm@||@com (Frederico Faleiro)
Date: Mon, 9 Sep 2019 16:28:32 -0300
Subject: [R-sig-Geo] Warning in fit.variogram: value out of range in 'bessel
 k' | automap and gstat packages
Message-ID: <CAL+ycWmGkWTLQBOmXO0O4BnHHf30=i4qz5Pwjcn52-GHtBvA1w@mail.gmail.com>

Dear list,

I am trying make an interpolation with the function autoKrige from the
package automap, but I received more than 50 times the following warning
message:

In fit.variogram(experimental variogram, model = vgm(psill = psill, ... :
value out of range in 'bessel k'

I have tryed identify it in the code of fit.variogram and vgm from the
gstat package, but they do not have any warning about it in the code. Then
I imagine the warning is from another function.
I fitted the variogram automatically in the automap and after I fitted in
the gstat to check if there is the same warning for that parameters, but in
the last I do not have any warning. When I check the variogram model, it
has a good fit apparently. I provided the reproductible example below.

Do you know the consequences of this warning and how can I avoid it? I
would like to use the automap package because I need interpolate many other
files like this.

# example
library(automap)
library(sp)

# download the data in:
https://drive.google.com/file/d/1L33_QgpNMdwvWff_uMrwhl_KCajrtlVe/view?usp=sharing
# read the data
pr <- read.table('pr_monC.txt', header = TRUE, sep = "\t")
coordinates(pr) <- ~long+lat
# read the grid
gr <- read.table('grid.txt' , header = TRUE, sep = '\t')
gridded(gr) <-  ~long+lat

# automatic fit variogram with automap
av <- autofitVariogram(jan~1, pr)
# warnings message:   In fit.variogram(experimental variogram, model =
vgm(psill = psill, ... : value out of range in 'bessel k'
plot(av) # get in the graph the parameters to fit the variogram

# fit variogram in gstat with the model parameters from autofitVariogram to
check if there is any warning message too
ve <- variogram(jan~1, pr)
v <- fit.variogram(ve, vgm(psill = 9723, model = "Ste", range = 20, nugget
= 194, kappa = 0.8))
# it does not produce any warning
plot(ve, v)

Best regards,

Frederico

	[[alternative HTML version deleted]]


From Jo@@SKOIEN m@iii@g oii ec@europ@@eu  Wed Sep 11 12:02:20 2019
From: Jo@@SKOIEN m@iii@g oii ec@europ@@eu (Jo@@SKOIEN m@iii@g oii ec@europ@@eu)
Date: Wed, 11 Sep 2019 10:02:20 +0000
Subject: [R-sig-Geo] 
 Warning in fit.variogram: value out of range in 'bessel
 k' | automap and gstat packages
In-Reply-To: <CAL+ycWmGkWTLQBOmXO0O4BnHHf30=i4qz5Pwjcn52-GHtBvA1w@mail.gmail.com>
References: <CAL+ycWmGkWTLQBOmXO0O4BnHHf30=i4qz5Pwjcn52-GHtBvA1w@mail.gmail.com>
Message-ID: <2010d7b274bd475598ca5f816aadd5f9@ec.europa.eu>


Frederico,


I don't think you need to worry about this warning in this case. autofitVariogram tests a lot of variogram models (and different kappa-values) in the search for the best one, and then fit.variogram tries to optimize the parameters based on these. It seems the warnings were generated in the C-code of gstat, based on some of the tested kappa-values for the Matern variogram (Stein implementation). It also seems that these kappa values did not give good fits to the sample variogram, so you did not get the warning from the best fit variogram in this case.


Hope this helps,

Jon



--
Jon Olav Sk?ien
European Commission
Joint Research Centre ? JRC.E.1
Disaster Risk Management Unit
Building 26b 1/144 | Via E.Fermi 2749, I-21027 Ispra (VA) Italy, TP 267
jon.skoien at ec.europa.eu<https://remi.webmail.ec.europa.eu/owa/redir.aspx?C=O12RUARdbvGA3WF3zGoSV0j5xMoZlQcIEwiS4Y9G8jzXRqCCC1HUCA..&URL=mailto%3ajon.skoien%40jrc.ec.europa.eu> Tel:  +39 0332 789205 Disclaimer: Views expressed in this email are those of the individual and do not necessarily represent official views of the European Commission.

________________________________
From: R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of Frederico Faleiro <fvfaleiro at gmail.com>
Sent: 09 September 2019 21:28:32
To: RsigGeo
Subject: [R-sig-Geo] Warning in fit.variogram: value out of range in 'bessel k' | automap and gstat packages

Dear list,

I am trying make an interpolation with the function autoKrige from the
package automap, but I received more than 50 times the following warning
message:

In fit.variogram(experimental variogram, model = vgm(psill = psill, ... :
value out of range in 'bessel k'

I have tryed identify it in the code of fit.variogram and vgm from the
gstat package, but they do not have any warning about it in the code. Then
I imagine the warning is from another function.
I fitted the variogram automatically in the automap and after I fitted in
the gstat to check if there is the same warning for that parameters, but in
the last I do not have any warning. When I check the variogram model, it
has a good fit apparently. I provided the reproductible example below.

Do you know the consequences of this warning and how can I avoid it? I
would like to use the automap package because I need interpolate many other
files like this.

# example
library(automap)
library(sp)

# download the data in:
https://urldefense.proofpoint.com/v2/url?u=https-3A__drive.google.com_file_d_1L33-5FQgpNMdwvWff-5FuMrwhl-5FKCajrtlVe_view-3Fusp-3Dsharing&d=DwICAg&c=8NwulVB6ucrjuSGiwL_ckQ&r=DA6jV5X00Z1YpyMh4OS79xeSQGErBqY83CBz841DNnU&m=YlpT3yKlbNVLvXMp08O8X1LkniHGXTzJeLDHLTotwOI&s=U2z98vHb1mpKhKJ9UXA0RUrPi6r6IXibq1cuuyB0jWY&e=
# read the data
pr <- read.table('pr_monC.txt', header = TRUE, sep = "\t")
coordinates(pr) <- ~long+lat
# read the grid
gr <- read.table('grid.txt' , header = TRUE, sep = '\t')
gridded(gr) <-  ~long+lat

# automatic fit variogram with automap
av <- autofitVariogram(jan~1, pr)
# warnings message:   In fit.variogram(experimental variogram, model =
vgm(psill = psill, ... : value out of range in 'bessel k'
plot(av) # get in the graph the parameters to fit the variogram

# fit variogram in gstat with the model parameters from autofitVariogram to
check if there is any warning message too
ve <- variogram(jan~1, pr)
v <- fit.variogram(ve, vgm(psill = 9723, model = "Ste", range = 20, nugget
= 194, kappa = 0.8))
# it does not produce any warning
plot(ve, v)

Best regards,

Frederico

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dgeo&d=DwICAg&c=8NwulVB6ucrjuSGiwL_ckQ&r=DA6jV5X00Z1YpyMh4OS79xeSQGErBqY83CBz841DNnU&m=YlpT3yKlbNVLvXMp08O8X1LkniHGXTzJeLDHLTotwOI&s=wzYnAjR9sQtl23JiTMc5f1m79m8uQgUt9DSCj3wuTeA&e=

	[[alternative HTML version deleted]]


From Roger@B|v@nd @end|ng |rom nhh@no  Wed Sep 11 14:34:59 2019
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Wed, 11 Sep 2019 14:34:59 +0200
Subject: [R-sig-Geo] PROJ 6 may impact workflows and packages using sf or
 rgdal
Message-ID: <alpine.LFD.2.21.1909111419590.17735@reclus.nhh.no>

Changes introduced in PROJ 6, whether using the new proj.h API (sf) or the 
old proj_api.h API (rgdal, lwgeom) may impact R workflows and packages 
using sf or rgdal for transforming coordinate reference systems.

Because +datum= is effectively defunct, and will be gone in PROJ 7 (March 
2020), any data including CRS set correctly for previous PROJ will risk no 
longer be transformed correctly. Work is ongoing to establish how users 
can adapt to this, but it will be very risky to assume that 
transformations that worked in PROJ 4 will necessarily work as well or 
better in PROJ >= 6 without manual intervention.

Discussion is welcomed, in particular on: 
https://github.com/r-spatial/discuss/issues/28 based on 
https://github.com/r-spatial/sf/issues/1146; further analysis described in 
the workshop document on https://rsbivand.github.io/geostat19_talk/.

Please examine your workflows and packages, check whether your work is 
affected, and contribute to discussions through the issues on github. This 
list may be used, but it'll be best to keep things connected.

Roger

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From j@me@@e@@@mp|e @end|ng |rom gm@||@com  Wed Sep 11 21:38:30 2019
From: j@me@@e@@@mp|e @end|ng |rom gm@||@com (James Sample)
Date: Wed, 11 Sep 2019 21:38:30 +0200
Subject: [R-sig-Geo] rgdal, PROJ6 and "+init=epsg" syntax on Jupyter/conda
Message-ID: <CAAOdhd7AcNqVjja0rwit4x5r4j4H3Yh-qEKccQkjn-2M0PgNxw@mail.gmail.com>

Dear all,

I am trying to setup R and rgdal within a JupyterLab environment alongside
my usual Python tools. I realise this is probably an unfamiliar setup for
many, but I hope someone might be able to help nevertheless.

I'm using a Docker container based on Ubuntu 18.04 and derived from the
Jupyter Data Science Notebook (
https://github.com/jupyter/docker-stacks/tree/master/datascience-notebook).
I have Python 3.7 and R 3.6 installed, and I'm using "conda" as my package
manager.

I have successfully installed GDAL and PROJ, together with various Python
and R packages, including 'sp' and 'rgdal'. When I run

    require(rgdal)

I see the following

Loading required package: rgdal
Loading required package: sp
rgdal: version: 1.4-4, (SVN revision 833)
 Geospatial Data Abstraction Library extensions to R successfully loaded
 Loaded GDAL runtime: GDAL 2.4.2, released 2019/06/28
 Path to GDAL shared files: /opt/conda/share/gdal
 GDAL binary built with GEOS: TRUE
 Loaded PROJ.4 runtime: Rel. 6.1.0, May 15th, 2019, [PJ_VERSION: 610]
 Path to PROJ.4 shared files: (autodetected)
 Linking to sp version: 1.3-1


which seems OK. Most things work as expected, but this

    CRS("+init=epsg:3035")

gives an exception

    Error in CRS("+init=epsg:3035"): no arguments in initialization list

The same code works fine in R-Studio, although I note that my R-Studio
installation has PROJ 4.9.2 (with the same versions of rgdal and sp as
listed above). Unfortunately I can't downgrade PROJ, since some of my
Python packages require version 6.1.

I have read that rgdal is compatible with PROJ6 and I haven't been able to
find (m)any similar issues online, so I assume I'm doing something wrong.
As a workaround, this runs successfully

showP4(showWKT("+init=epsg:3035"))

But the original syntax is cleaner and I'd rather not refactor all my old
code if I can help it. Can anyone point me in the right direction, please?
Is the "+init=epsg" syntax supported with PROJ 6, or should I be using an
alternative?

Thanks and best wishes,


James.

	[[alternative HTML version deleted]]


From edzer@pebe@m@ @end|ng |rom un|-muen@ter@de  Wed Sep 11 23:10:12 2019
From: edzer@pebe@m@ @end|ng |rom un|-muen@ter@de (Edzer Pebesma)
Date: Wed, 11 Sep 2019 23:10:12 +0200
Subject: [R-sig-Geo] 
 rgdal, PROJ6 and "+init=epsg" syntax on Jupyter/conda
In-Reply-To: <CAAOdhd7AcNqVjja0rwit4x5r4j4H3Yh-qEKccQkjn-2M0PgNxw@mail.gmail.com>
References: <CAAOdhd7AcNqVjja0rwit4x5r4j4H3Yh-qEKccQkjn-2M0PgNxw@mail.gmail.com>
Message-ID: <5b936ff9-1ff3-a109-bbd4-c3305d6a9471@uni-muenster.de>

On an ubuntu docker image with gdal 3.0.1 and PROJ 6.2.0, I see:

> library(rgdal)
Loading required package: sp
rgdal: version: 1.4-6, (SVN revision (unknown))
 Geospatial Data Abstraction Library extensions to R successfully loaded
 Loaded GDAL runtime: GDAL 3.0.1, released 2019/06/28
 Path to GDAL shared files:
 GDAL binary built with GEOS: FALSE
 Loaded PROJ.4 runtime: Rel. 6.2.0, September 1st, 2019, [PJ_VERSION: 620]
 Path to PROJ.4 shared files: (autodetected)
 Linking to sp version: 1.3-1
> CRS("+init=epsg:3035")
CRS arguments:
 +init=epsg:3035 +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000
+y_0=3210000 +ellps=GRS80 +units=m +no_defs

but also a warning with sf:

> library(sf)
Linking to GEOS 3.7.2, GDAL 3.0.1, PROJ 6.2.0
> st_crs("+init=epsg:3035")
Coordinate Reference System:
  No EPSG code
  proj4string: "+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000
+ellps=GRS80 +units=m +no_defs"
Warning message:
In CPL_crs_from_proj4string(x) :
  GDAL Message 1: +init=epsg:XXXX syntax is deprecated. It might return
a CRS with a non-EPSG compliant axis order.

so it feels like a combination of how PROJ has been installed, and how
it has been compiled into the R packages.


On 9/11/19 9:38 PM, James Sample wrote:
> Dear all,
> 
> I am trying to setup R and rgdal within a JupyterLab environment alongside
> my usual Python tools. I realise this is probably an unfamiliar setup for
> many, but I hope someone might be able to help nevertheless.
> 
> I'm using a Docker container based on Ubuntu 18.04 and derived from the
> Jupyter Data Science Notebook (
> https://github.com/jupyter/docker-stacks/tree/master/datascience-notebook).
> I have Python 3.7 and R 3.6 installed, and I'm using "conda" as my package
> manager.
> 
> I have successfully installed GDAL and PROJ, together with various Python
> and R packages, including 'sp' and 'rgdal'. When I run
> 
>     require(rgdal)
> 
> I see the following
> 
> Loading required package: rgdal
> Loading required package: sp
> rgdal: version: 1.4-4, (SVN revision 833)
>  Geospatial Data Abstraction Library extensions to R successfully loaded
>  Loaded GDAL runtime: GDAL 2.4.2, released 2019/06/28
>  Path to GDAL shared files: /opt/conda/share/gdal
>  GDAL binary built with GEOS: TRUE
>  Loaded PROJ.4 runtime: Rel. 6.1.0, May 15th, 2019, [PJ_VERSION: 610]
>  Path to PROJ.4 shared files: (autodetected)
>  Linking to sp version: 1.3-1
> 
> 
> which seems OK. Most things work as expected, but this
> 
>     CRS("+init=epsg:3035")
> 
> gives an exception
> 
>     Error in CRS("+init=epsg:3035"): no arguments in initialization list
> 
> The same code works fine in R-Studio, although I note that my R-Studio
> installation has PROJ 4.9.2 (with the same versions of rgdal and sp as
> listed above). Unfortunately I can't downgrade PROJ, since some of my
> Python packages require version 6.1.
> 
> I have read that rgdal is compatible with PROJ6 and I haven't been able to
> find (m)any similar issues online, so I assume I'm doing something wrong.
> As a workaround, this runs successfully
> 
> showP4(showWKT("+init=epsg:3035"))
> 
> But the original syntax is cleaner and I'd rather not refactor all my old
> code if I can help it. Can anyone point me in the right direction, please?
> Is the "+init=epsg" syntax supported with PROJ 6, or should I be using an
> alternative?
> 
> Thanks and best wishes,
> 
> 
> James.
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081

-------------- next part --------------
A non-text attachment was scrubbed...
Name: pEpkey.asc
Type: application/pgp-keys
Size: 3110 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20190911/f6c59b7e/attachment.bin>

From eg@mp@du @end|ng |rom gm@||@com  Thu Sep 12 09:29:56 2019
From: eg@mp@du @end|ng |rom gm@||@com (Enoch Gyamfi Ampadu)
Date: Thu, 12 Sep 2019 09:29:56 +0200
Subject: [R-sig-Geo] Area calculation of forest cover classes.
Message-ID: <CAC4+n+wO3pG8L6PgzZH8Sf2VbkM8JM1L8HFhOmHt-3tcaEMshQ@mail.gmail.com>

Dear List,

Please I have carried out an RF and SVM forest cover classification in R. I
want to determine the area in hectors for each of the forest cover classes.
I have not been able to find my way out on it. I wanted to ask if it is
possible to do this in R and will be glad to have assistance on how to
carry that out. And possibly some lead codes to use (I am still learning R
and and how to code.)

Thank you.

Best regards,

Enoch

-- 
*Enoch Gyamfi - Ampadu*

*Geography & Environmental Sciences*

*College of Agriculture, Engineering & Science*

*University of KwaZulu-Natal, Westville Campus*

*Private Bag X54001*
*Durban, South Africa **? 4000**.*
*Phone: +27 835 828255*

*email: egampadu at gmail.com <egampadu at gmail.com>*


*skype: enoch.ampadu*
*The highest evidence of nobility is self-control*.

*A simple act of kindness creates an endless ripple*.

	[[alternative HTML version deleted]]


From j@me@@e@@@mp|e @end|ng |rom gm@||@com  Thu Sep 12 10:55:04 2019
From: j@me@@e@@@mp|e @end|ng |rom gm@||@com (James Sample)
Date: Thu, 12 Sep 2019 10:55:04 +0200
Subject: [R-sig-Geo] 
 rgdal, PROJ6 and "+init=epsg" syntax on Jupyter/conda
In-Reply-To: <5b936ff9-1ff3-a109-bbd4-c3305d6a9471@uni-muenster.de>
References: <CAAOdhd7AcNqVjja0rwit4x5r4j4H3Yh-qEKccQkjn-2M0PgNxw@mail.gmail.com>
 <5b936ff9-1ff3-a109-bbd4-c3305d6a9471@uni-muenster.de>
Message-ID: <CAAOdhd72yMXdeUkk56eeQfJsyqhBAypdRLQbbvjehYtxy_tf8w@mail.gmail.com>

Thanks Edzer - that's very helpful!

Would it be possible for you to link/share your Ubuntu Dockerfile, please?
(I completely understand if you'd rather not, of course).

Perhaps if I can see how you're setting thing up in Ubuntu I can modify my
Jupyter Dockerfile accordingly, and if I can convince myself that this is a
actually conda-forge/build issue (rather than my own mistake) I can open an
issue on the conda r-rgdal feedstock (
https://github.com/conda-forge/r-rgdal-feedstock).

Thanks again for your help!

Best wishes,


James.



On Wed, 11 Sep 2019 at 23:10, Edzer Pebesma <edzer.pebesma at uni-muenster.de>
wrote:

> On an ubuntu docker image with gdal 3.0.1 and PROJ 6.2.0, I see:
>
> > library(rgdal)
> Loading required package: sp
> rgdal: version: 1.4-6, (SVN revision (unknown))
>  Geospatial Data Abstraction Library extensions to R successfully loaded
>  Loaded GDAL runtime: GDAL 3.0.1, released 2019/06/28
>  Path to GDAL shared files:
>  GDAL binary built with GEOS: FALSE
>  Loaded PROJ.4 runtime: Rel. 6.2.0, September 1st, 2019, [PJ_VERSION: 620]
>  Path to PROJ.4 shared files: (autodetected)
>  Linking to sp version: 1.3-1
> > CRS("+init=epsg:3035")
> CRS arguments:
>  +init=epsg:3035 +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000
> +y_0=3210000 +ellps=GRS80 +units=m +no_defs
>
> but also a warning with sf:
>
> > library(sf)
> Linking to GEOS 3.7.2, GDAL 3.0.1, PROJ 6.2.0
> > st_crs("+init=epsg:3035")
> Coordinate Reference System:
>   No EPSG code
>   proj4string: "+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000
> +ellps=GRS80 +units=m +no_defs"
> Warning message:
> In CPL_crs_from_proj4string(x) :
>   GDAL Message 1: +init=epsg:XXXX syntax is deprecated. It might return
> a CRS with a non-EPSG compliant axis order.
>
> so it feels like a combination of how PROJ has been installed, and how
> it has been compiled into the R packages.
>
>
> On 9/11/19 9:38 PM, James Sample wrote:
> > Dear all,
> >
> > I am trying to setup R and rgdal within a JupyterLab environment
> alongside
> > my usual Python tools. I realise this is probably an unfamiliar setup for
> > many, but I hope someone might be able to help nevertheless.
> >
> > I'm using a Docker container based on Ubuntu 18.04 and derived from the
> > Jupyter Data Science Notebook (
> >
> https://github.com/jupyter/docker-stacks/tree/master/datascience-notebook
> ).
> > I have Python 3.7 and R 3.6 installed, and I'm using "conda" as my
> package
> > manager.
> >
> > I have successfully installed GDAL and PROJ, together with various Python
> > and R packages, including 'sp' and 'rgdal'. When I run
> >
> >     require(rgdal)
> >
> > I see the following
> >
> > Loading required package: rgdal
> > Loading required package: sp
> > rgdal: version: 1.4-4, (SVN revision 833)
> >  Geospatial Data Abstraction Library extensions to R successfully loaded
> >  Loaded GDAL runtime: GDAL 2.4.2, released 2019/06/28
> >  Path to GDAL shared files: /opt/conda/share/gdal
> >  GDAL binary built with GEOS: TRUE
> >  Loaded PROJ.4 runtime: Rel. 6.1.0, May 15th, 2019, [PJ_VERSION: 610]
> >  Path to PROJ.4 shared files: (autodetected)
> >  Linking to sp version: 1.3-1
> >
> >
> > which seems OK. Most things work as expected, but this
> >
> >     CRS("+init=epsg:3035")
> >
> > gives an exception
> >
> >     Error in CRS("+init=epsg:3035"): no arguments in initialization list
> >
> > The same code works fine in R-Studio, although I note that my R-Studio
> > installation has PROJ 4.9.2 (with the same versions of rgdal and sp as
> > listed above). Unfortunately I can't downgrade PROJ, since some of my
> > Python packages require version 6.1.
> >
> > I have read that rgdal is compatible with PROJ6 and I haven't been able
> to
> > find (m)any similar issues online, so I assume I'm doing something wrong.
> > As a workaround, this runs successfully
> >
> > showP4(showWKT("+init=epsg:3035"))
> >
> > But the original syntax is cleaner and I'd rather not refactor all my old
> > code if I can help it. Can anyone point me in the right direction,
> please?
> > Is the "+init=epsg" syntax supported with PROJ 6, or should I be using an
> > alternative?
> >
> > Thanks and best wishes,
> >
> >
> > James.
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
> --
> Edzer Pebesma
> Institute for Geoinformatics
> Heisenbergstrasse 2, 48151 Muenster, Germany
> Phone: +49 251 8333081
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From edzer@pebe@m@ @end|ng |rom un|-muen@ter@de  Thu Sep 12 11:08:01 2019
From: edzer@pebe@m@ @end|ng |rom un|-muen@ter@de (Edzer Pebesma)
Date: Thu, 12 Sep 2019 11:08:01 +0200
Subject: [R-sig-Geo] 
 rgdal, PROJ6 and "+init=epsg" syntax on Jupyter/conda
In-Reply-To: <CAAOdhd72yMXdeUkk56eeQfJsyqhBAypdRLQbbvjehYtxy_tf8w@mail.gmail.com>
References: <CAAOdhd7AcNqVjja0rwit4x5r4j4H3Yh-qEKccQkjn-2M0PgNxw@mail.gmail.com>
 <5b936ff9-1ff3-a109-bbd4-c3305d6a9471@uni-muenster.de>
 <CAAOdhd72yMXdeUkk56eeQfJsyqhBAypdRLQbbvjehYtxy_tf8w@mail.gmail.com>
Message-ID: <2ec40afd-61ba-4976-e806-f136808baad7@uni-muenster.de>



On 9/12/19 10:55 AM, James Sample wrote:
> Thanks Edzer - that's very helpful!
> 
> Would it be possible for you to link/share your Ubuntu Dockerfile, please?
> (I completely understand if you'd rather not, of course).

https://github.com/r-spatial/sf/tree/master/inst/docker/gdal

> 
> Perhaps if I can see how you're setting thing up in Ubuntu I can modify my
> Jupyter Dockerfile accordingly, and if I can convince myself that this is a
> actually conda-forge/build issue (rather than my own mistake) I can open an
> issue on the conda r-rgdal feedstock (
> https://github.com/conda-forge/r-rgdal-feedstock).

Great, please also report back here!

> 
> Thanks again for your help!
> 
> Best wishes,
> 
> 
> James.
> 
> 
> 
> On Wed, 11 Sep 2019 at 23:10, Edzer Pebesma <edzer.pebesma at uni-muenster.de>
> wrote:
> 
>> On an ubuntu docker image with gdal 3.0.1 and PROJ 6.2.0, I see:
>>
>>> library(rgdal)
>> Loading required package: sp
>> rgdal: version: 1.4-6, (SVN revision (unknown))
>>  Geospatial Data Abstraction Library extensions to R successfully loaded
>>  Loaded GDAL runtime: GDAL 3.0.1, released 2019/06/28
>>  Path to GDAL shared files:
>>  GDAL binary built with GEOS: FALSE
>>  Loaded PROJ.4 runtime: Rel. 6.2.0, September 1st, 2019, [PJ_VERSION: 620]
>>  Path to PROJ.4 shared files: (autodetected)
>>  Linking to sp version: 1.3-1
>>> CRS("+init=epsg:3035")
>> CRS arguments:
>>  +init=epsg:3035 +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000
>> +y_0=3210000 +ellps=GRS80 +units=m +no_defs
>>
>> but also a warning with sf:
>>
>>> library(sf)
>> Linking to GEOS 3.7.2, GDAL 3.0.1, PROJ 6.2.0
>>> st_crs("+init=epsg:3035")
>> Coordinate Reference System:
>>   No EPSG code
>>   proj4string: "+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000
>> +ellps=GRS80 +units=m +no_defs"
>> Warning message:
>> In CPL_crs_from_proj4string(x) :
>>   GDAL Message 1: +init=epsg:XXXX syntax is deprecated. It might return
>> a CRS with a non-EPSG compliant axis order.
>>
>> so it feels like a combination of how PROJ has been installed, and how
>> it has been compiled into the R packages.
>>
>>
>> On 9/11/19 9:38 PM, James Sample wrote:
>>> Dear all,
>>>
>>> I am trying to setup R and rgdal within a JupyterLab environment
>> alongside
>>> my usual Python tools. I realise this is probably an unfamiliar setup for
>>> many, but I hope someone might be able to help nevertheless.
>>>
>>> I'm using a Docker container based on Ubuntu 18.04 and derived from the
>>> Jupyter Data Science Notebook (
>>>
>> https://github.com/jupyter/docker-stacks/tree/master/datascience-notebook
>> ).
>>> I have Python 3.7 and R 3.6 installed, and I'm using "conda" as my
>> package
>>> manager.
>>>
>>> I have successfully installed GDAL and PROJ, together with various Python
>>> and R packages, including 'sp' and 'rgdal'. When I run
>>>
>>>     require(rgdal)
>>>
>>> I see the following
>>>
>>> Loading required package: rgdal
>>> Loading required package: sp
>>> rgdal: version: 1.4-4, (SVN revision 833)
>>>  Geospatial Data Abstraction Library extensions to R successfully loaded
>>>  Loaded GDAL runtime: GDAL 2.4.2, released 2019/06/28
>>>  Path to GDAL shared files: /opt/conda/share/gdal
>>>  GDAL binary built with GEOS: TRUE
>>>  Loaded PROJ.4 runtime: Rel. 6.1.0, May 15th, 2019, [PJ_VERSION: 610]
>>>  Path to PROJ.4 shared files: (autodetected)
>>>  Linking to sp version: 1.3-1
>>>
>>>
>>> which seems OK. Most things work as expected, but this
>>>
>>>     CRS("+init=epsg:3035")
>>>
>>> gives an exception
>>>
>>>     Error in CRS("+init=epsg:3035"): no arguments in initialization list
>>>
>>> The same code works fine in R-Studio, although I note that my R-Studio
>>> installation has PROJ 4.9.2 (with the same versions of rgdal and sp as
>>> listed above). Unfortunately I can't downgrade PROJ, since some of my
>>> Python packages require version 6.1.
>>>
>>> I have read that rgdal is compatible with PROJ6 and I haven't been able
>> to
>>> find (m)any similar issues online, so I assume I'm doing something wrong.
>>> As a workaround, this runs successfully
>>>
>>> showP4(showWKT("+init=epsg:3035"))
>>>
>>> But the original syntax is cleaner and I'd rather not refactor all my old
>>> code if I can help it. Can anyone point me in the right direction,
>> please?
>>> Is the "+init=epsg" syntax supported with PROJ 6, or should I be using an
>>> alternative?
>>>
>>> Thanks and best wishes,
>>>
>>>
>>> James.
>>>
>>>       [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics
>> Heisenbergstrasse 2, 48151 Muenster, Germany
>> Phone: +49 251 8333081
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081

-------------- next part --------------
A non-text attachment was scrubbed...
Name: pEpkey.asc
Type: application/pgp-keys
Size: 3110 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20190912/85e21223/attachment-0001.bin>

From edzer@pebe@m@ @end|ng |rom un|-muen@ter@de  Thu Sep 12 12:29:59 2019
From: edzer@pebe@m@ @end|ng |rom un|-muen@ter@de (Edzer Pebesma)
Date: Thu, 12 Sep 2019 12:29:59 +0200
Subject: [R-sig-Geo] 
 rgdal, PROJ6 and "+init=epsg" syntax on Jupyter/conda
In-Reply-To: <2ec40afd-61ba-4976-e806-f136808baad7@uni-muenster.de>
References: <CAAOdhd7AcNqVjja0rwit4x5r4j4H3Yh-qEKccQkjn-2M0PgNxw@mail.gmail.com>
 <5b936ff9-1ff3-a109-bbd4-c3305d6a9471@uni-muenster.de>
 <CAAOdhd72yMXdeUkk56eeQfJsyqhBAypdRLQbbvjehYtxy_tf8w@mail.gmail.com>
 <2ec40afd-61ba-4976-e806-f136808baad7@uni-muenster.de>
Message-ID: <dbe8281e-baf7-a95e-ec35-5a1e15830553@uni-muenster.de>

CRAN, btw, reports similar errors on all debian testing platforms, of
the kind

    > st_crs("+init=epsg:3857")$epsg
    proj_create: init=epsg:/init=IGNF: syntax not supported in non-PROJ4
emulation mode

see
https://cran.r-project.org/web/checks/check_results_edzer.pebesma_at_uni-muenster.de.html#sf

I failed to reproduce these because I can't build the CRAN debian
testing docker image from https://github.com/jeroen/rcheckserver ,
reported here: https://github.com/jeroen/rcheckserver/issues/2

I would appreciate any help here.

On 9/12/19 11:08 AM, Edzer Pebesma wrote:
> 
> 
> On 9/12/19 10:55 AM, James Sample wrote:
>> Thanks Edzer - that's very helpful!
>>
>> Would it be possible for you to link/share your Ubuntu Dockerfile, please?
>> (I completely understand if you'd rather not, of course).
> 
> https://github.com/r-spatial/sf/tree/master/inst/docker/gdal
> 
>>
>> Perhaps if I can see how you're setting thing up in Ubuntu I can modify my
>> Jupyter Dockerfile accordingly, and if I can convince myself that this is a
>> actually conda-forge/build issue (rather than my own mistake) I can open an
>> issue on the conda r-rgdal feedstock (
>> https://github.com/conda-forge/r-rgdal-feedstock).
> 
> Great, please also report back here!
> 
>>
>> Thanks again for your help!
>>
>> Best wishes,
>>
>>
>> James.
>>
>>
>>
>> On Wed, 11 Sep 2019 at 23:10, Edzer Pebesma <edzer.pebesma at uni-muenster.de>
>> wrote:
>>
>>> On an ubuntu docker image with gdal 3.0.1 and PROJ 6.2.0, I see:
>>>
>>>> library(rgdal)
>>> Loading required package: sp
>>> rgdal: version: 1.4-6, (SVN revision (unknown))
>>>  Geospatial Data Abstraction Library extensions to R successfully loaded
>>>  Loaded GDAL runtime: GDAL 3.0.1, released 2019/06/28
>>>  Path to GDAL shared files:
>>>  GDAL binary built with GEOS: FALSE
>>>  Loaded PROJ.4 runtime: Rel. 6.2.0, September 1st, 2019, [PJ_VERSION: 620]
>>>  Path to PROJ.4 shared files: (autodetected)
>>>  Linking to sp version: 1.3-1
>>>> CRS("+init=epsg:3035")
>>> CRS arguments:
>>>  +init=epsg:3035 +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000
>>> +y_0=3210000 +ellps=GRS80 +units=m +no_defs
>>>
>>> but also a warning with sf:
>>>
>>>> library(sf)
>>> Linking to GEOS 3.7.2, GDAL 3.0.1, PROJ 6.2.0
>>>> st_crs("+init=epsg:3035")
>>> Coordinate Reference System:
>>>   No EPSG code
>>>   proj4string: "+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000
>>> +ellps=GRS80 +units=m +no_defs"
>>> Warning message:
>>> In CPL_crs_from_proj4string(x) :
>>>   GDAL Message 1: +init=epsg:XXXX syntax is deprecated. It might return
>>> a CRS with a non-EPSG compliant axis order.
>>>
>>> so it feels like a combination of how PROJ has been installed, and how
>>> it has been compiled into the R packages.
>>>
>>>
>>> On 9/11/19 9:38 PM, James Sample wrote:
>>>> Dear all,
>>>>
>>>> I am trying to setup R and rgdal within a JupyterLab environment
>>> alongside
>>>> my usual Python tools. I realise this is probably an unfamiliar setup for
>>>> many, but I hope someone might be able to help nevertheless.
>>>>
>>>> I'm using a Docker container based on Ubuntu 18.04 and derived from the
>>>> Jupyter Data Science Notebook (
>>>>
>>> https://github.com/jupyter/docker-stacks/tree/master/datascience-notebook
>>> ).
>>>> I have Python 3.7 and R 3.6 installed, and I'm using "conda" as my
>>> package
>>>> manager.
>>>>
>>>> I have successfully installed GDAL and PROJ, together with various Python
>>>> and R packages, including 'sp' and 'rgdal'. When I run
>>>>
>>>>     require(rgdal)
>>>>
>>>> I see the following
>>>>
>>>> Loading required package: rgdal
>>>> Loading required package: sp
>>>> rgdal: version: 1.4-4, (SVN revision 833)
>>>>  Geospatial Data Abstraction Library extensions to R successfully loaded
>>>>  Loaded GDAL runtime: GDAL 2.4.2, released 2019/06/28
>>>>  Path to GDAL shared files: /opt/conda/share/gdal
>>>>  GDAL binary built with GEOS: TRUE
>>>>  Loaded PROJ.4 runtime: Rel. 6.1.0, May 15th, 2019, [PJ_VERSION: 610]
>>>>  Path to PROJ.4 shared files: (autodetected)
>>>>  Linking to sp version: 1.3-1
>>>>
>>>>
>>>> which seems OK. Most things work as expected, but this
>>>>
>>>>     CRS("+init=epsg:3035")
>>>>
>>>> gives an exception
>>>>
>>>>     Error in CRS("+init=epsg:3035"): no arguments in initialization list
>>>>
>>>> The same code works fine in R-Studio, although I note that my R-Studio
>>>> installation has PROJ 4.9.2 (with the same versions of rgdal and sp as
>>>> listed above). Unfortunately I can't downgrade PROJ, since some of my
>>>> Python packages require version 6.1.
>>>>
>>>> I have read that rgdal is compatible with PROJ6 and I haven't been able
>>> to
>>>> find (m)any similar issues online, so I assume I'm doing something wrong.
>>>> As a workaround, this runs successfully
>>>>
>>>> showP4(showWKT("+init=epsg:3035"))
>>>>
>>>> But the original syntax is cleaner and I'd rather not refactor all my old
>>>> code if I can help it. Can anyone point me in the right direction,
>>> please?
>>>> Is the "+init=epsg" syntax supported with PROJ 6, or should I be using an
>>>> alternative?
>>>>
>>>> Thanks and best wishes,
>>>>
>>>>
>>>> James.
>>>>
>>>>       [[alternative HTML version deleted]]
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>
>>> --
>>> Edzer Pebesma
>>> Institute for Geoinformatics
>>> Heisenbergstrasse 2, 48151 Muenster, Germany
>>> Phone: +49 251 8333081
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081

-------------- next part --------------
A non-text attachment was scrubbed...
Name: pEpkey.asc
Type: application/pgp-keys
Size: 3110 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20190912/bbb914e4/attachment.bin>

From j@me@@e@@@mp|e @end|ng |rom gm@||@com  Thu Sep 12 17:10:22 2019
From: j@me@@e@@@mp|e @end|ng |rom gm@||@com (James Sample)
Date: Thu, 12 Sep 2019 17:10:22 +0200
Subject: [R-sig-Geo] 
 rgdal, PROJ6 and "+init=epsg" syntax on Jupyter/conda
In-Reply-To: <dbe8281e-baf7-a95e-ec35-5a1e15830553@uni-muenster.de>
References: <CAAOdhd7AcNqVjja0rwit4x5r4j4H3Yh-qEKccQkjn-2M0PgNxw@mail.gmail.com>
 <5b936ff9-1ff3-a109-bbd4-c3305d6a9471@uni-muenster.de>
 <CAAOdhd72yMXdeUkk56eeQfJsyqhBAypdRLQbbvjehYtxy_tf8w@mail.gmail.com>
 <2ec40afd-61ba-4976-e806-f136808baad7@uni-muenster.de>
 <dbe8281e-baf7-a95e-ec35-5a1e15830553@uni-muenster.de>
Message-ID: <CAAOdhd7yj4wSYyvapg8q9R6MU5r1cx7wcNm0fSW6tYsdduZWSA@mail.gmail.com>

After going round in circles most of the day, I finally discovered that the
PROJ_LIB environment variable within my Dockerfile did not match my conda
environment. When I loaded rgdal I saw

    Path to PROJ.4 shared files: (autodetected)

in the output and assumed all was OK, but having explicitly set the
environment variable I now see

    Path to PROJ.4 shared files: /opt/conda/share/proj

and everything works as expected.

On a related note, some of my Python code also has started to give errors
similar to those reported by Edzer e.g.

init=epsg:/init=IGNF: syntax not supported in non-PROJ4 emulation mode

I suspect these issues probably *are *caused by API changes in PROJ6, but
my original issue is unrelated and was due to incorrect paths in my
conda/Docker environment.

Thanks for your help, Edzer! I look forward to working more with R spatial
tools in the future :-)


James.

On Thu, 12 Sep 2019 at 12:30, Edzer Pebesma <edzer.pebesma at uni-muenster.de>
wrote:

> CRAN, btw, reports similar errors on all debian testing platforms, of
> the kind
>
>     > st_crs("+init=epsg:3857")$epsg
>     proj_create: init=epsg:/init=IGNF: syntax not supported in non-PROJ4
> emulation mode
>
> see
>
> https://cran.r-project.org/web/checks/check_results_edzer.pebesma_at_uni-muenster.de.html#sf
>
> I failed to reproduce these because I can't build the CRAN debian
> testing docker image from https://github.com/jeroen/rcheckserver ,
> reported here: https://github.com/jeroen/rcheckserver/issues/2
>
> I would appreciate any help here.
>
> On 9/12/19 11:08 AM, Edzer Pebesma wrote:
> >
> >
> > On 9/12/19 10:55 AM, James Sample wrote:
> >> Thanks Edzer - that's very helpful!
> >>
> >> Would it be possible for you to link/share your Ubuntu Dockerfile,
> please?
> >> (I completely understand if you'd rather not, of course).
> >
> > https://github.com/r-spatial/sf/tree/master/inst/docker/gdal
> >
> >>
> >> Perhaps if I can see how you're setting thing up in Ubuntu I can modify
> my
> >> Jupyter Dockerfile accordingly, and if I can convince myself that this
> is a
> >> actually conda-forge/build issue (rather than my own mistake) I can
> open an
> >> issue on the conda r-rgdal feedstock (
> >> https://github.com/conda-forge/r-rgdal-feedstock).
> >
> > Great, please also report back here!
> >
> >>
> >> Thanks again for your help!
> >>
> >> Best wishes,
> >>
> >>
> >> James.
> >>
> >>
> >>
> >> On Wed, 11 Sep 2019 at 23:10, Edzer Pebesma <
> edzer.pebesma at uni-muenster.de>
> >> wrote:
> >>
> >>> On an ubuntu docker image with gdal 3.0.1 and PROJ 6.2.0, I see:
> >>>
> >>>> library(rgdal)
> >>> Loading required package: sp
> >>> rgdal: version: 1.4-6, (SVN revision (unknown))
> >>>  Geospatial Data Abstraction Library extensions to R successfully
> loaded
> >>>  Loaded GDAL runtime: GDAL 3.0.1, released 2019/06/28
> >>>  Path to GDAL shared files:
> >>>  GDAL binary built with GEOS: FALSE
> >>>  Loaded PROJ.4 runtime: Rel. 6.2.0, September 1st, 2019, [PJ_VERSION:
> 620]
> >>>  Path to PROJ.4 shared files: (autodetected)
> >>>  Linking to sp version: 1.3-1
> >>>> CRS("+init=epsg:3035")
> >>> CRS arguments:
> >>>  +init=epsg:3035 +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000
> >>> +y_0=3210000 +ellps=GRS80 +units=m +no_defs
> >>>
> >>> but also a warning with sf:
> >>>
> >>>> library(sf)
> >>> Linking to GEOS 3.7.2, GDAL 3.0.1, PROJ 6.2.0
> >>>> st_crs("+init=epsg:3035")
> >>> Coordinate Reference System:
> >>>   No EPSG code
> >>>   proj4string: "+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000
> +y_0=3210000
> >>> +ellps=GRS80 +units=m +no_defs"
> >>> Warning message:
> >>> In CPL_crs_from_proj4string(x) :
> >>>   GDAL Message 1: +init=epsg:XXXX syntax is deprecated. It might return
> >>> a CRS with a non-EPSG compliant axis order.
> >>>
> >>> so it feels like a combination of how PROJ has been installed, and how
> >>> it has been compiled into the R packages.
> >>>
> >>>
> >>> On 9/11/19 9:38 PM, James Sample wrote:
> >>>> Dear all,
> >>>>
> >>>> I am trying to setup R and rgdal within a JupyterLab environment
> >>> alongside
> >>>> my usual Python tools. I realise this is probably an unfamiliar setup
> for
> >>>> many, but I hope someone might be able to help nevertheless.
> >>>>
> >>>> I'm using a Docker container based on Ubuntu 18.04 and derived from
> the
> >>>> Jupyter Data Science Notebook (
> >>>>
> >>>
> https://github.com/jupyter/docker-stacks/tree/master/datascience-notebook
> >>> ).
> >>>> I have Python 3.7 and R 3.6 installed, and I'm using "conda" as my
> >>> package
> >>>> manager.
> >>>>
> >>>> I have successfully installed GDAL and PROJ, together with various
> Python
> >>>> and R packages, including 'sp' and 'rgdal'. When I run
> >>>>
> >>>>     require(rgdal)
> >>>>
> >>>> I see the following
> >>>>
> >>>> Loading required package: rgdal
> >>>> Loading required package: sp
> >>>> rgdal: version: 1.4-4, (SVN revision 833)
> >>>>  Geospatial Data Abstraction Library extensions to R successfully
> loaded
> >>>>  Loaded GDAL runtime: GDAL 2.4.2, released 2019/06/28
> >>>>  Path to GDAL shared files: /opt/conda/share/gdal
> >>>>  GDAL binary built with GEOS: TRUE
> >>>>  Loaded PROJ.4 runtime: Rel. 6.1.0, May 15th, 2019, [PJ_VERSION: 610]
> >>>>  Path to PROJ.4 shared files: (autodetected)
> >>>>  Linking to sp version: 1.3-1
> >>>>
> >>>>
> >>>> which seems OK. Most things work as expected, but this
> >>>>
> >>>>     CRS("+init=epsg:3035")
> >>>>
> >>>> gives an exception
> >>>>
> >>>>     Error in CRS("+init=epsg:3035"): no arguments in initialization
> list
> >>>>
> >>>> The same code works fine in R-Studio, although I note that my R-Studio
> >>>> installation has PROJ 4.9.2 (with the same versions of rgdal and sp as
> >>>> listed above). Unfortunately I can't downgrade PROJ, since some of my
> >>>> Python packages require version 6.1.
> >>>>
> >>>> I have read that rgdal is compatible with PROJ6 and I haven't been
> able
> >>> to
> >>>> find (m)any similar issues online, so I assume I'm doing something
> wrong.
> >>>> As a workaround, this runs successfully
> >>>>
> >>>> showP4(showWKT("+init=epsg:3035"))
> >>>>
> >>>> But the original syntax is cleaner and I'd rather not refactor all my
> old
> >>>> code if I can help it. Can anyone point me in the right direction,
> >>> please?
> >>>> Is the "+init=epsg" syntax supported with PROJ 6, or should I be
> using an
> >>>> alternative?
> >>>>
> >>>> Thanks and best wishes,
> >>>>
> >>>>
> >>>> James.
> >>>>
> >>>>       [[alternative HTML version deleted]]
> >>>>
> >>>> _______________________________________________
> >>>> R-sig-Geo mailing list
> >>>> R-sig-Geo at r-project.org
> >>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>>>
> >>>
> >>> --
> >>> Edzer Pebesma
> >>> Institute for Geoinformatics
> >>> Heisenbergstrasse 2, 48151 Muenster, Germany
> >>> Phone: +49 251 8333081
> >>> _______________________________________________
> >>> R-sig-Geo mailing list
> >>> R-sig-Geo at r-project.org
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>>
> >>
> >>      [[alternative HTML version deleted]]
> >>
> >> _______________________________________________
> >> R-sig-Geo mailing list
> >> R-sig-Geo at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>
> >
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
> --
> Edzer Pebesma
> Institute for Geoinformatics
> Heisenbergstrasse 2, 48151 Muenster, Germany
> Phone: +49 251 8333081
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From cr||ep @end|ng |rom gm@||@com  Thu Sep 12 17:16:50 2019
From: cr||ep @end|ng |rom gm@||@com (=?UTF-8?Q?Cristo_Facundo_P=C3=A9rez?=)
Date: Thu, 12 Sep 2019 10:16:50 -0500
Subject: [R-sig-Geo] Gridding a daily time series in R
In-Reply-To: <CAETJCKOs+_0Js73OQ9vDaXauf9tLuqwH-f5KXcJD-XbPBdHwGA@mail.gmail.com>
References: <CAETJCKOs+_0Js73OQ9vDaXauf9tLuqwH-f5KXcJD-XbPBdHwGA@mail.gmail.com>
Message-ID: <CAETJCKN7XxzRqqKn9d=_XE+798V9B7Ojmm2xEM-mtmAGv5gYiw@mail.gmail.com>

Dear community,

I have a daily time series of precipitation, which I intend to transform it
into a single NetCDF file of daily precipitation. So, first, I would like
to explore the best way to impute missing values, grid the daily values of
the different available weather stations and get daily raster files into a
.nc format. I have read about different climate/hydrological packages such
as "hyfo",  "meteoland", "gstat" and "hydroTMS". However, I haven't found a
 way to do it. I am a beginner in spatial/temporal analysis with R. So, my
question is *does anybody have experience/document in developing a similar
task so I can get some ideas?*

My database contains id, date, cod, lon, lat, elev, and precipitation value
of 41 climate stations for the period 1980-2018. I have NAs values in the
database. I organised my database in two datasets:

1. where the first column presents date and the other 50 columns present a
climate station, while rows present the values/NAs [14245 observations of
42 variables].

2. where the name, long, lat, and elev, are presented in the columns. 4
columns presenting information of 41 weather stations.

I would appreciate any input, idea or suggestion to find a way out to grid
the daily time series and get the ".nc" file.

Thank you,

Cristo Facundo P?rez

	[[alternative HTML version deleted]]


From @@r@h@go@|ee @end|ng |rom gm@||@com  Thu Sep 12 18:03:14 2019
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Thu, 12 Sep 2019 12:03:14 -0400
Subject: [R-sig-Geo] Gridding a daily time series in R
In-Reply-To: <CAETJCKN7XxzRqqKn9d=_XE+798V9B7Ojmm2xEM-mtmAGv5gYiw@mail.gmail.com>
References: <CAETJCKOs+_0Js73OQ9vDaXauf9tLuqwH-f5KXcJD-XbPBdHwGA@mail.gmail.com>
 <CAETJCKN7XxzRqqKn9d=_XE+798V9B7Ojmm2xEM-mtmAGv5gYiw@mail.gmail.com>
Message-ID: <CAM_vjun3jgWrE0y7Z4WA2hHVQ_gxU3twVhn4XB+B-ArBJJedcg@mail.gmail.com>

Hi,

Creating the NetCDF file is easy - there are multiple packages to do that.

Everything else you ask about is hard, and not really R questions.

You need to know:

What is the best way to impute missing precipitation data to fit my needs?

What is the best way to grid point-based precipitation data to fit my needs?

Both of these are very complex, and questions better suited to experts
in the field. At the very least, you need to review the copious
existing statistical literature on those topics. Once you have the
theoretical questions answered, the question of "How do I do this in
R?" might be suitable for the list.

But honestly, you are probably better off finding extant gridded data
for your region, rather than trying to do it yourself.

Sarah

On Thu, Sep 12, 2019 at 11:21 AM Cristo Facundo P?rez <crifep at gmail.com> wrote:
>
> Dear community,
>
> I have a daily time series of precipitation, which I intend to transform it
> into a single NetCDF file of daily precipitation. So, first, I would like
> to explore the best way to impute missing values, grid the daily values of
> the different available weather stations and get daily raster files into a
> .nc format. I have read about different climate/hydrological packages such
> as "hyfo",  "meteoland", "gstat" and "hydroTMS". However, I haven't found a
>  way to do it. I am a beginner in spatial/temporal analysis with R. So, my
> question is *does anybody have experience/document in developing a similar
> task so I can get some ideas?*
>
> My database contains id, date, cod, lon, lat, elev, and precipitation value
> of 41 climate stations for the period 1980-2018. I have NAs values in the
> database. I organised my database in two datasets:
>
> 1. where the first column presents date and the other 50 columns present a
> climate station, while rows present the values/NAs [14245 observations of
> 42 variables].
>
> 2. where the name, long, lat, and elev, are presented in the columns. 4
> columns presenting information of 41 weather stations.
>
> I would appreciate any input, idea or suggestion to find a way out to grid
> the daily time series and get the ".nc" file.
>
> Thank you,
>
> Cristo Facundo P?rez
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Sarah Goslee (she/her)
http://www.numberwright.com


From @@r@h@go@|ee @end|ng |rom gm@||@com  Thu Sep 12 18:06:21 2019
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Thu, 12 Sep 2019 12:06:21 -0400
Subject: [R-sig-Geo] Area calculation of forest cover classes.
In-Reply-To: <CAC4+n+wO3pG8L6PgzZH8Sf2VbkM8JM1L8HFhOmHt-3tcaEMshQ@mail.gmail.com>
References: <CAC4+n+wO3pG8L6PgzZH8Sf2VbkM8JM1L8HFhOmHt-3tcaEMshQ@mail.gmail.com>
Message-ID: <CAM_vju=nYQm99wWRWRjMRBodFnp5RFk4vsFJDzS=Jc9mADF7cQ@mail.gmail.com>

Hi,

Without knowing any details of what you did, the general procedure is:

Use your fitted Random Forest or SVM model to predict the class for
each pixel in your region of interest - the predict() function.
Use standard spatial data methods to aggregate the resulting spatial
data, or even standard non-spatial methods, since you know the pixel
size - perhaps aggregate() or even table().

Sarah

On Thu, Sep 12, 2019 at 3:30 AM Enoch Gyamfi Ampadu <egampadu at gmail.com> wrote:
>
> Dear List,
>
> Please I have carried out an RF and SVM forest cover classification in R. I
> want to determine the area in hectors for each of the forest cover classes.
> I have not been able to find my way out on it. I wanted to ask if it is
> possible to do this in R and will be glad to have assistance on how to
> carry that out. And possibly some lead codes to use (I am still learning R
> and and how to code.)
>
> Thank you.
>
> Best regards,
>
> Enoch
>


-- 
Sarah Goslee (she/her)
http://www.numberwright.com


From roy@mende|@@ohn @end|ng |rom no@@@gov  Thu Sep 12 18:15:53 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Thu, 12 Sep 2019 09:15:53 -0700
Subject: [R-sig-Geo] Gridding a daily time series in R
In-Reply-To: <CAM_vjun3jgWrE0y7Z4WA2hHVQ_gxU3twVhn4XB+B-ArBJJedcg@mail.gmail.com>
References: <CAETJCKOs+_0Js73OQ9vDaXauf9tLuqwH-f5KXcJD-XbPBdHwGA@mail.gmail.com>
 <CAETJCKN7XxzRqqKn9d=_XE+798V9B7Ojmm2xEM-mtmAGv5gYiw@mail.gmail.com>
 <CAM_vjun3jgWrE0y7Z4WA2hHVQ_gxU3twVhn4XB+B-ArBJJedcg@mail.gmail.com>
Message-ID: <A070D9D8-0E73-4C99-B585-03926F3EBD03@noaa.gov>



> On Sep 12, 2019, at 9:03 AM, Sarah Goslee <sarah.goslee at gmail.com> wrote:
> 
> Creating the NetCDF file is easy - there are multiple packages to do that.

Can I  just gently amend this statement.  Writing an arbitrary netCDF file is easy,  writing a useful netCDF file is hard. The difference is the first just pretty much dumps the data,  while the second has files with all the proper metadata and naming conventions and units that follow one of the conventions,  say the CF conventions and names  (http://cfconventions.org).  I strongly urge anyone creating netCDF files to take the time to learn how to create a file that will be really useful for others down the line.

-Roy


**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From m@p|no|@10 @end|ng |rom gm@||@com  Fri Sep 13 17:38:23 2019
From: m@p|no|@10 @end|ng |rom gm@||@com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Fri, 13 Sep 2019 09:38:23 -0600
Subject: [R-sig-Geo] Problem of vector allocation in GSIF package
Message-ID: <CABkCotQYso9w1fWaOO2kpoN4xAQOYaoSJUVPZ1edKMimQMR4eA@mail.gmail.com>

Dear list members,

I am fitting a model with the GSIF package, but I ran into a problem of
vector allocation.  Is there any way to solve this problem?  See code and
error message below.

I am using:
R 3.6.1
GSIF 0.5-5
Mac with 16 GB of RAM

> rk_rf_ac <- fit.gstatModel(variables_todos_sp["ac"], ac_formulaString_correlacion, covar_finales_sp, method = "quantregForest")Fitting a Quantile Regression Forest model...Shapiro-Wilk normality test and Anderson-Darling normality test report probability of < .05 indicating lack of normal distribution for residualsFitting a 2D variogram...Saving an object of class 'gstatModel'...> rk_rf_ac_pred <- GSIF::predict(rk_rf_ac, covar_finales_sp, predict.method = "KED")Error: cannot allocate vector of size 19.4 Gb

Thank you very much,

Manuel

-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From tom@heng| @end|ng |rom gm@||@com  Fri Sep 13 17:45:25 2019
From: tom@heng| @end|ng |rom gm@||@com (Tomislav Hengl)
Date: Fri, 13 Sep 2019 17:45:25 +0200
Subject: [R-sig-Geo] Problem of vector allocation in GSIF package
In-Reply-To: <CABkCotQYso9w1fWaOO2kpoN4xAQOYaoSJUVPZ1edKMimQMR4eA@mail.gmail.com>
References: <CABkCotQYso9w1fWaOO2kpoN4xAQOYaoSJUVPZ1edKMimQMR4eA@mail.gmail.com>
Message-ID: <79802e3c-3f30-2f67-055a-aec88b697a0c@gmail.com>


You have two options:

1. Run predictions using tiling 
(https://github.com/Envirometrix/BigSpatialDataR#dem-analysis-using-tiling-and-parallelization)

2. Buy more RAM.

I suggest using option 1 since option 2 can propagate to infinity.

PS: I am working on a new package 
(https://github.com/Envirometrix/landmap/) that should give more 
flexibility to users and maybe even incorporate tiling of large objects 
by default.


On 9/13/19 5:38 PM, Manuel Sp?nola wrote:
> Dear list members,
> 
> I am fitting a model with the GSIF package, but I ran into a problem of
> vector allocation.  Is there any way to solve this problem?  See code and
> error message below.
> 
> I am using:
> R 3.6.1
> GSIF 0.5-5
> Mac with 16 GB of RAM
> 
>> rk_rf_ac <- fit.gstatModel(variables_todos_sp["ac"], ac_formulaString_correlacion, covar_finales_sp, method = "quantregForest")Fitting a Quantile Regression Forest model...Shapiro-Wilk normality test and Anderson-Darling normality test report probability of < .05 indicating lack of normal distribution for residualsFitting a 2D variogram...Saving an object of class 'gstatModel'...> rk_rf_ac_pred <- GSIF::predict(rk_rf_ac, covar_finales_sp, predict.method = "KED")Error: cannot allocate vector of size 19.4 Gb
> 
> Thank you very much,
> 
> Manuel
>


From m@p|no|@10 @end|ng |rom gm@||@com  Fri Sep 13 18:39:24 2019
From: m@p|no|@10 @end|ng |rom gm@||@com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Fri, 13 Sep 2019 10:39:24 -0600
Subject: [R-sig-Geo] Problem of vector allocation in GSIF package
In-Reply-To: <79802e3c-3f30-2f67-055a-aec88b697a0c@gmail.com>
References: <CABkCotQYso9w1fWaOO2kpoN4xAQOYaoSJUVPZ1edKMimQMR4eA@mail.gmail.com>
 <79802e3c-3f30-2f67-055a-aec88b697a0c@gmail.com>
Message-ID: <CABkCotQe6mS_WOYXs+vtQUC-u091O0LyEuzMK6bjZjOZBuezLg@mail.gmail.com>

Thank you very much Tom.

I will like to try landmap.

Best,

Manuel

El vie., 13 sept. 2019 a las 9:45, Tomislav Hengl (<tom.hengl at gmail.com>)
escribi?:

>
> You have two options:
>
> 1. Run predictions using tiling
> (
> https://github.com/Envirometrix/BigSpatialDataR#dem-analysis-using-tiling-and-parallelization
> )
>
> 2. Buy more RAM.
>
> I suggest using option 1 since option 2 can propagate to infinity.
>
> PS: I am working on a new package
> (https://github.com/Envirometrix/landmap/) that should give more
> flexibility to users and maybe even incorporate tiling of large objects
> by default.
>
>
> On 9/13/19 5:38 PM, Manuel Sp?nola wrote:
> > Dear list members,
> >
> > I am fitting a model with the GSIF package, but I ran into a problem of
> > vector allocation.  Is there any way to solve this problem?  See code and
> > error message below.
> >
> > I am using:
> > R 3.6.1
> > GSIF 0.5-5
> > Mac with 16 GB of RAM
> >
> >> rk_rf_ac <- fit.gstatModel(variables_todos_sp["ac"],
> ac_formulaString_correlacion, covar_finales_sp, method =
> "quantregForest")Fitting a Quantile Regression Forest model...Shapiro-Wilk
> normality test and Anderson-Darling normality test report probability of <
> .05 indicating lack of normal distribution for residualsFitting a 2D
> variogram...Saving an object of class 'gstatModel'...> rk_rf_ac_pred <-
> GSIF::predict(rk_rf_ac, covar_finales_sp, predict.method = "KED")Error:
> cannot allocate vector of size 19.4 Gb
> >
> > Thank you very much,
> >
> > Manuel
> >
>


-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From m@p|no|@10 @end|ng |rom gm@||@com  Fri Sep 13 18:40:43 2019
From: m@p|no|@10 @end|ng |rom gm@||@com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Fri, 13 Sep 2019 10:40:43 -0600
Subject: [R-sig-Geo] Problem of vector allocation in GSIF package
In-Reply-To: <79802e3c-3f30-2f67-055a-aec88b697a0c@gmail.com>
References: <CABkCotQYso9w1fWaOO2kpoN4xAQOYaoSJUVPZ1edKMimQMR4eA@mail.gmail.com>
 <79802e3c-3f30-2f67-055a-aec88b697a0c@gmail.com>
Message-ID: <CABkCotTKgbDFHEF-XqXFzktWv3MZVvFd2UPcD-n3NV8mr72UbQ@mail.gmail.com>

I wanted to say, "I would like to try landmap".

El vie., 13 sept. 2019 a las 9:45, Tomislav Hengl (<tom.hengl at gmail.com>)
escribi?:

>
> You have two options:
>
> 1. Run predictions using tiling
> (
> https://github.com/Envirometrix/BigSpatialDataR#dem-analysis-using-tiling-and-parallelization
> )
>
> 2. Buy more RAM.
>
> I suggest using option 1 since option 2 can propagate to infinity.
>
> PS: I am working on a new package
> (https://github.com/Envirometrix/landmap/) that should give more
> flexibility to users and maybe even incorporate tiling of large objects
> by default.
>
>
> On 9/13/19 5:38 PM, Manuel Sp?nola wrote:
> > Dear list members,
> >
> > I am fitting a model with the GSIF package, but I ran into a problem of
> > vector allocation.  Is there any way to solve this problem?  See code and
> > error message below.
> >
> > I am using:
> > R 3.6.1
> > GSIF 0.5-5
> > Mac with 16 GB of RAM
> >
> >> rk_rf_ac <- fit.gstatModel(variables_todos_sp["ac"],
> ac_formulaString_correlacion, covar_finales_sp, method =
> "quantregForest")Fitting a Quantile Regression Forest model...Shapiro-Wilk
> normality test and Anderson-Darling normality test report probability of <
> .05 indicating lack of normal distribution for residualsFitting a 2D
> variogram...Saving an object of class 'gstatModel'...> rk_rf_ac_pred <-
> GSIF::predict(rk_rf_ac, covar_finales_sp, predict.method = "KED")Error:
> cannot allocate vector of size 19.4 Gb
> >
> > Thank you very much,
> >
> > Manuel
> >
>


-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From |v|@|e|ro @end|ng |rom gm@||@com  Fri Sep 13 23:16:22 2019
From: |v|@|e|ro @end|ng |rom gm@||@com (Frederico Faleiro)
Date: Fri, 13 Sep 2019 18:16:22 -0300
Subject: [R-sig-Geo] 
 Warning in fit.variogram: value out of range in 'bessel
 k' | automap and gstat packages
In-Reply-To: <2010d7b274bd475598ca5f816aadd5f9@ec.europa.eu>
References: <CAL+ycWmGkWTLQBOmXO0O4BnHHf30=i4qz5Pwjcn52-GHtBvA1w@mail.gmail.com>
 <2010d7b274bd475598ca5f816aadd5f9@ec.europa.eu>
Message-ID: <CAL+ycWkMXzz6Bg=prBxk7BwAm+RgU8uwRhX162RzqjEX4ysWvQ@mail.gmail.com>

Hi Jon and others,

thank you for your help. The problem is really in the Ste model (Matern, M.
Stein's parameterization). The warning only happens
when I execute this model. However in the gstat with the same parameters
for lambda have problem of convergency. Do you think the gstat have
different bevavior to the same issue?

av <- autofitVariogram(jan~1, pr, model = "Ste", verbose = T)
# In fit.variogram(experimental_variogram, model = vgm(psill = psill,  ...
:  value out of range in 'bessel_k'

# define the same kappa values of automap
seq.k <- c(0.05, seq(0.2, 2, 0.1), 5, 10)
ve <- variogram(jan~1, pr)
v <- fit.variogram(v, vgm("Ste"), fit.kappa = seq.k)
Warning messages:
1: In fit.variogram(object, model, fit.sills = fit.sills, fit.ranges =
fit.ranges,  :
  No convergence after 200 iterations: try different initial values?
2: In fit.variogram(object, model, fit.sills = fit.sills, fit.ranges =
fit.ranges,  :
  No convergence after 200 iterations: try different initial values?
3: In fit.variogram(o, m, fit.kappa = FALSE, fit.method = fit.method,  :
  No convergence after 200 iterations: try different initial values?


Best regards,

Frederico

On Wed, Sep 11, 2019 at 7:02 AM <Jon.SKOIEN at ec.europa.eu> wrote:

>
> Frederico,
>
>
> I don't think you need to worry about this warning in this case.
> autofitVariogram tests a lot of variogram models (and different
> kappa-values) in the search for the best one, and then fit.variogram tries
> to optimize the parameters based on these. It seems the warnings were
> generated in the C-code of gstat, based on some of the tested kappa-values
> for the Matern variogram (Stein implementation). It also seems that these
> kappa values did not give good fits to the sample variogram, so you did not
> get the warning from the best fit variogram in this case.
>
>
> Hope this helps,
>
> Jon
>
>
>
> --
> Jon Olav Sk?ien
> European Commission
> Joint Research Centre ? JRC.E.1
> Disaster Risk Management Unit
> Building 26b 1/144 | Via E.Fermi 2749, I-21027 Ispra (VA) Italy, TP 267
> jon.skoien at ec.europa.eu <https://remi.webmail.ec.europa.eu/owa/redir.aspx?C=O12RUARdbvGA3WF3zGoSV0j5xMoZlQcIEwiS4Y9G8jzXRqCCC1HUCA..&URL=mailto%3ajon.skoien%40jrc.ec.europa.eu> Tel:  +39 0332 789205 Disclaimer: Views expressed in this email are those of the individual and do not necessarily represent official views of the European Commission.
>
>
> ------------------------------
> *From:* R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of
> Frederico Faleiro <fvfaleiro at gmail.com>
> *Sent:* 09 September 2019 21:28:32
> *To:* RsigGeo
> *Subject:* [R-sig-Geo] Warning in fit.variogram: value out of range in
> 'bessel k' | automap and gstat packages
>
> Dear list,
>
> I am trying make an interpolation with the function autoKrige from the
> package automap, but I received more than 50 times the following warning
> message:
>
> In fit.variogram(experimental variogram, model = vgm(psill = psill, ... :
> value out of range in 'bessel k'
>
> I have tryed identify it in the code of fit.variogram and vgm from the
> gstat package, but they do not have any warning about it in the code. Then
> I imagine the warning is from another function.
> I fitted the variogram automatically in the automap and after I fitted in
> the gstat to check if there is the same warning for that parameters, but in
> the last I do not have any warning. When I check the variogram model, it
> has a good fit apparently. I provided the reproductible example below.
>
> Do you know the consequences of this warning and how can I avoid it? I
> would like to use the automap package because I need interpolate many other
> files like this.
>
> # example
> library(automap)
> library(sp)
>
> # download the data in:
>
> https://urldefense.proofpoint.com/v2/url?u=https-3A__drive.google.com_file_d_1L33-5FQgpNMdwvWff-5FuMrwhl-5FKCajrtlVe_view-3Fusp-3Dsharing&d=DwICAg&c=8NwulVB6ucrjuSGiwL_ckQ&r=DA6jV5X00Z1YpyMh4OS79xeSQGErBqY83CBz841DNnU&m=YlpT3yKlbNVLvXMp08O8X1LkniHGXTzJeLDHLTotwOI&s=U2z98vHb1mpKhKJ9UXA0RUrPi6r6IXibq1cuuyB0jWY&e=
> # read the data
> pr <- read.table('pr_monC.txt', header = TRUE, sep = "\t")
> coordinates(pr) <- ~long+lat
> # read the grid
> gr <- read.table('grid.txt' , header = TRUE, sep = '\t')
> gridded(gr) <-  ~long+lat
>
> # automatic fit variogram with automap
> av <- autofitVariogram(jan~1, pr)
> # warnings message:   In fit.variogram(experimental variogram, model =
> vgm(psill = psill, ... : value out of range in 'bessel k'
> plot(av) # get in the graph the parameters to fit the variogram
>
> # fit variogram in gstat with the model parameters from autofitVariogram to
> check if there is any warning message too
> ve <- variogram(jan~1, pr)
> v <- fit.variogram(ve, vgm(psill = 9723, model = "Ste", range = 20, nugget
> = 194, kappa = 0.8))
> # it does not produce any warning
> plot(ve, v)
>
> Best regards,
>
> Frederico
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
>
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dgeo&d=DwICAg&c=8NwulVB6ucrjuSGiwL_ckQ&r=DA6jV5X00Z1YpyMh4OS79xeSQGErBqY83CBz841DNnU&m=YlpT3yKlbNVLvXMp08O8X1LkniHGXTzJeLDHLTotwOI&s=wzYnAjR9sQtl23JiTMc5f1m79m8uQgUt9DSCj3wuTeA&e=
>

	[[alternative HTML version deleted]]


From p@nghu@nzh| @end|ng |rom 163@com  Sat Sep 14 01:58:22 2019
From: p@nghu@nzh| @end|ng |rom 163@com (=?GBK?B?wO6/oQ==?=)
Date: Sat, 14 Sep 2019 07:58:22 +0800 (CST)
Subject: [R-sig-Geo] Spatiotemporal autocorrelation in R
Message-ID: <1cc335cb.16f5.16d2d104092.Coremail.panghuanzhi@163.com>

Hi, all
I have also made some search on joint tempospatial correlation of bivariate. Maybe it's possible to calculate spatial autocorrelation of bivariate for each year(just by Geoda), then loop by yearly lag, as Todd said. Some titles of relevant papers as follows:
1.CARBayesST version 3.0.1 - spatiotemporal areal unit modeling in R with conditional autoregressive priors
2.Analyzing spatio-temporal auttocorrelation with LISTA-Viz
3.Controlling for localised spatio-temporal autocorrelation in long-term air pollution and health studies
4.Multivariate temporal and spatio-temporal methods
5.Spatiotemporal - An R package
6.A spatio-temporal model for estimating the long-term effects of air pollution on respiratory hospital admissions in Greater London
Similarly, we have measured two variables(urban land and population yearly growth in 2010-2017 in Yangtze River Delta) and want to study their joint tempospatial correlation, i.e.We just want to check if there is significant tempospatial correlation between urban land and population growth. If there is, where is main cluster located and what's lag order of time and space where this cluster happened?
Hope for your direction.
Tks for Jay Lee's supply of above references.




Jun Li
Business School of AHUT, China




 
	[[alternative HTML version deleted]]


From Roger@B|v@nd @end|ng |rom nhh@no  Sat Sep 14 10:33:19 2019
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Sat, 14 Sep 2019 10:33:19 +0200
Subject: [R-sig-Geo] Spatiotemporal autocorrelation in R
In-Reply-To: <1cc335cb.16f5.16d2d104092.Coremail.panghuanzhi@163.com>
References: <1cc335cb.16f5.16d2d104092.Coremail.panghuanzhi@163.com>
Message-ID: <alpine.LFD.2.21.1909141024410.7634@reclus.nhh.no>

Please do not post HTML, choose plain text in your email client.

Please include all links to previous postings you refer to in plain text, 
as HTML content is deleted. Checking HTML content for hostile payloads is 
a significant contributor to server-related energy use and thus emissions. 
I assume that your reference to "Todd" is to some previous posting here or 
elsewhere, but this link is lost: please provide it. Note that posting 
size is limited to 50KB, because sending large volumes needs to be 
checked, and 3.5K subscribers do not need large postings in their inboxes. 
Make your posting as specific as possible.

Where possible, do include reproducible examples (code in posting, data 
from one of the packages you use. In that way, an interested subscriber 
can grasp more easily your intensions.

Roger Bivand


On Sat, 14 Sep 2019, ?? wrote:

> Hi, all

> I have also made some search on joint tempospatial correlation of 
> bivariate. Maybe it's possible to calculate spatial autocorrelation of 
> bivariate for each year(just by Geoda), then loop by yearly lag, as Todd 
> said. Some titles of relevant papers as follows:

> 1.CARBayesST version 3.0.1 - spatiotemporal areal unit modeling in R 
> with conditional autoregressive priors

> 2.Analyzing spatio-temporal auttocorrelation with LISTA-Viz

> 3.Controlling for localised spatio-temporal autocorrelation in long-term 
> air pollution and health studies

> 4.Multivariate temporal and spatio-temporal methods

> 5.Spatiotemporal - An R package

> 6.A spatio-temporal model for estimating the long-term effects of air 
> pollution on respiratory hospital admissions in Greater London

> Similarly, we have measured two variables(urban land and population 
> yearly growth in 2010-2017 in Yangtze River Delta) and want to study 
> their joint tempospatial correlation, i.e.We just want to check if there 
> is significant tempospatial correlation between urban land and 
> population growth. If there is, where is main cluster located and what's 
> lag order of time and space where this cluster happened? Hope for your 
> direction.

> Tks for Jay Lee's supply of above references.
>
>
>
>
> Jun Li
> Business School of AHUT, China
>
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From vrg@||@no @end|ng |rom gm@||@com  Sat Sep 14 11:30:00 2019
From: vrg@||@no @end|ng |rom gm@||@com (=?Windows-1252?Q?V=EDctor_Rodr=EDguez_Galiano?=)
Date: Sat, 14 Sep 2019 11:30:00 +0200
Subject: [R-sig-Geo] Raster reprojection in R
Message-ID: <004801d56ade$fb964170$f2c2c450$@gmail.com>

Hello,

 I am trying to reproject a raster image from sinusoidal projection using
?projectRaster?. The size of the image is not very big (922 KB), but when
applying the reprojection I get this error message: ?Error: cannot allocate
vector of size 7.1 Gb?. Please see the code below:

HDFpath <- "C:/images/" # dir with images
setwd(HDFpath)            # set working directory
library(raster)
library(rgdal)
geocrs <- "+proj=longlat +ellps=WGS84 +datum=WGS84"
tile <- brick(?image.tif?)
tile_reproj <- projectRaster(tile, crs=geocrs)

Error: cannot allocate vector of size 7.1 Gb

> tile
class       : RasterStack 
dimensions  : 2400, 2400, 5760000, 1  (nrow, ncol, ncell, nlayers)
resolution  : 463.3127, 463.3127  (x, y)
extent      : -11119505, -10007555, 5559753, 6671703  (xmin, xmax, ymin,
ymax)
coord. ref. : +proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181
+b=6371007.181 +units=m +no_defs 
names       : INCA.h08v03.Dormancy_median 
min values  :                          19 
max values  :                         540 


From md@umner @end|ng |rom gm@||@com  Sat Sep 14 11:49:43 2019
From: md@umner @end|ng |rom gm@||@com (Michael Sumner)
Date: Sat, 14 Sep 2019 11:49:43 +0200
Subject: [R-sig-Geo] Raster reprojection in R
In-Reply-To: <004801d56ade$fb964170$f2c2c450$@gmail.com>
References: <004801d56ade$fb964170$f2c2c450$@gmail.com>
Message-ID: <CAAcGz9-ypKWmpfR+10t1Jti741Nr1CCWJ+QCvqQ7xMqS4w207g@mail.gmail.com>

You should set a target raster with the extent and dimensions required.
There are inherent limits in reprojection and heuristics won't always work.
Generally using a target raster is much more efficient anyway.

But, this is an intensive remodeling of the data, delivered in a projection
for good reason (global equal area probably, and reasonably close to the L3
bins used for daily statistics.

You should find an alternative process IMO, are you trying to extract pixel
values or something else?

Cheers, Mike

On Sat., 14 Sep. 2019, 11:30 V?ctor Rodr?guez Galiano, <vrgaliano at gmail.com>
wrote:

> Hello,
>
>  I am trying to reproject a raster image from sinusoidal projection using
> ?projectRaster?. The size of the image is not very big (922 KB), but when
> applying the reprojection I get this error message: ?Error: cannot allocate
> vector of size 7.1 Gb?. Please see the code below:
>
> HDFpath <- "C:/images/" # dir with images
> setwd(HDFpath)            # set working directory
> library(raster)
> library(rgdal)
> geocrs <- "+proj=longlat +ellps=WGS84 +datum=WGS84"
> tile <- brick(?image.tif?)
> tile_reproj <- projectRaster(tile, crs=geocrs)
>
> Error: cannot allocate vector of size 7.1 Gb
>
> > tile
> class       : RasterStack
> dimensions  : 2400, 2400, 5760000, 1  (nrow, ncol, ncell, nlayers)
> resolution  : 463.3127, 463.3127  (x, y)
> extent      : -11119505, -10007555, 5559753, 6671703  (xmin, xmax, ymin,
> ymax)
> coord. ref. : +proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181
> +b=6371007.181 +units=m +no_defs
> names       : INCA.h08v03.Dormancy_median
> min values  :                          19
> max values  :                         540
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From p@nghu@nzh| @end|ng |rom 163@com  Sat Sep 14 15:50:39 2019
From: p@nghu@nzh| @end|ng |rom 163@com (=?GBK?B?wO6/oQ==?=)
Date: Sat, 14 Sep 2019 21:50:39 +0800 (CST)
Subject: [R-sig-Geo] Spatiotemporal autocorrelation in R
In-Reply-To: <alpine.LFD.2.21.1909141024410.7634@reclus.nhh.no>
References: <1cc335cb.16f5.16d2d104092.Coremail.panghuanzhi@163.com>
 <alpine.LFD.2.21.1909141024410.7634@reclus.nhh.no>
Message-ID: <6e2854d4.520b.16d300a3898.Coremail.panghuanzhi@163.com>

Tks Roger for your patience and detailed instruction sincerely!





--



Jun Li
Business School of Anhui University of Technology
 



At 2019-09-14 16:33:19, "Roger Bivand" <Roger.Bivand at nhh.no> wrote:
>Please do not post HTML, choose plain text in your email client.
>
>Please include all links to previous postings you refer to in plain text, 
>as HTML content is deleted. Checking HTML content for hostile payloads is 
>a significant contributor to server-related energy use and thus emissions. 
>I assume that your reference to "Todd" is to some previous posting here or 
>elsewhere, but this link is lost: please provide it. Note that posting 
>size is limited to 50KB, because sending large volumes needs to be 
>checked, and 3.5K subscribers do not need large postings in their inboxes. 
>Make your posting as specific as possible.
>
>Where possible, do include reproducible examples (code in posting, data 
>from one of the packages you use. In that way, an interested subscriber 
>can grasp more easily your intensions.
>
>Roger Bivand
>
>
>On Sat, 14 Sep 2019, ?? wrote:
>
>> Hi, all
>
>> I have also made some search on joint tempospatial correlation of 
>> bivariate. Maybe it's possible to calculate spatial autocorrelation of 
>> bivariate for each year(just by Geoda), then loop by yearly lag, as Todd 
>> said. Some titles of relevant papers as follows:
>
>> 1.CARBayesST version 3.0.1 - spatiotemporal areal unit modeling in R 
>> with conditional autoregressive priors
>
>> 2.Analyzing spatio-temporal auttocorrelation with LISTA-Viz
>
>> 3.Controlling for localised spatio-temporal autocorrelation in long-term 
>> air pollution and health studies
>
>> 4.Multivariate temporal and spatio-temporal methods
>
>> 5.Spatiotemporal - An R package
>
>> 6.A spatio-temporal model for estimating the long-term effects of air 
>> pollution on respiratory hospital admissions in Greater London
>
>> Similarly, we have measured two variables(urban land and population 
>> yearly growth in 2010-2017 in Yangtze River Delta) and want to study 
>> their joint tempospatial correlation, i.e.We just want to check if there 
>> is significant tempospatial correlation between urban land and 
>> population growth. If there is, where is main cluster located and what's 
>> lag order of time and space where this cluster happened? Hope for your 
>> direction.
>
>> Tks for Jay Lee's supply of above references.
>>
>>
>>
>>
>> Jun Li
>> Business School of AHUT, China
>>
>>
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>-- 
>Roger Bivand
>Department of Economics, Norwegian School of Economics,
>Helleveien 30, N-5045 Bergen, Norway.
>voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>https://orcid.org/0000-0003-2392-6140
>https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

	[[alternative HTML version deleted]]


From @@r@h@go@|ee @end|ng |rom gm@||@com  Sat Sep 14 17:42:31 2019
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Sat, 14 Sep 2019 11:42:31 -0400
Subject: [R-sig-Geo] Area calculation of forest cover classes.
In-Reply-To: <CAC4+n+xG2x=yWAFijN5FOvLG3MUOo4hVnmDY5=SvfPX3NzOr3Q@mail.gmail.com>
References: <CAC4+n+wO3pG8L6PgzZH8Sf2VbkM8JM1L8HFhOmHt-3tcaEMshQ@mail.gmail.com>
 <CAM_vju=nYQm99wWRWRjMRBodFnp5RFk4vsFJDzS=Jc9mADF7cQ@mail.gmail.com>
 <CAC4+n+xG2x=yWAFijN5FOvLG3MUOo4hVnmDY5=SvfPX3NzOr3Q@mail.gmail.com>
Message-ID: <CAM_vjunWmCH-FkJrja0FKP1u63xFg=Aa6-aEWurvugsF25U++Q@mail.gmail.com>

Hi Enoch,

It's inappropriate to email just me, rather than the whole list - I
don't have the capacity to provide private tutorials.

You could import your prediction maps into a GIS you're more familiar with.
You could read a tutorial on the raster package, which provides tools
to do what you want.
If you're still struggling with basic R commands, you could read the
Introduction to R that comes with it, or one of the many other
tutorials that are available online and in your library.

In general, this email list is excellent for "I tried this and
couldn't get it to work. How do I fix my error?" and not great for "I
don't know anything about R but I have this project please explain
everything."

So: You have a map. What format is your map? What have you tried? What
didn't work? Where have you searched? What documentation have you
read?

Sarah

On Thu, Sep 12, 2019 at 6:59 PM Enoch Gyamfi Ampadu <egampadu at gmail.com> wrote:
>
> Hi Sarah,
> Thank you for the mail and information. Please I have done the predictions already and have the output maps for both the RF and SVM. Find attached the output map. There are 4 classes and I need to determine the area for each. As I indicated I am now learning area and so not very familiar with a lot of functions. I will be glad of you could provide me with some functions and codes, then I will edit it to suite what I have. I realized you recommended aggregate () and table(), but I don't know how to use them. I will be glad to have some help from you.
>
> Thank you.
>
> Best regards,
>
> Enoch.
>
> On Thu, 12 Sep 2019 at 18:06, Sarah Goslee <sarah.goslee at gmail.com> wrote:
>>
>> Hi,
>>
>> Without knowing any details of what you did, the general procedure is:
>>
>> Use your fitted Random Forest or SVM model to predict the class for
>> each pixel in your region of interest - the predict() function.
>> Use standard spatial data methods to aggregate the resulting spatial
>> data, or even standard non-spatial methods, since you know the pixel
>> size - perhaps aggregate() or even table().
>>
>> Sarah
>>
>> On Thu, Sep 12, 2019 at 3:30 AM Enoch Gyamfi Ampadu <egampadu at gmail.com> wrote:
>> >
>> > Dear List,
>> >
>> > Please I have carried out an RF and SVM forest cover classification in R. I
>> > want to determine the area in hectors for each of the forest cover classes.
>> > I have not been able to find my way out on it. I wanted to ask if it is
>> > possible to do this in R and will be glad to have assistance on how to
>> > carry that out. And possibly some lead codes to use (I am still learning R
>> > and and how to code.)
>> >
>> > Thank you.
>> >
>> > Best regards,
>> >
>> > Enoch
>> >
>>
>>
-- 
Sarah Goslee (she/her)
http://www.numberwright.com


From md@umner @end|ng |rom gm@||@com  Sun Sep 15 00:10:48 2019
From: md@umner @end|ng |rom gm@||@com (Michael Sumner)
Date: Sun, 15 Sep 2019 08:10:48 +1000
Subject: [R-sig-Geo] Raster reprojection in R
In-Reply-To: <CAAcGz9-ypKWmpfR+10t1Jti741Nr1CCWJ+QCvqQ7xMqS4w207g@mail.gmail.com>
References: <004801d56ade$fb964170$f2c2c450$@gmail.com>
 <CAAcGz9-ypKWmpfR+10t1Jti741Nr1CCWJ+QCvqQ7xMqS4w207g@mail.gmail.com>
Message-ID: <CAAcGz99hjbd3S_CDMVROP-65ArjOgOMjvD3LD-z45aYXeDfTcA@mail.gmail.com>

Hi again, I checked the actual extent and it makes more sense now as it is
a tiny region of the Aleutians. The problem in raster's heuristic is that
part of your projected raster overlaps the anti-meridan, and so the
extent-determiner unhelpfully expands to include the full extent of all
longitudes:

library(raster)
ex <- extent(-11119505, -10007555, 5559753, 6671703)
prj <- "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181
+ +b=6371007.181 +units=m +no_defs"
projectExtent(raster(ex, crs = prj, res = 463), crs = "+init=epsg:4326")
class      : RasterLayer
dimensions : 2402, 2402, 5769604  (nrow, ncol, ncell)
resolution : 0.1498734, 0.004163854  (x, y)
extent     : -179.9968, 179.999, 49.99842, 60  (xmin, xmax, ymin, ymax)
crs        : +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs
+ellps=WGS84 +towgs84=0,0,0

Illustrated here:
https://gist.github.com/mdsumner/012c4c8e36ffa42e9053621420924eab

So, you'd want something like

projectRaster(tile, raster(extent(-180, -135, 50, 60), crs = geocrs, res =
0.02)

but, that's still outrageously wasteful and unnecessary as mentioned before
- but depends on what you are doing.

(It's a curious way to store data, but I'm pretty sure the MODIS terra
community settled on a global raster in sinusoidal to match the L3 bins in
a way the marine community doesn't usually do).

Thanks for the example, that gives a good way to approach this question on
various forums where it comes up quite a lot and I never was really
motivated to pursue before.

Cheers, Mike.



On Sat, Sep 14, 2019 at 7:49 PM Michael Sumner <mdsumner at gmail.com> wrote:

> You should set a target raster with the extent and dimensions required.
> There are inherent limits in reprojection and heuristics won't always work.
> Generally using a target raster is much more efficient anyway.
>
> But, this is an intensive remodeling of the data, delivered in a
> projection for good reason (global equal area probably, and reasonably
> close to the L3 bins used for daily statistics.
>
> You should find an alternative process IMO, are you trying to extract
> pixel values or something else?
>
> Cheers, Mike
>
> On Sat., 14 Sep. 2019, 11:30 V?ctor Rodr?guez Galiano, <
> vrgaliano at gmail.com> wrote:
>
>> Hello,
>>
>>  I am trying to reproject a raster image from sinusoidal projection using
>> ?projectRaster?. The size of the image is not very big (922 KB), but when
>> applying the reprojection I get this error message: ?Error: cannot
>> allocate
>> vector of size 7.1 Gb?. Please see the code below:
>>
>> HDFpath <- "C:/images/" # dir with images
>> setwd(HDFpath)            # set working directory
>> library(raster)
>> library(rgdal)
>> geocrs <- "+proj=longlat +ellps=WGS84 +datum=WGS84"
>> tile <- brick(?image.tif?)
>> tile_reproj <- projectRaster(tile, crs=geocrs)
>>
>> Error: cannot allocate vector of size 7.1 Gb
>>
>> > tile
>> class       : RasterStack
>> dimensions  : 2400, 2400, 5760000, 1  (nrow, ncol, ncell, nlayers)
>> resolution  : 463.3127, 463.3127  (x, y)
>> extent      : -11119505, -10007555, 5559753, 6671703  (xmin, xmax, ymin,
>> ymax)
>> coord. ref. : +proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181
>> +b=6371007.181 +units=m +no_defs
>> names       : INCA.h08v03.Dormancy_median
>> min values  :                          19
>> max values  :                         540
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>

-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com

	[[alternative HTML version deleted]]


From Jo@@SKOIEN m@iii@g oii ec@europ@@eu  Mon Sep 16 11:11:15 2019
From: Jo@@SKOIEN m@iii@g oii ec@europ@@eu (Jo@@SKOIEN m@iii@g oii ec@europ@@eu)
Date: Mon, 16 Sep 2019 09:11:15 +0000
Subject: [R-sig-Geo] 
 Warning in fit.variogram: value out of range in 'bessel
 k' | automap and gstat packages
In-Reply-To: <CAL+ycWkMXzz6Bg=prBxk7BwAm+RgU8uwRhX162RzqjEX4ysWvQ@mail.gmail.com>
References: <CAL+ycWmGkWTLQBOmXO0O4BnHHf30=i4qz5Pwjcn52-GHtBvA1w@mail.gmail.com>
 <2010d7b274bd475598ca5f816aadd5f9@ec.europa.eu>,
 <CAL+ycWkMXzz6Bg=prBxk7BwAm+RgU8uwRhX162RzqjEX4ysWvQ@mail.gmail.com>
Message-ID: <fd5f791fee3c4152aed9f53621b7fb70@ec.europa.eu>

Hi Frederico,


gstat does not have different behaviour, because autofitVariogram is using fit.variogram, after some preprocessing. You get the convergency problems with fit.variogram because you don't supply start values for the variogram, which is done in the preprocessing of autofitVariogram.


Cheers,

Jon


--
Jon Olav Sk?ien
European Commission
Joint Research Centre ? JRC.E.1
Disaster Risk Management Unit
Building 26b 1/144 | Via E.Fermi 2749, I-21027 Ispra (VA) Italy, TP 267
jon.skoien at ec.europa.eu<https://remi.webmail.ec.europa.eu/owa/redir.aspx?C=O12RUARdbvGA3WF3zGoSV0j5xMoZlQcIEwiS4Y9G8jzXRqCCC1HUCA..&URL=mailto%3ajon.skoien%40jrc.ec.europa.eu> Tel:  +39 0332 789205 Disclaimer: Views expressed in this email are those of the individual and do not necessarily represent official views of the European Commission.

________________________________
From: Frederico Faleiro <fvfaleiro at gmail.com>
Sent: 13 September 2019 23:16:22
To: SKOIEN Jon (JRC-ISPRA)
Cc: RsigGeo
Subject: Re: [R-sig-Geo] Warning in fit.variogram: value out of range in 'bessel k' | automap and gstat packages

Hi Jon and others,

thank you for your help. The problem is really in the Ste model (Matern, M. Stein's parameterization). The warning only happens
when I execute this model. However in the gstat with the same parameters for lambda have problem of convergency. Do you think the gstat have different bevavior to the same issue?

av <- autofitVariogram(jan~1, pr, model = "Ste", verbose = T)
# In fit.variogram(experimental_variogram, model = vgm(psill = psill,  ... :  value out of range in 'bessel_k'

# define the same kappa values of automap
seq.k <- c(0.05, seq(0.2, 2, 0.1), 5, 10)
ve <- variogram(jan~1, pr)
v <- fit.variogram(v, vgm("Ste"), fit.kappa = seq.k)
Warning messages:
1: In fit.variogram(object, model, fit.sills = fit.sills, fit.ranges = fit.ranges,  :
  No convergence after 200 iterations: try different initial values?
2: In fit.variogram(object, model, fit.sills = fit.sills, fit.ranges = fit.ranges,  :
  No convergence after 200 iterations: try different initial values?
3: In fit.variogram(o, m, fit.kappa = FALSE, fit.method = fit.method,  :
  No convergence after 200 iterations: try different initial values?


Best regards,

Frederico

On Wed, Sep 11, 2019 at 7:02 AM <Jon.SKOIEN at ec.europa.eu<mailto:Jon.SKOIEN at ec.europa.eu>> wrote:


Frederico,


I don't think you need to worry about this warning in this case. autofitVariogram tests a lot of variogram models (and different kappa-values) in the search for the best one, and then fit.variogram tries to optimize the parameters based on these. It seems the warnings were generated in the C-code of gstat, based on some of the tested kappa-values for the Matern variogram (Stein implementation). It also seems that these kappa values did not give good fits to the sample variogram, so you did not get the warning from the best fit variogram in this case.


Hope this helps,

Jon



--
Jon Olav Sk?ien
European Commission
Joint Research Centre ? JRC.E.1
Disaster Risk Management Unit
Building 26b 1/144 | Via E.Fermi 2749, I-21027 Ispra (VA) Italy, TP 267
jon.skoien at ec.europa.eu<https://remi.webmail.ec.europa.eu/owa/redir.aspx?C=O12RUARdbvGA3WF3zGoSV0j5xMoZlQcIEwiS4Y9G8jzXRqCCC1HUCA..&URL=mailto%3ajon.skoien%40jrc.ec.europa.eu> Tel:  +39 0332 789205 Disclaimer: Views expressed in this email are those of the individual and do not necessarily represent official views of the European Commission.

________________________________
From: R-sig-Geo <r-sig-geo-bounces at r-project.org<mailto:r-sig-geo-bounces at r-project.org>> on behalf of Frederico Faleiro <fvfaleiro at gmail.com<mailto:fvfaleiro at gmail.com>>
Sent: 09 September 2019 21:28:32
To: RsigGeo
Subject: [R-sig-Geo] Warning in fit.variogram: value out of range in 'bessel k' | automap and gstat packages

Dear list,

I am trying make an interpolation with the function autoKrige from the
package automap, but I received more than 50 times the following warning
message:

In fit.variogram(experimental variogram, model = vgm(psill = psill, ... :
value out of range in 'bessel k'

I have tryed identify it in the code of fit.variogram and vgm from the
gstat package, but they do not have any warning about it in the code. Then
I imagine the warning is from another function.
I fitted the variogram automatically in the automap and after I fitted in
the gstat to check if there is the same warning for that parameters, but in
the last I do not have any warning. When I check the variogram model, it
has a good fit apparently. I provided the reproductible example below.

Do you know the consequences of this warning and how can I avoid it? I
would like to use the automap package because I need interpolate many other
files like this.

# example
library(automap)
library(sp)

# download the data in:
https://urldefense.proofpoint.com/v2/url?u=https-3A__drive.google.com_file_d_1L33-5FQgpNMdwvWff-5FuMrwhl-5FKCajrtlVe_view-3Fusp-3Dsharing&d=DwICAg&c=8NwulVB6ucrjuSGiwL_ckQ&r=DA6jV5X00Z1YpyMh4OS79xeSQGErBqY83CBz841DNnU&m=YlpT3yKlbNVLvXMp08O8X1LkniHGXTzJeLDHLTotwOI&s=U2z98vHb1mpKhKJ9UXA0RUrPi6r6IXibq1cuuyB0jWY&e=
# read the data
pr <- read.table('pr_monC.txt', header = TRUE, sep = "\t")
coordinates(pr) <- ~long+lat
# read the grid
gr <- read.table('grid.txt' , header = TRUE, sep = '\t')
gridded(gr) <-  ~long+lat

# automatic fit variogram with automap
av <- autofitVariogram(jan~1, pr)
# warnings message:   In fit.variogram(experimental variogram, model =
vgm(psill = psill, ... : value out of range in 'bessel k'
plot(av) # get in the graph the parameters to fit the variogram

# fit variogram in gstat with the model parameters from autofitVariogram to
check if there is any warning message too
ve <- variogram(jan~1, pr)
v <- fit.variogram(ve, vgm(psill = 9723, model = "Ste", range = 20, nugget
= 194, kappa = 0.8))
# it does not produce any warning
plot(ve, v)

Best regards,

Frederico

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dgeo&d=DwICAg&c=8NwulVB6ucrjuSGiwL_ckQ&r=DA6jV5X00Z1YpyMh4OS79xeSQGErBqY83CBz841DNnU&m=YlpT3yKlbNVLvXMp08O8X1LkniHGXTzJeLDHLTotwOI&s=wzYnAjR9sQtl23JiTMc5f1m79m8uQgUt9DSCj3wuTeA&e=

	[[alternative HTML version deleted]]


From m@p|no|@10 @end|ng |rom gm@||@com  Mon Sep 16 16:01:13 2019
From: m@p|no|@10 @end|ng |rom gm@||@com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Mon, 16 Sep 2019 08:01:13 -0600
Subject: [R-sig-Geo] landmap package,
 predict method gave an error of memory exhausted
Message-ID: <CABkCotRwN_tAGHyLOt2SRD2cob2324Eg=DNt0UH7=una5yYyfQ@mail.gmail.com>

Dear list members,

I am fitting an Ensemble Machine Learning with the R package landmap, using
the function train.spLearner, the resulting object is large 2.5 GB, and
when I tried to predict I I got the message of memory exhausted.

I have only 14 points and 23 covariables, in a very small area.

Using R 3.6.1
MacOS, 16GB of ram


pred_co <- predict(m_co)

Error: vector memory exhausted (limit reached?)
Error during wrapup: vector memory exhausted (limit reached?)



-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From tom@heng| @end|ng |rom gm@||@com  Mon Sep 16 16:54:31 2019
From: tom@heng| @end|ng |rom gm@||@com (Tomislav Hengl)
Date: Mon, 16 Sep 2019 16:54:31 +0200
Subject: [R-sig-Geo] landmap package,
 predict method gave an error of memory exhausted
In-Reply-To: <CABkCotRwN_tAGHyLOt2SRD2cob2324Eg=DNt0UH7=una5yYyfQ@mail.gmail.com>
References: <CABkCotRwN_tAGHyLOt2SRD2cob2324Eg=DNt0UH7=una5yYyfQ@mail.gmail.com>
Message-ID: <f12f69ff-59f0-6af0-acfe-52c1c21faa27@gmail.com>


Manuel,

Please send me a private message and a copy of your data so I can test 
where does the RAM blows up. Is it a classification or regression type 
problem?

T. Hengl

On 9/16/19 4:01 PM, Manuel Sp?nola wrote:
> Dear list members,
> 
> I am fitting an Ensemble Machine Learning with the R package landmap, using
> the function train.spLearner, the resulting object is large 2.5 GB, and
> when I tried to predict I I got the message of memory exhausted.
> 
> I have only 14 points and 23 covariables, in a very small area.
> 
> Using R 3.6.1
> MacOS, 16GB of ram
> 
> 
> pred_co <- predict(m_co)
> 
> Error: vector memory exhausted (limit reached?)
> Error during wrapup: vector memory exhausted (limit reached?)
> 
> 
>


From m@p|no|@10 @end|ng |rom gm@||@com  Mon Sep 16 17:03:01 2019
From: m@p|no|@10 @end|ng |rom gm@||@com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Mon, 16 Sep 2019 09:03:01 -0600
Subject: [R-sig-Geo] landmap package,
 predict method gave an error of memory exhausted
In-Reply-To: <f12f69ff-59f0-6af0-acfe-52c1c21faa27@gmail.com>
References: <CABkCotRwN_tAGHyLOt2SRD2cob2324Eg=DNt0UH7=una5yYyfQ@mail.gmail.com>
 <f12f69ff-59f0-6af0-acfe-52c1c21faa27@gmail.com>
Message-ID: <CABkCotTGrvtpvNO8qU7GrzdXYo8jXq7WO+dwxmwUfABoRzeHFg@mail.gmail.com>

Thank you Tom.  Is a regression type problem.

I will send you a copy of my data.

Manuel

El lun., 16 sept. 2019 a las 8:54, Tomislav Hengl (<tom.hengl at gmail.com>)
escribi?:

>
> Manuel,
>
> Please send me a private message and a copy of your data so I can test
> where does the RAM blows up. Is it a classification or regression type
> problem?
>
> T. Hengl
>
> On 9/16/19 4:01 PM, Manuel Sp?nola wrote:
> > Dear list members,
> >
> > I am fitting an Ensemble Machine Learning with the R package landmap,
> using
> > the function train.spLearner, the resulting object is large 2.5 GB, and
> > when I tried to predict I I got the message of memory exhausted.
> >
> > I have only 14 points and 23 covariables, in a very small area.
> >
> > Using R 3.6.1
> > MacOS, 16GB of ram
> >
> >
> > pred_co <- predict(m_co)
> >
> > Error: vector memory exhausted (limit reached?)
> > Error during wrapup: vector memory exhausted (limit reached?)
> >
> >
> >
>


-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From |v|@|e|ro @end|ng |rom gm@||@com  Mon Sep 16 17:06:13 2019
From: |v|@|e|ro @end|ng |rom gm@||@com (Frederico Faleiro)
Date: Mon, 16 Sep 2019 12:06:13 -0300
Subject: [R-sig-Geo] 
 Warning in fit.variogram: value out of range in 'bessel
 k' | automap and gstat packages
In-Reply-To: <fd5f791fee3c4152aed9f53621b7fb70@ec.europa.eu>
References: <CAL+ycWmGkWTLQBOmXO0O4BnHHf30=i4qz5Pwjcn52-GHtBvA1w@mail.gmail.com>
 <2010d7b274bd475598ca5f816aadd5f9@ec.europa.eu>
 <CAL+ycWkMXzz6Bg=prBxk7BwAm+RgU8uwRhX162RzqjEX4ysWvQ@mail.gmail.com>
 <fd5f791fee3c4152aed9f53621b7fb70@ec.europa.eu>
Message-ID: <CAL+ycWn_i9zpTN+rt4vpPQSDCmJZJyo6Fg24C0O4+jReSwsOLA@mail.gmail.com>

Hi Jon and others,

thank you. Apparently the gstat have the capacity to fit the parameters
only specifing the variogram model (
https://www.r-spatial.org/r/2016/02/14/gstat-variogram-fitting.html), but I
imagine there is a limitation to search for the correct parameters.
Then it is better when we provide some initial values for help in this
process as the autofitVariogram perform.

Best regards,

Frederico

On Mon, Sep 16, 2019 at 6:11 AM <Jon.SKOIEN at ec.europa.eu> wrote:

> Hi Frederico,
>
>
> gstat does not have different behaviour, because autofitVariogram is using
> fit.variogram, after some preprocessing. You get the convergency problems
> with fit.variogram because you don't supply start values for the variogram,
> which is done in the preprocessing of autofitVariogram.
>
>
> Cheers,
>
> Jon
>
>
> --
> Jon Olav Sk?ien
> European Commission
> Joint Research Centre ? JRC.E.1
> Disaster Risk Management Unit
> Building 26b 1/144 | Via E.Fermi 2749, I-21027 Ispra (VA) Italy, TP 267
> jon.skoien at ec.europa.eu <https://remi.webmail.ec.europa.eu/owa/redir.aspx?C=O12RUARdbvGA3WF3zGoSV0j5xMoZlQcIEwiS4Y9G8jzXRqCCC1HUCA..&URL=mailto%3ajon.skoien%40jrc.ec.europa.eu> Tel:  +39 0332 789205 Disclaimer: Views expressed in this email are those of the individual and do not necessarily represent official views of the European Commission.
>
>
> ------------------------------
> *From:* Frederico Faleiro <fvfaleiro at gmail.com>
> *Sent:* 13 September 2019 23:16:22
> *To:* SKOIEN Jon (JRC-ISPRA)
> *Cc:* RsigGeo
> *Subject:* Re: [R-sig-Geo] Warning in fit.variogram: value out of range
> in 'bessel k' | automap and gstat packages
>
> Hi Jon and others,
>
> thank you for your help. The problem is really in the Ste model (Matern,
> M. Stein's parameterization). The warning only happens
> when I execute this model. However in the gstat with the same parameters
> for lambda have problem of convergency. Do you think the gstat have
> different bevavior to the same issue?
>
> av <- autofitVariogram(jan~1, pr, model = "Ste", verbose = T)
> # In fit.variogram(experimental_variogram, model = vgm(psill = psill,
>  ... :  value out of range in 'bessel_k'
>
> # define the same kappa values of automap
> seq.k <- c(0.05, seq(0.2, 2, 0.1), 5, 10)
> ve <- variogram(jan~1, pr)
> v <- fit.variogram(v, vgm("Ste"), fit.kappa = seq.k)
> Warning messages:
> 1: In fit.variogram(object, model, fit.sills = fit.sills, fit.ranges =
> fit.ranges,  :
>   No convergence after 200 iterations: try different initial values?
> 2: In fit.variogram(object, model, fit.sills = fit.sills, fit.ranges =
> fit.ranges,  :
>   No convergence after 200 iterations: try different initial values?
> 3: In fit.variogram(o, m, fit.kappa = FALSE, fit.method = fit.method,  :
>   No convergence after 200 iterations: try different initial values?
>
>
> Best regards,
>
> Frederico
>
> On Wed, Sep 11, 2019 at 7:02 AM <Jon.SKOIEN at ec.europa.eu> wrote:
>
>>
>> Frederico,
>>
>>
>> I don't think you need to worry about this warning in this case.
>> autofitVariogram tests a lot of variogram models (and different
>> kappa-values) in the search for the best one, and then fit.variogram tries
>> to optimize the parameters based on these. It seems the warnings were
>> generated in the C-code of gstat, based on some of the tested kappa-values
>> for the Matern variogram (Stein implementation). It also seems that these
>> kappa values did not give good fits to the sample variogram, so you did not
>> get the warning from the best fit variogram in this case.
>>
>>
>> Hope this helps,
>>
>> Jon
>>
>>
>>
>> --
>> Jon Olav Sk?ien
>> European Commission
>> Joint Research Centre ? JRC.E.1
>> Disaster Risk Management Unit
>> Building 26b 1/144 | Via E.Fermi 2749, I-21027 Ispra (VA) Italy, TP 267
>> jon.skoien at ec.europa.eu <https://remi.webmail.ec.europa.eu/owa/redir.aspx?C=O12RUARdbvGA3WF3zGoSV0j5xMoZlQcIEwiS4Y9G8jzXRqCCC1HUCA..&URL=mailto%3ajon.skoien%40jrc.ec.europa.eu> Tel:  +39 0332 789205 Disclaimer: Views expressed in this email are those of the individual and do not necessarily represent official views of the European Commission.
>>
>>
>> ------------------------------
>> *From:* R-sig-Geo <r-sig-geo-bounces at r-project.org> on behalf of
>> Frederico Faleiro <fvfaleiro at gmail.com>
>> *Sent:* 09 September 2019 21:28:32
>> *To:* RsigGeo
>> *Subject:* [R-sig-Geo] Warning in fit.variogram: value out of range in
>> 'bessel k' | automap and gstat packages
>>
>> Dear list,
>>
>> I am trying make an interpolation with the function autoKrige from the
>> package automap, but I received more than 50 times the following warning
>> message:
>>
>> In fit.variogram(experimental variogram, model = vgm(psill = psill, ... :
>> value out of range in 'bessel k'
>>
>> I have tryed identify it in the code of fit.variogram and vgm from the
>> gstat package, but they do not have any warning about it in the code. Then
>> I imagine the warning is from another function.
>> I fitted the variogram automatically in the automap and after I fitted in
>> the gstat to check if there is the same warning for that parameters, but
>> in
>> the last I do not have any warning. When I check the variogram model, it
>> has a good fit apparently. I provided the reproductible example below.
>>
>> Do you know the consequences of this warning and how can I avoid it? I
>> would like to use the automap package because I need interpolate many
>> other
>> files like this.
>>
>> # example
>> library(automap)
>> library(sp)
>>
>> # download the data in:
>>
>> https://urldefense.proofpoint.com/v2/url?u=https-3A__drive.google.com_file_d_1L33-5FQgpNMdwvWff-5FuMrwhl-5FKCajrtlVe_view-3Fusp-3Dsharing&d=DwICAg&c=8NwulVB6ucrjuSGiwL_ckQ&r=DA6jV5X00Z1YpyMh4OS79xeSQGErBqY83CBz841DNnU&m=YlpT3yKlbNVLvXMp08O8X1LkniHGXTzJeLDHLTotwOI&s=U2z98vHb1mpKhKJ9UXA0RUrPi6r6IXibq1cuuyB0jWY&e=
>> # read the data
>> pr <- read.table('pr_monC.txt', header = TRUE, sep = "\t")
>> coordinates(pr) <- ~long+lat
>> # read the grid
>> gr <- read.table('grid.txt' , header = TRUE, sep = '\t')
>> gridded(gr) <-  ~long+lat
>>
>> # automatic fit variogram with automap
>> av <- autofitVariogram(jan~1, pr)
>> # warnings message:   In fit.variogram(experimental variogram, model =
>> vgm(psill = psill, ... : value out of range in 'bessel k'
>> plot(av) # get in the graph the parameters to fit the variogram
>>
>> # fit variogram in gstat with the model parameters from autofitVariogram
>> to
>> check if there is any warning message too
>> ve <- variogram(jan~1, pr)
>> v <- fit.variogram(ve, vgm(psill = 9723, model = "Ste", range = 20, nugget
>> = 194, kappa = 0.8))
>> # it does not produce any warning
>> plot(ve, v)
>>
>> Best regards,
>>
>> Frederico
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>>
>> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dgeo&d=DwICAg&c=8NwulVB6ucrjuSGiwL_ckQ&r=DA6jV5X00Z1YpyMh4OS79xeSQGErBqY83CBz841DNnU&m=YlpT3yKlbNVLvXMp08O8X1LkniHGXTzJeLDHLTotwOI&s=wzYnAjR9sQtl23JiTMc5f1m79m8uQgUt9DSCj3wuTeA&e=
>>
>

	[[alternative HTML version deleted]]


From rodr|go@p|e| @end|ng |rom gm@||@com  Wed Sep 25 22:52:15 2019
From: rodr|go@p|e| @end|ng |rom gm@||@com (Rodrigo Plei)
Date: Wed, 25 Sep 2019 17:52:15 -0300
Subject: [R-sig-Geo] specifying axis intervals in maptools?
Message-ID: <CACs_BFMv-9tEf4BHO84YcmaFDuauL8niccJ5mNwXZ7L1uHsMUQ@mail.gmail.com>

Dear colleagues,

How to I specify latitude and longitude intervals on x and y axis in a map
using the maptools package?

Suppose that I plotted a map and using the argument "axes = TRUE", I got
the y (latitude) axis plotted to show "-23.6 -23.4 -23.2 -23 -22.8 -22.6"
(i.e. 0.2 intervals), but I was actually wanting to see "-23.6 -23.2 -22.8
" (0.4 intervals). How can I customize the intervals?

Any help will be greatly appreciated.

Regards,

-- 
=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->



http://www.unifesp.br/campus/san7/
<http://www.unifesp.br/campus/san7/graduacao/cursos/bacharelado-interdisciplinar-em-ciencia-e-tecnologia-do-mar>
https://labpescaunifesp.wixsite.com/labpesca/inicio

Email: rodrigo.plei at gmail.com ; rsmartins at unifesp.br
CV Lattes: http://lattes.cnpq.br/5350064124902777
Google Scholar:
http://scholar.google.com.br/citations?user=zX_EezEAAAAJ&hl=pt-BR
Orcid: http://orcid.org/0000-0002-9884-1515
Research Gate: https://www.researchgate.net/profile/Rodrigo_Martins6/
<https://www.researchgate.net/profile/Rodrigo_Martins6/?ev=hdr_xprf>

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Sep 26 04:37:27 2019
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 26 Sep 2019 14:37:27 +1200
Subject: [R-sig-Geo] [FORGED]  specifying axis intervals in maptools?
In-Reply-To: <CACs_BFMv-9tEf4BHO84YcmaFDuauL8niccJ5mNwXZ7L1uHsMUQ@mail.gmail.com>
References: <CACs_BFMv-9tEf4BHO84YcmaFDuauL8niccJ5mNwXZ7L1uHsMUQ@mail.gmail.com>
Message-ID: <c682ddd2-07be-c357-8c20-1fa16499ad7b@auckland.ac.nz>


On 26/09/19 8:52 AM, Rodrigo Plei wrote:

> Dear colleagues,
> 
> How to I specify latitude and longitude intervals on x and y axis in a map
> using the maptools package?
> 
> Suppose that I plotted a map and using the argument "axes = TRUE", I got
> the y (latitude) axis plotted to show "-23.6 -23.4 -23.2 -23 -22.8 -22.6"
> (i.e. 0.2 intervals), but I was actually wanting to see "-23.6 -23.2 -22.8
> " (0.4 intervals). How can I customize the intervals?
> 
> Any help will be greatly appreciated.

Given that I am not misunderstanding you (always a distinct possibility 
for me!) I believe that all you need to do is set axes=FALSE in your 
initial call, then add the axes using something like:

axis(side=1)
axis(side=2,at=c(-23.6, -23.2, -22.8, <whatever?))

Can't say for sure without a reproducible example.

HTH

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From rodr|go@p|e| @end|ng |rom gm@||@com  Thu Sep 26 19:51:20 2019
From: rodr|go@p|e| @end|ng |rom gm@||@com (Rodrigo Plei)
Date: Thu, 26 Sep 2019 14:51:20 -0300
Subject: [R-sig-Geo] [FORGED]  specifying axis intervals in maptools?
In-Reply-To: <c682ddd2-07be-c357-8c20-1fa16499ad7b@auckland.ac.nz>
References: <CACs_BFMv-9tEf4BHO84YcmaFDuauL8niccJ5mNwXZ7L1uHsMUQ@mail.gmail.com>
 <c682ddd2-07be-c357-8c20-1fa16499ad7b@auckland.ac.nz>
Message-ID: <CACs_BFMK=UzfW3xa0FFYc1jYyU+Osd2YLXPO4O41AazKeL_TUg@mail.gmail.com>

Dear Rolf,

Thank you very much for your reply.

I did not send a reproducible example because it was just a local shape
file.

And, yes, your instructions worked like a charm! :)

Once again, thank you!

Best regards,

Rodrigo
-- 
=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->



http://www.unifesp.br/campus/san7/
<http://www.unifesp.br/campus/san7/graduacao/cursos/bacharelado-interdisciplinar-em-ciencia-e-tecnologia-do-mar>
https://labpescaunifesp.wixsite.com/labpesca/inicio

Email: rodrigo.plei at gmail.com ; rsmartins at unifesp.br
CV Lattes: http://lattes.cnpq.br/5350064124902777
Google Scholar:
http://scholar.google.com.br/citations?user=zX_EezEAAAAJ&hl=pt-BR
Orcid: http://orcid.org/0000-0002-9884-1515
Research Gate: https://www.researchgate.net/profile/Rodrigo_Martins6/
<https://www.researchgate.net/profile/Rodrigo_Martins6/?ev=hdr_xprf>

	[[alternative HTML version deleted]]


From m@rc_grt @end|ng |rom y@hoo@|r  Fri Sep 27 03:15:40 2019
From: m@rc_grt @end|ng |rom y@hoo@|r (Marc Girondot)
Date: Fri, 27 Sep 2019 03:15:40 +0200
Subject: [R-sig-Geo] failed to install raster packages
Message-ID: <8fb8c7f6-d544-6e3c-633c-1ce9eb5f0a4f@yahoo.fr>

Dear,

When I load raster 3.0-7 package installed or from source or from binary 
in r 3.6.1 (macosX 10.14.6), I get a segmentation fault crash:

(see below)

As someone the same problem and a solution ? Thanks

 > library("raster")
Le chargement a n??cessit?? le package : sp

 ??*** caught segfault ***
address 0x31, cause 'memory not mapped'

Traceback:
 ??1: Module(module, mustStart = TRUE, where = env)
 ??2: doTryCatch(return(expr), name, parentenv, handler)
 ??3: tryCatchOne(expr, names, parentenv, handlers[[1L]])
 ??4: tryCatchList(expr, classes, parentenv, handlers)
 ??5: tryCatch(Module(module, mustStart = TRUE, where = env), error = 
function(e) e)
 ??6: loadModule(module = "spmod", what = TRUE, env = ns, loadNow = TRUE)
 ??7: (function (ns) loadModule(module = "spmod", what = TRUE, env = ns, 
loadNow = TRUE))(<environment>)
 ??8: doTryCatch(return(expr), name, parentenv, handler)
 ??9: tryCatchOne(expr, names, parentenv, handlers[[1L]])
10: tryCatchList(expr, classes, parentenv, handlers)
11: tryCatch((function (ns) loadModule(module = "spmod", what = TRUE, 
env = ns, loadNow = TRUE))(<environment>),???????? error = function(e) e)
12: eval(substitute(tryCatch(FUN(WHERE), error = function(e) e),???????? 
list(FUN = f, WHERE = where)), where)
13: eval(substitute(tryCatch(FUN(WHERE), error = function(e) e),???????? 
list(FUN = f, WHERE = where)), where)
14: .doLoadActions(where, attach)
15: methods::cacheMetaData(ns, TRUE, ns)
16: loadNamespace(package, lib.loc)
17: doTryCatch(return(expr), name, parentenv, handler)
18: tryCatchOne(expr, names, parentenv, handlers[[1L]])
19: tryCatchList(expr, classes, parentenv, handlers)
20: tryCatch({?????? attr(package, "LibPath") <- which.lib.loc ns <- 
loadNamespace(package, lib.loc)?????? env <- attachNamespace(ns, pos = pos, 
deps, exclude, include.only)}, error = function(e) {?????? P <- if 
(!is.null(cc <- conditionCall(e)))???????????????? paste(" in", 
deparse(cc)[1L])?????? else ""?????? msg <- gettextf("package or namespace 
load failed for %s%s:\n %s",???????????????? sQuote(package), P, 
conditionMessage(e)) if (logical.return)???????????????? message(paste("Error:", 
msg), domain = NA)?????? else stop(msg, call. = FALSE, domain = NA)})
21: library("raster")

Possible actions:
1: abort (with core dump, if enabled)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace


From Roger@B|v@nd @end|ng |rom nhh@no  Sat Sep 28 17:24:28 2019
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Sat, 28 Sep 2019 17:24:28 +0200
Subject: [R-sig-Geo] failed to install raster packages
In-Reply-To: <8fb8c7f6-d544-6e3c-633c-1ce9eb5f0a4f@yahoo.fr>
References: <8fb8c7f6-d544-6e3c-633c-1ce9eb5f0a4f@yahoo.fr>
Message-ID: <alpine.LFD.2.21.1909281715250.9589@reclus.nhh.no>

On Fri, 27 Sep 2019, Marc Girondot via R-sig-Geo wrote:

> Dear,
>
> When I load raster 3.0-7 package installed or from source or from binary in r 
> 3.6.1 (macosX 10.14.6), I get a segmentation fault crash:

Had this been a general problem, it would show up in:

https://cran.r-project.org/web/checks/check_results_raster.html

Did you install binary from CRAN with the same result? Your OSX version is 
newer than that used on the CRAN testing framework - are other packages 
also failing? Have you checked that other packages are up to date? 
Probably the maintainer does not use OSX (nor do I), so it is hard to say 
what is specific about your system that is causing the problem. If you are 
trying to install from source, your Rcpp package may need refreshing, but 
it is very hard to tell. Do report back when resolved.

Roger

>
> (see below)
>
> As someone the same problem and a solution ? Thanks
>
>>  library("raster")
> Le chargement a n??cessit?? le package : sp
>
> ??*** caught segfault ***
> address 0x31, cause 'memory not mapped'
>
> Traceback:
> ??1: Module(module, mustStart = TRUE, where = env)
> ??2: doTryCatch(return(expr), name, parentenv, handler)
> ??3: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> ??4: tryCatchList(expr, classes, parentenv, handlers)
> ??5: tryCatch(Module(module, mustStart = TRUE, where = env), error = 
> function(e) e)
> ??6: loadModule(module = "spmod", what = TRUE, env = ns, loadNow = TRUE)
> ??7: (function (ns) loadModule(module = "spmod", what = TRUE, env = ns, 
> loadNow = TRUE))(<environment>)
> ??8: doTryCatch(return(expr), name, parentenv, handler)
> ??9: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> 10: tryCatchList(expr, classes, parentenv, handlers)
> 11: tryCatch((function (ns) loadModule(module = "spmod", what = TRUE, env = 
> ns, loadNow = TRUE))(<environment>),???????? error = function(e) e)
> 12: eval(substitute(tryCatch(FUN(WHERE), error = function(e) e),???????? 
> list(FUN = f, WHERE = where)), where)
> 13: eval(substitute(tryCatch(FUN(WHERE), error = function(e) e),???????? 
> list(FUN = f, WHERE = where)), where)
> 14: .doLoadActions(where, attach)
> 15: methods::cacheMetaData(ns, TRUE, ns)
> 16: loadNamespace(package, lib.loc)
> 17: doTryCatch(return(expr), name, parentenv, handler)
> 18: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> 19: tryCatchList(expr, classes, parentenv, handlers)
> 20: tryCatch({?????? attr(package, "LibPath") <- which.lib.loc ns <- 
> loadNamespace(package, lib.loc)?????? env <- attachNamespace(ns, pos = pos, 
> deps, exclude, include.only)}, error = function(e) {?????? P <- if 
> (!is.null(cc <- conditionCall(e)))???????????????? paste(" in", 
> deparse(cc)[1L])?????? else ""?????? msg <- gettextf("package or namespace 
> load failed for %s%s:\n %s",???????????????? sQuote(package), P, 
> conditionMessage(e)) if (logical.return)???????????????? 
> message(paste("Error:", msg), domain = NA)?????? else stop(msg, call. = 
> FALSE, domain = NA)})
> 21: library("raster")
>
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From rhy@@dub|n @end|ng |rom @@nt@ox@@c@uk  Mon Sep 30 15:15:58 2019
From: rhy@@dub|n @end|ng |rom @@nt@ox@@c@uk (Rhys Dubin)
Date: Mon, 30 Sep 2019 13:15:58 +0000
Subject: [R-sig-Geo] Producing a conditional adjacency matrix
Message-ID: <E4989DEB-985D-48D1-8AAE-BE0C61B1E44D@sant.ox.ac.uk>

Hi all, 

I have a question regarding matrices (produced using poy2nb in spdep). 

I?m trying to produce an adjacency matrix from a GIS Polygon shapefile with about 500 individual polygons (queen or rook ? it doesn?t really matter for now), but conditional on the value of the parent polygon. 

For instance, if a polygon had an arbitrary value of 1, I want to return a list of all neighboring polygons that have a value of 2 or 3 (ie. ? 1). The same would go for a polygon with a value of 2 (ie. return all neighbors with a value of ? 2). 

Is there a solution to this issue built into spdep, do I need to use a different package, or is it possible to accomplish this with a subsetting command?

Thanks!

Rhys



From m@p|no|@10 @end|ng |rom gm@||@com  Mon Sep 30 20:58:15 2019
From: m@p|no|@10 @end|ng |rom gm@||@com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Mon, 30 Sep 2019 12:58:15 -0600
Subject: [R-sig-Geo] Problem with function predict in package GSIF
Message-ID: <CABkCotTCwMQGnc4CU3Rx6+=-a7G=ZVdWsresDu0cuy-M2T+T1w@mail.gmail.com>

Dear list members,

I am using the predict function of the GSIF package but after running for a
while I do not get an output and when I stop the process I got the
following message (see below).

I fit the fit.gstatModel

co_rk_rf <- fit.gstatModel(datos_co_sp["co"], co_formulaString_correlacion,
covar_finales_sp, method = "quantregForest")

Fitting a Quantile Regression Forest model...
Shapiro-Wilk normality test and Anderson-Darling normality test report
probability of < .05 indicating lack of normal distribution for
residualsFitting a 2D variogram...
No convergence after 200 iterations: try different initial values?singular
model in variogram fitSaving an object of class 'gstatModel'...
but when I try the prediction it gave me an error message


co_rk_rf_pred <- predict(co_rk_rf, covar_finales_sp)

no loop for break/next, jumping to top level

I tried with same data set before and it works, but not now.  I also tried
with similar data sets and it works.

Any idea what could be causing the problem?


Manuel

-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


