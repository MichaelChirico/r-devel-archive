From jr@| @end|ng |rom po@teo@no  Thu Apr  1 00:51:07 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Thu, 1 Apr 2021 00:51:07 +0200
Subject: [R-pkg-devel] Debugging RODBC installation problems on FreeBSD
 (unixodbc library path)
In-Reply-To: <24675.10843.893251.372051@rob.eddelbuettel.com>
References: <YGJGHehazrzCror7@posteo.no>
 <24674.20381.94259.3434@rob.eddelbuettel.com>
 <YGJd1Eg8G8VovS5h@posteo.no>
 <24675.10843.893251.372051@rob.eddelbuettel.com>
Message-ID: <YGT824c0H2e7N+Gt@posteo.no>

Hello there again,

I found (in --help) the `R CMD INSTALL` 
flag `--configure-args`, and were 
successfully able to install it:

	R CMD INSTALL RODBC --configure-args=--with-odbc-manager=odbc

Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20210401/6766a0ba/attachment.sig>

From thu|@en @end|ng |rom gm@||@com  Thu Apr  1 07:55:51 2021
From: thu|@en @end|ng |rom gm@||@com (Tim Hulsen)
Date: Thu, 1 Apr 2021 07:55:51 +0200
Subject: [R-pkg-devel] 
 checking LazyData ... NOTE 'LazyData' is specified
 without a 'data' directory
In-Reply-To: <e0316015-f0e5-2600-4c84-ffdc5156b687@gmail.com>
References: <87bd6ba2-86b4-94f5-d7e9-fa18dc16bcbb@gmail.com>
 <13249B2D-8CA2-443F-A274-319A813403BF@gmail.com>
 <e0316015-f0e5-2600-4c84-ffdc5156b687@gmail.com>
Message-ID: <CAHMN1Py2_TG4zGtEH0J8MbiBm7voWZLf4q9SRt5zjzgjj82Y8g@mail.gmail.com>

r-release-windows-ix86+x86_64

Op wo 31 mrt. 2021 om 14:31 schreef Duncan Murdoch <murdoch.duncan at gmail.com
>:

> On 31/03/2021 8:28 a.m., Tim Hulsen wrote:
> > I don?t believe I do anything with lazydata.
>
> Your DESCRIPTION file specifies it is TRUE.
>
> Duncan Murdoch
>
> >
> > https://cran.r-project.org/web/checks/check_results_BioVenn.html
> > <https://cran.r-project.org/web/checks/check_results_BioVenn.html>
> >
> >
> >
> >> Op 31 mrt. 2021 om 14:24 heeft Duncan Murdoch
> >> <murdoch.duncan at gmail.com> het volgende geschreven:
> >>
> >> ?On 31/03/2021 5:55 a.m., Tim Hulsen wrote:
> >>> When submitting my package to CRAN, I get the message:
> >>> checking LazyData ... NOTE
> >>> 'LazyData' is specified without a 'data' directory
> >>> What can i do about this?
> >>
> >> Don't specify LazyData.  If that doesn't help, give us a bit more
> >> information, e.g. a link to your source.
> >>
> >> Duncan Murdoch
>
>

	[[alternative HTML version deleted]]


From peter@ruckde@che| @end|ng |rom web@de  Thu Apr  1 12:11:17 2021
From: peter@ruckde@che| @end|ng |rom web@de (Peter Ruckdeschel)
Date: Thu, 1 Apr 2021 12:11:17 +0200
Subject: [R-pkg-devel] Lazy data compression for packages without data folder
Message-ID: <e7ddc148-15b1-b798-1ba7-31a21eb4a2a0@web.de>

Hi,  

I just noticed that, last week-end, R CMD build was changed to remove ?LazyData? and
?LazyDataCompression? fields from the ?DESCRIPTION? file of packages without a ?data?
directory.

Now, in our package "RobAStRDA" published on CRAN in version 1.2.0 2019-03-11, we 
deliberately do have a ?LazyData? field in the ?DESCRIPTION? file of the package
without a ?data? folder.

This package just contains a sysdata.rda file with a large amount of interpolation grids
and functions not to be analyzed as statistical data but rather to be used for speed-ups
in our package "RobExtremes" (also on CRAN).

What is the recommended way to achieve this, i.e., use the sysdata.rda file in compressed
form and in lazy data format without placing it into a ?data? folder?

Any suggestions welcome,
best regards, Peter (Ruckdeschel)


From b@g@r|@@@|ddh@rth@ @end|ng |rom gm@||@com  Thu Apr  1 17:07:54 2021
From: b@g@r|@@@|ddh@rth@ @end|ng |rom gm@||@com (Siddhartha Bagaria)
Date: Thu, 1 Apr 2021 11:07:54 -0400
Subject: [R-pkg-devel] Best practices for PKG_LIBS and PKG_CPPFLAGS
Message-ID: <CAK68aVVU_V2uduNfEcjzL_KECgT5c2U_VgZ9WeZae1iwKEo=DA@mail.gmail.com>

Hello,

I have an atypical use case in which I have a build system
<https://github.com/grailbio/rules_r/> that can build C shared libraries
that will be used by the native code in an R package, and build both C
libraries and R packages in one user command. As these shared libraries are
specified by the build system itself, I do not want to assume their names
and locations in the R package src/Makevars. Going through the configure
script mechanism is not straightforward for arbitrary R packages that can
be used in the build system, because all user input is pre-specified before
the build steps are run, and so the shared library names and locations may
not be available when the user is specifying the build, or the configure
script may not be flexible enough to take such input from the user.

My question is if there is any guidance on what is the best way to set
PKG_LIBS and PKG_CPPFLAGS variables from the command line rather than
expecting them in the package src/Makevars? As part of my build system,
even if I create or edit the package src/Makevars, it could be replaced or
changed in arbitrary ways by the configure script.

So far, I have been exporting PKG_LIBS and PKG_CPPFLAGS as environment
variables before running R CMD INSTALL (my build script
<https://github.com/grailbio/rules_r/blob/d4b3a80bba49c5b540e72ca3a9fcc9ef1e5af93c/R/scripts/build.sh#L191>),
and then assuming that if the user has these variables in the package
src/Makevars, then they are appending to an existing list (e.g. by using
`+=`), rather than replacing it (by using `=`). But I am not sure if this
is the best way.

It could be that I am thinking about this all wrong, so would appreciate
some guidance.

There has been some discussion on how to do this best on Github
<https://github.com/RcppCore/RcppArmadillo/pull/331>, but we thought it
would be best if we started a discussion here.

Thank you.

Siddhartha

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Apr  1 18:04:27 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 01 Apr 2021 09:04:27 -0700
Subject: [R-pkg-devel] Lazy data compression for packages without data
 folder
In-Reply-To: <e7ddc148-15b1-b798-1ba7-31a21eb4a2a0@web.de>
References: <e7ddc148-15b1-b798-1ba7-31a21eb4a2a0@web.de>
Message-ID: <6102F11A-D802-480C-8A86-A1FFD1E60CF3@dcn.davis.ca.us>

I don't think those settings apply to that file. Search for "sysdata.rda" in [1].

[1] https://cran.r-project.org/doc/manuals/r-release/R-exts.html

On April 1, 2021 3:11:17 AM PDT, Peter Ruckdeschel <peter.ruckdeschel at web.de> wrote:
>Hi,  
>
>I just noticed that, last week-end, R CMD build was changed to remove
>?LazyData? and
>?LazyDataCompression? fields from the ?DESCRIPTION? file of packages
>without a ?data?
>directory.
>
>Now, in our package "RobAStRDA" published on CRAN in version 1.2.0
>2019-03-11, we 
>deliberately do have a ?LazyData? field in the ?DESCRIPTION? file of
>the package
>without a ?data? folder.
>
>This package just contains a sysdata.rda file with a large amount of
>interpolation grids
>and functions not to be analyzed as statistical data but rather to be
>used for speed-ups
>in our package "RobExtremes" (also on CRAN).
>
>What is the recommended way to achieve this, i.e., use the sysdata.rda
>file in compressed
>form and in lazy data format without placing it into a ?data? folder?
>
>Any suggestions welcome,
>best regards, Peter (Ruckdeschel)
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From peter@ruckde@che| @end|ng |rom web@de  Thu Apr  1 18:40:33 2021
From: peter@ruckde@che| @end|ng |rom web@de (Peter Ruckdeschel)
Date: Thu, 1 Apr 2021 18:40:33 +0200
Subject: [R-pkg-devel] Lazy data compression for packages without data
 folder
In-Reply-To: <6102F11A-D802-480C-8A86-A1FFD1E60CF3@dcn.davis.ca.us>
References: <e7ddc148-15b1-b798-1ba7-31a21eb4a2a0@web.de>
 <6102F11A-D802-480C-8A86-A1FFD1E60CF3@dcn.davis.ca.us>
Message-ID: <89f88d61-1013-d562-feb7-f4bcf3383ebd@web.de>

Thanks, Jeff, that was helpful ... Best, Peter

Am 01.04.2021 um 18:04 schrieb Jeff Newmiller:
> I don't think those settings apply to that file. Search for "sysdata.rda" in [1].
>
> [1] https://cran.r-project.org/doc/manuals/r-release/R-exts.html
>
> On April 1, 2021 3:11:17 AM PDT, Peter Ruckdeschel <peter.ruckdeschel at web.de> wrote:
>> Hi,  
>>
>> I just noticed that, last week-end, R CMD build was changed to remove
>> ?LazyData? and
>> ?LazyDataCompression? fields from the ?DESCRIPTION? file of packages
>> without a ?data?
>> directory.
>>
>> Now, in our package "RobAStRDA" published on CRAN in version 1.2.0
>> 2019-03-11, we 
>> deliberately do have a ?LazyData? field in the ?DESCRIPTION? file of
>> the package
>> without a ?data? folder.
>>
>> This package just contains a sysdata.rda file with a large amount of
>> interpolation grids
>> and functions not to be analyzed as statistical data but rather to be
>> used for speed-ups
>> in our package "RobExtremes" (also on CRAN).
>>
>> What is the recommended way to achieve this, i.e., use the sysdata.rda
>> file in compressed
>> form and in lazy data format without placing it into a ?data? folder?
>>
>> Any suggestions welcome,
>> best regards, Peter (Ruckdeschel)
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From w@nz63 @end|ng |rom ||ve@unc@edu  Thu Apr  1 20:39:13 2021
From: w@nz63 @end|ng |rom ||ve@unc@edu (Zhang, Wan)
Date: Thu, 1 Apr 2021 18:39:13 +0000
Subject: [R-pkg-devel] Error on Solaris 10 'memory not mapped'
Message-ID: <MN2PR03MB5167D7560C8FE9488ABD86CBE77B9@MN2PR03MB5167.namprd03.prod.outlook.com>

Hello,

In our package ?BET? version 0.3.4 published on 2021-03-21, there is a ?memory not mapped? error on Solaris 10.

https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/BET-00check.html

I tried to replicate this error with R-hub but it works well. What can I do to simulate CRAN?s environment in S 10 and fix this problem?

Any help from you will be highly appreciated!

Best,
Wan

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Apr  1 21:35:28 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 1 Apr 2021 14:35:28 -0500
Subject: [R-pkg-devel] Error on Solaris 10 'memory not mapped'
In-Reply-To: <MN2PR03MB5167D7560C8FE9488ABD86CBE77B9@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB5167D7560C8FE9488ABD86CBE77B9@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <24678.8320.269315.352314@rob.eddelbuettel.com>


On 1 April 2021 at 18:39, Zhang, Wan wrote:
| Hello,
| 
| In our package ?BET? version 0.3.4 published on 2021-03-21, there is a ?memory not mapped? error on Solaris 10.
| 
| https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/BET-00check.html
| 
| I tried to replicate this error with R-hub but it works well. What can I do to simulate CRAN?s environment in S 10 and fix this problem?

It is difficult to say more than Dave and I said in comments to your post on
this at StackOverflow:
https://stackoverflow.com/questions/66894044/memory-not-mapped-error-in-r-on-solaris-10

None of us have access to the exact same configuration as that test machine.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From w||||@mwdun|@p @end|ng |rom gm@||@com  Thu Apr  1 22:22:43 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 1 Apr 2021 13:22:43 -0700
Subject: [R-pkg-devel] Error on Solaris 10 'memory not mapped'
In-Reply-To: <MN2PR03MB5167D7560C8FE9488ABD86CBE77B9@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB5167D7560C8FE9488ABD86CBE77B9@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <CAHqSRuT9DfgnsZQAHRG4Y0xZwoydPws1ny=idEuDQ-=A3vnw1Q@mail.gmail.com>

Have you run the offending examples under valgrind on Linux with
gctorture(TRUE)?

-Bill

On Thu, Apr 1, 2021 at 11:51 AM Zhang, Wan <wanz63 at live.unc.edu> wrote:
>
> Hello,
>
> In our package ?BET? version 0.3.4 published on 2021-03-21, there is a ?memory not mapped? error on Solaris 10.
>
> https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/BET-00check.html
>
> I tried to replicate this error with R-hub but it works well. What can I do to simulate CRAN?s environment in S 10 and fix this problem?
>
> Any help from you will be highly appreciated!
>
> Best,
> Wan
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From D@n@Ke||ey @end|ng |rom D@|@C@  Fri Apr  2 13:05:52 2021
From: D@n@Ke||ey @end|ng |rom D@|@C@ (Daniel Kelley)
Date: Fri, 2 Apr 2021 11:05:52 +0000
Subject: [R-pkg-devel] how to address CRAN FAIL on
 r-devel-windows-x86_64-gcc10-UCRT?
Message-ID: <916FE36D-C70F-4E00-AC87-9335B4AA5A0C@dal.ca>

The "oce" package for oceanographic analysis is failing a check on the r-devel-windows-x86_64-gcc10-UCRT system (see
https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64-gcc10-UCRT/oce-00check.html). The problem seems to relate to the checking vignette outputs.

According to https://www.r-project.org/nosvn/winutf8/ucrt3/CRAN/checks/gcc10-UCRT/README.txt, that test setup is experimental.  Does that mean that I ought to I ignore the FAIL status for this machine, perhaps checking it once in a while to see if it changes?

Alternatively, if I am advised to fix the problem, I wonder whether there a way for me to run tests with rhub, winbuilder, or something similar?  (I do not have access to a windows machine.)

Thanks in advance for any help that can be provided.

Dan Kelley, Dept. Oceanography, Dalhousie University, Canada

From d@v|d@corte@@r|ver@ @end|ng |rom gm@||@com  Fri Apr  2 03:06:46 2021
From: d@v|d@corte@@r|ver@ @end|ng |rom gm@||@com (David Cortes)
Date: Thu, 01 Apr 2021 22:06:46 -0300
Subject: [R-pkg-devel] Using RC_fopen in a CRAN package
Message-ID: <b05557c3fa02b9da23b8e0809923f00c5ea64f88.camel@gmail.com>

I?d like to ask for clarification about CRAN policies regarding usage
of functions that start with "RC_*", such as "RC_fopen".

I'm trying to upload a package which is meant for reading and writing
data from text files in a certain format, for which I want to use a C
file pointer which I obtain through "RC_fopen". The R extensions manual
says the following:
"... there are other header files there that can be included too, but
many of the features they contain should be regarded as undocumented
and unstable."

Since "RC_fopen" is present in a header file, I would guess it should
be classified as "public" within the entry points classification
(between API/public/private/hidden). This is the description for such
entry points in the manual:
"Entry points declared in an installed header file that are exported on
all R platforms but are not documented and subject to change without
notice."

As I understand it, there is nothing that would forbid using public
entry points compared to the explicit point made about "private" entry
points. However, when I try to submit the package to CRAN, it doesn't
make it past the automated checks due to a NOTE:
Check: compiled code, Result: NOTE
  File 'readsparse/libs/readsparse.so':
    Found non-API call to R: 'RC_fopen'
  
  Compiled code should not call non-API entry points in R.
  
  See 'Writing portable packages' in the 'Writing R Extensions' manual.


Is it allowed to use such functions in packages? I see a few packages
currently in CRAN have the same note in the checks, such as "iotools",
and am wondering if I should just email the CRAN maintainer explaining
that I intend to use the function anyway, since it's just a note rather
than a warning or error.


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Apr  2 15:45:44 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 2 Apr 2021 09:45:44 -0400
Subject: [R-pkg-devel] Using RC_fopen in a CRAN package
In-Reply-To: <b05557c3fa02b9da23b8e0809923f00c5ea64f88.camel@gmail.com>
References: <b05557c3fa02b9da23b8e0809923f00c5ea64f88.camel@gmail.com>
Message-ID: <5b929bd4-3cd5-94ab-94fe-09d7931baed1@gmail.com>

On 01/04/2021 9:06 p.m., David Cortes wrote:
> I?d like to ask for clarification about CRAN policies regarding usage
> of functions that start with "RC_*", such as "RC_fopen".
> 
> I'm trying to upload a package which is meant for reading and writing
> data from text files in a certain format, for which I want to use a C
> file pointer which I obtain through "RC_fopen". The R extensions manual
> says the following:
> "... there are other header files there that can be included too, but
> many of the features they contain should be regarded as undocumented
> and unstable."
> 
> Since "RC_fopen" is present in a header file, I would guess it should
> be classified as "public" within the entry points classification
> (between API/public/private/hidden). This is the description for such
> entry points in the manual:
> "Entry points declared in an installed header file that are exported on
> all R platforms but are not documented and subject to change without
> notice."
> 
> As I understand it, there is nothing that would forbid using public
> entry points compared to the explicit point made about "private" entry
> points. However, when I try to submit the package to CRAN, it doesn't
> make it past the automated checks due to a NOTE:
> Check: compiled code, Result: NOTE
>    File 'readsparse/libs/readsparse.so':
>      Found non-API call to R: 'RC_fopen'
>    
>    Compiled code should not call non-API entry points in R.
>    
>    See 'Writing portable packages' in the 'Writing R Extensions' manual.
> 
> 
> Is it allowed to use such functions in packages? I see a few packages
> currently in CRAN have the same note in the checks, such as "iotools",
> and am wondering if I should just email the CRAN maintainer explaining
> that I intend to use the function anyway, since it's just a note rather
> than a warning or error.

The CRAN policy document is quite clear on this: "CRAN packages should 
use only the public API. Hence they should not use entry points not 
declared as API in installed headers nor .Internal() nor .Call() etc 
calls to base packages. Also, ::: should not be used to access 
undocumented/internal objects in base packages (nor should other means 
of access be employed). Such usages can cause packages to break at any 
time, even in patched versions of R. "

So you are free to use that function, but CRAN won't publish your 
package if you do.

Duncan Murdoch

Duncan Murdoch


From edd @end|ng |rom deb|@n@org  Fri Apr  2 16:27:03 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 2 Apr 2021 09:27:03 -0500
Subject: [R-pkg-devel] Using RC_fopen in a CRAN package
In-Reply-To: <5b929bd4-3cd5-94ab-94fe-09d7931baed1@gmail.com>
References: <b05557c3fa02b9da23b8e0809923f00c5ea64f88.camel@gmail.com>
 <5b929bd4-3cd5-94ab-94fe-09d7931baed1@gmail.com>
Message-ID: <24679.10679.21637.285419@rob.eddelbuettel.com>


On 2 April 2021 at 09:45, Duncan Murdoch wrote:
| On 01/04/2021 9:06 p.m., David Cortes wrote:
| > Is it allowed to use such functions in packages? I see a few packages
| > currently in CRAN have the same note in the checks, such as "iotools",
| > and am wondering if I should just email the CRAN maintainer explaining
| > that I intend to use the function anyway, since it's just a note rather
| > than a warning or error.
| 
| The CRAN policy document is quite clear on this: "CRAN packages should 
| use only the public API. Hence they should not use entry points not 
| declared as API in installed headers nor .Internal() nor .Call() etc 
| calls to base packages. Also, ::: should not be used to access 
| undocumented/internal objects in base packages (nor should other means 
| of access be employed). Such usages can cause packages to break at any 
| time, even in patched versions of R. "
| 
| So you are free to use that function, but CRAN won't publish your 
| package if you do.

What you can do is to republish the functions in a package you own and
maintain, and then export them from there. I have done that in RApiDatetime
for some date/time parsing code, and in RApiSerialize for serialization.

It is not ideal as your copies may become stale over time. But it gives you a
way forward as long as R Core exercises their right to have non-public APIs.
As R Core has demonstrated exemplary fidelity to the parts of the API that
are public, we should not be too grumpy that they reserve this option.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From dw|n@em|u@ @end|ng |rom comc@@t@net  Fri Apr  2 22:08:19 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Fri, 2 Apr 2021 13:08:19 -0700
Subject: [R-pkg-devel] how to address CRAN FAIL on
 r-devel-windows-x86_64-gcc10-UCRT?
In-Reply-To: <916FE36D-C70F-4E00-AC87-9335B4AA5A0C@dal.ca>
References: <916FE36D-C70F-4E00-AC87-9335B4AA5A0C@dal.ca>
Message-ID: <bc01010e-b9cc-b561-fc2b-b2dd5c98a706@comcast.net>


On 4/2/21 4:05 AM, Daniel Kelley wrote:
> The "oce" package for oceanographic analysis is failing a check on the r-devel-windows-x86_64-gcc10-UCRT system (see
> https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64-gcc10-UCRT/oce-00check.html). The problem seems to relate to the checking vignette outputs.
>
> According to https://www.r-project.org/nosvn/winutf8/ucrt3/CRAN/checks/gcc10-UCRT/README.txt, that test setup is experimental.  Does that mean that I ought to I ignore the FAIL status for this machine, perhaps checking it once in a while to see if it changes?
Hello Daniel;

I'm not speaking for CRAN. I'm another maintainer whose current status 
page has a FAIL for that platform. But the FAIL notation is due at least 
in part to the fact that apparently the UCRT platform is less frequently 
run on the full CRAN package holdings. The note refers to a package that 
was updated a few days ago. The log file however has two other reports 
of failure relating to compiler warnings.

All the other platforms passed the newer versions. There is no mention 
of the UCRT platform at the CRAN Policies page: 
https://cran.r-project.org/web/packages/policies.html

I'm waiting to see whether the aging fortran code generates warnings 
whenever the UCRT platform gets fired up again.

-- 

David Winsemius

maintainer (but neither author or contributor) of "muhaz"

>
> Alternatively, if I am advised to fix the problem, I wonder whether there a way for me to run tests with rhub, winbuilder, or something similar?  (I do not have access to a windows machine.)
>
> Thanks in advance for any help that can be provided.
>
> Dan Kelley, Dept. Oceanography, Dalhousie University, Canada
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Apr  2 23:13:11 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 2 Apr 2021 23:13:11 +0200
Subject: [R-pkg-devel] 
 checking LazyData ... NOTE 'LazyData' is specified
 without a 'data' directory
In-Reply-To: <CAHMN1Py2_TG4zGtEH0J8MbiBm7voWZLf4q9SRt5zjzgjj82Y8g@mail.gmail.com>
References: <87bd6ba2-86b4-94f5-d7e9-fa18dc16bcbb@gmail.com>
 <13249B2D-8CA2-443F-A274-319A813403BF@gmail.com>
 <e0316015-f0e5-2600-4c84-ffdc5156b687@gmail.com>
 <CAHMN1Py2_TG4zGtEH0J8MbiBm7voWZLf4q9SRt5zjzgjj82Y8g@mail.gmail.com>
Message-ID: <d10d6764-a3db-b966-506a-e3a0e089198d@statistik.tu-dortmund.de>



On 01.04.2021 07:55, Tim Hulsen wrote:
> r-release-windows-ix86+x86_64

A new check, you declare LazyData in your DESCRIPTION file which is 
meaningless. So please simply omit that line.

Best,
Uwe Ligges

> Op wo 31 mrt. 2021 om 14:31 schreef Duncan Murdoch <murdoch.duncan at gmail.com
>> :
> 
>> On 31/03/2021 8:28 a.m., Tim Hulsen wrote:
>>> I don?t believe I do anything with lazydata.
>>
>> Your DESCRIPTION file specifies it is TRUE.
>>
>> Duncan Murdoch
>>
>>>
>>> https://cran.r-project.org/web/checks/check_results_BioVenn.html
>>> <https://cran.r-project.org/web/checks/check_results_BioVenn.html>
>>>
>>>
>>>
>>>> Op 31 mrt. 2021 om 14:24 heeft Duncan Murdoch
>>>> <murdoch.duncan at gmail.com> het volgende geschreven:
>>>>
>>>> ?On 31/03/2021 5:55 a.m., Tim Hulsen wrote:
>>>>> When submitting my package to CRAN, I get the message:
>>>>> checking LazyData ... NOTE
>>>>> 'LazyData' is specified without a 'data' directory
>>>>> What can i do about this?
>>>>
>>>> Don't specify LazyData.  If that doesn't help, give us a bit more
>>>> information, e.g. a link to your source.
>>>>
>>>> Duncan Murdoch
>>
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Sat Apr  3 10:48:47 2021
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Sat, 3 Apr 2021 10:48:47 +0200
Subject: [R-pkg-devel] how to address CRAN FAIL on
 r-devel-windows-x86_64-gcc10-UCRT?
In-Reply-To: <916FE36D-C70F-4E00-AC87-9335B4AA5A0C@dal.ca>
References: <916FE36D-C70F-4E00-AC87-9335B4AA5A0C@dal.ca>
Message-ID: <fedf43b0-4715-0373-1f95-fa9d404b36cf@gmail.com>

On 4/2/21 1:05 PM, Daniel Kelley wrote:
> The "oce" package for oceanographic analysis is failing a check on the r-devel-windows-x86_64-gcc10-UCRT system (see
> https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64-gcc10-UCRT/oce-00check.html). The problem seems to relate to the checking vignette outputs.
>
> According to https://www.r-project.org/nosvn/winutf8/ucrt3/CRAN/checks/gcc10-UCRT/README.txt, that test setup is experimental.  Does that mean that I ought to I ignore the FAIL status for this machine, perhaps checking it once in a while to see if it changes?

A similarly looking problem exists for multiple packages. It may be 
related to some setup on the checking system or some more general 
problem not specifically related to your package, I didn't yet have time 
to diagnose.

> Alternatively, if I am advised to fix the problem, I wonder whether there a way for me to run tests with rhub, winbuilder, or something similar?  (I do not have access to a windows machine.)
For now there is a virtual machine setup (you can install a 
free-for-testing Windows virtual machine). A link is in the README or here
https://developer.r-project.org/Blog/public/2021/03/18/virtual-windows-machine-for-checking-r-packages/index.html 


This is available for package developers to debug issues with their 
packages, but in this case it really may be something unrelated to your 
package, so unless you wanted to volunteer your time diagnosing this, 
please ignore.

Best
Tomas

>
> Thanks in advance for any help that can be provided.
>
> Dan Kelley, Dept. Oceanography, Dalhousie University, Canada
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @dh@w@n @end|ng |rom qmed@c@  Tue Apr  6 16:27:21 2021
From: @dh@w@n @end|ng |rom qmed@c@ (Andrew Dhawan)
Date: Tue, 6 Apr 2021 10:27:21 -0400
Subject: [R-pkg-devel] Package Rejection Error Help
Message-ID: <CAOK8EzfgUK4jNtXE6zE4-Mxig=VoR5nAMXw517ypzJvRPd6Avg@mail.gmail.com>

Dear all,

I am a bit puzzled by this error for the sigQC package being uploaded to
CRAN. Checks on my end pass without issue. There is one error regarding the
bioConductor dependency RankProd that comes up only on the Debian OS when
checking. See here for further details:
https://win-builder.r-project.org/incoming_pretest/sigQC_0.1.22_20210406_110708/

I am not sure how to resolve this - it seems to me that the dependency
*should* be available across platforms, and short of removing the
dependency (which we rely on a fair bit), I'm not sure what  we can do.

Any thoughts or suggestions would be massively appreciated.

Thank you so kindly!
Andrew

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Apr  6 17:33:00 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 6 Apr 2021 17:33:00 +0200
Subject: [R-pkg-devel] Package Rejection Error Help
In-Reply-To: <CAOK8EzfgUK4jNtXE6zE4-Mxig=VoR5nAMXw517ypzJvRPd6Avg@mail.gmail.com>
References: <CAOK8EzfgUK4jNtXE6zE4-Mxig=VoR5nAMXw517ypzJvRPd6Avg@mail.gmail.com>
Message-ID: <d96ab7f7-b91e-b901-414e-7314c04c51f7@statistik.tu-dortmund.de>

Two Notes:


Found the following (possibly) invalid URLs:
   URL: http://imagemagick.org/script/download.php (moved to 
https://imagemagick.org/script/download.php)
     From: inst/doc/vignette.html
     Status: 200
     Message: OK


Please change http --> https, add trailing slashes, or follow moved 
content as appropriate.

* checking LazyData ... NOTE
   'LazyData' is specified without a 'data' directory

Simply omit the field if you have no data.

Best,
Uwe Ligges



On 06.04.2021 16:27, Andrew Dhawan wrote:
> Dear all,
> 
> I am a bit puzzled by this error for the sigQC package being uploaded to
> CRAN. Checks on my end pass without issue. There is one error regarding the
> bioConductor dependency RankProd that comes up only on the Debian OS when
> checking. See here for further details:
> https://win-builder.r-project.org/incoming_pretest/sigQC_0.1.22_20210406_110708/
> 
> I am not sure how to resolve this - it seems to me that the dependency
> *should* be available across platforms, and short of removing the
> dependency (which we rely on a fair bit), I'm not sure what  we can do.
> 
> Any thoughts or suggestions would be massively appreciated.
> 
> Thank you so kindly!
> Andrew
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Apr  6 17:58:25 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 6 Apr 2021 17:58:25 +0200
Subject: [R-pkg-devel] Package Rejection Error Help
In-Reply-To: <184d0c80-1223-508e-425f-e8df828892cf@univ-fcomte.fr>
References: <CAOK8EzfgUK4jNtXE6zE4-Mxig=VoR5nAMXw517ypzJvRPd6Avg@mail.gmail.com>
 <d96ab7f7-b91e-b901-414e-7314c04c51f7@statistik.tu-dortmund.de>
 <184d0c80-1223-508e-425f-e8df828892cf@univ-fcomte.fr>
Message-ID: <fb21bbc0-810c-995d-8c6a-cf4645379313@statistik.tu-dortmund.de>



On 06.04.2021 17:39, Patrick Giraudoux wrote:
> I had a similar problem with intepreting "notes" in pgirmess checks. 
> Some are lethal and lead to rejection and some not (just informative 
> comments). Fortunately Uwe has been kind enough to tell me what I missed 
> (I thought that all notes were just "informative").
> Would it be possible to call lethal notes "errors" to keep us aware that 
> we must really do something with them and fix what is actually a problem?

These are Notes as it may not be a serious issue or may be a false 
positive, nevertheless, we like to get clean packages to CRAN.

WARNINGs and ERRORs will never be accepted.

The policies clearly say that significant Notes have to be addressed.
The only Note that is always acceptable is the CRAN maintainer Note 
about the package maintainer's address. All other Notes should be fixed 
generally or need manual attention in case of the really very few 
exceptions.

Best,
Uwe Ligges




> Best,
> Patrick
> 
> 
> Le 06/04/2021 ? 17:33, Uwe Ligges a ?crit?:
>> Two Notes:
>>
>>
>> Found the following (possibly) invalid URLs:
>> ?URL: http://imagemagick.org/script/download.php (moved to 
>> https://imagemagick.org/script/download.php)
>> ?? From: inst/doc/vignette.html
>> ?? Status: 200
>> ?? Message: OK
>>
>>
>> Please change http --> https, add trailing slashes, or follow moved 
>> content as appropriate.
>>
>> * checking LazyData ... NOTE
>> ?'LazyData' is specified without a 'data' directory
>>
>> Simply omit the field if you have no data.
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>> On 06.04.2021 16:27, Andrew Dhawan wrote:
>>> Dear all,
>>>
>>> I am a bit puzzled by this error for the sigQC package being uploaded to
>>> CRAN. Checks on my end pass without issue. There is one error 
>>> regarding the
>>> bioConductor dependency RankProd that comes up only on the Debian OS 
>>> when
>>> checking. See here for further details:
>>> https://win-builder.r-project.org/incoming_pretest/sigQC_0.1.22_20210406_110708/ 
>>>
>>>
>>> I am not sure how to resolve this - it seems to me that the dependency
>>> *should* be available across platforms, and short of removing the
>>> dependency (which we rely on a fair bit), I'm not sure what? we can do.
>>>
>>> Any thoughts or suggestions would be massively appreciated.
>>>
>>> Thank you so kindly!
>>> Andrew
>>>
>>> ????[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
>


From @dh@w@n @end|ng |rom qmed@c@  Tue Apr  6 19:13:28 2021
From: @dh@w@n @end|ng |rom qmed@c@ (Andrew Dhawan)
Date: Tue, 6 Apr 2021 13:13:28 -0400
Subject: [R-pkg-devel] Package Rejection Error Help
In-Reply-To: <fb21bbc0-810c-995d-8c6a-cf4645379313@statistik.tu-dortmund.de>
References: <CAOK8EzfgUK4jNtXE6zE4-Mxig=VoR5nAMXw517ypzJvRPd6Avg@mail.gmail.com>
 <d96ab7f7-b91e-b901-414e-7314c04c51f7@statistik.tu-dortmund.de>
 <184d0c80-1223-508e-425f-e8df828892cf@univ-fcomte.fr>
 <fb21bbc0-810c-995d-8c6a-cf4645379313@statistik.tu-dortmund.de>
Message-ID: <CAOK8EzcGv=ktad0AjtjOcQa5706WAy+zsAk3gkwOjeV-NUqPLA@mail.gmail.com>

Thank you both very kindly - I have addressed both notes. I am still
wondering though about the RankProd dependency error - any insight into
this?

Thanks!
Andrew

On Tue, Apr 6, 2021 at 11:58 AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 06.04.2021 17:39, Patrick Giraudoux wrote:
> > I had a similar problem with intepreting "notes" in pgirmess checks.
> > Some are lethal and lead to rejection and some not (just informative
> > comments). Fortunately Uwe has been kind enough to tell me what I missed
> > (I thought that all notes were just "informative").
> > Would it be possible to call lethal notes "errors" to keep us aware that
> > we must really do something with them and fix what is actually a problem?
>
> These are Notes as it may not be a serious issue or may be a false
> positive, nevertheless, we like to get clean packages to CRAN.
>
> WARNINGs and ERRORs will never be accepted.
>
> The policies clearly say that significant Notes have to be addressed.
> The only Note that is always acceptable is the CRAN maintainer Note
> about the package maintainer's address. All other Notes should be fixed
> generally or need manual attention in case of the really very few
> exceptions.
>
> Best,
> Uwe Ligges
>
>
>
>
> > Best,
> > Patrick
> >
> >
> > Le 06/04/2021 ? 17:33, Uwe Ligges a ?crit :
> >> Two Notes:
> >>
> >>
> >> Found the following (possibly) invalid URLs:
> >>  URL: http://imagemagick.org/script/download.php (moved to
> >> https://imagemagick.org/script/download.php)
> >>    From: inst/doc/vignette.html
> >>    Status: 200
> >>    Message: OK
> >>
> >>
> >> Please change http --> https, add trailing slashes, or follow moved
> >> content as appropriate.
> >>
> >> * checking LazyData ... NOTE
> >>  'LazyData' is specified without a 'data' directory
> >>
> >> Simply omit the field if you have no data.
> >>
> >> Best,
> >> Uwe Ligges
> >>
> >>
> >>
> >> On 06.04.2021 16:27, Andrew Dhawan wrote:
> >>> Dear all,
> >>>
> >>> I am a bit puzzled by this error for the sigQC package being uploaded
> to
> >>> CRAN. Checks on my end pass without issue. There is one error
> >>> regarding the
> >>> bioConductor dependency RankProd that comes up only on the Debian OS
> >>> when
> >>> checking. See here for further details:
> >>>
> https://win-builder.r-project.org/incoming_pretest/sigQC_0.1.22_20210406_110708/
> >>>
> >>>
> >>> I am not sure how to resolve this - it seems to me that the dependency
> >>> *should* be available across platforms, and short of removing the
> >>> dependency (which we rely on a fair bit), I'm not sure what  we can do.
> >>>
> >>> Any thoughts or suggestions would be massively appreciated.
> >>>
> >>> Thank you so kindly!
> >>> Andrew
> >>>
> >>>     [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
>

	[[alternative HTML version deleted]]


From r|||ght79 @end|ng |rom gm@||@com  Tue Apr  6 19:26:34 2021
From: r|||ght79 @end|ng |rom gm@||@com (Robert M. Flight)
Date: Tue, 6 Apr 2021 13:26:34 -0400
Subject: [R-pkg-devel] Package Rejection Error Help
In-Reply-To: <CAOK8EzcGv=ktad0AjtjOcQa5706WAy+zsAk3gkwOjeV-NUqPLA@mail.gmail.com>
References: <CAOK8EzfgUK4jNtXE6zE4-Mxig=VoR5nAMXw517ypzJvRPd6Avg@mail.gmail.com>
 <d96ab7f7-b91e-b901-414e-7314c04c51f7@statistik.tu-dortmund.de>
 <184d0c80-1223-508e-425f-e8df828892cf@univ-fcomte.fr>
 <fb21bbc0-810c-995d-8c6a-cf4645379313@statistik.tu-dortmund.de>
 <CAOK8EzcGv=ktad0AjtjOcQa5706WAy+zsAk3gkwOjeV-NUqPLA@mail.gmail.com>
Message-ID: <CAJLyBTUoRvY7xZDVjswE_r8wsg_E0-DTS78__zi6dUmtu=yhTw@mail.gmail.com>

Andrew,

I think if you want to include a Bioconductor dependency, then I think you
add the "biocViews:" line to your description file to enable bioconductor
package installation.

See this answer on Bioinformatics stackexchange:
https://bioinformatics.stackexchange.com/a/3375/51

Hope that helps!

-Robert

On Tue, Apr 6, 2021 at 1:14 PM Andrew Dhawan <adhawan at qmed.ca> wrote:

> Thank you both very kindly - I have addressed both notes. I am still
> wondering though about the RankProd dependency error - any insight into
> this?
>
> Thanks!
> Andrew
>
> On Tue, Apr 6, 2021 at 11:58 AM Uwe Ligges <
> ligges at statistik.tu-dortmund.de>
> wrote:
>
> >
> >
> > On 06.04.2021 17:39, Patrick Giraudoux wrote:
> > > I had a similar problem with intepreting "notes" in pgirmess checks.
> > > Some are lethal and lead to rejection and some not (just informative
> > > comments). Fortunately Uwe has been kind enough to tell me what I
> missed
> > > (I thought that all notes were just "informative").
> > > Would it be possible to call lethal notes "errors" to keep us aware
> that
> > > we must really do something with them and fix what is actually a
> problem?
> >
> > These are Notes as it may not be a serious issue or may be a false
> > positive, nevertheless, we like to get clean packages to CRAN.
> >
> > WARNINGs and ERRORs will never be accepted.
> >
> > The policies clearly say that significant Notes have to be addressed.
> > The only Note that is always acceptable is the CRAN maintainer Note
> > about the package maintainer's address. All other Notes should be fixed
> > generally or need manual attention in case of the really very few
> > exceptions.
> >
> > Best,
> > Uwe Ligges
> >
> >
> >
> >
> > > Best,
> > > Patrick
> > >
> > >
> > > Le 06/04/2021 ? 17:33, Uwe Ligges a ?crit :
> > >> Two Notes:
> > >>
> > >>
> > >> Found the following (possibly) invalid URLs:
> > >>  URL: http://imagemagick.org/script/download.php (moved to
> > >> https://imagemagick.org/script/download.php)
> > >>    From: inst/doc/vignette.html
> > >>    Status: 200
> > >>    Message: OK
> > >>
> > >>
> > >> Please change http --> https, add trailing slashes, or follow moved
> > >> content as appropriate.
> > >>
> > >> * checking LazyData ... NOTE
> > >>  'LazyData' is specified without a 'data' directory
> > >>
> > >> Simply omit the field if you have no data.
> > >>
> > >> Best,
> > >> Uwe Ligges
> > >>
> > >>
> > >>
> > >> On 06.04.2021 16:27, Andrew Dhawan wrote:
> > >>> Dear all,
> > >>>
> > >>> I am a bit puzzled by this error for the sigQC package being uploaded
> > to
> > >>> CRAN. Checks on my end pass without issue. There is one error
> > >>> regarding the
> > >>> bioConductor dependency RankProd that comes up only on the Debian OS
> > >>> when
> > >>> checking. See here for further details:
> > >>>
> >
> https://win-builder.r-project.org/incoming_pretest/sigQC_0.1.22_20210406_110708/
> > >>>
> > >>>
> > >>> I am not sure how to resolve this - it seems to me that the
> dependency
> > >>> *should* be available across platforms, and short of removing the
> > >>> dependency (which we rely on a fair bit), I'm not sure what  we can
> do.
> > >>>
> > >>> Any thoughts or suggestions would be massively appreciated.
> > >>>
> > >>> Thank you so kindly!
> > >>> Andrew
> > >>>
> > >>>     [[alternative HTML version deleted]]
> > >>>
> > >>> ______________________________________________
> > >>> R-package-devel at r-project.org mailing list
> > >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >>>
> > >>
> > >> ______________________________________________
> > >> R-package-devel at r-project.org mailing list
> > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> > >
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From p@tr|ck@g|r@udoux @end|ng |rom un|v-|comte@|r  Tue Apr  6 17:39:40 2021
From: p@tr|ck@g|r@udoux @end|ng |rom un|v-|comte@|r (Patrick Giraudoux)
Date: Tue, 6 Apr 2021 17:39:40 +0200
Subject: [R-pkg-devel] Package Rejection Error Help
In-Reply-To: <d96ab7f7-b91e-b901-414e-7314c04c51f7@statistik.tu-dortmund.de>
References: <CAOK8EzfgUK4jNtXE6zE4-Mxig=VoR5nAMXw517ypzJvRPd6Avg@mail.gmail.com>
 <d96ab7f7-b91e-b901-414e-7314c04c51f7@statistik.tu-dortmund.de>
Message-ID: <184d0c80-1223-508e-425f-e8df828892cf@univ-fcomte.fr>

I had a similar problem with intepreting "notes" in pgirmess checks. 
Some are lethal and lead to rejection and some not (just informative 
comments). Fortunately Uwe has been kind enough to tell me what I missed 
(I thought that all notes were just "informative").
Would it be possible to call lethal notes "errors" to keep us aware that 
we must really do something with them and fix what is actually a problem?
Best,
Patrick


Le 06/04/2021 ? 17:33, Uwe Ligges a ?crit?:
> Two Notes:
>
>
> Found the following (possibly) invalid URLs:
> ?URL: http://imagemagick.org/script/download.php (moved to 
> https://imagemagick.org/script/download.php)
> ?? From: inst/doc/vignette.html
> ?? Status: 200
> ?? Message: OK
>
>
> Please change http --> https, add trailing slashes, or follow moved 
> content as appropriate.
>
> * checking LazyData ... NOTE
> ?'LazyData' is specified without a 'data' directory
>
> Simply omit the field if you have no data.
>
> Best,
> Uwe Ligges
>
>
>
> On 06.04.2021 16:27, Andrew Dhawan wrote:
>> Dear all,
>>
>> I am a bit puzzled by this error for the sigQC package being uploaded to
>> CRAN. Checks on my end pass without issue. There is one error 
>> regarding the
>> bioConductor dependency RankProd that comes up only on the Debian OS 
>> when
>> checking. See here for further details:
>> https://win-builder.r-project.org/incoming_pretest/sigQC_0.1.22_20210406_110708/ 
>>
>>
>> I am not sure how to resolve this - it seems to me that the dependency
>> *should* be available across platforms, and short of removing the
>> dependency (which we rely on a fair bit), I'm not sure what? we can do.
>>
>> Any thoughts or suggestions would be massively appreciated.
>>
>> Thank you so kindly!
>> Andrew
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



	[[alternative HTML version deleted]]


From d@v|d @end|ng |rom prec|@|onmethod@@guru  Tue Apr  6 21:09:02 2021
From: d@v|d @end|ng |rom prec|@|onmethod@@guru (David Norris)
Date: Tue, 6 Apr 2021 19:09:02 +0000
Subject: [R-pkg-devel] Win-builder not finding binaries provided by
 LinkingTo: cargo?
Message-ID: <DD27B476-6D93-4F8A-9A59-A0B21E24747E@precisionmethods.guru>

For version 0.2-2 of my ?precautionary? package, I have added fast numerical routines implemented in Rust.
In my DESCRIPTION file, I am ?LinkingTo: cargo (>= 0.1.28)?, but fail incoming check on Win-builder as follows:
https://win-builder.r-project.org/incoming_pretest/precautionary_0.2-2_20210406_142130/Windows/00install.out

* installing *source* package 'precautionary' ...
** using staged installation
** libs

*** arch - i386
rm -Rf precautionary.dll ./rust/target/i686-pc-windows-gnu/release/libprecautionary.a entrypoint.o
d:/Compiler/rtools40/mingw32/bin/gcc  -I"D:/RCompile/recent/R/include" -DNDEBUG  -I'd:/RCompile/CRANpkg/lib/4.1/cargo/include'   -I"d:/Compiler/gcc-4.9.3/local330/include"     -pedantic -O2 -Wall  -std=gnu99 -mfpmath=sse -msse2 -mstackrealign  -c entrypoint.c -o entrypoint.o
cargo build --target=i686-pc-windows-gnu --lib --release --manifest-path=./rust/Cargo.toml
make: cargo: Command not found
make: *** [Makevars.win:11: rust/target/-pc-windows-gnu/release/libprecautionary.a] Error 127
ERROR: compilation failed for package 'precautionary'
* removing 'd:/RCompile/CRANincoming/R-devel/lib/precautionary'

As I understand the intention of package cargo https://CRAN.R-project.org/package=cargo, it aims to solve precisely this problem.
Other platforms check my package just fine.
Is the solution to be found in configuration of Win-builder, in my Makevars.win, or elsewhere?
I have taken my Makevars.win straight from https://github.com/extendr/helloextendr/blob/main/src/Makevars.win as follows:


TARGET = $(subst 64,x86_64,$(subst 32,i686,$(WIN)))-pc-windows-gnu

LIBDIR = ./rust/target/$(TARGET)/release

STATLIB = $(LIBDIR)/libprecautionary.a

PKG_LIBS = -L$(LIBDIR) -lprecautionary -lws2_32 -ladvapi32 -luserenv



all: C_clean



$(SHLIB): $(STATLIB)



$(STATLIB):

        cargo build --target=$(TARGET) --lib --release --manifest-path=./rust/Cargo.toml



C_clean:

        rm -Rf $(SHLIB) $(STATLIB) $(OBJECTS)



clean:

        rm -Rf $(SHLIB) $(STATLIB) $(OBJECTS) rust/target


	[[alternative HTML version deleted]]


From @dh@w@n @end|ng |rom qmed@c@  Tue Apr  6 22:18:42 2021
From: @dh@w@n @end|ng |rom qmed@c@ (Andrew Dhawan)
Date: Tue, 6 Apr 2021 16:18:42 -0400
Subject: [R-pkg-devel] Package Rejection Error Help
In-Reply-To: <CAJLyBTUoRvY7xZDVjswE_r8wsg_E0-DTS78__zi6dUmtu=yhTw@mail.gmail.com>
References: <CAOK8EzfgUK4jNtXE6zE4-Mxig=VoR5nAMXw517ypzJvRPd6Avg@mail.gmail.com>
 <d96ab7f7-b91e-b901-414e-7314c04c51f7@statistik.tu-dortmund.de>
 <184d0c80-1223-508e-425f-e8df828892cf@univ-fcomte.fr>
 <fb21bbc0-810c-995d-8c6a-cf4645379313@statistik.tu-dortmund.de>
 <CAOK8EzcGv=ktad0AjtjOcQa5706WAy+zsAk3gkwOjeV-NUqPLA@mail.gmail.com>
 <CAJLyBTUoRvY7xZDVjswE_r8wsg_E0-DTS78__zi6dUmtu=yhTw@mail.gmail.com>
Message-ID: <CAOK8EzfLTkE8DiXxeUnV_TOBSHu33z86Jpap3nknzgkiZ2iScw@mail.gmail.com>

Hi Robert,

Thank you for replying! I already had the biocViews: line on my description
file - it seems it must be something else contributing to the issue.

Andrew

On Tue, Apr 6, 2021 at 13:26 Robert M. Flight <rflight79 at gmail.com> wrote:

> Andrew,
>
> I think if you want to include a Bioconductor dependency, then I think you
> add the "biocViews:" line to your description file to enable bioconductor
> package installation.
>
> See this answer on Bioinformatics stackexchange:
> https://bioinformatics.stackexchange.com/a/3375/51
>
> Hope that helps!
>
> -Robert
>
> On Tue, Apr 6, 2021 at 1:14 PM Andrew Dhawan <adhawan at qmed.ca> wrote:
>
>> Thank you both very kindly - I have addressed both notes. I am still
>> wondering though about the RankProd dependency error - any insight into
>> this?
>>
>> Thanks!
>> Andrew
>>
>> On Tue, Apr 6, 2021 at 11:58 AM Uwe Ligges <
>> ligges at statistik.tu-dortmund.de>
>> wrote:
>>
>> >
>> >
>> > On 06.04.2021 17:39, Patrick Giraudoux wrote:
>> > > I had a similar problem with intepreting "notes" in pgirmess checks.
>> > > Some are lethal and lead to rejection and some not (just informative
>> > > comments). Fortunately Uwe has been kind enough to tell me what I
>> missed
>> > > (I thought that all notes were just "informative").
>> > > Would it be possible to call lethal notes "errors" to keep us aware
>> that
>> > > we must really do something with them and fix what is actually a
>> problem?
>> >
>> > These are Notes as it may not be a serious issue or may be a false
>> > positive, nevertheless, we like to get clean packages to CRAN.
>> >
>> > WARNINGs and ERRORs will never be accepted.
>> >
>> > The policies clearly say that significant Notes have to be addressed.
>> > The only Note that is always acceptable is the CRAN maintainer Note
>> > about the package maintainer's address. All other Notes should be fixed
>> > generally or need manual attention in case of the really very few
>> > exceptions.
>> >
>> > Best,
>> > Uwe Ligges
>> >
>> >
>> >
>> >
>> > > Best,
>> > > Patrick
>> > >
>> > >
>> > > Le 06/04/2021 ? 17:33, Uwe Ligges a ?crit :
>> > >> Two Notes:
>> > >>
>> > >>
>> > >> Found the following (possibly) invalid URLs:
>> > >>  URL: http://imagemagick.org/script/download.php (moved to
>> > >> https://imagemagick.org/script/download.php)
>> > >>    From: inst/doc/vignette.html
>> > >>    Status: 200
>> > >>    Message: OK
>> > >>
>> > >>
>> > >> Please change http --> https, add trailing slashes, or follow moved
>> > >> content as appropriate.
>> > >>
>> > >> * checking LazyData ... NOTE
>> > >>  'LazyData' is specified without a 'data' directory
>> > >>
>> > >> Simply omit the field if you have no data.
>> > >>
>> > >> Best,
>> > >> Uwe Ligges
>> > >>
>> > >>
>> > >>
>> > >> On 06.04.2021 16:27, Andrew Dhawan wrote:
>> > >>> Dear all,
>> > >>>
>> > >>> I am a bit puzzled by this error for the sigQC package being
>> uploaded
>> > to
>> > >>> CRAN. Checks on my end pass without issue. There is one error
>> > >>> regarding the
>> > >>> bioConductor dependency RankProd that comes up only on the Debian OS
>> > >>> when
>> > >>> checking. See here for further details:
>> > >>>
>> >
>> https://win-builder.r-project.org/incoming_pretest/sigQC_0.1.22_20210406_110708/
>> > >>>
>> > >>>
>> > >>> I am not sure how to resolve this - it seems to me that the
>> dependency
>> > >>> *should* be available across platforms, and short of removing the
>> > >>> dependency (which we rely on a fair bit), I'm not sure what  we can
>> do.
>> > >>>
>> > >>> Any thoughts or suggestions would be massively appreciated.
>> > >>>
>> > >>> Thank you so kindly!
>> > >>> Andrew
>> > >>>
>> > >>>     [[alternative HTML version deleted]]
>> > >>>
>> > >>> ______________________________________________
>> > >>> R-package-devel at r-project.org mailing list
>> > >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> > >>>
>> > >>
>> > >> ______________________________________________
>> > >> R-package-devel at r-project.org mailing list
>> > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> > >
>> > >
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> --
*Andrew Dhawan, MD, **DPhil, **B.Math*

	[[alternative HTML version deleted]]


From kev|nu@hey @end|ng |rom gm@||@com  Wed Apr  7 00:41:16 2021
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Tue, 6 Apr 2021 15:41:16 -0700
Subject: [R-pkg-devel] Win-builder not finding binaries provided by
 LinkingTo: cargo?
In-Reply-To: <DD27B476-6D93-4F8A-9A59-A0B21E24747E@precisionmethods.guru>
References: <DD27B476-6D93-4F8A-9A59-A0B21E24747E@precisionmethods.guru>
Message-ID: <CAJXgQP3CeaRiH9Ci0TD0+0EWjayiJ5g7OKASLoM2DwHq91hGeg@mail.gmail.com>

I think this is the pertinent error:

> make: cargo: Command not found

That is, make is assuming that the cargo utility is installed and
available on the PATH, but that doesn't appear to be true on the CRAN
winbuilder machine.

The salso package (https://cran.r-project.org/package=salso)
explicitly requires cargo to be already available, per
SystemRequirements:

SystemRequirements: Cargo (>= 1.42.0) for installation from sources:
see file INSTALL

so you probably need to do something similar. I'd also recommend
downloading the 'salso' package to see how they resolve this, or
contacting the 'salso' maintainer to see what steps they took to
ensure their package could build on CRAN.

Best,
Kevin

On Tue, Apr 6, 2021 at 12:10 PM David Norris
<david at precisionmethods.guru> wrote:
>
> For version 0.2-2 of my ?precautionary? package, I have added fast numerical routines implemented in Rust.
> In my DESCRIPTION file, I am ?LinkingTo: cargo (>= 0.1.28)?, but fail incoming check on Win-builder as follows:
> https://win-builder.r-project.org/incoming_pretest/precautionary_0.2-2_20210406_142130/Windows/00install.out
>
> * installing *source* package 'precautionary' ...
> ** using staged installation
> ** libs
>
> *** arch - i386
> rm -Rf precautionary.dll ./rust/target/i686-pc-windows-gnu/release/libprecautionary.a entrypoint.o
> d:/Compiler/rtools40/mingw32/bin/gcc  -I"D:/RCompile/recent/R/include" -DNDEBUG  -I'd:/RCompile/CRANpkg/lib/4.1/cargo/include'   -I"d:/Compiler/gcc-4.9.3/local330/include"     -pedantic -O2 -Wall  -std=gnu99 -mfpmath=sse -msse2 -mstackrealign  -c entrypoint.c -o entrypoint.o
> cargo build --target=i686-pc-windows-gnu --lib --release --manifest-path=./rust/Cargo.toml
> make: cargo: Command not found
> make: *** [Makevars.win:11: rust/target/-pc-windows-gnu/release/libprecautionary.a] Error 127
> ERROR: compilation failed for package 'precautionary'
> * removing 'd:/RCompile/CRANincoming/R-devel/lib/precautionary'
>
> As I understand the intention of package cargo https://CRAN.R-project.org/package=cargo, it aims to solve precisely this problem.
> Other platforms check my package just fine.
> Is the solution to be found in configuration of Win-builder, in my Makevars.win, or elsewhere?
> I have taken my Makevars.win straight from https://github.com/extendr/helloextendr/blob/main/src/Makevars.win as follows:
>
>
> TARGET = $(subst 64,x86_64,$(subst 32,i686,$(WIN)))-pc-windows-gnu
>
> LIBDIR = ./rust/target/$(TARGET)/release
>
> STATLIB = $(LIBDIR)/libprecautionary.a
>
> PKG_LIBS = -L$(LIBDIR) -lprecautionary -lws2_32 -ladvapi32 -luserenv
>
>
>
> all: C_clean
>
>
>
> $(SHLIB): $(STATLIB)
>
>
>
> $(STATLIB):
>
>         cargo build --target=$(TARGET) --lib --release --manifest-path=./rust/Cargo.toml
>
>
>
> C_clean:
>
>         rm -Rf $(SHLIB) $(STATLIB) $(OBJECTS)
>
>
>
> clean:
>
>         rm -Rf $(SHLIB) $(STATLIB) $(OBJECTS) rust/target
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From d@v|d @end|ng |rom prec|@|onmethod@@guru  Wed Apr  7 11:39:53 2021
From: d@v|d @end|ng |rom prec|@|onmethod@@guru (David Norris)
Date: Wed, 7 Apr 2021 09:39:53 +0000
Subject: [R-pkg-devel] Win-builder not finding binaries provided by
 LinkingTo: cargo?
In-Reply-To: <CAJXgQP3CeaRiH9Ci0TD0+0EWjayiJ5g7OKASLoM2DwHq91hGeg@mail.gmail.com>
References: <DD27B476-6D93-4F8A-9A59-A0B21E24747E@precisionmethods.guru>
 <CAJXgQP3CeaRiH9Ci0TD0+0EWjayiJ5g7OKASLoM2DwHq91hGeg@mail.gmail.com>
Message-ID: <5098C871-09BB-4B51-AACE-2FB373B612C0@precisionmethods.guru>

My DESCRIPTION has the same ?SystemRequirements: ?? line as salso?from which I probably copied it.

I had briefly reached out to ?cargo? author (who is also ?salso? author), who indicated I might need to supply binaries.
Indeed, on closer look, salso appears to include the binaries, rather than asking CRAN to do the build:
https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64-gcc10-UCRT/salso-00check.html

Thus, it seems ?precautionary? presents an opportunity to get Rust compilation working on Win-builder.
Rust is such a fine language that it would be a shame not to smooth this out for the community.

OTOH, crucial calculations in ?precautionary? parallelize so nicely with mclapply() that it would not be inappropriate to bypass (forkless) Win by setting OS_type to unix.

From: Kevin Ushey <kevinushey at gmail.com>
Date: Tuesday, April 6, 2021 at 6:41 PM
To: David Norris <david at precisionmethods.guru>
Cc: "r-package-devel at r-project.org" <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Win-builder not finding binaries provided by LinkingTo: cargo?

I think this is the pertinent error:

make: cargo: Command not found

That is, make is assuming that the cargo utility is installed and
available on the PATH, but that doesn't appear to be true on the CRAN
winbuilder machine.

The salso package (https://cran.r-project.org/package=salso)
explicitly requires cargo to be already available, per
SystemRequirements:

SystemRequirements: Cargo (>= 1.42.0) for installation from sources:
see file INSTALL

so you probably need to do something similar. I'd also recommend
downloading the 'salso' package to see how they resolve this, or
contacting the 'salso' maintainer to see what steps they took to
ensure their package could build on CRAN.

Best,
Kevin

On Tue, Apr 6, 2021 at 12:10 PM David Norris
<david at precisionmethods.guru<mailto:david at precisionmethods.guru>> wrote:

For version 0.2-2 of my ?precautionary? package, I have added fast numerical routines implemented in Rust.
In my DESCRIPTION file, I am ?LinkingTo: cargo (>= 0.1.28)?, but fail incoming check on Win-builder as follows:
https://win-builder.r-project.org/incoming_pretest/precautionary_0.2-2_20210406_142130/Windows/00install.out

* installing *source* package 'precautionary' ...
** using staged installation
** libs

*** arch - i386
rm -Rf precautionary.dll ./rust/target/i686-pc-windows-gnu/release/libprecautionary.a entrypoint.o
d:/Compiler/rtools40/mingw32/bin/gcc  -I"D:/RCompile/recent/R/include" -DNDEBUG  -I'd:/RCompile/CRANpkg/lib/4.1/cargo/include'   -I"d:/Compiler/gcc-4.9.3/local330/include"     -pedantic -O2 -Wall  -std=gnu99 -mfpmath=sse -msse2 -mstackrealign  -c entrypoint.c -o entrypoint.o
cargo build --target=i686-pc-windows-gnu --lib --release --manifest-path=./rust/Cargo.toml
make: cargo: Command not found
make: *** [Makevars.win:11: rust/target/-pc-windows-gnu/release/libprecautionary.a] Error 127
ERROR: compilation failed for package 'precautionary'
* removing 'd:/RCompile/CRANincoming/R-devel/lib/precautionary'

As I understand the intention of package cargo https://CRAN.R-project.org/package=cargo, it aims to solve precisely this problem.
Other platforms check my package just fine.
Is the solution to be found in configuration of Win-builder, in my Makevars.win, or elsewhere?
I have taken my Makevars.win straight from https://github.com/extendr/helloextendr/blob/main/src/Makevars.win as follows:


TARGET = $(subst 64,x86_64,$(subst 32,i686,$(WIN)))-pc-windows-gnu

LIBDIR = ./rust/target/$(TARGET)/release

STATLIB = $(LIBDIR)/libprecautionary.a

PKG_LIBS = -L$(LIBDIR) -lprecautionary -lws2_32 -ladvapi32 -luserenv



all: C_clean



$(SHLIB): $(STATLIB)



$(STATLIB):

         cargo build --target=$(TARGET) --lib --release --manifest-path=./rust/Cargo.toml



C_clean:

         rm -Rf $(SHLIB) $(STATLIB) $(OBJECTS)



clean:

         rm -Rf $(SHLIB) $(STATLIB) $(OBJECTS) rust/target


         [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Apr  7 11:45:36 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 7 Apr 2021 11:45:36 +0200
Subject: [R-pkg-devel] Package Rejection Error Help
In-Reply-To: <CAJLyBTUoRvY7xZDVjswE_r8wsg_E0-DTS78__zi6dUmtu=yhTw@mail.gmail.com>
References: <CAOK8EzfgUK4jNtXE6zE4-Mxig=VoR5nAMXw517ypzJvRPd6Avg@mail.gmail.com>
 <d96ab7f7-b91e-b901-414e-7314c04c51f7@statistik.tu-dortmund.de>
 <184d0c80-1223-508e-425f-e8df828892cf@univ-fcomte.fr>
 <fb21bbc0-810c-995d-8c6a-cf4645379313@statistik.tu-dortmund.de>
 <CAOK8EzcGv=ktad0AjtjOcQa5706WAy+zsAk3gkwOjeV-NUqPLA@mail.gmail.com>
 <CAJLyBTUoRvY7xZDVjswE_r8wsg_E0-DTS78__zi6dUmtu=yhTw@mail.gmail.com>
Message-ID: <54a5e644-3d17-be4a-c0bf-082d0ea5a59f@statistik.tu-dortmund.de>



On 06.04.2021 19:26, Robert M. Flight wrote:
> Andrew,
> 
> I think if you want to include a Bioconductor dependency, then I think you
> add the "biocViews:" line to your description file to enable bioconductor

Not needed for CRAN.

You simply need to declare the dependency, but BioC 3.13 is what we 
should use to check with R-devel and that was recetnly still pretty 
iunstable.

Best,
Uwe Ligges

> package installation.
> 
> See this answer on Bioinformatics stackexchange:
> https://bioinformatics.stackexchange.com/a/3375/51
> 
> Hope that helps!
> 
> -Robert
> 
> On Tue, Apr 6, 2021 at 1:14 PM Andrew Dhawan <adhawan at qmed.ca> wrote:
> 
>> Thank you both very kindly - I have addressed both notes. I am still
>> wondering though about the RankProd dependency error - any insight into
>> this?
>>
>> Thanks!
>> Andrew
>>
>> On Tue, Apr 6, 2021 at 11:58 AM Uwe Ligges <
>> ligges at statistik.tu-dortmund.de>
>> wrote:
>>
>>>
>>>
>>> On 06.04.2021 17:39, Patrick Giraudoux wrote:
>>>> I had a similar problem with intepreting "notes" in pgirmess checks.
>>>> Some are lethal and lead to rejection and some not (just informative
>>>> comments). Fortunately Uwe has been kind enough to tell me what I
>> missed
>>>> (I thought that all notes were just "informative").
>>>> Would it be possible to call lethal notes "errors" to keep us aware
>> that
>>>> we must really do something with them and fix what is actually a
>> problem?
>>>
>>> These are Notes as it may not be a serious issue or may be a false
>>> positive, nevertheless, we like to get clean packages to CRAN.
>>>
>>> WARNINGs and ERRORs will never be accepted.
>>>
>>> The policies clearly say that significant Notes have to be addressed.
>>> The only Note that is always acceptable is the CRAN maintainer Note
>>> about the package maintainer's address. All other Notes should be fixed
>>> generally or need manual attention in case of the really very few
>>> exceptions.
>>>
>>> Best,
>>> Uwe Ligges
>>>
>>>
>>>
>>>
>>>> Best,
>>>> Patrick
>>>>
>>>>
>>>> Le 06/04/2021 ? 17:33, Uwe Ligges a ?crit :
>>>>> Two Notes:
>>>>>
>>>>>
>>>>> Found the following (possibly) invalid URLs:
>>>>>   URL: http://imagemagick.org/script/download.php (moved to
>>>>> https://imagemagick.org/script/download.php)
>>>>>     From: inst/doc/vignette.html
>>>>>     Status: 200
>>>>>     Message: OK
>>>>>
>>>>>
>>>>> Please change http --> https, add trailing slashes, or follow moved
>>>>> content as appropriate.
>>>>>
>>>>> * checking LazyData ... NOTE
>>>>>   'LazyData' is specified without a 'data' directory
>>>>>
>>>>> Simply omit the field if you have no data.
>>>>>
>>>>> Best,
>>>>> Uwe Ligges
>>>>>
>>>>>
>>>>>
>>>>> On 06.04.2021 16:27, Andrew Dhawan wrote:
>>>>>> Dear all,
>>>>>>
>>>>>> I am a bit puzzled by this error for the sigQC package being uploaded
>>> to
>>>>>> CRAN. Checks on my end pass without issue. There is one error
>>>>>> regarding the
>>>>>> bioConductor dependency RankProd that comes up only on the Debian OS
>>>>>> when
>>>>>> checking. See here for further details:
>>>>>>
>>>
>> https://win-builder.r-project.org/incoming_pretest/sigQC_0.1.22_20210406_110708/
>>>>>>
>>>>>>
>>>>>> I am not sure how to resolve this - it seems to me that the
>> dependency
>>>>>> *should* be available across platforms, and short of removing the
>>>>>> dependency (which we rely on a fair bit), I'm not sure what  we can
>> do.
>>>>>>
>>>>>> Any thoughts or suggestions would be massively appreciated.
>>>>>>
>>>>>> Thank you so kindly!
>>>>>> Andrew
>>>>>>
>>>>>>      [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>>
>>>
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ros@rio@@voiio m@iii@g oii u@i@@@it  Wed Apr  7 10:49:03 2021
From: ros@rio@@voiio m@iii@g oii u@i@@@it (ros@rio@@voiio m@iii@g oii u@i@@@it)
Date: Wed, 7 Apr 2021 10:49:03 +0200
Subject: [R-pkg-devel] rtracklayer installation problems
Message-ID: <006301d72b8a$dc59c1b0$950d4510$@unina.it>

Hi everyone,

 

I hope this is the right e-mail I should have used; this is the first time
that I ask for help with R!

Yesterday, I installed the devel version of R (4.1) as I need to use a
package (RiboDiPa) which only works for this version.

The package requires, among the others, the package "rtracklayer". Since
yesterday I am struggling trying to install rtracklayer for devel version
without success.

Below you can find the final message I got before the installation stops.
Any idea of what might be the reason why I cannot install rtracklayer? 

 

ucsc/udc.c:46:10: fatal error: sys/mman.h: No such file or directory

#include <sys/mman.h>

          ^~~~~~~~~~~~

compilation terminated.

make: *** [Makevars.win:16: ucsc/udc.o] Error 1

ERROR: compilation failed for package 'rtracklayer'

* removing 'C:/Users/Rosario/Documents/R/win-library/4.1/rtracklayer'

 

If you need any other information please, do not hesitate to ask.

Thank you in advance for your help!

 

Best,

Rosario

 

 

Rosario Avolio, PhD

Researcher

Department of Molecular Medicine and Medical Biotechnology

Via Pansini, 5

19/A Building

80131 Napoli, Italy

email:  <mailto:rosario.avolio at unina.it> rosario.avolio at unina.it

phone: +39 081 746 31 39

 


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Apr  7 12:12:33 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 7 Apr 2021 06:12:33 -0400
Subject: [R-pkg-devel] rtracklayer installation problems
In-Reply-To: <006301d72b8a$dc59c1b0$950d4510$@unina.it>
References: <006301d72b8a$dc59c1b0$950d4510$@unina.it>
Message-ID: <9d7a55a7-1eb9-d6ff-b472-c13d10e6cf8e@gmail.com>

On 07/04/2021 4:49 a.m., rosario.avolio at unina.it wrote:
> Hi everyone,
> 
>   
> 
> I hope this is the right e-mail I should have used; this is the first time
> that I ask for help with R!
> 
> Yesterday, I installed the devel version of R (4.1) as I need to use a
> package (RiboDiPa) which only works for this version.
> 
> The package requires, among the others, the package "rtracklayer". Since
> yesterday I am struggling trying to install rtracklayer for devel version
> without success.
> 
> Below you can find the final message I got before the installation stops.
> Any idea of what might be the reason why I cannot install rtracklayer?
> 
>   
> 
> ucsc/udc.c:46:10: fatal error: sys/mman.h: No such file or directory
> 
> #include <sys/mman.h>
> 
>            ^~~~~~~~~~~~
> 
> compilation terminated.
> 
> make: *** [Makevars.win:16: ucsc/udc.o] Error 1
> 
> ERROR: compilation failed for package 'rtracklayer'
> 
> * removing 'C:/Users/Rosario/Documents/R/win-library/4.1/rtracklayer'
> 
>   
> 
> If you need any other information please, do not hesitate to ask.
> 
> Thank you in advance for your help!

rtracklayer is a Bioconductor package, so you're probably better off 
asking on their support site https://support.bioconductor.org/.  When 
you do, please show the command you used for the install; it's possible 
a simple change there will fix things.

Duncan Murdoch


From Gordon@Brown @end|ng |rom cruk@c@m@@c@uk  Wed Apr  7 12:32:27 2021
From: Gordon@Brown @end|ng |rom cruk@c@m@@c@uk (Gordon Brown)
Date: Wed, 7 Apr 2021 10:32:27 +0000
Subject: [R-pkg-devel] rtracklayer installation problems
In-Reply-To: <006301d72b8a$dc59c1b0$950d4510$@unina.it>
References: <006301d72b8a$dc59c1b0$950d4510$@unina.it>
Message-ID: <58FFB999-57BA-4815-9B8E-2FB9DD8104C5@cruk.cam.ac.uk>

Hi, Rosario,

The message is telling you that you need to install the development header files for glibc on your computer.  This is a set of files that are needed for building some kinds of software, but are not installed by default.  Are you working on some sort of Linux machine?  On Centos 8, the relevant package to install is called "glibc-headers".  On Ubuntu 20.04 it's "libc6-dev".  You'd need to run a command in the shell, something like:

Centos:
> sudo dnf install glibc-headers
or
> sudo yum install glibc-headers

Ubuntu/Debian:
> sudo apt install libc6-dev

If it's Windows or Mac, I can't help...

If you don't have root access on your host, or the above doesn't make sense to you, you will need to talk to whoever administers your computing environment, asking them to install the relevant package.

Hope this helps.

 - Gord


?On 20210407, 11:03, "R-package-devel on behalf of rosario.avolio at unina.it" <r-package-devel-bounces at r-project.org on behalf of rosario.avolio at unina.it> wrote:

    Hi everyone,



    I hope this is the right e-mail I should have used; this is the first time
    that I ask for help with R!

    Yesterday, I installed the devel version of R (4.1) as I need to use a
    package (RiboDiPa) which only works for this version.

    The package requires, among the others, the package "rtracklayer". Since
    yesterday I am struggling trying to install rtracklayer for devel version
    without success.

    Below you can find the final message I got before the installation stops.
    Any idea of what might be the reason why I cannot install rtracklayer? 



    ucsc/udc.c:46:10: fatal error: sys/mman.h: No such file or directory

    #include <sys/mman.h>

              ^~~~~~~~~~~~

    compilation terminated.

    make: *** [https://linkprotect.cudasvc.com/url?a=https%3a%2f%2fMakevars.win%3a16&c=E,1,aB4mtmdcaXh3y_rFcDWiXKtEvYZoLA3GcTOtz2EAwNVyTaBV0cLYVfIMvPNYj-c9QK7LiaHqut3FcMfCLlVShgqSAdXj_xGXP8nS49zX7vVKE9rNPhmLmWDTnyU,&typo=1: ucsc/udc.o] Error 1

    ERROR: compilation failed for package 'rtracklayer'

    * removing 'C:/Users/Rosario/Documents/R/win-library/4.1/rtracklayer'



    If you need any other information please, do not hesitate to ask.

    Thank you in advance for your help!



    Best,

    Rosario





    Rosario Avolio, PhD

    Researcher

    Department of Molecular Medicine and Medical Biotechnology

    Via Pansini, 5

    19/A Building

    80131 Napoli, Italy

    email:  <mailto:rosario.avolio at unina.it> rosario.avolio at unina.it

    phone: +39 081 746 31 39




    	[[alternative HTML version deleted]]

    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r|@e|@mp| @end|ng |rom gm@||@com  Wed Apr  7 12:18:33 2021
From: r|@e|@mp| @end|ng |rom gm@||@com (Rafael CM)
Date: Wed, 7 Apr 2021 12:18:33 +0200
Subject: [R-pkg-devel] R package depends on Bioconductor packages RTIGER
Message-ID: <CA+NKSawVGMTNd_bK0Eo460Td7AbMenxXQ8yf8bL84dgjk12fmQ@mail.gmail.com>

Dear all,
I am trying to submit a package to CRAN that depends on Bioconductor
packages. On debian, I do not have any problems so far. But when checking
for windows I get several errors:

Error: package or namespace load failed for 'Gviz' in loadNamespace(j
<- i[[1L]], c(lib.loc, .libPaths()), versionCheck = vI[[j]]):
 namespace 'rtracklayer' 1.48.0 is already loaded, but >= 1.51.5 is required
Error: package 'Gviz' could not be loaded
In addition: Warning message:
multiple methods tables found for 'export'
Execution halted
ERROR: lazy loading failed for package 'RTIGER'
* removing 'd:/RCompile/CRANincoming/R-devel/lib/RTIGER'
* restoring previous 'd:/RCompile/CRANincoming/R-devel/lib/RTIGER'

Could someone help me?

Thank you very much,

Rafael

	[[alternative HTML version deleted]]


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Wed Apr  7 13:29:05 2021
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Wed, 7 Apr 2021 11:29:05 +0000
Subject: [R-pkg-devel] rtracklayer installation problems
In-Reply-To: <58FFB999-57BA-4815-9B8E-2FB9DD8104C5@cruk.cam.ac.uk>
References: <006301d72b8a$dc59c1b0$950d4510$@unina.it>
 <58FFB999-57BA-4815-9B8E-2FB9DD8104C5@cruk.cam.ac.uk>
Message-ID: <MN2PR04MB6256AB784F6BA72D066F6335F9759@MN2PR04MB6256.namprd04.prod.outlook.com>

From the Bioconductor 'devel' (3.13, used with R-devel) 'landing page' for rtracklayer

https://bioconductor.org/packages/devel/rtracklayer

The 'build' badge is red; clicking on it shows a build system problem with rtracklayer on Windows. Scrolling on the landing page to the bottom shows

Source Package	rtracklayer_1.51.5.tar.gz
Windows Binary	
macOS 10.13 (High Sierra)	rtracklayer_1.51.5.tgz
Source Repository	



?On 4/7/21, 6:32 AM, "R-package-devel on behalf of Gordon Brown" <r-package-devel-bounces at r-project.org on behalf of Gordon.Brown at cruk.cam.ac.uk> wrote:

    Hi, Rosario,

    The message is telling you that you need to install the development header files for glibc on your computer.  This is a set of files that are needed for building some kinds of software, but are not installed by default.  Are you working on some sort of Linux machine?  On Centos 8, the relevant package to install is called "glibc-headers".  On Ubuntu 20.04 it's "libc6-dev".  You'd need to run a command in the shell, something like:

    Centos:
    > sudo dnf install glibc-headers
    or
    > sudo yum install glibc-headers

    Ubuntu/Debian:
    > sudo apt install libc6-dev

    If it's Windows or Mac, I can't help...

    If you don't have root access on your host, or the above doesn't make sense to you, you will need to talk to whoever administers your computing environment, asking them to install the relevant package.

    Hope this helps.

     - Gord


    ?On 20210407, 11:03, "R-package-devel on behalf of rosario.avolio at unina.it" <r-package-devel-bounces at r-project.org on behalf of rosario.avolio at unina.it> wrote:

        Hi everyone,



        I hope this is the right e-mail I should have used; this is the first time
        that I ask for help with R!

        Yesterday, I installed the devel version of R (4.1) as I need to use a
        package (RiboDiPa) which only works for this version.

        The package requires, among the others, the package "rtracklayer". Since
        yesterday I am struggling trying to install rtracklayer for devel version
        without success.

        Below you can find the final message I got before the installation stops.
        Any idea of what might be the reason why I cannot install rtracklayer? 



        ucsc/udc.c:46:10: fatal error: sys/mman.h: No such file or directory

        #include <sys/mman.h>

                  ^~~~~~~~~~~~

        compilation terminated.

        make: *** [https://linkprotect.cudasvc.com/url?a=https%3a%2f%2fMakevars.win%3a16&c=E,1,aB4mtmdcaXh3y_rFcDWiXKtEvYZoLA3GcTOtz2EAwNVyTaBV0cLYVfIMvPNYj-c9QK7LiaHqut3FcMfCLlVShgqSAdXj_xGXP8nS49zX7vVKE9rNPhmLmWDTnyU,&typo=1: ucsc/udc.o] Error 1

        ERROR: compilation failed for package 'rtracklayer'

        * removing 'C:/Users/Rosario/Documents/R/win-library/4.1/rtracklayer'



        If you need any other information please, do not hesitate to ask.

        Thank you in advance for your help!



        Best,

        Rosario





        Rosario Avolio, PhD

        Researcher

        Department of Molecular Medicine and Medical Biotechnology

        Via Pansini, 5

        19/A Building

        80131 Napoli, Italy

        email:  <mailto:rosario.avolio at unina.it> rosario.avolio at unina.it

        phone: +39 081 746 31 39




        	[[alternative HTML version deleted]]

        ______________________________________________
        R-package-devel at r-project.org mailing list
        https://stat.ethz.ch/mailman/listinfo/r-package-devel

    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel

From mtmorg@n@b|oc @end|ng |rom gm@||@com  Wed Apr  7 13:33:37 2021
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Wed, 7 Apr 2021 11:33:37 +0000
Subject: [R-pkg-devel] rtracklayer installation problems
In-Reply-To: <58FFB999-57BA-4815-9B8E-2FB9DD8104C5@cruk.cam.ac.uk>
References: <006301d72b8a$dc59c1b0$950d4510$@unina.it>,
 <58FFB999-57BA-4815-9B8E-2FB9DD8104C5@cruk.cam.ac.uk>
Message-ID: <MN2PR04MB625689B3F0C1050D6805EBBBF9759@MN2PR04MB6256.namprd04.prod.outlook.com>

(sorry, too quick on the return key)

?From the Bioconductor 'devel' (3.13, used with R-devel) 'landing page' for rtracklayer

https://bioconductor.org/packages/devel/rtracklayer

The 'build' badge is red; clicking on it shows a build system problem with rtracklayer on Windows. Scrolling on the landing page to the bottom shows

Source Package	rtracklayer_1.51.5.tar.gz
Windows Binary	
macOS 10.13 (High Sierra)	rtracklayer_1.51.5.tgz

so there is currently no Windows binary available. This is in the hands of the rtracklayer maintainer; there is a very high likelihood that it will be fixed, so either be patient or ask the rtracklayer maintainer directly to address this by, e.g., opening an issue at https://github.com/lawremi/rtracklayer

Martin Morgan


?On 4/7/21, 6:32 AM, "R-package-devel on behalf of Gordon Brown" <r-package-devel-bounces at r-project.org on behalf of Gordon.Brown at cruk.cam.ac.uk> wrote:

    Hi, Rosario,

    The message is telling you that you need to install the development header files for glibc on your computer.  This is a set of files that are needed for building some kinds of software, but are not installed by default.  Are you working on some sort of Linux machine?  On Centos 8, the relevant package to install is called "glibc-headers".  On Ubuntu 20.04 it's "libc6-dev".  You'd need to run a command in the shell, something like:

    Centos:
    > sudo dnf install glibc-headers
    or
    > sudo yum install glibc-headers

    Ubuntu/Debian:
    > sudo apt install libc6-dev

    If it's Windows or Mac, I can't help...

    If you don't have root access on your host, or the above doesn't make sense to you, you will need to talk to whoever administers your computing environment, asking them to install the relevant package.

    Hope this helps.

     - Gord


    ?On 20210407, 11:03, "R-package-devel on behalf of rosario.avolio at unina.it" <r-package-devel-bounces at r-project.org on behalf of rosario.avolio at unina.it> wrote:

        Hi everyone,



        I hope this is the right e-mail I should have used; this is the first time
        that I ask for help with R!

        Yesterday, I installed the devel version of R (4.1) as I need to use a
        package (RiboDiPa) which only works for this version.

        The package requires, among the others, the package "rtracklayer". Since
        yesterday I am struggling trying to install rtracklayer for devel version
        without success.

        Below you can find the final message I got before the installation stops.
        Any idea of what might be the reason why I cannot install rtracklayer? 



        ucsc/udc.c:46:10: fatal error: sys/mman.h: No such file or directory

        #include <sys/mman.h>

                  ^~~~~~~~~~~~

        compilation terminated.

        make: *** [https://linkprotect.cudasvc.com/url?a=https%3a%2f%2fMakevars.win%3a16&c=E,1,aB4mtmdcaXh3y_rFcDWiXKtEvYZoLA3GcTOtz2EAwNVyTaBV0cLYVfIMvPNYj-c9QK7LiaHqut3FcMfCLlVShgqSAdXj_xGXP8nS49zX7vVKE9rNPhmLmWDTnyU,&typo=1: ucsc/udc.o] Error 1

        ERROR: compilation failed for package 'rtracklayer'

        * removing 'C:/Users/Rosario/Documents/R/win-library/4.1/rtracklayer'



        If you need any other information please, do not hesitate to ask.

        Thank you in advance for your help!



        Best,

        Rosario





        Rosario Avolio, PhD

        Researcher

        Department of Molecular Medicine and Medical Biotechnology

        Via Pansini, 5

        19/A Building

        80131 Napoli, Italy

        email:  <mailto:rosario.avolio at unina.it> rosario.avolio at unina.it

        phone: +39 081 746 31 39




        	[[alternative HTML version deleted]]

        ______________________________________________
        R-package-devel at r-project.org mailing list
        https://stat.ethz.ch/mailman/listinfo/r-package-devel

    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel

From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Apr  7 16:19:28 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 7 Apr 2021 16:19:28 +0200
Subject: [R-pkg-devel] R package depends on Bioconductor packages RTIGER
In-Reply-To: <CA+NKSawVGMTNd_bK0Eo460Td7AbMenxXQ8yf8bL84dgjk12fmQ@mail.gmail.com>
References: <CA+NKSawVGMTNd_bK0Eo460Td7AbMenxXQ8yf8bL84dgjk12fmQ@mail.gmail.com>
Message-ID: <7aa2b51b-d095-cd01-c60f-39ff31d5e249@statistik.tu-dortmund.de>

Reason is that BioC 3.13 does not offer a new rtracklayer binary which 
the winbuilder machine typically uses.
As this also does not install from sources for me. So this seems hard to 
set up.


Best,
Uwe Ligges








On 07.04.2021 12:18, Rafael CM wrote:
> Dear all,
> I am trying to submit a package to CRAN that depends on Bioconductor
> packages. On debian, I do not have any problems so far. But when checking
> for windows I get several errors:
> 
> Error: package or namespace load failed for 'Gviz' in loadNamespace(j
> <- i[[1L]], c(lib.loc, .libPaths()), versionCheck = vI[[j]]):
>   namespace 'rtracklayer' 1.48.0 is already loaded, but >= 1.51.5 is required
> Error: package 'Gviz' could not be loaded
> In addition: Warning message:
> multiple methods tables found for 'export'
> Execution halted
> ERROR: lazy loading failed for package 'RTIGER'
> * removing 'd:/RCompile/CRANincoming/R-devel/lib/RTIGER'
> * restoring previous 'd:/RCompile/CRANincoming/R-devel/lib/RTIGER'
> 
> Could someone help me?
> 
> Thank you very much,
> 
> Rafael
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @dh@w@n @end|ng |rom qmed@c@  Wed Apr  7 16:50:07 2021
From: @dh@w@n @end|ng |rom qmed@c@ (Andrew Dhawan)
Date: Wed, 7 Apr 2021 10:50:07 -0400
Subject: [R-pkg-devel] Package Rejection Error Help
In-Reply-To: <54a5e644-3d17-be4a-c0bf-082d0ea5a59f@statistik.tu-dortmund.de>
References: <CAOK8EzfgUK4jNtXE6zE4-Mxig=VoR5nAMXw517ypzJvRPd6Avg@mail.gmail.com>
 <d96ab7f7-b91e-b901-414e-7314c04c51f7@statistik.tu-dortmund.de>
 <184d0c80-1223-508e-425f-e8df828892cf@univ-fcomte.fr>
 <fb21bbc0-810c-995d-8c6a-cf4645379313@statistik.tu-dortmund.de>
 <CAOK8EzcGv=ktad0AjtjOcQa5706WAy+zsAk3gkwOjeV-NUqPLA@mail.gmail.com>
 <CAJLyBTUoRvY7xZDVjswE_r8wsg_E0-DTS78__zi6dUmtu=yhTw@mail.gmail.com>
 <54a5e644-3d17-be4a-c0bf-082d0ea5a59f@statistik.tu-dortmund.de>
Message-ID: <CAOK8EzdRYv_FtaaOA8W6shqJv6-0Ov69TMQ+eWA8=Sacj7w+Fw@mail.gmail.com>

Thank you again Uwe,

So, to clarify - is the error occurring because RankProd is not found in
BioC 3.13 (current release is 3.12)?  If so, I'm not sure how I can fix
this...

Thanks
Andrew


On Wed, Apr 7, 2021 at 5:45 AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 06.04.2021 19:26, Robert M. Flight wrote:
> > Andrew,
> >
> > I think if you want to include a Bioconductor dependency, then I think
> you
> > add the "biocViews:" line to your description file to enable bioconductor
>
> Not needed for CRAN.
>
> You simply need to declare the dependency, but BioC 3.13 is what we
> should use to check with R-devel and that was recetnly still pretty
> iunstable.
>
> Best,
> Uwe Ligges
>
> > package installation.
> >
> > See this answer on Bioinformatics stackexchange:
> > https://bioinformatics.stackexchange.com/a/3375/51
> >
> > Hope that helps!
> >
> > -Robert
> >
> > On Tue, Apr 6, 2021 at 1:14 PM Andrew Dhawan <adhawan at qmed.ca> wrote:
> >
> >> Thank you both very kindly - I have addressed both notes. I am still
> >> wondering though about the RankProd dependency error - any insight into
> >> this?
> >>
> >> Thanks!
> >> Andrew
> >>
> >> On Tue, Apr 6, 2021 at 11:58 AM Uwe Ligges <
> >> ligges at statistik.tu-dortmund.de>
> >> wrote:
> >>
> >>>
> >>>
> >>> On 06.04.2021 17:39, Patrick Giraudoux wrote:
> >>>> I had a similar problem with intepreting "notes" in pgirmess checks.
> >>>> Some are lethal and lead to rejection and some not (just informative
> >>>> comments). Fortunately Uwe has been kind enough to tell me what I
> >> missed
> >>>> (I thought that all notes were just "informative").
> >>>> Would it be possible to call lethal notes "errors" to keep us aware
> >> that
> >>>> we must really do something with them and fix what is actually a
> >> problem?
> >>>
> >>> These are Notes as it may not be a serious issue or may be a false
> >>> positive, nevertheless, we like to get clean packages to CRAN.
> >>>
> >>> WARNINGs and ERRORs will never be accepted.
> >>>
> >>> The policies clearly say that significant Notes have to be addressed.
> >>> The only Note that is always acceptable is the CRAN maintainer Note
> >>> about the package maintainer's address. All other Notes should be fixed
> >>> generally or need manual attention in case of the really very few
> >>> exceptions.
> >>>
> >>> Best,
> >>> Uwe Ligges
> >>>
> >>>
> >>>
> >>>
> >>>> Best,
> >>>> Patrick
> >>>>
> >>>>
> >>>> Le 06/04/2021 ? 17:33, Uwe Ligges a ?crit :
> >>>>> Two Notes:
> >>>>>
> >>>>>
> >>>>> Found the following (possibly) invalid URLs:
> >>>>>   URL: http://imagemagick.org/script/download.php (moved to
> >>>>> https://imagemagick.org/script/download.php)
> >>>>>     From: inst/doc/vignette.html
> >>>>>     Status: 200
> >>>>>     Message: OK
> >>>>>
> >>>>>
> >>>>> Please change http --> https, add trailing slashes, or follow moved
> >>>>> content as appropriate.
> >>>>>
> >>>>> * checking LazyData ... NOTE
> >>>>>   'LazyData' is specified without a 'data' directory
> >>>>>
> >>>>> Simply omit the field if you have no data.
> >>>>>
> >>>>> Best,
> >>>>> Uwe Ligges
> >>>>>
> >>>>>
> >>>>>
> >>>>> On 06.04.2021 16:27, Andrew Dhawan wrote:
> >>>>>> Dear all,
> >>>>>>
> >>>>>> I am a bit puzzled by this error for the sigQC package being
> uploaded
> >>> to
> >>>>>> CRAN. Checks on my end pass without issue. There is one error
> >>>>>> regarding the
> >>>>>> bioConductor dependency RankProd that comes up only on the Debian OS
> >>>>>> when
> >>>>>> checking. See here for further details:
> >>>>>>
> >>>
> >>
> https://win-builder.r-project.org/incoming_pretest/sigQC_0.1.22_20210406_110708/
> >>>>>>
> >>>>>>
> >>>>>> I am not sure how to resolve this - it seems to me that the
> >> dependency
> >>>>>> *should* be available across platforms, and short of removing the
> >>>>>> dependency (which we rely on a fair bit), I'm not sure what  we can
> >> do.
> >>>>>>
> >>>>>> Any thoughts or suggestions would be massively appreciated.
> >>>>>>
> >>>>>> Thank you so kindly!
> >>>>>> Andrew
> >>>>>>
> >>>>>>      [[alternative HTML version deleted]]
> >>>>>>
> >>>>>> ______________________________________________
> >>>>>> R-package-devel at r-project.org mailing list
> >>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>>>>
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-package-devel at r-project.org mailing list
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>>
> >>>>
> >>>
> >>
> >>          [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Apr  7 18:21:23 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 7 Apr 2021 12:21:23 -0400
Subject: [R-pkg-devel] Package Rejection Error Help
In-Reply-To: <CAOK8EzdRYv_FtaaOA8W6shqJv6-0Ov69TMQ+eWA8=Sacj7w+Fw@mail.gmail.com>
References: <CAOK8EzfgUK4jNtXE6zE4-Mxig=VoR5nAMXw517ypzJvRPd6Avg@mail.gmail.com>
 <d96ab7f7-b91e-b901-414e-7314c04c51f7@statistik.tu-dortmund.de>
 <184d0c80-1223-508e-425f-e8df828892cf@univ-fcomte.fr>
 <fb21bbc0-810c-995d-8c6a-cf4645379313@statistik.tu-dortmund.de>
 <CAOK8EzcGv=ktad0AjtjOcQa5706WAy+zsAk3gkwOjeV-NUqPLA@mail.gmail.com>
 <CAJLyBTUoRvY7xZDVjswE_r8wsg_E0-DTS78__zi6dUmtu=yhTw@mail.gmail.com>
 <54a5e644-3d17-be4a-c0bf-082d0ea5a59f@statistik.tu-dortmund.de>
 <CAOK8EzdRYv_FtaaOA8W6shqJv6-0Ov69TMQ+eWA8=Sacj7w+Fw@mail.gmail.com>
Message-ID: <f3b12a58-2a29-d335-4f71-361bb07505ca@gmail.com>

On 07/04/2021 10:50 a.m., Andrew Dhawan wrote:
> Thank you again Uwe,
> 
> So, to clarify - is the error occurring because RankProd is not found in
> BioC 3.13 (current release is 3.12)?  If so, I'm not sure how I can fix
> this...

I suspect the only thing you could do in the short term is to remove 
that dependency (or move it to Suggests, and check for it before using). 
  If that's not feasible, then you just need to wait for it to become 
available.  Based on its status page, it shouldn't be long.  Try 
submitting again tomorrow?

Duncan Murdoch


> 
> Thanks
> Andrew
> 
> 
> On Wed, Apr 7, 2021 at 5:45 AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
> wrote:
> 
>>
>>
>> On 06.04.2021 19:26, Robert M. Flight wrote:
>>> Andrew,
>>>
>>> I think if you want to include a Bioconductor dependency, then I think
>> you
>>> add the "biocViews:" line to your description file to enable bioconductor
>>
>> Not needed for CRAN.
>>
>> You simply need to declare the dependency, but BioC 3.13 is what we
>> should use to check with R-devel and that was recetnly still pretty
>> iunstable.
>>
>> Best,
>> Uwe Ligges
>>
>>> package installation.
>>>
>>> See this answer on Bioinformatics stackexchange:
>>> https://bioinformatics.stackexchange.com/a/3375/51
>>>
>>> Hope that helps!
>>>
>>> -Robert
>>>
>>> On Tue, Apr 6, 2021 at 1:14 PM Andrew Dhawan <adhawan at qmed.ca> wrote:
>>>
>>>> Thank you both very kindly - I have addressed both notes. I am still
>>>> wondering though about the RankProd dependency error - any insight into
>>>> this?
>>>>
>>>> Thanks!
>>>> Andrew
>>>>
>>>> On Tue, Apr 6, 2021 at 11:58 AM Uwe Ligges <
>>>> ligges at statistik.tu-dortmund.de>
>>>> wrote:
>>>>
>>>>>
>>>>>
>>>>> On 06.04.2021 17:39, Patrick Giraudoux wrote:
>>>>>> I had a similar problem with intepreting "notes" in pgirmess checks.
>>>>>> Some are lethal and lead to rejection and some not (just informative
>>>>>> comments). Fortunately Uwe has been kind enough to tell me what I
>>>> missed
>>>>>> (I thought that all notes were just "informative").
>>>>>> Would it be possible to call lethal notes "errors" to keep us aware
>>>> that
>>>>>> we must really do something with them and fix what is actually a
>>>> problem?
>>>>>
>>>>> These are Notes as it may not be a serious issue or may be a false
>>>>> positive, nevertheless, we like to get clean packages to CRAN.
>>>>>
>>>>> WARNINGs and ERRORs will never be accepted.
>>>>>
>>>>> The policies clearly say that significant Notes have to be addressed.
>>>>> The only Note that is always acceptable is the CRAN maintainer Note
>>>>> about the package maintainer's address. All other Notes should be fixed
>>>>> generally or need manual attention in case of the really very few
>>>>> exceptions.
>>>>>
>>>>> Best,
>>>>> Uwe Ligges
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> Best,
>>>>>> Patrick
>>>>>>
>>>>>>
>>>>>> Le 06/04/2021 ? 17:33, Uwe Ligges a ?crit :
>>>>>>> Two Notes:
>>>>>>>
>>>>>>>
>>>>>>> Found the following (possibly) invalid URLs:
>>>>>>>    URL: http://imagemagick.org/script/download.php (moved to
>>>>>>> https://imagemagick.org/script/download.php)
>>>>>>>      From: inst/doc/vignette.html
>>>>>>>      Status: 200
>>>>>>>      Message: OK
>>>>>>>
>>>>>>>
>>>>>>> Please change http --> https, add trailing slashes, or follow moved
>>>>>>> content as appropriate.
>>>>>>>
>>>>>>> * checking LazyData ... NOTE
>>>>>>>    'LazyData' is specified without a 'data' directory
>>>>>>>
>>>>>>> Simply omit the field if you have no data.
>>>>>>>
>>>>>>> Best,
>>>>>>> Uwe Ligges
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> On 06.04.2021 16:27, Andrew Dhawan wrote:
>>>>>>>> Dear all,
>>>>>>>>
>>>>>>>> I am a bit puzzled by this error for the sigQC package being
>> uploaded
>>>>> to
>>>>>>>> CRAN. Checks on my end pass without issue. There is one error
>>>>>>>> regarding the
>>>>>>>> bioConductor dependency RankProd that comes up only on the Debian OS
>>>>>>>> when
>>>>>>>> checking. See here for further details:
>>>>>>>>
>>>>>
>>>>
>> https://win-builder.r-project.org/incoming_pretest/sigQC_0.1.22_20210406_110708/
>>>>>>>>
>>>>>>>>
>>>>>>>> I am not sure how to resolve this - it seems to me that the
>>>> dependency
>>>>>>>> *should* be available across platforms, and short of removing the
>>>>>>>> dependency (which we rely on a fair bit), I'm not sure what  we can
>>>> do.
>>>>>>>>
>>>>>>>> Any thoughts or suggestions would be massively appreciated.
>>>>>>>>
>>>>>>>> Thank you so kindly!
>>>>>>>> Andrew
>>>>>>>>
>>>>>>>>       [[alternative HTML version deleted]]
>>>>>>>>
>>>>>>>> ______________________________________________
>>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>>
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>>
>>>>>
>>>>
>>>>           [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu Apr  8 02:14:17 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 7 Apr 2021 17:14:17 -0700
Subject: [R-pkg-devel] how to address CRAN FAIL on
 r-devel-windows-x86_64-gcc10-UCRT?
In-Reply-To: <bc01010e-b9cc-b561-fc2b-b2dd5c98a706@comcast.net>
References: <916FE36D-C70F-4E00-AC87-9335B4AA5A0C@dal.ca>
 <bc01010e-b9cc-b561-fc2b-b2dd5c98a706@comcast.net>
Message-ID: <07278af2-1e19-f4bf-2df6-fb2d60d2cdfc@comcast.net>


On 4/2/21 1:08 PM, David Winsemius wrote:
>
> On 4/2/21 4:05 AM, Daniel Kelley wrote:
>> The "oce" package for oceanographic analysis is failing a check on 
>> the r-devel-windows-x86_64-gcc10-UCRT system (see
>> https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64-gcc10-UCRT/oce-00check.html). 
>> The problem seems to relate to the checking vignette outputs.
>>
>> According to 
>> https://www.r-project.org/nosvn/winutf8/ucrt3/CRAN/checks/gcc10-UCRT/README.txt, 
>> that test setup is experimental.? Does that mean that I ought to I 
>> ignore the FAIL status for this machine, perhaps checking it once in 
>> a while to see if it changes?
> Hello Daniel;
>
> I'm not speaking for CRAN. I'm another maintainer whose current status 
> page has a FAIL for that platform. But the FAIL notation is due at 
> least in part to the fact that apparently the UCRT platform is less 
> frequently run on the full CRAN package holdings. The note refers to a 
> package that was updated a few days ago. The log file however has two 
> other reports of failure relating to compiler warnings.
>
> All the other platforms passed the newer versions. There is no mention 
> of the UCRT platform at the CRAN Policies page: 
> https://cran.r-project.org/web/packages/policies.html
>
> I'm waiting to see whether the aging fortran code generates warnings 
> whenever the UCRT platform gets fired up again.


Follow-up on UCRT package checks for muhaz package. When the version 
that corrected R code errors was eventually run, it now has a status of 
"OK". Apparently the warnings about the Fortran code are not 
sufficiently worrisome. It still have an LTO link but the status page 
doesn't even consider the warnings contained therein to be worthy of 
being called warnings or notes.


-- 

David Winsemius


From roy@mende|@@ohn @end|ng |rom no@@@gov  Thu Apr  8 06:48:49 2021
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Wed, 7 Apr 2021 21:48:49 -0700
Subject: [R-pkg-devel] Checking on Debian on RHub
Message-ID: <CECC916B-ADFF-48D0-A88C-622AAF240703@noaa.gov>

Hi All:

I still have problems with checking one of my packages on RHub running Debian,  as the Preprocessing fails in building in some of the needed spatial packages.  This problem was reported quite awhile ago,  and never appears to have been completely fixed.  Is there an alternate place I can test a package under Debian that is consistent with CRAN.

Thanks,

-Roy

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Apr  8 09:22:57 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 8 Apr 2021 09:22:57 +0200
Subject: [R-pkg-devel] Checking on Debian on RHub
In-Reply-To: <CECC916B-ADFF-48D0-A88C-622AAF240703@noaa.gov>
References: <CECC916B-ADFF-48D0-A88C-622AAF240703@noaa.gov>
Message-ID: <CABtg=K=EKNu17NZDW2qH5M-+DMz_+RrL6xBMbsmW8mT=Mw+7Ew@mail.gmail.com>

Hi,

Which one is your package? Which spatial package fails? Can you link
to an issue in the issue tracker, if there is one?

As for an alternative, you can run a Docker container. This works on
Linux, Windows and macOS, on any recent enough machine. You can run
one of the R-hub containers, e.g.
https://hub.docker.com/repository/docker/rhub/debian-gcc-devel and
then try to fix the installation issue. Or you can try a bigger
container that tries to mirror CRAN exactly:
https://hub.docker.com/r/cran/debian

Gabor

On Thu, Apr 8, 2021 at 6:49 AM Roy Mendelssohn - NOAA Federal via
R-package-devel <r-package-devel at r-project.org> wrote:
>
> Hi All:
>
> I still have problems with checking one of my packages on RHub running Debian,  as the Preprocessing fails in building in some of the needed spatial packages.  This problem was reported quite awhile ago,  and never appears to have been completely fixed.  Is there an alternate place I can test a package under Debian that is consistent with CRAN.
>
> Thanks,
>
> -Roy
>
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From roy@mende|@@ohn @end|ng |rom no@@@gov  Thu Apr  8 16:35:40 2021
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Thu, 8 Apr 2021 07:35:40 -0700
Subject: [R-pkg-devel] Checking on Debian on RHub
In-Reply-To: <CABtg=K=EKNu17NZDW2qH5M-+DMz_+RrL6xBMbsmW8mT=Mw+7Ew@mail.gmail.com>
References: <CECC916B-ADFF-48D0-A88C-622AAF240703@noaa.gov>
 <CABtg=K=EKNu17NZDW2qH5M-+DMz_+RrL6xBMbsmW8mT=Mw+7Ew@mail.gmail.com>
Message-ID: <218565F1-D623-48AB-B4F9-5AFA3E4BF81A@noaa.gov>

Thanks Gabor.  I will post more information later today when I get a chance.  I actually put something on issue tracker a year or two ago,  after posting here and having suggested that I raise an issue.

I really appreciate the work going into RHub - the reason I am having this problem is I use RHub to check my submissions.  I just keep failing in my CRAN submissions on Debian while passing on Windows and Mac, sort of frustrating.

-Roy

> On Apr 8, 2021, at 12:22 AM, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> 
> Hi,
> 
> Which one is your package? Which spatial package fails? Can you link
> to an issue in the issue tracker, if there is one?
> 
> As for an alternative, you can run a Docker container. This works on
> Linux, Windows and macOS, on any recent enough machine. You can run
> one of the R-hub containers, e.g.
> https://hub.docker.com/repository/docker/rhub/debian-gcc-devel and
> then try to fix the installation issue. Or you can try a bigger
> container that tries to mirror CRAN exactly:
> https://hub.docker.com/r/cran/debian
> 
> Gabor
> 
> On Thu, Apr 8, 2021 at 6:49 AM Roy Mendelssohn - NOAA Federal via
> R-package-devel <r-package-devel at r-project.org> wrote:
>> 
>> Hi All:
>> 
>> I still have problems with checking one of my packages on RHub running Debian,  as the Preprocessing fails in building in some of the needed spatial packages.  This problem was reported quite awhile ago,  and never appears to have been completely fixed.  Is there an alternate place I can test a package under Debian that is consistent with CRAN.
>> 
>> Thanks,
>> 
>> -Roy
>> 
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
>> 
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected"
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From roy@mende|@@ohn @end|ng |rom no@@@gov  Thu Apr  8 17:58:46 2021
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Thu, 8 Apr 2021 08:58:46 -0700
Subject: [R-pkg-devel] Checking on Debian on RHub
In-Reply-To: <218565F1-D623-48AB-B4F9-5AFA3E4BF81A@noaa.gov>
References: <CECC916B-ADFF-48D0-A88C-622AAF240703@noaa.gov>
 <CABtg=K=EKNu17NZDW2qH5M-+DMz_+RrL6xBMbsmW8mT=Mw+7Ew@mail.gmail.com>
 <218565F1-D623-48AB-B4F9-5AFA3E4BF81A@noaa.gov>
Message-ID: <2CA8D539-A282-4770-9B93-DE825D44F288@noaa.gov>

My apologies, it is the Fedora instance.  Short version summary:

Warning messages:
5558#> 1: In i.p(...) : installation of package ?rgdal? had non-zero exit status
5559#> 2: In i.p(...) : installation of package ?sf? had non-zero exit status
5560#> 3: In i.p(...) :
5561#> installation of package ?plotdap? had non-zero exit status

'plotdap' depends on sf which is why it fails.  Long version is at https://builder.r-hub.io/status/rerddapXtracto_1.1.0.tar.gz-f3facfb7e282436c98dce8b5014de474

Thanks,

-Roy

> On Apr 8, 2021, at 7:35 AM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> 
> Thanks Gabor.  I will post more information later today when I get a chance.  I actually put something on issue tracker a year or two ago,  after posting here and having suggested that I raise an issue.
> 
> I really appreciate the work going into RHub - the reason I am having this problem is I use RHub to check my submissions.  I just keep failing in my CRAN submissions on Debian while passing on Windows and Mac, sort of frustrating.
> 
> -Roy
> 
>> On Apr 8, 2021, at 12:22 AM, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>> 
>> Hi,
>> 
>> Which one is your package? Which spatial package fails? Can you link
>> to an issue in the issue tracker, if there is one?
>> 
>> As for an alternative, you can run a Docker container. This works on
>> Linux, Windows and macOS, on any recent enough machine. You can run
>> one of the R-hub containers, e.g.
>> https://hub.docker.com/repository/docker/rhub/debian-gcc-devel and
>> then try to fix the installation issue. Or you can try a bigger
>> container that tries to mirror CRAN exactly:
>> https://hub.docker.com/r/cran/debian
>> 
>> Gabor
>> 
>> On Thu, Apr 8, 2021 at 6:49 AM Roy Mendelssohn - NOAA Federal via
>> R-package-devel <r-package-devel at r-project.org> wrote:
>>> 
>>> Hi All:
>>> 
>>> I still have problems with checking one of my packages on RHub running Debian,  as the Preprocessing fails in building in some of the needed spatial packages.  This problem was reported quite awhile ago,  and never appears to have been completely fixed.  Is there an alternate place I can test a package under Debian that is consistent with CRAN.
>>> 
>>> Thanks,
>>> 
>>> -Roy
>>> 
>>> **********************
>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>> **********************
>>> Roy Mendelssohn
>>> Supervisory Operations Research Analyst
>>> NOAA/NMFS
>>> Environmental Research Division
>>> Southwest Fisheries Science Center
>>> ***Note new street address***
>>> 110 McAllister Way
>>> Santa Cruz, CA 95060
>>> Phone: (831)-420-3666
>>> Fax: (831) 420-3980
>>> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
>>> 
>>> "Old age and treachery will overcome youth and skill."
>>> "From those who have been given much, much will be expected"
>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Apr  8 18:12:38 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 8 Apr 2021 18:12:38 +0200
Subject: [R-pkg-devel] Checking on Debian on RHub
In-Reply-To: <2CA8D539-A282-4770-9B93-DE825D44F288@noaa.gov>
References: <CECC916B-ADFF-48D0-A88C-622AAF240703@noaa.gov>
 <CABtg=K=EKNu17NZDW2qH5M-+DMz_+RrL6xBMbsmW8mT=Mw+7Ew@mail.gmail.com>
 <218565F1-D623-48AB-B4F9-5AFA3E4BF81A@noaa.gov>
 <2CA8D539-A282-4770-9B93-DE825D44F288@noaa.gov>
Message-ID: <CABtg=Kk+xdwrgp-mzGgRYJS1Ja-qoDSiUC23J-92iwxkGrDHBw@mail.gmail.com>

Should be fixed in e4dd4d6c240407317abb67e156d99ef738a7e73c and
88718aad52df59b7e76c2db563991558a168b05e

I haven't yet tested it, though....

G.

On Thu, Apr 8, 2021 at 5:58 PM Roy Mendelssohn - NOAA Federal
<roy.mendelssohn at noaa.gov> wrote:
>
> My apologies, it is the Fedora instance.  Short version summary:
>
> Warning messages:
> 5558#> 1: In i.p(...) : installation of package ?rgdal? had non-zero exit status
> 5559#> 2: In i.p(...) : installation of package ?sf? had non-zero exit status
> 5560#> 3: In i.p(...) :
> 5561#> installation of package ?plotdap? had non-zero exit status
>
> 'plotdap' depends on sf which is why it fails.  Long version is at https://builder.r-hub.io/status/rerddapXtracto_1.1.0.tar.gz-f3facfb7e282436c98dce8b5014de474
>
> Thanks,
>
> -Roy
>
> > On Apr 8, 2021, at 7:35 AM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> >
> > Thanks Gabor.  I will post more information later today when I get a chance.  I actually put something on issue tracker a year or two ago,  after posting here and having suggested that I raise an issue.
> >
> > I really appreciate the work going into RHub - the reason I am having this problem is I use RHub to check my submissions.  I just keep failing in my CRAN submissions on Debian while passing on Windows and Mac, sort of frustrating.
> >
> > -Roy
> >
> >> On Apr 8, 2021, at 12:22 AM, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> >>
> >> Hi,
> >>
> >> Which one is your package? Which spatial package fails? Can you link
> >> to an issue in the issue tracker, if there is one?
> >>
> >> As for an alternative, you can run a Docker container. This works on
> >> Linux, Windows and macOS, on any recent enough machine. You can run
> >> one of the R-hub containers, e.g.
> >> https://hub.docker.com/repository/docker/rhub/debian-gcc-devel and
> >> then try to fix the installation issue. Or you can try a bigger
> >> container that tries to mirror CRAN exactly:
> >> https://hub.docker.com/r/cran/debian
> >>
> >> Gabor
> >>
> >> On Thu, Apr 8, 2021 at 6:49 AM Roy Mendelssohn - NOAA Federal via
> >> R-package-devel <r-package-devel at r-project.org> wrote:
> >>>
> >>> Hi All:
> >>>
> >>> I still have problems with checking one of my packages on RHub running Debian,  as the Preprocessing fails in building in some of the needed spatial packages.  This problem was reported quite awhile ago,  and never appears to have been completely fixed.  Is there an alternate place I can test a package under Debian that is consistent with CRAN.
> >>>
> >>> Thanks,
> >>>
> >>> -Roy
> >>>
> >>> **********************
> >>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> >>> **********************
> >>> Roy Mendelssohn
> >>> Supervisory Operations Research Analyst
> >>> NOAA/NMFS
> >>> Environmental Research Division
> >>> Southwest Fisheries Science Center
> >>> ***Note new street address***
> >>> 110 McAllister Way
> >>> Santa Cruz, CA 95060
> >>> Phone: (831)-420-3666
> >>> Fax: (831) 420-3980
> >>> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> >>>
> >>> "Old age and treachery will overcome youth and skill."
> >>> "From those who have been given much, much will be expected"
> >>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > **********************
> > "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> > **********************
> > Roy Mendelssohn
> > Supervisory Operations Research Analyst
> > NOAA/NMFS
> > Environmental Research Division
> > Southwest Fisheries Science Center
> > ***Note new street address***
> > 110 McAllister Way
> > Santa Cruz, CA 95060
> > Phone: (831)-420-3666
> > Fax: (831) 420-3980
> > e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> >
> > "Old age and treachery will overcome youth and skill."
> > "From those who have been given much, much will be expected"
> > "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> >
>
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Apr  8 18:13:16 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 8 Apr 2021 18:13:16 +0200
Subject: [R-pkg-devel] Checking on Debian on RHub
In-Reply-To: <CABtg=Kk+xdwrgp-mzGgRYJS1Ja-qoDSiUC23J-92iwxkGrDHBw@mail.gmail.com>
References: <CECC916B-ADFF-48D0-A88C-622AAF240703@noaa.gov>
 <CABtg=K=EKNu17NZDW2qH5M-+DMz_+RrL6xBMbsmW8mT=Mw+7Ew@mail.gmail.com>
 <218565F1-D623-48AB-B4F9-5AFA3E4BF81A@noaa.gov>
 <2CA8D539-A282-4770-9B93-DE825D44F288@noaa.gov>
 <CABtg=Kk+xdwrgp-mzGgRYJS1Ja-qoDSiUC23J-92iwxkGrDHBw@mail.gmail.com>
Message-ID: <CABtg=KnqgO47chTyBCP6UzB4h3ww_==nekfwh1O+eFYTEmV5Yg@mail.gmail.com>

I mean, here:
https://github.com/r-hub/sysreqsdb/commit/e4dd4d6c240407317abb67e156d99ef738a7e73c
https://github.com/r-hub/sysreqsdb/commit/88718aad52df59b7e76c2db563991558a168b05e

G.

On Thu, Apr 8, 2021 at 6:12 PM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>
> Should be fixed in e4dd4d6c240407317abb67e156d99ef738a7e73c and
> 88718aad52df59b7e76c2db563991558a168b05e
>
> I haven't yet tested it, though....
>
> G.
>
> On Thu, Apr 8, 2021 at 5:58 PM Roy Mendelssohn - NOAA Federal
> <roy.mendelssohn at noaa.gov> wrote:
> >
> > My apologies, it is the Fedora instance.  Short version summary:
> >
> > Warning messages:
> > 5558#> 1: In i.p(...) : installation of package ?rgdal? had non-zero exit status
> > 5559#> 2: In i.p(...) : installation of package ?sf? had non-zero exit status
> > 5560#> 3: In i.p(...) :
> > 5561#> installation of package ?plotdap? had non-zero exit status
> >
> > 'plotdap' depends on sf which is why it fails.  Long version is at https://builder.r-hub.io/status/rerddapXtracto_1.1.0.tar.gz-f3facfb7e282436c98dce8b5014de474
> >
> > Thanks,
> >
> > -Roy
> >
> > > On Apr 8, 2021, at 7:35 AM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> > >
> > > Thanks Gabor.  I will post more information later today when I get a chance.  I actually put something on issue tracker a year or two ago,  after posting here and having suggested that I raise an issue.
> > >
> > > I really appreciate the work going into RHub - the reason I am having this problem is I use RHub to check my submissions.  I just keep failing in my CRAN submissions on Debian while passing on Windows and Mac, sort of frustrating.
> > >
> > > -Roy
> > >
> > >> On Apr 8, 2021, at 12:22 AM, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> > >>
> > >> Hi,
> > >>
> > >> Which one is your package? Which spatial package fails? Can you link
> > >> to an issue in the issue tracker, if there is one?
> > >>
> > >> As for an alternative, you can run a Docker container. This works on
> > >> Linux, Windows and macOS, on any recent enough machine. You can run
> > >> one of the R-hub containers, e.g.
> > >> https://hub.docker.com/repository/docker/rhub/debian-gcc-devel and
> > >> then try to fix the installation issue. Or you can try a bigger
> > >> container that tries to mirror CRAN exactly:
> > >> https://hub.docker.com/r/cran/debian
> > >>
> > >> Gabor
> > >>
> > >> On Thu, Apr 8, 2021 at 6:49 AM Roy Mendelssohn - NOAA Federal via
> > >> R-package-devel <r-package-devel at r-project.org> wrote:
> > >>>
> > >>> Hi All:
> > >>>
> > >>> I still have problems with checking one of my packages on RHub running Debian,  as the Preprocessing fails in building in some of the needed spatial packages.  This problem was reported quite awhile ago,  and never appears to have been completely fixed.  Is there an alternate place I can test a package under Debian that is consistent with CRAN.
> > >>>
> > >>> Thanks,
> > >>>
> > >>> -Roy
> > >>>
> > >>> **********************
> > >>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> > >>> **********************
> > >>> Roy Mendelssohn
> > >>> Supervisory Operations Research Analyst
> > >>> NOAA/NMFS
> > >>> Environmental Research Division
> > >>> Southwest Fisheries Science Center
> > >>> ***Note new street address***
> > >>> 110 McAllister Way
> > >>> Santa Cruz, CA 95060
> > >>> Phone: (831)-420-3666
> > >>> Fax: (831) 420-3980
> > >>> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> > >>>
> > >>> "Old age and treachery will overcome youth and skill."
> > >>> "From those who have been given much, much will be expected"
> > >>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> > >>>
> > >>> ______________________________________________
> > >>> R-package-devel at r-project.org mailing list
> > >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> > > **********************
> > > "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> > > **********************
> > > Roy Mendelssohn
> > > Supervisory Operations Research Analyst
> > > NOAA/NMFS
> > > Environmental Research Division
> > > Southwest Fisheries Science Center
> > > ***Note new street address***
> > > 110 McAllister Way
> > > Santa Cruz, CA 95060
> > > Phone: (831)-420-3666
> > > Fax: (831) 420-3980
> > > e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> > >
> > > "Old age and treachery will overcome youth and skill."
> > > "From those who have been given much, much will be expected"
> > > "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> > >
> >
> > **********************
> > "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> > **********************
> > Roy Mendelssohn
> > Supervisory Operations Research Analyst
> > NOAA/NMFS
> > Environmental Research Division
> > Southwest Fisheries Science Center
> > ***Note new street address***
> > 110 McAllister Way
> > Santa Cruz, CA 95060
> > Phone: (831)-420-3666
> > Fax: (831) 420-3980
> > e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> >
> > "Old age and treachery will overcome youth and skill."
> > "From those who have been given much, much will be expected"
> > "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> >


From conn|e @end|ng |rom @ggreg@te-gen|u@@com  Thu Apr  8 21:39:20 2021
From: conn|e @end|ng |rom @ggreg@te-gen|u@@com (Dr. Connie Brett)
Date: Thu, 8 Apr 2021 12:39:20 -0700
Subject: [R-pkg-devel] Package Vignette depends on Ensembl,
 server certificate issue?
Message-ID: <6791A218-1632-49B0-B4CE-33E9306B9EA8@aggregate-genius.com>

Hello,
I have a package (DGEobj) that depends on the Ensembl service to look up information used to build the vignette.  My builds work fine on Travis, locally and on R-hub.  Occasionally I have seen blips with regard to internet-based resources not being available, and my vignette depends on a number of internet resources to get example datasets.  However when I submitted my package to CRAN today the failures Windows and Debian were that the server certificate verification failed ( SSL certificate problem: unable to get local issuer certificate).
I?m not sure if there is something I can do about this or if this is considered a "false positive" per the email - it seems like a "wait and retry" issue.  I don?t want to be rude uploading the package again without a change or erroneously emailing in response to the rejection. 
How should this be handled properly now and into the future?  It isn?t feasible to not use Ensembl for this vignette.
Thanks for your insight and feedback!

Flavor: r-devel-windows-ix86+x86_64
Check: re-building of vignette outputs, Result: WARNING
 Error(s) in re-building vignettes:
 --- re-building 'DGEobj_Overview.Rmd' using rmarkdown

 Ensembl site unresponsive, trying asia mirror
 Quitting from lines 259-280 (DGEobj_Overview.Rmd) 
 Error: processing vignette 'DGEobj_Overview.Rmd' failed with diagnostics:
 SSL certificate problem: unable to get local issuer certificate
 --- failed re-building 'DGEobj_Overview.Rmd'

 SUMMARY: processing the following file failed:
   'DGEobj_Overview.Rmd'

 Error: Vignette re-building failed.
 Execution halted


Flavor: r-devel-linux-x86_64-debian-gcc
Check: re-building of vignette outputs, Result: WARNING
 Error(s) in re-building vignettes:
 --- re-building 'DGEobj_Overview.Rmd' using rmarkdown

 Ensembl site unresponsive, trying asia mirror
 Quitting from lines 235-256 (DGEobj_Overview.Rmd) 
 Error: processing vignette 'DGEobj_Overview.Rmd' failed with diagnostics:
 server certificate verification failed. CAfile: none CRLfile: none
 --- failed re-building 'DGEobj_Overview.Rmd'

 SUMMARY: processing the following file failed:
   'DGEobj_Overview.Rmd'

 Error: Vignette re-building failed.
 Execution halted
	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Apr  9 09:14:38 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 09 Apr 2021 00:14:38 -0700
Subject: [R-pkg-devel] Package Vignette depends on Ensembl,
 server certificate issue?
In-Reply-To: <6791A218-1632-49B0-B4CE-33E9306B9EA8@aggregate-genius.com>
References: <6791A218-1632-49B0-B4CE-33E9306B9EA8@aggregate-genius.com>
Message-ID: <0EA40466-1242-4B1C-A69A-6DC6EB6CF5CE@dcn.davis.ca.us>

Maybe use r.rsp?

https://blog.r-hub.io/2020/06/03/vignettes/
How to include my pre-print / cheatsheet as a PDF vignette?



On April 8, 2021 12:39:20 PM PDT, "Dr. Connie Brett" <connie at aggregate-genius.com> wrote:
>Hello,
>I have a package (DGEobj) that depends on the Ensembl service to look
>up information used to build the vignette.  My builds work fine on
>Travis, locally and on R-hub.  Occasionally I have seen blips with
>regard to internet-based resources not being available, and my vignette
>depends on a number of internet resources to get example datasets. 
>However when I submitted my package to CRAN today the failures Windows
>and Debian were that the server certificate verification failed ( SSL
>certificate problem: unable to get local issuer certificate).
>I?m not sure if there is something I can do about this or if this is
>considered a "false positive" per the email - it seems like a "wait and
>retry" issue.  I don?t want to be rude uploading the package again
>without a change or erroneously emailing in response to the rejection. 
>How should this be handled properly now and into the future?  It isn?t
>feasible to not use Ensembl for this vignette.
>Thanks for your insight and feedback!
>
>Flavor: r-devel-windows-ix86+x86_64
>Check: re-building of vignette outputs, Result: WARNING
> Error(s) in re-building vignettes:
> --- re-building 'DGEobj_Overview.Rmd' using rmarkdown
>
> Ensembl site unresponsive, trying asia mirror
> Quitting from lines 259-280 (DGEobj_Overview.Rmd) 
>Error: processing vignette 'DGEobj_Overview.Rmd' failed with
>diagnostics:
> SSL certificate problem: unable to get local issuer certificate
> --- failed re-building 'DGEobj_Overview.Rmd'
>
> SUMMARY: processing the following file failed:
>   'DGEobj_Overview.Rmd'
>
> Error: Vignette re-building failed.
> Execution halted
>
>
>Flavor: r-devel-linux-x86_64-debian-gcc
>Check: re-building of vignette outputs, Result: WARNING
> Error(s) in re-building vignettes:
> --- re-building 'DGEobj_Overview.Rmd' using rmarkdown
>
> Ensembl site unresponsive, trying asia mirror
> Quitting from lines 235-256 (DGEobj_Overview.Rmd) 
>Error: processing vignette 'DGEobj_Overview.Rmd' failed with
>diagnostics:
> server certificate verification failed. CAfile: none CRLfile: none
> --- failed re-building 'DGEobj_Overview.Rmd'
>
> SUMMARY: processing the following file failed:
>   'DGEobj_Overview.Rmd'
>
> Error: Vignette re-building failed.
> Execution halted
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From |kry|ov @end|ng |rom |@@er@chem@m@u@ru  Fri Apr  9 11:11:53 2021
From: |kry|ov @end|ng |rom |@@er@chem@m@u@ru (Ivan Krylov)
Date: Fri, 9 Apr 2021 12:11:53 +0300
Subject: [R-pkg-devel] Debugging M1mac problems [solved]
In-Reply-To: <20210327172616.0a16ed30@Tarkus>
References: <20210327172616.0a16ed30@Tarkus>
Message-ID: <20210409121153.39f28ce9@Tarkus>

On Sat, 27 Mar 2021 17:26:16 +0300
Ivan Krylov <ikrylov at laser.chem.msu.ru> wrote:

> I'm probably doing something stupid with the file names that usually
> works but isn't guaranteed to work in all cases, but I cannot figure
> it out.

Long story short, the problem turned out to be that I called basename()
and dirname() on paths not guaranteed to exist. Thanks to Tomas
Kalibera for pointing me in the right direction!

I'd wager a guess that I would have reproduced the same issue on an
Intel macOS machine with Big Sur installed (this being the other main
difference between Intel/High Sierra machines where all tests passed
and the M1/Big Sur machine where they failed). The "package check
results" page now shows all "OK" for the updated version, so I must
have fixed it.

I guess the moral of the story is that sometimes, it's easier to fix a
problem than reproduce it for oneself.

-- 
Best,
Ivan


From R@R@E@J@n@@en-10 @end|ng |rom umcutrecht@n|  Fri Apr  9 10:26:52 2021
From: R@R@E@J@n@@en-10 @end|ng |rom umcutrecht@n| (Janssen-10, R.R.E. (Roel))
Date: Fri, 9 Apr 2021 08:26:52 +0000
Subject: [R-pkg-devel] Problem with building with libcurl on Windows
Message-ID: <defcdd886d3b41b597af2946ebad81e4@umcutrecht.nl>

Dear all,


The package I've tried to submit uses HTSlib, which in turn uses libcurl.  >From the build logs, I think there is a version mismatch, or configuration problem with libcurl:

https://win-builder.r-project.org/incoming_pretest/USCDtools_0.0.1_20210409_093124/Windows/00install.out

The problem seems to boil down to:
<https://win-builder.r-project.org/incoming_pretest/USCDtools_0.0.1_20210409_093124/Windows/00install.out>

undefined reference to `_imp__CertEnumCertificatesInStore at 8'

Can I do anything about it in my package?

Kind regards,
Roel Janssen


------------------------------------------------------------------------------

De informatie opgenomen in dit bericht kan vertrouwelijk zijn en is
uitsluitend bestemd voor de geadresseerde. Indien u dit bericht onterecht
ontvangt, wordt u verzocht de inhoud niet te gebruiken en de afzender direct
te informeren door het bericht te retourneren. Het Universitair Medisch
Centrum Utrecht is een publiekrechtelijke rechtspersoon in de zin van de W.H.W.
(Wet Hoger Onderwijs en Wetenschappelijk Onderzoek) en staat geregistreerd bij
de Kamer van Koophandel voor Midden-Nederland onder nr. 30244197.

Denk s.v.p aan het milieu voor u deze e-mail afdrukt.

------------------------------------------------------------------------------

This message may contain confidential information and is...{{dropped:14}}


From conn|e @end|ng |rom @ggreg@te-gen|u@@com  Fri Apr  9 20:01:35 2021
From: conn|e @end|ng |rom @ggreg@te-gen|u@@com (Dr. Connie Brett)
Date: Fri, 9 Apr 2021 11:01:35 -0700
Subject: [R-pkg-devel] Package Vignette depends on Ensembl,
 server certificate issue?
In-Reply-To: <0EA40466-1242-4B1C-A69A-6DC6EB6CF5CE@dcn.davis.ca.us>
References: <6791A218-1632-49B0-B4CE-33E9306B9EA8@aggregate-genius.com>
 <0EA40466-1242-4B1C-A69A-6DC6EB6CF5CE@dcn.davis.ca.us>
Message-ID: <1E33246B-230F-4E59-9E0C-DE96AA16839E@aggregate-genius.com>

Thank you for pointing me to this resource, works like a charm!

> On Apr 9, 2021, at 12:14 AM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> Maybe use r.rsp?
> 
> https://blog.r-hub.io/2020/06/03/vignettes/
> How to include my pre-print / cheatsheet as a PDF vignette?
> 
> 
> 
> On April 8, 2021 12:39:20 PM PDT, "Dr. Connie Brett" <connie at aggregate-genius.com> wrote:
>> Hello,
>> I have a package (DGEobj) that depends on the Ensembl service to look
>> up information used to build the vignette.  My builds work fine on
>> Travis, locally and on R-hub.  Occasionally I have seen blips with
>> regard to internet-based resources not being available, and my vignette
>> depends on a number of internet resources to get example datasets. 
>> However when I submitted my package to CRAN today the failures Windows
>> and Debian were that the server certificate verification failed ( SSL
>> certificate problem: unable to get local issuer certificate).
>> I?m not sure if there is something I can do about this or if this is
>> considered a "false positive" per the email - it seems like a "wait and
>> retry" issue.  I don?t want to be rude uploading the package again
>> without a change or erroneously emailing in response to the rejection. 
>> How should this be handled properly now and into the future?  It isn?t
>> feasible to not use Ensembl for this vignette.
>> Thanks for your insight and feedback!
>> 
>> Flavor: r-devel-windows-ix86+x86_64
>> Check: re-building of vignette outputs, Result: WARNING
>> Error(s) in re-building vignettes:
>> --- re-building 'DGEobj_Overview.Rmd' using rmarkdown
>> 
>> Ensembl site unresponsive, trying asia mirror
>> Quitting from lines 259-280 (DGEobj_Overview.Rmd) 
>> Error: processing vignette 'DGEobj_Overview.Rmd' failed with
>> diagnostics:
>> SSL certificate problem: unable to get local issuer certificate
>> --- failed re-building 'DGEobj_Overview.Rmd'
>> 
>> SUMMARY: processing the following file failed:
>>  'DGEobj_Overview.Rmd'
>> 
>> Error: Vignette re-building failed.
>> Execution halted
>> 
>> 
>> Flavor: r-devel-linux-x86_64-debian-gcc
>> Check: re-building of vignette outputs, Result: WARNING
>> Error(s) in re-building vignettes:
>> --- re-building 'DGEobj_Overview.Rmd' using rmarkdown
>> 
>> Ensembl site unresponsive, trying asia mirror
>> Quitting from lines 235-256 (DGEobj_Overview.Rmd) 
>> Error: processing vignette 'DGEobj_Overview.Rmd' failed with
>> diagnostics:
>> server certificate verification failed. CAfile: none CRLfile: none
>> --- failed re-building 'DGEobj_Overview.Rmd'
>> 
>> SUMMARY: processing the following file failed:
>>  'DGEobj_Overview.Rmd'
>> 
>> Error: Vignette re-building failed.
>> Execution halted
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> -- 
> Sent from my phone. Please excuse my brevity.


From roy@mende|@@ohn @end|ng |rom no@@@gov  Fri Apr  9 21:02:06 2021
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Fri, 9 Apr 2021 12:02:06 -0700
Subject: [R-pkg-devel] CRAN nightly tests
Message-ID: <757E575C-1B69-4889-A0C8-6D99B7697563@noaa.gov>

Just trying to get some information about the CRAN nightly tests.  Are all the tests for a particular package run a the same time?  If not,  is there any way to determine when a particular test was last run (there is a time at the top of the page,  but it may or may not apply to all of the OSes).  Also can I get the IP address of the the machine that runs the Solaris test?  I am befuddled that the Solaris test can not access our server at all.  We did have to block a number of IP addresses recently,  my concerned is that th Solaris test machine may hav been blocked.

Thanks,

-Roy



**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sat Apr 10 01:23:46 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sat, 10 Apr 2021 01:23:46 +0200
Subject: [R-pkg-devel] CRAN nightly tests
In-Reply-To: <757E575C-1B69-4889-A0C8-6D99B7697563@noaa.gov>
References: <757E575C-1B69-4889-A0C8-6D99B7697563@noaa.gov>
Message-ID: <dc771367-3a2f-8f91-ec0f-ac99820b1cfb@statistik.tu-dortmund.de>



On 09.04.2021 21:02, Roy Mendelssohn - NOAA Federal via R-package-devel 
wrote:
> Just trying to get some information about the CRAN nightly tests.  Are all the tests for a particular package run a the same time?  

No.

> If not,  is there any way to determine when a particular test was last run (there is a time at the top of the page,  but it may or may not apply to all of the OSes).  

No.


Also can I get the IP address of the the machine that runs the Solaris 
test?  I am befuddled that the Solaris test can not access our server at 
all.  We did have to block a number of IP addresses recently,  my 
concerned is that th Solaris test machine may hav been blocked.


The list does not know. Even the CRAN team does not know the IP address. 
Professor Ripley runs that machine, so you may ask him via 
CRAN at R-project.org.

Best,
Uwe Ligges

> Thanks,
> 
> -Roy
> 
> 
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sat Apr 10 01:26:23 2021
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Fri, 9 Apr 2021 16:26:23 -0700
Subject: [R-pkg-devel] CRAN nightly tests
In-Reply-To: <dc771367-3a2f-8f91-ec0f-ac99820b1cfb@statistik.tu-dortmund.de>
References: <757E575C-1B69-4889-A0C8-6D99B7697563@noaa.gov>
 <dc771367-3a2f-8f91-ec0f-ac99820b1cfb@statistik.tu-dortmund.de>
Message-ID: <C6229F37-C54B-4559-88BE-8C6183B569E6@noaa.gov>

Thanks.    Will do so,

-Roy

> On Apr 9, 2021, at 4:23 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> 
> 
> On 09.04.2021 21:02, Roy Mendelssohn - NOAA Federal via R-package-devel wrote:
>> Just trying to get some information about the CRAN nightly tests.  Are all the tests for a particular package run a the same time?  
> 
> No.
> 
>> If not,  is there any way to determine when a particular test was last run (there is a time at the top of the page,  but it may or may not apply to all of the OSes).  
> 
> No.
> 
> 
> Also can I get the IP address of the the machine that runs the Solaris test?  I am befuddled that the Solaris test can not access our server at all.  We did have to block a number of IP addresses recently,  my concerned is that th Solaris test machine may hav been blocked.
> 
> 
> The list does not know. Even the CRAN team does not know the IP address. Professor Ripley runs that machine, so you may ask him via CRAN at R-project.org.
> 
> Best,
> Uwe Ligges
> 
>> Thanks,
>> -Roy
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected"
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From chr|@ho|d @end|ng |rom p@yctc@org  Sat Apr 10 21:28:02 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Sat, 10 Apr 2021 20:28:02 +0100 (BST)
Subject: [R-pkg-devel] Advice on identifying parsing failures with examples
 when trying to pkgdown my package
Message-ID: <1519420434.4858511.1618082882884.JavaMail.zimbra@psyctc.org>

My beginner package https://github.com/cpsyctc/CECPfuns is evolving slowly and I had no problems (that I could see)
with the help pages created through roxygen.  Today I came back to try using pkgdown to ... pkgdown the package.  
So I used a copy of the package directory and ran:

usethis::use_pkgdown()

and then

pkgdown::build_site()

That produced the start of exactly what I wanted as a nicely pkgdown'ed site.  However, the console showed error 
messages for three examples (which, as I say, all seem to produce OK html help pages through the usual roxygen 
processing).  The error message was

   Failed to parse example for topic 

and sure enough the examples section in the pkgdown docs html was empty.  If anyone wants to look at one of
the functions, checkAllUnique was one of the three that threw the errors.

I tried some searching and the most pertinent seeming page I hit was this:

   https://github.com/r-lib/pkgdown/issues/1149

where Hadley Wickham says "That's not valid .Rd code because you didn't escape the Rd comment symbol" which may
well be my problem too ... but I don't understand the advice (sorry!)

When I tried to tweak one of those functions by inserting a lot of "#" to mask results, i.e. replaced

#' [1] something

with:

#' # [1] something

(as I probably should have done that in the examples I have, they are dontrun examples so I hadn't noticed).

However, when I reran pkgdown::build_site() I got a new error message that is, to me, thoroughly confusing:

Error in utils::modifyList(meta, override) : is.list(x) is not TRUE

At that point I decided to back out and come here and ask the question in the subject line!

TIA,


Chris

-- 
Chris Evans (he/him) <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Apr 10 22:01:03 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 10 Apr 2021 16:01:03 -0400
Subject: [R-pkg-devel] 
 Advice on identifying parsing failures with examples
 when trying to pkgdown my package
In-Reply-To: <1519420434.4858511.1618082882884.JavaMail.zimbra@psyctc.org>
References: <1519420434.4858511.1618082882884.JavaMail.zimbra@psyctc.org>
Message-ID: <b60bff7e-d094-87eb-fbfe-90daa21ae776@gmail.com>

On 10/04/2021 3:28 p.m., Chris Evans wrote:
> My beginner package https://github.com/cpsyctc/CECPfuns is evolving slowly and I had no problems (that I could see)
> with the help pages created through roxygen.  Today I came back to try using pkgdown to ... pkgdown the package.
> So I used a copy of the package directory and ran:
> 
> usethis::use_pkgdown()
> 
> and then
> 
> pkgdown::build_site()
> 
> That produced the start of exactly what I wanted as a nicely pkgdown'ed site.  However, the console showed error
> messages for three examples (which, as I say, all seem to produce OK html help pages through the usual roxygen
> processing).  The error message was
> 
>     Failed to parse example for topic
> 
> and sure enough the examples section in the pkgdown docs html was empty.  If anyone wants to look at one of
> the functions, checkAllUnique was one of the three that threw the errors.
> 
> I tried some searching and the most pertinent seeming page I hit was this:
> 
>     https://github.com/r-lib/pkgdown/issues/1149
> 
> where Hadley Wickham says "That's not valid .Rd code because you didn't escape the Rd comment symbol" which may
> well be my problem too ... but I don't understand the advice (sorry!)

In Example code, % needs to be escaped, or it will be interpreted as a 
comment.  Sometimes that means the examples just compute the wrong 
thing, e.g.

A %*% b

is parsed as A when the rest of the line is ignored as a comment. 
Sometimes it makes the code illegal.  I don't know which you're seeing.

> 
> When I tried to tweak one of those functions by inserting a lot of "#" to mask results, i.e. replaced
> 
> #' [1] something
> 
> with:
> 
> #' # [1] something
> 
> (as I probably should have done that in the examples I have, they are dontrun examples so I hadn't noticed).

pkgdown tries to parse \dontrun examples, so this was a good thing, but 
I think you missed some:  e.g. in checkAllUnique.Rd, I see this around 
lines 55-60:

\examples{
\dontrun{
### letters gets us the 26 lower case letters of the English alphabet so 
should test OK
checkAllUnique(letters)
[1] TRUE
### good!

That line containing TRUE is not legal R code, so should be commented. 
You can find these one by one by copying the text from the Rd example 
section into a file, and trying to parse that file, e.g.

Put this in "test.R":

   ### letters gets us the 26 lower case letters of the English alphabet 
so should test OK
   checkAllUnique(letters)
   [1] TRUE
   ### good!

then run parse("test.R"):

Error in parse("test.R") : test.R:3:1: unexpected '['
2: checkAllUnique(letters)
3: [
    ^

You can do it for a file at a time by loading the test.R file into 
RStudio; it'll put markers beside each syntax error.  Unfortunately, it 
thinks

checkAllUnique(tmpTib \%>\% pull(1))

is a syntax error:  those escapes are required in Rd, but are illegal in R.

I don't know if there's a way to do it directly from the Roxygen source.

Duncan Murdoch

> 
> However, when I reran pkgdown::build_site() I got a new error message that is, to me, thoroughly confusing:
> 
> Error in utils::modifyList(meta, override) : is.list(x) is not TRUE
> 
> At that point I decided to back out and come here and ask the question in the subject line!


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Apr 10 22:20:40 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 10 Apr 2021 16:20:40 -0400
Subject: [R-pkg-devel] 
 Advice on identifying parsing failures with examples
 when trying to pkgdown my package
In-Reply-To: <b60bff7e-d094-87eb-fbfe-90daa21ae776@gmail.com>
References: <1519420434.4858511.1618082882884.JavaMail.zimbra@psyctc.org>
 <b60bff7e-d094-87eb-fbfe-90daa21ae776@gmail.com>
Message-ID: <93485a83-6af3-708c-a534-48f5cdb231dd@gmail.com>

Here's a better way to do the file-at-a-time check:

Load the .Rd file in RStudio, and click on Preview.  Copy the whole 
examples section to a test.R file.  RStudio will mark all the syntax 
errors, but won't be fooled by the \% escapes, since the Preview handled 
them.

Duncan Murdoch

On 10/04/2021 4:01 p.m., Duncan Murdoch wrote:
> On 10/04/2021 3:28 p.m., Chris Evans wrote:
>> My beginner package https://github.com/cpsyctc/CECPfuns is evolving slowly and I had no problems (that I could see)
>> with the help pages created through roxygen.  Today I came back to try using pkgdown to ... pkgdown the package.
>> So I used a copy of the package directory and ran:
>>
>> usethis::use_pkgdown()
>>
>> and then
>>
>> pkgdown::build_site()
>>
>> That produced the start of exactly what I wanted as a nicely pkgdown'ed site.  However, the console showed error
>> messages for three examples (which, as I say, all seem to produce OK html help pages through the usual roxygen
>> processing).  The error message was
>>
>>      Failed to parse example for topic
>>
>> and sure enough the examples section in the pkgdown docs html was empty.  If anyone wants to look at one of
>> the functions, checkAllUnique was one of the three that threw the errors.
>>
>> I tried some searching and the most pertinent seeming page I hit was this:
>>
>>      https://github.com/r-lib/pkgdown/issues/1149
>>
>> where Hadley Wickham says "That's not valid .Rd code because you didn't escape the Rd comment symbol" which may
>> well be my problem too ... but I don't understand the advice (sorry!)
> 
> In Example code, % needs to be escaped, or it will be interpreted as a
> comment.  Sometimes that means the examples just compute the wrong
> thing, e.g.
> 
> A %*% b
> 
> is parsed as A when the rest of the line is ignored as a comment.
> Sometimes it makes the code illegal.  I don't know which you're seeing.
> 
>>
>> When I tried to tweak one of those functions by inserting a lot of "#" to mask results, i.e. replaced
>>
>> #' [1] something
>>
>> with:
>>
>> #' # [1] something
>>
>> (as I probably should have done that in the examples I have, they are dontrun examples so I hadn't noticed).
> 
> pkgdown tries to parse \dontrun examples, so this was a good thing, but
> I think you missed some:  e.g. in checkAllUnique.Rd, I see this around
> lines 55-60:
> 
> \examples{
> \dontrun{
> ### letters gets us the 26 lower case letters of the English alphabet so
> should test OK
> checkAllUnique(letters)
> [1] TRUE
> ### good!
> 
> That line containing TRUE is not legal R code, so should be commented.
> You can find these one by one by copying the text from the Rd example
> section into a file, and trying to parse that file, e.g.
> 
> Put this in "test.R":
> 
>     ### letters gets us the 26 lower case letters of the English alphabet
> so should test OK
>     checkAllUnique(letters)
>     [1] TRUE
>     ### good!
> 
> then run parse("test.R"):
> 
> Error in parse("test.R") : test.R:3:1: unexpected '['
> 2: checkAllUnique(letters)
> 3: [
>      ^
> 
> You can do it for a file at a time by loading the test.R file into
> RStudio; it'll put markers beside each syntax error.  Unfortunately, it
> thinks
> 
> checkAllUnique(tmpTib \%>\% pull(1))
> 
> is a syntax error:  those escapes are required in Rd, but are illegal in R.
> 
> I don't know if there's a way to do it directly from the Roxygen source.
> 
> Duncan Murdoch
> 
>>
>> However, when I reran pkgdown::build_site() I got a new error message that is, to me, thoroughly confusing:
>>
>> Error in utils::modifyList(meta, override) : is.list(x) is not TRUE
>>
>> At that point I decided to back out and come here and ask the question in the subject line!
> 
>


From chr|@ho|d @end|ng |rom p@yctc@org  Sat Apr 10 22:23:54 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Sat, 10 Apr 2021 21:23:54 +0100 (BST)
Subject: [R-pkg-devel] 
 Advice on identifying parsing failures with examples
 when trying to pkgdown my package
In-Reply-To: <93485a83-6af3-708c-a534-48f5cdb231dd@gmail.com>
References: <1519420434.4858511.1618082882884.JavaMail.zimbra@psyctc.org>
 <b60bff7e-d094-87eb-fbfe-90daa21ae776@gmail.com>
 <93485a83-6af3-708c-a534-48f5cdb231dd@gmail.com>
Message-ID: <181682423.4874130.1618086234094.JavaMail.zimbra@psyctc.org>

Brilliant: exactly what I needed.  I see a happy hour tomorrow morning sorting those.

Many thanks (again) Duncan and very best to all here!

Chris

----- Original Message -----
> From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
> To: "Chris Evans" <chrishold at psyctc.org>, "r-package-devel" <r-package-devel at r-project.org>
> Sent: Saturday, 10 April, 2021 21:20:40
> Subject: Re: [R-pkg-devel] Advice on identifying parsing failures with examples when trying to pkgdown my package

> Here's a better way to do the file-at-a-time check:
> 
> Load the .Rd file in RStudio, and click on Preview.  Copy the whole
> examples section to a test.R file.  RStudio will mark all the syntax
> errors, but won't be fooled by the \% escapes, since the Preview handled
> them.
> 
> Duncan Murdoch
> 
> On 10/04/2021 4:01 p.m., Duncan Murdoch wrote:
>> On 10/04/2021 3:28 p.m., Chris Evans wrote:
>>> My beginner package https://github.com/cpsyctc/CECPfuns is evolving slowly and I
>>> had no problems (that I could see)
>>> with the help pages created through roxygen.  Today I came back to try using
>>> pkgdown to ... pkgdown the package.
>>> So I used a copy of the package directory and ran:
>>>
>>> usethis::use_pkgdown()
>>>
>>> and then
>>>
>>> pkgdown::build_site()
>>>
>>> That produced the start of exactly what I wanted as a nicely pkgdown'ed site.
>>> However, the console showed error
>>> messages for three examples (which, as I say, all seem to produce OK html help
>>> pages through the usual roxygen
>>> processing).  The error message was
>>>
>>>      Failed to parse example for topic
>>>
>>> and sure enough the examples section in the pkgdown docs html was empty.  If
>>> anyone wants to look at one of
>>> the functions, checkAllUnique was one of the three that threw the errors.
>>>
>>> I tried some searching and the most pertinent seeming page I hit was this:
>>>
>>>      https://github.com/r-lib/pkgdown/issues/1149
>>>
>>> where Hadley Wickham says "That's not valid .Rd code because you didn't escape
>>> the Rd comment symbol" which may
>>> well be my problem too ... but I don't understand the advice (sorry!)
>> 
>> In Example code, % needs to be escaped, or it will be interpreted as a
>> comment.  Sometimes that means the examples just compute the wrong
>> thing, e.g.
>> 
>> A %*% b
>> 
>> is parsed as A when the rest of the line is ignored as a comment.
>> Sometimes it makes the code illegal.  I don't know which you're seeing.
>> 
>>>
>>> When I tried to tweak one of those functions by inserting a lot of "#" to mask
>>> results, i.e. replaced
>>>
>>> #' [1] something
>>>
>>> with:
>>>
>>> #' # [1] something
>>>
>>> (as I probably should have done that in the examples I have, they are dontrun
>>> examples so I hadn't noticed).
>> 
>> pkgdown tries to parse \dontrun examples, so this was a good thing, but
>> I think you missed some:  e.g. in checkAllUnique.Rd, I see this around
>> lines 55-60:
>> 
>> \examples{
>> \dontrun{
>> ### letters gets us the 26 lower case letters of the English alphabet so
>> should test OK
>> checkAllUnique(letters)
>> [1] TRUE
>> ### good!
>> 
>> That line containing TRUE is not legal R code, so should be commented.
>> You can find these one by one by copying the text from the Rd example
>> section into a file, and trying to parse that file, e.g.
>> 
>> Put this in "test.R":
>> 
>>     ### letters gets us the 26 lower case letters of the English alphabet
>> so should test OK
>>     checkAllUnique(letters)
>>     [1] TRUE
>>     ### good!
>> 
>> then run parse("test.R"):
>> 
>> Error in parse("test.R") : test.R:3:1: unexpected '['
>> 2: checkAllUnique(letters)
>> 3: [
>>      ^
>> 
>> You can do it for a file at a time by loading the test.R file into
>> RStudio; it'll put markers beside each syntax error.  Unfortunately, it
>> thinks
>> 
>> checkAllUnique(tmpTib \%>\% pull(1))
>> 
>> is a syntax error:  those escapes are required in Rd, but are illegal in R.
>> 
>> I don't know if there's a way to do it directly from the Roxygen source.
>> 
>> Duncan Murdoch
>> 
>>>
>>> However, when I reran pkgdown::build_site() I got a new error message that is,
>>> to me, thoroughly confusing:
>>>
>>> Error in utils::modifyList(meta, override) : is.list(x) is not TRUE
>>>
>>> At that point I decided to back out and come here and ask the question in the
>>> subject line!
>> 

-- 
Chris Evans (he/him) <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From chr|@ho|d @end|ng |rom p@yctc@org  Sun Apr 11 14:08:09 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Sun, 11 Apr 2021 13:08:09 +0100 (BST)
Subject: [R-pkg-devel] 
 Advice on identifying parsing failures with examples
 when trying to pkgdown my package
In-Reply-To: <93485a83-6af3-708c-a534-48f5cdb231dd@gmail.com>
References: <1519420434.4858511.1618082882884.JavaMail.zimbra@psyctc.org>
 <b60bff7e-d094-87eb-fbfe-90daa21ae776@gmail.com>
 <93485a83-6af3-708c-a534-48f5cdb231dd@gmail.com>
Message-ID: <771796712.5089260.1618142889417.JavaMail.zimbra@psyctc.org>

Just a quick follow-up on this to have a clarification in the thread.  Duncan's suggestions put me straight 
but it seems that at least in my current set up (Rstudio 1.4.1103, R 4.0.5 on Ubuntu 20.04) the preview 
of the Rd file doesn't remove the "\" escapes if I put them into the Roxygen code examples.  However, it also 
seems that if I leave "%>%" as is there (and sort out my other messes that Duncan pointed out!) that 
everything goes fine so I now I have very pleasing (at least to me!) pkgdown site for my package at
https://cecpfuns.psyctc.org.  

At times the learning curve involved in developing the package has seemed tough but, with help from this list,
it is really starting to feel useful, and I'm sure that it was absolutely the right thing to do.

Very best all,

Chris

----- Original Message -----
> From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
> To: "Chris Evans" <chrishold at psyctc.org>, "r-package-devel" <r-package-devel at r-project.org>
> Sent: Saturday, 10 April, 2021 21:20:40
> Subject: Re: [R-pkg-devel] Advice on identifying parsing failures with examples when trying to pkgdown my package

> Here's a better way to do the file-at-a-time check:
> 
> Load the .Rd file in RStudio, and click on Preview.  Copy the whole
> examples section to a test.R file.  RStudio will mark all the syntax
> errors, but won't be fooled by the \% escapes, since the Preview handled
> them.
> 
> Duncan Murdoch
> 
> On 10/04/2021 4:01 p.m., Duncan Murdoch wrote:
>> On 10/04/2021 3:28 p.m., Chris Evans wrote:
>>> My beginner package https://github.com/cpsyctc/CECPfuns is evolving slowly and I
>>> had no problems (that I could see)
>>> with the help pages created through roxygen.  Today I came back to try using
>>> pkgdown to ... pkgdown the package.
>>> So I used a copy of the package directory and ran:
>>>
>>> usethis::use_pkgdown()
>>>
>>> and then
>>>
>>> pkgdown::build_site()
>>>
>>> That produced the start of exactly what I wanted as a nicely pkgdown'ed site.
>>> However, the console showed error
>>> messages for three examples (which, as I say, all seem to produce OK html help
>>> pages through the usual roxygen
>>> processing).  The error message was
>>>
>>>      Failed to parse example for topic
>>>
>>> and sure enough the examples section in the pkgdown docs html was empty.  If
>>> anyone wants to look at one of
>>> the functions, checkAllUnique was one of the three that threw the errors.
>>>
>>> I tried some searching and the most pertinent seeming page I hit was this:
>>>
>>>      https://github.com/r-lib/pkgdown/issues/1149
>>>
>>> where Hadley Wickham says "That's not valid .Rd code because you didn't escape
>>> the Rd comment symbol" which may
>>> well be my problem too ... but I don't understand the advice (sorry!)
>> 
>> In Example code, % needs to be escaped, or it will be interpreted as a
>> comment.  Sometimes that means the examples just compute the wrong
>> thing, e.g.
>> 
>> A %*% b
>> 
>> is parsed as A when the rest of the line is ignored as a comment.
>> Sometimes it makes the code illegal.  I don't know which you're seeing.
>> 
>>>
>>> When I tried to tweak one of those functions by inserting a lot of "#" to mask
>>> results, i.e. replaced
>>>
>>> #' [1] something
>>>
>>> with:
>>>
>>> #' # [1] something
>>>
>>> (as I probably should have done that in the examples I have, they are dontrun
>>> examples so I hadn't noticed).
>> 
>> pkgdown tries to parse \dontrun examples, so this was a good thing, but
>> I think you missed some:  e.g. in checkAllUnique.Rd, I see this around
>> lines 55-60:
>> 
>> \examples{
>> \dontrun{
>> ### letters gets us the 26 lower case letters of the English alphabet so
>> should test OK
>> checkAllUnique(letters)
>> [1] TRUE
>> ### good!
>> 
>> That line containing TRUE is not legal R code, so should be commented.
>> You can find these one by one by copying the text from the Rd example
>> section into a file, and trying to parse that file, e.g.
>> 
>> Put this in "test.R":
>> 
>>     ### letters gets us the 26 lower case letters of the English alphabet
>> so should test OK
>>     checkAllUnique(letters)
>>     [1] TRUE
>>     ### good!
>> 
>> then run parse("test.R"):
>> 
>> Error in parse("test.R") : test.R:3:1: unexpected '['
>> 2: checkAllUnique(letters)
>> 3: [
>>      ^
>> 
>> You can do it for a file at a time by loading the test.R file into
>> RStudio; it'll put markers beside each syntax error.  Unfortunately, it
>> thinks
>> 
>> checkAllUnique(tmpTib \%>\% pull(1))
>> 
>> is a syntax error:  those escapes are required in Rd, but are illegal in R.
>> 
>> I don't know if there's a way to do it directly from the Roxygen source.
>> 
>> Duncan Murdoch
>> 
>>>
>>> However, when I reran pkgdown::build_site() I got a new error message that is,
>>> to me, thoroughly confusing:
>>>
>>> Error in utils::modifyList(meta, override) : is.list(x) is not TRUE
>>>
>>> At that point I decided to back out and come here and ask the question in the
>>> subject line!
>> 

-- 
Chris Evans (he/him) <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From m@rk@hogue@chp @end|ng |rom gm@||@com  Mon Apr 12 15:37:25 2021
From: m@rk@hogue@chp @end|ng |rom gm@||@com (Mark Hogue)
Date: Mon, 12 Apr 2021 09:37:25 -0400
Subject: [R-pkg-devel] Checks on wrong package?
Message-ID: <CAHPRF8czbtKOWGGwFdFmOSyAtLEMcuo2wYccqLLoWmovAAnMQg@mail.gmail.com>

Package submission is failing based on RadData 1.0.0, not present
submission, 1.0.1. This submission is to correct a data compression issue
identified by email from Prof Brian Ripley. The warnings are all about what
I'm trying to fix. It doesn't seem possible for a fix on my end.

Please advise.
Thanks,

Mark Hogue

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Apr 12 15:40:32 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 12 Apr 2021 09:40:32 -0400
Subject: [R-pkg-devel] Checks on wrong package?
In-Reply-To: <CAHPRF8czbtKOWGGwFdFmOSyAtLEMcuo2wYccqLLoWmovAAnMQg@mail.gmail.com>
References: <CAHPRF8czbtKOWGGwFdFmOSyAtLEMcuo2wYccqLLoWmovAAnMQg@mail.gmail.com>
Message-ID: <fda445ee-42b6-891e-f30b-c9e1d5adf8c1@gmail.com>

On 12/04/2021 9:37 a.m., Mark Hogue wrote:
> Package submission is failing based on RadData 1.0.0, not present
> submission, 1.0.1. This submission is to correct a data compression issue
> identified by email from Prof Brian Ripley. The warnings are all about what
> I'm trying to fix. It doesn't seem possible for a fix on my end.

You need to let us see the message about the submission failure if you 
want us to give you advice about it.

Duncan Murdoch


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Apr 12 18:06:50 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 12 Apr 2021 18:06:50 +0200
Subject: [R-pkg-devel] Checks on wrong package?
In-Reply-To: <fda445ee-42b6-891e-f30b-c9e1d5adf8c1@gmail.com>
References: <CAHPRF8czbtKOWGGwFdFmOSyAtLEMcuo2wYccqLLoWmovAAnMQg@mail.gmail.com>
 <fda445ee-42b6-891e-f30b-c9e1d5adf8c1@gmail.com>
Message-ID: <3df992d2-719e-9b16-c751-9b0b4a5ef6a3@statistik.tu-dortmund.de>

Actually you got

Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
Check: top-level files, Result: NOTE
   Non-standard files/directories found at top level:
     'News.md' 'README.Rmd' 'cran-comments.md'

which shold be fixed.

Best,
Uwe Ligges



On 12.04.2021 15:40, Duncan Murdoch wrote:
> On 12/04/2021 9:37 a.m., Mark Hogue wrote:
>> Package submission is failing based on RadData 1.0.0, not present
>> submission, 1.0.1. This submission is to correct a data compression issue
>> identified by email from Prof Brian Ripley. The warnings are all about 
>> what
>> I'm trying to fix. It doesn't seem possible for a fix on my end.
> 
> You need to let us see the message about the submission failure if you 
> want us to give you advice about it.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From R@R@E@J@n@@en-10 @end|ng |rom umcutrecht@n|  Tue Apr 13 14:09:50 2021
From: R@R@E@J@n@@en-10 @end|ng |rom umcutrecht@n| (Janssen-10, R.R.E. (Roel))
Date: Tue, 13 Apr 2021 12:09:50 +0000
Subject: [R-pkg-devel] Problem with building with libcurl on Windows
In-Reply-To: <defcdd886d3b41b597af2946ebad81e4@umcutrecht.nl>
References: <defcdd886d3b41b597af2946ebad81e4@umcutrecht.nl>
Message-ID: <6af147440553417f98e87cec7adc1998@umcutrecht.nl>

Could it be that "-lcrypt32" is missing in the compile command?
If so, how can I conditionally include it for Windows 32-bit builds?

________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Janssen-10, R.R.E. (Roel) <R.R.E.Janssen-10 at umcutrecht.nl>
Sent: Friday, April 9, 2021 10:26:52 AM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Problem with building with libcurl on Windows

Dear all,


The package I've tried to submit uses HTSlib, which in turn uses libcurl.  >From the build logs, I think there is a version mismatch, or configuration problem with libcurl:

https://win-builder.r-project.org/incoming_pretest/USCDtools_0.0.1_20210409_093124/Windows/00install.out

The problem seems to boil down to:
<https://win-builder.r-project.org/incoming_pretest/USCDtools_0.0.1_20210409_093124/Windows/00install.out>

undefined reference to `_imp__CertEnumCertificatesInStore at 8'

Can I do anything about it in my package?

Kind regards,
Roel Janssen


------------------------------------------------------------------------------

De informatie opgenomen in dit bericht kan vertrouwelijk zijn en is
uitsluitend bestemd voor de geadresseerde. Indien u dit bericht onterecht
ontvangt, wordt u verzocht de inhoud niet te gebruiken en de afzender direct
te informeren door het bericht te retourneren. Het Universitair Medisch
Centrum Utrecht is een publiekrechtelijke rechtspersoon in de zin van de W.H.W.
(Wet Hoger Onderwijs en Wetenschappelijk Onderzoek) en staat geregistreerd bij
de Kamer van Koophandel voor Midden-Nederland onder nr. 30244197.

Denk s.v.p aan het milieu voor u deze e-mail afdrukt.

------------------------------------------------------------------------------

This message may contain confidential information and is...{{dropped:9}}


From e|corteg@no @end|ng |rom gm@||@com  Tue Apr 13 17:48:54 2021
From: e|corteg@no @end|ng |rom gm@||@com (=?UTF-8?Q?Eugenio_L=C3=B3pez_Cortegano?=)
Date: Tue, 13 Apr 2021 16:48:54 +0100
Subject: [R-pkg-devel] WARNING: ISO C forbids an empty translation unit
Message-ID: <CAGjgynZRG1CYjcGXQF=c1rh=4z59SrQwTRU5caU2+P+x5BD9TA@mail.gmail.com>

Hi all,

I just started a submission to CRAN, but got the following WARNING from
win-builder:

Found the following significant warnings: init.c:1: warning: ISO C forbids
an empty translation unit [-Wpedantic]

To the best of my knowledge, -pedantic is a recommended compilation flag
for C++ and relates to the use of strict ISO C++ code. However, the file
pointed (init.c) is not a file I have written, and do not know exactly
where this comes from, or how to fix it. Package uses C++ code and Rcpp,
but nothing like a configure or Makevars is included.

This warning does not appear when  R CMD check --as-cran is run in my home
Linux (Ubuntu 20.04).

Is this a big issue? does anybody have an idea on how to prevent it?

Thank you,
Eugenio

	[[alternative HTML version deleted]]


From c@m@ty| @end|ng |rom protonm@||@com  Tue Apr 13 22:04:36 2021
From: c@m@ty| @end|ng |rom protonm@||@com (csmatyi)
Date: Tue, 13 Apr 2021 20:04:36 +0000
Subject: [R-pkg-devel] how to provide an example for my package when I want
 to generate a figure
Message-ID: <SHAs3o5nTohyDmKI-DFJa75V6RTV4Pl_DPEvsiw4ozaxdg84rQmlqu-9BMU3A25WWThOREE7GHFDrGxIcmq-1Mo1xeGFVTKe4btcwikAUxI=@protonmail.com>

Hello all,

I have a fairly simple package I want to make. It takes two dataframes and then creates a jpeg (a heat map) based on the info in the dataframes.

I know how to put the code in the vignette.
But as to how to make an example, I don't know that. Would I put the code in the R code for the heat map?

How can I do this, it seems very foggy to me.

Thanks, Matthew

Sent with [ProtonMail](https://protonmail.com) Secure Email.
	[[alternative HTML version deleted]]


From berryboe@@enkoo| @end|ng |rom hotm@||@com  Tue Apr 13 22:19:36 2021
From: berryboe@@enkoo| @end|ng |rom hotm@||@com (Berry Boessenkool)
Date: Tue, 13 Apr 2021 20:19:36 +0000
Subject: [R-pkg-devel] 
 how to provide an example for my package when I want
 to generate a figure
In-Reply-To: <SHAs3o5nTohyDmKI-DFJa75V6RTV4Pl_DPEvsiw4ozaxdg84rQmlqu-9BMU3A25WWThOREE7GHFDrGxIcmq-1Mo1xeGFVTKe4btcwikAUxI=@protonmail.com>
References: <SHAs3o5nTohyDmKI-DFJa75V6RTV4Pl_DPEvsiw4ozaxdg84rQmlqu-9BMU3A25WWThOREE7GHFDrGxIcmq-1Mo1xeGFVTKe4btcwikAUxI=@protonmail.com>
Message-ID: <AM0PR01MB40336B00D36EE71D2929E1D3D54F9@AM0PR01MB4033.eurprd01.prod.exchangelabs.com>


Hi Matthew,

see the notes on examples in function documentations here:
https://r-pkgs.org/man.html#man-functions
if you use the Roxygen setup (which I recommend)
or the corresponding info in WRE:
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Writing-R-documentation-files

Regards,
Berry


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of csmatyi <csmatyi at protonmail.com>
Sent: Tuesday, April 13, 2021 22:04
To: R-package-devel at r-project.org <R-package-devel at r-project.org>
Subject: [R-pkg-devel] how to provide an example for my package when I want to generate a figure

Hello all,

I have a fairly simple package I want to make. It takes two dataframes and then creates a jpeg (a heat map) based on the info in the dataframes.

I know how to put the code in the vignette.
But as to how to make an example, I don't know that. Would I put the code in the R code for the heat map?

How can I do this, it seems very foggy to me.

Thanks, Matthew

Sent with [ProtonMail](https://protonmail.com) Secure Email.
        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From r|@e|@mp| @end|ng |rom gm@||@com  Wed Apr 14 00:43:07 2021
From: r|@e|@mp| @end|ng |rom gm@||@com (Rafael CM)
Date: Wed, 14 Apr 2021 00:43:07 +0200
Subject: [R-pkg-devel] checking LazyData ... WARNING
Message-ID: <CA+NKSayES+hzx+c-8x19ZNQq6jPgsjmxAQ5NvcqDYMzcyd1Lbg@mail.gmail.com>

Dear all,
I am submitting the RTIGER package and I have the following warning:
checking LazyData ... WARNING
I have saved the data with the optimal compression format. Could someone
help me?
Best,
Rafael

	[[alternative HTML version deleted]]


From c@m@ty| @end|ng |rom protonm@||@com  Wed Apr 14 03:03:14 2021
From: c@m@ty| @end|ng |rom protonm@||@com (csmatyi)
Date: Wed, 14 Apr 2021 01:03:14 +0000
Subject: [R-pkg-devel] error messages
Message-ID: <auni1_V4SBAtFK72qIACQVakA_M0HbQhQ8C-gQpkqJ6c4FkP0hK0IiYVZUaOQjYQsUUCgPJC9MPRR7tk6xlSqnLqHAXch8xAh8ZmLnpaFqI=@protonmail.com>

Hello R package developers,

I tried sending in my package for the fifth time or so, but it still says that it has errors. I read the error messages but I cannot figure out what the error could be. Does anyone know?

Thanks, Matthew

------------------
Windows

* using log directory 'd:/RCompile/CRANincoming/R-devel/hybridogram.Rcheck'
* using R Under development (unstable) (2021-04-11 r80157)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: ISO8859-1
* checking for file 'hybridogram/DESCRIPTION' ... OK
* checking extension type ... Package
* this is package 'hybridogram' version '0.2.0'
* package encoding: UTF-8
* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Matthew Cserhati <
csmatyi at protonmail.com
>'

New submission
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking serialization versions ... OK
* checking whether package 'hybridogram' can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking for future file timestamps ... OK
* checking 'build' directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* loading checks for arch 'i386'
** checking whether the package can be loaded ... OK
** checking whether the package can be loaded with stated dependencies ... OK
** checking whether the package can be unloaded cleanly ... OK
** checking whether the namespace can be loaded with stated dependencies ... OK
** checking whether the namespace can be unloaded cleanly ... OK
** checking loading without being on the library search path ... OK
** checking use of S3 registration ... OK
* loading checks for arch 'x64'
** checking whether the package can be loaded ... OK
** checking whether the package can be loaded with stated dependencies ... OK
** checking whether the package can be unloaded cleanly ... OK
** checking whether the namespace can be loaded with stated dependencies ... OK
** checking whether the namespace can be unloaded cleanly ... OK
** checking loading without being on the library search path ... OK
** checking use of S3 registration ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... [4s] OK
* checking for missing documentation entries ... OK
* checking installed files from 'inst/doc' ... OK
* checking files in 'vignettes' ... OK
* checking examples ... NONE
* checking for unstated dependencies in vignettes ... OK
* checking package vignettes in 'inst/doc' ... OK
* checking re-building of vignette outputs ... [1s] OK
* checking PDF version of manual ... OK
* checking for detritus in the temp directory ... OK
* DONE
Status: 1 NOTE

Debian

* using log directory ?/srv/hornik/tmp/CRAN/hybridogram.Rcheck?
* using R Under development (unstable) (2021-04-12 r80161)
* using platform: x86_64-pc-linux-gnu (64-bit)
* using session charset: UTF-8
* checking for file ?hybridogram/DESCRIPTION? ... OK
* checking extension type ... Package
* this is package ?hybridogram? version ?0.2.0?
* package encoding: UTF-8
* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Matthew Cserhati <
csmatyi at protonmail.com
>?

New submission
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking serialization versions ... OK
* checking whether package ?hybridogram? can be installed ... [0s/0s] ERROR
Installation failed.
See ?/srv/hornik/tmp/CRAN/
hybridogram.Rcheck/00install.out
? for details.
* DONE
Status: 1 ERROR, 1 NOTE
	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Wed Apr 14 03:47:45 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 13 Apr 2021 20:47:45 -0500
Subject: [R-pkg-devel] error messages
In-Reply-To: <auni1_V4SBAtFK72qIACQVakA_M0HbQhQ8C-gQpkqJ6c4FkP0hK0IiYVZUaOQjYQsUUCgPJC9MPRR7tk6xlSqnLqHAXch8xAh8ZmLnpaFqI=@protonmail.com>
References: <auni1_V4SBAtFK72qIACQVakA_M0HbQhQ8C-gQpkqJ6c4FkP0hK0IiYVZUaOQjYQsUUCgPJC9MPRR7tk6xlSqnLqHAXch8xAh8ZmLnpaFqI=@protonmail.com>
Message-ID: <24694.18881.72856.449782@rob.eddelbuettel.com>


On 14 April 2021 at 01:03, csmatyi wrote:
| Debian
| 
| * using log directory ?/srv/hornik/tmp/CRAN/hybridogram.Rcheck?
| * using R Under development (unstable) (2021-04-12 r80161)
| * using platform: x86_64-pc-linux-gnu (64-bit)
| * using session charset: UTF-8
| * checking for file ?hybridogram/DESCRIPTION? ... OK
| * checking extension type ... Package
| * this is package ?hybridogram? version ?0.2.0?
| * package encoding: UTF-8
| * checking CRAN incoming feasibility ... NOTE
| Maintainer: ?Matthew Cserhati <
| csmatyi at protonmail.com
| >?
| 
| New submission
| * checking package namespace information ... OK
| * checking package dependencies ... OK
| * checking if this is a source package ... OK
| * checking if there is a namespace ... OK
| * checking for executable files ... OK
| * checking for hidden files and directories ... OK
| * checking for portable file names ... OK
| * checking for sufficient/correct file permissions ... OK
| * checking serialization versions ... OK
| * checking whether package ?hybridogram? can be installed ... [0s/0s] ERROR
| Installation failed.
| See ?/srv/hornik/tmp/CRAN/
| hybridogram.Rcheck/00install.out
| ? for details.
| * DONE
| Status: 1 ERROR, 1 NOTE

You need to figure out why it does not install.

RHub (http://builder.r-hub.io/) may help if you do not have a suitable
machine nearby.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Apr 14 10:53:24 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 14 Apr 2021 10:53:24 +0200
Subject: [R-pkg-devel] error messages
In-Reply-To: <24694.18881.72856.449782@rob.eddelbuettel.com>
References: <auni1_V4SBAtFK72qIACQVakA_M0HbQhQ8C-gQpkqJ6c4FkP0hK0IiYVZUaOQjYQsUUCgPJC9MPRR7tk6xlSqnLqHAXch8xAh8ZmLnpaFqI=@protonmail.com>
 <24694.18881.72856.449782@rob.eddelbuettel.com>
Message-ID: <143922e7-eb70-19b6-0b11-6e90df700f97@statistik.tu-dortmund.de>

Or simply navigate to the install log which is avaiable from the links 
you got.

Best,
Uwe Ligges

On 14.04.2021 03:47, Dirk Eddelbuettel wrote:
> 
> On 14 April 2021 at 01:03, csmatyi wrote:
> | Debian
> |
> | * using log directory ?/srv/hornik/tmp/CRAN/hybridogram.Rcheck?
> | * using R Under development (unstable) (2021-04-12 r80161)
> | * using platform: x86_64-pc-linux-gnu (64-bit)
> | * using session charset: UTF-8
> | * checking for file ?hybridogram/DESCRIPTION? ... OK
> | * checking extension type ... Package
> | * this is package ?hybridogram? version ?0.2.0?
> | * package encoding: UTF-8
> | * checking CRAN incoming feasibility ... NOTE
> | Maintainer: ?Matthew Cserhati <
> | csmatyi at protonmail.com
> | >?
> |
> | New submission
> | * checking package namespace information ... OK
> | * checking package dependencies ... OK
> | * checking if this is a source package ... OK
> | * checking if there is a namespace ... OK
> | * checking for executable files ... OK
> | * checking for hidden files and directories ... OK
> | * checking for portable file names ... OK
> | * checking for sufficient/correct file permissions ... OK
> | * checking serialization versions ... OK
> | * checking whether package ?hybridogram? can be installed ... [0s/0s] ERROR
> | Installation failed.
> | See ?/srv/hornik/tmp/CRAN/
> | hybridogram.Rcheck/00install.out
> | ? for details.
> | * DONE
> | Status: 1 ERROR, 1 NOTE
> 
> You need to figure out why it does not install.
> 
> RHub (http://builder.r-hub.io/) may help if you do not have a suitable
> machine nearby.
> 
> Dirk
>


From r|@e|@mp| @end|ng |rom gm@||@com  Wed Apr 14 13:11:09 2021
From: r|@e|@mp| @end|ng |rom gm@||@com (Rafael CM)
Date: Wed, 14 Apr 2021 13:11:09 +0200
Subject: [R-pkg-devel] checking LazyData ... WARNING
Message-ID: <CA+NKSayuveA0o55X9E-oQRow1gZ78n7O6+hGJNHVk1BBDhw-yw@mail.gmail.com>

Dear all,
I am having the following warning when loading my rpackage:

* checking LazyData ... WARNING
  LazyData DB of 62.1 MB without LazyDataCompression set


I can't get to fix this problem. I have tried the tools option to optimize
saving. I used different types of compressions. I also have set LazyDate:
true to my DESCRIPTION file.
Any ideas?
Thank you in advance,
Rafael

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Apr 14 13:37:54 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 14 Apr 2021 13:37:54 +0200
Subject: [R-pkg-devel] checking LazyData ... WARNING
In-Reply-To: <CA+NKSayES+hzx+c-8x19ZNQq6jPgsjmxAQ5NvcqDYMzcyd1Lbg@mail.gmail.com>
References: <CA+NKSayES+hzx+c-8x19ZNQq6jPgsjmxAQ5NvcqDYMzcyd1Lbg@mail.gmail.com>
Message-ID: <c91454b6-ec07-b37e-ac70-142bb0cf1ea6@statistik.tu-dortmund.de>



On 14.04.2021 00:43, Rafael CM wrote:
> Dear all,
> I am submitting the RTIGER package and I have the following warning:
> checking LazyData ... WARNING

A full message would be needed ....

Best,
Uwe Ligges



> I have saved the data with the optimal compression format. Could someone
> help me?
> Best,
> Rafael
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From r|@e|@mp| @end|ng |rom gm@||@com  Wed Apr 14 13:39:31 2021
From: r|@e|@mp| @end|ng |rom gm@||@com (Rafael CM)
Date: Wed, 14 Apr 2021 13:39:31 +0200
Subject: [R-pkg-devel] checking LazyData ... WARNING
In-Reply-To: <c91454b6-ec07-b37e-ac70-142bb0cf1ea6@statistik.tu-dortmund.de>
References: <CA+NKSayES+hzx+c-8x19ZNQq6jPgsjmxAQ5NvcqDYMzcyd1Lbg@mail.gmail.com>
 <c91454b6-ec07-b37e-ac70-142bb0cf1ea6@statistik.tu-dortmund.de>
Message-ID: <CA+NKSay+TzQ-AjphU7=iTZs3u7nxnSw8QuO2JA6Oa5j0P=9xJw@mail.gmail.com>

 checking LazyData ... WARNING
  LazyData DB of 62.1 MB without LazyDataCompression set
  See ?1.1.6 of 'Writing R Extensions'


On Wed, Apr 14, 2021 at 1:38 PM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 14.04.2021 00:43, Rafael CM wrote:
> > Dear all,
> > I am submitting the RTIGER package and I have the following warning:
> > checking LazyData ... WARNING
>
> A full message would be needed ....
>
> Best,
> Uwe Ligges
>
>
>
> > I have saved the data with the optimal compression format. Could someone
> > help me?
> > Best,
> > Rafael
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>

	[[alternative HTML version deleted]]


From @eb@meyer @end|ng |rom |@u@de  Wed Apr 14 13:42:30 2021
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Wed, 14 Apr 2021 13:42:30 +0200
Subject: [R-pkg-devel] checking LazyData ... WARNING
In-Reply-To: <CA+NKSayuveA0o55X9E-oQRow1gZ78n7O6+hGJNHVk1BBDhw-yw@mail.gmail.com>
References: <CA+NKSayuveA0o55X9E-oQRow1gZ78n7O6+hGJNHVk1BBDhw-yw@mail.gmail.com>
Message-ID: <8768a290-b8b1-c11e-f976-ff42b359c76f@fau.de>

Am 14.04.21 um 13:11 schrieb Rafael CM:
> Dear all,
> I am having the following warning when loading my rpackage:
> 
> * checking LazyData ... WARNING
>   LazyData DB of 62.1 MB without LazyDataCompression set
> 
> 
> I can't get to fix this problem. I have tried the tools option to optimize
> saving. I used different types of compressions. I also have set LazyDate:
> true to my DESCRIPTION file.
> Any ideas?

Have you already tried also setting LazyDataCompression as the warning
suggests?

You should try all of bzip2, xz and gzip in turn and look at the size of
the installed lazy-loading database to find the best compression format.
The development version of the WRE manual at

https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Data-in-packages

gives a function CheckLazyDataCompression, which can be used to do that.

Best regards,

	Sebastian


> Thank you in advance,
> Rafael
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From jnn @end|ng |rom b|o@@@u@dk  Wed Apr 14 11:41:28 2021
From: jnn @end|ng |rom b|o@@@u@dk (Jacob Nabe-Nielsen)
Date: Wed, 14 Apr 2021 09:41:28 +0000
Subject: [R-pkg-devel] Problem with S4 method for plotting a raster file
Message-ID: <A39314C5-E914-464E-AC54-CC93CC25CE0A@bios.au.dk>

Dear all,

I have just discovered an error in a package that I have already uploaded to
CRAN, and cannot figure out how to fix it. All help will be greatly appreciated.
The package is called DEPONS2R, and is available from:
https://cran.r-project.org/web/packages/DEPONS2R/index.html

The problem is related to one of the included examples, where I plot the coastline
on top of a raster file. In the example, where the plotting is embedded in
an S4 method called plot.DeponsRaster, the coastline does not show. But if
I run the functions that the method is composed of, everything works fine (see
below). So I am wondering if the graphics devise is not passed on correctly
within the package, or what actually happens.

The example that does not run correctly is available from ?plot.DeponsRaster:

library(DEPONS2R)

data("bathymetry")
plot(bathymetry)
data("coastline")
library(rgdal)
# Change projection of coastline to match that of bathymetry data
coastline2 <- spTransform(coastline, crs(bathymetry))
plot(coastline2, add=TRUE, col="lightyellow2")


Here the coastline is not plotted. The method is defined as:


setMethod("plot", signature("DeponsRaster", "ANY"),
          function(x, y, maxpixels=500000, col, alpha=NULL, colNA=NA, add=FALSE,
                   ext=NULL, useRaster=TRUE, interpolate=FALSE, addfun=NULL,
                   nc, nr, maxnl=16, main, npretty=0, axes=TRUE,
                   legend=TRUE, trackToPlot=1, ...)  {
            oldpar <- graphics::par(no.readonly = TRUE)
            on.exit(graphics::par(oldpar))
            if (missing(main)) {
              main <- paste(x at landscape, x at type, sep=" - ")
            }
            # Define colours specific or 'type'
            if(missing(col) && x at type=="bathymetry") {
              tmp.col <- grDevices::rainbow(1000)[501:800]
              col <- c(tmp.col[1:100], rep(tmp.col[101:250], each=5))
            }
            # Use {raster}-package for plotting
            if(x at crs=="NA") {
              crs2 <- sp::CRS(as.character(NA))
            } else {
              crs2 <- sp::CRS(x at crs)
            }
            rdata <- raster::raster(x=x at data, xmn=x at ext$xleft, xmx=x at ext$xright,
                                    ymn=x at ext$ybottom, ymx=x at ext$ytop,
                                    crs=crs2)
            raster::plot(rdata, col=col, main=main,
                         alpha=alpha, add=add, ext=ext, axes=axes, legend=legend)
          }
)


But when I use the functions that are at the core of this method it is
not a problem adding the coastline correctly:

x <- bathymetry
crs2 <- raster::crs(x at crs)
rdata <- raster::raster(x = x at data, xmn = x at ext$xleft,
xmx = x at ext$xright, ymn = x at ext$ybottom, ymx = x at ext$ytop,
crs = crs2)
raster::plot(rdata)
plot(coastline2, add=TRUE, col="lightyellow2")

If would be fantastic if someone can figure out how I should modify the method
to plot the coastline correctly on top of the map.


Best regards,
Jacob

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Apr 14 14:44:40 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 14 Apr 2021 08:44:40 -0400
Subject: [R-pkg-devel] Problem with S4 method for plotting a raster file
In-Reply-To: <A39314C5-E914-464E-AC54-CC93CC25CE0A@bios.au.dk>
References: <A39314C5-E914-464E-AC54-CC93CC25CE0A@bios.au.dk>
Message-ID: <b70acce2-9c19-18a4-5efb-3ff6324e6101@gmail.com>

On 14/04/2021 5:41 a.m., Jacob Nabe-Nielsen wrote:
> Dear all,
> 
> I have just discovered an error in a package that I have already uploaded to
> CRAN, and cannot figure out how to fix it. All help will be greatly appreciated.
> The package is called DEPONS2R, and is available from:
> https://cran.r-project.org/web/packages/DEPONS2R/index.html
> 
> The problem is related to one of the included examples, where I plot the coastline
> on top of a raster file. In the example, where the plotting is embedded in
> an S4 method called plot.DeponsRaster, the coastline does not show. But if
> I run the functions that the method is composed of, everything works fine (see
> below). So I am wondering if the graphics devise is not passed on correctly
> within the package, or what actually happens.
> 
> The example that does not run correctly is available from ?plot.DeponsRaster:
> 
> library(DEPONS2R)
> 
> data("bathymetry")
> plot(bathymetry)
> data("coastline")
> library(rgdal)
> # Change projection of coastline to match that of bathymetry data
> coastline2 <- spTransform(coastline, crs(bathymetry))
> plot(coastline2, add=TRUE, col="lightyellow2")
> 
> 
> Here the coastline is not plotted. The method is defined as:
> 
> 
> setMethod("plot", signature("DeponsRaster", "ANY"),
>            function(x, y, maxpixels=500000, col, alpha=NULL, colNA=NA, add=FALSE,
>                     ext=NULL, useRaster=TRUE, interpolate=FALSE, addfun=NULL,
>                     nc, nr, maxnl=16, main, npretty=0, axes=TRUE,
>                     legend=TRUE, trackToPlot=1, ...)  {
>              oldpar <- graphics::par(no.readonly = TRUE)
>              on.exit(graphics::par(oldpar))
>              if (missing(main)) {
>                main <- paste(x at landscape, x at type, sep=" - ")
>              }
>              # Define colours specific or 'type'
>              if(missing(col) && x at type=="bathymetry") {
>                tmp.col <- grDevices::rainbow(1000)[501:800]
>                col <- c(tmp.col[1:100], rep(tmp.col[101:250], each=5))
>              }
>              # Use {raster}-package for plotting
>              if(x at crs=="NA") {
>                crs2 <- sp::CRS(as.character(NA))
>              } else {
>                crs2 <- sp::CRS(x at crs)
>              }
>              rdata <- raster::raster(x=x at data, xmn=x at ext$xleft, xmx=x at ext$xright,
>                                      ymn=x at ext$ybottom, ymx=x at ext$ytop,
>                                      crs=crs2)
>              raster::plot(rdata, col=col, main=main,
>                           alpha=alpha, add=add, ext=ext, axes=axes, legend=legend)
>            }
> )
> 
> 
> But when I use the functions that are at the core of this method it is
> not a problem adding the coastline correctly:
> 
> x <- bathymetry
> crs2 <- raster::crs(x at crs)
> rdata <- raster::raster(x = x at data, xmn = x at ext$xleft,
> xmx = x at ext$xright, ymn = x at ext$ybottom, ymx = x at ext$ytop,
> crs = crs2)
> raster::plot(rdata)
> plot(coastline2, add=TRUE, col="lightyellow2")
> 
> If would be fantastic if someone can figure out how I should modify the method
> to plot the coastline correctly on top of the map.
> 
> 

I'm not sure exactly what is going wrong, but if you plot the coastline 
first and the bathymetry second, things do show up.  Maybe that's enough 
of a hint for you:

library(DEPONS2R)
data("coastline")
library(rgdal)
coastline2 <- spTransform(coastline, crs(bathymetry))
plot(coastline2, col="lightyellow2")

data("bathymetry")
plot(bathymetry, add=TRUE)

This puts the legend on top of the plotted coastline data, so my guess 
is that the limits of the bathymetry plot aren't being made available to 
the coastline plot when you do things in the original order.

Duncan Murdoch


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Wed Apr 14 15:24:45 2021
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Wed, 14 Apr 2021 13:24:45 +0000
Subject: [R-pkg-devel] Problem with S4 method for plotting a raster file
In-Reply-To: <b70acce2-9c19-18a4-5efb-3ff6324e6101@gmail.com>
References: <A39314C5-E914-464E-AC54-CC93CC25CE0A@bios.au.dk>
 <b70acce2-9c19-18a4-5efb-3ff6324e6101@gmail.com>
Message-ID: <LOYP265MB2015CD1981F9DF7F99D55C1BAE4E9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>

> library(DEPONS2R)
> 
> data("bathymetry")
> plot(bathymetry)
> data("coastline")
> library(rgdal)
> # Change projection of coastline to match that of bathymetry data
> coastline2 <- spTransform(coastline, crs(bathymetry)) plot(coastline2, 
> add=TRUE, col="lightyellow2")

The inclusion of 'library(rgdal)' above suggests that your plot method needs something from 'rgdal'. If that something is a plot method from that package, it may not be visible from your function (due to changes introduced in R-4.0.0, search NEWS for R-4.0.0 'plot'), you would need to import plot methods from rgdal if that is the case (and maybe move rgdal from Suggests to Imports). 

Georgi Boshnakov


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Duncan Murdoch
Sent: 14 April 2021 13:45
To: Jacob Nabe-Nielsen <jnn at bios.au.dk>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Problem with S4 method for plotting a raster file

On 14/04/2021 5:41 a.m., Jacob Nabe-Nielsen wrote:
> Dear all,
> 
> I have just discovered an error in a package that I have already 
> uploaded to CRAN, and cannot figure out how to fix it. All help will be greatly appreciated.
> The package is called DEPONS2R, and is available from:
> https://cran.r-project.org/web/packages/DEPONS2R/index.html
> 
> The problem is related to one of the included examples, where I plot 
> the coastline on top of a raster file. In the example, where the 
> plotting is embedded in an S4 method called plot.DeponsRaster, the 
> coastline does not show. But if I run the functions that the method is 
> composed of, everything works fine (see below). So I am wondering if 
> the graphics devise is not passed on correctly within the package, or what actually happens.
> 
> The example that does not run correctly is available from ?plot.DeponsRaster:
> 
> library(DEPONS2R)
> 
> data("bathymetry")
> plot(bathymetry)
> data("coastline")
> library(rgdal)
> # Change projection of coastline to match that of bathymetry data
> coastline2 <- spTransform(coastline, crs(bathymetry)) plot(coastline2, 
> add=TRUE, col="lightyellow2")
> 
> 
> Here the coastline is not plotted. The method is defined as:
> 
> 
> setMethod("plot", signature("DeponsRaster", "ANY"),
>            function(x, y, maxpixels=500000, col, alpha=NULL, colNA=NA, add=FALSE,
>                     ext=NULL, useRaster=TRUE, interpolate=FALSE, addfun=NULL,
>                     nc, nr, maxnl=16, main, npretty=0, axes=TRUE,
>                     legend=TRUE, trackToPlot=1, ...)  {
>              oldpar <- graphics::par(no.readonly = TRUE)
>              on.exit(graphics::par(oldpar))
>              if (missing(main)) {
>                main <- paste(x at landscape, x at type, sep=" - ")
>              }
>              # Define colours specific or 'type'
>              if(missing(col) && x at type=="bathymetry") {
>                tmp.col <- grDevices::rainbow(1000)[501:800]
>                col <- c(tmp.col[1:100], rep(tmp.col[101:250], each=5))
>              }
>              # Use {raster}-package for plotting
>              if(x at crs=="NA") {
>                crs2 <- sp::CRS(as.character(NA))
>              } else {
>                crs2 <- sp::CRS(x at crs)
>              }
>              rdata <- raster::raster(x=x at data, xmn=x at ext$xleft, xmx=x at ext$xright,
>                                      ymn=x at ext$ybottom, ymx=x at ext$ytop,
>                                      crs=crs2)
>              raster::plot(rdata, col=col, main=main,
>                           alpha=alpha, add=add, ext=ext, axes=axes, legend=legend)
>            }
> )
> 
> 
> But when I use the functions that are at the core of this method it is 
> not a problem adding the coastline correctly:
> 
> x <- bathymetry
> crs2 <- raster::crs(x at crs)
> rdata <- raster::raster(x = x at data, xmn = x at ext$xleft, xmx = 
> x at ext$xright, ymn = x at ext$ybottom, ymx = x at ext$ytop, crs = crs2)
> raster::plot(rdata)
> plot(coastline2, add=TRUE, col="lightyellow2")
> 
> If would be fantastic if someone can figure out how I should modify 
> the method to plot the coastline correctly on top of the map.
> 
> 

I'm not sure exactly what is going wrong, but if you plot the coastline first and the bathymetry second, things do show up.  Maybe that's enough of a hint for you:

library(DEPONS2R)
data("coastline")
library(rgdal)
coastline2 <- spTransform(coastline, crs(bathymetry)) plot(coastline2, col="lightyellow2")

data("bathymetry")
plot(bathymetry, add=TRUE)

This puts the legend on top of the plotted coastline data, so my guess is that the limits of the bathymetry plot aren't being made available to the coastline plot when you do things in the original order.

Duncan Murdoch

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jnn @end|ng |rom b|o@@@u@dk  Wed Apr 14 15:26:58 2021
From: jnn @end|ng |rom b|o@@@u@dk (Jacob Nabe-Nielsen)
Date: Wed, 14 Apr 2021 13:26:58 +0000
Subject: [R-pkg-devel] Problem with S4 method for plotting a raster file
In-Reply-To: <b70acce2-9c19-18a4-5efb-3ff6324e6101@gmail.com>
References: <A39314C5-E914-464E-AC54-CC93CC25CE0A@bios.au.dk>
 <b70acce2-9c19-18a4-5efb-3ff6324e6101@gmail.com>
Message-ID: <962B2433-9D85-49FD-8099-F93E16359AA6@bios.au.dk>

Hi Duncan

Thanks a lot for the help. This works, but unfortunately it does not result in a landscape which is cropped to the extent of the bathymetry raster file... it would be nice to be able to do that as well (as you can if you use the 'raster' and 'sp' packages).

Best wishes,
Jacob


On 14 Apr 2021, at 14.44, Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>> wrote:

On 14/04/2021 5:41 a.m., Jacob Nabe-Nielsen wrote:
Dear all,
I have just discovered an error in a package that I have already uploaded to
CRAN, and cannot figure out how to fix it. All help will be greatly appreciated.
The package is called DEPONS2R, and is available from:
https://cran.r-project.org/web/packages/DEPONS2R/index.html
The problem is related to one of the included examples, where I plot the coastline
on top of a raster file. In the example, where the plotting is embedded in
an S4 method called plot.DeponsRaster, the coastline does not show. But if
I run the functions that the method is composed of, everything works fine (see
below). So I am wondering if the graphics devise is not passed on correctly
within the package, or what actually happens.
The example that does not run correctly is available from ?plot.DeponsRaster:
library(DEPONS2R)
data("bathymetry")
plot(bathymetry)
data("coastline")
library(rgdal)
# Change projection of coastline to match that of bathymetry data
coastline2 <- spTransform(coastline, crs(bathymetry))
plot(coastline2, add=TRUE, col="lightyellow2")
Here the coastline is not plotted. The method is defined as:
setMethod("plot", signature("DeponsRaster", "ANY"),
          function(x, y, maxpixels=500000, col, alpha=NULL, colNA=NA, add=FALSE,
                   ext=NULL, useRaster=TRUE, interpolate=FALSE, addfun=NULL,
                   nc, nr, maxnl=16, main, npretty=0, axes=TRUE,
                   legend=TRUE, trackToPlot=1, ...)  {
            oldpar <- graphics::par(no.readonly = TRUE)
            on.exit(graphics::par(oldpar))
            if (missing(main)) {
              main <- paste(x at landscape, x at type, sep=" - ")
            }
            # Define colours specific or 'type'
            if(missing(col) && x at type=="bathymetry") {
              tmp.col <- grDevices::rainbow(1000)[501:800]
              col <- c(tmp.col[1:100], rep(tmp.col[101:250], each=5))
            }
            # Use {raster}-package for plotting
            if(x at crs=="NA") {
              crs2 <- sp::CRS(as.character(NA))
            } else {
              crs2 <- sp::CRS(x at crs)
            }
            rdata <- raster::raster(x=x at data, xmn=x at ext$xleft, xmx=x at ext$xright,
                                    ymn=x at ext$ybottom, ymx=x at ext$ytop,
                                    crs=crs2)
            raster::plot(rdata, col=col, main=main,
                         alpha=alpha, add=add, ext=ext, axes=axes, legend=legend)
          }
)
But when I use the functions that are at the core of this method it is
not a problem adding the coastline correctly:
x <- bathymetry
crs2 <- raster::crs(x at crs)
rdata <- raster::raster(x = x at data, xmn = x at ext$xleft,
xmx = x at ext$xright, ymn = x at ext$ybottom, ymx = x at ext$ytop,
crs = crs2)
raster::plot(rdata)
plot(coastline2, add=TRUE, col="lightyellow2")
If would be fantastic if someone can figure out how I should modify the method
to plot the coastline correctly on top of the map.

I'm not sure exactly what is going wrong, but if you plot the coastline first and the bathymetry second, things do show up.  Maybe that's enough of a hint for you:

library(DEPONS2R)
data("coastline")
library(rgdal)
coastline2 <- spTransform(coastline, crs(bathymetry))
plot(coastline2, col="lightyellow2")

data("bathymetry")
plot(bathymetry, add=TRUE)

This puts the legend on top of the plotted coastline data, so my guess is that the limits of the bathymetry plot aren't being made available to the coastline plot when you do things in the original order.

Duncan Murdoch


	[[alternative HTML version deleted]]


From jnn @end|ng |rom b|o@@@u@dk  Wed Apr 14 16:00:04 2021
From: jnn @end|ng |rom b|o@@@u@dk (Jacob Nabe-Nielsen)
Date: Wed, 14 Apr 2021 14:00:04 +0000
Subject: [R-pkg-devel] Problem with S4 method for plotting a raster file
In-Reply-To: <LOYP265MB2015CD1981F9DF7F99D55C1BAE4E9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
References: <A39314C5-E914-464E-AC54-CC93CC25CE0A@bios.au.dk>
 <b70acce2-9c19-18a4-5efb-3ff6324e6101@gmail.com>
 <LOYP265MB2015CD1981F9DF7F99D55C1BAE4E9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <6DC401C4-6857-4A67-BD4B-65ACD35CF865@bios.au.dk>

Dear Georgi

Thanks a lot for the suggestion. I have now imported rgdal and moved it from Suggests of Imports. However, this did not solve my problem.
I also tried importing 'plot' directly from rgdal, but then I got the error: object ?plot? is not exported by 'namespace:rgdal'

Best,
Jacob


> On 14 Apr 2021, at 15.24, Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk> wrote:
> 
>> library(DEPONS2R)
>> 
>> data("bathymetry")
>> plot(bathymetry)
>> data("coastline")
>> library(rgdal)
>> # Change projection of coastline to match that of bathymetry data
>> coastline2 <- spTransform(coastline, crs(bathymetry)) plot(coastline2, 
>> add=TRUE, col="lightyellow2")
> 
> The inclusion of 'library(rgdal)' above suggests that your plot method needs something from 'rgdal'. If that something is a plot method from that package, it may not be visible from your function (due to changes introduced in R-4.0.0, search NEWS for R-4.0.0 'plot'), you would need to import plot methods from rgdal if that is the case (and maybe move rgdal from Suggests to Imports). 
> 
> Georgi Boshnakov
> 
> 
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Duncan Murdoch
> Sent: 14 April 2021 13:45
> To: Jacob Nabe-Nielsen <jnn at bios.au.dk>; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Problem with S4 method for plotting a raster file
> 
> On 14/04/2021 5:41 a.m., Jacob Nabe-Nielsen wrote:
>> Dear all,
>> 
>> I have just discovered an error in a package that I have already 
>> uploaded to CRAN, and cannot figure out how to fix it. All help will be greatly appreciated.
>> The package is called DEPONS2R, and is available from:
>> https://cran.r-project.org/web/packages/DEPONS2R/index.html
>> 
>> The problem is related to one of the included examples, where I plot 
>> the coastline on top of a raster file. In the example, where the 
>> plotting is embedded in an S4 method called plot.DeponsRaster, the 
>> coastline does not show. But if I run the functions that the method is 
>> composed of, everything works fine (see below). So I am wondering if 
>> the graphics devise is not passed on correctly within the package, or what actually happens.
>> 
>> The example that does not run correctly is available from ?plot.DeponsRaster:
>> 
>> library(DEPONS2R)
>> 
>> data("bathymetry")
>> plot(bathymetry)
>> data("coastline")
>> library(rgdal)
>> # Change projection of coastline to match that of bathymetry data
>> coastline2 <- spTransform(coastline, crs(bathymetry)) plot(coastline2, 
>> add=TRUE, col="lightyellow2")
>> 
>> 
>> Here the coastline is not plotted. The method is defined as:
>> 
>> 
>> setMethod("plot", signature("DeponsRaster", "ANY"),
>>           function(x, y, maxpixels=500000, col, alpha=NULL, colNA=NA, add=FALSE,
>>                    ext=NULL, useRaster=TRUE, interpolate=FALSE, addfun=NULL,
>>                    nc, nr, maxnl=16, main, npretty=0, axes=TRUE,
>>                    legend=TRUE, trackToPlot=1, ...)  {
>>             oldpar <- graphics::par(no.readonly = TRUE)
>>             on.exit(graphics::par(oldpar))
>>             if (missing(main)) {
>>               main <- paste(x at landscape, x at type, sep=" - ")
>>             }
>>             # Define colours specific or 'type'
>>             if(missing(col) && x at type=="bathymetry") {
>>               tmp.col <- grDevices::rainbow(1000)[501:800]
>>               col <- c(tmp.col[1:100], rep(tmp.col[101:250], each=5))
>>             }
>>             # Use {raster}-package for plotting
>>             if(x at crs=="NA") {
>>               crs2 <- sp::CRS(as.character(NA))
>>             } else {
>>               crs2 <- sp::CRS(x at crs)
>>             }
>>             rdata <- raster::raster(x=x at data, xmn=x at ext$xleft, xmx=x at ext$xright,
>>                                     ymn=x at ext$ybottom, ymx=x at ext$ytop,
>>                                     crs=crs2)
>>             raster::plot(rdata, col=col, main=main,
>>                          alpha=alpha, add=add, ext=ext, axes=axes, legend=legend)
>>           }
>> )
>> 
>> 
>> But when I use the functions that are at the core of this method it is 
>> not a problem adding the coastline correctly:
>> 
>> x <- bathymetry
>> crs2 <- raster::crs(x at crs)
>> rdata <- raster::raster(x = x at data, xmn = x at ext$xleft, xmx = 
>> x at ext$xright, ymn = x at ext$ybottom, ymx = x at ext$ytop, crs = crs2)
>> raster::plot(rdata)
>> plot(coastline2, add=TRUE, col="lightyellow2")
>> 
>> If would be fantastic if someone can figure out how I should modify 
>> the method to plot the coastline correctly on top of the map.
>> 
>> 
> 
> I'm not sure exactly what is going wrong, but if you plot the coastline first and the bathymetry second, things do show up.  Maybe that's enough of a hint for you:
> 
> library(DEPONS2R)
> data("coastline")
> library(rgdal)
> coastline2 <- spTransform(coastline, crs(bathymetry)) plot(coastline2, col="lightyellow2")
> 
> data("bathymetry")
> plot(bathymetry, add=TRUE)
> 
> This puts the legend on top of the plotted coastline data, so my guess is that the limits of the bathymetry plot aren't being made available to the coastline plot when you do things in the original order.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Apr 14 16:21:16 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 14 Apr 2021 10:21:16 -0400
Subject: [R-pkg-devel] Problem with S4 method for plotting a raster file
In-Reply-To: <962B2433-9D85-49FD-8099-F93E16359AA6@bios.au.dk>
References: <A39314C5-E914-464E-AC54-CC93CC25CE0A@bios.au.dk>
 <b70acce2-9c19-18a4-5efb-3ff6324e6101@gmail.com>
 <962B2433-9D85-49FD-8099-F93E16359AA6@bios.au.dk>
Message-ID: <05256be8-de09-9a18-da71-ea3910a1c73b@gmail.com>

On 14/04/2021 9:26 a.m., Jacob Nabe-Nielsen wrote:
> Hi Duncan
> 
> Thanks a lot for the help. This works, but unfortunately it does not 
> result in a landscape which is cropped to the extent of the bathymetry 
> raster file... it would be nice to be able to do that as well (as you 
> can if you use the 'raster' and 'sp' packages).
> 

I wasn't suggesting that my code was a solution, it's just a hint about 
what is going wrong.  I don't know how the coastline plot determines the 
bounds of the plot region, but if that isn't working, then you'd have 
problems similar to what you saw.

Duncan Murdoch


> Best wishes,
> Jacob
> 
> 
>> On 14 Apr 2021, at 14.44, Duncan Murdoch <murdoch.duncan at gmail.com 
>> <mailto:murdoch.duncan at gmail.com>> wrote:
>>
>> On 14/04/2021 5:41 a.m., Jacob Nabe-Nielsen wrote:
>>> Dear all,
>>> I have just discovered an error in a package that I have already 
>>> uploaded to
>>> CRAN, and cannot figure out how to fix it. All help will be greatly 
>>> appreciated.
>>> The package is called DEPONS2R, and is available from:
>>> https://cran.r-project.org/web/packages/DEPONS2R/index.html 
>>> <https://cran.r-project.org/web/packages/DEPONS2R/index.html>
>>> The problem is related to one of the included examples, where I plot 
>>> the coastline
>>> on top of a raster file. In the example, where the plotting is 
>>> embedded in
>>> an S4 method called plot.DeponsRaster, the coastline does not show. 
>>> But if
>>> I run the functions that the method is composed of, everything works 
>>> fine (see
>>> below). So I am wondering if the graphics devise is not passed on 
>>> correctly
>>> within the package, or what actually happens.
>>> The example that does not run correctly is available from 
>>> ?plot.DeponsRaster:
>>> library(DEPONS2R)
>>> data("bathymetry")
>>> plot(bathymetry)
>>> data("coastline")
>>> library(rgdal)
>>> # Change projection of coastline to match that of bathymetry data
>>> coastline2 <- spTransform(coastline, crs(bathymetry))
>>> plot(coastline2, add=TRUE, col="lightyellow2")
>>> Here the coastline is not plotted. The method is defined as:
>>> setMethod("plot", signature("DeponsRaster", "ANY"),
>>> ??????????function(x, y, maxpixels=500000, col, alpha=NULL, colNA=NA, 
>>> add=FALSE,
>>> ???????????????????ext=NULL, useRaster=TRUE, interpolate=FALSE, 
>>> addfun=NULL,
>>> ???????????????????nc, nr, maxnl=16, main, npretty=0, axes=TRUE,
>>> ???????????????????legend=TRUE, trackToPlot=1, ...) ?{
>>> ????????????oldpar <- graphics::par(no.readonly = TRUE)
>>> ????????????on.exit(graphics::par(oldpar))
>>> ????????????if (missing(main)) {
>>> ??????????????main <- paste(x at landscape, x at type, sep=" - ")
>>> ????????????}
>>> ????????????# Define colours specific or 'type'
>>> ????????????if(missing(col) && x at type=="bathymetry") {
>>> ??????????????tmp.col <- grDevices::rainbow(1000)[501:800]
>>> ??????????????col <- c(tmp.col[1:100], rep(tmp.col[101:250], each=5))
>>> ????????????}
>>> ????????????# Use {raster}-package for plotting
>>> ????????????if(x at crs=="NA") {
>>> ??????????????crs2 <- sp::CRS(as.character(NA))
>>> ????????????} else {
>>> ??????????????crs2 <- sp::CRS(x at crs)
>>> ????????????}
>>> ????????????rdata <- raster::raster(x=x at data, xmn=x at ext$xleft, 
>>> xmx=x at ext$xright,
>>> ????????????????????????????????????ymn=x at ext$ybottom, ymx=x at ext$ytop,
>>> ????????????????????????????????????crs=crs2)
>>> ????????????raster::plot(rdata, col=col, main=main,
>>> ?????????????????????????alpha=alpha, add=add, ext=ext, axes=axes, 
>>> legend=legend)
>>> ??????????}
>>> )
>>> But when I use the functions that are at the core of this method it is
>>> not a problem adding the coastline correctly:
>>> x <- bathymetry
>>> crs2 <- raster::crs(x at crs)
>>> rdata <- raster::raster(x = x at data, xmn = x at ext$xleft,
>>> xmx = x at ext$xright, ymn = x at ext$ybottom, ymx = x at ext$ytop,
>>> crs = crs2)
>>> raster::plot(rdata)
>>> plot(coastline2, add=TRUE, col="lightyellow2")
>>> If would be fantastic if someone can figure out how I should modify 
>>> the method
>>> to plot the coastline correctly on top of the map.
>>
>> I'm not sure exactly what is going wrong, but if you plot the 
>> coastline first and the bathymetry second, things do show up. ?Maybe 
>> that's enough of a hint for you:
>>
>> library(DEPONS2R)
>> data("coastline")
>> library(rgdal)
>> coastline2 <- spTransform(coastline, crs(bathymetry))
>> plot(coastline2, col="lightyellow2")
>>
>> data("bathymetry")
>> plot(bathymetry, add=TRUE)
>>
>> This puts the legend on top of the plotted coastline data, so my guess 
>> is that the limits of the bathymetry plot aren't being made available 
>> to the coastline plot when you do things in the original order.
>>
>> Duncan Murdoch
>


From |eder|co@z@ngh|@11 @end|ng |rom gm@||@com  Wed Apr 14 18:11:39 2021
From: |eder|co@z@ngh|@11 @end|ng |rom gm@||@com (Federico Zanghi)
Date: Wed, 14 Apr 2021 18:11:39 +0200
Subject: [R-pkg-devel] Question "no visible binding for '<<-' assignment"
Message-ID: <CANTQg_dx-Nih4UWXzhVHdySjsXKZ_kFdc51k69V79fVxKfDY3w@mail.gmail.com>

Hi :)

I'm here because i have a problem with my package...i have the function
"SARMAX.refinement", clearly the problem is that i can't assign a variable
on global environment from a function.
So when i CHECK the package it gives me 1 Note that doesn't make me publish
the package :(

The Note is this:

* checking R code for possible problems ... [20s] NOTE
SARMAX.refinement: no visible binding for '<<-' assignment to 'xreg'


The fact is that the function
"model <- Arima(fit$data, order = arima_order,seasonal =
list(order=seasonal_order,period=period), xreg = xreg)"

works only if i define xreg on the glob.env...

I tried  using fitted(fit) instead of xreg but i cannot use predict because
the function doesn't find "fitted(fit)" or xreg (even if i define xreg only
inside the function with xreg <- fitted(fit)).

Anyone has any suggestions?
(without completely change the function or the class...i'd like to
maintain the current class to use all its functions)

Thank you,
Federico



P.S.

In order to being as clear as possible i paste the code i need to use:

arimaGGM <- SARMAX.refinement(GGM,arima_order = c(2,0,1),seasonal_order =
c(1,0,0), period=4,display = F)
predict(arimaGGM,newxreg = 1:100)

the data is also attached to the mail :)

From chr|@ho|d @end|ng |rom p@yctc@org  Wed Apr 14 18:53:10 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Wed, 14 Apr 2021 17:53:10 +0100 (BST)
Subject: [R-pkg-devel] Another newbie question: vignettes not appearing in
 GitHub hosted package
Message-ID: <2073689205.1245013.1618419190285.JavaMail.zimbra@psyctc.org>

As ever, my package is https://github.com/cpsyctc/CECPfuns and I am building withing Rstudio 1.4.1103 

I am aiming for the package to have fairly comprehensive vignettes and there are four now, but two are very incomplete. 

The problem I have may relate to https://github.com/Kenkleinman/clusterPower/issues/113 and to 
https://github.com/rstudio/rstudio/issues/1766 or it may not. I have a nasty feeling that I am just looking 
straight through something obvious. 

When I run 
browseVignettes(package = "CECPfuns") 
within Rstudio working on the package I see the vignettes and I have now got pkgdown working to compile the 
lovely web site around the package (at https://cecpfuns.psyctc.org/) and I see the vignettes there and they 
update. 

The bizarre thing that is beating me is that when I pull the package down to any machine with 
remotes::install_github("cpsyctc/CECPfuns") 
gets the function but no vignettes! Here's an example from my little Pi machine: 

> remotes::install_github("cpsyctc/CECPfuns") 
Downloading GitHub repo cpsyctc/CECPfuns at HEAD 
? checking for file ?/tmp/RtmpPhD1Rg/remotes294e1d1ff9d6/cpsyctc-CECPfuns-ab23518/DESCRIPTION? (722ms) 
? preparing ?CECPfuns?: 
? checking DESCRIPTION meta-information ... 
? installing the package to process help pages 
? checking for LF line-endings in source and make files and shell scripts (13.7s) 
? checking for empty or unneeded directories 
? looking to see if a ?data/datalist? file should be added 
? building ?CECPfuns_0.0.0.9041.tar.gz? 

* installing *source* package ?CECPfuns? ... 
** using staged installation 
** R 
** inst 
** byte-compile and prepare package for lazy loading 
** help 
*** installing help indices 
** building package indices 
** installing vignettes 
** testing if installed package can be loaded from temporary location 
** testing if installed package can be loaded from final location 
** testing if installed package keeps a record of temporary installation path 
* DONE (CECPfuns) 
> browseVignettes(package = "CECPfuns") 
No vignettes found by browseVignettes(package = "CECPfuns") 

I hope someone can see what I'm doing wrong! As ever, TIA, 

Chris 

-- 
Chris Evans (he/him) <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk> 
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places 
but <chris at psyctc.org> remains my main Email address. I have a work web site at: 
https://www.psyctc.org/psyctc/ 
and a site I manage for CORE and CORE system trust at: 
http://www.coresystemtrust.org.uk/ 
I have "semigrated" to France, see: 
https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/ 

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at: 
https://www.psyctc.org/pelerinage2016/ceworkdiary/ 
Beware: French time, generally an hour ahead of UK. 


From zk@mv@r @end|ng |rom gm@||@com  Wed Apr 14 18:57:11 2021
From: zk@mv@r @end|ng |rom gm@||@com (Zhian N. Kamvar)
Date: Wed, 14 Apr 2021 09:57:11 -0700
Subject: [R-pkg-devel] 
 Another newbie question: vignettes not appearing in
 GitHub hosted package
In-Reply-To: <2073689205.1245013.1618419190285.JavaMail.zimbra@psyctc.org>
References: <2073689205.1245013.1618419190285.JavaMail.zimbra@psyctc.org>
Message-ID: <35b1d60b-89a9-cec0-6675-f4407ff40a92@gmail.com>

Hi Chris,

You need to add the `build_vignettes = TRUE` argument to `install_github()`.

On 4/14/21 9:53 AM, Chris Evans wrote:
> As ever, my package is https://github.com/cpsyctc/CECPfuns and I am building withing Rstudio 1.4.1103
>
> I am aiming for the package to have fairly comprehensive vignettes and there are four now, but two are very incomplete.
>
> The problem I have may relate to https://github.com/Kenkleinman/clusterPower/issues/113 and to
> https://github.com/rstudio/rstudio/issues/1766 or it may not. I have a nasty feeling that I am just looking
> straight through something obvious.
>
> When I run
> browseVignettes(package = "CECPfuns")
> within Rstudio working on the package I see the vignettes and I have now got pkgdown working to compile the
> lovely web site around the package (at https://cecpfuns.psyctc.org/) and I see the vignettes there and they
> update.
>
> The bizarre thing that is beating me is that when I pull the package down to any machine with
> remotes::install_github("cpsyctc/CECPfuns")
> gets the function but no vignettes! Here's an example from my little Pi machine:
>
>> remotes::install_github("cpsyctc/CECPfuns")
> Downloading GitHub repo cpsyctc/CECPfuns at HEAD
> ? checking for file ?/tmp/RtmpPhD1Rg/remotes294e1d1ff9d6/cpsyctc-CECPfuns-ab23518/DESCRIPTION? (722ms)
> ? preparing ?CECPfuns?:
> ? checking DESCRIPTION meta-information ...
> ? installing the package to process help pages
> ? checking for LF line-endings in source and make files and shell scripts (13.7s)
> ? checking for empty or unneeded directories
> ? looking to see if a ?data/datalist? file should be added
> ? building ?CECPfuns_0.0.0.9041.tar.gz?
>
> * installing *source* package ?CECPfuns? ...
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> ** help
> *** installing help indices
> ** building package indices
> ** installing vignettes
> ** testing if installed package can be loaded from temporary location
> ** testing if installed package can be loaded from final location
> ** testing if installed package keeps a record of temporary installation path
> * DONE (CECPfuns)
>> browseVignettes(package = "CECPfuns")
> No vignettes found by browseVignettes(package = "CECPfuns")
>
> I hope someone can see what I'm doing wrong! As ever, TIA,
>
> Chris
>


From c@@rd|@g@bor @end|ng |rom gm@||@com  Wed Apr 14 18:57:03 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 14 Apr 2021 18:57:03 +0200
Subject: [R-pkg-devel] 
 Another newbie question: vignettes not appearing in
 GitHub hosted package
In-Reply-To: <2073689205.1245013.1618419190285.JavaMail.zimbra@psyctc.org>
References: <2073689205.1245013.1618419190285.JavaMail.zimbra@psyctc.org>
Message-ID: <CABtg=KnP9-jAdcBVtdZAFO1x4z9fE9SqYDazDfvkNi54Qij3bw@mail.gmail.com>

remotes::install_github() does not build the vignettes by default, you
can use the build_opts argument to change this.

Gabor

On Wed, Apr 14, 2021 at 6:53 PM Chris Evans <chrishold at psyctc.org> wrote:
>
> As ever, my package is https://github.com/cpsyctc/CECPfuns and I am building withing Rstudio 1.4.1103
>
> I am aiming for the package to have fairly comprehensive vignettes and there are four now, but two are very incomplete.
>
> The problem I have may relate to https://github.com/Kenkleinman/clusterPower/issues/113 and to
> https://github.com/rstudio/rstudio/issues/1766 or it may not. I have a nasty feeling that I am just looking
> straight through something obvious.
>
> When I run
> browseVignettes(package = "CECPfuns")
> within Rstudio working on the package I see the vignettes and I have now got pkgdown working to compile the
> lovely web site around the package (at https://cecpfuns.psyctc.org/) and I see the vignettes there and they
> update.
>
> The bizarre thing that is beating me is that when I pull the package down to any machine with
> remotes::install_github("cpsyctc/CECPfuns")
> gets the function but no vignettes! Here's an example from my little Pi machine:
>
> > remotes::install_github("cpsyctc/CECPfuns")
> Downloading GitHub repo cpsyctc/CECPfuns at HEAD
> ? checking for file ?/tmp/RtmpPhD1Rg/remotes294e1d1ff9d6/cpsyctc-CECPfuns-ab23518/DESCRIPTION? (722ms)
> ? preparing ?CECPfuns?:
> ? checking DESCRIPTION meta-information ...
> ? installing the package to process help pages
> ? checking for LF line-endings in source and make files and shell scripts (13.7s)
> ? checking for empty or unneeded directories
> ? looking to see if a ?data/datalist? file should be added
> ? building ?CECPfuns_0.0.0.9041.tar.gz?
>
> * installing *source* package ?CECPfuns? ...
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> ** help
> *** installing help indices
> ** building package indices
> ** installing vignettes
> ** testing if installed package can be loaded from temporary location
> ** testing if installed package can be loaded from final location
> ** testing if installed package keeps a record of temporary installation path
> * DONE (CECPfuns)
> > browseVignettes(package = "CECPfuns")
> No vignettes found by browseVignettes(package = "CECPfuns")
>
> I hope someone can see what I'm doing wrong! As ever, TIA,
>
> Chris
>
> --
> Chris Evans (he/him) <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
> I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
> but <chris at psyctc.org> remains my main Email address. I have a work web site at:
> https://www.psyctc.org/psyctc/
> and a site I manage for CORE and CORE system trust at:
> http://www.coresystemtrust.org.uk/
> I have "semigrated" to France, see:
> https://www.psyctc.org/pelerinage2016/semigrating-to-france/
> https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/
>
> If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
> https://www.psyctc.org/pelerinage2016/ceworkdiary/
> Beware: French time, generally an hour ahead of UK.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From chr|@ho|d @end|ng |rom p@yctc@org  Wed Apr 14 20:17:02 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Wed, 14 Apr 2021 19:17:02 +0100 (BST)
Subject: [R-pkg-devel] 
 Another newbie question: vignettes not appearing in
 GitHub hosted package
In-Reply-To: <35b1d60b-89a9-cec0-6675-f4407ff40a92@gmail.com>
References: <2073689205.1245013.1618419190285.JavaMail.zimbra@psyctc.org>
 <35b1d60b-89a9-cec0-6675-f4407ff40a92@gmail.com>
Message-ID: <303534426.1302005.1618424222330.JavaMail.zimbra@psyctc.org>

Oh no, how embarrassing!  

But in my defence, am I the only one who thinks having build_vignettes = FALSE as default is a bit anti-vignettes?!

Many thanks both, 

Chris

----- Original Message -----
> From: "Zhian N. Kamvar" <zkamvar at gmail.com>
> To: "r-package-devel" <r-package-devel at r-project.org>
> Sent: Wednesday, 14 April, 2021 17:57:11
> Subject: Re: [R-pkg-devel] Another newbie question: vignettes not appearing in GitHub hosted package

> Hi Chris,
> 
> You need to add the `build_vignettes = TRUE` argument to `install_github()`.
> 
> On 4/14/21 9:53 AM, Chris Evans wrote:
>> As ever, my package is https://github.com/cpsyctc/CECPfuns and I am building
>> withing Rstudio 1.4.1103
>>
>> I am aiming for the package to have fairly comprehensive vignettes and there are
>> four now, but two are very incomplete.
>>
>> The problem I have may relate to
>> https://github.com/Kenkleinman/clusterPower/issues/113 and to
>> https://github.com/rstudio/rstudio/issues/1766 or it may not. I have a nasty
>> feeling that I am just looking
>> straight through something obvious.
>>
>> When I run
>> browseVignettes(package = "CECPfuns")
>> within Rstudio working on the package I see the vignettes and I have now got
>> pkgdown working to compile the
>> lovely web site around the package (at https://cecpfuns.psyctc.org/) and I see
>> the vignettes there and they
>> update.
>>
>> The bizarre thing that is beating me is that when I pull the package down to any
>> machine with
>> remotes::install_github("cpsyctc/CECPfuns")
>> gets the function but no vignettes! Here's an example from my little Pi machine:
>>
>>> remotes::install_github("cpsyctc/CECPfuns")
>> Downloading GitHub repo cpsyctc/CECPfuns at HEAD
>> ? checking for file
>> ?/tmp/RtmpPhD1Rg/remotes294e1d1ff9d6/cpsyctc-CECPfuns-ab23518/DESCRIPTION?
>> (722ms)
>> ? preparing ?CECPfuns?:
>> ? checking DESCRIPTION meta-information ...
>> ? installing the package to process help pages
>> ? checking for LF line-endings in source and make files and shell scripts
>> (13.7s)
>> ? checking for empty or unneeded directories
>> ? looking to see if a ?data/datalist? file should be added
>> ? building ?CECPfuns_0.0.0.9041.tar.gz?
>>
>> * installing *source* package ?CECPfuns? ...
>> ** using staged installation
>> ** R
>> ** inst
>> ** byte-compile and prepare package for lazy loading
>> ** help
>> *** installing help indices
>> ** building package indices
>> ** installing vignettes
>> ** testing if installed package can be loaded from temporary location
>> ** testing if installed package can be loaded from final location
>> ** testing if installed package keeps a record of temporary installation path
>> * DONE (CECPfuns)
>>> browseVignettes(package = "CECPfuns")
>> No vignettes found by browseVignettes(package = "CECPfuns")
>>
>> I hope someone can see what I'm doing wrong! As ever, TIA,
>>
>> Chris
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Chris Evans (he/him) <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From c@@rd|@g@bor @end|ng |rom gm@||@com  Wed Apr 14 20:40:39 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 14 Apr 2021 20:40:39 +0200
Subject: [R-pkg-devel] 
 Another newbie question: vignettes not appearing in
 GitHub hosted package
In-Reply-To: <303534426.1302005.1618424222330.JavaMail.zimbra@psyctc.org>
References: <2073689205.1245013.1618419190285.JavaMail.zimbra@psyctc.org>
 <35b1d60b-89a9-cec0-6675-f4407ff40a92@gmail.com>
 <303534426.1302005.1618424222330.JavaMail.zimbra@psyctc.org>
Message-ID: <CABtg=K=91aR1pDhhTsfqK_Vu1VSUe658QnFSmcMg71WCoOAq8Q@mail.gmail.com>

remotes::install_github() is a function aimed at developers that need
the unreleased version of a package for testing or other dev purposes.
In these cases you don't usually need the vignettes. hence the
default.

Gabor

On Wed, Apr 14, 2021 at 8:17 PM Chris Evans <chrishold at psyctc.org> wrote:
>
> Oh no, how embarrassing!
>
> But in my defence, am I the only one who thinks having build_vignettes = FALSE as default is a bit anti-vignettes?!
>
> Many thanks both,
>
> Chris
>
> ----- Original Message -----
> > From: "Zhian N. Kamvar" <zkamvar at gmail.com>
> > To: "r-package-devel" <r-package-devel at r-project.org>
> > Sent: Wednesday, 14 April, 2021 17:57:11
> > Subject: Re: [R-pkg-devel] Another newbie question: vignettes not appearing in GitHub hosted package
>
> > Hi Chris,
> >
> > You need to add the `build_vignettes = TRUE` argument to `install_github()`.
> >
> > On 4/14/21 9:53 AM, Chris Evans wrote:
> >> As ever, my package is https://github.com/cpsyctc/CECPfuns and I am building
> >> withing Rstudio 1.4.1103
> >>
> >> I am aiming for the package to have fairly comprehensive vignettes and there are
> >> four now, but two are very incomplete.
> >>
> >> The problem I have may relate to
> >> https://github.com/Kenkleinman/clusterPower/issues/113 and to
> >> https://github.com/rstudio/rstudio/issues/1766 or it may not. I have a nasty
> >> feeling that I am just looking
> >> straight through something obvious.
> >>
> >> When I run
> >> browseVignettes(package = "CECPfuns")
> >> within Rstudio working on the package I see the vignettes and I have now got
> >> pkgdown working to compile the
> >> lovely web site around the package (at https://cecpfuns.psyctc.org/) and I see
> >> the vignettes there and they
> >> update.
> >>
> >> The bizarre thing that is beating me is that when I pull the package down to any
> >> machine with
> >> remotes::install_github("cpsyctc/CECPfuns")
> >> gets the function but no vignettes! Here's an example from my little Pi machine:
> >>
> >>> remotes::install_github("cpsyctc/CECPfuns")
> >> Downloading GitHub repo cpsyctc/CECPfuns at HEAD
> >> ? checking for file
> >> ?/tmp/RtmpPhD1Rg/remotes294e1d1ff9d6/cpsyctc-CECPfuns-ab23518/DESCRIPTION?
> >> (722ms)
> >> ? preparing ?CECPfuns?:
> >> ? checking DESCRIPTION meta-information ...
> >> ? installing the package to process help pages
> >> ? checking for LF line-endings in source and make files and shell scripts
> >> (13.7s)
> >> ? checking for empty or unneeded directories
> >> ? looking to see if a ?data/datalist? file should be added
> >> ? building ?CECPfuns_0.0.0.9041.tar.gz?
> >>
> >> * installing *source* package ?CECPfuns? ...
> >> ** using staged installation
> >> ** R
> >> ** inst
> >> ** byte-compile and prepare package for lazy loading
> >> ** help
> >> *** installing help indices
> >> ** building package indices
> >> ** installing vignettes
> >> ** testing if installed package can be loaded from temporary location
> >> ** testing if installed package can be loaded from final location
> >> ** testing if installed package keeps a record of temporary installation path
> >> * DONE (CECPfuns)
> >>> browseVignettes(package = "CECPfuns")
> >> No vignettes found by browseVignettes(package = "CECPfuns")
> >>
> >> I hope someone can see what I'm doing wrong! As ever, TIA,
> >>
> >> Chris
> >>
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> Chris Evans (he/him) <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
> I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
> but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
>    https://www.psyctc.org/psyctc/
> and a site I manage for CORE and CORE system trust at:
>    http://www.coresystemtrust.org.uk/
> I have "semigrated" to France, see:
>    https://www.psyctc.org/pelerinage2016/semigrating-to-france/
>    https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/
>
> If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
>    https://www.psyctc.org/pelerinage2016/ceworkdiary/
> Beware: French time, generally an hour ahead of UK.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Apr 15 00:07:43 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 14 Apr 2021 18:07:43 -0400
Subject: [R-pkg-devel] 
 Question "no visible binding for '<<-' assignment"
In-Reply-To: <CANTQg_dx-Nih4UWXzhVHdySjsXKZ_kFdc51k69V79fVxKfDY3w@mail.gmail.com>
References: <CANTQg_dx-Nih4UWXzhVHdySjsXKZ_kFdc51k69V79fVxKfDY3w@mail.gmail.com>
Message-ID: <7b5e671d-9c87-c736-dc3d-dc0f4378f411@gmail.com>

On 14/04/2021 12:11 p.m., Federico Zanghi wrote:
> Hi :)
> 
> I'm here because i have a problem with my package...i have the function
> "SARMAX.refinement", clearly the problem is that i can't assign a variable
> on global environment from a function.
> So when i CHECK the package it gives me 1 Note that doesn't make me publish
> the package :(
> 
> The Note is this:
> 
> * checking R code for possible problems ... [20s] NOTE
> SARMAX.refinement: no visible binding for '<<-' assignment to 'xreg'
> 
> 
> The fact is that the function
> "model <- Arima(fit$data, order = arima_order,seasonal =
> list(order=seasonal_order,period=period), xreg = xreg)"
> 
> works only if i define xreg on the glob.env...

Then something is broken.  You need to change things: packages shouldn't 
be writing directly to the global environment.

I don't know the Arima function, but it's where I'd start looking.
> 
> I tried  using fitted(fit) instead of xreg but i cannot use predict because
> the function doesn't find "fitted(fit)" or xreg (even if i define xreg only
> inside the function with xreg <- fitted(fit)).
> 
> Anyone has any suggestions?
> (without completely change the function or the class...i'd like to
> maintain the current class to use all its functions)

Scoping for modelling functions is quite tricky.  The standard rules are 
that model variables are looked for in the data argument first, then the 
environment of the model formula.  "Model variables" include those 
referenced in the model formula, but also some others.


> P.S.
> 
> In order to being as clear as possible i paste the code i need to use:
> 
> arimaGGM <- SARMAX.refinement(GGM,arima_order = c(2,0,1),seasonal_order =
> c(1,0,0), period=4,display = F)
> predict(arimaGGM,newxreg = 1:100)
> 
> the data is also attached to the mail :)

No, it wasn't.  If you want more specific help, you should include a 
self-contained example in the text of your message.

Duncan Murdoch


