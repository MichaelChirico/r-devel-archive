From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Fri Apr  3 22:03:12 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Fri, 3 Apr 2020 15:03:12 -0500
Subject: [R-pkg-devel] GitHub problems
In-Reply-To: <24791f17-dadf-4dc2-bbf5-4d9d100afdc2@effectivedefense.org>
References: <9524ce4c-4408-5e0b-1826-6291ccf5c54a@effectivedefense.org>
 <CAJmOi+N7M3+YstV7TW7j+t5Qc=DsMJbq38XDp5ppDB3RU-+41w@mail.gmail.com>
 <24791f17-dadf-4dc2-bbf5-4d9d100afdc2@effectivedefense.org>
Message-ID: <71d38934-2cac-aaf2-c5b2-5006ae3967ca@effectivedefense.org>

Hello, All:


 ????? I've been unable to get SSH to work with 
"https://github.com/JamesRamsay5/fda", documented in my email to this 
group almost 3 weeks ago.? I've been able to do "git clone 
https://sbgraves237:<GitHub-password>@github.com/JamesRamsay5/fda", then 
change a file, do "git commit" and "git push".


 ????? However, this has my GitHub password in a plain text ".git" file 
on my hard drive.? I think the hard drive on my computer is encrypted, 
so maybe that's not a problem.


 ????? Am I not allowed to use SSH with a GitHub repository that's not 
my own?


 ????? Thanks,
 ????? Spencer Graves


p.s.? Since my previous email, Ramsay added "README.md" to that 
repository.? I can do "git clone" and get it, then edit it, then "git 
commit".? However, "git push" keeps giving me errors:


git push
remote: Invalid username or password.
fatal: Authentication failed for 
'https://<token>@github.com/JamesRamsay5/fda/'


 ????? A few hours ago, the owner, JamesRamsay5, went to "Settings" > 
"Manage access", then invited me as a collaborator.? I got an email 
asking me to "view invitation", which I did.? I got another email 
saying, "Hey there, we?re just writing to let you know that you?ve been 
automatically subscribed to a repository on GitHub." Sadly, I still 
couldn't access it, so I I deleted my token and created a new one.? I 
also deleted my previous local clone of "fda" and recreated it using? 
"git clone https://<token>@github.com/JamesRamsay5/fda".? Then I did a 
test edit to the one file in that repository, README.md.? I think did 
'git commit README.md -m "tst edit"'.? Then "git push" keeps giving me 
the error just mentioned.


 > sessionInfo()
R version 3.6.3 (2020-02-29)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS Catalina 10.15.4

Matrix products: default
BLAS: 
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK: 
/Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats???? graphics? grDevices utils???? datasets
[6] methods?? base

loaded via a namespace (and not attached):
[1] compiler_3.6.3 tools_3.6.3


On 2020-03-14 02:33, Spencer Graves wrote:
> Thanks very much.
>
>
> I deleted my token.? I will forward your comment to Jim Ramsay to try 
> to figure out the permissions question.
>
>
> Spencer
>
>
> On 2020-03-14 01:35, Hugh Parsonage wrote:
>>
>> You published your token. You should revoke it.
>>
>> You probably don?t have the right permissions associated with git.
>>
>>
>>
>> On Sat, 14 Mar 2020 at 2:14 pm, Spencer Graves 
>> <spencer.graves at effectivedefense.org 
>> <mailto:spencer.graves at effectivedefense.org>> wrote:
>>
>>     Hello, All:
>>
>>
>>     ?????? What do you suggest Jim Ramsay and I do to migrate the fda
>>     package to GitHub?
>>
>>
>>     ?????? Jim successfully created an empty repository:
>>
>>
>>     https://github.com/JamesRamsay5/fda
>>
>>
>>     ?????? He told me he had officially made me a "contributor".? I did:
>>
>>
>>     git clone https://<token>@github.com/JamesRamsay5/fda
>>     <http://github.com/JamesRamsay5/fda>
>>     Cloning into 'fda'...
>>     warning: You appear to have cloned an empty repository.
>>     Checking connectivity... done.
>>
>>
>>     ???? ? Then I copied files into this directory, did "git add" and
>>     "git
>>     commit".
>>
>>
>>     ?????? Then I did "git push", and it wouldn't let me:
>>
>>
>>     SpenceravessMBP:fda sbgraves$ git push
>>     remote: Permission to JamesRamsay5/fda.git denied to sbgraves237.
>>     fatal: unable to access
>>     'https://892da70262d9a4faa857b8602145414d6b21085b at github.com/JamesRamsay5/fda/':
>>
>>     The requested URL returned error: 403
>>
>>
>>     ?????? Suggestions?
>>     ?????? Thanks,
>>     ?????? Spencer Graves
>>
>>     ______________________________________________
>>     R-package-devel at r-project.org
>>     <mailto:R-package-devel at r-project.org> mailing list
>>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>


	[[alternative HTML version deleted]]


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Fri Apr  3 22:17:34 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Fri, 3 Apr 2020 20:17:34 +0000
Subject: [R-pkg-devel] GitHub problems
In-Reply-To: <71d38934-2cac-aaf2-c5b2-5006ae3967ca@effectivedefense.org>
References: <9524ce4c-4408-5e0b-1826-6291ccf5c54a@effectivedefense.org>
 <CAJmOi+N7M3+YstV7TW7j+t5Qc=DsMJbq38XDp5ppDB3RU-+41w@mail.gmail.com>
 <24791f17-dadf-4dc2-bbf5-4d9d100afdc2@effectivedefense.org>,
 <71d38934-2cac-aaf2-c5b2-5006ae3967ca@effectivedefense.org>
Message-ID: <bda9c0780cba4674a32bfea51be97d9b@umanitoba.ca>

Hi Spencer,


Did you follow the instructions here? https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh


Once the key is setup, you should be able to do "git clone git at github.com:JamesRamsay5/fda.git", without any need to input a token or a password in the command. Similarly, git push/pull/fetch should all work seamlessly.


This is how I've used Github for many years, and it's always worked fine.


Best,

Max

Connecting to GitHub with SSH - GitHub Help<https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh>
help.github.com
You can connect to GitHub using SSH.





Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Spencer Graves <spencer.graves at effectivedefense.org>
Sent: April 3, 2020 3:03:12 PM
To: Hugh Parsonage
Cc: List r-package-devel
Subject: Re: [R-pkg-devel] GitHub problems

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

Hello, All:


       I've been unable to get SSH to work with
"https://github.com/JamesRamsay5/fda", documented in my email to this
group almost 3 weeks ago.  I've been able to do "git clone
https://sbgraves237:<GitHub-password>@github.com/JamesRamsay5/fda", then
change a file, do "git commit" and "git push".


       However, this has my GitHub password in a plain text ".git" file
on my hard drive.  I think the hard drive on my computer is encrypted,
so maybe that's not a problem.


       Am I not allowed to use SSH with a GitHub repository that's not
my own?


       Thanks,
       Spencer Graves


p.s.  Since my previous email, Ramsay added "README.md" to that
repository.  I can do "git clone" and get it, then edit it, then "git
commit".  However, "git push" keeps giving me errors:


git push
remote: Invalid username or password.
fatal: Authentication failed for
'https://<token>@github.com/JamesRamsay5/fda/'


       A few hours ago, the owner, JamesRamsay5, went to "Settings" >
"Manage access", then invited me as a collaborator.  I got an email
asking me to "view invitation", which I did.  I got another email
saying, "Hey there, we?re just writing to let you know that you?ve been
automatically subscribed to a repository on GitHub." Sadly, I still
couldn't access it, so I I deleted my token and created a new one.  I
also deleted my previous local clone of "fda" and recreated it using
"git clone https://<token>@github.com/JamesRamsay5/fda".  Then I did a
test edit to the one file in that repository, README.md.  I think did
'git commit README.md -m "tst edit"'.  Then "git push" keeps giving me
the error just mentioned.


 > sessionInfo()
R version 3.6.3 (2020-02-29)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS Catalina 10.15.4

Matrix products: default
BLAS:
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK:
/Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets
[6] methods   base

loaded via a namespace (and not attached):
[1] compiler_3.6.3 tools_3.6.3


On 2020-03-14 02:33, Spencer Graves wrote:
> Thanks very much.
>
>
> I deleted my token.  I will forward your comment to Jim Ramsay to try
> to figure out the permissions question.
>
>
> Spencer
>
>
> On 2020-03-14 01:35, Hugh Parsonage wrote:
>>
>> You published your token. You should revoke it.
>>
>> You probably don?t have the right permissions associated with git.
>>
>>
>>
>> On Sat, 14 Mar 2020 at 2:14 pm, Spencer Graves
>> <spencer.graves at effectivedefense.org
>> <mailto:spencer.graves at effectivedefense.org>> wrote:
>>
>>     Hello, All:
>>
>>
>>            What do you suggest Jim Ramsay and I do to migrate the fda
>>     package to GitHub?
>>
>>
>>            Jim successfully created an empty repository:
>>
>>
>>     https://github.com/JamesRamsay5/fda
>>
>>
>>            He told me he had officially made me a "contributor".  I did:
>>
>>
>>     git clone https://<token>@github.com/JamesRamsay5/fda
>>     <http://github.com/JamesRamsay5/fda>
>>     Cloning into 'fda'...
>>     warning: You appear to have cloned an empty repository.
>>     Checking connectivity... done.
>>
>>
>>            Then I copied files into this directory, did "git add" and
>>     "git
>>     commit".
>>
>>
>>            Then I did "git push", and it wouldn't let me:
>>
>>
>>     SpenceravessMBP:fda sbgraves$ git push
>>     remote: Permission to JamesRamsay5/fda.git denied to sbgraves237.
>>     fatal: unable to access
>>     'https://892da70262d9a4faa857b8602145414d6b21085b at github.com/JamesRamsay5/fda/':
>>
>>     The requested URL returned error: 403
>>
>>
>>            Suggestions?
>>            Thanks,
>>            Spencer Graves
>>
>>     ______________________________________________
>>     R-package-devel at r-project.org
>>     <mailto:R-package-devel at r-project.org> mailing list
>>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>


        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Fri Apr  3 22:45:51 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Fri, 3 Apr 2020 15:45:51 -0500
Subject: [R-pkg-devel] GitHub problems
In-Reply-To: <bda9c0780cba4674a32bfea51be97d9b@umanitoba.ca>
References: <9524ce4c-4408-5e0b-1826-6291ccf5c54a@effectivedefense.org>
 <CAJmOi+N7M3+YstV7TW7j+t5Qc=DsMJbq38XDp5ppDB3RU-+41w@mail.gmail.com>
 <24791f17-dadf-4dc2-bbf5-4d9d100afdc2@effectivedefense.org>
 <71d38934-2cac-aaf2-c5b2-5006ae3967ca@effectivedefense.org>
 <bda9c0780cba4674a32bfea51be97d9b@umanitoba.ca>
Message-ID: <07f2367a-d7d8-1194-19e2-337fd94bb922@effectivedefense.org>

Hi, Max et al.:


 ??? ? With SSH established:


git clone git at github.com:JamesRamsay5/fda.git


 ??? ? Worked.


 ????? I had tried something like "git clone 
git at github.com:JamesRamsay5/fda.git" before, but I either did not have 
that exact syntax or I tried that before I had SSH.


 ????? Thanks again,
 ????? Spencer Graves


On 2020-04-03 15:17, Max Turgeon wrote:
>
> Hi Spencer,
>
>
> Did you follow the instructions here? 
> https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh
>
>
> Once the key is setup, you should be able to do "git clone 
> git at github.com:JamesRamsay5/fda.git", without any need to input a 
> token or a password in the command. Similarly, git push/pull/fetch 
> should all work seamlessly.
>
>
> This is how I've used Github for many years, and it's always worked fine.
>
>
> Best,
>
> Max
>
> Connecting to GitHub with SSH - GitHub Help 
> <https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh>
> help.github.com
> You can connect to GitHub using SSH.
>
>
>
>
> Max Turgeon
> Assistant Professor
> Department of Statistics
> Department of Computer Science
> University of Manitoba
> maxturgeon.ca <http://maxturgeon.ca>
>
>
> ------------------------------------------------------------------------
> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on 
> behalf of Spencer Graves <spencer.graves at effectivedefense.org>
> *Sent:* April 3, 2020 3:03:12 PM
> *To:* Hugh Parsonage
> *Cc:* List r-package-devel
> *Subject:* Re: [R-pkg-devel] GitHub problems
> ********************************************************
> Caution: This message was sent from outside the University of Manitoba.
> ********************************************************
>
> Hello, All:
>
>
> ?????? I've been unable to get SSH to work with
> "https://github.com/JamesRamsay5/fda", documented in my email to this
> group almost 3 weeks ago.? I've been able to do "git clone
> https://sbgraves237:<GitHub-password>@github.com/JamesRamsay5/fda", then
> change a file, do "git commit" and "git push".
>
>
> ?????? However, this has my GitHub password in a plain text ".git" file
> on my hard drive.? I think the hard drive on my computer is encrypted,
> so maybe that's not a problem.
>
>
> ?????? Am I not allowed to use SSH with a GitHub repository that's not
> my own?
>
>
> ?????? Thanks,
> ?????? Spencer Graves
>
>
> p.s.? Since my previous email, Ramsay added "README.md" to that
> repository.? I can do "git clone" and get it, then edit it, then "git
> commit".? However, "git push" keeps giving me errors:
>
>
> git push
> remote: Invalid username or password.
> fatal: Authentication failed for
> 'https://<token>@github.com/JamesRamsay5/fda/'
>
>
> ?????? A few hours ago, the owner, JamesRamsay5, went to "Settings" >
> "Manage access", then invited me as a collaborator.? I got an email
> asking me to "view invitation", which I did.? I got another email
> saying, "Hey there, we?re just writing to let you know that you?ve been
> automatically subscribed to a repository on GitHub." Sadly, I still
> couldn't access it, so I I deleted my token and created a new one.? I
> also deleted my previous local clone of "fda" and recreated it using
> "git clone https://<token>@github.com/JamesRamsay5/fda".? Then I did a
> test edit to the one file in that repository, README.md.? I think did
> 'git commit README.md -m "tst edit"'.? Then "git push" keeps giving me
> the error just mentioned.
>
>
> ?> sessionInfo()
> R version 3.6.3 (2020-02-29)
> Platform: x86_64-apple-darwin15.6.0 (64-bit)
> Running under: macOS Catalina 10.15.4
>
> Matrix products: default
> BLAS:
> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
> LAPACK:
> /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats???? graphics? grDevices utils???? datasets
> [6] methods?? base
>
> loaded via a namespace (and not attached):
> [1] compiler_3.6.3 tools_3.6.3
>
>
> On 2020-03-14 02:33, Spencer Graves wrote:
> > Thanks very much.
> >
> >
> > I deleted my token.? I will forward your comment to Jim Ramsay to try
> > to figure out the permissions question.
> >
> >
> > Spencer
> >
> >
> > On 2020-03-14 01:35, Hugh Parsonage wrote:
> >>
> >> You published your token. You should revoke it.
> >>
> >> You probably don?t have the right permissions associated with git.
> >>
> >>
> >>
> >> On Sat, 14 Mar 2020 at 2:14 pm, Spencer Graves
> >> <spencer.graves at effectivedefense.org
> >> <mailto:spencer.graves at effectivedefense.org>> wrote:
> >>
> >>???? Hello, All:
> >>
> >>
> >>???? ?????? What do you suggest Jim Ramsay and I do to migrate the fda
> >>???? package to GitHub?
> >>
> >>
> >>???? ?????? Jim successfully created an empty repository:
> >>
> >>
> >> https://github.com/JamesRamsay5/fda
> >>
> >>
> >>???? ?????? He told me he had officially made me a "contributor".? I 
> did:
> >>
> >>
> >>???? git clone https://<token>@github.com/JamesRamsay5/fda
> >>???? <http://github.com/JamesRamsay5/fda>
> >>???? Cloning into 'fda'...
> >>???? warning: You appear to have cloned an empty repository.
> >>???? Checking connectivity... done.
> >>
> >>
> >>???? ???? ? Then I copied files into this directory, did "git add" and
> >>???? "git
> >>???? commit".
> >>
> >>
> >>???? ?????? Then I did "git push", and it wouldn't let me:
> >>
> >>
> >>???? SpenceravessMBP:fda sbgraves$ git push
> >>???? remote: Permission to JamesRamsay5/fda.git denied to sbgraves237.
> >>???? fatal: unable to access
> >>???? 
> 'https://892da70262d9a4faa857b8602145414d6b21085b at github.com/JamesRamsay5/fda/':
> >>
> >>???? The requested URL returned error: 403
> >>
> >>
> >>???? ?????? Suggestions?
> >>???? ?????? Thanks,
> >>???? ?????? Spencer Graves
> >>
> >>???? ______________________________________________
> >>???? R-package-devel at r-project.org
> >>???? <mailto:R-package-devel at r-project.org> mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
>
>
> ??????? [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From |enz @end|ng |rom |mb|@un|-|re|burg@de  Mon Apr  6 14:21:29 2020
From: |enz @end|ng |rom |mb|@un|-|re|burg@de (Stefan Lenz IMBI)
Date: Mon, 06 Apr 2020 14:21:29 +0200
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
Message-ID: <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>

Dear all,

I just submitted the new package "JuliaConnectoR" to CRAN.
(See https://github.com/stefan-m-lenz/JuliaConnectoR )
The submission does not pass the automatic checks because of two notes (see below).
One note is simply that I am a new submitter.
The other note is because of the the use of "attach".
But I am certain that I am using "attach" in the right way. In its documentation, under "Good practice" , it says,
"In programming, functions should not change the search path unless that is their purpose."
Here this is exactly the purpose because one of the main functionalities of the package is to add Julia functions to the search path.
Can anybody help me with this?
Best wishes
Stefan

----------------urspr?ngliche Nachricht-----------------
Von: Stefan Lenz [Stefan-M-Lenz at web.de ]
An: lenz at imbi.uni-freiburg.de 
Datum: Mon, 6 Apr 2020 14:04:21 +0200
----------------------------------------------------------
>
>
>Gesendet: Montag, 06. April 2020 um 13:04 Uhr
>Von: ligges at statistik.tu-dortmund.de 
>An: stefan-m-lenz at web.de 
>Cc: CRAN-submissions at R-project.org 
>Betreff: [CRAN-pretest-archived] CRAN submission JuliaConnectoR 0.5.0
>Dear maintainer,
>
>package JuliaConnectoR_0.5.0.tar.gz does not pass the incoming checks 
>automatically, please see the following pre-tests:
>Windows: 
>Status: 2 NOTEs
>Debian: 
>Status: 2 NOTEs
>
>Please fix all problems and resubmit a fixed version via the webform.
>If you are not sure how to fix the problems shown, please ask for help on the 
>R-package-devel mailing list:
>
>If you are fairly certain the rejection is a false positive, please reply-all to this 
>message and explain.
>
>More details are given in the directory:
>
>The files will be removed after roughly 7 days.
>
>No strong reverse dependencies to be checked.
>
>Best regards,
>CRAN teams' auto-check service
>Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>Check: CRAN incoming feasibility, Result: NOTE
>Maintainer: 'Stefan Lenz stefan-m-lenz at web.de '
>
>New submission
>
>Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>Check: R code for possible problems, Result: NOTE
>Found the following calls to attach():
>File 'JuliaConnectoR/R/importing.R':
>attach(funenv, name = envName)
>See section 'Good practice' in '?attach'.
 

__________________________________________________
Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de 
	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Mon Apr  6 14:38:34 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 6 Apr 2020 08:38:34 -0400
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
Message-ID: <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>

  Just reply to the CRAN maintainers and explain this situation.  It?s
slightly buried, but the e-mail you received does say:

> If you are fairly certain the rejection is a false positive, please reply-all to this
> message and explain.

  cheers
    Ben Bolker

On Mon, Apr 6, 2020 at 8:28 AM Stefan Lenz IMBI
<lenz at imbi.uni-freiburg.de> wrote:
>
> Dear all,
>
> I just submitted the new package "JuliaConnectoR" to CRAN.
> (See https://github.com/stefan-m-lenz/JuliaConnectoR )
> The submission does not pass the automatic checks because of two notes (see below).
> One note is simply that I am a new submitter.
> The other note is because of the the use of "attach".
> But I am certain that I am using "attach" in the right way. In its documentation, under "Good practice" , it says,
> "In programming, functions should not change the search path unless that is their purpose."
> Here this is exactly the purpose because one of the main functionalities of the package is to add Julia functions to the search path.
> Can anybody help me with this?
> Best wishes
> Stefan
>
> ----------------urspr?ngliche Nachricht-----------------
> Von: Stefan Lenz [Stefan-M-Lenz at web.de ]
> An: lenz at imbi.uni-freiburg.de
> Datum: Mon, 6 Apr 2020 14:04:21 +0200
> ----------------------------------------------------------
> >
> >
> >Gesendet: Montag, 06. April 2020 um 13:04 Uhr
> >Von: ligges at statistik.tu-dortmund.de
> >An: stefan-m-lenz at web.de
> >Cc: CRAN-submissions at R-project.org
> >Betreff: [CRAN-pretest-archived] CRAN submission JuliaConnectoR 0.5.0
> >Dear maintainer,
> >
> >package JuliaConnectoR_0.5.0.tar.gz does not pass the incoming checks
> >automatically, please see the following pre-tests:
> >Windows:
> >Status: 2 NOTEs
> >Debian:
> >Status: 2 NOTEs
> >
> >Please fix all problems and resubmit a fixed version via the webform.
> >If you are not sure how to fix the problems shown, please ask for help on the
> >R-package-devel mailing list:
> >
> >If you are fairly certain the rejection is a false positive, please reply-all to this
> >message and explain.
> >
> >More details are given in the directory:
> >
> >The files will be removed after roughly 7 days.
> >
> >No strong reverse dependencies to be checked.
> >
> >Best regards,
> >CRAN teams' auto-check service
> >Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
> >Check: CRAN incoming feasibility, Result: NOTE
> >Maintainer: 'Stefan Lenz stefan-m-lenz at web.de '
> >
> >New submission
> >
> >Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
> >Check: R code for possible problems, Result: NOTE
> >Found the following calls to attach():
> >File 'JuliaConnectoR/R/importing.R':
> >attach(funenv, name = envName)
> >See section 'Good practice' in '?attach'.
>
>
> __________________________________________________
> Stefan Lenz
>
> Institut f?r Medizinische Biometrie und Statistik
> Medizinische Fakult?t / Universit?tsklinikum Freiburg
>
> Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg
>
> Tel.: 0761/203-6670
> E-Mail: lenz at imbi.uni-freiburg.de
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Mon Apr  6 16:49:49 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 6 Apr 2020 09:49:49 -0500
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
Message-ID: <24203.16781.429161.610624@rob.eddelbuettel.com>


On 6 April 2020 at 08:38, Ben Bolker wrote:
|   Just reply to the CRAN maintainers and explain this situation.  It?s
| slightly buried, but the e-mail you received does say:
| 
| > If you are fairly certain the rejection is a false positive, please reply-all to this
| > message and explain.

True, but this misses the "Letter of the law" versus the "Spirit of the law".

It might be worth mentioning that use of attach() is seen, to find one poor
analogy, pretty much like use of global variables these days. "Just because
you could does not mean you should".

See e.g. one of the first google hits for 'r do not use attach' here:
https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From bbo|ker @end|ng |rom gm@||@com  Mon Apr  6 16:59:22 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 6 Apr 2020 10:59:22 -0400
Subject: [R-pkg-devel] attach
In-Reply-To: <24203.16781.429161.610624@rob.eddelbuettel.com>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
Message-ID: <2ea0c9cb-b79e-efd3-5884-291a4a4d1cb3@gmail.com>


  Fair enough.  I'm going to derail/repurpose this thread to ask a
couple of questions about attach().

   I have often used with() for situations where I want to evaluate a
bunch of expressions with the elements of a parameter vector, e.g.
inside a gradient function for deSolve::ode().  However, I have found
this very hard to debug because (AFAIK) you can't debug-step through the
components of a with() expression.
  Potential solutions for this include

 1. attach(params); on.exit(detach(params))

  * this will be flagged by CRAN
  * I have found some really surprising (to me) precedence issues with
this _when used in a package context_ - it looks like the elements in
'params' are found _after_ built-in objects in R?? (I have to take some
time to make a MRE of this

  2. The zeallot package does 'unpacking' as with Python tuples.  I was
worried about dragging in tidyverse dependencies, but it looks like it
doesn't actually Import: anything.
   This doesn't quite do what I want, as I want to unpack using the
names in the object (which makes it look perfect for the attach() solution)


  Thoughts?

On 2020-04-06 10:49 a.m., Dirk Eddelbuettel wrote:
> 
> On 6 April 2020 at 08:38, Ben Bolker wrote:
> |   Just reply to the CRAN maintainers and explain this situation.  It?s
> | slightly buried, but the e-mail you received does say:
> | 
> | > If you are fairly certain the rejection is a false positive, please reply-all to this
> | > message and explain.
> 
> True, but this misses the "Letter of the law" versus the "Spirit of the law".
> 
> It might be worth mentioning that use of attach() is seen, to find one poor
> analogy, pretty much like use of global variables these days. "Just because
> you could does not mean you should".
> 
> See e.g. one of the first google hits for 'r do not use attach' here:
> https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
> 
> Dirk
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Apr  6 17:00:09 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 6 Apr 2020 11:00:09 -0400
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <24203.16781.429161.610624@rob.eddelbuettel.com>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
Message-ID: <3cadf8d8-0591-8763-8a18-7cc4458d281f@gmail.com>

On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
> 
> On 6 April 2020 at 08:38, Ben Bolker wrote:
> |   Just reply to the CRAN maintainers and explain this situation.  It?s
> | slightly buried, but the e-mail you received does say:
> |
> | > If you are fairly certain the rejection is a false positive, please reply-all to this
> | > message and explain.
> 
> True, but this misses the "Letter of the law" versus the "Spirit of the law".
> 
> It might be worth mentioning that use of attach() is seen, to find one poor
> analogy, pretty much like use of global variables these days. "Just because
> you could does not mean you should".
> 
> See e.g. one of the first google hits for 'r do not use attach' here:
> https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead

I don't have a strong opinion on this:  the proposed use seems to be no 
worse than library() or require().  Those are fine for users to use, but 
are discouraged in a package.  If the attach() never happens without an 
explicit request from the user (and that's what it sounds like), I'd say 
it's probably okay.

However, there is an easy workaround:  just return the environment 
without attaching it.  Then the user has the choice of attaching it, or 
using it as a prefix when they call the functions in it.  So it's not as 
though this will destroy the utility of the package if Stefan isn't 
allowed to call attach().

Duncan Murdoch


From |enz @end|ng |rom |mb|@un|-|re|burg@de  Mon Apr  6 17:10:52 2020
From: |enz @end|ng |rom |mb|@un|-|re|burg@de (Stefan Lenz IMBI)
Date: Mon, 06 Apr 2020 17:10:52 +0200
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
Message-ID: <20200406171052.EGroupware.7j2P2odqTiWrpTZjYHlxYFP@_>

My case is a little bit different from the use of global variables for data described in the Stackoverflow post.
I import a data base which contains function names of Julia functions from a Julia package.
This is analogous to loading a package in R.
The goal is to make it possible to call Julia functions like R functions.
If you call library(...) in R then the functions contained in the package are also available in the global search path.
In this case it doesn't make sense to use "with".
I am open to suggestions how I can change it to make it better, but the goal is really to be able to write

    juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
    myJuliaFunction()

same as you would write

    library("MyRPackage") # exports myRFunction
    myRFunction()

Best wishes

Stefan
 
----------------urspr?ngliche Nachricht-----------------
Von: Dirk Eddelbuettel [edd at debian.org]
An: Ben Bolker [bbolker at gmail.com]
Kopie: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], List r-package-devel [r-package-devel at r-project.org]
Datum: Mon, 6 Apr 2020 09:49:49 -0500
-------------------------------------------------
 
 
> 
> On 6 April 2020 at 08:38, Ben Bolker wrote:
> | Just reply to the CRAN maintainers and explain this situation. It?s
> | slightly buried, but the e-mail you received does say:
> | 
> | > If you are fairly certain the rejection is a false positive, please reply-all 
> to this
> | > message and explain.
> 
> True, but this misses the "Letter of the law" versus the "Spirit of the law".
> 
> It might be worth mentioning that use of attach() is seen, to find one poor
> analogy, pretty much like use of global variables these days. "Just because
> you could does not mean you should".
> 
> See e.g. one of the first google hits for 'r do not use attach' here:
> 
> https://stackoverflow.com/questions/10067680/why-is-it-not-advisable
> -to-use-attach-in-r-and-what-should-i-use-instead
> 
> Dirk
> 


-- 

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de


From renoz@o @end|ng |rom protonm@||@com  Mon Apr  6 17:16:33 2020
From: renoz@o @end|ng |rom protonm@||@com (renozao)
Date: Mon, 06 Apr 2020 15:16:33 +0000
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
 =?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
Message-ID: <3NF8PazyTwlR-NsDz0970jmrLD2_ITDmQFXKMkeW075iKUrvebyOISwaQAWAIjvCE8WFbQdAkRakCtUGLFdl7bMJ2TZW3jKcoxsWVnq4CFk=@protonmail.com>

Hi,
following up on this.
Has anybody encountered this issue or could give some insights on it?
Is there anything I can do here, except avoiding using Matrix in the union class?

Thanks
	[[alternative HTML version deleted]]


From |enz @end|ng |rom |mb|@un|-|re|burg@de  Mon Apr  6 17:25:35 2020
From: |enz @end|ng |rom |mb|@un|-|re|burg@de (Stefan Lenz IMBI)
Date: Mon, 06 Apr 2020 17:25:35 +0200
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <24203.16781.429161.610624@rob.eddelbuettel.com>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
Message-ID: <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>

Yes, as I wrote earlier, I would like to imitate the behaviour of loading an R package

 juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
 myJuliaFunction()

like R:

 library("MyRPackage") # exports myRFunction
 myRFunction()

I could return an environment, such that the call becomes

 attach(juliaUsing("SomeJuliaPackage"))
 myJuliaFunction()

But calling juliaUsing(), as it is now, takes care that if a package is imported a second time,
the first data base is removed via detach().
This way, users do not have to worry about calling juliaUsing() mutliple times in a script, same
as R users don't have to worry about calling library() multiple times.
If you call the code with attach() multiple times and do not detach, you get your screen cluttered with
warnings "xxx is masked by xxx".
So I would say it would decrease user-friendliness to return an environment.
I also want to make explicit, that the call to attach
occurs only once in my code, after creating the environment:

 envName <- paste0("JuliaConnectoR:", absoluteModulePath)
 if (envName %in% search()) {
 detach(envName, character.only = TRUE)
 }
 attach(funenv, name = envName)

This code is only called by juliaImport() and juliaUsing(), which aren't called by any other function of 
the package
and are supposed to be called directly by the user.

Stefan 
 
----------------urspr?ngliche Nachricht-----------------
Von: Duncan Murdoch [murdoch.duncan at gmail.com]
An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker [bbolker at gmail.com]
Kopie: List r-package-devel [r-package-devel at r-project.org]
Datum: Mon, 6 Apr 2020 11:00:09 -0400
-------------------------------------------------
 
 
> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>> 
>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>> | Just reply to the CRAN maintainers and explain this situation. It?s
>> | slightly buried, but the e-mail you received does say:
>> |
>> | > If you are fairly certain the rejection is a false positive, please reply-all to this
>> | > message and explain.
>> 
>> True, but this misses the "Letter of the law" versus the "Spirit of the law".
>> 
>> It might be worth mentioning that use of attach() is seen, to find one poor
>> analogy, pretty much like use of global variables these days. "Just because
>> you could does not mean you should".
>> 
>> See e.g. one of the first google hits for 'r do not use attach' here:
>> https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
> 
> I don't have a strong opinion on this: the proposed use seems to be no 
> worse than library() or require(). Those are fine for users to use, but 
> are discouraged in a package. If the attach() never happens without an 
> explicit request from the user (and that's what it sounds like), I'd say 
> it's probably okay.
> 
> However, there is an easy workaround: just return the environment 
> without attaching it. Then the user has the choice of attaching it, or 
> using it as a prefix when they call the functions in it. So it's not as 
> though this will destroy the utility of the package if Stefan isn't 
> allowed to call attach().
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


-- 

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Apr  6 17:33:51 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 6 Apr 2020 11:33:51 -0400
Subject: [R-pkg-devel] attach
In-Reply-To: <2ea0c9cb-b79e-efd3-5884-291a4a4d1cb3@gmail.com>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <2ea0c9cb-b79e-efd3-5884-291a4a4d1cb3@gmail.com>
Message-ID: <a3128fc4-340e-02c2-5b53-fc071258540e@gmail.com>

On 06/04/2020 10:59 a.m., Ben Bolker wrote:
> 
>    Fair enough.  I'm going to derail/repurpose this thread to ask a
> couple of questions about attach().
> 
>     I have often used with() for situations where I want to evaluate a
> bunch of expressions with the elements of a parameter vector, e.g.
> inside a gradient function for deSolve::ode().  However, I have found
> this very hard to debug because (AFAIK) you can't debug-step through the
> components of a with() expression.
>    Potential solutions for this include
> 
>   1. attach(params); on.exit(detach(params))
> 
>    * this will be flagged by CRAN
>    * I have found some really surprising (to me) precedence issues with
> this _when used in a package context_ - it looks like the elements in
> 'params' are found _after_ built-in objects in R?? (I have to take some
> time to make a MRE of this

I suspect what happened is that you had a copy of a built-in function in 
the global environment.  The global environment always comes ahead of 
attach()'d environments.  On the other hand, with() gets it right.

You can see this:

x <- 123
df <- data.frame(x = 456)
with(df, x)
#> [1] 456
attach(df)
#> The following object is masked _by_ .GlobalEnv:
#>
#>     x
x
#> [1] 123
detach(df)

As for debugging, the setBreakpoint() function can set a breakpoint in 
the code block in with().  RStudio uses that or some equivalent for 
setting breakpoints, so it can set breakpoints within the block.

If you call debug() on a function and get to a with() statement, you can 
eventually get to the code within it by hitting "s" (step in) several 
times.  It's fairly scary stepping into .Internal(), but it does 
eventually get you there.

Duncan Murdoch

> 
>    2. The zeallot package does 'unpacking' as with Python tuples.  I was
> worried about dragging in tidyverse dependencies, but it looks like it
> doesn't actually Import: anything.
>     This doesn't quite do what I want, as I want to unpack using the
> names in the object (which makes it look perfect for the attach() solution)
> 
> 
>    Thoughts?
> 
> On 2020-04-06 10:49 a.m., Dirk Eddelbuettel wrote:
>>
>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>> |   Just reply to the CRAN maintainers and explain this situation.  It?s
>> | slightly buried, but the e-mail you received does say:
>> |
>> | > If you are fairly certain the rejection is a false positive, please reply-all to this
>> | > message and explain.
>>
>> True, but this misses the "Letter of the law" versus the "Spirit of the law".
>>
>> It might be worth mentioning that use of attach() is seen, to find one poor
>> analogy, pretty much like use of global variables these days. "Just because
>> you could does not mean you should".
>>
>> See e.g. one of the first google hits for 'r do not use attach' here:
>> https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>
>> Dirk
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Apr  6 17:40:12 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 6 Apr 2020 11:40:12 -0400
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
Message-ID: <510e7822-e79a-c760-0031-66d878273936@gmail.com>

On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
> Yes, as I wrote earlier, I would like to imitate the behaviour of loading an R package
> 
>   juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>   myJuliaFunction()
> 
> like R:
> 
>   library("MyRPackage") # exports myRFunction
>   myRFunction()
> 
> I could return an environment, such that the call becomes
> 
>   attach(juliaUsing("SomeJuliaPackage"))
>   myJuliaFunction()

I wouldn't use it that way.  I'd write it as

     sjp <- juliaUsing("SomeJuliaPackage")
     sjp$myJuliaFunction()

This is similar to the advice to use pkg::foo() rather than library(pkg) 
followed by plain foo() in the code.

Duncan Murdoch

> 
> But calling juliaUsing(), as it is now, takes care that if a package is imported a second time,
> the first data base is removed via detach().
> This way, users do not have to worry about calling juliaUsing() mutliple times in a script, same
> as R users don't have to worry about calling library() multiple times.
> If you call the code with attach() multiple times and do not detach, you get your screen cluttered with
> warnings "xxx is masked by xxx".
> So I would say it would decrease user-friendliness to return an environment.
> I also want to make explicit, that the call to attach
> occurs only once in my code, after creating the environment:
> 
>   envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>   if (envName %in% search()) {
>   detach(envName, character.only = TRUE)
>   }
>   attach(funenv, name = envName)
> 
> This code is only called by juliaImport() and juliaUsing(), which aren't called by any other function of
> the package
> and are supposed to be called directly by the user.
> 
> Stefan
>   
> ----------------urspr?ngliche Nachricht-----------------
> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker [bbolker at gmail.com]
> Kopie: List r-package-devel [r-package-devel at r-project.org]
> Datum: Mon, 6 Apr 2020 11:00:09 -0400
> -------------------------------------------------
>   
>   
>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>
>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>> | Just reply to the CRAN maintainers and explain this situation. It?s
>>> | slightly buried, but the e-mail you received does say:
>>> |
>>> | > If you are fairly certain the rejection is a false positive, please reply-all to this
>>> | > message and explain.
>>>
>>> True, but this misses the "Letter of the law" versus the "Spirit of the law".
>>>
>>> It might be worth mentioning that use of attach() is seen, to find one poor
>>> analogy, pretty much like use of global variables these days. "Just because
>>> you could does not mean you should".
>>>
>>> See e.g. one of the first google hits for 'r do not use attach' here:
>>> https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>
>> I don't have a strong opinion on this: the proposed use seems to be no
>> worse than library() or require(). Those are fine for users to use, but
>> are discouraged in a package. If the attach() never happens without an
>> explicit request from the user (and that's what it sounds like), I'd say
>> it's probably okay.
>>
>> However, there is an easy workaround: just return the environment
>> without attaching it. Then the user has the choice of attaching it, or
>> using it as a prefix when they call the functions in it. So it's not as
>> though this will destroy the utility of the package if Stefan isn't
>> allowed to call attach().
>>
>> Duncan Murdoch
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Apr  6 19:51:53 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 06 Apr 2020 10:51:53 -0700
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <510e7822-e79a-c760-0031-66d878273936@gmail.com>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
Message-ID: <37F2BD9A-21AE-400D-BEEC-19382A591AEB@dcn.davis.ca.us>

One could take the position that the library and require functions were a mistake to begin with and that all contributed packages should be accessed using ::...  or one could recognize that these functions are an expected feature of R at this point and then it is not defensible to ban the proposed approach of importing names as Stefan wants to. I don't think it is fair to require this higher level of specificity just because it involves use of attach.

That said, another feature of R packages is the integrated help system... importing Julia functions wholesale may lead to problems with consistency in navigating the help files. IMO it may be justifiable to ban this particular syntactic convenience to maintain some separation in the minds of users looking for help on these new functions, since the syntactic and semantic structure of functions from another language may not align well with normal R functions. But I am not familiar with Julia or Stefan's package or the support it brings in this area... I just disagree with banning a "library" lookalike function "just because" it happens to involve attach.

On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>loading an R package
>> 
>>   juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>   myJuliaFunction()
>> 
>> like R:
>> 
>>   library("MyRPackage") # exports myRFunction
>>   myRFunction()
>> 
>> I could return an environment, such that the call becomes
>> 
>>   attach(juliaUsing("SomeJuliaPackage"))
>>   myJuliaFunction()
>
>I wouldn't use it that way.  I'd write it as
>
>     sjp <- juliaUsing("SomeJuliaPackage")
>     sjp$myJuliaFunction()
>
>This is similar to the advice to use pkg::foo() rather than
>library(pkg) 
>followed by plain foo() in the code.
>
>Duncan Murdoch
>
>> 
>> But calling juliaUsing(), as it is now, takes care that if a package
>is imported a second time,
>> the first data base is removed via detach().
>> This way, users do not have to worry about calling juliaUsing()
>mutliple times in a script, same
>> as R users don't have to worry about calling library() multiple
>times.
>> If you call the code with attach() multiple times and do not detach,
>you get your screen cluttered with
>> warnings "xxx is masked by xxx".
>> So I would say it would decrease user-friendliness to return an
>environment.
>> I also want to make explicit, that the call to attach
>> occurs only once in my code, after creating the environment:
>> 
>>   envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>   if (envName %in% search()) {
>>   detach(envName, character.only = TRUE)
>>   }
>>   attach(funenv, name = envName)
>> 
>> This code is only called by juliaImport() and juliaUsing(), which
>aren't called by any other function of
>> the package
>> and are supposed to be called directly by the user.
>> 
>> Stefan
>>   
>> ----------------urspr?ngliche Nachricht-----------------
>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>[bbolker at gmail.com]
>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>> -------------------------------------------------
>>   
>>   
>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>
>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>> | Just reply to the CRAN maintainers and explain this situation.
>It?s
>>>> | slightly buried, but the e-mail you received does say:
>>>> |
>>>> | > If you are fairly certain the rejection is a false positive,
>please reply-all to this
>>>> | > message and explain.
>>>>
>>>> True, but this misses the "Letter of the law" versus the "Spirit of
>the law".
>>>>
>>>> It might be worth mentioning that use of attach() is seen, to find
>one poor
>>>> analogy, pretty much like use of global variables these days. "Just
>because
>>>> you could does not mean you should".
>>>>
>>>> See e.g. one of the first google hits for 'r do not use attach'
>here:
>>>>
>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>
>>> I don't have a strong opinion on this: the proposed use seems to be
>no
>>> worse than library() or require(). Those are fine for users to use,
>but
>>> are discouraged in a package. If the attach() never happens without
>an
>>> explicit request from the user (and that's what it sounds like), I'd
>say
>>> it's probably okay.
>>>
>>> However, there is an easy workaround: just return the environment
>>> without attaching it. Then the user has the choice of attaching it,
>or
>>> using it as a prefix when they call the functions in it. So it's not
>as
>>> though this will destroy the utility of the package if Stefan isn't
>>> allowed to call attach().
>>>
>>> Duncan Murdoch
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>> 
>>
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From j@red_wood @end|ng |rom 163@com  Tue Apr  7 08:25:21 2020
From: j@red_wood @end|ng |rom 163@com (jared_wood)
Date: Tue, 7 Apr 2020 14:25:21 +0800 (GMT+08:00)
Subject: [R-pkg-devel] About dataset in my own package
Message-ID: <7cf879d3.2ce8.171535093ff.Coremail.jared_wood@163.com>

Dear all?

I have three datasets (drugbank.rda edgar.rda mala.rda) in my package and I put them in the document folder which called ?data?.

 

And I just use the dataset in the function. However, here comes a note:

 

drugbank_disease_gene: no visible binding for global variable

    'drugbank'

  edgar_disease_gene: no visible binding for global variable 'edgar'

  malacards_disease_gene: no visible binding for global variable 'mala'

  Undefined global functions or variables:

drugbank edgar mala

 

It shows that I need to do something else. I am confused and I don? know what need to do next.

 

Thanks for your attention. 

| |
jared_wood
|
|
jared_wood at 163.com
|
???????????
	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Apr  7 09:11:23 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 07 Apr 2020 00:11:23 -0700
Subject: [R-pkg-devel] About dataset in my own package
In-Reply-To: <7cf879d3.2ce8.171535093ff.Coremail.jared_wood@163.com>
References: <7cf879d3.2ce8.171535093ff.Coremail.jared_wood@163.com>
Message-ID: <BD91642D-4EE8-4902-A915-546118D5EB8D@dcn.davis.ca.us>

Either use the data() function to retrieve it or use the

LazyData: true

line in your DESCRIPTION file.

On April 6, 2020 11:25:21 PM PDT, jared_wood <jared_wood at 163.com> wrote:
>Dear all?
>
>I have three datasets (drugbank.rda edgar.rda mala.rda) in my package
>and I put them in the document folder which called ?data?.
>
> 
>
>And I just use the dataset in the function. However, here comes a note:
>
> 
>
>drugbank_disease_gene: no visible binding for global variable
>
>    'drugbank'
>
>  edgar_disease_gene: no visible binding for global variable 'edgar'
>
>  malacards_disease_gene: no visible binding for global variable 'mala'
>
>  Undefined global functions or variables:
>
>drugbank edgar mala
>
> 
>
>It shows that I need to do something else. I am confused and I don?
>know what need to do next.
>
> 
>
>Thanks for your attention. 
>
>| |
>jared_wood
>|
>|
>jared_wood at 163.com
>|
>???????????
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From @tep@n@@|nde|@r @end|ng |rom or@c|e@com  Tue Apr  7 09:16:31 2020
From: @tep@n@@|nde|@r @end|ng |rom or@c|e@com (Stepan)
Date: Tue, 7 Apr 2020 09:16:31 +0200
Subject: [R-pkg-devel] RIOT 2020: canceled
In-Reply-To: <f079b5c4-6d72-c7eb-c347-a2e0ee494965@oracle.com>
References: <f079b5c4-6d72-c7eb-c347-a2e0ee494965@oracle.com>
Message-ID: <b108a8e9-5fb2-bfb6-bb25-c22de8a49754@oracle.com>

After carefully considering the current situation regarding COVID-19, we 
decided to cancel this year's RIOT workshop.

Best regards,
Stepan

On 25. 02. 20 17:47, Stepan wrote:
> I hope you don?t mind us using this mailing list for a small 
> advertisement, but we think it is relevant for this group:
> 
> We'd like to invite you to RIOT 2020 - the 5rd workshop on R 
> Implementation, Optimization and Tooling [1]. It will take place 
> co-located with, and during, useR! 2020 in St. Louis on July 8th. RIOT 
> is an excellent venue for deep technical discussions about R 
> implementations, tools, optimizations and R extensions, and will be very 
> interesting for anyone interested in what?s under the hood of R.
> 
> The RIOT workshop topics include experience reports and technical 
> details of novel R extensions. For example: ALTREP implementations, 
> approaches to parallelization of R, integration with other (parallel, 
> distributed, ...) computing engines, etc.
> 
> Regards,
> Stepan Sindelar, Lukas Stadler (Oracle Labs), Jan Vitek (Northeastern), 
> Alexander Bertram (BeDataDriven)
> 
> [1] http://riotworkshop.github.io/


From |enz @end|ng |rom |mb|@un|-|re|burg@de  Tue Apr  7 18:40:02 2020
From: |enz @end|ng |rom |mb|@un|-|re|burg@de (Stefan Lenz IMBI)
Date: Tue, 07 Apr 2020 18:40:02 +0200
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <510e7822-e79a-c760-0031-66d878273936@gmail.com>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
Message-ID: <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>

Thank you very much for your comment. 
Could you elaborate how you think that it could interfere with the help system?
I haven't yet connected the Julia help with the R help, as the R help system is quite complex and RStudio handles it again differently. So it's simply like the functions were declared on the command line. They have no help.
A simply way to print the help for a Julia function, e.g. the function "first", is to call
 juliaEval("@doc first")
This then simply prints the output on the command line.

 
----------------urspr?ngliche Nachricht-----------------
Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
An: r-package-devel at r-project.org, Duncan Murdoch [murdoch.duncan at gmail.com], Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de]
Datum: Mon, 06 Apr 2020 10:51:53 -0700
-------------------------------------------------
 
 
> One could take the position that the library and require functions were a mistake 
> to begin with and that all contributed packages should be accessed using ::... or 
> one could recognize that these functions are an expected feature of R at this 
> point and then it is not defensible to ban the proposed approach of importing 
> names as Stefan wants to. I don't think it is fair to require this higher level of 
> specificity just because it involves use of attach.
> 
> That said, another feature of R packages is the integrated help system... 
> importing Julia functions wholesale may lead to problems with consistency in 
> navigating the help files. IMO it may be justifiable to ban this particular 
> syntactic convenience to maintain some separation in the minds of users looking 
> for help on these new functions, since the syntactic and semantic structure of 
> functions from another language may not align well with normal R functions. But I 
> am not familiar with Julia or Stefan's package or the support it brings in this 
> area... I just disagree with banning a "library" lookalike function "just 
> because" it happens to involve attach.
> 
> On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> 
> wrote:
>>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>>loading an R package
>>> 
>>> juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>> myJuliaFunction()
>>> 
>>> like R:
>>> 
>>> library("MyRPackage") # exports myRFunction
>>> myRFunction()
>>> 
>>> I could return an environment, such that the call becomes
>>> 
>>> attach(juliaUsing("SomeJuliaPackage"))
>>> myJuliaFunction()
>>
>>I wouldn't use it that way. I'd write it as
>>
>> sjp <- juliaUsing("SomeJuliaPackage")
>> sjp$myJuliaFunction()
>>
>>This is similar to the advice to use pkg::foo() rather than
>>library(pkg) 
>>followed by plain foo() in the code.
>>
>>Duncan Murdoch
>>
>>> 
>>> But calling juliaUsing(), as it is now, takes care that if a package
>>is imported a second time,
>>> the first data base is removed via detach().
>>> This way, users do not have to worry about calling juliaUsing()
>>mutliple times in a script, same
>>> as R users don't have to worry about calling library() multiple
>>times.
>>> If you call the code with attach() multiple times and do not detach,
>>you get your screen cluttered with
>>> warnings "xxx is masked by xxx".
>>> So I would say it would decrease user-friendliness to return an
>>environment.
>>> I also want to make explicit, that the call to attach
>>> occurs only once in my code, after creating the environment:
>>> 
>>> envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>> if (envName %in% search()) {
>>> detach(envName, character.only = TRUE)
>>> }
>>> attach(funenv, name = envName)
>>> 
>>> This code is only called by juliaImport() and juliaUsing(), which
>>aren't called by any other function of
>>> the package
>>> and are supposed to be called directly by the user.
>>> 
>>> Stefan
>>> 
>>> ----------------urspr?ngliche Nachricht-----------------
>>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>>[bbolker at gmail.com]
>>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>>> -------------------------------------------------
>>> 
>>> 
>>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>>
>>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>>> | Just reply to the CRAN maintainers and explain this situation.
>>It?s
>>>>> | slightly buried, but the e-mail you received does say:
>>>>> |
>>>>> | > If you are fairly certain the rejection is a false positive,
>>please reply-all to this
>>>>> | > message and explain.
>>>>>
>>>>> True, but this misses the "Letter of the law" versus the "Spirit of
>>the law".
>>>>>
>>>>> It might be worth mentioning that use of attach() is seen, to find
>>one poor
>>>>> analogy, pretty much like use of global variables these days. "Just
>>because
>>>>> you could does not mean you should".
>>>>>
>>>>> See e.g. one of the first google hits for 'r do not use attach'
>>here:
>>>>>
>>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>>
>>>> I don't have a strong opinion on this: the proposed use seems to be
>>no
>>>> worse than library() or require(). Those are fine for users to use,
>>but
>>>> are discouraged in a package. If the attach() never happens without
>>an
>>>> explicit request from the user (and that's what it sounds like), I'd
>>say
>>>> it's probably okay.
>>>>
>>>> However, there is an easy workaround: just return the environment
>>>> without attaching it. Then the user has the choice of attaching it,
>>or
>>>> using it as a prefix when they call the functions in it. So it's not
>>as
>>>> though this will destroy the utility of the package if Stefan isn't
>>>> allowed to call attach().
>>>>
>>>> Duncan Murdoch
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>> 
>>>
>>
>>______________________________________________
>>R-package-devel at r-project.org mailing list
>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


-- 

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Apr  7 18:52:52 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 07 Apr 2020 09:52:52 -0700
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
 <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>
Message-ID: <B1F3A1B9-EBDA-4506-BBDA-487D8DBF494E@dcn.davis.ca.us>

I did not say "interfere"... I said "problems with consistency". I don't think your wholesale import of functions without corresponding help pages is consistent with the normal use of R, which will make reading R code written with this mechanism in place a painful source of trouble for help forums.

On the other hand, if the code is prefaced with an environment name then there will be no expectation that a help page should exist on the part of someone reading that code for the first time. (It will be no less obscure, but at least it won't be misleading.)

On April 7, 2020 9:40:02 AM PDT, Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de> wrote:
>Thank you very much for your comment. 
>Could you elaborate how you think that it could interfere with the help
>system?
>I haven't yet connected the Julia help with the R help, as the R help
>system is quite complex and RStudio handles it again differently. So
>it's simply like the functions were declared on the command line. They
>have no help.
>A simply way to print the help for a Julia function, e.g. the function
>"first", is to call
> juliaEval("@doc first")
>This then simply prints the output on the command line.
>
> 
>----------------urspr?ngliche Nachricht-----------------
>Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>An: r-package-devel at r-project.org, Duncan Murdoch
>[murdoch.duncan at gmail.com], Stefan Lenz IMBI
>[lenz at imbi.uni-freiburg.de]
>Datum: Mon, 06 Apr 2020 10:51:53 -0700
>-------------------------------------------------
> 
> 
>> One could take the position that the library and require functions
>were a mistake 
>> to begin with and that all contributed packages should be accessed
>using ::... or 
>> one could recognize that these functions are an expected feature of R
>at this 
>> point and then it is not defensible to ban the proposed approach of
>importing 
>> names as Stefan wants to. I don't think it is fair to require this
>higher level of 
>> specificity just because it involves use of attach.
>> 
>> That said, another feature of R packages is the integrated help
>system... 
>> importing Julia functions wholesale may lead to problems with
>consistency in 
>> navigating the help files. IMO it may be justifiable to ban this
>particular 
>> syntactic convenience to maintain some separation in the minds of
>users looking 
>> for help on these new functions, since the syntactic and semantic
>structure of 
>> functions from another language may not align well with normal R
>functions. But I 
>> am not familiar with Julia or Stefan's package or the support it
>brings in this 
>> area... I just disagree with banning a "library" lookalike function
>"just 
>> because" it happens to involve attach.
>> 
>> On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch
><murdoch.duncan at gmail.com> 
>> wrote:
>>>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>>>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>>>loading an R package
>>>> 
>>>> juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>>> myJuliaFunction()
>>>> 
>>>> like R:
>>>> 
>>>> library("MyRPackage") # exports myRFunction
>>>> myRFunction()
>>>> 
>>>> I could return an environment, such that the call becomes
>>>> 
>>>> attach(juliaUsing("SomeJuliaPackage"))
>>>> myJuliaFunction()
>>>
>>>I wouldn't use it that way. I'd write it as
>>>
>>> sjp <- juliaUsing("SomeJuliaPackage")
>>> sjp$myJuliaFunction()
>>>
>>>This is similar to the advice to use pkg::foo() rather than
>>>library(pkg) 
>>>followed by plain foo() in the code.
>>>
>>>Duncan Murdoch
>>>
>>>> 
>>>> But calling juliaUsing(), as it is now, takes care that if a
>package
>>>is imported a second time,
>>>> the first data base is removed via detach().
>>>> This way, users do not have to worry about calling juliaUsing()
>>>mutliple times in a script, same
>>>> as R users don't have to worry about calling library() multiple
>>>times.
>>>> If you call the code with attach() multiple times and do not
>detach,
>>>you get your screen cluttered with
>>>> warnings "xxx is masked by xxx".
>>>> So I would say it would decrease user-friendliness to return an
>>>environment.
>>>> I also want to make explicit, that the call to attach
>>>> occurs only once in my code, after creating the environment:
>>>> 
>>>> envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>>> if (envName %in% search()) {
>>>> detach(envName, character.only = TRUE)
>>>> }
>>>> attach(funenv, name = envName)
>>>> 
>>>> This code is only called by juliaImport() and juliaUsing(), which
>>>aren't called by any other function of
>>>> the package
>>>> and are supposed to be called directly by the user.
>>>> 
>>>> Stefan
>>>> 
>>>> ----------------urspr?ngliche Nachricht-----------------
>>>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>>>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>>>[bbolker at gmail.com]
>>>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>>>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>>>> -------------------------------------------------
>>>> 
>>>> 
>>>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>>>
>>>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>>>> | Just reply to the CRAN maintainers and explain this situation.
>>>It?s
>>>>>> | slightly buried, but the e-mail you received does say:
>>>>>> |
>>>>>> | > If you are fairly certain the rejection is a false positive,
>>>please reply-all to this
>>>>>> | > message and explain.
>>>>>>
>>>>>> True, but this misses the "Letter of the law" versus the "Spirit
>of
>>>the law".
>>>>>>
>>>>>> It might be worth mentioning that use of attach() is seen, to
>find
>>>one poor
>>>>>> analogy, pretty much like use of global variables these days.
>"Just
>>>because
>>>>>> you could does not mean you should".
>>>>>>
>>>>>> See e.g. one of the first google hits for 'r do not use attach'
>>>here:
>>>>>>
>>>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>>>
>>>>> I don't have a strong opinion on this: the proposed use seems to
>be
>>>no
>>>>> worse than library() or require(). Those are fine for users to
>use,
>>>but
>>>>> are discouraged in a package. If the attach() never happens
>without
>>>an
>>>>> explicit request from the user (and that's what it sounds like),
>I'd
>>>say
>>>>> it's probably okay.
>>>>>
>>>>> However, there is an easy workaround: just return the environment
>>>>> without attaching it. Then the user has the choice of attaching
>it,
>>>or
>>>>> using it as a prefix when they call the functions in it. So it's
>not
>>>as
>>>>> though this will destroy the utility of the package if Stefan
>isn't
>>>>> allowed to call attach().
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>> 
>>>>
>>>
>>>______________________________________________
>>>R-package-devel at r-project.org mailing list
>>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 

-- 
Sent from my phone. Please excuse my brevity.


From @@rtorry @end|ng |rom gm@||@com  Tue Apr  7 23:20:20 2020
From: @@rtorry @end|ng |rom gm@||@com (Ryan Sartor)
Date: Tue, 7 Apr 2020 17:20:20 -0400
Subject: [R-pkg-devel] Windows specific install error
Message-ID: <CAD9kV-LGosh0NoV90pYv3UuRSAaVwMpmxJLqvV4wyMSXaF538w@mail.gmail.com>

Hello everyone,

My package seems to pass all the CRAN checks for Linux but fails to install
on Windows. This is the contents of 00install.out:

* installing *source* package 'DiPALM' ...
** using staged installation
** R
** data
** inst
** byte-compile and prepare package for lazy loading
Error: .onLoad failed in loadNamespace() for 'S4Vectors', details:
  call: validObject(.Object)
  error: invalid class "LLint" object: superclass "integer_OR_LLint"
not defined in the environment of the object's class
Execution halted
ERROR: lazy loading failed for package 'DiPALM'
* removing 'd:/RCompile/CRANincoming/R-devel/lib/DiPALM'


If I understand the error, it's saying that the CRAN server cannot
load the S4Vectors package because one of classes it depends on is not
defined. I'm guessing this is a namespace issue? I've taken a few
shots at adding directives to my NAMESPACE file but obviously I don't
know what I'm doing or maybe the error has nothing to do with my
package namespace.

Any insight would be greatly appreciated.

Thank you!

	[[alternative HTML version deleted]]


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Wed Apr  8 00:16:03 2020
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Tue, 7 Apr 2020 22:16:03 +0000
Subject: [R-pkg-devel] Windows specific install error
In-Reply-To: <CAD9kV-LGosh0NoV90pYv3UuRSAaVwMpmxJLqvV4wyMSXaF538w@mail.gmail.com>
References: <CAD9kV-LGosh0NoV90pYv3UuRSAaVwMpmxJLqvV4wyMSXaF538w@mail.gmail.com>
Message-ID: <BL0PR04MB6609C9BDFED98E6FD684D69EF9C30@BL0PR04MB6609.namprd04.prod.outlook.com>

This is the same as

  https://stat.ethz.ch/pipermail/r-package-devel/2020q1/005256.html

and due I believe to stale packages on the CRAN windows builder; the solution is I believe on the CRAN side.

Martin Morgan

?On 4/7/20, 6:14 PM, "R-package-devel on behalf of Ryan Sartor" <r-package-devel-bounces at r-project.org on behalf of sartorry at gmail.com> wrote:

    Hello everyone,
    
    My package seems to pass all the CRAN checks for Linux but fails to install
    on Windows. This is the contents of 00install.out:
    
    * installing *source* package 'DiPALM' ...
    ** using staged installation
    ** R
    ** data
    ** inst
    ** byte-compile and prepare package for lazy loading
    Error: .onLoad failed in loadNamespace() for 'S4Vectors', details:
      call: validObject(.Object)
      error: invalid class "LLint" object: superclass "integer_OR_LLint"
    not defined in the environment of the object's class
    Execution halted
    ERROR: lazy loading failed for package 'DiPALM'
    * removing 'd:/RCompile/CRANincoming/R-devel/lib/DiPALM'
    
    
    If I understand the error, it's saying that the CRAN server cannot
    load the S4Vectors package because one of classes it depends on is not
    defined. I'm guessing this is a namespace issue? I've taken a few
    shots at adding directives to my NAMESPACE file but obviously I don't
    know what I'm doing or maybe the error has nothing to do with my
    package namespace.
    
    Any insight would be greatly appreciated.
    
    Thank you!
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From he|mut@@chuetz @end|ng |rom beb@c@@t  Wed Apr  8 13:43:28 2020
From: he|mut@@chuetz @end|ng |rom beb@c@@t (=?UTF-8?Q?Helmut_Sch=c3=bctz?=)
Date: Wed, 8 Apr 2020 13:43:28 +0200
Subject: [R-pkg-devel] Errors in r-devel (Linux) and r-patched (Solaris)
Message-ID: <387bb665-2e08-f2d7-fcb9-2f363581392b@bebac.at>

Dear all,

I was notified about errors:
https://cran.r-project.org/web/checks/check_results_replicateBE.html

Since I don't have access to those operating systems, I'm a little bit lost.
Here is what I get with 64bit R on Windows:
library(replicateBE)
x <- method.B(details = TRUE, print = FALSE,
               data = rds30, option = 1)[c(10, 19)]
y <- c(17.86418, 92.73371)
d <- as.numeric(signif(abs(x - y), 7))

With R 3.6.2
print(d)
[1] 4.431372e-06 1.182994e-07

With R 3.6.3
print(d)
[1] 1.078696e-05 1.182989e-07

x[10] are Satterthwaite's degrees of freedom obtained by package 
pbkrtest. In both R-versions I use its current version (0.4-8.6 of 
2020-02-20).

Any ideas / suggestions?
As a workaround I could reduce the tolerance of testthat's 
expect_quivalent() from to currently 5e-7 to a higher (_which one?_) 
value. But I still want to know what might be going on the CRAN's 
linux/solaris devel/patched installations since the other R-versions on 
all operating systems passed the tests.

Cheers,
Helmut

-- 
Ing. Helmut Sch?tz
BEBAC?? Consultancy Services for
Bioequivalence and Bioavailability Studies
Neubaugasse 36/11
1070 Vienna, Austria
T +43 1 2311746
E helmut.schuetz at bebac.at
W https://bebac.at/
F https://forum.bebac.at/


From @eb@meyer @end|ng |rom |@u@de  Wed Apr  8 14:15:22 2020
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Wed, 8 Apr 2020 14:15:22 +0200
Subject: [R-pkg-devel] Errors in r-devel (Linux) and r-patched (Solaris)
In-Reply-To: <387bb665-2e08-f2d7-fcb9-2f363581392b@bebac.at>
References: <387bb665-2e08-f2d7-fcb9-2f363581392b@bebac.at>
Message-ID: <d64058a5-0b68-4916-44b6-33927a6f9577@fau.de>

Do both of your R installations use the same version of lme4 ?

A new lme4 version has been published on CRAN yesterday and some changes
regarding default numerical tolerances in optimizations could explain
the difference in your results. See the NEWS here:
https://cran.r-project.org/web/packages/lme4/news.html

Best regards,

	Sebastian Meyer


Am 08.04.20 um 13:43 schrieb Helmut Sch?tz:
> Dear all,
> 
> I was notified about errors:
> https://cran.r-project.org/web/checks/check_results_replicateBE.html
> 
> Since I don't have access to those operating systems, I'm a little bit
> lost.
> Here is what I get with 64bit R on Windows:
> library(replicateBE)
> x <- method.B(details = TRUE, print = FALSE,
> ????????????? data = rds30, option = 1)[c(10, 19)]
> y <- c(17.86418, 92.73371)
> d <- as.numeric(signif(abs(x - y), 7))
> 
> With R 3.6.2
> print(d)
> [1] 4.431372e-06 1.182994e-07
> 
> With R 3.6.3
> print(d)
> [1] 1.078696e-05 1.182989e-07
> 
> x[10] are Satterthwaite's degrees of freedom obtained by package
> pbkrtest. In both R-versions I use its current version (0.4-8.6 of
> 2020-02-20).
> 
> Any ideas / suggestions?
> As a workaround I could reduce the tolerance of testthat's
> expect_quivalent() from to currently 5e-7 to a higher (_which one?_)
> value. But I still want to know what might be going on the CRAN's
> linux/solaris devel/patched installations since the other R-versions on
> all operating systems passed the tests.
> 
> Cheers,
> Helmut
>


From he|mut@@chuetz @end|ng |rom beb@c@@t  Wed Apr  8 14:53:29 2020
From: he|mut@@chuetz @end|ng |rom beb@c@@t (=?UTF-8?Q?Helmut_Sch=c3=bctz?=)
Date: Wed, 8 Apr 2020 14:53:29 +0200
Subject: [R-pkg-devel] Errors in r-devel (Linux) and r-patched (Solaris)
In-Reply-To: <d64058a5-0b68-4916-44b6-33927a6f9577@fau.de>
References: <387bb665-2e08-f2d7-fcb9-2f363581392b@bebac.at>
 <d64058a5-0b68-4916-44b6-33927a6f9577@fau.de>
Message-ID: <85762eb5-abaa-d55b-30d5-c6c8c7b3d910@bebac.at>

Dear Sebastian,

Sebastian Meyer wrote on 2020-04-08 14:15:
> Do both of your R installations use the same version of lme4 ?

THX, good point! On R3.6.2 I have lme4 1.1-21 (2019-03-05) and on R3.6.3 
indeed yesterday's lme4 1.1-23.

> A new lme4 version has been published on CRAN yesterday and some changes
> regarding default numerical tolerances in optimizations could explain
> the difference in your results. See the NEWS here:
> https://cran.r-project.org/web/packages/lme4/news.html

I see. Since the other 93 (!) tests passed, I will submit a fix only for 
_this_ data set. A little bit nasty since we recently published a paper 
about software validation: https://dx.doi.org/10.1208/s12248-020-0427-6
The supplementary material contains code for IQ (installation 
qualification). If a user on r-devel (Linux) or r-patched (Solaris) runs 
it ? with the current lme4 - he/she will be slapped in the face and the 
suppl. material will tell him/her:
"If a test fails [?] the package did not pass IQ in the user?s 
computational environment (hardware, operating system, R-release) and 
_must not_ be used."
Splendid.

Cheers,
Helmut

-- 
Ing. Helmut Sch?tz
BEBAC?? Consultancy Services for
Bioequivalence and Bioavailability Studies
Neubaugasse 36/11
1070 Vienna, Austria
T +43 1 2311746
E helmut.schuetz at bebac.at
W https://bebac.at/
F https://forum.bebac.at/


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Apr  8 16:34:45 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 8 Apr 2020 16:34:45 +0200
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
 =?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
Message-ID: <24205.57605.672636.944802@stat.math.ethz.ch>

>>>>> renozao  
>>>>>     on Mon, 30 Mar 2020 21:20:43 +0000 writes:

    > Hi,
    > when R CMD check is run under R-devel (2020-03-29 r78108) I get the following error at installation:

    > Error in get(cname, envir = cwhere, inherits = FALSE) :
    > object ?.__C__compMatrix? not found
    > Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
    > unable to create union class:  could not set members "Matrix"

    > This does not happen on R 3.6.3.

    > I tried with Matrix listed in Depends but I still get the same error.

    > Is this linked to some changes in union classes or the Matrix package?

    > Thank you.

    > Bests,
    > Renaud

Hi Renaud,
One reason you got no response here, is because we don't even
know about which package you are talking.

So there's nothing, anybody can reproduce from your posting.

There have been changes in R's dealing with class unions etc,
notably even *relating* to an earlier bug report on class unions
exactly for such a case which was *triggered* when people built
on such Matrix classes.

But we would really want to be able to reproduce what you are seeing..

Best regards,
Martin Maechler

ETH Zurich, R Core Team *and* maintainer("Matrix")


From wdun|@p @end|ng |rom t|bco@com  Wed Apr  8 17:19:42 2020
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Wed, 8 Apr 2020 08:19:42 -0700
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
	=?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
 <24205.57605.672636.944802@stat.math.ethz.ch>
 <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>
Message-ID: <CAF8bMcb-KbfR==w1g3ixjEpGNR7=zn3SEBtwn3i4MimYzzt-dw@mail.gmail.com>

Use trace() to get a bit more detail - .__C_compMatrix is looked for in the
wrong environment with inherits=FALSE.

> setClassUnion("mMatrix", c("Matrix", "matrix"))
Tracing get(name, envir = env) on entry
    x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(name, envir = env) on entry
    x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(name, envir = env) on entry
    x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get("#HAS_DUPLICATE_CLASS_NAMES", envir = .classTable) on entry
    x="#HAS_DUPLICATE_CLASS_NAMES", envir="<environment: 0x2787710>",
topenv="<environment: base>", inherits=TRUE
Tracing get(name, envir = env) on entry
    x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(name, envir = env) on entry
    x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(name, envir = env) on entry
    x=".MTable", envir="<environment: 0x21dcf10>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(".SigLength", envir = env) on entry
    x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(".SigLength", envir = env) on entry
    x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(name, envir = env) on entry
    x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(".SigLength", envir = env) on entry
    x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(".SigLength", envir = env) on entry
    x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(cname, envir = cwhere, inherits = FALSE) on entry
    x=".__C__compMatrix", envir="<environment: R_GlobalEnv>",
topenv="<environment: R_GlobalEnv>", inherits=FALSE
Error in get(cname, envir = cwhere, inherits = FALSE) :
  object '.__C__compMatrix' not found
...

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Wed, Apr 8, 2020 at 7:52 AM William Dunlap <wdunlap at tibco.com> wrote:

> % R-devel --vanilla --quiet
> > library(Matrix)
> > setClassUnion("mMatrix", c("Matrix", "matrix"))
> Error in get(cname, envir = cwhere, inherits = FALSE) :
>   object '.__C__compMatrix' not found
> Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>   unable to create union class:  could not set members "Matrix"
> > sessionInfo()
> R Under development (unstable) (2020-04-07 r78175)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Ubuntu 16.04.6 LTS
>
> Matrix products: default
> BLAS/LAPACK: /usr/lib/libopenblasp-r0.2.18.so
>
> locale:
>  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] Matrix_1.2-18
>
> loaded via a namespace (and not attached):
> [1] compiler_4.1.0  grid_4.1.0      lattice_0.20-41
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
>
> On Wed, Apr 8, 2020 at 7:35 AM Martin Maechler <maechler at stat.math.ethz.ch>
> wrote:
>
>> >>>>> renozao
>> >>>>>     on Mon, 30 Mar 2020 21:20:43 +0000 writes:
>>
>>     > Hi,
>>     > when R CMD check is run under R-devel (2020-03-29 r78108) I get the
>> following error at installation:
>>
>>     > Error in get(cname, envir = cwhere, inherits = FALSE) :
>>     > object ?.__C__compMatrix? not found
>>     > Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>>     > unable to create union class:  could not set members "Matrix"
>>
>>     > This does not happen on R 3.6.3.
>>
>>     > I tried with Matrix listed in Depends but I still get the same
>> error.
>>
>>     > Is this linked to some changes in union classes or the Matrix
>> package?
>>
>>     > Thank you.
>>
>>     > Bests,
>>     > Renaud
>>
>> Hi Renaud,
>> One reason you got no response here, is because we don't even
>> know about which package you are talking.
>>
>> So there's nothing, anybody can reproduce from your posting.
>>
>> There have been changes in R's dealing with class unions etc,
>> notably even *relating* to an earlier bug report on class unions
>> exactly for such a case which was *triggered* when people built
>> on such Matrix classes.
>>
>> But we would really want to be able to reproduce what you are seeing..
>>
>> Best regards,
>> Martin Maechler
>>
>> ETH Zurich, R Core Team *and* maintainer("Matrix")
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

	[[alternative HTML version deleted]]


From wdun|@p @end|ng |rom t|bco@com  Wed Apr  8 16:52:03 2020
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Wed, 8 Apr 2020 07:52:03 -0700
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
	=?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <24205.57605.672636.944802@stat.math.ethz.ch>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
 <24205.57605.672636.944802@stat.math.ethz.ch>
Message-ID: <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>

% R-devel --vanilla --quiet
> library(Matrix)
> setClassUnion("mMatrix", c("Matrix", "matrix"))
Error in get(cname, envir = cwhere, inherits = FALSE) :
  object '.__C__compMatrix' not found
Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
  unable to create union class:  could not set members "Matrix"
> sessionInfo()
R Under development (unstable) (2020-04-07 r78175)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 16.04.6 LTS

Matrix products: default
BLAS/LAPACK: /usr/lib/libopenblasp-r0.2.18.so

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] Matrix_1.2-18

loaded via a namespace (and not attached):
[1] compiler_4.1.0  grid_4.1.0      lattice_0.20-41

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Wed, Apr 8, 2020 at 7:35 AM Martin Maechler <maechler at stat.math.ethz.ch>
wrote:

> >>>>> renozao
> >>>>>     on Mon, 30 Mar 2020 21:20:43 +0000 writes:
>
>     > Hi,
>     > when R CMD check is run under R-devel (2020-03-29 r78108) I get the
> following error at installation:
>
>     > Error in get(cname, envir = cwhere, inherits = FALSE) :
>     > object ?.__C__compMatrix? not found
>     > Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>     > unable to create union class:  could not set members "Matrix"
>
>     > This does not happen on R 3.6.3.
>
>     > I tried with Matrix listed in Depends but I still get the same error.
>
>     > Is this linked to some changes in union classes or the Matrix
> package?
>
>     > Thank you.
>
>     > Bests,
>     > Renaud
>
> Hi Renaud,
> One reason you got no response here, is because we don't even
> know about which package you are talking.
>
> So there's nothing, anybody can reproduce from your posting.
>
> There have been changes in R's dealing with class unions etc,
> notably even *relating* to an earlier bug report on class unions
> exactly for such a case which was *triggered* when people built
> on such Matrix classes.
>
> But we would really want to be able to reproduce what you are seeing..
>
> Best regards,
> Martin Maechler
>
> ETH Zurich, R Core Team *and* maintainer("Matrix")
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From renoz@o @end|ng |rom protonm@||@com  Wed Apr  8 18:19:59 2020
From: renoz@o @end|ng |rom protonm@||@com (renozao)
Date: Wed, 08 Apr 2020 16:19:59 +0000
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
 =?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <CAF8bMcb-KbfR==w1g3ixjEpGNR7=zn3SEBtwn3i4MimYzzt-dw@mail.gmail.com>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
 <24205.57605.672636.944802@stat.math.ethz.ch>
 <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>
 <CAF8bMcb-KbfR==w1g3ixjEpGNR7=zn3SEBtwn3i4MimYzzt-dw@mail.gmail.com>
Message-ID: <cTfz9LdQTDeljdpr97HnBeKOSPRLo90TKjTnzHfV4zfOx0UrOPO5F0KcTex4T85VVqLzSXGp0MyTFZHNjCSoiTYj5nPFijuKiPf2E6siAyg=@protonmail.com>

Thank you William for the reproducible example.

Currently I using the following (same as in William's example):
setClassUnion("mMatrix", c("Matrix", "matrix"))

Martin, are the changes made in the union class handling affecting the way we should declare them?
Thank you.

Bests,
Renaud

??????? Original Message ???????
On Wednesday, April 8, 2020 11:19 AM, William Dunlap <wdunlap at tibco.com> wrote:

> Use trace() to get a bit more detail - .__C_compMatrix is looked for in the wrong environment with inherits=FALSE.
>
>> setClassUnion("mMatrix", c("Matrix", "matrix"))
> Tracing get(name, envir = env) on entry
>     x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(name, envir = env) on entry
>     x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(name, envir = env) on entry
>     x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get("#HAS_DUPLICATE_CLASS_NAMES", envir = .classTable) on entry
>     x="#HAS_DUPLICATE_CLASS_NAMES", envir="<environment: 0x2787710>", topenv="<environment: base>", inherits=TRUE
> Tracing get(name, envir = env) on entry
>     x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(name, envir = env) on entry
>     x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(name, envir = env) on entry
>     x=".MTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(".SigLength", envir = env) on entry
>     x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(".SigLength", envir = env) on entry
>     x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(name, envir = env) on entry
>     x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(".SigLength", envir = env) on entry
>     x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(".SigLength", envir = env) on entry
>     x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(cname, envir = cwhere, inherits = FALSE) on entry
>     x=".__C__compMatrix", envir="<environment: R_GlobalEnv>", topenv="<environment: R_GlobalEnv>", inherits=FALSE
> Error in get(cname, envir = cwhere, inherits = FALSE) :
>   object '.__C__compMatrix' not found
> ...
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Wed, Apr 8, 2020 at 7:52 AM William Dunlap <wdunlap at tibco.com> wrote:
>
>> % R-devel --vanilla --quiet
>>> library(Matrix)
>>> setClassUnion("mMatrix", c("Matrix", "matrix"))
>> Error in get(cname, envir = cwhere, inherits = FALSE) :
>>   object '.__C__compMatrix' not found
>> Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>>   unable to create union class:  could not set members "Matrix"
>>> sessionInfo()
>> R Under development (unstable) (2020-04-07 r78175)
>> Platform: x86_64-pc-linux-gnu (64-bit)
>> Running under: Ubuntu 16.04.6 LTS
>>
>> Matrix products: default
>> BLAS/LAPACK: /usr/lib/libopenblasp-r0.2.18.so
>>
>> locale:
>>  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>>  [9] LC_ADDRESS=C               LC_TELEPHONE=C
>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> other attached packages:
>> [1] Matrix_1.2-18
>>
>> loaded via a namespace (and not attached):
>> [1] compiler_4.1.0  grid_4.1.0      lattice_0.20-41
>>
>> Bill Dunlap
>> TIBCO Software
>> wdunlap tibco.com
>>
>> On Wed, Apr 8, 2020 at 7:35 AM Martin Maechler <maechler at stat.math.ethz.ch> wrote:
>>
>>>>>>>> renozao
>>>>>>>>     on Mon, 30 Mar 2020 21:20:43 +0000 writes:
>>>
>>>     > Hi,
>>>     > when R CMD check is run under R-devel (2020-03-29 r78108) I get the following error at installation:
>>>
>>>     > Error in get(cname, envir = cwhere, inherits = FALSE) :
>>>     > object ?.__C__compMatrix? not found
>>>     > Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>>>     > unable to create union class:  could not set members "Matrix"
>>>
>>>     > This does not happen on R 3.6.3.
>>>
>>>     > I tried with Matrix listed in Depends but I still get the same error.
>>>
>>>     > Is this linked to some changes in union classes or the Matrix package?
>>>
>>>     > Thank you.
>>>
>>>     > Bests,
>>>     > Renaud
>>>
>>> Hi Renaud,
>>> One reason you got no response here, is because we don't even
>>> know about which package you are talking.
>>>
>>> So there's nothing, anybody can reproduce from your posting.
>>>
>>> There have been changes in R's dealing with class unions etc,
>>> notably even *relating* to an earlier bug report on class unions
>>> exactly for such a case which was *triggered* when people built
>>> on such Matrix classes.
>>>
>>> But we would really want to be able to reproduce what you are seeing..
>>>
>>> Best regards,
>>> Martin Maechler
>>>
>>> ETH Zurich, R Core Team *and* maintainer("Matrix")
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
	[[alternative HTML version deleted]]


From |eutn@nt @end|ng |rom |h-muen@ter@de  Thu Apr  9 09:51:56 2020
From: |eutn@nt @end|ng |rom |h-muen@ter@de (Dominik Leutnant)
Date: Thu, 9 Apr 2020 07:51:56 +0000
Subject: [R-pkg-devel] Add SystemRequirements of imported package in
 description file?
Message-ID: <936BA237-CCC6-4006-B5FC-FEF0AEA60FD4@contoso.com>

Hi all,

should ?SystemRequirements? of an imported package be listed in the description file of a package?

General scenario:
- Package X imports Package Y.
- Package Y lists ?libzzz? as SystemRequirements.

Should Package X list the SystemRequirements ?libzzz? as well? (question occurred @ https://github.com/dleutnant/influxdbr/issues/47)

Thank you and happy easter!
Dominik



Dr. Dominik Leutnant
Department of Civil Engineering
Institute for Infrastucture?Water?Resources?Environment (IWARU)
WG Urban Hydrology and Water Management

Muenster University of Applied Sciences
Corrensstr. 25
FRG-48149 M?nster
Germany

Tel.:  +49 (0) 251/83-65274
Mail:  leutnant at fh-muenster.de<mailto:leutnant at fh-muenster.de>
Web: https://www.fh-muenster.de/


	[[alternative HTML version deleted]]


From th|erry@onke||nx @end|ng |rom |nbo@be  Thu Apr  9 10:06:10 2020
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Thu, 9 Apr 2020 10:06:10 +0200
Subject: [R-pkg-devel] Add SystemRequirements of imported package in
 description file?
In-Reply-To: <936BA237-CCC6-4006-B5FC-FEF0AEA60FD4@contoso.com>
References: <936BA237-CCC6-4006-B5FC-FEF0AEA60FD4@contoso.com>
Message-ID: <CAJuCY5yZgVc9KLyyVL+SQpUsdsbOxMZY-Ono1EVzE4h96PHSGQ@mail.gmail.com>

Dear Dominik,

IMHO you only need to list "first order" dependencies: things that your
package directly uses. Listing higher order dependencies would be redundant
as they are listed in the packages that have them as first order dependency.

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op do 9 apr. 2020 om 09:52 schreef Dominik Leutnant <leutnant at fh-muenster.de
>:

> Hi all,
>
> should ?SystemRequirements? of an imported package be listed in the
> description file of a package?
>
> General scenario:
> - Package X imports Package Y.
> - Package Y lists ?libzzz? as SystemRequirements.
>
> Should Package X list the SystemRequirements ?libzzz? as well? (question
> occurred @ https://github.com/dleutnant/influxdbr/issues/47)
>
> Thank you and happy easter!
> Dominik
>
>
>
> Dr. Dominik Leutnant
> Department of Civil Engineering
> Institute for Infrastucture?Water?Resources?Environment (IWARU)
> WG Urban Hydrology and Water Management
>
> Muenster University of Applied Sciences
> Corrensstr. 25
> FRG-48149 M?nster
> Germany
>
> Tel.:  +49 (0) 251/83-65274
> Mail:  leutnant at fh-muenster.de<mailto:leutnant at fh-muenster.de>
> Web: https://www.fh-muenster.de/
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From |enz @end|ng |rom |mb|@un|-|re|burg@de  Thu Apr  9 10:41:27 2020
From: |enz @end|ng |rom |mb|@un|-|re|burg@de (Stefan Lenz IMBI)
Date: Thu, 09 Apr 2020 10:41:27 +0200
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
 <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>
Message-ID: <20200409104127.EGroupware.Frn8sICScuDTqpktcG74Az3@_>

It is important for me to get my package into CRAN.
I haven't gotten any answer from the CRAN maintainers. I already tried to submit a version of the package before some months and haven't gotten any reply then.
The replies you gave me (thanks to all engaged in the discussion) were mixed.
I still think that the library-like import is a good feature, but if it is not possible to get this package on CRAN with it, I will change it with returning an environment like reticulate.
My question now is:
So what would be the process how to proceed?
Is there anybody who can make a decision in such cases?
Or do I make this decision myself after I lost hope that it will be accepted the way it is now?

Stefan

 
----------------urspr?ngliche Nachricht-----------------
Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], r-package-devel at r-project.org, Duncan Murdoch [murdoch.duncan at gmail.com]
Datum: Tue, 07 Apr 2020 09:52:52 -0700
-------------------------------------------------
 
 
> I did not say "interfere"... I said "problems with consistency". I don't think 
> your wholesale import of functions without corresponding help pages is 
> consistent with the normal use of R, which will make reading R code written with 
> this mechanism in place a painful source of trouble for help forums.
> 
> On the other hand, if the code is prefaced with an environment name then there will 
> be no expectation that a help page should exist on the part of someone reading that 
> code for the first time. (It will be no less obscure, but at least it won't be 
> misleading.)
> 
> On April 7, 2020 9:40:02 AM PDT, Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de> 
> wrote:
>>Thank you very much for your comment. 
>>Could you elaborate how you think that it could interfere with the help
>>system?
>>I haven't yet connected the Julia help with the R help, as the R help
>>system is quite complex and RStudio handles it again differently. So
>>it's simply like the functions were declared on the command line. They
>>have no help.
>>A simply way to print the help for a Julia function, e.g. the function
>>"first", is to call
>> juliaEval("@doc first")
>>This then simply prints the output on the command line.
>>
>> 
>>----------------urspr?ngliche Nachricht-----------------
>>Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>>An: r-package-devel at r-project.org, Duncan Murdoch
>>[murdoch.duncan at gmail.com], Stefan Lenz IMBI
>>[lenz at imbi.uni-freiburg.de]
>>Datum: Mon, 06 Apr 2020 10:51:53 -0700
>>-------------------------------------------------
>> 
>> 
>>> One could take the position that the library and require functions
>>were a mistake 
>>> to begin with and that all contributed packages should be accessed
>>using ::... or 
>>> one could recognize that these functions are an expected feature of R
>>at this 
>>> point and then it is not defensible to ban the proposed approach of
>>importing 
>>> names as Stefan wants to. I don't think it is fair to require this
>>higher level of 
>>> specificity just because it involves use of attach.
>>> 
>>> That said, another feature of R packages is the integrated help
>>system... 
>>> importing Julia functions wholesale may lead to problems with
>>consistency in 
>>> navigating the help files. IMO it may be justifiable to ban this
>>particular 
>>> syntactic convenience to maintain some separation in the minds of
>>users looking 
>>> for help on these new functions, since the syntactic and semantic
>>structure of 
>>> functions from another language may not align well with normal R
>>functions. But I 
>>> am not familiar with Julia or Stefan's package or the support it
>>brings in this 
>>> area... I just disagree with banning a "library" lookalike function
>>"just 
>>> because" it happens to involve attach.
>>> 
>>> On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch
>><murdoch.duncan at gmail.com> 
>>> wrote:
>>>>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>>>>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>>>>loading an R package
>>>>> 
>>>>> juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>>>> myJuliaFunction()
>>>>> 
>>>>> like R:
>>>>> 
>>>>> library("MyRPackage") # exports myRFunction
>>>>> myRFunction()
>>>>> 
>>>>> I could return an environment, such that the call becomes
>>>>> 
>>>>> attach(juliaUsing("SomeJuliaPackage"))
>>>>> myJuliaFunction()
>>>>
>>>>I wouldn't use it that way. I'd write it as
>>>>
>>>> sjp <- juliaUsing("SomeJuliaPackage")
>>>> sjp$myJuliaFunction()
>>>>
>>>>This is similar to the advice to use pkg::foo() rather than
>>>>library(pkg) 
>>>>followed by plain foo() in the code.
>>>>
>>>>Duncan Murdoch
>>>>
>>>>> 
>>>>> But calling juliaUsing(), as it is now, takes care that if a
>>package
>>>>is imported a second time,
>>>>> the first data base is removed via detach().
>>>>> This way, users do not have to worry about calling juliaUsing()
>>>>mutliple times in a script, same
>>>>> as R users don't have to worry about calling library() multiple
>>>>times.
>>>>> If you call the code with attach() multiple times and do not
>>detach,
>>>>you get your screen cluttered with
>>>>> warnings "xxx is masked by xxx".
>>>>> So I would say it would decrease user-friendliness to return an
>>>>environment.
>>>>> I also want to make explicit, that the call to attach
>>>>> occurs only once in my code, after creating the environment:
>>>>> 
>>>>> envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>>>> if (envName %in% search()) {
>>>>> detach(envName, character.only = TRUE)
>>>>> }
>>>>> attach(funenv, name = envName)
>>>>> 
>>>>> This code is only called by juliaImport() and juliaUsing(), which
>>>>aren't called by any other function of
>>>>> the package
>>>>> and are supposed to be called directly by the user.
>>>>> 
>>>>> Stefan
>>>>> 
>>>>> ----------------urspr?ngliche Nachricht-----------------
>>>>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>>>>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>>>>[bbolker at gmail.com]
>>>>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>>>>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>>>>> -------------------------------------------------
>>>>> 
>>>>> 
>>>>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>>>>
>>>>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>>>>> | Just reply to the CRAN maintainers and explain this situation.
>>>>It?s
>>>>>>> | slightly buried, but the e-mail you received does say:
>>>>>>> |
>>>>>>> | > If you are fairly certain the rejection is a false positive,
>>>>please reply-all to this
>>>>>>> | > message and explain.
>>>>>>>
>>>>>>> True, but this misses the "Letter of the law" versus the "Spirit
>>of
>>>>the law".
>>>>>>>
>>>>>>> It might be worth mentioning that use of attach() is seen, to
>>find
>>>>one poor
>>>>>>> analogy, pretty much like use of global variables these days.
>>"Just
>>>>because
>>>>>>> you could does not mean you should".
>>>>>>>
>>>>>>> See e.g. one of the first google hits for 'r do not use attach'
>>>>here:
>>>>>>>
>>>>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>>>>
>>>>>> I don't have a strong opinion on this: the proposed use seems to
>>be
>>>>no
>>>>>> worse than library() or require(). Those are fine for users to
>>use,
>>>>but
>>>>>> are discouraged in a package. If the attach() never happens
>>without
>>>>an
>>>>>> explicit request from the user (and that's what it sounds like),
>>I'd
>>>>say
>>>>>> it's probably okay.
>>>>>>
>>>>>> However, there is an easy workaround: just return the environment
>>>>>> without attaching it. Then the user has the choice of attaching
>>it,
>>>>or
>>>>>> using it as a prefix when they call the functions in it. So it's
>>not
>>>>as
>>>>>> though this will destroy the utility of the package if Stefan
>>isn't
>>>>>> allowed to call attach().
>>>>>>
>>>>>> Duncan Murdoch
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>> 
>>>>>
>>>>
>>>>______________________________________________
>>>>R-package-devel at r-project.org mailing list
>>>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> 
> 


-- 

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de


From Jor|@@Mey@ @end|ng |rom UGent@be  Thu Apr  9 14:59:23 2020
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Thu, 9 Apr 2020 12:59:23 +0000
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200409104127.EGroupware.Frn8sICScuDTqpktcG74Az3@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
 <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>,
 <20200409104127.EGroupware.Frn8sICScuDTqpktcG74Az3@_>
Message-ID: <1586437163584.5571@UGent.be>

Hi Stefan,

first of all, thank you for taking the time and effort to link Julia and R. That said, I would strongly encourage you to go for a reticulate-like approach. There's a good reason for that. Once you start mixing languages, you really want to have some indication what code is ran in what language. Especially since I can imagine at one point there'll be a Julia function masking an R function of the same name, and that is going to cause a world of hurt and confusion. 

If you don't like environments, you can try to use namespace functionality. There's the "namespace" package that allows you to create one, and some internal namespace functions are visible (eg namespaceExport() from base). That's going to be the closest to mimicking R packages, but it's beyond my knowledge to know how feasible this approach actually is. I hope someone else chimes in, especially if this is dangerous for other reasons I overlooked.

Kind regards
Joris

Joris Meys
Statistician
T +32 9 264 61 79

Department Data Analysis and Mathematical Modelling

Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent, Belgium
T administration office +32 9 264 59 32

www.ugent.be

e-maildisclaimer


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
Sent: Thursday, April 9, 2020 10:41 AM
To: Jeff Newmiller; r-package-devel at r-project.org; Duncan Murdoch
Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission JuliaConnectoR 0.5.0

It is important for me to get my package into CRAN.
I haven't gotten any answer from the CRAN maintainers. I already tried to submit a version of the package before some months and haven't gotten any reply then.
The replies you gave me (thanks to all engaged in the discussion) were mixed.
I still think that the library-like import is a good feature, but if it is not possible to get this package on CRAN with it, I will change it with returning an environment like reticulate.
My question now is:
So what would be the process how to proceed?
Is there anybody who can make a decision in such cases?
Or do I make this decision myself after I lost hope that it will be accepted the way it is now?

Stefan


----------------urspr?ngliche Nachricht-----------------
Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], r-package-devel at r-project.org, Duncan Murdoch [murdoch.duncan at gmail.com]
Datum: Tue, 07 Apr 2020 09:52:52 -0700
-------------------------------------------------


> I did not say "interfere"... I said "problems with consistency". I don't think
> your wholesale import of functions without corresponding help pages is
> consistent with the normal use of R, which will make reading R code written with
> this mechanism in place a painful source of trouble for help forums.
>
> On the other hand, if the code is prefaced with an environment name then there will
> be no expectation that a help page should exist on the part of someone reading that
> code for the first time. (It will be no less obscure, but at least it won't be
> misleading.)
>
> On April 7, 2020 9:40:02 AM PDT, Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
> wrote:
>>Thank you very much for your comment.
>>Could you elaborate how you think that it could interfere with the help
>>system?
>>I haven't yet connected the Julia help with the R help, as the R help
>>system is quite complex and RStudio handles it again differently. So
>>it's simply like the functions were declared on the command line. They
>>have no help.
>>A simply way to print the help for a Julia function, e.g. the function
>>"first", is to call
>> juliaEval("@doc first")
>>This then simply prints the output on the command line.
>>
>>
>>----------------urspr?ngliche Nachricht-----------------
>>Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>>An: r-package-devel at r-project.org, Duncan Murdoch
>>[murdoch.duncan at gmail.com], Stefan Lenz IMBI
>>[lenz at imbi.uni-freiburg.de]
>>Datum: Mon, 06 Apr 2020 10:51:53 -0700
>>-------------------------------------------------
>>
>>
>>> One could take the position that the library and require functions
>>were a mistake
>>> to begin with and that all contributed packages should be accessed
>>using ::... or
>>> one could recognize that these functions are an expected feature of R
>>at this
>>> point and then it is not defensible to ban the proposed approach of
>>importing
>>> names as Stefan wants to. I don't think it is fair to require this
>>higher level of
>>> specificity just because it involves use of attach.
>>>
>>> That said, another feature of R packages is the integrated help
>>system...
>>> importing Julia functions wholesale may lead to problems with
>>consistency in
>>> navigating the help files. IMO it may be justifiable to ban this
>>particular
>>> syntactic convenience to maintain some separation in the minds of
>>users looking
>>> for help on these new functions, since the syntactic and semantic
>>structure of
>>> functions from another language may not align well with normal R
>>functions. But I
>>> am not familiar with Julia or Stefan's package or the support it
>>brings in this
>>> area... I just disagree with banning a "library" lookalike function
>>"just
>>> because" it happens to involve attach.
>>>
>>> On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch
>><murdoch.duncan at gmail.com>
>>> wrote:
>>>>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>>>>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>>>>loading an R package
>>>>>
>>>>> juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>>>> myJuliaFunction()
>>>>>
>>>>> like R:
>>>>>
>>>>> library("MyRPackage") # exports myRFunction
>>>>> myRFunction()
>>>>>
>>>>> I could return an environment, such that the call becomes
>>>>>
>>>>> attach(juliaUsing("SomeJuliaPackage"))
>>>>> myJuliaFunction()
>>>>
>>>>I wouldn't use it that way. I'd write it as
>>>>
>>>> sjp <- juliaUsing("SomeJuliaPackage")
>>>> sjp$myJuliaFunction()
>>>>
>>>>This is similar to the advice to use pkg::foo() rather than
>>>>library(pkg)
>>>>followed by plain foo() in the code.
>>>>
>>>>Duncan Murdoch
>>>>
>>>>>
>>>>> But calling juliaUsing(), as it is now, takes care that if a
>>package
>>>>is imported a second time,
>>>>> the first data base is removed via detach().
>>>>> This way, users do not have to worry about calling juliaUsing()
>>>>mutliple times in a script, same
>>>>> as R users don't have to worry about calling library() multiple
>>>>times.
>>>>> If you call the code with attach() multiple times and do not
>>detach,
>>>>you get your screen cluttered with
>>>>> warnings "xxx is masked by xxx".
>>>>> So I would say it would decrease user-friendliness to return an
>>>>environment.
>>>>> I also want to make explicit, that the call to attach
>>>>> occurs only once in my code, after creating the environment:
>>>>>
>>>>> envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>>>> if (envName %in% search()) {
>>>>> detach(envName, character.only = TRUE)
>>>>> }
>>>>> attach(funenv, name = envName)
>>>>>
>>>>> This code is only called by juliaImport() and juliaUsing(), which
>>>>aren't called by any other function of
>>>>> the package
>>>>> and are supposed to be called directly by the user.
>>>>>
>>>>> Stefan
>>>>>
>>>>> ----------------urspr?ngliche Nachricht-----------------
>>>>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>>>>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>>>>[bbolker at gmail.com]
>>>>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>>>>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>>>>> -------------------------------------------------
>>>>>
>>>>>
>>>>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>>>>
>>>>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>>>>> | Just reply to the CRAN maintainers and explain this situation.
>>>>It?s
>>>>>>> | slightly buried, but the e-mail you received does say:
>>>>>>> |
>>>>>>> | > If you are fairly certain the rejection is a false positive,
>>>>please reply-all to this
>>>>>>> | > message and explain.
>>>>>>>
>>>>>>> True, but this misses the "Letter of the law" versus the "Spirit
>>of
>>>>the law".
>>>>>>>
>>>>>>> It might be worth mentioning that use of attach() is seen, to
>>find
>>>>one poor
>>>>>>> analogy, pretty much like use of global variables these days.
>>"Just
>>>>because
>>>>>>> you could does not mean you should".
>>>>>>>
>>>>>>> See e.g. one of the first google hits for 'r do not use attach'
>>>>here:
>>>>>>>
>>>>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>>>>
>>>>>> I don't have a strong opinion on this: the proposed use seems to
>>be
>>>>no
>>>>>> worse than library() or require(). Those are fine for users to
>>use,
>>>>but
>>>>>> are discouraged in a package. If the attach() never happens
>>without
>>>>an
>>>>>> explicit request from the user (and that's what it sounds like),
>>I'd
>>>>say
>>>>>> it's probably okay.
>>>>>>
>>>>>> However, there is an easy workaround: just return the environment
>>>>>> without attaching it. Then the user has the choice of attaching
>>it,
>>>>or
>>>>>> using it as a prefix when they call the functions in it. So it's
>>not
>>>>as
>>>>>> though this will destroy the utility of the package if Stefan
>>isn't
>>>>>> allowed to call attach().
>>>>>>
>>>>>> Duncan Murdoch
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>>
>>>>
>>>>______________________________________________
>>>>R-package-devel at r-project.org mailing list
>>>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>


--

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |enz @end|ng |rom |mb|@un|-|re|burg@de  Thu Apr  9 17:30:35 2020
From: |enz @end|ng |rom |mb|@un|-|re|burg@de (Stefan Lenz IMBI)
Date: Thu, 09 Apr 2020 17:30:35 +0200
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200409104127.EGroupware.Frn8sICScuDTqpktcG74Az3@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
 <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>,
 <20200409104127.EGroupware.Frn8sICScuDTqpktcG74Az3@_>
Message-ID: <20200409173035.EGroupware.9va3hIotP_Ry5zTry04BGzf@_>

Hi!
Thanks for pointing to the package "namespace". 
I experimented with it but I couldn't really figure out how it is supposed to work:

The following code leads to strange errors that I don't understand:

 > nse <- list2env(list(data="x", asdf = 2))
 > namespace::registerNamespace(name = "NewNamespace", env = nse)
 > NewNamespace::asdf
 Error in asNamespace(ns) : not a namespace

It would really be interesting if someone could comment on whether the namespace approach is feasible, how it is supposed to work, and whether/how it would be better than using attach.
Greetings!
Stefan

 
----------------urspr?ngliche Nachricht-----------------
Von: Joris Meys [Joris.Meys at ugent.be]
An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], Jeff Newmiller [jdnewmil at dcn.davis.ca.us], r-package-devel at r-project.org, Duncan Murdoch [murdoch.duncan at gmail.com]
Datum: Thu, 9 Apr 2020 12:59:23 +0000
-------------------------------------------------
 
 
> Hi Stefan,
> 
> first of all, thank you for taking the time and effort to link Julia and R. That 
> said, I would strongly encourage you to go for a reticulate-like approach. 
> There's a good reason for that. Once you start mixing languages, you really want 
> to have some indication what code is ran in what language. Especially since I can 
> imagine at one point there'll be a Julia function masking an R function of the same 
> name, and that is going to cause a world of hurt and confusion.
> 
> If you don't like environments, you can try to use namespace functionality. 
> There's the "namespace" package that allows you to create one, and some internal 
> namespace functions are visible (eg namespaceExport() from base). That's 
> going to be the closest to mimicking R packages, but it's beyond my knowledge to 
> know how feasible this approach actually is. I hope someone else chimes in, 
> especially if this is dangerous for other reasons I overlooked.
> 
> Kind regards
> Joris
> 
> Joris Meys
> Statistician
> T +32 9 264 61 79
> 
> Department Data Analysis and Mathematical Modelling
> 
> Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent, 
> Belgium
> T administration office +32 9 264 59 32
> 
> www.ugent.be
> 
> e-maildisclaimer
> 
> 
> ________________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf 
> of Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
> Sent: Thursday, April 9, 2020 10:41 AM
> To: Jeff Newmiller; r-package-devel at r-project.org; Duncan Murdoch
> Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission 
> JuliaConnectoR 0.5.0
> 
> It is important for me to get my package into CRAN.
> I haven't gotten any answer from the CRAN maintainers. I already tried to submit a 
> version of the package before some months and haven't gotten any reply then.
> The replies you gave me (thanks to all engaged in the discussion) were mixed.
> I still think that the library-like import is a good feature, but if it is not 
> possible to get this package on CRAN with it, I will change it with returning an 
> environment like reticulate.
> My question now is:
> So what would be the process how to proceed?
> Is there anybody who can make a decision in such cases?
> Or do I make this decision myself after I lost hope that it will be accepted the way 
> it is now?
> 
> Stefan
> 
> 
> ----------------urspr?ngliche Nachricht-----------------
> Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
> An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], 
> r-package-devel at r-project.org, Duncan Murdoch 
> [murdoch.duncan at gmail.com]
> Datum: Tue, 07 Apr 2020 09:52:52 -0700
> -------------------------------------------------
> 
> 
>> I did not say "interfere"... I said "problems with consistency". I don't think
>> your wholesale import of functions without corresponding help pages is
>> consistent with the normal use of R, which will make reading R code written with
>> this mechanism in place a painful source of trouble for help forums.
>>
>> On the other hand, if the code is prefaced with an environment name then there will
>> be no expectation that a help page should exist on the part of someone reading that
>> code for the first time. (It will be no less obscure, but at least it won't be
>> misleading.)
>>
>> On April 7, 2020 9:40:02 AM PDT, Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
>> wrote:
>>>Thank you very much for your comment.
>>>Could you elaborate how you think that it could interfere with the help
>>>system?
>>>I haven't yet connected the Julia help with the R help, as the R help
>>>system is quite complex and RStudio handles it again differently. So
>>>it's simply like the functions were declared on the command line. They
>>>have no help.
>>>A simply way to print the help for a Julia function, e.g. the function
>>>"first", is to call
>>> juliaEval("@doc first")
>>>This then simply prints the output on the command line.
>>>
>>>
>>>----------------urspr?ngliche Nachricht-----------------
>>>Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>>>An: r-package-devel at r-project.org, Duncan Murdoch
>>>[murdoch.duncan at gmail.com], Stefan Lenz IMBI
>>>[lenz at imbi.uni-freiburg.de]
>>>Datum: Mon, 06 Apr 2020 10:51:53 -0700
>>>-------------------------------------------------
>>>
>>>
>>>> One could take the position that the library and require functions
>>>were a mistake
>>>> to begin with and that all contributed packages should be accessed
>>>using ::... or
>>>> one could recognize that these functions are an expected feature of R
>>>at this
>>>> point and then it is not defensible to ban the proposed approach of
>>>importing
>>>> names as Stefan wants to. I don't think it is fair to require this
>>>higher level of
>>>> specificity just because it involves use of attach.
>>>>
>>>> That said, another feature of R packages is the integrated help
>>>system...
>>>> importing Julia functions wholesale may lead to problems with
>>>consistency in
>>>> navigating the help files. IMO it may be justifiable to ban this
>>>particular
>>>> syntactic convenience to maintain some separation in the minds of
>>>users looking
>>>> for help on these new functions, since the syntactic and semantic
>>>structure of
>>>> functions from another language may not align well with normal R
>>>functions. But I
>>>> am not familiar with Julia or Stefan's package or the support it
>>>brings in this
>>>> area... I just disagree with banning a "library" lookalike function
>>>"just
>>>> because" it happens to involve attach.
>>>>
>>>> On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch
>>><murdoch.duncan at gmail.com>
>>>> wrote:
>>>>>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>>>>>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>>>>>loading an R package
>>>>>>
>>>>>> juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>>>>> myJuliaFunction()
>>>>>>
>>>>>> like R:
>>>>>>
>>>>>> library("MyRPackage") # exports myRFunction
>>>>>> myRFunction()
>>>>>>
>>>>>> I could return an environment, such that the call becomes
>>>>>>
>>>>>> attach(juliaUsing("SomeJuliaPackage"))
>>>>>> myJuliaFunction()
>>>>>
>>>>>I wouldn't use it that way. I'd write it as
>>>>>
>>>>> sjp <- juliaUsing("SomeJuliaPackage")
>>>>> sjp$myJuliaFunction()
>>>>>
>>>>>This is similar to the advice to use pkg::foo() rather than
>>>>>library(pkg)
>>>>>followed by plain foo() in the code.
>>>>>
>>>>>Duncan Murdoch
>>>>>
>>>>>>
>>>>>> But calling juliaUsing(), as it is now, takes care that if a
>>>package
>>>>>is imported a second time,
>>>>>> the first data base is removed via detach().
>>>>>> This way, users do not have to worry about calling juliaUsing()
>>>>>mutliple times in a script, same
>>>>>> as R users don't have to worry about calling library() multiple
>>>>>times.
>>>>>> If you call the code with attach() multiple times and do not
>>>detach,
>>>>>you get your screen cluttered with
>>>>>> warnings "xxx is masked by xxx".
>>>>>> So I would say it would decrease user-friendliness to return an
>>>>>environment.
>>>>>> I also want to make explicit, that the call to attach
>>>>>> occurs only once in my code, after creating the environment:
>>>>>>
>>>>>> envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>>>>> if (envName %in% search()) {
>>>>>> detach(envName, character.only = TRUE)
>>>>>> }
>>>>>> attach(funenv, name = envName)
>>>>>>
>>>>>> This code is only called by juliaImport() and juliaUsing(), which
>>>>>aren't called by any other function of
>>>>>> the package
>>>>>> and are supposed to be called directly by the user.
>>>>>>
>>>>>> Stefan
>>>>>>
>>>>>> ----------------urspr?ngliche Nachricht-----------------
>>>>>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>>>>>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>>>>>[bbolker at gmail.com]
>>>>>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>>>>>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>>>>>> -------------------------------------------------
>>>>>>
>>>>>>
>>>>>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>>>>>
>>>>>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>>>>>> | Just reply to the CRAN maintainers and explain this situation.
>>>>>It?s
>>>>>>>> | slightly buried, but the e-mail you received does say:
>>>>>>>> |
>>>>>>>> | > If you are fairly certain the rejection is a false positive,
>>>>>please reply-all to this
>>>>>>>> | > message and explain.
>>>>>>>>
>>>>>>>> True, but this misses the "Letter of the law" versus the "Spirit
>>>of
>>>>>the law".
>>>>>>>>
>>>>>>>> It might be worth mentioning that use of attach() is seen, to
>>>find
>>>>>one poor
>>>>>>>> analogy, pretty much like use of global variables these days.
>>>"Just
>>>>>because
>>>>>>>> you could does not mean you should".
>>>>>>>>
>>>>>>>> See e.g. one of the first google hits for 'r do not use attach'
>>>>>here:
>>>>>>>>
>>>>>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>>>>>
>>>>>>> I don't have a strong opinion on this: the proposed use seems to
>>>be
>>>>>no
>>>>>>> worse than library() or require(). Those are fine for users to
>>>use,
>>>>>but
>>>>>>> are discouraged in a package. If the attach() never happens
>>>without
>>>>>an
>>>>>>> explicit request from the user (and that's what it sounds like),
>>>I'd
>>>>>say
>>>>>>> it's probably okay.
>>>>>>>
>>>>>>> However, there is an easy workaround: just return the environment
>>>>>>> without attaching it. Then the user has the choice of attaching
>>>it,
>>>>>or
>>>>>>> using it as a prefix when they call the functions in it. So it's
>>>not
>>>>>as
>>>>>>> though this will destroy the utility of the package if Stefan
>>>isn't
>>>>>>> allowed to call attach().
>>>>>>>
>>>>>>> Duncan Murdoch
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>______________________________________________
>>>>>R-package-devel at r-project.org mailing list
>>>>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>
> 
> 
> --
> 
> Stefan Lenz
> 
> Institut f?r Medizinische Biometrie und Statistik
> Medizinische Fakult?t / Universit?tsklinikum Freiburg
> 
> Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg
> 
> Tel.: 0761/203-6670
> E-Mail: lenz at imbi.uni-freiburg.de
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


-- 

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de


From Jor|@@Mey@ @end|ng |rom UGent@be  Thu Apr  9 17:37:09 2020
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Thu, 9 Apr 2020 15:37:09 +0000
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200409173035.EGroupware.9va3hIotP_Ry5zTry04BGzf@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
 <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>,
 <20200409104127.EGroupware.Frn8sICScuDTqpktcG74Az3@_>,
 <20200409173035.EGroupware.9va3hIotP_Ry5zTry04BGzf@_>
Message-ID: <1586446629798.79698@UGent.be>

Hi Stefan,

you need the function makeNamespace() to create the environment as a namespace. Look at the examples in the help files, I found them rather instructive. I also hope someone else chimes in to shed some light on whether or not that approach would be acceptable. 


Joris Meys
Statistician
T +32 9 264 61 79

Department Data Analysis and Mathematical Modelling

Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent, Belgium
T administration office +32 9 264 59 32

www.ugent.be

e-maildisclaimer


________________________________________
From: Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
Sent: Thursday, April 9, 2020 5:30 PM
To: Joris Meys; Jeff Newmiller; r-package-devel at r-project.org; Duncan Murdoch
Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission JuliaConnectoR 0.5.0

Hi!
Thanks for pointing to the package "namespace".
I experimented with it but I couldn't really figure out how it is supposed to work:

The following code leads to strange errors that I don't understand:

 > nse <- list2env(list(data="x", asdf = 2))
 > namespace::registerNamespace(name = "NewNamespace", env = nse)
 > NewNamespace::asdf
 Error in asNamespace(ns) : not a namespace

It would really be interesting if someone could comment on whether the namespace approach is feasible, how it is supposed to work, and whether/how it would be better than using attach.
Greetings!
Stefan


----------------urspr?ngliche Nachricht-----------------
Von: Joris Meys [Joris.Meys at ugent.be]
An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], Jeff Newmiller [jdnewmil at dcn.davis.ca.us], r-package-devel at r-project.org, Duncan Murdoch [murdoch.duncan at gmail.com]
Datum: Thu, 9 Apr 2020 12:59:23 +0000
-------------------------------------------------


> Hi Stefan,
>
> first of all, thank you for taking the time and effort to link Julia and R. That
> said, I would strongly encourage you to go for a reticulate-like approach.
> There's a good reason for that. Once you start mixing languages, you really want
> to have some indication what code is ran in what language. Especially since I can
> imagine at one point there'll be a Julia function masking an R function of the same
> name, and that is going to cause a world of hurt and confusion.
>
> If you don't like environments, you can try to use namespace functionality.
> There's the "namespace" package that allows you to create one, and some internal
> namespace functions are visible (eg namespaceExport() from base). That's
> going to be the closest to mimicking R packages, but it's beyond my knowledge to
> know how feasible this approach actually is. I hope someone else chimes in,
> especially if this is dangerous for other reasons I overlooked.
>
> Kind regards
> Joris
>
> Joris Meys
> Statistician
> T +32 9 264 61 79
>
> Department Data Analysis and Mathematical Modelling
>
> Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent,
> Belgium
> T administration office +32 9 264 59 32
>
> www.ugent.be
>
> e-maildisclaimer
>
>
> ________________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf
> of Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
> Sent: Thursday, April 9, 2020 10:41 AM
> To: Jeff Newmiller; r-package-devel at r-project.org; Duncan Murdoch
> Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
> JuliaConnectoR 0.5.0
>
> It is important for me to get my package into CRAN.
> I haven't gotten any answer from the CRAN maintainers. I already tried to submit a
> version of the package before some months and haven't gotten any reply then.
> The replies you gave me (thanks to all engaged in the discussion) were mixed.
> I still think that the library-like import is a good feature, but if it is not
> possible to get this package on CRAN with it, I will change it with returning an
> environment like reticulate.
> My question now is:
> So what would be the process how to proceed?
> Is there anybody who can make a decision in such cases?
> Or do I make this decision myself after I lost hope that it will be accepted the way
> it is now?
>
> Stefan
>
>
> ----------------urspr?ngliche Nachricht-----------------
> Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
> An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de],
> r-package-devel at r-project.org, Duncan Murdoch
> [murdoch.duncan at gmail.com]
> Datum: Tue, 07 Apr 2020 09:52:52 -0700
> -------------------------------------------------
>
>
>> I did not say "interfere"... I said "problems with consistency". I don't think
>> your wholesale import of functions without corresponding help pages is
>> consistent with the normal use of R, which will make reading R code written with
>> this mechanism in place a painful source of trouble for help forums.
>>
>> On the other hand, if the code is prefaced with an environment name then there will
>> be no expectation that a help page should exist on the part of someone reading that
>> code for the first time. (It will be no less obscure, but at least it won't be
>> misleading.)
>>
>> On April 7, 2020 9:40:02 AM PDT, Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
>> wrote:
>>>Thank you very much for your comment.
>>>Could you elaborate how you think that it could interfere with the help
>>>system?
>>>I haven't yet connected the Julia help with the R help, as the R help
>>>system is quite complex and RStudio handles it again differently. So
>>>it's simply like the functions were declared on the command line. They
>>>have no help.
>>>A simply way to print the help for a Julia function, e.g. the function
>>>"first", is to call
>>> juliaEval("@doc first")
>>>This then simply prints the output on the command line.
>>>
>>>
>>>----------------urspr?ngliche Nachricht-----------------
>>>Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>>>An: r-package-devel at r-project.org, Duncan Murdoch
>>>[murdoch.duncan at gmail.com], Stefan Lenz IMBI
>>>[lenz at imbi.uni-freiburg.de]
>>>Datum: Mon, 06 Apr 2020 10:51:53 -0700
>>>-------------------------------------------------
>>>
>>>
>>>> One could take the position that the library and require functions
>>>were a mistake
>>>> to begin with and that all contributed packages should be accessed
>>>using ::... or
>>>> one could recognize that these functions are an expected feature of R
>>>at this
>>>> point and then it is not defensible to ban the proposed approach of
>>>importing
>>>> names as Stefan wants to. I don't think it is fair to require this
>>>higher level of
>>>> specificity just because it involves use of attach.
>>>>
>>>> That said, another feature of R packages is the integrated help
>>>system...
>>>> importing Julia functions wholesale may lead to problems with
>>>consistency in
>>>> navigating the help files. IMO it may be justifiable to ban this
>>>particular
>>>> syntactic convenience to maintain some separation in the minds of
>>>users looking
>>>> for help on these new functions, since the syntactic and semantic
>>>structure of
>>>> functions from another language may not align well with normal R
>>>functions. But I
>>>> am not familiar with Julia or Stefan's package or the support it
>>>brings in this
>>>> area... I just disagree with banning a "library" lookalike function
>>>"just
>>>> because" it happens to involve attach.
>>>>
>>>> On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch
>>><murdoch.duncan at gmail.com>
>>>> wrote:
>>>>>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>>>>>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>>>>>loading an R package
>>>>>>
>>>>>> juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>>>>> myJuliaFunction()
>>>>>>
>>>>>> like R:
>>>>>>
>>>>>> library("MyRPackage") # exports myRFunction
>>>>>> myRFunction()
>>>>>>
>>>>>> I could return an environment, such that the call becomes
>>>>>>
>>>>>> attach(juliaUsing("SomeJuliaPackage"))
>>>>>> myJuliaFunction()
>>>>>
>>>>>I wouldn't use it that way. I'd write it as
>>>>>
>>>>> sjp <- juliaUsing("SomeJuliaPackage")
>>>>> sjp$myJuliaFunction()
>>>>>
>>>>>This is similar to the advice to use pkg::foo() rather than
>>>>>library(pkg)
>>>>>followed by plain foo() in the code.
>>>>>
>>>>>Duncan Murdoch
>>>>>
>>>>>>
>>>>>> But calling juliaUsing(), as it is now, takes care that if a
>>>package
>>>>>is imported a second time,
>>>>>> the first data base is removed via detach().
>>>>>> This way, users do not have to worry about calling juliaUsing()
>>>>>mutliple times in a script, same
>>>>>> as R users don't have to worry about calling library() multiple
>>>>>times.
>>>>>> If you call the code with attach() multiple times and do not
>>>detach,
>>>>>you get your screen cluttered with
>>>>>> warnings "xxx is masked by xxx".
>>>>>> So I would say it would decrease user-friendliness to return an
>>>>>environment.
>>>>>> I also want to make explicit, that the call to attach
>>>>>> occurs only once in my code, after creating the environment:
>>>>>>
>>>>>> envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>>>>> if (envName %in% search()) {
>>>>>> detach(envName, character.only = TRUE)
>>>>>> }
>>>>>> attach(funenv, name = envName)
>>>>>>
>>>>>> This code is only called by juliaImport() and juliaUsing(), which
>>>>>aren't called by any other function of
>>>>>> the package
>>>>>> and are supposed to be called directly by the user.
>>>>>>
>>>>>> Stefan
>>>>>>
>>>>>> ----------------urspr?ngliche Nachricht-----------------
>>>>>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>>>>>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>>>>>[bbolker at gmail.com]
>>>>>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>>>>>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>>>>>> -------------------------------------------------
>>>>>>
>>>>>>
>>>>>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>>>>>
>>>>>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>>>>>> | Just reply to the CRAN maintainers and explain this situation.
>>>>>It?s
>>>>>>>> | slightly buried, but the e-mail you received does say:
>>>>>>>> |
>>>>>>>> | > If you are fairly certain the rejection is a false positive,
>>>>>please reply-all to this
>>>>>>>> | > message and explain.
>>>>>>>>
>>>>>>>> True, but this misses the "Letter of the law" versus the "Spirit
>>>of
>>>>>the law".
>>>>>>>>
>>>>>>>> It might be worth mentioning that use of attach() is seen, to
>>>find
>>>>>one poor
>>>>>>>> analogy, pretty much like use of global variables these days.
>>>"Just
>>>>>because
>>>>>>>> you could does not mean you should".
>>>>>>>>
>>>>>>>> See e.g. one of the first google hits for 'r do not use attach'
>>>>>here:
>>>>>>>>
>>>>>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>>>>>
>>>>>>> I don't have a strong opinion on this: the proposed use seems to
>>>be
>>>>>no
>>>>>>> worse than library() or require(). Those are fine for users to
>>>use,
>>>>>but
>>>>>>> are discouraged in a package. If the attach() never happens
>>>without
>>>>>an
>>>>>>> explicit request from the user (and that's what it sounds like),
>>>I'd
>>>>>say
>>>>>>> it's probably okay.
>>>>>>>
>>>>>>> However, there is an easy workaround: just return the environment
>>>>>>> without attaching it. Then the user has the choice of attaching
>>>it,
>>>>>or
>>>>>>> using it as a prefix when they call the functions in it. So it's
>>>not
>>>>>as
>>>>>>> though this will destroy the utility of the package if Stefan
>>>isn't
>>>>>>> allowed to call attach().
>>>>>>>
>>>>>>> Duncan Murdoch
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>______________________________________________
>>>>>R-package-devel at r-project.org mailing list
>>>>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>
>
>
> --
>
> Stefan Lenz
>
> Institut f?r Medizinische Biometrie und Statistik
> Medizinische Fakult?t / Universit?tsklinikum Freiburg
>
> Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg
>
> Tel.: 0761/203-6670
> E-Mail: lenz at imbi.uni-freiburg.de
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


--

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de


From |enz @end|ng |rom |mb|@un|-|re|burg@de  Thu Apr  9 18:09:18 2020
From: |enz @end|ng |rom |mb|@un|-|re|burg@de (Stefan Lenz IMBI)
Date: Thu, 09 Apr 2020 18:09:18 +0200
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200409173035.EGroupware.9va3hIotP_Ry5zTry04BGzf@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
 <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>,
 <20200409104127.EGroupware.Frn8sICScuDTqpktcG74Az3@_>,
 <20200409173035.EGroupware.9va3hIotP_Ry5zTry04BGzf@_>
Message-ID: <20200409180918.EGroupware.QBjFgVbmXMVuv5G-LPtbU2w@_>

When I execute the example, I also get a strange behaviour:

 library(namespace)
 ns <- makeNamespace("myNamespace")
 assign("test",7, env=ns)
 ls(env=ns) 

When I now want to invoke any help for a function, I get a warning message:

 > ?loadNamespace
 Warning message:
 In find.package(if (is.null(package)) loadedNamespaces() else package, :
 there is no package called ?myNamespace?

Also sessionInfo doesn't work any more:

 > sessionInfo()
 Error in if (pkgpath == "") { : argument is of length zero

I don't think this is a good sign....
Stefan

 
----------------urspr?ngliche Nachricht-----------------
Von: Joris Meys [Joris.Meys at ugent.be]
An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], r-package-devel at r-project.org
Datum: Thu, 9 Apr 2020 15:37:09 +0000
-------------------------------------------------
 
 
> Hi Stefan,
> 
> you need the function makeNamespace() to create the environment as a namespace. 
> Look at the examples in the help files, I found them rather instructive. I also 
> hope someone else chimes in to shed some light on whether or not that approach 
> would be acceptable.
> 
> 
> Joris Meys
> Statistician
> T +32 9 264 61 79
> 
> Department Data Analysis and Mathematical Modelling
> 
> Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent, 
> Belgium
> T administration office +32 9 264 59 32
> 
> www.ugent.be
> 
> e-maildisclaimer
> 
> 
> ________________________________________
> From: Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
> Sent: Thursday, April 9, 2020 5:30 PM
> To: Joris Meys; Jeff Newmiller; r-package-devel at r-project.org; Duncan 
> Murdoch
> Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission 
> JuliaConnectoR 0.5.0
> 
> Hi!
> Thanks for pointing to the package "namespace".
> I experimented with it but I couldn't really figure out how it is supposed to work:
> 
> The following code leads to strange errors that I don't understand:
> 
> > nse <- list2env(list(data="x", asdf = 2))
> > namespace::registerNamespace(name = "NewNamespace", env = nse)
> > NewNamespace::asdf
> Error in asNamespace(ns) : not a namespace
> 
> It would really be interesting if someone could comment on whether the namespace 
> approach is feasible, how it is supposed to work, and whether/how it would be 
> better than using attach.
> Greetings!
> Stefan
> 
> 
> ----------------urspr?ngliche Nachricht-----------------
> Von: Joris Meys [Joris.Meys at ugent.be]
> An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], Jeff Newmiller 
> [jdnewmil at dcn.davis.ca.us], r-package-devel at r-project.org, Duncan 
> Murdoch [murdoch.duncan at gmail.com]
> Datum: Thu, 9 Apr 2020 12:59:23 +0000
> -------------------------------------------------
> 
> 
>> Hi Stefan,
>>
>> first of all, thank you for taking the time and effort to link Julia and R. That
>> said, I would strongly encourage you to go for a reticulate-like approach.
>> There's a good reason for that. Once you start mixing languages, you really want
>> to have some indication what code is ran in what language. Especially since I can
>> imagine at one point there'll be a Julia function masking an R function of the same
>> name, and that is going to cause a world of hurt and confusion.
>>
>> If you don't like environments, you can try to use namespace functionality.
>> There's the "namespace" package that allows you to create one, and some internal
>> namespace functions are visible (eg namespaceExport() from base). That's
>> going to be the closest to mimicking R packages, but it's beyond my knowledge to
>> know how feasible this approach actually is. I hope someone else chimes in,
>> especially if this is dangerous for other reasons I overlooked.
>>
>> Kind regards
>> Joris
>>
>> Joris Meys
>> Statistician
>> T +32 9 264 61 79
>>
>> Department Data Analysis and Mathematical Modelling
>>
>> Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent,
>> Belgium
>> T administration office +32 9 264 59 32
>>
>> www.ugent.be
>>
>> e-maildisclaimer
>>
>>
>> ________________________________________
>> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf
>> of Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
>> Sent: Thursday, April 9, 2020 10:41 AM
>> To: Jeff Newmiller; r-package-devel at r-project.org; Duncan Murdoch
>> Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
>> JuliaConnectoR 0.5.0
>>
>> It is important for me to get my package into CRAN.
>> I haven't gotten any answer from the CRAN maintainers. I already tried to submit a
>> version of the package before some months and haven't gotten any reply then.
>> The replies you gave me (thanks to all engaged in the discussion) were mixed.
>> I still think that the library-like import is a good feature, but if it is not
>> possible to get this package on CRAN with it, I will change it with returning an
>> environment like reticulate.
>> My question now is:
>> So what would be the process how to proceed?
>> Is there anybody who can make a decision in such cases?
>> Or do I make this decision myself after I lost hope that it will be accepted the way
>> it is now?
>>
>> Stefan
>>
>>
>> ----------------urspr?ngliche Nachricht-----------------
>> Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>> An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de],
>> r-package-devel at r-project.org, Duncan Murdoch
>> [murdoch.duncan at gmail.com]
>> Datum: Tue, 07 Apr 2020 09:52:52 -0700
>> -------------------------------------------------
>>
>>
>>> I did not say "interfere"... I said "problems with consistency". I don't think
>>> your wholesale import of functions without corresponding help pages is
>>> consistent with the normal use of R, which will make reading R code written with
>>> this mechanism in place a painful source of trouble for help forums.
>>>
>>> On the other hand, if the code is prefaced with an environment name then there will
>>> be no expectation that a help page should exist on the part of someone reading that
>>> code for the first time. (It will be no less obscure, but at least it won't be
>>> misleading.)
>>>
>>> On April 7, 2020 9:40:02 AM PDT, Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
>>> wrote:
>>>>Thank you very much for your comment.
>>>>Could you elaborate how you think that it could interfere with the help
>>>>system?
>>>>I haven't yet connected the Julia help with the R help, as the R help
>>>>system is quite complex and RStudio handles it again differently. So
>>>>it's simply like the functions were declared on the command line. They
>>>>have no help.
>>>>A simply way to print the help for a Julia function, e.g. the function
>>>>"first", is to call
>>>> juliaEval("@doc first")
>>>>This then simply prints the output on the command line.
>>>>
>>>>
>>>>----------------urspr?ngliche Nachricht-----------------
>>>>Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>>>>An: r-package-devel at r-project.org, Duncan Murdoch
>>>>[murdoch.duncan at gmail.com], Stefan Lenz IMBI
>>>>[lenz at imbi.uni-freiburg.de]
>>>>Datum: Mon, 06 Apr 2020 10:51:53 -0700
>>>>-------------------------------------------------
>>>>
>>>>
>>>>> One could take the position that the library and require functions
>>>>were a mistake
>>>>> to begin with and that all contributed packages should be accessed
>>>>using ::... or
>>>>> one could recognize that these functions are an expected feature of R
>>>>at this
>>>>> point and then it is not defensible to ban the proposed approach of
>>>>importing
>>>>> names as Stefan wants to. I don't think it is fair to require this
>>>>higher level of
>>>>> specificity just because it involves use of attach.
>>>>>
>>>>> That said, another feature of R packages is the integrated help
>>>>system...
>>>>> importing Julia functions wholesale may lead to problems with
>>>>consistency in
>>>>> navigating the help files. IMO it may be justifiable to ban this
>>>>particular
>>>>> syntactic convenience to maintain some separation in the minds of
>>>>users looking
>>>>> for help on these new functions, since the syntactic and semantic
>>>>structure of
>>>>> functions from another language may not align well with normal R
>>>>functions. But I
>>>>> am not familiar with Julia or Stefan's package or the support it
>>>>brings in this
>>>>> area... I just disagree with banning a "library" lookalike function
>>>>"just
>>>>> because" it happens to involve attach.
>>>>>
>>>>> On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch
>>>><murdoch.duncan at gmail.com>
>>>>> wrote:
>>>>>>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>>>>>>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>>>>>>loading an R package
>>>>>>>
>>>>>>> juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>>>>>> myJuliaFunction()
>>>>>>>
>>>>>>> like R:
>>>>>>>
>>>>>>> library("MyRPackage") # exports myRFunction
>>>>>>> myRFunction()
>>>>>>>
>>>>>>> I could return an environment, such that the call becomes
>>>>>>>
>>>>>>> attach(juliaUsing("SomeJuliaPackage"))
>>>>>>> myJuliaFunction()
>>>>>>
>>>>>>I wouldn't use it that way. I'd write it as
>>>>>>
>>>>>> sjp <- juliaUsing("SomeJuliaPackage")
>>>>>> sjp$myJuliaFunction()
>>>>>>
>>>>>>This is similar to the advice to use pkg::foo() rather than
>>>>>>library(pkg)
>>>>>>followed by plain foo() in the code.
>>>>>>
>>>>>>Duncan Murdoch
>>>>>>
>>>>>>>
>>>>>>> But calling juliaUsing(), as it is now, takes care that if a
>>>>package
>>>>>>is imported a second time,
>>>>>>> the first data base is removed via detach().
>>>>>>> This way, users do not have to worry about calling juliaUsing()
>>>>>>mutliple times in a script, same
>>>>>>> as R users don't have to worry about calling library() multiple
>>>>>>times.
>>>>>>> If you call the code with attach() multiple times and do not
>>>>detach,
>>>>>>you get your screen cluttered with
>>>>>>> warnings "xxx is masked by xxx".
>>>>>>> So I would say it would decrease user-friendliness to return an
>>>>>>environment.
>>>>>>> I also want to make explicit, that the call to attach
>>>>>>> occurs only once in my code, after creating the environment:
>>>>>>>
>>>>>>> envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>>>>>> if (envName %in% search()) {
>>>>>>> detach(envName, character.only = TRUE)
>>>>>>> }
>>>>>>> attach(funenv, name = envName)
>>>>>>>
>>>>>>> This code is only called by juliaImport() and juliaUsing(), which
>>>>>>aren't called by any other function of
>>>>>>> the package
>>>>>>> and are supposed to be called directly by the user.
>>>>>>>
>>>>>>> Stefan
>>>>>>>
>>>>>>> ----------------urspr?ngliche Nachricht-----------------
>>>>>>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>>>>>>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>>>>>>[bbolker at gmail.com]
>>>>>>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>>>>>>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>>>>>>> -------------------------------------------------
>>>>>>>
>>>>>>>
>>>>>>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>>>>>>
>>>>>>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>>>>>>> | Just reply to the CRAN maintainers and explain this situation.
>>>>>>It?s
>>>>>>>>> | slightly buried, but the e-mail you received does say:
>>>>>>>>> |
>>>>>>>>> | > If you are fairly certain the rejection is a false positive,
>>>>>>please reply-all to this
>>>>>>>>> | > message and explain.
>>>>>>>>>
>>>>>>>>> True, but this misses the "Letter of the law" versus the "Spirit
>>>>of
>>>>>>the law".
>>>>>>>>>
>>>>>>>>> It might be worth mentioning that use of attach() is seen, to
>>>>find
>>>>>>one poor
>>>>>>>>> analogy, pretty much like use of global variables these days.
>>>>"Just
>>>>>>because
>>>>>>>>> you could does not mean you should".
>>>>>>>>>
>>>>>>>>> See e.g. one of the first google hits for 'r do not use attach'
>>>>>>here:
>>>>>>>>>
>>>>>>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>>>>>>
>>>>>>>> I don't have a strong opinion on this: the proposed use seems to
>>>>be
>>>>>>no
>>>>>>>> worse than library() or require(). Those are fine for users to
>>>>use,
>>>>>>but
>>>>>>>> are discouraged in a package. If the attach() never happens
>>>>without
>>>>>>an
>>>>>>>> explicit request from the user (and that's what it sounds like),
>>>>I'd
>>>>>>say
>>>>>>>> it's probably okay.
>>>>>>>>
>>>>>>>> However, there is an easy workaround: just return the environment
>>>>>>>> without attaching it. Then the user has the choice of attaching
>>>>it,
>>>>>>or
>>>>>>>> using it as a prefix when they call the functions in it. So it's
>>>>not
>>>>>>as
>>>>>>>> though this will destroy the utility of the package if Stefan
>>>>isn't
>>>>>>>> allowed to call attach().
>>>>>>>>
>>>>>>>> Duncan Murdoch
>>>>>>>>
>>>>>>>> ______________________________________________
>>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>______________________________________________
>>>>>>R-package-devel at r-project.org mailing list
>>>>>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>
>>
>>
>> --
>>
>> Stefan Lenz
>>
>> Institut f?r Medizinische Biometrie und Statistik
>> Medizinische Fakult?t / Universit?tsklinikum Freiburg
>>
>> Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg
>>
>> Tel.: 0761/203-6670
>> E-Mail: lenz at imbi.uni-freiburg.de
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 
> --
> 
> Stefan Lenz
> 
> Institut f?r Medizinische Biometrie und Statistik
> Medizinische Fakult?t / Universit?tsklinikum Freiburg
> 
> Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg
> 
> Tel.: 0761/203-6670
> E-Mail: lenz at imbi.uni-freiburg.de
> 


-- 

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de


From Jor|@@Mey@ @end|ng |rom UGent@be  Thu Apr  9 18:20:37 2020
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Thu, 9 Apr 2020 16:20:37 +0000
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200409180918.EGroupware.QBjFgVbmXMVuv5G-LPtbU2w@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
 <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>,
 <20200409104127.EGroupware.Frn8sICScuDTqpktcG74Az3@_>,
 <20200409173035.EGroupware.9va3hIotP_Ry5zTry04BGzf@_>,
 <20200409180918.EGroupware.QBjFgVbmXMVuv5G-LPtbU2w@_>
Message-ID: <1586449238351.7197@UGent.be>

You're right, that's enough to not dig any further. I remembered it from the earlier days of devtools, but they removed that dependency ages ago. I also believe now the namespace package predates the later changes to the namespace mechanism. Forget what I said, I should have spent a bit more time testing it myself first.

Kind regards
Joris


Joris Meys
Statistician
T +32 9 264 61 79

Department Data Analysis and Mathematical Modelling

Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent, Belgium
T administration office +32 9 264 59 32

www.ugent.be

e-maildisclaimer


________________________________________
From: Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
Sent: Thursday, April 9, 2020 6:09 PM
To: Joris Meys; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission JuliaConnectoR 0.5.0

When I execute the example, I also get a strange behaviour:

 library(namespace)
 ns <- makeNamespace("myNamespace")
 assign("test",7, env=ns)
 ls(env=ns)

When I now want to invoke any help for a function, I get a warning message:

 > ?loadNamespace
 Warning message:
 In find.package(if (is.null(package)) loadedNamespaces() else package, :
 there is no package called ?myNamespace?

Also sessionInfo doesn't work any more:

 > sessionInfo()
 Error in if (pkgpath == "") { : argument is of length zero

I don't think this is a good sign....
Stefan


----------------urspr?ngliche Nachricht-----------------
Von: Joris Meys [Joris.Meys at ugent.be]
An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], r-package-devel at r-project.org
Datum: Thu, 9 Apr 2020 15:37:09 +0000
-------------------------------------------------


> Hi Stefan,
>
> you need the function makeNamespace() to create the environment as a namespace.
> Look at the examples in the help files, I found them rather instructive. I also
> hope someone else chimes in to shed some light on whether or not that approach
> would be acceptable.
>
>
> Joris Meys
> Statistician
> T +32 9 264 61 79
>
> Department Data Analysis and Mathematical Modelling
>
> Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent,
> Belgium
> T administration office +32 9 264 59 32
>
> www.ugent.be
>
> e-maildisclaimer
>
>
> ________________________________________
> From: Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
> Sent: Thursday, April 9, 2020 5:30 PM
> To: Joris Meys; Jeff Newmiller; r-package-devel at r-project.org; Duncan
> Murdoch
> Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
> JuliaConnectoR 0.5.0
>
> Hi!
> Thanks for pointing to the package "namespace".
> I experimented with it but I couldn't really figure out how it is supposed to work:
>
> The following code leads to strange errors that I don't understand:
>
> > nse <- list2env(list(data="x", asdf = 2))
> > namespace::registerNamespace(name = "NewNamespace", env = nse)
> > NewNamespace::asdf
> Error in asNamespace(ns) : not a namespace
>
> It would really be interesting if someone could comment on whether the namespace
> approach is feasible, how it is supposed to work, and whether/how it would be
> better than using attach.
> Greetings!
> Stefan
>
>
> ----------------urspr?ngliche Nachricht-----------------
> Von: Joris Meys [Joris.Meys at ugent.be]
> An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], Jeff Newmiller
> [jdnewmil at dcn.davis.ca.us], r-package-devel at r-project.org, Duncan
> Murdoch [murdoch.duncan at gmail.com]
> Datum: Thu, 9 Apr 2020 12:59:23 +0000
> -------------------------------------------------
>
>
>> Hi Stefan,
>>
>> first of all, thank you for taking the time and effort to link Julia and R. That
>> said, I would strongly encourage you to go for a reticulate-like approach.
>> There's a good reason for that. Once you start mixing languages, you really want
>> to have some indication what code is ran in what language. Especially since I can
>> imagine at one point there'll be a Julia function masking an R function of the same
>> name, and that is going to cause a world of hurt and confusion.
>>
>> If you don't like environments, you can try to use namespace functionality.
>> There's the "namespace" package that allows you to create one, and some internal
>> namespace functions are visible (eg namespaceExport() from base). That's
>> going to be the closest to mimicking R packages, but it's beyond my knowledge to
>> know how feasible this approach actually is. I hope someone else chimes in,
>> especially if this is dangerous for other reasons I overlooked.
>>
>> Kind regards
>> Joris
>>
>> Joris Meys
>> Statistician
>> T +32 9 264 61 79
>>
>> Department Data Analysis and Mathematical Modelling
>>
>> Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent,
>> Belgium
>> T administration office +32 9 264 59 32
>>
>> www.ugent.be
>>
>> e-maildisclaimer
>>
>>
>> ________________________________________
>> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf
>> of Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
>> Sent: Thursday, April 9, 2020 10:41 AM
>> To: Jeff Newmiller; r-package-devel at r-project.org; Duncan Murdoch
>> Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
>> JuliaConnectoR 0.5.0
>>
>> It is important for me to get my package into CRAN.
>> I haven't gotten any answer from the CRAN maintainers. I already tried to submit a
>> version of the package before some months and haven't gotten any reply then.
>> The replies you gave me (thanks to all engaged in the discussion) were mixed.
>> I still think that the library-like import is a good feature, but if it is not
>> possible to get this package on CRAN with it, I will change it with returning an
>> environment like reticulate.
>> My question now is:
>> So what would be the process how to proceed?
>> Is there anybody who can make a decision in such cases?
>> Or do I make this decision myself after I lost hope that it will be accepted the way
>> it is now?
>>
>> Stefan
>>
>>
>> ----------------urspr?ngliche Nachricht-----------------
>> Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>> An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de],
>> r-package-devel at r-project.org, Duncan Murdoch
>> [murdoch.duncan at gmail.com]
>> Datum: Tue, 07 Apr 2020 09:52:52 -0700
>> -------------------------------------------------
>>
>>
>>> I did not say "interfere"... I said "problems with consistency". I don't think
>>> your wholesale import of functions without corresponding help pages is
>>> consistent with the normal use of R, which will make reading R code written with
>>> this mechanism in place a painful source of trouble for help forums.
>>>
>>> On the other hand, if the code is prefaced with an environment name then there will
>>> be no expectation that a help page should exist on the part of someone reading that
>>> code for the first time. (It will be no less obscure, but at least it won't be
>>> misleading.)
>>>
>>> On April 7, 2020 9:40:02 AM PDT, Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
>>> wrote:
>>>>Thank you very much for your comment.
>>>>Could you elaborate how you think that it could interfere with the help
>>>>system?
>>>>I haven't yet connected the Julia help with the R help, as the R help
>>>>system is quite complex and RStudio handles it again differently. So
>>>>it's simply like the functions were declared on the command line. They
>>>>have no help.
>>>>A simply way to print the help for a Julia function, e.g. the function
>>>>"first", is to call
>>>> juliaEval("@doc first")
>>>>This then simply prints the output on the command line.
>>>>
>>>>
>>>>----------------urspr?ngliche Nachricht-----------------
>>>>Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>>>>An: r-package-devel at r-project.org, Duncan Murdoch
>>>>[murdoch.duncan at gmail.com], Stefan Lenz IMBI
>>>>[lenz at imbi.uni-freiburg.de]
>>>>Datum: Mon, 06 Apr 2020 10:51:53 -0700
>>>>-------------------------------------------------
>>>>
>>>>
>>>>> One could take the position that the library and require functions
>>>>were a mistake
>>>>> to begin with and that all contributed packages should be accessed
>>>>using ::... or
>>>>> one could recognize that these functions are an expected feature of R
>>>>at this
>>>>> point and then it is not defensible to ban the proposed approach of
>>>>importing
>>>>> names as Stefan wants to. I don't think it is fair to require this
>>>>higher level of
>>>>> specificity just because it involves use of attach.
>>>>>
>>>>> That said, another feature of R packages is the integrated help
>>>>system...
>>>>> importing Julia functions wholesale may lead to problems with
>>>>consistency in
>>>>> navigating the help files. IMO it may be justifiable to ban this
>>>>particular
>>>>> syntactic convenience to maintain some separation in the minds of
>>>>users looking
>>>>> for help on these new functions, since the syntactic and semantic
>>>>structure of
>>>>> functions from another language may not align well with normal R
>>>>functions. But I
>>>>> am not familiar with Julia or Stefan's package or the support it
>>>>brings in this
>>>>> area... I just disagree with banning a "library" lookalike function
>>>>"just
>>>>> because" it happens to involve attach.
>>>>>
>>>>> On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch
>>>><murdoch.duncan at gmail.com>
>>>>> wrote:
>>>>>>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>>>>>>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>>>>>>loading an R package
>>>>>>>
>>>>>>> juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>>>>>> myJuliaFunction()
>>>>>>>
>>>>>>> like R:
>>>>>>>
>>>>>>> library("MyRPackage") # exports myRFunction
>>>>>>> myRFunction()
>>>>>>>
>>>>>>> I could return an environment, such that the call becomes
>>>>>>>
>>>>>>> attach(juliaUsing("SomeJuliaPackage"))
>>>>>>> myJuliaFunction()
>>>>>>
>>>>>>I wouldn't use it that way. I'd write it as
>>>>>>
>>>>>> sjp <- juliaUsing("SomeJuliaPackage")
>>>>>> sjp$myJuliaFunction()
>>>>>>
>>>>>>This is similar to the advice to use pkg::foo() rather than
>>>>>>library(pkg)
>>>>>>followed by plain foo() in the code.
>>>>>>
>>>>>>Duncan Murdoch
>>>>>>
>>>>>>>
>>>>>>> But calling juliaUsing(), as it is now, takes care that if a
>>>>package
>>>>>>is imported a second time,
>>>>>>> the first data base is removed via detach().
>>>>>>> This way, users do not have to worry about calling juliaUsing()
>>>>>>mutliple times in a script, same
>>>>>>> as R users don't have to worry about calling library() multiple
>>>>>>times.
>>>>>>> If you call the code with attach() multiple times and do not
>>>>detach,
>>>>>>you get your screen cluttered with
>>>>>>> warnings "xxx is masked by xxx".
>>>>>>> So I would say it would decrease user-friendliness to return an
>>>>>>environment.
>>>>>>> I also want to make explicit, that the call to attach
>>>>>>> occurs only once in my code, after creating the environment:
>>>>>>>
>>>>>>> envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>>>>>> if (envName %in% search()) {
>>>>>>> detach(envName, character.only = TRUE)
>>>>>>> }
>>>>>>> attach(funenv, name = envName)
>>>>>>>
>>>>>>> This code is only called by juliaImport() and juliaUsing(), which
>>>>>>aren't called by any other function of
>>>>>>> the package
>>>>>>> and are supposed to be called directly by the user.
>>>>>>>
>>>>>>> Stefan
>>>>>>>
>>>>>>> ----------------urspr?ngliche Nachricht-----------------
>>>>>>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>>>>>>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>>>>>>[bbolker at gmail.com]
>>>>>>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>>>>>>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>>>>>>> -------------------------------------------------
>>>>>>>
>>>>>>>
>>>>>>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>>>>>>
>>>>>>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>>>>>>> | Just reply to the CRAN maintainers and explain this situation.
>>>>>>It?s
>>>>>>>>> | slightly buried, but the e-mail you received does say:
>>>>>>>>> |
>>>>>>>>> | > If you are fairly certain the rejection is a false positive,
>>>>>>please reply-all to this
>>>>>>>>> | > message and explain.
>>>>>>>>>
>>>>>>>>> True, but this misses the "Letter of the law" versus the "Spirit
>>>>of
>>>>>>the law".
>>>>>>>>>
>>>>>>>>> It might be worth mentioning that use of attach() is seen, to
>>>>find
>>>>>>one poor
>>>>>>>>> analogy, pretty much like use of global variables these days.
>>>>"Just
>>>>>>because
>>>>>>>>> you could does not mean you should".
>>>>>>>>>
>>>>>>>>> See e.g. one of the first google hits for 'r do not use attach'
>>>>>>here:
>>>>>>>>>
>>>>>>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>>>>>>
>>>>>>>> I don't have a strong opinion on this: the proposed use seems to
>>>>be
>>>>>>no
>>>>>>>> worse than library() or require(). Those are fine for users to
>>>>use,
>>>>>>but
>>>>>>>> are discouraged in a package. If the attach() never happens
>>>>without
>>>>>>an
>>>>>>>> explicit request from the user (and that's what it sounds like),
>>>>I'd
>>>>>>say
>>>>>>>> it's probably okay.
>>>>>>>>
>>>>>>>> However, there is an easy workaround: just return the environment
>>>>>>>> without attaching it. Then the user has the choice of attaching
>>>>it,
>>>>>>or
>>>>>>>> using it as a prefix when they call the functions in it. So it's
>>>>not
>>>>>>as
>>>>>>>> though this will destroy the utility of the package if Stefan
>>>>isn't
>>>>>>>> allowed to call attach().
>>>>>>>>
>>>>>>>> Duncan Murdoch
>>>>>>>>
>>>>>>>> ______________________________________________
>>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>______________________________________________
>>>>>>R-package-devel at r-project.org mailing list
>>>>>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>
>>
>>
>> --
>>
>> Stefan Lenz
>>
>> Institut f?r Medizinische Biometrie und Statistik
>> Medizinische Fakult?t / Universit?tsklinikum Freiburg
>>
>> Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg
>>
>> Tel.: 0761/203-6670
>> E-Mail: lenz at imbi.uni-freiburg.de
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
> --
>
> Stefan Lenz
>
> Institut f?r Medizinische Biometrie und Statistik
> Medizinische Fakult?t / Universit?tsklinikum Freiburg
>
> Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg
>
> Tel.: 0761/203-6670
> E-Mail: lenz at imbi.uni-freiburg.de
>


--

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de


From |@w@onj@|7net @end|ng |rom gm@||@com  Thu Apr  9 21:28:49 2020
From: |@w@onj@|7net @end|ng |rom gm@||@com (John Lawson)
Date: Thu, 9 Apr 2020 13:28:49 -0600
Subject: [R-pkg-devel] manual inspection of new packages
Message-ID: <CAJiVmSBKg9OeVh5U76m9w+f6YWsruw4ZD9bMyX4ZpsxuY6Wpgg@mail.gmail.com>

I submitted the Package AQLSchemes on Dec 9, 2019. I corrected the errors
noted in the manual inspection and resubmitted it on Jan 9. I got the
message that it passed the automatic checks and was awaiting manual
inspection. I have not heard anything since.  Do I need to resubmitt the
package? Or how can I find out if this package is still in the queue for
manual inspection?

Thank you
John Lawson

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Thu Apr  9 21:33:13 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Thu, 9 Apr 2020 15:33:13 -0400
Subject: [R-pkg-devel] manual inspection of new packages
In-Reply-To: <CAJiVmSBKg9OeVh5U76m9w+f6YWsruw4ZD9bMyX4ZpsxuY6Wpgg@mail.gmail.com>
References: <CAJiVmSBKg9OeVh5U76m9w+f6YWsruw4ZD9bMyX4ZpsxuY6Wpgg@mail.gmail.com>
Message-ID: <18901446-8c10-1a39-008e-ff16745cba2f@gmail.com>

 ? foghorn::cran_incoming() will let you inspect the package queue.

 ? (most likely if the package has been sitting this long it's not ever 
going to move farther through the queue and you should resubmit.? An 
e-mail to the CRAN maintainers after you check the status would probably 
be appropriate.)


On 4/9/20 3:28 PM, John Lawson wrote:
> I submitted the Package AQLSchemes on Dec 9, 2019. I corrected the errors
> noted in the manual inspection and resubmitted it on Jan 9. I got the
> message that it passed the automatic checks and was awaiting manual
> inspection. I have not heard anything since.  Do I need to resubmitt the
> package? Or how can I find out if this package is still in the queue for
> manual inspection?
>
> Thank you
> John Lawson
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Apr  9 21:46:09 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 9 Apr 2020 15:46:09 -0400
Subject: [R-pkg-devel] manual inspection of new packages
In-Reply-To: <CAJiVmSBKg9OeVh5U76m9w+f6YWsruw4ZD9bMyX4ZpsxuY6Wpgg@mail.gmail.com>
References: <CAJiVmSBKg9OeVh5U76m9w+f6YWsruw4ZD9bMyX4ZpsxuY6Wpgg@mail.gmail.com>
Message-ID: <429ad5d3-2e10-a709-e976-5f0fd6e08afe@gmail.com>

On 09/04/2020 3:28 p.m., John Lawson wrote:
> I submitted the Package AQLSchemes on Dec 9, 2019. I corrected the errors
> noted in the manual inspection and resubmitted it on Jan 9. I got the
> message that it passed the automatic checks and was awaiting manual
> inspection. I have not heard anything since.  Do I need to resubmitt the
> package? Or how can I find out if this package is still in the queue for
> manual inspection?
> 

As the CRAN policy document says under Submission, you can see the queue 
by looking at ftp://cran.r-project.org/incoming/.  The foghorn package 
makes this really easy:  you run foghorn::cran_incoming("AQLSchemes") to 
see where your package is sitting.  It doesn't appear to be there at all.

Next time, I'd follow up if you go a week without hearing a reply; 
waiting 3 months seems a bit long.

Duncan Murdoch


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Apr 10 00:13:56 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 09 Apr 2020 15:13:56 -0700
Subject: [R-pkg-devel] Add SystemRequirements of imported package in
 description file?
In-Reply-To: <936BA237-CCC6-4006-B5FC-FEF0AEA60FD4@contoso.com>
References: <936BA237-CCC6-4006-B5FC-FEF0AEA60FD4@contoso.com>
Message-ID: <DD591087-3C32-45B9-8C8E-11846C1A49BD@dcn.davis.ca.us>

AFAIK, no, though if the upstream package cannot (or won't) be implemented without that system requirement and it really is a requirement for this package then you might want to indicate "libzzz via Package X" just to be clear for users. If it isn't a requirement for most of your functionality then you may want to use Suggests to alleviate the problem.

On April 9, 2020 12:51:56 AM PDT, Dominik Leutnant <leutnant at fh-muenster.de> wrote:
>Hi all,
>
>should ?SystemRequirements? of an imported package be listed in the
>description file of a package?
>
>General scenario:
>- Package X imports Package Y.
>- Package Y lists ?libzzz? as SystemRequirements.
>
>Should Package X list the SystemRequirements ?libzzz? as well?
>(question occurred @ https://github.com/dleutnant/influxdbr/issues/47)
>
>Thank you and happy easter!
>Dominik
>
>
>
>Dr. Dominik Leutnant
>Department of Civil Engineering
>Institute for Infrastucture?Water?Resources?Environment (IWARU)
>WG Urban Hydrology and Water Management
>
>Muenster University of Applied Sciences
>Corrensstr. 25
>FRG-48149 M?nster
>Germany
>
>Tel.:  +49 (0) 251/83-65274
>Mail:  leutnant at fh-muenster.de<mailto:leutnant at fh-muenster.de>
>Web: https://www.fh-muenster.de/
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From |@w@onj@|7net @end|ng |rom gm@||@com  Fri Apr 10 05:08:46 2020
From: |@w@onj@|7net @end|ng |rom gm@||@com (John Lawson)
Date: Thu, 9 Apr 2020 21:08:46 -0600
Subject: [R-pkg-devel] manual inspection of new packages
In-Reply-To: <429ad5d3-2e10-a709-e976-5f0fd6e08afe@gmail.com>
References: <CAJiVmSBKg9OeVh5U76m9w+f6YWsruw4ZD9bMyX4ZpsxuY6Wpgg@mail.gmail.com>
 <429ad5d3-2e10-a709-e976-5f0fd6e08afe@gmail.com>
Message-ID: <CAJiVmSCW=iUXSQ4koyPGv1M6zF2UeGW7HDMv7U8rjbr00niYEg@mail.gmail.com>

Ok, thanks.

On Thu, Apr 9, 2020 at 1:46 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 09/04/2020 3:28 p.m., John Lawson wrote:
> > I submitted the Package AQLSchemes on Dec 9, 2019. I corrected the errors
> > noted in the manual inspection and resubmitted it on Jan 9. I got the
> > message that it passed the automatic checks and was awaiting manual
> > inspection. I have not heard anything since.  Do I need to resubmitt the
> > package? Or how can I find out if this package is still in the queue for
> > manual inspection?
> >
>
> As the CRAN policy document says under Submission, you can see the queue
> by looking at ftp://cran.r-project.org/incoming/.  The foghorn package
> makes this really easy:  you run foghorn::cran_incoming("AQLSchemes") to
> see where your package is sitting.  It doesn't appear to be there at all.
>
> Next time, I'd follow up if you go a week without hearing a reply;
> waiting 3 months seems a bit long.
>
> Duncan Murdoch
>

	[[alternative HTML version deleted]]


From p@u|@de@n@b@||ey @end|ng |rom gm@||@com  Sat Apr 11 00:23:59 2020
From: p@u|@de@n@b@||ey @end|ng |rom gm@||@com (Paul Bailey)
Date: Fri, 10 Apr 2020 17:23:59 -0500
Subject: [R-pkg-devel] R CMD check fails on namespace load for an installed
 package
References: <BYAPR05MB565544AF3B69FC73B317AE6ABEDE0@BYAPR05MB5655.namprd05.prod.outlook.com>
Message-ID: <831CE732-A262-4534-9321-A0914FB0CC92@gmail.com>

When I try to R CMD check --as-cran the EdSurvey package for submission on R-devel I get this error:

> 
> * installing *source* package 'EdSurvey' ...
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> Error: package or namespace load failed for 'car':
> package 'car' was installed before R 4.0.0: please re-install it
> Error: package 'car' could not be loaded
> Execution halted
> ERROR: lazy loading failed for package 'EdSurvey'
> * removing 'C:/Users/pbailey/Documents/GitHub/EdSurvey.Rcheck/EdSurvey'
>  


So, I went into R and tried installing car, and that  appears to exit cleanly (at end of message). But then I still got the same (above) message.

I made sure the .libPath was the one in R-devel/library.

What can I do to test my package on R-devel?


>  
> > install.packages("car")
> Warning: unable to access index for repository https://cloud.r-project.org/bin/windows/contrib/4.1: <https://cloud.r-project.org/bin/windows/contrib/4.1:>
>   cannot open URL 'https://cloud.r-project.org/bin/windows/contrib/4.1/PACKAGES <https://cloud.r-project.org/bin/windows/contrib/4.1/PACKAGES>'
> installing the source package ?car?
>  
> trying URL 'https://cloud.r-project.org/src/contrib/car_3.0-7.tar.gz <https://cloud.r-project.org/src/contrib/car_3.0-7.tar.gz>'
> Content type 'application/x-gzip' length 497735 bytes (486 KB)
> downloaded 486 KB
>  
> * installing *source* package 'car' ...
> ** package 'car' successfully unpacked and MD5 sums checked
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> ** help
> *** installing help indices
>   converting help for package 'car'
>     finding HTML links ... done
>     Anova                                   html  
>     Boot                                    html  
>     Boxplot                                 html  
>     Contrasts                               html  
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/Contrasts.Rd:68: file link 'contr.treatment' in package 'stats' does not exist and so has been treated as a topic
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/Contrasts.Rd:68: file link 'contr.sum' in package 'stats' does not exist and so has been treated as a topic
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/Contrasts.Rd:69: file link 'contr.helmert' in package 'stats' does not exist and so has been treated as a topic
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/Contrasts.Rd:69: file link 'contr.poly' in package 'stats' does not exist and so has been treated as a topic
>     Ellipses                                html  
>     Export                                  html  
>     Import                                  html  
>     Predict                                 html  
>     S                                       html  
>     ScatterplotSmoothers                    html  
>     Tapply                                  html  
>     TransformationAxes                      html  
>     avPlots                                 html  
>     bcPower                                 html  
>     boxCox                                  html  
>     boxCoxVariable                          html  
>     boxTidwell                              html  
>     brief                                   html  
>     car-defunct                             html  
>     car-deprecated                          html  
>     car-internal                            html  
>     carHexsticker                           html  
>     carPalette                              html  
>     carWeb                                  html  
>     ceresPlots                              html  
>     compareCoefs                            html  
>     crPlots                                 html  
>     deltaMethod                             html  
>     densityPlot                             html  
>     dfbetaPlots                             html  
>     durbinWatsonTest                        html  
>     hccm                                    html  
>     hist.boot                               html  
>     infIndexPlot                            html  
>     influence-mixed-models                  html  
>     influencePlot                           html  
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/influencePlot.Rd:57: file link 'cooks.distance' in package 'stats' does not exist and so has been treated as a topic
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/influencePlot.Rd:57: file link 'rstudent' in package 'stats' does not exist and so has been treated as a topic
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/influencePlot.Rd:58: file link 'hatvalues' in package 'stats' does not exist and so has been treated as a topic
>     invResPlot                              html  
>     invTranPlot                             html  
>     leveneTest                              html  
>     leveragePlots                           html  
>     linearHypothesis                        html  
>     logit                                   html  
>     marginalModelPlot                       html  
>     mcPlots                                 html  
>     ncvTest                                 html  
>     outlierTest                             html  
>     panel.car                               html  
>     poTest                                  html  
>     powerTransform                          html  
>     qqPlot                                  html  
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/qqPlot.Rd:124: file link 'qqplot' in package 'stats' does not exist and so has been treated as a topic
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/qqPlot.Rd:125: file link 'qqline' in package 'stats' does not exist and so has been treated as a topic
>     recode                                  html  
>     regLine                                 html  
>     residualPlots                           html  
>     scatter3d                               html  
>     scatterplot                             html  
>     finding level-2 HTML links ... done
>  
>     scatterplotMatrix                       html  
>     showLabels                              html  
>     sigmaHat                                html  
>     some                                    html  
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/some.Rd:48: file link 'tail' in package 'utils' does not exist and so has been treated as a topic
>     spreadLevelPlot                         html  
>     subsets                                 html  
>     symbox                                  html  
>     testTransform                           html  
>     vif                                     html  
>     wcrossprod                              html  
>     which.names                             html  
> ** building package indices
> ** installing vignettes
> ** testing if installed package can be loaded from temporary location
> *** arch - i386
> *** arch - x64
> ** testing if installed package can be loaded from final location
> *** arch - i386
> *** arch - x64
> ** testing if installed package keeps a record of temporary installation path
> * DONE (car)
>  
> The downloaded source packages are in
>         ?C:\Users\pbailey\AppData\Local\Temp\1\RtmpWiUQtf\downloaded_packages?


	[[alternative HTML version deleted]]


From |ro@o @end|ng |rom un@|@edu@co  Sat Apr 11 22:58:43 2020
From: |ro@o @end|ng |rom un@|@edu@co (Fernando Roa)
Date: Sat, 11 Apr 2020 17:58:43 -0300
Subject: [R-pkg-devel] vignette warning in r-patched os-x
Message-ID: <CA+fi=+kgWhanLUWQFoPdK4pbx93f9HGVsCNEnpvaW8pzo8insA@mail.gmail.com>

Hello,
All packages with vignettes are having this error in r-patched-osx-x86_64:

    dyld: Symbol not found: ____chkstk_darwin
     Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X
10.15)
     Expected in: /usr/lib/libSystem.B.dylib

    Error: processing vignette 'topography.Rmd' failed with diagnostics:
    pandoc document conversion failed with error 6
    --- failed re-building ?topography.Rmd?

For example:
https://cran.r-project.org/web/checks/check_results_mdsumner_at_gmail.com.html
https://cran.r-project.org/web/checks/check_results_santaR.html

I wonder if it will affect future submissions (having the same error in 2
submissions)

best,
-- 
Fernando Roa

	[[alternative HTML version deleted]]


From |p@|om@re@ @end|ng |rom correo@ugr@e@  Mon Apr 13 12:29:50 2020
From: |p@|om@re@ @end|ng |rom correo@ugr@e@ (Francisco Palomares)
Date: Mon, 13 Apr 2020 12:29:50 +0200
Subject: [R-pkg-devel] Update my package
Message-ID: <c9a524dd2270650326dde7cb06416edb@correo.ugr.es>


Hi,

I want to update the version of my package

What is the procedure?

Best,
Francisco


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Mon Apr 13 13:07:46 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Mon, 13 Apr 2020 12:07:46 +0100
Subject: [R-pkg-devel] Update my package
In-Reply-To: <c9a524dd2270650326dde7cb06416edb@correo.ugr.es>
References: <c9a524dd2270650326dde7cb06416edb@correo.ugr.es>
Message-ID: <1f8e399a-4a25-69be-b685-359a51dcf420@dewey.myzen.co.uk>

Dear Francisco

It is hard to answer this without more details. If you mean to update a 
package which you have on CRAN then the CRAN policy document has a short 
section on re-submission at the very end. If it is a private package not 
for distribution then you just update the version in the DESCRIPTION file.

Michael

On 13/04/2020 11:29, Francisco Palomares wrote:
> 
> Hi,
> 
> I want to update the version of my package
> 
> What is the procedure?
> 
> Best,
> Francisco
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Apr 14 11:03:58 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 14 Apr 2020 11:03:58 +0200
Subject: [R-pkg-devel] manual inspection of new packages
In-Reply-To: <CAJiVmSCW=iUXSQ4koyPGv1M6zF2UeGW7HDMv7U8rjbr00niYEg@mail.gmail.com>
References: <CAJiVmSBKg9OeVh5U76m9w+f6YWsruw4ZD9bMyX4ZpsxuY6Wpgg@mail.gmail.com>
 <429ad5d3-2e10-a709-e976-5f0fd6e08afe@gmail.com>
 <CAJiVmSCW=iUXSQ4koyPGv1M6zF2UeGW7HDMv7U8rjbr00niYEg@mail.gmail.com>
Message-ID: <4ed1fb9f-ad38-5467-2b48-d6e07cf4ebbf@statistik.tu-dortmund.de>

I just looked, you got a repsonse from Swetlana Herbrandt on Dec 16.
Will forward privately.

Best,
Uwe Ligges





On 10.04.2020 05:08, John Lawson wrote:
> Ok, thanks.
> 
> On Thu, Apr 9, 2020 at 1:46 PM Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
> 
>> On 09/04/2020 3:28 p.m., John Lawson wrote:
>>> I submitted the Package AQLSchemes on Dec 9, 2019. I corrected the errors
>>> noted in the manual inspection and resubmitted it on Jan 9. I got the
>>> message that it passed the automatic checks and was awaiting manual
>>> inspection. I have not heard anything since.  Do I need to resubmitt the
>>> package? Or how can I find out if this package is still in the queue for
>>> manual inspection?
>>>
>>
>> As the CRAN policy document says under Submission, you can see the queue
>> by looking at ftp://cran.r-project.org/incoming/.  The foghorn package
>> makes this really easy:  you run foghorn::cran_incoming("AQLSchemes") to
>> see where your package is sitting.  It doesn't appear to be there at all.
>>
>> Next time, I'd follow up if you go a week without hearing a reply;
>> waiting 3 months seems a bit long.
>>
>> Duncan Murdoch
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From konr@d@rudo|ph @end|ng |rom gm@||@com  Tue Apr 14 12:23:07 2020
From: konr@d@rudo|ph @end|ng |rom gm@||@com (Konrad Rudolph)
Date: Tue, 14 Apr 2020 11:23:07 +0100
Subject: [R-pkg-devel] R CMD check failure during vignette rebuilding
Message-ID: <CAM2gKPZfgke_+p5ZGhmWpmRXV=+ccykxgFtuhuwSqiTn5frb1g@mail.gmail.com>

I have a package vignette that reproducibly fails the second time
round in `R CMD check`, in the ?checking re-building of vignette
outputs? step.

I have uploaded a small reprex to GitHub [1]. But in a nutshell the
vignette contains a subfolder `foo`, and a file `foo/bar`. And the
`test.rmd` vignette contains the following R code:

> newfile = file.path(getwd(), 'foo', 'baz')
> writeLines('baz', newfile)

This code causes `R CMD check` to delete the folder `foo` inside
`00_pkg_src/vignettes` after building the vignette, leading to the
following error message further down the line:

>   Error(s) in re-building vignettes:
>     ...
>   --- re-building ?test.rmd? using rmarkdown
>   Quitting from lines 8-10 (test.rmd)
>   Error: processing vignette 'test.rmd' failed with diagnostics:
>   cannot open the connection
>   --- failed re-building ?test.rmd?

This seems to be due to the cleanup after building vignettes inside
`tools::buildVignette`, because creating a file inside a folder
changes the directory subfolder modification time (on POSIX-like
systems) so the whole folder is deleted in cleanup, rather than just
the file. Can I prevent this?

[1] https://github.com/klmr/vignettetest

-- 
Konrad Rudolph // @klmr


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Apr 14 14:11:15 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 14 Apr 2020 14:11:15 +0200
Subject: [R-pkg-devel] Windows specific install error
In-Reply-To: <BL0PR04MB6609C9BDFED98E6FD684D69EF9C30@BL0PR04MB6609.namprd04.prod.outlook.com>
References: <CAD9kV-LGosh0NoV90pYv3UuRSAaVwMpmxJLqvV4wyMSXaF538w@mail.gmail.com>
 <BL0PR04MB6609C9BDFED98E6FD684D69EF9C30@BL0PR04MB6609.namprd04.prod.outlook.com>
Message-ID: <e26a5f3f-34e7-fc69-88d4-134177171566@statistik.tu-dortmund.de>

Yes, should be fixed by tmorrow,
Uwe


On 08.04.2020 00:16, Martin Morgan wrote:
> This is the same as
> 
>    https://stat.ethz.ch/pipermail/r-package-devel/2020q1/005256.html
> 
> and due I believe to stale packages on the CRAN windows builder; the solution is I believe on the CRAN side.
> 
> Martin Morgan
> 
> ?On 4/7/20, 6:14 PM, "R-package-devel on behalf of Ryan Sartor" <r-package-devel-bounces at r-project.org on behalf of sartorry at gmail.com> wrote:
> 
>      Hello everyone,
>      
>      My package seems to pass all the CRAN checks for Linux but fails to install
>      on Windows. This is the contents of 00install.out:
>      
>      * installing *source* package 'DiPALM' ...
>      ** using staged installation
>      ** R
>      ** data
>      ** inst
>      ** byte-compile and prepare package for lazy loading
>      Error: .onLoad failed in loadNamespace() for 'S4Vectors', details:
>        call: validObject(.Object)
>        error: invalid class "LLint" object: superclass "integer_OR_LLint"
>      not defined in the environment of the object's class
>      Execution halted
>      ERROR: lazy loading failed for package 'DiPALM'
>      * removing 'd:/RCompile/CRANincoming/R-devel/lib/DiPALM'
>      
>      
>      If I understand the error, it's saying that the CRAN server cannot
>      load the S4Vectors package because one of classes it depends on is not
>      defined. I'm guessing this is a namespace issue? I've taken a few
>      shots at adding directives to my NAMESPACE file but obviously I don't
>      know what I'm doing or maybe the error has nothing to do with my
>      package namespace.
>      
>      Any insight would be greatly appreciated.
>      
>      Thank you!
>      
>      	[[alternative HTML version deleted]]
>      
>      ______________________________________________
>      R-package-devel at r-project.org mailing list
>      https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr 14 14:53:02 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 14 Apr 2020 08:53:02 -0400
Subject: [R-pkg-devel] R CMD check failure during vignette rebuilding
In-Reply-To: <CAM2gKPZfgke_+p5ZGhmWpmRXV=+ccykxgFtuhuwSqiTn5frb1g@mail.gmail.com>
References: <CAM2gKPZfgke_+p5ZGhmWpmRXV=+ccykxgFtuhuwSqiTn5frb1g@mail.gmail.com>
Message-ID: <56680cce-7733-a647-0acc-b89b1e29275c@gmail.com>

On 14/04/2020 6:23 a.m., Konrad Rudolph wrote:
> I have a package vignette that reproducibly fails the second time
> round in `R CMD check`, in the ?checking re-building of vignette
> outputs? step.
> 
> I have uploaded a small reprex to GitHub [1]. But in a nutshell the
> vignette contains a subfolder `foo`, and a file `foo/bar`. And the
> `test.rmd` vignette contains the following R code:
> 
>> newfile = file.path(getwd(), 'foo', 'baz')
>> writeLines('baz', newfile)
> 
> This code causes `R CMD check` to delete the folder `foo` inside
> `00_pkg_src/vignettes` after building the vignette, leading to the
> following error message further down the line:
> 
>>    Error(s) in re-building vignettes:
>>      ...
>>    --- re-building ?test.rmd? using rmarkdown
>>    Quitting from lines 8-10 (test.rmd)
>>    Error: processing vignette 'test.rmd' failed with diagnostics:
>>    cannot open the connection
>>    --- failed re-building ?test.rmd?
> 
> This seems to be due to the cleanup after building vignettes inside
> `tools::buildVignette`, because creating a file inside a folder
> changes the directory subfolder modification time (on POSIX-like
> systems) so the whole folder is deleted in cleanup, rather than just
> the file. Can I prevent this?
> 
> [1] https://github.com/klmr/vignettetest
> 

Normally the checks don't want you to be writing files outside of the 
temp dir, because if a user processed your vignette, it might stomp on 
their files.  So can't you change that code to

   dir.create(tempdir(), 'foo')
   newfile <- file.path(tempdir(), 'foo', 'baz')

Duncan Murdoch


From konr@d@rudo|ph @end|ng |rom gm@||@com  Tue Apr 14 18:22:02 2020
From: konr@d@rudo|ph @end|ng |rom gm@||@com (Konrad Rudolph)
Date: Tue, 14 Apr 2020 17:22:02 +0100
Subject: [R-pkg-devel] R CMD check failure during vignette rebuilding
In-Reply-To: <56680cce-7733-a647-0acc-b89b1e29275c@gmail.com>
References: <CAM2gKPZfgke_+p5ZGhmWpmRXV=+ccykxgFtuhuwSqiTn5frb1g@mail.gmail.com>
 <56680cce-7733-a647-0acc-b89b1e29275c@gmail.com>
Message-ID: <CAM2gKPbLweJXV0kR0_BXF5ciya0K5q0FNj-quVNRQnubKNcyxw@mail.gmail.com>

Hi Duncan,

Thanks for the explanation. Using a temporary directory is what I?m
doing at the moment as a workaround.

What confused me was that `R CMD check` *already* works inside a new
directory (a set of different ones, in fact), and it doesn?t seem to
be documented anywhere that this is the intended behaviour (the
documentation of `buildVignettes` only mentions it removes ?newly
created ? files?, not existing folders), so I thought creating
temporary files under `vignettes` was fair game. Could you clarify
whether this behaviour (deleting existing folders during cleanup) is
intentional? If so, could it be documented more explicitly??


On Tue, Apr 14, 2020 at 1:53 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 14/04/2020 6:23 a.m., Konrad Rudolph wrote:
> > I have a package vignette that reproducibly fails the second time
> > round in `R CMD check`, in the ?checking re-building of vignette
> > outputs? step.
> >
> > I have uploaded a small reprex to GitHub [1]. But in a nutshell the
> > vignette contains a subfolder `foo`, and a file `foo/bar`. And the
> > `test.rmd` vignette contains the following R code:
> >
> >> newfile = file.path(getwd(), 'foo', 'baz')
> >> writeLines('baz', newfile)
> >
> > This code causes `R CMD check` to delete the folder `foo` inside
> > `00_pkg_src/vignettes` after building the vignette, leading to the
> > following error message further down the line:
> >
> >>    Error(s) in re-building vignettes:
> >>      ...
> >>    --- re-building ?test.rmd? using rmarkdown
> >>    Quitting from lines 8-10 (test.rmd)
> >>    Error: processing vignette 'test.rmd' failed with diagnostics:
> >>    cannot open the connection
> >>    --- failed re-building ?test.rmd?
> >
> > This seems to be due to the cleanup after building vignettes inside
> > `tools::buildVignette`, because creating a file inside a folder
> > changes the directory subfolder modification time (on POSIX-like
> > systems) so the whole folder is deleted in cleanup, rather than just
> > the file. Can I prevent this?
> >
> > [1] https://github.com/klmr/vignettetest
> >
>
> Normally the checks don't want you to be writing files outside of the
> temp dir, because if a user processed your vignette, it might stomp on
> their files.  So can't you change that code to
>
>    dir.create(tempdir(), 'foo')
>    newfile <- file.path(tempdir(), 'foo', 'baz')
>
> Duncan Murdoch



--
Konrad Rudolph // @klmr


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr 14 18:38:04 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 14 Apr 2020 12:38:04 -0400
Subject: [R-pkg-devel] R CMD check failure during vignette rebuilding
In-Reply-To: <CAM2gKPbLweJXV0kR0_BXF5ciya0K5q0FNj-quVNRQnubKNcyxw@mail.gmail.com>
References: <CAM2gKPZfgke_+p5ZGhmWpmRXV=+ccykxgFtuhuwSqiTn5frb1g@mail.gmail.com>
 <56680cce-7733-a647-0acc-b89b1e29275c@gmail.com>
 <CAM2gKPbLweJXV0kR0_BXF5ciya0K5q0FNj-quVNRQnubKNcyxw@mail.gmail.com>
Message-ID: <d36caadf-9018-590e-8918-5e37a98534c1@gmail.com>

No, I can't tell you whether the behaviour you saw was intentional or 
not, I didn't write it.  But the CRAN policy (which is the motivation 
for many of the checks) says "Packages should not write in the user?s 
home filespace (including clipboards), nor anywhere else on the file 
system apart from the R session?s temporary directory (or during 
installation in the location pointed to by TMPDIR: and such usage should 
be cleaned up)."

Duncan Murdoch

On 14/04/2020 12:22 p.m., Konrad Rudolph wrote:
> Hi Duncan,
> 
> Thanks for the explanation. Using a temporary directory is what I?m
> doing at the moment as a workaround.
> 
> What confused me was that `R CMD check` *already* works inside a new
> directory (a set of different ones, in fact), and it doesn?t seem to
> be documented anywhere that this is the intended behaviour (the
> documentation of `buildVignettes` only mentions it removes ?newly
> created ? files?, not existing folders), so I thought creating
> temporary files under `vignettes` was fair game. Could you clarify
> whether this behaviour (deleting existing folders during cleanup) is
> intentional? If so, could it be documented more explicitly??
> 
> 
> On Tue, Apr 14, 2020 at 1:53 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 14/04/2020 6:23 a.m., Konrad Rudolph wrote:
>>> I have a package vignette that reproducibly fails the second time
>>> round in `R CMD check`, in the ?checking re-building of vignette
>>> outputs? step.
>>>
>>> I have uploaded a small reprex to GitHub [1]. But in a nutshell the
>>> vignette contains a subfolder `foo`, and a file `foo/bar`. And the
>>> `test.rmd` vignette contains the following R code:
>>>
>>>> newfile = file.path(getwd(), 'foo', 'baz')
>>>> writeLines('baz', newfile)
>>>
>>> This code causes `R CMD check` to delete the folder `foo` inside
>>> `00_pkg_src/vignettes` after building the vignette, leading to the
>>> following error message further down the line:
>>>
>>>>     Error(s) in re-building vignettes:
>>>>       ...
>>>>     --- re-building ?test.rmd? using rmarkdown
>>>>     Quitting from lines 8-10 (test.rmd)
>>>>     Error: processing vignette 'test.rmd' failed with diagnostics:
>>>>     cannot open the connection
>>>>     --- failed re-building ?test.rmd?
>>>
>>> This seems to be due to the cleanup after building vignettes inside
>>> `tools::buildVignette`, because creating a file inside a folder
>>> changes the directory subfolder modification time (on POSIX-like
>>> systems) so the whole folder is deleted in cleanup, rather than just
>>> the file. Can I prevent this?
>>>
>>> [1] https://github.com/klmr/vignettetest
>>>
>>
>> Normally the checks don't want you to be writing files outside of the
>> temp dir, because if a user processed your vignette, it might stomp on
>> their files.  So can't you change that code to
>>
>>     dir.create(tempdir(), 'foo')
>>     newfile <- file.path(tempdir(), 'foo', 'baz')
>>
>> Duncan Murdoch
> 
> 
> 
> --
> Konrad Rudolph // @klmr
>


From p@u|@@@v@ry @end|ng |rom un|v-|comte@|r  Wed Apr 15 11:14:48 2020
From: p@u|@@@v@ry @end|ng |rom un|v-|comte@|r (Paul SAVARY)
Date: Wed, 15 Apr 2020 11:14:48 +0200 (CEST)
Subject: [R-pkg-devel] Error vignette rebuilding and package imports when
 re-submitting package
Message-ID: <325213815.42520131.1586942087995.JavaMail.zimbra@univ-fcomte.fr>

Hello, 

I'm having trouble re-submitting a package (graph4lg). 

- With r-patched_osx, vignette rebuilding fails with the following message : 

checking re-building of vignette outputs ... [12s/16s] WARNING 
Error(s) in re-building vignettes: 
... 
--- re-building ?vignette_graph4lg.Rmd? using rmarkdown 
dyld: lazy symbol binding failed: Symbol not found: ____chkstk_darwin 
Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X 10.15) 
Expected in: /usr/lib/libSystem.B.dylib 

dyld: Symbol not found: ____chkstk_darwin 
Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X 10.15) 
Expected in: /usr/lib/libSystem.B.dylib 

Error: processing vignette 'vignette_graph4lg.Rmd' failed with diagnostics: 
pandoc document conversion failed with error 6 
--- failed re-building ?vignette_graph4lg.Rmd? 

SUMMARY: processing the following file failed: 
?vignette_graph4lg.Rmd? 

Error: Vignette re-building failed. 
Execution halted 

- Besides, although I removed some unused packages from the imports in DESCRIPTION file, I still obtain this message : 

checking dependencies in R code ... NOTE 
Namespaces in Imports field not imported from: 
?Imap? ?Rdpack? ?ade4? ?doBy? ?mclust? 
All declared Imports should be used. 

Except Rdpack which is needed to build the vignette, I removed these packages. 

Finally, although I submit version 0.4.0, I receive checking errors relative to version 0.3.0. 

I thank you in advance for your feedbacks. 
Regards 
Paul Savary 







	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Apr 15 16:04:05 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 15 Apr 2020 10:04:05 -0400
Subject: [R-pkg-devel] 
 Error vignette rebuilding and package imports when
 re-submitting package
In-Reply-To: <325213815.42520131.1586942087995.JavaMail.zimbra@univ-fcomte.fr>
References: <325213815.42520131.1586942087995.JavaMail.zimbra@univ-fcomte.fr>
Message-ID: <235954c4-97d3-9657-c9b2-fe03fa8af35e@gmail.com>

On 15/04/2020 5:14 a.m., Paul SAVARY wrote:
> Hello,
> 
> I'm having trouble re-submitting a package (graph4lg).
> 
> - With r-patched_osx, vignette rebuilding fails with the following message :
> 
> checking re-building of vignette outputs ... [12s/16s] WARNING
> Error(s) in re-building vignettes:
> ...
> --- re-building ?vignette_graph4lg.Rmd? using rmarkdown
> dyld: lazy symbol binding failed: Symbol not found: ____chkstk_darwin
> Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X 10.15)
> Expected in: /usr/lib/libSystem.B.dylib
> 
> dyld: Symbol not found: ____chkstk_darwin
> Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X 10.15)
> Expected in: /usr/lib/libSystem.B.dylib
> 
> Error: processing vignette 'vignette_graph4lg.Rmd' failed with diagnostics:
> pandoc document conversion failed with error 6
> --- failed re-building ?vignette_graph4lg.Rmd?
> 
> SUMMARY: processing the following file failed:
> ?vignette_graph4lg.Rmd?
> 
> Error: Vignette re-building failed.
> Execution halted

I was told this was a transient problem on the MacOS build system:  the 
pandoc installed there was defective.  I don't know if it has been fixed 
yet.

> 
> - Besides, although I removed some unused packages from the imports in DESCRIPTION file, I still obtain this message :
> 
> checking dependencies in R code ... NOTE
> Namespaces in Imports field not imported from:
> ?Imap? ?Rdpack? ?ade4? ?doBy? ?mclust?
> All declared Imports should be used.
> 
> Except Rdpack which is needed to build the vignette, I removed these packages.

Generally something needed only for the vignettes should be in Suggests 
rather than Imports.

> Finally, although I submit version 0.4.0, I receive checking errors relative to version 0.3.0.

It sounds like someone slipped up.  It might have been you (sending the 
wrong file, or looking at the wrong check log), or maybe CRAN.  In 
either case, I don't think there's anything you can do other than check 
that you're submitting the right file (use a new version number) after 
fixing the Rdpack issue.

Duncan Murdoch
> 
> I thank you in advance for your feedbacks.
> Regards
> Paul Savary
> 
> 
> 
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Thu Apr 16 09:29:58 2020
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Thu, 16 Apr 2020 07:29:58 +0000
Subject: [R-pkg-devel] 
 Error vignette rebuilding and package imports when
 re-submitting package
In-Reply-To: <325213815.42520131.1586942087995.JavaMail.zimbra@univ-fcomte.fr>
References: <325213815.42520131.1586942087995.JavaMail.zimbra@univ-fcomte.fr>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E01D8A72D21@MBXP03.ds.man.ac.uk>

Just add 

importFrom(Rdpack,  reprompt) 

in the NAMESPACE file (any function from Rdpack will do). 

Georgi Boshnakov

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Paul SAVARY
Sent: 15 April 2020 10:15
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Error vignette rebuilding and package imports when re-submitting package

Hello, 

I'm having trouble re-submitting a package (graph4lg). 

- With r-patched_osx, vignette rebuilding fails with the following message : 

checking re-building of vignette outputs ... [12s/16s] WARNING
Error(s) in re-building vignettes: 
... 
--- re-building ?vignette_graph4lg.Rmd? using rmarkdown
dyld: lazy symbol binding failed: Symbol not found: ____chkstk_darwin Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X 10.15) Expected in: /usr/lib/libSystem.B.dylib 

dyld: Symbol not found: ____chkstk_darwin Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X 10.15) Expected in: /usr/lib/libSystem.B.dylib 

Error: processing vignette 'vignette_graph4lg.Rmd' failed with diagnostics: 
pandoc document conversion failed with error 6
--- failed re-building ?vignette_graph4lg.Rmd? 

SUMMARY: processing the following file failed: 
?vignette_graph4lg.Rmd? 

Error: Vignette re-building failed. 
Execution halted 

- Besides, although I removed some unused packages from the imports in DESCRIPTION file, I still obtain this message : 

checking dependencies in R code ... NOTE Namespaces in Imports field not imported from: 
?Imap? ?Rdpack? ?ade4? ?doBy? ?mclust? 
All declared Imports should be used. 

Except Rdpack which is needed to build the vignette, I removed these packages. 

Finally, although I submit version 0.4.0, I receive checking errors relative to version 0.3.0. 

I thank you in advance for your feedbacks. 
Regards
Paul Savary 







	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

From |ro@o @end|ng |rom un@|@edu@co  Thu Apr 16 13:37:44 2020
From: |ro@o @end|ng |rom un@|@edu@co (Fernando Roa)
Date: Thu, 16 Apr 2020 08:37:44 -0300
Subject: [R-pkg-devel] 
 Error vignette rebuilding and package imports when
 re-submitting package
In-Reply-To: <325213815.42520131.1586942087995.JavaMail.zimbra@univ-fcomte.fr>
References: <325213815.42520131.1586942087995.JavaMail.zimbra@univ-fcomte.fr>
Message-ID: <CA+fi=+mm+Ud4guudKfv0PDBOCW=SsQHi_xZ5wT6kgcmCeqnTLw@mail.gmail.com>

Related thread:
https://stat.ethz.ch/pipermail/r-package-devel/2020q2/005300.html
best,

On Wed, Apr 15, 2020 at 9:13 AM Paul SAVARY <paul.savary at univ-fcomte.fr>
wrote:

> Hello,
>
> I'm having trouble re-submitting a package (graph4lg).
>
> - With r-patched_osx, vignette rebuilding fails with the following message
> :
>
> checking re-building of vignette outputs ... [12s/16s] WARNING
> Error(s) in re-building vignettes:
> ...
> --- re-building ?vignette_graph4lg.Rmd? using rmarkdown
> dyld: lazy symbol binding failed: Symbol not found: ____chkstk_darwin
> Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X
> 10.15)
> Expected in: /usr/lib/libSystem.B.dylib
>
> dyld: Symbol not found: ____chkstk_darwin
> Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X
> 10.15)
> Expected in: /usr/lib/libSystem.B.dylib
>
> Error: processing vignette 'vignette_graph4lg.Rmd' failed with
> diagnostics:
> pandoc document conversion failed with error 6
> --- failed re-building ?vignette_graph4lg.Rmd?
>
> SUMMARY: processing the following file failed:
> ?vignette_graph4lg.Rmd?
>
> Error: Vignette re-building failed.
> Execution halted
>
> - Besides, although I removed some unused packages from the imports in
> DESCRIPTION file, I still obtain this message :
>
> checking dependencies in R code ... NOTE
> Namespaces in Imports field not imported from:
> ?Imap? ?Rdpack? ?ade4? ?doBy? ?mclust?
> All declared Imports should be used.
>
> Except Rdpack which is needed to build the vignette, I removed these
> packages.
>
> Finally, although I submit version 0.4.0, I receive checking errors
> relative to version 0.3.0.
>
> I thank you in advance for your feedbacks.
> Regards
> Paul Savary
>
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Fernando Roa

	[[alternative HTML version deleted]]


From d@z@mor@@ @end|ng |rom un@|@edu@co  Thu Apr 16 19:11:25 2020
From: d@z@mor@@ @end|ng |rom un@|@edu@co (David Andres Zamora Avila)
Date: Thu, 16 Apr 2020 12:11:25 -0500
Subject: [R-pkg-devel] Detritus in temp directory - Note from submission of
 R package in CRAN
Message-ID: <CAJ+nqZ6f_8SBf3mm4xF13+GF4pJJmW6qfhAqLO5-i5nZ=3EpGA@mail.gmail.com>

 Hi,

I submitted my package in CRAN and always appearance the next NOTE.

Flavor: r-devel-linux-x86_64-debian-gcc
Check: for detritus in the temp directory, Result: NOTE
  Found the following files/directories:
    'RtmpcDoRWjr.nc'

I have tried to solve it in several ways (like if(interactive()), but I not
sure how can I solve it.

Thanks.

Kind regards


-- 

David Zamora <https://sites.google.com/a/unal.edu.co/dazamoraa/>
PhD Student, Universidad Nacional de Colombia, Bogot?
phone: +571 3165000 ext 13406
address: Av. NQS (Carrera 30) # 45-03, Hydraulics Lab (408-213)
email: dazamoraa at unal.edu.co

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Apr 16 20:09:19 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 16 Apr 2020 14:09:19 -0400
Subject: [R-pkg-devel] 
 Detritus in temp directory - Note from submission of
 R package in CRAN
In-Reply-To: <CAJ+nqZ6f_8SBf3mm4xF13+GF4pJJmW6qfhAqLO5-i5nZ=3EpGA@mail.gmail.com>
References: <CAJ+nqZ6f_8SBf3mm4xF13+GF4pJJmW6qfhAqLO5-i5nZ=3EpGA@mail.gmail.com>
Message-ID: <c16a5df8-f31a-33da-463d-640420909197@gmail.com>

On 16/04/2020 1:11 p.m., David Andres Zamora Avila wrote:
>   Hi,
> 
> I submitted my package in CRAN and always appearance the next NOTE.
> 
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: for detritus in the temp directory, Result: NOTE
>    Found the following files/directories:
>      'RtmpcDoRWjr.nc'
> 
> I have tried to solve it in several ways (like if(interactive()), but I not
> sure how can I solve it.

How was the file created?  What the check wants is that you delete it 
when you are finished with it.  You can use the unlink() function to do 
that.

Duncan Murdoch


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Apr 17 00:12:48 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 17 Apr 2020 00:12:48 +0200
Subject: [R-pkg-devel] 
 Detritus in temp directory - Note from submission of
 R package in CRAN
In-Reply-To: <c16a5df8-f31a-33da-463d-640420909197@gmail.com>
References: <CAJ+nqZ6f_8SBf3mm4xF13+GF4pJJmW6qfhAqLO5-i5nZ=3EpGA@mail.gmail.com>
 <c16a5df8-f31a-33da-463d-640420909197@gmail.com>
Message-ID: <5cc2d031-2807-67a3-c7ca-4f3534eee228@statistik.tu-dortmund.de>



On 16.04.2020 20:09, Duncan Murdoch wrote:
> On 16/04/2020 1:11 p.m., David Andres Zamora Avila wrote:
>> ? Hi,
>>
>> I submitted my package in CRAN and always appearance the next NOTE.
>>
>> Flavor: r-devel-linux-x86_64-debian-gcc
>> Check: for detritus in the temp directory, Result: NOTE
>> ?? Found the following files/directories:
>> ???? 'RtmpcDoRWjr.nc'
>>
>> I have tried to solve it in several ways (like if(interactive()), but 
>> I not
>> sure how can I solve it.
> 
> How was the file created?? What the check wants is that you delete it 
> when you are finished with it.? You can use the unlink() function to do 
> that.

Or better create it in tempdir(): I guess you used paste(tempdir(), ...) 
instead of file.path() and got afilename one level above tempdir()?

Best,
Uwe Ligges


> 
> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@turner @end|ng |rom @uck|@nd@@c@nz  Fri Apr 17 02:12:30 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 17 Apr 2020 12:12:30 +1200
Subject: [R-pkg-devel] Appropriate keyword in help file.
Message-ID: <077d016e-57ee-f878-4955-6ec4a394729d@auckland.ac.nz>


I'm writing a package (just for my own use, for the time being at least)
that contains a function for estimating the parameters of a 
distribution.  The function is essentially a wrapper for fitdistr() from 
the MASS package.

When I looked at RShowDoc("KEYWORDS"), I could not find an appropriate 
keyword to use in the help file for this function.  There's "htest & 
Statistical Inference", but that's not right, since this function is 
about estimation, not hypothesis testing.  I'd hoped that there'd be a 
keyword "estimation" (or "point estimation") or something like that, but 
there isn't.

I guess I can use "utilities" (???) or "misc", but these seem a bit 
unsatisfactory.

Can anyone suggest a better idea?

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Apr 17 02:14:08 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 16 Apr 2020 20:14:08 -0400
Subject: [R-pkg-devel] Appropriate keyword in help file.
In-Reply-To: <077d016e-57ee-f878-4955-6ec4a394729d@auckland.ac.nz>
References: <077d016e-57ee-f878-4955-6ec4a394729d@auckland.ac.nz>
Message-ID: <799ed9d7-ed2c-b4f5-fe45-24fd06cca001@gmail.com>

On 16/04/2020 8:12 p.m., Rolf Turner wrote:
> 
> I'm writing a package (just for my own use, for the time being at least)
> that contains a function for estimating the parameters of a
> distribution.  The function is essentially a wrapper for fitdistr() from
> the MASS package.
> 
> When I looked at RShowDoc("KEYWORDS"), I could not find an appropriate
> keyword to use in the help file for this function.  There's "htest &
> Statistical Inference", but that's not right, since this function is
> about estimation, not hypothesis testing.  I'd hoped that there'd be a
> keyword "estimation" (or "point estimation") or something like that, but
> there isn't.
> 
> I guess I can use "utilities" (???) or "misc", but these seem a bit
> unsatisfactory.
> 
> Can anyone suggest a better idea?

Don't use any keyword. When was the last time you searched on one?

Duncan Murdoch


From r@turner @end|ng |rom @uck|@nd@@c@nz  Fri Apr 17 02:50:04 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 17 Apr 2020 12:50:04 +1200
Subject: [R-pkg-devel] Appropriate keyword in help file.
In-Reply-To: <799ed9d7-ed2c-b4f5-fe45-24fd06cca001@gmail.com>
References: <077d016e-57ee-f878-4955-6ec4a394729d@auckland.ac.nz>
 <799ed9d7-ed2c-b4f5-fe45-24fd06cca001@gmail.com>
Message-ID: <efbaf82a-fef9-0057-282f-02e6f9772726@auckland.ac.nz>


On 17/04/20 12:14 pm, Duncan Murdoch wrote:

> On 16/04/2020 8:12 p.m., Rolf Turner wrote:
>>
>> I'm writing a package (just for my own use, for the time being at least)
>> that contains a function for estimating the parameters of a
>> distribution.? The function is essentially a wrapper for fitdistr() from
>> the MASS package.
>>
>> When I looked at RShowDoc("KEYWORDS"), I could not find an appropriate
>> keyword to use in the help file for this function.? There's "htest &
>> Statistical Inference", but that's not right, since this function is
>> about estimation, not hypothesis testing.? I'd hoped that there'd be a
>> keyword "estimation" (or "point estimation") or something like that, but
>> there isn't.
>>
>> I guess I can use "utilities" (???) or "misc", but these seem a bit
>> unsatisfactory.
>>
>> Can anyone suggest a better idea?
> 
> Don't use any keyword. When was the last time you searched on one?


I have *never* in my life searched on a keyword! :-)

I just thought that it was an Immutable Law of the Universe that a help 
file had to have at least one keyword, and that the R Gods would rain 
fire and brimstone down upon one's head if no keyword was supplied.

In a similar vein:  would the R Gods allow me to make up my own keyword 
rather than choosing from those listed by RShowDoc("KEYWORDS")?

Thanks.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Apr 17 02:57:20 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 16 Apr 2020 17:57:20 -0700
Subject: [R-pkg-devel] Appropriate keyword in help file.
In-Reply-To: <efbaf82a-fef9-0057-282f-02e6f9772726@auckland.ac.nz>
References: <077d016e-57ee-f878-4955-6ec4a394729d@auckland.ac.nz>
 <799ed9d7-ed2c-b4f5-fe45-24fd06cca001@gmail.com>
 <efbaf82a-fef9-0057-282f-02e6f9772726@auckland.ac.nz>
Message-ID: <D1B0902A-F79E-4F56-931D-4AECA1001F98@dcn.davis.ca.us>

You can get away with a lot if you are not distributing your package. But I usually try to satisfy R CMD check at least.

On April 16, 2020 5:50:04 PM PDT, Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>On 17/04/20 12:14 pm, Duncan Murdoch wrote:
>
>> On 16/04/2020 8:12 p.m., Rolf Turner wrote:
>>>
>>> I'm writing a package (just for my own use, for the time being at
>least)
>>> that contains a function for estimating the parameters of a
>>> distribution.? The function is essentially a wrapper for fitdistr()
>from
>>> the MASS package.
>>>
>>> When I looked at RShowDoc("KEYWORDS"), I could not find an
>appropriate
>>> keyword to use in the help file for this function.? There's "htest &
>>> Statistical Inference", but that's not right, since this function is
>>> about estimation, not hypothesis testing.? I'd hoped that there'd be
>a
>>> keyword "estimation" (or "point estimation") or something like that,
>but
>>> there isn't.
>>>
>>> I guess I can use "utilities" (???) or "misc", but these seem a bit
>>> unsatisfactory.
>>>
>>> Can anyone suggest a better idea?
>> 
>> Don't use any keyword. When was the last time you searched on one?
>
>
>I have *never* in my life searched on a keyword! :-)
>
>I just thought that it was an Immutable Law of the Universe that a help
>
>file had to have at least one keyword, and that the R Gods would rain 
>fire and brimstone down upon one's head if no keyword was supplied.
>
>In a similar vein:  would the R Gods allow me to make up my own keyword
>
>rather than choosing from those listed by RShowDoc("KEYWORDS")?
>
>Thanks.
>
>cheers,
>
>Rolf

-- 
Sent from my phone. Please excuse my brevity.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Apr 17 10:41:24 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 17 Apr 2020 10:41:24 +0200
Subject: [R-pkg-devel] Appropriate keyword in help file.
In-Reply-To: <D1B0902A-F79E-4F56-931D-4AECA1001F98@dcn.davis.ca.us>
References: <077d016e-57ee-f878-4955-6ec4a394729d@auckland.ac.nz>
 <799ed9d7-ed2c-b4f5-fe45-24fd06cca001@gmail.com>
 <efbaf82a-fef9-0057-282f-02e6f9772726@auckland.ac.nz>
 <D1B0902A-F79E-4F56-931D-4AECA1001F98@dcn.davis.ca.us>
Message-ID: <7f6f6e09-ec03-9d65-0006-198e4318a0c3@statistik.tu-dortmund.de>

keywords are not mandatory.

You can invent your own keywords and use them in

\concept{}
entries.

Best,
Uwe Ligges



On 17.04.2020 02:57, Jeff Newmiller wrote:
> You can get away with a lot if you are not distributing your package. But I usually try to satisfy R CMD check at least.
> 
> On April 16, 2020 5:50:04 PM PDT, Rolf Turner <r.turner at auckland.ac.nz> wrote:
>>
>> On 17/04/20 12:14 pm, Duncan Murdoch wrote:
>>
>>> On 16/04/2020 8:12 p.m., Rolf Turner wrote:
>>>>
>>>> I'm writing a package (just for my own use, for the time being at
>> least)
>>>> that contains a function for estimating the parameters of a
>>>> distribution.? The function is essentially a wrapper for fitdistr()
>> from
>>>> the MASS package.
>>>>
>>>> When I looked at RShowDoc("KEYWORDS"), I could not find an
>> appropriate
>>>> keyword to use in the help file for this function.? There's "htest &
>>>> Statistical Inference", but that's not right, since this function is
>>>> about estimation, not hypothesis testing.? I'd hoped that there'd be
>> a
>>>> keyword "estimation" (or "point estimation") or something like that,
>> but
>>>> there isn't.
>>>>
>>>> I guess I can use "utilities" (???) or "misc", but these seem a bit
>>>> unsatisfactory.
>>>>
>>>> Can anyone suggest a better idea?
>>>
>>> Don't use any keyword. When was the last time you searched on one?
>>
>>
>> I have *never* in my life searched on a keyword! :-)
>>
>> I just thought that it was an Immutable Law of the Universe that a help
>>
>> file had to have at least one keyword, and that the R Gods would rain
>> fire and brimstone down upon one's head if no keyword was supplied.
>>
>> In a similar vein:  would the R Gods allow me to make up my own keyword
>>
>> rather than choosing from those listed by RShowDoc("KEYWORDS")?
>>
>> Thanks.
>>
>> cheers,
>>
>> Rolf
>


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sat Apr 18 01:01:38 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sat, 18 Apr 2020 11:01:38 +1200
Subject: [R-pkg-devel] Appropriate keyword in help file.
In-Reply-To: <7f6f6e09-ec03-9d65-0006-198e4318a0c3@statistik.tu-dortmund.de>
References: <077d016e-57ee-f878-4955-6ec4a394729d@auckland.ac.nz>
 <799ed9d7-ed2c-b4f5-fe45-24fd06cca001@gmail.com>
 <efbaf82a-fef9-0057-282f-02e6f9772726@auckland.ac.nz>
 <D1B0902A-F79E-4F56-931D-4AECA1001F98@dcn.davis.ca.us>
 <7f6f6e09-ec03-9d65-0006-198e4318a0c3@statistik.tu-dortmund.de>
Message-ID: <9fe0cefe-abe5-0d4c-7c7c-a74f259c52b6@auckland.ac.nz>


On 17/04/20 8:41 pm, Uwe Ligges wrote:

> keywords are not mandatory.
> 
> You can invent your own keywords and use them in
> 
> \concept{}
> entries.

Thanks Uwe.  This has given me new insight and enlightenment!

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Sat Apr 18 18:36:36 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Sat, 18 Apr 2020 18:36:36 +0200
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
 =?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <cTfz9LdQTDeljdpr97HnBeKOSPRLo90TKjTnzHfV4zfOx0UrOPO5F0KcTex4T85VVqLzSXGp0MyTFZHNjCSoiTYj5nPFijuKiPf2E6siAyg=-1872@protonmail.com>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
 <24205.57605.672636.944802@stat.math.ethz.ch>
 <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>
 <CAF8bMcb-KbfR==w1g3ixjEpGNR7=zn3SEBtwn3i4MimYzzt-dw@mail.gmail.com>
 <cTfz9LdQTDeljdpr97HnBeKOSPRLo90TKjTnzHfV4zfOx0UrOPO5F0KcTex4T85VVqLzSXGp0MyTFZHNjCSoiTYj5nPFijuKiPf2E6siAyg=-1872@protonmail.com>
Message-ID: <24219.11412.330746.824585@stat.math.ethz.ch>

>>>>> renozao  
>>>>>     on Wed, 8 Apr 2020 16:19:59 +0000 writes:

    > Thank you William for the reproducible example.
    > Currently I using the following (same as in William's example):
    > setClassUnion("mMatrix", c("Matrix", "matrix"))

    > Martin, are the changes made in the union class handling affecting the way we should declare them?

    > Thank you.

    > Bests,
    > Renaud

Thank you, Renaud, and Bill Dunlap.

There is obviously a bit of a problem there, but it may well be
"only" a problem in error handling.

As Bill's  trace(get, ..)  shows,  R tries to get
"#HAS_DUPLICATE_CLASS_NAMES"   which is indeed an indication of the problem:

You are trying to  *RE*define a class union that already exists
*identically* in the Matrix package:
In the R-forge development version of 'Matrix', it is
line 717 of  Matrix/R/AllClass.R   (and that will be close also
     	     			    in the CRAN version of Matrix).
				    
So at least for you, Renaud, the solution to the problem is easy:
Just don't do what you should not do: What you want is already
part of Matrix.... and after searching:  It's been part of
Matrix since ca. July 2012 ...

--
But yes, there's a buglet in the 'methods' package currently,
which leads to a misleading error message
(It's arguable if it *should* give an error which it did not previously;
 I think it would be quite a good idea to give at least a
 warning as you are masking class definition of the Matrix
 package which is in your search() path or at least among the
 loaded namespaces at this time).

Best,
Martin


    > ??????? Original Message ???????
    > On Wednesday, April 8, 2020 11:19 AM, William Dunlap <wdunlap at tibco.com> wrote:

    >> Use trace() to get a bit more detail - .__C_compMatrix is looked for in the wrong environment with inherits=FALSE.
    >> 
    >>> setClassUnion("mMatrix", c("Matrix", "matrix"))
    >> Tracing get(name, envir = env) on entry
    >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(name, envir = env) on entry
    >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(name, envir = env) on entry
    >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get("#HAS_DUPLICATE_CLASS_NAMES", envir = .classTable) on entry
    >> x="#HAS_DUPLICATE_CLASS_NAMES", envir="<environment: 0x2787710>", topenv="<environment: base>", inherits=TRUE
    >> Tracing get(name, envir = env) on entry
    >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(name, envir = env) on entry
    >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(name, envir = env) on entry
    >> x=".MTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(".SigLength", envir = env) on entry
    >> x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(".SigLength", envir = env) on entry
    >> x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(name, envir = env) on entry
    >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(".SigLength", envir = env) on entry
    >> x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(".SigLength", envir = env) on entry
    >> x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(cname, envir = cwhere, inherits = FALSE) on entry
    >> x=".__C__compMatrix", envir="<environment: R_GlobalEnv>", topenv="<environment: R_GlobalEnv>", inherits=FALSE
    >> Error in get(cname, envir = cwhere, inherits = FALSE) :
    >> object '.__C__compMatrix' not found
    >> ...
    >> 
    >> Bill Dunlap
    >> TIBCO Software
    >> wdunlap tibco.com
    >> 
    >> On Wed, Apr 8, 2020 at 7:52 AM William Dunlap <wdunlap at tibco.com> wrote:
    >> 
    >>> % R-devel --vanilla --quiet
    >>>> library(Matrix)
    >>>> setClassUnion("mMatrix", c("Matrix", "matrix"))
    >>> Error in get(cname, envir = cwhere, inherits = FALSE) :
    >>> object '.__C__compMatrix' not found
    >>> Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
    >>> unable to create union class:  could not set members "Matrix"
    >>>> sessionInfo()
    >>> R Under development (unstable) (2020-04-07 r78175)
    >>> Platform: x86_64-pc-linux-gnu (64-bit)
    >>> Running under: Ubuntu 16.04.6 LTS
    >>> 
    >>> Matrix products: default
    >>> BLAS/LAPACK: /usr/lib/libopenblasp-r0.2.18.so
    >>> 
    >>> locale:
    >>> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
    >>> [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
    >>> [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
    >>> [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
    >>> [9] LC_ADDRESS=C               LC_TELEPHONE=C
    >>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
    >>> 
    >>> attached base packages:
    >>> [1] stats     graphics  grDevices utils     datasets  methods   base
    >>> 
    >>> other attached packages:
    >>> [1] Matrix_1.2-18
    >>> 
    >>> loaded via a namespace (and not attached):
    >>> [1] compiler_4.1.0  grid_4.1.0      lattice_0.20-41
    >>> 
    >>> Bill Dunlap
    >>> TIBCO Software
    >>> wdunlap tibco.com
    >>> 
    >>> On Wed, Apr 8, 2020 at 7:35 AM Martin Maechler <maechler at stat.math.ethz.ch> wrote:
    >>> 
    >>>>>>>>> renozao
    >>>>>>>>> on Mon, 30 Mar 2020 21:20:43 +0000 writes:
    >>>> 
    >>>> > Hi,
    >>>> > when R CMD check is run under R-devel (2020-03-29 r78108) I get the following error at installation:
    >>>> 
    >>>> > Error in get(cname, envir = cwhere, inherits = FALSE) :
    >>>> > object ?.__C__compMatrix? not found
    >>>> > Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
    >>>> > unable to create union class:  could not set members "Matrix"
    >>>> 
    >>>> > This does not happen on R 3.6.3.
    >>>> 
    >>>> > I tried with Matrix listed in Depends but I still get the same error.
    >>>> 
    >>>> > Is this linked to some changes in union classes or the Matrix package?
    >>>> 
    >>>> > Thank you.
    >>>> 
    >>>> > Bests,
    >>>> > Renaud
    >>>> 
    >>>> Hi Renaud,
    >>>> One reason you got no response here, is because we don't even
    >>>> know about which package you are talking.
    >>>> 
    >>>> So there's nothing, anybody can reproduce from your posting.
    >>>> 
    >>>> There have been changes in R's dealing with class unions etc,
    >>>> notably even *relating* to an earlier bug report on class unions
    >>>> exactly for such a case which was *triggered* when people built
    >>>> on such Matrix classes.
    >>>> 
    >>>> But we would really want to be able to reproduce what you are seeing..
    >>>> 
    >>>> Best regards,
    >>>> Martin Maechler
    >>>> 
    >>>> ETH Zurich, R Core Team *and* maintainer("Matrix")
    >>>> 
    >>>> ______________________________________________
    >>>> R-package-devel at r-project.org mailing list
    >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
    > [[alternative HTML version deleted]]

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From d@z@mor@@ @end|ng |rom un@|@edu@co  Sat Apr 18 22:45:50 2020
From: d@z@mor@@ @end|ng |rom un@|@edu@co (David Andres Zamora Avila)
Date: Sat, 18 Apr 2020 15:45:50 -0500
Subject: [R-pkg-devel] 
 Detritus in temp directory - Note from submission of
 R package in CRAN
In-Reply-To: <5cc2d031-2807-67a3-c7ca-4f3534eee228@statistik.tu-dortmund.de>
References: <CAJ+nqZ6f_8SBf3mm4xF13+GF4pJJmW6qfhAqLO5-i5nZ=3EpGA@mail.gmail.com>
 <c16a5df8-f31a-33da-463d-640420909197@gmail.com>
 <5cc2d031-2807-67a3-c7ca-4f3534eee228@statistik.tu-dortmund.de>
Message-ID: <CAJ+nqZ5a6e3fa31jAJY=pL--T8NXXM_bba6q9CK5=1mUe0mvDA@mail.gmail.com>

Thanks for your answers.
This a part of my script where it creates files and saves it in anything
path. I am not pretty secure how use file.path() or tempdir(). Can you give
me more details about it, please?

 if (!exists("path_pet")){
    path_pet <- getwd()
  } else if (!exists("path_p")){
    path_p <- getwd()
  } else if (!exists("path_p") | !exists("path_pet")){
    path_pet <- getwd()
    path_p <- getwd()
  }

  if (file_type == "raster"){
    # ---- identify raster format and loading----
    if (format == "GTiff"){

      if( length(list.files(path_pet, pattern = ".tif")) == 0 | length(
list.files(path_p, pattern = ".tif")) == 0){
        stop("Not avaliable data of precipitation or evapotranspiration")
      }
      pet_files <- list.files(path_pet)
      pet <- raster::stack(paste(path_pet, pet_files, sep = ""))
      p_files <- list.files(path_p)

Kind regards,

David Zamora

El jue., 16 abr. 2020 a las 17:12, Uwe Ligges (<
ligges at statistik.tu-dortmund.de>) escribi?:

>
>
> On 16.04.2020 20:09, Duncan Murdoch wrote:
> > On 16/04/2020 1:11 p.m., David Andres Zamora Avila wrote:
> >>   Hi,
> >>
> >> I submitted my package in CRAN and always appearance the next NOTE.
> >>
> >> Flavor: r-devel-linux-x86_64-debian-gcc
> >> Check: for detritus in the temp directory, Result: NOTE
> >>    Found the following files/directories:
> >>      'RtmpcDoRWjr.nc'
> >>
> >> I have tried to solve it in several ways (like if(interactive()), but
> >> I not
> >> sure how can I solve it.
> >
> > How was the file created?  What the check wants is that you delete it
> > when you are finished with it.  You can use the unlink() function to do
> > that.
>
> Or better create it in tempdir(): I guess you used paste(tempdir(), ...)
> instead of file.path() and got afilename one level above tempdir()?
>
> Best,
> Uwe Ligges
>
>
> >
> > Duncan Murdoch
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 

David Zamora <https://sites.google.com/a/unal.edu.co/dazamoraa/>
PhD Student, Universidad Nacional de Colombia, Bogot?
phone: +571 3165000 ext 13406
address: Av. NQS (Carrera 30) # 45-03, Hydraulics Lab (408-213)
email: dazamoraa at unal.edu.co

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Apr 18 23:55:32 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 18 Apr 2020 14:55:32 -0700 (PDT)
Subject: [R-pkg-devel] 
 Detritus in temp directory - Note from submission of
 R package in CRAN
In-Reply-To: <CAJ+nqZ5a6e3fa31jAJY=pL--T8NXXM_bba6q9CK5=1mUe0mvDA@mail.gmail.com>
References: <CAJ+nqZ6f_8SBf3mm4xF13+GF4pJJmW6qfhAqLO5-i5nZ=3EpGA@mail.gmail.com>
 <c16a5df8-f31a-33da-463d-640420909197@gmail.com>
 <5cc2d031-2807-67a3-c7ca-4f3534eee228@statistik.tu-dortmund.de>
 <CAJ+nqZ5a6e3fa31jAJY=pL--T8NXXM_bba6q9CK5=1mUe0mvDA@mail.gmail.com>
Message-ID: <alpine.BSF.2.00.2004181434580.74617@pedal.dcn.davis.ca.us>

See below:

On Sat, 18 Apr 2020, David Andres Zamora Avila wrote:

> Thanks for your answers.
> This a part of my script where it creates files and saves it in anything
> path. I am not pretty secure how use file.path() or tempdir(). Can you give
> me more details about it, please?
>
> if (!exists("path_pet")){
>    path_pet <- getwd()
>  } else if (!exists("path_p")){
>    path_p <- getwd()
>  } else if (!exists("path_p") | !exists("path_pet")){
>    path_pet <- getwd()
>    path_p <- getwd()
>  }

The above code should not exist. You are making a package, so you are 
putting it into a function and either looking for the existence of global 
variables (side effects! requiring user to use special variable names! 
this is not good!), or the "path_pet" and "path_p" variables were created 
in your function and you should already know that they exist.

If we assume that "path_pet" and "path_p" are parameters to this package 
function you are writing, like so:

myfunc <- function( x, y, ..., path_pet = getwd(), path_p = getwd() ) {
   ...
}

then the user can let the default be the current working directory, or can 
specify which directories the function should work in. Specifically, when 
you are writing your examples or test code and pretending to be a user, 
you can create a temporary directory and use it like so:

workingdir <- tempdir(TRUE)
result <- myfunc( A, B, path_pet = workingdir, path_p = workingdir )

which means you can then clean up after yourself with

unlink( workingdir, recursive = TRUE )

I don't think this question is really about R packages anymore... if you 
still cannot read the help files to figure out your questions about how to 
do manage temporary files then you should probably make a small 
reproducible example(!!) and post a question on R-help.

(end of comments)

>  if (file_type == "raster"){
>    # ---- identify raster format and loading----
>    if (format == "GTiff"){
>
>      if( length(list.files(path_pet, pattern = ".tif")) == 0 | length(
> list.files(path_p, pattern = ".tif")) == 0){
>        stop("Not avaliable data of precipitation or evapotranspiration")
>      }
>      pet_files <- list.files(path_pet)
>      pet <- raster::stack(paste(path_pet, pet_files, sep = ""))
>      p_files <- list.files(path_p)
> Kind regards,
>
> David Zamora
>
> El jue., 16 abr. 2020 a las 17:12, Uwe Ligges (<
> ligges at statistik.tu-dortmund.de>) escribi?:
>
>>
>>
>> On 16.04.2020 20:09, Duncan Murdoch wrote:
>>> On 16/04/2020 1:11 p.m., David Andres Zamora Avila wrote:
>>>>   Hi,
>>>>
>>>> I submitted my package in CRAN and always appearance the next NOTE.
>>>>
>>>> Flavor: r-devel-linux-x86_64-debian-gcc
>>>> Check: for detritus in the temp directory, Result: NOTE
>>>>    Found the following files/directories:
>>>>      'RtmpcDoRWjr.nc'
>>>>
>>>> I have tried to solve it in several ways (like if(interactive()), but
>>>> I not
>>>> sure how can I solve it.
>>>
>>> How was the file created?  What the check wants is that you delete it
>>> when you are finished with it.  You can use the unlink() function to do
>>> that.
>>
>> Or better create it in tempdir(): I guess you used paste(tempdir(), ...)
>> instead of file.path() and got afilename one level above tempdir()?
>>
>> Best,
>> Uwe Ligges
>>
>>
>>>
>>> Duncan Murdoch
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
> -- 
>
> David Zamora <https://sites.google.com/a/unal.edu.co/dazamoraa/>
> PhD Student, Universidad Nacional de Colombia, Bogot?
> phone: +571 3165000 ext 13406
> address: Av. NQS (Carrera 30) # 45-03, Hydraulics Lab (408-213)
> email: dazamoraa at unal.edu.co
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Apr 19 00:02:17 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 18 Apr 2020 18:02:17 -0400
Subject: [R-pkg-devel] 
 Detritus in temp directory - Note from submission of
 R package in CRAN
In-Reply-To: <alpine.BSF.2.00.2004181434580.74617@pedal.dcn.davis.ca.us>
References: <CAJ+nqZ6f_8SBf3mm4xF13+GF4pJJmW6qfhAqLO5-i5nZ=3EpGA@mail.gmail.com>
 <c16a5df8-f31a-33da-463d-640420909197@gmail.com>
 <5cc2d031-2807-67a3-c7ca-4f3534eee228@statistik.tu-dortmund.de>
 <CAJ+nqZ5a6e3fa31jAJY=pL--T8NXXM_bba6q9CK5=1mUe0mvDA@mail.gmail.com>
 <alpine.BSF.2.00.2004181434580.74617@pedal.dcn.davis.ca.us>
Message-ID: <4a49847a-1afc-6d69-f653-d78c837b72ff@gmail.com>

On 18/04/2020 5:55 p.m., Jeff Newmiller wrote:
> See below:
> 
> On Sat, 18 Apr 2020, David Andres Zamora Avila wrote:
> 
>> Thanks for your answers.
>> This a part of my script where it creates files and saves it in anything
>> path. I am not pretty secure how use file.path() or tempdir(). Can you give
>> me more details about it, please?
>>
>> if (!exists("path_pet")){
>>     path_pet <- getwd()
>>   } else if (!exists("path_p")){
>>     path_p <- getwd()
>>   } else if (!exists("path_p") | !exists("path_pet")){
>>     path_pet <- getwd()
>>     path_p <- getwd()
>>   }
> 
> The above code should not exist. You are making a package, so you are
> putting it into a function and either looking for the existence of global
> variables (side effects! requiring user to use special variable names!
> this is not good!), or the "path_pet" and "path_p" variables were created
> in your function and you should already know that they exist.
> 
> If we assume that "path_pet" and "path_p" are parameters to this package
> function you are writing, like so:
> 
> myfunc <- function( x, y, ..., path_pet = getwd(), path_p = getwd() ) {
>     ...
> }
> 
> then the user can let the default be the current working directory, or can
> specify which directories the function should work in. Specifically, when
> you are writing your examples or test code and pretending to be a user,
> you can create a temporary directory and use it like so:

I think your advice would probably pass the checks, but it's bad advice, 
because it leaves the user vulnerable to having files wiped out by 
myfunc().

Functions shouldn't write to the current directory unless the user 
explicitly asks for it.

A better header would be

myfunc <- function( x, y, ..., path_pet = temp.dir(), path_p = 
temp.dir() ) {

Then the user has to explicitly code "path_pet = getwd()" to wipe out 
their own files.

Duncan Murdoch

> 
> workingdir <- tempdir(TRUE)
> result <- myfunc( A, B, path_pet = workingdir, path_p = workingdir )
> 
> which means you can then clean up after yourself with
> 
> unlink( workingdir, recursive = TRUE )
> 
> I don't think this question is really about R packages anymore... if you
> still cannot read the help files to figure out your questions about how to
> do manage temporary files then you should probably make a small
> reproducible example(!!) and post a question on R-help.
> 
> (end of comments)
> 
>>   if (file_type == "raster"){
>>     # ---- identify raster format and loading----
>>     if (format == "GTiff"){
>>
>>       if( length(list.files(path_pet, pattern = ".tif")) == 0 | length(
>> list.files(path_p, pattern = ".tif")) == 0){
>>         stop("Not avaliable data of precipitation or evapotranspiration")
>>       }
>>       pet_files <- list.files(path_pet)
>>       pet <- raster::stack(paste(path_pet, pet_files, sep = ""))
>>       p_files <- list.files(path_p)
>> Kind regards,
>>
>> David Zamora
>>
>> El jue., 16 abr. 2020 a las 17:12, Uwe Ligges (<
>> ligges at statistik.tu-dortmund.de>) escribi?:
>>
>>>
>>>
>>> On 16.04.2020 20:09, Duncan Murdoch wrote:
>>>> On 16/04/2020 1:11 p.m., David Andres Zamora Avila wrote:
>>>>>    Hi,
>>>>>
>>>>> I submitted my package in CRAN and always appearance the next NOTE.
>>>>>
>>>>> Flavor: r-devel-linux-x86_64-debian-gcc
>>>>> Check: for detritus in the temp directory, Result: NOTE
>>>>>     Found the following files/directories:
>>>>>       'RtmpcDoRWjr.nc'
>>>>>
>>>>> I have tried to solve it in several ways (like if(interactive()), but
>>>>> I not
>>>>> sure how can I solve it.
>>>>
>>>> How was the file created?  What the check wants is that you delete it
>>>> when you are finished with it.  You can use the unlink() function to do
>>>> that.
>>>
>>> Or better create it in tempdir(): I guess you used paste(tempdir(), ...)
>>> instead of file.path() and got afilename one level above tempdir()?
>>>
>>> Best,
>>> Uwe Ligges
>>>
>>>
>>>>
>>>> Duncan Murdoch
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>
>> -- 
>>
>> David Zamora <https://sites.google.com/a/unal.edu.co/dazamoraa/>
>> PhD Student, Universidad Nacional de Colombia, Bogot?
>> phone: +571 3165000 ext 13406
>> address: Av. NQS (Carrera 30) # 45-03, Hydraulics Lab (408-213)
>> email: dazamoraa at unal.edu.co
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                         Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Apr 19 03:05:48 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 18 Apr 2020 18:05:48 -0700
Subject: [R-pkg-devel] 
 Detritus in temp directory - Note from submission of
 R package in CRAN
In-Reply-To: <4a49847a-1afc-6d69-f653-d78c837b72ff@gmail.com>
References: <CAJ+nqZ6f_8SBf3mm4xF13+GF4pJJmW6qfhAqLO5-i5nZ=3EpGA@mail.gmail.com>
 <c16a5df8-f31a-33da-463d-640420909197@gmail.com>
 <5cc2d031-2807-67a3-c7ca-4f3534eee228@statistik.tu-dortmund.de>
 <CAJ+nqZ5a6e3fa31jAJY=pL--T8NXXM_bba6q9CK5=1mUe0mvDA@mail.gmail.com>
 <alpine.BSF.2.00.2004181434580.74617@pedal.dcn.davis.ca.us>
 <4a49847a-1afc-6d69-f653-d78c837b72ff@gmail.com>
Message-ID: <AAD7285D-CD1E-47FE-AB95-4C61023A483C@dcn.davis.ca.us>

I agree that my example was not optimal, but I was trying to duplicate the existing behaviour with the exception of use of global variables.

On April 18, 2020 3:02:17 PM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>On 18/04/2020 5:55 p.m., Jeff Newmiller wrote:
>> See below:
>> 
>> On Sat, 18 Apr 2020, David Andres Zamora Avila wrote:
>> 
>>> Thanks for your answers.
>>> This a part of my script where it creates files and saves it in
>anything
>>> path. I am not pretty secure how use file.path() or tempdir(). Can
>you give
>>> me more details about it, please?
>>>
>>> if (!exists("path_pet")){
>>>     path_pet <- getwd()
>>>   } else if (!exists("path_p")){
>>>     path_p <- getwd()
>>>   } else if (!exists("path_p") | !exists("path_pet")){
>>>     path_pet <- getwd()
>>>     path_p <- getwd()
>>>   }
>> 
>> The above code should not exist. You are making a package, so you are
>> putting it into a function and either looking for the existence of
>global
>> variables (side effects! requiring user to use special variable
>names!
>> this is not good!), or the "path_pet" and "path_p" variables were
>created
>> in your function and you should already know that they exist.
>> 
>> If we assume that "path_pet" and "path_p" are parameters to this
>package
>> function you are writing, like so:
>> 
>> myfunc <- function( x, y, ..., path_pet = getwd(), path_p = getwd() )
>{
>>     ...
>> }
>> 
>> then the user can let the default be the current working directory,
>or can
>> specify which directories the function should work in. Specifically,
>when
>> you are writing your examples or test code and pretending to be a
>user,
>> you can create a temporary directory and use it like so:
>
>I think your advice would probably pass the checks, but it's bad
>advice, 
>because it leaves the user vulnerable to having files wiped out by 
>myfunc().
>
>Functions shouldn't write to the current directory unless the user 
>explicitly asks for it.
>
>A better header would be
>
>myfunc <- function( x, y, ..., path_pet = temp.dir(), path_p = 
>temp.dir() ) {
>
>Then the user has to explicitly code "path_pet = getwd()" to wipe out 
>their own files.
>
>Duncan Murdoch
>
>> 
>> workingdir <- tempdir(TRUE)
>> result <- myfunc( A, B, path_pet = workingdir, path_p = workingdir )
>> 
>> which means you can then clean up after yourself with
>> 
>> unlink( workingdir, recursive = TRUE )
>> 
>> I don't think this question is really about R packages anymore... if
>you
>> still cannot read the help files to figure out your questions about
>how to
>> do manage temporary files then you should probably make a small
>> reproducible example(!!) and post a question on R-help.
>> 
>> (end of comments)
>> 
>>>   if (file_type == "raster"){
>>>     # ---- identify raster format and loading----
>>>     if (format == "GTiff"){
>>>
>>>       if( length(list.files(path_pet, pattern = ".tif")) == 0 |
>length(
>>> list.files(path_p, pattern = ".tif")) == 0){
>>>         stop("Not avaliable data of precipitation or
>evapotranspiration")
>>>       }
>>>       pet_files <- list.files(path_pet)
>>>       pet <- raster::stack(paste(path_pet, pet_files, sep = ""))
>>>       p_files <- list.files(path_p)
>>> Kind regards,
>>>
>>> David Zamora
>>>
>>> El jue., 16 abr. 2020 a las 17:12, Uwe Ligges (<
>>> ligges at statistik.tu-dortmund.de>) escribi?:
>>>
>>>>
>>>>
>>>> On 16.04.2020 20:09, Duncan Murdoch wrote:
>>>>> On 16/04/2020 1:11 p.m., David Andres Zamora Avila wrote:
>>>>>>    Hi,
>>>>>>
>>>>>> I submitted my package in CRAN and always appearance the next
>NOTE.
>>>>>>
>>>>>> Flavor: r-devel-linux-x86_64-debian-gcc
>>>>>> Check: for detritus in the temp directory, Result: NOTE
>>>>>>     Found the following files/directories:
>>>>>>       'RtmpcDoRWjr.nc'
>>>>>>
>>>>>> I have tried to solve it in several ways (like if(interactive()),
>but
>>>>>> I not
>>>>>> sure how can I solve it.
>>>>>
>>>>> How was the file created?  What the check wants is that you delete
>it
>>>>> when you are finished with it.  You can use the unlink() function
>to do
>>>>> that.
>>>>
>>>> Or better create it in tempdir(): I guess you used paste(tempdir(),
>...)
>>>> instead of file.path() and got afilename one level above tempdir()?
>>>>
>>>> Best,
>>>> Uwe Ligges
>>>>
>>>>
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>>
>>> -- 
>>>
>>> David Zamora <https://sites.google.com/a/unal.edu.co/dazamoraa/>
>>> PhD Student, Universidad Nacional de Colombia, Bogot?
>>> phone: +571 3165000 ext 13406
>>> address: Av. NQS (Carrera 30) # 45-03, Hydraulics Lab (408-213)
>>> email: dazamoraa at unal.edu.co
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>> 
>>
>---------------------------------------------------------------------------
>> Jeff Newmiller                        The     .....       .....  Go
>Live...
>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live
>Go...
>>                                         Live:   OO#.. Dead: OO#.. 
>Playing
>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>> /Software/Embedded Controllers)               .OO#.       .OO#. 
>rocks...1k
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 

-- 
Sent from my phone. Please excuse my brevity.


From m@rc|njurek1988 @end|ng |rom gm@||@com  Mon Apr 20 19:00:09 2020
From: m@rc|njurek1988 @end|ng |rom gm@||@com (Marcin Jurek)
Date: Mon, 20 Apr 2020 12:00:09 -0500
Subject: [R-pkg-devel] debugging memory sanitation errors
Message-ID: <CAKpFkB3wEzjd99-fb39e1p=cTY3yt6dWoJeK20oiGWgbPE9ADA@mail.gmail.com>

Hello so I keep getting my package turned back because of errors detected
by UBSAN. I am trying to catch it using r-hub's platform with UBSAN but
there are no errors thrown there. What would be a good way for me to debug
this.

Obviously I did R CMD check --as-cran on my own machine, and on Travis and
I can't detect a thing.

What surprises me is that this is a runtime error and I wonder why all the
systems I test it on give it a pass...

Thanks for suggestions!

Marcin


---------- Forwarded message ---------
From: Uwe Ligges <ligges at statistik.tu-dortmund.de>
Date: Sat, Apr 18, 2020 at 2:32 AM
Subject: Re: CRAN submission GPvecchia 0.1.3
To: Marcin Jurek <marcinjurek1988 at gmail.com>, CRAN <
cran-submissions at r-project.org>


Thanks, we see:

checking with clang-UBSAN still has

/data/gannet/ripley/R/test-clang/RcppArmadillo/include/armadillo_bits/subview_meat.hpp:1277:23:

runtime error: reference binding to null pointer of type 'const unsigned
int'
     #0 0x7f8b9133b5ae in arma::subview<unsigned int>::colptr(unsigned
int)
/data/gannet/ripley/R/test-clang/RcppArmadillo/include/armadillo_bits/subview_meat.hpp:1277:12
     #1 0x7f8b9133b5ae in arma::subview_col<unsigned
int>::subview_col(arma::Mat<unsigned int> const&, unsigned int, unsigned
int, unsigned int)
/data/gannet/ripley/R/test-clang/RcppArmadillo/include/armadillo_bits/subview_meat.hpp:3133:25
     #2 0x7f8b913218d3 in arma::Col<unsigned int>::head(unsigned int)
/data/gannet/ripley/R/test-clang/RcppArmadillo/include/armadillo_bits/Col_meat.hpp:782:10
     #3 0x7f8b913218d3 in clusterEqual(arma::Mat<double>, int, int)
/data/gannet/ripley/R/packages/incoming/GPvecchia.Rcheck/00_pkg_src/GPvecchia/src/fastTree.cpp:53:35
     #4 0x7f8b9132722d in knotTree(arma::Mat<double>,
std::__1::map<std::__1::basic_string<char, std::__1::char_traits<char>,
std::__1::allocator<char> >, arma::Col<unsigned int>,
std::__1::less<std::__1::basic_string<char, std::__1::char_traits<char>,
std::__1::allocator<char> > >,
std::__1::allocator<std::__1::pair<std::__1::basic_string<char,
std::__1::char_traits<char>, std::__1::allocator<char> > const,
arma::Col<unsigned int> > > >)
/data/gannet/ripley/R/packages/incoming/GPvecchia.Rcheck/00_pkg_src/GPvecchia/src/fastTree.cpp:241:21
     #5 0x7f8b91328fae in generateNNarray(arma::Mat<double>,
arma::Col<unsigned int>, int, arma::Col<unsigned int>, int)
/data/gannet/ripley/R/packages/incoming/GPvecchia.Rcheck/00_pkg_src/GPvecchia/src/fastTree.cpp:279:39
     #6 0x7f8b91267769 in _GPvecchia_generateNNarray
/data/gannet/ripley/R/packages/incoming/GPvecchia.Rcheck/00_pkg_src/GPvecchia/src/RcppExports.cpp:93:34

and others not from this package.

Please fix the issue reported above and resubmit.

Best,
Uwe Ligges


On 16.04.2020 00:37, CRAN submission wrote:
> [This was generated from CRAN.R-project.org/submit.html]
>
> The following package was uploaded to CRAN:
> ===========================================
>
> Package Information:
> Package: GPvecchia
> Version: 0.1.3
> Title: Scalable Gaussian-Process Approximations
> Author(s): Matthias Katzfuss [aut], Marcin Jurek [aut, cre], Daniel Zilber
>    [aut], Wenlong Gong [aut], Joe Guinness [ctb], Jingjie Zhang
>    [ctb], Florian Schaefer [ctb]
> Maintainer: Marcin Jurek <marcinjurek1988 at gmail.com>
> Suggests: mvtnorm, knitr, rmarkdown, testthat
> Description: Fast scalable Gaussian process approximations, particularly
>    well suited to spatial (aerial, remote-sensed) and
>    environmental data, described in more detail in Katzfuss and
>    Guinness (2017) <arXiv:1708.06302>. Package also contains a
>    fast implementation of the incomplete Cholesky decomposition
>    (IC0), based on Schaefer et al. (2019) <arXiv:1706.02205> and
>    MaxMin ordering proposed in Guinness (2018)
>    <arXiv:1609.05372>.
> License: GPL (>=2)
> Imports: Rcpp (>= 0.12.16), methods, stats, sparseinv, fields,
>    Matrix(>= 1.2.14), parallel, GpGp, FNN
> LinkingTo: Rcpp, RcppArmadillo, BH
>
>
> The maintainer confirms that he or she
> has read and agrees to the CRAN policies.
>
> Submitter's comment: ### Resubmission 5
> This is a fifth resubmission
>
> *
>    fixed problems reported in
>    https://cran.r-project.org/web/checks/check_results_GPvecchia.html
>
>
>
>
>
> ###
>    Resubmission 4
> This is a fourth resubmission
>
> * fixed
>    a problem with unmatched variable types encountered
>    during the last submission:
>    runtime error:
>    reference binding to null pointer of type 'const
>    unsigned
>
> other check results as in submission
>    3
>
>
>
>
>
>
> ### Resubmission 3
> This is a third
>    resubmission
>
> * fixed the problem with variable types
>    (unsigned int) in src/U_NZentries.cpp
>
>
> ## Test
>    environments
> * local ubuntu 18.04, R 3.4.4
> * ubuntu
>    16.04 (Travis CI), R-devel
> * Windows Server 2008 R2
>    SP1, R-devel, 32/64 bit (R-hub)
>
> There was 1 NOTE:
> *
>    checking installed package size ... NOTE
>    installed
>    size is  7.0Mb
>    sub-directories of 1Mb or more:
>
>    libs   6.5Mb
>
> This is not unexpected in packages with
>    compiled code as observed by Dirk
>    Eddelbuettel
>
https://stackoverflow.com/questions/53819970/r-package-libs-directory-too-large-after-compilation-to-submit-on-cran
>
>
>
>
>
>
> ###
>    Resubmission 2
> This is a second resubmission.
>
> *
>    fixed an alloc-dealloc-mismatch error as reported
>    here
>
>    https://cran.r-project.org/web/checks/check_results_GPvecchia.html
>
>
> ##
>    Test environments
> * local ubuntu 18.04, R 3.4.4
> *
>    ubuntu 16.04 (Travis CI), R 3.6.1
> * local OS X
>    install, R 3.5.1
>
> ## R CMD check results
> There were
>    no ERRORs or WARNINGs under either Ubuntu
>    version
>
> There were 2 NOTEs on Travis:
>
> * checking
>    installed package size ... NOTE
>    installed size is
>    5.1Mb
>    sub-directories of 1Mb or more:
>
> libs
>    4.6Mb
>
> This is not unexpected in packages with
>    compiled code as observed by Dirk
>    Eddelbuettel
>
https://stackoverflow.com/questions/53819970/r-package-libs-directory-too-large-after-compilation-to-submit-on-cran
>
> *
>    checking for hidden files and directories ... NOTE
>
>    Found the following hidden files and directories:
>
>       .travis.yml
>    These were most likely included in
>    error. See section ?Package
>    structure? in the
>    ?Writing R Extensions? manual.
>
> The said file is
>    listed in .Rbuildignore and the note goes away in the
>    local check of the build tarball
>
>
> There was 1 NOTE
>    on local ubuntu installation:
>
> * checking installed
>    package size ... NOTE
>    installed size is  6.3Mb
>
>    sub-directories of 1Mb or more:
>      libs   5.9Mb
>
> See
>    explanation above
>
>
>
> There was 1 WARNING under local
>    OS X:
>
> *  checking whether package ?GPvecchia?
>    can be installed (41.2s)
>     Found the following
>    significant warnings:
>       Warning: package
>    ?GpGp? was built under R version 3.5.2
>
> Local R
>    version used for development is 3.5.1
>
>
>
> ##
>    Downstream dependencies
> none
>
> =================================================
>
> Original content of DESCRIPTION file:
>
> Package: GPvecchia
> Type: Package
> Title: Scalable Gaussian-Process Approximations
> Version: 0.1.3
> Date: 2020-04-15
> Authors at R: c(
>          person("Matthias", "Katzfuss", role=c("aut"), email="
katzfuss at gmail.com"),
>          person("Marcin", "Jurek", role=c("aut", "cre"), email="
marcinjurek1988 at gmail.com"),
>          person("Daniel", "Zilber", role="aut"),
>          person("Wenlong", "Gong", role="aut"),
>          person("Joe", "Guinness", role="ctb"),
>          person("Jingjie", "Zhang", role="ctb"),
>          person("Florian", "Schaefer", role="ctb"))
> Maintainer: Marcin Jurek <marcinjurek1988 at gmail.com>
> Author: Matthias Katzfuss [aut],
>    Marcin Jurek [aut, cre],
>    Daniel Zilber [aut],
>    Wenlong Gong [aut],
>    Joe Guinness [ctb],
>    Jingjie Zhang [ctb],
>    Florian Schaefer [ctb]
> Description: Fast scalable Gaussian process approximations, particularly
well suited to spatial (aerial, remote-sensed) and environmental data,
described in more detail in Katzfuss and Guinness (2017)
<arXiv:1708.06302>. Package also contains a fast implementation of the
incomplete Cholesky decomposition (IC0), based on Schaefer et al. (2019)
<arXiv:1706.02205> and MaxMin ordering proposed in Guinness (2018)
<arXiv:1609.05372>.
> License: GPL (>=2)
> Imports: Rcpp (>= 0.12.16), methods, stats, sparseinv, fields,
>          Matrix(>= 1.2.14), parallel, GpGp, FNN
> LinkingTo: Rcpp, RcppArmadillo, BH
> RoxygenNote: 6.1.1
> Suggests: mvtnorm, knitr, rmarkdown, testthat
> VignetteBuilder: knitr
> NeedsCompilation: yes
> Packaged: 2020-04-15 22:36:32 UTC; marcin
>

	[[alternative HTML version deleted]]


From er|c@|e||er @end|ng |rom gm@||@com  Mon Apr 20 23:34:08 2020
From: er|c@|e||er @end|ng |rom gm@||@com (Eric Leifer)
Date: Mon, 20 Apr 2020 17:34:08 -0400
Subject: [R-pkg-devel] check_for_cran not responsive
Message-ID: <CADC3n84F5vjFCeAK2pozwbtt3ovduP+p0iNzyU-eXMQap-w0tw@mail.gmail.com>

Hello,
I apologize if I'm asking this question in the wrong place, but I'm trying
to check my R package for upload to CRAN using  the check_for_cran command,
and it's stuck after the following messages:

-  Building package
-  Uploading package
-  Preparing build, see status at

https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-6c92f626dae242f7b915c43bbf111e48

https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-de397558bc2a453cbcd389ffe3a45c77

https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-f500a010bc0e4e07b8dbd0821efaa242

Does anybody know what might be going on?
Thank you.

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Apr 20 23:50:09 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 20 Apr 2020 17:50:09 -0400
Subject: [R-pkg-devel] check_for_cran not responsive
In-Reply-To: <CADC3n84F5vjFCeAK2pozwbtt3ovduP+p0iNzyU-eXMQap-w0tw@mail.gmail.com>
References: <CADC3n84F5vjFCeAK2pozwbtt3ovduP+p0iNzyU-eXMQap-w0tw@mail.gmail.com>
Message-ID: <0fdde86a-2a0c-a707-7296-62394769b76d@gmail.com>

On 20/04/2020 5:34 p.m., Eric Leifer wrote:
> Hello,
> I apologize if I'm asking this question in the wrong place, but I'm trying
> to check my R package for upload to CRAN using  the check_for_cran command,
> and it's stuck after the following messages:
> 
> -  Building package
> -  Uploading package
> -  Preparing build, see status at
> 
> https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-6c92f626dae242f7b915c43bbf111e48
> 
> https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-de397558bc2a453cbcd389ffe3a45c77
> 
> https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-f500a010bc0e4e07b8dbd0821efaa242
> 
> Does anybody know what might be going on?

check_for_cran() is from the rhub package, right?  You probably need to 
ask the package maintainer, who also maintains the website it was 
working with.

Duncan Murdoch


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Apr 21 06:44:43 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 20 Apr 2020 23:44:43 -0500
Subject: [R-pkg-devel] More GitHub problems
Message-ID: <9cfa4cd6-c4c9-7f58-8ccf-7e724a892e10@effectivedefense.org>

Hello:


 ????? Is there a way to restore the functionality of a local clone of a 
GitHub repository after the SSH key it used was replaced?


 ????? I have a local clone that previously worked fine but now asks for 
a password that I don't think I have when I try "git push".


 ????? Thanks,
 ????? Spencer Graves


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Apr 21 09:15:10 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 21 Apr 2020 10:15:10 +0300
Subject: [R-pkg-devel] More GitHub problems
In-Reply-To: <9cfa4cd6-c4c9-7f58-8ccf-7e724a892e10@effectivedefense.org>
References: <9cfa4cd6-c4c9-7f58-8ccf-7e724a892e10@effectivedefense.org>
Message-ID: <20200421101510.597edfaa@Tarkus>

On Mon, 20 Apr 2020 23:44:43 -0500
Spencer Graves <spencer.graves at effectivedefense.org> wrote:

> Is there a way to restore the functionality of a local clone of a 
> GitHub repository after the SSH key it used was replaced?

Does `git remote -v` in the repo directory show https://github.com/...
or git at github.com:... or ssh://... URLs?

Can you add the new SSH key on <https://github.com/settings/keys> and
check ~/.ssh/config to make sure that it's used when connecting to
github.com? You can verify that the SSH part of the stack works by
running `ssh git at github.com`:

PTY allocation request failed on channel 0
Hi <username>! You've successfully authenticated, but GitHub does not
provide shell access.
Connection to github.com closed.

>  ????? I have a local clone that previously worked fine but now asks
> for a password that I don't think I have when I try "git push".

This sounds like it's using an https:// remote URL, not ssh. But I
might be mistaken.

-- 
Best regards,
Ivan


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Apr 21 15:30:20 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Tue, 21 Apr 2020 08:30:20 -0500
Subject: [R-pkg-devel] More GitHub problems
In-Reply-To: <20200421101510.597edfaa@Tarkus>
References: <9cfa4cd6-c4c9-7f58-8ccf-7e724a892e10@effectivedefense.org>
 <20200421101510.597edfaa@Tarkus>
Message-ID: <68cdf2eb-5280-e7c6-6d2d-5237a5e802d2@effectivedefense.org>

Hi, Ivan et al:


On 2020-04-21 02:15, Ivan Krylov wrote:
> On Mon, 20 Apr 2020 23:44:43 -0500
> Spencer Graves <spencer.graves at effectivedefense.org> wrote:
>
>> Is there a way to restore the functionality of a local clone of a
>> GitHub repository after the SSH key it used was replaced?
> Does `git remote -v` in the repo directory show https://github.com/...
> or git at github.com:... or ssh://... URLs?
>
> Can you add the new SSH key on <https://github.com/settings/keys> and
> check ~/.ssh/config to make sure that it's used when connecting to
> github.com? You can verify that the SSH part of the stack works by
> running `ssh git at github.com`:
>
> PTY allocation request failed on channel 0
> Hi <username>! You've successfully authenticated, but GitHub does not
> provide shell access.
> Connection to github.com closed.
>
>>   ????? I have a local clone that previously worked fine but now asks
>> for a password that I don't think I have when I try "git push".
> This sounds like it's using an https:// remote URL, not ssh. But I
> might be mistaken.

You were absolutely correct.? The problem was fixed by copying "url = 
git at github.com:<GitHub_user>/<GitHub_repository>.git" from a repository 
where it worked properly into this one, and it worked.


 ????? Thanks,
 ????? Spencer Graves


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Apr 21 20:00:04 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 21 Apr 2020 19:00:04 +0100
Subject: [R-pkg-devel] check_for_cran not responsive
In-Reply-To: <CADC3n84F5vjFCeAK2pozwbtt3ovduP+p0iNzyU-eXMQap-w0tw@mail.gmail.com>
References: <CADC3n84F5vjFCeAK2pozwbtt3ovduP+p0iNzyU-eXMQap-w0tw@mail.gmail.com>
Message-ID: <CABtg=K=qU1S6LcLjoC6ivRf1_cFKq8TZ8xrnK7VGie2uHneeMg@mail.gmail.com>

Hi, please reports R-hub issues at https://github.com/r-hub/rhub/issues

It takes a bit longer to get started when there R-hub is busy. You can
always interrupt the display with CTRL+C / ESC, and then query the
results later:

? rhub::get_check("factorial2x2_0.2.0.tar.gz-6c92f626dae242f7b915c43bbf111e48")

?? factorial2x2 0.2.0: OK

  Build ID:   factorial2x2_0.2.0.tar.gz-6c92f626dae242f7b915c43bbf111e48
  Platform:   Windows Server 2008 R2 SP1, R-devel, 32/64 bit
  Submitted:  20h 48m 11.3s ago
  Build time: 2m 33.8s

You'll always get a summary email as well.

Gabor
0 errors ? | 0 warnings ? | 0 notes ?

On Mon, Apr 20, 2020 at 10:34 PM Eric Leifer <eric.leifer at gmail.com> wrote:
>
> Hello,
> I apologize if I'm asking this question in the wrong place, but I'm trying
> to check my R package for upload to CRAN using  the check_for_cran command,
> and it's stuck after the following messages:
>
> -  Building package
> -  Uploading package
> -  Preparing build, see status at
>
> https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-6c92f626dae242f7b915c43bbf111e48
>
> https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-de397558bc2a453cbcd389ffe3a45c77
>
> https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-f500a010bc0e4e07b8dbd0821efaa242
>
> Does anybody know what might be going on?
> Thank you.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From p@u|@@@v@ry @end|ng |rom un|v-|comte@|r  Wed Apr 22 18:44:26 2020
From: p@u|@@@v@ry @end|ng |rom un|v-|comte@|r (Paul SAVARY)
Date: Wed, 22 Apr 2020 18:44:26 +0200 (CEST)
Subject: [R-pkg-devel] Warning R-hub Windows Server 2008 : qpdf needed
Message-ID: <2147478298.47395542.1587573866435.JavaMail.zimbra@univ-fcomte.fr>

Hello, 

I'm having trouble checking a package (graph4lg). 

With devtools::check_rhub(), I obtain a warning message on Windows Server 2008 

*checking data fro ASCII and uncompressed saves ... OK 
WARNING 
'qpdf' is needed for checks on size reduction of PDFs 

I checked that qpdf is intalled. It is, because I have Rtools. 
Rtools is in my environment path 

That's the first time I obtain this message, although I checked my package several times on Rhub. 
I do not obtain similar messages with other checking platforms. 

I thank you in advance 
Regards 
Paul Savary 


	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Wed Apr 22 18:54:32 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 22 Apr 2020 17:54:32 +0100
Subject: [R-pkg-devel] Warning R-hub Windows Server 2008 : qpdf needed
In-Reply-To: <2147478298.47395542.1587573866435.JavaMail.zimbra@univ-fcomte.fr>
References: <2147478298.47395542.1587573866435.JavaMail.zimbra@univ-fcomte.fr>
Message-ID: <CABtg=KmvPUsSxgRSZG6o72LZKwPtij57VFfdt7JXH7FN2oZ_bQ@mail.gmail.com>

Hi,

which R version was this? Can you point to a build log?

qpdf is definitely installed on R-hub's Windows machines, and it is
even on the PATH. Maybe the new toolchain did not find it, I have
copied it to a better place now, please try again.

Best,
Gabor

On Wed, Apr 22, 2020 at 5:44 PM Paul SAVARY <paul.savary at univ-fcomte.fr> wrote:
>
> Hello,
>
> I'm having trouble checking a package (graph4lg).
>
> With devtools::check_rhub(), I obtain a warning message on Windows Server 2008
>
> *checking data fro ASCII and uncompressed saves ... OK
> WARNING
> 'qpdf' is needed for checks on size reduction of PDFs
>
> I checked that qpdf is intalled. It is, because I have Rtools.
> Rtools is in my environment path
>
> That's the first time I obtain this message, although I checked my package several times on Rhub.
> I do not obtain similar messages with other checking platforms.
>
> I thank you in advance
> Regards
> Paul Savary
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From d@n|e|@nue@t @end|ng |rom un|-muen@ter@de  Wed Apr 22 18:55:29 2020
From: d@n|e|@nue@t @end|ng |rom un|-muen@ter@de (=?UTF-8?Q?Daniel_N=c3=bcst?=)
Date: Wed, 22 Apr 2020 18:55:29 +0200
Subject: [R-pkg-devel] Warning R-hub Windows Server 2008 : qpdf needed
In-Reply-To: <2147478298.47395542.1587573866435.JavaMail.zimbra@univ-fcomte.fr>
References: <2147478298.47395542.1587573866435.JavaMail.zimbra@univ-fcomte.fr>
Message-ID: <ae9ca87c-b9fd-b621-8335-6b3ebb5f37e1@uni-muenster.de>

Hi Paul,

On 22.04.20 18:44, Paul SAVARY wrote:
> I'm having trouble checking a package (graph4lg).
> 
> With devtools::check_rhub(), I obtain a warning message on Windows Server 2008
> 
> *checking data fro ASCII and uncompressed saves ... OK
> WARNING
> 'qpdf' is needed for checks on size reduction of PDFs
> 
> I checked that qpdf is intalled. It is, because I have Rtools.
> Rtools is in my environment path

The function actually submits your package to the R-hub builder, see 
?devtools::check_rhub so you having qpdf installed locally does not help.

Looking at the r-hub/wincheck repository, I found this documentation 
file that qpdf is currently not available yet: 
https://github.com/r-hub/wincheck/blob/master/Extra.md

So you probably have to live with this warning.


Hope this helps!

/Daniel



> That's the first time I obtain this message, although I checked my package several times on Rhub.
> I do not obtain similar messages with other checking platforms.
> 
> I thank you in advance
> Regards
> Paul Savary
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Daniel N?st
Institute for Geoinformatics (ifgi),   University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 31962
https://nuest.staff.ifgi.de | @nordholmen | https://o2r.info


From bgunter@4567 @end|ng |rom gm@||@com  Thu Apr 23 01:03:15 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 22 Apr 2020 16:03:15 -0700
Subject: [R-pkg-devel] Math symbols in .Rd files
Message-ID: <CAGxFJbSzFEQ2CXbLPGszUoHRjFvkGEK7+r3qUWZZrcCJ1m1Stw@mail.gmail.com>

OS: Mac OSX Catalina
R Version 3.6.3
UTF-8 declared as Encoding in DESCRIPTION file

First, apologies: I'm nearly certain that this has been asked (many
times) before, and I think I know the answer. But I need to verify.

\eqn{...} allows me to insert a few math symbols in .Rd files, but
does not seem to work for symbols equivalent to unicode U+00B0 (degree
sign) and U+00B1 (plus minus sign). That is \eqn{\pm } is not rendered
properly, and there is no degree sign for Latex without adding
packages.  I can enter these as Mac symbols (presumably using UTF-8
encoding)  and they render properly on my machine in the installed
package documentation. But CRAN's winbuilder doesn't like them with
error message:

LaTeX errors found:
! Package inputenc Error: Unicode char ? (U+2264)
(inputenc)                not set up for use with LaTeX.

Are there any fixes/workarounds other than a fallback to plain text?

Thanks. Again, my apologies for asking this again, but I just wanted
to be sure my understanding is correct -- or find out where I'm
confused.

Bert Gunter


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Apr 23 04:17:24 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 23 Apr 2020 14:17:24 +1200
Subject: [R-pkg-devel] [FORGED]  Math symbols in .Rd files
In-Reply-To: <CAGxFJbSzFEQ2CXbLPGszUoHRjFvkGEK7+r3qUWZZrcCJ1m1Stw@mail.gmail.com>
References: <CAGxFJbSzFEQ2CXbLPGszUoHRjFvkGEK7+r3qUWZZrcCJ1m1Stw@mail.gmail.com>
Message-ID: <f58d8998-b1a6-9a3b-cead-0715233e174a@auckland.ac.nz>


On 23/04/20 11:03 am, Bert Gunter wrote:

> OS: Mac OSX Catalina
> R Version 3.6.3
> UTF-8 declared as Encoding in DESCRIPTION file
> 
> First, apologies: I'm nearly certain that this has been asked (many
> times) before, and I think I know the answer. But I need to verify.
> 
> \eqn{...} allows me to insert a few math symbols in .Rd files, but
> does not seem to work for symbols equivalent to unicode U+00B0 (degree
> sign) and U+00B1 (plus minus sign). That is \eqn{\pm } is not rendered
> properly, and there is no degree sign for Latex without adding
> packages.  I can enter these as Mac symbols (presumably using UTF-8
> encoding)  and they render properly on my machine in the installed
> package documentation. But CRAN's winbuilder doesn't like them with
> error message:
> 
> LaTeX errors found:
> ! Package inputenc Error: Unicode char ? (U+2264)
> (inputenc)                not set up for use with LaTeX.
> 
> Are there any fixes/workarounds other than a fallback to plain text?
> 
> Thanks. Again, my apologies for asking this again, but I just wanted
> to be sure my understanding is correct -- or find out where I'm
> confused.

My understanding is that \eqn{...} doesn't really work with html, only 
with LaTeX.  You need to do something like:

\eqn{\hat{\theta} \pm 1.96 \times SE}{theta.hat +/- 1.96*SE}

which (for me at least) gives a nicely rendered result in LaTeX -> pdf 
and the kludgy workaround in html.

As for the degree sign I find that \eqn{42^\circ} gives acceptable 
results in LaTeX, but of course doesn't work in html.

My understanding is that if you enclose things like "?" or "?" in 
\enc{...} and have

\encoding{UTF-8}

as the very first line of your *.Rd file, then CRAN won't complain about 
the presence of these symbols.  But this doesn't work inside \eqn{...}; 
there the "\enc{...}" gets rendered literally.

So for html I think you are stuck with the kludgy fallback to plain text.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From t|@goo||voto @end|ng |rom gm@||@com  Thu Apr 23 04:33:26 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 22 Apr 2020 23:33:26 -0300
Subject: [R-pkg-devel] Error in \donttest{} not observed with --run-donttest
 option
Message-ID: <000001d61917$92bb9f00$b832dd00$@gmail.com>

Dear all,

I've submitted the v1.5.0 of my R package metan
<https://github.com/TiagoOlivoto/metan> a few days ago to fix some errors
related to a recent upgrade of package 'tibble' to version 3.0.0, with
breaking changes described at
<https://tibble.tidyverse.org/news/index.html>.  When checking locally metan
v1.5.0' with "R CMD check --as-cran --run-donttest metan_1.5.0.tar.gz" no
errors were observed (log file attached).

 

On Monday 13, April, I was notified that "Version 1.5.0 still fails in its
\donttest examples, which should work". Looking to the CRAN Package Check
Results page <https://www.stats.ox.ac.uk/pub/bdr/donttest/metan.out> I
observed an error that occurred because I used a data set with
non-significant genotype effect to compute an index that requires a
significant genotype effect in all trait. Unfortunately, metan was removed
from CRAN because check problems were not corrected in time.

 

Any idea about why I've not observed any error even using  --run-donttest
option locally?  That function's example had not been changed since the
first release, so, I'm also asking myself why this error was observed only
now, after four successful releases on CRAN.

 

I'd appreciate any comment.

Best regards,

Tiago

 


From bgunter@4567 @end|ng |rom gm@||@com  Thu Apr 23 04:57:03 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 22 Apr 2020 19:57:03 -0700
Subject: [R-pkg-devel] [FORGED]  Math symbols in .Rd files
In-Reply-To: <f58d8998-b1a6-9a3b-cead-0715233e174a@auckland.ac.nz>
References: <CAGxFJbSzFEQ2CXbLPGszUoHRjFvkGEK7+r3qUWZZrcCJ1m1Stw@mail.gmail.com>
 <f58d8998-b1a6-9a3b-cead-0715233e174a@auckland.ac.nz>
Message-ID: <CAGxFJbSp_yZZGnRkCUdMXLGGrCqrN8nUkTSK=vmNRrpLA_KGRg@mail.gmail.com>

Thanks, Rolf. This is very helpful.

Actually, I'm not that concerned about latex --> pdf. It's the html
that I want rendered nicely. So I'll see is that \enc{...} approach
works and gets me through the CRAN checks.

Not that the package is a big deal anyway -- just something I hope
might be useful to a few folks on occasion.

Bert


On Wed, Apr 22, 2020 at 7:17 PM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>
> On 23/04/20 11:03 am, Bert Gunter wrote:
>
> > OS: Mac OSX Catalina
> > R Version 3.6.3
> > UTF-8 declared as Encoding in DESCRIPTION file
> >
> > First, apologies: I'm nearly certain that this has been asked (many
> > times) before, and I think I know the answer. But I need to verify.
> >
> > \eqn{...} allows me to insert a few math symbols in .Rd files, but
> > does not seem to work for symbols equivalent to unicode U+00B0 (degree
> > sign) and U+00B1 (plus minus sign). That is \eqn{\pm } is not rendered
> > properly, and there is no degree sign for Latex without adding
> > packages.  I can enter these as Mac symbols (presumably using UTF-8
> > encoding)  and they render properly on my machine in the installed
> > package documentation. But CRAN's winbuilder doesn't like them with
> > error message:
> >
> > LaTeX errors found:
> > ! Package inputenc Error: Unicode char ? (U+2264)
> > (inputenc)                not set up for use with LaTeX.
> >
> > Are there any fixes/workarounds other than a fallback to plain text?
> >
> > Thanks. Again, my apologies for asking this again, but I just wanted
> > to be sure my understanding is correct -- or find out where I'm
> > confused.
>
> My understanding is that \eqn{...} doesn't really work with html, only
> with LaTeX.  You need to do something like:
>
> \eqn{\hat{\theta} \pm 1.96 \times SE}{theta.hat +/- 1.96*SE}
>
> which (for me at least) gives a nicely rendered result in LaTeX -> pdf
> and the kludgy workaround in html.
>
> As for the degree sign I find that \eqn{42^\circ} gives acceptable
> results in LaTeX, but of course doesn't work in html.
>
> My understanding is that if you enclose things like "?" or "?" in
> \enc{...} and have
>
> \encoding{UTF-8}
>
> as the very first line of your *.Rd file, then CRAN won't complain about
> the presence of these symbols.  But this doesn't work inside \eqn{...};
> there the "\enc{...}" gets rendered literally.
>
> So for html I think you are stuck with the kludgy fallback to plain text.
>
> cheers,
>
> Rolf
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276


From p@u|@@@v@ry @end|ng |rom un|v-|comte@|r  Thu Apr 23 09:30:44 2020
From: p@u|@@@v@ry @end|ng |rom un|v-|comte@|r (Paul SAVARY)
Date: Thu, 23 Apr 2020 09:30:44 +0200 (CEST)
Subject: [R-pkg-devel] (SOLVED) Warning R-hub Windows Server 2008 : qpdf
 needed
In-Reply-To: <CABtg=KmvPUsSxgRSZG6o72LZKwPtij57VFfdt7JXH7FN2oZ_bQ@mail.gmail.com>
References: <2147478298.47395542.1587573866435.JavaMail.zimbra@univ-fcomte.fr>
 <CABtg=KmvPUsSxgRSZG6o72LZKwPtij57VFfdt7JXH7FN2oZ_bQ@mail.gmail.com>
Message-ID: <1878998597.47687493.1587627044560.JavaMail.zimbra@univ-fcomte.fr>

Hi,

Here is the build log showing this warning message: https://builder.r-hub.io/status/graph4lg_0.5.0.tar.gz-31e8935d0c724c4b9d6986f31eeff357 

I have just tried again and this warning message does not show up anymore. I thank you Gabor for your help.
(new build log: https://builder.r-hub.io/status/graph4lg_0.5.0.tar.gz-6e69d658b38242d0a81efaae5d942be9)

Best regards
Paul

----- Mail original -----
De: "G?bor Cs?rdi" <csardi.gabor at gmail.com>
?: "Paul SAVARY" <paul.savary at univ-fcomte.fr>
Cc: "r-package-devel" <r-package-devel at r-project.org>
Envoy?: Mercredi 22 Avril 2020 18:54:32
Objet: Re: [R-pkg-devel] Warning R-hub Windows Server 2008 : qpdf needed

Hi,

which R version was this? Can you point to a build log?

qpdf is definitely installed on R-hub's Windows machines, and it is
even on the PATH. Maybe the new toolchain did not find it, I have
copied it to a better place now, please try again.

Best,
Gabor

On Wed, Apr 22, 2020 at 5:44 PM Paul SAVARY <paul.savary at univ-fcomte.fr> wrote:
>
> Hello,
>
> I'm having trouble checking a package (graph4lg).
>
> With devtools::check_rhub(), I obtain a warning message on Windows Server 2008
>
> *checking data fro ASCII and uncompressed saves ... OK
> WARNING
> 'qpdf' is needed for checks on size reduction of PDFs
>
> I checked that qpdf is intalled. It is, because I have Rtools.
> Rtools is in my environment path
>
> That's the first time I obtain this message, although I checked my package several times on Rhub.
> I do not obtain similar messages with other checking platforms.
>
> I thank you in advance
> Regards
> Paul Savary
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Apr 23 13:51:22 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 23 Apr 2020 12:51:22 +0100
Subject: [R-pkg-devel] Non-standard things in the check directory
In-Reply-To: <d3d3e30d30bf44f29711cd565c926612@nyulangone.org>
References: <d3d3e30d30bf44f29711cd565c926612@nyulangone.org>
Message-ID: <CABtg=KnrpoqgaGggjS=vHd9x7MuWpxUSTB_oWdyv-KKOT6Rprw@mail.gmail.com>

Just realized that nobody replied to this. So this seems to be a bug
in `R CMD check --as-cran`, it does not ignore the arch specific
examples and tests directories and files. It happens as well if you
run your check on a local windows, not just on R-hub.

Should I open a bug for this?

There is an env var for it called _R_CHECK_THINGS_IN_CHECK_DIR_, but
--as-cran overrides that, so there is not much we can do about it on
R-hub.

Right now this NOTE does not show up in new package submissions, new
package submission probably do not use `--as-cran`, but they set up
their own configuration, which might look like this:
https://svn.r-project.org/R-dev-web/trunk/CRAN/QA/Uwe/make/incoming_env.bat

Summary: you'll have to ignore this NOTE for now on R-hub and on your machines.

Gabor


On Tue, Mar 31, 2020 at 3:37 PM Goldfeld, Keith
<Keith.Goldfeld at nyulangone.org> wrote:
>
> Good morning -
> I am running checks (using devtools::check_rhub) for my package `simstudy`, and I get one note from one server, Windows Server 2008 R2 SP1, R-devel, 32/64 bit:
> NOTES:
>
> * checking for non-standard things in the check directory ... NOTE
> Found the following files/directories:
>   'examples_i386' 'examples_x64' 'simstudy-Ex_i386.Rout'
>   'simstudy-Ex_x64.Rout' 'tests_i386' 'tests_x64'
>
> In my previous submission, I got this note as well. I see that it is likely a server issue, and not my issue, but is there any way for me to modify my package to make this go away?
>
>
> - Keith
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |@w@onj@|7net @end|ng |rom gm@||@com  Thu Apr 23 17:10:35 2020
From: |@w@onj@|7net @end|ng |rom gm@||@com (John Lawson)
Date: Thu, 23 Apr 2020 09:10:35 -0600
Subject: [R-pkg-devel] WARNING Files in the 'vignettes' directory but no
 files in 'inst/doc':
Message-ID: <CAJiVmSDHNQSeRynfBKU5g7hU3hHibaVvZXG3VaeXg6sX=oiTOQ@mail.gmail.com>

My AQLSchemes package has a pdf vignette created with Rmarkdown. I tried to
add a vignette to my daewr package in exactly the same way, by setting the
Description file like the AQLSchemes package Description file with the
statements
Suggests: R.rsp
VignetteBuilder: R.rsp.

In both packages I put the vignette .Rmd file and output .pdf file in the
vignettes directory, and the inst directory is empty

When I run the check on the AQLSchemes  on my local machine, I see the
messages

-  preparing 'AQLSchemes':
v  checking DESCRIPTION meta-information ...
-  installing the package to build vignettes
...
> checking sizes of PDF files under 'inst/doc' ... NOTE
  Unable to find GhostScript executable to run checks on size reduction

0 errors v | 0 warnings v | 1 note x

and the package builds correctly with the vignette

However,  when I run the check on daewr I see the messages
-  preparing 'daewr': (665ms)
v  checking DESCRIPTION meta-information ...
-  checking for LF line-endings in source and make files and shell scripts
(894ms)
-  checking for empty or unneeded directories
   Removed empty directory 'daewr/inst'
...
> checking files in 'vignettes' ... WARNING
  Files in the 'vignettes' directory but no files in 'inst/doc':
    'ModelRobust.Rmd', 'ModelRobust.pdf'

0 errors v | 1 warning x | 0 notes v
Error: R CMD check found WARNINGs
Execution halted

The two packages are set up in the same way. Any insight as to why one
builds with the vignette but the other does not, would be greatly
appreciated.

Sincerely John Lawson

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Apr 23 18:04:55 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 23 Apr 2020 12:04:55 -0400
Subject: [R-pkg-devel] WARNING Files in the 'vignettes' directory but no
 files in 'inst/doc':
In-Reply-To: <CAJiVmSDHNQSeRynfBKU5g7hU3hHibaVvZXG3VaeXg6sX=oiTOQ@mail.gmail.com>
References: <CAJiVmSDHNQSeRynfBKU5g7hU3hHibaVvZXG3VaeXg6sX=oiTOQ@mail.gmail.com>
Message-ID: <029e9b06-5045-8090-acbb-3727345875ec@gmail.com>

On 23/04/2020 11:10 a.m., John Lawson wrote:
> My AQLSchemes package has a pdf vignette created with Rmarkdown. I tried to
> add a vignette to my daewr package in exactly the same way, by setting the
> Description file like the AQLSchemes package Description file with the
> statements
> Suggests: R.rsp
> VignetteBuilder: R.rsp.
> 
> In both packages I put the vignette .Rmd file and output .pdf file in the
> vignettes directory, and the inst directory is empty
> 
> When I run the check on the AQLSchemes  on my local machine, I see the
> messages
> 
> -  preparing 'AQLSchemes':
> v  checking DESCRIPTION meta-information ...
> -  installing the package to build vignettes
> ...
>> checking sizes of PDF files under 'inst/doc' ... NOTE
>    Unable to find GhostScript executable to run checks on size reduction
> 
> 0 errors v | 0 warnings v | 1 note x
> 
> and the package builds correctly with the vignette
> 
> However,  when I run the check on daewr I see the messages
> -  preparing 'daewr': (665ms)
> v  checking DESCRIPTION meta-information ...
> -  checking for LF line-endings in source and make files and shell scripts
> (894ms)
> -  checking for empty or unneeded directories
>     Removed empty directory 'daewr/inst'
> ...
>> checking files in 'vignettes' ... WARNING
>    Files in the 'vignettes' directory but no files in 'inst/doc':
>      'ModelRobust.Rmd', 'ModelRobust.pdf'
> 
> 0 errors v | 1 warning x | 0 notes v
> Error: R CMD check found WARNINGs
> Execution halted
> 
> The two packages are set up in the same way. Any insight as to why one
> builds with the vignette but the other does not, would be greatly
> appreciated.
> 

As far as I know R.rsp doesn't support Rmd vignettes.  I just took a 
quick look at the code, and it appears to support these formats:  .rsp, 
.pdf.asis, .html.asis, .tex, .ltx, .md, .md.rsp.

So you should rename the source file to one of those, or choose a 
different vignette engine.  knitr::rmarkdown is the usual engine to use 
with R Markdown files.

Duncan Murdoch


From @tu@rt@|@cy @end|ng |rom york@@c@uk  Thu Apr 23 20:06:58 2020
From: @tu@rt@|@cy @end|ng |rom york@@c@uk (Stuart Lacy)
Date: Thu, 23 Apr 2020 19:06:58 +0100
Subject: [R-pkg-devel] Package fails on OSX on CRAN but not on rhub
Message-ID: <CAHNFD2BVetqPk=1=8nf_44UkzUpW=s=Mn8VcpMX6eUD-9LnUfg@mail.gmail.com>

Hi,

I've been told to fix the problems that my package 'multistateutils' has on
OSX:
https://cran.r-project.org/web/checks/check_results_multistateutils.html

This is seemingly something to do with my Rcpp code, but I can't debug it
on my local (Linux) machine, as when I check my code using Rhub it passes
the checks:
https://builder.r-hub.io/status/multistateutils_1.2.4.tar.gz-9295de3b93d746eb93983d33269cf08d

Does anyone have any tips for testing their packages on OSX, or any
OSX-specific issues with Rcpp?

Thanks,
Stuart
-- 
Stuart Lacy
Research Software Engineer
Wolfson Atmospheric Chemistry Lab & Information Services
*C/G/116*
University of York
Heslington
York
YO10 5DD
+44 (0)1904 324756

[image:
https://www.york.ac.uk/media/abouttheuniversity/supportservices/informationdirectorate/images/cse/CSEUK%20Primary%20(r)%20RGB-80x95.jpg]
Disclaimer: https://www.york.ac.uk/about/legal-statements/email-disclaimer/

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Apr 23 20:24:20 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 23 Apr 2020 13:24:20 -0500
Subject: [R-pkg-devel] Package fails on OSX on CRAN but not on rhub
In-Reply-To: <CAHNFD2BVetqPk=1=8nf_44UkzUpW=s=Mn8VcpMX6eUD-9LnUfg@mail.gmail.com>
References: <CAHNFD2BVetqPk=1=8nf_44UkzUpW=s=Mn8VcpMX6eUD-9LnUfg@mail.gmail.com>
Message-ID: <24225.56660.761108.218155@rob.eddelbuettel.com>


On 23 April 2020 at 19:06, Stuart Lacy via R-package-devel wrote:
| I've been told to fix the problems that my package 'multistateutils' has on
| OSX:
| https://cran.r-project.org/web/checks/check_results_multistateutils.html
| 
| This is seemingly something to do with my Rcpp code, but I can't debug it
| on my local (Linux) machine, as when I check my code using Rhub it passes
| the checks:
| https://builder.r-hub.io/status/multistateutils_1.2.4.tar.gz-9295de3b93d746eb93983d33269cf08d
| 
| Does anyone have any tips for testing their packages on OSX, or any
| OSX-specific issues with Rcpp?

Yes -- Rcpp 1.0.4 passed on macOS at CRAN was released there. And only
post-release, many macOS users (who could have tested pre-release) made a lot
of noise concerning issues on their machines.  Eventually, and thanks to
careful digging by Winston, it was seen as being caused by a newer (relative
to what CRAN has) macOS SDK issued by Apple. And Rcpp 1.0.4.6 was prepared
almost three weeks ago, admitted on CRAN about two weeks ago ... but still
only has one out of three binaries for macOS built on CRAN as you see at

   https://cloud.r-project.org/web/packages/Rcpp/index.html

Given that the _binary_ package for macOS may be useless for you, you could
try to force installation of the _source_ package for your testing.

It should work just fine.

If you want to see more details, see issue #1060 at the Rcpp GitHub repo.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From retep@me|@@ner @end|ng |rom gm@||@com  Thu Apr 23 20:34:40 2020
From: retep@me|@@ner @end|ng |rom gm@||@com (Peter Meissner)
Date: Thu, 23 Apr 2020 20:34:40 +0200
Subject: [R-pkg-devel] CRAN-Policies
Message-ID: <CAB-BFRrY-RWafC5-KY4qAKpBToOJMYhSiLginE5A-g0aunPPVw@mail.gmail.com>

Hello Everyone,

some weeks back I already wrote to CRAN but got no response. So, I post my
question here seeking for advice.

I am trying to publish a package to CRAN. I got rejected once with some
minor change requests. I implemented them and submitted again. This time I
got a whole array of change requests.

The problem is, I am confused since none of the requests is mentioned
anywhere in CRAN policies. So, are those mere suggestions? Are these common
policy now? Has everyone to implement them? How should I proceed?

(In general, I have no problem with complying with CRAN policies, but I am
not sure if these are actually common requirements now or not.)

Copy of the change requests:

***************** quote >>>> **************************************
Please add \value to all .Rd files for exported functions and explain
the functions results in the documentation.
f.i.: time_stamp.Rd
If a function does not return a value, please document that too, e.g.
\value{None}.

The \description tag in the .Rd files should be one or two sentences on
how the function works and what it's good for. Don't just repeat the
function name.
F.i.: stats_modus_multi.Rd

An .Rd file title should:
- be capitalized
- not end in a period
- be at most 65 characters long
- exist and stand alone (there must be exactly one title)
Please adjust to these standards and again don't simply repeat the name.
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Documenting-functions
F.i.: stats_modus_multi.Rd

Please fix and resubmit, and document what was changed in the submission
comments.
***************** <<<< quote **************************************


Best, Peter

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Apr 23 20:36:00 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 23 Apr 2020 13:36:00 -0500
Subject: [R-pkg-devel] Package fails on OSX on CRAN but not on rhub
In-Reply-To: <24225.56660.761108.218155@rob.eddelbuettel.com>
References: <CAHNFD2BVetqPk=1=8nf_44UkzUpW=s=Mn8VcpMX6eUD-9LnUfg@mail.gmail.com>
 <24225.56660.761108.218155@rob.eddelbuettel.com>
Message-ID: <24225.57360.41161.5266@rob.eddelbuettel.com>


Stuart,

As a follow-up, the errors are of the '*** caught illegal operation ***'
variety which is frequently seen when different compiled components (and
particularly C++ ones) are out of sync with respect to their toolchains.

So I would suggest a clean rebuild, but given that it is at CRAN that is out
of our hands.

Sorry,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Apr 23 20:51:44 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 23 Apr 2020 14:51:44 -0400
Subject: [R-pkg-devel] CRAN-Policies
In-Reply-To: <CAB-BFRrY-RWafC5-KY4qAKpBToOJMYhSiLginE5A-g0aunPPVw@mail.gmail.com>
References: <CAB-BFRrY-RWafC5-KY4qAKpBToOJMYhSiLginE5A-g0aunPPVw@mail.gmail.com>
Message-ID: <1933f8df-48e0-dea2-9f27-ef7e9dab6caf@gmail.com>

On 23/04/2020 2:34 p.m., Peter Meissner wrote:
> Hello Everyone,
> 
> some weeks back I already wrote to CRAN but got no response. So, I post my
> question here seeking for advice.
> 
> I am trying to publish a package to CRAN. I got rejected once with some
> minor change requests. I implemented them and submitted again. This time I
> got a whole array of change requests.
> 
> The problem is, I am confused since none of the requests is mentioned
> anywhere in CRAN policies. So, are those mere suggestions? Are these common
> policy now? Has everyone to implement them? How should I proceed?

I'd say that the changes being requested are all things stated in the 
Writing R Extensions manual, so this falls under the blanket statement 
in the policy that "CRAN hosts packages of publication quality and is 
not a development platform."

> (In general, I have no problem with complying with CRAN policies, but I am
> not sure if these are actually common requirements now or not.)

I'd guess the requests will vary depending on who the reviewer is and 
what their mood is, but if you ignore their requests, you're not going 
to put them in a better mood.

Duncan Murdoch

> 
> Copy of the change requests:
> 
> ***************** quote >>>> **************************************
> Please add \value to all .Rd files for exported functions and explain
> the functions results in the documentation.
> f.i.: time_stamp.Rd
> If a function does not return a value, please document that too, e.g.
> \value{None}.
> 
> The \description tag in the .Rd files should be one or two sentences on
> how the function works and what it's good for. Don't just repeat the
> function name.
> F.i.: stats_modus_multi.Rd
> 
> An .Rd file title should:
> - be capitalized
> - not end in a period
> - be at most 65 characters long
> - exist and stand alone (there must be exactly one title)
> Please adjust to these standards and again don't simply repeat the name.
> https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Documenting-functions
> F.i.: stats_modus_multi.Rd
> 
> Please fix and resubmit, and document what was changed in the submission
> comments.
> ***************** <<<< quote **************************************
> 
> 
> Best, Peter
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @|@n@c@nt|n @end|ng |rom c@n@d@@c@  Thu Apr 23 22:53:30 2020
From: @|@n@c@nt|n @end|ng |rom c@n@d@@c@ (Cantin, Alan (NRCan/RNCan))
Date: Thu, 23 Apr 2020 20:53:30 +0000
Subject: [R-pkg-devel] Documenting raw data
Message-ID: <mailman.5352.8.1587676604.2263.r-package-devel@r-project.org>

Hi Folks,

Looking for some help documenting my raw data (data in inst/extdata).

Is the correct doctype "data"?

The usage of loading this type of data is system.file("extdata", nameoffile, package="nameofpackage")

Is this the correct string to put in the \usage section?  I have tried this, but get errors such as:

Functions or methods with usage in documentation object 'nameoffile' but not in code:
    'system.file'


Has anyone done this recently and have an example to see where I'm going wrong?

This check seems to be new as in the past I simply had lazydata set to true and it passed tests.

Thanks for any help.

Cheers,

Alan Cantin



	[[alternative HTML version deleted]]


From retep@me|@@ner @end|ng |rom gm@||@com  Fri Apr 24 14:42:29 2020
From: retep@me|@@ner @end|ng |rom gm@||@com (Peter Meissner)
Date: Fri, 24 Apr 2020 14:42:29 +0200
Subject: [R-pkg-devel] CRAN-Policies
In-Reply-To: <1933f8df-48e0-dea2-9f27-ef7e9dab6caf@gmail.com>
References: <CAB-BFRrY-RWafC5-KY4qAKpBToOJMYhSiLginE5A-g0aunPPVw@mail.gmail.com>
 <1933f8df-48e0-dea2-9f27-ef7e9dab6caf@gmail.com>
Message-ID: <CAB-BFRp=Q1LPG44rUXHgpxowVWWud8GzT2vgmMZVD5E+zei=Xg@mail.gmail.com>

Hey,

thanks for taking the time to reply - I will start working on my changes
requests then.

Best, Peter




Am Do., 23. Apr. 2020 um 20:51 Uhr schrieb Duncan Murdoch <
murdoch.duncan at gmail.com>:

> On 23/04/2020 2:34 p.m., Peter Meissner wrote:
> > Hello Everyone,
> >
> > some weeks back I already wrote to CRAN but got no response. So, I post
> my
> > question here seeking for advice.
> >
> > I am trying to publish a package to CRAN. I got rejected once with some
> > minor change requests. I implemented them and submitted again. This time
> I
> > got a whole array of change requests.
> >
> > The problem is, I am confused since none of the requests is mentioned
> > anywhere in CRAN policies. So, are those mere suggestions? Are these
> common
> > policy now? Has everyone to implement them? How should I proceed?
>
> I'd say that the changes being requested are all things stated in the
> Writing R Extensions manual, so this falls under the blanket statement
> in the policy that "CRAN hosts packages of publication quality and is
> not a development platform."
>
> > (In general, I have no problem with complying with CRAN policies, but I
> am
> > not sure if these are actually common requirements now or not.)
>
> I'd guess the requests will vary depending on who the reviewer is and
> what their mood is, but if you ignore their requests, you're not going
> to put them in a better mood.
>
> Duncan Murdoch
>
> >
> > Copy of the change requests:
> >
> > ***************** quote >>>> **************************************
> > Please add \value to all .Rd files for exported functions and explain
> > the functions results in the documentation.
> > f.i.: time_stamp.Rd
> > If a function does not return a value, please document that too, e.g.
> > \value{None}.
> >
> > The \description tag in the .Rd files should be one or two sentences on
> > how the function works and what it's good for. Don't just repeat the
> > function name.
> > F.i.: stats_modus_multi.Rd
> >
> > An .Rd file title should:
> > - be capitalized
> > - not end in a period
> > - be at most 65 characters long
> > - exist and stand alone (there must be exactly one title)
> > Please adjust to these standards and again don't simply repeat the name.
> >
> https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Documenting-functions
> > F.i.: stats_modus_multi.Rd
> >
> > Please fix and resubmit, and document what was changed in the submission
> > comments.
> > ***************** <<<< quote **************************************
> >
> >
> > Best, Peter
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>

	[[alternative HTML version deleted]]


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Sun Apr 26 15:41:27 2020
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Sun, 26 Apr 2020 13:41:27 +0000
Subject: [R-pkg-devel] /usr/bin/ld: cannot find -ludev
Message-ID: <9582A33F-BB15-4E64-86D4-2E9AE9AD2652@kaust.edu.sa>

I am getting this error when trying to install my package on CRAN. Do I need to contact
CRAN to include it on the CRAN system? or there is another solution.


/usr/bin/ld: cannot find -ludev
collect2: error: ld returned 1 exit status



--Sameh



	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Apr 26 17:01:13 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 26 Apr 2020 08:01:13 -0700
Subject: [R-pkg-devel] /usr/bin/ld: cannot find -ludev
In-Reply-To: <9582A33F-BB15-4E64-86D4-2E9AE9AD2652@kaust.edu.sa>
References: <9582A33F-BB15-4E64-86D4-2E9AE9AD2652@kaust.edu.sa>
Message-ID: <60ED4775-2207-4DFF-8F59-85EEFF2962D8@dcn.davis.ca.us>

This is a highly OS-specific dependency. Are you sure you need this? Is it listed in your SystemRequirements entry in your DESCRIPTION file?

On April 26, 2020 6:41:27 AM PDT, "Sameh M. Abdulah" <sameh.abdulah at kaust.edu.sa> wrote:
>I am getting this error when trying to install my package on CRAN. Do I
>need to contact
>CRAN to include it on the CRAN system? or there is another solution.
>
>
>/usr/bin/ld: cannot find -ludev
>collect2: error: ld returned 1 exit status
>
>
>
>--Sameh
>
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Sun Apr 26 17:39:50 2020
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Sun, 26 Apr 2020 15:39:50 +0000
Subject: [R-pkg-devel] /usr/bin/ld: cannot find -ludev
In-Reply-To: <60ED4775-2207-4DFF-8F59-85EEFF2962D8@dcn.davis.ca.us>
References: <9582A33F-BB15-4E64-86D4-2E9AE9AD2652@kaust.edu.sa>,
 <60ED4775-2207-4DFF-8F59-85EEFF2962D8@dcn.davis.ca.us>
Message-ID: <AB7C14D7-242A-432B-86EF-C30E1002C72F@kaust.edu.sa>

Yes, I think I will need it but I did not specify it in my DESCRIPTION file, since I know that this is an OS libs, does adding this will help?


?Sameh

> On Apr 26, 2020, at 6:01 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> ?This is a highly OS-specific dependency. Are you sure you need this? Is it listed in your SystemRequirements entry in your DESCRIPTION file?
> 
>> On April 26, 2020 6:41:27 AM PDT, "Sameh M. Abdulah" <sameh.abdulah at kaust.edu.sa> wrote:
>> I am getting this error when trying to install my package on CRAN. Do I
>> need to contact
>> CRAN to include it on the CRAN system? or there is another solution.
>> 
>> 
>> /usr/bin/ld: cannot find -ludev
>> collect2: error: ld returned 1 exit status
>> 
>> 
>> 
>> --Sameh
>> 
>> 
>> 
>>    [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> -- 
> Sent from my phone. Please excuse my brevity.

From kry|ov@r00t @end|ng |rom gm@||@com  Sun Apr 26 19:57:28 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 26 Apr 2020 20:57:28 +0300
Subject: [R-pkg-devel] /usr/bin/ld: cannot find -ludev
In-Reply-To: <AB7C14D7-242A-432B-86EF-C30E1002C72F@kaust.edu.sa>
References: <9582A33F-BB15-4E64-86D4-2E9AE9AD2652@kaust.edu.sa>
 <60ED4775-2207-4DFF-8F59-85EEFF2962D8@dcn.davis.ca.us>
 <AB7C14D7-242A-432B-86EF-C30E1002C72F@kaust.edu.sa>
Message-ID: <20200426205728.3b16aaac@Tarkus>

On Sun, 26 Apr 2020 15:39:50 +0000
"Sameh M. Abdulah" <sameh.abdulah at kaust.edu.sa> wrote:

> Yes, I think I will need it

Could you tell us why your package needs it? Perhaps there is a way
to make it an optional dependency.

> since I know that this is an OS libs

It is true that libudev is required for successful bootup of most
desktop and server GNU/Linux installations... not so for *BSDs, macOS,
Solaris, and Windows. I think that libudev (now part of systemd) will
not even build on these platforms.

> does adding this will help?

It will help in the sense of indicating a system requirement that might
not be present on the target system, but won't get you much further.

Is libudev a hard dependency of your package? If yes, CRAN may reject
the package as not portable enough ("Packages will not normally be
accepted that do not run on at least two of the major R platforms.").
If no, consider including a configure script [*] and some #ifdefs in
your code to make the package only depend on libudev when it is
present.

-- 
Best regards,
Ivan

[*]
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Configure-and-cleanup


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Mon Apr 27 08:02:57 2020
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Mon, 27 Apr 2020 16:02:57 +1000
Subject: [R-pkg-devel] Including fst in inst/extdata
Message-ID: <CAJmOi+OV4WXq7UisayWWgO8Cgt5d7n0M6YCN4C2tW7W-UkJp9Q@mail.gmail.com>

I would like to include some fst files (produced by fst::write_fst) in
inst/extdata so that (a) users can update them between releases and
(b) to take advantage of fst's benefits. However, when I do this and
run R CMD check I get the warning "Found the following executable
file: "inst/extdata/file.fst"
I'm not sure whether this qualifies as a "rare false positive" as WRE
mentions, but if it isn't is there a way to include fst files in a
package without raising a warning?


Hugh Parsonage.


From edd @end|ng |rom deb|@n@org  Mon Apr 27 14:12:04 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 27 Apr 2020 07:12:04 -0500
Subject: [R-pkg-devel] Including fst in inst/extdata
In-Reply-To: <CAJmOi+OV4WXq7UisayWWgO8Cgt5d7n0M6YCN4C2tW7W-UkJp9Q@mail.gmail.com>
References: <CAJmOi+OV4WXq7UisayWWgO8Cgt5d7n0M6YCN4C2tW7W-UkJp9Q@mail.gmail.com>
Message-ID: <24230.52244.792572.712337@rob.eddelbuettel.com>


Hugh,

On 27 April 2020 at 16:02, Hugh Parsonage wrote:
| I would like to include some fst files (produced by fst::write_fst) in
| inst/extdata so that (a) users can update them between releases and
| (b) to take advantage of fst's benefits. However, when I do this and

Good idea, it is a very capable format!

| run R CMD check I get the warning "Found the following executable
| file: "inst/extdata/file.fst"

That refers to the file modes which will be (in octal notation) 775 or 755.

| I'm not sure whether this qualifies as a "rare false positive" as WRE
| mentions, but if it isn't is there a way to include fst files in a
| package without raising a warning?

Turn the execute bit off i.e. make them 664 or 644 and warning goes away.

In short, this has nothing to do with the .fst extension or content.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From iv@ircu m@iii@g oii m@iibox@org  Tue Apr 28 08:05:49 2020
From: iv@ircu m@iii@g oii m@iibox@org (iv@ircu m@iii@g oii m@iibox@org)
Date: Tue, 28 Apr 2020 08:05:49 +0200
Subject: [R-pkg-devel] Problems importing packages with SystemRequirements
Message-ID: <20200428060549.fkcxo7wzu6nqxskd@h6.fooboz>

Dear All,
I maintain a package that has issues 
`sh: whoami: not found` and `sh: git: not found`
(see https://cran.r-project.org/web/checks/check_results_packager.html),
albeit not having any (declared or undeclared) external
dependencies -- no calls to system() or system2().

It does import functions from CRAN packages `whoami` and `git2r`, though. 
Mysteriously to me, neither
https://cran.r-project.org/web/checks/check_results_git2r.html
nor 
https://cran.r-project.org/web/checks/check_results_whoami.html
show any issues.

Has anybody any clue why this is so? 

Thanks anyway,
Dominik Cullmann


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Apr 28 08:34:40 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 27 Apr 2020 23:34:40 -0700
Subject: [R-pkg-devel] 
 Problems importing packages with SystemRequirements
In-Reply-To: <20200428060549.fkcxo7wzu6nqxskd@h6.fooboz>
References: <20200428060549.fkcxo7wzu6nqxskd@h6.fooboz>
Message-ID: <7E25A696-6159-434E-BADD-DDD2AA00C9DB@dcn.davis.ca.us>

Maybe your use of those packages represent use cases that are not tested by those packages. If you pare down your code that triggers these problems to small reproducible examples then you can contribute them to those packages?

On April 27, 2020 11:05:49 PM PDT, fvafrcu at mailbox.org wrote:
>Dear All,
>I maintain a package that has issues 
>`sh: whoami: not found` and `sh: git: not found`
>(see
>https://cran.r-project.org/web/checks/check_results_packager.html),
>albeit not having any (declared or undeclared) external
>dependencies -- no calls to system() or system2().
>
>It does import functions from CRAN packages `whoami` and `git2r`,
>though. 
>Mysteriously to me, neither
>https://cran.r-project.org/web/checks/check_results_git2r.html
>nor 
>https://cran.r-project.org/web/checks/check_results_whoami.html
>show any issues.
>
>Has anybody any clue why this is so? 
>
>Thanks anyway,
>Dominik Cullmann
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From iv@ircu m@iii@g oii m@iibox@org  Tue Apr 28 09:28:27 2020
From: iv@ircu m@iii@g oii m@iibox@org (iv@ircu m@iii@g oii m@iibox@org)
Date: Tue, 28 Apr 2020 09:28:27 +0200
Subject: [R-pkg-devel] 
 Problems importing packages with SystemRequirements
In-Reply-To: <7E25A696-6159-434E-BADD-DDD2AA00C9DB@dcn.davis.ca.us>
References: <20200428060549.fkcxo7wzu6nqxskd@h6.fooboz>
 <7E25A696-6159-434E-BADD-DDD2AA00C9DB@dcn.davis.ca.us>
Message-ID: <20200428072827.nl6wduuey36mdvh5@h6.fooboz>

Dear Jeff,
thanks for your reply, 
I exactly know, where gitr and whoami are called, since I constitently use the
`::` operator to import from any dependency.
I am pretty sure that I use those packages for intended purposes only.

Furthermore, CRAN reports issues for system calls (made by `git2r` and `whoami`, I guess) 
for my package on r-patched-solaris-x86 only, so I am not sure how to reproduce
them.

Best,
Dominik Cullmann

On Mon, Apr 27, 2020 23:34:40, Jeff Newmiller wrote:
> Maybe your use of those packages represent use cases that are not tested by those packages. If you pare down your code that triggers these problems to small reproducible examples then you can contribute them to those packages?
> 
> On April 27, 2020 11:05:49 PM PDT, fvafrcu at mailbox.org wrote:
> >Dear All,
> >I maintain a package that has issues 
> >`sh: whoami: not found` and `sh: git: not found`
> >(see
> >https://cran.r-project.org/web/checks/check_results_packager.html),
> >albeit not having any (declared or undeclared) external
> >dependencies -- no calls to system() or system2().
> >
> >It does import functions from CRAN packages `whoami` and `git2r`,
> >though. 
> >Mysteriously to me, neither
> >https://cran.r-project.org/web/checks/check_results_git2r.html
> >nor 
> >https://cran.r-project.org/web/checks/check_results_whoami.html
> >show any issues.
> >
> >Has anybody any clue why this is so? 
> >
> >Thanks anyway,
> >Dominik Cullmann
> >
> >______________________________________________
> >R-package-devel at r-project.org mailing list
> >https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> -- 
> Sent from my phone. Please excuse my brevity.


-- 
https://www.globalplanetauthority.com/


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Apr 28 14:08:03 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 28 Apr 2020 14:08:03 +0200
Subject: [R-pkg-devel] 
 Problems importing packages with SystemRequirements
In-Reply-To: <20200428072827.nl6wduuey36mdvh5@h6.fooboz>
References: <20200428060549.fkcxo7wzu6nqxskd@h6.fooboz>
 <7E25A696-6159-434E-BADD-DDD2AA00C9DB@dcn.davis.ca.us>
 <20200428072827.nl6wduuey36mdvh5@h6.fooboz>
Message-ID: <969ad2a1-708b-74ce-c70f-28e7a1e2a80b@statistik.tu-dortmund.de>



On 28.04.2020 09:28, fvafrcu at mailbox.org wrote:
> Dear Jeff,
> thanks for your reply,
> I exactly know, where gitr and whoami are called, since I constitently use the
> `::` operator to import from any dependency.
> I am pretty sure that I use those packages for intended purposes only.
> 
> Furthermore, CRAN reports issues for system calls (made by `git2r` and `whoami`, I guess)
> for my package on r-patched-solaris-x86 only, so I am not sure how to reproduce
> them.

Yes, but as SystemRequirements are not alsways fullfilled, you should 
test whether these are available before use.

Best,
Uwe Ligges



> Best,
> Dominik Cullmann
> 
> On Mon, Apr 27, 2020 23:34:40, Jeff Newmiller wrote:
>> Maybe your use of those packages represent use cases that are not tested by those packages. If you pare down your code that triggers these problems to small reproducible examples then you can contribute them to those packages?
>>
>> On April 27, 2020 11:05:49 PM PDT, fvafrcu at mailbox.org wrote:
>>> Dear All,
>>> I maintain a package that has issues
>>> `sh: whoami: not found` and `sh: git: not found`
>>> (see
>>> https://cran.r-project.org/web/checks/check_results_packager.html),
>>> albeit not having any (declared or undeclared) external
>>> dependencies -- no calls to system() or system2().
>>>
>>> It does import functions from CRAN packages `whoami` and `git2r`,
>>> though.
>>> Mysteriously to me, neither
>>> https://cran.r-project.org/web/checks/check_results_git2r.html
>>> nor
>>> https://cran.r-project.org/web/checks/check_results_whoami.html
>>> show any issues.
>>>
>>> Has anybody any clue why this is so?
>>>
>>> Thanks anyway,
>>> Dominik Cullmann
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> -- 
>> Sent from my phone. Please excuse my brevity.
> 
>


From iv@ircu m@iii@g oii m@iibox@org  Tue Apr 28 15:35:22 2020
From: iv@ircu m@iii@g oii m@iibox@org (iv@ircu m@iii@g oii m@iibox@org)
Date: Tue, 28 Apr 2020 15:35:22 +0200
Subject: [R-pkg-devel] 
 Problems importing packages with SystemRequirements
In-Reply-To: <969ad2a1-708b-74ce-c70f-28e7a1e2a80b@statistik.tu-dortmund.de>
References: <20200428060549.fkcxo7wzu6nqxskd@h6.fooboz>
 <7E25A696-6159-434E-BADD-DDD2AA00C9DB@dcn.davis.ca.us>
 <20200428072827.nl6wduuey36mdvh5@h6.fooboz>
 <969ad2a1-708b-74ce-c70f-28e7a1e2a80b@statistik.tu-dortmund.de>
Message-ID: <20200428133522.s2otnl4wyssd7nmc@h6.fooboz>

Dear Uwe,
thanks for your reply.
But wouldn't checking for the SystemRequirements be the dependencies' jobs?
Looking at `whoami`'s code (which is basically a single very well structured
and clearly written file of 350 lines including roxygen comments by Gabor Csardi),
I see exactly a single call to system("whoami"), which of course gets caught if it throws an exception and it should be called on windows only. Under solaris I would expect whoami::whoami() to call `id`.
I don't understand why I'm getting this error with  r-patched-solaris-x86.
Gabor, can you help?!

Best, Dominik Cullmann

On Tue, Apr 28, 2020 14:08:03, Uwe Ligges wrote:
> 
> 
> On 28.04.2020 09:28, fvafrcu at mailbox.org wrote:
> > Dear Jeff,
> > thanks for your reply,
> > I exactly know, where gitr and whoami are called, since I constitently use the
> > `::` operator to import from any dependency.
> > I am pretty sure that I use those packages for intended purposes only.
> > 
> > Furthermore, CRAN reports issues for system calls (made by `git2r` and `whoami`, I guess)
> > for my package on r-patched-solaris-x86 only, so I am not sure how to reproduce
> > them.
> 
> Yes, but as SystemRequirements are not alsways fullfilled, you should test
> whether these are available before use.
> 
> Best,
> Uwe Ligges
> 
> 
> 
> > Best,
> > Dominik Cullmann
> > 
> > On Mon, Apr 27, 2020 23:34:40, Jeff Newmiller wrote:
> > > Maybe your use of those packages represent use cases that are not tested by those packages. If you pare down your code that triggers these problems to small reproducible examples then you can contribute them to those packages?
> > > 
> > > On April 27, 2020 11:05:49 PM PDT, fvafrcu at mailbox.org wrote:
> > > > Dear All,
> > > > I maintain a package that has issues
> > > > `sh: whoami: not found` and `sh: git: not found`
> > > > (see
> > > > https://cran.r-project.org/web/checks/check_results_packager.html),
> > > > albeit not having any (declared or undeclared) external
> > > > dependencies -- no calls to system() or system2().
> > > > 
> > > > It does import functions from CRAN packages `whoami` and `git2r`,
> > > > though.
> > > > Mysteriously to me, neither
> > > > https://cran.r-project.org/web/checks/check_results_git2r.html
> > > > nor
> > > > https://cran.r-project.org/web/checks/check_results_whoami.html
> > > > show any issues.
> > > > 
> > > > Has anybody any clue why this is so?
> > > > 
> > > > Thanks anyway,
> > > > Dominik Cullmann
> > > > 
> > > > ______________________________________________
> > > > R-package-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > 
> > > -- 
> > > Sent from my phone. Please excuse my brevity.
> > 
> > 


-- 
https://www.globalplanetauthority.com/


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Apr 28 16:39:52 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 28 Apr 2020 15:39:52 +0100
Subject: [R-pkg-devel] 
 Problems importing packages with SystemRequirements
In-Reply-To: <20200428133522.s2otnl4wyssd7nmc@h6.fooboz>
References: <20200428060549.fkcxo7wzu6nqxskd@h6.fooboz>
 <7E25A696-6159-434E-BADD-DDD2AA00C9DB@dcn.davis.ca.us>
 <20200428072827.nl6wduuey36mdvh5@h6.fooboz>
 <969ad2a1-708b-74ce-c70f-28e7a1e2a80b@statistik.tu-dortmund.de>
 <20200428133522.s2otnl4wyssd7nmc@h6.fooboz>
Message-ID: <CABtg=Kkhq_O7_s50YHT8_EJXpLwwY3-TCF6anEaSC54Jacu41w@mail.gmail.com>

Yeah, this is a bug in whoami I think. It has a tryCatch() but it does
not suppress the error message from system().

Gabor

On Tue, Apr 28, 2020 at 2:35 PM <fvafrcu at mailbox.org> wrote:
>
> Dear Uwe,
> thanks for your reply.
> But wouldn't checking for the SystemRequirements be the dependencies' jobs?
> Looking at `whoami`'s code (which is basically a single very well structured
> and clearly written file of 350 lines including roxygen comments by Gabor Csardi),
> I see exactly a single call to system("whoami"), which of course gets caught if it throws an exception and it should be called on windows only. Under solaris I would expect whoami::whoami() to call `id`.
> I don't understand why I'm getting this error with  r-patched-solaris-x86.
> Gabor, can you help?!
>
> Best, Dominik Cullmann
>
> On Tue, Apr 28, 2020 14:08:03, Uwe Ligges wrote:
> >
> >
> > On 28.04.2020 09:28, fvafrcu at mailbox.org wrote:
> > > Dear Jeff,
> > > thanks for your reply,
> > > I exactly know, where gitr and whoami are called, since I constitently use the
> > > `::` operator to import from any dependency.
> > > I am pretty sure that I use those packages for intended purposes only.
> > >
> > > Furthermore, CRAN reports issues for system calls (made by `git2r` and `whoami`, I guess)
> > > for my package on r-patched-solaris-x86 only, so I am not sure how to reproduce
> > > them.
> >
> > Yes, but as SystemRequirements are not alsways fullfilled, you should test
> > whether these are available before use.
> >
> > Best,
> > Uwe Ligges
> >
> >
> >
> > > Best,
> > > Dominik Cullmann
> > >
> > > On Mon, Apr 27, 2020 23:34:40, Jeff Newmiller wrote:
> > > > Maybe your use of those packages represent use cases that are not tested by those packages. If you pare down your code that triggers these problems to small reproducible examples then you can contribute them to those packages?
> > > >
> > > > On April 27, 2020 11:05:49 PM PDT, fvafrcu at mailbox.org wrote:
> > > > > Dear All,
> > > > > I maintain a package that has issues
> > > > > `sh: whoami: not found` and `sh: git: not found`
> > > > > (see
> > > > > https://cran.r-project.org/web/checks/check_results_packager.html),
> > > > > albeit not having any (declared or undeclared) external
> > > > > dependencies -- no calls to system() or system2().
> > > > >
> > > > > It does import functions from CRAN packages `whoami` and `git2r`,
> > > > > though.
> > > > > Mysteriously to me, neither
> > > > > https://cran.r-project.org/web/checks/check_results_git2r.html
> > > > > nor
> > > > > https://cran.r-project.org/web/checks/check_results_whoami.html
> > > > > show any issues.
> > > > >
> > > > > Has anybody any clue why this is so?
> > > > >
> > > > > Thanks anyway,
> > > > > Dominik Cullmann
> > > > >
> > > > > ______________________________________________
> > > > > R-package-devel at r-project.org mailing list
> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > >
> > > > --
> > > > Sent from my phone. Please excuse my brevity.
> > >
> > >
>
>
> --
> https://www.globalplanetauthority.com/


From renoz@o @end|ng |rom protonm@||@com  Wed Apr 29 19:16:41 2020
From: renoz@o @end|ng |rom protonm@||@com (renozao)
Date: Wed, 29 Apr 2020 17:16:41 +0000
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
 =?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <24219.11412.330746.824585@stat.math.ethz.ch>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
 <24205.57605.672636.944802@stat.math.ethz.ch>
 <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>
 <CAF8bMcb-KbfR==w1g3ixjEpGNR7=zn3SEBtwn3i4MimYzzt-dw@mail.gmail.com>
 <cTfz9LdQTDeljdpr97HnBeKOSPRLo90TKjTnzHfV4zfOx0UrOPO5F0KcTex4T85VVqLzSXGp0MyTFZHNjCSoiTYj5nPFijuKiPf2E6siAyg=-1872@protonmail.com>
 <24219.11412.330746.824585@stat.math.ethz.ch>
Message-ID: <klaxwZ-BWTJ90EYmWUjXntHafKk-OZcNZYMSmPhTX2SJ00_MHfo3dC7GCd6-aFSjXIP1X3WH77SyPCxZ7cb4OT7i2iALmTkpb8TH2CyIeJ8=@protonmail.com>

Thank you Martin,

Looks like the mMatrix class defined in Matrix is not exported in 3.6.3, maybe it is now exported in the current R-devel.

In this case I'd rather use a conditional import and definition.
I'll try that route.

Bests,
Renaud

Sent with ProtonMail Secure Email.

??????? Original Message ???????
On Saturday, April 18, 2020 12:36 PM, Martin Maechler <maechler at stat.math.ethz.ch> wrote:

> > > > > > renozao
> > > > > > on Wed, 8 Apr 2020 16:19:59 +0000 writes:
>
> > Thank you William for the reproducible example.
>
>     > Currently I using the following (same as in William's example):
>
>     > setClassUnion("mMatrix", c("Matrix", "matrix"))
>
>
> > Martin, are the changes made in the union class handling affecting the way we should declare them?
>
> > Thank you.
>
> > Bests,
>
>     > Renaud
>
>
> Thank you, Renaud, and Bill Dunlap.
>
> There is obviously a bit of a problem there, but it may well be
> "only" a problem in error handling.
>
> As Bill's trace(get, ..) shows, R tries to get
> "#HAS_DUPLICATE_CLASS_NAMES" which is indeed an indication of the problem:
>
> You are trying to REdefine a class union that already exists
> identically in the Matrix package:
> In the R-forge development version of 'Matrix', it is
> line 717 of Matrix/R/AllClass.R (and that will be close also
> in the CRAN version of Matrix).
>
> So at least for you, Renaud, the solution to the problem is easy:
> Just don't do what you should not do: What you want is already
> part of Matrix.... and after searching: It's been part of
> Matrix since ca. July 2012 ...
>
> -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
>
> But yes, there's a buglet in the 'methods' package currently,
> which leads to a misleading error message
> (It's arguable if it should give an error which it did not previously;
> I think it would be quite a good idea to give at least a
> warning as you are masking class definition of the Matrix
> package which is in your search() path or at least among the
> loaded namespaces at this time).
>
> Best,
> Martin
>
> > ??????? Original Message ???????
>
>     > On Wednesday, April 8, 2020 11:19 AM, William Dunlap <wdunlap at tibco.com> wrote:
>
>
> >> Use trace() to get a bit more detail - .__C_compMatrix is looked for in the wrong environment with inherits=FALSE.
>
>     >>
>
>     >>> setClassUnion("mMatrix", c("Matrix", "matrix"))
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get("#HAS_DUPLICATE_CLASS_NAMES", envir = .classTable) on entry
>
>     >> x="#HAS_DUPLICATE_CLASS_NAMES", envir="<environment: 0x2787710>", topenv="<environment: base>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".MTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(".SigLength", envir = env) on entry
>
>     >> x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(".SigLength", envir = env) on entry
>
>     >> x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(".SigLength", envir = env) on entry
>
>     >> x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(".SigLength", envir = env) on entry
>
>     >> x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(cname, envir = cwhere, inherits = FALSE) on entry
>
>     >> x=".__C__compMatrix", envir="<environment: R_GlobalEnv>", topenv="<environment: R_GlobalEnv>", inherits=FALSE
>
>     >> Error in get(cname, envir = cwhere, inherits = FALSE) :
>
>     >> object '.__C__compMatrix' not found
>
>     >> ...
>
>     >>
>
>     >> Bill Dunlap
>
>     >> TIBCO Software
>
>     >> wdunlap tibco.com
>
>     >>
>
>     >> On Wed, Apr 8, 2020 at 7:52 AM William Dunlap <wdunlap at tibco.com> wrote:
>
>     >>
>
>     >>> % R-devel --vanilla --quiet
>
>     >>>> library(Matrix)
>
>     >>>> setClassUnion("mMatrix", c("Matrix", "matrix"))
>
>     >>> Error in get(cname, envir = cwhere, inherits = FALSE) :
>
>     >>> object '.__C__compMatrix' not found
>
>     >>> Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>
>     >>> unable to create union class:  could not set members "Matrix"
>
>     >>>> sessionInfo()
>
>     >>> R Under development (unstable) (2020-04-07 r78175)
>
>     >>> Platform: x86_64-pc-linux-gnu (64-bit)
>
>     >>> Running under: Ubuntu 16.04.6 LTS
>
>     >>>
>
>     >>> Matrix products: default
>
>     >>> BLAS/LAPACK: /usr/lib/libopenblasp-r0.2.18.so
>
>     >>>
>
>     >>> locale:
>
>     >>> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>
>     >>> [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>
>     >>> [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>
>     >>> [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>
>     >>> [9] LC_ADDRESS=C               LC_TELEPHONE=C
>
>     >>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
>     >>>
>
>     >>> attached base packages:
>
>     >>> [1] stats     graphics  grDevices utils     datasets  methods   base
>
>     >>>
>
>     >>> other attached packages:
>
>     >>> [1] Matrix_1.2-18
>
>     >>>
>
>     >>> loaded via a namespace (and not attached):
>
>     >>> [1] compiler_4.1.0  grid_4.1.0      lattice_0.20-41
>
>     >>>
>
>     >>> Bill Dunlap
>
>     >>> TIBCO Software
>
>     >>> wdunlap tibco.com
>
>     >>>
>
>     >>> On Wed, Apr 8, 2020 at 7:35 AM Martin Maechler <maechler at stat.math.ethz.ch> wrote:
>
>     >>>
>
>     >>>>>>>>> renozao
>
>     >>>>>>>>> on Mon, 30 Mar 2020 21:20:43 +0000 writes:
>
>     >>>>
>
>     >>>> > Hi,
>
>     >>>> > when R CMD check is run under R-devel (2020-03-29 r78108) I get the following error at installation:
>
>     >>>>
>
>     >>>> > Error in get(cname, envir = cwhere, inherits = FALSE) :
>
>     >>>> > object ?.__C__compMatrix? not found
>
>     >>>> > Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>
>     >>>> > unable to create union class:  could not set members "Matrix"
>
>     >>>>
>
>     >>>> > This does not happen on R 3.6.3.
>
>     >>>>
>
>     >>>> > I tried with Matrix listed in Depends but I still get the same error.
>
>     >>>>
>
>     >>>> > Is this linked to some changes in union classes or the Matrix package?
>
>     >>>>
>
>     >>>> > Thank you.
>
>     >>>>
>
>     >>>> > Bests,
>
>     >>>> > Renaud
>
>     >>>>
>
>     >>>> Hi Renaud,
>
>     >>>> One reason you got no response here, is because we don't even
>
>     >>>> know about which package you are talking.
>
>     >>>>
>
>     >>>> So there's nothing, anybody can reproduce from your posting.
>
>     >>>>
>
>     >>>> There have been changes in R's dealing with class unions etc,
>
>     >>>> notably even *relating* to an earlier bug report on class unions
>
>     >>>> exactly for such a case which was *triggered* when people built
>
>     >>>> on such Matrix classes.
>
>     >>>>
>
>     >>>> But we would really want to be able to reproduce what you are seeing..
>
>     >>>>
>
>     >>>> Best regards,
>
>     >>>> Martin Maechler
>
>     >>>>
>
>     >>>> ETH Zurich, R Core Team *and* maintainer("Matrix")
>
>     >>>>
>
>     >>>> ______________________________________________
>
>     >>>> R-package-devel at r-project.org mailing list
>
>     >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>     > [[alternative HTML version deleted]]
>
>
> > ______________________________________________
>
>     > R-package-devel at r-project.org mailing list
>
>     > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From renoz@o @end|ng |rom protonm@||@com  Wed Apr 29 19:16:41 2020
From: renoz@o @end|ng |rom protonm@||@com (renozao)
Date: Wed, 29 Apr 2020 17:16:41 +0000
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
 =?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <24219.11412.330746.824585@stat.math.ethz.ch>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
 <24205.57605.672636.944802@stat.math.ethz.ch>
 <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>
 <CAF8bMcb-KbfR==w1g3ixjEpGNR7=zn3SEBtwn3i4MimYzzt-dw@mail.gmail.com>
 <cTfz9LdQTDeljdpr97HnBeKOSPRLo90TKjTnzHfV4zfOx0UrOPO5F0KcTex4T85VVqLzSXGp0MyTFZHNjCSoiTYj5nPFijuKiPf2E6siAyg=-1872@protonmail.com>
 <24219.11412.330746.824585@stat.math.ethz.ch>
Message-ID: <klaxwZ-BWTJ90EYmWUjXntHafKk-OZcNZYMSmPhTX2SJ00_MHfo3dC7GCd6-aFSjXIP1X3WH77SyPCxZ7cb4OT7i2iALmTkpb8TH2CyIeJ8=@protonmail.com>

Thank you Martin,

Looks like the mMatrix class defined in Matrix is not exported in 3.6.3, maybe it is now exported in the current R-devel.

In this case I'd rather use a conditional import and definition.
I'll try that route.

Bests,
Renaud

Sent with ProtonMail Secure Email.

??????? Original Message ???????
On Saturday, April 18, 2020 12:36 PM, Martin Maechler <maechler at stat.math.ethz.ch> wrote:

> > > > > > renozao
> > > > > > on Wed, 8 Apr 2020 16:19:59 +0000 writes:
>
> > Thank you William for the reproducible example.
>
>     > Currently I using the following (same as in William's example):
>
>     > setClassUnion("mMatrix", c("Matrix", "matrix"))
>
>
> > Martin, are the changes made in the union class handling affecting the way we should declare them?
>
> > Thank you.
>
> > Bests,
>
>     > Renaud
>
>
> Thank you, Renaud, and Bill Dunlap.
>
> There is obviously a bit of a problem there, but it may well be
> "only" a problem in error handling.
>
> As Bill's trace(get, ..) shows, R tries to get
> "#HAS_DUPLICATE_CLASS_NAMES" which is indeed an indication of the problem:
>
> You are trying to REdefine a class union that already exists
> identically in the Matrix package:
> In the R-forge development version of 'Matrix', it is
> line 717 of Matrix/R/AllClass.R (and that will be close also
> in the CRAN version of Matrix).
>
> So at least for you, Renaud, the solution to the problem is easy:
> Just don't do what you should not do: What you want is already
> part of Matrix.... and after searching: It's been part of
> Matrix since ca. July 2012 ...
>
> -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
>
> But yes, there's a buglet in the 'methods' package currently,
> which leads to a misleading error message
> (It's arguable if it should give an error which it did not previously;
> I think it would be quite a good idea to give at least a
> warning as you are masking class definition of the Matrix
> package which is in your search() path or at least among the
> loaded namespaces at this time).
>
> Best,
> Martin
>
> > ??????? Original Message ???????
>
>     > On Wednesday, April 8, 2020 11:19 AM, William Dunlap <wdunlap at tibco.com> wrote:
>
>
> >> Use trace() to get a bit more detail - .__C_compMatrix is looked for in the wrong environment with inherits=FALSE.
>
>     >>
>
>     >>> setClassUnion("mMatrix", c("Matrix", "matrix"))
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get("#HAS_DUPLICATE_CLASS_NAMES", envir = .classTable) on entry
>
>     >> x="#HAS_DUPLICATE_CLASS_NAMES", envir="<environment: 0x2787710>", topenv="<environment: base>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".MTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(".SigLength", envir = env) on entry
>
>     >> x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(".SigLength", envir = env) on entry
>
>     >> x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(".SigLength", envir = env) on entry
>
>     >> x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(".SigLength", envir = env) on entry
>
>     >> x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(cname, envir = cwhere, inherits = FALSE) on entry
>
>     >> x=".__C__compMatrix", envir="<environment: R_GlobalEnv>", topenv="<environment: R_GlobalEnv>", inherits=FALSE
>
>     >> Error in get(cname, envir = cwhere, inherits = FALSE) :
>
>     >> object '.__C__compMatrix' not found
>
>     >> ...
>
>     >>
>
>     >> Bill Dunlap
>
>     >> TIBCO Software
>
>     >> wdunlap tibco.com
>
>     >>
>
>     >> On Wed, Apr 8, 2020 at 7:52 AM William Dunlap <wdunlap at tibco.com> wrote:
>
>     >>
>
>     >>> % R-devel --vanilla --quiet
>
>     >>>> library(Matrix)
>
>     >>>> setClassUnion("mMatrix", c("Matrix", "matrix"))
>
>     >>> Error in get(cname, envir = cwhere, inherits = FALSE) :
>
>     >>> object '.__C__compMatrix' not found
>
>     >>> Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>
>     >>> unable to create union class:  could not set members "Matrix"
>
>     >>>> sessionInfo()
>
>     >>> R Under development (unstable) (2020-04-07 r78175)
>
>     >>> Platform: x86_64-pc-linux-gnu (64-bit)
>
>     >>> Running under: Ubuntu 16.04.6 LTS
>
>     >>>
>
>     >>> Matrix products: default
>
>     >>> BLAS/LAPACK: /usr/lib/libopenblasp-r0.2.18.so
>
>     >>>
>
>     >>> locale:
>
>     >>> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>
>     >>> [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>
>     >>> [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>
>     >>> [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>
>     >>> [9] LC_ADDRESS=C               LC_TELEPHONE=C
>
>     >>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
>     >>>
>
>     >>> attached base packages:
>
>     >>> [1] stats     graphics  grDevices utils     datasets  methods   base
>
>     >>>
>
>     >>> other attached packages:
>
>     >>> [1] Matrix_1.2-18
>
>     >>>
>
>     >>> loaded via a namespace (and not attached):
>
>     >>> [1] compiler_4.1.0  grid_4.1.0      lattice_0.20-41
>
>     >>>
>
>     >>> Bill Dunlap
>
>     >>> TIBCO Software
>
>     >>> wdunlap tibco.com
>
>     >>>
>
>     >>> On Wed, Apr 8, 2020 at 7:35 AM Martin Maechler <maechler at stat.math.ethz.ch> wrote:
>
>     >>>
>
>     >>>>>>>>> renozao
>
>     >>>>>>>>> on Mon, 30 Mar 2020 21:20:43 +0000 writes:
>
>     >>>>
>
>     >>>> > Hi,
>
>     >>>> > when R CMD check is run under R-devel (2020-03-29 r78108) I get the following error at installation:
>
>     >>>>
>
>     >>>> > Error in get(cname, envir = cwhere, inherits = FALSE) :
>
>     >>>> > object ?.__C__compMatrix? not found
>
>     >>>> > Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>
>     >>>> > unable to create union class:  could not set members "Matrix"
>
>     >>>>
>
>     >>>> > This does not happen on R 3.6.3.
>
>     >>>>
>
>     >>>> > I tried with Matrix listed in Depends but I still get the same error.
>
>     >>>>
>
>     >>>> > Is this linked to some changes in union classes or the Matrix package?
>
>     >>>>
>
>     >>>> > Thank you.
>
>     >>>>
>
>     >>>> > Bests,
>
>     >>>> > Renaud
>
>     >>>>
>
>     >>>> Hi Renaud,
>
>     >>>> One reason you got no response here, is because we don't even
>
>     >>>> know about which package you are talking.
>
>     >>>>
>
>     >>>> So there's nothing, anybody can reproduce from your posting.
>
>     >>>>
>
>     >>>> There have been changes in R's dealing with class unions etc,
>
>     >>>> notably even *relating* to an earlier bug report on class unions
>
>     >>>> exactly for such a case which was *triggered* when people built
>
>     >>>> on such Matrix classes.
>
>     >>>>
>
>     >>>> But we would really want to be able to reproduce what you are seeing..
>
>     >>>>
>
>     >>>> Best regards,
>
>     >>>> Martin Maechler
>
>     >>>>
>
>     >>>> ETH Zurich, R Core Team *and* maintainer("Matrix")
>
>     >>>>
>
>     >>>> ______________________________________________
>
>     >>>> R-package-devel at r-project.org mailing list
>
>     >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>     > [[alternative HTML version deleted]]
>
>
> > ______________________________________________
>
>     > R-package-devel at r-project.org mailing list
>
>     > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Wed Apr 29 19:19:41 2020
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Wed, 29 Apr 2020 17:19:41 +0000
Subject: [R-pkg-devel] exit and 'stderr' warning
Message-ID: <EB776CB3-BDB4-49D5-B0EA-DE13D3608999@kaust.edu.sa>

I am getting this warning which I need to get rid of.



         Found 'exit', possibly from 'exit' (C)

         Found 'stderr', possibly from 'stderr' (C)


I am depending on several C-based software that has many calls for 'exit'  and 'stderr'.   In this case, how can I avoid this warning?


Thanks,
--Sameh

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Apr 29 19:26:19 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 29 Apr 2020 19:26:19 +0200
Subject: [R-pkg-devel] exit and 'stderr' warning
In-Reply-To: <EB776CB3-BDB4-49D5-B0EA-DE13D3608999@kaust.edu.sa>
References: <EB776CB3-BDB4-49D5-B0EA-DE13D3608999@kaust.edu.sa>
Message-ID: <c60d60f1-e429-d6fd-20c8-ea66909db597@statistik.tu-dortmund.de>



On 29.04.2020 19:19, Sameh M. Abdulah wrote:
> I am getting this warning which I need to get rid of.
> 
> 
> 
>           Found 'exit', possibly from 'exit' (C)
> 
>           Found 'stderr', possibly from 'stderr' (C)
> 
> 
> I am depending on several C-based software that has many calls for 'exit'  and 'stderr'.   In this case, how can I avoid this warning?

Not use those calls, see Writing R Extensions.

Best,
Uwe Ligges




> 
> Thanks,
> --Sameh
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Thu Apr 30 09:43:42 2020
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Thu, 30 Apr 2020 17:43:42 +1000
Subject: [R-pkg-devel] Including fst in inst/extdata
In-Reply-To: <24230.52244.792572.712337@rob.eddelbuettel.com>
References: <CAJmOi+OV4WXq7UisayWWgO8Cgt5d7n0M6YCN4C2tW7W-UkJp9Q@mail.gmail.com>
 <24230.52244.792572.712337@rob.eddelbuettel.com>
Message-ID: <CAJmOi+PcaK2xPgzzac9ZV0bPMV0VvdWiN3okGikAoyTpFdWhoA@mail.gmail.com>

For reference, the file mode was not set as executable; however,
`file` was reporting a particular file (only one of several .fst
files) as a  DOS executable (COM, 0x8C-variant), which according to
comments in the code of "file" appears to be a common false positive.
Converting the character columns to ASCII and changing the order of
the columns changed the output of file to 'data'.  Dropping a column
also prevented the false identification.

On Mon, 27 Apr 2020 at 22:12, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> Hugh,
>
> On 27 April 2020 at 16:02, Hugh Parsonage wrote:
> | I would like to include some fst files (produced by fst::write_fst) in
> | inst/extdata so that (a) users can update them between releases and
> | (b) to take advantage of fst's benefits. However, when I do this and
>
> Good idea, it is a very capable format!
>
> | run R CMD check I get the warning "Found the following executable
> | file: "inst/extdata/file.fst"
>
> That refers to the file modes which will be (in octal notation) 775 or 755.
>
> | I'm not sure whether this qualifies as a "rare false positive" as WRE
> | mentions, but if it isn't is there a way to include fst files in a
> | package without raising a warning?
>
> Turn the execute bit off i.e. make them 664 or 644 and warning goes away.
>
> In short, this has nothing to do with the .fst extension or content.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Fri May  1 03:54:55 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 30 Apr 2020 20:54:55 -0500
Subject: [R-pkg-devel] Including fst in inst/extdata
In-Reply-To: <CAJmOi+PcaK2xPgzzac9ZV0bPMV0VvdWiN3okGikAoyTpFdWhoA@mail.gmail.com>
References: <CAJmOi+OV4WXq7UisayWWgO8Cgt5d7n0M6YCN4C2tW7W-UkJp9Q@mail.gmail.com>
 <24230.52244.792572.712337@rob.eddelbuettel.com>
 <CAJmOi+PcaK2xPgzzac9ZV0bPMV0VvdWiN3okGikAoyTpFdWhoA@mail.gmail.com>
Message-ID: <24235.33135.564782.200317@rob.eddelbuettel.com>


On 30 April 2020 at 17:43, Hugh Parsonage wrote:
| For reference, the file mode was not set as executable; however,
| `file` was reporting a particular file (only one of several .fst
| files) as a  DOS executable (COM, 0x8C-variant), which according to
| comments in the code of "file" appears to be a common false positive.

Interesting. So the heuristic of looking at the first few bytes was fooled.
Well, stuff happens, esp with heuristics, once N goes to 'really large'  ...

| Converting the character columns to ASCII and changing the order of
| the columns changed the output of file to 'data'.  Dropping a column
| also prevented the false identification.

Nice. The check is there to help. It may get things wrong. A good portion of
the traffic on this list is on perceived or actual errors in these checks. So
here you found an actual one, or rather, the reason why info supplied to one
was misleading.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From bkum@r @end|ng |rom rocket@o|tw@re@com  Fri May  1 18:06:53 2020
From: bkum@r @end|ng |rom rocket@o|tw@re@com (Binit Kumar)
Date: Fri, 1 May 2020 16:06:53 +0000
Subject: [R-pkg-devel] 
 [CRAN-pretest-archived] CRAN submission RIBMDB 0.1.0
In-Reply-To: <CY4PR07MB274387E0EC18CC025746391EBCAB0@CY4PR07MB2743.namprd07.prod.outlook.com>
References: <20200311122936.CB92A161E86@xmpalantir.wu.ac.at>
 <01d61f78$Blat.v3.2.16$21321805$57a0912@mail.statistik.tu-dortmund.de>
 <CY4PR07MB274387E0EC18CC025746391EBCAB0@CY4PR07MB2743.namprd07.prod.outlook.com>
Message-ID: <CY4PR07MB27435125EDC198CF979B862EBCAB0@CY4PR07MB2743.namprd07.prod.outlook.com>

Hi Team,

Based on the logs shared below, I need your help:

1) Windows:

Error: D:/RCompile/recent/R/library/RIBMDB_CLI/clidriver/bin/db2app64.dll: file not recognized: file format not recognized

Question: why is the windows environment unable to recognize the file? What could be the issue?



2) Debian:

Error: package or namespace load failed for 'RIBMDB' in dyn.load(file, DLLpath = DLLpath, ...):

unable to load shared object '/srv/hornik/tmp/CRAN/RIBMDB.Rcheck/00LOCK-RIBMDB/00new/RIBMDB/libs/RIBMDB.so':

  libdb2.so.1: cannot open shared object file: No such file or directory

Question: My package requires the clidriver component and as the same is downloaded in temp location the same will not be found. IN my local system there are two ways to have a workaround i.e. --no-test-load during package installation (OR) --no-staged-install during installation. Is there any other way that I can stop the folder being created be stopped from deleting or how to fix the test load issue. In my local system the package works fine even though test load fails.



Please let me know if you need additional details on my package RIBMDB.





Thanks & Regards,



Binit Kumar

Software Engineer, DB2 Connect

Rocket Software, Inc.(INDIA)

Karle Towers, HUB-I, NAGAVARA,

BANGALORE-45, KARNATAKA(INDIA)

T: +91 80 6745(7478)

Mob(IN): +91 9980233664

E: bkumar at rocketsoftware.com<mailto:bkumar at rocketsoftware.com>

W: www.rocketsoftware.com<http://www.rocketsoftware.com>



Please Keep your Mobile in Silent Mode at Work. Respect others.



-----Original Message-----
From: ligges at statistik.tu-dortmund.de<mailto:ligges at statistik.tu-dortmund.de> <ligges at statistik.tu-dortmund.de<mailto:ligges at statistik.tu-dortmund.de>>
Sent: Friday, May 1, 2020 10:50 AM
To: Binit Kumar <bkumar at rocketsoftware.com<mailto:bkumar at rocketsoftware.com>>
Cc: CRAN-submissions at R-project.org<mailto:CRAN-submissions at R-project.org>
Subject: [CRAN-pretest-archived] CRAN submission RIBMDB 0.1.0



EXTERNAL EMAIL











Dear maintainer,



package RIBMDB_0.1.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:

Windows: <https://nam01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2FRIBMDB_0.1.0_20200501_050641%2FWindows%2F00check.log&amp;data=02%7C01%7C%7Cbae8f0ae88314c20cc8508d7ed8f3d9d%7C79544c1eed224879a082b67a9a672aae%7C0%7C0%7C637239071803367430&amp;sdata=5Gm%2BMHgedqbrj5X5s9DNmlhGiZAgiB9E2eXlfBzD1DM%3D&amp;reserved=0>

Status: 1 ERROR, 1 NOTE

Debian: <https://nam01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2FRIBMDB_0.1.0_20200501_050641%2FDebian%2F00check.log&amp;data=02%7C01%7C%7Cbae8f0ae88314c20cc8508d7ed8f3d9d%7C79544c1eed224879a082b67a9a672aae%7C0%7C0%7C637239071803367430&amp;sdata=nKOtsZKmQIDqod13kAw4qs4wiYlGTvVTQ4rvzqJH4J0%3D&amp;reserved=0>

Status: 1 ERROR, 1 NOTE







Please fix all problems and resubmit a fixed version via the webform.

If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:

<https://nam01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7C%7Cbae8f0ae88314c20cc8508d7ed8f3d9d%7C79544c1eed224879a082b67a9a672aae%7C0%7C0%7C637239071803367430&amp;sdata=JfEmwtIL%2Bzh0Geu1PhKe4LwCTHTOiuN754ImpvjCooQ%3D&amp;reserved=0>

If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.



More details are given in the directory:

<https://nam01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2FRIBMDB_0.1.0_20200501_050641%2F&amp;data=02%7C01%7C%7Cbae8f0ae88314c20cc8508d7ed8f3d9d%7C79544c1eed224879a082b67a9a672aae%7C0%7C0%7C637239071803367430&amp;sdata=iI15In5Z8%2FPRTQ54pdzhN3x0I8GbHhM0dGlzhFFKZx4%3D&amp;reserved=0>

The files will be removed after roughly 7 days.



No strong reverse dependencies to be checked.



Best regards,

CRAN teams' auto-check service

================================
Rocket Software, Inc. and subsidiaries ? 77 Fourth Avenue, Waltham MA 02451 ? Main Office Toll Free Number: +1 855.577.4323
Contact Customer Support: https://my.rocketsoftware.com/RocketCommunity/RCEmailSupport
Unsubscribe from Marketing Messages/Manage Your Subscription Preferences - http://www.rocketsoftware.com/manage-your-email-preferences
Privacy Policy - http://www.rocketsoftware.com/company/legal/privacy-policy
================================

This communication and any attachments may contain confidential information of Rocket Software, Inc. All unauthorized use, disclosure or distribution is prohibited. If you are not the intended recipient, please notify Rocket Software immediately and destroy all copies of this communication. Thank you.

	[[alternative HTML version deleted]]


From my4 @end|ng |rom @@nger@@c@uk  Fri May  1 21:24:40 2020
From: my4 @end|ng |rom @@nger@@c@uk (Matthew Young)
Date: Fri, 1 May 2020 19:24:40 +0000
Subject: [R-pkg-devel] Rmarkdown vignette yields r inline warning on windows
 build
Message-ID: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>

I am trying to submit a package to CRAN that includes a vignette built using rmarkdown.  It passes fine on the machines I have access to (ubuntu and osx).  When I submit to CRAN using the form, it passes the Debian checks, but fails on windows with the following WARNING:

! Missing $ inserted.
<inserted text>
                $
l.1030

You may need to add $ $ around a certain inline R expression `r `


I?m really not sure what is causing this error or how to debug it.  I do not have any inline r expressions in my vignette (code here https://github.com/constantAmateur/SoupX/blob/devel/vignettes/pbmcTutorial.Rmd).  I do have back-ticked expression such as `round`, but they are not executed code.  Can anyone suggest what might be causing this issue?

Many thanks,

Matthew



-- 
 The Wellcome Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE.
	[[alternative HTML version deleted]]


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Fri May  1 21:39:50 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Fri, 1 May 2020 19:39:50 +0000
Subject: [R-pkg-devel] 
 Rmarkdown vignette yields r inline warning on windows build
In-Reply-To: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>
References: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>
Message-ID: <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>

Since you're looking for suggestions and that's all I have:


Could it be the space between the tick mark and the r? For example, does replacing ` round` with `round` (and all other instances) fix the issue?


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Matthew Young <my4 at sanger.ac.uk>
Sent: May 1, 2020 2:24:40 PM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Rmarkdown vignette yields r inline warning on windows build

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

I am trying to submit a package to CRAN that includes a vignette built using rmarkdown.  It passes fine on the machines I have access to (ubuntu and osx).  When I submit to CRAN using the form, it passes the Debian checks, but fails on windows with the following WARNING:

! Missing $ inserted.
<inserted text>
                $
l.1030

You may need to add $ $ around a certain inline R expression `r `


I?m really not sure what is causing this error or how to debug it.  I do not have any inline r expressions in my vignette (code here https://github.com/constantAmateur/SoupX/blob/devel/vignettes/pbmcTutorial.Rmd).  I do have back-ticked expression such as `round`, but they are not executed code.  Can anyone suggest what might be causing this issue?

Many thanks,

Matthew



--
 The Wellcome Sanger Institute is operated by Genome Research
 Limited, a charity registered in England with number 1021457 and a
 company registered in England with number 2742969, whose registered
 office is 215 Euston Road, London, NW1 2BE.
        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Fri May  1 21:56:10 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Fri, 1 May 2020 14:56:10 -0500
Subject: [R-pkg-devel] 
 Rmarkdown vignette yields r inline warning on windows build
In-Reply-To: <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>
References: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>
 <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>
Message-ID: <59ecc708-37f6-4edd-acb0-f4381c5efbeb@effectivedefense.org>

In R Markdown, you can say, "The number `r round(pi)` will appear as 
"The number 3".? If you write "`round`", it should display "round" in a 
special font for R commands.? Meanwhile "$\sigma > 2\Phi^{-1}(q)$" 
passes the string between the two dollar signs to a LaTeX processor.? If 
you already know this, I apologize for wasting your time with this 
reply.? If you did not know this, it might help you understand the 
problem.? Spencer Graves


On 2020-05-01 14:39, Max Turgeon wrote:
> Since you're looking for suggestions and that's all I have:
>
>
> Could it be the space between the tick mark and the r? For example, does replacing ` round` with `round` (and all other instances) fix the issue?
>
>
> Max Turgeon
> Assistant Professor
> Department of Statistics
> Department of Computer Science
> University of Manitoba
> maxturgeon.ca<http://maxturgeon.ca>
>
>
> ________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Matthew Young <my4 at sanger.ac.uk>
> Sent: May 1, 2020 2:24:40 PM
> To: r-package-devel at r-project.org
> Subject: [R-pkg-devel] Rmarkdown vignette yields r inline warning on windows build
>
> ********************************************************
> Caution: This message was sent from outside the University of Manitoba.
> ********************************************************
>
> I am trying to submit a package to CRAN that includes a vignette built using rmarkdown.  It passes fine on the machines I have access to (ubuntu and osx).  When I submit to CRAN using the form, it passes the Debian checks, but fails on windows with the following WARNING:
>
> ! Missing $ inserted.
> <inserted text>
>                  $
> l.1030
>
> You may need to add $ $ around a certain inline R expression `r `
>
>
> I?m really not sure what is causing this error or how to debug it.  I do not have any inline r expressions in my vignette (code here https://github.com/constantAmateur/SoupX/blob/devel/vignettes/pbmcTutorial.Rmd).  I do have back-ticked expression such as `round`, but they are not executed code.  Can anyone suggest what might be causing this issue?
>
> Many thanks,
>
> Matthew
>
>
>
> --
>   The Wellcome Sanger Institute is operated by Genome Research
>   Limited, a charity registered in England with number 1021457 and a
>   company registered in England with number 2742969, whose registered
>   office is 215 Euston Road, London, NW1 2BE.
>          [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> 	[[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From my4 @end|ng |rom @@nger@@c@uk  Sat May  2 01:12:33 2020
From: my4 @end|ng |rom @@nger@@c@uk (Matthew Young)
Date: Fri, 1 May 2020 23:12:33 +0000
Subject: [R-pkg-devel] 
 Rmarkdown vignette yields r inline warning on windows build [EXT]
In-Reply-To: <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>
References: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>
 <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>
Message-ID: <AB03113E-0C7C-45BA-9660-FA0E2D6E02C1@sanger.ac.uk>

I?ve tried both ways (with and without a space after the backtick) and get the same error.

From: Max Turgeon <Max.Turgeon at umanitoba.ca>
Date: Friday, 1 May 2020 at 20:39
To: Matthew Young <my4 at sanger.ac.uk>, "r-package-devel at r-project.org" <r-package-devel at r-project.org>
Subject: Re: Rmarkdown vignette yields r inline warning on windows build [EXT]


Since you're looking for suggestions and that's all I have:



Could it be the space between the tick mark and the r? For example, does replacing ` round` with `round` (and all other instances) fix the issue?


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca [maxturgeon.ca]<https://urldefense.proofpoint.com/v2/url?u=http-3A__maxturgeon.ca&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=AbhQu2y3TVl5oJQLLYAJXIyLZredpV9XsmkkeGsu1Js&e=>



________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Matthew Young <my4 at sanger.ac.uk>
Sent: May 1, 2020 2:24:40 PM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Rmarkdown vignette yields r inline warning on windows build

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

I am trying to submit a package to CRAN that includes a vignette built using rmarkdown.  It passes fine on the machines I have access to (ubuntu and osx).  When I submit to CRAN using the form, it passes the Debian checks, but fails on windows with the following WARNING:

! Missing $ inserted.
<inserted text>
                $
l.1030

You may need to add $ $ around a certain inline R expression `r `


I?m really not sure what is causing this error or how to debug it.  I do not have any inline r expressions in my vignette (code here https://github.com/constantAmateur/SoupX/blob/devel/vignettes/pbmcTutorial.Rmd [github.com]<https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_constantAmateur_SoupX_blob_devel_vignettes_pbmcTutorial.Rmd&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=1GWJLKyp3TJoM0X6-KWdkBEwtTer6JTOQKvF0d5iSPE&e=>).  I do have back-ticked expression such as `round`, but they are not executed code.  Can anyone suggest what might be causing this issue?

Many thanks,

Matthew



--
 The Wellcome Sanger Institute is operated by Genome Research
 Limited, a charity registered in England with number 1021457 and a
 company registered in England with number 2742969, whose registered
 office is 215 Euston Road, London, NW1 2BE.
        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel [stat.ethz.ch]<https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=aGl7Y0D-JZ1wiONI57CC8uOIDd4wneCjR-eCz6PZaVw&e=>



-- 
 The Wellcome Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE.
	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sat May  2 17:54:52 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sat, 2 May 2020 17:54:52 +0200
Subject: [R-pkg-devel] 
 Rmarkdown vignette yields r inline warning on windows build [EXT]
In-Reply-To: <AB03113E-0C7C-45BA-9660-FA0E2D6E02C1@sanger.ac.uk>
References: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>
 <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>
 <AB03113E-0C7C-45BA-9660-FA0E2D6E02C1@sanger.ac.uk>
Message-ID: <a25e1dde-5755-32a3-bd4f-ea095b123fbf@statistik.tu-dortmund.de>

My wild guess is that 'r ' indicates there is an invisible char after 
the r that is not representable in the chosen encoding.

Best,
Uwe Ligges



On 02.05.2020 01:12, Matthew Young wrote:
> I?ve tried both ways (with and without a space after the backtick) and get the same error.
> 
> From: Max Turgeon <Max.Turgeon at umanitoba.ca>
> Date: Friday, 1 May 2020 at 20:39
> To: Matthew Young <my4 at sanger.ac.uk>, "r-package-devel at r-project.org" <r-package-devel at r-project.org>
> Subject: Re: Rmarkdown vignette yields r inline warning on windows build [EXT]
> 
> 
> Since you're looking for suggestions and that's all I have:
> 
> 
> 
> Could it be the space between the tick mark and the r? For example, does replacing ` round` with `round` (and all other instances) fix the issue?
> 
> 
> Max Turgeon
> Assistant Professor
> Department of Statistics
> Department of Computer Science
> University of Manitoba
> maxturgeon.ca [maxturgeon.ca]<https://urldefense.proofpoint.com/v2/url?u=http-3A__maxturgeon.ca&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=AbhQu2y3TVl5oJQLLYAJXIyLZredpV9XsmkkeGsu1Js&e=>
> 
> 
> 
> ________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Matthew Young <my4 at sanger.ac.uk>
> Sent: May 1, 2020 2:24:40 PM
> To: r-package-devel at r-project.org
> Subject: [R-pkg-devel] Rmarkdown vignette yields r inline warning on windows build
> 
> ********************************************************
> Caution: This message was sent from outside the University of Manitoba.
> ********************************************************
> 
> I am trying to submit a package to CRAN that includes a vignette built using rmarkdown.  It passes fine on the machines I have access to (ubuntu and osx).  When I submit to CRAN using the form, it passes the Debian checks, but fails on windows with the following WARNING:
> 
> ! Missing $ inserted.
> <inserted text>
>                  $
> l.1030
> 
> You may need to add $ $ around a certain inline R expression `r `
> 
> 
> I?m really not sure what is causing this error or how to debug it.  I do not have any inline r expressions in my vignette (code here https://github.com/constantAmateur/SoupX/blob/devel/vignettes/pbmcTutorial.Rmd [github.com]<https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_constantAmateur_SoupX_blob_devel_vignettes_pbmcTutorial.Rmd&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=1GWJLKyp3TJoM0X6-KWdkBEwtTer6JTOQKvF0d5iSPE&e=>).  I do have back-ticked expression such as `round`, but they are not executed code.  Can anyone suggest what might be causing this issue?
> 
> Many thanks,
> 
> Matthew
> 
> 
> 
> --
>   The Wellcome Sanger Institute is operated by Genome Research
>   Limited, a charity registered in England with number 1021457 and a
>   company registered in England with number 2742969, whose registered
>   office is 215 Euston Road, London, NW1 2BE.
>          [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel [stat.ethz.ch]<https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=aGl7Y0D-JZ1wiONI57CC8uOIDd4wneCjR-eCz6PZaVw&e=>
> 
> 
>


From ordonezjo@e@|ej@ndro @end|ng |rom gm@||@com  Sat May  2 01:41:19 2020
From: ordonezjo@e@|ej@ndro @end|ng |rom gm@||@com (=?UTF-8?B?Sm9zw6kgQWxlamFuZHJvIE9yZG/DsWV6?=)
Date: Fri, 1 May 2020 18:41:19 -0500
Subject: [R-pkg-devel] CensSpatial package error.
Message-ID: <CAC7JchBhET3EPdU8unDB_onvtmOQwVFwzD9aaG7GMODvBDkdrg@mail.gmail.com>

Good evening,

My name is Jose and I'm the mantainer of the CensSpatial package. This
package was available as public but it was discharged because a problem
with the geoR orphan package.
That situation was solved and now I'm trying to resubmit the package. The
problem is that when I try to submit it, it does not pass the automatic
incoming checks,* even when I tested it using the function check available
in R studio without errors.*
Apparently is a problem with the OS Linux and Debian but I couldn't
identify it yet. I also tested it using the package rhub and ran
CensSpatial with different OS without results.

I'm provinding below the link to the source package and the error messages,
hoping to get some help from you.

https://www.dropbox.com/sh/gp5iwubkgbv9r8s/AADvJg-GGHKzoMU_PHNWdcYea?dl=0
<https://www.dropbox.com/sh/gp5iwubkgbv9r8s/AADvJg-GGHKzoMU_PHNWdcYea?dl=0&fbclid=IwAR1xeC1ArV-7IGBhatSil7u_aCjZbFoj3BDc_TD2fVq_pwGl5sdH8vgVuKQ>


In the link below, I cannot recognize what the error is. SOS!

https://win-builder.r-project.org/incoming_pretest/CensSpatial_2.5_20200428_224633/Debian/00check.log
<https://win-builder.r-project.org/incoming_pretest/CensSpatial_2.5_20200428_224633/Debian/00check.log?fbclid=IwAR2vaWkuHuyURbZH1WrUREFpmy4uO_XbXQd6leglq4CPPnn8HZgggm-1xMs>


Thanks for the attention.


Att,
Jos? Alejandro Ordo?ez.
Ph.D Student
UNICAMP.


<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
Libre
de virus. www.avast.com
<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
<#m_2258293037509368237_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sat May  2 18:15:23 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sat, 2 May 2020 18:15:23 +0200
Subject: [R-pkg-devel] CensSpatial package error.
In-Reply-To: <CAC7JchBhET3EPdU8unDB_onvtmOQwVFwzD9aaG7GMODvBDkdrg@mail.gmail.com>
References: <CAC7JchBhET3EPdU8unDB_onvtmOQwVFwzD9aaG7GMODvBDkdrg@mail.gmail.com>
Message-ID: <a6d5e1b0-439a-3483-98da-9fb8fcccd64f@statistik.tu-dortmund.de>

This indicates a programing error:


<bytecode: 0x56489c23c2f8>
<environment: namespace:CensSpatial>
  --- function search by body ---
Function FCi.fixo in namespace CensSpatial has this body.
  ----------- END OF FAILURE REPORT --------------
Error in if (class(V.inv) == "try-error") return(Inf) :
   the condition has length > 1
Calls: SAEMSCL


Yoiu see class(N.inv) has length > 1 hence if(cond) has a length > 1 
condition and cannot deal with it (well takes only the first value), 
hence rewrite to, e.g.,
if ("try-error" %in% class(V.inv))

Best,
Uwe Ligges



On 02.05.2020 01:41, Jos? Alejandro Ordo?ez wrote:
> Good evening,
> 
> My name is Jose and I'm the mantainer of the CensSpatial package. This
> package was available as public but it was discharged because a problem
> with the geoR orphan package.
> That situation was solved and now I'm trying to resubmit the package. The
> problem is that when I try to submit it, it does not pass the automatic
> incoming checks,* even when I tested it using the function check available
> in R studio without errors.*
> Apparently is a problem with the OS Linux and Debian but I couldn't
> identify it yet. I also tested it using the package rhub and ran
> CensSpatial with different OS without results.
> 
> I'm provinding below the link to the source package and the error messages,
> hoping to get some help from you.
> 
> https://www.dropbox.com/sh/gp5iwubkgbv9r8s/AADvJg-GGHKzoMU_PHNWdcYea?dl=0
> <https://www.dropbox.com/sh/gp5iwubkgbv9r8s/AADvJg-GGHKzoMU_PHNWdcYea?dl=0&fbclid=IwAR1xeC1ArV-7IGBhatSil7u_aCjZbFoj3BDc_TD2fVq_pwGl5sdH8vgVuKQ>
> 
> 
> In the link below, I cannot recognize what the error is. SOS!
> 
> https://win-builder.r-project.org/incoming_pretest/CensSpatial_2.5_20200428_224633/Debian/00check.log
> <https://win-builder.r-project.org/incoming_pretest/CensSpatial_2.5_20200428_224633/Debian/00check.log?fbclid=IwAR2vaWkuHuyURbZH1WrUREFpmy4uO_XbXQd6leglq4CPPnn8HZgggm-1xMs>
> 
> 
> Thanks for the attention.
> 
> 
> Att,
> Jos? Alejandro Ordo?ez.
> Ph.D Student
> UNICAMP.
> 
> 
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
> Libre
> de virus. www.avast.com
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
> <#m_2258293037509368237_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Sat May  2 18:20:48 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Sat, 2 May 2020 16:20:48 +0000
Subject: [R-pkg-devel] CensSpatial package error.
In-Reply-To: <CAC7JchBhET3EPdU8unDB_onvtmOQwVFwzD9aaG7GMODvBDkdrg@mail.gmail.com>
References: <CAC7JchBhET3EPdU8unDB_onvtmOQwVFwzD9aaG7GMODvBDkdrg@mail.gmail.com>
Message-ID: <445b71e3-86d6-49a9-9b55-ac3940d3daa5@email.android.com>

Hi Jos?,

The error message is pretty clear:

Error in if (class(V.inv) == "try-error") return(Inf) :
  the condition has length > 1

Instead of testing for equality of the class, you should use the function "inherits". Then, even if "class(V.inv)" has length greater than one, your condition in the if clause will be exactly TRUE or FALSE.

Best,

Max Turgeon

On May 2, 2020 10:07 AM, Jos? Alejandro Ordo?ez <ordonezjosealejandro at gmail.com> wrote:
********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

Good evening,

My name is Jose and I'm the mantainer of the CensSpatial package. This
package was available as public but it was discharged because a problem
with the geoR orphan package.
That situation was solved and now I'm trying to resubmit the package. The
problem is that when I try to submit it, it does not pass the automatic
incoming checks,* even when I tested it using the function check available
in R studio without errors.*
Apparently is a problem with the OS Linux and Debian but I couldn't
identify it yet. I also tested it using the package rhub and ran
CensSpatial with different OS without results.

I'm provinding below the link to the source package and the error messages,
hoping to get some help from you.

https://www.dropbox.com/sh/gp5iwubkgbv9r8s/AADvJg-GGHKzoMU_PHNWdcYea?dl=0
<https://www.dropbox.com/sh/gp5iwubkgbv9r8s/AADvJg-GGHKzoMU_PHNWdcYea?dl=0&fbclid=IwAR1xeC1ArV-7IGBhatSil7u_aCjZbFoj3BDc_TD2fVq_pwGl5sdH8vgVuKQ>


In the link below, I cannot recognize what the error is. SOS!

https://win-builder.r-project.org/incoming_pretest/CensSpatial_2.5_20200428_224633/Debian/00check.log
<https://win-builder.r-project.org/incoming_pretest/CensSpatial_2.5_20200428_224633/Debian/00check.log?fbclid=IwAR2vaWkuHuyURbZH1WrUREFpmy4uO_XbXQd6leglq4CPPnn8HZgggm-1xMs>


Thanks for the attention.


Att,
Jos? Alejandro Ordo?ez.
Ph.D Student
UNICAMP.


<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
Libre
de virus. www.avast.com<http://www.avast.com>
<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
<#m_2258293037509368237_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From my4 @end|ng |rom @@nger@@c@uk  Mon May  4 11:09:55 2020
From: my4 @end|ng |rom @@nger@@c@uk (Matthew Young)
Date: Mon, 4 May 2020 09:09:55 +0000
Subject: [R-pkg-devel] 
 Rmarkdown vignette yields r inline warning on windows build [EXT]
In-Reply-To: <a25e1dde-5755-32a3-bd4f-ea095b123fbf@statistik.tu-dortmund.de>
References: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>
 <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>
 <AB03113E-0C7C-45BA-9660-FA0E2D6E02C1@sanger.ac.uk>
 <a25e1dde-5755-32a3-bd4f-ea095b123fbf@statistik.tu-dortmund.de>
Message-ID: <463FA593-BD2D-4043-91EC-51B6E80475C8@sanger.ac.uk>

I progressively chopped bits out of the vignette till the error stopped to identify the error.  It was being caused by inline latex, where I had two %% marks.  I'm not really sure why this broke things, but removing it fixed it.

Thanks,

Matthew 

?On 02/05/2020, 16:54, "Uwe Ligges" <ligges at statistik.tu-dortmund.de> wrote:

    My wild guess is that 'r ' indicates there is an invisible char after 
    the r that is not representable in the chosen encoding.
    
    Best,
    Uwe Ligges
    
    
    
    On 02.05.2020 01:12, Matthew Young wrote:
    > I?ve tried both ways (with and without a space after the backtick) and get the same error.
    > 
    > From: Max Turgeon <Max.Turgeon at umanitoba.ca>
    > Date: Friday, 1 May 2020 at 20:39
    > To: Matthew Young <my4 at sanger.ac.uk>, "r-package-devel at r-project.org" <r-package-devel at r-project.org>
    > Subject: Re: Rmarkdown vignette yields r inline warning on windows build [EXT]
    > 
    > 
    > Since you're looking for suggestions and that's all I have:
    > 
    > 
    > 
    > Could it be the space between the tick mark and the r? For example, does replacing ` round` with `round` (and all other instances) fix the issue?
    > 
    > 
    > Max Turgeon
    > Assistant Professor
    > Department of Statistics
    > Department of Computer Science
    > University of Manitoba
    > maxturgeon.ca [maxturgeon.ca]<https://urldefense.proofpoint.com/v2/url?u=http-3A__maxturgeon.ca&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=AbhQu2y3TVl5oJQLLYAJXIyLZredpV9XsmkkeGsu1Js&e=>
    > 
    > 
    > 
    > ________________________________
    > From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Matthew Young <my4 at sanger.ac.uk>
    > Sent: May 1, 2020 2:24:40 PM
    > To: r-package-devel at r-project.org
    > Subject: [R-pkg-devel] Rmarkdown vignette yields r inline warning on windows build
    > 
    > ********************************************************
    > Caution: This message was sent from outside the University of Manitoba.
    > ********************************************************
    > 
    > I am trying to submit a package to CRAN that includes a vignette built using rmarkdown.  It passes fine on the machines I have access to (ubuntu and osx).  When I submit to CRAN using the form, it passes the Debian checks, but fails on windows with the following WARNING:
    > 
    > ! Missing $ inserted.
    > <inserted text>
    >                  $
    > l.1030
    > 
    > You may need to add $ $ around a certain inline R expression `r `
    > 
    > 
    > I?m really not sure what is causing this error or how to debug it.  I do not have any inline r expressions in my vignette (code here https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_constantAmateur_SoupX_blob_devel_vignettes_pbmcTutorial.Rmd&d=DwIDaQ&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=ES3UP2LbqvhOCSwVRP53v_p9EkdNJSwmYuIlfmKly28&s=R9IaPh1UjnNyLSsE8CxG_GorvzRQPg8160TkSZoRoac&e=  [github.com]<https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_constantAmateur_SoupX_blob_devel_vignettes_pbmcTutorial.Rmd&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=1GWJLKyp3TJoM0X6-KWdkBEwtTer6JTOQKvF0d5iSPE&e=>).  I do have back-ticked expression such as `round`, but they are not executed code.  Can anyone suggest what might be causing this issue?
    > 
    > Many thanks,
    > 
    > Matthew
    > 
    > 
    > 
    > --
    >   The Wellcome Sanger Institute is operated by Genome Research
    >   Limited, a charity registered in England with number 1021457 and a
    >   company registered in England with number 2742969, whose registered
    >   office is 215 Euston Road, London, NW1 2BE.
    >          [[alternative HTML version deleted]]
    > 
    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIDaQ&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=ES3UP2LbqvhOCSwVRP53v_p9EkdNJSwmYuIlfmKly28&s=jHcMcn59Q1-o_syCiYCMbWM1iyrmJpxUICKHEcK4j9w&e=  [stat.ethz.ch]<https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=aGl7Y0D-JZ1wiONI57CC8uOIDd4wneCjR-eCz6PZaVw&e=>
    > 
    > 
    > 
    




-- 
 The Wellcome Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE.

From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue May  5 16:30:11 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 5 May 2020 16:30:11 +0200
Subject: [R-pkg-devel] 
 Rmarkdown vignette yields r inline warning on windows build [EXT]
In-Reply-To: <463FA593-BD2D-4043-91EC-51B6E80475C8@sanger.ac.uk>
References: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>
 <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>
 <AB03113E-0C7C-45BA-9660-FA0E2D6E02C1@sanger.ac.uk>
 <a25e1dde-5755-32a3-bd4f-ea095b123fbf@statistik.tu-dortmund.de>
 <463FA593-BD2D-4043-91EC-51B6E80475C8@sanger.ac.uk>
Message-ID: <24241.30835.83685.271330@stat.math.ethz.ch>

>>>>> Matthew Young 
>>>>>     on Mon, 4 May 2020 09:09:55 +0000 writes:

    > I progressively chopped bits out of the vignette till the
    > error stopped to identify the error.  It was being caused
    > by inline latex, where I had two %% marks.  I'm not really
    > sure why this broke things, but removing it fixed it.

"fascinating" .. yes, unfortunately, the Rmarkdown related
engines (I suspect pandoc, but haven't thought or digged about it)
are clearly not bug free.

That's been my experience quite frequently when I "exaggerate"
in my use of LaTeX "tricks" in Rmarkdown documents ..

If somebody knows where exactly such cases should be sent, it
may help improving the situation.. I'm really no expert here.

Martin

    > Thanks,
    > Matthew

    > ?On 02/05/2020, 16:54, "Uwe Ligges"
    > <ligges at statistik.tu-dortmund.de> wrote:

    >     My wild guess is that 'r ' indicates there is an
    > invisible char after the r that is not representable in
    > the chosen encoding.
    
    >     Best, Uwe Ligges
    
    
    
    >     On 02.05.2020 01:12, Matthew Young wrote:
    >> I?ve tried both ways (with and without a space after the
    >> backtick) and get the same error.
    >> 
    >> From: Max Turgeon <Max.Turgeon at umanitoba.ca> Date:
    >> Friday, 1 May 2020 at 20:39 To: Matthew Young
    >> <my4 at sanger.ac.uk>, "r-package-devel at r-project.org"
    >> <r-package-devel at r-project.org> Subject: Re: Rmarkdown
    >> vignette yields r inline warning on windows build [EXT]
    >> 
    >> 
    >> Since you're looking for suggestions and that's all I
    >> have:
    >> 
    >> 
    >> 
    >> Could it be the space between the tick mark and the r?
    >> For example, does replacing ` round` with `round` (and
    >> all other instances) fix the issue?
    >> 
    >> 
    >> Max Turgeon Assistant Professor Department of Statistics
    >> Department of Computer Science University of Manitoba
    >> maxturgeon.ca
    >> [maxturgeon.ca]<https://urldefense.proofpoint.com/v2/url?u=http-3A__maxturgeon.ca&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=AbhQu2y3TVl5oJQLLYAJXIyLZredpV9XsmkkeGsu1Js&e=>
    >> 
    >> 
    >> 
    >> ________________________________ From: R-package-devel
    >> <r-package-devel-bounces at r-project.org> on behalf of
    >> Matthew Young <my4 at sanger.ac.uk> Sent: May 1, 2020
    >> 2:24:40 PM To: r-package-devel at r-project.org Subject:
    >> [R-pkg-devel] Rmarkdown vignette yields r inline warning
    >> on windows build
    >> 
    >> ********************************************************
    >> Caution: This message was sent from outside the
    >> University of Manitoba.
    >> ********************************************************
    >> 
    >> I am trying to submit a package to CRAN that includes a
    >> vignette built using rmarkdown.  It passes fine on the
    >> machines I have access to (ubuntu and osx).  When I
    >> submit to CRAN using the form, it passes the Debian
    >> checks, but fails on windows with the following WARNING:
    >> 
    >> ! Missing $ inserted.  <inserted text> $ l.1030
    >> 
    >> You may need to add $ $ around a certain inline R
    >> expression `r `
    >> 
    >> 
    >> I?m really not sure what is causing this error or how to
    >> debug it.  I do not have any inline r expressions in my
    >> vignette (code here
    >> https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_constantAmateur_SoupX_blob_devel_vignettes_pbmcTutorial.Rmd&d=DwIDaQ&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=ES3UP2LbqvhOCSwVRP53v_p9EkdNJSwmYuIlfmKly28&s=R9IaPh1UjnNyLSsE8CxG_GorvzRQPg8160TkSZoRoac&e=
    >> [github.com]<https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_constantAmateur_SoupX_blob_devel_vignettes_pbmcTutorial.Rmd&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=1GWJLKyp3TJoM0X6-KWdkBEwtTer6JTOQKvF0d5iSPE&e=>).
    >> I do have back-ticked expression such as `round`, but
    >> they are not executed code.  Can anyone suggest what
    >> might be causing this issue?
    >> 
    >> Many thanks,
    >> 
    >> Matthew
    >> 
    >> 
    >> 
    >> --
    >> The Wellcome Sanger Institute is operated by Genome
    >> Research Limited, a charity registered in England with
    >> number 1021457 and a company registered in England with
    >> number 2742969, whose registered office is 215 Eu...{{dropped:26}}


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue May  5 17:54:22 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 5 May 2020 11:54:22 -0400
Subject: [R-pkg-devel] 
 Rmarkdown vignette yields r inline warning on windows build [EXT]
In-Reply-To: <24241.30835.83685.271330@stat.math.ethz.ch>
References: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>
 <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>
 <AB03113E-0C7C-45BA-9660-FA0E2D6E02C1@sanger.ac.uk>
 <a25e1dde-5755-32a3-bd4f-ea095b123fbf@statistik.tu-dortmund.de>
 <463FA593-BD2D-4043-91EC-51B6E80475C8@sanger.ac.uk>
 <24241.30835.83685.271330@stat.math.ethz.ch>
Message-ID: <00652ace-c94e-aabd-1174-669f322d16aa@gmail.com>

On 05/05/2020 10:30 a.m., Martin Maechler wrote:
>>>>>> Matthew Young
>>>>>>      on Mon, 4 May 2020 09:09:55 +0000 writes:
> 
>      > I progressively chopped bits out of the vignette till the
>      > error stopped to identify the error.  It was being caused
>      > by inline latex, where I had two %% marks.  I'm not really
>      > sure why this broke things, but removing it fixed it.
> 
> "fascinating" .. yes, unfortunately, the Rmarkdown related
> engines (I suspect pandoc, but haven't thought or digged about it)
> are clearly not bug free.
> 
> That's been my experience quite frequently when I "exaggerate"
> in my use of LaTeX "tricks" in Rmarkdown documents ..
> 
> If somebody knows where exactly such cases should be sent, it
> may help improving the situation.. I'm really no expert here.

We don't have anything to send, so it's hard to say where to send it.

Put together a minimal reproducible example, and it'll probably be easy 
to work out whether it's R, R Markdown, knitr, Pandoc, or LaTeX that has 
the bug.

(Naturally I suspect it's not R, and past experience makes me think it's 
not LaTeX, but there are still three other possibilities in the list.)

Duncan Murdoch

> 
> Martin
> 
>      > Thanks,
>      > Matthew
> 
>      > ?On 02/05/2020, 16:54, "Uwe Ligges"
>      > <ligges at statistik.tu-dortmund.de> wrote:
> 
>      >     My wild guess is that 'r ' indicates there is an
>      > invisible char after the r that is not representable in
>      > the chosen encoding.
>      
>      >     Best, Uwe Ligges
>      
>      
>      
>      >     On 02.05.2020 01:12, Matthew Young wrote:
>      >> I?ve tried both ways (with and without a space after the
>      >> backtick) and get the same error.
>      >>
>      >> From: Max Turgeon <Max.Turgeon at umanitoba.ca> Date:
>      >> Friday, 1 May 2020 at 20:39 To: Matthew Young
>      >> <my4 at sanger.ac.uk>, "r-package-devel at r-project.org"
>      >> <r-package-devel at r-project.org> Subject: Re: Rmarkdown
>      >> vignette yields r inline warning on windows build [EXT]
>      >>
>      >>
>      >> Since you're looking for suggestions and that's all I
>      >> have:
>      >>
>      >>
>      >>
>      >> Could it be the space between the tick mark and the r?
>      >> For example, does replacing ` round` with `round` (and
>      >> all other instances) fix the issue?
>      >>
>      >>
>      >> Max Turgeon Assistant Professor Department of Statistics
>      >> Department of Computer Science University of Manitoba
>      >> maxturgeon.ca
>      >> [maxturgeon.ca]<https://urldefense.proofpoint.com/v2/url?u=http-3A__maxturgeon.ca&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=AbhQu2y3TVl5oJQLLYAJXIyLZredpV9XsmkkeGsu1Js&e=>
>      >>
>      >>
>      >>
>      >> ________________________________ From: R-package-devel
>      >> <r-package-devel-bounces at r-project.org> on behalf of
>      >> Matthew Young <my4 at sanger.ac.uk> Sent: May 1, 2020
>      >> 2:24:40 PM To: r-package-devel at r-project.org Subject:
>      >> [R-pkg-devel] Rmarkdown vignette yields r inline warning
>      >> on windows build
>      >>
>      >> ********************************************************
>      >> Caution: This message was sent from outside the
>      >> University of Manitoba.
>      >> ********************************************************
>      >>
>      >> I am trying to submit a package to CRAN that includes a
>      >> vignette built using rmarkdown.  It passes fine on the
>      >> machines I have access to (ubuntu and osx).  When I
>      >> submit to CRAN using the form, it passes the Debian
>      >> checks, but fails on windows with the following WARNING:
>      >>
>      >> ! Missing $ inserted.  <inserted text> $ l.1030
>      >>
>      >> You may need to add $ $ around a certain inline R
>      >> expression `r `
>      >>
>      >>
>      >> I?m really not sure what is causing this error or how to
>      >> debug it.  I do not have any inline r expressions in my
>      >> vignette (code here
>      >> https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_constantAmateur_SoupX_blob_devel_vignettes_pbmcTutorial.Rmd&d=DwIDaQ&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=ES3UP2LbqvhOCSwVRP53v_p9EkdNJSwmYuIlfmKly28&s=R9IaPh1UjnNyLSsE8CxG_GorvzRQPg8160TkSZoRoac&e=
>      >> [github.com]<https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_constantAmateur_SoupX_blob_devel_vignettes_pbmcTutorial.Rmd&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=1GWJLKyp3TJoM0X6-KWdkBEwtTer6JTOQKvF0d5iSPE&e=>).
>      >> I do have back-ticked expression such as `round`, but
>      >> they are not executed code.  Can anyone suggest what
>      >> might be causing this issue?
>      >>
>      >> Many thanks,
>      >>
>      >> Matthew
>      >>
>      >>
>      >>
>      >> --
>      >> The Wellcome Sanger Institute is operated by Genome
>      >> Research Limited, a charity registered in England with
>      >> number 1021457 and a company registered in England with
>      >> number 2742969, whose registered office is 215 Eu...{{dropped:26}}
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From j@me@@r@m@@y @end|ng |rom mcg|||@c@  Tue May  5 21:58:27 2020
From: j@me@@r@m@@y @end|ng |rom mcg|||@c@ (James Owen Ramsay, Dr.)
Date: Tue, 5 May 2020 19:58:27 +0000
Subject: [R-pkg-devel] Using Rcpp to set up a package
Message-ID: <410A4CCB-03BF-489E-AB4C-480FF0C61568@mcgill.ca>

I?m working on max OS-X 10.15.3, using R 4.0.0, and updated Xcode as well as updated tools:

Here?s my setup of a package called Data2LD2. (An update of an existing package Data2LD already on Iran):

code_files = c("~/Documents/R/Data2LDRcpp/R/Atensorfn.R",
              "~/Documents/R/Data2LDRcpp/R/BAtensorfn.R",
              "~/Documents/R/Data2LDRcpp/R/Btensorfn.R",
              "~/Documents/R/Data2LDRcpp/R/checkModel.R",
              "~/Documents/R/Data2LDRcpp/R/Data2LD.opt.R",
              "~/Documents/R/Data2LDRcpp/R/Data2LD.R",
              "~/Documents/R/Data2LDRcpp/R/fun.explinear.R",
              "~/Documents/R/Data2LDRcpp/R/fun.Dexplinear.R",
              "~/Documents/R/Data2LDRcpp/R/getForceterm.R",
              "~/Documents/R/Data2LDRcpp/R/getHomoTerm.R",
              "~/Documents/R/Data2LDRcpp/R/inprod.TPbasis.R",
              "~/Documents/R/Data2LDRcpp/R/make.Fterm.R",
              "~/Documents/R/Data2LDRcpp/R/make.Xterm.R",
              "~/Documents/R/Data2LDRcpp/R/make.Variable.R",
              "~/Documents/R/Data2LDRcpp/R/modelList2Vec.R",
              "~/Documents/R/Data2LDRcpp/R/modelVec2List.R",
              "~/Documents/R/Data2LDRcpp/R/printMatrix.R",
              "~/Documents/R/Data2LDRcpp/R/printModel.R")

cpp_files = c("~/Documents/R/Data2LDRcpp/src/DASarrayFnCpp",
             "~/Documents/R/Data2LDRcpp/src/DBSarrayFnCpp",
             "~/Documents/R/Data2LDRcpp/src/DRarrayFnCpp",
             "~/Documents/R/Data2LDRcpp/src/loopJuanCpp",
             "~/Documents/R/Data2LDRcpp/src/RmatFnCpp",
             "~/Documents/R/Data2LDRcpp/src/SmatFnCpp")

Rcpp.package.skeleton(name="Data2LD2", 
                     code_files=code_files,
                     cpp_files =cpp_files,
                     author="James Ramsay",
                     maintainer="James Ramsay",
                     force=TRUE)

Here?s the bad news from R CMD check:

Error: package or namespace load failed for ?Data2LD2? in dyn.load(file, DLLpath = DLLpath, ...):
unable to load shared object '/Users/jimramsay/Documents/R/Data2LD2.Rcheck/00LOCK-Data2LD2/00new/Data2LD2/libs/Data2LD2.so':
 dlopen(/Users/jimramsay/Documents/R/Data2LD2.Rcheck/00LOCK-Data2LD2/00new/Data2LD2/libs/Data2LD2.so, 6): Symbol not found: _DASarrayFnCpp
 Referenced from: /Users/jimramsay/Documents/R/Data2LD2.Rcheck/00LOCK-Data2LD2/00new/Data2LD2/libs/Data2LD2.so
 Expected in: flat namespace
in /Users/jimramsay/Documents/R/Data2LD2.Rcheck/00LOCK-Data2LD2/00new/Data2LD2/libs/Data2LD2.so
Error: loading failed
Execution halted
ERROR: loading failed
* removing ?/Users/jimramsay/Documents/R/Data2LD2.Rcheck/Data2LD2?

I?m getting this failure after many iterations of this setup, this being the simplest and most direct that I know.

Sure would like some help (or some sympathy at least)

Jim Ramsay

From edd @end|ng |rom deb|@n@org  Tue May  5 22:24:01 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 5 May 2020 15:24:01 -0500
Subject: [R-pkg-devel] Using Rcpp to set up a package
In-Reply-To: <410A4CCB-03BF-489E-AB4C-480FF0C61568@mcgill.ca>
References: <410A4CCB-03BF-489E-AB4C-480FF0C61568@mcgill.ca>
Message-ID: <24241.52065.416943.494066@rob.eddelbuettel.com>


Jim,

This is not the list for Rcpp discussions, as the package and its
documentation have been saying for a decade you should subscribe
to the rcpp-devel list.

Allow me to add one item:

On 5 May 2020 at 19:58, James Owen Ramsay, Dr. wrote:
| I?m working on max OS-X 10.15.3, using R 4.0.0, and updated Xcode as well as updated tools:
| 
| Here?s my setup of a package called Data2LD2. (An update of an existing package Data2LD already on Iran):
| 
| code_files = c("~/Documents/R/Data2LDRcpp/R/Atensorfn.R",
|               "~/Documents/R/Data2LDRcpp/R/BAtensorfn.R",
|               "~/Documents/R/Data2LDRcpp/R/Btensorfn.R",
|               "~/Documents/R/Data2LDRcpp/R/checkModel.R",
|               "~/Documents/R/Data2LDRcpp/R/Data2LD.opt.R",
|               "~/Documents/R/Data2LDRcpp/R/Data2LD.R",
|               "~/Documents/R/Data2LDRcpp/R/fun.explinear.R",
|               "~/Documents/R/Data2LDRcpp/R/fun.Dexplinear.R",
|               "~/Documents/R/Data2LDRcpp/R/getForceterm.R",
|               "~/Documents/R/Data2LDRcpp/R/getHomoTerm.R",
|               "~/Documents/R/Data2LDRcpp/R/inprod.TPbasis.R",
|               "~/Documents/R/Data2LDRcpp/R/make.Fterm.R",
|               "~/Documents/R/Data2LDRcpp/R/make.Xterm.R",
|               "~/Documents/R/Data2LDRcpp/R/make.Variable.R",
|               "~/Documents/R/Data2LDRcpp/R/modelList2Vec.R",
|               "~/Documents/R/Data2LDRcpp/R/modelVec2List.R",
|               "~/Documents/R/Data2LDRcpp/R/printMatrix.R",
|               "~/Documents/R/Data2LDRcpp/R/printModel.R")
| 
| cpp_files = c("~/Documents/R/Data2LDRcpp/src/DASarrayFnCpp",
|              "~/Documents/R/Data2LDRcpp/src/DBSarrayFnCpp",
|              "~/Documents/R/Data2LDRcpp/src/DRarrayFnCpp",
|              "~/Documents/R/Data2LDRcpp/src/loopJuanCpp",
|              "~/Documents/R/Data2LDRcpp/src/RmatFnCpp",
|              "~/Documents/R/Data2LDRcpp/src/SmatFnCpp")
| 
| Rcpp.package.skeleton(name="Data2LD2", 
|                      code_files=code_files,
|                      cpp_files =cpp_files,
|                      author="James Ramsay",
|                      maintainer="James Ramsay",
|                      force=TRUE)

I have created many packages using Rcpp.package.skeleton(), but I usually do
NOT supply lists of files. I would consider starting with an empty package,
and adding files as you go along.  For a deeper look it usually helps us most
to actually _see_ the code so if it is in public repo, tell us.

| Here?s the bad news from R CMD check:
| 
| Error: package or namespace load failed for ?Data2LD2? in dyn.load(file, DLLpath = DLLpath, ...):
| unable to load shared object '/Users/jimramsay/Documents/R/Data2LD2.Rcheck/00LOCK-Data2LD2/00new/Data2LD2/libs/Data2LD2.so':
|  dlopen(/Users/jimramsay/Documents/R/Data2LD2.Rcheck/00LOCK-Data2LD2/00new/Data2LD2/libs/Data2LD2.so, 6): Symbol not found: _DASarrayFnCpp
|  Referenced from: /Users/jimramsay/Documents/R/Data2LD2.Rcheck/00LOCK-Data2LD2/00new/Data2LD2/libs/Data2LD2.so
|  Expected in: flat namespace

We've seen that error but I don't recall from the top of my head where this
leads.

Overall, I would expect this to be simple to fix. Let's lay out the files as
expect, let's run `compileAttributes()` (if you use Rcpp Attributes as one
should) and let's take it from there.

But let's maybe have that discussion over at rcpp-devel.

Best,  Dirk


| in /Users/jimramsay/Documents/R/Data2LD2.Rcheck/00LOCK-Data2LD2/00new/Data2LD2/libs/Data2LD2.so
| Error: loading failed
| Execution halted
| ERROR: loading failed
| * removing ?/Users/jimramsay/Documents/R/Data2LD2.Rcheck/Data2LD2?
| 
| I?m getting this failure after many iterations of this setup, this being the simplest and most direct that I know.
| 
| Sure would like some help (or some sympathy at least)
| 
| Jim Ramsay
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |@b|o@corr@d|n| @end|ng |rom |n|@@c|  Wed May  6 12:17:41 2020
From: |@b|o@corr@d|n| @end|ng |rom |n|@@c| (Fabio Corradini Santander)
Date: Wed, 6 May 2020 12:17:41 +0200
Subject: [R-pkg-devel] MacOS flat namespace
Message-ID: <CAOxgwDD=sbCFsYiWyoXwc1OggkVcde1Rn88O6FyCREbki4Y56w@mail.gmail.com>

Hi,
Two months ago I released a package I developed in Debian 9 GCC (
https://CRAN.R-project.org/package=uFTIR). The package was accepted on
CRAN, and it can be installed on Windows and Linux machines. However, it is
not working on MacOS. I don't know why. The problem starts after the
installation, as the OS cannot load the compiled code. Cutting the long
paths of CRAN, the problem looks like (for r-oldrel-osx-x86_64):

...
** testing if installed package can be loaded from temporary location
Error: package or namespace load failed for ?uFTIR? in dyn.load(file,
DLLpath = DLLpath, ...):
 unable to load shared object '.../libs/uFTIR.so':
  dlopen(.../libs/uFTIR.so, 6): Symbol not found:
_H5P_CLS_DATASET_CREATE_ID_g
  Referenced from: .../libs/uFTIR.so
  Expected in: flat namespace
 in .../libs/uFTIR.so
Error: loading failed
...
(The missing symbol for r-release-osx-x86_64 is a different
one: _jpeg_resync_to_restart)

I saw this thread (https://github.com/RcppCore/RcppArmadillo/issues/224)
about Rcpp, but CRAN is not using gcc, but clang, so it is not really the
same... although I was lost when they discussed about libc++ and libstdc++.

I also saw this thread from stackoverflow (
https://stackoverflow.com/questions/40922814/error-in-dyn-loaddllfile-unable-to-load-shared-object-expected-in-flat-na)
but I don't have a mix between cpp and plain c.

I think that probably has to do with my Makevars file (
https://community.rstudio.com/t/error-during-the-installation-of-utf8-package/4005/2)...
maybe I shouldn't use PKG_LIBS and LDLIBS instead? But if I change it, how
will it affect the -already successful- installations on windows and linux?

The Makevars for Mac and Linux is:

CXX_STD = CXX11
PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS) `pkg-config --cflags gdal`
PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)
`pkg-config --libs gdal`

I will appreciate a hint,

Fabio.

-- 


	[[alternative HTML version deleted]]


From rtob@r @end|ng |rom |cr@r@org  Thu May  7 06:35:19 2020
From: rtob@r @end|ng |rom |cr@r@org (Rodrigo Tobar)
Date: Thu, 7 May 2020 12:35:19 +0800
Subject: [R-pkg-devel] MacOS flat namespace
In-Reply-To: <CAOxgwDD=sbCFsYiWyoXwc1OggkVcde1Rn88O6FyCREbki4Y56w@mail.gmail.com>
References: <CAOxgwDD=sbCFsYiWyoXwc1OggkVcde1Rn88O6FyCREbki4Y56w@mail.gmail.com>
Message-ID: <36f6d215-cf77-2e87-78ec-a42bbf72b429@icrar.org>

Hi,

On 6/5/20 6:17 pm, Fabio Corradini Santander wrote:
> ... Cutting the long
> paths of CRAN, the problem looks like (for r-oldrel-osx-x86_64):
> 
> ...
> ** testing if installed package can be loaded from temporary location
> Error: package or namespace load failed for ?uFTIR? in dyn.load(file,
> DLLpath = DLLpath, ...):
>   unable to load shared object '.../libs/uFTIR.so':
>    dlopen(.../libs/uFTIR.so, 6): Symbol not found:
> _H5P_CLS_DATASET_CREATE_ID_g
>    Referenced from: .../libs/uFTIR.so
>    Expected in: flat namespace
>   in .../libs/uFTIR.so
> Error: loading failed

_H5P_CLS_DATASET_CREATE_ID_g comes from the HDF5 library. You don't seem 
to use it directly, and is probably a transitive dependency coming from 
gdal, which you do link against, so it seems more like a problem with 
gdal, not with your code. You could double check this by trying to 
compile anything else against that gdal installation and see if it 
works, or the fact that you are compiling an R package.

You will find many people on internet having exactly the same problem 
but in other products, not R. It seems to boil down to a mismatch in how 
hdf5 was compiled, and how hdf5 users (in this case, gdal) compile 
against the library (with/without defining the H5_BUILT_AS_DYNAMIC_LIB 
preprocessor macro). But again, this is probably on gdal's side, not yours.

Make sure you have a proper gdal installation; after that things should 
work. If you want you could be more defensive about this, and add some 
logic to your configure script to test if a binary compiled against gdal 
runs correctly or not, and react accordingly (e.g., if gdal is a strong 
dependency then you don't continue further into the compilation of your 
package).

> (The missing symbol for r-release-osx-x86_64 is a different
> one: _jpeg_resync_to_restart)

No idea, but I'd suspect gdal here again, not your code.

Cheers,

Rodrigo


From |@b|o@corr@d|n| @end|ng |rom |n|@@c|  Thu May  7 16:37:37 2020
From: |@b|o@corr@d|n| @end|ng |rom |n|@@c| (Fabio Corradini Santander)
Date: Thu, 7 May 2020 16:37:37 +0200
Subject: [R-pkg-devel] MacOS flat namespace
In-Reply-To: <36f6d215-cf77-2e87-78ec-a42bbf72b429@icrar.org>
References: <CAOxgwDD=sbCFsYiWyoXwc1OggkVcde1Rn88O6FyCREbki4Y56w@mail.gmail.com>
 <36f6d215-cf77-2e87-78ec-a42bbf72b429@icrar.org>
Message-ID: <CAOxgwDCZXAVOwXDiH7XnydUhU0QCrOrH10057i0LwD35Sbe5Pg@mail.gmail.com>

Hi,
Thank you both very much for your help. Summarizing your comments:
1. There were no problems when installing the package from CRAN on a macOS
Catalina with clang11 and R 4.0.0.
2. Since I don't use any of the objects directly, it is probably a gdal
thing due to an improper(?) installation.

OK, but the problem happens on CRAN during the CRAN checks for the OS X and
macOS system flavors... Does this mean that there might be something wrong
with CRAN gdal installation for OS X and macOS? (I don't think so, plus how
can I check that without bothering CRAN maintainers?)

> Make sure you have a proper gdal installation; after that things should
> work. If you want you could be more defensive about this, and add some
> logic to your configure script to test if a binary compiled against gdal
> runs correctly or not, and react accordingly (e.g., if gdal is a strong
> dependency then you don't continue further into the compilation of your
> package).

Although Rodrigo suggestion will work, if I abort the installation I will
fail the CRAN check, which is the reason I'm asking this question...

Thanks once again,

Fabio.

-- 


	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu May  7 17:23:41 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Thu, 7 May 2020 08:23:41 -0700
Subject: [R-pkg-devel] MacOS flat namespace
In-Reply-To: <CAOxgwDCZXAVOwXDiH7XnydUhU0QCrOrH10057i0LwD35Sbe5Pg@mail.gmail.com>
References: <CAOxgwDD=sbCFsYiWyoXwc1OggkVcde1Rn88O6FyCREbki4Y56w@mail.gmail.com>
 <36f6d215-cf77-2e87-78ec-a42bbf72b429@icrar.org>
 <CAOxgwDCZXAVOwXDiH7XnydUhU0QCrOrH10057i0LwD35Sbe5Pg@mail.gmail.com>
Message-ID: <9ad6f5ee-c53b-02ce-c933-26f9a528cf1f@comcast.net>


On 5/7/20 7:37 AM, Fabio Corradini Santander wrote:
> Hi,
> Thank you both very much for your help. Summarizing your comments:
> 1. There were no problems when installing the package from CRAN on a macOS
> Catalina with clang11 and R 4.0.0.
> 2. Since I don't use any of the objects directly, it is probably a gdal
> thing due to an improper(?) installation.
>
> OK, but the problem happens on CRAN during the CRAN checks for the OS X and
> macOS system flavors... Does this mean that there might be something wrong
> with CRAN gdal installation for OS X and macOS? (I don't think so, plus how
> can I check that without bothering CRAN maintainers?)
>
>> Make sure you have a proper gdal installation; after that things should
>> work. If you want you could be more defensive about this, and add some
>> logic to your configure script to test if a binary compiled against gdal
>> runs correctly or not, and react accordingly (e.g., if gdal is a strong
>> dependency then you don't continue further into the compilation of your
>> package).
> Although Rodrigo suggestion will work, if I abort the installation I will
> fail the CRAN check, which is the reason I'm asking this question...

You might want to look at the 'sf' package to see how it handles GDAL 
SystemRequirements.

When I was using MacOS a few years ago I would typically need to make 
GDAL available on my system using the KingChaos distribution of the 
GDAL, GEOS, PROJ bundle whenever there was a major change in macOS. It 
provides a proper framework installation.

If the user has chosen (against the Mac fork's maintainer's advice)? to 
install GDAL and friends using homebrew, there may be difficulty during 
the linkage steps trying to find the headers that will not be in the 
expected directory. If they have gone the homebrew route, then I believe 
there are additional steps needed to establish the proper system 
environment symlinks and/or environment variables. You can probably find 
some discussion in the R-sig-mac mailing list archives. I generally use 
the MarkMail search facility. You can try:


https://markmail.org/search/?q=+list%3Aorg.r-project.r-sig-mac+gdal


 ?You might want to post the question on the R-sig-mac mailing list if 
you remain stuck.

-- 

David.

>
> Thanks once again,
>
> Fabio.
>

	[[alternative HTML version deleted]]


From |@b|o@corr@d|n| @end|ng |rom |n|@@c|  Fri May  8 11:07:15 2020
From: |@b|o@corr@d|n| @end|ng |rom |n|@@c| (Fabio Corradini Santander)
Date: Fri, 8 May 2020 11:07:15 +0200
Subject: [R-pkg-devel] MacOS flat namespace
In-Reply-To: <9ad6f5ee-c53b-02ce-c933-26f9a528cf1f@comcast.net>
References: <CAOxgwDD=sbCFsYiWyoXwc1OggkVcde1Rn88O6FyCREbki4Y56w@mail.gmail.com>
 <36f6d215-cf77-2e87-78ec-a42bbf72b429@icrar.org>
 <CAOxgwDCZXAVOwXDiH7XnydUhU0QCrOrH10057i0LwD35Sbe5Pg@mail.gmail.com>
 <9ad6f5ee-c53b-02ce-c933-26f9a528cf1f@comcast.net>
Message-ID: <CAOxgwDBR=0b2OsdkCw0R1K9wo+yLpep0YMr1JKn=K3NYz=3QbQ@mail.gmail.com>

Hi,
[SOLVED]
It was a problem of linking the libraries correctly, as suggested by
Rodrigo Tobar and David Winsemius.
I checked the package in rhub and it was working fine in the
macos-highsierra-release platform, which uses homebrew to install gdal and
proj. These are probably the settings that Bob Rudis used and that's why he
didn't catch the problem. However, the package check did not work ok in the
macos-highsierra-release-cran platform, probably because CRAN uses
KingChaos distribution of GDAL, etc. As I wasn't sure, I opened an issue in
the rhub github page (#372) and G?bor Cs?rdi pointed me in the right
direction.

I saw how rgdal solved its system requirements. I copied their configure.ac
file and targeted my exports to generate an ad-hoc configure file and
ta-dah! it's working ok in both r-hub platforms (and hopefully it will on
cran too). Now I need to prune rgdal configure.ac file to remove all that
it isn't necessary.

Thank you,
Fabio.

El jue., 7 may. 2020 a las 17:23, David Winsemius (<dwinsemius at comcast.net>)
escribi?:

>
> On 5/7/20 7:37 AM, Fabio Corradini Santander wrote:
>
> Hi,
> Thank you both very much for your help. Summarizing your comments:
> 1. There were no problems when installing the package from CRAN on a macOS
> Catalina with clang11 and R 4.0.0.
> 2. Since I don't use any of the objects directly, it is probably a gdal
> thing due to an improper(?) installation.
>
> OK, but the problem happens on CRAN during the CRAN checks for the OS X and
> macOS system flavors... Does this mean that there might be something wrong
> with CRAN gdal installation for OS X and macOS? (I don't think so, plus how
> can I check that without bothering CRAN maintainers?)
>
>
> Make sure you have a proper gdal installation; after that things should
> work. If you want you could be more defensive about this, and add some
> logic to your configure script to test if a binary compiled against gdal
> runs correctly or not, and react accordingly (e.g., if gdal is a strong
> dependency then you don't continue further into the compilation of your
> package).
>
> Although Rodrigo suggestion will work, if I abort the installation I will
> fail the CRAN check, which is the reason I'm asking this question...
>
> You might want to look at the 'sf' package to see how it handles GDAL
> SystemRequirements.
>
> When I was using MacOS a few years ago I would typically need to make GDAL
> available on my system using the KingChaos distribution of the GDAL, GEOS,
> PROJ bundle whenever there was a major change in macOS. It provides a
> proper framework installation.
>
> If the user has chosen (against the Mac fork's maintainer's advice)  to
> install GDAL and friends using homebrew, there may be difficulty during the
> linkage steps trying to find the headers that will not be in the expected
> directory. If they have gone the homebrew route, then I believe there are
> additional steps needed to establish the proper system environment symlinks
> and/or environment variables. You can probably find some discussion in the
> R-sig-mac mailing list archives. I generally use the MarkMail search
> facility. You can try:
>
>
> https://markmail.org/search/?q=+list%3Aorg.r-project.r-sig-mac+gdal
>
>
>  You might want to post the question on the R-sig-mac mailing list if you
> remain stuck.
>
> --
>
> David.
>
> Thanks once again,
>
> Fabio.
>
>
>

-- 


	[[alternative HTML version deleted]]


From j@y|@mb20 @end|ng |rom gm@||@com  Sun May 10 22:31:17 2020
From: j@y|@mb20 @end|ng |rom gm@||@com (James Lamb)
Date: Sun, 10 May 2020 21:31:17 +0100
Subject: [R-pkg-devel] Is there an Rtools40 changelog?
Message-ID: <CADPubGRsQFfm6gXRttFi-xq3VaAVkxTDGLxWUMMFbz+-e1TQ+w@mail.gmail.com>

Hello,

I am a maintainer on the LightGBM project, focused on that project's R
package. The R package is not available on CRAN yet (we are working on it),
so for now our users must build it from source.

The package includes compilation of a C++ library, and we link to R.dll /
R.so to use R-provided functions like Rprintf.

With the release of R4.0 and Rtools40, we recently received reports from
our users that they are unable to build our package on Windows systems with
R 4.0 and Rtools 4.0 (https://github.com/microsoft/LightGBM/issues/3064).

After some investigation, I've learned that the following changes in
Rtools40 (relative to Rtools35) broke our installation process:

   - *gendef.exe* was removed
   - *mingw32-make.exe* was removed
   - paths like "mingw_64/bin" were changed to "mingw64/bin"

I do not expect that our off-CRAN installation process is supported. I
understand that by maintaining our own process, we are taking on the burden
of keeping up with new releases of R and Rtools.

My question is this...is there public documentation about why the changes I
mentioned above were made? I have not found any mention of them in the
following places, and am not sure where else to look.

   - https://cran.r-project.org/bin/windows/Rtools/
   - https://github.com/r-windows/docs/blob/master/faq.md#readme
   - https://jeroen.github.io/rstudio2019

Thank you very much for your time and consideration,

-James Lamb

	[[alternative HTML version deleted]]


From @@pph|rezhou0404 @end|ng |rom gm@||@com  Sun May 10 23:26:30 2020
From: @@pph|rezhou0404 @end|ng |rom gm@||@com (Sapphire Zhou)
Date: Sun, 10 May 2020 16:26:30 -0500
Subject: [R-pkg-devel] Documentation for non-user-level objects
Message-ID: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>

I met a problem when I uploaded the package to CRAN. There is a warning told me 
?All user-level objects in a package should have documentation entries.?

Actually, those functions are not user-level functions. How could I claim non-user-level functions in an R package.
Is there any idea to remove this warning.

Thanks!

From bgunter@4567 @end|ng |rom gm@||@com  Mon May 11 00:03:11 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 10 May 2020 15:03:11 -0700
Subject: [R-pkg-devel] Documentation for non-user-level objects
In-Reply-To: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>
References: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>
Message-ID: <CAGxFJbR2cWg3_UE9PS+sHqCrH5WnXS_apkUVCcGi2mKP7S2Npw@mail.gmail.com>

1. Don't export them.

2. Use:  \keyword{ internal } in the .Rd file
>From "Writing R Extensions"
"The special keyword ?internal? marks a page of internal objects that
are not part of the package?s API. If the help page for object foo has
keyword ?internal?, then help(foo) gives this help page, but foo is
excluded from several object indices, including the alphabetical list
of objects in the HTMLhelp system."

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Sun, May 10, 2020 at 2:31 PM Sapphire Zhou
<sapphirezhou0404 at gmail.com> wrote:
>
> I met a problem when I uploaded the package to CRAN. There is a warning told me
> ?All user-level objects in a package should have documentation entries.?
>
> Actually, those functions are not user-level functions. How could I claim non-user-level functions in an R package.
> Is there any idea to remove this warning.
>
> Thanks!
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon May 11 00:15:51 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 11 May 2020 00:15:51 +0200
Subject: [R-pkg-devel] Documentation for non-user-level objects
In-Reply-To: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>
References: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>
Message-ID: <762ea177-b5bc-6c1a-478a-85af60cbbc9c@statistik.tu-dortmund.de>



On 10.05.2020 23:26, Sapphire Zhou wrote:
> I met a problem when I uploaded the package to CRAN. There is a warning told me
> ?All user-level objects in a package should have documentation entries.?
> 
> Actually, those functions are not user-level functions. How could I claim non-user-level functions in an R package.
> Is there any idea to remove this warning.

Have you exported the function?

Best,
Uwe Ligges


> Thanks!
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From bbo|ker @end|ng |rom gm@||@com  Sun May 10 23:35:40 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sun, 10 May 2020 17:35:40 -0400
Subject: [R-pkg-devel] Documentation for non-user-level objects
In-Reply-To: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>
References: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>
Message-ID: <1e571d52-eb45-fdf4-cb62-4a7864abfb4d-8144@gmail.com>

 ?? If you've exported them then they are "user-level objects". You can 
either remove them from the list of exported objects (edit your 
NAMESPACE or change your roxygen specifications), or document them 
somewhere.? One standard solution is? to use the "internal" keyword 
<https://stackoverflow.com/questions/32457581/how-can-i-hide-the-documentation-of-helper-functions>: 
they still need to be documented, but they're not in the package index.

"Using the internal keyword removes all functions in the associated .Rd 
file from the documentation index and disables some of their automated 
tests. A common use case is to both export a function (using |@export|) 
and marking it as internal. That way, advanced users can access a 
function that new users would be confused about if they were to see it 
in the index."


 ? Hope that's helpful; if not, feel free to give a little more 
detail/clarify your situation.

On 5/10/20 5:26 PM, Sapphire Zhou wrote:
> I met a problem when I uploaded the package to CRAN. There is a warning told me
> ?All user-level objects in a package should have documentation entries.?
>
> Actually, those functions are not user-level functions. How could I claim non-user-level functions in an R package.
> Is there any idea to remove this warning.
> Thanks!
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From bob @end|ng |rom rud@|@  Wed May  6 17:55:58 2020
From: bob @end|ng |rom rud@|@ (Bob Rudis)
Date: Wed, 6 May 2020 11:55:58 -0400
Subject: [R-pkg-devel] MacOS flat namespace
In-Reply-To: <CAOxgwDD=sbCFsYiWyoXwc1OggkVcde1Rn88O6FyCREbki4Y56w@mail.gmail.com>
References: <CAOxgwDD=sbCFsYiWyoXwc1OggkVcde1Rn88O6FyCREbki4Y56w@mail.gmail.com>
Message-ID: <DF1B85C1-6481-4550-8C39-3E14B0136C16@rud.is>


Can you provide a bit more context? I just grabbed the pkg source from CRAN and it builds fine.


$ clang --version
Apple clang version 11.0.3 (clang-1103.0.32.59)
Target: x86_64-apple-darwin19.5.0
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin

? Session info ???????????????????????????????????????????????????????????????????????????

 setting  value                                 
 version  R version 4.0.0 RC (2020-04-21 r78267)
 os       macOS Catalina 10.15.5                
 system   x86_64, darwin17.0                    
 ui       RStudio                               
 language (EN)                                  
 collate  en_US.UTF-8                           
 ctype    en_US.UTF-8                           
 tz       America/New_York                      
 date     2020-05-06                            

? Packages ???????????????????????????????????????????????????????????????????????????????

 package     * version  date       lib source        
 assertthat    0.2.1    2019-03-21 [1] CRAN (R 4.0.0)
 backports     1.1.6    2020-04-05 [1] CRAN (R 4.0.0)
 bit         * 1.1-15.2 2020-02-10 [1] CRAN (R 4.0.0)
 bit64       * 0.9-7    2017-05-08 [1] CRAN (R 4.0.0)
 callr         3.4.3    2020-03-28 [1] CRAN (R 4.0.0)
 cli           2.0.2    2020-02-28 [1] CRAN (R 4.0.0)
 codetools     0.2-16   2018-12-24 [1] CRAN (R 4.0.0)
 crayon        1.3.4    2017-09-16 [1] CRAN (R 4.0.0)
 desc          1.2.0    2018-05-01 [1] CRAN (R 4.0.0)
 devtools    * 2.2.2    2020-02-17 [1] CRAN (R 4.0.0)
 digest        0.6.25   2020-02-23 [1] CRAN (R 4.0.0)
 ellipsis      0.3.0    2019-09-20 [1] CRAN (R 4.0.0)
 fansi         0.4.1    2020-01-08 [1] CRAN (R 4.0.0)
 fs            1.4.1    2020-04-04 [1] CRAN (R 4.0.0)
 glue          1.4.0    2020-04-03 [1] CRAN (R 4.0.0)
 lattice       0.20-41  2020-04-02 [1] CRAN (R 4.0.0)
 magrittr      1.5      2014-11-22 [1] CRAN (R 4.0.0)
 memoise       1.1.0    2017-04-21 [1] CRAN (R 4.0.0)
 pkgbuild      1.0.6    2019-10-09 [1] CRAN (R 4.0.0)
 pkgload       1.0.2    2018-10-29 [1] CRAN (R 4.0.0)
 prettyunits   1.1.1    2020-01-24 [1] CRAN (R 4.0.0)
 processx      3.4.2    2020-02-09 [1] CRAN (R 4.0.0)
 ps            1.3.2    2020-02-13 [1] CRAN (R 4.0.0)
 R6            2.4.1    2019-11-12 [1] CRAN (R 4.0.0)
 raster        3.1-5    2020-04-19 [1] CRAN (R 4.0.0)
 Rcpp          1.0.4.6  2020-04-09 [1] CRAN (R 4.0.0)
 remotes       2.1.1    2020-02-15 [1] CRAN (R 4.0.0)
 rgdal         1.4-8    2019-11-27 [1] CRAN (R 4.0.0)
 rlang         0.4.5    2020-03-01 [1] CRAN (R 4.0.0)
 rprojroot     1.3-2    2018-01-03 [1] CRAN (R 4.0.0)
 rstudioapi    0.11     2020-02-07 [1] CRAN (R 4.0.0)
 sessioninfo   1.1.1    2018-11-05 [1] CRAN (R 4.0.0)
 sp            1.4-1    2020-02-28 [1] CRAN (R 4.0.0)
 testthat      2.3.2    2020-03-02 [1] CRAN (R 4.0.0)
 uFTIR       * 0.1.1    2020-03-11 [1] CRAN (R 4.0.0)
 usethis     * 1.5.1    2019-07-04 [1] CRAN (R 4.0.0)
 withr         2.2.0    2020-04-20 [1] CRAN (R 4.0.0)

[1] /Library/Frameworks/R.framework/Versions/4.0/Resources/library

> On May 6, 2020, at 06:17, Fabio Corradini Santander <fabio.corradini at inia.cl> wrote:
> 
> Hi,
> Two months ago I released a package I developed in Debian 9 GCC (
> https://CRAN.R-project.org/package=uFTIR). The package was accepted on
> CRAN, and it can be installed on Windows and Linux machines. However, it is
> not working on MacOS. I don't know why. The problem starts after the
> installation, as the OS cannot load the compiled code. Cutting the long
> paths of CRAN, the problem looks like (for r-oldrel-osx-x86_64):
> 
> ...
> ** testing if installed package can be loaded from temporary location
> Error: package or namespace load failed for ?uFTIR? in dyn.load(file,
> DLLpath = DLLpath, ...):
> unable to load shared object '.../libs/uFTIR.so':
>  dlopen(.../libs/uFTIR.so, 6): Symbol not found:
> _H5P_CLS_DATASET_CREATE_ID_g
>  Referenced from: .../libs/uFTIR.so
>  Expected in: flat namespace
> in .../libs/uFTIR.so
> Error: loading failed
> ...
> (The missing symbol for r-release-osx-x86_64 is a different
> one: _jpeg_resync_to_restart)
> 
> I saw this thread (https://github.com/RcppCore/RcppArmadillo/issues/224)
> about Rcpp, but CRAN is not using gcc, but clang, so it is not really the
> same... although I was lost when they discussed about libc++ and libstdc++.
> 
> I also saw this thread from stackoverflow (
> https://stackoverflow.com/questions/40922814/error-in-dyn-loaddllfile-unable-to-load-shared-object-expected-in-flat-na)
> but I don't have a mix between cpp and plain c.
> 
> I think that probably has to do with my Makevars file (
> https://community.rstudio.com/t/error-during-the-installation-of-utf8-package/4005/2)...
> maybe I shouldn't use PKG_LIBS and LDLIBS instead? But if I change it, how
> will it affect the -already successful- installations on windows and linux?
> 
> The Makevars for Mac and Linux is:
> 
> CXX_STD = CXX11
> PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS) `pkg-config --cflags gdal`
> PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)
> `pkg-config --libs gdal`
> 
> I will appreciate a hint,
> 
> Fabio.
> 
> -- 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jw|j||e|@ @end|ng |rom bno@@c@be  Mon May 11 13:54:41 2020
From: jw|j||e|@ @end|ng |rom bno@@c@be (Jan Wijffels)
Date: Mon, 11 May 2020 11:54:41 +0000
Subject: [R-pkg-devel] how to specify to let a package only build 64bit on
 CRAN
Message-ID: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>

Hello everyone,

I have a package which I would like to host on CRAN. The package is at https://github.com/bnosac/golgotha
The package only builds on 64bit however because the package uses R package reticulate which requires a python library called torch which does not build on 32 bit platforms.
So installation only works using INSTALL_opts = "--no-multiarch"

How do you specify this to the CRAN maintainers that this is the way it should be set up on CRAN such that it only is built for 64bit systems.

thanks,
Jan

Jan Wijffels
Statistician
www.bnosac.be  | +32 486 611708
	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon May 11 14:39:42 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 11 May 2020 08:39:42 -0400
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
Message-ID: <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>

On 11/05/2020 7:54 a.m., Jan Wijffels wrote:
> Hello everyone,
> 
> I have a package which I would like to host on CRAN. The package is at https://github.com/bnosac/golgotha
> The package only builds on 64bit however because the package uses R package reticulate which requires a python library called torch which does not build on 32 bit platforms.
> So installation only works using INSTALL_opts = "--no-multiarch"
> 
> How do you specify this to the CRAN maintainers that this is the way it should be set up on CRAN such that it only is built for 64bit systems.
> 

I don't see how your package has any 32 bit dependence, since it has no 
src directory.  It's probably sufficient to declare the dependency on 
reticulate, which indirectly implies the 32 bit dependence.  But if 
reticulate works on 32 bit systems as long as users don't need "torch",
then just state that.

One thing I'd recommend:  you should try to change the dependency from 
Depends to Imports.  If there are a few reticulate functions that you 
want your users to have access to, you can import them and re-export 
them so they're available from your package as well.

Duncan


From jw|j||e|@ @end|ng |rom bno@@c@be  Mon May 11 14:46:06 2020
From: jw|j||e|@ @end|ng |rom bno@@c@be (Jan Wijffels)
Date: Mon, 11 May 2020 12:46:06 +0000
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
 <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>
Message-ID: <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>

Duncan,

Thanks for the reply. Let me make this more clear.
The R package reticulate works on 32bit and 64bit. My golgotha package depends on reticulate and an extra Python package called torch which is not available for 32bit platforms. This is specified in the DESCRIPTION file at https://github.com/bnosac/golgotha/blob/master/DESCRIPTION#L17

For that reason R CMD check will fail on CRAN for 32bit. Hence my question. How do I specify this in the package such that I can distribute it on CRAN.

best,
Jan


Jan Wijffels
Statistician
www.bnosac.be? | +32 486 611708

??????? Original Message ???????
On Monday 11 May 2020 14:39, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> On 11/05/2020 7:54 a.m., Jan Wijffels wrote:
>
> > Hello everyone,
> > I have a package which I would like to host on CRAN. The package is at https://github.com/bnosac/golgotha
> > The package only builds on 64bit however because the package uses R package reticulate which requires a python library called torch which does not build on 32 bit platforms.
> > So installation only works using INSTALL_opts = "--no-multiarch"
> > How do you specify this to the CRAN maintainers that this is the way it should be set up on CRAN such that it only is built for 64bit systems.
>
> I don't see how your package has any 32 bit dependence, since it has no
> src directory. It's probably sufficient to declare the dependency on
> reticulate, which indirectly implies the 32 bit dependence. But if
> reticulate works on 32 bit systems as long as users don't need "torch",
> then just state that.
>
> One thing I'd recommend: you should try to change the dependency from
> Depends to Imports. If there are a few reticulate functions that you
> want your users to have access to, you can import them and re-export
> them so they're available from your package as well.
>
> Duncan


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon May 11 14:55:13 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 11 May 2020 08:55:13 -0400
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
 <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>
 <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
Message-ID: <a171cae7-095f-4865-552b-6635919aeb68@gmail.com>

On 11/05/2020 8:46 a.m., Jan Wijffels wrote:
> Duncan,
> 
> Thanks for the reply. Let me make this more clear.
> The R package reticulate works on 32bit and 64bit. My golgotha package depends on reticulate and an extra Python package called torch which is not available for 32bit platforms. This is specified in the DESCRIPTION file at https://github.com/bnosac/golgotha/blob/master/DESCRIPTION#L17
> 
> For that reason R CMD check will fail on CRAN for 32bit. Hence my question. How do I specify this in the package such that I can distribute it on CRAN.

I don't think there's a formal way to state that, and there shouldn't 
be.  Maybe some day someone will make 32 bit torch available, and then 
your restriction would be unnecessary.  Just state the current situation 
in your submission comments.  You may get an automatic rejection because 
of the build failure, then follow the instructions for getting a human 
to look at things.

It's possible that CRAN will not be flexible on this, because it aims 
for wide portability of the packages it hosts.  However, 32 bit systems 
are less and less common, so a good argument about why your package is 
useful even if not usable on some old systems would probably get it 
accepted.

Duncan Murdoch

> 
> best,
> Jan
> 
> 
> Jan Wijffels
> Statistician
> www.bnosac.be? | +32 486 611708
> 
> ??????? Original Message ???????
> On Monday 11 May 2020 14:39, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
>> On 11/05/2020 7:54 a.m., Jan Wijffels wrote:
>>
>>> Hello everyone,
>>> I have a package which I would like to host on CRAN. The package is at https://github.com/bnosac/golgotha
>>> The package only builds on 64bit however because the package uses R package reticulate which requires a python library called torch which does not build on 32 bit platforms.
>>> So installation only works using INSTALL_opts = "--no-multiarch"
>>> How do you specify this to the CRAN maintainers that this is the way it should be set up on CRAN such that it only is built for 64bit systems.
>>
>> I don't see how your package has any 32 bit dependence, since it has no
>> src directory. It's probably sufficient to declare the dependency on
>> reticulate, which indirectly implies the 32 bit dependence. But if
>> reticulate works on 32 bit systems as long as users don't need "torch",
>> then just state that.
>>
>> One thing I'd recommend: you should try to change the dependency from
>> Depends to Imports. If there are a few reticulate functions that you
>> want your users to have access to, you can import them and re-export
>> them so they're available from your package as well.
>>
>> Duncan
> 
>


From jw|j||e|@ @end|ng |rom bno@@c@be  Mon May 11 14:59:45 2020
From: jw|j||e|@ @end|ng |rom bno@@c@be (Jan Wijffels)
Date: Mon, 11 May 2020 12:59:45 +0000
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <a171cae7-095f-4865-552b-6635919aeb68@gmail.com>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
 <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>
 <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
 <a171cae7-095f-4865-552b-6635919aeb68@gmail.com>
Message-ID: <AMr5ja6zgnGPgA9aoEOSWfZeKzsAKYwjKv-T0XeDKLDdCS6v8LkpQeAc9IJ-mC2dv1LZSvsLFMoIpKUP_pCOBD5Ybx63ppPaPSdsJTrfCPg=@bnosac.be>

Duncan,

Thanks for the confirmation that there isn't a formal way to state this 64bit dependency.

have a nice day,
Jan

Jan Wijffels
Statistician
www.bnosac.be? | +32 486 611708

??????? Original Message ???????
On Monday 11 May 2020 14:55, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> On 11/05/2020 8:46 a.m., Jan Wijffels wrote:
>
> > Duncan,
> > Thanks for the reply. Let me make this more clear.
> > The R package reticulate works on 32bit and 64bit. My golgotha package depends on reticulate and an extra Python package called torch which is not available for 32bit platforms. This is specified in the DESCRIPTION file at https://github.com/bnosac/golgotha/blob/master/DESCRIPTION#L17
> > For that reason R CMD check will fail on CRAN for 32bit. Hence my question. How do I specify this in the package such that I can distribute it on CRAN.
>
> I don't think there's a formal way to state that, and there shouldn't
> be. Maybe some day someone will make 32 bit torch available, and then
> your restriction would be unnecessary. Just state the current situation
> in your submission comments. You may get an automatic rejection because
> of the build failure, then follow the instructions for getting a human
> to look at things.
>
> It's possible that CRAN will not be flexible on this, because it aims
> for wide portability of the packages it hosts. However, 32 bit systems
> are less and less common, so a good argument about why your package is
> useful even if not usable on some old systems would probably get it
> accepted.
>
> Duncan Murdoch
>
> > best,
> > Jan
> > Jan Wijffels
> > Statistician
> > www.bnosac.be? | +32 486 611708
> > ??????? Original Message ???????
> > On Monday 11 May 2020 14:39, Duncan Murdoch murdoch.duncan at gmail.com wrote:
> >
> > > On 11/05/2020 7:54 a.m., Jan Wijffels wrote:
> > >
> > > > Hello everyone,
> > > > I have a package which I would like to host on CRAN. The package is at https://github.com/bnosac/golgotha
> > > > The package only builds on 64bit however because the package uses R package reticulate which requires a python library called torch which does not build on 32 bit platforms.
> > > > So installation only works using INSTALL_opts = "--no-multiarch"
> > > > How do you specify this to the CRAN maintainers that this is the way it should be set up on CRAN such that it only is built for 64bit systems.
> > >
> > > I don't see how your package has any 32 bit dependence, since it has no
> > > src directory. It's probably sufficient to declare the dependency on
> > > reticulate, which indirectly implies the 32 bit dependence. But if
> > > reticulate works on 32 bit systems as long as users don't need "torch",
> > > then just state that.
> > > One thing I'd recommend: you should try to change the dependency from
> > > Depends to Imports. If there are a few reticulate functions that you
> > > want your users to have access to, you can import them and re-export
> > > them so they're available from your package as well.
> > > Duncan


From c@@rd|@g@bor @end|ng |rom gm@||@com  Mon May 11 15:05:57 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 11 May 2020 14:05:57 +0100
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
 <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>
 <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
Message-ID: <CABtg=KmjLy2XTxJgH_jCrtocj5_HNe9KWuuvvpHp-UicFAVu+w@mail.gmail.com>

Hi Jan,

this is the only example that I could find:
https://github.com/cran/regRSM/blob/master/DESCRIPTION#L13

I.e. you can have an 'Archs' field in DESCRIPTION, and apparently you
can set that to 'i386' or 'x64' or both.

 I don't know what OSes support this field, and this package hasn't
been updated for a while, so I am not 100% sure, but this definitely
seems like the proper way to declare a 64-bit only package.

Gabor


On Mon, May 11, 2020 at 1:50 PM Jan Wijffels <jwijffels at bnosac.be> wrote:
>
> Duncan,
>
> Thanks for the reply. Let me make this more clear.
> The R package reticulate works on 32bit and 64bit. My golgotha package depends on reticulate and an extra Python package called torch which is not available for 32bit platforms. This is specified in the DESCRIPTION file at https://github.com/bnosac/golgotha/blob/master/DESCRIPTION#L17
>
> For that reason R CMD check will fail on CRAN for 32bit. Hence my question. How do I specify this in the package such that I can distribute it on CRAN.
>
> best,
> Jan
>
>
> Jan Wijffels
> Statistician
> www.bnosac.be  | +32 486 611708
>
> ??????? Original Message ???????
> On Monday 11 May 2020 14:39, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> > On 11/05/2020 7:54 a.m., Jan Wijffels wrote:
> >
> > > Hello everyone,
> > > I have a package which I would like to host on CRAN. The package is at https://github.com/bnosac/golgotha
> > > The package only builds on 64bit however because the package uses R package reticulate which requires a python library called torch which does not build on 32 bit platforms.
> > > So installation only works using INSTALL_opts = "--no-multiarch"
> > > How do you specify this to the CRAN maintainers that this is the way it should be set up on CRAN such that it only is built for 64bit systems.
> >
> > I don't see how your package has any 32 bit dependence, since it has no
> > src directory. It's probably sufficient to declare the dependency on
> > reticulate, which indirectly implies the 32 bit dependence. But if
> > reticulate works on 32 bit systems as long as users don't need "torch",
> > then just state that.
> >
> > One thing I'd recommend: you should try to change the dependency from
> > Depends to Imports. If there are a few reticulate functions that you
> > want your users to have access to, you can import them and re-export
> > them so they're available from your package as well.
> >
> > Duncan
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From Jor|@@Mey@ @end|ng |rom UGent@be  Mon May 11 15:13:02 2020
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Mon, 11 May 2020 13:13:02 +0000
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
 <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>,
 <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
Message-ID: <1589202782466.74268@UGent.be>

Hi Jan,

To add to the suggestion of Gabor and Duncan, it might be a good idea to add a packageStartupMessage that warns the user about the problem when running on a 32bit system. You can easily extract that info from R.Version()$arch . That might help negotiating with CRAN.

Kind regards
Joris


Joris Meys
Statistician
T +32 9 264 61 79

Department Data Analysis and Mathematical Modelling

Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent, Belgium
T administration office +32 9 264 59 32

www.ugent.be

e-maildisclaimer


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Jan Wijffels <jwijffels at bnosac.be>
Sent: Monday, May 11, 2020 2:46 PM
To: Duncan Murdoch
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel]  how to specify to let a package only build 64bit on CRAN

Duncan,

Thanks for the reply. Let me make this more clear.
The R package reticulate works on 32bit and 64bit. My golgotha package depends on reticulate and an extra Python package called torch which is not available for 32bit platforms. This is specified in the DESCRIPTION file at https://github.com/bnosac/golgotha/blob/master/DESCRIPTION#L17

For that reason R CMD check will fail on CRAN for 32bit. Hence my question. How do I specify this in the package such that I can distribute it on CRAN.

best,
Jan


Jan Wijffels
Statistician
www.bnosac.be  | +32 486 611708

??????? Original Message ???????
On Monday 11 May 2020 14:39, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> On 11/05/2020 7:54 a.m., Jan Wijffels wrote:
>
> > Hello everyone,
> > I have a package which I would like to host on CRAN. The package is at https://github.com/bnosac/golgotha
> > The package only builds on 64bit however because the package uses R package reticulate which requires a python library called torch which does not build on 32 bit platforms.
> > So installation only works using INSTALL_opts = "--no-multiarch"
> > How do you specify this to the CRAN maintainers that this is the way it should be set up on CRAN such that it only is built for 64bit systems.
>
> I don't see how your package has any 32 bit dependence, since it has no
> src directory. It's probably sufficient to declare the dependency on
> reticulate, which indirectly implies the 32 bit dependence. But if
> reticulate works on 32 bit systems as long as users don't need "torch",
> then just state that.
>
> One thing I'd recommend: you should try to change the dependency from
> Depends to Imports. If there are a few reticulate functions that you
> want your users to have access to, you can import them and re-export
> them so they're available from your package as well.
>
> Duncan

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jw|j||e|@ @end|ng |rom bno@@c@be  Mon May 11 15:19:58 2020
From: jw|j||e|@ @end|ng |rom bno@@c@be (Jan Wijffels)
Date: Mon, 11 May 2020 13:19:58 +0000
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <1589202782466.74268@UGent.be>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
 <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>,
 <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
 <1589202782466.74268@UGent.be>
Message-ID: <x0ZHtKoxmSChw6I53d7foFg0IUEfZeV-SVbo3dDIy2Wrs_Z_msWX11gsW1JoVPGU7Ga7aEdDgl52BBDvwXnKkYwm7S6Kknvs_hrEGPtXIgM=@bnosac.be>

Gabor/Joris,

Thanks for the suggestions!
I'll try it out and see if it reaches the CRAN servers.

best,
Jan


Jan Wijffels
Statistician
www.bnosac.be? | +32 486 611708

??????? Original Message ???????
On Monday 11 May 2020 15:13, Joris Meys <Joris.Meys at UGent.be> wrote:

> Hi Jan,
>
> To add to the suggestion of Gabor and Duncan, it might be a good idea to add a packageStartupMessage that warns the user about the problem when running on a 32bit system. You can easily extract that info from R.Version()$arch . That might help negotiating with CRAN.
>
> Kind regards
> Joris
>
> Joris Meys
> Statistician
> T +32 9 264 61 79
>
> Department Data Analysis and Mathematical Modelling
>
> Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent, Belgium
> T administration office +32 9 264 59 32
>
> www.ugent.be
>
> e-maildisclaimer
>
> From: R-package-devel r-package-devel-bounces at r-project.org on behalf of Jan Wijffels jwijffels at bnosac.be
> Sent: Monday, May 11, 2020 2:46 PM
> To: Duncan Murdoch
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] how to specify to let a package only build 64bit on CRAN
>
> Duncan,
>
> Thanks for the reply. Let me make this more clear.
> The R package reticulate works on 32bit and 64bit. My golgotha package depends on reticulate and an extra Python package called torch which is not available for 32bit platforms. This is specified in the DESCRIPTION file at https://github.com/bnosac/golgotha/blob/master/DESCRIPTION#L17
>
> For that reason R CMD check will fail on CRAN for 32bit. Hence my question. How do I specify this in the package such that I can distribute it on CRAN.
>
> best,
> Jan
>
> Jan Wijffels
> Statistician
> www.bnosac.be | +32 486 611708
>
> ??????? Original Message ???????
> On Monday 11 May 2020 14:39, Duncan Murdoch murdoch.duncan at gmail.com wrote:
>
> > On 11/05/2020 7:54 a.m., Jan Wijffels wrote:
> >
> > > Hello everyone,
> > > I have a package which I would like to host on CRAN. The package is at https://github.com/bnosac/golgotha
> > > The package only builds on 64bit however because the package uses R package reticulate which requires a python library called torch which does not build on 32 bit platforms.
> > > So installation only works using INSTALL_opts = "--no-multiarch"
> > > How do you specify this to the CRAN maintainers that this is the way it should be set up on CRAN such that it only is built for 64bit systems.
> >
> > I don't see how your package has any 32 bit dependence, since it has no
> > src directory. It's probably sufficient to declare the dependency on
> > reticulate, which indirectly implies the 32 bit dependence. But if
> > reticulate works on 32 bit systems as long as users don't need "torch",
> > then just state that.
> > One thing I'd recommend: you should try to change the dependency from
> > Depends to Imports. If there are a few reticulate functions that you
> > want your users to have access to, you can import them and re-export
> > them so they're available from your package as well.
> > Duncan
>
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Mon May 11 15:51:03 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 11 May 2020 08:51:03 -0500
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <1589202782466.74268@UGent.be>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
 <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>
 <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
 <1589202782466.74268@UGent.be>
Message-ID: <24249.22599.912368.111953@rob.eddelbuettel.com>


On 11 May 2020 at 13:13, Joris Meys wrote:
| To add to the suggestion of Gabor and Duncan, it might be a good idea to add a packageStartupMessage that warns the user about the problem when running on a 32bit system. You can easily extract that info from R.Version()$arch . That might help negotiating with CRAN.

Related: As CRAN does not give you a hook, approximate one yourself in the
package.  I.e. demote reticulate to a mere Suggests:, then in .onAttach()
check a) if it is present and howl if not as well as b) if on 32 bit and say
you're sorry if so. Obviously, a real switch would be better but ... 

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jw|j||e|@ @end|ng |rom bno@@c@be  Mon May 11 16:46:57 2020
From: jw|j||e|@ @end|ng |rom bno@@c@be (Jan Wijffels)
Date: Mon, 11 May 2020 14:46:57 +0000
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <24249.22599.912368.111953@rob.eddelbuettel.com>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
 <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>
 <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
 <1589202782466.74268@UGent.be>
 <24249.22599.912368.111953@rob.eddelbuettel.com>
Message-ID: <b_xTx8sTOL3eTYL9smIML44-jUiotW_O4uv-6NNrWS6Lx_nSk_2XmrrswC5XSjMrAL3NQXqe1U9DcQUkdBSPkccxTB6O7yWlyy8IB2EKsdA=@bnosac.be>

Dirk,

Thanks. I'll use this suggestion as well.

have a nice day,
Jan

Jan Wijffels
Statistician
www.bnosac.be? | +32 486 611708

??????? Original Message ???????
On Monday 11 May 2020 15:51, Dirk Eddelbuettel <edd at debian.org> wrote:

>
>
> On 11 May 2020 at 13:13, Joris Meys wrote:
> | To add to the suggestion of Gabor and Duncan, it might be a good idea to add a packageStartupMessage that warns the user about the problem when running on a 32bit system. You can easily extract that info from R.Version()$arch . That might help negotiating with CRAN.
>
> Related: As CRAN does not give you a hook, approximate one yourself in the
> package. I.e. demote reticulate to a mere Suggests:, then in .onAttach()
> check a) if it is present and howl if not as well as b) if on 32 bit and say
> you're sorry if so. Obviously, a real switch would be better but ...
>
> Dirk
>
> -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
>
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From per @end|ng |rom @||p@@@@e  Mon May 11 19:59:05 2020
From: per @end|ng |rom @||p@@@@e (Per Nyfelt)
Date: Mon, 11 May 2020 19:59:05 +0200
Subject: [R-pkg-devel] Assigning values to fields in Reference Classes
Message-ID: <83ab0e83-f641-b912-a69b-ab0841831a2d@alipsa.se>

Hi,

I have been playing with alternative ways to assign values to fields in 
reference classes.

Besides the "standard" <<- there are two other ways that also "seems to 
work". One is using .self$fieldName assigned with <- and the the other 
one is field(fieldName, value).

With regards to the ".self method" (example below): is this a "safe" 
equivalent to <<- i.e. are these two ways identical in result and 
possible "side effects"?

StandardAssignment <- setRefClass(
 ? Class ="StandardAssignment",
 ? fields = list(
 ??? m_attributes = "list"
 ? ),
 ? methods = list(
 ??? setAttribute = function(name, value) {
 ????? m_attributes[[as.character(name)]] <<- as.character(value)
 ????? return(invisible(.self))
 ??? },
 ??? getAttribute = function(name) {
 ????? m_attributes[[name]]
 ??? }
 ? )
)

s1 <- StandardAssignment$new()
s1$setAttribute("name", "foo")
s1$getAttribute("name")

[1] "foo"

SelfAssignment <- setRefClass(
 ? Class ="SelfAssignment",
 ? fields = list(
 ??? m_attributes = "list"
 ? ),
 ? methods = list(
 ??? setAttribute = function(name, value) {
 ????? .self$m_attributes[[as.character(name)]] <- as.character(value)
 ????? return(invisible(.self))
 ??? },
 ??? getAttribute = function(name) {
 ????? m_attributes[[name]]
 ??? }
 ? )
)

s2 <- SelfAssignment$new()
s2$setAttribute("name", "foo")
s2$getAttribute("name")

[1] "foo"


Best regards,

Per


From bgunter@4567 @end|ng |rom gm@||@com  Mon May 11 20:58:31 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 11 May 2020 11:58:31 -0700
Subject: [R-pkg-devel] Assigning values to fields in Reference Classes
In-Reply-To: <83ab0e83-f641-b912-a69b-ab0841831a2d@alipsa.se>
References: <83ab0e83-f641-b912-a69b-ab0841831a2d@alipsa.se>
Message-ID: <CAGxFJbTrw6MaC7B0jLRuMq_PoCckuE3qdzaZHyJiASF=_UKX0g@mail.gmail.com>

What does this have to do with package development? Seems more like a
query for r-help.

Cheers,
Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Mon, May 11, 2020 at 11:27 AM Per Nyfelt <per at alipsa.se> wrote:
>
> Hi,
>
> I have been playing with alternative ways to assign values to fields in
> reference classes.
>
> Besides the "standard" <<- there are two other ways that also "seems to
> work". One is using .self$fieldName assigned with <- and the the other
> one is field(fieldName, value).
>
> With regards to the ".self method" (example below): is this a "safe"
> equivalent to <<- i.e. are these two ways identical in result and
> possible "side effects"?
>
> StandardAssignment <- setRefClass(
>    Class ="StandardAssignment",
>    fields = list(
>      m_attributes = "list"
>    ),
>    methods = list(
>      setAttribute = function(name, value) {
>        m_attributes[[as.character(name)]] <<- as.character(value)
>        return(invisible(.self))
>      },
>      getAttribute = function(name) {
>        m_attributes[[name]]
>      }
>    )
> )
>
> s1 <- StandardAssignment$new()
> s1$setAttribute("name", "foo")
> s1$getAttribute("name")
>
> [1] "foo"
>
> SelfAssignment <- setRefClass(
>    Class ="SelfAssignment",
>    fields = list(
>      m_attributes = "list"
>    ),
>    methods = list(
>      setAttribute = function(name, value) {
>        .self$m_attributes[[as.character(name)]] <- as.character(value)
>        return(invisible(.self))
>      },
>      getAttribute = function(name) {
>        m_attributes[[name]]
>      }
>    )
> )
>
> s2 <- SelfAssignment$new()
> s2$setAttribute("name", "foo")
> s2$getAttribute("name")
>
> [1] "foo"
>
>
> Best regards,
>
> Per
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From per @end|ng |rom @||p@@@@e  Mon May 11 22:37:44 2020
From: per @end|ng |rom @||p@@@@e (Per Nyfelt)
Date: Mon, 11 May 2020 22:37:44 +0200
Subject: [R-pkg-devel] Assigning values to fields in Reference Classes
In-Reply-To: <CAGxFJbTrw6MaC7B0jLRuMq_PoCckuE3qdzaZHyJiASF=_UKX0g@mail.gmail.com>
References: <83ab0e83-f641-b912-a69b-ab0841831a2d@alipsa.se>
 <CAGxFJbTrw6MaC7B0jLRuMq_PoCckuE3qdzaZHyJiASF=_UKX0g@mail.gmail.com>
Message-ID: <2631dee9-d686-b284-1028-1d8187cb40b5@alipsa.se>

I developed a package where reference classes is used a lot. When 
submitting it to CRAN i got the feedback that? i should not use <<- as 
that was "modifying the global environment". That was a misunderstanding 
that was sorted out but before it was, I started to investigate 
alternative ways to assign values to refclass fields. I can it this 
elsewhere since it does not belong.

Thanks,

Per

On 5/11/20 8:58 PM, Bert Gunter wrote:
> What does this have to do with package development? Seems more like a
> query for r-help.
>
> Cheers,
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
> On Mon, May 11, 2020 at 11:27 AM Per Nyfelt <per at alipsa.se> wrote:
>> Hi,
>>
>> I have been playing with alternative ways to assign values to fields in
>> reference classes.
>>
>> Besides the "standard" <<- there are two other ways that also "seems to
>> work". One is using .self$fieldName assigned with <- and the the other
>> one is field(fieldName, value).
>>
>> With regards to the ".self method" (example below): is this a "safe"
>> equivalent to <<- i.e. are these two ways identical in result and
>> possible "side effects"?
>>
>> StandardAssignment <- setRefClass(
>>     Class ="StandardAssignment",
>>     fields = list(
>>       m_attributes = "list"
>>     ),
>>     methods = list(
>>       setAttribute = function(name, value) {
>>         m_attributes[[as.character(name)]] <<- as.character(value)
>>         return(invisible(.self))
>>       },
>>       getAttribute = function(name) {
>>         m_attributes[[name]]
>>       }
>>     )
>> )
>>
>> s1 <- StandardAssignment$new()
>> s1$setAttribute("name", "foo")
>> s1$getAttribute("name")
>>
>> [1] "foo"
>>
>> SelfAssignment <- setRefClass(
>>     Class ="SelfAssignment",
>>     fields = list(
>>       m_attributes = "list"
>>     ),
>>     methods = list(
>>       setAttribute = function(name, value) {
>>         .self$m_attributes[[as.character(name)]] <- as.character(value)
>>         return(invisible(.self))
>>       },
>>       getAttribute = function(name) {
>>         m_attributes[[name]]
>>       }
>>     )
>> )
>>
>> s2 <- SelfAssignment$new()
>> s2$setAttribute("name", "foo")
>> s2$getAttribute("name")
>>
>> [1] "foo"
>>
>>
>> Best regards,
>>
>> Per
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @@pph|rezhou0404 @end|ng |rom gm@||@com  Mon May 11 23:09:06 2020
From: @@pph|rezhou0404 @end|ng |rom gm@||@com (Sapphire Zhou)
Date: Mon, 11 May 2020 16:09:06 -0500
Subject: [R-pkg-devel] A Note about Vignette
Message-ID: <1939C2FF-D16D-421D-BFA4-F866018759E3@gmail.com>

I obtained a note for my R package  from the feedback of CRAN

????????????????????????????
Package has a VignetteBuilder field but no prebuilt vignette index.
????????????????????????????

Actually, there is no vignettes in my package. What is meaning of this note?
How could I fix it?

From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Mon May 11 23:14:27 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Mon, 11 May 2020 21:14:27 +0000
Subject: [R-pkg-devel] A Note about Vignette
In-Reply-To: <1939C2FF-D16D-421D-BFA4-F866018759E3@gmail.com>
References: <1939C2FF-D16D-421D-BFA4-F866018759E3@gmail.com>
Message-ID: <8efb91ec7dbd406a88ce11b633dcdb3b@umanitoba.ca>

Good afternoon,


It probably means that in your DESCRIPTION file, you wrote something like

VignetteBuilder: knitr


If you don't have a vignette, you should remove that line.


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Sapphire Zhou <sapphirezhou0404 at gmail.com>
Sent: May 11, 2020 4:09:06 PM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] A Note about Vignette

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

I obtained a note for my R package  from the feedback of CRAN

????????????????????????????
Package has a VignetteBuilder field but no prebuilt vignette index.
????????????????????????????

Actually, there is no vignettes in my package. What is meaning of this note?
How could I fix it?
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon May 11 23:20:28 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 11 May 2020 14:20:28 -0700
Subject: [R-pkg-devel] A Note about Vignette
In-Reply-To: <1939C2FF-D16D-421D-BFA4-F866018759E3@gmail.com>
References: <1939C2FF-D16D-421D-BFA4-F866018759E3@gmail.com>
Message-ID: <CAGxFJbTibLdk-TrLxqjpzu2AQwn2n9LHWHdYmzmxsHUU9f+xkQ@mail.gmail.com>

You really need to read the 'Writing R Extensions" manual, in
particular the section on the DESCRIPTION file. You are asking basic
questions that are covered there.


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Mon, May 11, 2020 at 2:09 PM Sapphire Zhou
<sapphirezhou0404 at gmail.com> wrote:
>
> I obtained a note for my R package  from the feedback of CRAN
>
> ????????????????????????????
> Package has a VignetteBuilder field but no prebuilt vignette index.
> ????????????????????????????
>
> Actually, there is no vignettes in my package. What is meaning of this note?
> How could I fix it?
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m@e||e@@@|mon @end|ng |rom y@hoo@@e  Tue May 12 08:17:04 2020
From: m@e||e@@@|mon @end|ng |rom y@hoo@@e (=?UTF-8?Q?Ma=C3=ABlle_SALMON?=)
Date: Tue, 12 May 2020 06:17:04 +0000 (UTC)
Subject: [R-pkg-devel] Documentation for non-user-level objects
In-Reply-To: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>
References: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>
Message-ID: <1419256810.3366553.1589264224728@mail.yahoo.com>

I see you already got useful answers, but here is a further resource: I wrote a blog post about internal functions earlier this year <https://blog.r-hub.io/2019/12/12/internal-functions/>

Best wishes

Ma?lle.


Den s?ndag 10 maj 2020 23:32:00 CEST, Sapphire Zhou <sapphirezhou0404 at gmail.com> skrev: 





I met a problem when I uploaded the package to CRAN. There is a warning told me 
?All user-level objects in a package should have documentation entries.?

Actually, those functions are not user-level functions. How could I claim non-user-level functions in an R package.
Is there any idea to remove this warning.

Thanks!
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue May 12 08:55:14 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Tue, 12 May 2020 01:55:14 -0500
Subject: [R-pkg-devel] 
 [BULK] Re: [Rd] "not a valid win32 application" with
 rtools40-x86_65.exe on Windows 10
In-Reply-To: <07330765-1A84-43DE-BC03-D89A05DE35D8@R-project.org>
References: <48910d2a-c3f0-7a2a-b94a-4f7c2cc74a54@prodsyse.com>
 <CABFfbXtKWAuc0y61jV3WDpX52ksPJOzsaY=h+6rmOuMySWHZfw@mail.gmail.com>
 <bcf6e1e7-38f7-595c-63ca-d0106753aefc@prodsyse.com>
 <07330765-1A84-43DE-BC03-D89A05DE35D8@R-project.org>
Message-ID: <47500f33-4650-7040-139d-6831625a122e@effectivedefense.org>

Hi, Simon et al.


[changing to "R-package-devel, because I've heard complaints that this 
may not be appropriate for R-devel.]


 ????? I'm still having problems.? I found that I had Java twice in the 
path and deleted both versions (~\AdoptOpenJDK\jdk-11.0.6.10-hotspot\bin 
and ~Java\jre1.8.0_241). That seemed not to change anything as far as I 
can tell.


 ????? I have both directories for both "~Rtools" and "~rtools40", and 
the path includes "~rtools40\bin".? When running R4.0.0 within RStudio, 
"install.package('rJava', type='source', INSTALL_opts = 
'--merge-multiarch') complained, "WARNING:? Rtools is required ... but 
no version compatible ... was found.? Note that the following 
incompatible versions(s) ... were found:? - Rtools 3.5".? When I run r 
in a CMD prompt, I don't get that warning.? However, both complain,


 ????? warning in system("sh ./configure.win") : 'sh' not found


 ????? When I tried "install.packages('rJava')", it seemed to work OK 
(though I still got the complaint from R within RStudio that it could 
not find rtools40).


 ????? And my primary problem is unchanged:? "R CMD check 
Ecfun_0.2-4.tar.gz" ends with the following:


Error:? package or namespace load failed for 'Ecfun':
 ? .onLoad failed in loadNamespace() for 'rJava', details
 ?? call: inDL(x, as.logical(local), as.logical(now), ...)
 ?? error:? unable to load shared object 'c:/Program
Files/R/R-4.0.0/library/rJava/libs/i386/rJava.dll':
 ?? LoadLibrary failure: ^1 is not a valid win32 application


 ????? The same package on my Mac quits with a LaTeX error I have yet to 
figure out how to fix.


 ????? Suggestions?
 ????? Thanks,
 ????? Spencer Graves


00install.out:


* installing *source* package 'Ecfun' ...
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
*** arch - i386
Error: package or namespace load failed for 'Ecfun':
 ?.onLoad failed in loadNamespace() for 'rJava', details:
 ? call: inDL(x, as.logical(local), as.logical(now), ...)
 ? error: unable to load shared object 'C:/Program 
Files/R/R-4.0.0/library/rJava/libs/i386/rJava.dll':
 ? LoadLibrary failure:? %1 is not a valid Win32 application.

Error: loading failed
Execution halted
*** arch - x64
ERROR: loading failed for 'i386'
* removing 'C:/Users/spenc/Documents/R/Ecfun/Ecfun.Rcheck/Ecfun'


On 2020-05-02 02:20, Simon Urbanek wrote:
> Spencer,
>
> you shouldn't have anything on the PATH, the location of Java is taken from the registry so you only need t have a valid installation of Java. Better don't set PATH or JAVA_HOME as it will stop rJava from working if you get it wrong. The errors on Windows are confusing, the actual error is shown via GUI as pop-up, what they report in the console is not the real error.
>
> Re installation from source - it sooks like you either don't have Rtools40 or you didn't set PATH properly. If I recall the new Rtools40 no longer set the PATH (for whatever reason) so you have to do it by hand and the instructions it gives you are not working for the command shell.
>
> Cheers,
> Simon
>
>
>
>> On 1/05/2020, at 4:51 PM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
>>
>> Hi, Jeroen et al.:
>>
>>
>> On 2020-04-30 03:15, Jeroen Ooms wrote:
>>> On Thu, Apr 30, 2020 at 6:38 AM Spencer Graves
>>> <spencer.graves at prodsyse.com> wrote:
>>>> Hello, All:
>>>>
>>>>
>>>>         "00install.out" from "R CMD check Ecfun_0.2-4.tar.gz" includes:
>>>>
>>>>
>>>> Error:  package or namespace load failed for 'Ecfun':
>>>>    .onLoad failed in loadNamespace() for 'rJava', details
>>>>     call: inDL(x, as.logical(local), as.logical(now), ...)
>>>>     error:  unable to load shared object 'c:/Program
>>>> Files/R/R-4.0.0/library/rJava/libs/i386/rJava.dll':
>>>>     LoadLibrary failure: ^1 is not a valid win32 application
>>>>
>>> This is an error in loading the rJava package, so it is not related to
>>> rtools40, and probably inappropriate for this mailing list.
>>>
>>> As Simon suggested, you may have to install the 32-bit Java JDK. See
>>> also this faq: https://github.com/r-windows/docs/blob/master/faq.md#how-to-install-rjava-on-windows
>>
>>        In fact I had both 32- and 64-bit Java installed but only the 64-bit was in the path.  I added the 32-bit, but that did not fix the problem.  The last 2.5 lines in the section "How to install rJava on Windows?" to which you referred me reads:
>>
>>
>> to build rJava from source, you need the --merge-multiarch flag:
>>
>> install.packages('rJava', type = 'source', INSTALL_opts='--merge-multiarch')
>>
>>
>>        When I tried that, I got:
>>
>>
>> Warning in system("sh ./configure.win") : 'sh' not found
>>
>>
>> *** ON THE OTHER HAND:  The error message above says 'c:/Program
>> Files/R/R-4.0.0/library/rJava/libs/i386/rJava.dll':
>>     LoadLibrary failure: ^1 is not a valid win32 application
>>
>>
>>>>>> Is "rJava.dll" a valid win32 application?
>>
>>        Suggestions?
>>        Thanks,
>>        Spencer Graves
>>
>>
>> p.s.  A similar problem with rJava a month ago was fixed by installed 64-bit Java.  Now with the upgrade to R 4.0.0 and rtools40, this no longer works.
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>


From jeroenoom@ @end|ng |rom gm@||@com  Tue May 12 09:38:55 2020
From: jeroenoom@ @end|ng |rom gm@||@com (Jeroen Ooms)
Date: Tue, 12 May 2020 09:38:55 +0200
Subject: [R-pkg-devel] Is there an Rtools40 changelog?
In-Reply-To: <CADPubGRsQFfm6gXRttFi-xq3VaAVkxTDGLxWUMMFbz+-e1TQ+w@mail.gmail.com>
References: <CADPubGRsQFfm6gXRttFi-xq3VaAVkxTDGLxWUMMFbz+-e1TQ+w@mail.gmail.com>
Message-ID: <CABFfbXttj3zCfnh5kk9Uw2A3nvewpvp6GdSHGR-CFusUsR1pGA@mail.gmail.com>

On Sun, May 10, 2020 at 11:31 PM James Lamb <jaylamb20 at gmail.com> wrote:
>
> Hello,
>
> I am a maintainer on the LightGBM project, focused on that project's R
> package. The R package is not available on CRAN yet (we are working on it),
> so for now our users must build it from source.
>
> The package includes compilation of a C++ library, and we link to R.dll /
> R.so to use R-provided functions like Rprintf.
>
> With the release of R4.0 and Rtools40, we recently received reports from
> our users that they are unable to build our package on Windows systems with
> R 4.0 and Rtools 4.0 (https://github.com/microsoft/LightGBM/issues/3064).
>
> After some investigation, I've learned that the following changes in
> Rtools40 (relative to Rtools35) broke our installation process:
>
>    - *gendef.exe* was removed
>    - *mingw32-make.exe* was removed
>    - paths like "mingw_64/bin" were changed to "mingw64/bin"
>

Some utilities that were previously bundled with all rtools
installations can now be installed with the package manager.

To install gendef use:

     pacman -S mingw-w64-{i686,x86_64}-tools

To install mingw32-make.exe use:

      pacman -S mingw-w64-{i686,x86_64}-make

To install both of the at once you can use:

      pacman -S mingw-w64-{i686,x86_64}-{tools,make}

Note that it's often better to use 'make.exe' which is included with
all rtools installations instead of mingw32-make.exe.

These changes were a result of switching to an msys2 based toolchain.
The default rtools40 installer only includes the things needed to
build CRAN packages or base-R. Extra stuff such as system libraries,
debuggers, cmake, etc, are all optionally available via the package
manager.


From m@e||e@@@|mon @end|ng |rom y@hoo@@e  Tue May 12 10:01:07 2020
From: m@e||e@@@|mon @end|ng |rom y@hoo@@e (=?UTF-8?Q?Ma=C3=ABlle_SALMON?=)
Date: Tue, 12 May 2020 08:01:07 +0000 (UTC)
Subject: [R-pkg-devel] CensSpatial package error.
In-Reply-To: <445b71e3-86d6-49a9-9b55-ac3940d3daa5@email.android.com>
References: <CAC7JchBhET3EPdU8unDB_onvtmOQwVFwzD9aaG7GMODvBDkdrg@mail.gmail.com>
 <445b71e3-86d6-49a9-9b55-ac3940d3daa5@email.android.com>
Message-ID: <784735587.3457870.1589270467709@mail.yahoo.com>

I just wanted to add that <https://developer.r-project.org/Blog/public/2019/11/09/when-you-think-class.-think-again/index.html> is an interesting read on the topic. :-)



Den l?rdag 2 maj 2020 18:27:29 CEST, Max Turgeon <max.turgeon at umanitoba.ca> skrev: 





Hi Jos?,

The error message is pretty clear:

Error in if (class(V.inv) == "try-error") return(Inf) :
? the condition has length > 1

Instead of testing for equality of the class, you should use the function "inherits". Then, even if "class(V.inv)" has length greater than one, your condition in the if clause will be exactly TRUE or FALSE.

Best,

Max Turgeon

On May 2, 2020 10:07 AM, Jos? Alejandro Ordo?ez <ordonezjosealejandro at gmail.com> wrote:
********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

Good evening,

My name is Jose and I'm the mantainer of the CensSpatial package. This
package was available as public but it was discharged because a problem
with the geoR orphan package.
That situation was solved and now I'm trying to resubmit the package. The
problem is that when I try to submit it, it does not pass the automatic
incoming checks,* even when I tested it using the function check available
in R studio without errors.*
Apparently is a problem with the OS Linux and Debian but I couldn't
identify it yet. I also tested it using the package rhub and ran
CensSpatial with different OS without results.

I'm provinding below the link to the source package and the error messages,
hoping to get some help from you.

https://www.dropbox.com/sh/gp5iwubkgbv9r8s/AADvJg-GGHKzoMU_PHNWdcYea?dl=0
<https://www.dropbox.com/sh/gp5iwubkgbv9r8s/AADvJg-GGHKzoMU_PHNWdcYea?dl=0&fbclid=IwAR1xeC1ArV-7IGBhatSil7u_aCjZbFoj3BDc_TD2fVq_pwGl5sdH8vgVuKQ>


In the link below, I cannot recognize what the error is. SOS!

https://win-builder.r-project.org/incoming_pretest/CensSpatial_2.5_20200428_224633/Debian/00check.log
<https://win-builder.r-project.org/incoming_pretest/CensSpatial_2.5_20200428_224633/Debian/00check.log?fbclid=IwAR2vaWkuHuyURbZH1WrUREFpmy4uO_XbXQd6leglq4CPPnn8HZgggm-1xMs>


Thanks for the attention.


Att,
Jos? Alejandro Ordo?ez.
Ph.D Student
UNICAMP.


<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
Libre
de virus. www.avast.com<http://www.avast.com>
<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
<#m_2258293037509368237_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>

? ? ? ? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


??? [[alternative HTML version deleted]]
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m@e||e@@@|mon @end|ng |rom y@hoo@@e  Tue May 12 10:24:20 2020
From: m@e||e@@@|mon @end|ng |rom y@hoo@@e (=?UTF-8?Q?Ma=C3=ABlle_SALMON?=)
Date: Tue, 12 May 2020 08:24:20 +0000 (UTC)
Subject: [R-pkg-devel] Documenting raw data
In-Reply-To: <20200423210616.1455027CD@hypatia.math.ethz.ch>
References: <20200423210616.1455027CD@hypatia.math.ethz.ch>
Message-ID: <156121078.3485788.1589271860807@mail.yahoo.com>

Hello,

I don't think you have to (and shouldn't?) document raw data. However, you can use it in examples/tests/etc. using the system.file() command you mention.

But maybe you want to export the data? In that case it should be under data/.

This chapter of the R packages book might be useful <https://r-pkgs.org/data.html> (as well as <https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Data-in-packages>).

Ma?lle.


Den torsdag 23 april 2020 23:06:26 CEST, Cantin, Alan (NRCan/RNCan) <alan.cantin at canada.ca> skrev: 





Hi Folks,

Looking for some help documenting my raw data (data in inst/extdata).

Is the correct doctype "data"?

The usage of loading this type of data is system.file("extdata", nameoffile, package="nameofpackage")

Is this the correct string to put in the \usage section?? I have tried this, but get errors such as:

Functions or methods with usage in documentation object 'nameoffile' but not in code:
? ? 'system.file'


Has anyone done this recently and have an example to see where I'm going wrong?

This check seems to be new as in the past I simply had lazydata set to true and it passed tests.

Thanks for any help.

Cheers,

Alan Cantin



??? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @|@n@c@nt|n @end|ng |rom c@n@d@@c@  Tue May 12 14:43:22 2020
From: @|@n@c@nt|n @end|ng |rom c@n@d@@c@ (Cantin, Alan (NRCan/RNCan))
Date: Tue, 12 May 2020 12:43:22 +0000
Subject: [R-pkg-devel] Documenting raw data
In-Reply-To: <156121078.3485788.1589271860807@mail.yahoo.com>
References: <20200423210616.1455027CD@hypatia.math.ethz.ch>,
 <156121078.3485788.1589271860807@mail.yahoo.com>
Message-ID: <2832563f02cc45e2946594133baa7bf6@PELEPCDEXC027.birch.int.bell.ca>

Hello,

Yes thanks, I was able to figure out that I can (and should) remove documentation for these files. This solved my issue and thank you for taking the time to respond.

Cheers,


Alan Cantin



-------- Original message --------
From: Ma?lle SALMON <maelle.salmon at yahoo.se>
Date: 2020-05-12 4:24 a.m. (GMT-05:00)
To: r-package-devel at r-project.org, "Cantin, Alan (NRCan/RNCan)" <alan.cantin at canada.ca>
Subject: Re: [R-pkg-devel] Documenting raw data

Hello,

I don't think you have to (and shouldn't?) document raw data. However, you can use it in examples/tests/etc. using the system.file() command you mention.

But maybe you want to export the data? In that case it should be under data/.

This chapter of the R packages book might be useful <https://r-pkgs.org/data.html> (as well as <https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Data-in-packages>).

Ma?lle.


Den torsdag 23 april 2020 23:06:26 CEST, Cantin, Alan (NRCan/RNCan) <alan.cantin at canada.ca> skrev:





Hi Folks,

Looking for some help documenting my raw data (data in inst/extdata).

Is the correct doctype "data"?

The usage of loading this type of data is system.file("extdata", nameoffile, package="nameofpackage")

Is this the correct string to put in the \usage section?  I have tried this, but get errors such as:

Functions or methods with usage in documentation object 'nameoffile' but not in code:
    'system.file'


Has anyone done this recently and have an example to see where I'm going wrong?

This check seems to be new as in the past I simply had lazydata set to true and it passed tests.

Thanks for any help.

Cheers,

Alan Cantin



    [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue May 12 15:38:19 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 12 May 2020 15:38:19 +0200
Subject: [R-pkg-devel] 
 [BULK] Re: [Rd] "not a valid win32 application" with
 rtools40-x86_65.exe on Windows 10
In-Reply-To: <47500f33-4650-7040-139d-6831625a122e@effectivedefense.org>
References: <48910d2a-c3f0-7a2a-b94a-4f7c2cc74a54@prodsyse.com>
 <CABFfbXtKWAuc0y61jV3WDpX52ksPJOzsaY=h+6rmOuMySWHZfw@mail.gmail.com>
 <bcf6e1e7-38f7-595c-63ca-d0106753aefc@prodsyse.com>
 <07330765-1A84-43DE-BC03-D89A05DE35D8@R-project.org>
 <47500f33-4650-7040-139d-6831625a122e@effectivedefense.org>
Message-ID: <3ba7ec5e-25b7-7fde-d148-dea8e15ee906@statistik.tu-dortmund.de>

Spencer, I guess you have 64 bit components on the path before the new 
toolchain is found.

Also  check at first if you can load rJava both under 32-bit RGui and 
64-bit RGui.

If this does not help: Can you send me privately the full output (i.e. 
including check.log and also install.out file)?

Best,
Uwe






On 12.05.2020 08:55, Spencer Graves wrote:
> Hi, Simon et al.
> 
> 
> [changing to "R-package-devel, because I've heard complaints that this 
> may not be appropriate for R-devel.]
> 
> 
>  ????? I'm still having problems.? I found that I had Java twice in the 
> path and deleted both versions (~\AdoptOpenJDK\jdk-11.0.6.10-hotspot\bin 
> and ~Java\jre1.8.0_241). That seemed not to change anything as far as I 
> can tell.
> 
> 
>  ????? I have both directories for both "~Rtools" and "~rtools40", and 
> the path includes "~rtools40\bin".? When running R4.0.0 within RStudio, 
> "install.package('rJava', type='source', INSTALL_opts = 
> '--merge-multiarch') complained, "WARNING:? Rtools is required ... but 
> no version compatible ... was found.? Note that the following 
> incompatible versions(s) ... were found:? - Rtools 3.5".? When I run r 
> in a CMD prompt, I don't get that warning.? However, both complain,
> 
> 
>  ????? warning in system("sh ./configure.win") : 'sh' not found
> 
> 
>  ????? When I tried "install.packages('rJava')", it seemed to work OK 
> (though I still got the complaint from R within RStudio that it could 
> not find rtools40).
> 
> 
>  ????? And my primary problem is unchanged:? "R CMD check 
> Ecfun_0.2-4.tar.gz" ends with the following:
> 
> 
> Error:? package or namespace load failed for 'Ecfun':
>  ? .onLoad failed in loadNamespace() for 'rJava', details
>  ?? call: inDL(x, as.logical(local), as.logical(now), ...)
>  ?? error:? unable to load shared object 'c:/Program
> Files/R/R-4.0.0/library/rJava/libs/i386/rJava.dll':
>  ?? LoadLibrary failure: ^1 is not a valid win32 application
> 
> 
>  ????? The same package on my Mac quits with a LaTeX error I have yet to 
> figure out how to fix.
> 
> 
>  ????? Suggestions?
>  ????? Thanks,
>  ????? Spencer Graves
> 
> 
> 00install.out:
> 
> 
> * installing *source* package 'Ecfun' ...
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> ** help
> *** installing help indices
> ** building package indices
> ** installing vignettes
> ** testing if installed package can be loaded from temporary location
> *** arch - i386
> Error: package or namespace load failed for 'Ecfun':
>  ?.onLoad failed in loadNamespace() for 'rJava', details:
>  ? call: inDL(x, as.logical(local), as.logical(now), ...)
>  ? error: unable to load shared object 'C:/Program 
> Files/R/R-4.0.0/library/rJava/libs/i386/rJava.dll':
>  ? LoadLibrary failure:? %1 is not a valid Win32 application.
> 
> Error: loading failed
> Execution halted
> *** arch - x64
> ERROR: loading failed for 'i386'
> * removing 'C:/Users/spenc/Documents/R/Ecfun/Ecfun.Rcheck/Ecfun'
> 
> 
> On 2020-05-02 02:20, Simon Urbanek wrote:
>> Spencer,
>>
>> you shouldn't have anything on the PATH, the location of Java is taken 
>> from the registry so you only need t have a valid installation of 
>> Java. Better don't set PATH or JAVA_HOME as it will stop rJava from 
>> working if you get it wrong. The errors on Windows are confusing, the 
>> actual error is shown via GUI as pop-up, what they report in the 
>> console is not the real error.
>>
>> Re installation from source - it sooks like you either don't have 
>> Rtools40 or you didn't set PATH properly. If I recall the new Rtools40 
>> no longer set the PATH (for whatever reason) so you have to do it by 
>> hand and the instructions it gives you are not working for the command 
>> shell.
>>
>> Cheers,
>> Simon
>>
>>
>>
>>> On 1/05/2020, at 4:51 PM, Spencer Graves 
>>> <spencer.graves at prodsyse.com> wrote:
>>>
>>> Hi, Jeroen et al.:
>>>
>>>
>>> On 2020-04-30 03:15, Jeroen Ooms wrote:
>>>> On Thu, Apr 30, 2020 at 6:38 AM Spencer Graves
>>>> <spencer.graves at prodsyse.com> wrote:
>>>>> Hello, All:
>>>>>
>>>>>
>>>>> ??????? "00install.out" from "R CMD check Ecfun_0.2-4.tar.gz" 
>>>>> includes:
>>>>>
>>>>>
>>>>> Error:? package or namespace load failed for 'Ecfun':
>>>>> ?? .onLoad failed in loadNamespace() for 'rJava', details
>>>>> ??? call: inDL(x, as.logical(local), as.logical(now), ...)
>>>>> ??? error:? unable to load shared object 'c:/Program
>>>>> Files/R/R-4.0.0/library/rJava/libs/i386/rJava.dll':
>>>>> ??? LoadLibrary failure: ^1 is not a valid win32 application
>>>>>
>>>> This is an error in loading the rJava package, so it is not related to
>>>> rtools40, and probably inappropriate for this mailing list.
>>>>
>>>> As Simon suggested, you may have to install the 32-bit Java JDK. See
>>>> also this faq: 
>>>> https://github.com/r-windows/docs/blob/master/faq.md#how-to-install-rjava-on-windows 
>>>>
>>>
>>> ?????? In fact I had both 32- and 64-bit Java installed but only the 
>>> 64-bit was in the path.? I added the 32-bit, but that did not fix the 
>>> problem.? The last 2.5 lines in the section "How to install rJava on 
>>> Windows?" to which you referred me reads:
>>>
>>>
>>> to build rJava from source, you need the --merge-multiarch flag:
>>>
>>> install.packages('rJava', type = 'source', 
>>> INSTALL_opts='--merge-multiarch')
>>>
>>>
>>> ?????? When I tried that, I got:
>>>
>>>
>>> Warning in system("sh ./configure.win") : 'sh' not found
>>>
>>>
>>> *** ON THE OTHER HAND:? The error message above says 'c:/Program
>>> Files/R/R-4.0.0/library/rJava/libs/i386/rJava.dll':
>>> ??? LoadLibrary failure: ^1 is not a valid win32 application
>>>
>>>
>>>>>>> Is "rJava.dll" a valid win32 application?
>>>
>>> ?????? Suggestions?
>>> ?????? Thanks,
>>> ?????? Spencer Graves
>>>
>>>
>>> p.s.? A similar problem with rJava a month ago was fixed by installed 
>>> 64-bit Java.? Now with the upgrade to R 4.0.0 and rtools40, this no 
>>> longer works.
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From p@c|orek @end|ng |rom @t@t@berke|ey@edu  Wed May 13 03:00:42 2020
From: p@c|orek @end|ng |rom @t@t@berke|ey@edu (Chris Paciorek)
Date: Tue, 12 May 2020 18:00:42 -0700
Subject: [R-pkg-devel] clang11 CRAN check and use of Eigen
Message-ID: <CAG=M9LpvRWJA3=0mDyFbQw5TNAjcE5=RDAZnk4L2YTw9WxrbGw@mail.gmail.com>

As of some point recently (at least since January) our package
(nimble) is being flagged by CRAN's clang11 check. The check reports
various errors when compiling one of our C++ files that makes use of
code from the Eigen C++ package, which we include with our package.
Here's the report from CRAN:
https://www.stats.ox.ac.uk/pub/bdr/clang11/nimble.log

Similar errors are occurring for a few other packages on CRAN (some
that directly include Eigen and others that do so via RcppEigen).

1) Does anyone happen to know why this problem with Eigen is occurring
with clang11?

2) Given clang11 is not yet released, perhaps CRAN is simply flagging
this for the future. I'm hoping we can still release our next version
without addressing this, and I see that some of the other packages
this affects have released recently (e.g., prophet) seemingly without
addressing the issue. Does anyone know CRAN's policy in this regard?

thanks,
-Chris

Adjunct Professor, Statistical Computing Consultant
Department of Statistics
UC Berkeley


From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Wed May 13 04:53:09 2020
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Tue, 12 May 2020 19:53:09 -0700
Subject: [R-pkg-devel] clang11 CRAN check and use of Eigen
In-Reply-To: <CAG=M9LpvRWJA3=0mDyFbQw5TNAjcE5=RDAZnk4L2YTw9WxrbGw@mail.gmail.com>
References: <CAG=M9LpvRWJA3=0mDyFbQw5TNAjcE5=RDAZnk4L2YTw9WxrbGw@mail.gmail.com>
Message-ID: <CAJqTW47n=fVsuwevgfD-d0=xCrU+u9UmeeUDaDWcXw57U_MGmw@mail.gmail.com>

The errors are all around std::ostream.  My guess is that Eigen is missing
an #include.  The missing include was probably included transitively in
earlier versions of clang, but clang11 cleaned up some files that didn't
need that include themselves, and the downstream file got broken as a
result.

On Tue, May 12, 2020 at 6:51 PM Chris Paciorek <paciorek at stat.berkeley.edu>
wrote:

> As of some point recently (at least since January) our package
> (nimble) is being flagged by CRAN's clang11 check. The check reports
> various errors when compiling one of our C++ files that makes use of
> code from the Eigen C++ package, which we include with our package.
> Here's the report from CRAN:
> https://www.stats.ox.ac.uk/pub/bdr/clang11/nimble.log
>
> Similar errors are occurring for a few other packages on CRAN (some
> that directly include Eigen and others that do so via RcppEigen).
>
> 1) Does anyone happen to know why this problem with Eigen is occurring
> with clang11?
>
> 2) Given clang11 is not yet released, perhaps CRAN is simply flagging
> this for the future. I'm hoping we can still release our next version
> without addressing this, and I see that some of the other packages
> this affects have released recently (e.g., prophet) seemingly without
> addressing the issue. Does anyone know CRAN's policy in this regard?
>
> thanks,
> -Chris
>
> Adjunct Professor, Statistical Computing Consultant
> Department of Statistics
> UC Berkeley
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From t|@goo||voto @end|ng |rom gm@||@com  Wed May 13 08:55:02 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 13 May 2020 03:55:02 -0300
Subject: [R-pkg-devel] MathJax for Rd files
Message-ID: <000001d628f3$6eccfc60$4c66f520$@gmail.com>

Dear all,

I'm not sure if this is the correct place to make this question, but here I
am.

I'm trying to use MathJax for html help files in my package metan
(https://cran.r-project.org/package=metan)

I have success with the following approach:

 

Including the following call

 

#'\if{html}{\out{

#'<script id="MathJax-script" async

#'src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full.js">

#'  </script>

#'}} 

 

And then typing the equations I need. A simple example bellow

 

#' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}

 

Is there any way to put "tex-chtml-full.js" locally so that everyone that
has my package installed see the equations rendered properly even offline?

Thanks in advance

Olivoto

 


	[[alternative HTML version deleted]]


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Wed May 13 09:39:51 2020
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Wed, 13 May 2020 07:39:51 +0000
Subject: [R-pkg-devel] MathJax for Rd files
In-Reply-To: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
Message-ID: <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>

Dear Olivoto,

There is a package now for this purpose:

https://cran.r-project.org/package=mathjaxr
https://github.com/wviechtb/mathjaxr

Best,
Wolfgang

>-----Original Message-----
>From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On
>Behalf Of Tiago Olivoto
>Sent: Wednesday, 13 May, 2020 8:55
>To: r-package-devel at r-project.org
>Subject: [R-pkg-devel] MathJax for Rd files
>
>Dear all,
>
>I'm not sure if this is the correct place to make this question, but here I
>am.
>
>I'm trying to use MathJax for html help files in my package metan
>(https://cran.r-project.org/package=metan)
>
>I have success with the following approach:
>
>Including the following call
>
>#'\if{html}{\out{
>
>#'<script id="MathJax-script" async
>
>#'src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full.js">
>
>#'  </script>
>
>#'}}
>
>And then typing the equations I need. A simple example bellow
>
>#' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
>
>Is there any way to put "tex-chtml-full.js" locally so that everyone that
>has my package installed see the equations rendered properly even offline?
>
>Thanks in advance
>
>Olivoto


From edd @end|ng |rom deb|@n@org  Wed May 13 14:33:08 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 13 May 2020 07:33:08 -0500
Subject: [R-pkg-devel] clang11 CRAN check and use of Eigen
In-Reply-To: <CAG=M9LpvRWJA3=0mDyFbQw5TNAjcE5=RDAZnk4L2YTw9WxrbGw@mail.gmail.com>
References: <CAG=M9LpvRWJA3=0mDyFbQw5TNAjcE5=RDAZnk4L2YTw9WxrbGw@mail.gmail.com>
Message-ID: <24251.59652.899923.918772@rob.eddelbuettel.com>


Hi Chris,

On 12 May 2020 at 18:00, Chris Paciorek wrote:
| 1) Does anyone happen to know why this problem with Eigen is occurring
| with clang11?

Compilers change. Languages changes. Requirements change.

Many of us have been there (e.g. witness the "excitement" about gcc-10 last
December enforcing C level extern to be defined only once forcing a lot of
packages to have to make changes -- i.e. happens with C code too).
 
| 2) Given clang11 is not yet released, perhaps CRAN is simply flagging
| this for the future. I'm hoping we can still release our next version
| without addressing this, and I see that some of the other packages

I doubt it. CRAN, and one tireless operator in particular, are relentless in
chasing upcoming changes _early_ to give you time.

That, one comes to realize after a while, really is a feature.

The nag emails are painful each time, but this is one of the many small
technical details CRAN has gotten right, enforces, and thus ensures quality.

| this affects have released recently (e.g., prophet) seemingly without
| addressing the issue. Does anyone know CRAN's policy in this regard?

Yes. They will likely ask you to update your code "or else".

[ Now, with large (external) code bases this is also royal PITA. I happen to be
the maintainer of BH and RcppEigen, and both can create an unbelievable long
and annoying list of compiler warnings. If it were up to me, I'd suppress
them.  But my opinion doesn't matter, so the warning are there. ]

CRAN built the sandbox. A nice one, actually. And they still extend it.  We
just get to play in it.

So in short I would try to adjust the package.

Cheers,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From t|@goo||voto @end|ng |rom gm@||@com  Wed May 13 16:19:39 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 13 May 2020 11:19:39 -0300
Subject: [R-pkg-devel] RES:  MathJax for Rd files
In-Reply-To: <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
Message-ID: <001001d62931$8b703010$a2509030$@gmail.com>

Dear Wolfgang,
Thank you so much for the awesome package
I've installed mathjaxr and it worked.
I have some more questions, with a short example bellow
I created an equation in my mgidi.R file as follows

#' \loadmathjax
#' \mjsdeqn{MGIDI_i = \sum\limits_{j = 1}^f}

And then I ran devtools::document()
The mgidi.Rd contains

\loadmathjax
\mjsdeqn{MGIDI_i = \sum\limits_{j = 1}^f}

But when I try to preview the current document as HTML, the equation is not
rendered and the help page shows
\loadmathjax \mjsdeqnMGIDI_i = \sum\limits_j = 1^f
The equation is only rendered after I install my package locally with
devtools::install(). Is this an expected behavior?

Another question is regarding more complex formulae.
I tried using
#' \loadmathjax
#' \mjsdeqn{MGID{I_i} = {\left[ {\sum\limits_{j = 1}^f {{{\left( {{F_{ij}} -
{F_j}} \right)}^2}} } \right]^{0.5}}}

Even after installing the package locally the equation is not rendered in
the html help page, which shows the tex command. 
I tested the same equation with https://www.mathjax.org/#demo and it seems
to be ok.
Have I missed anything or used any code not supported by mathjaxr?
Thanks in advance
Olivoto

-----Mensagem original-----
De: Viechtbauer, Wolfgang (SP)
<wolfgang.viechtbauer at maastrichtuniversity.nl> 
Enviada em: quarta-feira, 13 de maio de 2020 04:40
Para: tiagoolivoto at gmail.com; r-package-devel at r-project.org
Assunto: RE: [R-pkg-devel] MathJax for Rd files

Dear Olivoto,

There is a package now for this purpose:

https://cran.r-project.org/package=mathjaxr
https://github.com/wviechtb/mathjaxr

Best,
Wolfgang

>-----Original Message-----
>From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On 
>Behalf Of Tiago Olivoto
>Sent: Wednesday, 13 May, 2020 8:55
>To: r-package-devel at r-project.org
>Subject: [R-pkg-devel] MathJax for Rd files
>
>Dear all,
>
>I'm not sure if this is the correct place to make this question, but 
>here I am.
>
>I'm trying to use MathJax for html help files in my package metan
>(https://cran.r-project.org/package=metan)
>
>I have success with the following approach:
>
>Including the following call
>
>#'\if{html}{\out{
>
>#'<script id="MathJax-script" async
>
>#'src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full.js
>">
>
>#'  </script>
>
>#'}}
>
>And then typing the equations I need. A simple example bellow
>
>#' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
>
>Is there any way to put "tex-chtml-full.js" locally so that everyone 
>that has my package installed see the equations rendered properly even
offline?
>
>Thanks in advance
>
>Olivoto


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Wed May 13 16:53:42 2020
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Wed, 13 May 2020 14:53:42 +0000
Subject: [R-pkg-devel] MathJax for Rd files
In-Reply-To: <001001d62931$8b703010$a2509030$@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
Message-ID: <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>

Seems like you are using roxygen2. I have little experience with that, as all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).

But what specifically do you mean by "when I try to preview the current document as HTML"? Is this some particular functionality of roxygen2 / devtools / RStudio? Or do you simply mean using tools::Rd2HTML()? Then you will have to use permissive=TRUE so that the macros from mathjaxr (which will not be recognized by default by parse_Rd()) are just passed through as text. Or you could try adjusting the 'macros' argument, maybe in combination with loadPkgRdMacros(), to specify that the mathjaxr macros should be loaded. See help(Rd2HTML, package="tools") and help(parse_Rd, package="tools") for details.

But if I want to see the HTML help file, I just install and load the package and call up the help file on some function. That works for sure.

As for the more complex equation - it includes a lot of curly braces. See the note I added recently to the 'devel' version about this:

https://github.com/wviechtb/mathjaxr#issues

Best,
Wolfgang

>-----Original Message-----
>From: Tiago Olivoto [mailto:tiagoolivoto at gmail.com]
>Sent: Wednesday, 13 May, 2020 16:20
>To: Viechtbauer, Wolfgang (SP); r-package-devel at r-project.org
>Subject: RES: [R-pkg-devel] MathJax for Rd files
>
>Dear Wolfgang,
>Thank you so much for the awesome package
>I've installed mathjaxr and it worked.
>I have some more questions, with a short example bellow
>I created an equation in my mgidi.R file as follows
>
>#' \loadmathjax
>#' \mjsdeqn{MGIDI_i = \sum\limits_{j = 1}^f}
>
>And then I ran devtools::document()
>The mgidi.Rd contains
>
>\loadmathjax
>\mjsdeqn{MGIDI_i = \sum\limits_{j = 1}^f}
>
>But when I try to preview the current document as HTML, the equation is not
>rendered and the help page shows
>\loadmathjax \mjsdeqnMGIDI_i = \sum\limits_j = 1^f
>The equation is only rendered after I install my package locally with
>devtools::install(). Is this an expected behavior?
>
>Another question is regarding more complex formulae.
>I tried using
>#' \loadmathjax
>#' \mjsdeqn{MGID{I_i} = {\left[ {\sum\limits_{j = 1}^f {{{\left( {{F_{ij}} -
>{F_j}} \right)}^2}} } \right]^{0.5}}}
>
>Even after installing the package locally the equation is not rendered in
>the html help page, which shows the tex command.
>I tested the same equation with https://www.mathjax.org/#demo and it seems
>to be ok.
>Have I missed anything or used any code not supported by mathjaxr?
>Thanks in advance
>Olivoto
>
>-----Mensagem original-----
>De: Viechtbauer, Wolfgang (SP)
><wolfgang.viechtbauer at maastrichtuniversity.nl>
>Enviada em: quarta-feira, 13 de maio de 2020 04:40
>Para: tiagoolivoto at gmail.com; r-package-devel at r-project.org
>Assunto: RE: [R-pkg-devel] MathJax for Rd files
>
>Dear Olivoto,
>
>There is a package now for this purpose:
>
>https://cran.r-project.org/package=mathjaxr
>https://github.com/wviechtb/mathjaxr
>
>Best,
>Wolfgang
>
>>-----Original Message-----
>>From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On
>>Behalf Of Tiago Olivoto
>>Sent: Wednesday, 13 May, 2020 8:55
>>To: r-package-devel at r-project.org
>>Subject: [R-pkg-devel] MathJax for Rd files
>>
>>Dear all,
>>
>>I'm not sure if this is the correct place to make this question, but
>>here I am.
>>
>>I'm trying to use MathJax for html help files in my package metan
>>(https://cran.r-project.org/package=metan)
>>
>>I have success with the following approach:
>>
>>Including the following call
>>
>>#'\if{html}{\out{
>>
>>#'<script id="MathJax-script" async
>>
>>#'src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full.js
>>">
>>
>>#'  </script>
>>
>>#'}}
>>
>>And then typing the equations I need. A simple example bellow
>>
>>#' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
>>
>>Is there any way to put "tex-chtml-full.js" locally so that everyone
>>that has my package installed see the equations rendered properly even
>offline?
>>
>>Thanks in advance
>>
>>Olivoto


From he|mut@@chuetz @end|ng |rom beb@c@@t  Wed May 13 17:00:47 2020
From: he|mut@@chuetz @end|ng |rom beb@c@@t (=?UTF-8?Q?Helmut_Sch=c3=bctz?=)
Date: Wed, 13 May 2020 17:00:47 +0200
Subject: [R-pkg-devel] MathJax for Rd files
In-Reply-To: <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
Message-ID: <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>

Hi Wolfgang,

Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
> Seems like you are using roxygen2. I have little experience with that, as all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).

As are mine. ;-)
In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get it 
only (in the HTML man-page and the PDF) if I build the package.

Helmut

-- 
Ing. Helmut Sch?tz
BEBAC?? Consultancy Services for
Bioequivalence and Bioavailability Studies
Neubaugasse 36/11
1070 Vienna, Austria
E helmut.schuetz at bebac.at
W https://bebac.at/
F https://forum.bebac.at/


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Wed May 13 18:13:52 2020
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Wed, 13 May 2020 16:13:52 +0000
Subject: [R-pkg-devel] MathJax for Rd files
In-Reply-To: <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
Message-ID: <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>

Thanks for the info! Can confirm now that I tried this (I don't usually use RStudio). That's an RStudio issue then. My guess is that 'Preview' uses tools::Rd2HTML() and that indeed won't automatically understand macros coming from mathjaxr (or any add-on package for that matter). This would be an issue to raise with the RStudio folks then.

But once a package is installed, the equations are nicely rendered also in the RStudio help browser, so that part works.

Best,
Wolfgang

>-----Original Message-----
>From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>Sent: Wednesday, 13 May, 2020 17:01
>To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com; r-package-devel at r-
>project.org
>Subject: Re: [R-pkg-devel] MathJax for Rd files
>
>Hi Wolfgang,
>
>Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>> Seems like you are using roxygen2. I have little experience with that, as
>all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>
>As are mine. ;-)
>In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get it
>only (in the HTML man-page and the PDF) if I build the package.
>
>Helmut
>
>--
>Ing. Helmut Sch?tz
>BEBAC?? Consultancy Services for
>Bioequivalence and Bioavailability Studies
>Neubaugasse 36/11
>1070 Vienna, Austria
>E helmut.schuetz at bebac.at
>W https://bebac.at/
>F https://forum.bebac.at/

From t|@goo||voto @end|ng |rom gm@||@com  Wed May 13 18:35:33 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 13 May 2020 13:35:33 -0300
Subject: [R-pkg-devel] RES:  MathJax for Rd files
In-Reply-To: <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
Message-ID: <000001d62944$888b16e0$99a144a0$@gmail.com>

Thanks, Wolfgang and Helmut for the explanations.
When I was trying to use

#'\if{html}{\out{'<script id="MathJax-script" async
#''src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full.js
#'</script> }}
#'
#'And then typing
#' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
My mgidi.Rd file was produced with devtools::document();
then, I just used ?mgidi, and the html page was rendered nicely.

If I could do the same with mathjaxr, It would be nice, because I wouldn't need to install the package to see if the equations are as I expect
Anyway, mathjaxr is a very useful package.
Congratulations on the efforts for developing it.

Best
Olivoto

-----Mensagem original-----
De: Viechtbauer, Wolfgang (SP) <wolfgang.viechtbauer at maastrichtuniversity.nl> 
Enviada em: quarta-feira, 13 de maio de 2020 13:14
Para: Helmut Sch?tz <helmut.schuetz at bebac.at>; tiagoolivoto at gmail.com; r-package-devel at r-project.org
Assunto: RE: [R-pkg-devel] MathJax for Rd files

Thanks for the info! Can confirm now that I tried this (I don't usually use RStudio). That's an RStudio issue then. My guess is that 'Preview' uses tools::Rd2HTML() and that indeed won't automatically understand macros coming from mathjaxr (or any add-on package for that matter). This would be an issue to raise with the RStudio folks then.

But once a package is installed, the equations are nicely rendered also in the RStudio help browser, so that part works.

Best,
Wolfgang

>-----Original Message-----
>From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>Sent: Wednesday, 13 May, 2020 17:01
>To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com; 
>r-package-devel at r- project.org
>Subject: Re: [R-pkg-devel] MathJax for Rd files
>
>Hi Wolfgang,
>
>Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>> Seems like you are using roxygen2. I have little experience with 
>> that, as
>all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>
>As are mine. ;-)
>In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get it 
>only (in the HTML man-page and the PDF) if I build the package.
>
>Helmut
>
>--
>Ing. Helmut Sch?tz
>BEBAC ? Consultancy Services for
>Bioequivalence and Bioavailability Studies Neubaugasse 36/11
>1070 Vienna, Austria
>E helmut.schuetz at bebac.at
>W https://bebac.at/
>F https://forum.bebac.at/


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed May 13 19:30:15 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 13 May 2020 13:30:15 -0400
Subject: [R-pkg-devel] RES: MathJax for Rd files
In-Reply-To: <000001d62944$888b16e0$99a144a0$@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <000001d62944$888b16e0$99a144a0$@gmail.com>
Message-ID: <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>

On 13/05/2020 12:35 p.m., Tiago Olivoto wrote:
> Thanks, Wolfgang and Helmut for the explanations.
> When I was trying to use
> 
> #'\if{html}{\out{'<script id="MathJax-script" async
> #''src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full.js
> #'</script> }}
> #'
> #'And then typing
> #' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
> My mgidi.Rd file was produced with devtools::document();
> then, I just used ?mgidi, and the html page was rendered nicely.
> 
> If I could do the same with mathjaxr, It would be nice, because I wouldn't need to install the package to see if the equations are as I expect
> Anyway, mathjaxr is a very useful package.
> Congratulations on the efforts for developing it.

Sounds like it's a devtools issue.  I don't know how they are simulating 
the install, but it needs to say to use the mathjaxr macros when 
converting the Rd pages.

Duncan Murdoch

> 
> Best
> Olivoto
> 
> -----Mensagem original-----
> De: Viechtbauer, Wolfgang (SP) <wolfgang.viechtbauer at maastrichtuniversity.nl>
> Enviada em: quarta-feira, 13 de maio de 2020 13:14
> Para: Helmut Sch?tz <helmut.schuetz at bebac.at>; tiagoolivoto at gmail.com; r-package-devel at r-project.org
> Assunto: RE: [R-pkg-devel] MathJax for Rd files
> 
> Thanks for the info! Can confirm now that I tried this (I don't usually use RStudio). That's an RStudio issue then. My guess is that 'Preview' uses tools::Rd2HTML() and that indeed won't automatically understand macros coming from mathjaxr (or any add-on package for that matter). This would be an issue to raise with the RStudio folks then.
> 
> But once a package is installed, the equations are nicely rendered also in the RStudio help browser, so that part works.
> 
> Best,
> Wolfgang
> 
>> -----Original Message-----
>> From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>> Sent: Wednesday, 13 May, 2020 17:01
>> To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com;
>> r-package-devel at r- project.org
>> Subject: Re: [R-pkg-devel] MathJax for Rd files
>>
>> Hi Wolfgang,
>>
>> Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>>> Seems like you are using roxygen2. I have little experience with
>>> that, as
>> all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>>
>> As are mine. ;-)
>> In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get it
>> only (in the HTML man-page and the PDF) if I build the package.
>>
>> Helmut
>>
>> --
>> Ing. Helmut Sch?tz
>> BEBAC ? Consultancy Services for
>> Bioequivalence and Bioavailability Studies Neubaugasse 36/11
>> 1070 Vienna, Austria
>> E helmut.schuetz at bebac.at
>> W https://bebac.at/
>> F https://forum.bebac.at/
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Wed May 13 19:40:39 2020
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Wed, 13 May 2020 17:40:39 +0000
Subject: [R-pkg-devel] RES: MathJax for Rd files
In-Reply-To: <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <000001d62944$888b16e0$99a144a0$@gmail.com>
 <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>
Message-ID: <78d45d95a561426980a4ba55ca3542b6@UM-MAIL3214.unimaas.nl>

Thanks, Duncan. I was about to respond to suggest the same thing.

One way of getting this to work:

Sys.setenv(MATHJAXR.USECDN = "TRUE")
Rd <- file.path("<path>/<file>.Rd") # specify the .Rd file you want to preview
outfile <- tempfile(fileext = ".html")
browseURL(tools::Rd2HTML(Rd, outfile, macros="<path to library where mathjaxr is installed>/mathjaxr/help/macros/mathjax.Rd"))

Best,
Wolfgang

>-----Original Message-----
>From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
>Sent: Wednesday, 13 May, 2020 19:30
>To: tiagoolivoto at gmail.com; Viechtbauer, Wolfgang (SP); 'Helmut Sch?tz'; r-
>package-devel at r-project.org
>Subject: Re: [R-pkg-devel] RES: MathJax for Rd files
>
>On 13/05/2020 12:35 p.m., Tiago Olivoto wrote:
>> Thanks, Wolfgang and Helmut for the explanations.
>> When I was trying to use
>>
>> #'\if{html}{\out{'<script id="MathJax-script" async
>> #''src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full.js
>> #'</script> }}
>> #'
>> #'And then typing
>> #' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
>> My mgidi.Rd file was produced with devtools::document();
>> then, I just used ?mgidi, and the html page was rendered nicely.
>>
>> If I could do the same with mathjaxr, It would be nice, because I wouldn't
>need to install the package to see if the equations are as I expect
>> Anyway, mathjaxr is a very useful package.
>> Congratulations on the efforts for developing it.
>
>Sounds like it's a devtools issue.  I don't know how they are simulating
>the install, but it needs to say to use the mathjaxr macros when
>converting the Rd pages.
>
>Duncan Murdoch
>
>> Best
>> Olivoto
>>
>> -----Mensagem original-----
>> De: Viechtbauer, Wolfgang (SP)
><wolfgang.viechtbauer at maastrichtuniversity.nl>
>> Enviada em: quarta-feira, 13 de maio de 2020 13:14
>> Para: Helmut Sch?tz <helmut.schuetz at bebac.at>; tiagoolivoto at gmail.com; r-
>package-devel at r-project.org
>> Assunto: RE: [R-pkg-devel] MathJax for Rd files
>>
>> Thanks for the info! Can confirm now that I tried this (I don't usually
>use RStudio). That's an RStudio issue then. My guess is that 'Preview' uses
>tools::Rd2HTML() and that indeed won't automatically understand macros
>coming from mathjaxr (or any add-on package for that matter). This would be
>an issue to raise with the RStudio folks then.
>>
>> But once a package is installed, the equations are nicely rendered also in
>the RStudio help browser, so that part works.
>>
>> Best,
>> Wolfgang
>>
>>> -----Original Message-----
>>> From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>>> Sent: Wednesday, 13 May, 2020 17:01
>>> To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com;
>>> r-package-devel at r- project.org
>>> Subject: Re: [R-pkg-devel] MathJax for Rd files
>>>
>>> Hi Wolfgang,
>>>
>>> Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>>>> Seems like you are using roxygen2. I have little experience with
>>>> that, as
>>> all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>>>
>>> As are mine. ;-)
>>> In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get it
>>> only (in the HTML man-page and the PDF) if I build the package.
>>>
>>> Helmut
>>>
>>> --
>>> Ing. Helmut Sch?tz
>>> BEBAC ? Consultancy Services for
>>> Bioequivalence and Bioavailability Studies Neubaugasse 36/11
>>> 1070 Vienna, Austria
>>> E helmut.schuetz at bebac.at
>>> W https://bebac.at/
>>> F https://forum.bebac.at/

From t|@goo||voto @end|ng |rom gm@||@com  Wed May 13 20:30:51 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 13 May 2020 15:30:51 -0300
Subject: [R-pkg-devel] RES:  RES: MathJax for Rd files
In-Reply-To: <78d45d95a561426980a4ba55ca3542b6@UM-MAIL3214.unimaas.nl>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <000001d62944$888b16e0$99a144a0$@gmail.com>
 <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>
 <78d45d95a561426980a4ba55ca3542b6@UM-MAIL3214.unimaas.nl>
Message-ID: <000501d62954$a37dca50$ea795ef0$@gmail.com>

Thank you so much! It works!
In my example, I've created a simple helper function, preview_rd()

preview_rd <- function(rdfile){ # without '.rd'
Rd <- file.path(paste("man/", rdfile, ".rd", sep = "")) # specify the .Rd file you want to preview
outfile <- tempfile(fileext = ".html")
browseURL(tools::Rd2HTML(Rd, outfile, macros="D:/Documents/R/win-library/4.0/mathjaxr/help/macros/mathjax.Rd"))
}

I added the macros \loadmathjax and \mjsdeqn in the mgidi.R file, ran devtools::document() and then preview_rd("mgidi")
The html was rendered nicely (in my browser) and shows the equation without installing the package.
That's what I was looking for.
Thanks again!
Olivoto

-----Mensagem original-----
De: Viechtbauer, Wolfgang (SP) <wolfgang.viechtbauer at maastrichtuniversity.nl> 
Enviada em: quarta-feira, 13 de maio de 2020 14:41
Para: Duncan Murdoch <murdoch.duncan at gmail.com>; tiagoolivoto at gmail.com; r-package-devel at r-project.org
Assunto: RE: [R-pkg-devel] RES: MathJax for Rd files

Thanks, Duncan. I was about to respond to suggest the same thing.

One way of getting this to work:

Sys.setenv(MATHJAXR.USECDN = "TRUE")
Rd <- file.path("<path>/<file>.Rd") # specify the .Rd file you want to preview outfile <- tempfile(fileext = ".html") browseURL(tools::Rd2HTML(Rd, outfile, macros="<path to library where mathjaxr is installed>/mathjaxr/help/macros/mathjax.Rd"))

Best,
Wolfgang

>-----Original Message-----
>From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
>Sent: Wednesday, 13 May, 2020 19:30
>To: tiagoolivoto at gmail.com; Viechtbauer, Wolfgang (SP); 'Helmut 
>Sch?tz'; r- package-devel at r-project.org
>Subject: Re: [R-pkg-devel] RES: MathJax for Rd files
>
>On 13/05/2020 12:35 p.m., Tiago Olivoto wrote:
>> Thanks, Wolfgang and Helmut for the explanations.
>> When I was trying to use
>>
>> #'\if{html}{\out{'<script id="MathJax-script" async 
>> #''src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full
>> .js
>> #'</script> }}
>> #'
>> #'And then typing
>> #' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
>> My mgidi.Rd file was produced with devtools::document(); then, I just 
>> used ?mgidi, and the html page was rendered nicely.
>>
>> If I could do the same with mathjaxr, It would be nice, because I 
>> wouldn't
>need to install the package to see if the equations are as I expect
>> Anyway, mathjaxr is a very useful package.
>> Congratulations on the efforts for developing it.
>
>Sounds like it's a devtools issue.  I don't know how they are 
>simulating the install, but it needs to say to use the mathjaxr macros 
>when converting the Rd pages.
>
>Duncan Murdoch
>
>> Best
>> Olivoto
>>
>> -----Mensagem original-----
>> De: Viechtbauer, Wolfgang (SP)
><wolfgang.viechtbauer at maastrichtuniversity.nl>
>> Enviada em: quarta-feira, 13 de maio de 2020 13:14
>> Para: Helmut Sch?tz <helmut.schuetz at bebac.at>; 
>> tiagoolivoto at gmail.com; r-
>package-devel at r-project.org
>> Assunto: RE: [R-pkg-devel] MathJax for Rd files
>>
>> Thanks for the info! Can confirm now that I tried this (I don't 
>> usually
>use RStudio). That's an RStudio issue then. My guess is that 'Preview' 
>uses
>tools::Rd2HTML() and that indeed won't automatically understand macros 
>coming from mathjaxr (or any add-on package for that matter). This 
>would be an issue to raise with the RStudio folks then.
>>
>> But once a package is installed, the equations are nicely rendered 
>> also in
>the RStudio help browser, so that part works.
>>
>> Best,
>> Wolfgang
>>
>>> -----Original Message-----
>>> From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>>> Sent: Wednesday, 13 May, 2020 17:01
>>> To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com;
>>> r-package-devel at r- project.org
>>> Subject: Re: [R-pkg-devel] MathJax for Rd files
>>>
>>> Hi Wolfgang,
>>>
>>> Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>>>> Seems like you are using roxygen2. I have little experience with 
>>>> that, as
>>> all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>>>
>>> As are mine. ;-)
>>> In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get 
>>> it only (in the HTML man-page and the PDF) if I build the package.
>>>
>>> Helmut
>>>
>>> --
>>> Ing. Helmut Sch?tz
>>> BEBAC ? Consultancy Services for
>>> Bioequivalence and Bioavailability Studies Neubaugasse 36/11
>>> 1070 Vienna, Austria
>>> E helmut.schuetz at bebac.at
>>> W https://bebac.at/
>>> F https://forum.bebac.at/


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Wed May 13 20:38:27 2020
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Wed, 13 May 2020 18:38:27 +0000
Subject: [R-pkg-devel] RES: MathJax for Rd files
In-Reply-To: <000501d62954$a37dca50$ea795ef0$@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <000001d62944$888b16e0$99a144a0$@gmail.com>
 <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>
 <78d45d95a561426980a4ba55ca3542b6@UM-MAIL3214.unimaas.nl>
 <000501d62954$a37dca50$ea795ef0$@gmail.com>
Message-ID: <2093061fcaa7469e93ea0583a0c57d17@UM-MAIL3214.unimaas.nl>

Glad to hear that. I might consider adding a function along those lines to mathjaxr itself, to make it easier to preview files while working on a help page.

Best,
Wolfgang

>-----Original Message-----
>From: Tiago Olivoto [mailto:tiagoolivoto at gmail.com]
>Sent: Wednesday, 13 May, 2020 20:31
>To: Viechtbauer, Wolfgang (SP); 'Duncan Murdoch'; r-package-devel at r-
>project.org
>Subject: RES: [R-pkg-devel] RES: MathJax for Rd files
>
>Thank you so much! It works!
>In my example, I've created a simple helper function, preview_rd()
>
>preview_rd <- function(rdfile){ # without '.rd'
>Rd <- file.path(paste("man/", rdfile, ".rd", sep = "")) # specify the .Rd
>file you want to preview
>outfile <- tempfile(fileext = ".html")
>browseURL(tools::Rd2HTML(Rd, outfile, macros="D:/Documents/R/win-
>library/4.0/mathjaxr/help/macros/mathjax.Rd"))
>}
>
>I added the macros \loadmathjax and \mjsdeqn in the mgidi.R file, ran
>devtools::document() and then preview_rd("mgidi")
>The html was rendered nicely (in my browser) and shows the equation without
>installing the package.
>That's what I was looking for.
>Thanks again!
>Olivoto
>
>-----Mensagem original-----
>De: Viechtbauer, Wolfgang (SP)
><wolfgang.viechtbauer at maastrichtuniversity.nl>
>Enviada em: quarta-feira, 13 de maio de 2020 14:41
>Para: Duncan Murdoch <murdoch.duncan at gmail.com>; tiagoolivoto at gmail.com; r-
>package-devel at r-project.org
>Assunto: RE: [R-pkg-devel] RES: MathJax for Rd files
>
>Thanks, Duncan. I was about to respond to suggest the same thing.
>
>One way of getting this to work:
>
>Sys.setenv(MATHJAXR.USECDN = "TRUE")
>Rd <- file.path("<path>/<file>.Rd") # specify the .Rd file you want to
>preview outfile <- tempfile(fileext = ".html") browseURL(tools::Rd2HTML(Rd,
>outfile, macros="<path to library where mathjaxr is
>installed>/mathjaxr/help/macros/mathjax.Rd"))
>
>Best,
>Wolfgang
>
>>-----Original Message-----
>>From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
>>Sent: Wednesday, 13 May, 2020 19:30
>>To: tiagoolivoto at gmail.com; Viechtbauer, Wolfgang (SP); 'Helmut
>>Sch?tz'; r- package-devel at r-project.org
>>Subject: Re: [R-pkg-devel] RES: MathJax for Rd files
>>
>>On 13/05/2020 12:35 p.m., Tiago Olivoto wrote:
>>> Thanks, Wolfgang and Helmut for the explanations.
>>> When I was trying to use
>>>
>>> #'\if{html}{\out{'<script id="MathJax-script" async
>>> #''src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full
>>> .js
>>> #'</script> }}
>>> #'
>>> #'And then typing
>>> #' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
>>> My mgidi.Rd file was produced with devtools::document(); then, I just
>>> used ?mgidi, and the html page was rendered nicely.
>>>
>>> If I could do the same with mathjaxr, It would be nice, because I
>>> wouldn't
>>need to install the package to see if the equations are as I expect
>>> Anyway, mathjaxr is a very useful package.
>>> Congratulations on the efforts for developing it.
>>
>>Sounds like it's a devtools issue.  I don't know how they are
>>simulating the install, but it needs to say to use the mathjaxr macros
>>when converting the Rd pages.
>>
>>Duncan Murdoch
>>
>>> Best
>>> Olivoto
>>>
>>> -----Mensagem original-----
>>> De: Viechtbauer, Wolfgang (SP)
>><wolfgang.viechtbauer at maastrichtuniversity.nl>
>>> Enviada em: quarta-feira, 13 de maio de 2020 13:14
>>> Para: Helmut Sch?tz <helmut.schuetz at bebac.at>;
>>> tiagoolivoto at gmail.com; r-
>>package-devel at r-project.org
>>> Assunto: RE: [R-pkg-devel] MathJax for Rd files
>>>
>>> Thanks for the info! Can confirm now that I tried this (I don't
>>> usually
>>use RStudio). That's an RStudio issue then. My guess is that 'Preview'
>>uses
>>tools::Rd2HTML() and that indeed won't automatically understand macros
>>coming from mathjaxr (or any add-on package for that matter). This
>>would be an issue to raise with the RStudio folks then.
>>>
>>> But once a package is installed, the equations are nicely rendered
>>> also in
>>the RStudio help browser, so that part works.
>>>
>>> Best,
>>> Wolfgang
>>>
>>>> -----Original Message-----
>>>> From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>>>> Sent: Wednesday, 13 May, 2020 17:01
>>>> To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com;
>>>> r-package-devel at r- project.org
>>>> Subject: Re: [R-pkg-devel] MathJax for Rd files
>>>>
>>>> Hi Wolfgang,
>>>>
>>>> Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>>>>> Seems like you are using roxygen2. I have little experience with
>>>>> that, as
>>>> all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>>>>
>>>> As are mine. ;-)
>>>> In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get
>>>> it only (in the HTML man-page and the PDF) if I build the package.
>>>>
>>>> Helmut
>>>>
>>>> --
>>>> Ing. Helmut Sch?tz
>>>> BEBAC ? Consultancy Services for
>>>> Bioequivalence and Bioavailability Studies Neubaugasse 36/11
>>>> 1070 Vienna, Austria
>>>> E helmut.schuetz at bebac.at
>>>> W https://bebac.at/
>>>> F https://forum.bebac.at/

From murdoch@dunc@n @end|ng |rom gm@||@com  Wed May 13 21:16:14 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 13 May 2020 15:16:14 -0400
Subject: [R-pkg-devel] RES:  RES: MathJax for Rd files
In-Reply-To: <000501d62954$a37dca50$ea795ef0$@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <000001d62944$888b16e0$99a144a0$@gmail.com>
 <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>
 <78d45d95a561426980a4ba55ca3542b6@UM-MAIL3214.unimaas.nl>
 <000501d62954$a37dca50$ea795ef0$@gmail.com>
Message-ID: <6eaa6d7e-ede3-deaf-27c2-40a6a9a63dbe@gmail.com>

On 13/05/2020 2:30 p.m., Tiago Olivoto wrote:
> Thank you so much! It works!
> In my example, I've created a simple helper function, preview_rd()
> 
> preview_rd <- function(rdfile){ # without '.rd'
> Rd <- file.path(paste("man/", rdfile, ".rd", sep = "")) # specify the .Rd file you want to preview
> outfile <- tempfile(fileext = ".html")
> browseURL(tools::Rd2HTML(Rd, outfile, macros="D:/Documents/R/win-library/4.0/mathjaxr/help/macros/mathjax.Rd"))
> }

Good to hear.  I'd suggest this way to find the macros:

   browseURL(tools::Rd2HTML(Rd, outfile, macros = 
system.file("help/macros/mathjax.Rd", package = "mathjaxr")))

so that it works if you use it on a different system that puts the 
library somewhere else.

Duncan Murdoch

> 
> I added the macros \loadmathjax and \mjsdeqn in the mgidi.R file, ran devtools::document() and then preview_rd("mgidi")
> The html was rendered nicely (in my browser) and shows the equation without installing the package.
> That's what I was looking for.
> Thanks again!
> Olivoto
> 
> -----Mensagem original-----
> De: Viechtbauer, Wolfgang (SP) <wolfgang.viechtbauer at maastrichtuniversity.nl>
> Enviada em: quarta-feira, 13 de maio de 2020 14:41
> Para: Duncan Murdoch <murdoch.duncan at gmail.com>; tiagoolivoto at gmail.com; r-package-devel at r-project.org
> Assunto: RE: [R-pkg-devel] RES: MathJax for Rd files
> 
> Thanks, Duncan. I was about to respond to suggest the same thing.
> 
> One way of getting this to work:
> 
> Sys.setenv(MATHJAXR.USECDN = "TRUE")
> Rd <- file.path("<path>/<file>.Rd") # specify the .Rd file you want to preview outfile <- tempfile(fileext = ".html") browseURL(tools::Rd2HTML(Rd, outfile, macros="<path to library where mathjaxr is installed>/mathjaxr/help/macros/mathjax.Rd"))
> 
> Best,
> Wolfgang
> 
>> -----Original Message-----
>> From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
>> Sent: Wednesday, 13 May, 2020 19:30
>> To: tiagoolivoto at gmail.com; Viechtbauer, Wolfgang (SP); 'Helmut
>> Sch?tz'; r- package-devel at r-project.org
>> Subject: Re: [R-pkg-devel] RES: MathJax for Rd files
>>
>> On 13/05/2020 12:35 p.m., Tiago Olivoto wrote:
>>> Thanks, Wolfgang and Helmut for the explanations.
>>> When I was trying to use
>>>
>>> #'\if{html}{\out{'<script id="MathJax-script" async
>>> #''src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full
>>> .js
>>> #'</script> }}
>>> #'
>>> #'And then typing
>>> #' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
>>> My mgidi.Rd file was produced with devtools::document(); then, I just
>>> used ?mgidi, and the html page was rendered nicely.
>>>
>>> If I could do the same with mathjaxr, It would be nice, because I
>>> wouldn't
>> need to install the package to see if the equations are as I expect
>>> Anyway, mathjaxr is a very useful package.
>>> Congratulations on the efforts for developing it.
>>
>> Sounds like it's a devtools issue.  I don't know how they are
>> simulating the install, but it needs to say to use the mathjaxr macros
>> when converting the Rd pages.
>>
>> Duncan Murdoch
>>
>>> Best
>>> Olivoto
>>>
>>> -----Mensagem original-----
>>> De: Viechtbauer, Wolfgang (SP)
>> <wolfgang.viechtbauer at maastrichtuniversity.nl>
>>> Enviada em: quarta-feira, 13 de maio de 2020 13:14
>>> Para: Helmut Sch?tz <helmut.schuetz at bebac.at>;
>>> tiagoolivoto at gmail.com; r-
>> package-devel at r-project.org
>>> Assunto: RE: [R-pkg-devel] MathJax for Rd files
>>>
>>> Thanks for the info! Can confirm now that I tried this (I don't
>>> usually
>> use RStudio). That's an RStudio issue then. My guess is that 'Preview'
>> uses
>> tools::Rd2HTML() and that indeed won't automatically understand macros
>> coming from mathjaxr (or any add-on package for that matter). This
>> would be an issue to raise with the RStudio folks then.
>>>
>>> But once a package is installed, the equations are nicely rendered
>>> also in
>> the RStudio help browser, so that part works.
>>>
>>> Best,
>>> Wolfgang
>>>
>>>> -----Original Message-----
>>>> From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>>>> Sent: Wednesday, 13 May, 2020 17:01
>>>> To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com;
>>>> r-package-devel at r- project.org
>>>> Subject: Re: [R-pkg-devel] MathJax for Rd files
>>>>
>>>> Hi Wolfgang,
>>>>
>>>> Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>>>>> Seems like you are using roxygen2. I have little experience with
>>>>> that, as
>>>> all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>>>>
>>>> As are mine. ;-)
>>>> In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get
>>>> it only (in the HTML man-page and the PDF) if I build the package.
>>>>
>>>> Helmut
>>>>
>>>> --
>>>> Ing. Helmut Sch?tz
>>>> BEBAC ? Consultancy Services for
>>>> Bioequivalence and Bioavailability Studies Neubaugasse 36/11
>>>> 1070 Vienna, Austria
>>>> E helmut.schuetz at bebac.at
>>>> W https://bebac.at/
>>>> F https://forum.bebac.at/
>


From t|@goo||voto @end|ng |rom gm@||@com  Wed May 13 21:25:10 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 13 May 2020 16:25:10 -0300
Subject: [R-pkg-devel] RES: RES:  RES: MathJax for Rd files
In-Reply-To: <6eaa6d7e-ede3-deaf-27c2-40a6a9a63dbe@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <000001d62944$888b16e0$99a144a0$@gmail.com>
 <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>
 <78d45d95a561426980a4ba55ca3542b6@UM-MAIL3214.unimaas.nl>
 <000501d62954$a37dca50$ea795ef0$@gmail.com>
 <6eaa6d7e-ede3-deaf-27c2-40a6a9a63dbe@gmail.com>
Message-ID: <000c01d6295c$3a090cd0$ae1b2670$@gmail.com>

Definitively this is a better way to find the macros.
I think a function like 'preview_rd()' could be useful in mathjaxr

Thanks for all support
Olivoto

-----Mensagem original-----
De: Duncan Murdoch <murdoch.duncan at gmail.com> 
Enviada em: quarta-feira, 13 de maio de 2020 16:16
Para: tiagoolivoto at gmail.com; 'Viechtbauer, Wolfgang (SP)' <wolfgang.viechtbauer at maastrichtuniversity.nl>; r-package-devel at r-project.org
Assunto: Re: RES: [R-pkg-devel] RES: MathJax for Rd files

On 13/05/2020 2:30 p.m., Tiago Olivoto wrote:
> Thank you so much! It works!
> In my example, I've created a simple helper function, preview_rd()
> 
> preview_rd <- function(rdfile){ # without '.rd'
> Rd <- file.path(paste("man/", rdfile, ".rd", sep = "")) # specify the 
> .Rd file you want to preview outfile <- tempfile(fileext = ".html") 
> browseURL(tools::Rd2HTML(Rd, outfile, 
> macros="D:/Documents/R/win-library/4.0/mathjaxr/help/macros/mathjax.Rd
> "))
> }

Good to hear.  I'd suggest this way to find the macros:

   browseURL(tools::Rd2HTML(Rd, outfile, macros = system.file("help/macros/mathjax.Rd", package = "mathjaxr")))

so that it works if you use it on a different system that puts the library somewhere else.

Duncan Murdoch

> 
> I added the macros \loadmathjax and \mjsdeqn in the mgidi.R file, ran 
> devtools::document() and then preview_rd("mgidi") The html was rendered nicely (in my browser) and shows the equation without installing the package.
> That's what I was looking for.
> Thanks again!
> Olivoto
> 
> -----Mensagem original-----
> De: Viechtbauer, Wolfgang (SP) 
> <wolfgang.viechtbauer at maastrichtuniversity.nl>
> Enviada em: quarta-feira, 13 de maio de 2020 14:41
> Para: Duncan Murdoch <murdoch.duncan at gmail.com>; 
> tiagoolivoto at gmail.com; r-package-devel at r-project.org
> Assunto: RE: [R-pkg-devel] RES: MathJax for Rd files
> 
> Thanks, Duncan. I was about to respond to suggest the same thing.
> 
> One way of getting this to work:
> 
> Sys.setenv(MATHJAXR.USECDN = "TRUE")
> Rd <- file.path("<path>/<file>.Rd") # specify the .Rd file you want to 
> preview outfile <- tempfile(fileext = ".html") 
> browseURL(tools::Rd2HTML(Rd, outfile, macros="<path to library where 
> mathjaxr is installed>/mathjaxr/help/macros/mathjax.Rd"))
> 
> Best,
> Wolfgang
> 
>> -----Original Message-----
>> From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
>> Sent: Wednesday, 13 May, 2020 19:30
>> To: tiagoolivoto at gmail.com; Viechtbauer, Wolfgang (SP); 'Helmut 
>> Sch?tz'; r- package-devel at r-project.org
>> Subject: Re: [R-pkg-devel] RES: MathJax for Rd files
>>
>> On 13/05/2020 12:35 p.m., Tiago Olivoto wrote:
>>> Thanks, Wolfgang and Helmut for the explanations.
>>> When I was trying to use
>>>
>>> #'\if{html}{\out{'<script id="MathJax-script" async 
>>> #''src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-ful
>>> l
>>> .js
>>> #'</script> }}
>>> #'
>>> #'And then typing
>>> #' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
>>> My mgidi.Rd file was produced with devtools::document(); then, I 
>>> just used ?mgidi, and the html page was rendered nicely.
>>>
>>> If I could do the same with mathjaxr, It would be nice, because I 
>>> wouldn't
>> need to install the package to see if the equations are as I expect
>>> Anyway, mathjaxr is a very useful package.
>>> Congratulations on the efforts for developing it.
>>
>> Sounds like it's a devtools issue.  I don't know how they are 
>> simulating the install, but it needs to say to use the mathjaxr 
>> macros when converting the Rd pages.
>>
>> Duncan Murdoch
>>
>>> Best
>>> Olivoto
>>>
>>> -----Mensagem original-----
>>> De: Viechtbauer, Wolfgang (SP)
>> <wolfgang.viechtbauer at maastrichtuniversity.nl>
>>> Enviada em: quarta-feira, 13 de maio de 2020 13:14
>>> Para: Helmut Sch?tz <helmut.schuetz at bebac.at>; 
>>> tiagoolivoto at gmail.com; r-
>> package-devel at r-project.org
>>> Assunto: RE: [R-pkg-devel] MathJax for Rd files
>>>
>>> Thanks for the info! Can confirm now that I tried this (I don't 
>>> usually
>> use RStudio). That's an RStudio issue then. My guess is that 'Preview'
>> uses
>> tools::Rd2HTML() and that indeed won't automatically understand 
>> macros coming from mathjaxr (or any add-on package for that matter). 
>> This would be an issue to raise with the RStudio folks then.
>>>
>>> But once a package is installed, the equations are nicely rendered 
>>> also in
>> the RStudio help browser, so that part works.
>>>
>>> Best,
>>> Wolfgang
>>>
>>>> -----Original Message-----
>>>> From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>>>> Sent: Wednesday, 13 May, 2020 17:01
>>>> To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com;
>>>> r-package-devel at r- project.org
>>>> Subject: Re: [R-pkg-devel] MathJax for Rd files
>>>>
>>>> Hi Wolfgang,
>>>>
>>>> Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>>>>> Seems like you are using roxygen2. I have little experience with 
>>>>> that, as
>>>> all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>>>>
>>>> As are mine. ;-)
>>>> In the HTML-preview of RStudio the LaTeX is indeed not parsed. I 
>>>> get it only (in the HTML man-page and the PDF) if I build the package.
>>>>
>>>> Helmut
>>>>
>>>> --
>>>> Ing. Helmut Sch?tz
>>>> BEBAC ? Consultancy Services for
>>>> Bioequivalence and Bioavailability Studies Neubaugasse 36/11
>>>> 1070 Vienna, Austria
>>>> E helmut.schuetz at bebac.at
>>>> W https://bebac.at/
>>>> F https://forum.bebac.at/
> 


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Wed May 13 23:25:43 2020
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Wed, 13 May 2020 21:25:43 +0000
Subject: [R-pkg-devel] RES:  RES: MathJax for Rd files
In-Reply-To: <000c01d6295c$3a090cd0$ae1b2670$@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <000001d62944$888b16e0$99a144a0$@gmail.com>
 <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>
 <78d45d95a561426980a4ba55ca3542b6@UM-MAIL3214.unimaas.nl>
 <000501d62954$a37dca50$ea795ef0$@gmail.com>
 <6eaa6d7e-ede3-deaf-27c2-40a6a9a63dbe@gmail.com>
 <000c01d6295c$3a090cd0$ae1b2670$@gmail.com>
Message-ID: <e4ef20aae4824fc5b96c6a800eb1ff49@UM-MAIL3214.unimaas.nl>

I've added a preview_rd() function to the 'devel' version of mathjaxr:

https://github.com/wviechtb/mathjaxr

If you want to give this a try:

remotes::install_github("wviechtb/mathjaxr")
library(mathjaxr)

Then set the working dir to the root of the package you are working on. Then use:

preview_rd(Rdfile)

with the name of the Rd file given as a character string (either with or without the .Rd/.rd extension).

By default, the browser (or a new tab in your browser) should open up. But if you then make further changes to the Rd file, opening up a new tab each time is inconvenient. Use:

preview_rd(Rdfile, view=FALSE)

to prevent that (then just refresh the page in the open tab in your browser to see the updates).

One limitation: As far as I can tell, it will not be possible to load MathJax from the mathjaxr package when using preview_rd(). So, it will be loaded via the CDN, which means that you need an internet connection for equations to render.

Best,
Wolfgang

>-----Original Message-----
>From: Tiago Olivoto [mailto:tiagoolivoto at gmail.com]
>Sent: Wednesday, 13 May, 2020 21:25
>To: 'Duncan Murdoch'; Viechtbauer, Wolfgang (SP); r-package-devel at r-
>project.org
>Subject: RES: RES: [R-pkg-devel] RES: MathJax for Rd files
>
>Definitively this is a better way to find the macros.
>I think a function like 'preview_rd()' could be useful in mathjaxr
>
>Thanks for all support
>Olivoto
>
>-----Mensagem original-----
>De: Duncan Murdoch <murdoch.duncan at gmail.com>
>Enviada em: quarta-feira, 13 de maio de 2020 16:16
>Para: tiagoolivoto at gmail.com; 'Viechtbauer, Wolfgang (SP)'
><wolfgang.viechtbauer at maastrichtuniversity.nl>; r-package-devel at r-
>project.org
>Assunto: Re: RES: [R-pkg-devel] RES: MathJax for Rd files
>
>On 13/05/2020 2:30 p.m., Tiago Olivoto wrote:
>> Thank you so much! It works!
>> In my example, I've created a simple helper function, preview_rd()
>>
>> preview_rd <- function(rdfile){ # without '.rd'
>> Rd <- file.path(paste("man/", rdfile, ".rd", sep = "")) # specify the
>> .Rd file you want to preview outfile <- tempfile(fileext = ".html")
>> browseURL(tools::Rd2HTML(Rd, outfile,
>> macros="D:/Documents/R/win-library/4.0/mathjaxr/help/macros/mathjax.Rd
>> "))
>> }
>
>Good to hear.  I'd suggest this way to find the macros:
>
>   browseURL(tools::Rd2HTML(Rd, outfile, macros =
>system.file("help/macros/mathjax.Rd", package = "mathjaxr")))
>
>so that it works if you use it on a different system that puts the library
>somewhere else.
>
>Duncan Murdoch

From t|@goo||voto @end|ng |rom gm@||@com  Thu May 14 02:30:50 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 13 May 2020 21:30:50 -0300
Subject: [R-pkg-devel] RES: RES:  RES: MathJax for Rd files
In-Reply-To: <e4ef20aae4824fc5b96c6a800eb1ff49@UM-MAIL3214.unimaas.nl>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <000001d62944$888b16e0$99a144a0$@gmail.com>
 <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>
 <78d45d95a561426980a4ba55ca3542b6@UM-MAIL3214.unimaas.nl>
 <000501d62954$a37dca50$ea795ef0$@gmail.com>
 <6eaa6d7e-ede3-deaf-27c2-40a6a9a63dbe@gmail.com>
 <000c01d6295c$3a090cd0$ae1b2670$@gmail.com>
 <e4ef20aae4824fc5b96c6a800eb1ff49@UM-MAIL3214.unimaas.nl>
Message-ID: <000001d62986$ed418960$c7c49c20$@gmail.com>

I installed the 'devel' version of mathjaxr and tested preview_rd()
All seems to be working fine!
Thank you for the quick and useful implementation!
Best,
Olivoto

-----Mensagem original-----
De: Viechtbauer, Wolfgang (SP) <wolfgang.viechtbauer at maastrichtuniversity.nl> 
Enviada em: quarta-feira, 13 de maio de 2020 18:26
Para: tiagoolivoto at gmail.com; 'Duncan Murdoch' <murdoch.duncan at gmail.com>; r-package-devel at r-project.org
Assunto: RE: RES: [R-pkg-devel] RES: MathJax for Rd files

I've added a preview_rd() function to the 'devel' version of mathjaxr:

https://github.com/wviechtb/mathjaxr

If you want to give this a try:

remotes::install_github("wviechtb/mathjaxr")
library(mathjaxr)

Then set the working dir to the root of the package you are working on. Then use:

preview_rd(Rdfile)

with the name of the Rd file given as a character string (either with or without the .Rd/.rd extension).

By default, the browser (or a new tab in your browser) should open up. But if you then make further changes to the Rd file, opening up a new tab each time is inconvenient. Use:

preview_rd(Rdfile, view=FALSE)

to prevent that (then just refresh the page in the open tab in your browser to see the updates).

One limitation: As far as I can tell, it will not be possible to load MathJax from the mathjaxr package when using preview_rd(). So, it will be loaded via the CDN, which means that you need an internet connection for equations to render.

Best,
Wolfgang

>-----Original Message-----
>From: Tiago Olivoto [mailto:tiagoolivoto at gmail.com]
>Sent: Wednesday, 13 May, 2020 21:25
>To: 'Duncan Murdoch'; Viechtbauer, Wolfgang (SP); r-package-devel at r- 
>project.org
>Subject: RES: RES: [R-pkg-devel] RES: MathJax for Rd files
>
>Definitively this is a better way to find the macros.
>I think a function like 'preview_rd()' could be useful in mathjaxr
>
>Thanks for all support
>Olivoto
>
>-----Mensagem original-----
>De: Duncan Murdoch <murdoch.duncan at gmail.com> Enviada em: quarta-feira, 
>13 de maio de 2020 16:16
>Para: tiagoolivoto at gmail.com; 'Viechtbauer, Wolfgang (SP)'
><wolfgang.viechtbauer at maastrichtuniversity.nl>; r-package-devel at r- 
>project.org
>Assunto: Re: RES: [R-pkg-devel] RES: MathJax for Rd files
>
>On 13/05/2020 2:30 p.m., Tiago Olivoto wrote:
>> Thank you so much! It works!
>> In my example, I've created a simple helper function, preview_rd()
>>
>> preview_rd <- function(rdfile){ # without '.rd'
>> Rd <- file.path(paste("man/", rdfile, ".rd", sep = "")) # specify the 
>> .Rd file you want to preview outfile <- tempfile(fileext = ".html") 
>> browseURL(tools::Rd2HTML(Rd, outfile, 
>> macros="D:/Documents/R/win-library/4.0/mathjaxr/help/macros/mathjax.R
>> d
>> "))
>> }
>
>Good to hear.  I'd suggest this way to find the macros:
>
>   browseURL(tools::Rd2HTML(Rd, outfile, macros = 
>system.file("help/macros/mathjax.Rd", package = "mathjaxr")))
>
>so that it works if you use it on a different system that puts the 
>library somewhere else.
>
>Duncan Murdoch


